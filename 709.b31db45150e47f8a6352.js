"use strict";(self.webpackChunkfinance_center=self.webpackChunkfinance_center||[]).push([[709],{8709:(Rt,U,n)=>{n.r(U),n.d(U,{CryptoModule:()=>ft});var v=n(8583),p=n(8741),m=n(5319),e=n(3018),x=n(9765),Z=n(5435),B=n(5257);class w{constructor(r="",t="",s="",i="",o="",c="",l=""){this.cryptoCode=r,this.cryptoName=t,this.fiatCode=s,this.exchangeRate=i,this.bidPrice=o,this.askPrice=c,this.time=l}}class Y{constructor(r=[],t=[],s=[],i=[],o=[],c=[]){this.dates=r,this.opens=t,this.highs=s,this.lows=i,this.closes=o,this.volumes=c}}class F{constructor(r=[],t=[],s=[],i=[],o=[],c=[],l=[]){this.dates=r,this.opens=t,this.highs=s,this.lows=i,this.closes=o,this.volumes=c,this.marketCap=l}}var E=n(5758),u=(()=>{return(a=u||(u={})).FUNCTION="function",a.CURRENCY_EXCHANGE_RATE="CURRENCY_EXCHANGE_RATE",a.CRYPTO_INTRADAY="CRYPTO_INTRADAY",a.DIGITAL_CURRENCY_DAILY="DIGITAL_CURRENCY_DAILY",a.DIGITAL_CURRENCY_WEEKLY="DIGITAL_CURRENCY_WEEKLY",a.DIGITAL_CURRENCY_MONTHLY="DIGITAL_CURRENCY_MONTHLY",u;var a})(),h=(()=>{return(a=h||(h={})).FROM_CURRENCY="from_currency",a.TO_CURRENCY="to_currency",a.SYMBOL="symbol",a.MARKET="market",a.INTERVAL="interval",a.OUTPUTSIZE="outputsize",a.DATATYPE="datatype",h;var a})(),G=n(1841);let M=(()=>{class a{constructor(t){this.http=t,this.apiUrl="https://alpha-vantage.p.rapidapi.com/query"}getCurrentExchangeRates(t){return(0,E.D)([this.createCurrentExchangeRatesRequest("BTC",t),this.createCurrentExchangeRatesRequest("ETH",t)])}getDetailsExchangeRates(t,s){return(0,E.D)([this.getIntradayExchangeRates(t,s),this.getDailyExchangeRates(t,s)])}getIntradayExchangeRates(t,s){return this.createIntradayExchangeRatesRequest(t,s)}getDailyExchangeRates(t,s){return this.createDailyExchangeRatesRequest(t,s)}createCurrentExchangeRatesRequest(t,s){return this.http.get(`${this.apiUrl}?${u.FUNCTION}=${u.CURRENCY_EXCHANGE_RATE}&${h.FROM_CURRENCY}=${t}&${h.TO_CURRENCY}=${s}&${h.DATATYPE}=json`)}createIntradayExchangeRatesRequest(t,s){return this.http.get(`${this.apiUrl}?${u.FUNCTION}=${u.CRYPTO_INTRADAY}&${h.SYMBOL}=${t}&${h.MARKET}=${s}&${h.INTERVAL}=5min&${h.OUTPUTSIZE}=compact&${h.DATATYPE}=json`)}createDailyExchangeRatesRequest(t,s){return this.http.get(`${this.apiUrl}?${u.FUNCTION}=${u.DIGITAL_CURRENCY_DAILY}&${h.SYMBOL}=${t}&${h.MARKET}=${s}&${h.DATATYPE}=json`)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(G.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var V=n(6458);let f=(()=>{class a{constructor(t,s){this.dataApiService=t,this.snackBar=s,this.baseCurrency="",this.currentCrypto="",this.currentExchangeRates=[],this.currentExchangeRatesSubject=new x.xQ,this.intradayExchangeRates=new Y,this.intradayExchangeRatesSubject=new x.xQ,this.dailyExchangeRates=new F,this.dailyExchangeRatesSubject=new x.xQ}sendRequestForData(t="USD"){this.dataApiService.getCurrentExchangeRates(t).pipe((0,Z.h)(s=>!!s),(0,B.q)(1)).subscribe(s=>{this.currentExchangeRates=[],s.forEach(i=>{i["Realtime Currency Exchange Rate"]&&this.currentExchangeRates.push({cryptoCode:i["Realtime Currency Exchange Rate"]["1. From_Currency Code"],cryptoName:i["Realtime Currency Exchange Rate"]["2. From_Currency Name"],fiatCode:i["Realtime Currency Exchange Rate"]["3. To_Currency Code"],exchangeRate:i["Realtime Currency Exchange Rate"]["5. Exchange Rate"].slice(0,-4),bidPrice:i["Realtime Currency Exchange Rate"]["8. Bid Price"].slice(0,-4),askPrice:i["Realtime Currency Exchange Rate"]["9. Ask Price"].slice(0,-4),time:i["Realtime Currency Exchange Rate"]["6. Last Refreshed"]+" "+i["Realtime Currency Exchange Rate"]["7. Time Zone"]})}),this.currentExchangeRatesSubject.next(this.currentExchangeRates)},s=>{this.displayErrorInfo(s)})}displayErrorInfo(t){this.snackBar.open(429!==t.status?"Error: Unknown error.":"Error: Too many requests in 1 minute. \n        Due to limited subscription plan of cryptocurrency REST API,\n        there is available only 5 request per minute. Sorry for inconvenience.",void 0,{duration:1e4})}sendRequestForDetails(t,s){this.dataApiService.getDetailsExchangeRates(t,s).pipe((0,Z.h)(i=>!!i)).subscribe(i=>{this.parseIntradayExchangeData(i[0]),this.parseDailyExchangeData(i[1])},i=>{this.displayErrorInfo(i)})}setBaseCurrency(t){this.baseCurrency=t}setCurrentCrypto(t){this.currentCrypto=t}getCurrentExchangeRates(){return this.currentExchangeRatesSubject}getIntradayExchangeRates(){return this.intradayExchangeRatesSubject}getDailyExchangeRates(){return this.dailyExchangeRatesSubject}getBaseCurrency(){return this.baseCurrency}getCurrentCrypto(){return this.currentCrypto}parseIntradayExchangeData(t){var s,i,o,c,l,d,D,b,T,I,A,N;if(t["Time Series Crypto (5min)"]){for(const[Ct,g]of Object.entries(t["Time Series Crypto (5min)"]))null===(s=this.intradayExchangeRates.dates)||void 0===s||s.push(Ct.toString()),null===(i=this.intradayExchangeRates.opens)||void 0===i||i.push(Number(g["1. open"])),null===(o=this.intradayExchangeRates.highs)||void 0===o||o.push(Number(g["2. high"])),null===(c=this.intradayExchangeRates.lows)||void 0===c||c.push(Number(g["3. low"])),null===(l=this.intradayExchangeRates.closes)||void 0===l||l.push(Number(g["4. close"])),null===(d=this.intradayExchangeRates.volumes)||void 0===d||d.push(Number(g["5. volume"]));null===(D=this.intradayExchangeRates.dates)||void 0===D||D.reverse(),null===(b=this.intradayExchangeRates.opens)||void 0===b||b.reverse(),null===(T=this.intradayExchangeRates.highs)||void 0===T||T.reverse(),null===(I=this.intradayExchangeRates.lows)||void 0===I||I.reverse(),null===(A=this.intradayExchangeRates.closes)||void 0===A||A.reverse(),null===(N=this.intradayExchangeRates.volumes)||void 0===N||N.reverse(),this.intradayExchangeRatesSubject.next(this.intradayExchangeRates)}}parseDailyExchangeData(t){if(t["Time Series (Digital Currency Daily)"]){for(const[s,i]of Object.entries(t["Time Series (Digital Currency Daily)"])){const o=Object.keys(Object.entries(t["Time Series (Digital Currency Daily)"])[1][1]);this.dailyExchangeRates.dates.push(s.toString()),this.dailyExchangeRates.opens.push(Number(i[o[0]])),this.dailyExchangeRates.highs.push(Number(i[o[2]])),this.dailyExchangeRates.lows.push(Number(i[o[4]])),this.dailyExchangeRates.closes.push(Number(i[o[6]])),this.dailyExchangeRates.volumes.push(Number(i[o[8]])),this.dailyExchangeRates.marketCap.push(Number(i[o[9]]))}this.dailyExchangeRates.dates.reverse(),this.dailyExchangeRates.opens.reverse(),this.dailyExchangeRates.highs.reverse(),this.dailyExchangeRates.lows.reverse(),this.dailyExchangeRates.closes.reverse(),this.dailyExchangeRates.volumes.reverse(),this.dailyExchangeRates.marketCap.reverse(),this.dailyExchangeRatesSubject.next(this.dailyExchangeRates)}}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(M),e.LFG(V.ux))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var L=n(4186),C=n(5618),y=n(3738),O=n(1769);let Q=(()=>{class a{constructor(t,s){this.router=t,this.dataManagerService=s,this.cryptoInfo=new w}ngOnInit(){}showDetails(){this.router.navigate(["crypto",`${this.cryptoInfo.cryptoCode}`]),this.dataManagerService.setCurrentCrypto(this.cryptoInfo.cryptoCode)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(p.F0),e.Y36(f))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-single-crypto-info"]],inputs:{cryptoInfo:"cryptoInfo"},decls:18,vars:8,consts:[[1,"crypto-info",3,"click"],[3,"src"],["inset",""]],template:function(t,s){1&t&&(e.TgZ(0,"mat-card",0),e.NdJ("click",function(){return s.showDetails()}),e._UZ(1,"img",1),e.TgZ(2,"mat-card-subtitle"),e._uU(3),e.qZA(),e.TgZ(4,"mat-card-title"),e._uU(5),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"p"),e.TgZ(8,"b"),e._uU(9),e.qZA(),e.qZA(),e._UZ(10,"mat-divider",2),e.TgZ(11,"p"),e._uU(12),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.qZA(),e._UZ(15,"mat-divider",2),e.TgZ(16,"p"),e._uU(17),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.MGl("src","assets/crypto-icons/",s.cryptoInfo.cryptoCode,".png",e.LSH),e.xp6(2),e.Oqu(s.cryptoInfo.cryptoName),e.xp6(2),e.Oqu(s.cryptoInfo.cryptoCode),e.xp6(4),e.AsE("",s.cryptoInfo.exchangeRate," ",s.cryptoInfo.fiatCode,""),e.xp6(3),e.hij("bid: ",s.cryptoInfo.bidPrice,""),e.xp6(2),e.hij("ask: ",s.cryptoInfo.askPrice,""),e.xp6(3),e.hij("Last update: ",s.cryptoInfo.time,""))},directives:[y.a8,y.$j,y.n5,y.dn,O.d],styles:[".crypto-info[_ngcontent-%COMP%]{background-color:#a5d8ff}.crypto-info[_ngcontent-%COMP%]:hover{background-color:#3bc14a}"]}),a})();function J(a,r){if(1&a&&(e.TgZ(0,"div",3),e._UZ(1,"app-single-crypto-info",4),e.qZA()),2&a){const t=r.$implicit;e.xp6(1),e.Q6J("cryptoInfo",t)}}let H=(()=>{class a{constructor(t,s){this.dataManager=t,this.baseCurrencyService=s,this.cryptosData=[],this.cryptoDataSubscription=new m.w,this.baseCurrencySubscription=new m.w}ngOnInit(){this.baseCurrencySubscription=this.baseCurrencyService.getBaseCurrencySubject().subscribe(t=>this.dataManager.sendRequestForData(t)),this.cryptoDataSubscription=this.dataManager.getCurrentExchangeRates().subscribe(t=>{this.cryptosData=t})}ngOnDestroy(){console.log("crypto on destroy"),this.cryptoDataSubscription.unsubscribe(),this.baseCurrencySubscription.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(f),e.Y36(L.i))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-crypto"]],decls:6,vars:1,consts:[[1,"container"],["fxLayout","row wrap","fxLayoutAlign","space-around center","fxLayoutGap","10px grid"],["class","element-center2","fxFlex","33%","fxFlex.xs","100%","fxFlex.sm","33%",4,"ngFor","ngForOf"],["fxFlex","33%","fxFlex.xs","100%","fxFlex.sm","33%",1,"element-center2"],[3,"cryptoInfo"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"br"),e.TgZ(2,"div"),e.TgZ(3,"div",1),e.YNc(4,J,2,1,"div",2),e.qZA(),e.qZA(),e.qZA(),e._UZ(5,"router-outlet")),2&t&&(e.xp6(4),e.Q6J("ngForOf",s.cryptosData))},directives:[C.xw,C.Wh,C.SQ,v.sg,p.lC,C.yH,Q],styles:["mat-grid-tile[_ngcontent-%COMP%]{background:lightblue}.element-center2[_ngcontent-%COMP%]{text-align:center}"]}),a})();var z=n(6693),K=n(9796),W=n(7393),R=n(377),S=n(5345);class k{constructor(r){this.resultSelector=r}call(r,t){return t.subscribe(new q(r,this.resultSelector))}}class q extends W.L{constructor(r,t,s=Object.create(null)){super(r),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(r){const t=this.iterators;(0,K.k)(r)?t.push(new tt(r)):t.push("function"==typeof r[R.hZ]?new _(r[R.hZ]()):new et(this.destination,this,r))}_complete(){const r=this.iterators,t=r.length;if(this.unsubscribe(),0!==t){this.active=t;for(let s=0;s<t;s++){let i=r[s];i.stillUnsubscribed?this.destination.add(i.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const r=this.iterators,t=r.length,s=this.destination;for(let c=0;c<t;c++){let l=r[c];if("function"==typeof l.hasValue&&!l.hasValue())return}let i=!1;const o=[];for(let c=0;c<t;c++){let l=r[c],d=l.next();if(l.hasCompleted()&&(i=!0),d.done)return void s.complete();o.push(d.value)}this.resultSelector?this._tryresultSelector(o):s.next(o),i&&s.complete()}_tryresultSelector(r){let t;try{t=this.resultSelector.apply(this,r)}catch(s){return void this.destination.error(s)}this.destination.next(t)}}class _{constructor(r){this.iterator=r,this.nextResult=r.next()}hasValue(){return!0}next(){const r=this.nextResult;return this.nextResult=this.iterator.next(),r}hasCompleted(){const r=this.nextResult;return Boolean(r&&r.done)}}class tt{constructor(r){this.array=r,this.index=0,this.length=0,this.length=r.length}[R.hZ](){return this}next(r){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class et extends S.Ds{constructor(r,t,s){super(r),this.parent=t,this.observable=s,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[R.hZ](){return this}next(){const r=this.buffer;return 0===r.length&&this.isComplete?{value:null,done:!0}:{value:r.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(r){this.buffer.push(r),this.parent.checkIterators()}subscribe(){return(0,S.ft)(this.observable,new S.IY(this))}}var at=n(3342),rt=n(3190),st=n(2620);const $=function(a,r){return[a,r]},it=function(){return["highs","lows"]},j=function(a){return[a]};function nt(a,r){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"app-chart",1),e._UZ(2,"br"),e._UZ(3,"app-chart",2),e._UZ(4,"br"),e._UZ(5,"app-chart",3),e._UZ(6,"br"),e._UZ(7,"app-chart",4),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("values",e.WLB(9,$,t.dailyData.highs,t.dailyData.lows))("dates",t.dailyData.dates)("name",e.DdM(12,it)),e.xp6(2),e.Q6J("values",e.VKq(13,j,t.dailyData.volumes))("dates",t.dailyData.dates),e.xp6(2),e.Q6J("values",e.WLB(15,$,t.intradayData.highs,t.intradayData.lows))("dates",t.intradayData.dates),e.xp6(2),e.Q6J("values",e.VKq(18,j,t.intradayData.volumes))("dates",t.intradayData.dates)}}const ot=[{path:"",component:H},{path:":cryptoCode",component:(()=>{class a{constructor(t,s,i){this.activatedRoute=t,this.dataManagerService=s,this.baseCurrencyService=i,this.intradayData=new Y,this.dailyData=new F,this.detailsSubscription=new m.w,this.activatedRoute.params.subscribe(o=>{console.log(o)})}ngOnInit(){this.detailsSubscription=this.baseCurrencyService.getBaseCurrencySubject().pipe((0,at.b)(t=>this.dataManagerService.sendRequestForDetails(this.dataManagerService.getCurrentCrypto(),t)),(0,rt.w)(()=>function(...a){const r=a[a.length-1];return"function"==typeof r&&a.pop(),(0,z.n)(a,void 0).lift(new k(r))}(this.dataManagerService.getIntradayExchangeRates(),this.dataManagerService.getDailyExchangeRates()))).subscribe(t=>{this.intradayData=t[0],this.dailyData=t[1]})}ngOnDestroy(){this.detailsSubscription.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(p.gz),e.Y36(f),e.Y36(L.i))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-details"]],decls:1,vars:1,consts:[[4,"ngIf"],["title","Prices daily","type","scatter",3,"values","dates","name"],["title","Volumes daily","type","bar",3,"values","dates"],["title","Prices today","type","scatter",3,"values","dates"],["title","Volumes today","type","bar",3,"values","dates"]],template:function(t,s){1&t&&e.YNc(0,nt,8,20,"div",0),2&t&&e.Q6J("ngIf",s.dailyData.dates.length>1)},directives:[v.O5,st.x],styles:[""]}),a})()}];let ct=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[p.Bz.forChild(ot)],p.Bz]}),a})();var ht=n(7441),lt=n(8295),P=n(3679),ut=n(2522),dt=n(1095),pt=n(3356);let yt=(()=>{class a{constructor(t,s){this.dataManagerService=t,this.dataApiService=s}resolve(t,s){return this.dataManagerService.sendRequestForDetails("BTC",this.dataManagerService.getBaseCurrency()),(0,E.D)([this.dataManagerService.getIntradayExchangeRates(),this.dataManagerService.getDailyExchangeRates()])}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(f),e.LFG(M))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var gt=n(5209);let ft=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[yt],imports:[[v.ez,ct,ht.LD,lt.lN,P.UX,ut.g0,P.u5,y.QW,O.t,pt.o9,dt.ot,gt.m]]}),a})()}}]);