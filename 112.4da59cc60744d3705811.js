(self.webpackChunkfinance_center=self.webpackChunkfinance_center||[]).push([[112],{3679:(Ml,x,Q)=>{"use strict";Q.d(x,{qu:()=>go,u:()=>yr,cw:()=>Nt,sg:()=>fn,u5:()=>Vi,a5:()=>ne,JJ:()=>le,JL:()=>de,F:()=>kt,UX:()=>ia,_Y:()=>Gr});var K=Q(3018),p=Q(8583),v=Q(4402),u=Q(5758),y=Q(8002);let e=(()=>{class Dt{constructor(st,sr){this._renderer=st,this._elementRef=sr,this.onChange=hn=>{},this.onTouched=()=>{}}setProperty(st,sr){this._renderer.setProperty(this._elementRef.nativeElement,st,sr)}registerOnTouched(st){this.onTouched=st}registerOnChange(st){this.onChange=st}setDisabledState(st){this.setProperty("disabled",st)}}return Dt.\u0275fac=function(st){return new(st||Dt)(K.Y36(K.Qsj),K.Y36(K.SBq))},Dt.\u0275dir=K.lG2({type:Dt}),Dt})(),n=(()=>{class Dt extends e{}return Dt.\u0275fac=function(){let _t;return function(sr){return(_t||(_t=K.n5z(Dt)))(sr||Dt)}}(),Dt.\u0275dir=K.lG2({type:Dt,features:[K.qOj]}),Dt})();const t=new K.OlP("NgValueAccessor"),f={provide:t,useExisting:(0,K.Gpc)(()=>l),multi:!0},i=new K.OlP("CompositionEventMode");let l=(()=>{class Dt extends e{constructor(st,sr,hn){super(st,sr),this._compositionMode=hn,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const Dt=(0,p.q)()?(0,p.q)().getUserAgent():"";return/android (\d+)/.test(Dt.toLowerCase())}())}writeValue(st){this.setProperty("value",null==st?"":st)}_handleInput(st){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(st)}_compositionStart(){this._composing=!0}_compositionEnd(st){this._composing=!1,this._compositionMode&&this.onChange(st)}}return Dt.\u0275fac=function(st){return new(st||Dt)(K.Y36(K.Qsj),K.Y36(K.SBq),K.Y36(i,8))},Dt.\u0275dir=K.lG2({type:Dt,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(st,sr){1&st&&K.NdJ("input",function(ri){return sr._handleInput(ri.target.value)})("blur",function(){return sr.onTouched()})("compositionstart",function(){return sr._compositionStart()})("compositionend",function(ri){return sr._compositionEnd(ri.target.value)})},features:[K._Bn([f]),K.qOj]}),Dt})();const m=new K.OlP("NgValidators"),d=new K.OlP("NgAsyncValidators");function S(Dt){return null!=Dt}function C(Dt){const _t=(0,K.QGY)(Dt)?(0,v.D)(Dt):Dt;return(0,K.CqO)(_t),_t}function z(Dt){let _t={};return Dt.forEach(st=>{_t=null!=st?Object.assign(Object.assign({},_t),st):_t}),0===Object.keys(_t).length?null:_t}function B(Dt,_t){return _t.map(st=>st(Dt))}function G(Dt){return Dt.map(_t=>function(Dt){return!Dt.validate}(_t)?_t:st=>_t.validate(st))}function Z(Dt){return null!=Dt?function(Dt){if(!Dt)return null;const _t=Dt.filter(S);return 0==_t.length?null:function(st){return z(B(st,_t))}}(G(Dt)):null}function W(Dt){return null!=Dt?function(Dt){if(!Dt)return null;const _t=Dt.filter(S);return 0==_t.length?null:function(st){const sr=B(st,_t).map(C);return(0,u.D)(sr).pipe((0,y.U)(z))}}(G(Dt)):null}function te(Dt,_t){return null===Dt?[_t]:Array.isArray(Dt)?[...Dt,_t]:[Dt,_t]}function R(Dt){return Dt._rawValidators}function N(Dt){return Dt._rawAsyncValidators}function V(Dt){return Dt?Array.isArray(Dt)?Dt:[Dt]:[]}function ee(Dt,_t){return Array.isArray(Dt)?Dt.includes(_t):Dt===_t}function j(Dt,_t){const st=V(_t);return V(Dt).forEach(hn=>{ee(st,hn)||st.push(hn)}),st}function J(Dt,_t){return V(_t).filter(st=>!ee(Dt,st))}let $=(()=>{class Dt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(st){this._rawValidators=st||[],this._composedValidatorFn=Z(this._rawValidators)}_setAsyncValidators(st){this._rawAsyncValidators=st||[],this._composedAsyncValidatorFn=W(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(st){this._onDestroyCallbacks.push(st)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(st=>st()),this._onDestroyCallbacks=[]}reset(st){this.control&&this.control.reset(st)}hasError(st,sr){return!!this.control&&this.control.hasError(st,sr)}getError(st,sr){return this.control?this.control.getError(st,sr):null}}return Dt.\u0275fac=function(st){return new(st||Dt)},Dt.\u0275dir=K.lG2({type:Dt}),Dt})(),re=(()=>{class Dt extends ${get formDirective(){return null}get path(){return null}}return Dt.\u0275fac=function(){let _t;return function(sr){return(_t||(_t=K.n5z(Dt)))(sr||Dt)}}(),Dt.\u0275dir=K.lG2({type:Dt,features:[K.qOj]}),Dt})();class ne extends ${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class se{constructor(_t){this._cd=_t}is(_t){var st,sr,hn;return"submitted"===_t?!!(null===(st=this._cd)||void 0===st?void 0:st.submitted):!!(null===(hn=null===(sr=this._cd)||void 0===sr?void 0:sr.control)||void 0===hn?void 0:hn[_t])}}let le=(()=>{class Dt extends se{constructor(st){super(st)}}return Dt.\u0275fac=function(st){return new(st||Dt)(K.Y36(ne,2))},Dt.\u0275dir=K.lG2({type:Dt,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(st,sr){2&st&&K.ekj("ng-untouched",sr.is("untouched"))("ng-touched",sr.is("touched"))("ng-pristine",sr.is("pristine"))("ng-dirty",sr.is("dirty"))("ng-valid",sr.is("valid"))("ng-invalid",sr.is("invalid"))("ng-pending",sr.is("pending"))},features:[K.qOj]}),Dt})(),de=(()=>{class Dt extends se{constructor(st){super(st)}}return Dt.\u0275fac=function(st){return new(st||Dt)(K.Y36(re,10))},Dt.\u0275dir=K.lG2({type:Dt,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(st,sr){2&st&&K.ekj("ng-untouched",sr.is("untouched"))("ng-touched",sr.is("touched"))("ng-pristine",sr.is("pristine"))("ng-dirty",sr.is("dirty"))("ng-valid",sr.is("valid"))("ng-invalid",sr.is("invalid"))("ng-pending",sr.is("pending"))("ng-submitted",sr.is("submitted"))},features:[K.qOj]}),Dt})();function Oe(Dt,_t){nt(Dt,_t),_t.valueAccessor.writeValue(Dt.value),function(Dt,_t){_t.valueAccessor.registerOnChange(st=>{Dt._pendingValue=st,Dt._pendingChange=!0,Dt._pendingDirty=!0,"change"===Dt.updateOn&&Et(Dt,_t)})}(Dt,_t),function(Dt,_t){const st=(sr,hn)=>{_t.valueAccessor.writeValue(sr),hn&&_t.viewToModelUpdate(sr)};Dt.registerOnChange(st),_t._registerOnDestroy(()=>{Dt._unregisterOnChange(st)})}(Dt,_t),function(Dt,_t){_t.valueAccessor.registerOnTouched(()=>{Dt._pendingTouched=!0,"blur"===Dt.updateOn&&Dt._pendingChange&&Et(Dt,_t),"submit"!==Dt.updateOn&&Dt.markAsTouched()})}(Dt,_t),function(Dt,_t){if(_t.valueAccessor.setDisabledState){const st=sr=>{_t.valueAccessor.setDisabledState(sr)};Dt.registerOnDisabledChange(st),_t._registerOnDestroy(()=>{Dt._unregisterOnDisabledChange(st)})}}(Dt,_t)}function Be(Dt,_t,st=!0){const sr=()=>{};_t.valueAccessor&&(_t.valueAccessor.registerOnChange(sr),_t.valueAccessor.registerOnTouched(sr)),ft(Dt,_t),Dt&&(_t._invokeOnDestroyCallbacks(),Dt._registerOnCollectionChange(()=>{}))}function Je(Dt,_t){Dt.forEach(st=>{st.registerOnValidatorChange&&st.registerOnValidatorChange(_t)})}function nt(Dt,_t){const st=R(Dt);null!==_t.validator?Dt.setValidators(te(st,_t.validator)):"function"==typeof st&&Dt.setValidators([st]);const sr=N(Dt);null!==_t.asyncValidator?Dt.setAsyncValidators(te(sr,_t.asyncValidator)):"function"==typeof sr&&Dt.setAsyncValidators([sr]);const hn=()=>Dt.updateValueAndValidity();Je(_t._rawValidators,hn),Je(_t._rawAsyncValidators,hn)}function ft(Dt,_t){let st=!1;if(null!==Dt){if(null!==_t.validator){const hn=R(Dt);if(Array.isArray(hn)&&hn.length>0){const ri=hn.filter(qi=>qi!==_t.validator);ri.length!==hn.length&&(st=!0,Dt.setValidators(ri))}}if(null!==_t.asyncValidator){const hn=N(Dt);if(Array.isArray(hn)&&hn.length>0){const ri=hn.filter(qi=>qi!==_t.asyncValidator);ri.length!==hn.length&&(st=!0,Dt.setAsyncValidators(ri))}}}const sr=()=>{};return Je(_t._rawValidators,sr),Je(_t._rawAsyncValidators,sr),st}function Et(Dt,_t){Dt._pendingDirty&&Dt.markAsDirty(),Dt.setValue(Dt._pendingValue,{emitModelToViewChange:!1}),_t.viewToModelUpdate(Dt._pendingValue),Dt._pendingChange=!1}function rt(Dt,_t){nt(Dt,_t)}function Ne(Dt,_t){Dt._syncPendingControls(),_t.forEach(st=>{const sr=st.control;"submit"===sr.updateOn&&sr._pendingChange&&(st.viewToModelUpdate(sr._pendingValue),sr._pendingChange=!1)})}function ke(Dt,_t){const st=Dt.indexOf(_t);st>-1&&Dt.splice(st,1)}const Re="VALID",Ie="INVALID",Ke="PENDING",ut="DISABLED";function gt(Dt){return(Ft(Dt)?Dt.validators:Dt)||null}function Pt(Dt){return Array.isArray(Dt)?Z(Dt):Dt||null}function ct(Dt,_t){return(Ft(_t)?_t.asyncValidators:Dt)||null}function zt(Dt){return Array.isArray(Dt)?W(Dt):Dt||null}function Ft(Dt){return null!=Dt&&!Array.isArray(Dt)&&"object"==typeof Dt}class Qe{constructor(_t,st){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=_t,this._rawAsyncValidators=st,this._composedValidatorFn=Pt(this._rawValidators),this._composedAsyncValidatorFn=zt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(_t){this._rawValidators=this._composedValidatorFn=_t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(_t){this._rawAsyncValidators=this._composedAsyncValidatorFn=_t}get parent(){return this._parent}get valid(){return this.status===Re}get invalid(){return this.status===Ie}get pending(){return this.status==Ke}get disabled(){return this.status===ut}get enabled(){return this.status!==ut}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(_t){this._rawValidators=_t,this._composedValidatorFn=Pt(_t)}setAsyncValidators(_t){this._rawAsyncValidators=_t,this._composedAsyncValidatorFn=zt(_t)}addValidators(_t){this.setValidators(j(_t,this._rawValidators))}addAsyncValidators(_t){this.setAsyncValidators(j(_t,this._rawAsyncValidators))}removeValidators(_t){this.setValidators(J(_t,this._rawValidators))}removeAsyncValidators(_t){this.setAsyncValidators(J(_t,this._rawAsyncValidators))}hasValidator(_t){return ee(this._rawValidators,_t)}hasAsyncValidator(_t){return ee(this._rawAsyncValidators,_t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(_t={}){this.touched=!0,this._parent&&!_t.onlySelf&&this._parent.markAsTouched(_t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(_t=>_t.markAllAsTouched())}markAsUntouched(_t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(st=>{st.markAsUntouched({onlySelf:!0})}),this._parent&&!_t.onlySelf&&this._parent._updateTouched(_t)}markAsDirty(_t={}){this.pristine=!1,this._parent&&!_t.onlySelf&&this._parent.markAsDirty(_t)}markAsPristine(_t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(st=>{st.markAsPristine({onlySelf:!0})}),this._parent&&!_t.onlySelf&&this._parent._updatePristine(_t)}markAsPending(_t={}){this.status=Ke,!1!==_t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!_t.onlySelf&&this._parent.markAsPending(_t)}disable(_t={}){const st=this._parentMarkedDirty(_t.onlySelf);this.status=ut,this.errors=null,this._forEachChild(sr=>{sr.disable(Object.assign(Object.assign({},_t),{onlySelf:!0}))}),this._updateValue(),!1!==_t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},_t),{skipPristineCheck:st})),this._onDisabledChange.forEach(sr=>sr(!0))}enable(_t={}){const st=this._parentMarkedDirty(_t.onlySelf);this.status=Re,this._forEachChild(sr=>{sr.enable(Object.assign(Object.assign({},_t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:_t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},_t),{skipPristineCheck:st})),this._onDisabledChange.forEach(sr=>sr(!1))}_updateAncestors(_t){this._parent&&!_t.onlySelf&&(this._parent.updateValueAndValidity(_t),_t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(_t){this._parent=_t}updateValueAndValidity(_t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Re||this.status===Ke)&&this._runAsyncValidator(_t.emitEvent)),!1!==_t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!_t.onlySelf&&this._parent.updateValueAndValidity(_t)}_updateTreeValidity(_t={emitEvent:!0}){this._forEachChild(st=>st._updateTreeValidity(_t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:_t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ut:Re}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(_t){if(this.asyncValidator){this.status=Ke,this._hasOwnPendingAsyncValidator=!0;const st=C(this.asyncValidator(this));this._asyncValidationSubscription=st.subscribe(sr=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(sr,{emitEvent:_t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(_t,st={}){this.errors=_t,this._updateControlsErrors(!1!==st.emitEvent)}get(_t){return function(Dt,_t,st){if(null==_t||(Array.isArray(_t)||(_t=_t.split(".")),Array.isArray(_t)&&0===_t.length))return null;let sr=Dt;return _t.forEach(hn=>{sr=sr instanceof Nt?sr.controls.hasOwnProperty(hn)?sr.controls[hn]:null:sr instanceof Yt&&sr.at(hn)||null}),sr}(this,_t)}getError(_t,st){const sr=st?this.get(st):this;return sr&&sr.errors?sr.errors[_t]:null}hasError(_t,st){return!!this.getError(_t,st)}get root(){let _t=this;for(;_t._parent;)_t=_t._parent;return _t}_updateControlsErrors(_t){this.status=this._calculateStatus(),_t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(_t)}_initObservables(){this.valueChanges=new K.vpe,this.statusChanges=new K.vpe}_calculateStatus(){return this._allControlsDisabled()?ut:this.errors?Ie:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ke)?Ke:this._anyControlsHaveStatus(Ie)?Ie:Re}_anyControlsHaveStatus(_t){return this._anyControls(st=>st.status===_t)}_anyControlsDirty(){return this._anyControls(_t=>_t.dirty)}_anyControlsTouched(){return this._anyControls(_t=>_t.touched)}_updatePristine(_t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!_t.onlySelf&&this._parent._updatePristine(_t)}_updateTouched(_t={}){this.touched=this._anyControlsTouched(),this._parent&&!_t.onlySelf&&this._parent._updateTouched(_t)}_isBoxedValue(_t){return"object"==typeof _t&&null!==_t&&2===Object.keys(_t).length&&"value"in _t&&"disabled"in _t}_registerOnCollectionChange(_t){this._onCollectionChange=_t}_setUpdateStrategy(_t){Ft(_t)&&null!=_t.updateOn&&(this._updateOn=_t.updateOn)}_parentMarkedDirty(_t){return!_t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class yt extends Qe{constructor(_t=null,st,sr){super(gt(st),ct(sr,st)),this._onChange=[],this._applyFormState(_t),this._setUpdateStrategy(st),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(_t,st={}){this.value=this._pendingValue=_t,this._onChange.length&&!1!==st.emitModelToViewChange&&this._onChange.forEach(sr=>sr(this.value,!1!==st.emitViewToModelChange)),this.updateValueAndValidity(st)}patchValue(_t,st={}){this.setValue(_t,st)}reset(_t=null,st={}){this._applyFormState(_t),this.markAsPristine(st),this.markAsUntouched(st),this.setValue(this.value,st),this._pendingChange=!1}_updateValue(){}_anyControls(_t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(_t){this._onChange.push(_t)}_unregisterOnChange(_t){ke(this._onChange,_t)}registerOnDisabledChange(_t){this._onDisabledChange.push(_t)}_unregisterOnDisabledChange(_t){ke(this._onDisabledChange,_t)}_forEachChild(_t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(_t){this._isBoxedValue(_t)?(this.value=this._pendingValue=_t.value,_t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=_t}}class Nt extends Qe{constructor(_t,st,sr){super(gt(st),ct(sr,st)),this.controls=_t,this._initObservables(),this._setUpdateStrategy(st),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(_t,st){return this.controls[_t]?this.controls[_t]:(this.controls[_t]=st,st.setParent(this),st._registerOnCollectionChange(this._onCollectionChange),st)}addControl(_t,st,sr={}){this.registerControl(_t,st),this.updateValueAndValidity({emitEvent:sr.emitEvent}),this._onCollectionChange()}removeControl(_t,st={}){this.controls[_t]&&this.controls[_t]._registerOnCollectionChange(()=>{}),delete this.controls[_t],this.updateValueAndValidity({emitEvent:st.emitEvent}),this._onCollectionChange()}setControl(_t,st,sr={}){this.controls[_t]&&this.controls[_t]._registerOnCollectionChange(()=>{}),delete this.controls[_t],st&&this.registerControl(_t,st),this.updateValueAndValidity({emitEvent:sr.emitEvent}),this._onCollectionChange()}contains(_t){return this.controls.hasOwnProperty(_t)&&this.controls[_t].enabled}setValue(_t,st={}){this._checkAllValuesPresent(_t),Object.keys(_t).forEach(sr=>{this._throwIfControlMissing(sr),this.controls[sr].setValue(_t[sr],{onlySelf:!0,emitEvent:st.emitEvent})}),this.updateValueAndValidity(st)}patchValue(_t,st={}){null!=_t&&(Object.keys(_t).forEach(sr=>{this.controls[sr]&&this.controls[sr].patchValue(_t[sr],{onlySelf:!0,emitEvent:st.emitEvent})}),this.updateValueAndValidity(st))}reset(_t={},st={}){this._forEachChild((sr,hn)=>{sr.reset(_t[hn],{onlySelf:!0,emitEvent:st.emitEvent})}),this._updatePristine(st),this._updateTouched(st),this.updateValueAndValidity(st)}getRawValue(){return this._reduceChildren({},(_t,st,sr)=>(_t[sr]=st instanceof yt?st.value:st.getRawValue(),_t))}_syncPendingControls(){let _t=this._reduceChildren(!1,(st,sr)=>!!sr._syncPendingControls()||st);return _t&&this.updateValueAndValidity({onlySelf:!0}),_t}_throwIfControlMissing(_t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[_t])throw new Error(`Cannot find form control with name: ${_t}.`)}_forEachChild(_t){Object.keys(this.controls).forEach(st=>{const sr=this.controls[st];sr&&_t(sr,st)})}_setUpControls(){this._forEachChild(_t=>{_t.setParent(this),_t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(_t){for(const st of Object.keys(this.controls)){const sr=this.controls[st];if(this.contains(st)&&_t(sr))return!0}return!1}_reduceValue(){return this._reduceChildren({},(_t,st,sr)=>((st.enabled||this.disabled)&&(_t[sr]=st.value),_t))}_reduceChildren(_t,st){let sr=_t;return this._forEachChild((hn,ri)=>{sr=st(sr,hn,ri)}),sr}_allControlsDisabled(){for(const _t of Object.keys(this.controls))if(this.controls[_t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(_t){this._forEachChild((st,sr)=>{if(void 0===_t[sr])throw new Error(`Must supply a value for form control with name: '${sr}'.`)})}}class Yt extends Qe{constructor(_t,st,sr){super(gt(st),ct(sr,st)),this.controls=_t,this._initObservables(),this._setUpdateStrategy(st),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(_t){return this.controls[_t]}push(_t,st={}){this.controls.push(_t),this._registerControl(_t),this.updateValueAndValidity({emitEvent:st.emitEvent}),this._onCollectionChange()}insert(_t,st,sr={}){this.controls.splice(_t,0,st),this._registerControl(st),this.updateValueAndValidity({emitEvent:sr.emitEvent})}removeAt(_t,st={}){this.controls[_t]&&this.controls[_t]._registerOnCollectionChange(()=>{}),this.controls.splice(_t,1),this.updateValueAndValidity({emitEvent:st.emitEvent})}setControl(_t,st,sr={}){this.controls[_t]&&this.controls[_t]._registerOnCollectionChange(()=>{}),this.controls.splice(_t,1),st&&(this.controls.splice(_t,0,st),this._registerControl(st)),this.updateValueAndValidity({emitEvent:sr.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(_t,st={}){this._checkAllValuesPresent(_t),_t.forEach((sr,hn)=>{this._throwIfControlMissing(hn),this.at(hn).setValue(sr,{onlySelf:!0,emitEvent:st.emitEvent})}),this.updateValueAndValidity(st)}patchValue(_t,st={}){null!=_t&&(_t.forEach((sr,hn)=>{this.at(hn)&&this.at(hn).patchValue(sr,{onlySelf:!0,emitEvent:st.emitEvent})}),this.updateValueAndValidity(st))}reset(_t=[],st={}){this._forEachChild((sr,hn)=>{sr.reset(_t[hn],{onlySelf:!0,emitEvent:st.emitEvent})}),this._updatePristine(st),this._updateTouched(st),this.updateValueAndValidity(st)}getRawValue(){return this.controls.map(_t=>_t instanceof yt?_t.value:_t.getRawValue())}clear(_t={}){this.controls.length<1||(this._forEachChild(st=>st._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:_t.emitEvent}))}_syncPendingControls(){let _t=this.controls.reduce((st,sr)=>!!sr._syncPendingControls()||st,!1);return _t&&this.updateValueAndValidity({onlySelf:!0}),_t}_throwIfControlMissing(_t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(_t))throw new Error(`Cannot find form control at index ${_t}`)}_forEachChild(_t){this.controls.forEach((st,sr)=>{_t(st,sr)})}_updateValue(){this.value=this.controls.filter(_t=>_t.enabled||this.disabled).map(_t=>_t.value)}_anyControls(_t){return this.controls.some(st=>st.enabled&&_t(st))}_setUpControls(){this._forEachChild(_t=>this._registerControl(_t))}_checkAllValuesPresent(_t){this._forEachChild((st,sr)=>{if(void 0===_t[sr])throw new Error(`Must supply a value for form control at index: ${sr}.`)})}_allControlsDisabled(){for(const _t of this.controls)if(_t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(_t){_t.setParent(this),_t._registerOnCollectionChange(this._onCollectionChange)}}const rr={provide:re,useExisting:(0,K.Gpc)(()=>kt)},ht=(()=>Promise.resolve(null))();let kt=(()=>{class Dt extends re{constructor(st,sr){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new K.vpe,this.form=new Nt({},Z(st),W(sr))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(st){ht.then(()=>{const sr=this._findContainer(st.path);st.control=sr.registerControl(st.name,st.control),Oe(st.control,st),st.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(st)})}getControl(st){return this.form.get(st.path)}removeControl(st){ht.then(()=>{const sr=this._findContainer(st.path);sr&&sr.removeControl(st.name),ke(this._directives,st)})}addFormGroup(st){ht.then(()=>{const sr=this._findContainer(st.path),hn=new Nt({});rt(hn,st),sr.registerControl(st.name,hn),hn.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(st){ht.then(()=>{const sr=this._findContainer(st.path);sr&&sr.removeControl(st.name)})}getFormGroup(st){return this.form.get(st.path)}updateModel(st,sr){ht.then(()=>{this.form.get(st.path).setValue(sr)})}setValue(st){this.control.setValue(st)}onSubmit(st){return this.submitted=!0,Ne(this.form,this._directives),this.ngSubmit.emit(st),!1}onReset(){this.resetForm()}resetForm(st){this.form.reset(st),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(st){return st.pop(),st.length?this.form.get(st):this.form}}return Dt.\u0275fac=function(st){return new(st||Dt)(K.Y36(m,10),K.Y36(d,10))},Dt.\u0275dir=K.lG2({type:Dt,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(st,sr){1&st&&K.NdJ("submit",function(ri){return sr.onSubmit(ri)})("reset",function(){return sr.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[K._Bn([rr]),K.qOj]}),Dt})(),Gr=(()=>{class Dt{}return Dt.\u0275fac=function(st){return new(st||Dt)},Dt.\u0275dir=K.lG2({type:Dt,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Dt})(),Vn=(()=>{class Dt{}return Dt.\u0275fac=function(st){return new(st||Dt)},Dt.\u0275mod=K.oAB({type:Dt}),Dt.\u0275inj=K.cJS({}),Dt})();const Pr=new K.OlP("NgModelWithFormControlWarning"),cn={provide:re,useExisting:(0,K.Gpc)(()=>fn)};let fn=(()=>{class Dt extends re{constructor(st,sr){super(),this.validators=st,this.asyncValidators=sr,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new K.vpe,this._setValidators(st),this._setAsyncValidators(sr)}ngOnChanges(st){this._checkFormPresent(),st.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ft(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(st){const sr=this.form.get(st.path);return Oe(sr,st),sr.updateValueAndValidity({emitEvent:!1}),this.directives.push(st),sr}getControl(st){return this.form.get(st.path)}removeControl(st){Be(st.control||null,st,!1),ke(this.directives,st)}addFormGroup(st){this._setUpFormContainer(st)}removeFormGroup(st){this._cleanUpFormContainer(st)}getFormGroup(st){return this.form.get(st.path)}addFormArray(st){this._setUpFormContainer(st)}removeFormArray(st){this._cleanUpFormContainer(st)}getFormArray(st){return this.form.get(st.path)}updateModel(st,sr){this.form.get(st.path).setValue(sr)}onSubmit(st){return this.submitted=!0,Ne(this.form,this.directives),this.ngSubmit.emit(st),!1}onReset(){this.resetForm()}resetForm(st){this.form.reset(st),this.submitted=!1}_updateDomValue(){this.directives.forEach(st=>{const sr=st.control,hn=this.form.get(st.path);sr!==hn&&(Be(sr||null,st),hn instanceof yt&&(Oe(hn,st),st.control=hn))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(st){const sr=this.form.get(st.path);rt(sr,st),sr.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(st){if(this.form){const sr=this.form.get(st.path);sr&&function(Dt,_t){return ft(Dt,_t)}(sr,st)&&sr.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nt(this.form,this),this._oldForm&&ft(this._oldForm,this)}_checkFormPresent(){}}return Dt.\u0275fac=function(st){return new(st||Dt)(K.Y36(m,10),K.Y36(d,10))},Dt.\u0275dir=K.lG2({type:Dt,selectors:[["","formGroup",""]],hostBindings:function(st,sr){1&st&&K.NdJ("submit",function(ri){return sr.onSubmit(ri)})("reset",function(){return sr.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[K._Bn([cn]),K.qOj,K.TTD]}),Dt})();const Qt={provide:ne,useExisting:(0,K.Gpc)(()=>yr)};let yr=(()=>{class Dt extends ne{constructor(st,sr,hn,ri,qi){super(),this._ngModelWarningConfig=qi,this._added=!1,this.update=new K.vpe,this._ngModelWarningSent=!1,this._parent=st,this._setValidators(sr),this._setAsyncValidators(hn),this.valueAccessor=function(Dt,_t){if(!_t)return null;let st,sr,hn;return Array.isArray(_t),_t.forEach(ri=>{ri.constructor===l?st=ri:function(Dt){return Object.getPrototypeOf(Dt.constructor)===n}(ri)?sr=ri:hn=ri}),hn||sr||st||null}(0,ri)}set isDisabled(st){}ngOnChanges(st){this._added||this._setUpControl(),function(Dt,_t){if(!Dt.hasOwnProperty("model"))return!1;const st=Dt.model;return!!st.isFirstChange()||!Object.is(_t,st.currentValue)}(st,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(st){this.viewModel=st,this.update.emit(st)}get path(){return function(Dt,_t){return[..._t.path,Dt]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return Dt.\u0275fac=function(st){return new(st||Dt)(K.Y36(re,13),K.Y36(m,10),K.Y36(d,10),K.Y36(t,10),K.Y36(Pr,8))},Dt.\u0275dir=K.lG2({type:Dt,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[K._Bn([Qt]),K.qOj,K.TTD]}),Dt._ngModelWarningSentOnce=!1,Dt})(),Na=(()=>{class Dt{}return Dt.\u0275fac=function(st){return new(st||Dt)},Dt.\u0275mod=K.oAB({type:Dt}),Dt.\u0275inj=K.cJS({imports:[[Vn]]}),Dt})(),Vi=(()=>{class Dt{}return Dt.\u0275fac=function(st){return new(st||Dt)},Dt.\u0275mod=K.oAB({type:Dt}),Dt.\u0275inj=K.cJS({imports:[Na]}),Dt})(),ia=(()=>{class Dt{static withConfig(st){return{ngModule:Dt,providers:[{provide:Pr,useValue:st.warnOnNgModelWithFormControl}]}}}return Dt.\u0275fac=function(st){return new(st||Dt)},Dt.\u0275mod=K.oAB({type:Dt}),Dt.\u0275inj=K.cJS({imports:[Na]}),Dt})(),go=(()=>{class Dt{group(st,sr=null){const hn=this._reduceControls(st);let ko,ri=null,qi=null;return null!=sr&&(function(Dt){return void 0!==Dt.asyncValidators||void 0!==Dt.validators||void 0!==Dt.updateOn}(sr)?(ri=null!=sr.validators?sr.validators:null,qi=null!=sr.asyncValidators?sr.asyncValidators:null,ko=null!=sr.updateOn?sr.updateOn:void 0):(ri=null!=sr.validator?sr.validator:null,qi=null!=sr.asyncValidator?sr.asyncValidator:null)),new Nt(hn,{asyncValidators:qi,updateOn:ko,validators:ri})}control(st,sr,hn){return new yt(st,sr,hn)}array(st,sr,hn){const ri=st.map(qi=>this._createControl(qi));return new Yt(ri,sr,hn)}_reduceControls(st){const sr={};return Object.keys(st).forEach(hn=>{sr[hn]=this._createControl(st[hn])}),sr}_createControl(st){return st instanceof yt||st instanceof Nt||st instanceof Yt?st:Array.isArray(st)?this.control(st[0],st.length>1?st[1]:null,st.length>2?st[2]:null):this.control(st)}}return Dt.\u0275fac=function(st){return new(st||Dt)},Dt.\u0275prov=(0,K.Yz7)({factory:function(){return new Dt},token:Dt,providedIn:ia}),Dt})()},8918:Ml=>{Ml.exports=function x(Q,K,p){function v(e,n){if(!K[e]){if(!Q[e]){if(u)return u(e,!0);var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}var r=K[e]={exports:{}};Q[e][0].call(r.exports,function(f){return v(Q[e][1][f]||f)},r,r.exports,x,Q,K,p)}return K[e].exports}for(var u=void 0,y=0;y<p.length;y++)v(p[y]);return v}({1:[function(x,Q,K){"use strict";var p=x("../src/lib"),v={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var u in v){var y=u.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");p.addStyleRule(y,v[u])}},{"../src/lib":503}],2:[function(x,Q,K){"use strict";Q.exports=x("../src/transforms/aggregate")},{"../src/transforms/aggregate":1113}],3:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/box")},{"../src/traces/box":679}],6:[function(x,Q,K){"use strict";Q.exports=x("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(x,Q,K){"use strict";Q.exports=x("../src/core")},{"../src/core":481}],15:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(x,Q,K){"use strict";Q.exports=x("../src/transforms/filter")},{"../src/transforms/filter":1114}],17:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(x,Q,K){"use strict";Q.exports=x("../src/transforms/groupby")},{"../src/transforms/groupby":1115}],20:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":810}],22:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/histogram")},{"../src/traces/histogram":822}],23:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/histogram2d")},{"../src/traces/histogram2d":828}],24:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":832}],25:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/icicle")},{"../src/traces/icicle":838}],26:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/image")},{"../src/traces/image":851}],27:[function(x,Q,K){"use strict";var p=x("./core");p.register([x("./bar"),x("./box"),x("./heatmap"),x("./histogram"),x("./histogram2d"),x("./histogram2dcontour"),x("./contour"),x("./scatterternary"),x("./violin"),x("./funnel"),x("./waterfall"),x("./image"),x("./pie"),x("./sunburst"),x("./treemap"),x("./icicle"),x("./funnelarea"),x("./scatter3d"),x("./surface"),x("./isosurface"),x("./volume"),x("./mesh3d"),x("./cone"),x("./streamtube"),x("./scattergeo"),x("./choropleth"),x("./scattergl"),x("./splom"),x("./pointcloud"),x("./heatmapgl"),x("./parcoords"),x("./parcats"),x("./scattermapbox"),x("./choroplethmapbox"),x("./densitymapbox"),x("./sankey"),x("./indicator"),x("./table"),x("./carpet"),x("./scattercarpet"),x("./contourcarpet"),x("./ohlc"),x("./candlestick"),x("./scatterpolar"),x("./scatterpolargl"),x("./barpolar"),x("./scattersmith"),x("./aggregate"),x("./filter"),x("./groupby"),x("./sort"),x("./calendars")]),Q.exports=p},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/indicator")},{"../src/traces/indicator":859}],29:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/isosurface")},{"../src/traces/isosurface":865}],30:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/mesh3d")},{"../src/traces/mesh3d":870}],31:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/ohlc")},{"../src/traces/ohlc":875}],32:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/parcats")},{"../src/traces/parcats":884}],33:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/parcoords")},{"../src/traces/parcoords":894}],34:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/pie")},{"../src/traces/pie":905}],35:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/pointcloud")},{"../src/traces/pointcloud":914}],36:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/sankey")},{"../src/traces/sankey":920}],37:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/scatter3d")},{"../src/traces/scatter3d":958}],38:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":965}],39:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/scattergeo")},{"../src/traces/scattergeo":973}],40:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/scattergl")},{"../src/traces/scattergl":986}],41:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":996}],42:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1004}],43:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1011}],44:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/scattersmith")},{"../src/traces/scattersmith":1018}],45:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/scatterternary")},{"../src/traces/scatterternary":1026}],46:[function(x,Q,K){"use strict";Q.exports=x("../src/transforms/sort")},{"../src/transforms/sort":1117}],47:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/splom")},{"../src/traces/splom":1035}],48:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/streamtube")},{"../src/traces/streamtube":1043}],49:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/sunburst")},{"../src/traces/sunburst":1051}],50:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/surface")},{"../src/traces/surface":1060}],51:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/table")},{"../src/traces/table":1068}],52:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/treemap")},{"../src/traces/treemap":1079}],53:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/violin")},{"../src/traces/violin":1092}],54:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/volume")},{"../src/traces/volume":1100}],55:[function(x,Q,K){"use strict";Q.exports=x("../src/traces/waterfall")},{"../src/traces/waterfall":1108}],56:[function(x,Q,K){var p,v;p=this,v=function(p,v,u,y,e){"use strict";function n(re){return re.target.depth}function t(re,ne){return re.sourceLinks.length?re.depth:ne-1}function a(re){return function(){return re}}e=e&&e.hasOwnProperty("default")?e.default:e;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(re){return typeof re}:function(re){return re&&"function"==typeof Symbol&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re};function f(re,ne){return i(re.source,ne.source)||re.index-ne.index}function s(re,ne){return i(re.target,ne.target)||re.index-ne.index}function i(re,ne){return re.partOfCycle===ne.partOfCycle?re.y0-ne.y0:"top"===re.circularLinkType||"bottom"===ne.circularLinkType?-1:1}function l(re){return re.value}function c(re){return(re.y0+re.y1)/2}function h(re){return c(re.source)}function m(re){return c(re.target)}function d(re){return re.index}function o(re){return re.nodes}function b(re){return re.links}function g(re,ne){var se=re.get(ne);if(!se)throw new Error("missing: "+ne);return se}function w(re,ne){return ne(re)}function _(re,ne,se){var ie=0;if(null===se){for(var ue=[],le=0;le<re.links.length;le++){var de=re.links[le],ve=de.source.index,_e=de.target.index;ue[ve]||(ue[ve]=[]),ue[_e]||(ue[_e]=[]),-1===ue[ve].indexOf(_e)&&ue[ve].push(_e)}var be=e(ue);be.sort(function(me,Ae){return me.length-Ae.length});var Te={};for(le=0;le<be.length;le++){var he=be[le].slice(-2);Te[he[0]]||(Te[he[0]]={}),Te[he[0]][he[1]]=!0}re.links.forEach(function(me){var Ae=me.target.index,we=me.source.index;Ae===we||Te[we]&&Te[we][Ae]?(me.circular=!0,me.circularLinkID=ie,ie+=1):me.circular=!1})}else re.links.forEach(function(me){me.source[se]<me.target[se]?me.circular=!1:(me.circular=!0,me.circularLinkID=ie,ie+=1)})}function A(re,ne){var se=0,ie=0;re.links.forEach(function(ue){ue.circular&&(ue.circularLinkType=ue.source.circularLinkType||ue.target.circularLinkType?ue.source.circularLinkType?ue.source.circularLinkType:ue.target.circularLinkType:se<ie?"top":"bottom","top"==ue.circularLinkType?se+=1:ie+=1,re.nodes.forEach(function(le){w(le,ne)!=w(ue.source,ne)&&w(le,ne)!=w(ue.target,ne)||(le.circularLinkType=ue.circularLinkType)}))}),re.links.forEach(function(ue){ue.circular&&(ue.source.circularLinkType==ue.target.circularLinkType&&(ue.circularLinkType=ue.source.circularLinkType),J(ue,ne)&&(ue.circularLinkType=ue.source.circularLinkType))})}function T(re){var ne=Math.abs(re.y1-re.y0),se=Math.abs(re.target.x0-re.source.x1);return Math.atan(se/ne)}function E(re,ne){var se=0;re.sourceLinks.forEach(function(ue){se=ue.circular&&!J(ue,ne)?se+1:se});var ie=0;return re.targetLinks.forEach(function(ue){ie=ue.circular&&!J(ue,ne)?ie+1:ie}),se+ie}function k(re){var se=0;re.source.sourceLinks.forEach(function(le){se=le.circular?se+1:se});var ue=0;return re.target.targetLinks.forEach(function(le){ue=le.circular?ue+1:ue}),!(se>1||ue>1)}function O(re,ne,se){return re.sort(S),re.forEach(function(ie,ue){var le,de,ve=0;if(J(ie,se)&&k(ie))ie.circularPathData.verticalBuffer=ve+ie.width/2;else{for(var _e=0;_e<ue;_e++)if(!((le=re[ue]).source.column<(de=re[_e]).target.column||le.target.column>de.source.column)){var be=re[_e].circularPathData.verticalBuffer+re[_e].width/2+ne;ve=be>ve?be:ve}ie.circularPathData.verticalBuffer=ve+ie.width/2}}),re}function D(re,ne,se,ie){var ue=v.min(re.links,function(le){return le.source.y0});re.links.forEach(function(le){le.circular&&(le.circularPathData={})}),O(re.links.filter(function(le){return"top"==le.circularLinkType}),ne,ie),O(re.links.filter(function(le){return"bottom"==le.circularLinkType}),ne,ie),re.links.forEach(function(le){if(le.circular){if(le.circularPathData.arcRadius=le.width+10,le.circularPathData.leftNodeBuffer=5,le.circularPathData.rightNodeBuffer=5,le.circularPathData.sourceWidth=le.source.x1-le.source.x0,le.circularPathData.sourceX=le.source.x0+le.circularPathData.sourceWidth,le.circularPathData.targetX=le.target.x0,le.circularPathData.sourceY=le.y0,le.circularPathData.targetY=le.y1,J(le,ie)&&k(le))le.circularPathData.leftSmallArcRadius=10+le.width/2,le.circularPathData.leftLargeArcRadius=10+le.width/2,le.circularPathData.rightSmallArcRadius=10+le.width/2,le.circularPathData.rightLargeArcRadius=10+le.width/2,"bottom"==le.circularLinkType?(le.circularPathData.verticalFullExtent=le.source.y1+25+le.circularPathData.verticalBuffer,le.circularPathData.verticalLeftInnerExtent=le.circularPathData.verticalFullExtent-le.circularPathData.leftLargeArcRadius,le.circularPathData.verticalRightInnerExtent=le.circularPathData.verticalFullExtent-le.circularPathData.rightLargeArcRadius):(le.circularPathData.verticalFullExtent=le.source.y0-25-le.circularPathData.verticalBuffer,le.circularPathData.verticalLeftInnerExtent=le.circularPathData.verticalFullExtent+le.circularPathData.leftLargeArcRadius,le.circularPathData.verticalRightInnerExtent=le.circularPathData.verticalFullExtent+le.circularPathData.rightLargeArcRadius);else{var de=le.source.column,ve=le.circularLinkType,_e=re.links.filter(function(he){return he.source.column==de&&he.circularLinkType==ve});_e.sort("bottom"==le.circularLinkType?z:C);var be=0;_e.forEach(function(he,me){he.circularLinkID==le.circularLinkID&&(le.circularPathData.leftSmallArcRadius=10+le.width/2+be,le.circularPathData.leftLargeArcRadius=10+le.width/2+me*ne+be),be+=he.width}),de=le.target.column,(_e=re.links.filter(function(he){return he.target.column==de&&he.circularLinkType==ve})).sort("bottom"==le.circularLinkType?U:B),be=0,_e.forEach(function(he,me){he.circularLinkID==le.circularLinkID&&(le.circularPathData.rightSmallArcRadius=10+le.width/2+be,le.circularPathData.rightLargeArcRadius=10+le.width/2+me*ne+be),be+=he.width}),"bottom"==le.circularLinkType?(le.circularPathData.verticalFullExtent=Math.max(se,le.source.y1,le.target.y1)+25+le.circularPathData.verticalBuffer,le.circularPathData.verticalLeftInnerExtent=le.circularPathData.verticalFullExtent-le.circularPathData.leftLargeArcRadius,le.circularPathData.verticalRightInnerExtent=le.circularPathData.verticalFullExtent-le.circularPathData.rightLargeArcRadius):(le.circularPathData.verticalFullExtent=ue-25-le.circularPathData.verticalBuffer,le.circularPathData.verticalLeftInnerExtent=le.circularPathData.verticalFullExtent+le.circularPathData.leftLargeArcRadius,le.circularPathData.verticalRightInnerExtent=le.circularPathData.verticalFullExtent+le.circularPathData.rightLargeArcRadius)}le.circularPathData.leftInnerExtent=le.circularPathData.sourceX+le.circularPathData.leftNodeBuffer,le.circularPathData.rightInnerExtent=le.circularPathData.targetX-le.circularPathData.rightNodeBuffer,le.circularPathData.leftFullExtent=le.circularPathData.sourceX+le.circularPathData.leftLargeArcRadius+le.circularPathData.leftNodeBuffer,le.circularPathData.rightFullExtent=le.circularPathData.targetX-le.circularPathData.rightLargeArcRadius-le.circularPathData.rightNodeBuffer}if(le.circular)le.path="top"==(he=le).circularLinkType?"M"+he.circularPathData.sourceX+" "+he.circularPathData.sourceY+" L"+he.circularPathData.leftInnerExtent+" "+he.circularPathData.sourceY+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftSmallArcRadius+" 0 0 0 "+he.circularPathData.leftFullExtent+" "+(he.circularPathData.sourceY-he.circularPathData.leftSmallArcRadius)+" L"+he.circularPathData.leftFullExtent+" "+he.circularPathData.verticalLeftInnerExtent+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftLargeArcRadius+" 0 0 0 "+he.circularPathData.leftInnerExtent+" "+he.circularPathData.verticalFullExtent+" L"+he.circularPathData.rightInnerExtent+" "+he.circularPathData.verticalFullExtent+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightLargeArcRadius+" 0 0 0 "+he.circularPathData.rightFullExtent+" "+he.circularPathData.verticalRightInnerExtent+" L"+he.circularPathData.rightFullExtent+" "+(he.circularPathData.targetY-he.circularPathData.rightSmallArcRadius)+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightSmallArcRadius+" 0 0 0 "+he.circularPathData.rightInnerExtent+" "+he.circularPathData.targetY+" L"+he.circularPathData.targetX+" "+he.circularPathData.targetY:"M"+he.circularPathData.sourceX+" "+he.circularPathData.sourceY+" L"+he.circularPathData.leftInnerExtent+" "+he.circularPathData.sourceY+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftSmallArcRadius+" 0 0 1 "+he.circularPathData.leftFullExtent+" "+(he.circularPathData.sourceY+he.circularPathData.leftSmallArcRadius)+" L"+he.circularPathData.leftFullExtent+" "+he.circularPathData.verticalLeftInnerExtent+" A"+he.circularPathData.leftLargeArcRadius+" "+he.circularPathData.leftLargeArcRadius+" 0 0 1 "+he.circularPathData.leftInnerExtent+" "+he.circularPathData.verticalFullExtent+" L"+he.circularPathData.rightInnerExtent+" "+he.circularPathData.verticalFullExtent+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightLargeArcRadius+" 0 0 1 "+he.circularPathData.rightFullExtent+" "+he.circularPathData.verticalRightInnerExtent+" L"+he.circularPathData.rightFullExtent+" "+(he.circularPathData.targetY+he.circularPathData.rightSmallArcRadius)+" A"+he.circularPathData.rightLargeArcRadius+" "+he.circularPathData.rightSmallArcRadius+" 0 0 1 "+he.circularPathData.rightInnerExtent+" "+he.circularPathData.targetY+" L"+he.circularPathData.targetX+" "+he.circularPathData.targetY;else{var Te=y.linkHorizontal().source(function(he){return[he.source.x0+(he.source.x1-he.source.x0),he.y0]}).target(function(he){return[he.target.x0,he.y1]});le.path=Te(le)}var he})}function S(re,ne){return G(re)==G(ne)?"bottom"==re.circularLinkType?z(re,ne):C(re,ne):G(ne)-G(re)}function C(re,ne){return re.y0-ne.y0}function z(re,ne){return ne.y0-re.y0}function B(re,ne){return re.y1-ne.y1}function U(re,ne){return ne.y1-re.y1}function G(re){return re.target.column-re.source.column}function X(re){return re.target.x0-re.source.x1}function Z(re,ne){var se=T(re),ie=X(ne)/Math.tan(se);return"up"==j(re)?re.y1+ie:re.y1-ie}function q(re,ne){var se=T(re),ie=X(ne)/Math.tan(se);return"up"==j(re)?re.y1-ie:re.y1+ie}function W(re,ne,se,ie){re.links.forEach(function(ue){if(!ue.circular&&ue.target.column-ue.source.column>1){var le=ue.source.column+1,de=ue.target.column-1,ve=1,_e=de-le+1;for(ve=1;le<=de;le++,ve++)re.nodes.forEach(function(be){if(be.column==le){var Te,he=ve/(_e+1),me=Math.pow(1-he,3),Ae=3*he*Math.pow(1-he,2),we=3*Math.pow(he,2)*(1-he),Se=Math.pow(he,3),Pe=me*ue.y0+Ae*ue.y0+we*ue.y1+Se*ue.y1,ze=Pe-ue.width/2,He=Pe+ue.width/2;ze>be.y0&&ze<be.y1?(Te=be.y1-ze+10,be=R(be,Te="bottom"==be.circularLinkType?Te:-Te,ne,se),re.nodes.forEach(function(tt){w(tt,ie)!=w(be,ie)&&tt.column==be.column&&te(be,tt)&&R(tt,Te,ne,se)})):(He>be.y0&&He<be.y1||ze<be.y0&&He>be.y1)&&(be=R(be,Te=He-be.y0+10,ne,se),re.nodes.forEach(function(tt){w(tt,ie)!=w(be,ie)&&tt.column==be.column&&tt.y0<be.y1&&tt.y1>be.y1&&R(tt,Te,ne,se)}))}})}})}function te(re,ne){return re.y0>ne.y0&&re.y0<ne.y1||re.y1>ne.y0&&re.y1<ne.y1||re.y0<ne.y0&&re.y1>ne.y1}function R(re,ne,se,ie){return re.y0+ne>=se&&re.y1+ne<=ie&&(re.y0=re.y0+ne,re.y1=re.y1+ne,re.targetLinks.forEach(function(ue){ue.y1=ue.y1+ne}),re.sourceLinks.forEach(function(ue){ue.y0=ue.y0+ne})),re}function N(re,ne,se,ie){re.nodes.forEach(function(ue){ie&&ue.y+(ue.y1-ue.y0)>ne&&(ue.y=ue.y-(ue.y+(ue.y1-ue.y0)-ne));var le=re.links.filter(function(_e){return w(_e.source,se)==w(ue,se)}),de=le.length;de>1&&le.sort(function(_e,be){if(!_e.circular&&!be.circular){if(_e.target.column==be.target.column||!ee(_e,be))return _e.y1-be.y1;if(_e.target.column>be.target.column){var Te=q(be,_e);return _e.y1-Te}if(be.target.column>_e.target.column)return q(_e,be)-be.y1}return _e.circular&&!be.circular?"top"==_e.circularLinkType?-1:1:be.circular&&!_e.circular?"top"==be.circularLinkType?1:-1:_e.circular&&be.circular?_e.circularLinkType===be.circularLinkType&&"top"==_e.circularLinkType?_e.target.column===be.target.column?_e.target.y1-be.target.y1:be.target.column-_e.target.column:_e.circularLinkType===be.circularLinkType&&"bottom"==_e.circularLinkType?_e.target.column===be.target.column?be.target.y1-_e.target.y1:_e.target.column-be.target.column:"top"==_e.circularLinkType?-1:1:void 0});var ve=ue.y0;le.forEach(function(_e){_e.y0=ve+_e.width/2,ve+=_e.width}),le.forEach(function(_e,be){if("bottom"==_e.circularLinkType){for(var Te=be+1,he=0;Te<de;Te++)he+=le[Te].width;_e.y0=ue.y1-he-_e.width/2}})})}function V(re,ne,se){re.nodes.forEach(function(ie){var ue=re.links.filter(function(ve){return w(ve.target,se)==w(ie,se)}),le=ue.length;le>1&&ue.sort(function(ve,_e){if(!ve.circular&&!_e.circular){if(ve.source.column==_e.source.column||!ee(ve,_e))return ve.y0-_e.y0;if(_e.source.column<ve.source.column){var be=Z(_e,ve);return ve.y0-be}if(ve.source.column<_e.source.column)return Z(ve,_e)-_e.y0}return ve.circular&&!_e.circular?"top"==ve.circularLinkType?-1:1:_e.circular&&!ve.circular?"top"==_e.circularLinkType?1:-1:ve.circular&&_e.circular?ve.circularLinkType===_e.circularLinkType&&"top"==ve.circularLinkType?ve.source.column===_e.source.column?ve.source.y1-_e.source.y1:ve.source.column-_e.source.column:ve.circularLinkType===_e.circularLinkType&&"bottom"==ve.circularLinkType?ve.source.column===_e.source.column?ve.source.y1-_e.source.y1:_e.source.column-ve.source.column:"top"==ve.circularLinkType?-1:1:void 0});var de=ie.y0;ue.forEach(function(ve){ve.y1=de+ve.width/2,de+=ve.width}),ue.forEach(function(ve,_e){if("bottom"==ve.circularLinkType){for(var be=_e+1,Te=0;be<le;be++)Te+=ue[be].width;ve.y1=ie.y1-Te-ve.width/2}})})}function ee(re,ne){return j(re)==j(ne)}function j(re){return re.y0-re.y1>0?"up":"down"}function J(re,ne){return w(re.source,ne)==w(re.target,ne)}function $(re,ne,se){var ie=re.nodes,ue=re.links,le=!1,de=!1;if(ue.forEach(function(be){"top"==be.circularLinkType?le=!0:"bottom"==be.circularLinkType&&(de=!0)}),0==le||0==de){var ve=v.min(ie,function(be){return be.y0}),_e=(se-ne)/(v.max(ie,function(be){return be.y1})-ve);ie.forEach(function(be){var Te=(be.y1-be.y0)*_e;be.y0=(be.y0-ve)*_e,be.y1=be.y0+Te}),ue.forEach(function(be){be.y0=(be.y0-ve)*_e,be.y1=(be.y1-ve)*_e,be.width=be.width*_e})}}p.sankeyCircular=function(){var re,ne,se=0,ie=0,ue=1,le=1,de=24,ve=d,_e=t,be=o,Te=b,he=32,me=2,Ae=null;function we(){var Oe={nodes:be.apply(null,arguments),links:Te.apply(null,arguments)};Se(Oe),_(Oe,0,Ae),Pe(Oe),ze(Oe),A(Oe,ve),He(Oe,he,ve),tt(Oe);for(var Be=4,Je=0;Je<Be;Je++)N(Oe,le,ve),V(Oe,0,ve),W(Oe,ie,le,ve),N(Oe,le,ve),V(Oe,0,ve);return $(Oe,ie,le),D(Oe,me,le,ve),Oe}function Se(Oe){Oe.nodes.forEach(function(Je,Ye){Je.index=Ye,Je.sourceLinks=[],Je.targetLinks=[]});var Be=u.map(Oe.nodes,ve);return Oe.links.forEach(function(Je,Ye){Je.index=Ye;var nt=Je.source,ft=Je.target;"object"!==(void 0===nt?"undefined":r(nt))&&(nt=Je.source=g(Be,nt)),"object"!==(void 0===ft?"undefined":r(ft))&&(ft=Je.target=g(Be,ft)),nt.sourceLinks.push(Je),ft.targetLinks.push(Je)}),Oe}function Pe(Oe){Oe.nodes.forEach(function(Be){Be.partOfCycle=!1,Be.value=Math.max(v.sum(Be.sourceLinks,l),v.sum(Be.targetLinks,l)),Be.sourceLinks.forEach(function(Je){Je.circular&&(Be.partOfCycle=!0,Be.circularLinkType=Je.circularLinkType)}),Be.targetLinks.forEach(function(Je){Je.circular&&(Be.partOfCycle=!0,Be.circularLinkType=Je.circularLinkType)})})}function ze(Oe){var Be,Je,Ye;for(Be=Oe.nodes,Je=[],Ye=0;Be.length;++Ye,Be=Je,Je=[])Be.forEach(function(nt){nt.depth=Ye,nt.sourceLinks.forEach(function(ft){Je.indexOf(ft.target)<0&&!ft.circular&&Je.push(ft.target)})});for(Be=Oe.nodes,Je=[],Ye=0;Be.length;++Ye,Be=Je,Je=[])Be.forEach(function(nt){nt.height=Ye,nt.targetLinks.forEach(function(ft){Je.indexOf(ft.source)<0&&!ft.circular&&Je.push(ft.source)})});Oe.nodes.forEach(function(nt){nt.column=Math.floor(_e.call(null,nt,Ye))})}function He(Oe,Be,Je){var Ye=u.nest().key(function(Et){return Et.column}).sortKeys(v.ascending).entries(Oe.nodes).map(function(Et){return Et.values});(function(Et){if(ne){var at=1/0;Ye.forEach(function(lr){var Ue=le*ne/(lr.length+1);at=Ue<at?Ue:at}),re=at}var rt=v.min(Ye,function(lr){return(le-ie-(lr.length-1)*re)/v.sum(lr,l)});rt*=.3,Oe.links.forEach(function(lr){lr.width=lr.value*rt});var lr,Ue,Ze,Ne,it,ke,St=(Ue=0,Ze=0,Ne=0,it=0,ke=v.max((lr=Oe).nodes,function(De){return De.column}),lr.links.forEach(function(De){De.circular&&("top"==De.circularLinkType?Ue+=De.width:Ze+=De.width,0==De.target.column&&(it+=De.width),De.source.column==ke&&(Ne+=De.width))}),{top:Ue=Ue>0?Ue+25+10:Ue,bottom:Ze=Ze>0?Ze+25+10:Ze,left:it=it>0?it+25+10:it,right:Ne=Ne>0?Ne+25+10:Ne}),Xt=function(lr,Ue){var Ze=v.max(lr.nodes,function(Re){return Re.column}),Ne=ue-se,it=le-ie,ke=Ne/(Ne+Ue.right+Ue.left),De=it/(it+Ue.top+Ue.bottom);return se=se*ke+Ue.left,ue=0==Ue.right?ue:ue*ke,ie=ie*De+Ue.top,le*=De,lr.nodes.forEach(function(Re){Re.x0=se+Re.column*((ue-se-de)/Ze),Re.x1=Re.x0+de}),De}(Oe,St);rt*=Xt,Oe.links.forEach(function(lr){lr.width=lr.value*rt}),Ye.forEach(function(lr){var Ue=lr.length;lr.forEach(function(Ze,Ne){Ze.depth==Ye.length-1&&1==Ue||0==Ze.depth&&1==Ue?(Ze.y0=le/2-Ze.value*rt,Ze.y1=Ze.y0+Ze.value*rt):Ze.partOfCycle?0==E(Ze,Et)?(Ze.y0=le/2+Ne,Ze.y1=Ze.y0+Ze.value*rt):"top"==Ze.circularLinkType?(Ze.y0=ie+Ne,Ze.y1=Ze.y0+Ze.value*rt):(Ze.y0=le-Ze.value*rt-Ne,Ze.y1=Ze.y0+Ze.value*rt):0==St.top||0==St.bottom?(Ze.y0=(le-ie)/Ue*Ne,Ze.y1=Ze.y0+Ze.value*rt):(Ze.y0=(le-ie)/2-Ue/2+Ne,Ze.y1=Ze.y0+Ze.value*rt)})})})(Je),Rt();for(var nt=1,ft=Be;ft>0;--ft)dt(nt*=.99,Je),Rt();function dt(Et,at){var rt=Ye.length;Ye.forEach(function(St){var Xt=St.length,lr=St[0].depth;St.forEach(function(Ue){var Ze;if((Ue.sourceLinks.length||Ue.targetLinks.length)&&!(Ue.partOfCycle&&E(Ue,at)>0))if(0==lr&&1==Xt)Ue.y0=le/2-(Ze=Ue.y1-Ue.y0)/2,Ue.y1=le/2+Ze/2;else if(lr==rt-1&&1==Xt)Ue.y0=le/2-(Ze=Ue.y1-Ue.y0)/2,Ue.y1=le/2+Ze/2;else{var Ne=v.mean(Ue.sourceLinks,m),it=v.mean(Ue.targetLinks,h),ke=((Ne&&it?(Ne+it)/2:Ne||it)-c(Ue))*Et;Ue.y0+=ke,Ue.y1+=ke}})})}function Rt(){Ye.forEach(function(Et){var at,rt,St,Xt=ie,lr=Et.length;for(Et.sort(i),St=0;St<lr;++St)(rt=Xt-(at=Et[St]).y0)>0&&(at.y0+=rt,at.y1+=rt),Xt=at.y1+re;if((rt=Xt-re-le)>0)for(Xt=at.y0-=rt,at.y1-=rt,St=lr-2;St>=0;--St)(rt=(at=Et[St]).y1+re-Xt)>0&&(at.y0-=rt,at.y1-=rt),Xt=at.y0})}}function tt(Oe){Oe.nodes.forEach(function(Be){Be.sourceLinks.sort(s),Be.targetLinks.sort(f)}),Oe.nodes.forEach(function(Be){var Je=Be.y0,Ye=Je,nt=Be.y1,ft=nt;Be.sourceLinks.forEach(function(dt){dt.circular?(dt.y0=nt-dt.width/2,nt-=dt.width):(dt.y0=Je+dt.width/2,Je+=dt.width)}),Be.targetLinks.forEach(function(dt){dt.circular?(dt.y1=ft-dt.width/2,ft-=dt.width):(dt.y1=Ye+dt.width/2,Ye+=dt.width)})})}return we.nodeId=function(Oe){return arguments.length?(ve="function"==typeof Oe?Oe:a(Oe),we):ve},we.nodeAlign=function(Oe){return arguments.length?(_e="function"==typeof Oe?Oe:a(Oe),we):_e},we.nodeWidth=function(Oe){return arguments.length?(de=+Oe,we):de},we.nodePadding=function(Oe){return arguments.length?(re=+Oe,we):re},we.nodes=function(Oe){return arguments.length?(be="function"==typeof Oe?Oe:a(Oe),we):be},we.links=function(Oe){return arguments.length?(Te="function"==typeof Oe?Oe:a(Oe),we):Te},we.size=function(Oe){return arguments.length?(se=ie=0,ue=+Oe[0],le=+Oe[1],we):[ue-se,le-ie]},we.extent=function(Oe){return arguments.length?(se=+Oe[0][0],ue=+Oe[1][0],ie=+Oe[0][1],le=+Oe[1][1],we):[[se,ie],[ue,le]]},we.iterations=function(Oe){return arguments.length?(he=+Oe,we):he},we.circularLinkGap=function(Oe){return arguments.length?(me=+Oe,we):me},we.nodePaddingRatio=function(Oe){return arguments.length?(ne=+Oe,we):ne},we.sortNodes=function(Oe){return arguments.length?(Ae=Oe,we):Ae},we.update=function(Oe){return A(Oe,ve),tt(Oe),Oe.links.forEach(function(Be){Be.circular&&(Be.circularLinkType=Be.y0+Be.y1<le?"top":"bottom",Be.source.circularLinkType=Be.circularLinkType,Be.target.circularLinkType=Be.circularLinkType)}),N(Oe,le,ve,!1),V(Oe,0,ve),D(Oe,me,le,ve),Oe},we},p.sankeyCenter=function(re){return re.targetLinks.length?re.depth:re.sourceLinks.length?v.min(re.sourceLinks,n)-1:0},p.sankeyLeft=function(re){return re.depth},p.sankeyRight=function(re,ne){return ne-1-re.height},p.sankeyJustify=t,Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,x("d3-array"),x("d3-collection"),x("d3-shape"),x("elementary-circuits-directed-graph")):v(p.d3=p.d3||{},p.d3,p.d3,p.d3,null)},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(x,Q,K){var p,v;p=this,v=function(p,v,u,y){"use strict";function e(w){return w.target.depth}function n(w,_){return w.sourceLinks.length?w.depth:_-1}function t(w){return function(){return w}}function a(w,_){return f(w.source,_.source)||w.index-_.index}function r(w,_){return f(w.target,_.target)||w.index-_.index}function f(w,_){return w.y0-_.y0}function s(w){return w.value}function i(w){return(w.y0+w.y1)/2}function l(w){return i(w.source)*w.value}function c(w){return i(w.target)*w.value}function h(w){return w.index}function m(w){return w.nodes}function d(w){return w.links}function o(w,_){var A=w.get(_);if(!A)throw new Error("missing: "+_);return A}function b(w){return[w.source.x1,w.y0]}function g(w){return[w.target.x0,w.y1]}p.sankey=function(){var w=0,_=0,A=1,T=1,E=24,k=8,O=h,D=n,S=m,C=d,z=32;function B(){var W={nodes:S.apply(null,arguments),links:C.apply(null,arguments)};return U(W),G(W),X(W),Z(W),q(W),W}function U(W){W.nodes.forEach(function(R,N){R.index=N,R.sourceLinks=[],R.targetLinks=[]});var te=u.map(W.nodes,O);W.links.forEach(function(R,N){R.index=N;var V=R.source,ee=R.target;"object"!=typeof V&&(V=R.source=o(te,V)),"object"!=typeof ee&&(ee=R.target=o(te,ee)),V.sourceLinks.push(R),ee.targetLinks.push(R)})}function G(W){W.nodes.forEach(function(te){te.value=Math.max(v.sum(te.sourceLinks,s),v.sum(te.targetLinks,s))})}function X(W){var te,R,N;for(te=W.nodes,R=[],N=0;te.length;++N,te=R,R=[])te.forEach(function(ee){ee.depth=N,ee.sourceLinks.forEach(function(j){R.indexOf(j.target)<0&&R.push(j.target)})});for(te=W.nodes,R=[],N=0;te.length;++N,te=R,R=[])te.forEach(function(ee){ee.height=N,ee.targetLinks.forEach(function(j){R.indexOf(j.source)<0&&R.push(j.source)})});var V=(A-w-E)/(N-1);W.nodes.forEach(function(ee){ee.x1=(ee.x0=w+Math.max(0,Math.min(N-1,Math.floor(D.call(null,ee,N))))*V)+E})}function Z(W){var te=u.nest().key(function(J){return J.x0}).sortKeys(v.ascending).entries(W.nodes).map(function(J){return J.values});(function(){var J=v.max(te,function(ne){return ne.length}),$=2/3*(T-_)/(J-1);k>$&&(k=$);var re=v.min(te,function(ne){return(T-_-(ne.length-1)*k)/v.sum(ne,s)});te.forEach(function(ne){ne.forEach(function(se,ie){se.y1=(se.y0=ie)+se.value*re})}),W.links.forEach(function(ne){ne.width=ne.value*re})})(),j();for(var R=1,N=z;N>0;--N)ee(R*=.99),j(),V(R),j();function V(J){te.forEach(function($){$.forEach(function(re){if(re.targetLinks.length){var ne=(v.sum(re.targetLinks,l)/v.sum(re.targetLinks,s)-i(re))*J;re.y0+=ne,re.y1+=ne}})})}function ee(J){te.slice().reverse().forEach(function($){$.forEach(function(re){if(re.sourceLinks.length){var ne=(v.sum(re.sourceLinks,c)/v.sum(re.sourceLinks,s)-i(re))*J;re.y0+=ne,re.y1+=ne}})})}function j(){te.forEach(function(J){var $,re,ne,se=_,ie=J.length;for(J.sort(f),ne=0;ne<ie;++ne)(re=se-($=J[ne]).y0)>0&&($.y0+=re,$.y1+=re),se=$.y1+k;if((re=se-k-T)>0)for(se=$.y0-=re,$.y1-=re,ne=ie-2;ne>=0;--ne)(re=($=J[ne]).y1+k-se)>0&&($.y0-=re,$.y1-=re),se=$.y0})}}function q(W){W.nodes.forEach(function(te){te.sourceLinks.sort(r),te.targetLinks.sort(a)}),W.nodes.forEach(function(te){var R=te.y0,N=R;te.sourceLinks.forEach(function(V){V.y0=R+V.width/2,R+=V.width}),te.targetLinks.forEach(function(V){V.y1=N+V.width/2,N+=V.width})})}return B.update=function(W){return q(W),W},B.nodeId=function(W){return arguments.length?(O="function"==typeof W?W:t(W),B):O},B.nodeAlign=function(W){return arguments.length?(D="function"==typeof W?W:t(W),B):D},B.nodeWidth=function(W){return arguments.length?(E=+W,B):E},B.nodePadding=function(W){return arguments.length?(k=+W,B):k},B.nodes=function(W){return arguments.length?(S="function"==typeof W?W:t(W),B):S},B.links=function(W){return arguments.length?(C="function"==typeof W?W:t(W),B):C},B.size=function(W){return arguments.length?(w=_=0,A=+W[0],T=+W[1],B):[A-w,T-_]},B.extent=function(W){return arguments.length?(w=+W[0][0],A=+W[1][0],_=+W[0][1],T=+W[1][1],B):[[w,_],[A,T]]},B.iterations=function(W){return arguments.length?(z=+W,B):z},B},p.sankeyCenter=function(w){return w.targetLinks.length?w.depth:w.sourceLinks.length?v.min(w.sourceLinks,e)-1:0},p.sankeyLeft=function(w){return w.depth},p.sankeyRight=function(w,_){return _-1-w.height},p.sankeyJustify=n,p.sankeyLinkHorizontal=function(){return y.linkHorizontal().source(b).target(g)},Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,x("d3-array"),x("d3-collection"),x("d3-shape")):v(p.d3=p.d3||{},p.d3,p.d3,p.d3)},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(x,Q,K){(function(){var p={version:"3.8.0"},v=[].slice,u=function(ce){return v.call(ce)},y=self.document;function e(ce){return ce&&(ce.ownerDocument||ce.document||ce).documentElement}function n(ce){return ce&&(ce.ownerDocument&&ce.ownerDocument.defaultView||ce.document&&ce||ce.defaultView)}if(y)try{u(y.documentElement.childNodes)}catch(ce){u=function(L){for(var P=L.length,F=new Array(P);P--;)F[P]=L[P];return F}}if(Date.now||(Date.now=function(){return+new Date}),y)try{y.createElement("DIV").style.setProperty("opacity",0,"")}catch(ce){var t=this.Element.prototype,a=t.setAttribute,r=t.setAttributeNS,f=this.CSSStyleDeclaration.prototype,s=f.setProperty;t.setAttribute=function(L,P){a.call(this,L,P+"")},t.setAttributeNS=function(L,P,F){r.call(this,L,P,F+"")},f.setProperty=function(L,P,F){s.call(this,L,P+"",F)}}function i(ce,L){return ce<L?-1:ce>L?1:ce>=L?0:NaN}function l(ce){return null===ce?NaN:+ce}function c(ce){return!isNaN(ce)}function h(ce){return{left:function(L,P,F,H){for(arguments.length<3&&(F=0),arguments.length<4&&(H=L.length);F<H;){var oe=F+H>>>1;ce(L[oe],P)<0?F=oe+1:H=oe}return F},right:function(L,P,F,H){for(arguments.length<3&&(F=0),arguments.length<4&&(H=L.length);F<H;){var oe=F+H>>>1;ce(L[oe],P)>0?H=oe:F=oe+1}return F}}}p.ascending=i,p.descending=function(ce,L){return L<ce?-1:L>ce?1:L>=ce?0:NaN},p.min=function(ce,L){var P,F,H=-1,oe=ce.length;if(1===arguments.length){for(;++H<oe;)if(null!=(F=ce[H])&&F>=F){P=F;break}for(;++H<oe;)null!=(F=ce[H])&&P>F&&(P=F)}else{for(;++H<oe;)if(null!=(F=L.call(ce,ce[H],H))&&F>=F){P=F;break}for(;++H<oe;)null!=(F=L.call(ce,ce[H],H))&&P>F&&(P=F)}return P},p.max=function(ce,L){var P,F,H=-1,oe=ce.length;if(1===arguments.length){for(;++H<oe;)if(null!=(F=ce[H])&&F>=F){P=F;break}for(;++H<oe;)null!=(F=ce[H])&&F>P&&(P=F)}else{for(;++H<oe;)if(null!=(F=L.call(ce,ce[H],H))&&F>=F){P=F;break}for(;++H<oe;)null!=(F=L.call(ce,ce[H],H))&&F>P&&(P=F)}return P},p.extent=function(ce,L){var P,F,H,oe=-1,fe=ce.length;if(1===arguments.length){for(;++oe<fe;)if(null!=(F=ce[oe])&&F>=F){P=H=F;break}for(;++oe<fe;)null!=(F=ce[oe])&&(P>F&&(P=F),H<F&&(H=F))}else{for(;++oe<fe;)if(null!=(F=L.call(ce,ce[oe],oe))&&F>=F){P=H=F;break}for(;++oe<fe;)null!=(F=L.call(ce,ce[oe],oe))&&(P>F&&(P=F),H<F&&(H=F))}return[P,H]},p.sum=function(ce,L){var P,F=0,H=ce.length,oe=-1;if(1===arguments.length)for(;++oe<H;)c(P=+ce[oe])&&(F+=P);else for(;++oe<H;)c(P=+L.call(ce,ce[oe],oe))&&(F+=P);return F},p.mean=function(ce,L){var P,F=0,H=ce.length,oe=-1,fe=H;if(1===arguments.length)for(;++oe<H;)c(P=l(ce[oe]))?F+=P:--fe;else for(;++oe<H;)c(P=l(L.call(ce,ce[oe],oe)))?F+=P:--fe;if(fe)return F/fe},p.quantile=function(ce,L){var P=(ce.length-1)*L+1,F=Math.floor(P),H=+ce[F-1],oe=P-F;return oe?H+oe*(ce[F]-H):H},p.median=function(ce,L){var P,F=[],H=ce.length,oe=-1;if(1===arguments.length)for(;++oe<H;)c(P=l(ce[oe]))&&F.push(P);else for(;++oe<H;)c(P=l(L.call(ce,ce[oe],oe)))&&F.push(P);if(F.length)return p.quantile(F.sort(i),.5)},p.variance=function(ce,L){var P,F,H=ce.length,oe=0,fe=0,ge=-1,xe=0;if(1===arguments.length)for(;++ge<H;)c(P=l(ce[ge]))&&(fe+=(F=P-oe)*(P-(oe+=F/++xe)));else for(;++ge<H;)c(P=l(L.call(ce,ce[ge],ge)))&&(fe+=(F=P-oe)*(P-(oe+=F/++xe)));if(xe>1)return fe/(xe-1)},p.deviation=function(){var ce=p.variance.apply(this,arguments);return ce&&Math.sqrt(ce)};var m=h(i);function d(ce){return ce.length}p.bisectLeft=m.left,p.bisect=p.bisectRight=m.right,p.bisector=function(ce){return h(1===ce.length?function(L,P){return i(ce(L),P)}:ce)},p.shuffle=function(ce,L,P){(oe=arguments.length)<3&&(P=ce.length,oe<2&&(L=0));for(var F,H,oe=P-L;oe;)H=Math.random()*oe--|0,F=ce[oe+L],ce[oe+L]=ce[H+L],ce[H+L]=F;return ce},p.permute=function(ce,L){for(var P=L.length,F=new Array(P);P--;)F[P]=ce[L[P]];return F},p.pairs=function(ce){for(var L=0,P=ce.length-1,F=ce[0],H=new Array(P<0?0:P);L<P;)H[L]=[F,F=ce[++L]];return H},p.transpose=function(ce){if(!(H=ce.length))return[];for(var L=-1,P=p.min(ce,d),F=new Array(P);++L<P;)for(var H,oe=-1,fe=F[L]=new Array(H);++oe<H;)fe[oe]=ce[oe][L];return F},p.zip=function(){return p.transpose(arguments)},p.keys=function(ce){var L=[];for(var P in ce)L.push(P);return L},p.values=function(ce){var L=[];for(var P in ce)L.push(ce[P]);return L},p.entries=function(ce){var L=[];for(var P in ce)L.push({key:P,value:ce[P]});return L},p.merge=function(ce){for(var L,P,F,H=ce.length,oe=-1,fe=0;++oe<H;)fe+=ce[oe].length;for(P=new Array(fe);--H>=0;)for(L=(F=ce[H]).length;--L>=0;)P[--fe]=F[L];return P};var o=Math.abs;function b(ce){for(var L=1;ce*L%1;)L*=10;return L}function g(ce,L){for(var P in L)Object.defineProperty(ce.prototype,P,{value:L[P],enumerable:!1})}function w(){this._=Object.create(null)}function _(ce){return"__proto__"==(ce+="")||"\0"===ce[0]?"\0"+ce:ce}function A(ce){return"\0"===(ce+="")[0]?ce.slice(1):ce}function T(ce){return _(ce)in this._}function E(ce){return(ce=_(ce))in this._&&delete this._[ce]}function k(){var ce=[];for(var L in this._)ce.push(A(L));return ce}function O(){var ce=0;for(var L in this._)++ce;return ce}function D(){for(var ce in this._)return!1;return!0}function S(){this._=Object.create(null)}function C(ce){return ce}function z(ce,L,P){return function(){var F=P.apply(L,arguments);return F===L?ce:F}}function B(ce,L){if(L in ce)return L;L=L.charAt(0).toUpperCase()+L.slice(1);for(var P=0,F=U.length;P<F;++P){var H=U[P]+L;if(H in ce)return H}}p.range=function(ce,L,P){if(arguments.length<3&&(P=1,arguments.length<2&&(L=ce,ce=0)),(L-ce)/P==1/0)throw new Error("infinite range");var F,H=[],oe=b(o(P)),fe=-1;if(ce*=oe,L*=oe,(P*=oe)<0)for(;(F=ce+P*++fe)>L;)H.push(F/oe);else for(;(F=ce+P*++fe)<L;)H.push(F/oe);return H},p.map=function(ce,L){var P=new w;if(ce instanceof w)ce.forEach(function(ge,xe){P.set(ge,xe)});else if(Array.isArray(ce)){var F,H=-1,oe=ce.length;if(1===arguments.length)for(;++H<oe;)P.set(H,ce[H]);else for(;++H<oe;)P.set(L.call(ce,F=ce[H],H),F)}else for(var fe in ce)P.set(fe,ce[fe]);return P},g(w,{has:T,get:function(ce){return this._[_(ce)]},set:function(ce,L){return this._[_(ce)]=L},remove:E,keys:k,values:function(){var ce=[];for(var L in this._)ce.push(this._[L]);return ce},entries:function(){var ce=[];for(var L in this._)ce.push({key:A(L),value:this._[L]});return ce},size:O,empty:D,forEach:function(ce){for(var L in this._)ce.call(this,A(L),this._[L])}}),p.nest=function(){var ce,L,P={},F=[],H=[];function oe(fe,ge,xe){if(xe>=F.length)return L?L.call(P,ge):ce?ge.sort(ce):ge;for(var Ce,Ge,Xe,ot,Mt=-1,It=ge.length,Ct=F[xe++],Lt=new w;++Mt<It;)(ot=Lt.get(Ce=Ct(Ge=ge[Mt])))?ot.push(Ge):Lt.set(Ce,[Ge]);return fe?(Ge=fe(),Xe=function(Tt,Ht){Ge.set(Tt,oe(fe,Ht,xe))}):(Ge={},Xe=function(Tt,Ht){Ge[Tt]=oe(fe,Ht,xe)}),Lt.forEach(Xe),Ge}return P.map=function(fe,ge){return oe(ge,fe,0)},P.entries=function(fe){return function ge(xe,Ce){if(Ce>=F.length)return xe;var Ge=[],Xe=H[Ce++];return xe.forEach(function(ot,Mt){Ge.push({key:ot,values:ge(Mt,Ce)})}),Xe?Ge.sort(function(ot,Mt){return Xe(ot.key,Mt.key)}):Ge}(oe(p.map,fe,0),0)},P.key=function(fe){return F.push(fe),P},P.sortKeys=function(fe){return H[F.length-1]=fe,P},P.sortValues=function(fe){return ce=fe,P},P.rollup=function(fe){return L=fe,P},P},p.set=function(ce){var L=new S;if(ce)for(var P=0,F=ce.length;P<F;++P)L.add(ce[P]);return L},g(S,{has:T,add:function(ce){return this._[_(ce+="")]=!0,ce},remove:E,values:k,size:O,empty:D,forEach:function(ce){for(var L in this._)ce.call(this,A(L))}}),p.behavior={},p.rebind=function(ce,L){for(var P,F=1,H=arguments.length;++F<H;)ce[P=arguments[F]]=z(ce,L,L[P]);return ce};var U=["webkit","ms","moz","Moz","o","O"];function G(){}function X(){}function Z(ce){var L=[],P=new w;function F(){for(var H,oe=L,fe=-1,ge=oe.length;++fe<ge;)(H=oe[fe].on)&&H.apply(this,arguments);return ce}return F.on=function(H,oe){var fe,ge=P.get(H);return arguments.length<2?ge&&ge.on:(ge&&(ge.on=null,L=L.slice(0,fe=L.indexOf(ge)).concat(L.slice(fe+1)),P.remove(H)),oe&&L.push(P.set(H,{on:oe})),ce)},F}function q(){p.event.preventDefault()}function W(){for(var ce,L=p.event;ce=L.sourceEvent;)L=ce;return L}function te(ce){for(var L=new X,P=0,F=arguments.length;++P<F;)L[arguments[P]]=Z(L);return L.of=function(H,oe){return function(fe){try{var ge=fe.sourceEvent=p.event;fe.target=ce,p.event=fe,L[fe.type].apply(H,oe)}finally{p.event=ge}}},L}p.dispatch=function(){for(var ce=new X,L=-1,P=arguments.length;++L<P;)ce[arguments[L]]=Z(ce);return ce},X.prototype.on=function(ce,L){var P=ce.indexOf("."),F="";if(P>=0&&(F=ce.slice(P+1),ce=ce.slice(0,P)),ce)return arguments.length<2?this[ce].on(F):this[ce].on(F,L);if(2===arguments.length){if(null==L)for(ce in this)this.hasOwnProperty(ce)&&this[ce].on(F,null);return this}},p.event=null,p.requote=function(ce){return ce.replace(R,"\\$&")};var R=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,N={}.__proto__?function(ce,L){ce.__proto__=L}:function(ce,L){for(var P in L)ce[P]=L[P]};function V(ce){return N(ce,$),ce}var ee=function(ce,L){return L.querySelector(ce)},j=function(ce,L){return L.querySelectorAll(ce)},J=function(ce,L){var P=ce.matches||ce[B(ce,"matchesSelector")];return(J=function(F,H){return P.call(F,H)})(ce,L)};"function"==typeof Sizzle&&(ee=function(ce,L){return Sizzle(ce,L)[0]||null},j=Sizzle,J=Sizzle.matchesSelector),p.selection=function(){return p.select(y.documentElement)};var $=p.selection.prototype=[];function re(ce){return"function"==typeof ce?ce:function(){return ee(ce,this)}}function ne(ce){return"function"==typeof ce?ce:function(){return j(ce,this)}}$.select=function(ce){var L,P,F,H,oe=[];ce=re(ce);for(var fe=-1,ge=this.length;++fe<ge;){oe.push(L=[]),L.parentNode=(F=this[fe]).parentNode;for(var xe=-1,Ce=F.length;++xe<Ce;)(H=F[xe])?(L.push(P=ce.call(H,H.__data__,xe,fe)),P&&"__data__"in H&&(P.__data__=H.__data__)):L.push(null)}return V(oe)},$.selectAll=function(ce){var L,P,F=[];ce=ne(ce);for(var H=-1,oe=this.length;++H<oe;)for(var fe=this[H],ge=-1,xe=fe.length;++ge<xe;)(P=fe[ge])&&(F.push(L=u(ce.call(P,P.__data__,ge,H))),L.parentNode=P);return V(F)};var se="http://www.w3.org/1999/xhtml",ie={svg:"http://www.w3.org/2000/svg",xhtml:se,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ue(ce,L){return ce=p.ns.qualify(ce),null==L?ce.local?function(){this.removeAttributeNS(ce.space,ce.local)}:function(){this.removeAttribute(ce)}:"function"==typeof L?ce.local?function(){var P=L.apply(this,arguments);null==P?this.removeAttributeNS(ce.space,ce.local):this.setAttributeNS(ce.space,ce.local,P)}:function(){var P=L.apply(this,arguments);null==P?this.removeAttribute(ce):this.setAttribute(ce,P)}:ce.local?function(){this.setAttributeNS(ce.space,ce.local,L)}:function(){this.setAttribute(ce,L)}}function le(ce){return ce.trim().replace(/\s+/g," ")}function de(ce){return new RegExp("(?:^|\\s+)"+p.requote(ce)+"(?:\\s+|$)","g")}function ve(ce){return(ce+"").trim().split(/^|\s+/)}function _e(ce,L){var P=(ce=ve(ce).map(be)).length;return"function"==typeof L?function(){for(var F=-1,H=L.apply(this,arguments);++F<P;)ce[F](this,H)}:function(){for(var F=-1;++F<P;)ce[F](this,L)}}function be(ce){var L=de(ce);return function(P,F){if(H=P.classList)return F?H.add(ce):H.remove(ce);var H=P.getAttribute("class")||"";F?(L.lastIndex=0,L.test(H)||P.setAttribute("class",le(H+" "+ce))):P.setAttribute("class",le(H.replace(L," ")))}}function Te(ce,L,P){return null==L?function(){this.style.removeProperty(ce)}:"function"==typeof L?function(){var F=L.apply(this,arguments);null==F?this.style.removeProperty(ce):this.style.setProperty(ce,F,P)}:function(){this.style.setProperty(ce,L,P)}}function he(ce,L){return null==L?function(){delete this[ce]}:"function"==typeof L?function(){var P=L.apply(this,arguments);null==P?delete this[ce]:this[ce]=P}:function(){this[ce]=L}}function me(ce){return"function"==typeof ce?ce:(ce=p.ns.qualify(ce)).local?function(){return this.ownerDocument.createElementNS(ce.space,ce.local)}:function(){var L=this.ownerDocument,P=this.namespaceURI;return P===se&&L.documentElement.namespaceURI===se?L.createElement(ce):L.createElementNS(P,ce)}}function Ae(){var ce=this.parentNode;ce&&ce.removeChild(this)}function we(ce){return{__data__:ce}}function Se(ce){return function(){return J(this,ce)}}function Pe(ce){return arguments.length||(ce=i),function(L,P){return L&&P?ce(L.__data__,P.__data__):!L-!P}}function ze(ce,L){for(var P=0,F=ce.length;P<F;P++)for(var H,oe=ce[P],fe=0,ge=oe.length;fe<ge;fe++)(H=oe[fe])&&L(H,fe,P);return ce}function He(ce){return N(ce,tt),ce}p.ns={prefix:ie,qualify:function(ce){var L=ce.indexOf(":"),P=ce;return L>=0&&"xmlns"!==(P=ce.slice(0,L))&&(ce=ce.slice(L+1)),ie.hasOwnProperty(P)?{space:ie[P],local:ce}:ce}},$.attr=function(ce,L){if(arguments.length<2){if("string"==typeof ce){var P=this.node();return(ce=p.ns.qualify(ce)).local?P.getAttributeNS(ce.space,ce.local):P.getAttribute(ce)}for(L in ce)this.each(ue(L,ce[L]));return this}return this.each(ue(ce,L))},$.classed=function(ce,L){if(arguments.length<2){if("string"==typeof ce){var P=this.node(),F=(ce=ve(ce)).length,H=-1;if(L=P.classList){for(;++H<F;)if(!L.contains(ce[H]))return!1}else for(L=P.getAttribute("class");++H<F;)if(!de(ce[H]).test(L))return!1;return!0}for(L in ce)this.each(_e(L,ce[L]));return this}return this.each(_e(ce,L))},$.style=function(ce,L,P){var F=arguments.length;if(F<3){if("string"!=typeof ce){for(P in F<2&&(L=""),ce)this.each(Te(P,ce[P],L));return this}if(F<2){var H=this.node();return n(H).getComputedStyle(H,null).getPropertyValue(ce)}P=""}return this.each(Te(ce,L,P))},$.property=function(ce,L){if(arguments.length<2){if("string"==typeof ce)return this.node()[ce];for(L in ce)this.each(he(L,ce[L]));return this}return this.each(he(ce,L))},$.text=function(ce){return arguments.length?this.each("function"==typeof ce?function(){var L=ce.apply(this,arguments);this.textContent=null==L?"":L}:null==ce?function(){this.textContent=""}:function(){this.textContent=ce}):this.node().textContent},$.html=function(ce){return arguments.length?this.each("function"==typeof ce?function(){var L=ce.apply(this,arguments);this.innerHTML=null==L?"":L}:null==ce?function(){this.innerHTML=""}:function(){this.innerHTML=ce}):this.node().innerHTML},$.append=function(ce){return ce=me(ce),this.select(function(){return this.appendChild(ce.apply(this,arguments))})},$.insert=function(ce,L){return ce=me(ce),L=re(L),this.select(function(){return this.insertBefore(ce.apply(this,arguments),L.apply(this,arguments)||null)})},$.remove=function(){return this.each(Ae)},$.data=function(ce,L){var P,F,H=-1,oe=this.length;if(!arguments.length){for(ce=new Array(oe=(P=this[0]).length);++H<oe;)(F=P[H])&&(ce[H]=F.__data__);return ce}function fe(Ge,Xe){var ot,Mt,It,Ct=Ge.length,Lt=Xe.length,Tt=Math.min(Ct,Lt),Ht=new Array(Lt),jt=new Array(Lt),Wt=new Array(Ct);if(L){var cr,br=new w,zr=new Array(Ct);for(ot=-1;++ot<Ct;)(Mt=Ge[ot])&&(br.has(cr=L.call(Mt,Mt.__data__,ot))?Wt[ot]=Mt:br.set(cr,Mt),zr[ot]=cr);for(ot=-1;++ot<Lt;)(Mt=br.get(cr=L.call(Xe,It=Xe[ot],ot)))?!0!==Mt&&(Ht[ot]=Mt,Mt.__data__=It):jt[ot]=we(It),br.set(cr,!0);for(ot=-1;++ot<Ct;)ot in zr&&!0!==br.get(zr[ot])&&(Wt[ot]=Ge[ot])}else{for(ot=-1;++ot<Tt;)It=Xe[ot],(Mt=Ge[ot])?(Mt.__data__=It,Ht[ot]=Mt):jt[ot]=we(It);for(;ot<Lt;++ot)jt[ot]=we(Xe[ot]);for(;ot<Ct;++ot)Wt[ot]=Ge[ot]}jt.update=Ht,jt.parentNode=Ht.parentNode=Wt.parentNode=Ge.parentNode,ge.push(jt),xe.push(Ht),Ce.push(Wt)}var ge=He([]),xe=V([]),Ce=V([]);if("function"==typeof ce)for(;++H<oe;)fe(P=this[H],ce.call(P,P.parentNode.__data__,H));else for(;++H<oe;)fe(P=this[H],ce);return xe.enter=function(){return ge},xe.exit=function(){return Ce},xe},$.datum=function(ce){return arguments.length?this.property("__data__",ce):this.property("__data__")},$.filter=function(ce){var L,P,F,H=[];"function"!=typeof ce&&(ce=Se(ce));for(var oe=0,fe=this.length;oe<fe;oe++){H.push(L=[]),L.parentNode=(P=this[oe]).parentNode;for(var ge=0,xe=P.length;ge<xe;ge++)(F=P[ge])&&ce.call(F,F.__data__,ge,oe)&&L.push(F)}return V(H)},$.order=function(){for(var ce=-1,L=this.length;++ce<L;)for(var P,F=this[ce],H=F.length-1,oe=F[H];--H>=0;)(P=F[H])&&(oe&&oe!==P.nextSibling&&oe.parentNode.insertBefore(P,oe),oe=P);return this},$.sort=function(ce){ce=Pe.apply(this,arguments);for(var L=-1,P=this.length;++L<P;)this[L].sort(ce);return this.order()},$.each=function(ce){return ze(this,function(L,P,F){ce.call(L,L.__data__,P,F)})},$.call=function(ce){var L=u(arguments);return ce.apply(L[0]=this,L),this},$.empty=function(){return!this.node()},$.node=function(){for(var ce=0,L=this.length;ce<L;ce++)for(var P=this[ce],F=0,H=P.length;F<H;F++){var oe=P[F];if(oe)return oe}return null},$.size=function(){var ce=0;return ze(this,function(){++ce}),ce};var tt=[];function Oe(ce){var L,P;return function(F,H,oe){var fe,ge=ce[oe].update,xe=ge.length;for(oe!=P&&(P=oe,L=0),H>=L&&(L=H+1);!(fe=ge[L])&&++L<xe;);return fe}}function Be(ce,L,P){var F="__on"+ce,H=ce.indexOf("."),oe=Ye;H>0&&(ce=ce.slice(0,H));var fe=Je.get(ce);function ge(){var xe=this[F];xe&&(this.removeEventListener(ce,xe,xe.$),delete this[F])}return fe&&(ce=fe,oe=nt),H?L?function(){var xe=oe(L,u(arguments));ge.call(this),this.addEventListener(ce,this[F]=xe,xe.$=P),xe._=L}:ge:L?G:function(){var xe,Ce=new RegExp("^__on([^.]+)"+p.requote(ce)+"$");for(var Ge in this)if(xe=Ge.match(Ce)){var Xe=this[Ge];this.removeEventListener(xe[1],Xe,Xe.$),delete this[Ge]}}}p.selection.enter=He,p.selection.enter.prototype=tt,tt.append=$.append,tt.empty=$.empty,tt.node=$.node,tt.call=$.call,tt.size=$.size,tt.select=function(ce){for(var L,P,F,H,oe,fe=[],ge=-1,xe=this.length;++ge<xe;){F=(H=this[ge]).update,fe.push(L=[]),L.parentNode=H.parentNode;for(var Ce=-1,Ge=H.length;++Ce<Ge;)(oe=H[Ce])?(L.push(F[Ce]=P=ce.call(H.parentNode,oe.__data__,Ce,ge)),P.__data__=oe.__data__):L.push(null)}return V(fe)},tt.insert=function(ce,L){return arguments.length<2&&(L=Oe(this)),$.insert.call(this,ce,L)},p.select=function(ce){var L;return"string"==typeof ce?(L=[ee(ce,y)]).parentNode=y.documentElement:(L=[ce]).parentNode=e(ce),V([L])},p.selectAll=function(ce){var L;return"string"==typeof ce?(L=u(j(ce,y))).parentNode=y.documentElement:(L=u(ce)).parentNode=null,V([L])},$.on=function(ce,L,P){var F=arguments.length;if(F<3){if("string"!=typeof ce){for(P in F<2&&(L=!1),ce)this.each(Be(P,ce[P],L));return this}if(F<2)return(F=this.node()["__on"+ce])&&F._;P=!1}return this.each(Be(ce,L,P))};var Je=p.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ye(ce,L){return function(P){var F=p.event;p.event=P,L[0]=this.__data__;try{ce.apply(this,L)}finally{p.event=F}}}function nt(ce,L){var P=Ye(ce,L);return function(F){var H=F.relatedTarget;H&&(H===this||8&H.compareDocumentPosition(this))||P.call(this,F)}}y&&Je.forEach(function(ce){"on"+ce in y&&Je.remove(ce)});var ft,dt=0;function Rt(ce){var L=".dragsuppress-"+ ++dt,P="click"+L,F=p.select(n(ce)).on("touchmove"+L,q).on("dragstart"+L,q).on("selectstart"+L,q);if(null==ft&&(ft=!("onselectstart"in ce)&&B(ce.style,"userSelect")),ft){var H=e(ce).style,oe=H[ft];H[ft]="none"}return function(fe){if(F.on(L,null),ft&&(H[ft]=oe),fe){var ge=function(){F.on(P,null)};F.on(P,function(){q(),ge()},!0),setTimeout(ge,0)}}}p.mouse=function(ce){return at(ce,W())};var Et=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function at(ce,L){L.changedTouches&&(L=L.changedTouches[0]);var P=ce.ownerSVGElement||ce;if(P.createSVGPoint){var F=P.createSVGPoint();if(Et<0){var H=n(ce);if(H.scrollX||H.scrollY){var oe=(P=p.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Et=!(oe.f||oe.e),P.remove()}}return Et?(F.x=L.pageX,F.y=L.pageY):(F.x=L.clientX,F.y=L.clientY),[(F=F.matrixTransform(ce.getScreenCTM().inverse())).x,F.y]}var fe=ce.getBoundingClientRect();return[L.clientX-fe.left-ce.clientLeft,L.clientY-fe.top-ce.clientTop]}function rt(){return p.event.changedTouches[0].identifier}p.touch=function(ce,L,P){if(arguments.length<3&&(P=L,L=W().changedTouches),L)for(var F,H=0,oe=L.length;H<oe;++H)if((F=L[H]).identifier===P)return at(ce,F)},p.behavior.drag=function(){var ce=te(H,"drag","dragstart","dragend"),L=null,P=oe(G,p.mouse,n,"mousemove","mouseup"),F=oe(rt,p.touch,C,"touchmove","touchend");function H(){this.on("mousedown.drag",P).on("touchstart.drag",F)}function oe(fe,ge,xe,Ce,Ge){return function(){var Xe,ot=this,Mt=p.event.target.correspondingElement||p.event.target,It=ot.parentNode,Ct=ce.of(ot,arguments),Lt=0,Tt=fe(),Ht=".drag"+(null==Tt?"":"-"+Tt),jt=p.select(xe(Mt)).on(Ce+Ht,br).on(Ge+Ht,zr),Wt=Rt(Mt),cr=ge(It,Tt);function br(){var Or,sn,on=ge(It,Tt);on&&(Lt|=(Or=on[0]-cr[0])|(sn=on[1]-cr[1]),cr=on,Ct({type:"drag",x:on[0]+Xe[0],y:on[1]+Xe[1],dx:Or,dy:sn}))}function zr(){ge(It,Tt)&&(jt.on(Ce+Ht,null).on(Ge+Ht,null),Wt(Lt),Ct({type:"dragend"}))}Xe=L?[(Xe=L.apply(ot,arguments)).x-cr[0],Xe.y-cr[1]]:[0,0],Ct({type:"dragstart"})}}return H.origin=function(fe){return arguments.length?(L=fe,H):L},p.rebind(H,ce,"on")},p.touches=function(ce,L){return arguments.length<2&&(L=W().touches),L?u(L).map(function(P){var F=at(ce,P);return F.identifier=P.identifier,F}):[]};var St=1e-6,Xt=Math.PI,lr=2*Xt,Ue=lr-St,Ze=Xt/2,Ne=Xt/180,it=180/Xt;function ke(ce){return ce>1?Ze:ce<-1?-Ze:Math.asin(ce)}function De(ce){return((ce=Math.exp(ce))+1/ce)/2}var Re=Math.SQRT2;p.interpolateZoom=function(ce,L){var P,F,H=ce[0],oe=ce[1],fe=ce[2],Ce=L[2],Ge=L[0]-H,Xe=L[1]-oe,ot=Ge*Ge+Xe*Xe;if(ot<1e-12)F=Math.log(Ce/fe)/Re,P=function(Ht){return[H+Ht*Ge,oe+Ht*Xe,fe*Math.exp(Re*Ht*F)]};else{var Mt=Math.sqrt(ot),It=(Ce*Ce-fe*fe+4*ot)/(2*fe*2*Mt),Ct=(Ce*Ce-fe*fe-4*ot)/(2*Ce*2*Mt),Lt=Math.log(Math.sqrt(It*It+1)-It),Tt=Math.log(Math.sqrt(Ct*Ct+1)-Ct);F=(Tt-Lt)/Re,P=function(Ht){var jt,zr,Wt=Ht*F,cr=De(Lt),br=fe/(2*Mt)*(cr*(jt=Re*Wt+Lt,((jt=Math.exp(2*jt))-1)/(jt+1))-(zr=Lt,((zr=Math.exp(zr))-1/zr)/2));return[H+br*Ge,oe+br*Xe,fe*cr/De(Re*Wt+Lt)]}}return P.duration=1e3*F,P},p.behavior.zoom=function(){var ce,L,P,F,H,oe,fe,ge,xe,Ce={x:0,y:0,k:1},Ge=[960,500],Xe=ut,ot=250,Mt=0,It="mousedown.zoom",Ct="mousemove.zoom",Lt="mouseup.zoom",Tt="touchstart.zoom",Ht=te(jt,"zoomstart","zoom","zoomend");function jt(Jr){Jr.on(It,xn).on(Ke+".zoom",ai).on("dblclick.zoom",_i).on(Tt,Kn)}function Wt(Jr){return[(Jr[0]-Ce.x)/Ce.k,(Jr[1]-Ce.y)/Ce.k]}function cr(Jr){Ce.k=Math.max(Xe[0],Math.min(Xe[1],Jr))}function br(Jr,zn){var oi;Ce.x+=Jr[0]-(zn=[(oi=zn)[0]*Ce.k+Ce.x,oi[1]*Ce.k+Ce.y])[0],Ce.y+=Jr[1]-zn[1]}function zr(Jr,zn,oi,ni){Jr.__chart__={x:Ce.x,y:Ce.y,k:Ce.k},cr(Math.pow(2,ni)),br(L=zn,oi),Jr=p.select(Jr),ot>0&&(Jr=Jr.transition().duration(ot)),Jr.call(jt.event)}function Or(){fe&&fe.domain(oe.range().map(function(Jr){return(Jr-Ce.x)/Ce.k}).map(oe.invert)),xe&&xe.domain(ge.range().map(function(Jr){return(Jr-Ce.y)/Ce.k}).map(ge.invert))}function sn(Jr){Mt++||Jr({type:"zoomstart"})}function on(Jr){Or(),Jr({type:"zoom",scale:Ce.k,translate:[Ce.x,Ce.y]})}function Mn(Jr){--Mt||(Jr({type:"zoomend"}),L=null)}function xn(){var Jr=this,zn=Ht.of(Jr,arguments),oi=0,ni=p.select(n(Jr)).on(Ct,zi).on(Lt,si),pi=Wt(p.mouse(Jr)),Ai=Rt(Jr);function zi(){oi=1,br(p.mouse(Jr),pi),on(zn)}function si(){ni.on(Ct,null).on(Lt,null),Ai(oi),Mn(zn)}js.call(Jr),sn(zn)}function Kn(){var Jr,zn=this,oi=Ht.of(zn,arguments),ni={},pi=0,Ai=".zoom-"+p.event.changedTouches[0].identifier,zi="touchmove"+Ai,si="touchend"+Ai,Di=[],Ci=p.select(zn),ji=Rt(zn);function Oi(){var Va=p.touches(zn);return Jr=Ce.k,Va.forEach(function(Ua){Ua.identifier in ni&&(ni[Ua.identifier]=Wt(Ua))}),Va}function Gi(){var Va=p.event.target;p.select(Va).on(zi,ta).on(si,Ta),Di.push(Va);for(var Ua=p.event.changedTouches,wa=0,Ra=Ua.length;wa<Ra;++wa)ni[Ua[wa].identifier]=null;var Ea=Oi(),_o=Date.now();if(1===Ea.length){if(_o-H<500){var to=Ea[0];zr(zn,to,ni[to.identifier],Math.floor(Math.log(Ce.k)/Math.LN2)+1),q()}H=_o}else if(Ea.length>1){var Io=Ea[1],Ps=(to=Ea[0])[0]-Io[0],Ys=to[1]-Io[1];pi=Ps*Ps+Ys*Ys}}function ta(){var Va,Ua,wa,Ra,Ea=p.touches(zn);js.call(zn);for(var _o=0,to=Ea.length;_o<to;++_o,Ra=null)if(Ra=ni[(wa=Ea[_o]).identifier]){if(Ua)break;Va=wa,Ua=Ra}if(Ra){var Io=(Io=wa[0]-Va[0])*Io+(Io=wa[1]-Va[1])*Io,Ps=pi&&Math.sqrt(Io/pi);Va=[(Va[0]+wa[0])/2,(Va[1]+wa[1])/2],Ua=[(Ua[0]+Ra[0])/2,(Ua[1]+Ra[1])/2],cr(Ps*Jr)}H=null,br(Va,Ua),on(oi)}function Ta(){if(p.event.touches.length){for(var Va=p.event.changedTouches,Ua=0,wa=Va.length;Ua<wa;++Ua)delete ni[Va[Ua].identifier];for(var Ra in ni)return void Oi()}p.selectAll(Di).on(Ai,null),Ci.on(It,xn).on(Tt,Kn),ji(),Mn(oi)}Gi(),sn(oi),Ci.on(It,null).on(Tt,Gi)}function ai(){var Jr=Ht.of(this,arguments);F?clearTimeout(F):(js.call(this),ce=Wt(L=P||p.mouse(this)),sn(Jr)),F=setTimeout(function(){F=null,Mn(Jr)},50),q(),cr(Math.pow(2,.002*Ie())*Ce.k),br(L,ce),on(Jr)}function _i(){var Jr=p.mouse(this),zn=Math.log(Ce.k)/Math.LN2;zr(this,Jr,Wt(Jr),p.event.shiftKey?Math.ceil(zn)-1:Math.floor(zn)+1)}return Ke||(Ke="onwheel"in y?(Ie=function(){return-p.event.deltaY*(p.event.deltaMode?120:1)},"wheel"):"onmousewheel"in y?(Ie=function(){return p.event.wheelDelta},"mousewheel"):(Ie=function(){return-p.event.detail},"MozMousePixelScroll")),jt.event=function(Jr){Jr.each(function(){var zn=Ht.of(this,arguments),oi=Ce;vs?p.select(this).transition().each("start.zoom",function(){Ce=this.__chart__||{x:0,y:0,k:1},sn(zn)}).tween("zoom:zoom",function(){var ni=Ge[0],Ai=L?L[0]:ni/2,zi=L?L[1]:Ge[1]/2,si=p.interpolateZoom([(Ai-Ce.x)/Ce.k,(zi-Ce.y)/Ce.k,ni/Ce.k],[(Ai-oi.x)/oi.k,(zi-oi.y)/oi.k,ni/oi.k]);return function(Di){var Ci=si(Di),ji=ni/Ci[2];this.__chart__=Ce={x:Ai-Ci[0]*ji,y:zi-Ci[1]*ji,k:ji},on(zn)}}).each("interrupt.zoom",function(){Mn(zn)}).each("end.zoom",function(){Mn(zn)}):(this.__chart__=Ce,sn(zn),on(zn),Mn(zn))})},jt.translate=function(Jr){return arguments.length?(Ce={x:+Jr[0],y:+Jr[1],k:Ce.k},Or(),jt):[Ce.x,Ce.y]},jt.scale=function(Jr){return arguments.length?(Ce={x:Ce.x,y:Ce.y,k:null},cr(+Jr),Or(),jt):Ce.k},jt.scaleExtent=function(Jr){return arguments.length?(Xe=null==Jr?ut:[+Jr[0],+Jr[1]],jt):Xe},jt.center=function(Jr){return arguments.length?(P=Jr&&[+Jr[0],+Jr[1]],jt):P},jt.size=function(Jr){return arguments.length?(Ge=Jr&&[+Jr[0],+Jr[1]],jt):Ge},jt.duration=function(Jr){return arguments.length?(ot=+Jr,jt):ot},jt.x=function(Jr){return arguments.length?(fe=Jr,oe=Jr.copy(),Ce={x:0,y:0,k:1},jt):fe},jt.y=function(Jr){return arguments.length?(xe=Jr,ge=Jr.copy(),Ce={x:0,y:0,k:1},jt):xe},p.rebind(jt,Ht,"on")};var Ie,Ke,ut=[0,1/0];function xt(){}function gt(ce,L,P){return this instanceof gt?(this.h=+ce,this.s=+L,void(this.l=+P)):arguments.length<2?ce instanceof gt?new gt(ce.h,ce.s,ce.l):Tr(""+ce,wr,gt):new gt(ce,L,P)}p.color=xt,xt.prototype.toString=function(){return this.rgb()+""},p.hsl=gt;var Pt=gt.prototype=new xt;function ct(ce,L,P){var F,H;function oe(fe){return Math.round(255*((ge=fe)>360?ge-=360:ge<0&&(ge+=360),ge<60?F+(H-F)*ge/60:ge<180?H:ge<240?F+(H-F)*(240-ge)/60:F));var ge}return ce=isNaN(ce)?0:(ce%=360)<0?ce+360:ce,L=isNaN(L)||L<0?0:L>1?1:L,F=2*(P=P<0?0:P>1?1:P)-(H=P<=.5?P*(1+L):P+L-P*L),new Zt(oe(ce+120),oe(ce),oe(ce-120))}function zt(ce,L,P){return this instanceof zt?(this.h=+ce,this.c=+L,void(this.l=+P)):arguments.length<2?ce instanceof zt?new zt(ce.h,ce.c,ce.l):Fe(ce instanceof yt?ce.l:(ce=mr((ce=p.rgb(ce)).r,ce.g,ce.b)).l,ce.a,ce.b):new zt(ce,L,P)}Pt.brighter=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new gt(this.h,this.s,this.l/ce)},Pt.darker=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new gt(this.h,this.s,ce*this.l)},Pt.rgb=function(){return ct(this.h,this.s,this.l)},p.hcl=zt;var Ft=zt.prototype=new xt;function Qe(ce,L,P){return isNaN(ce)&&(ce=0),isNaN(L)&&(L=0),new yt(P,Math.cos(ce*=Ne)*L,Math.sin(ce)*L)}function yt(ce,L,P){return this instanceof yt?(this.l=+ce,this.a=+L,void(this.b=+P)):arguments.length<2?ce instanceof yt?new yt(ce.l,ce.a,ce.b):ce instanceof zt?Qe(ce.h,ce.c,ce.l):mr((ce=Zt(ce)).r,ce.g,ce.b):new yt(ce,L,P)}Ft.brighter=function(ce){return new zt(this.h,this.c,Math.min(100,this.l+Nt*(arguments.length?ce:1)))},Ft.darker=function(ce){return new zt(this.h,this.c,Math.max(0,this.l-Nt*(arguments.length?ce:1)))},Ft.rgb=function(){return Qe(this.h,this.c,this.l).rgb()},p.lab=yt;var Nt=18,Yt=yt.prototype=new xt;function rr(ce,L,P){var F=(ce+16)/116,H=F+L/500,oe=F-P/200;return new Zt(Gt(3.2404542*(H=.95047*ht(H))-1.5371385*(F=1*ht(F))-.4985314*(oe=1.08883*ht(oe))),Gt(-.969266*H+1.8760108*F+.041556*oe),Gt(.0556434*H-.2040259*F+1.0572252*oe))}function Fe(ce,L,P){return ce>0?new zt(Math.atan2(P,L)*it,Math.sqrt(L*L+P*P),ce):new zt(NaN,NaN,ce)}function ht(ce){return ce>.206893034?ce*ce*ce:(ce-4/29)/7.787037}function kt(ce){return ce>.008856?Math.pow(ce,1/3):7.787037*ce+4/29}function Gt(ce){return Math.round(255*(ce<=.00304?12.92*ce:1.055*Math.pow(ce,1/2.4)-.055))}function Zt(ce,L,P){return this instanceof Zt?(this.r=~~ce,this.g=~~L,void(this.b=~~P)):arguments.length<2?ce instanceof Zt?new Zt(ce.r,ce.g,ce.b):Tr(""+ce,Zt,ct):new Zt(ce,L,P)}function fr(ce){return new Zt(ce>>16,ce>>8&255,255&ce)}function $t(ce){return fr(ce)+""}Yt.brighter=function(ce){return new yt(Math.min(100,this.l+Nt*(arguments.length?ce:1)),this.a,this.b)},Yt.darker=function(ce){return new yt(Math.max(0,this.l-Nt*(arguments.length?ce:1)),this.a,this.b)},Yt.rgb=function(){return rr(this.l,this.a,this.b)},p.rgb=Zt;var nr=Zt.prototype=new xt;function dr(ce){return ce<16?"0"+Math.max(0,ce).toString(16):Math.min(255,ce).toString(16)}function Tr(ce,L,P){var F,H,oe,fe=0,ge=0,xe=0;if(F=/([a-z]+)\((.*)\)/.exec(ce=ce.toLowerCase()))switch(H=F[2].split(","),F[1]){case"hsl":return P(parseFloat(H[0]),parseFloat(H[1])/100,parseFloat(H[2])/100);case"rgb":return L(Sr(H[0]),Sr(H[1]),Sr(H[2]))}return(oe=Gr.get(ce))?L(oe.r,oe.g,oe.b):(null==ce||"#"!==ce.charAt(0)||isNaN(oe=parseInt(ce.slice(1),16))||(4===ce.length?(fe=(3840&oe)>>4,fe|=fe>>4,ge=240&oe,ge|=ge>>4,xe=15&oe,xe|=xe<<4):7===ce.length&&(fe=(16711680&oe)>>16,ge=(65280&oe)>>8,xe=255&oe)),L(fe,ge,xe))}function wr(ce,L,P){var F,H,oe=Math.min(ce/=255,L/=255,P/=255),fe=Math.max(ce,L,P),ge=fe-oe,xe=(fe+oe)/2;return ge?(H=xe<.5?ge/(fe+oe):ge/(2-fe-oe),F=ce==fe?(L-P)/ge+(L<P?6:0):L==fe?(P-ce)/ge+2:(ce-L)/ge+4,F*=60):(F=NaN,H=xe>0&&xe<1?0:F),new gt(F,H,xe)}function mr(ce,L,P){var F=kt((.4124564*(ce=_r(ce))+.3575761*(L=_r(L))+.1804375*(P=_r(P)))/.95047),H=kt((.2126729*ce+.7151522*L+.072175*P)/1);return yt(116*H-16,500*(F-H),200*(H-kt((.0193339*ce+.119192*L+.9503041*P)/1.08883)))}function _r(ce){return(ce/=255)<=.04045?ce/12.92:Math.pow((ce+.055)/1.055,2.4)}function Sr(ce){var L=parseFloat(ce);return"%"===ce.charAt(ce.length-1)?Math.round(2.55*L):L}nr.brighter=function(ce){ce=Math.pow(.7,arguments.length?ce:1);var L=this.r,P=this.g,F=this.b,H=30;return L||P||F?(L&&L<H&&(L=H),P&&P<H&&(P=H),F&&F<H&&(F=H),new Zt(Math.min(255,L/ce),Math.min(255,P/ce),Math.min(255,F/ce))):new Zt(H,H,H)},nr.darker=function(ce){return new Zt((ce=Math.pow(.7,arguments.length?ce:1))*this.r,ce*this.g,ce*this.b)},nr.hsl=function(){return wr(this.r,this.g,this.b)},nr.toString=function(){return"#"+dr(this.r)+dr(this.g)+dr(this.b)};var Gr=p.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Er(ce){return"function"==typeof ce?ce:function(){return ce}}function Zr(ce){return function(L,P,F){return 2===arguments.length&&"function"==typeof P&&(F=P,P=null),an(L,P,ce,F)}}function an(ce,L,P,F){var Ge,H={},oe=p.dispatch("beforesend","progress","load","error"),fe={},ge=new XMLHttpRequest,xe=null;function Ce(){var Ge,ot,Mt,Xe=ge.status;if(!Xe&&((Mt=(ot=ge).responseType)&&"text"!==Mt?ot.response:ot.responseText)||Xe>=200&&Xe<300||304===Xe){try{Ge=P.call(H,ge)}catch(ot){return void oe.error.call(H,ot)}oe.load.call(H,Ge)}else oe.error.call(H,ge)}return self.XDomainRequest&&!("withCredentials"in ge)&&/^(http(s)?:)?\/\//.test(ce)&&(ge=new XDomainRequest),"onload"in ge?ge.onload=ge.onerror=Ce:ge.onreadystatechange=function(){ge.readyState>3&&Ce()},ge.onprogress=function(Ge){var Xe=p.event;p.event=Ge;try{oe.progress.call(H,ge)}finally{p.event=Xe}},H.header=function(Ge,Xe){return Ge=(Ge+"").toLowerCase(),arguments.length<2?fe[Ge]:(null==Xe?delete fe[Ge]:fe[Ge]=Xe+"",H)},H.mimeType=function(Ge){return arguments.length?(L=null==Ge?null:Ge+"",H):L},H.responseType=function(Ge){return arguments.length?(xe=Ge,H):xe},H.response=function(Ge){return P=Ge,H},["get","post"].forEach(function(Ge){H[Ge]=function(){return H.send.apply(H,[Ge].concat(u(arguments)))}}),H.send=function(Ge,Xe,ot){if(2===arguments.length&&"function"==typeof Xe&&(ot=Xe,Xe=null),ge.open(Ge,ce,!0),null==L||"accept"in fe||(fe.accept=L+",*/*"),ge.setRequestHeader)for(var Mt in fe)ge.setRequestHeader(Mt,fe[Mt]);return null!=L&&ge.overrideMimeType&&ge.overrideMimeType(L),null!=xe&&(ge.responseType=xe),null!=ot&&H.on("error",ot).on("load",function(It){ot(null,It)}),oe.beforesend.call(H,ge),ge.send(null==Xe?null:Xe),H},H.abort=function(){return ge.abort(),H},p.rebind(H,oe,"on"),null==F?H:H.get(1===(Ge=F).length?function(Xe,ot){Ge(null==Xe?ot:null)}:Ge)}Gr.forEach(function(ce,L){Gr.set(ce,fr(L))}),p.functor=Er,p.xhr=Zr(C),p.dsv=function(ce,L){var P=new RegExp('["'+ce+"\n]"),F=ce.charCodeAt(0);function H(Ce,Ge,Xe){arguments.length<3&&(Xe=Ge,Ge=null);var ot=an(Ce,L,null==Ge?oe:fe(Ge),Xe);return ot.row=function(Mt){return arguments.length?ot.response(null==(Ge=Mt)?oe:fe(Mt)):Ge},ot}function oe(Ce){return H.parse(Ce.responseText)}function fe(Ce){return function(Ge){return H.parse(Ge.responseText,Ce)}}function ge(Ce){return Ce.map(xe).join(ce)}function xe(Ce){return P.test(Ce)?'"'+Ce.replace(/\"/g,'""')+'"':Ce}return H.parse=function(Ce,Ge){var Xe;return H.parseRows(Ce,function(ot,Mt){if(Xe)return Xe(ot,Mt-1);var It=function(Ct){for(var Lt={},Tt=ot.length,Ht=0;Ht<Tt;++Ht)Lt[ot[Ht]]=Ct[Ht];return Lt};Xe=Ge?function(Ct,Lt){return Ge(It(Ct),Lt)}:It})},H.parseRows=function(Ce,Ge){var Xe,ot,Mt={},It={},Ct=[],Lt=Ce.length,Tt=0,Ht=0;function jt(){if(Tt>=Lt)return It;if(ot)return ot=!1,Mt;var cr=Tt;if(34===Ce.charCodeAt(cr)){for(var br=cr;br++<Lt;)if(34===Ce.charCodeAt(br)){if(34!==Ce.charCodeAt(br+1))break;++br}return Tt=br+2,13===(zr=Ce.charCodeAt(br+1))?(ot=!0,10===Ce.charCodeAt(br+2)&&++Tt):10===zr&&(ot=!0),Ce.slice(cr+1,br).replace(/""/g,'"')}for(;Tt<Lt;){var zr,Or=1;if(10===(zr=Ce.charCodeAt(Tt++)))ot=!0;else if(13===zr)ot=!0,10===Ce.charCodeAt(Tt)&&(++Tt,++Or);else if(zr!==F)continue;return Ce.slice(cr,Tt-Or)}return Ce.slice(cr)}for(;(Xe=jt())!==It;){for(var Wt=[];Xe!==Mt&&Xe!==It;)Wt.push(Xe),Xe=jt();Ge&&null==(Wt=Ge(Wt,Ht++))||Ct.push(Wt)}return Ct},H.format=function(Ce){if(Array.isArray(Ce[0]))return H.formatRows(Ce);var Ge=new S,Xe=[];return Ce.forEach(function(ot){for(var Mt in ot)Ge.has(Mt)||Xe.push(Ge.add(Mt))}),[Xe.map(xe).join(ce)].concat(Ce.map(function(ot){return Xe.map(function(Mt){return xe(ot[Mt])}).join(ce)})).join("\n")},H.formatRows=function(Ce){return Ce.map(ge).join("\n")},H},p.csv=p.dsv(",","text/csv"),p.tsv=p.dsv("\t","text/tab-separated-values");var gn,Vn,Gn,Ln,ln=this[B(this,"requestAnimationFrame")]||function(ce){setTimeout(ce,17)};function qr(ce,L,P){var F=arguments.length;F<2&&(L=0),F<3&&(P=Date.now());var oe={c:ce,t:P+L,n:null};return Vn?Vn.n=oe:gn=oe,Vn=oe,Gn||(Ln=clearTimeout(Ln),Gn=1,ln(Pr)),oe}function Pr(){var ce=un(),L=dn()-ce;L>24?(isFinite(L)&&(clearTimeout(Ln),Ln=setTimeout(Pr,L)),Gn=0):(Gn=1,ln(Pr))}function un(){for(var ce=Date.now(),L=gn;L;)ce>=L.t&&L.c(ce-L.t)&&(L.c=null),L=L.n;return ce}function dn(){for(var ce,L=gn,P=1/0;L;)L.c?(L.t<P&&(P=L.t),L=(ce=L).n):L=ce?ce.n=L.n:gn=L.n;return Vn=ce,P}function cn(ce){return ce[0]}function fn(ce){return ce[1]}function Bn(ce){for(var L,P,F,H=ce.length,oe=[0,1],fe=2,ge=2;ge<H;ge++){for(;fe>1&&((P=ce[oe[fe-1]])[0]-(L=ce[oe[fe-2]])[0])*((F=ce[ge])[1]-L[1])-(P[1]-L[1])*(F[0]-L[0])<=0;)--fe;oe[fe++]=ge}return oe.slice(0,fe)}function Nn(ce,L){return ce[0]-L[0]||ce[1]-L[1]}p.timer=function(){qr.apply(this,arguments)},p.timer.flush=function(){un(),dn()},p.round=function(ce,L){return L?Math.round(ce*(L=Math.pow(10,L)))/L:Math.round(ce)},p.geom={},p.geom.hull=function(ce){var L=cn,P=fn;if(arguments.length)return F(ce);function F(H){if(H.length<3)return[];var oe,fe=Er(L),ge=Er(P),xe=H.length,Ce=[],Ge=[];for(oe=0;oe<xe;oe++)Ce.push([+fe.call(this,H[oe],oe),+ge.call(this,H[oe],oe),oe]);for(Ce.sort(Nn),oe=0;oe<xe;oe++)Ge.push([Ce[oe][0],-Ce[oe][1]]);var Xe=Bn(Ce),ot=Bn(Ge),Mt=ot[0]===Xe[0],It=ot[ot.length-1]===Xe[Xe.length-1],Ct=[];for(oe=Xe.length-1;oe>=0;--oe)Ct.push(H[Ce[Xe[oe]][2]]);for(oe=+Mt;oe<ot.length-It;++oe)Ct.push(H[Ce[ot[oe]][2]]);return Ct}return F.x=function(H){return arguments.length?(L=H,F):L},F.y=function(H){return arguments.length?(P=H,F):P},F},p.geom.polygon=function(ce){return N(ce,Fn),ce};var Fn=p.geom.polygon.prototype=[];function ar(ce,L,P){return(P[0]-L[0])*(ce[1]-L[1])<(P[1]-L[1])*(ce[0]-L[0])}function Bt(ce,L,P,F){var H=ce[0],oe=P[0],fe=L[0]-H,ge=F[0]-oe,xe=ce[1],Ce=P[1],Ge=L[1]-xe,Xe=F[1]-Ce,ot=(ge*(xe-Ce)-Xe*(H-oe))/(Xe*fe-ge*Ge);return[H+ot*fe,xe+ot*Ge]}function Qt(ce){var L=ce[0],P=ce[ce.length-1];return!(L[0]-P[0]||L[1]-P[1])}Fn.area=function(){for(var ce,L=-1,P=this.length,F=this[P-1],H=0;++L<P;)H+=(ce=F)[1]*(F=this[L])[0]-ce[0]*F[1];return.5*H},Fn.centroid=function(ce){var L,P,F=-1,H=this.length,oe=0,fe=0,ge=this[H-1];for(arguments.length||(ce=-1/(6*this.area()));++F<H;)oe+=((L=ge)[0]+(ge=this[F])[0])*(P=L[0]*ge[1]-ge[0]*L[1]),fe+=(L[1]+ge[1])*P;return[oe*ce,fe*ce]},Fn.clip=function(ce){for(var L,P,F,H,oe,fe,ge=Qt(ce),xe=-1,Ce=this.length-Qt(this),Ge=this[Ce-1];++xe<Ce;){for(L=ce.slice(),ce.length=0,H=this[xe],oe=L[(F=L.length-ge)-1],P=-1;++P<F;)ar(fe=L[P],Ge,H)?(ar(oe,Ge,H)||ce.push(Bt(oe,fe,Ge,H)),ce.push(fe)):ar(oe,Ge,H)&&ce.push(Bt(oe,fe,Ge,H)),oe=fe;ge&&ce.push(ce[0]),Ge=H}return ce};var yr,Dr,$r,Xr,Mr,Lr=[],Rr=[];function Ir(){fa(this),this.edge=this.site=this.circle=null}function Fr(ce){var L=Lr.pop()||new Ir;return L.site=ce,L}function Qr(ce){Hn(ce),$r.remove(ce),Lr.push(ce),fa(ce)}function yn(ce){var L=ce.circle,P=L.x,F=L.cy,H={x:P,y:F},oe=ce.P,fe=ce.N,ge=[ce];Qr(ce);for(var xe=oe;xe.circle&&o(P-xe.circle.x)<St&&o(F-xe.circle.cy)<St;)oe=xe.P,ge.unshift(xe),Qr(xe),xe=oe;ge.unshift(xe),Hn(xe);for(var Ce=fe;Ce.circle&&o(P-Ce.circle.x)<St&&o(F-Ce.circle.cy)<St;)fe=Ce.N,ge.push(Ce),Qr(Ce),Ce=fe;ge.push(Ce),Hn(Ce);var Ge,Xe=ge.length;for(Ge=1;Ge<Xe;++Ge)mi((Ce=ge[Ge]).edge,(xe=ge[Ge-1]).site,Ce.site,H);(Ce=ge[Xe-1]).edge=En((xe=ge[0]).site,Ce.site,null,H),wn(xe),wn(Ce)}function In(ce){for(var L,P,F,H,oe=ce.x,fe=ce.y,ge=$r._;ge;)if((F=nn(ge,fe)-oe)>St)ge=ge.L;else{if(!((H=oe-Cn(ge,fe))>St)){F>-St?(L=ge.P,P=ge):H>-St?(L=ge,P=ge.N):L=P=ge;break}if(!ge.R){L=ge;break}ge=ge.R}var xe=Fr(ce);if($r.insert(L,xe),L||P){if(L===P)return Hn(L),P=Fr(L.site),$r.insert(xe,P),xe.edge=P.edge=En(L.site,xe.site),wn(L),void wn(P);if(P){Hn(L),Hn(P);var Ce=L.site,Ge=Ce.x,Xe=Ce.y,ot=ce.x-Ge,Mt=ce.y-Xe,It=P.site,Ct=It.x-Ge,Lt=It.y-Xe,Tt=2*(ot*Lt-Mt*Ct),Ht=ot*ot+Mt*Mt,jt=Ct*Ct+Lt*Lt,Wt={x:(Lt*Ht-Mt*jt)/Tt+Ge,y:(ot*jt-Ct*Ht)/Tt+Xe};mi(P.edge,Ce,It,Wt),xe.edge=En(Ce,ce,null,Wt),P.edge=En(ce,It,null,Wt),wn(L),wn(P)}else xe.edge=En(L.site,xe.site)}}function nn(ce,L){var P=ce.site,F=P.x,H=P.y,oe=H-L;if(!oe)return F;var fe=ce.P;if(!fe)return-1/0;var ge=(P=fe.site).x,xe=P.y,Ce=xe-L;if(!Ce)return ge;var Ge=ge-F,Xe=1/oe-1/Ce,ot=Ge/Ce;return Xe?(-ot+Math.sqrt(ot*ot-2*Xe*(Ge*Ge/(-2*Ce)-xe+Ce/2+H-oe/2)))/Xe+F:(F+ge)/2}function Cn(ce,L){var P=ce.N;if(P)return nn(P,L);var F=ce.site;return F.y===L?F.x:1/0}function Ur(ce){this.site=ce,this.edges=[]}function Kr(ce,L){return L.angle-ce.angle}function An(){fa(this),this.x=this.y=this.arc=this.site=this.cy=null}function wn(ce){var L=ce.P,P=ce.N;if(L&&P){var F=L.site,H=ce.site,oe=P.site;if(F!==oe){var fe=H.x,ge=H.y,xe=F.x-fe,Ce=F.y-ge,Ge=oe.x-fe,Xe=2*(xe*(Lt=oe.y-ge)-Ce*Ge);if(!(Xe>=-1e-12)){var ot=xe*xe+Ce*Ce,Mt=Ge*Ge+Lt*Lt,It=(Lt*ot-Ce*Mt)/Xe,Ct=(xe*Mt-Ge*ot)/Xe,Lt=Ct+ge,Tt=Rr.pop()||new An;Tt.arc=ce,Tt.site=H,Tt.x=It+fe,Tt.y=Lt+Math.sqrt(It*It+Ct*Ct),Tt.cy=Lt,ce.circle=Tt;for(var Ht=null,jt=Mr._;jt;)if(Tt.y<jt.y||Tt.y===jt.y&&Tt.x<=jt.x){if(!jt.L){Ht=jt.P;break}jt=jt.L}else{if(!jt.R){Ht=jt;break}jt=jt.R}Mr.insert(Ht,Tt),Ht||(Xr=Tt)}}}}function Hn(ce){var L=ce.circle;L&&(L.P||(Xr=L.N),Mr.remove(L),Rr.push(L),fa(L),ce.circle=null)}function gi(ce,L){var P=ce.b;if(P)return!0;var F,H,oe=ce.a,fe=L[0][0],ge=L[1][0],xe=L[0][1],Ce=L[1][1],Ge=ce.l,Xe=ce.r,ot=Ge.x,Mt=Ge.y,It=Xe.x,Ct=Xe.y,Lt=(ot+It)/2;if(Ct===Mt){if(Lt<fe||Lt>=ge)return;if(ot>It){if(oe){if(oe.y>=Ce)return}else oe={x:Lt,y:xe};P={x:Lt,y:Ce}}else{if(oe){if(oe.y<xe)return}else oe={x:Lt,y:Ce};P={x:Lt,y:xe}}}else if(H=(Mt+Ct)/2-(F=(ot-It)/(Ct-Mt))*Lt,F<-1||F>1)if(ot>It){if(oe){if(oe.y>=Ce)return}else oe={x:(xe-H)/F,y:xe};P={x:(Ce-H)/F,y:Ce}}else{if(oe){if(oe.y<xe)return}else oe={x:(Ce-H)/F,y:Ce};P={x:(xe-H)/F,y:xe}}else if(Mt<Ct){if(oe){if(oe.x>=ge)return}else oe={x:fe,y:F*fe+H};P={x:ge,y:F*ge+H}}else{if(oe){if(oe.x<fe)return}else oe={x:ge,y:F*ge+H};P={x:fe,y:F*fe+H}}return ce.a=oe,ce.b=P,!0}function ti(ce,L){this.l=ce,this.r=L,this.a=this.b=null}function En(ce,L,P,F){var H=new ti(ce,L);return yr.push(H),P&&mi(H,ce,L,P),F&&mi(H,L,ce,F),Dr[ce.i].edges.push(new ra(H,ce,L)),Dr[L.i].edges.push(new ra(H,L,ce)),H}function hi(ce,L,P){var F=new ti(ce,null);return F.a=L,F.b=P,yr.push(F),F}function mi(ce,L,P,F){ce.a||ce.b?ce.l===P?ce.b=F:ce.a=F:(ce.a=F,ce.l=L,ce.r=P)}function ra(ce,L,P){var F=ce.a,H=ce.b;this.edge=ce,this.site=L,this.angle=P?Math.atan2(P.y-L.y,P.x-L.x):ce.l===L?Math.atan2(H.x-F.x,F.y-H.y):Math.atan2(F.x-H.x,H.y-F.y)}function ka(){this._=null}function fa(ce){ce.U=ce.C=ce.L=ce.R=ce.P=ce.N=null}function Aa(ce,L){var P=L,F=L.R,H=P.U;H?H.L===P?H.L=F:H.R=F:ce._=F,F.U=H,P.U=F,P.R=F.L,P.R&&(P.R.U=P),F.L=P}function Bi(ce,L){var P=L,F=L.L,H=P.U;H?H.L===P?H.L=F:H.R=F:ce._=F,F.U=H,P.U=F,P.L=F.R,P.L&&(P.L.U=P),F.R=P}function $i(ce){for(;ce.L;)ce=ce.L;return ce}function yo(ce,L){var P,F,H,oe=ce.sort(Ho).pop();for(yr=[],Dr=new Array(ce.length),$r=new ka,Mr=new ka;;)if(H=Xr,oe&&(!H||oe.y<H.y||oe.y===H.y&&oe.x<H.x))oe.x===P&&oe.y===F||(Dr[oe.i]=new Ur(oe),In(oe),P=oe.x,F=oe.y),oe=ce.pop();else{if(!H)break;yn(H.arc)}L&&(function(ge){for(var xe,Ce,Ge,Xe,ot,Mt=yr,It=(Ce=ge[0][0],Ge=ge[0][1],Xe=ge[1][0],ot=ge[1][1],function(Lt){var Tt,Ht=Lt.a,jt=Lt.b,Wt=Ht.x,cr=Ht.y,br=0,zr=1,Or=jt.x-Wt,sn=jt.y-cr;if(Tt=Ce-Wt,Or||!(Tt>0)){if(Tt/=Or,Or<0){if(Tt<br)return;Tt<zr&&(zr=Tt)}else if(Or>0){if(Tt>zr)return;Tt>br&&(br=Tt)}if(Tt=Xe-Wt,Or||!(Tt<0)){if(Tt/=Or,Or<0){if(Tt>zr)return;Tt>br&&(br=Tt)}else if(Or>0){if(Tt<br)return;Tt<zr&&(zr=Tt)}if(Tt=Ge-cr,sn||!(Tt>0)){if(Tt/=sn,sn<0){if(Tt<br)return;Tt<zr&&(zr=Tt)}else if(sn>0){if(Tt>zr)return;Tt>br&&(br=Tt)}if(Tt=ot-cr,sn||!(Tt<0)){if(Tt/=sn,sn<0){if(Tt>zr)return;Tt>br&&(br=Tt)}else if(sn>0){if(Tt<br)return;Tt<zr&&(zr=Tt)}return br>0&&(Lt.a={x:Wt+br*Or,y:cr+br*sn}),zr<1&&(Lt.b={x:Wt+zr*Or,y:cr+zr*sn}),Lt}}}}}),Ct=Mt.length;Ct--;)(!gi(xe=Mt[Ct],ge)||!It(xe)||o(xe.a.x-xe.b.x)<St&&o(xe.a.y-xe.b.y)<St)&&(xe.a=xe.b=null,Mt.splice(Ct,1))}(L),function(ge){for(var xe,Ce,Ge,Xe,ot,Mt,It,Ct,Lt,Tt,Ht=ge[0][0],jt=ge[1][0],Wt=ge[0][1],cr=ge[1][1],br=Dr,zr=br.length;zr--;)if((ot=br[zr])&&ot.prepare())for(Ct=(It=ot.edges).length,Mt=0;Mt<Ct;)Ge=(Tt=It[Mt].end()).x,Xe=Tt.y,xe=(Lt=It[++Mt%Ct].start()).x,Ce=Lt.y,(o(Ge-xe)>St||o(Xe-Ce)>St)&&(It.splice(Mt,0,new ra(hi(ot.site,Tt,o(Ge-Ht)<St&&cr-Xe>St?{x:Ht,y:o(xe-Ht)<St?Ce:cr}:o(Xe-cr)<St&&jt-Ge>St?{x:o(Ce-cr)<St?xe:jt,y:cr}:o(Ge-jt)<St&&Xe-Wt>St?{x:jt,y:o(xe-jt)<St?Ce:Wt}:o(Xe-Wt)<St&&Ge-Ht>St?{x:o(Ce-Wt)<St?xe:Ht,y:Wt}:null),ot.site,null)),++Ct)}(L));var fe={cells:Dr,edges:yr};return $r=Mr=yr=Dr=null,fe}function Ho(ce,L){return L.y-ce.y||L.x-ce.x}Ur.prototype.prepare=function(){for(var ce,L=this.edges,P=L.length;P--;)(ce=L[P].edge).b&&ce.a||L.splice(P,1);return L.sort(Kr),L.length},ra.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ka.prototype={insert:function(ce,L){var P,F,H;if(ce){if(L.P=ce,L.N=ce.N,ce.N&&(ce.N.P=L),ce.N=L,ce.R){for(ce=ce.R;ce.L;)ce=ce.L;ce.L=L}else ce.R=L;P=ce}else this._?(ce=$i(this._),L.P=null,L.N=ce,ce.P=ce.L=L,P=ce):(L.P=L.N=null,this._=L,P=null);for(L.L=L.R=null,L.U=P,L.C=!0,ce=L;P&&P.C;)P===(F=P.U).L?(H=F.R)&&H.C?(P.C=H.C=!1,F.C=!0,ce=F):(ce===P.R&&(Aa(this,P),P=(ce=P).U),P.C=!1,F.C=!0,Bi(this,F)):(H=F.L)&&H.C?(P.C=H.C=!1,F.C=!0,ce=F):(ce===P.L&&(Bi(this,P),P=(ce=P).U),P.C=!1,F.C=!0,Aa(this,F)),P=ce.U;this._.C=!1},remove:function(ce){ce.N&&(ce.N.P=ce.P),ce.P&&(ce.P.N=ce.N),ce.N=ce.P=null;var L,P,F,H=ce.U,oe=ce.L,fe=ce.R;if(P=oe?fe?$i(fe):oe:fe,H?H.L===ce?H.L=P:H.R=P:this._=P,oe&&fe?(F=P.C,P.C=ce.C,P.L=oe,oe.U=P,P!==fe?(H=P.U,P.U=ce.U,H.L=ce=P.R,P.R=fe,fe.U=P):(P.U=H,H=P,ce=P.R)):(F=ce.C,ce=P),ce&&(ce.U=H),!F)if(ce&&ce.C)ce.C=!1;else{do{if(ce===this._)break;if(ce===H.L){if((L=H.R).C&&(L.C=!1,H.C=!0,Aa(this,H),L=H.R),L.L&&L.L.C||L.R&&L.R.C){L.R&&L.R.C||(L.L.C=!1,L.C=!0,Bi(this,L),L=H.R),L.C=H.C,H.C=L.R.C=!1,Aa(this,H),ce=this._;break}}else if((L=H.L).C&&(L.C=!1,H.C=!0,Bi(this,H),L=H.L),L.L&&L.L.C||L.R&&L.R.C){L.L&&L.L.C||(L.R.C=!1,L.C=!0,Aa(this,L),L=H.L),L.C=H.C,H.C=L.L.C=!1,Bi(this,H),ce=this._;break}L.C=!0,ce=H,H=H.U}while(!ce.C);ce&&(ce.C=!1)}}},p.geom.voronoi=function(ce){var L=cn,P=fn,F=L,H=P,oe=Ko;if(ce)return fe(ce);function fe(xe){var Ce=new Array(xe.length),Ge=oe[0][0],Xe=oe[0][1],ot=oe[1][0],Mt=oe[1][1];return yo(ge(xe),oe).cells.forEach(function(It,Ct){var Lt=It.edges,Tt=It.site;(Ce[Ct]=Lt.length?Lt.map(function(Ht){var jt=Ht.start();return[jt.x,jt.y]}):Tt.x>=Ge&&Tt.x<=ot&&Tt.y>=Xe&&Tt.y<=Mt?[[Ge,Mt],[ot,Mt],[ot,Xe],[Ge,Xe]]:[]).point=xe[Ct]}),Ce}function ge(xe){return xe.map(function(Ce,Ge){return{x:Math.round(F(Ce,Ge)/St)*St,y:Math.round(H(Ce,Ge)/St)*St,i:Ge}})}return fe.links=function(xe){return yo(ge(xe)).edges.filter(function(Ce){return Ce.l&&Ce.r}).map(function(Ce){return{source:xe[Ce.l.i],target:xe[Ce.r.i]}})},fe.triangles=function(xe){var Ce=[];return yo(ge(xe)).cells.forEach(function(Ge,Xe){for(var ot,Mt,It,Ct,Lt=Ge.site,Tt=Ge.edges.sort(Kr),Ht=-1,jt=Tt.length,Wt=Tt[jt-1].edge,cr=Wt.l===Lt?Wt.r:Wt.l;++Ht<jt;)ot=cr,cr=(Wt=Tt[Ht].edge).l===Lt?Wt.r:Wt.l,Xe<ot.i&&Xe<cr.i&&((Mt=Lt).x-(Ct=cr).x)*((It=ot).y-Mt.y)-(Mt.x-It.x)*(Ct.y-Mt.y)<0&&Ce.push([xe[Xe],xe[ot.i],xe[cr.i]])}),Ce},fe.x=function(xe){return arguments.length?(F=Er(L=xe),fe):L},fe.y=function(xe){return arguments.length?(H=Er(P=xe),fe):P},fe.clipExtent=function(xe){return arguments.length?(oe=null==xe?Ko:xe,fe):oe===Ko?null:oe},fe.size=function(xe){return arguments.length?fe.clipExtent(xe&&[[0,0],xe]):oe===Ko?null:oe&&oe[1]},fe};var Ko=[[-1e6,-1e6],[1e6,1e6]];function Na(ce){return ce.x}function Vi(ce){return ce.y}function ia(ce,L,P,F,H,oe){if(!ce(L,P,F,H,oe)){var fe=.5*(P+H),ge=.5*(F+oe),xe=L.nodes;xe[0]&&ia(ce,xe[0],P,F,fe,ge),xe[1]&&ia(ce,xe[1],fe,F,H,ge),xe[2]&&ia(ce,xe[2],P,ge,fe,oe),xe[3]&&ia(ce,xe[3],fe,ge,H,oe)}}function Qi(ce,L,P,F,H,oe,fe){var ge,xe=1/0;return function Ce(Ge,Xe,ot,Mt,It){if(!(Xe>oe||ot>fe||Mt<F||It<H)){if(Ct=Ge.point){var Ct,Lt=L-Ge.x,Tt=P-Ge.y,Ht=Lt*Lt+Tt*Tt;if(Ht<xe){var jt=Math.sqrt(xe=Ht);F=L-jt,H=P-jt,oe=L+jt,fe=P+jt,ge=Ct}}for(var Wt=Ge.nodes,cr=.5*(Xe+Mt),br=.5*(ot+It),zr=(P>=br)<<1|L>=cr,Or=zr+4;zr<Or;++zr)if(Ge=Wt[3&zr])switch(3&zr){case 0:Ce(Ge,Xe,ot,cr,br);break;case 1:Ce(Ge,cr,ot,Mt,br);break;case 2:Ce(Ge,Xe,br,cr,It);break;case 3:Ce(Ge,cr,br,Mt,It)}}}(ce,F,H,oe,fe),ge}function go(ce,L){ce=p.rgb(ce),L=p.rgb(L);var P=ce.r,F=ce.g,H=ce.b,oe=L.r-P,fe=L.g-F,ge=L.b-H;return function(xe){return"#"+dr(Math.round(P+oe*xe))+dr(Math.round(F+fe*xe))+dr(Math.round(H+ge*xe))}}function Ji(ce,L){var P,F={},H={};for(P in ce)P in L?F[P]=hn(ce[P],L[P]):H[P]=ce[P];for(P in L)P in ce||(H[P]=L[P]);return function(oe){for(P in F)H[P]=F[P](oe);return H}}function Dt(ce,L){return ce=+ce,L=+L,function(P){return ce*(1-P)+L*P}}function _t(ce,L){var P,F,H,oe=st.lastIndex=sr.lastIndex=0,fe=-1,ge=[],xe=[];for(ce+="",L+="";(P=st.exec(ce))&&(F=sr.exec(L));)(H=F.index)>oe&&(H=L.slice(oe,H),ge[fe]?ge[fe]+=H:ge[++fe]=H),(P=P[0])===(F=F[0])?ge[fe]?ge[fe]+=F:ge[++fe]=F:(ge[++fe]=null,xe.push({i:fe,x:Dt(P,F)})),oe=sr.lastIndex;return oe<L.length&&(H=L.slice(oe),ge[fe]?ge[fe]+=H:ge[++fe]=H),ge.length<2?xe[0]?(L=xe[0].x,function(Ce){return L(Ce)+""}):function(){return L}:(L=xe.length,function(Ce){for(var Ge,Xe=0;Xe<L;++Xe)ge[(Ge=xe[Xe]).i]=Ge.x(Ce);return ge.join("")})}p.geom.delaunay=function(ce){return p.geom.voronoi().triangles(ce)},p.geom.quadtree=function(ce,L,P,F,H){var oe,fe=cn,ge=fn;if(oe=arguments.length)return fe=Na,ge=Vi,3===oe&&(H=P,F=L,P=L=0),xe(ce);function xe(Ce){var Ge,Xe,ot,Mt,It,Ct,Lt,Tt,Ht,jt=Er(fe),Wt=Er(ge);if(null!=L)Ct=L,Lt=P,Tt=F,Ht=H;else if(Tt=Ht=-(Ct=Lt=1/0),Xe=[],ot=[],It=Ce.length,oe)for(Mt=0;Mt<It;++Mt)(Ge=Ce[Mt]).x<Ct&&(Ct=Ge.x),Ge.y<Lt&&(Lt=Ge.y),Ge.x>Tt&&(Tt=Ge.x),Ge.y>Ht&&(Ht=Ge.y),Xe.push(Ge.x),ot.push(Ge.y);else for(Mt=0;Mt<It;++Mt){var cr=+jt(Ge=Ce[Mt],Mt),br=+Wt(Ge,Mt);cr<Ct&&(Ct=cr),br<Lt&&(Lt=br),cr>Tt&&(Tt=cr),br>Ht&&(Ht=br),Xe.push(cr),ot.push(br)}var zr=Tt-Ct,Or=Ht-Lt;function sn(xn,Kn,ai,_i,Jr,zn,oi,ni){if(!isNaN(ai)&&!isNaN(_i))if(xn.leaf){var pi=xn.x,Ai=xn.y;if(null!=pi)if(o(pi-ai)+o(Ai-_i)<.01)on(xn,Kn,ai,_i,Jr,zn,oi,ni);else{var zi=xn.point;xn.x=xn.y=xn.point=null,on(xn,zi,pi,Ai,Jr,zn,oi,ni),on(xn,Kn,ai,_i,Jr,zn,oi,ni)}else xn.x=ai,xn.y=_i,xn.point=Kn}else on(xn,Kn,ai,_i,Jr,zn,oi,ni)}function on(xn,Kn,ai,_i,Jr,zn,oi,ni){var pi=.5*(Jr+oi),Ai=.5*(zn+ni),zi=ai>=pi,si=_i>=Ai,Di=si<<1|zi;xn.leaf=!1,zi?Jr=pi:oi=pi,si?zn=Ai:ni=Ai,sn(xn=xn.nodes[Di]||(xn.nodes[Di]={leaf:!0,nodes:[],point:null,x:null,y:null}),Kn,ai,_i,Jr,zn,oi,ni)}zr>Or?Ht=Lt+zr:Tt=Ct+Or;var Mn={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(xn){sn(Mn,xn,+jt(xn,++Mt),+Wt(xn,Mt),Ct,Lt,Tt,Ht)},visit:function(xn){ia(xn,Mn,Ct,Lt,Tt,Ht)},find:function(xn){return Qi(Mn,xn[0],xn[1],Ct,Lt,Tt,Ht)}};if(Mt=-1,null==L){for(;++Mt<It;)sn(Mn,Ce[Mt],Xe[Mt],ot[Mt],Ct,Lt,Tt,Ht);--Mt}else Ce.forEach(Mn.add);return Xe=ot=Ce=Ge=null,Mn}return xe.x=function(Ce){return arguments.length?(fe=Ce,xe):fe},xe.y=function(Ce){return arguments.length?(ge=Ce,xe):ge},xe.extent=function(Ce){return arguments.length?(null==Ce?L=P=F=H=null:(L=+Ce[0][0],P=+Ce[0][1],F=+Ce[1][0],H=+Ce[1][1]),xe):null==L?null:[[L,P],[F,H]]},xe.size=function(Ce){return arguments.length?(null==Ce?L=P=F=H=null:(L=P=0,F=+Ce[0],H=+Ce[1]),xe):null==L?null:[F-L,H-P]},xe},p.interpolateRgb=go,p.interpolateObject=Ji,p.interpolateNumber=Dt,p.interpolateString=_t;var st=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sr=new RegExp(st.source,"g");function hn(ce,L){for(var P,F=p.interpolators.length;--F>=0&&!(P=p.interpolators[F](ce,L)););return P}function ri(ce,L){var P,F=[],H=[],oe=ce.length,fe=L.length,ge=Math.min(ce.length,L.length);for(P=0;P<ge;++P)F.push(hn(ce[P],L[P]));for(;P<oe;++P)H[P]=ce[P];for(;P<fe;++P)H[P]=L[P];return function(xe){for(P=0;P<ge;++P)H[P]=F[P](xe);return H}}p.interpolate=hn,p.interpolators=[function(ce,L){var P=typeof L;return("string"===P?Gr.has(L.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(L)?go:_t:L instanceof xt?go:Array.isArray(L)?ri:"object"===P&&isNaN(L)?Ji:Dt)(ce,L)}],p.interpolateArray=ri;var qi=function(){return C},ko=p.map({linear:qi,poly:function(ce){return function(L){return Math.pow(L,ce)}},quad:function(){return Ls},cubic:function(){return Bs},sin:function(){return Ns},exp:function(){return Do},circle:function(){return No},elastic:function(ce,L){var P;return arguments.length<2&&(L=.45),arguments.length?P=L/lr*Math.asin(1/ce):(ce=1,P=L/4),function(F){return 1+ce*Math.pow(2,-10*F)*Math.sin((F-P)*lr/L)}},back:function(ce){return ce||(ce=1.70158),function(L){return L*L*((ce+1)*L-ce)}},bounce:function(){return qo}}),as=p.map({in:C,out:Es,"in-out":os,"out-in":function(ce){return os(Es(ce))}});function aa(ce){return function(L){return L<=0?0:L>=1?1:ce(L)}}function Es(ce){return function(L){return 1-ce(1-L)}}function os(ce){return function(L){return.5*(L<.5?ce(2*L):2-ce(2-2*L))}}function Ls(ce){return ce*ce}function Bs(ce){return ce*ce*ce}function bs(ce){if(ce<=0)return 0;if(ce>=1)return 1;var L=ce*ce,P=L*ce;return 4*(ce<.5?P:3*(ce-L)+P-.75)}function Ns(ce){return 1-Math.cos(ce*Ze)}function Do(ce){return Math.pow(2,10*(ce-1))}function No(ce){return 1-Math.sqrt(1-ce*ce)}function qo(ce){return ce<1/2.75?7.5625*ce*ce:ce<2/2.75?7.5625*(ce-=1.5/2.75)*ce+.75:ce<2.5/2.75?7.5625*(ce-=2.25/2.75)*ce+.9375:7.5625*(ce-=2.625/2.75)*ce+.984375}function jo(ce,L){return L-=ce,function(P){return Math.round(ce+L*P)}}function Yo(ce){var L,P,F,H=[ce.a,ce.b],oe=[ce.c,ce.d],fe=xo(H),ge=ss(H,oe),xe=xo(((L=oe)[0]+=(F=-ge)*(P=H)[0],L[1]+=F*P[1],L))||0;H[0]*oe[1]<oe[0]*H[1]&&(H[0]*=-1,H[1]*=-1,fe*=-1,ge*=-1),this.rotate=(fe?Math.atan2(H[1],H[0]):Math.atan2(-oe[0],oe[1]))*it,this.translate=[ce.e,ce.f],this.scale=[fe,xe],this.skew=xe?Math.atan2(ge,xe)*it:0}function ss(ce,L){return ce[0]*L[0]+ce[1]*L[1]}function xo(ce){var L=Math.sqrt(ss(ce,ce));return L&&(ce[0]/=L,ce[1]/=L),L}p.ease=function(ce){var L=ce.indexOf("-"),P=L>=0?ce.slice(0,L):ce,F=L>=0?ce.slice(L+1):"in";return P=ko.get(P)||qi,aa((F=as.get(F)||C)(P.apply(null,v.call(arguments,1))))},p.interpolateHcl=function(ce,L){ce=p.hcl(ce),L=p.hcl(L);var P=ce.h,F=ce.c,H=ce.l,oe=L.h-P,fe=L.c-F,ge=L.l-H;return isNaN(fe)&&(fe=0,F=isNaN(F)?L.c:F),isNaN(oe)?(oe=0,P=isNaN(P)?L.h:P):oe>180?oe-=360:oe<-180&&(oe+=360),function(xe){return Qe(P+oe*xe,F+fe*xe,H+ge*xe)+""}},p.interpolateHsl=function(ce,L){ce=p.hsl(ce),L=p.hsl(L);var P=ce.h,F=ce.s,H=ce.l,oe=L.h-P,fe=L.s-F,ge=L.l-H;return isNaN(fe)&&(fe=0,F=isNaN(F)?L.s:F),isNaN(oe)?(oe=0,P=isNaN(P)?L.h:P):oe>180?oe-=360:oe<-180&&(oe+=360),function(xe){return ct(P+oe*xe,F+fe*xe,H+ge*xe)+""}},p.interpolateLab=function(ce,L){ce=p.lab(ce),L=p.lab(L);var P=ce.l,F=ce.a,H=ce.b,oe=L.l-P,fe=L.a-F,ge=L.b-H;return function(xe){return rr(P+oe*xe,F+fe*xe,H+ge*xe)+""}},p.interpolateRound=jo,p.transform=function(ce){var L=y.createElementNS(p.ns.prefix.svg,"g");return(p.transform=function(P){if(null!=P){L.setAttribute("transform",P);var F=L.transform.baseVal.consolidate()}return new Yo(F?F.matrix:_s)})(ce)},Yo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var _s={a:1,b:0,c:0,d:1,e:0,f:0};function $a(ce){return ce.length?ce.pop()+",":""}function Wo(ce,L){var H,oe,fe,P=[],F=[];return ce=p.transform(ce),L=p.transform(L),function(H,oe,fe,ge){if(H[0]!==oe[0]||H[1]!==oe[1]){var xe=fe.push("translate(",null,",",null,")");ge.push({i:xe-4,x:Dt(H[0],oe[0])},{i:xe-2,x:Dt(H[1],oe[1])})}else(oe[0]||oe[1])&&fe.push("translate("+oe+")")}(ce.translate,L.translate,P,F),fe=P,(H=ce.rotate)!==(oe=L.rotate)?(H-oe>180?oe+=360:oe-H>180&&(H+=360),F.push({i:fe.push($a(fe)+"rotate(",null,")")-2,x:Dt(H,oe)})):oe&&fe.push($a(fe)+"rotate("+oe+")"),function(H,oe,fe,ge){H!==oe?ge.push({i:fe.push($a(fe)+"skewX(",null,")")-2,x:Dt(H,oe)}):oe&&fe.push($a(fe)+"skewX("+oe+")")}(ce.skew,L.skew,P,F),function(H,oe,fe,ge){if(H[0]!==oe[0]||H[1]!==oe[1]){var xe=fe.push($a(fe)+"scale(",null,",",null,")");ge.push({i:xe-4,x:Dt(H[0],oe[0])},{i:xe-2,x:Dt(H[1],oe[1])})}else 1===oe[0]&&1===oe[1]||fe.push($a(fe)+"scale("+oe+")")}(ce.scale,L.scale,P,F),ce=L=null,function(H){for(var oe,fe=-1,ge=F.length;++fe<ge;)P[(oe=F[fe]).i]=oe.x(H);return P.join("")}}function ws(ce,L){return L=(L-=ce=+ce)||1/L,function(P){return(P-ce)/L}}function So(ce,L){return L=(L-=ce=+ce)||1/L,function(P){return Math.max(0,Math.min(1,(P-ce)/L))}}function na(ce){for(var L=ce.source,P=ce.target,F=function(fe,ge){if(fe===ge)return fe;for(var xe=Ve(fe),Ce=Ve(ge),Ge=xe.pop(),Xe=Ce.pop(),ot=null;Ge===Xe;)ot=Ge,Ge=xe.pop(),Xe=Ce.pop();return ot}(L,P),H=[L];L!==F;)H.push(L=L.parent);for(var oe=H.length;P!==F;)H.splice(oe,0,P),P=P.parent;return H}function Ve(ce){for(var L=[],P=ce.parent;null!=P;)L.push(ce),ce=P,P=P.parent;return L.push(ce),L}function qe(ce){ce.fixed|=2}function et(ce){ce.fixed&=-7}function lt(ce){ce.fixed|=4,ce.px=ce.x,ce.py=ce.y}function wt(ce){ce.fixed&=-5}p.interpolateTransform=Wo,p.layout={},p.layout.bundle=function(){return function(ce){for(var L=[],P=-1,F=ce.length;++P<F;)L.push(na(ce[P]));return L}},p.layout.chord=function(){var ce,L,P,F,H,oe,fe,ge={},xe=0;function Ce(){var Xe,ot,Mt,It,Ct,Lt={},Tt=[],Ht=p.range(F),jt=[];for(ce=[],L=[],Xe=0,It=-1;++It<F;){for(ot=0,Ct=-1;++Ct<F;)ot+=P[It][Ct];Tt.push(ot),jt.push(p.range(F)),Xe+=ot}for(H&&Ht.sort(function(Mn,xn){return H(Tt[Mn],Tt[xn])}),oe&&jt.forEach(function(Mn,xn){Mn.sort(function(Kn,ai){return oe(P[xn][Kn],P[xn][ai])})}),Xe=(lr-xe*F)/Xe,ot=0,It=-1;++It<F;){for(Mt=ot,Ct=-1;++Ct<F;){var Wt=Ht[It],cr=jt[Wt][Ct],br=P[Wt][cr],zr=ot,Or=ot+=br*Xe;Lt[Wt+"-"+cr]={index:Wt,subindex:cr,startAngle:zr,endAngle:Or,value:br}}L[Wt]={index:Wt,startAngle:Mt,endAngle:ot,value:Tt[Wt]},ot+=xe}for(It=-1;++It<F;)for(Ct=It-1;++Ct<F;){var sn=Lt[It+"-"+Ct],on=Lt[Ct+"-"+It];(sn.value||on.value)&&ce.push(sn.value<on.value?{source:on,target:sn}:{source:sn,target:on})}fe&&Ge()}function Ge(){ce.sort(function(Xe,ot){return fe((Xe.source.value+Xe.target.value)/2,(ot.source.value+ot.target.value)/2)})}return ge.matrix=function(Xe){return arguments.length?(F=(P=Xe)&&P.length,ce=L=null,ge):P},ge.padding=function(Xe){return arguments.length?(xe=Xe,ce=L=null,ge):xe},ge.sortGroups=function(Xe){return arguments.length?(H=Xe,ce=L=null,ge):H},ge.sortSubgroups=function(Xe){return arguments.length?(oe=Xe,ce=null,ge):oe},ge.sortChords=function(Xe){return arguments.length?(fe=Xe,ce&&Ge(),ge):fe},ge.chords=function(){return ce||Ce(),ce},ge.groups=function(){return L||Ce(),L},ge},p.layout.force=function(){var ce,L,P,F,H,oe,fe={},ge=p.dispatch("start","tick","end"),xe=[1,1],Ce=.9,Ge=vt,Xe=Ot,ot=-30,Mt=ir,It=.1,Ct=.64,Lt=[],Tt=[];function Ht(Wt){return function(cr,br,zr,Or){if(cr.point!==Wt){var sn=cr.cx-Wt.x,on=cr.cy-Wt.y,Mn=Or-br,xn=sn*sn+on*on;if(Mn*Mn/Ct<xn){if(xn<Mt){var Kn=cr.charge/xn;Wt.px-=sn*Kn,Wt.py-=on*Kn}return!0}cr.point&&xn&&xn<Mt&&(Wt.px-=sn*(Kn=cr.pointCharge/xn),Wt.py-=on*Kn)}return!cr.charge}}function jt(Wt){Wt.px=p.event.x,Wt.py=p.event.y,fe.resume()}return fe.tick=function(){if((P*=.99)<.005)return ce=null,ge.end({type:"end",alpha:P=0}),!0;var Wt,cr,br,zr,Or,sn,on,Mn,xn,Kn=Lt.length,ai=Tt.length;for(cr=0;cr<ai;++cr)zr=(br=Tt[cr]).source,(sn=(Mn=(Or=br.target).x-zr.x)*Mn+(xn=Or.y-zr.y)*xn)&&(Mn*=sn=P*H[cr]*((sn=Math.sqrt(sn))-F[cr])/sn,xn*=sn,Or.x-=Mn*(on=zr.weight+Or.weight?zr.weight/(zr.weight+Or.weight):.5),Or.y-=xn*on,zr.x+=Mn*(on=1-on),zr.y+=xn*on);if((on=P*It)&&(Mn=xe[0]/2,xn=xe[1]/2,cr=-1,on))for(;++cr<Kn;)(br=Lt[cr]).x+=(Mn-br.x)*on,br.y+=(xn-br.y)*on;if(ot)for(function _i(Jr,zn,oi){var ni=0,pi=0;if(Jr.charge=0,!Jr.leaf)for(var Ai,zi=Jr.nodes,si=zi.length,Di=-1;++Di<si;)null!=(Ai=zi[Di])&&(_i(Ai,zn,oi),Jr.charge+=Ai.charge,ni+=Ai.charge*Ai.cx,pi+=Ai.charge*Ai.cy);if(Jr.point){Jr.leaf||(Jr.point.x+=Math.random()-.5,Jr.point.y+=Math.random()-.5);var Ci=zn*oi[Jr.point.index];Jr.charge+=Jr.pointCharge=Ci,ni+=Ci*Jr.point.x,pi+=Ci*Jr.point.y}Jr.cx=ni/Jr.charge,Jr.cy=pi/Jr.charge}(Wt=p.geom.quadtree(Lt),P,oe),cr=-1;++cr<Kn;)(br=Lt[cr]).fixed||Wt.visit(Ht(br));for(cr=-1;++cr<Kn;)(br=Lt[cr]).fixed?(br.x=br.px,br.y=br.py):(br.x-=(br.px-(br.px=br.x))*Ce,br.y-=(br.py-(br.py=br.y))*Ce);ge.tick({type:"tick",alpha:P})},fe.nodes=function(Wt){return arguments.length?(Lt=Wt,fe):Lt},fe.links=function(Wt){return arguments.length?(Tt=Wt,fe):Tt},fe.size=function(Wt){return arguments.length?(xe=Wt,fe):xe},fe.linkDistance=function(Wt){return arguments.length?(Ge="function"==typeof Wt?Wt:+Wt,fe):Ge},fe.distance=fe.linkDistance,fe.linkStrength=function(Wt){return arguments.length?(Xe="function"==typeof Wt?Wt:+Wt,fe):Xe},fe.friction=function(Wt){return arguments.length?(Ce=+Wt,fe):Ce},fe.charge=function(Wt){return arguments.length?(ot="function"==typeof Wt?Wt:+Wt,fe):ot},fe.chargeDistance=function(Wt){return arguments.length?(Mt=Wt*Wt,fe):Math.sqrt(Mt)},fe.gravity=function(Wt){return arguments.length?(It=+Wt,fe):It},fe.theta=function(Wt){return arguments.length?(Ct=Wt*Wt,fe):Math.sqrt(Ct)},fe.alpha=function(Wt){return arguments.length?(Wt=+Wt,P?Wt>0?P=Wt:(ce.c=null,ce.t=NaN,ce=null,ge.end({type:"end",alpha:P=0})):Wt>0&&(ge.start({type:"start",alpha:P=Wt}),ce=qr(fe.tick)),fe):P},fe.start=function(){var Wt,cr,br,zr=Lt.length,Or=Tt.length,sn=xe[0],on=xe[1];for(Wt=0;Wt<zr;++Wt)(br=Lt[Wt]).index=Wt,br.weight=0;for(Wt=0;Wt<Or;++Wt)"number"==typeof(br=Tt[Wt]).source&&(br.source=Lt[br.source]),"number"==typeof br.target&&(br.target=Lt[br.target]),++br.source.weight,++br.target.weight;for(Wt=0;Wt<zr;++Wt)br=Lt[Wt],isNaN(br.x)&&(br.x=Mn("x",sn)),isNaN(br.y)&&(br.y=Mn("y",on)),isNaN(br.px)&&(br.px=br.x),isNaN(br.py)&&(br.py=br.y);if(F=[],"function"==typeof Ge)for(Wt=0;Wt<Or;++Wt)F[Wt]=+Ge.call(this,Tt[Wt],Wt);else for(Wt=0;Wt<Or;++Wt)F[Wt]=Ge;if(H=[],"function"==typeof Xe)for(Wt=0;Wt<Or;++Wt)H[Wt]=+Xe.call(this,Tt[Wt],Wt);else for(Wt=0;Wt<Or;++Wt)H[Wt]=Xe;if(oe=[],"function"==typeof ot)for(Wt=0;Wt<zr;++Wt)oe[Wt]=+ot.call(this,Lt[Wt],Wt);else for(Wt=0;Wt<zr;++Wt)oe[Wt]=ot;function Mn(xn,Kn){if(!cr){for(cr=new Array(zr),zn=0;zn<zr;++zn)cr[zn]=[];for(zn=0;zn<Or;++zn){var ai=Tt[zn];cr[ai.source.index].push(ai.target),cr[ai.target.index].push(ai.source)}}for(var _i,Jr=cr[Wt],zn=-1,oi=Jr.length;++zn<oi;)if(!isNaN(_i=Jr[zn][xn]))return _i;return Math.random()*Kn}return fe.resume()},fe.resume=function(){return fe.alpha(.1)},fe.stop=function(){return fe.alpha(0)},fe.drag=function(){if(L||(L=p.behavior.drag().origin(C).on("dragstart.force",qe).on("drag.force",jt).on("dragend.force",et)),!arguments.length)return L;this.on("mouseover.force",lt).on("mouseout.force",wt).call(L)},p.rebind(fe,ge,"on")};var vt=20,Ot=1,ir=1/0;function or(ce,L){return p.rebind(ce,L,"sort","children","value"),ce.nodes=ce,ce.links=Vr,ce}function er(ce,L){for(var P=[ce];null!=(ce=P.pop());)if(L(ce),(H=ce.children)&&(F=H.length))for(var F,H;--F>=0;)P.push(H[F])}function ur(ce,L){for(var P=[ce],F=[];null!=(ce=P.pop());)if(F.push(ce),(oe=ce.children)&&(H=oe.length))for(var H,oe,fe=-1;++fe<H;)P.push(oe[fe]);for(;null!=(ce=F.pop());)L(ce)}function xr(ce){return ce.children}function kr(ce){return ce.value}function Cr(ce,L){return L.value-ce.value}function Vr(ce){return p.merge(ce.map(function(L){return(L.children||[]).map(function(P){return{source:L,target:P}})}))}p.layout.hierarchy=function(){var ce=Cr,L=xr,P=kr;function F(H){var oe,fe=[H],ge=[];for(H.depth=0;null!=(oe=fe.pop());)if(ge.push(oe),(Ce=L.call(F,oe,oe.depth))&&(xe=Ce.length)){for(var xe,Ce,Ge;--xe>=0;)fe.push(Ge=Ce[xe]),Ge.parent=oe,Ge.depth=oe.depth+1;P&&(oe.value=0),oe.children=Ce}else P&&(oe.value=+P.call(F,oe,oe.depth)||0),delete oe.children;return ur(H,function(Xe){var ot,Mt;ce&&(ot=Xe.children)&&ot.sort(ce),P&&(Mt=Xe.parent)&&(Mt.value+=Xe.value)}),ge}return F.sort=function(H){return arguments.length?(ce=H,F):ce},F.children=function(H){return arguments.length?(L=H,F):L},F.value=function(H){return arguments.length?(P=H,F):P},F.revalue=function(H){return P&&(er(H,function(oe){oe.children&&(oe.value=0)}),ur(H,function(oe){var fe;oe.children||(oe.value=+P.call(F,oe,oe.depth)||0),(fe=oe.parent)&&(fe.value+=oe.value)})),H},F},p.layout.partition=function(){var ce=p.layout.hierarchy(),L=[1,1];function P(F,H){var oe=ce.call(this,F,H);return function fe(ge,xe,Ce,Ge){var Xe=ge.children;if(ge.x=xe,ge.y=ge.depth*Ge,ge.dx=Ce,ge.dy=Ge,Xe&&(ot=Xe.length)){var ot,Mt,It,Ct=-1;for(Ce=ge.value?Ce/ge.value:0;++Ct<ot;)fe(Mt=Xe[Ct],xe,It=Mt.value*Ce,Ge),xe+=It}}(oe[0],0,L[0],L[1]/function fe(ge){var xe=ge.children,Ce=0;if(xe&&(Ge=xe.length))for(var Ge,Xe=-1;++Xe<Ge;)Ce=Math.max(Ce,fe(xe[Xe]));return 1+Ce}(oe[0])),oe}return P.size=function(F){return arguments.length?(L=F,P):L},or(P,ce)},p.layout.pie=function(){var ce=Number,L=pn,P=0,F=lr,H=0;function oe(fe){var ge,xe=fe.length,Ce=fe.map(function(Ht,jt){return+ce.call(oe,Ht,jt)}),Ge=+("function"==typeof P?P.apply(this,arguments):P),Xe=("function"==typeof F?F.apply(this,arguments):F)-Ge,ot=Math.min(Math.abs(Xe)/xe,+("function"==typeof H?H.apply(this,arguments):H)),Mt=ot*(Xe<0?-1:1),It=p.sum(Ce),Ct=It?(Xe-xe*Mt)/It:0,Lt=p.range(xe),Tt=[];return null!=L&&Lt.sort(L===pn?function(Ht,jt){return Ce[jt]-Ce[Ht]}:function(Ht,jt){return L(fe[Ht],fe[jt])}),Lt.forEach(function(Ht){Tt[Ht]={data:fe[Ht],value:ge=Ce[Ht],startAngle:Ge,endAngle:Ge+=ge*Ct+Mt,padAngle:ot}}),Tt}return oe.value=function(fe){return arguments.length?(ce=fe,oe):ce},oe.sort=function(fe){return arguments.length?(L=fe,oe):L},oe.startAngle=function(fe){return arguments.length?(P=fe,oe):P},oe.endAngle=function(fe){return arguments.length?(F=fe,oe):F},oe.padAngle=function(fe){return arguments.length?(H=fe,oe):H},oe};var pn={};function Tn(ce){return ce.x}function Un(ce){return ce.y}function Wn(ce,L,P){ce.y0=L,ce.y=P}p.layout.stack=function(){var ce=C,L=Si,P=Ri,F=Wn,H=Tn,oe=Un;function fe(ge,xe){if(!(ot=ge.length))return ge;var Ce=ge.map(function(Ht,jt){return ce.call(fe,Ht,jt)}),Ge=Ce.map(function(Ht){return Ht.map(function(jt,Wt){return[H.call(fe,jt,Wt),oe.call(fe,jt,Wt)]})}),Xe=L.call(fe,Ge,xe);Ce=p.permute(Ce,Xe),Ge=p.permute(Ge,Xe);var ot,Mt,It,Ct,Lt=P.call(fe,Ge,xe),Tt=Ce[0].length;for(It=0;It<Tt;++It)for(F.call(fe,Ce[0][It],Ct=Lt[It],Ge[0][It][1]),Mt=1;Mt<ot;++Mt)F.call(fe,Ce[Mt][It],Ct+=Ge[Mt-1][It][1],Ge[Mt][It][1]);return ge}return fe.values=function(ge){return arguments.length?(ce=ge,fe):ce},fe.order=function(ge){return arguments.length?(L="function"==typeof ge?ge:ei.get(ge)||Si,fe):L},fe.offset=function(ge){return arguments.length?(P="function"==typeof ge?ge:Yn.get(ge)||Ri,fe):P},fe.x=function(ge){return arguments.length?(H=ge,fe):H},fe.y=function(ge){return arguments.length?(oe=ge,fe):oe},fe.out=function(ge){return arguments.length?(F=ge,fe):F},fe};var ei=p.map({"inside-out":function(ce){var L,P,F=ce.length,H=ce.map(Ki),oe=ce.map(Zi),fe=p.range(F).sort(function(Xe,ot){return H[Xe]-H[ot]}),ge=0,xe=0,Ce=[],Ge=[];for(L=0;L<F;++L)P=fe[L],ge<xe?(ge+=oe[P],Ce.push(P)):(xe+=oe[P],Ge.push(P));return Ge.reverse().concat(Ce)},reverse:function(ce){return p.range(ce.length).reverse()},default:Si}),Yn=p.map({silhouette:function(ce){var L,P,F,H=ce.length,oe=ce[0].length,fe=[],ge=0,xe=[];for(P=0;P<oe;++P){for(L=0,F=0;L<H;L++)F+=ce[L][P][1];F>ge&&(ge=F),fe.push(F)}for(P=0;P<oe;++P)xe[P]=(ge-fe[P])/2;return xe},wiggle:function(ce){var L,P,F,H,oe,fe,ge,xe,Ce,Ge=ce.length,Xe=ce[0],ot=Xe.length,Mt=[];for(Mt[0]=xe=Ce=0,P=1;P<ot;++P){for(L=0,H=0;L<Ge;++L)H+=ce[L][P][1];for(L=0,oe=0,ge=Xe[P][0]-Xe[P-1][0];L<Ge;++L){for(F=0,fe=(ce[L][P][1]-ce[L][P-1][1])/(2*ge);F<L;++F)fe+=(ce[F][P][1]-ce[F][P-1][1])/ge;oe+=fe*ce[L][P][1]}Mt[P]=xe-=H?oe/H*ge:0,xe<Ce&&(Ce=xe)}for(P=0;P<ot;++P)Mt[P]-=Ce;return Mt},expand:function(ce){var L,P,F,H=ce.length,oe=ce[0].length,fe=1/H,ge=[];for(P=0;P<oe;++P){for(L=0,F=0;L<H;L++)F+=ce[L][P][1];if(F)for(L=0;L<H;L++)ce[L][P][1]/=F;else for(L=0;L<H;L++)ce[L][P][1]=fe}for(P=0;P<oe;++P)ge[P]=0;return ge},zero:Ri});function Si(ce){return p.range(ce.length)}function Ri(ce){for(var L=-1,P=ce[0].length,F=[];++L<P;)F[L]=0;return F}function Ki(ce){for(var L,P=1,F=0,H=ce[0][1],oe=ce.length;P<oe;++P)(L=ce[P][1])>H&&(F=P,H=L);return F}function Zi(ce){return ce.reduce(ea,0)}function ea(ce,L){return ce+L[1]}function Oa(ce,L){return Ia(ce,Math.ceil(Math.log(L.length)/Math.LN2+1))}function Ia(ce,L){for(var P=-1,F=+ce[0],H=(ce[1]-F)/L,oe=[];++P<=L;)oe[P]=H*P+F;return oe}function ya(ce){return[p.min(ce),p.max(ce)]}function xa(ce,L){return ce.value-L.value}function Ca(ce,L){var P=ce._pack_next;ce._pack_next=L,L._pack_prev=ce,L._pack_next=P,P._pack_prev=L}function Xa(ce,L){ce._pack_next=L,L._pack_prev=ce}function so(ce,L){var P=L.x-ce.x,F=L.y-ce.y,H=ce.r+L.r;return.999*H*H>P*P+F*F}function lo(ce){if((L=ce.children)&&(xe=L.length)){var L,P,F,H,oe,fe,ge,xe,Ce=1/0,Ge=-1/0,Xe=1/0,ot=-1/0;if(L.forEach(co),(P=L[0]).x=-P.r,P.y=0,jt(P),xe>1&&((F=L[1]).x=F.r,F.y=0,jt(F),xe>2))for(Hi(P,F,H=L[2]),jt(H),Ca(P,H),P._pack_prev=H,Ca(H,F),F=P._pack_next,oe=3;oe<xe;oe++){Hi(P,F,H=L[oe]);var Mt=0,It=1,Ct=1;for(fe=F._pack_next;fe!==F;fe=fe._pack_next,It++)if(so(fe,H)){Mt=1;break}if(1==Mt)for(ge=P._pack_prev;ge!==fe._pack_prev&&!so(ge,H);ge=ge._pack_prev,Ct++);Mt?(It<Ct||It==Ct&&F.r<P.r?Xa(P,F=fe):Xa(P=ge,F),oe--):(Ca(P,H),F=H,jt(H))}var Lt=(Ce+Ge)/2,Tt=(Xe+ot)/2,Ht=0;for(oe=0;oe<xe;oe++)(H=L[oe]).x-=Lt,H.y-=Tt,Ht=Math.max(Ht,H.r+Math.sqrt(H.x*H.x+H.y*H.y));ce.r=Ht,L.forEach(uo)}function jt(Wt){Ce=Math.min(Wt.x-Wt.r,Ce),Ge=Math.max(Wt.x+Wt.r,Ge),Xe=Math.min(Wt.y-Wt.r,Xe),ot=Math.max(Wt.y+Wt.r,ot)}}function co(ce){ce._pack_next=ce._pack_prev=ce}function uo(ce){delete ce._pack_next,delete ce._pack_prev}function Hi(ce,L,P){var F=ce.r+P.r,H=L.x-ce.x,oe=L.y-ce.y;if(F&&(H||oe)){var fe=L.r+P.r,ge=H*H+oe*oe,xe=.5+((F*=F)-(fe*=fe))/(2*ge),Ce=Math.sqrt(Math.max(0,2*fe*(F+ge)-(F-=ge)*F-fe*fe))/(2*ge);P.x=ce.x+xe*H+Ce*oe,P.y=ce.y+xe*oe-Ce*H}else P.x=ce.x+F,P.y=ce.y}function mt(ce,L){return ce.parent==L.parent?1:2}function Vt(ce){var L=ce.children;return L.length?L[0]:ce.t}function pr(ce){var L,P=ce.children;return(L=P.length)?P[L-1]:ce.t}function Jt(ce,L,P){var F=P/(L.i-ce.i);L.c-=F,L.s+=P,ce.c+=F,L.z+=P,L.m+=P}function gr(ce,L,P){return ce.a.parent===L.parent?ce.a:P}function Br(ce){return{x:ce.x,y:ce.y,dx:ce.dx,dy:ce.dy}}function Hr(ce,L){var P=ce.x+L[3],F=ce.y+L[0],H=ce.dx-L[1]-L[3],oe=ce.dy-L[0]-L[2];return H<0&&(P+=H/2,H=0),oe<0&&(F+=oe/2,oe=0),{x:P,y:F,dx:H,dy:oe}}function en(ce){var L=ce[0],P=ce[ce.length-1];return L<P?[L,P]:[P,L]}function _n(ce){return ce.rangeExtent?ce.rangeExtent():en(ce.range())}function mn(ce,L,P,F){var H=P(ce[0],ce[1]),oe=F(L[0],L[1]);return function(fe){return oe(H(fe))}}function Sn(ce,L){var P,F=0,H=ce.length-1,oe=ce[F],fe=ce[H];return fe<oe&&(P=F,F=H,H=P,P=oe,oe=fe,fe=P),ce[F]=L.floor(oe),ce[H]=L.ceil(fe),ce}function Rn(ce){return ce?{floor:function(L){return Math.floor(L/ce)*ce},ceil:function(L){return Math.ceil(L/ce)*ce}}:bn}p.layout.histogram=function(){var ce=!0,L=Number,P=ya,F=Oa;function H(oe,fe){for(var ge,xe,Ce=[],Ge=oe.map(L,this),Xe=P.call(this,Ge,fe),ot=F.call(this,Xe,Ge,fe),Mt=(fe=-1,Ge.length),It=ot.length-1,Ct=ce?1:1/Mt;++fe<It;)(ge=Ce[fe]=[]).dx=ot[fe+1]-(ge.x=ot[fe]),ge.y=0;if(It>0)for(fe=-1;++fe<Mt;)(xe=Ge[fe])>=Xe[0]&&xe<=Xe[1]&&((ge=Ce[p.bisect(ot,xe,1,It)-1]).y+=Ct,ge.push(oe[fe]));return Ce}return H.value=function(oe){return arguments.length?(L=oe,H):L},H.range=function(oe){return arguments.length?(P=Er(oe),H):P},H.bins=function(oe){return arguments.length?(F="number"==typeof oe?function(fe){return Ia(fe,oe)}:Er(oe),H):F},H.frequency=function(oe){return arguments.length?(ce=!!oe,H):ce},H},p.layout.pack=function(){var ce,L=p.layout.hierarchy().sort(xa),P=0,F=[1,1];function H(oe,fe){var ge=L.call(this,oe,fe),xe=ge[0],Ce=F[0],Ge=F[1],Xe=null==ce?Math.sqrt:"function"==typeof ce?ce:function(){return ce};if(xe.x=xe.y=0,ur(xe,function(Mt){Mt.r=+Xe(Mt.value)}),ur(xe,lo),P){var ot=P*(ce?1:Math.max(2*xe.r/Ce,2*xe.r/Ge))/2;ur(xe,function(Mt){Mt.r+=ot}),ur(xe,lo),ur(xe,function(Mt){Mt.r-=ot})}return function Mt(It,Ct,Lt,Tt){var Ht=It.children;if(It.x=Ct+=Tt*It.x,It.y=Lt+=Tt*It.y,It.r*=Tt,Ht)for(var jt=-1,Wt=Ht.length;++jt<Wt;)Mt(Ht[jt],Ct,Lt,Tt)}(xe,Ce/2,Ge/2,ce?1:1/Math.max(2*xe.r/Ce,2*xe.r/Ge)),ge}return H.size=function(oe){return arguments.length?(F=oe,H):F},H.radius=function(oe){return arguments.length?(ce=null==oe||"function"==typeof oe?oe:+oe,H):ce},H.padding=function(oe){return arguments.length?(P=+oe,H):P},or(H,L)},p.layout.tree=function(){var ce=p.layout.hierarchy().sort(null).value(null),L=mt,P=[1,1],F=null;function H(xe,Ce){var Ge=ce.call(this,xe,Ce),Xe=Ge[0],ot=function(jt){for(var Wt,cr={A:null,children:[jt]},br=[cr];null!=(Wt=br.pop());)for(var zr,Or=Wt.children,sn=0,on=Or.length;sn<on;++sn)br.push((Or[sn]=zr={_:Or[sn],parent:Wt,children:(zr=Or[sn].children)&&zr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:sn}).a=zr);return cr.children[0]}(Xe);if(ur(ot,oe),ot.parent.m=-ot.z,er(ot,fe),F)er(Xe,ge);else{var Mt=Xe,It=Xe,Ct=Xe;er(Xe,function(jt){jt.x<Mt.x&&(Mt=jt),jt.x>It.x&&(It=jt),jt.depth>Ct.depth&&(Ct=jt)});var Lt=L(Mt,It)/2-Mt.x,Tt=P[0]/(It.x+L(It,Mt)/2+Lt),Ht=P[1]/(Ct.depth||1);er(Xe,function(jt){jt.x=(jt.x+Lt)*Tt,jt.y=jt.depth*Ht})}return Ge}function oe(xe){var Ce=xe.children,Ge=xe.parent.children,Xe=xe.i?Ge[xe.i-1]:null;if(Ce.length){!function(Mt){for(var It,Ct=0,Lt=0,Tt=Mt.children,Ht=Tt.length;--Ht>=0;)(It=Tt[Ht]).z+=Ct,It.m+=Ct,Ct+=It.s+(Lt+=It.c)}(xe);var ot=(Ce[0].z+Ce[Ce.length-1].z)/2;Xe?(xe.z=Xe.z+L(xe._,Xe._),xe.m=xe.z-ot):xe.z=ot}else Xe&&(xe.z=Xe.z+L(xe._,Xe._));xe.parent.A=function(Mt,It,Ct){if(It){for(var Lt,Tt=Mt,Ht=Mt,jt=It,Wt=Tt.parent.children[0],cr=Tt.m,br=Ht.m,zr=jt.m,Or=Wt.m;jt=pr(jt),Tt=Vt(Tt),jt&&Tt;)Wt=Vt(Wt),(Ht=pr(Ht)).a=Mt,(Lt=jt.z+zr-Tt.z-cr+L(jt._,Tt._))>0&&(Jt(gr(jt,Mt,Ct),Mt,Lt),cr+=Lt,br+=Lt),zr+=jt.m,cr+=Tt.m,Or+=Wt.m,br+=Ht.m;jt&&!pr(Ht)&&(Ht.t=jt,Ht.m+=zr-br),Tt&&!Vt(Wt)&&(Wt.t=Tt,Wt.m+=cr-Or,Ct=Mt)}return Ct}(xe,Xe,xe.parent.A||Ge[0])}function fe(xe){xe._.x=xe.z+xe.parent.m,xe.m+=xe.parent.m}function ge(xe){xe.x*=P[0],xe.y=xe.depth*P[1]}return H.separation=function(xe){return arguments.length?(L=xe,H):L},H.size=function(xe){return arguments.length?(F=null==(P=xe)?ge:null,H):F?null:P},H.nodeSize=function(xe){return arguments.length?(F=null==(P=xe)?null:ge,H):F?P:null},or(H,ce)},p.layout.cluster=function(){var ce=p.layout.hierarchy().sort(null).value(null),L=mt,P=[1,1],F=!1;function H(oe,fe){var ge,xe=ce.call(this,oe,fe),Ce=xe[0],Ge=0;ur(Ce,function(Ct){var Tt,Lt=Ct.children;Lt&&Lt.length?(Ct.x=(Tt=Lt).reduce(function(Ht,jt){return Ht+jt.x},0)/Tt.length,Ct.y=function(Tt){return 1+p.max(Tt,function(Ht){return Ht.y})}(Lt)):(Ct.x=ge?Ge+=L(Ct,ge):0,Ct.y=0,ge=Ct)});var Xe=function Ct(Lt){var Tt=Lt.children;return Tt&&Tt.length?Ct(Tt[0]):Lt}(Ce),ot=function Ct(Lt){var Tt,Ht=Lt.children;return Ht&&(Tt=Ht.length)?Ct(Ht[Tt-1]):Lt}(Ce),Mt=Xe.x-L(Xe,ot)/2,It=ot.x+L(ot,Xe)/2;return ur(Ce,F?function(Ct){Ct.x=(Ct.x-Ce.x)*P[0],Ct.y=(Ce.y-Ct.y)*P[1]}:function(Ct){Ct.x=(Ct.x-Mt)/(It-Mt)*P[0],Ct.y=(1-(Ce.y?Ct.y/Ce.y:1))*P[1]}),xe}return H.separation=function(oe){return arguments.length?(L=oe,H):L},H.size=function(oe){return arguments.length?(F=null==(P=oe),H):F?null:P},H.nodeSize=function(oe){return arguments.length?(F=null!=(P=oe),H):F?P:null},or(H,ce)},p.layout.treemap=function(){var ce,L=p.layout.hierarchy(),P=Math.round,F=[1,1],H=null,oe=Br,fe=!1,ge="squarify",xe=.5*(1+Math.sqrt(5));function Ce(Ct,Lt){for(var Tt,Ht,jt=-1,Wt=Ct.length;++jt<Wt;)Ht=(Tt=Ct[jt]).value*(Lt<0?0:Lt),Tt.area=isNaN(Ht)||Ht<=0?0:Ht}function Ge(Ct){var Lt=Ct.children;if(Lt&&Lt.length){var Tt,Ht,jt,Wt=oe(Ct),cr=[],br=Lt.slice(),zr=1/0,Or="slice"===ge?Wt.dx:"dice"===ge?Wt.dy:"slice-dice"===ge?1&Ct.depth?Wt.dy:Wt.dx:Math.min(Wt.dx,Wt.dy);for(Ce(br,Wt.dx*Wt.dy/Ct.value),cr.area=0;(jt=br.length)>0;)cr.push(Tt=br[jt-1]),cr.area+=Tt.area,"squarify"!==ge||(Ht=ot(cr,Or))<=zr?(br.pop(),zr=Ht):(cr.area-=cr.pop().area,Mt(cr,Or,Wt,!1),Or=Math.min(Wt.dx,Wt.dy),cr.length=cr.area=0,zr=1/0);cr.length&&(Mt(cr,Or,Wt,!0),cr.length=cr.area=0),Lt.forEach(Ge)}}function Xe(Ct){var Lt=Ct.children;if(Lt&&Lt.length){var Tt,Ht=oe(Ct),jt=Lt.slice(),Wt=[];for(Ce(jt,Ht.dx*Ht.dy/Ct.value),Wt.area=0;Tt=jt.pop();)Wt.push(Tt),Wt.area+=Tt.area,null!=Tt.z&&(Mt(Wt,Tt.z?Ht.dx:Ht.dy,Ht,!jt.length),Wt.length=Wt.area=0);Lt.forEach(Xe)}}function ot(Ct,Lt){for(var Tt,Ht=Ct.area,jt=0,Wt=1/0,cr=-1,br=Ct.length;++cr<br;)(Tt=Ct[cr].area)&&(Tt<Wt&&(Wt=Tt),Tt>jt&&(jt=Tt));return Lt*=Lt,(Ht*=Ht)?Math.max(Lt*jt*xe/Ht,Ht/(Lt*Wt*xe)):1/0}function Mt(Ct,Lt,Tt,Ht){var jt,Wt=-1,cr=Ct.length,br=Tt.x,zr=Tt.y,Or=Lt?P(Ct.area/Lt):0;if(Lt==Tt.dx){for((Ht||Or>Tt.dy)&&(Or=Tt.dy);++Wt<cr;)(jt=Ct[Wt]).x=br,jt.y=zr,jt.dy=Or,br+=jt.dx=Math.min(Tt.x+Tt.dx-br,Or?P(jt.area/Or):0);jt.z=!0,jt.dx+=Tt.x+Tt.dx-br,Tt.y+=Or,Tt.dy-=Or}else{for((Ht||Or>Tt.dx)&&(Or=Tt.dx);++Wt<cr;)(jt=Ct[Wt]).x=br,jt.y=zr,jt.dx=Or,zr+=jt.dy=Math.min(Tt.y+Tt.dy-zr,Or?P(jt.area/Or):0);jt.z=!1,jt.dy+=Tt.y+Tt.dy-zr,Tt.x+=Or,Tt.dx-=Or}}function It(Ct){var Lt=ce||L(Ct),Tt=Lt[0];return Tt.x=Tt.y=0,Tt.value?(Tt.dx=F[0],Tt.dy=F[1]):Tt.dx=Tt.dy=0,ce&&L.revalue(Tt),Ce([Tt],Tt.dx*Tt.dy/Tt.value),(ce?Xe:Ge)(Tt),fe&&(ce=Lt),Lt}return It.size=function(Ct){return arguments.length?(F=Ct,It):F},It.padding=function(Ct){if(!arguments.length)return H;function Lt(jt){var Wt=Ct.call(It,jt,jt.depth);return null==Wt?Br(jt):Hr(jt,"number"==typeof Wt?[Wt,Wt,Wt,Wt]:Wt)}function Tt(jt){return Hr(jt,Ct)}var Ht;return oe=null==(H=Ct)?Br:"function"==(Ht=typeof Ct)?Lt:("number"===Ht&&(Ct=[Ct,Ct,Ct,Ct]),Tt),It},It.round=function(Ct){return arguments.length?(P=Ct?Math.round:Number,It):P!=Number},It.sticky=function(Ct){return arguments.length?(fe=Ct,ce=null,It):fe},It.ratio=function(Ct){return arguments.length?(xe=Ct,It):xe},It.mode=function(Ct){return arguments.length?(ge=Ct+"",It):ge},or(It,L)},p.random={normal:function(ce,L){var P=arguments.length;return P<2&&(L=1),P<1&&(ce=0),function(){var F,H,oe;do{oe=(F=2*Math.random()-1)*F+(H=2*Math.random()-1)*H}while(!oe||oe>1);return ce+L*F*Math.sqrt(-2*Math.log(oe)/oe)}},logNormal:function(){var ce=p.random.normal.apply(p,arguments);return function(){return Math.exp(ce())}},bates:function(ce){var L=p.random.irwinHall(ce);return function(){return L()/ce}},irwinHall:function(ce){return function(){for(var L=0,P=0;P<ce;P++)L+=Math.random();return L}}},p.scale={};var bn={floor:C,ceil:C};function Pn(ce,L,P,F){var H=[],oe=[],fe=0,ge=Math.min(ce.length,L.length)-1;for(ce[ge]<ce[0]&&(ce=ce.slice().reverse(),L=L.slice().reverse());++fe<=ge;)H.push(P(ce[fe-1],ce[fe])),oe.push(F(L[fe-1],L[fe]));return function(xe){var Ce=p.bisect(ce,xe,1,ge)-1;return oe[Ce](H[Ce](xe))}}function Zn(ce,L){return p.rebind(ce,L,"range","rangeRound","interpolate","clamp")}function Qn(ce,L){return Sn(ce,Rn(di(ce,L)[2])),Sn(ce,Rn(di(ce,L)[2])),ce}function di(ce,L){null==L&&(L=10);var P=en(ce),F=P[1]-P[0],H=Math.pow(10,Math.floor(Math.log(F/L)/Math.LN10)),oe=L/F*H;return oe<=.15?H*=10:oe<=.35?H*=5:oe<=.75&&(H*=2),P[0]=Math.ceil(P[0]/H)*H,P[1]=Math.floor(P[1]/H)*H+.5*H,P[2]=H,P}function rn(ce,L){return p.range.apply(p,di(ce,L))}p.scale.linear=function(){return function ce(L,P,F,H){var oe,fe;function ge(){var Ce=Math.min(L.length,P.length)>2?Pn:mn,Ge=H?So:ws;return oe=Ce(L,P,Ge,F),fe=Ce(P,L,Ge,hn),xe}function xe(Ce){return oe(Ce)}return xe.invert=function(Ce){return fe(Ce)},xe.domain=function(Ce){return arguments.length?(L=Ce.map(Number),ge()):L},xe.range=function(Ce){return arguments.length?(P=Ce,ge()):P},xe.rangeRound=function(Ce){return xe.range(Ce).interpolate(jo)},xe.clamp=function(Ce){return arguments.length?(H=Ce,ge()):H},xe.interpolate=function(Ce){return arguments.length?(F=Ce,ge()):F},xe.ticks=function(Ce){return rn(L,Ce)},xe.tickFormat=function(Ce,Ge){return d3_scale_linearTickFormat(L,Ce,Ge)},xe.nice=function(Ce){return Qn(L,Ce),ge()},xe.copy=function(){return ce(L,P,F,H)},ge()}([0,1],[0,1],hn,!1)},p.scale.log=function(){return function ce(L,P,F,H){function oe(xe){return(F?Math.log(xe<0?0:xe):-Math.log(xe>0?0:-xe))/Math.log(P)}function fe(xe){return F?Math.pow(P,xe):-Math.pow(P,-xe)}function ge(xe){return L(oe(xe))}return ge.invert=function(xe){return fe(L.invert(xe))},ge.domain=function(xe){return arguments.length?(F=xe[0]>=0,L.domain((H=xe.map(Number)).map(oe)),ge):H},ge.base=function(xe){return arguments.length?(P=+xe,L.domain(H.map(oe)),ge):P},ge.nice=function(){var xe=Sn(H.map(oe),F?Math:ui);return L.domain(xe),H=xe.map(fe),ge},ge.ticks=function(){var xe=en(H),Ce=[],Ge=xe[0],Xe=xe[1],ot=Math.floor(oe(Ge)),Mt=Math.ceil(oe(Xe)),It=P%1?2:P;if(isFinite(Mt-ot)){if(F){for(;ot<Mt;ot++)for(var Ct=1;Ct<It;Ct++)Ce.push(fe(ot)*Ct);Ce.push(fe(ot))}else for(Ce.push(fe(ot));ot++<Mt;)for(Ct=It-1;Ct>0;Ct--)Ce.push(fe(ot)*Ct);for(ot=0;Ce[ot]<Ge;ot++);for(Mt=Ce.length;Ce[Mt-1]>Xe;Mt--);Ce=Ce.slice(ot,Mt)}return Ce},ge.copy=function(){return ce(L.copy(),P,F,H)},Zn(ge,L)}(p.scale.linear().domain([0,1]),10,!0,[1,10])};var ui={floor:function(ce){return-Math.ceil(-ce)},ceil:function(ce){return-Math.floor(-ce)}};function qn(ce){return function(L){return L<0?-Math.pow(-L,ce):Math.pow(L,ce)}}p.scale.pow=function(){return function ce(L,P,F){var H=qn(P),oe=qn(1/P);function fe(ge){return L(H(ge))}return fe.invert=function(ge){return oe(L.invert(ge))},fe.domain=function(ge){return arguments.length?(L.domain((F=ge.map(Number)).map(H)),fe):F},fe.ticks=function(ge){return rn(F,ge)},fe.tickFormat=function(ge,xe){return d3_scale_linearTickFormat(F,ge,xe)},fe.nice=function(ge){return fe.domain(Qn(F,ge))},fe.exponent=function(ge){return arguments.length?(H=qn(P=ge),oe=qn(1/P),L.domain(F.map(H)),fe):P},fe.copy=function(){return ce(L.copy(),P,F)},Zn(fe,L)}(p.scale.linear(),1,[0,1])},p.scale.sqrt=function(){return p.scale.pow().exponent(.5)},p.scale.ordinal=function(){return function ce(L,P){var F,H,oe;function fe(xe){return H[((F.get(xe)||("range"===P.t?F.set(xe,L.push(xe)):NaN))-1)%H.length]}function ge(xe,Ce){return p.range(L.length).map(function(Ge){return xe+Ce*Ge})}return fe.domain=function(xe){if(!arguments.length)return L;L=[],F=new w;for(var Ce,Ge=-1,Xe=xe.length;++Ge<Xe;)F.has(Ce=xe[Ge])||F.set(Ce,L.push(Ce));return fe[P.t].apply(fe,P.a)},fe.range=function(xe){return arguments.length?(H=xe,oe=0,P={t:"range",a:arguments},fe):H},fe.rangePoints=function(xe,Ce){arguments.length<2&&(Ce=0);var Ge=xe[0],Xe=xe[1],ot=L.length<2?(Ge=(Ge+Xe)/2,0):(Xe-Ge)/(L.length-1+Ce);return H=ge(Ge+ot*Ce/2,ot),oe=0,P={t:"rangePoints",a:arguments},fe},fe.rangeRoundPoints=function(xe,Ce){arguments.length<2&&(Ce=0);var Ge=xe[0],Xe=xe[1],ot=L.length<2?(Ge=Xe=Math.round((Ge+Xe)/2),0):(Xe-Ge)/(L.length-1+Ce)|0;return H=ge(Ge+Math.round(ot*Ce/2+(Xe-Ge-(L.length-1+Ce)*ot)/2),ot),oe=0,P={t:"rangeRoundPoints",a:arguments},fe},fe.rangeBands=function(xe,Ce,Ge){arguments.length<2&&(Ce=0),arguments.length<3&&(Ge=Ce);var Xe=xe[1]<xe[0],ot=xe[Xe-0],It=(xe[1-Xe]-ot)/(L.length-Ce+2*Ge);return H=ge(ot+It*Ge,It),Xe&&H.reverse(),oe=It*(1-Ce),P={t:"rangeBands",a:arguments},fe},fe.rangeRoundBands=function(xe,Ce,Ge){arguments.length<2&&(Ce=0),arguments.length<3&&(Ge=Ce);var Xe=xe[1]<xe[0],ot=xe[Xe-0],Mt=xe[1-Xe],It=Math.floor((Mt-ot)/(L.length-Ce+2*Ge));return H=ge(ot+Math.round((Mt-ot-(L.length-Ce)*It)/2),It),Xe&&H.reverse(),oe=Math.round(It*(1-Ce)),P={t:"rangeRoundBands",a:arguments},fe},fe.rangeBand=function(){return oe},fe.rangeExtent=function(){return en(P.a[0])},fe.copy=function(){return ce(L,P)},fe.domain(L)}([],{t:"range",a:[[]]})},p.scale.category10=function(){return p.scale.ordinal().range(Jn)},p.scale.category20=function(){return p.scale.ordinal().range(ci)},p.scale.category20b=function(){return p.scale.ordinal().range(Ii)},p.scale.category20c=function(){return p.scale.ordinal().range(Ui)};var Jn=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map($t),ci=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map($t),Ii=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map($t),Ui=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map($t);function jn(){return 0}p.scale.quantile=function(){return function ce(L,P){var F;function H(){var fe=0,ge=P.length;for(F=[];++fe<ge;)F[fe-1]=p.quantile(L,fe/ge);return oe}function oe(fe){if(!isNaN(fe=+fe))return P[p.bisect(F,fe)]}return oe.domain=function(fe){return arguments.length?(L=fe.map(l).filter(c).sort(i),H()):L},oe.range=function(fe){return arguments.length?(P=fe,H()):P},oe.quantiles=function(){return F},oe.invertExtent=function(fe){return(fe=P.indexOf(fe))<0?[NaN,NaN]:[fe>0?F[fe-1]:L[0],fe<F.length?F[fe]:L[L.length-1]]},oe.copy=function(){return ce(L,P)},H()}([],[])},p.scale.quantize=function(){return function ce(L,P,F){var H,oe;function fe(xe){return F[Math.max(0,Math.min(oe,Math.floor(H*(xe-L))))]}function ge(){return H=F.length/(P-L),oe=F.length-1,fe}return fe.domain=function(xe){return arguments.length?(L=+xe[0],P=+xe[xe.length-1],ge()):[L,P]},fe.range=function(xe){return arguments.length?(F=xe,ge()):F},fe.invertExtent=function(xe){return[xe=(xe=F.indexOf(xe))<0?NaN:xe/H+L,xe+1/H]},fe.copy=function(){return ce(L,P,F)},ge()}(0,1,[0,1])},p.scale.threshold=function(){return function ce(L,P){function F(H){if(H<=H)return P[p.bisect(L,H)]}return F.domain=function(H){return arguments.length?(L=H,F):L},F.range=function(H){return arguments.length?(P=H,F):P},F.invertExtent=function(H){return H=P.indexOf(H),[L[H-1],L[H]]},F.copy=function(){return ce(L,P)},F}([.5],[0,1])},p.scale.identity=function(){return function ce(L){function P(F){return+F}return P.invert=P,P.domain=P.range=function(F){return arguments.length?(L=F.map(P),P):L},P.ticks=function(F){return rn(L,F)},P.tickFormat=function(F,H){return d3_scale_linearTickFormat(L,F,H)},P.copy=function(){return ce(L)},P}([0,1])},p.svg={},p.svg.arc=function(){var ce=Ni,L=Mi,P=jn,F=Yi,H=Wi,oe=Fi,fe=pa;function ge(){var Ce=Math.max(0,+ce.apply(this,arguments)),Ge=Math.max(0,+L.apply(this,arguments)),Xe=H.apply(this,arguments)-Ze,ot=oe.apply(this,arguments)-Ze,Mt=Math.abs(ot-Xe),It=Xe>ot?0:1;if(Ge<Ce&&(Ct=Ge,Ge=Ce,Ce=Ct),Mt>=Ue)return xe(Ge,It)+(Ce?xe(Ce,1-It):"")+"Z";var Ct,Lt,Tt,Ht,jt,Wt,cr,br,zr,Or,sn,on,Mn=0,xn=0,Kn=[];if((Ht=(+fe.apply(this,arguments)||0)/2)&&(Tt=F===Yi?Math.sqrt(Ce*Ce+Ge*Ge):+F.apply(this,arguments),It||(xn*=-1),Ge&&(xn=ke(Tt/Ge*Math.sin(Ht))),Ce&&(Mn=ke(Tt/Ce*Math.sin(Ht)))),Ge){jt=Ge*Math.cos(Xe+xn),Wt=Ge*Math.sin(Xe+xn),cr=Ge*Math.cos(ot-xn),br=Ge*Math.sin(ot-xn);var ai=Math.abs(ot-Xe-2*xn)<=Xt?0:1;if(xn&&fi(jt,Wt,cr,br)===It^ai){var _i=(Xe+ot)/2;jt=Ge*Math.cos(_i),Wt=Ge*Math.sin(_i),cr=br=null}}else jt=Wt=0;if(Ce){zr=Ce*Math.cos(ot-Mn),Or=Ce*Math.sin(ot-Mn),sn=Ce*Math.cos(Xe+Mn),on=Ce*Math.sin(Xe+Mn);var Jr=Math.abs(Xe-ot+2*Mn)<=Xt?0:1;if(Mn&&fi(zr,Or,sn,on)===1-It^Jr){var zn=(Xe+ot)/2;zr=Ce*Math.cos(zn),Or=Ce*Math.sin(zn),sn=on=null}}else zr=Or=0;if(Mt>St&&(Ct=Math.min(Math.abs(Ge-Ce)/2,+P.apply(this,arguments)))>.001){Lt=Ce<Ge^It?0:1;var oi=Ct,ni=Ct;if(Mt<Xt){var pi=null==sn?[zr,Or]:null==cr?[jt,Wt]:Bt([jt,Wt],[sn,on],[cr,br],[zr,Or]),Ai=jt-pi[0],zi=Wt-pi[1],si=cr-pi[0],Di=br-pi[1],Ci=1/Math.sin(Math.acos((Ai*si+zi*Di)/(Math.sqrt(Ai*Ai+zi*zi)*Math.sqrt(si*si+Di*Di)))/2),ji=Math.sqrt(pi[0]*pi[0]+pi[1]*pi[1]);ni=Math.min(Ct,(Ce-ji)/(Ci-1)),oi=Math.min(Ct,(Ge-ji)/(Ci+1))}if(null!=cr){var Oi=ca(null==sn?[zr,Or]:[sn,on],[jt,Wt],Ge,oi,It),Gi=ca([cr,br],[zr,Or],Ge,oi,It);Ct===oi?Kn.push("M",Oi[0],"A",oi,",",oi," 0 0,",Lt," ",Oi[1],"A",Ge,",",Ge," 0 ",1-It^fi(Oi[1][0],Oi[1][1],Gi[1][0],Gi[1][1]),",",It," ",Gi[1],"A",oi,",",oi," 0 0,",Lt," ",Gi[0]):Kn.push("M",Oi[0],"A",oi,",",oi," 0 1,",Lt," ",Gi[0])}else Kn.push("M",jt,",",Wt);if(null!=sn){var ta=ca([jt,Wt],[sn,on],Ce,-ni,It),Ta=ca([zr,Or],null==cr?[jt,Wt]:[cr,br],Ce,-ni,It);Ct===ni?Kn.push("L",Ta[0],"A",ni,",",ni," 0 0,",Lt," ",Ta[1],"A",Ce,",",Ce," 0 ",It^fi(Ta[1][0],Ta[1][1],ta[1][0],ta[1][1]),",",1-It," ",ta[1],"A",ni,",",ni," 0 0,",Lt," ",ta[0]):Kn.push("L",Ta[0],"A",ni,",",ni," 0 0,",Lt," ",ta[0])}else Kn.push("L",zr,",",Or)}else Kn.push("M",jt,",",Wt),null!=cr&&Kn.push("A",Ge,",",Ge," 0 ",ai,",",It," ",cr,",",br),Kn.push("L",zr,",",Or),null!=sn&&Kn.push("A",Ce,",",Ce," 0 ",Jr,",",1-It," ",sn,",",on);return Kn.push("Z"),Kn.join("")}function xe(Ce,Ge){return"M0,"+Ce+"A"+Ce+","+Ce+" 0 1,"+Ge+" 0,"+-Ce+"A"+Ce+","+Ce+" 0 1,"+Ge+" 0,"+Ce}return ge.innerRadius=function(Ce){return arguments.length?(ce=Er(Ce),ge):ce},ge.outerRadius=function(Ce){return arguments.length?(L=Er(Ce),ge):L},ge.cornerRadius=function(Ce){return arguments.length?(P=Er(Ce),ge):P},ge.padRadius=function(Ce){return arguments.length?(F=Ce==Yi?Yi:Er(Ce),ge):F},ge.startAngle=function(Ce){return arguments.length?(H=Er(Ce),ge):H},ge.endAngle=function(Ce){return arguments.length?(oe=Er(Ce),ge):oe},ge.padAngle=function(Ce){return arguments.length?(fe=Er(Ce),ge):fe},ge.centroid=function(){var Ce=(+ce.apply(this,arguments)+ +L.apply(this,arguments))/2,Ge=(+H.apply(this,arguments)+ +oe.apply(this,arguments))/2-Ze;return[Math.cos(Ge)*Ce,Math.sin(Ge)*Ce]},ge};var Yi="auto";function Ni(ce){return ce.innerRadius}function Mi(ce){return ce.outerRadius}function Wi(ce){return ce.startAngle}function Fi(ce){return ce.endAngle}function pa(ce){return ce&&ce.padAngle}function fi(ce,L,P,F){return(ce-P)*L-(L-F)*ce>0?0:1}function ca(ce,L,P,F,H){var oe=ce[0]-L[0],fe=ce[1]-L[1],ge=(H?F:-F)/Math.sqrt(oe*oe+fe*fe),xe=ge*fe,Ce=-ge*oe,Ge=ce[0]+xe,Xe=ce[1]+Ce,ot=L[0]+xe,Mt=L[1]+Ce,It=(Ge+ot)/2,Ct=(Xe+Mt)/2,Lt=ot-Ge,Tt=Mt-Xe,Ht=Lt*Lt+Tt*Tt,jt=P-F,Wt=Ge*Mt-ot*Xe,cr=(Tt<0?-1:1)*Math.sqrt(Math.max(0,jt*jt*Ht-Wt*Wt)),br=(Wt*Tt-Lt*cr)/Ht,zr=(-Wt*Lt-Tt*cr)/Ht,Or=(Wt*Tt+Lt*cr)/Ht,sn=(-Wt*Lt+Tt*cr)/Ht,on=br-It,Mn=zr-Ct,xn=Or-It,Kn=sn-Ct;return on*on+Mn*Mn>xn*xn+Kn*Kn&&(br=Or,zr=sn),[[br-xe,zr-Ce],[br*P/jt,zr*P/jt]]}function Qa(){return!0}function $o(ce){var L=cn,P=fn,F=Qa,H=bo,oe=H.key,fe=.7;function ge(xe){var Ce,Ge=[],Xe=[],ot=-1,Mt=xe.length,It=Er(L),Ct=Er(P);function Lt(){Ge.push("M",H(ce(Xe),fe))}for(;++ot<Mt;)F.call(this,Ce=xe[ot],ot)?Xe.push([+It.call(this,Ce,ot),+Ct.call(this,Ce,ot)]):Xe.length&&(Lt(),Xe=[]);return Xe.length&&Lt(),Ge.length?Ge.join(""):null}return ge.x=function(xe){return arguments.length?(L=xe,ge):L},ge.y=function(xe){return arguments.length?(P=xe,ge):P},ge.defined=function(xe){return arguments.length?(F=xe,ge):F},ge.interpolate=function(xe){return arguments.length?(oe="function"==typeof xe?H=xe:(H=Vo.get(xe)||bo).key,ge):oe},ge.tension=function(xe){return arguments.length?(fe=xe,ge):fe},ge}p.svg.line=function(){return $o(C)};var Vo=p.map({linear:bo,"linear-closed":Ei,step:function(ce){for(var L=0,P=ce.length,F=ce[0],H=[F[0],",",F[1]];++L<P;)H.push("H",(F[0]+(F=ce[L])[0])/2,"V",F[1]);return P>1&&H.push("H",F[0]),H.join("")},"step-before":Sa,"step-after":Co,basis:eo,"basis-open":function(ce){if(ce.length<4)return bo(ce);for(var L,P=[],F=-1,H=ce.length,oe=[0],fe=[0];++F<3;)oe.push((L=ce[F])[0]),fe.push(L[1]);for(P.push(ga(fo,oe)+","+ga(fo,fe)),--F;++F<H;)L=ce[F],oe.shift(),oe.push(L[0]),fe.shift(),fe.push(L[1]),ps(P,oe,fe);return P.join("")},"basis-closed":function(ce){for(var L,P,F=-1,H=ce.length,oe=H+4,fe=[],ge=[];++F<4;)fe.push((P=ce[F%H])[0]),ge.push(P[1]);for(L=[ga(fo,fe),",",ga(fo,ge)],--F;++F<oe;)P=ce[F%H],fe.shift(),fe.push(P[0]),ge.shift(),ge.push(P[1]),ps(L,fe,ge);return L.join("")},bundle:function(ce,L){var P=ce.length-1;if(P)for(var F,H,oe=ce[0][0],fe=ce[0][1],ge=ce[P][0]-oe,xe=ce[P][1]-fe,Ce=-1;++Ce<=P;)(F=ce[Ce])[0]=L*F[0]+(1-L)*(oe+(H=Ce/P)*ge),F[1]=L*F[1]+(1-L)*(fe+H*xe);return eo(ce)},cardinal:function(ce,L){return ce.length<3?bo(ce):ce[0]+oa(ce,Pa(ce,L))},"cardinal-open":function(ce,L){return ce.length<4?bo(ce):ce[1]+oa(ce.slice(1,-1),Pa(ce,L))},"cardinal-closed":function(ce,L){return ce.length<3?Ei(ce):ce[0]+oa((ce.push(ce[0]),ce),Pa([ce[ce.length-2]].concat(ce,[ce[1]]),L))},monotone:function(ce){return ce.length<3?bo(ce):ce[0]+oa(ce,function(L){for(var P,F,H,oe,fe=[],ge=function(Ge){for(var Xe=0,ot=Ge.length-1,Mt=[],It=Ge[0],Ct=Ge[1],Lt=Mt[0]=gs(It,Ct);++Xe<ot;)Mt[Xe]=(Lt+(Lt=gs(It=Ct,Ct=Ge[Xe+1])))/2;return Mt[Xe]=Lt,Mt}(L),xe=-1,Ce=L.length-1;++xe<Ce;)P=gs(L[xe],L[xe+1]),o(P)<St?ge[xe]=ge[xe+1]=0:(oe=(F=ge[xe]/P)*F+(H=ge[xe+1]/P)*H)>9&&(oe=3*P/Math.sqrt(oe),ge[xe]=oe*F,ge[xe+1]=oe*H);for(xe=-1;++xe<=Ce;)oe=(L[Math.min(Ce,xe+1)][0]-L[Math.max(0,xe-1)][0])/(6*(1+ge[xe]*ge[xe])),fe.push([oe||0,ge[xe]*oe||0]);return fe}(ce))}});function bo(ce){return ce.length>1?ce.join("L"):ce+"Z"}function Ei(ce){return ce.join("L")+"Z"}function Sa(ce){for(var L=0,P=ce.length,F=ce[0],H=[F[0],",",F[1]];++L<P;)H.push("V",(F=ce[L])[1],"H",F[0]);return H.join("")}function Co(ce){for(var L=0,P=ce.length,F=ce[0],H=[F[0],",",F[1]];++L<P;)H.push("H",(F=ce[L])[0],"V",F[1]);return H.join("")}function oa(ce,L){if(L.length<1||ce.length!=L.length&&ce.length!=L.length+2)return bo(ce);var P=ce.length!=L.length,F="",H=ce[0],oe=ce[1],fe=L[0],ge=fe,xe=1;if(P&&(F+="Q"+(oe[0]-2*fe[0]/3)+","+(oe[1]-2*fe[1]/3)+","+oe[0]+","+oe[1],H=ce[1],xe=2),L.length>1){oe=ce[xe],xe++,F+="C"+(H[0]+fe[0])+","+(H[1]+fe[1])+","+(oe[0]-(ge=L[1])[0])+","+(oe[1]-ge[1])+","+oe[0]+","+oe[1];for(var Ce=2;Ce<L.length;Ce++,xe++)F+="S"+((oe=ce[xe])[0]-(ge=L[Ce])[0])+","+(oe[1]-ge[1])+","+oe[0]+","+oe[1]}if(P){var Ge=ce[xe];F+="Q"+(oe[0]+2*ge[0]/3)+","+(oe[1]+2*ge[1]/3)+","+Ge[0]+","+Ge[1]}return F}function Pa(ce,L){for(var P,F=[],H=(1-L)/2,oe=ce[0],fe=ce[1],ge=1,xe=ce.length;++ge<xe;)P=oe,oe=fe,F.push([H*((fe=ce[ge])[0]-P[0]),H*(fe[1]-P[1])]);return F}function eo(ce){if(ce.length<3)return bo(ce);var L=1,P=ce.length,F=ce[0],H=F[0],oe=F[1],fe=[H,H,H,(F=ce[1])[0]],ge=[oe,oe,oe,F[1]],xe=[H,",",oe,"L",ga(fo,fe),",",ga(fo,ge)];for(ce.push(ce[P-1]);++L<=P;)F=ce[L],fe.shift(),fe.push(F[0]),ge.shift(),ge.push(F[1]),ps(xe,fe,ge);return ce.pop(),xe.push("L",F),xe.join("")}function ga(ce,L){return ce[0]*L[0]+ce[1]*L[1]+ce[2]*L[2]+ce[3]*L[3]}Vo.forEach(function(ce,L){L.key=ce,L.closed=/-closed$/.test(ce)});var mo=[0,2/3,1/3,0],ma=[0,1/3,2/3,0],fo=[0,1/6,2/3,1/6];function ps(ce,L,P){ce.push("C",ga(mo,L),",",ga(mo,P),",",ga(ma,L),",",ga(ma,P),",",ga(fo,L),",",ga(fo,P))}function gs(ce,L){return(L[1]-ce[1])/(L[0]-ce[0])}function Us(ce){for(var L,P,F,H=-1,oe=ce.length;++H<oe;)P=(L=ce[H])[0],F=L[1]-Ze,L[0]=P*Math.cos(F),L[1]=P*Math.sin(F);return ce}function Ga(ce){var L=cn,P=cn,F=0,H=fn,oe=Qa,fe=bo,ge=fe.key,xe=fe,Ce="L",Ge=.7;function Xe(ot){var Mt,It,Ct,Lt=[],Tt=[],Ht=[],jt=-1,Wt=ot.length,cr=Er(L),br=Er(F),zr=L===P?function(){return It}:Er(P),Or=F===H?function(){return Ct}:Er(H);function sn(){Lt.push("M",fe(ce(Ht),Ge),Ce,xe(ce(Tt.reverse()),Ge),"Z")}for(;++jt<Wt;)oe.call(this,Mt=ot[jt],jt)?(Tt.push([It=+cr.call(this,Mt,jt),Ct=+br.call(this,Mt,jt)]),Ht.push([+zr.call(this,Mt,jt),+Or.call(this,Mt,jt)])):Tt.length&&(sn(),Tt=[],Ht=[]);return Tt.length&&sn(),Lt.length?Lt.join(""):null}return Xe.x=function(ot){return arguments.length?(L=P=ot,Xe):P},Xe.x0=function(ot){return arguments.length?(L=ot,Xe):L},Xe.x1=function(ot){return arguments.length?(P=ot,Xe):P},Xe.y=function(ot){return arguments.length?(F=H=ot,Xe):H},Xe.y0=function(ot){return arguments.length?(F=ot,Xe):F},Xe.y1=function(ot){return arguments.length?(H=ot,Xe):H},Xe.defined=function(ot){return arguments.length?(oe=ot,Xe):oe},Xe.interpolate=function(ot){return arguments.length?(ge="function"==typeof ot?fe=ot:(fe=Vo.get(ot)||bo).key,xe=fe.reverse||fe,Ce=fe.closed?"M":"L",Xe):ge},Xe.tension=function(ot){return arguments.length?(Ge=ot,Xe):Ge},Xe}function Gs(ce){return ce.source}function Ja(ce){return ce.target}function ls(ce){return ce.radius}function bi(ce){return[ce.x,ce.y]}function Li(ce){return function(){var L=ce.apply(this,arguments),P=L[0],F=L[1]-Ze;return[P*Math.cos(F),P*Math.sin(F)]}}function Ds(){return 64}function Hs(){return"circle"}function ms(ce){var L=Math.sqrt(ce/Xt);return"M0,"+L+"A"+L+","+L+" 0 1,1 0,"+-L+"A"+L+","+L+" 0 1,1 0,"+L+"Z"}p.svg.line.radial=function(){var ce=$o(Us);return ce.radius=ce.x,delete ce.x,ce.angle=ce.y,delete ce.y,ce},Sa.reverse=Co,Co.reverse=Sa,p.svg.area=function(){return Ga(C)},p.svg.area.radial=function(){var ce=Ga(Us);return ce.radius=ce.x,delete ce.x,ce.innerRadius=ce.x0,delete ce.x0,ce.outerRadius=ce.x1,delete ce.x1,ce.angle=ce.y,delete ce.y,ce.startAngle=ce.y0,delete ce.y0,ce.endAngle=ce.y1,delete ce.y1,ce},p.svg.chord=function(){var ce=Gs,L=Ja,P=ls,F=Wi,H=Fi;function oe(Ce,Ge){var Xe,ot,Mt=fe(this,ce,Ce,Ge),It=fe(this,L,Ce,Ge);return"M"+Mt.p0+ge(Mt.r,Mt.p1,Mt.a1-Mt.a0)+((Xe=Mt).a0==(ot=It).a0&&Xe.a1==ot.a1?xe(0,0,0,Mt.p0):xe(0,0,0,It.p0)+ge(It.r,It.p1,It.a1-It.a0)+xe(0,0,0,Mt.p0))+"Z"}function fe(Ce,Ge,Xe,ot){var Mt=Ge.call(Ce,Xe,ot),It=P.call(Ce,Mt,ot),Ct=F.call(Ce,Mt,ot)-Ze,Lt=H.call(Ce,Mt,ot)-Ze;return{r:It,a0:Ct,a1:Lt,p0:[It*Math.cos(Ct),It*Math.sin(Ct)],p1:[It*Math.cos(Lt),It*Math.sin(Lt)]}}function ge(Ce,Ge,Xe){return"A"+Ce+","+Ce+" 0 "+ +(Xe>Xt)+",1 "+Ge}function xe(Ce,Ge,Xe,ot){return"Q 0,0 "+ot}return oe.radius=function(Ce){return arguments.length?(P=Er(Ce),oe):P},oe.source=function(Ce){return arguments.length?(ce=Er(Ce),oe):ce},oe.target=function(Ce){return arguments.length?(L=Er(Ce),oe):L},oe.startAngle=function(Ce){return arguments.length?(F=Er(Ce),oe):F},oe.endAngle=function(Ce){return arguments.length?(H=Er(Ce),oe):H},oe},p.svg.diagonal=function(){var ce=Gs,L=Ja,P=bi;function F(H,oe){var fe=ce.call(this,H,oe),ge=L.call(this,H,oe),xe=(fe.y+ge.y)/2,Ce=[fe,{x:fe.x,y:xe},{x:ge.x,y:xe},ge];return"M"+(Ce=Ce.map(P))[0]+"C"+Ce[1]+" "+Ce[2]+" "+Ce[3]}return F.source=function(H){return arguments.length?(ce=Er(H),F):ce},F.target=function(H){return arguments.length?(L=Er(H),F):L},F.projection=function(H){return arguments.length?(P=H,F):P},F},p.svg.diagonal.radial=function(){var ce=p.svg.diagonal(),L=bi,P=ce.projection;return ce.projection=function(F){return arguments.length?P(Li(L=F)):L},ce},p.svg.symbol=function(){var ce=Hs,L=Ds;function P(F,H){return(Oo.get(ce.call(this,F,H))||ms)(L.call(this,F,H))}return P.type=function(F){return arguments.length?(ce=Er(F),P):ce},P.size=function(F){return arguments.length?(L=Er(F),P):L},P};var Oo=p.map({circle:ms,cross:function(ce){var L=Math.sqrt(ce/5)/2;return"M"+-3*L+","+-L+"H"+-L+"V"+-3*L+"H"+L+"V"+-L+"H"+3*L+"V"+L+"H"+L+"V"+3*L+"H"+-L+"V"+L+"H"+-3*L+"Z"},diamond:function(ce){var L=Math.sqrt(ce/(2*Zs)),P=L*Zs;return"M0,"+-L+"L"+P+",0 0,"+L+" "+-P+",0Z"},square:function(ce){var L=Math.sqrt(ce)/2;return"M"+-L+","+-L+"L"+L+","+-L+" "+L+","+L+" "+-L+","+L+"Z"},"triangle-down":function(ce){var L=Math.sqrt(ce/Zo),P=L*Zo/2;return"M0,"+P+"L"+L+","+-P+" "+-L+","+-P+"Z"},"triangle-up":function(ce){var L=Math.sqrt(ce/Zo),P=L*Zo/2;return"M0,"+-P+"L"+L+","+P+" "+-L+","+P+"Z"}});p.svg.symbolTypes=Oo.keys();var Zo=Math.sqrt(3),Zs=Math.tan(30*Ne);$.transition=function(ce){for(var L,P,F=vs||++As,H=Is(ce),oe=[],fe=cs||{time:Date.now(),ease:bs,delay:0,duration:250},ge=-1,xe=this.length;++ge<xe;){oe.push(L=[]);for(var Ce=this[ge],Ge=-1,Xe=Ce.length;++Ge<Xe;)(P=Ce[Ge])&&Ts(P,Ge,H,F,fe),L.push(P)}return ha(oe,H,F)},$.interrupt=function(ce){return this.each(null==ce?js:sa(Is(ce)))};var js=sa(Is());function sa(ce){return function(){var L,P,F;(L=this[ce])&&(F=L[P=L.active])&&(F.timer.c=null,F.timer.t=NaN,--L.count?delete L[P]:delete this[ce],L.active+=.5,F.event&&F.event.interrupt.call(this,this.__data__,F.index))}}function ha(ce,L,P){return N(ce,ja),ce.namespace=L,ce.id=P,ce}var vs,cs,ja=[],As=0;function qs(ce,L,P,F){var H=ce.id,oe=ce.namespace;return ze(ce,"function"==typeof P?function(fe,ge,xe){fe[oe][H].tween.set(L,F(P.call(fe,fe.__data__,ge,xe)))}:(P=F(P),function(fe){fe[oe][H].tween.set(L,P)}))}function Os(ce){return null==ce&&(ce=""),function(){this.textContent=ce}}function Is(ce){return null==ce?"__transition__":"__transition_"+ce+"__"}function Ts(ce,L,P,F,H){var oe,fe,ge,xe,Ce,Ge=ce[P]||(ce[P]={active:0,count:0}),Xe=Ge[F];function ot(It){var Ct=Ge.active,Lt=Ge[Ct];for(var Tt in Lt&&(Lt.timer.c=null,Lt.timer.t=NaN,--Ge.count,delete Ge[Ct],Lt.event&&Lt.event.interrupt.call(ce,ce.__data__,Lt.index)),Ge)if(+Tt<F){var Ht=Ge[Tt];Ht.timer.c=null,Ht.timer.t=NaN,--Ge.count,delete Ge[Tt]}fe.c=Mt,qr(function(){return fe.c&&Mt(It||1)&&(fe.c=null,fe.t=NaN),1},0,oe),Ge.active=F,Xe.event&&Xe.event.start.call(ce,ce.__data__,L),Ce=[],Xe.tween.forEach(function(jt,Wt){(Wt=Wt.call(ce,ce.__data__,L))&&Ce.push(Wt)}),xe=Xe.ease,ge=Xe.duration}function Mt(It){for(var Ct=It/ge,Lt=xe(Ct),Tt=Ce.length;Tt>0;)Ce[--Tt].call(ce,Lt);if(Ct>=1)return Xe.event&&Xe.event.end.call(ce,ce.__data__,L),--Ge.count?delete Ge[F]:delete ce[P],1}Xe||(fe=qr(function(It){var Ct=Xe.delay;if(fe.t=Ct+oe,Ct<=It)return ot(It-Ct);fe.c=ot},0,oe=H.time),Xe=Ge[F]={tween:new w,time:oe,timer:fe,delay:H.delay,duration:H.duration,ease:H.ease,index:L},H=null,++Ge.count)}ja.call=$.call,ja.empty=$.empty,ja.node=$.node,ja.size=$.size,p.transition=function(ce,L){return ce&&ce.transition?vs?ce.transition(L):ce:p.selection().transition(ce)},p.transition.prototype=ja,ja.select=function(ce){var L,P,F,H=this.id,oe=this.namespace,fe=[];ce=re(ce);for(var ge=-1,xe=this.length;++ge<xe;){fe.push(L=[]);for(var Ce=this[ge],Ge=-1,Xe=Ce.length;++Ge<Xe;)(F=Ce[Ge])&&(P=ce.call(F,F.__data__,Ge,ge))?("__data__"in F&&(P.__data__=F.__data__),Ts(P,Ge,oe,H,F[oe][H]),L.push(P)):L.push(null)}return ha(fe,oe,H)},ja.selectAll=function(ce){var L,P,F,H,oe,fe=this.id,ge=this.namespace,xe=[];ce=ne(ce);for(var Ce=-1,Ge=this.length;++Ce<Ge;)for(var Xe=this[Ce],ot=-1,Mt=Xe.length;++ot<Mt;)if(F=Xe[ot]){oe=F[ge][fe],P=ce.call(F,F.__data__,ot,Ce),xe.push(L=[]);for(var It=-1,Ct=P.length;++It<Ct;)(H=P[It])&&Ts(H,It,ge,fe,oe),L.push(H)}return ha(xe,ge,fe)},ja.filter=function(ce){var L,P,F=[];"function"!=typeof ce&&(ce=Se(ce));for(var H=0,oe=this.length;H<oe;H++){F.push(L=[]);for(var fe,ge=0,xe=(fe=this[H]).length;ge<xe;ge++)(P=fe[ge])&&ce.call(P,P.__data__,ge,H)&&L.push(P)}return ha(F,this.namespace,this.id)},ja.tween=function(ce,L){var P=this.id,F=this.namespace;return arguments.length<2?this.node()[F][P].tween.get(ce):ze(this,null==L?function(H){H[F][P].tween.remove(ce)}:function(H){H[F][P].tween.set(ce,L)})},ja.attr=function(ce,L){if(arguments.length<2){for(L in ce)this.attr(L,ce[L]);return this}var P="transform"==ce?Wo:hn,F=p.ns.qualify(ce);function H(){this.removeAttribute(F)}function oe(){this.removeAttributeNS(F.space,F.local)}function fe(xe){return null==xe?H:(xe+="",function(){var Ce,Ge=this.getAttribute(F);return Ge!==xe&&(Ce=P(Ge,xe),function(Xe){this.setAttribute(F,Ce(Xe))})})}function ge(xe){return null==xe?oe:(xe+="",function(){var Ce,Ge=this.getAttributeNS(F.space,F.local);return Ge!==xe&&(Ce=P(Ge,xe),function(Xe){this.setAttributeNS(F.space,F.local,Ce(Xe))})})}return qs(this,"attr."+ce,L,F.local?ge:fe)},ja.attrTween=function(ce,L){var P=p.ns.qualify(ce);return this.tween("attr."+ce,P.local?function(F,H){var oe=L.call(this,F,H,this.getAttributeNS(P.space,P.local));return oe&&function(fe){this.setAttributeNS(P.space,P.local,oe(fe))}}:function(F,H){var oe=L.call(this,F,H,this.getAttribute(P));return oe&&function(fe){this.setAttribute(P,oe(fe))}})},ja.style=function(ce,L,P){var F=arguments.length;if(F<3){if("string"!=typeof ce){for(P in F<2&&(L=""),ce)this.style(P,ce[P],L);return this}P=""}function H(){this.style.removeProperty(ce)}function oe(fe){return null==fe?H:(fe+="",function(){var ge,xe=n(this).getComputedStyle(this,null).getPropertyValue(ce);return xe!==fe&&(ge=hn(xe,fe),function(Ce){this.style.setProperty(ce,ge(Ce),P)})})}return qs(this,"style."+ce,L,oe)},ja.styleTween=function(ce,L,P){function F(H,oe){var fe=L.call(this,H,oe,n(this).getComputedStyle(this,null).getPropertyValue(ce));return fe&&function(ge){this.style.setProperty(ce,fe(ge),P)}}return arguments.length<3&&(P=""),this.tween("style."+ce,F)},ja.text=function(ce){return qs(this,"text",ce,Os)},ja.remove=function(){var ce=this.namespace;return this.each("end.transition",function(){var L;this[ce].count<2&&(L=this.parentNode)&&L.removeChild(this)})},ja.ease=function(ce){var L=this.id,P=this.namespace;return arguments.length<1?this.node()[P][L].ease:("function"!=typeof ce&&(ce=p.ease.apply(p,arguments)),ze(this,function(F){F[P][L].ease=ce}))},ja.delay=function(ce){var L=this.id,P=this.namespace;return arguments.length<1?this.node()[P][L].delay:ze(this,"function"==typeof ce?function(F,H,oe){F[P][L].delay=+ce.call(F,F.__data__,H,oe)}:(ce=+ce,function(F){F[P][L].delay=ce}))},ja.duration=function(ce){var L=this.id,P=this.namespace;return arguments.length<1?this.node()[P][L].duration:ze(this,"function"==typeof ce?function(F,H,oe){F[P][L].duration=Math.max(1,ce.call(F,F.__data__,H,oe))}:(ce=Math.max(1,ce),function(F){F[P][L].duration=ce}))},ja.each=function(ce,L){var P=this.id,F=this.namespace;if(arguments.length<2){var H=cs,oe=vs;try{vs=P,ze(this,function(fe,ge,xe){cs=fe[F][P],ce.call(fe,fe.__data__,ge,xe)})}finally{cs=H,vs=oe}}else ze(this,function(fe){var ge=fe[F][P];(ge.event||(ge.event=p.dispatch("start","end","interrupt"))).on(ce,L)});return this},ja.transition=function(){for(var ce,L,P,F=this.id,H=++As,oe=this.namespace,fe=[],ge=0,xe=this.length;ge<xe;ge++){fe.push(ce=[]);for(var Ce,Ge=0,Xe=(Ce=this[ge]).length;Ge<Xe;Ge++)(L=Ce[Ge])&&Ts(L,Ge,oe,H,{time:(P=L[oe][F]).time,ease:P.ease,delay:P.delay+P.duration,duration:P.duration}),ce.push(L)}return ha(fe,oe,H)},p.svg.axis=function(){var ce,L=p.scale.linear(),P=Xs,F=6,H=6,oe=3,fe=[10],ge=null;function xe(Ce){Ce.each(function(){var Ge,Xe=p.select(this),ot=this.__chart__||L,Mt=this.__chart__=L.copy(),It=null==ge?Mt.ticks?Mt.ticks.apply(Mt,fe):Mt.domain():ge,Ct=null==ce?Mt.tickFormat?Mt.tickFormat.apply(Mt,fe):C:ce,Lt=Xe.selectAll(".tick").data(It,Mt),Tt=Lt.enter().insert("g",".domain").attr("class","tick").style("opacity",St),Ht=p.transition(Lt.exit()).style("opacity",St).remove(),jt=p.transition(Lt.order()).style("opacity",1),Wt=Math.max(F,0)+oe,cr=_n(Mt),br=Xe.selectAll(".domain").data([0]),zr=(br.enter().append("path").attr("class","domain"),p.transition(br));Tt.append("line"),Tt.append("text");var Or,sn,on,Mn,xn=Tt.select("line"),Kn=jt.select("line"),ai=Lt.select("text").text(Ct),_i=Tt.select("text"),Jr=jt.select("text"),zn="top"===P||"left"===P?-1:1;if("bottom"===P||"top"===P?(Ge=Ms,Or="x",on="y",sn="x2",Mn="y2",ai.attr("dy",zn<0?"0em":".71em").style("text-anchor","middle"),zr.attr("d","M"+cr[0]+","+zn*H+"V0H"+cr[1]+"V"+zn*H)):(Ge=al,Or="y",on="x",sn="y2",Mn="x2",ai.attr("dy",".32em").style("text-anchor",zn<0?"end":"start"),zr.attr("d","M"+zn*H+","+cr[0]+"H0V"+cr[1]+"H"+zn*H)),xn.attr(Mn,zn*F),_i.attr(on,zn*Wt),Kn.attr(sn,0).attr(Mn,zn*F),Jr.attr(Or,0).attr(on,zn*Wt),Mt.rangeBand){var oi=Mt,ni=oi.rangeBand()/2;ot=Mt=function(pi){return oi(pi)+ni}}else ot.rangeBand?ot=Mt:Ht.call(Ge,Mt,ot);Tt.call(Ge,ot,Mt),jt.call(Ge,Mt,Mt)})}return xe.scale=function(Ce){return arguments.length?(L=Ce,xe):L},xe.orient=function(Ce){return arguments.length?(P=Ce in il?Ce+"":Xs,xe):P},xe.ticks=function(){return arguments.length?(fe=u(arguments),xe):fe},xe.tickValues=function(Ce){return arguments.length?(ge=Ce,xe):ge},xe.tickFormat=function(Ce){return arguments.length?(ce=Ce,xe):ce},xe.tickSize=function(Ce){var Ge=arguments.length;return Ge?(F=+Ce,H=+arguments[Ge-1],xe):F},xe.innerTickSize=function(Ce){return arguments.length?(F=+Ce,xe):F},xe.outerTickSize=function(Ce){return arguments.length?(H=+Ce,xe):H},xe.tickPadding=function(Ce){return arguments.length?(oe=+Ce,xe):oe},xe.tickSubdivide=function(){return arguments.length&&xe},xe};var Xs="bottom",il={top:1,right:1,bottom:1,left:1};function Ms(ce,L,P){ce.attr("transform",function(F){var H=L(F);return"translate("+(isFinite(H)?H:P(F))+",0)"})}function al(ce,L,P){ce.attr("transform",function(F){var H=L(F);return"translate(0,"+(isFinite(H)?H:P(F))+")"})}p.svg.brush=function(){var ce,L,P=te(Ge,"brushstart","brush","brushend"),F=null,H=null,oe=[0,0],fe=[0,0],ge=!0,xe=!0,Ce=ho[0];function Ge(Ct){Ct.each(function(){var Lt=p.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",It).on("touchstart.brush",It),Tt=Lt.selectAll(".background").data([0]);Tt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Lt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Ht=Lt.selectAll(".resize").data(Ce,C);Ht.exit().remove(),Ht.enter().append("g").attr("class",function(br){return"resize "+br}).style("cursor",function(br){return Vs[br]}).append("rect").attr("x",function(br){return/[ew]$/.test(br)?-3:null}).attr("y",function(br){return/^[ns]/.test(br)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Ht.style("display",Ge.empty()?"none":null);var jt,Wt=p.transition(Lt),cr=p.transition(Tt);F&&(jt=_n(F),cr.attr("x",jt[0]).attr("width",jt[1]-jt[0]),ot(Wt)),H&&(jt=_n(H),cr.attr("y",jt[0]).attr("height",jt[1]-jt[0]),Mt(Wt)),Xe(Wt)})}function Xe(Ct){Ct.selectAll(".resize").attr("transform",function(Lt){return"translate("+oe[+/e$/.test(Lt)]+","+fe[+/^s/.test(Lt)]+")"})}function ot(Ct){Ct.select(".extent").attr("x",oe[0]),Ct.selectAll(".extent,.n>rect,.s>rect").attr("width",oe[1]-oe[0])}function Mt(Ct){Ct.select(".extent").attr("y",fe[0]),Ct.selectAll(".extent,.e>rect,.w>rect").attr("height",fe[1]-fe[0])}function It(){var Ct,Lt,Tt=this,Ht=p.select(p.event.target),jt=P.of(Tt,arguments),Wt=p.select(Tt),cr=Ht.datum(),br=!/^(n|s)$/.test(cr)&&F,zr=!/^(e|w)$/.test(cr)&&H,Or=Ht.classed("extent"),sn=Rt(Tt),on=p.mouse(Tt),Mn=p.select(n(Tt)).on("keydown.brush",ai).on("keyup.brush",_i);if(p.event.changedTouches?Mn.on("touchmove.brush",Jr).on("touchend.brush",oi):Mn.on("mousemove.brush",Jr).on("mouseup.brush",oi),Wt.interrupt().selectAll("*").interrupt(),Or)on[0]=oe[0]-on[0],on[1]=fe[0]-on[1];else if(cr){var xn=+/w$/.test(cr),Kn=+/^n/.test(cr);Lt=[oe[1-xn]-on[0],fe[1-Kn]-on[1]],on[0]=oe[xn],on[1]=fe[Kn]}else p.event.altKey&&(Ct=on.slice());function ai(){32==p.event.keyCode&&(Or||(Ct=null,on[0]-=oe[1],on[1]-=fe[1],Or=2),q())}function _i(){32==p.event.keyCode&&2==Or&&(on[0]+=oe[1],on[1]+=fe[1],Or=0,q())}function Jr(){var ni=p.mouse(Tt),pi=!1;Lt&&(ni[0]+=Lt[0],ni[1]+=Lt[1]),Or||(p.event.altKey?(Ct||(Ct=[(oe[0]+oe[1])/2,(fe[0]+fe[1])/2]),on[0]=oe[+(ni[0]<Ct[0])],on[1]=fe[+(ni[1]<Ct[1])]):Ct=null),br&&zn(ni,F,0)&&(ot(Wt),pi=!0),zr&&zn(ni,H,1)&&(Mt(Wt),pi=!0),pi&&(Xe(Wt),jt({type:"brush",mode:Or?"move":"resize"}))}function zn(ni,pi,Ai){var zi,si,Di=_n(pi),Ci=Di[0],ji=Di[1],Oi=on[Ai],Gi=Ai?fe:oe,ta=Gi[1]-Gi[0];if(Or&&(Ci-=Oi,ji-=ta+Oi),zi=(Ai?xe:ge)?Math.max(Ci,Math.min(ji,ni[Ai])):ni[Ai],Or?si=(zi+=Oi)+ta:(Ct&&(Oi=Math.max(Ci,Math.min(ji,2*Ct[Ai]-zi))),Oi<zi?(si=zi,zi=Oi):si=Oi),Gi[0]!=zi||Gi[1]!=si)return Ai?L=null:ce=null,Gi[0]=zi,Gi[1]=si,!0}function oi(){Jr(),Wt.style("pointer-events","all").selectAll(".resize").style("display",Ge.empty()?"none":null),p.select("body").style("cursor",null),Mn.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),sn(),jt({type:"brushend"})}Wt.style("pointer-events","none").selectAll(".resize").style("display",null),p.select("body").style("cursor",Ht.style("cursor")),jt({type:"brushstart"}),Jr()}return Ge.event=function(Ct){Ct.each(function(){var Lt=P.of(this,arguments),Tt={x:oe,y:fe,i:ce,j:L},Ht=this.__chart__||Tt;this.__chart__=Tt,vs?p.select(this).transition().each("start.brush",function(){ce=Ht.i,L=Ht.j,oe=Ht.x,fe=Ht.y,Lt({type:"brushstart"})}).tween("brush:brush",function(){var jt=ri(oe,Tt.x),Wt=ri(fe,Tt.y);return ce=L=null,function(cr){oe=Tt.x=jt(cr),fe=Tt.y=Wt(cr),Lt({type:"brush",mode:"resize"})}}).each("end.brush",function(){ce=Tt.i,L=Tt.j,Lt({type:"brush",mode:"resize"}),Lt({type:"brushend"})}):(Lt({type:"brushstart"}),Lt({type:"brush",mode:"resize"}),Lt({type:"brushend"}))})},Ge.x=function(Ct){return arguments.length?(Ce=ho[!(F=Ct)<<1|!H],Ge):F},Ge.y=function(Ct){return arguments.length?(Ce=ho[!F<<1|!(H=Ct)],Ge):H},Ge.clamp=function(Ct){return arguments.length?(F&&H?(ge=!!Ct[0],xe=!!Ct[1]):F?ge=!!Ct:H&&(xe=!!Ct),Ge):F&&H?[ge,xe]:F?ge:H?xe:null},Ge.extent=function(Ct){var Lt,Tt,Ht,jt,Wt;return arguments.length?(F&&(Lt=Ct[0],Tt=Ct[1],H&&(Lt=Lt[0],Tt=Tt[0]),ce=[Lt,Tt],F.invert&&(Lt=F(Lt),Tt=F(Tt)),Tt<Lt&&(Wt=Lt,Lt=Tt,Tt=Wt),Lt==oe[0]&&Tt==oe[1]||(oe=[Lt,Tt])),H&&(Ht=Ct[0],jt=Ct[1],F&&(Ht=Ht[1],jt=jt[1]),L=[Ht,jt],H.invert&&(Ht=H(Ht),jt=H(jt)),jt<Ht&&(Wt=Ht,Ht=jt,jt=Wt),Ht==fe[0]&&jt==fe[1]||(fe=[Ht,jt])),Ge):(F&&(ce?(Lt=ce[0],Tt=ce[1]):(Lt=oe[0],Tt=oe[1],F.invert&&(Lt=F.invert(Lt),Tt=F.invert(Tt)),Tt<Lt&&(Wt=Lt,Lt=Tt,Tt=Wt))),H&&(L?(Ht=L[0],jt=L[1]):(Ht=fe[0],jt=fe[1],H.invert&&(Ht=H.invert(Ht),jt=H.invert(jt)),jt<Ht&&(Wt=Ht,Ht=jt,jt=Wt))),F&&H?[[Lt,Ht],[Tt,jt]]:F?[Lt,Tt]:H&&[Ht,jt])},Ge.clear=function(){return Ge.empty()||(oe=[0,0],fe=[0,0],ce=L=null),Ge},Ge.empty=function(){return!!F&&oe[0]==oe[1]||!!H&&fe[0]==fe[1]},p.rebind(Ge,P,"on")};var Vs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ho=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function hl(ce){return JSON.parse(ce.responseText)}function kl(ce){var L=y.createRange();return L.selectNode(y.body),L.createContextualFragment(ce.responseText)}p.text=Zr(function(ce){return ce.responseText}),p.json=function(ce,L){return an(ce,"application/json",hl,L)},p.html=function(ce,L){return an(ce,"text/html",kl,L)},p.xml=Zr(function(ce){return ce.responseXML}),"object"==typeof Q&&Q.exports?Q.exports=p:this.d3=p}).apply(self)},{}],59:[function(x,Q,K){"use strict";Q.exports=x("./quad")},{"./quad":60}],60:[function(x,Q,K){"use strict";var p=x("binary-search-bounds"),v=x("clamp"),u=x("parse-rect"),y=x("array-bounds"),e=x("pick-by-alias"),n=x("defined"),t=x("flatten-vertex-data"),a=x("is-obj"),r=x("dtype"),f=x("math-log2");function s(i,l){for(var c=l[0],h=l[1],m=1/(l[2]-c),d=1/(l[3]-h),o=new Array(i.length),b=0,g=i.length/2;b<g;b++)o[2*b]=v((i[2*b]-c)*m,0,1),o[2*b+1]=v((i[2*b+1]-h)*d,0,1);return o}Q.exports=function(i,l){l||(l={}),i=t(i,"float64"),l=e(l,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=n(l.maxDepth,255),h=n(l.bounds,y(i,2));h[0]===h[2]&&h[2]++,h[1]===h[3]&&h[3]++;var m,d=s(i,h),o=i.length>>>1;l.dtype||(l.dtype="array"),"string"==typeof l.dtype?m=new(r(l.dtype))(o):l.dtype&&(m=l.dtype,Array.isArray(m)&&(m.length=o));for(var b=0;b<o;++b)m[b]=b;var g=[],w=[],_=[],A=[];!function B(U,G,X,Z,q,W){if(!Z.length)return null;var te=g[q]||(g[q]=[]),R=_[q]||(_[q]=[]),N=w[q]||(w[q]=[]),V=te.length;if(++q>c||W>1073741824){for(var ee=0;ee<Z.length;ee++)te.push(Z[ee]),R.push(W),N.push(null,null,null,null);return V}if(te.push(Z[0]),R.push(W),Z.length<=1)return N.push(null,null,null,null),V;for(var j=.5*X,J=U+j,$=G+j,re=[],ne=[],se=[],ie=[],ue=1,le=Z.length;ue<le;ue++){var de=Z[ue],_e=d[2*de+1];d[2*de]<J?_e<$?re.push(de):ne.push(de):_e<$?se.push(de):ie.push(de)}return N.push(B(U,G,j,re,q,W<<=2),B(U,$,j,ne,q,W+1),B(J,G,j,se,q,W+2),B(J,$,j,ie,q,W+3)),V}(0,0,1,m,0,1);for(var T=0,E=0;E<g.length;E++){var k=g[E];if(m.set)m.set(k,T);else for(var O=0,D=k.length;O<D;O++)m[O+T]=k[O];var S=T+g[E].length;A[E]=[T,S],T=S}return m.range=function(){for(var B,U=[],G=arguments.length;G--;)U[G]=arguments[G];if(a(U[U.length-1])){var X=U.pop();U.length||null==X.x&&null==X.l&&null==X.left||(U=[X],B={}),B=e(X,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else B={};U.length||(U=h);var ne,Z=u.apply(void 0,U),q=[Math.min(Z.x,Z.x+Z.width),Math.min(Z.y,Z.y+Z.height),Math.max(Z.x,Z.x+Z.width),Math.max(Z.y,Z.y+Z.height)],W=q[0],te=q[1],R=q[2],N=q[3],V=s([W,te,R,N],h),ee=V[0],j=V[1],J=V[2],$=V[3],re=n(B.level,g.length);if(null!=B.d&&("number"==typeof B.d?ne=[B.d,B.d]:B.d.length&&(ne=B.d),re=Math.min(Math.max(Math.ceil(-f(Math.abs(ne[0])/(h[2]-h[0]))),Math.ceil(-f(Math.abs(ne[1])/(h[3]-h[1])))),re)),re=Math.min(re,g.length),B.lod)return C(ee,j,J,$,re);var se=[];function ie(le,de,ve,_e,be,Te){if(null!==be&&null!==Te&&!(ee>le+ve||j>de+ve||J<le||$<de||_e>=re||be===Te)){var he=g[_e];void 0===Te&&(Te=he.length);for(var me=be;me<Te;me++){var Ae=he[me],we=i[2*Ae],Se=i[2*Ae+1];we>=W&&we<=R&&Se>=te&&Se<=N&&se.push(Ae)}var Pe=w[_e],ze=Pe[4*be+0],He=Pe[4*be+1],tt=Pe[4*be+2],Oe=Pe[4*be+3],Be=ue(Pe,be+1),Je=.5*ve,Ye=_e+1;ie(le,de,Je,Ye,ze,He||tt||Oe||Be),ie(le,de+Je,Je,Ye,He,tt||Oe||Be),ie(le+Je,de,Je,Ye,tt,Oe||Be),ie(le+Je,de+Je,Je,Ye,Oe,Be)}}function ue(le,de){for(var ve=null,_e=0;null===ve;)if(ve=le[4*de+_e],++_e>le.length)return null;return ve}return ie(0,0,1,0,0,1),se},m;function C(B,U,G,X,Z){for(var q=[],W=0;W<Z;W++){var te=_[W],R=A[W][0],N=z(B,U,W),V=z(G,X,W),ee=p.ge(te,N),j=p.gt(te,V,ee,te.length-1);q[W]=[ee+R,j+R]}return q}function z(B,U,G){for(var X=1,Z=.5,q=.5,W=.5,te=0;te<G;te++)X<<=2,X+=B<Z?U<q?0:1:U<q?2:3,W*=.5,Z+=B<Z?-W:W,q+=U<q?-W:W;return X}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(x,Q,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0});var p=x("@turf/meta");function v(e){var n=0;if(e&&e.length>0){n+=Math.abs(u(e[0]));for(var t=1;t<e.length;t++)n-=Math.abs(u(e[t]))}return n}function u(e){var n,t,a,r,f,s,i=0,l=e.length;if(l>2){for(s=0;s<l;s++)s===l-2?(a=l-2,r=l-1,f=0):s===l-1?(a=l-1,r=0,f=1):(a=s,r=s+1,f=s+2),n=e[a],t=e[r],i+=(y(e[f][0])-y(n[0]))*Math.sin(y(t[1]));i=6378137*i*6378137/2}return i}function y(e){return e*Math.PI/180}K.default=function(e){return p.geomReduce(e,function(n,t){return n+function(a){var r,f=0;switch(a.type){case"Polygon":return v(a.coordinates);case"MultiPolygon":for(r=0;r<a.coordinates.length;r++)f+=v(a.coordinates[r]);return f;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},{"@turf/meta":63}],62:[function(x,Q,K){"use strict";function p(l,c,h){void 0===h&&(h={});var m={type:"Feature"};return(0===h.id||h.id)&&(m.id=h.id),h.bbox&&(m.bbox=h.bbox),m.properties=c||{},m.geometry=l,m}function v(l,c,h){if(void 0===h&&(h={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!i(l[0])||!i(l[1]))throw new Error("coordinates must contain numbers");return p({type:"Point",coordinates:l},c,h)}function u(l,c,h){void 0===h&&(h={});for(var m=0,d=l;m<d.length;m++){var o=d[m];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var b=0;b<o[o.length-1].length;b++)if(o[o.length-1][b]!==o[0][b])throw new Error("First and last Position are not equivalent.")}return p({type:"Polygon",coordinates:l},c,h)}function y(l,c,h){if(void 0===h&&(h={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");return p({type:"LineString",coordinates:l},c,h)}function e(l,c){void 0===c&&(c={});var h={type:"FeatureCollection"};return c.id&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.features=l,h}function n(l,c,h){return void 0===h&&(h={}),p({type:"MultiLineString",coordinates:l},c,h)}function t(l,c,h){return void 0===h&&(h={}),p({type:"MultiPoint",coordinates:l},c,h)}function a(l,c,h){return void 0===h&&(h={}),p({type:"MultiPolygon",coordinates:l},c,h)}function r(l,c){void 0===c&&(c="kilometers");var h=K.factors[c];if(!h)throw new Error(c+" units is invalid");return l*h}function f(l,c){void 0===c&&(c="kilometers");var h=K.factors[c];if(!h)throw new Error(c+" units is invalid");return l/h}function s(l){return l%(2*Math.PI)*180/Math.PI}function i(l){return!isNaN(l)&&null!==l&&!Array.isArray(l)}Object.defineProperty(K,"__esModule",{value:!0}),K.earthRadius=6371008.8,K.factors={centimeters:100*K.earthRadius,centimetres:100*K.earthRadius,degrees:K.earthRadius/111325,feet:3.28084*K.earthRadius,inches:39.37*K.earthRadius,kilometers:K.earthRadius/1e3,kilometres:K.earthRadius/1e3,meters:K.earthRadius,metres:K.earthRadius,miles:K.earthRadius/1609.344,millimeters:1e3*K.earthRadius,millimetres:1e3*K.earthRadius,nauticalmiles:K.earthRadius/1852,radians:1,yards:1.0936*K.earthRadius},K.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/K.earthRadius,yards:1.0936133},K.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},K.feature=p,K.geometry=function(l,c,h){switch(void 0===h&&(h={}),l){case"Point":return v(c).geometry;case"LineString":return y(c).geometry;case"Polygon":return u(c).geometry;case"MultiPoint":return t(c).geometry;case"MultiLineString":return n(c).geometry;case"MultiPolygon":return a(c).geometry;default:throw new Error(l+" is invalid")}},K.point=v,K.points=function(l,c,h){return void 0===h&&(h={}),e(l.map(function(m){return v(m,c)}),h)},K.polygon=u,K.polygons=function(l,c,h){return void 0===h&&(h={}),e(l.map(function(m){return u(m,c)}),h)},K.lineString=y,K.lineStrings=function(l,c,h){return void 0===h&&(h={}),e(l.map(function(m){return y(m,c)}),h)},K.featureCollection=e,K.multiLineString=n,K.multiPoint=t,K.multiPolygon=a,K.geometryCollection=function(l,c,h){return void 0===h&&(h={}),p({type:"GeometryCollection",geometries:l},c,h)},K.round=function(l,c){if(void 0===c&&(c=0),c&&!(c>=0))throw new Error("precision must be a positive number");var h=Math.pow(10,c||0);return Math.round(l*h)/h},K.radiansToLength=r,K.lengthToRadians=f,K.lengthToDegrees=function(l,c){return s(f(l,c))},K.bearingToAzimuth=function(l){var c=l%360;return c<0&&(c+=360),c},K.radiansToDegrees=s,K.degreesToRadians=function(l){return l%360*Math.PI/180},K.convertLength=function(l,c,h){if(void 0===c&&(c="kilometers"),void 0===h&&(h="kilometers"),!(l>=0))throw new Error("length must be a positive number");return r(f(l,c),h)},K.convertArea=function(l,c,h){if(void 0===c&&(c="meters"),void 0===h&&(h="kilometers"),!(l>=0))throw new Error("area must be a positive number");var m=K.areaFactors[c];if(!m)throw new Error("invalid original units");var d=K.areaFactors[h];if(!d)throw new Error("invalid final units");return l/m*d},K.isNumber=i,K.isObject=function(l){return!!l&&l.constructor===Object},K.validateBBox=function(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(4!==l.length&&6!==l.length)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(c){if(!i(c))throw new Error("bbox must only contain numbers")})},K.validateId=function(l){if(!l)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof l))throw new Error("id must be a number or a string")}},{}],63:[function(x,Q,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0});var p=x("@turf/helpers");function v(r,f,s){if(null!==r)for(var i,l,c,h,m,d,o,b,g=0,w=0,_=r.type,A="FeatureCollection"===_,T="Feature"===_,E=A?r.features.length:1,k=0;k<E;k++){m=(b=!!(o=A?r.features[k].geometry:T?r.geometry:r)&&"GeometryCollection"===o.type)?o.geometries.length:1;for(var O=0;O<m;O++){var D=0,S=0;if(null!==(h=b?o.geometries[O]:o)){d=h.coordinates;var C=h.type;switch(g=!s||"Polygon"!==C&&"MultiPolygon"!==C?0:1,C){case null:break;case"Point":if(!1===f(d,w,k,D,S))return!1;w++,D++;break;case"LineString":case"MultiPoint":for(i=0;i<d.length;i++){if(!1===f(d[i],w,k,D,S))return!1;w++,"MultiPoint"===C&&D++}"LineString"===C&&D++;break;case"Polygon":case"MultiLineString":for(i=0;i<d.length;i++){for(l=0;l<d[i].length-g;l++){if(!1===f(d[i][l],w,k,D,S))return!1;w++}"MultiLineString"===C&&D++,"Polygon"===C&&S++}"Polygon"===C&&D++;break;case"MultiPolygon":for(i=0;i<d.length;i++){for(S=0,l=0;l<d[i].length;l++){for(c=0;c<d[i][l].length-g;c++){if(!1===f(d[i][l][c],w,k,D,S))return!1;w++}S++}D++}break;case"GeometryCollection":for(i=0;i<h.geometries.length;i++)if(!1===v(h.geometries[i],f,s))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(r,f){var s;switch(r.type){case"FeatureCollection":for(s=0;s<r.features.length&&!1!==f(r.features[s].properties,s);s++);break;case"Feature":f(r.properties,0)}}function y(r,f){if("Feature"===r.type)f(r,0);else if("FeatureCollection"===r.type)for(var s=0;s<r.features.length&&!1!==f(r.features[s],s);s++);}function e(r,f){var s,i,l,c,h,m,d,o,b,g,w=0,_="FeatureCollection"===r.type,A="Feature"===r.type,T=_?r.features.length:1;for(s=0;s<T;s++){for(o=_?r.features[s].properties:A?r.properties:{},b=_?r.features[s].bbox:A?r.bbox:void 0,g=_?r.features[s].id:A?r.id:void 0,h=(d=!!(m=_?r.features[s].geometry:A?r.geometry:r)&&"GeometryCollection"===m.type)?m.geometries.length:1,l=0;l<h;l++)if(null!==(c=d?m.geometries[l]:m))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===f(c,w,o,b,g))return!1;break;case"GeometryCollection":for(i=0;i<c.geometries.length;i++)if(!1===f(c.geometries[i],w,o,b,g))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===f(null,w,o,b,g))return!1;w++}}function n(r,f){e(r,function(s,i,l,c,h){var m,d=null===s?null:s.type;switch(d){case null:case"Point":case"LineString":case"Polygon":return!1!==f(p.feature(s,l,{bbox:c,id:h}),i,0)&&void 0}switch(d){case"MultiPoint":m="Point";break;case"MultiLineString":m="LineString";break;case"MultiPolygon":m="Polygon"}for(var o=0;o<s.coordinates.length;o++)if(!1===f(p.feature({type:m,coordinates:s.coordinates[o]},l),i,o))return!1})}function t(r,f){n(r,function(s,i,l){var c=0;if(s.geometry){var h=s.geometry.type;if("Point"!==h&&"MultiPoint"!==h){var m,d=0,o=0,b=0;return!1!==v(s,function(g,w,_,A,T){if(void 0===m||i>d||A>o||T>b)return m=g,d=i,o=A,b=T,void(c=0);var E=p.lineString([m,g],s.properties);if(!1===f(E,i,l,T,c))return!1;c++,m=g})&&void 0}}})}function a(r,f){if(!r)throw new Error("geojson is required");n(r,function(s,i,l){if(null!==s.geometry){var h=s.geometry.coordinates;switch(s.geometry.type){case"LineString":if(!1===f(s,i,l,0,0))return!1;break;case"Polygon":for(var m=0;m<h.length;m++)if(!1===f(p.lineString(h[m],s.properties),i,l,m))return!1}}})}K.coordEach=v,K.coordReduce=function(r,f,s,i){var l=s;return v(r,function(c,h,m,d,o){l=0===h&&void 0===s?c:f(l,c,h,m,d,o)},i),l},K.propEach=u,K.propReduce=function(r,f,s){var i=s;return u(r,function(l,c){i=0===c&&void 0===s?l:f(i,l,c)}),i},K.featureEach=y,K.featureReduce=function(r,f,s){var i=s;return y(r,function(l,c){i=0===c&&void 0===s?l:f(i,l,c)}),i},K.coordAll=function(r){var f=[];return v(r,function(s){f.push(s)}),f},K.geomEach=e,K.geomReduce=function(r,f,s){var i=s;return e(r,function(l,c,h,m,d){i=0===c&&void 0===s?l:f(i,l,c,h,m,d)}),i},K.flattenEach=n,K.flattenReduce=function(r,f,s){var i=s;return n(r,function(l,c,h){i=0===c&&0===h&&void 0===s?l:f(i,l,c,h)}),i},K.segmentEach=t,K.segmentReduce=function(r,f,s){var i=s,l=!1;return t(r,function(c,h,m,d,o){i=!1===l&&void 0===s?c:f(i,c,h,m,d,o),l=!0}),i},K.lineEach=a,K.lineReduce=function(r,f,s){var i=s;return a(r,function(l,c,h,m){i=0===c&&void 0===s?l:f(i,l,c,h,m)}),i},K.findSegment=function(r,f){if(!p.isObject(f=f||{}))throw new Error("options is invalid");var s,i=f.featureIndex||0,l=f.multiFeatureIndex||0,c=f.geometryIndex||0,h=f.segmentIndex||0,m=f.properties;switch(r.type){case"FeatureCollection":i<0&&(i=r.features.length+i),m=m||r.features[i].properties,s=r.features[i].geometry;break;case"Feature":m=m||r.properties,s=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=r;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var d=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=d.length+h-1),p.lineString([d[h],d[h+1]],m,f);case"Polygon":return c<0&&(c=d.length+c),h<0&&(h=d[c].length+h-1),p.lineString([d[c][h],d[c][h+1]],m,f);case"MultiLineString":return l<0&&(l=d.length+l),h<0&&(h=d[l].length+h-1),p.lineString([d[l][h],d[l][h+1]],m,f);case"MultiPolygon":return l<0&&(l=d.length+l),c<0&&(c=d[l].length+c),h<0&&(h=d[l][c].length-h-1),p.lineString([d[l][c][h],d[l][c][h+1]],m,f)}throw new Error("geojson is invalid")},K.findPoint=function(r,f){if(!p.isObject(f=f||{}))throw new Error("options is invalid");var s,i=f.featureIndex||0,l=f.multiFeatureIndex||0,c=f.geometryIndex||0,h=f.coordIndex||0,m=f.properties;switch(r.type){case"FeatureCollection":i<0&&(i=r.features.length+i),m=m||r.features[i].properties,s=r.features[i].geometry;break;case"Feature":m=m||r.properties,s=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=r;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var d=s.coordinates;switch(s.type){case"Point":return p.point(d,m,f);case"MultiPoint":return l<0&&(l=d.length+l),p.point(d[l],m,f);case"LineString":return h<0&&(h=d.length+h),p.point(d[h],m,f);case"Polygon":return c<0&&(c=d.length+c),h<0&&(h=d[c].length+h),p.point(d[c][h],m,f);case"MultiLineString":return l<0&&(l=d.length+l),h<0&&(h=d[l].length+h),p.point(d[l][h],m,f);case"MultiPolygon":return l<0&&(l=d.length+l),c<0&&(c=d[l].length+c),h<0&&(h=d[l][c].length-h),p.point(d[l][c][h],m,f)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(x,Q,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0});var p=x("@turf/meta");function v(u){var y=[1/0,1/0,-1/0,-1/0];return p.coordEach(u,function(e){y[0]>e[0]&&(y[0]=e[0]),y[1]>e[1]&&(y[1]=e[1]),y[2]<e[0]&&(y[2]=e[0]),y[3]<e[1]&&(y[3]=e[1])}),y}v.default=v,K.default=v},{"@turf/meta":66}],65:[function(x,Q,K){arguments[4][62][0].apply(K,arguments)},{dup:62}],66:[function(x,Q,K){arguments[4][63][0].apply(K,arguments)},{"@turf/helpers":65,dup:63}],67:[function(x,Q,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0});var p=x("@turf/meta"),v=x("@turf/helpers");K.default=function(u,y){void 0===y&&(y={});var e=0,n=0,t=0;return p.coordEach(u,function(a){e+=a[0],n+=a[1],t++}),v.point([e/t,n/t],y.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(x,Q,K){"use strict";function p(l,c,h){void 0===h&&(h={});var m={type:"Feature"};return(0===h.id||h.id)&&(m.id=h.id),h.bbox&&(m.bbox=h.bbox),m.properties=c||{},m.geometry=l,m}function v(l,c,h){return void 0===h&&(h={}),p({type:"Point",coordinates:l},c,h)}function u(l,c,h){void 0===h&&(h={});for(var m=0,d=l;m<d.length;m++){var o=d[m];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var b=0;b<o[o.length-1].length;b++)if(o[o.length-1][b]!==o[0][b])throw new Error("First and last Position are not equivalent.")}return p({type:"Polygon",coordinates:l},c,h)}function y(l,c,h){if(void 0===h&&(h={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");return p({type:"LineString",coordinates:l},c,h)}function e(l,c){void 0===c&&(c={});var h={type:"FeatureCollection"};return c.id&&(h.id=c.id),c.bbox&&(h.bbox=c.bbox),h.features=l,h}function n(l,c,h){return void 0===h&&(h={}),p({type:"MultiLineString",coordinates:l},c,h)}function t(l,c,h){return void 0===h&&(h={}),p({type:"MultiPoint",coordinates:l},c,h)}function a(l,c,h){return void 0===h&&(h={}),p({type:"MultiPolygon",coordinates:l},c,h)}function r(l,c){void 0===c&&(c="kilometers");var h=K.factors[c];if(!h)throw new Error(c+" units is invalid");return l*h}function f(l,c){void 0===c&&(c="kilometers");var h=K.factors[c];if(!h)throw new Error(c+" units is invalid");return l/h}function s(l){return l%(2*Math.PI)*180/Math.PI}function i(l){return!isNaN(l)&&null!==l&&!Array.isArray(l)&&!/^\s*$/.test(l)}Object.defineProperty(K,"__esModule",{value:!0}),K.earthRadius=6371008.8,K.factors={centimeters:100*K.earthRadius,centimetres:100*K.earthRadius,degrees:K.earthRadius/111325,feet:3.28084*K.earthRadius,inches:39.37*K.earthRadius,kilometers:K.earthRadius/1e3,kilometres:K.earthRadius/1e3,meters:K.earthRadius,metres:K.earthRadius,miles:K.earthRadius/1609.344,millimeters:1e3*K.earthRadius,millimetres:1e3*K.earthRadius,nauticalmiles:K.earthRadius/1852,radians:1,yards:K.earthRadius/1.0936},K.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/K.earthRadius,yards:1/1.0936},K.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},K.feature=p,K.geometry=function(l,c,h){switch(void 0===h&&(h={}),l){case"Point":return v(c).geometry;case"LineString":return y(c).geometry;case"Polygon":return u(c).geometry;case"MultiPoint":return t(c).geometry;case"MultiLineString":return n(c).geometry;case"MultiPolygon":return a(c).geometry;default:throw new Error(l+" is invalid")}},K.point=v,K.points=function(l,c,h){return void 0===h&&(h={}),e(l.map(function(m){return v(m,c)}),h)},K.polygon=u,K.polygons=function(l,c,h){return void 0===h&&(h={}),e(l.map(function(m){return u(m,c)}),h)},K.lineString=y,K.lineStrings=function(l,c,h){return void 0===h&&(h={}),e(l.map(function(m){return y(m,c)}),h)},K.featureCollection=e,K.multiLineString=n,K.multiPoint=t,K.multiPolygon=a,K.geometryCollection=function(l,c,h){return void 0===h&&(h={}),p({type:"GeometryCollection",geometries:l},c,h)},K.round=function(l,c){if(void 0===c&&(c=0),c&&!(c>=0))throw new Error("precision must be a positive number");var h=Math.pow(10,c||0);return Math.round(l*h)/h},K.radiansToLength=r,K.lengthToRadians=f,K.lengthToDegrees=function(l,c){return s(f(l,c))},K.bearingToAzimuth=function(l){var c=l%360;return c<0&&(c+=360),c},K.radiansToDegrees=s,K.degreesToRadians=function(l){return l%360*Math.PI/180},K.convertLength=function(l,c,h){if(void 0===c&&(c="kilometers"),void 0===h&&(h="kilometers"),!(l>=0))throw new Error("length must be a positive number");return r(f(l,c),h)},K.convertArea=function(l,c,h){if(void 0===c&&(c="meters"),void 0===h&&(h="kilometers"),!(l>=0))throw new Error("area must be a positive number");var m=K.areaFactors[c];if(!m)throw new Error("invalid original units");var d=K.areaFactors[h];if(!d)throw new Error("invalid final units");return l/m*d},K.isNumber=i,K.isObject=function(l){return!!l&&l.constructor===Object},K.validateBBox=function(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(4!==l.length&&6!==l.length)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(c){if(!i(c))throw new Error("bbox must only contain numbers")})},K.validateId=function(l){if(!l)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof l))throw new Error("id must be a number or a string")},K.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},K.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},K.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},K.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},K.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},K.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},K.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(x,Q,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0});var p=x("@turf/helpers");function v(r,f,s){if(null!==r)for(var i,l,c,h,m,d,o,b,g=0,w=0,_=r.type,A="FeatureCollection"===_,T="Feature"===_,E=A?r.features.length:1,k=0;k<E;k++){m=(b=!!(o=A?r.features[k].geometry:T?r.geometry:r)&&"GeometryCollection"===o.type)?o.geometries.length:1;for(var O=0;O<m;O++){var D=0,S=0;if(null!==(h=b?o.geometries[O]:o)){d=h.coordinates;var C=h.type;switch(g=!s||"Polygon"!==C&&"MultiPolygon"!==C?0:1,C){case null:break;case"Point":if(!1===f(d,w,k,D,S))return!1;w++,D++;break;case"LineString":case"MultiPoint":for(i=0;i<d.length;i++){if(!1===f(d[i],w,k,D,S))return!1;w++,"MultiPoint"===C&&D++}"LineString"===C&&D++;break;case"Polygon":case"MultiLineString":for(i=0;i<d.length;i++){for(l=0;l<d[i].length-g;l++){if(!1===f(d[i][l],w,k,D,S))return!1;w++}"MultiLineString"===C&&D++,"Polygon"===C&&S++}"Polygon"===C&&D++;break;case"MultiPolygon":for(i=0;i<d.length;i++){for(S=0,l=0;l<d[i].length;l++){for(c=0;c<d[i][l].length-g;c++){if(!1===f(d[i][l][c],w,k,D,S))return!1;w++}S++}D++}break;case"GeometryCollection":for(i=0;i<h.geometries.length;i++)if(!1===v(h.geometries[i],f,s))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(r,f){var s;switch(r.type){case"FeatureCollection":for(s=0;s<r.features.length&&!1!==f(r.features[s].properties,s);s++);break;case"Feature":f(r.properties,0)}}function y(r,f){if("Feature"===r.type)f(r,0);else if("FeatureCollection"===r.type)for(var s=0;s<r.features.length&&!1!==f(r.features[s],s);s++);}function e(r,f){var s,i,l,c,h,m,d,o,b,g,w=0,_="FeatureCollection"===r.type,A="Feature"===r.type,T=_?r.features.length:1;for(s=0;s<T;s++){for(o=_?r.features[s].properties:A?r.properties:{},b=_?r.features[s].bbox:A?r.bbox:void 0,g=_?r.features[s].id:A?r.id:void 0,h=(d=!!(m=_?r.features[s].geometry:A?r.geometry:r)&&"GeometryCollection"===m.type)?m.geometries.length:1,l=0;l<h;l++)if(null!==(c=d?m.geometries[l]:m))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===f(c,w,o,b,g))return!1;break;case"GeometryCollection":for(i=0;i<c.geometries.length;i++)if(!1===f(c.geometries[i],w,o,b,g))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===f(null,w,o,b,g))return!1;w++}}function n(r,f){e(r,function(s,i,l,c,h){var m,d=null===s?null:s.type;switch(d){case null:case"Point":case"LineString":case"Polygon":return!1!==f(p.feature(s,l,{bbox:c,id:h}),i,0)&&void 0}switch(d){case"MultiPoint":m="Point";break;case"MultiLineString":m="LineString";break;case"MultiPolygon":m="Polygon"}for(var o=0;o<s.coordinates.length;o++)if(!1===f(p.feature({type:m,coordinates:s.coordinates[o]},l),i,o))return!1})}function t(r,f){n(r,function(s,i,l){var c=0;if(s.geometry){var h=s.geometry.type;if("Point"!==h&&"MultiPoint"!==h){var m,d=0,o=0,b=0;return!1!==v(s,function(g,w,_,A,T){if(void 0===m||i>d||A>o||T>b)return m=g,d=i,o=A,b=T,void(c=0);var E=p.lineString([m,g],s.properties);if(!1===f(E,i,l,T,c))return!1;c++,m=g})&&void 0}}})}function a(r,f){if(!r)throw new Error("geojson is required");n(r,function(s,i,l){if(null!==s.geometry){var h=s.geometry.coordinates;switch(s.geometry.type){case"LineString":if(!1===f(s,i,l,0,0))return!1;break;case"Polygon":for(var m=0;m<h.length;m++)if(!1===f(p.lineString(h[m],s.properties),i,l,m))return!1}}})}K.coordEach=v,K.coordReduce=function(r,f,s,i){var l=s;return v(r,function(c,h,m,d,o){l=0===h&&void 0===s?c:f(l,c,h,m,d,o)},i),l},K.propEach=u,K.propReduce=function(r,f,s){var i=s;return u(r,function(l,c){i=0===c&&void 0===s?l:f(i,l,c)}),i},K.featureEach=y,K.featureReduce=function(r,f,s){var i=s;return y(r,function(l,c){i=0===c&&void 0===s?l:f(i,l,c)}),i},K.coordAll=function(r){var f=[];return v(r,function(s){f.push(s)}),f},K.geomEach=e,K.geomReduce=function(r,f,s){var i=s;return e(r,function(l,c,h,m,d){i=0===c&&void 0===s?l:f(i,l,c,h,m,d)}),i},K.flattenEach=n,K.flattenReduce=function(r,f,s){var i=s;return n(r,function(l,c,h){i=0===c&&0===h&&void 0===s?l:f(i,l,c,h)}),i},K.segmentEach=t,K.segmentReduce=function(r,f,s){var i=s,l=!1;return t(r,function(c,h,m,d,o){i=!1===l&&void 0===s?c:f(i,c,h,m,d,o),l=!0}),i},K.lineEach=a,K.lineReduce=function(r,f,s){var i=s;return a(r,function(l,c,h,m){i=0===c&&void 0===s?l:f(i,l,c,h,m)}),i},K.findSegment=function(r,f){if(!p.isObject(f=f||{}))throw new Error("options is invalid");var s,i=f.featureIndex||0,l=f.multiFeatureIndex||0,c=f.geometryIndex||0,h=f.segmentIndex||0,m=f.properties;switch(r.type){case"FeatureCollection":i<0&&(i=r.features.length+i),m=m||r.features[i].properties,s=r.features[i].geometry;break;case"Feature":m=m||r.properties,s=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=r;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var d=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return h<0&&(h=d.length+h-1),p.lineString([d[h],d[h+1]],m,f);case"Polygon":return c<0&&(c=d.length+c),h<0&&(h=d[c].length+h-1),p.lineString([d[c][h],d[c][h+1]],m,f);case"MultiLineString":return l<0&&(l=d.length+l),h<0&&(h=d[l].length+h-1),p.lineString([d[l][h],d[l][h+1]],m,f);case"MultiPolygon":return l<0&&(l=d.length+l),c<0&&(c=d[l].length+c),h<0&&(h=d[l][c].length-h-1),p.lineString([d[l][c][h],d[l][c][h+1]],m,f)}throw new Error("geojson is invalid")},K.findPoint=function(r,f){if(!p.isObject(f=f||{}))throw new Error("options is invalid");var s,i=f.featureIndex||0,l=f.multiFeatureIndex||0,c=f.geometryIndex||0,h=f.coordIndex||0,m=f.properties;switch(r.type){case"FeatureCollection":i<0&&(i=r.features.length+i),m=m||r.features[i].properties,s=r.features[i].geometry;break;case"Feature":m=m||r.properties,s=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=r;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var d=s.coordinates;switch(s.type){case"Point":return p.point(d,m,f);case"MultiPoint":return l<0&&(l=d.length+l),p.point(d[l],m,f);case"LineString":return h<0&&(h=d.length+h),p.point(d[h],m,f);case"Polygon":return c<0&&(c=d.length+c),h<0&&(h=d[c].length+h),p.point(d[c][h],m,f);case"MultiLineString":return l<0&&(l=d.length+l),h<0&&(h=d[l].length+h),p.point(d[l][h],m,f);case"MultiPolygon":return l<0&&(l=d.length+l),c<0&&(c=d[l].length+c),h<0&&(h=d[l][c].length-h),p.point(d[l][c][h],m,f)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(x,Q,K){Q.exports=function(p){var v=0,u=0,y=0,e=0;return p.map(function(n){var t=(n=n.slice())[0],a=t.toUpperCase();if(t!=a)switch(n[0]=a,t){case"a":n[6]+=y,n[7]+=e;break;case"v":n[1]+=e;break;case"h":n[1]+=y;break;default:for(var r=1;r<n.length;)n[r++]+=y,n[r++]+=e}switch(a){case"Z":y=v,e=u;break;case"H":y=n[1];break;case"V":e=n[1];break;case"M":y=v=n[1],e=u=n[2];break;default:y=n[n.length-2],e=n[n.length-1]}return n})}},{}],71:[function(x,Q,K){"use strict";Q.exports=function(p,v){if(!p||null==p.length)throw Error("Argument should be an array");v=null==v?1:Math.floor(v);for(var u=Array(2*v),y=0;y<v;y++){for(var e=-1/0,n=1/0,t=y,a=p.length;t<a;t+=v)p[t]>e&&(e=p[t]),p[t]<n&&(n=p[t]);u[y]=n,u[v+y]=e}return u}},{}],72:[function(x,Q,K){"use strict";Q.exports=function(p,v,u){if("function"==typeof Array.prototype.findIndex)return p.findIndex(v,u);if("function"!=typeof v)throw new TypeError("predicate must be a function");var y=Object(p),e=y.length;if(0===e)return-1;for(var n=0;n<e;n++)if(v.call(u,y[n],n,y))return n;return-1}},{}],73:[function(x,Q,K){"use strict";var p=x("array-bounds");Q.exports=function(v,u,y){if(!v||null==v.length)throw Error("Argument should be an array");null==u&&(u=1),null==y&&(y=p(v,u));for(var e=0;e<u;e++){var n=y[u+e],t=y[e],a=e,r=v.length;if(n===1/0&&t===-1/0)for(a=e;a<r;a+=u)v[a]=v[a]===n?1:v[a]===t?0:.5;else if(n===1/0)for(a=e;a<r;a+=u)v[a]=v[a]===n?1:0;else if(t===-1/0)for(a=e;a<r;a+=u)v[a]=v[a]===t?0:1;else{var f=n-t;for(a=e;a<r;a+=u)isNaN(v[a])||(v[a]=0===f?.5:(v[a]-t)/f)}}return v}},{"array-bounds":71}],74:[function(x,Q,K){Q.exports=function(p,v){var u="number"==typeof p,y="number"==typeof v;u&&!y?(v=p,p=0):u||y||(p=0,v=0);var e=(v|=0)-(p|=0);if(e<0)throw new Error("array length must be positive");for(var n=new Array(e),t=0,a=p;t<e;t++,a++)n[t]=a;return n}},{}],75:[function(x,Q,K){(function(p){(function(){"use strict";var v=x("object-assign");function u(A,T){if(A===T)return 0;for(var E=A.length,k=T.length,O=0,D=Math.min(E,k);O<D;++O)if(A[O]!==T[O]){E=A[O],k=T[O];break}return E<k?-1:k<E?1:0}function y(A){return p.Buffer&&"function"==typeof p.Buffer.isBuffer?p.Buffer.isBuffer(A):!(null==A||!A._isBuffer)}var e=x("util/"),n=Object.prototype.hasOwnProperty,t=Array.prototype.slice,a="foo"===function(){}.name;function r(A){return Object.prototype.toString.call(A)}function f(A){return!y(A)&&"function"==typeof p.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(A):!!A&&(A instanceof DataView||!!(A.buffer&&A.buffer instanceof ArrayBuffer)))}var s=Q.exports=d,i=/\s*function\s+([^\(\s]*)\s*/;function l(A){if(e.isFunction(A)){if(a)return A.name;var T=A.toString().match(i);return T&&T[1]}}function c(A,T){return"string"==typeof A?A.length<T?A:A.slice(0,T):A}function h(A){if(a||!e.isFunction(A))return e.inspect(A);var T=l(A);return"[Function"+(T?": "+T:"")+"]"}function m(A,T,E,k,O){throw new s.AssertionError({message:E,actual:A,expected:T,operator:k,stackStartFunction:O})}function d(A,T){A||m(A,!0,T,"==",s.ok)}function o(A,T,E,k){if(A===T)return!0;if(y(A)&&y(T))return 0===u(A,T);if(e.isDate(A)&&e.isDate(T))return A.getTime()===T.getTime();if(e.isRegExp(A)&&e.isRegExp(T))return A.source===T.source&&A.global===T.global&&A.multiline===T.multiline&&A.lastIndex===T.lastIndex&&A.ignoreCase===T.ignoreCase;if(null!==A&&"object"==typeof A||null!==T&&"object"==typeof T){if(f(A)&&f(T)&&r(A)===r(T)&&!(A instanceof Float32Array||A instanceof Float64Array))return 0===u(new Uint8Array(A.buffer),new Uint8Array(T.buffer));if(y(A)!==y(T))return!1;var O=(k=k||{actual:[],expected:[]}).actual.indexOf(A);return-1!==O&&O===k.expected.indexOf(T)||(k.actual.push(A),k.expected.push(T),function(D,S,C,z){if(null==D||null==S)return!1;if(e.isPrimitive(D)||e.isPrimitive(S))return D===S;if(C&&Object.getPrototypeOf(D)!==Object.getPrototypeOf(S))return!1;var B=b(D),U=b(S);if(B&&!U||!B&&U)return!1;if(B)return o(D=t.call(D),S=t.call(S),C);var G,X,Z=_(D),q=_(S);if(Z.length!==q.length)return!1;for(Z.sort(),q.sort(),X=Z.length-1;X>=0;X--)if(Z[X]!==q[X])return!1;for(X=Z.length-1;X>=0;X--)if(!o(D[G=Z[X]],S[G],C,z))return!1;return!0}(A,T,E,k))}return E?A===T:A==T}function b(A){return"[object Arguments]"==Object.prototype.toString.call(A)}function g(A,T){if(!A||!T)return!1;if("[object RegExp]"==Object.prototype.toString.call(T))return T.test(A);try{if(A instanceof T)return!0}catch(E){}return!Error.isPrototypeOf(T)&&!0===T.call({},A)}function w(A,T,E,k){var O;if("function"!=typeof T)throw new TypeError('"block" argument must be a function');"string"==typeof E&&(k=E,E=null),O=function(C){var z;try{C()}catch(B){z=B}return z}(T),k=(E&&E.name?" ("+E.name+").":".")+(k?" "+k:"."),A&&!O&&m(O,E,"Missing expected exception"+k);var D="string"==typeof k,S=!A&&O&&!E;if((!A&&e.isError(O)&&D&&g(O,E)||S)&&m(O,E,"Got unwanted exception"+k),A&&O&&E&&!g(O,E)||!A&&O)throw O}s.AssertionError=function(A){this.name="AssertionError",this.actual=A.actual,this.expected=A.expected,this.operator=A.operator,A.message?(this.message=A.message,this.generatedMessage=!1):(this.message=c(h(this.actual),128)+" "+this.operator+" "+c(h(this.expected),128),this.generatedMessage=!0);var T=A.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,T);else{var E=new Error;if(E.stack){var k=E.stack,O=l(T),D=k.indexOf("\n"+O);if(D>=0){var S=k.indexOf("\n",D+1);k=k.substring(S+1)}this.stack=k}}},e.inherits(s.AssertionError,Error),s.fail=m,s.ok=d,s.equal=function(A,T,E){A!=T&&m(A,T,E,"==",s.equal)},s.notEqual=function(A,T,E){A==T&&m(A,T,E,"!=",s.notEqual)},s.deepEqual=function(A,T,E){o(A,T,!1)||m(A,T,E,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(A,T,E){o(A,T,!0)||m(A,T,E,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function(A,T,E){o(A,T,!1)&&m(A,T,E,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=function A(T,E,k){o(T,E,!0)&&m(T,E,k,"notDeepStrictEqual",A)},s.strictEqual=function(A,T,E){A!==T&&m(A,T,E,"===",s.strictEqual)},s.notStrictEqual=function(A,T,E){A===T&&m(A,T,E,"!==",s.notStrictEqual)},s.throws=function(A,T,E){w(!0,A,T,E)},s.doesNotThrow=function(A,T,E){w(!1,A,T,E)},s.ifError=function(A){if(A)throw A},s.strict=v(function A(T,E){T||m(T,!0,E,"==",A)},s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var _=Object.keys||function(A){var T=[];for(var E in A)n.call(A,E)&&T.push(E);return T}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":247,"util/":78}],76:[function(x,Q,K){Q.exports="function"==typeof Object.create?function(p,v){p.super_=v,p.prototype=Object.create(v.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}})}:function(p,v){p.super_=v;var u=function(){};u.prototype=v.prototype,p.prototype=new u,p.prototype.constructor=p}},{}],77:[function(x,Q,K){Q.exports=function(p){return p&&"object"==typeof p&&"function"==typeof p.copy&&"function"==typeof p.fill&&"function"==typeof p.readUInt8}},{}],78:[function(x,Q,K){(function(p,v){(function(){var u=/%[sdj%]/g;K.format=function(D){if(!m(D)){for(var S=[],C=0;C<arguments.length;C++)S.push(n(arguments[C]));return S.join(" ")}C=1;for(var z=arguments,B=z.length,U=String(D).replace(u,function(X){if("%%"===X)return"%";if(C>=B)return X;switch(X){case"%s":return String(z[C++]);case"%d":return Number(z[C++]);case"%j":try{return JSON.stringify(z[C++])}catch(Z){return"[Circular]"}default:return X}}),G=z[C];C<B;G=z[++C])c(G)||!b(G)?U+=" "+G:U+=" "+n(G);return U},K.deprecate=function(D,S){if(d(v.process))return function(){return K.deprecate(D,S).apply(this,arguments)};if(!0===p.noDeprecation)return D;var C=!1;return function(){if(!C){if(p.throwDeprecation)throw new Error(S);p.traceDeprecation?console.trace(S):console.error(S),C=!0}return D.apply(this,arguments)}};var y,e={};function n(D,S){var C={seen:[],stylize:a};return arguments.length>=3&&(C.depth=arguments[2]),arguments.length>=4&&(C.colors=arguments[3]),l(S)?C.showHidden=S:S&&K._extend(C,S),d(C.showHidden)&&(C.showHidden=!1),d(C.depth)&&(C.depth=2),d(C.colors)&&(C.colors=!1),d(C.customInspect)&&(C.customInspect=!0),C.colors&&(C.stylize=t),r(C,D,C.depth)}function t(D,S){var C=n.styles[S];return C?"\x1b["+n.colors[C][0]+"m"+D+"\x1b["+n.colors[C][1]+"m":D}function a(D,S){return D}function r(D,S,C){if(D.customInspect&&S&&_(S.inspect)&&S.inspect!==K.inspect&&(!S.constructor||S.constructor.prototype!==S)){var z=S.inspect(C,D);return m(z)||(z=r(D,z,C)),z}var B=function(R,N){if(d(N))return R.stylize("undefined","undefined");if(m(N)){var V="'"+JSON.stringify(N).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return R.stylize(V,"string")}return h(N)?R.stylize(""+N,"number"):l(N)?R.stylize(""+N,"boolean"):c(N)?R.stylize("null","null"):void 0}(D,S);if(B)return B;var N,U=Object.keys(S),G=(N={},U.forEach(function(V,ee){N[V]=!0}),N);if(D.showHidden&&(U=Object.getOwnPropertyNames(S)),w(S)&&(U.indexOf("message")>=0||U.indexOf("description")>=0))return f(S);if(0===U.length){if(_(S))return D.stylize("[Function"+(S.name?": "+S.name:"")+"]","special");if(o(S))return D.stylize(RegExp.prototype.toString.call(S),"regexp");if(g(S))return D.stylize(Date.prototype.toString.call(S),"date");if(w(S))return f(S)}var Z,q="",W=!1,te=["{","}"];return i(S)&&(W=!0,te=["[","]"]),_(S)&&(q=" [Function"+(S.name?": "+S.name:"")+"]"),o(S)&&(q=" "+RegExp.prototype.toString.call(S)),g(S)&&(q=" "+Date.prototype.toUTCString.call(S)),w(S)&&(q=" "+f(S)),0!==U.length||W&&0!=S.length?C<0?o(S)?D.stylize(RegExp.prototype.toString.call(S),"regexp"):D.stylize("[Object]","special"):(D.seen.push(S),Z=W?function(R,N,V,ee,j){for(var J=[],$=0,re=N.length;$<re;++$)O(N,String($))?J.push(s(R,N,V,ee,String($),!0)):J.push("");return j.forEach(function(ne){ne.match(/^\d+$/)||J.push(s(R,N,V,ee,ne,!0))}),J}(D,S,C,G,U):U.map(function(R){return s(D,S,C,G,R,W)}),D.seen.pop(),function(R,N,V){return R.reduce(function(ee,j){return j.indexOf("\n"),ee+j.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?V[0]+(""===N?"":N+"\n ")+" "+R.join(",\n  ")+" "+V[1]:V[0]+N+" "+R.join(", ")+" "+V[1]}(Z,q,te)):te[0]+q+te[1]}function f(D){return"["+Error.prototype.toString.call(D)+"]"}function s(D,S,C,z,B,U){var G,X,Z;if((Z=Object.getOwnPropertyDescriptor(S,B)||{value:S[B]}).get?X=D.stylize(Z.set?"[Getter/Setter]":"[Getter]","special"):Z.set&&(X=D.stylize("[Setter]","special")),O(z,B)||(G="["+B+"]"),X||(D.seen.indexOf(Z.value)<0?(X=c(C)?r(D,Z.value,null):r(D,Z.value,C-1)).indexOf("\n")>-1&&(X=U?X.split("\n").map(function(q){return"  "+q}).join("\n").substr(2):"\n"+X.split("\n").map(function(q){return"   "+q}).join("\n")):X=D.stylize("[Circular]","special")),d(G)){if(U&&B.match(/^\d+$/))return X;(G=JSON.stringify(""+B)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(G=G.substr(1,G.length-2),G=D.stylize(G,"name")):(G=G.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),G=D.stylize(G,"string"))}return G+": "+X}function i(D){return Array.isArray(D)}function l(D){return"boolean"==typeof D}function c(D){return null===D}function h(D){return"number"==typeof D}function m(D){return"string"==typeof D}function d(D){return void 0===D}function o(D){return b(D)&&"[object RegExp]"===A(D)}function b(D){return"object"==typeof D&&null!==D}function g(D){return b(D)&&"[object Date]"===A(D)}function w(D){return b(D)&&("[object Error]"===A(D)||D instanceof Error)}function _(D){return"function"==typeof D}function A(D){return Object.prototype.toString.call(D)}function T(D){return D<10?"0"+D.toString(10):D.toString(10)}K.debuglog=function(D){if(d(y)&&(y=p.env.NODE_DEBUG||""),D=D.toUpperCase(),!e[D])if(new RegExp("\\b"+D+"\\b","i").test(y)){var S=p.pid;e[D]=function(){var C=K.format.apply(K,arguments);console.error("%s %d: %s",D,S,C)}}else e[D]=function(){};return e[D]},K.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},K.isArray=i,K.isBoolean=l,K.isNull=c,K.isNullOrUndefined=function(D){return null==D},K.isNumber=h,K.isString=m,K.isSymbol=function(D){return"symbol"==typeof D},K.isUndefined=d,K.isRegExp=o,K.isObject=b,K.isDate=g,K.isError=w,K.isFunction=_,K.isPrimitive=function(D){return null===D||"boolean"==typeof D||"number"==typeof D||"string"==typeof D||"symbol"==typeof D||void 0===D},K.isBuffer=x("./support/isBuffer");var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(){var D=new Date,S=[T(D.getHours()),T(D.getMinutes()),T(D.getSeconds())].join(":");return[D.getDate(),E[D.getMonth()],S].join(" ")}function O(D,S){return Object.prototype.hasOwnProperty.call(D,S)}K.log=function(){console.log("%s - %s",k(),K.format.apply(K,arguments))},K.inherits=x("inherits"),K._extend=function(D,S){if(!S||!b(S))return D;for(var C=Object.keys(S),z=C.length;z--;)D[C[z]]=S[C[z]];return D}}).call(this)}).call(this,x("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(x,Q,K){"use strict";K.byteLength=function(r){var f=t(r),i=f[1];return 3*(f[0]+i)/4-i},K.toByteArray=function(r){var f,s,g,i=t(r),l=i[0],c=i[1],h=new u(3*(l+(g=c))/4-g),m=0,d=c>0?l-4:l;for(s=0;s<d;s+=4)f=v[r.charCodeAt(s)]<<18|v[r.charCodeAt(s+1)]<<12|v[r.charCodeAt(s+2)]<<6|v[r.charCodeAt(s+3)],h[m++]=f>>16&255,h[m++]=f>>8&255,h[m++]=255&f;return 2===c&&(f=v[r.charCodeAt(s)]<<2|v[r.charCodeAt(s+1)]>>4,h[m++]=255&f),1===c&&(f=v[r.charCodeAt(s)]<<10|v[r.charCodeAt(s+1)]<<4|v[r.charCodeAt(s+2)]>>2,h[m++]=f>>8&255,h[m++]=255&f),h},K.fromByteArray=function(r){for(var f,s=r.length,i=s%3,l=[],c=0,h=s-i;c<h;c+=16383)l.push(a(r,c,c+16383>h?h:c+16383));return 1===i?l.push(p[(f=r[s-1])>>2]+p[f<<4&63]+"=="):2===i&&l.push(p[(f=(r[s-2]<<8)+r[s-1])>>10]+p[f>>4&63]+p[f<<2&63]+"="),l.join("")};for(var p=[],v=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=y.length;e<n;++e)p[e]=y[e],v[y.charCodeAt(e)]=e;function t(r){var f=r.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=r.indexOf("=");return-1===s&&(s=f),[s,s===f?0:4-s%4]}function a(r,f,s){for(var l,c=[],h=f;h<s;h+=3)c.push(p[(l=(r[h]<<16&16711680)+(r[h+1]<<8&65280)+(255&r[h+2]))>>18&63]+p[l>>12&63]+p[l>>6&63]+p[63&l]);return c.join("")}v["-".charCodeAt(0)]=62,v["_".charCodeAt(0)]=63},{}],80:[function(x,Q,K){"use strict";function p(t,a,r,f,s){for(var i=s+1;f<=s;){var l=f+s>>>1,c=t[l];(void 0!==r?r(c,a):c-a)>=0?(i=l,s=l-1):f=l+1}return i}function v(t,a,r,f,s){for(var i=s+1;f<=s;){var l=f+s>>>1,c=t[l];(void 0!==r?r(c,a):c-a)>0?(i=l,s=l-1):f=l+1}return i}function u(t,a,r,f,s){for(var i=f-1;f<=s;){var l=f+s>>>1,c=t[l];(void 0!==r?r(c,a):c-a)<0?(i=l,f=l+1):s=l-1}return i}function y(t,a,r,f,s){for(var i=f-1;f<=s;){var l=f+s>>>1,c=t[l];(void 0!==r?r(c,a):c-a)<=0?(i=l,f=l+1):s=l-1}return i}function e(t,a,r,f,s){for(;f<=s;){var i=f+s>>>1,l=t[i],c=void 0!==r?r(l,a):l-a;if(0===c)return i;c<=0?f=i+1:s=i-1}return-1}function n(t,a,r,f,s,i){return"function"==typeof r?i(t,a,r,void 0===f?0:0|f,void 0===s?t.length-1:0|s):i(t,a,void 0,void 0===r?0:0|r,void 0===f?t.length-1:0|f)}Q.exports={ge:function(t,a,r,f,s){return n(t,a,r,f,s,p)},gt:function(t,a,r,f,s){return n(t,a,r,f,s,v)},lt:function(t,a,r,f,s){return n(t,a,r,f,s,u)},le:function(t,a,r,f,s){return n(t,a,r,f,s,y)},eq:function(t,a,r,f,s){return n(t,a,r,f,s,e)}}},{}],81:[function(x,Q,K){"use strict";function p(u){var y=32;return(u&=-u)&&y--,65535&u&&(y-=16),16711935&u&&(y-=8),252645135&u&&(y-=4),858993459&u&&(y-=2),1431655765&u&&(y-=1),y}K.INT_BITS=32,K.INT_MAX=2147483647,K.INT_MIN=-1<<31,K.sign=function(u){return(u>0)-(u<0)},K.abs=function(u){var y=u>>31;return(u^y)-y},K.min=function(u,y){return y^(u^y)&-(u<y)},K.max=function(u,y){return u^(u^y)&-(u<y)},K.isPow2=function(u){return!(u&u-1||!u)},K.log2=function(u){var y,e;return y=(u>65535)<<4,y|=e=((u>>>=y)>255)<<3,y|=e=((u>>>=e)>15)<<2,(y|=e=((u>>>=e)>3)<<1)|(u>>>=e)>>1},K.log10=function(u){return u>=1e9?9:u>=1e8?8:u>=1e7?7:u>=1e6?6:u>=1e5?5:u>=1e4?4:u>=1e3?3:u>=100?2:u>=10?1:0},K.popCount=function(u){return 16843009*((u=(858993459&(u-=u>>>1&1431655765))+(u>>>2&858993459))+(u>>>4)&252645135)>>>24},K.countTrailingZeros=p,K.nextPow2=function(u){return u+=0===u,--u,u|=u>>>1,u|=u>>>2,u|=u>>>4,1+((u|=u>>>8)|u>>>16)},K.prevPow2=function(u){return u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,(u|=u>>>16)-(u>>>1)},K.parity=function(u){return u^=u>>>16,u^=u>>>8,u^=u>>>4,27030>>>(u&=15)&1};var v=new Array(256);(function(u){for(var y=0;y<256;++y){var e=y,n=y,t=7;for(e>>>=1;e;e>>>=1)n<<=1,n|=1&e,--t;u[y]=n<<t&255}})(v),K.reverse=function(u){return v[255&u]<<24|v[u>>>8&255]<<16|v[u>>>16&255]<<8|v[u>>>24&255]},K.interleave2=function(u,y){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u&=65535)|u<<8))|u<<4))|u<<2))|u<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y&=65535)|y<<8))|y<<4))|y<<2))|y<<1))<<1},K.deinterleave2=function(u,y){return(u=65535&((u=16711935&((u=252645135&((u=858993459&((u=u>>>y&1431655765)|u>>>1))|u>>>2))|u>>>4))|u>>>16))<<16>>16},K.interleave3=function(u,y,e){return u=1227133513&((u=3272356035&((u=251719695&((u=4278190335&((u&=1023)|u<<16))|u<<8))|u<<4))|u<<2),(u|=(y=1227133513&((y=3272356035&((y=251719695&((y=4278190335&((y&=1023)|y<<16))|y<<8))|y<<4))|y<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},K.deinterleave3=function(u,y){return(u=1023&((u=4278190335&((u=251719695&((u=3272356035&((u=u>>>y&1227133513)|u>>>2))|u>>>4))|u>>>8))|u>>>16))<<22>>22},K.nextCombination=function(u){var y=u|u-1;return y+1|(~y&-~y)-1>>>p(u)+1}},{}],82:[function(x,Q,K){"use strict";var p=x("clamp");Q.exports=function(e,n){n||(n={});var t,a,r,f,s,i,c,m,d,o=null==n.cutoff?.25:n.cutoff,b=null==n.radius?8:n.radius,g=n.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!n.width||!n.height)throw Error("For raw data width and height should be provided by options");t=n.width,a=n.height,f=e,i=n.stride?n.stride:Math.floor(e.length/t/a)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(f=(c=e).getContext("2d").getImageData(0,0,t=c.width,a=c.height).data,i=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(f=e.getImageData(0,0,t=(c=e.canvas).width,a=c.height).data,i=4):window.ImageData&&e instanceof window.ImageData&&(t=e.width,a=e.height,f=e.data,i=4);if(r=Math.max(t,a),window.Uint8ClampedArray&&f instanceof window.Uint8ClampedArray||window.Uint8Array&&f instanceof window.Uint8Array)for(s=f,f=Array(t*a),m=0,d=s.length;m<d;m++)f[m]=s[m*i+g]/255;else if(1!==i)throw Error("Raw data can have only 1 value per pixel");var w=Array(t*a),_=Array(t*a),A=Array(r),T=Array(r),E=Array(r+1),k=Array(r);for(m=0,d=t*a;m<d;m++){var O=f[m];w[m]=1===O?0:0===O?v:Math.pow(Math.max(0,.5-O),2),_[m]=1===O?v:0===O?0:Math.pow(Math.max(0,O-.5),2)}u(w,t,a,A,T,k,E),u(_,t,a,A,T,k,E);var D=window.Float32Array?new Float32Array(t*a):new Array(t*a);for(m=0,d=t*a;m<d;m++)D[m]=p(1-((w[m]-_[m])/b+o),0,1);return D};var v=1e20;function u(e,n,t,a,r,f,s){for(var i=0;i<n;i++){for(var l=0;l<t;l++)a[l]=e[l*n+i];for(y(a,r,f,s,t),l=0;l<t;l++)e[l*n+i]=r[l]}for(l=0;l<t;l++){for(i=0;i<n;i++)a[i]=e[l*n+i];for(y(a,r,f,s,n),i=0;i<n;i++)e[l*n+i]=Math.sqrt(r[i])}}function y(e,n,t,a,r){t[0]=0,a[0]=-v,a[1]=+v;for(var f=1,s=0;f<r;f++){for(var i=(e[f]+f*f-(e[t[s]]+t[s]*t[s]))/(2*f-2*t[s]);i<=a[s];)s--,i=(e[f]+f*f-(e[t[s]]+t[s]*t[s]))/(2*f-2*t[s]);t[++s]=f,a[s]=i,a[s+1]=+v}for(f=0,s=0;f<r;f++){for(;a[s+1]<f;)s++;n[f]=(f-t[s])*(f-t[s])+e[t[s]]}}},{clamp:86}],83:[function(x,Q,K){},{}],84:[function(x,Q,K){"use strict";var p,v="object"==typeof Reflect?Reflect:null,u=v&&"function"==typeof v.apply?v.apply:function(h,m,d){return Function.prototype.apply.call(h,m,d)};p=v&&"function"==typeof v.ownKeys?v.ownKeys:Object.getOwnPropertySymbols?function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:function(h){return Object.getOwnPropertyNames(h)};var y=Number.isNaN||function(h){return h!=h};function e(){e.init.call(this)}Q.exports=e,Q.exports.once=function(h,m){return new Promise(function(d,o){function b(){void 0!==g&&h.removeListener("error",g),d([].slice.call(arguments))}var g;"error"!==m&&(g=function(w){h.removeListener(m,b),o(w)},h.once("error",g)),h.once(m,b)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var n=10;function t(h){if("function"!=typeof h)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof h)}function a(h){return void 0===h._maxListeners?e.defaultMaxListeners:h._maxListeners}function r(h,m,d,o){var b,g,w;if(t(d),void 0===(g=h._events)?(g=h._events=Object.create(null),h._eventsCount=0):(void 0!==g.newListener&&(h.emit("newListener",m,d.listener?d.listener:d),g=h._events),w=g[m]),void 0===w)w=g[m]=d,++h._eventsCount;else if("function"==typeof w?w=g[m]=o?[d,w]:[w,d]:o?w.unshift(d):w.push(d),(b=a(h))>0&&w.length>b&&!w.warned){w.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+w.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=h,A.type=m,A.count=w.length,console&&console.warn&&console.warn(A)}return h}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(h,m,d){var o={fired:!1,wrapFn:void 0,target:h,type:m,listener:d},b=f.bind(o);return b.listener=d,o.wrapFn=b,b}function i(h,m,d){var o=h._events;if(void 0===o)return[];var b=o[m];return void 0===b?[]:"function"==typeof b?d?[b.listener||b]:[b]:d?function(g){for(var w=new Array(g.length),_=0;_<w.length;++_)w[_]=g[_].listener||g[_];return w}(b):c(b,b.length)}function l(h){var m=this._events;if(void 0!==m){var d=m[h];if("function"==typeof d)return 1;if(void 0!==d)return d.length}return 0}function c(h,m){for(var d=new Array(m),o=0;o<m;++o)d[o]=h[o];return d}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(h){if("number"!=typeof h||h<0||y(h))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+h+".");n=h}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(h){if("number"!=typeof h||h<0||y(h))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+h+".");return this._maxListeners=h,this},e.prototype.getMaxListeners=function(){return a(this)},e.prototype.emit=function(h){for(var m=[],d=1;d<arguments.length;d++)m.push(arguments[d]);var o="error"===h,b=this._events;if(void 0!==b)o=o&&void 0===b.error;else if(!o)return!1;if(o){var g;if(m.length>0&&(g=m[0]),g instanceof Error)throw g;var w=new Error("Unhandled error."+(g?" ("+g.message+")":""));throw w.context=g,w}var _=b[h];if(void 0===_)return!1;if("function"==typeof _)u(_,this,m);else{var A=_.length,T=c(_,A);for(d=0;d<A;++d)u(T[d],this,m)}return!0},e.prototype.on=e.prototype.addListener=function(h,m){return r(this,h,m,!1)},e.prototype.prependListener=function(h,m){return r(this,h,m,!0)},e.prototype.once=function(h,m){return t(m),this.on(h,s(this,h,m)),this},e.prototype.prependOnceListener=function(h,m){return t(m),this.prependListener(h,s(this,h,m)),this},e.prototype.off=e.prototype.removeListener=function(h,m){var d,o,b,g,w;if(t(m),void 0===(o=this._events))return this;if(void 0===(d=o[h]))return this;if(d===m||d.listener===m)0==--this._eventsCount?this._events=Object.create(null):(delete o[h],o.removeListener&&this.emit("removeListener",h,d.listener||m));else if("function"!=typeof d){for(b=-1,g=d.length-1;g>=0;g--)if(d[g]===m||d[g].listener===m){w=d[g].listener,b=g;break}if(b<0)return this;0===b?d.shift():function(_,A){for(;A+1<_.length;A++)_[A]=_[A+1];_.pop()}(d,b),1===d.length&&(o[h]=d[0]),void 0!==o.removeListener&&this.emit("removeListener",h,w||m)}return this},e.prototype.removeAllListeners=function(h){var m,d,o;if(void 0===(d=this._events))return this;if(void 0===d.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==d[h]&&(0==--this._eventsCount?this._events=Object.create(null):delete d[h]),this;if(0===arguments.length){var b,g=Object.keys(d);for(o=0;o<g.length;++o)"removeListener"!==(b=g[o])&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(m=d[h]))this.removeListener(h,m);else if(void 0!==m)for(o=m.length-1;o>=0;o--)this.removeListener(h,m[o]);return this},e.prototype.listeners=function(h){return i(this,h,!0)},e.prototype.rawListeners=function(h){return i(this,h,!1)},e.listenerCount=function(h,m){return"function"==typeof h.listenerCount?h.listenerCount(m):l.call(h,m)},e.prototype.listenerCount=l,e.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},{}],85:[function(x,Q,K){(function(p){(function(){"use strict";var v=x("base64-js"),u=x("ieee754");function y(R){if(R>2147483647)throw new RangeError('The value "'+R+'" is invalid for option "size"');var N=new Uint8Array(R);return N.__proto__=e.prototype,N}function e(R,N,V){if("number"==typeof R){if("string"==typeof N)throw new TypeError('The "string" argument must be of type string. Received type number');return a(R)}return n(R,N,V)}function n(R,N,V){if("string"==typeof R)return function(J,$){if("string"==typeof $&&""!==$||($="utf8"),!e.isEncoding($))throw new TypeError("Unknown encoding: "+$);var re=0|s(J,$),ne=y(re),se=ne.write(J,$);return se!==re&&(ne=ne.slice(0,se)),ne}(R,N);if(ArrayBuffer.isView(R))return r(R);if(null==R)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R);if(W(R,ArrayBuffer)||R&&W(R.buffer,ArrayBuffer))return function(J,$,re){if($<0||J.byteLength<$)throw new RangeError('"offset" is outside of buffer bounds');if(J.byteLength<$+(re||0))throw new RangeError('"length" is outside of buffer bounds');var ne;return(ne=void 0===$&&void 0===re?new Uint8Array(J):void 0===re?new Uint8Array(J,$):new Uint8Array(J,$,re)).__proto__=e.prototype,ne}(R,N,V);if("number"==typeof R)throw new TypeError('The "value" argument must not be of type number. Received type number');var ee=R.valueOf&&R.valueOf();if(null!=ee&&ee!==R)return e.from(ee,N,V);var j=function(J){if(e.isBuffer(J)){var $=0|f(J.length),re=y($);return 0===re.length||J.copy(re,0,0,$),re}return void 0!==J.length?"number"!=typeof J.length||te(J.length)?y(0):r(J):"Buffer"===J.type&&Array.isArray(J.data)?r(J.data):void 0}(R);if(j)return j;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof R[Symbol.toPrimitive])return e.from(R[Symbol.toPrimitive]("string"),N,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R)}function t(R){if("number"!=typeof R)throw new TypeError('"size" argument must be of type number');if(R<0)throw new RangeError('The value "'+R+'" is invalid for option "size"')}function a(R){return t(R),y(R<0?0:0|f(R))}function r(R){for(var N=R.length<0?0:0|f(R.length),V=y(N),ee=0;ee<N;ee+=1)V[ee]=255&R[ee];return V}function f(R){if(R>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|R}function s(R,N){if(e.isBuffer(R))return R.length;if(ArrayBuffer.isView(R)||W(R,ArrayBuffer))return R.byteLength;if("string"!=typeof R)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof R);var V=R.length,ee=arguments.length>2&&!0===arguments[2];if(!ee&&0===V)return 0;for(var j=!1;;)switch(N){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return X(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*V;case"hex":return V>>>1;case"base64":return Z(R).length;default:if(j)return ee?-1:X(R).length;N=(""+N).toLowerCase(),j=!0}}function i(R,N,V){var ee=!1;if((void 0===N||N<0)&&(N=0),N>this.length||((void 0===V||V>this.length)&&(V=this.length),V<=0)||(V>>>=0)<=(N>>>=0))return"";for(R||(R="utf8");;)switch(R){case"hex":return k(this,N,V);case"utf8":case"utf-8":return A(this,N,V);case"ascii":return T(this,N,V);case"latin1":case"binary":return E(this,N,V);case"base64":return _(this,N,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,N,V);default:if(ee)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),ee=!0}}function l(R,N,V){var ee=R[N];R[N]=R[V],R[V]=ee}function c(R,N,V,ee,j){if(0===R.length)return-1;if("string"==typeof V?(ee=V,V=0):V>2147483647?V=2147483647:V<-2147483648&&(V=-2147483648),te(V=+V)&&(V=j?0:R.length-1),V<0&&(V=R.length+V),V>=R.length){if(j)return-1;V=R.length-1}else if(V<0){if(!j)return-1;V=0}if("string"==typeof N&&(N=e.from(N,ee)),e.isBuffer(N))return 0===N.length?-1:h(R,N,V,ee,j);if("number"==typeof N)return N&=255,"function"==typeof Uint8Array.prototype.indexOf?j?Uint8Array.prototype.indexOf.call(R,N,V):Uint8Array.prototype.lastIndexOf.call(R,N,V):h(R,[N],V,ee,j);throw new TypeError("val must be string, number or Buffer")}function h(R,N,V,ee,j){var J,$=1,re=R.length,ne=N.length;if(void 0!==ee&&("ucs2"===(ee=String(ee).toLowerCase())||"ucs-2"===ee||"utf16le"===ee||"utf-16le"===ee)){if(R.length<2||N.length<2)return-1;$=2,re/=2,ne/=2,V/=2}function se(de,ve){return 1===$?de[ve]:de.readUInt16BE(ve*$)}if(j){var ie=-1;for(J=V;J<re;J++)if(se(R,J)===se(N,-1===ie?0:J-ie)){if(-1===ie&&(ie=J),J-ie+1===ne)return ie*$}else-1!==ie&&(J-=J-ie),ie=-1}else for(V+ne>re&&(V=re-ne),J=V;J>=0;J--){for(var ue=!0,le=0;le<ne;le++)if(se(R,J+le)!==se(N,le)){ue=!1;break}if(ue)return J}return-1}function m(R,N,V,ee){V=Number(V)||0;var j=R.length-V;ee?(ee=Number(ee))>j&&(ee=j):ee=j;var J=N.length;ee>J/2&&(ee=J/2);for(var $=0;$<ee;++$){var re=parseInt(N.substr(2*$,2),16);if(te(re))return $;R[V+$]=re}return $}function d(R,N,V,ee){return q(X(N,R.length-V),R,V,ee)}function o(R,N,V,ee){return q(function(j){for(var J=[],$=0;$<j.length;++$)J.push(255&j.charCodeAt($));return J}(N),R,V,ee)}function b(R,N,V,ee){return o(R,N,V,ee)}function g(R,N,V,ee){return q(Z(N),R,V,ee)}function w(R,N,V,ee){return q(function(j,J){for(var $,re,se=[],ie=0;ie<j.length&&!((J-=2)<0);++ie)re=($=j.charCodeAt(ie))>>8,se.push($%256),se.push(re);return se}(N,R.length-V),R,V,ee)}function _(R,N,V){return v.fromByteArray(0===N&&V===R.length?R:R.slice(N,V))}function A(R,N,V){V=Math.min(R.length,V);for(var ee=[],j=N;j<V;){var J,$,re,ne,se=R[j],ie=null,ue=se>239?4:se>223?3:se>191?2:1;if(j+ue<=V)switch(ue){case 1:se<128&&(ie=se);break;case 2:128==(192&(J=R[j+1]))&&(ne=(31&se)<<6|63&J)>127&&(ie=ne);break;case 3:$=R[j+2],128==(192&(J=R[j+1]))&&128==(192&$)&&(ne=(15&se)<<12|(63&J)<<6|63&$)>2047&&(ne<55296||ne>57343)&&(ie=ne);break;case 4:$=R[j+2],re=R[j+3],128==(192&(J=R[j+1]))&&128==(192&$)&&128==(192&re)&&(ne=(15&se)<<18|(63&J)<<12|(63&$)<<6|63&re)>65535&&ne<1114112&&(ie=ne)}null===ie?(ie=65533,ue=1):ie>65535&&(ee.push((ie-=65536)>>>10&1023|55296),ie=56320|1023&ie),ee.push(ie),j+=ue}return function(le){var de=le.length;if(de<=4096)return String.fromCharCode.apply(String,le);for(var ve="",_e=0;_e<de;)ve+=String.fromCharCode.apply(String,le.slice(_e,_e+=4096));return ve}(ee)}function T(R,N,V){var ee="";V=Math.min(R.length,V);for(var j=N;j<V;++j)ee+=String.fromCharCode(127&R[j]);return ee}function E(R,N,V){var ee="";V=Math.min(R.length,V);for(var j=N;j<V;++j)ee+=String.fromCharCode(R[j]);return ee}function k(R,N,V){var ee=R.length;(!N||N<0)&&(N=0),(!V||V<0||V>ee)&&(V=ee);for(var j="",J=N;J<V;++J)j+=G(R[J]);return j}function O(R,N,V){for(var ee=R.slice(N,V),j="",J=0;J<ee.length;J+=2)j+=String.fromCharCode(ee[J]+256*ee[J+1]);return j}function D(R,N,V){if(R%1!=0||R<0)throw new RangeError("offset is not uint");if(R+N>V)throw new RangeError("Trying to access beyond buffer length")}function S(R,N,V,ee,j,J){if(!e.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>j||N<J)throw new RangeError('"value" argument is out of bounds');if(V+ee>R.length)throw new RangeError("Index out of range")}function C(R,N,V,ee,j,J){if(V+ee>R.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function z(R,N,V,ee,j){return N=+N,V>>>=0,j||C(R,0,V,4),u.write(R,N,V,ee,23,4),V+4}function B(R,N,V,ee,j){return N=+N,V>>>=0,j||C(R,0,V,8),u.write(R,N,V,ee,52,8),V+8}K.Buffer=e,K.SlowBuffer=function(R){return+R!=R&&(R=0),e.alloc(+R)},K.INSPECT_MAX_BYTES=50,K.kMaxLength=2147483647,(e.TYPED_ARRAY_SUPPORT=function(){try{var R=new Uint8Array(1);return R.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===R.foo()}catch(N){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(R,N,V){return n(R,N,V)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(R,N,V){return j=N,J=V,t(ee=R),ee<=0?y(ee):void 0!==j?"string"==typeof J?y(ee).fill(j,J):y(ee).fill(j):y(ee);var ee,j,J},e.allocUnsafe=function(R){return a(R)},e.allocUnsafeSlow=function(R){return a(R)},e.isBuffer=function(R){return null!=R&&!0===R._isBuffer&&R!==e.prototype},e.compare=function(R,N){if(W(R,Uint8Array)&&(R=e.from(R,R.offset,R.byteLength)),W(N,Uint8Array)&&(N=e.from(N,N.offset,N.byteLength)),!e.isBuffer(R)||!e.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===N)return 0;for(var V=R.length,ee=N.length,j=0,J=Math.min(V,ee);j<J;++j)if(R[j]!==N[j]){V=R[j],ee=N[j];break}return V<ee?-1:ee<V?1:0},e.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(R,N){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(0===R.length)return e.alloc(0);var V;if(void 0===N)for(N=0,V=0;V<R.length;++V)N+=R[V].length;var ee=e.allocUnsafe(N),j=0;for(V=0;V<R.length;++V){var J=R[V];if(W(J,Uint8Array)&&(J=e.from(J)),!e.isBuffer(J))throw new TypeError('"list" argument must be an Array of Buffers');J.copy(ee,j),j+=J.length}return ee},e.byteLength=s,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var R=this.length;if(R%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var N=0;N<R;N+=2)l(this,N,N+1);return this},e.prototype.swap32=function(){var R=this.length;if(R%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var N=0;N<R;N+=4)l(this,N,N+3),l(this,N+1,N+2);return this},e.prototype.swap64=function(){var R=this.length;if(R%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var N=0;N<R;N+=8)l(this,N,N+7),l(this,N+1,N+6),l(this,N+2,N+5),l(this,N+3,N+4);return this},e.prototype.toLocaleString=e.prototype.toString=function(){var R=this.length;return 0===R?"":0===arguments.length?A(this,0,R):i.apply(this,arguments)},e.prototype.equals=function(R){if(!e.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R||0===e.compare(this,R)},e.prototype.inspect=function(){var R="",N=K.INSPECT_MAX_BYTES;return R=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(R+=" ... "),"<Buffer "+R+">"},e.prototype.compare=function(R,N,V,ee,j){if(W(R,Uint8Array)&&(R=e.from(R,R.offset,R.byteLength)),!e.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(void 0===N&&(N=0),void 0===V&&(V=R?R.length:0),void 0===ee&&(ee=0),void 0===j&&(j=this.length),N<0||V>R.length||ee<0||j>this.length)throw new RangeError("out of range index");if(ee>=j&&N>=V)return 0;if(ee>=j)return-1;if(N>=V)return 1;if(this===R)return 0;for(var J=(j>>>=0)-(ee>>>=0),$=(V>>>=0)-(N>>>=0),re=Math.min(J,$),ne=this.slice(ee,j),se=R.slice(N,V),ie=0;ie<re;++ie)if(ne[ie]!==se[ie]){J=ne[ie],$=se[ie];break}return J<$?-1:$<J?1:0},e.prototype.includes=function(R,N,V){return-1!==this.indexOf(R,N,V)},e.prototype.indexOf=function(R,N,V){return c(this,R,N,V,!0)},e.prototype.lastIndexOf=function(R,N,V){return c(this,R,N,V,!1)},e.prototype.write=function(R,N,V,ee){if(void 0===N)ee="utf8",V=this.length,N=0;else if(void 0===V&&"string"==typeof N)ee=N,V=this.length,N=0;else{if(!isFinite(N))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");N>>>=0,isFinite(V)?(V>>>=0,void 0===ee&&(ee="utf8")):(ee=V,V=void 0)}var j=this.length-N;if((void 0===V||V>j)&&(V=j),R.length>0&&(V<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");for(var J=!1;;)switch(ee){case"hex":return m(this,R,N,V);case"utf8":case"utf-8":return d(this,R,N,V);case"ascii":return o(this,R,N,V);case"latin1":case"binary":return b(this,R,N,V);case"base64":return g(this,R,N,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,R,N,V);default:if(J)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),J=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(R,N){var V=this.length;(R=~~R)<0?(R+=V)<0&&(R=0):R>V&&(R=V),(N=void 0===N?V:~~N)<0?(N+=V)<0&&(N=0):N>V&&(N=V),N<R&&(N=R);var ee=this.subarray(R,N);return ee.__proto__=e.prototype,ee},e.prototype.readUIntLE=function(R,N,V){R>>>=0,N>>>=0,V||D(R,N,this.length);for(var ee=this[R],j=1,J=0;++J<N&&(j*=256);)ee+=this[R+J]*j;return ee},e.prototype.readUIntBE=function(R,N,V){R>>>=0,N>>>=0,V||D(R,N,this.length);for(var ee=this[R+--N],j=1;N>0&&(j*=256);)ee+=this[R+--N]*j;return ee},e.prototype.readUInt8=function(R,N){return R>>>=0,N||D(R,1,this.length),this[R]},e.prototype.readUInt16LE=function(R,N){return R>>>=0,N||D(R,2,this.length),this[R]|this[R+1]<<8},e.prototype.readUInt16BE=function(R,N){return R>>>=0,N||D(R,2,this.length),this[R]<<8|this[R+1]},e.prototype.readUInt32LE=function(R,N){return R>>>=0,N||D(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+16777216*this[R+3]},e.prototype.readUInt32BE=function(R,N){return R>>>=0,N||D(R,4,this.length),16777216*this[R]+(this[R+1]<<16|this[R+2]<<8|this[R+3])},e.prototype.readIntLE=function(R,N,V){R>>>=0,N>>>=0,V||D(R,N,this.length);for(var ee=this[R],j=1,J=0;++J<N&&(j*=256);)ee+=this[R+J]*j;return ee>=(j*=128)&&(ee-=Math.pow(2,8*N)),ee},e.prototype.readIntBE=function(R,N,V){R>>>=0,N>>>=0,V||D(R,N,this.length);for(var ee=N,j=1,J=this[R+--ee];ee>0&&(j*=256);)J+=this[R+--ee]*j;return J>=(j*=128)&&(J-=Math.pow(2,8*N)),J},e.prototype.readInt8=function(R,N){return R>>>=0,N||D(R,1,this.length),128&this[R]?-1*(255-this[R]+1):this[R]},e.prototype.readInt16LE=function(R,N){R>>>=0,N||D(R,2,this.length);var V=this[R]|this[R+1]<<8;return 32768&V?4294901760|V:V},e.prototype.readInt16BE=function(R,N){R>>>=0,N||D(R,2,this.length);var V=this[R+1]|this[R]<<8;return 32768&V?4294901760|V:V},e.prototype.readInt32LE=function(R,N){return R>>>=0,N||D(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},e.prototype.readInt32BE=function(R,N){return R>>>=0,N||D(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},e.prototype.readFloatLE=function(R,N){return R>>>=0,N||D(R,4,this.length),u.read(this,R,!0,23,4)},e.prototype.readFloatBE=function(R,N){return R>>>=0,N||D(R,4,this.length),u.read(this,R,!1,23,4)},e.prototype.readDoubleLE=function(R,N){return R>>>=0,N||D(R,8,this.length),u.read(this,R,!0,52,8)},e.prototype.readDoubleBE=function(R,N){return R>>>=0,N||D(R,8,this.length),u.read(this,R,!1,52,8)},e.prototype.writeUIntLE=function(R,N,V,ee){R=+R,N>>>=0,V>>>=0,ee||S(this,R,N,V,Math.pow(2,8*V)-1,0);var j=1,J=0;for(this[N]=255&R;++J<V&&(j*=256);)this[N+J]=R/j&255;return N+V},e.prototype.writeUIntBE=function(R,N,V,ee){R=+R,N>>>=0,V>>>=0,ee||S(this,R,N,V,Math.pow(2,8*V)-1,0);var j=V-1,J=1;for(this[N+j]=255&R;--j>=0&&(J*=256);)this[N+j]=R/J&255;return N+V},e.prototype.writeUInt8=function(R,N,V){return R=+R,N>>>=0,V||S(this,R,N,1,255,0),this[N]=255&R,N+1},e.prototype.writeUInt16LE=function(R,N,V){return R=+R,N>>>=0,V||S(this,R,N,2,65535,0),this[N]=255&R,this[N+1]=R>>>8,N+2},e.prototype.writeUInt16BE=function(R,N,V){return R=+R,N>>>=0,V||S(this,R,N,2,65535,0),this[N]=R>>>8,this[N+1]=255&R,N+2},e.prototype.writeUInt32LE=function(R,N,V){return R=+R,N>>>=0,V||S(this,R,N,4,4294967295,0),this[N+3]=R>>>24,this[N+2]=R>>>16,this[N+1]=R>>>8,this[N]=255&R,N+4},e.prototype.writeUInt32BE=function(R,N,V){return R=+R,N>>>=0,V||S(this,R,N,4,4294967295,0),this[N]=R>>>24,this[N+1]=R>>>16,this[N+2]=R>>>8,this[N+3]=255&R,N+4},e.prototype.writeIntLE=function(R,N,V,ee){if(R=+R,N>>>=0,!ee){var j=Math.pow(2,8*V-1);S(this,R,N,V,j-1,-j)}var J=0,$=1,re=0;for(this[N]=255&R;++J<V&&($*=256);)R<0&&0===re&&0!==this[N+J-1]&&(re=1),this[N+J]=(R/$>>0)-re&255;return N+V},e.prototype.writeIntBE=function(R,N,V,ee){if(R=+R,N>>>=0,!ee){var j=Math.pow(2,8*V-1);S(this,R,N,V,j-1,-j)}var J=V-1,$=1,re=0;for(this[N+J]=255&R;--J>=0&&($*=256);)R<0&&0===re&&0!==this[N+J+1]&&(re=1),this[N+J]=(R/$>>0)-re&255;return N+V},e.prototype.writeInt8=function(R,N,V){return R=+R,N>>>=0,V||S(this,R,N,1,127,-128),R<0&&(R=255+R+1),this[N]=255&R,N+1},e.prototype.writeInt16LE=function(R,N,V){return R=+R,N>>>=0,V||S(this,R,N,2,32767,-32768),this[N]=255&R,this[N+1]=R>>>8,N+2},e.prototype.writeInt16BE=function(R,N,V){return R=+R,N>>>=0,V||S(this,R,N,2,32767,-32768),this[N]=R>>>8,this[N+1]=255&R,N+2},e.prototype.writeInt32LE=function(R,N,V){return R=+R,N>>>=0,V||S(this,R,N,4,2147483647,-2147483648),this[N]=255&R,this[N+1]=R>>>8,this[N+2]=R>>>16,this[N+3]=R>>>24,N+4},e.prototype.writeInt32BE=function(R,N,V){return R=+R,N>>>=0,V||S(this,R,N,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[N]=R>>>24,this[N+1]=R>>>16,this[N+2]=R>>>8,this[N+3]=255&R,N+4},e.prototype.writeFloatLE=function(R,N,V){return z(this,R,N,!0,V)},e.prototype.writeFloatBE=function(R,N,V){return z(this,R,N,!1,V)},e.prototype.writeDoubleLE=function(R,N,V){return B(this,R,N,!0,V)},e.prototype.writeDoubleBE=function(R,N,V){return B(this,R,N,!1,V)},e.prototype.copy=function(R,N,V,ee){if(!e.isBuffer(R))throw new TypeError("argument should be a Buffer");if(V||(V=0),ee||0===ee||(ee=this.length),N>=R.length&&(N=R.length),N||(N=0),ee>0&&ee<V&&(ee=V),ee===V||0===R.length||0===this.length)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),R.length-N<ee-V&&(ee=R.length-N+V);var j=ee-V;if(this===R&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(N,V,ee);else if(this===R&&V<N&&N<ee)for(var J=j-1;J>=0;--J)R[J+N]=this[J+V];else Uint8Array.prototype.set.call(R,this.subarray(V,ee),N);return j},e.prototype.fill=function(R,N,V,ee){if("string"==typeof R){if("string"==typeof N?(ee=N,N=0,V=this.length):"string"==typeof V&&(ee=V,V=this.length),void 0!==ee&&"string"!=typeof ee)throw new TypeError("encoding must be a string");if("string"==typeof ee&&!e.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(1===R.length){var j=R.charCodeAt(0);("utf8"===ee&&j<128||"latin1"===ee)&&(R=j)}}else"number"==typeof R&&(R&=255);if(N<0||this.length<N||this.length<V)throw new RangeError("Out of range index");if(V<=N)return this;var J;if(N>>>=0,V=void 0===V?this.length:V>>>0,R||(R=0),"number"==typeof R)for(J=N;J<V;++J)this[J]=R;else{var $=e.isBuffer(R)?R:e.from(R,ee),re=$.length;if(0===re)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(J=0;J<V-N;++J)this[J+N]=$[J%re]}return this};var U=/[^+/0-9A-Za-z-_]/g;function G(R){return R<16?"0"+R.toString(16):R.toString(16)}function X(R,N){var V;N=N||1/0;for(var ee=R.length,j=null,J=[],$=0;$<ee;++$){if((V=R.charCodeAt($))>55295&&V<57344){if(!j){if(V>56319){(N-=3)>-1&&J.push(239,191,189);continue}if($+1===ee){(N-=3)>-1&&J.push(239,191,189);continue}j=V;continue}if(V<56320){(N-=3)>-1&&J.push(239,191,189),j=V;continue}V=65536+(j-55296<<10|V-56320)}else j&&(N-=3)>-1&&J.push(239,191,189);if(j=null,V<128){if((N-=1)<0)break;J.push(V)}else if(V<2048){if((N-=2)<0)break;J.push(V>>6|192,63&V|128)}else if(V<65536){if((N-=3)<0)break;J.push(V>>12|224,V>>6&63|128,63&V|128)}else{if(!(V<1114112))throw new Error("Invalid code point");if((N-=4)<0)break;J.push(V>>18|240,V>>12&63|128,V>>6&63|128,63&V|128)}}return J}function Z(R){return v.toByteArray(function(N){if((N=(N=N.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;N.length%4!=0;)N+="=";return N}(R))}function q(R,N,V,ee){for(var j=0;j<ee&&!(j+V>=N.length||j>=R.length);++j)N[j+V]=R[j];return j}function W(R,N){return R instanceof N||null!=R&&null!=R.constructor&&null!=R.constructor.name&&R.constructor.name===N.name}function te(R){return R!=R}}).call(this)}).call(this,x("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(x,Q,K){Q.exports=function(p,v,u){return v<u?p<v?v:p>u?u:p:p<u?u:p>v?v:p}},{}],87:[function(x,Q,K){"use strict";var p=x("clamp");function v(u,y){null==y&&(y=!0);var e=u[0],n=u[1],t=u[2],a=u[3];return null==a&&(a=y?1:255),y&&(e*=255,n*=255,t*=255,a*=255),16777216*(e=255&p(e,0,255))+((n=255&p(n,0,255))<<16)+((t=255&p(t,0,255))<<8)+(255&p(a,0,255))}Q.exports=v,Q.exports.to=v,Q.exports.from=function(u,y){var e=(u=+u)>>>24,n=(16711680&u)>>>16,t=(65280&u)>>>8,a=255&u;return!1===y?[e,n,t,a]:[e/255,n/255,t/255,a/255]}},{clamp:86}],88:[function(x,Q,K){"use strict";Q.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(x,Q,K){"use strict";var p=x("color-rgba"),v=x("clamp"),u=x("dtype");Q.exports=function(y,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var a,n=new(u(e))(4),t="uint8"!==e&&"uint8_clamped"!==e;return y.length&&"string"!=typeof y||((y=p(y))[0]/=255,y[1]/=255,y[2]/=255),(a=y)instanceof Uint8Array||a instanceof Uint8ClampedArray||Array.isArray(a)&&(a[0]>1||0===a[0])&&(a[1]>1||0===a[1])&&(a[2]>1||0===a[2])&&(!a[3]||a[3]>1)?(n[0]=y[0],n[1]=y[1],n[2]=y[2],n[3]=null!=y[3]?y[3]:255,t&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(t?(n[0]=y[0],n[1]=y[1],n[2]=y[2],n[3]=null!=y[3]?y[3]:1):(n[0]=v(Math.floor(255*y[0]),0,255),n[1]=v(Math.floor(255*y[1]),0,255),n[2]=v(Math.floor(255*y[2]),0,255),n[3]=null==y[3]?255:v(Math.floor(255*y[3]),0,255)),n)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(x,Q,K){(function(p){(function(){"use strict";var v=x("color-name"),u=x("is-plain-obj"),y=x("defined");Q.exports=function(n){var t,a,r=[],f=1;if("string"==typeof n)if(v[n])r=v[n].slice(),a="rgb";else if("transparent"===n)f=0,a="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var s=(c=n.slice(1)).length;f=1,s<=4?(r=[parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16)],4===s&&(f=parseInt(c[3]+c[3],16)/255)):(r=[parseInt(c[0]+c[1],16),parseInt(c[2]+c[3],16),parseInt(c[4]+c[5],16)],8===s&&(f=parseInt(c[6]+c[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),a="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var i=t[1],l="rgb"===i,c=i.replace(/a$/,"");a=c,s="cmyk"===c?4:"gray"===c?1:3,r=t[2].trim().split(/\s*,\s*/).map(function(m,d){if(/%$/.test(m))return d===s?parseFloat(m)/100:"rgb"===c?255*parseFloat(m)/100:parseFloat(m);if("h"===c[d]){if(/deg$/.test(m))return parseFloat(m);if(void 0!==e[m])return e[m]}return parseFloat(m)}),i===c&&r.push(1),f=l||void 0===r[s]?1:r[s],r=r.slice(0,s)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(r=n.match(/([0-9]+)/g).map(function(m){return parseFloat(m)}),a=n.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(n))if(u(n)){var h=y(n.r,n.red,n.R,null);null!==h?(a="rgb",r=[h,y(n.g,n.green,n.G),y(n.b,n.blue,n.B)]):(a="hsl",r=[y(n.h,n.hue,n.H),y(n.s,n.saturation,n.S),y(n.l,n.lightness,n.L,n.b,n.brightness)]),f=y(n.a,n.alpha,n.opacity,1),null!=n.opacity&&(f/=100)}else(Array.isArray(n)||p.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(n))&&(r=[n[0],n[1],n[2]],a="rgb",f=4===n.length?n[3]:1);else a="rgb",r=[n>>>16,(65280&n)>>>8,255&n];return{space:a,values:r,alpha:f}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(x,Q,K){"use strict";var p=x("color-parse"),v=x("color-space/hsl"),u=x("clamp");Q.exports=function(y){var e,n=p(y);return n.space?((e=Array(3))[0]=u(n.values[0],0,255),e[1]=u(n.values[1],0,255),e[2]=u(n.values[2],0,255),"h"===n.space[0]&&(e=v.rgb(e)),e.push(u(n.alpha,0,1)),e):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(x,Q,K){"use strict";var p=x("./rgb");Q.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(v){var u,y,e,n,t,a=v[0]/360,r=v[1]/100,f=v[2]/100;if(0===r)return[t=255*f,t,t];u=2*f-(y=f<.5?f*(1+r):f+r-f*r),n=[0,0,0];for(var s=0;s<3;s++)(e=a+1/3*-(s-1))<0?e++:e>1&&e--,n[s]=255*(t=6*e<1?u+6*(y-u)*e:2*e<1?y:3*e<2?u+(y-u)*(2/3-e)*6:u);return n}},p.hsl=function(v){var u,y,e=v[0]/255,n=v[1]/255,t=v[2]/255,a=Math.min(e,n,t),r=Math.max(e,n,t),f=r-a;return r===a?u=0:e===r?u=(n-t)/f:n===r?u=2+(t-e)/f:t===r&&(u=4+(e-n)/f),(u=Math.min(60*u,360))<0&&(u+=360),y=(a+r)/2,[u,100*(r===a?0:y<=.5?f/(r+a):f/(2-r-a)),100*y]}},{"./rgb":93}],93:[function(x,Q,K){"use strict";Q.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(x,Q,K){Q.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(x,Q,K){Q.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(x,Q,K){Q.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(x,Q,K){Q.exports=["normal","italic","oblique"]},{}],98:[function(x,Q,K){Q.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(x,Q,K){"use strict";Q.exports={parse:x("./parse"),stringify:x("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(x,Q,K){"use strict";var p=x("css-font-size-keywords");Q.exports={isSize:function(v){return/^[\d\.]/.test(v)||-1!==v.indexOf("/")||-1!==p.indexOf(v)}}},{"css-font-size-keywords":95}],101:[function(x,Q,K){"use strict";var p=x("unquote"),v=x("css-global-keywords"),u=x("css-system-font-keywords"),y=x("css-font-weight-keywords"),e=x("css-font-style-keywords"),n=x("css-font-stretch-keywords"),t=x("string-split-by"),a=x("./lib/util").isSize;Q.exports=f;var r=f.cache={};function f(i){if("string"!=typeof i)throw new Error("Font argument must be a string.");if(r[i])return r[i];if(""===i)throw new Error("Cannot parse an empty string.");if(-1!==u.indexOf(i))return r[i]={system:i};for(var l,c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},h=t(i,/\s+/);l=h.shift();){if(-1!==v.indexOf(l))return["style","variant","weight","stretch"].forEach(function(d){c[d]=l}),r[i]=c;if(-1===e.indexOf(l))if("normal"!==l&&"small-caps"!==l)if(-1===n.indexOf(l)){if(-1===y.indexOf(l)){if(a(l)){var m=t(l,"/");if(c.size=m[0],null!=m[1]?c.lineHeight=s(m[1]):"/"===h[0]&&(h.shift(),c.lineHeight=s(h.shift())),!h.length)throw new Error("Missing required font-family.");return c.family=t(h.join(" "),/\s*,\s*/).map(p),r[i]=c}throw new Error("Unknown or unsupported font token: "+l)}c.weight=l}else c.stretch=l;else c.variant=l;else c.style=l}throw new Error("Missing required font-size.")}function s(i){var l=parseFloat(i);return l.toString()===i?l:i}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(x,Q,K){"use strict";var p=x("pick-by-alias"),v=x("./lib/util").isSize,u=l(x("css-global-keywords")),y=l(x("css-system-font-keywords")),e=l(x("css-font-weight-keywords")),n=l(x("css-font-style-keywords")),t=l(x("css-font-stretch-keywords")),a={normal:1,"small-caps":1},r={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},s="serif";function i(c,h){if(c&&!h[c]&&!u[c])throw Error("Unknown keyword `"+c+"`");return c}function l(c){for(var h={},m=0;m<c.length;m++)h[c[m]]=1;return h}Q.exports=function(c){if((c=p(c,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return c.system&&i(c.system,y),c.system;if(i(c.style,n),i(c.variant,a),i(c.weight,e),i(c.stretch,t),null==c.size&&(c.size="1rem"),"number"==typeof c.size&&(c.size+="px"),!v)throw Error("Bad size value `"+c.size+"`");c.family||(c.family=s),Array.isArray(c.family)&&(c.family.length||(c.family=[s]),c.family=c.family.map(function(m){return r[m]?m:'"'+m+'"'}).join(", "));var h=[];return h.push(c.style),c.variant!==c.style&&h.push(c.variant),c.weight!==c.variant&&c.weight!==c.style&&h.push(c.weight),c.stretch!==c.weight&&c.stretch!==c.variant&&c.stretch!==c.style&&h.push(c.stretch),h.push(c.size+(null==c.lineHeight||"normal"===c.lineHeight||c.lineHeight+""=="1"?"":"/"+c.lineHeight)),h.push(c.family),h.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(x,Q,K){Q.exports=["inherit","initial","unset"]},{}],104:[function(x,Q,K){Q.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(x,Q,K){"use strict";var p,v=x("type/value/is"),u=x("type/value/ensure"),y=x("type/plain-function/ensure"),e=x("es5-ext/object/copy"),n=x("es5-ext/object/normalize-options"),t=x("es5-ext/object/map"),a=Function.prototype.bind,r=Object.defineProperty,f=Object.prototype.hasOwnProperty;p=function(s,i,l){var c,h=u(i)&&y(i.value);return delete(c=e(i)).writable,delete c.value,c.get=function(){return!l.overwriteDefinition&&f.call(this,s)?h:(i.value=a.call(h,l.resolveContext?l.resolveContext(this):this),r(this,s,i),this[s])},c},Q.exports=function(s){var i=n(arguments[1]);return v(i.resolveContext)&&y(i.resolveContext),t(s,function(l,c){return p(c,l,i)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(x,Q,K){"use strict";var p=x("type/value/is"),v=x("type/plain-function/is"),u=x("es5-ext/object/assign"),y=x("es5-ext/object/normalize-options"),e=x("es5-ext/string/#/contains");(Q.exports=function(n,t){var a,r,f,s,i;return arguments.length<2||"string"!=typeof n?(s=t,t=n,n=null):s=arguments[2],p(n)?(a=e.call(n,"c"),r=e.call(n,"e"),f=e.call(n,"w")):(a=f=!0,r=!1),i={value:t,configurable:a,enumerable:r,writable:f},s?u(y(s),i):i}).gs=function(n,t,a){var r,f,s,i;return"string"!=typeof n?(s=a,a=t,t=n,n=null):s=arguments[3],p(t)?v(t)?p(a)?v(a)||(s=a,a=void 0):a=void 0:(s=t,t=a=void 0):t=void 0,p(n)?(r=e.call(n,"c"),f=e.call(n,"e")):(r=!0,f=!1),i={get:t,set:a,configurable:r,enumerable:f},s?u(y(s),i):i}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(x,Q,K){(function(p){"use strict";function v(D,S){return D<S?-1:D>S?1:D>=S?0:NaN}function u(D){var S;return 1===D.length&&(S=D,D=function(C,z){return v(S(C),z)}),{left:function(C,z,B,U){for(null==B&&(B=0),null==U&&(U=C.length);B<U;){var G=B+U>>>1;D(C[G],z)<0?B=G+1:U=G}return B},right:function(C,z,B,U){for(null==B&&(B=0),null==U&&(U=C.length);B<U;){var G=B+U>>>1;D(C[G],z)>0?U=G:B=G+1}return B}}}var y=u(v),e=y.right,n=y.left;function t(D,S){return[D,S]}function a(D){return null===D?NaN:+D}function r(D,S){var C,z,B=D.length,U=0,G=-1,X=0,Z=0;if(null==S)for(;++G<B;)isNaN(C=a(D[G]))||(Z+=(z=C-X)*(C-(X+=z/++U)));else for(;++G<B;)isNaN(C=a(S(D[G],G,D)))||(Z+=(z=C-X)*(C-(X+=z/++U)));if(U>1)return Z/(U-1)}function f(D,S){var C=r(D,S);return C&&Math.sqrt(C)}function s(D,S){var C,z,B,U=D.length,G=-1;if(null==S){for(;++G<U;)if(null!=(C=D[G])&&C>=C)for(z=B=C;++G<U;)null!=(C=D[G])&&(z>C&&(z=C),B<C&&(B=C))}else for(;++G<U;)if(null!=(C=S(D[G],G,D))&&C>=C)for(z=B=C;++G<U;)null!=(C=S(D[G],G,D))&&(z>C&&(z=C),B<C&&(B=C));return[z,B]}var i=Array.prototype,l=i.slice,c=i.map;function h(D){return function(){return D}}function m(D){return D}function d(D,S,C){D=+D,S=+S,C=(B=arguments.length)<2?(S=D,D=0,1):B<3?1:+C;for(var z=-1,B=0|Math.max(0,Math.ceil((S-D)/C)),U=new Array(B);++z<B;)U[z]=D+z*C;return U}var o=Math.sqrt(50),b=Math.sqrt(10),g=Math.sqrt(2);function w(D,S,C){var z=(S-D)/Math.max(0,C),B=Math.floor(Math.log(z)/Math.LN10),U=z/Math.pow(10,B);return B>=0?(U>=o?10:U>=b?5:U>=g?2:1)*Math.pow(10,B):-Math.pow(10,-B)/(U>=o?10:U>=b?5:U>=g?2:1)}function _(D,S,C){var z=Math.abs(S-D)/Math.max(0,C),B=Math.pow(10,Math.floor(Math.log(z)/Math.LN10)),U=z/B;return U>=o?B*=10:U>=b?B*=5:U>=g&&(B*=2),S<D?-B:B}function A(D){return Math.ceil(Math.log(D.length)/Math.LN2)+1}function T(D,S,C){if(null==C&&(C=a),z=D.length){if((S=+S)<=0||z<2)return+C(D[0],0,D);if(S>=1)return+C(D[z-1],z-1,D);var z,B=(z-1)*S,U=Math.floor(B),G=+C(D[U],U,D);return G+(+C(D[U+1],U+1,D)-G)*(B-U)}}function E(D,S){var C,z,B=D.length,U=-1;if(null==S){for(;++U<B;)if(null!=(C=D[U])&&C>=C)for(z=C;++U<B;)null!=(C=D[U])&&z>C&&(z=C)}else for(;++U<B;)if(null!=(C=S(D[U],U,D))&&C>=C)for(z=C;++U<B;)null!=(C=S(D[U],U,D))&&z>C&&(z=C);return z}function k(D){if(!(B=D.length))return[];for(var S=-1,C=E(D,O),z=new Array(C);++S<C;)for(var B,U=-1,G=z[S]=new Array(B);++U<B;)G[U]=D[U][S];return z}function O(D){return D.length}p.bisect=e,p.bisectRight=e,p.bisectLeft=n,p.ascending=v,p.bisector=u,p.cross=function(D,S,C){var z,B,U,G,X=D.length,Z=S.length,q=new Array(X*Z);for(null==C&&(C=t),z=U=0;z<X;++z)for(G=D[z],B=0;B<Z;++B,++U)q[U]=C(G,S[B]);return q},p.descending=function(D,S){return S<D?-1:S>D?1:S>=D?0:NaN},p.deviation=f,p.extent=s,p.histogram=function(){var D=m,S=s,C=A;function z(B){var U,G,X=B.length,Z=new Array(X);for(U=0;U<X;++U)Z[U]=D(B[U],U,B);var q=S(Z),W=q[0],te=q[1],R=C(Z,W,te);Array.isArray(R)||(R=_(W,te,R),R=d(Math.ceil(W/R)*R,te,R));for(var N=R.length;R[0]<=W;)R.shift(),--N;for(;R[N-1]>te;)R.pop(),--N;var V,ee=new Array(N+1);for(U=0;U<=N;++U)(V=ee[U]=[]).x0=U>0?R[U-1]:W,V.x1=U<N?R[U]:te;for(U=0;U<X;++U)W<=(G=Z[U])&&G<=te&&ee[e(R,G,0,N)].push(B[U]);return ee}return z.value=function(B){return arguments.length?(D="function"==typeof B?B:h(B),z):D},z.domain=function(B){return arguments.length?(S="function"==typeof B?B:h([B[0],B[1]]),z):S},z.thresholds=function(B){return arguments.length?(C="function"==typeof B?B:Array.isArray(B)?h(l.call(B)):h(B),z):C},z},p.thresholdFreedmanDiaconis=function(D,S,C){return D=c.call(D,a).sort(v),Math.ceil((C-S)/(2*(T(D,.75)-T(D,.25))*Math.pow(D.length,-1/3)))},p.thresholdScott=function(D,S,C){return Math.ceil((C-S)/(3.5*f(D)*Math.pow(D.length,-1/3)))},p.thresholdSturges=A,p.max=function(D,S){var C,z,B=D.length,U=-1;if(null==S){for(;++U<B;)if(null!=(C=D[U])&&C>=C)for(z=C;++U<B;)null!=(C=D[U])&&C>z&&(z=C)}else for(;++U<B;)if(null!=(C=S(D[U],U,D))&&C>=C)for(z=C;++U<B;)null!=(C=S(D[U],U,D))&&C>z&&(z=C);return z},p.mean=function(D,S){var C,z=D.length,B=z,U=-1,G=0;if(null==S)for(;++U<z;)isNaN(C=a(D[U]))?--B:G+=C;else for(;++U<z;)isNaN(C=a(S(D[U],U,D)))?--B:G+=C;if(B)return G/B},p.median=function(D,S){var C,z=D.length,B=-1,U=[];if(null==S)for(;++B<z;)isNaN(C=a(D[B]))||U.push(C);else for(;++B<z;)isNaN(C=a(S(D[B],B,D)))||U.push(C);return T(U.sort(v),.5)},p.merge=function(D){for(var S,C,z,B=D.length,U=-1,G=0;++U<B;)G+=D[U].length;for(C=new Array(G);--B>=0;)for(S=(z=D[B]).length;--S>=0;)C[--G]=z[S];return C},p.min=E,p.pairs=function(D,S){null==S&&(S=t);for(var C=0,z=D.length-1,B=D[0],U=new Array(z<0?0:z);C<z;)U[C]=S(B,B=D[++C]);return U},p.permute=function(D,S){for(var C=S.length,z=new Array(C);C--;)z[C]=D[S[C]];return z},p.quantile=T,p.range=d,p.scan=function(D,S){if(C=D.length){var C,z,B=0,U=0,G=D[U];for(null==S&&(S=v);++B<C;)(S(z=D[B],G)<0||0!==S(G,G))&&(G=z,U=B);return 0===S(G,G)?U:void 0}},p.shuffle=function(D,S,C){for(var z,B,U=(null==C?D.length:C)-(S=null==S?0:+S);U;)B=Math.random()*U--|0,z=D[U+S],D[U+S]=D[B+S],D[B+S]=z;return D},p.sum=function(D,S){var C,z=D.length,B=-1,U=0;if(null==S)for(;++B<z;)(C=+D[B])&&(U+=C);else for(;++B<z;)(C=+S(D[B],B,D))&&(U+=C);return U},p.ticks=function(D,S,C){var z,B,U,G,X=-1;if(C=+C,(D=+D)==(S=+S)&&C>0)return[D];if((z=S<D)&&(B=D,D=S,S=B),0===(G=w(D,S,C))||!isFinite(G))return[];if(G>0)for(D=Math.ceil(D/G),S=Math.floor(S/G),U=new Array(B=Math.ceil(S-D+1));++X<B;)U[X]=(D+X)*G;else for(D=Math.floor(D*G),S=Math.ceil(S*G),U=new Array(B=Math.ceil(D-S+1));++X<B;)U[X]=(D-X)/G;return z&&U.reverse(),U},p.tickIncrement=w,p.tickStep=_,p.transpose=k,p.variance=r,p.zip=function(){return k(arguments)},Object.defineProperty(p,"__esModule",{value:!0})})("object"==typeof K&&void 0!==Q?K:this.d3=this.d3||{})},{}],108:[function(x,Q,K){(function(p){"use strict";function v(){}function u(s,i){var l=new v;if(s instanceof v)s.each(function(o,b){l.set(b,o)});else if(Array.isArray(s)){var c,h=-1,m=s.length;if(null==i)for(;++h<m;)l.set(h,s[h]);else for(;++h<m;)l.set(i(c=s[h],h,s),c)}else if(s)for(var d in s)l.set(d,s[d]);return l}function y(){return{}}function e(s,i,l){s[i]=l}function n(){return u()}function t(s,i,l){s.set(i,l)}function a(){}v.prototype=u.prototype={constructor:v,has:function(s){return"$"+s in this},get:function(s){return this["$"+s]},set:function(s,i){return this["$"+s]=i,this},remove:function(s){var i="$"+s;return i in this&&delete this[i]},clear:function(){for(var s in this)"$"===s[0]&&delete this[s]},keys:function(){var s=[];for(var i in this)"$"===i[0]&&s.push(i.slice(1));return s},values:function(){var s=[];for(var i in this)"$"===i[0]&&s.push(this[i]);return s},entries:function(){var s=[];for(var i in this)"$"===i[0]&&s.push({key:i.slice(1),value:this[i]});return s},size:function(){var s=0;for(var i in this)"$"===i[0]&&++s;return s},empty:function(){for(var s in this)if("$"===s[0])return!1;return!0},each:function(s){for(var i in this)"$"===i[0]&&s(this[i],i.slice(1),this)}};var r=u.prototype;function f(s,i){var l=new a;if(s instanceof a)s.each(function(m){l.add(m)});else if(s){var c=-1,h=s.length;if(null==i)for(;++c<h;)l.add(s[c]);else for(;++c<h;)l.add(i(s[c],c,s))}return l}a.prototype=f.prototype={constructor:a,has:r.has,add:function(s){return this["$"+(s+="")]=s,this},remove:r.remove,clear:r.clear,values:r.keys,size:r.size,empty:r.empty,each:r.each},p.nest=function(){var s,i,l,c=[],h=[];function m(d,o,b,g){if(o>=c.length)return null!=s&&d.sort(s),null!=i?i(d):d;for(var w,_,A,T=-1,E=d.length,k=c[o++],O=u(),D=b();++T<E;)(A=O.get(w=k(_=d[T])+""))?A.push(_):O.set(w,[_]);return O.each(function(S,C){g(D,C,m(S,o,b,g))}),D}return l={object:function(d){return m(d,0,y,e)},map:function(d){return m(d,0,n,t)},entries:function(d){return function o(b,g){if(++g>c.length)return b;var w,_=h[g-1];return null!=i&&g>=c.length?w=b.entries():(w=[],b.each(function(A,T){w.push({key:T,values:o(A,g)})})),null!=_?w.sort(function(A,T){return _(A.key,T.key)}):w}(m(d,0,n,t),0)},key:function(d){return c.push(d),l},sortKeys:function(d){return h[c.length-1]=d,l},sortValues:function(d){return s=d,l},rollup:function(d){return i=d,l}}},p.set=f,p.map=u,p.keys=function(s){var i=[];for(var l in s)i.push(l);return i},p.values=function(s){var i=[];for(var l in s)i.push(s[l]);return i},p.entries=function(s){var i=[];for(var l in s)i.push({key:l,value:s[l]});return i},Object.defineProperty(p,"__esModule",{value:!0})})("object"==typeof K&&void 0!==Q?K:this.d3=this.d3||{})},{}],109:[function(x,Q,K){var p;p=this,function(p){"use strict";function v(he,me,Ae){he.prototype=me.prototype=Ae,Ae.constructor=he}function u(he,me){var Ae=Object.create(he.prototype);for(var we in me)Ae[we]=me[we];return Ae}function y(){}var e="\\s*([+-]?\\d+)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",a=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\("+[e,e,e]+"\\)$"),f=new RegExp("^rgb\\("+[t,t,t]+"\\)$"),s=new RegExp("^rgba\\("+[e,e,e,n]+"\\)$"),i=new RegExp("^rgba\\("+[t,t,t,n]+"\\)$"),l=new RegExp("^hsl\\("+[n,t,t]+"\\)$"),c=new RegExp("^hsla\\("+[n,t,t,n]+"\\)$"),h={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function m(){return this.rgb().formatHex()}function d(){return this.rgb().formatRgb()}function o(he){var me,Ae;return he=(he+"").trim().toLowerCase(),(me=a.exec(he))?(Ae=me[1].length,me=parseInt(me[1],16),6===Ae?b(me):3===Ae?new A(me>>8&15|me>>4&240,me>>4&15|240&me,(15&me)<<4|15&me,1):8===Ae?g(me>>24&255,me>>16&255,me>>8&255,(255&me)/255):4===Ae?g(me>>12&15|me>>8&240,me>>8&15|me>>4&240,me>>4&15|240&me,((15&me)<<4|15&me)/255):null):(me=r.exec(he))?new A(me[1],me[2],me[3],1):(me=f.exec(he))?new A(255*me[1]/100,255*me[2]/100,255*me[3]/100,1):(me=s.exec(he))?g(me[1],me[2],me[3],me[4]):(me=i.exec(he))?g(255*me[1]/100,255*me[2]/100,255*me[3]/100,me[4]):(me=l.exec(he))?O(me[1],me[2]/100,me[3]/100,1):(me=c.exec(he))?O(me[1],me[2]/100,me[3]/100,me[4]):h.hasOwnProperty(he)?b(h[he]):"transparent"===he?new A(NaN,NaN,NaN,0):null}function b(he){return new A(he>>16&255,he>>8&255,255&he,1)}function g(he,me,Ae,we){return we<=0&&(he=me=Ae=NaN),new A(he,me,Ae,we)}function w(he){return he instanceof y||(he=o(he)),he?new A((he=he.rgb()).r,he.g,he.b,he.opacity):new A}function _(he,me,Ae,we){return 1===arguments.length?w(he):new A(he,me,Ae,null==we?1:we)}function A(he,me,Ae,we){this.r=+he,this.g=+me,this.b=+Ae,this.opacity=+we}function T(){return"#"+k(this.r)+k(this.g)+k(this.b)}function E(){var he=this.opacity;return(1===(he=isNaN(he)?1:Math.max(0,Math.min(1,he)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===he?")":", "+he+")")}function k(he){return((he=Math.max(0,Math.min(255,Math.round(he)||0)))<16?"0":"")+he.toString(16)}function O(he,me,Ae,we){return we<=0?he=me=Ae=NaN:Ae<=0||Ae>=1?he=me=NaN:me<=0&&(he=NaN),new C(he,me,Ae,we)}function D(he){if(he instanceof C)return new C(he.h,he.s,he.l,he.opacity);if(he instanceof y||(he=o(he)),!he)return new C;if(he instanceof C)return he;var me=(he=he.rgb()).r/255,Ae=he.g/255,we=he.b/255,Se=Math.min(me,Ae,we),Pe=Math.max(me,Ae,we),ze=NaN,He=Pe-Se,tt=(Pe+Se)/2;return He?(ze=me===Pe?(Ae-we)/He+6*(Ae<we):Ae===Pe?(we-me)/He+2:(me-Ae)/He+4,He/=tt<.5?Pe+Se:2-Pe-Se,ze*=60):He=tt>0&&tt<1?0:ze,new C(ze,He,tt,he.opacity)}function S(he,me,Ae,we){return 1===arguments.length?D(he):new C(he,me,Ae,null==we?1:we)}function C(he,me,Ae,we){this.h=+he,this.s=+me,this.l=+Ae,this.opacity=+we}function z(he,me,Ae){return 255*(he<60?me+(Ae-me)*he/60:he<180?Ae:he<240?me+(Ae-me)*(240-he)/60:me)}v(y,o,{copy:function(he){return Object.assign(new this.constructor,this,he)},displayable:function(){return this.rgb().displayable()},hex:m,formatHex:m,formatHsl:function(){return D(this).formatHsl()},formatRgb:d,toString:d}),v(A,_,u(y,{brighter:function(he){return he=null==he?1/.7:Math.pow(1/.7,he),new A(this.r*he,this.g*he,this.b*he,this.opacity)},darker:function(he){return he=null==he?.7:Math.pow(.7,he),new A(this.r*he,this.g*he,this.b*he,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T,formatHex:T,formatRgb:E,toString:E})),v(C,S,u(y,{brighter:function(he){return he=null==he?1/.7:Math.pow(1/.7,he),new C(this.h,this.s,this.l*he,this.opacity)},darker:function(he){return he=null==he?.7:Math.pow(.7,he),new C(this.h,this.s,this.l*he,this.opacity)},rgb:function(){var he=this.h%360+360*(this.h<0),me=isNaN(he)||isNaN(this.s)?0:this.s,Ae=this.l,we=Ae+(Ae<.5?Ae:1-Ae)*me,Se=2*Ae-we;return new A(z(he>=240?he-240:he+120,Se,we),z(he,Se,we),z(he<120?he+240:he-120,Se,we),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var he=this.opacity;return(1===(he=isNaN(he)?1:Math.max(0,Math.min(1,he)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===he?")":", "+he+")")}}));var B=Math.PI/180,U=180/Math.PI,G=6/29,X=3*G*G;function Z(he){if(he instanceof W)return new W(he.l,he.a,he.b,he.opacity);if(he instanceof J)return $(he);he instanceof A||(he=w(he));var me,Ae,we=V(he.r),Se=V(he.g),Pe=V(he.b),ze=te((.2225045*we+.7168786*Se+.0606169*Pe)/1);return we===Se&&Se===Pe?me=Ae=ze:(me=te((.4360747*we+.3850649*Se+.1430804*Pe)/.96422),Ae=te((.0139322*we+.0971045*Se+.7141733*Pe)/.82521)),new W(116*ze-16,500*(me-ze),200*(ze-Ae),he.opacity)}function q(he,me,Ae,we){return 1===arguments.length?Z(he):new W(he,me,Ae,null==we?1:we)}function W(he,me,Ae,we){this.l=+he,this.a=+me,this.b=+Ae,this.opacity=+we}function te(he){return he>.008856451679035631?Math.pow(he,1/3):he/X+4/29}function R(he){return he>G?he*he*he:X*(he-4/29)}function N(he){return 255*(he<=.0031308?12.92*he:1.055*Math.pow(he,1/2.4)-.055)}function V(he){return(he/=255)<=.04045?he/12.92:Math.pow((he+.055)/1.055,2.4)}function ee(he){if(he instanceof J)return new J(he.h,he.c,he.l,he.opacity);if(he instanceof W||(he=Z(he)),0===he.a&&0===he.b)return new J(NaN,0<he.l&&he.l<100?0:NaN,he.l,he.opacity);var me=Math.atan2(he.b,he.a)*U;return new J(me<0?me+360:me,Math.sqrt(he.a*he.a+he.b*he.b),he.l,he.opacity)}function j(he,me,Ae,we){return 1===arguments.length?ee(he):new J(he,me,Ae,null==we?1:we)}function J(he,me,Ae,we){this.h=+he,this.c=+me,this.l=+Ae,this.opacity=+we}function $(he){if(isNaN(he.h))return new W(he.l,0,0,he.opacity);var me=he.h*B;return new W(he.l,Math.cos(me)*he.c,Math.sin(me)*he.c,he.opacity)}v(W,q,u(y,{brighter:function(he){return new W(this.l+18*(null==he?1:he),this.a,this.b,this.opacity)},darker:function(he){return new W(this.l-18*(null==he?1:he),this.a,this.b,this.opacity)},rgb:function(){var he=(this.l+16)/116,me=isNaN(this.a)?he:he+this.a/500,Ae=isNaN(this.b)?he:he-this.b/200;return new A(N(3.1338561*(me=.96422*R(me))-1.6168667*(he=1*R(he))-.4906146*(Ae=.82521*R(Ae))),N(-.9787684*me+1.9161415*he+.033454*Ae),N(.0719453*me-.2289914*he+1.4052427*Ae),this.opacity)}})),v(J,j,u(y,{brighter:function(he){return new J(this.h,this.c,this.l+18*(null==he?1:he),this.opacity)},darker:function(he){return new J(this.h,this.c,this.l-18*(null==he?1:he),this.opacity)},rgb:function(){return $(this).rgb()}}));var ne=1.78277,se=-.29227,ie=-.90649,ue=1.97294,le=ue*ie,de=ue*ne,ve=ne*se- -.14861*ie;function _e(he){if(he instanceof Te)return new Te(he.h,he.s,he.l,he.opacity);he instanceof A||(he=w(he));var Ae=he.g/255,we=he.b/255,Se=(ve*we+le*(he.r/255)-de*Ae)/(ve+le-de),Pe=we-Se,ze=(ue*(Ae-Se)-se*Pe)/ie,He=Math.sqrt(ze*ze+Pe*Pe)/(ue*Se*(1-Se)),tt=He?Math.atan2(ze,Pe)*U-120:NaN;return new Te(tt<0?tt+360:tt,He,Se,he.opacity)}function be(he,me,Ae,we){return 1===arguments.length?_e(he):new Te(he,me,Ae,null==we?1:we)}function Te(he,me,Ae,we){this.h=+he,this.s=+me,this.l=+Ae,this.opacity=+we}v(Te,be,u(y,{brighter:function(he){return he=null==he?1/.7:Math.pow(1/.7,he),new Te(this.h,this.s,this.l*he,this.opacity)},darker:function(he){return he=null==he?.7:Math.pow(.7,he),new Te(this.h,this.s,this.l*he,this.opacity)},rgb:function(){var he=isNaN(this.h)?0:(this.h+120)*B,me=+this.l,Ae=isNaN(this.s)?0:this.s*me*(1-me),we=Math.cos(he),Se=Math.sin(he);return new A(255*(me+Ae*(-.14861*we+ne*Se)),255*(me+Ae*(se*we+ie*Se)),255*(me+Ae*(ue*we)),this.opacity)}})),p.color=o,p.cubehelix=be,p.gray=function(he,me){return new W(he,0,0,null==me?1:me)},p.hcl=j,p.hsl=S,p.lab=q,p.lch=function(he,me,Ae,we){return 1===arguments.length?ee(he):new J(Ae,me,he,null==we?1:we)},p.rgb=_,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof K&&void 0!==Q?K:(p=p||self).d3=p.d3||{})},{}],110:[function(x,Q,K){var p;p=this,function(p){"use strict";var v={value:function(){}};function u(){for(var a,r=0,f=arguments.length,s={};r<f;++r){if(!(a=arguments[r]+"")||a in s||/[\s.]/.test(a))throw new Error("illegal type: "+a);s[a]=[]}return new y(s)}function y(a){this._=a}function e(a,r){return a.trim().split(/^|\s+/).map(function(f){var s="",i=f.indexOf(".");if(i>=0&&(s=f.slice(i+1),f=f.slice(0,i)),f&&!r.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:s}})}function n(a,r){for(var f,s=0,i=a.length;s<i;++s)if((f=a[s]).name===r)return f.value}function t(a,r,f){for(var s=0,i=a.length;s<i;++s)if(a[s].name===r){a[s]=v,a=a.slice(0,s).concat(a.slice(s+1));break}return null!=f&&a.push({name:r,value:f}),a}y.prototype=u.prototype={constructor:y,on:function(a,r){var f,s=this._,i=e(a+"",s),l=-1,c=i.length;if(!(arguments.length<2)){if(null!=r&&"function"!=typeof r)throw new Error("invalid callback: "+r);for(;++l<c;)if(f=(a=i[l]).type)s[f]=t(s[f],a.name,r);else if(null==r)for(f in s)s[f]=t(s[f],a.name,null);return this}for(;++l<c;)if((f=(a=i[l]).type)&&(f=n(s[f],a.name)))return f},copy:function(){var a={},r=this._;for(var f in r)a[f]=r[f].slice();return new y(a)},call:function(a,r){if((f=arguments.length-2)>0)for(var f,s,i=new Array(f),l=0;l<f;++l)i[l]=arguments[l+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(l=0,f=(s=this._[a]).length;l<f;++l)s[l].value.apply(r,i)},apply:function(a,r,f){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var s=this._[a],i=0,l=s.length;i<l;++i)s[i].value.apply(r,f)}},p.dispatch=u,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof K&&void 0!==Q?K:(p=p||self).d3=p.d3||{})},{}],111:[function(x,Q,K){var p,v;p=this,v=function(p,v,u,y,e){"use strict";function n(h){return function(){return h}}function t(){return 1e-6*(Math.random()-.5)}function a(h){return h.x+h.vx}function r(h){return h.y+h.vy}function f(h){return h.index}function s(h,m){var d=h.get(m);if(!d)throw new Error("missing: "+m);return d}function i(h){return h.x}function l(h){return h.y}var c=Math.PI*(3-Math.sqrt(5));p.forceCenter=function(h,m){var d;function o(){var b,g,w=d.length,_=0,A=0;for(b=0;b<w;++b)_+=(g=d[b]).x,A+=g.y;for(_=_/w-h,A=A/w-m,b=0;b<w;++b)(g=d[b]).x-=_,g.y-=A}return null==h&&(h=0),null==m&&(m=0),o.initialize=function(b){d=b},o.x=function(b){return arguments.length?(h=+b,o):h},o.y=function(b){return arguments.length?(m=+b,o):m},o},p.forceCollide=function(h){var m,d,o=1,b=1;function g(){for(var A,T,E,k,O,D,S,C=m.length,z=0;z<b;++z)for(T=v.quadtree(m,a,r).visitAfter(w),A=0;A<C;++A)S=(D=d[(E=m[A]).index])*D,k=E.x+E.vx,O=E.y+E.vy,T.visit(B);function B(U,G,X,Z,q){var W=U.data,te=U.r,R=D+te;if(!W)return G>k+R||Z<k-R||X>O+R||q<O-R;if(W.index>E.index){var N=k-W.x-W.vx,V=O-W.y-W.vy,ee=N*N+V*V;ee<R*R&&(0===N&&(ee+=(N=t())*N),0===V&&(ee+=(V=t())*V),ee=(R-(ee=Math.sqrt(ee)))/ee*o,E.vx+=(N*=ee)*(R=(te*=te)/(S+te)),E.vy+=(V*=ee)*R,W.vx-=N*(R=1-R),W.vy-=V*R)}}}function w(A){if(A.data)return A.r=d[A.data.index];for(var T=A.r=0;T<4;++T)A[T]&&A[T].r>A.r&&(A.r=A[T].r)}function _(){if(m){var A,T,E=m.length;for(d=new Array(E),A=0;A<E;++A)d[(T=m[A]).index]=+h(T,A,m)}}return"function"!=typeof h&&(h=n(null==h?1:+h)),g.initialize=function(A){m=A,_()},g.iterations=function(A){return arguments.length?(b=+A,g):b},g.strength=function(A){return arguments.length?(o=+A,g):o},g.radius=function(A){return arguments.length?(h="function"==typeof A?A:n(+A),_(),g):h},g},p.forceLink=function(h){var m,d,o,b,g,w=f,_=function(S){return 1/Math.min(b[S.source.index],b[S.target.index])},A=n(30),T=1;function E(S){for(var C=0,z=h.length;C<T;++C)for(var B,U,G,X,Z,q,W,te=0;te<z;++te)U=(B=h[te]).source,X=(G=B.target).x+G.vx-U.x-U.vx||t(),Z=G.y+G.vy-U.y-U.vy||t(),X*=q=((q=Math.sqrt(X*X+Z*Z))-d[te])/q*S*m[te],Z*=q,G.vx-=X*(W=g[te]),G.vy-=Z*W,U.vx+=X*(W=1-W),U.vy+=Z*W}function k(){if(o){var S,C,z=o.length,B=h.length,U=u.map(o,w);for(S=0,b=new Array(z);S<B;++S)(C=h[S]).index=S,"object"!=typeof C.source&&(C.source=s(U,C.source)),"object"!=typeof C.target&&(C.target=s(U,C.target)),b[C.source.index]=(b[C.source.index]||0)+1,b[C.target.index]=(b[C.target.index]||0)+1;for(S=0,g=new Array(B);S<B;++S)g[S]=b[(C=h[S]).source.index]/(b[C.source.index]+b[C.target.index]);m=new Array(B),O(),d=new Array(B),D()}}function O(){if(o)for(var S=0,C=h.length;S<C;++S)m[S]=+_(h[S],S,h)}function D(){if(o)for(var S=0,C=h.length;S<C;++S)d[S]=+A(h[S],S,h)}return null==h&&(h=[]),E.initialize=function(S){o=S,k()},E.links=function(S){return arguments.length?(h=S,k(),E):h},E.id=function(S){return arguments.length?(w=S,E):w},E.iterations=function(S){return arguments.length?(T=+S,E):T},E.strength=function(S){return arguments.length?(_="function"==typeof S?S:n(+S),O(),E):_},E.distance=function(S){return arguments.length?(A="function"==typeof S?S:n(+S),D(),E):A},E},p.forceManyBody=function(){var h,m,d,o,b=n(-30),g=1,w=1/0,_=.81;function A(O){var D,S=h.length,C=v.quadtree(h,i,l).visitAfter(E);for(d=O,D=0;D<S;++D)m=h[D],C.visit(k)}function T(){if(h){var O,D,S=h.length;for(o=new Array(S),O=0;O<S;++O)o[(D=h[O]).index]=+b(D,O,h)}}function E(O){var D,S,C,z,B,U=0,G=0;if(O.length){for(C=z=B=0;B<4;++B)(D=O[B])&&(S=Math.abs(D.value))&&(U+=D.value,G+=S,C+=S*D.x,z+=S*D.y);O.x=C/G,O.y=z/G}else{(D=O).x=D.data.x,D.y=D.data.y;do{U+=o[D.data.index]}while(D=D.next)}O.value=U}function k(O,D,S,C){if(!O.value)return!0;var z=O.x-m.x,B=O.y-m.y,U=C-D,G=z*z+B*B;if(U*U/_<G)return G<w&&(0===z&&(G+=(z=t())*z),0===B&&(G+=(B=t())*B),G<g&&(G=Math.sqrt(g*G)),m.vx+=z*O.value*d/G,m.vy+=B*O.value*d/G),!0;if(!(O.length||G>=w)){(O.data!==m||O.next)&&(0===z&&(G+=(z=t())*z),0===B&&(G+=(B=t())*B),G<g&&(G=Math.sqrt(g*G)));do{O.data!==m&&(m.vx+=z*(U=o[O.data.index]*d/G),m.vy+=B*U)}while(O=O.next)}}return A.initialize=function(O){h=O,T()},A.strength=function(O){return arguments.length?(b="function"==typeof O?O:n(+O),T(),A):b},A.distanceMin=function(O){return arguments.length?(g=O*O,A):Math.sqrt(g)},A.distanceMax=function(O){return arguments.length?(w=O*O,A):Math.sqrt(w)},A.theta=function(O){return arguments.length?(_=O*O,A):Math.sqrt(_)},A},p.forceRadial=function(h,m,d){var o,b,g,w=n(.1);function _(T){for(var E=0,k=o.length;E<k;++E){var O=o[E],D=O.x-m||1e-6,S=O.y-d||1e-6,C=Math.sqrt(D*D+S*S),z=(g[E]-C)*b[E]*T/C;O.vx+=D*z,O.vy+=S*z}}function A(){if(o){var T,E=o.length;for(b=new Array(E),g=new Array(E),T=0;T<E;++T)g[T]=+h(o[T],T,o),b[T]=isNaN(g[T])?0:+w(o[T],T,o)}}return"function"!=typeof h&&(h=n(+h)),null==m&&(m=0),null==d&&(d=0),_.initialize=function(T){o=T,A()},_.strength=function(T){return arguments.length?(w="function"==typeof T?T:n(+T),A(),_):w},_.radius=function(T){return arguments.length?(h="function"==typeof T?T:n(+T),A(),_):h},_.x=function(T){return arguments.length?(m=+T,_):m},_.y=function(T){return arguments.length?(d=+T,_):d},_},p.forceSimulation=function(h){var m,d=1,o=.001,b=1-Math.pow(o,1/300),g=0,w=.6,_=u.map(),A=e.timer(E),T=y.dispatch("tick","end");function E(){k(),T.call("tick",m),d<o&&(A.stop(),T.call("end",m))}function k(S){var C,z,B=h.length;void 0===S&&(S=1);for(var U=0;U<S;++U)for(d+=(g-d)*b,_.each(function(G){G(d)}),C=0;C<B;++C)null==(z=h[C]).fx?z.x+=z.vx*=w:(z.x=z.fx,z.vx=0),null==z.fy?z.y+=z.vy*=w:(z.y=z.fy,z.vy=0);return m}function O(){for(var S,C=0,z=h.length;C<z;++C){if((S=h[C]).index=C,null!=S.fx&&(S.x=S.fx),null!=S.fy&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var B=10*Math.sqrt(C),U=C*c;S.x=B*Math.cos(U),S.y=B*Math.sin(U)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function D(S){return S.initialize&&S.initialize(h),S}return null==h&&(h=[]),O(),m={tick:k,restart:function(){return A.restart(E),m},stop:function(){return A.stop(),m},nodes:function(S){return arguments.length?(h=S,O(),_.each(D),m):h},alpha:function(S){return arguments.length?(d=+S,m):d},alphaMin:function(S){return arguments.length?(o=+S,m):o},alphaDecay:function(S){return arguments.length?(b=+S,m):+b},alphaTarget:function(S){return arguments.length?(g=+S,m):g},velocityDecay:function(S){return arguments.length?(w=1-S,m):1-w},force:function(S,C){return arguments.length>1?(null==C?_.remove(S):_.set(S,D(C)),m):_.get(S)},find:function(S,C,z){var B,U,G,X,Z,q=0,W=h.length;for(null==z?z=1/0:z*=z,q=0;q<W;++q)(G=(B=S-(X=h[q]).x)*B+(U=C-X.y)*U)<z&&(Z=X,z=G);return Z},on:function(S,C){return arguments.length>1?(T.on(S,C),m):T.on(S)}}},p.forceX=function(h){var m,d,o,b=n(.1);function g(_){for(var A,T=0,E=m.length;T<E;++T)(A=m[T]).vx+=(o[T]-A.x)*d[T]*_}function w(){if(m){var _,A=m.length;for(d=new Array(A),o=new Array(A),_=0;_<A;++_)d[_]=isNaN(o[_]=+h(m[_],_,m))?0:+b(m[_],_,m)}}return"function"!=typeof h&&(h=n(null==h?0:+h)),g.initialize=function(_){m=_,w()},g.strength=function(_){return arguments.length?(b="function"==typeof _?_:n(+_),w(),g):b},g.x=function(_){return arguments.length?(h="function"==typeof _?_:n(+_),w(),g):h},g},p.forceY=function(h){var m,d,o,b=n(.1);function g(_){for(var A,T=0,E=m.length;T<E;++T)(A=m[T]).vy+=(o[T]-A.y)*d[T]*_}function w(){if(m){var _,A=m.length;for(d=new Array(A),o=new Array(A),_=0;_<A;++_)d[_]=isNaN(o[_]=+h(m[_],_,m))?0:+b(m[_],_,m)}}return"function"!=typeof h&&(h=n(null==h?0:+h)),g.initialize=function(_){m=_,w()},g.strength=function(_){return arguments.length?(b="function"==typeof _?_:n(+_),w(),g):b},g.y=function(_){return arguments.length?(h="function"==typeof _?_:n(+_),w(),g):h},g},Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,x("d3-quadtree"),x("d3-collection"),x("d3-dispatch"),x("d3-timer")):v(p.d3=p.d3||{},p.d3,p.d3,p.d3,p.d3)},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(x,Q,K){var p;p=this,function(p){"use strict";function v(m,d){if((o=(m=d?m.toExponential(d-1):m.toExponential()).indexOf("e"))<0)return null;var o,b=m.slice(0,o);return[b.length>1?b[0]+b.slice(2):b,+m.slice(o+1)]}function u(m){return(m=v(Math.abs(m)))?m[1]:NaN}var y,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function n(m){if(!(d=e.exec(m)))throw new Error("invalid format: "+m);var d;return new t({fill:d[1],align:d[2],sign:d[3],symbol:d[4],zero:d[5],width:d[6],comma:d[7],precision:d[8]&&d[8].slice(1),trim:d[9],type:d[10]})}function t(m){this.fill=void 0===m.fill?" ":m.fill+"",this.align=void 0===m.align?">":m.align+"",this.sign=void 0===m.sign?"-":m.sign+"",this.symbol=void 0===m.symbol?"":m.symbol+"",this.zero=!!m.zero,this.width=void 0===m.width?void 0:+m.width,this.comma=!!m.comma,this.precision=void 0===m.precision?void 0:+m.precision,this.trim=!!m.trim,this.type=void 0===m.type?"":m.type+""}function a(m,d){var o=v(m,d);if(!o)return m+"";var b=o[0],g=o[1];return g<0?"0."+new Array(-g).join("0")+b:b.length>g+1?b.slice(0,g+1)+"."+b.slice(g+1):b+new Array(g-b.length+2).join("0")}n.prototype=t.prototype,t.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var r={"%":function(m,d){return(100*m).toFixed(d)},b:function(m){return Math.round(m).toString(2)},c:function(m){return m+""},d:function(m){return Math.abs(m=Math.round(m))>=1e21?m.toLocaleString("en").replace(/,/g,""):m.toString(10)},e:function(m,d){return m.toExponential(d)},f:function(m,d){return m.toFixed(d)},g:function(m,d){return m.toPrecision(d)},o:function(m){return Math.round(m).toString(8)},p:function(m,d){return a(100*m,d)},r:a,s:function(m,d){var o=v(m,d);if(!o)return m+"";var b=o[0],g=o[1],w=g-(y=3*Math.max(-8,Math.min(8,Math.floor(g/3))))+1,_=b.length;return w===_?b:w>_?b+new Array(w-_+1).join("0"):w>0?b.slice(0,w)+"."+b.slice(w):"0."+new Array(1-w).join("0")+v(m,Math.max(0,d+w-1))[0]},X:function(m){return Math.round(m).toString(16).toUpperCase()},x:function(m){return Math.round(m).toString(16)}};function f(m){return m}var s,i=Array.prototype.map,l=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function c(m){var d,o,D,b=void 0===m.grouping||void 0===m.thousands?f:(d=i.call(m.grouping,Number),o=m.thousands+"",function(D,S){for(var C=D.length,z=[],B=0,U=d[0],G=0;C>0&&U>0&&(G+U+1>S&&(U=Math.max(1,S-G)),z.push(D.substring(C-=U,C+U)),!((G+=U+1)>S));)U=d[B=(B+1)%d.length];return z.reverse().join(o)}),g=void 0===m.currency?"":m.currency[0]+"",w=void 0===m.currency?"":m.currency[1]+"",_=void 0===m.decimal?".":m.decimal+"",A=void 0===m.numerals?f:(D=i.call(m.numerals,String),function(S){return S.replace(/[0-9]/g,function(C){return D[+C]})}),T=void 0===m.percent?"%":m.percent+"",E=void 0===m.minus?"-":m.minus+"",k=void 0===m.nan?"NaN":m.nan+"";function O(D){var S=(D=n(D)).fill,C=D.align,z=D.sign,B=D.symbol,U=D.zero,G=D.width,X=D.comma,Z=D.precision,q=D.trim,W=D.type;"n"===W?(X=!0,W="g"):r[W]||(void 0===Z&&(Z=12),q=!0,W="g"),(U||"0"===S&&"="===C)&&(U=!0,S="0",C="=");var te="$"===B?g:"#"===B&&/[boxX]/.test(W)?"0"+W.toLowerCase():"",R="$"===B?w:/[%p]/.test(W)?T:"",N=r[W],V=/[defgprs%]/.test(W);function ee(j){var J,$,re,ne=te,se=R;if("c"===W)se=N(j)+se,j="";else{var ie=(j=+j)<0||1/j<0;if(j=isNaN(j)?k:N(Math.abs(j),Z),q&&(j=function(de){e:for(var ve,_e=de.length,be=1,Te=-1;be<_e;++be)switch(de[be]){case".":Te=ve=be;break;case"0":0===Te&&(Te=be),ve=be;break;default:if(!+de[be])break e;Te>0&&(Te=0)}return Te>0?de.slice(0,Te)+de.slice(ve+1):de}(j)),ie&&0==+j&&"+"!==z&&(ie=!1),ne=(ie?"("===z?z:E:"-"===z||"("===z?"":z)+ne,se=("s"===W?l[8+y/3]:"")+se+(ie&&"("===z?")":""),V)for(J=-1,$=j.length;++J<$;)if(48>(re=j.charCodeAt(J))||re>57){se=(46===re?_+j.slice(J+1):j.slice(J))+se,j=j.slice(0,J);break}}X&&!U&&(j=b(j,1/0));var ue=ne.length+j.length+se.length,le=ue<G?new Array(G-ue+1).join(S):"";switch(X&&U&&(j=b(le+j,le.length?G-se.length:1/0),le=""),C){case"<":j=ne+j+se+le;break;case"=":j=ne+le+j+se;break;case"^":j=le.slice(0,ue=le.length>>1)+ne+j+se+le.slice(ue);break;default:j=le+ne+j+se}return A(j)}return Z=void 0===Z?6:/[gprs]/.test(W)?Math.max(1,Math.min(21,Z)):Math.max(0,Math.min(20,Z)),ee.toString=function(){return D+""},ee}return{format:O,formatPrefix:function(D,S){var C=O(((D=n(D)).type="f",D)),z=3*Math.max(-8,Math.min(8,Math.floor(u(S)/3))),B=Math.pow(10,-z),U=l[8+z/3];return function(G){return C(B*G)+U}}}}function h(m){return s=c(m),p.format=s.format,p.formatPrefix=s.formatPrefix,s}h({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),p.FormatSpecifier=t,p.formatDefaultLocale=h,p.formatLocale=c,p.formatSpecifier=n,p.precisionFixed=function(m){return Math.max(0,-u(Math.abs(m)))},p.precisionPrefix=function(m,d){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(u(d)/3)))-u(Math.abs(m)))},p.precisionRound=function(m,d){return m=Math.abs(m),d=Math.abs(d)-m,Math.max(0,u(d)-u(m))+1},Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof K&&void 0!==Q?K:(p="undefined"!=typeof globalThis?globalThis:p||self).d3=p.d3||{})},{}],113:[function(x,Q,K){var p,v;p=this,v=function(p,v,u){"use strict";var y=Math.abs,e=Math.atan,n=Math.atan2,t=Math.cos,a=Math.exp,r=Math.floor,f=Math.log,s=Math.max,i=Math.min,l=Math.pow,c=Math.round,h=Math.sign||function(Ve){return Ve>0?1:Ve<0?-1:0},m=Math.sin,d=Math.tan,o=1e-6,b=Math.PI,g=b/2,w=b/4,_=Math.SQRT1_2,A=C(2),T=C(b),E=2*b,k=180/b,O=b/180;function D(Ve){return Ve>1?g:Ve<-1?-g:Math.asin(Ve)}function S(Ve){return Ve>1?0:Ve<-1?b:Math.acos(Ve)}function C(Ve){return Ve>0?Math.sqrt(Ve):0}function z(Ve){return(a(Ve)-a(-Ve))/2}function B(Ve){return(a(Ve)+a(-Ve))/2}function U(Ve){var qe=d(Ve/2),et=2*f(t(Ve/2))/(qe*qe);function lt(wt,vt){var Ot=t(wt),ir=t(vt),or=m(vt),er=ir*Ot,ur=-((1-er?f((1+er)/2)/(1-er):-.5)+et/(1+er));return[ur*ir*m(wt),ur*or]}return lt.invert=function(wt,vt){var Ot,ir=C(wt*wt+vt*vt),or=-Ve/2,er=50;if(!ir)return[0,0];do{var ur=or/2,xr=t(ur),kr=m(ur),Cr=kr/xr,Vr=-f(y(xr));or-=Ot=(2/Cr*Vr-et*Cr-ir)/(-Vr/(kr*kr)+1-et/(2*xr*xr))*(xr<0?.7:1)}while(y(Ot)>o&&--er>0);var pn=m(or);return[n(wt*pn,ir*t(or)),D(vt*pn/ir)]},lt}function G(Ve,qe){var wt,et=t(qe),lt=(wt=S(et*t(Ve/=2)))?wt/Math.sin(wt):1;return[2*et*m(Ve)*lt,m(qe)*lt]}function X(Ve){var qe=m(Ve),et=t(Ve),lt=Ve>=0?1:-1,wt=d(lt*Ve),vt=(1+qe-et)/2;function Ot(ir,or){var er=t(or),ur=t(ir/=2);return[(1+er)*m(ir),(lt*or>-n(ur,wt)-.001?0:10*-lt)+vt+m(or)*et-(1+er)*qe*ur]}return Ot.invert=function(ir,or){var er=0,ur=0,xr=50;do{var kr=t(er),Cr=m(er),Vr=t(ur),pn=m(ur),Tn=1+Vr,Un=Tn*Cr-ir,Wn=vt+pn*et-Tn*qe*kr-or,ei=Tn*kr/2,Yn=-Cr*pn,Si=qe*Tn*Cr/2,Ri=et*Vr+qe*kr*pn,Ki=Yn*Si-Ri*ei,Zi=(Wn*Yn-Un*Ri)/Ki/2,ea=(Un*Si-Wn*ei)/Ki;y(ea)>2&&(ea/=2),er-=Zi,ur-=ea}while((y(Zi)>o||y(ea)>o)&&--xr>0);return lt*ur>-n(t(er),wt)-.001?[2*er,ur]:null},Ot}function Z(Ve,qe){var et=d(qe/2),lt=C(1-et*et),wt=1+lt*t(Ve/=2),vt=m(Ve)*lt/wt,Ot=et/wt,ir=vt*vt,or=Ot*Ot;return[4/3*vt*(3+ir-3*or),4/3*Ot*(3+3*ir-or)]}G.invert=function(Ve,qe){if(!(Ve*Ve+4*qe*qe>b*b+o)){var et=Ve,lt=qe,wt=25;do{var vt,Ot=m(et),ir=m(et/2),or=t(et/2),er=m(lt),ur=t(lt),xr=m(2*lt),kr=er*er,Cr=ur*ur,Vr=ir*ir,pn=1-Cr*or*or,Tn=pn?S(ur*or)*C(vt=1/pn):vt=0,Un=2*Tn*ur*ir-Ve,Wn=Tn*er-qe,ei=vt*(Cr*Vr+Tn*ur*or*kr),Yn=vt*(.5*Ot*xr-2*Tn*er*ir),Si=.25*vt*(xr*ir-Tn*er*Cr*Ot),Ri=vt*(kr*or+Tn*Vr*ur),Ki=Yn*Si-Ri*ei;if(!Ki)break;var Zi=(Wn*Yn-Un*Ri)/Ki,ea=(Un*Si-Wn*ei)/Ki;et-=Zi,lt-=ea}while((y(Zi)>o||y(ea)>o)&&--wt>0);return[et,lt]}},Z.invert=function(Ve,qe){if(qe*=3/8,!(Ve*=3/8)&&y(qe)>1)return null;var er,et=1+Ve*Ve+qe*qe,lt=C((et-C(et*et-4*qe*qe))/2),wt=D(lt)/3,vt=lt?(er=y(qe/lt),f(er+C(er*er-1))/3):function(er){return f(er+C(er*er+1))}(y(Ve))/3,Ot=t(wt),ir=B(vt),or=ir*ir-Ot*Ot;return[2*h(Ve)*n(z(vt)*Ot,.25-or),2*h(qe)*n(ir*m(wt),.25+or)]};var q=C(8),W=f(1+A);function te(Ve,qe){var et=y(qe);return et<w?[Ve,f(d(w+qe/2))]:[Ve*t(et)*(2*A-1/m(et)),h(qe)*(2*A*(et-w)-f(d(et/2)))]}function R(Ve){var qe=2*b/Ve;function et(lt,wt){var vt=v.geoAzimuthalEquidistantRaw(lt,wt);if(y(lt)>g){var Ot=n(vt[1],vt[0]),ir=C(vt[0]*vt[0]+vt[1]*vt[1]),or=qe*c((Ot-g)/qe)+g,er=n(m(Ot-=or),2-t(Ot));Ot=or+D(b/ir*m(er))-er,vt[0]=ir*t(Ot),vt[1]=ir*m(Ot)}return vt}return et.invert=function(lt,wt){var vt=C(lt*lt+wt*wt);if(vt>g){var Ot=n(wt,lt),ir=qe*c((Ot-g)/qe)+g,or=Ot>ir?-1:1,er=vt*t(ir-Ot),ur=1/d(or*S((er-b)/C(b*(b-2*er)+vt*vt)));Ot=ir+2*e((ur+or*C(ur*ur-3))/3),lt=vt*t(Ot),wt=vt*m(Ot)}return v.geoAzimuthalEquidistantRaw.invert(lt,wt)},et}function N(Ve,qe){if(arguments.length<2&&(qe=Ve),1===qe)return v.geoAzimuthalEqualAreaRaw;if(qe===1/0)return V;function et(lt,wt){var vt=v.geoAzimuthalEqualAreaRaw(lt/qe,wt);return vt[0]*=Ve,vt}return et.invert=function(lt,wt){var vt=v.geoAzimuthalEqualAreaRaw.invert(lt/Ve,wt);return vt[0]*=qe,vt},et}function V(Ve,qe){return[Ve*t(qe)/t(qe/=2),2*m(qe)]}function ee(Ve,qe,et){var lt,wt,vt,Ot=100;et=void 0===et?0:+et,qe=+qe;do{(wt=Ve(et))===(vt=Ve(et+o))&&(vt=wt+o),et-=lt=-1*o*(wt-qe)/(wt-vt)}while(Ot-- >0&&y(lt)>o);return Ot<0?NaN:et}function j(Ve,qe,et){return void 0===qe&&(qe=40),void 0===et&&(et=1e-12),function(lt,wt,vt,Ot){var ir,or,er;vt=void 0===vt?0:+vt,Ot=void 0===Ot?0:+Ot;for(var ur=0;ur<qe;ur++){var xr=Ve(vt,Ot),kr=xr[0]-lt,Cr=xr[1]-wt;if(y(kr)<et&&y(Cr)<et)break;var Vr=kr*kr+Cr*Cr;if(Vr>ir)vt-=or/=2,Ot-=er/=2;else{ir=Vr;var pn=(vt>0?-1:1)*et,Tn=(Ot>0?-1:1)*et,Un=Ve(vt+pn,Ot),Wn=Ve(vt,Ot+Tn),ei=(Un[0]-xr[0])/pn,Yn=(Un[1]-xr[1])/pn,Si=(Wn[0]-xr[0])/Tn,Ri=(Wn[1]-xr[1])/Tn,Ki=Ri*ei-Yn*Si,Zi=(y(Ki)<.5?.5:1)/Ki;if(vt+=or=(Cr*Si-kr*Ri)*Zi,Ot+=er=(kr*Yn-Cr*ei)*Zi,y(or)<et&&y(er)<et)break}}return[vt,Ot]}}function J(){var Ve=N(1.68,2);function qe(et,lt){if(et+lt<-1.4){var wt=(et-lt+1.6)*(et+lt+1.4)/8;et+=wt,lt-=.8*wt*m(lt+b/2)}var vt=Ve(et,lt),Ot=(1-t(et*lt))/12;return vt[1]<0&&(vt[0]*=1+Ot),vt[1]>0&&(vt[1]*=1+Ot/1.5*vt[0]*vt[0]),vt}return qe.invert=j(qe),qe}function $(Ve,qe){var et,lt=Ve*m(qe),wt=30;do{qe-=et=(qe+m(qe)-lt)/(1+t(qe))}while(y(et)>o&&--wt>0);return qe/2}function re(Ve,qe,et){function lt(wt,vt){return[Ve*wt*t(vt=$(et,vt)),qe*m(vt)]}return lt.invert=function(wt,vt){return vt=D(vt/qe),[wt/(Ve*t(vt)),D((2*vt+m(2*vt))/et)]},lt}te.invert=function(Ve,qe){if((lt=y(qe))<W)return[Ve,2*e(a(qe))-g];var et,lt,wt=w,vt=25;do{var Ot=t(wt/2),ir=d(wt/2);wt-=et=(q*(wt-w)-f(ir)-lt)/(q-Ot*Ot/(2*ir))}while(y(et)>1e-12&&--vt>0);return[Ve/(t(wt)*(q-1/m(wt))),h(qe)*wt]},V.invert=function(Ve,qe){var et=2*D(qe/2);return[Ve*t(et/2)/t(et),et]};var ne=re(A/g,A,b),se=2.00276;function ue(Ve,qe){var et=$(b,qe);return[se*Ve/(1/t(qe)+1.11072/t(et)),(qe+A*m(et))/se]}function le(Ve){var qe=0,et=v.geoProjectionMutator(Ve),lt=et(qe);return lt.parallel=function(wt){return arguments.length?et(qe=wt*O):qe*k},lt}function de(Ve,qe){return[Ve*t(qe),qe]}function ve(Ve){if(!Ve)return de;var qe=1/d(Ve);function et(lt,wt){var vt=qe+Ve-wt,Ot=vt&&lt*t(wt)/vt;return[vt*m(Ot),qe-vt*t(Ot)]}return et.invert=function(lt,wt){var vt=C(lt*lt+(wt=qe-wt)*wt),Ot=qe+Ve-vt;return[vt/t(Ot)*n(lt,wt),Ot]},et}function _e(Ve){function qe(et,lt){var wt=g-lt,vt=wt&&et*Ve*m(wt)/wt;return[wt*m(vt)/Ve,g-wt*t(vt)]}return qe.invert=function(et,lt){var wt=et*Ve,vt=g-lt,Ot=C(wt*wt+vt*vt),ir=n(wt,vt);return[(Ot?Ot/m(Ot):1)*ir/Ve,g-Ot]},qe}ue.invert=function(Ve,qe){var et,lt,wt=se*qe,vt=qe<0?-w:w,Ot=25;do{lt=wt-A*m(vt),vt-=et=(m(2*vt)+2*vt-b*m(lt))/(2*t(2*vt)+2+b*t(lt)*A*t(vt))}while(y(et)>o&&--Ot>0);return lt=wt-A*m(vt),[Ve*(1/t(lt)+1.11072/t(vt))/se,lt]},de.invert=function(Ve,qe){return[Ve/t(qe),qe]};var be=re(1,4/b,b);function Te(Ve,qe,et,lt,wt,vt){var Ot,ir=t(vt);if(y(Ve)>1||y(vt)>1)Ot=S(et*wt+qe*lt*ir);else{var or=m(Ve/2),er=m(vt/2);Ot=2*D(C(or*or+qe*lt*er*er))}return y(Ot)>o?[Ot,n(lt*m(vt),qe*wt-et*lt*ir)]:[0,0]}function he(Ve,qe,et){return S((Ve*Ve+qe*qe-et*et)/(2*Ve*qe))}function me(Ve){return Ve-2*b*r((Ve+b)/(2*b))}function Ae(Ve,qe,et){for(var lt,wt=[[Ve[0],Ve[1],m(Ve[1]),t(Ve[1])],[qe[0],qe[1],m(qe[1]),t(qe[1])],[et[0],et[1],m(et[1]),t(et[1])]],vt=wt[2],Ot=0;Ot<3;++Ot,vt=lt)vt.v=Te((lt=wt[Ot])[1]-vt[1],vt[3],vt[2],lt[3],lt[2],lt[0]-vt[0]),vt.point=[0,0];var ir=he(wt[0].v[0],wt[2].v[0],wt[1].v[0]),or=he(wt[0].v[0],wt[1].v[0],wt[2].v[0]),er=b-ir;wt[2].point[1]=0,wt[0].point[0]=-(wt[1].point[0]=wt[0].v[0]/2);var ur=[wt[2].point[0]=wt[0].point[0]+wt[2].v[0]*t(ir),2*(wt[0].point[1]=wt[1].point[1]=wt[2].v[0]*m(ir))];return function(xr,kr){var Cr,Vr=m(kr),pn=t(kr),Tn=new Array(3);for(Cr=0;Cr<3;++Cr){var Un=wt[Cr];if(Tn[Cr]=Te(kr-Un[1],Un[3],Un[2],pn,Vr,xr-Un[0]),!Tn[Cr][0])return Un.point;Tn[Cr][1]=me(Tn[Cr][1]-Un.v[1])}var Wn=ur.slice();for(Cr=0;Cr<3;++Cr){var Yn=he(wt[Cr].v[0],Tn[Cr][0],Tn[2==Cr?0:Cr+1][0]);Tn[Cr][1]<0&&(Yn=-Yn),Cr?1==Cr?(Wn[0]-=Tn[Cr][0]*t(Yn=or-Yn),Wn[1]-=Tn[Cr][0]*m(Yn)):(Wn[0]+=Tn[Cr][0]*t(Yn=er-Yn),Wn[1]+=Tn[Cr][0]*m(Yn)):(Wn[0]+=Tn[Cr][0]*t(Yn),Wn[1]-=Tn[Cr][0]*m(Yn))}return Wn[0]/=3,Wn[1]/=3,Wn}}function we(Ve){return Ve[0]*=O,Ve[1]*=O,Ve}function Se(Ve,qe,et){var lt=v.geoCentroid({type:"MultiPoint",coordinates:[Ve,qe,et]}),wt=[-lt[0],-lt[1]],vt=v.geoRotation(wt),Ot=Ae(we(vt(Ve)),we(vt(qe)),we(vt(et)));Ot.invert=j(Ot);var ir=v.geoProjection(Ot).rotate(wt),or=ir.center;return delete ir.rotate,ir.center=function(er){return arguments.length?or(vt(er)):vt.invert(or())},ir.clipAngle(90)}function Pe(Ve,qe){var et=C(1-m(qe));return[2/T*Ve*et,T*(1-et)]}function ze(Ve){var qe=d(Ve);function et(lt,wt){return[lt,(lt?lt/m(lt):1)*(m(wt)*t(lt)-qe*t(wt))]}return et.invert=qe?function(lt,wt){lt&&(wt*=m(lt)/lt);var vt=t(lt);return[lt,2*n(C(vt*vt+qe*qe-wt*wt)-vt,qe-wt)]}:function(lt,wt){return[lt,D(lt?wt*d(lt)/lt:wt)]},et}Pe.invert=function(Ve,qe){var et=(et=qe/T-1)*et;return[et>0?Ve*C(b/et)/2:0,D(1-et)]};var He=C(3);function tt(Ve,qe){return[He*Ve*(2*t(2*qe/3)-1)/T,He*T*m(qe/3)]}function Oe(Ve){var qe=t(Ve);function et(lt,wt){return[lt*qe,m(wt)/qe]}return et.invert=function(lt,wt){return[lt/qe,D(wt*qe)]},et}function Be(Ve){var qe=t(Ve);function et(lt,wt){return[lt*qe,(1+qe)*d(wt/2)]}return et.invert=function(lt,wt){return[lt/qe,2*e(wt/(1+qe))]},et}function Je(Ve,qe){var et=C(8/(3*b));return[et*Ve*(1-y(qe)/b),et*qe]}function Ye(Ve,qe){var et=C(4-3*m(y(qe)));return[2/C(6*b)*Ve*et,h(qe)*C(2*b/3)*(2-et)]}function nt(Ve,qe){var et=C(b*(4+b));return[2/et*Ve*(1+C(1-4*qe*qe/(b*b))),4/et*qe]}function ft(Ve,qe){var et=(2+g)*m(qe);qe/=2;for(var lt=0,wt=1/0;lt<10&&y(wt)>o;lt++){var vt=t(qe);qe-=wt=(qe+m(qe)*(vt+2)-et)/(2*vt*(1+vt))}return[2/C(b*(4+b))*Ve*(1+t(qe)),2*C(b/(4+b))*m(qe)]}function dt(Ve,qe){return[Ve*(1+t(qe))/C(2+b),2*qe/C(2+b)]}function Rt(Ve,qe){for(var et=(1+g)*m(qe),lt=0,wt=1/0;lt<10&&y(wt)>o;lt++)qe-=wt=(qe+m(qe)-et)/(1+t(qe));return et=C(2+b),[Ve*(1+t(qe))/et,2*qe/et]}tt.invert=function(Ve,qe){var et=3*D(qe/(He*T));return[T*Ve/(He*(2*t(2*et/3)-1)),et]},Je.invert=function(Ve,qe){var et=C(8/(3*b)),lt=qe/et;return[Ve/(et*(1-y(lt)/b)),lt]},Ye.invert=function(Ve,qe){var et=2-y(qe)/C(2*b/3);return[Ve*C(6*b)/(2*et),h(qe)*D((4-et*et)/3)]},nt.invert=function(Ve,qe){var et=C(b*(4+b))/2;return[Ve*et/(1+C(1-qe*qe*(4+b)/(4*b))),qe*et/2]},ft.invert=function(Ve,qe){var et=qe*C((4+b)/b)/2,lt=D(et),wt=t(lt);return[Ve/(2/C(b*(4+b))*(1+wt)),D((lt+et*(wt+2))/(2+g))]},dt.invert=function(Ve,qe){var et=C(2+b),lt=qe*et/2;return[et*Ve/(1+t(lt)),lt]},Rt.invert=function(Ve,qe){var et=1+g,lt=C(et/2);return[2*Ve*lt/(1+t(qe*=lt)),D((qe+m(qe))/et)]};var Et=3+2*A;function at(Ve,qe){var et=m(Ve/=2),lt=t(Ve),wt=C(t(qe)),vt=t(qe/=2),Ot=m(qe)/(vt+A*lt*wt),ir=C(2/(1+Ot*Ot)),or=C((A*vt+(lt+et)*wt)/(A*vt+(lt-et)*wt));return[Et*(ir*(or-1/or)-2*f(or)),Et*(ir*Ot*(or+1/or)-2*e(Ot))]}at.invert=function(Ve,qe){if(!(et=Z.invert(Ve/1.2,1.065*qe)))return null;var et,lt=et[0],wt=et[1],vt=20;Ve/=Et,qe/=Et;do{var Ot=lt/2,ir=wt/2,or=m(Ot),er=t(Ot),ur=m(ir),xr=t(ir),kr=t(wt),Cr=C(kr),Vr=ur/(xr+A*er*Cr),pn=Vr*Vr,Tn=C(2/(1+pn)),Un=(A*xr+(er+or)*Cr)/(A*xr+(er-or)*Cr),Wn=C(Un),ei=Wn-1/Wn,Yn=Wn+1/Wn,Si=Tn*ei-2*f(Wn)-Ve,Ri=Tn*Vr*Yn-2*e(Vr)-qe,Ki=ur&&_*Cr*or*pn/ur,Zi=(A*er*xr+Cr)/(2*(xr+A*er*Cr)*(xr+A*er*Cr)*Cr),ea=-.5*Vr*Tn*Tn*Tn,Oa=ea*Ki,Ia=ea*Zi,ya=(ya=2*xr+A*Cr*(er-or))*ya*Wn,xa=(A*er*xr*Cr+kr)/ya,Ca=-A*or*ur/(Cr*ya),Xa=ei*Oa-2*xa/Wn+Tn*(xa+xa/Un),so=ei*Ia-2*Ca/Wn+Tn*(Ca+Ca/Un),lo=Vr*Yn*Oa-2*Ki/(1+pn)+Tn*Yn*Ki+Tn*Vr*(xa-xa/Un),co=Vr*Yn*Ia-2*Zi/(1+pn)+Tn*Yn*Zi+Tn*Vr*(Ca-Ca/Un),uo=so*lo-co*Xa;if(!uo)break;var Hi=(Ri*so-Si*co)/uo,mt=(Si*lo-Ri*Xa)/uo;lt-=Hi,wt=s(-g,i(g,wt-mt))}while((y(Hi)>o||y(mt)>o)&&--vt>0);return y(y(wt)-g)<o?[0,wt]:vt&&[lt,wt]};var rt=t(35*O);function St(Ve,qe){var et=d(qe/2);return[Ve*rt*C(1-et*et),(1+rt)*et]}function Xt(Ve,qe){var et=qe/2,lt=t(et);return[2*Ve/T*t(qe)*lt*lt,T*d(et)]}function lr(Ve){var qe=1-Ve,et=wt(b,0)[0]-wt(-b,0)[0],lt=C(2*(wt(0,g)[1]-wt(0,-g)[1])/et);function wt(ir,or){var er=t(or),ur=m(or);return[er/(qe+Ve*er)*ir,qe*or+Ve*ur]}function vt(ir,or){var er=wt(ir,or);return[er[0]*lt,er[1]/lt]}function Ot(ir){return vt(0,ir)[1]}return vt.invert=function(ir,or){var er=ee(Ot,or);return[ir/lt*(Ve+qe/t(er)),er]},vt}function Ue(Ve){return[Ve[0]/2,D(d(Ve[1]/2*O))*k]}function Ze(Ve){return[2*Ve[0],2*e(m(Ve[1]*O))*k]}function Ne(Ve,qe){var et=2*b/qe,lt=Ve*Ve;function wt(vt,Ot){var ir=v.geoAzimuthalEquidistantRaw(vt,Ot),or=ir[0],er=ir[1],ur=or*or+er*er;if(ur>lt){var xr=C(ur),kr=n(er,or),Cr=et*c(kr/et),Vr=kr-Cr,pn=Ve*t(Vr),Tn=(Ve*m(Vr)-Vr*m(pn))/(g-pn),Un=it(Vr,Tn),Wn=(b-Ve)/ke(Un,pn,b);or=xr;var ei,Yn=50;do{or-=ei=(Ve+ke(Un,pn,or)*Wn-xr)/(Un(or)*Wn)}while(y(ei)>o&&--Yn>0);er=Vr*m(or),or<g&&(er-=Tn*(or-g));var Si=m(Cr),Ri=t(Cr);ir[0]=or*Ri-er*Si,ir[1]=or*Si+er*Ri}return ir}return wt.invert=function(vt,Ot){var ir=vt*vt+Ot*Ot;if(ir>lt){var or=C(ir),er=n(Ot,vt),ur=et*c(er/et),xr=er-ur;vt=or*t(xr),Ot=or*m(xr);for(var kr=vt-g,Cr=m(vt),Vr=Ot/Cr,pn=vt<g?1/0:0,Tn=10;;){var Un=Ve*m(Vr),Wn=Ve*t(Vr),ei=m(Wn),Yn=g-Wn,Si=(Un-Vr*ei)/Yn,Ri=it(Vr,Si);if(y(pn)<1e-12||!--Tn)break;Vr-=pn=(Vr*Cr-Si*kr-Ot)/(Cr-2*kr*(Yn*(Wn+Vr*Un*t(Wn)-ei)-Un*(Un-Vr*ei))/(Yn*Yn))}vt=(or=Ve+ke(Ri,Wn,vt)*(b-Ve)/ke(Ri,Wn,b))*t(er=ur+Vr),Ot=or*m(er)}return v.geoAzimuthalEquidistantRaw.invert(vt,Ot)},wt}function it(Ve,qe){return function(et){var lt=Ve*t(et);return et<g&&(lt-=qe),C(1+lt*lt)}}function ke(Ve,qe,et){for(var lt=(et-qe)/50,wt=Ve(qe)+Ve(et),vt=1,Ot=qe;vt<50;++vt)wt+=2*Ve(Ot+=lt);return.5*wt*lt}function De(Ve,qe,et,lt,wt,vt,Ot,ir){function or(er,ur){if(!ur)return[Ve*er/b,0];var xr=ur*ur,kr=Ve+xr*(qe+xr*(et+xr*lt)),Cr=ur*(wt-1+xr*(vt-ir+xr*Ot)),Vr=(kr*kr+Cr*Cr)/(2*Cr),pn=er*D(kr/Vr)/b;return[Vr*m(pn),ur*(1+xr*ir)+Vr*(1-t(pn))]}return arguments.length<8&&(ir=0),or.invert=function(er,ur){var xr,kr,Cr=b*er/Ve,Vr=ur,pn=50;do{var Tn=Vr*Vr,Un=Ve+Tn*(qe+Tn*(et+Tn*lt)),Wn=Vr*(wt-1+Tn*(vt-ir+Tn*Ot)),ei=Un*Un+Wn*Wn,Yn=2*Wn,Si=ei/Yn,Ri=Si*Si,Ki=D(Un/Si)/b,Zi=Cr*Ki,ea=Un*Un,Oa=(2*qe+Tn*(4*et+6*Tn*lt))*Vr,Ia=wt+Tn*(3*vt+5*Tn*Ot),ya=(2*(Un*Oa+Wn*(Ia-1))*Yn-ei*(2*(Ia-1)))/(Yn*Yn),xa=t(Zi),Ca=m(Zi),Xa=Si*xa,so=Si*Ca,lo=Cr/b*(1/C(1-ea/Ri))*(Oa*Si-Un*ya)/Ri,co=so-er,uo=Vr*(1+Tn*ir)+Si-Xa-ur,Hi=ya*Ca+Xa*lo,mt=Xa*Ki,Vt=1+ya-(ya*xa-so*lo),pr=so*Ki,Jt=Hi*pr-Vt*mt;if(!Jt)break;Cr-=xr=(uo*Hi-co*Vt)/Jt,Vr-=kr=(co*pr-uo*mt)/Jt}while((y(xr)>o||y(kr)>o)&&--pn>0);return[Cr,Vr]},or}St.invert=function(Ve,qe){var et=qe/(1+rt);return[Ve&&Ve/(rt*C(1-et*et)),2*e(et)]},Xt.invert=function(Ve,qe){var et=e(qe/T),lt=t(et),wt=2*et;return[Ve*T/2/(t(wt)*lt*lt),wt]};var Re=De(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Ie=De(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Ke=De(5/6*b,-.62636,-.0344,0,1.3493,-.05524,0,.045);function ut(Ve,qe){var et=Ve*Ve,lt=qe*qe;return[Ve*(1-.162388*lt)*(.87-952426e-9*et*et),qe*(1+lt/12)]}ut.invert=function(Ve,qe){var et,lt=Ve,wt=qe,vt=50;do{var Ot=wt*wt;wt-=et=(wt*(1+Ot/12)-qe)/(1+Ot/4)}while(y(et)>o&&--vt>0);vt=50,Ve/=1-.162388*Ot;do{var ir=(ir=lt*lt)*ir;lt-=et=(lt*(.87-952426e-9*ir)-Ve)/(.87-.00476213*ir)}while(y(et)>o&&--vt>0);return[lt,wt]};var xt=De(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function gt(Ve){var qe=Ve(g,0)[0]-Ve(-g,0)[0];function et(lt,wt){var vt=lt>0?-.5:.5,Ot=Ve(lt+vt*b,wt);return Ot[0]-=vt*qe,Ot}return Ve.invert&&(et.invert=function(lt,wt){var vt=lt>0?-.5:.5,Ot=Ve.invert(lt+vt*qe,wt),ir=Ot[0]-vt*b;return ir<-b?ir+=2*b:ir>b&&(ir-=2*b),Ot[0]=ir,Ot}),et}function Pt(Ve,qe){var et=h(Ve),lt=h(qe),wt=t(qe),vt=t(Ve)*wt,Ot=m(Ve)*wt,ir=m(lt*qe);Ve=y(n(Ot,ir)),qe=D(vt),y(Ve-g)>o&&(Ve%=g);var or=function(er,ur){if(ur===g)return[0,0];var xr,kr,Cr=m(ur),Vr=Cr*Cr,pn=Vr*Vr,Tn=1+pn,Un=1+3*pn,Wn=1-pn,ei=D(1/C(Tn)),Yn=Wn+Vr*Tn*ei,Si=(1-Cr)/Yn,Ri=C(Si),Ki=Si*Tn,Zi=C(Ki),ea=Ri*Wn;if(0===er)return[0,-(ea+Vr*Zi)];var Oa,Ia=t(ur),ya=1/Ia,xa=2*Cr*Ia,Ca=(-Yn*Ia-(-3*Vr+ei*Un)*xa*(1-Cr))/(Yn*Yn),Xa=-ya*xa,so=-ya*(Vr*Tn*Ca+Si*Un*xa),lo=-2*ya*(Wn*(.5*Ca/Ri)-2*Vr*Ri*xa),co=4*er/b;if(er>.222*b||ur<b/4&&er>.175*b){if(xr=(ea+Vr*C(Ki*(1+pn)-ea*ea))/(1+pn),er>b/4)return[xr,xr];var uo=xr,Hi=.5*xr;xr=.5*(Hi+uo),kr=50;do{var Vt=xr*(lo+Xa*C(Ki-xr*xr))+so*D(xr/Zi)-co;if(!Vt)break;Vt<0?Hi=xr:uo=xr,xr=.5*(Hi+uo)}while(y(uo-Hi)>o&&--kr>0)}else{xr=o,kr=25;do{var pr=xr*xr,Jt=C(Ki-pr),gr=lo+Xa*Jt,Br=xr*gr+so*D(xr/Zi)-co;xr-=Oa=Jt?Br/(gr+(so-Xa*pr)/Jt):0}while(y(Oa)>o&&--kr>0)}return[xr,-ea-Vr*C(Ki-xr*xr)]}(Ve>b/4?g-Ve:Ve,qe);return Ve>b/4&&(ir=or[0],or[0]=-or[1],or[1]=-ir),or[0]*=et,or[1]*=-lt,or}function ct(Ve,qe){var et,lt,wt,vt,Ot,ir;if(qe<o)return[(vt=m(Ve))-(et=qe*(Ve-vt*(lt=t(Ve)))/4)*lt,lt+et*vt,1-qe*vt*vt/2,Ve-et];if(qe>=1-o)return et=(1-qe)/4,wt=1/(lt=B(Ve)),[(vt=((ir=a(2*(ir=Ve)))-1)/(ir+1))+et*((Ot=lt*z(Ve))-Ve)/(lt*lt),wt-et*vt*wt*(Ot-Ve),wt+et*vt*wt*(Ot+Ve),2*e(a(Ve))-g+et*(Ot-Ve)/lt];var or=[1,0,0,0,0,0,0,0,0],er=[C(qe),0,0,0,0,0,0,0,0],ur=0;for(lt=C(1-qe),Ot=1;y(er[ur]/or[ur])>o&&ur<8;)et=or[ur++],er[ur]=(et-lt)/2,or[ur]=(et+lt)/2,lt=C(et*lt),Ot*=2;wt=Ot*or[ur]*Ve;do{wt=(D(vt=er[ur]*m(lt=wt)/or[ur])+wt)/2}while(--ur);return[m(wt),vt=t(wt),vt/t(wt-lt),wt]}function zt(Ve,qe){if(!qe)return Ve;if(1===qe)return f(d(Ve/2+w));for(var et=1,lt=C(1-qe),wt=C(qe),vt=0;y(wt)>o;vt++){if(Ve%b){var Ot=e(lt*d(Ve)/et);Ot<0&&(Ot+=b),Ve+=Ot+~~(Ve/b)*b}else Ve+=Ve;wt=(et+lt)/2,lt=C(et*lt),wt=((et=wt)-lt)/2}return Ve/(l(2,vt)*et)}function Ft(Ve,qe){var er,ur,xr,kr,Cr,et=(A-1)/(A+1),lt=C(1-et*et),wt=zt(g,lt*lt),vt=f(d(b/4+y(qe)/2)),Ot=a(-1*vt)/C(et),ir=(er=Ot*t(-1*Ve),kr=(ur=Ot*m(-1*Ve))+1,[.5*((er>=0?g:-g)-n(Cr=1-(xr=er*er)-ur*ur,2*er)),-.25*f(Cr*Cr+4*xr)+.5*f(kr*kr+xr)]),or=function(er,ur,xr){var kr=y(er),Cr=z(y(ur));if(kr){var Vr=1/m(kr),pn=1/(d(kr)*d(kr)),Tn=-(pn+xr*(Cr*Cr*Vr*Vr)-1+xr),Un=(-Tn+C(Tn*Tn-(xr-1)*pn*4))/2;return[zt(e(1/C(Un)),xr)*h(er),zt(e(C((Un/pn-1)/xr)),1-xr)*h(ur)]}return[0,zt(e(Cr),1-xr)*h(ur)]}(ir[0],ir[1],lt*lt);return[-or[1],(qe>=0?1:-1)*(.5*wt-or[0])]}function Qe(Ve){var qe=m(Ve),et=t(Ve),lt=yt(Ve);function wt(vt,Ot){var ir=lt(vt,Ot);vt=ir[0];var or=m(Ot=ir[1]),er=t(Ot),ur=t(vt),xr=S(qe*or+et*er*ur),kr=m(xr),Cr=y(kr)>o?xr/kr:1;return[Cr*et*m(vt),(y(vt)>g?Cr:-Cr)*(qe*er-et*or*ur)]}return lt.invert=yt(-Ve),wt.invert=function(vt,Ot){var ir=C(vt*vt+Ot*Ot),or=-m(ir),er=t(ir),ur=ir*er,xr=-Ot*or,kr=ir*qe,Cr=C(ur*ur+xr*xr-kr*kr),Vr=n(ur*kr+xr*Cr,xr*kr-ur*Cr),pn=(ir>g?-1:1)*n(vt*or,ir*t(Vr)*er+Ot*m(Vr)*or);return lt.invert(pn,Vr)},wt}function yt(Ve){var qe=m(Ve),et=t(Ve);return function(lt,wt){var vt=t(wt),Ot=t(lt)*vt,ir=m(lt)*vt,or=m(wt);return[n(ir,Ot*et-or*qe),D(or*et+Ot*qe)]}}Pt.invert=function(Ve,qe){y(Ve)>1&&(Ve=2*h(Ve)-Ve),y(qe)>1&&(qe=2*h(qe)-qe);var et=h(Ve),lt=h(qe),wt=-et*Ve,vt=-lt*qe,Ot=vt/wt<1,ir=function(xr,kr){for(var Cr=0,Vr=1,pn=.5,Tn=50;;){var Un=pn*pn,Wn=C(pn),ei=D(1/C(1+Un)),Yn=1-Un+pn*(1+Un)*ei,Si=(1-Wn)/Yn,Ri=C(Si),Ki=Si*(1+Un),Zi=Ri*(1-Un),ea=C(Ki-xr*xr),Oa=kr+Zi+pn*ea;if(y(Vr-Cr)<1e-12||0==--Tn||0===Oa)break;Oa>0?Cr=pn:Vr=pn,pn=.5*(Cr+Vr)}if(!Tn)return null;var Ia=D(Wn),ya=t(Ia),xa=1/ya,Ca=2*Wn*ya,Xa=(-Yn*ya-(-3*pn+ei*(1+3*Un))*Ca*(1-Wn))/(Yn*Yn);return[b/4*(xr*(-2*xa*(.5*Xa/Ri*(1-Un)-2*pn*Ri*Ca)+-xa*Ca*ea)+-xa*(pn*(1+Un)*Xa+Si*(1+3*Un)*Ca)*D(xr/C(Ki))),Ia]}(Ot?vt:wt,Ot?wt:vt),or=ir[0],er=ir[1],ur=t(er);return Ot&&(or=-g-or),[et*(n(m(or)*ur,-m(er))+b),lt*D(t(or)*ur)]},Ft.invert=function(Ve,qe){var et,lt,wt,vt,Ot,ir,Cr,Vr,pn,or=(A-1)/(A+1),er=C(1-or*or),xr=(lt=-Ve,wt=er*er,(et=.5*zt(g,er*er)-qe)?(vt=ct(et,wt),lt?(ir=(Ot=ct(lt,1-wt))[1]*Ot[1]+wt*vt[0]*vt[0]*Ot[0]*Ot[0],[[vt[0]*Ot[2]/ir,vt[1]*vt[2]*Ot[0]*Ot[1]/ir],[vt[1]*Ot[1]/ir,-vt[0]*vt[2]*Ot[0]*Ot[2]/ir],[vt[2]*Ot[1]*Ot[2]/ir,-wt*vt[0]*vt[1]*Ot[0]/ir]]):[[vt[0],0],[vt[1],0],[vt[2],0]]):[[0,(Ot=ct(lt,1-wt))[0]/Ot[1]],[1/Ot[1],0],[Ot[2]/Ot[1],0]]),kr=[((Cr=xr[0])[0]*(Vr=xr[1])[0]+Cr[1]*Vr[1])/(pn=Vr[0]*Vr[0]+Vr[1]*Vr[1]),(Cr[1]*Vr[0]-Cr[0]*Vr[1])/pn];return[n(kr[1],kr[0])/-1,2*e(a(-.5*f(or*kr[0]*kr[0]+or*kr[1]*kr[1])))-g]};var Nt=D(1-1/3)*k,Yt=Oe(0);function rr(Ve){var qe=Nt*O,et=Pe(b,qe)[0]-Pe(-b,qe)[0],lt=Yt(0,qe)[1],wt=Pe(0,qe)[1],vt=T-wt,Ot=E/Ve,ir=4/E,or=lt+vt*vt*4/E;function er(ur,xr){var kr,Cr=y(xr);if(Cr>qe){var Vr=i(Ve-1,s(0,r((ur+b)/Ot)));(kr=Pe(ur+=b*(Ve-1)/Ve-Vr*Ot,Cr))[0]=kr[0]*E/et-E*(Ve-1)/(2*Ve)+Vr*E/Ve,kr[1]=lt+4*(kr[1]-wt)*vt/E,xr<0&&(kr[1]=-kr[1])}else kr=Yt(ur,xr);return kr[0]*=ir,kr[1]/=or,kr}return er.invert=function(ur,xr){ur/=ir;var kr=y(xr*=or);if(kr>lt){var Cr=i(Ve-1,s(0,r((ur+b)/Ot))),Vr=Pe.invert(ur=(ur+b*(Ve-1)/Ve-Cr*Ot)*et/E,.25*(kr-lt)*E/vt+wt);return Vr[0]-=b*(Ve-1)/Ve-Cr*Ot,xr<0&&(Vr[1]=-Vr[1]),Vr}return Yt.invert(ur,xr)},er}function Fe(Ve,qe){return[Ve,1&qe?90-o:Nt]}function ht(Ve,qe){return[Ve,1&qe?-90+o:-Nt]}function kt(Ve){return[Ve[0]*(1-o),Ve[1]]}function Gt(Ve){var qe,et=1+Ve,lt=D(m(1/et)),wt=2*C(b/(qe=b+4*lt*et)),vt=.5*wt*(et+C(Ve*(2+Ve))),Ot=Ve*Ve,ir=et*et;function or(er,ur){var xr,kr,Cr=1-m(ur);if(Cr&&Cr<2){var Vr,pn=g-ur,Tn=25;do{var Un=m(pn),Wn=t(pn),ei=lt+n(Un,et-Wn),Yn=1+ir-2*et*Wn;pn-=Vr=(pn-Ot*lt-et*Un+Yn*ei-.5*Cr*qe)/(2*et*Un*ei)}while(y(Vr)>1e-12&&--Tn>0);xr=wt*C(Yn),kr=er*ei/b}else xr=wt*(Ve+Cr),kr=er*lt/b;return[xr*m(kr),vt-xr*t(kr)]}return or.invert=function(er,ur){var xr=er*er+(ur-=vt)*ur,kr=(1+ir-xr/(wt*wt))/(2*et),Cr=S(kr),Vr=m(Cr),pn=lt+n(Vr,et-kr);return[D(er/C(xr))*b/pn,D(1-2*(Cr-Ot*lt-et*Vr+(1+ir-2*et*kr)*pn)/qe)]},or}function Zt(Ve,qe){return qe>-.7109889596207567?((Ve=ne(Ve,qe))[1]+=.0528035274542,Ve):de(Ve,qe)}function fr(Ve,qe){return y(qe)>.7109889596207567?((Ve=ne(Ve,qe))[1]-=qe>0?.0528035274542:-.0528035274542,Ve):de(Ve,qe)}function $t(Ve,qe,et,lt){var wt=C(4*b/(2*et+(1+Ve-qe/2)*m(2*et)+(Ve+qe)/2*m(4*et)+qe/2*m(6*et))),vt=C(lt*m(et)*C((1+Ve*t(2*et)+qe*t(4*et))/(1+Ve+qe))),Ot=et*or(1);function ir(xr){return C(1+Ve*t(2*xr)+qe*t(4*xr))}function or(xr){var kr=xr*et;return(2*kr+(1+Ve-qe/2)*m(2*kr)+(Ve+qe)/2*m(4*kr)+qe/2*m(6*kr))/et}function er(xr){return ir(xr)*m(xr)}var ur=function(xr,kr){var Cr=et*ee(or,Ot*m(kr)/et,kr/b);isNaN(Cr)&&(Cr=et*h(kr));var Vr=wt*ir(Cr);return[Vr*vt*xr/b*t(Cr),Vr/vt*m(Cr)]};return ur.invert=function(xr,kr){var Cr=ee(er,kr*vt/wt);return[xr*b/(t(Cr)*wt*vt*ir(Cr)),D(et*or(Cr/et)/Ot)]},0===et&&(wt=C(lt/b),(ur=function(xr,kr){return[xr*wt,m(kr)/wt]}).invert=function(xr,kr){return[xr/wt,D(kr*wt)]}),ur}function dr(Ve,qe,et){function lt(Cr){return Ve+(1-Ve)*l(1-l(Cr,qe),1/qe)}function wt(Cr){return function(Ve,qe,et,lt,wt){void 0===lt&&(lt=1e-8),void 0===wt&&(wt=20);var vt=Ve(qe),Ot=Ve(.5*(qe+et)),ir=Ve(et);return function or(er,ur,xr,kr,Cr,Vr,pn,Tn,Un,Wn,ei){if(ei.nanEncountered)return NaN;var Yn,Si,Ri,Ki,Zi,ea,Oa,Ia,ya,xa;if(Si=er(ur+.25*(Yn=xr-ur)),Ri=er(xr-.25*Yn),isNaN(Si))ei.nanEncountered=!0;else{if(!isNaN(Ri))return xa=((ea=(Ki=Yn*(kr+4*Si+Cr)/12)+(Zi=Yn*(Cr+4*Ri+Vr)/12))-pn)/15,Wn>Un?(ei.maxDepthCount++,ea+xa):Math.abs(xa)<Tn?ea+xa:(Ia=or(er,ur,Oa=ur+.5*Yn,kr,Si,Cr,Ki,.5*Tn,Un,Wn+1,ei),isNaN(Ia)?(ei.nanEncountered=!0,NaN):(ya=or(er,Oa,xr,Cr,Ri,Vr,Zi,.5*Tn,Un,Wn+1,ei),isNaN(ya)?(ei.nanEncountered=!0,NaN):Ia+ya));ei.nanEncountered=!0}}(Ve,qe,et,vt,Ot,ir,(vt+4*Ot+ir)*(et-qe)/6,lt,wt,1,{maxDepthCount:0,nanEncountered:!1})}(lt,0,Cr,1e-4)}for(var vt=1/wt(1),ir=(1+1e-8)*vt,or=[],er=0;er<=1e3;er++)or.push(wt(er/1e3)*ir);function ur(Cr){var Vr=0,pn=1e3,Tn=500;do{or[Tn]>Cr?pn=Tn:Vr=Tn,Tn=Vr+pn>>1}while(Tn>Vr);var Un=or[Tn+1]-or[Tn];return Un&&(Un=(Cr-or[Tn+1])/Un),(Tn+1+Un)/1e3}var xr=2*ur(1)/b*vt/et,kr=function(Cr,Vr){var pn=ur(y(m(Vr))),Tn=lt(pn)*Cr;return pn/=xr,[Tn,Vr>=0?pn:-pn]};return kr.invert=function(Cr,Vr){var pn;return y(Vr*=xr)<1&&(pn=h(Vr)*D(wt(y(Vr))*vt)),[Cr/lt(y(Vr)),pn]},kr}function Tr(Ve,qe){return y(Ve[0]-qe[0])<o&&y(Ve[1]-qe[1])<o}function wr(Ve,qe){for(var et,lt,wt,vt=-1,Ot=Ve.length,ir=Ve[0],or=[];++vt<Ot;){lt=((et=Ve[vt])[0]-ir[0])/qe,wt=(et[1]-ir[1])/qe;for(var er=0;er<qe;++er)or.push([ir[0]+er*lt,ir[1]+er*wt]);ir=et}return or.push(et),or}function mr(Ve){var qe,et,wt,vt,ir,or=[],er=Ve[0].length;for(ir=0;ir<er;++ir)et=(qe=Ve[0][ir])[0][0],or.push(wr([[et+o,qe[0][1]+o],[et+o,(wt=qe[1][1])-o],[(vt=qe[2][0])-o,wt-o],[vt-o,qe[2][1]+o]],30));for(ir=Ve[1].length-1;ir>=0;--ir)et=(qe=Ve[1][ir])[0][0],or.push(wr([[(vt=qe[2][0])-o,qe[2][1]-o],[vt-o,(wt=qe[1][1])+o],[et+o,wt+o],[et+o,qe[0][1]-o]],30));return{type:"Polygon",coordinates:[u.merge(or)]}}function _r(Ve,qe,et){var lt,wt;function vt(or,er){for(var ur=er<0?-1:1,xr=qe[+(er<0)],kr=0,Cr=xr.length-1;kr<Cr&&or>xr[kr][2][0];++kr);var Vr=Ve(or-xr[kr][1][0],er);return Vr[0]+=Ve(xr[kr][1][0],ur*er>ur*xr[kr][0][1]?xr[kr][0][1]:er)[0],Vr}et?vt.invert=et(vt):Ve.invert&&(vt.invert=function(or,er){for(var ur=wt[+(er<0)],xr=qe[+(er<0)],kr=0,Cr=ur.length;kr<Cr;++kr){var Vr=ur[kr];if(Vr[0][0]<=or&&or<Vr[1][0]&&Vr[0][1]<=er&&er<Vr[1][1]){var pn=Ve.invert(or-Ve(xr[kr][1][0],0)[0],er);return pn[0]+=xr[kr][1][0],Tr(vt(pn[0],pn[1]),[or,er])?pn:null}}});var Ot=v.geoProjection(vt),ir=Ot.stream;return Ot.stream=function(or){var er=Ot.rotate(),ur=ir(or),xr=(Ot.rotate([0,0]),ir(or));return Ot.rotate(er),ur.sphere=function(){v.geoStream(lt,xr)},ur},Ot.lobes=function(or){return arguments.length?(lt=mr(or),qe=or.map(function(er){return er.map(function(ur){return[[ur[0][0]*O,ur[0][1]*O],[ur[1][0]*O,ur[1][1]*O],[ur[2][0]*O,ur[2][1]*O]]})}),wt=qe.map(function(er){return er.map(function(ur){var xr,kr=Ve(ur[0][0],ur[0][1])[0],Cr=Ve(ur[2][0],ur[2][1])[0],Vr=Ve(ur[1][0],ur[0][1])[1],pn=Ve(ur[1][0],ur[1][1])[1];return Vr>pn&&(xr=Vr,Vr=pn,pn=xr),[[kr,Vr],[Cr,pn]]})}),Ot):qe.map(function(er){return er.map(function(ur){return[[ur[0][0]*k,ur[0][1]*k],[ur[1][0]*k,ur[1][1]*k],[ur[2][0]*k,ur[2][1]*k]]})})},null!=qe&&Ot.lobes(qe),Ot}Zt.invert=function(Ve,qe){return qe>-.7109889596207567?ne.invert(Ve,qe-.0528035274542):de.invert(Ve,qe)},fr.invert=function(Ve,qe){return y(qe)>.7109889596207567?ne.invert(Ve,qe+(qe>0?.0528035274542:-.0528035274542)):de.invert(Ve,qe)};var Sr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Gr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Er=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Zr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],an=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],gn=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Vn(Ve,qe){return[3/E*Ve*C(b*b/3-qe*qe),qe]}function Gn(Ve){function qe(et,lt){if(y(y(lt)-g)<o)return[0,lt<0?-2:2];var wt=m(lt),vt=l((1+wt)/(1-wt),Ve/2),Ot=.5*(vt+1/vt)+t(et*=Ve);return[2*m(et)/Ot,(vt-1/vt)/Ot]}return qe.invert=function(et,lt){var wt=y(lt);if(y(wt-2)<o)return et?null:[0,h(lt)*g];if(wt>2)return null;var vt=(et/=2)*et,Ot=(lt/=2)*lt,ir=2*lt/(1+vt+Ot);return ir=l((1+ir)/(1-ir),1/Ve),[n(2*et,1-vt-Ot)/Ve,D((ir-1)/(ir+1))]},qe}Vn.invert=function(Ve,qe){return[E/3*Ve/C(b*b/3-qe*qe),qe]};var Ln=b/A;function ln(Ve,qe){return[Ve*(1+C(t(qe)))/2,qe/(t(qe/2)*t(Ve/6))]}function qr(Ve,qe){var et=Ve*Ve,lt=qe*qe;return[Ve*(.975534+lt*(-.0143059*et-.119161+-.0547009*lt)),qe*(1.00384+et*(.0802894+-.02855*lt+199025e-9*et)+lt*(.0998909+-.0491032*lt))]}function Pr(Ve,qe){return[m(Ve)/t(qe),d(qe)*t(Ve)]}function un(Ve){var qe=t(Ve),et=d(w+Ve/2);function lt(wt,vt){var Ot=vt-Ve,ir=y(Ot)<o?wt*qe:y(ir=w+vt/2)<o||y(y(ir)-g)<o?0:wt*Ot/f(d(ir)/et);return[ir,Ot]}return lt.invert=function(wt,vt){var Ot,ir=vt+Ve;return[y(vt)<o?wt/qe:y(Ot=w+ir/2)<o||y(y(Ot)-g)<o?0:wt*f(d(Ot)/et)/vt,ir]},lt}function dn(Ve,qe){return[Ve,1.25*f(d(w+.4*qe))]}function cn(Ve){var qe=Ve.length-1;function et(lt,wt){for(var vt,Ot=t(wt),ir=2/(1+Ot*t(lt)),or=ir*Ot*m(lt),er=ir*m(wt),ur=qe,xr=Ve[ur],kr=xr[0],Cr=xr[1];--ur>=0;)kr=(xr=Ve[ur])[0]+or*(vt=kr)-er*Cr,Cr=xr[1]+or*Cr+er*vt;return[kr=or*(vt=kr)-er*Cr,Cr=or*Cr+er*vt]}return et.invert=function(lt,wt){var vt=20,Ot=lt,ir=wt;do{for(var or,er=qe,ur=Ve[er],xr=ur[0],kr=ur[1],Cr=0,Vr=0;--er>=0;)Cr=xr+Ot*(or=Cr)-ir*Vr,Vr=kr+Ot*Vr+ir*or,xr=(ur=Ve[er])[0]+Ot*(or=xr)-ir*kr,kr=ur[1]+Ot*kr+ir*or;var pn,Tn,Un=(Cr=xr+Ot*(or=Cr)-ir*Vr)*Cr+(Vr=kr+Ot*Vr+ir*or)*Vr;Ot-=pn=((xr=Ot*(or=xr)-ir*kr-lt)*Cr+(kr=Ot*kr+ir*or-wt)*Vr)/Un,ir-=Tn=(kr*Cr-xr*Vr)/Un}while(y(pn)+y(Tn)>1e-12&&--vt>0);if(vt){var Wn=C(Ot*Ot+ir*ir),ei=2*e(.5*Wn),Yn=m(ei);return[n(Ot*Yn,Wn*t(ei)),Wn?D(ir*Yn/Wn):0]}},et}ln.invert=function(Ve,qe){var et=y(Ve),lt=y(qe),wt=o,vt=g;lt<Ln?vt*=lt/Ln:wt+=6*S(Ln/lt);for(var Ot=0;Ot<25;Ot++){var ir=m(vt),or=C(t(vt)),er=m(vt/2),ur=t(vt/2),xr=m(wt/6),kr=t(wt/6),Cr=.5*wt*(1+or)-et,Vr=vt/(ur*kr)-lt,pn=or?-.25*wt*ir/or:0,Tn=.5*(1+or),Un=(1+.5*vt*er/ur)/(ur*kr),Wn=vt/ur*(xr/6)/(kr*kr),ei=pn*Wn-Un*Tn,Yn=(Cr*Wn-Vr*Tn)/ei,Si=(Vr*pn-Cr*Un)/ei;if(vt-=Yn,wt-=Si,y(Yn)<o&&y(Si)<o)break}return[Ve<0?-wt:wt,qe<0?-vt:vt]},qr.invert=function(Ve,qe){var et=h(Ve)*b,lt=qe/2,wt=50;do{var vt=et*et,Ot=lt*lt,ir=et*lt,or=et*(.975534+Ot*(-.0143059*vt-.119161+-.0547009*Ot))-Ve,er=lt*(1.00384+vt*(.0802894+-.02855*Ot+199025e-9*vt)+Ot*(.0998909+-.0491032*Ot))-qe,ur=.975534-Ot*(.119161+3*vt*.0143059+.0547009*Ot),xr=-ir*(.238322+.2188036*Ot+.0286118*vt),kr=ir*(.1605788+7961e-7*vt+-.0571*Ot),Cr=1.00384+vt*(.0802894+199025e-9*vt)+Ot*(3*(.0998909-.02855*vt)-.245516*Ot),Vr=xr*kr-Cr*ur,pn=(er*xr-or*Cr)/Vr,Tn=(or*kr-er*ur)/Vr;et-=pn,lt-=Tn}while((y(pn)>o||y(Tn)>o)&&--wt>0);return wt&&[et,lt]},Pr.invert=function(Ve,qe){var et=Ve*Ve,lt=qe*qe+1,wt=et+lt,vt=Ve?_*C((wt-C(wt*wt-4*et))/et):1/C(lt);return[D(Ve*vt),h(qe)*S(vt)]},dn.invert=function(Ve,qe){return[Ve,2.5*e(a(.8*qe))-.625*b]};var fn=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Bn=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Nn=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Fn=[[.9245,0],[0,0],[.01943,0]],ar=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Bt(Ve,qe){var et=v.geoProjection(cn(Ve)).rotate(qe).clipAngle(90),lt=v.geoRotation(qe),wt=et.center;return delete et.rotate,et.center=function(vt){return arguments.length?wt(lt(vt)):lt.invert(wt())},et}var Qt=C(6),yr=C(7);function Dr(Ve,qe){var et=D(7*m(qe)/(3*Qt));return[Qt*Ve*(2*t(2*et/3)-1)/yr,9*m(et/3)/yr]}function $r(Ve,qe){for(var et,lt=(1+_)*m(qe),wt=qe,vt=0;vt<25&&(wt-=et=(m(wt/2)+m(wt)-lt)/(.5*t(wt/2)+t(wt)),!(y(et)<o));vt++);return[Ve*(1+2*t(wt)/t(wt/2))/(3*A),2*C(3)*m(wt/2)/C(2+A)]}function Xr(Ve,qe){for(var et,lt=C(6/(4+b)),wt=(1+b/4)*m(qe),vt=qe/2,Ot=0;Ot<25&&(vt-=et=(vt/2+m(vt)-wt)/(.5+t(vt)),!(y(et)<o));Ot++);return[lt*(.5+t(vt))*Ve/1.5,lt*vt]}function Mr(Ve,qe){var et=qe*qe,lt=et*et,wt=et*lt;return[Ve*(.84719-.13063*et+wt*wt*(.05494*et-.04515-.02326*lt+.00331*wt)),qe*(1.01183+lt*lt*(.01926*et-.02625-.00396*lt))]}function Lr(Ve,qe){return[Ve*(1+t(qe))/2,2*(qe-d(qe/2))]}Dr.invert=function(Ve,qe){var et=3*D(qe*yr/9);return[Ve*yr/(Qt*(2*t(2*et/3)-1)),D(3*m(et)*Qt/7)]},$r.invert=function(Ve,qe){var et=qe*C(2+A)/(2*C(3)),lt=2*D(et);return[3*A*Ve/(1+2*t(lt)/t(lt/2)),D((et+m(lt))/(1+_))]},Xr.invert=function(Ve,qe){var et=C(6/(4+b)),lt=qe/et;return y(y(lt)-g)<o&&(lt=lt<0?-g:g),[1.5*Ve/(et*(.5+t(lt))),D((lt/2+m(lt))/(1+b/4))]},Mr.invert=function(Ve,qe){var et,lt,wt,vt,Ot=qe,ir=25;do{Ot-=et=(Ot*(1.01183+(wt=(lt=Ot*Ot)*lt)*wt*(.01926*lt-.02625-.00396*wt))-qe)/(1.01183+wt*wt*(.21186*lt-.23625+-.05148*wt))}while(y(et)>1e-12&&--ir>0);return[Ve/(.84719-.13063*(lt=Ot*Ot)+(vt=lt*(wt=lt*lt))*vt*(.05494*lt-.04515-.02326*wt+.00331*vt)),Ot]},Lr.invert=function(Ve,qe){for(var et=qe/2,lt=0,wt=1/0;lt<10&&y(wt)>o;++lt){var vt=t(qe/2);qe-=wt=(qe-d(qe/2)-et)/(1-.5/(vt*vt))}return[2*Ve/(1+t(qe)),qe]};var Rr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ir(Ve,qe){var et=m(qe),lt=t(qe),wt=h(Ve);if(0===Ve||y(qe)===g)return[0,qe];if(0===qe)return[Ve,0];if(y(Ve)===g)return[Ve*lt,g*et];var vt=b/(2*Ve)-2*Ve/b,Ot=2*qe/b,ir=(1-Ot*Ot)/(et-Ot),or=vt*vt,er=ir*ir,ur=1+or/er,xr=1+er/or,kr=(vt*et/ir-vt/2)/ur,Cr=(er*et/or+ir/2)/xr,Vr=Cr*Cr-(er*et*et/or+ir*et-1)/xr;return[g*(kr+C(kr*kr+lt*lt/ur)*wt),g*(Cr+C(Vr<0?0:Vr)*h(-qe*vt)*wt)]}function Fr(Ve,qe){var et=qe*qe;return[Ve,qe*(1.0148+et*et*(.23185+et*(.02406*et-.14499)))]}function Qr(Ve,qe){if(y(qe)<o)return[Ve,0];var et=d(qe),lt=Ve*m(qe);return[m(lt)/et,qe+(1-t(lt))/et]}function In(Ve,qe){return[Ve[0]*qe[0]+Ve[1]*qe[3],Ve[0]*qe[1]+Ve[1]*qe[4],Ve[0]*qe[2]+Ve[1]*qe[5]+Ve[2],Ve[3]*qe[0]+Ve[4]*qe[3],Ve[3]*qe[1]+Ve[4]*qe[4],Ve[3]*qe[2]+Ve[4]*qe[5]+Ve[5]]}function nn(Ve,qe){return[Ve[0]-qe[0],Ve[1]-qe[1]]}function Cn(Ve){return C(Ve[0]*Ve[0]+Ve[1]*Ve[1])}function Ur(Ve,qe,et){function lt(Ot,ir){var or,er=qe(Ot,ir),ur=er.project([Ot*k,ir*k]);return(or=er.transform)?[or[0]*ur[0]+or[1]*ur[1]+or[2],-(or[3]*ur[0]+or[4]*ur[1]+or[5])]:(ur[1]=-ur[1],ur)}(function Ot(ir,or){if(ir.edges=function(Vr){for(var pn=Vr.length,Tn=[],Un=Vr[pn-1],Wn=0;Wn<pn;++Wn)Tn.push([Un,Un=Vr[Wn]]);return Tn}(ir.face),or.face){var er=ir.shared=function(Vr,pn){for(var Tn,Un,Wn=Vr.length,ei=null,Yn=0;Yn<Wn;++Yn){Tn=Vr[Yn];for(var Si=pn.length;--Si>=0;)if(Tn[0]===(Un=pn[Si])[0]&&Tn[1]===Un[1]){if(ei)return[ei,Tn];ei=Tn}}}(ir.face,or.face),ur=function(Ve,qe){var Ot,ir,et=nn(Ve[1],Ve[0]),lt=nn(qe[1],qe[0]),wt=n((Ot=et)[0]*(ir=lt)[1]-Ot[1]*ir[0],Ot[0]*ir[0]+Ot[1]*ir[1]),vt=Cn(et)/Cn(lt);return In([1,0,Ve[0][0],0,1,Ve[0][1]],In([vt,0,0,0,vt,0],In([t(wt),m(wt),0,-m(wt),t(wt),0],[1,0,-qe[0][0],0,1,-qe[0][1]])))}(er.map(or.project),er.map(ir.project));ir.transform=or.transform?In(or.transform,ur):ur;for(var xr=or.edges,kr=0,Cr=xr.length;kr<Cr;++kr)Kr(er[0],xr[kr][1])&&Kr(er[1],xr[kr][0])&&(xr[kr]=ir),Kr(er[0],xr[kr][0])&&Kr(er[1],xr[kr][1])&&(xr[kr]=ir);for(kr=0,Cr=(xr=ir.edges).length;kr<Cr;++kr)Kr(er[0],xr[kr][0])&&Kr(er[1],xr[kr][1])&&(xr[kr]=or),Kr(er[0],xr[kr][1])&&Kr(er[1],xr[kr][0])&&(xr[kr]=or)}else ir.transform=or.transform;return ir.children&&ir.children.forEach(function(Vr){Ot(Vr,ir)}),ir})(Ve,{transform:null}),An(Ve)&&(lt.invert=function(Ot,ir){var or=function er(ur,xr){var ei,Yn,kr=ur.project.invert,Cr=ur.transform,Vr=xr;if(Cr&&(Vr=[(Cr=[(Yn=1/((ei=Cr)[0]*ei[4]-ei[1]*ei[3]))*ei[4],-Yn*ei[1],Yn*(ei[1]*ei[5]-ei[2]*ei[4]),-Yn*ei[3],Yn*ei[0],Yn*(ei[2]*ei[3]-ei[0]*ei[5])])[0]*Vr[0]+Cr[1]*Vr[1]+Cr[2],Cr[3]*Vr[0]+Cr[4]*Vr[1]+Cr[5]]),kr&&ur===function(ei){return qe(ei[0]*O,ei[1]*O)}(pn=kr(Vr)))return pn;for(var pn,Tn=ur.children,Un=0,Wn=Tn&&Tn.length;Un<Wn;++Un)if(pn=er(Tn[Un],xr))return pn}(Ve,[Ot,-ir]);return or&&(or[0]*=O,or[1]*=O,or)});var wt=v.geoProjection(lt),vt=wt.stream;return wt.stream=function(Ot){var ir=wt.rotate(),or=vt(Ot),er=(wt.rotate([0,0]),vt(Ot));return wt.rotate(ir),or.sphere=function(){er.polygonStart(),er.lineStart(),function ur(xr,kr,Cr){var Vr,pn,Tn=kr.edges,Un=Tn.length,Wn={type:"MultiPoint",coordinates:kr.face},ei=kr.face.filter(function(Oa){return 90!==y(Oa[1])}),Yn=v.geoBounds({type:"MultiPoint",coordinates:ei}),Si=!1,Ri=-1,Ki=Yn[1][0]-Yn[0][0],Zi=180===Ki||360===Ki?[(Yn[0][0]+Yn[1][0])/2,(Yn[0][1]+Yn[1][1])/2]:v.geoCentroid(Wn);if(Cr)for(;++Ri<Un&&Tn[Ri]!==Cr;);++Ri;for(var ea=0;ea<Un;++ea)pn=Tn[(ea+Ri)%Un],Array.isArray(pn)?(Si||(xr.point((Vr=v.geoInterpolate(pn[0],Zi)(o))[0],Vr[1]),Si=!0),xr.point((Vr=v.geoInterpolate(pn[1],Zi)(o))[0],Vr[1])):(Si=!1,pn!==Cr&&ur(xr,pn,kr))}(er,Ve),er.lineEnd(),er.polygonEnd()},or},wt.angle(null==et?-30:et*k)}function Kr(Ve,qe){return Ve&&qe&&Ve[0]===qe[0]&&Ve[1]===qe[1]}function An(Ve){return Ve.project.invert||Ve.children&&Ve.children.some(An)}Ir.invert=function(Ve,qe){var et=(Ve/=g)*Ve,lt=et+(qe/=g)*qe,wt=b*b;return[Ve?(lt-1+C((1-lt)*(1-lt)+4*et))/(2*Ve)*g:0,ee(function(vt){return lt*(b*m(vt)-2*vt)*b+4*vt*vt*(qe-m(vt))+2*b*vt-wt*qe},0)]},Fr.invert=function(Ve,qe){qe>1.790857183?qe=1.790857183:qe<-1.790857183&&(qe=-1.790857183);var et,lt=qe;do{var wt=lt*lt;lt-=et=(lt*(1.0148+wt*wt*(.23185+wt*(.02406*wt-.14499)))-qe)/(1.0148+wt*wt*(5*.23185+wt*(.21654*wt-1.01493)))}while(y(et)>o);return[Ve,lt]},Qr.invert=function(Ve,qe){if(y(qe)<o)return[Ve,0];var et,lt=Ve*Ve+qe*qe,wt=.5*qe,vt=10;do{var Ot=d(wt),ir=1/t(wt),or=lt-2*qe*wt+wt*wt;wt-=et=(Ot*or+2*(wt-qe))/(2+or*ir*ir+2*(wt-qe)*Ot)}while(y(et)>o&&--vt>0);return Ot=d(wt),[(y(qe)<y(wt+1/Ot)?D(Ve*Ot):h(qe)*h(Ve)*(S(y(Ve*Ot))+g))/m(wt),wt]};var wn=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Hn=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Ve){return Ve.map(function(qe){return wn[qe]})}),gi=2/C(3);function ti(Ve,qe){var et=Pe(Ve,qe);return[et[0]*gi,et[1]]}function En(Ve,qe){for(var et=0,lt=Ve.length,wt=0;et<lt;++et)wt+=Ve[et]*qe[et];return wt}function hi(Ve){return[n(Ve[1],Ve[0])*k,D(s(-1,i(1,Ve[2])))*k]}function mi(Ve){var qe=Ve[0]*O,et=Ve[1]*O,lt=t(et);return[lt*t(qe),lt*m(qe),m(et)]}function ra(){}function ka(Ve,qe){return{type:"FeatureCollection",features:Ve.features.map(function(et){return fa(et,qe)})}}function fa(Ve,qe){return{type:"Feature",id:Ve.id,properties:Ve.properties,geometry:Aa(Ve.geometry,qe)}}function Aa(Ve,qe){if(!Ve)return null;if("GeometryCollection"===Ve.type)return wt=qe,{type:"GeometryCollection",geometries:Ve.geometries.map(function(vt){return Aa(vt,wt)})};var wt,et;switch(Ve.type){case"Point":case"MultiPoint":et=yo;break;case"LineString":case"MultiLineString":et=Ho;break;case"Polygon":case"MultiPolygon":case"Sphere":et=Ko;break;default:return null}return v.geoStream(Ve,qe(et)),et.result()}ti.invert=function(Ve,qe){return Pe.invert(Ve/gi,qe)};var Bi=[],$i=[],yo={point:function(Ve,qe){Bi.push([Ve,qe])},result:function(){var Ve=Bi.length?Bi.length<2?{type:"Point",coordinates:Bi[0]}:{type:"MultiPoint",coordinates:Bi}:null;return Bi=[],Ve}},Ho={lineStart:ra,point:function(Ve,qe){Bi.push([Ve,qe])},lineEnd:function(){Bi.length&&($i.push(Bi),Bi=[])},result:function(){var Ve=$i.length?$i.length<2?{type:"LineString",coordinates:$i[0]}:{type:"MultiLineString",coordinates:$i}:null;return $i=[],Ve}},Ko={polygonStart:ra,lineStart:ra,point:function(Ve,qe){Bi.push([Ve,qe])},lineEnd:function(){var Ve=Bi.length;if(Ve){do{Bi.push(Bi[0].slice())}while(++Ve<4);$i.push(Bi),Bi=[]}},polygonEnd:ra,result:function(){if(!$i.length)return null;var Ve=[],qe=[];return $i.forEach(function(et){!function(lt){if((wt=lt.length)<4)return!1;for(var wt,vt=0,Ot=lt[wt-1][1]*lt[0][0]-lt[wt-1][0]*lt[0][1];++vt<wt;)Ot+=lt[vt-1][1]*lt[vt][0]-lt[vt-1][0]*lt[vt][1];return Ot<=0}(et)?qe.push(et):Ve.push([et])}),qe.forEach(function(et){var lt=et[0];Ve.some(function(wt){if(function(vt,Ot){for(var ir=Ot[0],or=Ot[1],er=!1,ur=0,xr=vt.length,kr=xr-1;ur<xr;kr=ur++){var Cr=vt[ur],Vr=Cr[0],pn=Cr[1],Tn=vt[kr],Wn=Tn[1];pn>or^Wn>or&&ir<(Tn[0]-Vr)*(or-pn)/(Wn-pn)+Vr&&(er=!er)}return er}(wt[0],lt))return wt.push(et),!0})||Ve.push([et])}),$i=[],Ve.length?Ve.length>1?{type:"MultiPolygon",coordinates:Ve}:{type:"Polygon",coordinates:Ve[0]}:null}};function Na(Ve){var qe=Ve(g,0)[0]-Ve(-g,0)[0];function et(lt,wt){var vt=y(lt)<g,Ot=Ve(vt?lt:lt>0?lt-b:lt+b,wt),ir=(Ot[0]-Ot[1])*_,or=(Ot[0]+Ot[1])*_;if(vt)return[ir,or];var er=qe*_,ur=ir>0^or>0?-1:1;return[ur*ir-h(or)*er,ur*or-h(ir)*er]}return Ve.invert&&(et.invert=function(lt,wt){var vt=(lt+wt)*_,Ot=(wt-lt)*_,ir=y(vt)<.5*qe&&y(Ot)<.5*qe;if(!ir){var or=qe*_,er=vt>0^Ot>0?-1:1,ur=-er*lt+(Ot>0?1:-1)*or,xr=-er*wt+(vt>0?1:-1)*or;vt=(-ur-xr)*_,Ot=(ur-xr)*_}var kr=Ve.invert(vt,Ot);return ir||(kr[0]+=vt>0?b:-b),kr}),v.geoProjection(et).rotate([-90,-90,45]).clipAngle(179.999)}function Vi(){return Na(Ft).scale(111.48)}function ia(Ve){var qe=m(Ve);function et(lt,wt){var vt=qe?d(lt*qe/2)/qe:lt/2;if(!wt)return[2*vt,-Ve];var Ot=2*e(vt*m(wt)),ir=1/d(wt);return[m(Ot)*ir,wt+(1-t(Ot))*ir-Ve]}return et.invert=function(lt,wt){if(y(wt+=Ve)<o)return[qe?2*e(qe*lt/2)/qe:lt,0];var vt,Ot=lt*lt+wt*wt,ir=0,or=10;do{var er=d(ir),ur=1/t(ir),xr=Ot-2*wt*ir+ir*ir;ir-=vt=(er*xr+2*(ir-wt))/(2+xr*ur*ur+2*(ir-wt)*er)}while(y(vt)>o&&--or>0);var kr=lt*(er=d(ir)),Cr=d(y(wt)<y(ir+1/er)?.5*D(kr):.5*S(kr)+b/4)/m(ir);return[qe?2*e(qe*Cr)/qe:2*Cr,ir]},et}var Qi=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function go(Ve,qe){var et,lt=i(18,36*y(qe)/b),wt=r(lt),vt=lt-wt,Ot=(et=Qi[wt])[0],ir=et[1],or=(et=Qi[++wt])[0],er=et[1],ur=(et=Qi[i(19,++wt)])[0],xr=et[1];return[Ve*(or+vt*(ur-Ot)/2+vt*vt*(ur-2*or+Ot)/2),(qe>0?g:-g)*(er+vt*(xr-ir)/2+vt*vt*(xr-2*er+ir)/2)]}function Ji(Ve,qe){var et=function(Ot){function ir(or,er){var ur=t(er),xr=(Ot-1)/(Ot-ur*t(or));return[xr*ur*m(or),xr*m(er)]}return ir.invert=function(or,er){var ur=or*or+er*er,xr=C(ur),kr=(Ot-C(1-ur*(Ot+1)/(Ot-1)))/((Ot-1)/xr+xr/(Ot-1));return[n(or*kr,xr*C(1-kr*kr)),xr?D(er*kr/xr):0]},ir}(Ve);if(!qe)return et;var lt=t(qe),wt=m(qe);function vt(Ot,ir){var or=et(Ot,ir),er=or[1],ur=er*wt/(Ve-1)+lt;return[or[0]*lt/ur,er/ur]}return vt.invert=function(Ot,ir){var or=(Ve-1)/(Ve-1-ir*wt);return et.invert(or*Ot,or*ir*lt)},vt}Qi.forEach(function(Ve){Ve[1]*=1.0144}),go.invert=function(Ve,qe){var et=qe/g,lt=90*et,wt=i(18,y(lt/5)),vt=s(0,r(wt));do{var Ot=Qi[vt][1],ir=Qi[vt+1][1],or=Qi[i(19,vt+2)][1],er=or-Ot,ur=or-2*ir+Ot,xr=2*(y(et)-ir)/er,kr=ur/er,Cr=xr*(1-kr*xr*(1-2*kr*xr));if(Cr>=0||1===vt){lt=(qe>=0?5:-5)*(Cr+wt);var Vr,pn=50;do{Cr=(wt=i(18,y(lt)/5))-(vt=r(wt)),Ot=Qi[vt][1],ir=Qi[vt+1][1],or=Qi[i(19,vt+2)][1],lt-=(Vr=(qe>=0?g:-g)*(ir+Cr*(or-Ot)/2+Cr*Cr*(or-2*ir+Ot)/2)-qe)*k}while(y(Vr)>1e-12&&--pn>0);break}}while(--vt>=0);var Tn=Qi[vt][0],Un=Qi[vt+1][0],Wn=Qi[i(19,vt+2)][0];return[Ve/(Un+Cr*(Wn-Tn)/2+Cr*Cr*(Wn-2*Un+Tn)/2),lt*O]};var Dt=-179.9999,_t=179.9999,st=-89.9999;function sr(Ve){return Ve.length>0}function hn(Ve){return-90===Ve||90===Ve?[0,Ve]:[-180,(qe=Ve,Math.floor(1e4*qe)/1e4)];var qe}function ri(Ve){var qe=Ve[0],et=Ve[1],lt=!1;return qe<=Dt?(qe=-180,lt=!0):qe>=_t&&(qe=180,lt=!0),et<=st?(et=-90,lt=!0):et>=89.9999&&(et=90,lt=!0),lt?[qe,et]:Ve}function qi(Ve){return Ve.map(ri)}function ko(Ve,qe,et){for(var lt=0,wt=Ve.length;lt<wt;++lt){var vt=Ve[lt].slice();et.push({index:-1,polygon:qe,ring:vt});for(var Ot=0,ir=vt.length;Ot<ir;++Ot){var or=vt[Ot],er=or[0],ur=or[1];if(er<=Dt||er>=_t||ur<=st||ur>=89.9999){vt[Ot]=ri(or);for(var xr=Ot+1;xr<ir;++xr){var kr=vt[xr],Cr=kr[0],Vr=kr[1];if(Cr>Dt&&Cr<_t&&Vr>st&&Vr<89.9999)break}if(xr===Ot+1)continue;if(Ot){var pn={index:-1,polygon:qe,ring:vt.slice(0,Ot+1)};pn.ring[pn.ring.length-1]=hn(ur),et[et.length-1]=pn}else et.pop();if(xr>=ir)break;et.push({index:-1,polygon:qe,ring:vt=vt.slice(xr-1)}),vt[0]=hn(vt[0][1]),Ot=-1,ir=vt.length}}}}function as(Ve){var qe,et,lt,wt,vt,Ot,ir=Ve.length,or={},er={};for(qe=0;qe<ir;++qe)(lt=(et=Ve[qe]).ring[0])[0]!==(vt=et.ring[et.ring.length-1])[0]||lt[1]!==vt[1]?(et.index=qe,or[lt]=er[vt]=et):(et.polygon.push(et.ring),Ve[qe]=null);for(qe=0;qe<ir;++qe)if(et=Ve[qe]){if(wt=er[lt=et.ring[0]],Ot=or[vt=et.ring[et.ring.length-1]],delete or[lt],delete er[vt],lt[0]===vt[0]&&lt[1]===vt[1]){et.polygon.push(et.ring);continue}wt?(delete er[lt],delete or[wt.ring[0]],wt.ring.pop(),Ve[wt.index]=null,et={index:-1,polygon:wt.polygon,ring:wt.ring.concat(et.ring)},wt===Ot?et.polygon.push(et.ring):(et.index=ir++,Ve.push(or[et.ring[0]]=er[et.ring[et.ring.length-1]]=et))):Ot?(delete or[vt],delete er[Ot.ring[Ot.ring.length-1]],et.ring.pop(),et={index:ir++,polygon:Ot.polygon,ring:et.ring.concat(Ot.ring)},Ve[Ot.index]=null,Ve.push(or[et.ring[0]]=er[et.ring[et.ring.length-1]]=et)):(et.ring.push(et.ring[0]),et.polygon.push(et.ring))}}function aa(Ve){var qe={type:"Feature",geometry:Es(Ve.geometry)};return null!=Ve.id&&(qe.id=Ve.id),null!=Ve.bbox&&(qe.bbox=Ve.bbox),null!=Ve.properties&&(qe.properties=Ve.properties),qe}function Es(Ve){if(null==Ve)return Ve;var qe,et,lt,wt;switch(Ve.type){case"GeometryCollection":qe={type:"GeometryCollection",geometries:Ve.geometries.map(Es)};break;case"Point":qe={type:"Point",coordinates:ri(Ve.coordinates)};break;case"MultiPoint":case"LineString":qe={type:Ve.type,coordinates:qi(Ve.coordinates)};break;case"MultiLineString":qe={type:"MultiLineString",coordinates:Ve.coordinates.map(qi)};break;case"Polygon":var vt=[];ko(Ve.coordinates,vt,et=[]),as(et),qe={type:"Polygon",coordinates:vt};break;case"MultiPolygon":et=[],lt=-1,wt=Ve.coordinates.length;for(var Ot=new Array(wt);++lt<wt;)ko(Ve.coordinates[lt],Ot[lt]=[],et);as(et),qe={type:"MultiPolygon",coordinates:Ot.filter(sr)};break;default:return Ve}return null!=Ve.bbox&&(qe.bbox=Ve.bbox),qe}function os(Ve,qe){var et=d(qe/2),lt=m(w*et);return[Ve*(.74482-.34588*lt*lt),1.70711*et]}function Ls(Ve,qe,et){var lt=v.geoInterpolate(qe,et),wt=lt(.5),vt=v.geoRotation([-wt[0],-wt[1]])(qe),Ot=lt.distance/2,ir=-D(m(vt[1]*O)/m(Ot)),or=[-wt[0],-wt[1],-(vt[0]>0?b-ir:ir)*k],er=v.geoProjection(Ve(Ot)).rotate(or),ur=v.geoRotation(or),xr=er.center;return delete er.rotate,er.center=function(kr){return arguments.length?xr(ur(kr)):ur.invert(xr())},er.clipAngle(90)}function Bs(Ve){var qe=t(Ve);function et(lt,wt){var vt=v.geoGnomonicRaw(lt,wt);return vt[0]*=qe,vt}return et.invert=function(lt,wt){return v.geoGnomonicRaw.invert(lt/qe,wt)},et}function bs(Ve,qe){return Ls(Bs,Ve,qe)}function Ns(Ve){if(!(Ve*=2))return v.geoAzimuthalEquidistantRaw;var qe=-Ve/2,et=-qe,lt=Ve*Ve,wt=d(et),vt=.5/m(et);function Ot(ir,or){var er=S(t(or)*t(ir-qe)),ur=S(t(or)*t(ir-et));return[((er*=er)-(ur*=ur))/(2*Ve),(or<0?-1:1)*C(4*lt*ur-(lt-er+ur)*(lt-er+ur))/(2*Ve)]}return Ot.invert=function(ir,or){var er,ur,xr=or*or,kr=t(C(xr+(er=ir+qe)*er)),Cr=t(C(xr+(er=ir+et)*er));return[n(ur=kr-Cr,er=(kr+Cr)*wt),(or<0?-1:1)*S(C(er*er+ur*ur)*vt)]},Ot}function Do(Ve,qe){return Ls(Ns,Ve,qe)}function No(Ve,qe){if(y(qe)<o)return[Ve,0];var et=y(qe/g),lt=D(et);if(y(Ve)<o||y(y(qe)-g)<o)return[0,h(qe)*b*d(lt/2)];var wt=t(lt),vt=y(b/Ve-Ve/b)/2,Ot=vt*vt,ir=wt/(et+wt-1),or=ir*(2/et-1),er=or*or,ur=er+Ot,xr=ir-er,kr=Ot+ir;return[h(Ve)*b*(vt*xr+C(Ot*xr*xr-ur*(ir*ir-er)))/ur,h(qe)*b*(or*kr-vt*C((Ot+1)*ur-kr*kr))/ur]}function qo(Ve,qe){if(y(qe)<o)return[Ve,0];var et=y(qe/g),lt=D(et);if(y(Ve)<o||y(y(qe)-g)<o)return[0,h(qe)*b*d(lt/2)];var wt=t(lt),vt=y(b/Ve-Ve/b)/2,Ot=vt*vt,ir=wt*(C(1+Ot)-vt*wt)/(1+Ot*et*et);return[h(Ve)*b*ir,h(qe)*b*C(1-ir*(2*vt+ir))]}function jo(Ve,qe){if(y(qe)<o)return[Ve,0];var et=qe/g,lt=D(et);if(y(Ve)<o||y(y(qe)-g)<o)return[0,b*d(lt/2)];var wt=(b/Ve-Ve/b)/2,vt=et/(1+t(lt));return[b*(h(Ve)*C(wt*wt+1-vt*vt)-wt),b*vt]}function Yo(Ve,qe){if(!qe)return[Ve,0];var et=y(qe);if(!Ve||et===g)return[0,qe];var lt=et/g,wt=lt*lt,vt=(8*lt-wt*(wt+2)-5)/(2*wt*(lt-1)),Ot=vt*vt,ir=lt*vt,or=wt+Ot+2*ir,er=lt+3*vt,ur=Ve/g,xr=ur+1/ur,kr=h(y(Ve)-g)*C(xr*xr-4),Cr=kr*kr,Vr=(kr*(or+Ot-1)+2*C(or*(wt+Ot*Cr-1)+(1-wt)*(wt*(er*er+4*Ot)+12*ir*Ot+4*Ot*Ot)))/(4*or+Cr);return[h(Ve)*g*Vr,h(qe)*g*C(1+kr*y(Vr)-Vr*Vr)]}function ss(Ve,qe,et,lt){var wt=b/3;Ve=s(Ve,o),qe=s(qe,o),Ve=i(Ve,g),qe=i(qe,b-o),et=s(et,0),et=i(et,100-o);var vt=(lt=s(lt,o))/100,Ot=S((et/100+1)*t(wt))/wt,ir=m(Ve)/m(Ot*g),or=qe/b,er=C(vt*m(Ve/2)/m(qe/2));return function(ur,xr,kr,Cr,Vr){function pn(Tn,Un){var Wn=kr*m(Cr*Un),ei=C(1-Wn*Wn),Yn=C(2/(1+ei*t(Tn*=Vr)));return[ur*ei*Yn*m(Tn),xr*Wn*Yn]}return pn.invert=function(Tn,Un){var Wn=Tn/ur,ei=Un/xr,Yn=C(Wn*Wn+ei*ei),Si=2*D(Yn/2);return[n(Tn*d(Si),ur*Yn)/Vr,Yn&&D(Un*m(Si)/(xr*kr*Yn))/Cr]},pn}(er/C(or*ir*Ot),1/(er*C(or*ir*Ot)),ir,Ot,or)}function xo(){var Ve=65*O,qe=60*O,et=20,lt=200,wt=v.geoProjectionMutator(ss),vt=wt(Ve,qe,et,lt);return vt.poleline=function(Ot){return arguments.length?wt(Ve=+Ot*O,qe,et,lt):Ve*k},vt.parallels=function(Ot){return arguments.length?wt(Ve,qe=+Ot*O,et,lt):qe*k},vt.inflation=function(Ot){return arguments.length?wt(Ve,qe,et=+Ot,lt):et},vt.ratio=function(Ot){return arguments.length?wt(Ve,qe,et,lt=+Ot):lt},vt.scale(163.775)}os.invert=function(Ve,qe){var et=qe/1.70711,lt=m(w*et);return[Ve/(.74482-.34588*lt*lt),2*e(et)]},No.invert=function(Ve,qe){if(y(qe)<o)return[Ve,0];if(y(Ve)<o)return[0,g*m(2*e(qe/b))];var et=(Ve/=b)*Ve,lt=(qe/=b)*qe,wt=et+lt,vt=wt*wt,Ot=-y(qe)*(1+wt),ir=Ot-2*lt+et,or=-2*Ot+1+2*lt+vt,er=lt/or+(2*ir*ir*ir/(or*or*or)-9*Ot*ir/(or*or))/27,ur=(Ot-ir*ir/(3*or))/or,xr=2*C(-ur/3),kr=S(3*er/(ur*xr))/3;return[b*(wt-1+C(1+2*(et-lt)+vt))/(2*Ve),h(qe)*b*(-xr*t(kr+b/3)-ir/(3*or))]},qo.invert=function(Ve,qe){if(!Ve)return[0,g*m(2*e(qe/b))];var et=y(Ve/b),lt=(1-et*et-(qe/=b)*qe)/(2*et),wt=C(lt*lt+1);return[h(Ve)*b*(wt-lt),h(qe)*g*m(2*n(C((1-2*lt*et)*(lt+wt)-et),C(wt+lt+et)))]},jo.invert=function(Ve,qe){if(!qe)return[Ve,0];var et=qe/b,lt=(b*b*(1-et*et)-Ve*Ve)/(2*b*Ve);return[Ve?b*(h(Ve)*C(lt*lt+1)-lt):0,g*m(2*e(et))]},Yo.invert=function(Ve,qe){var et;if(!Ve||!qe)return[Ve,qe];qe/=b;var lt=h(Ve)*Ve/g,wt=(lt*lt-1+4*qe*qe)/y(lt),vt=wt*wt,Ot=2*qe,ir=50;do{var or=Ot*Ot,er=(8*Ot-or*(or+2)-5)/(2*or*(Ot-1)),ur=(3*Ot-or*Ot-10)/(2*or*Ot),xr=er*er,kr=Ot*er,Cr=Ot+er,Vr=Cr*Cr,pn=Ot+3*er,Tn=-2*Cr*(4*kr*xr+(1-4*or+3*or*or)*(1+ur)+xr*(14*or-6-vt+(8*or-8-2*vt)*ur)+kr*(12*or-8+(10*or-10-vt)*ur)),Un=C(Vr*(or+xr*vt-1)+(1-or)*(or*(pn*pn+4*xr)+xr*(12*kr+4*xr)));Ot-=et=(wt*(Vr+xr-1)+2*Un-lt*(4*Vr+vt))/(wt*(2*er*ur+2*Cr*(1+ur))+Tn/Un-8*Cr*(wt*(-1+xr+Vr)+2*Un)*(1+ur)/(vt+4*Vr))}while(et>o&&--ir>0);return[h(Ve)*(C(wt*wt+4)+wt)*b/4,g*Ot]};var _s=4*b+3*C(3),$a=2*C(2*b*C(3)/_s),Wo=re($a*C(3)/b,$a,_s/6);function ws(Ve,qe){return[Ve*C(1-3*qe*qe/(b*b)),qe]}function So(Ve,qe){var et=t(qe),lt=t(Ve)*et,wt=1-lt,vt=t(Ve=n(m(Ve)*et,-m(qe))),Ot=m(Ve);return[Ot*(et=C(1-lt*lt))-vt*wt,-vt*et-Ot*wt]}function na(Ve,qe){var et=G(Ve,qe);return[(et[0]+Ve/g)/2,(et[1]+qe)/2]}ws.invert=function(Ve,qe){return[Ve/C(1-3*qe*qe/(b*b)),qe]},So.invert=function(Ve,qe){var et=(Ve*Ve+qe*qe)/-2,lt=C(-et*(2+et)),wt=qe*et+Ve*lt,vt=Ve*et-qe*lt,Ot=C(vt*vt+wt*wt);return[n(lt*wt,Ot*(1+et)),Ot?-D(lt*vt/Ot):0]},na.invert=function(Ve,qe){var et=Ve,lt=qe,wt=25;do{var vt,Ot=t(lt),ir=m(lt),or=m(2*lt),er=ir*ir,ur=Ot*Ot,xr=m(et),kr=t(et/2),Cr=m(et/2),Vr=Cr*Cr,pn=1-ur*kr*kr,Tn=pn?S(Ot*kr)*C(vt=1/pn):vt=0,Un=.5*(2*Tn*Ot*Cr+et/g)-Ve,Wn=.5*(Tn*ir+lt)-qe,ei=.5*vt*(ur*Vr+Tn*Ot*kr*er)+.5/g,Yn=vt*(xr*or/4-Tn*ir*Cr),Si=.125*vt*(or*Cr-Tn*ir*ur*xr),Ri=.5*vt*(er*kr+Tn*Vr*Ot)+.5,Ki=Yn*Si-Ri*ei,Zi=(Wn*Yn-Un*Ri)/Ki,ea=(Un*Si-Wn*ei)/Ki;et-=Zi,lt-=ea}while((y(Zi)>o||y(ea)>o)&&--wt>0);return[et,lt]},p.geoNaturalEarth=v.geoNaturalEarth1,p.geoNaturalEarthRaw=v.geoNaturalEarth1Raw,p.geoAiry=function(){var Ve=g,qe=v.geoProjectionMutator(U),et=qe(Ve);return et.radius=function(lt){return arguments.length?qe(Ve=lt*O):Ve*k},et.scale(179.976).clipAngle(147)},p.geoAiryRaw=U,p.geoAitoff=function(){return v.geoProjection(G).scale(152.63)},p.geoAitoffRaw=G,p.geoArmadillo=function(){var Ve=20*O,qe=Ve>=0?1:-1,et=d(qe*Ve),lt=v.geoProjectionMutator(X),wt=lt(Ve),vt=wt.stream;return wt.parallel=function(Ot){return arguments.length?(et=d((qe=(Ve=Ot*O)>=0?1:-1)*Ve),lt(Ve)):Ve*k},wt.stream=function(Ot){var ir=wt.rotate(),or=vt(Ot),er=(wt.rotate([0,0]),vt(Ot)),ur=wt.precision();return wt.rotate(ir),or.sphere=function(){er.polygonStart(),er.lineStart();for(var xr=-180*qe;qe*xr<180;xr+=90*qe)er.point(xr,90*qe);if(Ve)for(;qe*(xr-=3*qe*ur)>=-180;)er.point(xr,qe*-n(t(xr*O/2),et)*k);er.lineEnd(),er.polygonEnd()},or},wt.scale(218.695).center([0,28.0974])},p.geoArmadilloRaw=X,p.geoAugust=function(){return v.geoProjection(Z).scale(66.1603)},p.geoAugustRaw=Z,p.geoBaker=function(){return v.geoProjection(te).scale(112.314)},p.geoBakerRaw=te,p.geoBerghaus=function(){var Ve=5,qe=v.geoProjectionMutator(R),et=qe(Ve),lt=et.stream,wt=-t(.01*O),vt=m(.01*O);return et.lobes=function(Ot){return arguments.length?qe(Ve=+Ot):Ve},et.stream=function(Ot){var ir=et.rotate(),or=lt(Ot),er=(et.rotate([0,0]),lt(Ot));return et.rotate(ir),or.sphere=function(){er.polygonStart(),er.lineStart();for(var ur=0,xr=360/Ve,kr=2*b/Ve,Cr=90-180/Ve,Vr=g;ur<Ve;++ur,Cr-=xr,Vr-=kr)er.point(n(vt*t(Vr),wt)*k,D(vt*m(Vr))*k),Cr<-90?(er.point(-90,-180-Cr-.01),er.point(-90,-180-Cr+.01)):(er.point(90,Cr+.01),er.point(90,Cr-.01));er.lineEnd(),er.polygonEnd()},or},et.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},p.geoBerghausRaw=R,p.geoBertin1953=function(){return v.geoProjection(J()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},p.geoBertin1953Raw=J,p.geoBoggs=function(){return v.geoProjection(ue).scale(160.857)},p.geoBoggsRaw=ue,p.geoBonne=function(){return le(ve).scale(123.082).center([0,26.1441]).parallel(45)},p.geoBonneRaw=ve,p.geoBottomley=function(){var Ve=.5,qe=v.geoProjectionMutator(_e),et=qe(Ve);return et.fraction=function(lt){return arguments.length?qe(Ve=+lt):Ve},et.scale(158.837)},p.geoBottomleyRaw=_e,p.geoBromley=function(){return v.geoProjection(be).scale(152.63)},p.geoBromleyRaw=be,p.geoChamberlin=Se,p.geoChamberlinRaw=Ae,p.geoChamberlinAfrica=function(){return Se([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},p.geoCollignon=function(){return v.geoProjection(Pe).scale(95.6464).center([0,30])},p.geoCollignonRaw=Pe,p.geoCraig=function(){return le(ze).scale(249.828).clipAngle(90)},p.geoCraigRaw=ze,p.geoCraster=function(){return v.geoProjection(tt).scale(156.19)},p.geoCrasterRaw=tt,p.geoCylindricalEqualArea=function(){return le(Oe).parallel(38.58).scale(195.044)},p.geoCylindricalEqualAreaRaw=Oe,p.geoCylindricalStereographic=function(){return le(Be).scale(124.75)},p.geoCylindricalStereographicRaw=Be,p.geoEckert1=function(){return v.geoProjection(Je).scale(165.664)},p.geoEckert1Raw=Je,p.geoEckert2=function(){return v.geoProjection(Ye).scale(165.664)},p.geoEckert2Raw=Ye,p.geoEckert3=function(){return v.geoProjection(nt).scale(180.739)},p.geoEckert3Raw=nt,p.geoEckert4=function(){return v.geoProjection(ft).scale(180.739)},p.geoEckert4Raw=ft,p.geoEckert5=function(){return v.geoProjection(dt).scale(173.044)},p.geoEckert5Raw=dt,p.geoEckert6=function(){return v.geoProjection(Rt).scale(173.044)},p.geoEckert6Raw=Rt,p.geoEisenlohr=function(){return v.geoProjection(at).scale(62.5271)},p.geoEisenlohrRaw=at,p.geoFahey=function(){return v.geoProjection(St).scale(137.152)},p.geoFaheyRaw=St,p.geoFoucaut=function(){return v.geoProjection(Xt).scale(135.264)},p.geoFoucautRaw=Xt,p.geoFoucautSinusoidal=function(){var Ve=.5,qe=v.geoProjectionMutator(lr),et=qe(Ve);return et.alpha=function(lt){return arguments.length?qe(Ve=+lt):Ve},et.scale(168.725)},p.geoFoucautSinusoidalRaw=lr,p.geoGilbert=function(Ve){null==Ve&&(Ve=v.geoOrthographic);var qe=Ve(),et=v.geoEquirectangular().scale(k).precision(0).clipAngle(null).translate([0,0]);function lt(vt){return qe(Ue(vt))}function wt(vt){lt[vt]=function(){return arguments.length?(qe[vt].apply(qe,arguments),lt):qe[vt]()}}return qe.invert&&(lt.invert=function(vt){return Ze(qe.invert(vt))}),lt.stream=function(vt){var Ot=qe.stream(vt),ir=et.stream({point:function(or,er){Ot.point(or/2,D(d(-er/2*O))*k)},lineStart:function(){Ot.lineStart()},lineEnd:function(){Ot.lineEnd()},polygonStart:function(){Ot.polygonStart()},polygonEnd:function(){Ot.polygonEnd()}});return ir.sphere=Ot.sphere,ir},lt.rotate=function(vt){return arguments.length?(et.rotate(vt),lt):et.rotate()},lt.center=function(vt){return arguments.length?(qe.center(Ue(vt)),lt):Ze(qe.center())},wt("angle"),wt("clipAngle"),wt("clipExtent"),wt("fitExtent"),wt("fitHeight"),wt("fitSize"),wt("fitWidth"),wt("scale"),wt("translate"),wt("precision"),lt.scale(249.5)},p.geoGingery=function(){var Ve=6,qe=30*O,et=t(qe),lt=m(qe),wt=v.geoProjectionMutator(Ne),vt=wt(qe,Ve),Ot=vt.stream,ir=-t(.01*O),or=m(.01*O);return vt.radius=function(er){return arguments.length?(et=t(qe=er*O),lt=m(qe),wt(qe,Ve)):qe*k},vt.lobes=function(er){return arguments.length?wt(qe,Ve=+er):Ve},vt.stream=function(er){var ur=vt.rotate(),xr=Ot(er),kr=(vt.rotate([0,0]),Ot(er));return vt.rotate(ur),xr.sphere=function(){kr.polygonStart(),kr.lineStart();for(var Cr=0,Vr=2*b/Ve,pn=0;Cr<Ve;++Cr,pn-=Vr)kr.point(n(or*t(pn),ir)*k,D(or*m(pn))*k),kr.point(n(lt*t(pn-Vr/2),et)*k,D(lt*m(pn-Vr/2))*k);kr.lineEnd(),kr.polygonEnd()},xr},vt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},p.geoGingeryRaw=Ne,p.geoGinzburg4=function(){return v.geoProjection(Re).scale(149.995)},p.geoGinzburg4Raw=Re,p.geoGinzburg5=function(){return v.geoProjection(Ie).scale(153.93)},p.geoGinzburg5Raw=Ie,p.geoGinzburg6=function(){return v.geoProjection(Ke).scale(130.945)},p.geoGinzburg6Raw=Ke,p.geoGinzburg8=function(){return v.geoProjection(ut).scale(131.747)},p.geoGinzburg8Raw=ut,p.geoGinzburg9=function(){return v.geoProjection(xt).scale(131.087)},p.geoGinzburg9Raw=xt,p.geoGringorten=function(){return v.geoProjection(gt(Pt)).scale(239.75)},p.geoGringortenRaw=Pt,p.geoGuyou=function(){return v.geoProjection(gt(Ft)).scale(151.496)},p.geoGuyouRaw=Ft,p.geoHammer=function(){var Ve=2,qe=v.geoProjectionMutator(N),et=qe(Ve);return et.coefficient=function(lt){return arguments.length?qe(Ve=+lt):Ve},et.scale(169.529)},p.geoHammerRaw=N,p.geoHammerRetroazimuthal=function(){var Ve=0,qe=v.geoProjectionMutator(Qe),et=qe(Ve),lt=et.rotate,wt=et.stream,vt=v.geoCircle();return et.parallel=function(Ot){if(!arguments.length)return Ve*k;var ir=et.rotate();return qe(Ve=Ot*O).rotate(ir)},et.rotate=function(Ot){return arguments.length?(lt.call(et,[Ot[0],Ot[1]-Ve*k]),vt.center([-Ot[0],-Ot[1]]),et):((Ot=lt.call(et))[1]+=Ve*k,Ot)},et.stream=function(Ot){return(Ot=wt(Ot)).sphere=function(){Ot.polygonStart();var ir,or=vt.radius(89.99)().coordinates[0],er=or.length-1,ur=-1;for(Ot.lineStart();++ur<er;)Ot.point((ir=or[ur])[0],ir[1]);for(Ot.lineEnd(),er=(or=vt.radius(90.01)().coordinates[0]).length-1,Ot.lineStart();--ur>=0;)Ot.point((ir=or[ur])[0],ir[1]);Ot.lineEnd(),Ot.polygonEnd()},Ot},et.scale(79.4187).parallel(45).clipAngle(179.999)},p.geoHammerRetroazimuthalRaw=Qe,p.geoHealpix=function(){var Ve=4,qe=v.geoProjectionMutator(rr),et=qe(Ve),lt=et.stream;return et.lobes=function(wt){return arguments.length?qe(Ve=+wt):Ve},et.stream=function(wt){var vt=et.rotate(),Ot=lt(wt),ir=(et.rotate([0,0]),lt(wt));return et.rotate(vt),Ot.sphere=function(){var or,er;v.geoStream((er=[].concat(u.range(-180,180+(or=180/Ve)/2,or).map(Fe),u.range(180,-180-or/2,-or).map(ht)),{type:"Polygon",coordinates:[180===or?er.map(kt):er]}),ir)},Ot},et.scale(239.75)},p.geoHealpixRaw=rr,p.geoHill=function(){var Ve=1,qe=v.geoProjectionMutator(Gt),et=qe(Ve);return et.ratio=function(lt){return arguments.length?qe(Ve=+lt):Ve},et.scale(167.774).center([0,18.67])},p.geoHillRaw=Gt,p.geoHomolosine=function(){return v.geoProjection(fr).scale(152.63)},p.geoHomolosineRaw=fr,p.geoHufnagel=function(){var Ve=1,qe=0,et=45*O,lt=2,wt=v.geoProjectionMutator($t),vt=wt(Ve,qe,et,lt);return vt.a=function(Ot){return arguments.length?wt(Ve=+Ot,qe,et,lt):Ve},vt.b=function(Ot){return arguments.length?wt(Ve,qe=+Ot,et,lt):qe},vt.psiMax=function(Ot){return arguments.length?wt(Ve,qe,et=+Ot*O,lt):et*k},vt.ratio=function(Ot){return arguments.length?wt(Ve,qe,et,lt=+Ot):lt},vt.scale(180.739)},p.geoHufnagelRaw=$t,p.geoHyperelliptical=function(){var Ve=0,qe=2.5,et=1.183136,lt=v.geoProjectionMutator(dr),wt=lt(Ve,qe,et);return wt.alpha=function(vt){return arguments.length?lt(Ve=+vt,qe,et):Ve},wt.k=function(vt){return arguments.length?lt(Ve,qe=+vt,et):qe},wt.gamma=function(vt){return arguments.length?lt(Ve,qe,et=+vt):et},wt.scale(152.63)},p.geoHyperellipticalRaw=dr,p.geoInterrupt=_r,p.geoInterruptedBoggs=function(){return _r(ue,Sr).scale(160.857)},p.geoInterruptedHomolosine=function(){return _r(fr,Gr).scale(152.63)},p.geoInterruptedMollweide=function(){return _r(ne,Er).scale(169.529)},p.geoInterruptedMollweideHemispheres=function(){return _r(ne,Zr).scale(169.529).rotate([20,0])},p.geoInterruptedSinuMollweide=function(){return _r(Zt,an,j).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},p.geoInterruptedSinusoidal=function(){return _r(de,gn).scale(152.63).rotate([-20,0])},p.geoKavrayskiy7=function(){return v.geoProjection(Vn).scale(158.837)},p.geoKavrayskiy7Raw=Vn,p.geoLagrange=function(){var Ve=.5,qe=v.geoProjectionMutator(Gn),et=qe(Ve);return et.spacing=function(lt){return arguments.length?qe(Ve=+lt):Ve},et.scale(124.75)},p.geoLagrangeRaw=Gn,p.geoLarrivee=function(){return v.geoProjection(ln).scale(97.2672)},p.geoLarriveeRaw=ln,p.geoLaskowski=function(){return v.geoProjection(qr).scale(139.98)},p.geoLaskowskiRaw=qr,p.geoLittrow=function(){return v.geoProjection(Pr).scale(144.049).clipAngle(89.999)},p.geoLittrowRaw=Pr,p.geoLoximuthal=function(){return le(un).parallel(40).scale(158.837)},p.geoLoximuthalRaw=un,p.geoMiller=function(){return v.geoProjection(dn).scale(108.318)},p.geoMillerRaw=dn,p.geoModifiedStereographic=Bt,p.geoModifiedStereographicRaw=cn,p.geoModifiedStereographicAlaska=function(){return Bt(fn,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},p.geoModifiedStereographicGs48=function(){return Bt(Bn,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},p.geoModifiedStereographicGs50=function(){return Bt(Nn,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},p.geoModifiedStereographicMiller=function(){return Bt(Fn,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},p.geoModifiedStereographicLee=function(){return Bt(ar,[165,10]).scale(250).clipAngle(130).center([-165,-10])},p.geoMollweide=function(){return v.geoProjection(ne).scale(169.529)},p.geoMollweideRaw=ne,p.geoMtFlatPolarParabolic=function(){return v.geoProjection(Dr).scale(164.859)},p.geoMtFlatPolarParabolicRaw=Dr,p.geoMtFlatPolarQuartic=function(){return v.geoProjection($r).scale(188.209)},p.geoMtFlatPolarQuarticRaw=$r,p.geoMtFlatPolarSinusoidal=function(){return v.geoProjection(Xr).scale(166.518)},p.geoMtFlatPolarSinusoidalRaw=Xr,p.geoNaturalEarth2=function(){return v.geoProjection(Mr).scale(175.295)},p.geoNaturalEarth2Raw=Mr,p.geoNellHammer=function(){return v.geoProjection(Lr).scale(152.63)},p.geoNellHammerRaw=Lr,p.geoInterruptedQuarticAuthalic=function(){return _r(N(1/0),Rr).rotate([20,0]).scale(152.63)},p.geoNicolosi=function(){return v.geoProjection(Ir).scale(127.267)},p.geoNicolosiRaw=Ir,p.geoPatterson=function(){return v.geoProjection(Fr).scale(139.319)},p.geoPattersonRaw=Fr,p.geoPolyconic=function(){return v.geoProjection(Qr).scale(103.74)},p.geoPolyconicRaw=Qr,p.geoPolyhedral=Ur,p.geoPolyhedralButterfly=function(Ve){Ve=Ve||function(et){var lt=v.geoCentroid({type:"MultiPoint",coordinates:et});return v.geoGnomonic().scale(1).translate([0,0]).rotate([-lt[0],-lt[1]])};var qe=Hn.map(function(et){return{face:et,project:Ve(et)}});return[-1,0,0,1,0,1,4,5].forEach(function(et,lt){var wt=qe[et];wt&&(wt.children||(wt.children=[])).push(qe[lt])}),Ur(qe[0],function(et,lt){return qe[et<-b/2?lt<0?6:4:et<0?lt<0?2:0:et<b/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(101.858).center([0,45])},p.geoPolyhedralCollignon=function(Ve){Ve=Ve||function(et){var lt=v.geoCentroid({type:"MultiPoint",coordinates:et});return v.geoProjection(ti).translate([0,0]).scale(1).rotate(lt[1]>0?[-lt[0],0]:[180-lt[0],180])};var qe=Hn.map(function(et){return{face:et,project:Ve(et)}});return[-1,0,0,1,0,1,4,5].forEach(function(et,lt){var wt=qe[et];wt&&(wt.children||(wt.children=[])).push(qe[lt])}),Ur(qe[0],function(et,lt){return qe[et<-b/2?lt<0?6:4:et<0?lt<0?2:0:et<b/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},p.geoPolyhedralWaterman=function(Ve){Ve=Ve||function(vt){var Ot=6===vt.length?v.geoCentroid({type:"MultiPoint",coordinates:vt}):vt[0];return v.geoGnomonic().scale(1).translate([0,0]).rotate([-Ot[0],-Ot[1]])};var qe=Hn.map(function(vt){for(var Ot,ir=vt.map(mi),or=ir.length,er=ir[or-1],ur=[],xr=0;xr<or;++xr)ur.push(hi([.9486832980505138*er[0]+.31622776601683794*(Ot=ir[xr])[0],.9486832980505138*er[1]+.31622776601683794*Ot[1],.9486832980505138*er[2]+.31622776601683794*Ot[2]]),hi([.9486832980505138*Ot[0]+.31622776601683794*er[0],.9486832980505138*Ot[1]+.31622776601683794*er[1],.9486832980505138*Ot[2]+.31622776601683794*er[2]])),er=Ot;return ur}),et=[],lt=[-1,0,0,1,0,1,4,5];qe.forEach(function(vt,Ot){for(var ir,or,er=Hn[Ot],ur=er.length,xr=et[Ot]=[],kr=0;kr<ur;++kr)qe.push([er[kr],vt[(2*kr+2)%(2*ur)],vt[(2*kr+1)%(2*ur)]]),lt.push(Ot),xr.push((ir=mi(vt[(2*kr+2)%(2*ur)]),or=mi(vt[(2*kr+1)%(2*ur)]),[ir[1]*or[2]-ir[2]*or[1],ir[2]*or[0]-ir[0]*or[2],ir[0]*or[1]-ir[1]*or[0]]))});var wt=qe.map(function(vt){return{project:Ve(vt),face:vt}});return lt.forEach(function(vt,Ot){var ir=wt[vt];ir&&(ir.children||(ir.children=[])).push(wt[Ot])}),Ur(wt[0],function(vt,Ot){var ir=t(Ot),or=[ir*t(vt),ir*m(vt),m(Ot)],er=vt<-b/2?Ot<0?6:4:vt<0?Ot<0?2:0:vt<b/2?Ot<0?3:1:Ot<0?7:5,ur=et[er];return wt[En(ur[0],or)<0?8+3*er:En(ur[1],or)<0?8+3*er+1:En(ur[2],or)<0?8+3*er+2:er]}).angle(-30).scale(110.625).center([0,45])},p.geoProject=function(Ve,qe){var et,lt=qe.stream;if(!lt)throw new Error("invalid projection");switch(Ve&&Ve.type){case"Feature":et=fa;break;case"FeatureCollection":et=ka;break;default:et=Aa}return et(Ve,lt)},p.geoGringortenQuincuncial=function(){return Na(Pt).scale(176.423)},p.geoPeirceQuincuncial=Vi,p.geoPierceQuincuncial=Vi,p.geoQuantize=function(Ve,qe){if(!(0<=(qe=+qe)&&qe<=20))throw new Error("invalid digits");function et(er){var ur=er.length,xr=2,kr=new Array(ur);for(kr[0]=+er[0].toFixed(qe),kr[1]=+er[1].toFixed(qe);xr<ur;)kr[xr]=er[xr],++xr;return kr}function lt(er){return er.map(et)}function wt(er){for(var ur=et(er[0]),xr=[ur],kr=1;kr<er.length;kr++){var Cr=et(er[kr]);(Cr.length>2||Cr[0]!=ur[0]||Cr[1]!=ur[1])&&(xr.push(Cr),ur=Cr)}return 1===xr.length&&er.length>1&&xr.push(et(er[er.length-1])),xr}function vt(er){return er.map(wt)}function Ot(er){if(null==er)return er;var ur;switch(er.type){case"GeometryCollection":ur={type:"GeometryCollection",geometries:er.geometries.map(Ot)};break;case"Point":ur={type:"Point",coordinates:et(er.coordinates)};break;case"MultiPoint":ur={type:er.type,coordinates:lt(er.coordinates)};break;case"LineString":ur={type:er.type,coordinates:wt(er.coordinates)};break;case"MultiLineString":case"Polygon":ur={type:er.type,coordinates:vt(er.coordinates)};break;case"MultiPolygon":ur={type:"MultiPolygon",coordinates:er.coordinates.map(vt)};break;default:return er}return null!=er.bbox&&(ur.bbox=er.bbox),ur}function ir(er){var ur={type:"Feature",properties:er.properties,geometry:Ot(er.geometry)};return null!=er.id&&(ur.id=er.id),null!=er.bbox&&(ur.bbox=er.bbox),ur}if(null!=Ve)switch(Ve.type){case"Feature":return ir(Ve);case"FeatureCollection":var or={type:"FeatureCollection",features:Ve.features.map(ir)};return null!=Ve.bbox&&(or.bbox=Ve.bbox),or;default:return Ot(Ve)}return Ve},p.geoQuincuncial=Na,p.geoRectangularPolyconic=function(){return le(ia).scale(131.215)},p.geoRectangularPolyconicRaw=ia,p.geoRobinson=function(){return v.geoProjection(go).scale(152.63)},p.geoRobinsonRaw=go,p.geoSatellite=function(){var Ve=2,qe=0,et=v.geoProjectionMutator(Ji),lt=et(Ve,qe);return lt.distance=function(wt){return arguments.length?et(Ve=+wt,qe):Ve},lt.tilt=function(wt){return arguments.length?et(Ve,qe=wt*O):qe*k},lt.scale(432.147).clipAngle(S(1/Ve)*k-1e-6)},p.geoSatelliteRaw=Ji,p.geoSinuMollweide=function(){return v.geoProjection(Zt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},p.geoSinuMollweideRaw=Zt,p.geoSinusoidal=function(){return v.geoProjection(de).scale(152.63)},p.geoSinusoidalRaw=de,p.geoStitch=function(Ve){if(null==Ve)return Ve;switch(Ve.type){case"Feature":return aa(Ve);case"FeatureCollection":var qe={type:"FeatureCollection",features:Ve.features.map(aa)};return null!=Ve.bbox&&(qe.bbox=Ve.bbox),qe;default:return Es(Ve)}},p.geoTimes=function(){return v.geoProjection(os).scale(146.153)},p.geoTimesRaw=os,p.geoTwoPointAzimuthal=bs,p.geoTwoPointAzimuthalRaw=Bs,p.geoTwoPointAzimuthalUsa=function(){return bs([-158,21.5],[-77,39]).clipAngle(60).scale(400)},p.geoTwoPointEquidistant=Do,p.geoTwoPointEquidistantRaw=Ns,p.geoTwoPointEquidistantUsa=function(){return Do([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},p.geoVanDerGrinten=function(){return v.geoProjection(No).scale(79.4183)},p.geoVanDerGrintenRaw=No,p.geoVanDerGrinten2=function(){return v.geoProjection(qo).scale(79.4183)},p.geoVanDerGrinten2Raw=qo,p.geoVanDerGrinten3=function(){return v.geoProjection(jo).scale(79.4183)},p.geoVanDerGrinten3Raw=jo,p.geoVanDerGrinten4=function(){return v.geoProjection(Yo).scale(127.16)},p.geoVanDerGrinten4Raw=Yo,p.geoWagner=xo,p.geoWagner7=function(){return xo().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},p.geoWagnerRaw=ss,p.geoWagner4=function(){return v.geoProjection(Wo).scale(176.84)},p.geoWagner4Raw=Wo,p.geoWagner6=function(){return v.geoProjection(ws).scale(152.63)},p.geoWagner6Raw=ws,p.geoWiechel=function(){return v.geoProjection(So).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},p.geoWiechelRaw=So,p.geoWinkel3=function(){return v.geoProjection(na).scale(158.837)},p.geoWinkel3Raw=na,Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,x("d3-geo"),x("d3-array")):v(p.d3=p.d3||{},p.d3,p.d3)},{"d3-array":107,"d3-geo":114}],114:[function(x,Q,K){var p,v;p=this,v=function(p,v){"use strict";function u(){return new y}function y(){this.reset()}y.prototype={constructor:y,reset:function(){this.s=this.t=0},add:function(mt){n(e,mt,this.t),n(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new y;function n(mt,Vt,pr){var Jt=mt.s=Vt+pr,gr=Jt-Vt;mt.t=Vt-(Jt-gr)+(pr-gr)}var t=1e-6,a=Math.PI,r=a/2,f=a/4,s=2*a,i=180/a,l=a/180,c=Math.abs,h=Math.atan,m=Math.atan2,d=Math.cos,o=Math.ceil,b=Math.exp,g=Math.log,w=Math.pow,_=Math.sin,A=Math.sign||function(mt){return mt>0?1:mt<0?-1:0},T=Math.sqrt,E=Math.tan;function k(mt){return mt>1?0:mt<-1?a:Math.acos(mt)}function O(mt){return mt>1?r:mt<-1?-r:Math.asin(mt)}function D(mt){return(mt=_(mt/2))*mt}function S(){}function C(mt,Vt){mt&&B.hasOwnProperty(mt.type)&&B[mt.type](mt,Vt)}var z={Feature:function(mt,Vt){C(mt.geometry,Vt)},FeatureCollection:function(mt,Vt){for(var pr=mt.features,Jt=-1,gr=pr.length;++Jt<gr;)C(pr[Jt].geometry,Vt)}},B={Sphere:function(mt,Vt){Vt.sphere()},Point:function(mt,Vt){Vt.point((mt=mt.coordinates)[0],mt[1],mt[2])},MultiPoint:function(mt,Vt){for(var pr=mt.coordinates,Jt=-1,gr=pr.length;++Jt<gr;)Vt.point((mt=pr[Jt])[0],mt[1],mt[2])},LineString:function(mt,Vt){U(mt.coordinates,Vt,0)},MultiLineString:function(mt,Vt){for(var pr=mt.coordinates,Jt=-1,gr=pr.length;++Jt<gr;)U(pr[Jt],Vt,0)},Polygon:function(mt,Vt){G(mt.coordinates,Vt)},MultiPolygon:function(mt,Vt){for(var pr=mt.coordinates,Jt=-1,gr=pr.length;++Jt<gr;)G(pr[Jt],Vt)},GeometryCollection:function(mt,Vt){for(var pr=mt.geometries,Jt=-1,gr=pr.length;++Jt<gr;)C(pr[Jt],Vt)}};function U(mt,Vt,pr){var Jt,gr=-1,Br=mt.length-pr;for(Vt.lineStart();++gr<Br;)Vt.point((Jt=mt[gr])[0],Jt[1],Jt[2]);Vt.lineEnd()}function G(mt,Vt){var pr=-1,Jt=mt.length;for(Vt.polygonStart();++pr<Jt;)U(mt[pr],Vt,1);Vt.polygonEnd()}function X(mt,Vt){mt&&z.hasOwnProperty(mt.type)?z[mt.type](mt,Vt):C(mt,Vt)}var Z,q,W,te,R,N=u(),V=u(),ee={point:S,lineStart:S,lineEnd:S,polygonStart:function(){N.reset(),ee.lineStart=j,ee.lineEnd=J},polygonEnd:function(){var mt=+N;V.add(mt<0?s+mt:mt),this.lineStart=this.lineEnd=this.point=S},sphere:function(){V.add(s)}};function j(){ee.point=$}function J(){re(Z,q)}function $(mt,Vt){ee.point=re,Z=mt,q=Vt,W=mt*=l,te=d(Vt=(Vt*=l)/2+f),R=_(Vt)}function re(mt,Vt){var pr=(mt*=l)-W,Jt=pr>=0?1:-1,gr=Jt*pr,Br=d(Vt=(Vt*=l)/2+f),Hr=_(Vt),en=R*Hr,_n=te*Br+en*d(gr),mn=en*Jt*_(gr);N.add(m(mn,_n)),W=mt,te=Br,R=Hr}function ne(mt){return[m(mt[1],mt[0]),O(mt[2])]}function se(mt){var Vt=mt[0],pr=mt[1],Jt=d(pr);return[Jt*d(Vt),Jt*_(Vt),_(pr)]}function ie(mt,Vt){return mt[0]*Vt[0]+mt[1]*Vt[1]+mt[2]*Vt[2]}function ue(mt,Vt){return[mt[1]*Vt[2]-mt[2]*Vt[1],mt[2]*Vt[0]-mt[0]*Vt[2],mt[0]*Vt[1]-mt[1]*Vt[0]]}function le(mt,Vt){mt[0]+=Vt[0],mt[1]+=Vt[1],mt[2]+=Vt[2]}function de(mt,Vt){return[mt[0]*Vt,mt[1]*Vt,mt[2]*Vt]}function ve(mt){var Vt=T(mt[0]*mt[0]+mt[1]*mt[1]+mt[2]*mt[2]);mt[0]/=Vt,mt[1]/=Vt,mt[2]/=Vt}var _e,be,Te,he,me,Ae,we,Se,Pe,ze,He,tt,Oe,Be,Je,Ye,nt,ft,dt,Rt,Et,at,rt,St,Xt,lr,Ue=u(),Ze={point:Ne,lineStart:ke,lineEnd:De,polygonStart:function(){Ze.point=Re,Ze.lineStart=Ie,Ze.lineEnd=Ke,Ue.reset(),ee.polygonStart()},polygonEnd:function(){ee.polygonEnd(),Ze.point=Ne,Ze.lineStart=ke,Ze.lineEnd=De,N<0?(_e=-(Te=180),be=-(he=90)):Ue>t?he=90:Ue<-t&&(be=-90),ze[0]=_e,ze[1]=Te},sphere:function(){_e=-(Te=180),be=-(he=90)}};function Ne(mt,Vt){Pe.push(ze=[_e=mt,Te=mt]),Vt<be&&(be=Vt),Vt>he&&(he=Vt)}function it(mt,Vt){var pr=se([mt*l,Vt*l]);if(Se){var Jt=ue(Se,pr),gr=ue([Jt[1],-Jt[0],0],Jt);ve(gr),gr=ne(gr);var Br,Hr=mt-me,en=Hr>0?1:-1,_n=gr[0]*i*en,mn=c(Hr)>180;mn^(en*me<_n&&_n<en*mt)?(Br=gr[1]*i)>he&&(he=Br):mn^(en*me<(_n=(_n+360)%360-180)&&_n<en*mt)?(Br=-gr[1]*i)<be&&(be=Br):(Vt<be&&(be=Vt),Vt>he&&(he=Vt)),mn?mt<me?ut(_e,mt)>ut(_e,Te)&&(Te=mt):ut(mt,Te)>ut(_e,Te)&&(_e=mt):Te>=_e?(mt<_e&&(_e=mt),mt>Te&&(Te=mt)):mt>me?ut(_e,mt)>ut(_e,Te)&&(Te=mt):ut(mt,Te)>ut(_e,Te)&&(_e=mt)}else Pe.push(ze=[_e=mt,Te=mt]);Vt<be&&(be=Vt),Vt>he&&(he=Vt),Se=pr,me=mt}function ke(){Ze.point=it}function De(){ze[0]=_e,ze[1]=Te,Ze.point=Ne,Se=null}function Re(mt,Vt){if(Se){var pr=mt-me;Ue.add(c(pr)>180?pr+(pr>0?360:-360):pr)}else Ae=mt,we=Vt;ee.point(mt,Vt),it(mt,Vt)}function Ie(){ee.lineStart()}function Ke(){Re(Ae,we),ee.lineEnd(),c(Ue)>t&&(_e=-(Te=180)),ze[0]=_e,ze[1]=Te,Se=null}function ut(mt,Vt){return(Vt-=mt)<0?Vt+360:Vt}function xt(mt,Vt){return mt[0]-Vt[0]}function gt(mt,Vt){return mt[0]<=mt[1]?mt[0]<=Vt&&Vt<=mt[1]:Vt<mt[0]||mt[1]<Vt}var Pt={sphere:S,point:ct,lineStart:Ft,lineEnd:Nt,polygonStart:function(){Pt.lineStart=Yt,Pt.lineEnd=rr},polygonEnd:function(){Pt.lineStart=Ft,Pt.lineEnd=Nt}};function ct(mt,Vt){mt*=l;var pr=d(Vt*=l);zt(pr*d(mt),pr*_(mt),_(Vt))}function zt(mt,Vt,pr){++He,Oe+=(mt-Oe)/He,Be+=(Vt-Be)/He,Je+=(pr-Je)/He}function Ft(){Pt.point=Qe}function Qe(mt,Vt){mt*=l;var pr=d(Vt*=l);St=pr*d(mt),Xt=pr*_(mt),lr=_(Vt),Pt.point=yt,zt(St,Xt,lr)}function yt(mt,Vt){mt*=l;var pr=d(Vt*=l),Jt=pr*d(mt),gr=pr*_(mt),Br=_(Vt),Hr=m(T((Hr=Xt*Br-lr*gr)*Hr+(Hr=lr*Jt-St*Br)*Hr+(Hr=St*gr-Xt*Jt)*Hr),St*Jt+Xt*gr+lr*Br);tt+=Hr,Ye+=Hr*(St+(St=Jt)),nt+=Hr*(Xt+(Xt=gr)),ft+=Hr*(lr+(lr=Br)),zt(St,Xt,lr)}function Nt(){Pt.point=ct}function Yt(){Pt.point=Fe}function rr(){ht(at,rt),Pt.point=ct}function Fe(mt,Vt){at=mt,rt=Vt,mt*=l,Vt*=l,Pt.point=ht;var pr=d(Vt);St=pr*d(mt),Xt=pr*_(mt),lr=_(Vt),zt(St,Xt,lr)}function ht(mt,Vt){mt*=l;var pr=d(Vt*=l),Jt=pr*d(mt),gr=pr*_(mt),Br=_(Vt),Hr=Xt*Br-lr*gr,en=lr*Jt-St*Br,_n=St*gr-Xt*Jt,mn=T(Hr*Hr+en*en+_n*_n),Sn=O(mn),Rn=mn&&-Sn/mn;dt+=Rn*Hr,Rt+=Rn*en,Et+=Rn*_n,tt+=Sn,Ye+=Sn*(St+(St=Jt)),nt+=Sn*(Xt+(Xt=gr)),ft+=Sn*(lr+(lr=Br)),zt(St,Xt,lr)}function kt(mt){return function(){return mt}}function Gt(mt,Vt){function pr(Jt,gr){return Jt=mt(Jt,gr),Vt(Jt[0],Jt[1])}return mt.invert&&Vt.invert&&(pr.invert=function(Jt,gr){return(Jt=Vt.invert(Jt,gr))&&mt.invert(Jt[0],Jt[1])}),pr}function Zt(mt,Vt){return[c(mt)>a?mt+Math.round(-mt/s)*s:mt,Vt]}function fr(mt,Vt,pr){return(mt%=s)?Vt||pr?Gt(nr(mt),dr(Vt,pr)):nr(mt):Vt||pr?dr(Vt,pr):Zt}function $t(mt){return function(Vt,pr){return[(Vt+=mt)>a?Vt-s:Vt<-a?Vt+s:Vt,pr]}}function nr(mt){var Vt=$t(mt);return Vt.invert=$t(-mt),Vt}function dr(mt,Vt){var pr=d(mt),Jt=_(mt),gr=d(Vt),Br=_(Vt);function Hr(en,_n){var mn=d(_n),Sn=d(en)*mn,Rn=_(en)*mn,bn=_(_n),Pn=bn*pr+Sn*Jt;return[m(Rn*gr-Pn*Br,Sn*pr-bn*Jt),O(Pn*gr+Rn*Br)]}return Hr.invert=function(en,_n){var mn=d(_n),Sn=d(en)*mn,Rn=_(en)*mn,bn=_(_n),Pn=bn*gr-Rn*Br;return[m(Rn*gr+bn*Br,Sn*pr+Pn*Jt),O(Pn*pr-Sn*Jt)]},Hr}function Tr(mt){function Vt(pr){return(pr=mt(pr[0]*l,pr[1]*l))[0]*=i,pr[1]*=i,pr}return mt=fr(mt[0]*l,mt[1]*l,mt.length>2?mt[2]*l:0),Vt.invert=function(pr){return(pr=mt.invert(pr[0]*l,pr[1]*l))[0]*=i,pr[1]*=i,pr},Vt}function wr(mt,Vt,pr,Jt,gr,Br){if(pr){var Hr=d(Vt),en=_(Vt),_n=Jt*pr;null==gr?(gr=Vt+Jt*s,Br=Vt-_n/2):(gr=mr(Hr,gr),Br=mr(Hr,Br),(Jt>0?gr<Br:gr>Br)&&(gr+=Jt*s));for(var mn,Sn=gr;Jt>0?Sn>Br:Sn<Br;Sn-=_n)mn=ne([Hr,-en*d(Sn),-en*_(Sn)]),mt.point(mn[0],mn[1])}}function mr(mt,Vt){(Vt=se(Vt))[0]-=mt,ve(Vt);var pr=k(-Vt[1]);return((-Vt[2]<0?-pr:pr)+s-t)%s}function _r(){var mt,Vt=[];return{point:function(pr,Jt,gr){mt.push([pr,Jt,gr])},lineStart:function(){Vt.push(mt=[])},lineEnd:S,rejoin:function(){Vt.length>1&&Vt.push(Vt.pop().concat(Vt.shift()))},result:function(){var pr=Vt;return Vt=[],mt=null,pr}}}function Sr(mt,Vt){return c(mt[0]-Vt[0])<t&&c(mt[1]-Vt[1])<t}function Gr(mt,Vt,pr,Jt){this.x=mt,this.z=Vt,this.o=pr,this.e=Jt,this.v=!1,this.n=this.p=null}function Er(mt,Vt,pr,Jt,gr){var Br,Hr,en=[],_n=[];if(mt.forEach(function(Zn){if(!((Qn=Zn.length-1)<=0)){var Qn,di,rn=Zn[0],ui=Zn[Qn];if(Sr(rn,ui)){if(!rn[2]&&!ui[2]){for(gr.lineStart(),Br=0;Br<Qn;++Br)gr.point((rn=Zn[Br])[0],rn[1]);return void gr.lineEnd()}ui[0]+=2*t}en.push(di=new Gr(rn,Zn,null,!0)),_n.push(di.o=new Gr(rn,null,di,!1)),en.push(di=new Gr(ui,Zn,null,!1)),_n.push(di.o=new Gr(ui,null,di,!0))}}),en.length){for(_n.sort(Vt),Zr(en),Zr(_n),Br=0,Hr=_n.length;Br<Hr;++Br)_n[Br].e=pr=!pr;for(var mn,Sn,Rn=en[0];;){for(var bn=Rn,Pn=!0;bn.v;)if((bn=bn.n)===Rn)return;mn=bn.z,gr.lineStart();do{if(bn.v=bn.o.v=!0,bn.e){if(Pn)for(Br=0,Hr=mn.length;Br<Hr;++Br)gr.point((Sn=mn[Br])[0],Sn[1]);else Jt(bn.x,bn.n.x,1,gr);bn=bn.n}else{if(Pn)for(Br=(mn=bn.p.z).length-1;Br>=0;--Br)gr.point((Sn=mn[Br])[0],Sn[1]);else Jt(bn.x,bn.p.x,-1,gr);bn=bn.p}mn=(bn=bn.o).z,Pn=!Pn}while(!bn.v);gr.lineEnd()}}}function Zr(mt){if(Vt=mt.length){for(var Vt,pr,Jt=0,gr=mt[0];++Jt<Vt;)gr.n=pr=mt[Jt],pr.p=gr,gr=pr;gr.n=pr=mt[0],pr.p=gr}}Zt.invert=Zt;var an=u();function gn(mt){return c(mt[0])<=a?mt[0]:A(mt[0])*((c(mt[0])+a)%s-a)}function Vn(mt,Vt){var pr=gn(Vt),Jt=Vt[1],gr=_(Jt),Br=[_(pr),-d(pr),0],Hr=0,en=0;an.reset(),1===gr?Jt=r+t:-1===gr&&(Jt=-r-t);for(var _n=0,mn=mt.length;_n<mn;++_n)if(Rn=(Sn=mt[_n]).length)for(var Sn,Rn,bn=Sn[Rn-1],Pn=gn(bn),Zn=bn[1]/2+f,Qn=_(Zn),di=d(Zn),rn=0;rn<Rn;++rn,Pn=qn,Qn=ci,di=Ii,bn=ui){var ui=Sn[rn],qn=gn(ui),Jn=ui[1]/2+f,ci=_(Jn),Ii=d(Jn),Ui=qn-Pn,jn=Ui>=0?1:-1,Yi=jn*Ui,Ni=Yi>a,Mi=Qn*ci;if(an.add(m(Mi*jn*_(Yi),di*Ii+Mi*d(Yi))),Hr+=Ni?Ui+jn*s:Ui,Ni^Pn>=pr^qn>=pr){var Wi=ue(se(bn),se(ui));ve(Wi);var Fi=ue(Br,Wi);ve(Fi);var pa=(Ni^Ui>=0?-1:1)*O(Fi[2]);(Jt>pa||Jt===pa&&(Wi[0]||Wi[1]))&&(en+=Ni^Ui>=0?1:-1)}}return(Hr<-t||Hr<t&&an<-t)^1&en}function Gn(mt,Vt,pr,Jt){return function(gr){var Br,Hr,en,_n=Vt(gr),mn=_r(),Sn=Vt(mn),Rn=!1,bn={point:Pn,lineStart:Qn,lineEnd:di,polygonStart:function(){bn.point=rn,bn.lineStart=ui,bn.lineEnd=qn,Hr=[],Br=[]},polygonEnd:function(){bn.point=Pn,bn.lineStart=Qn,bn.lineEnd=di,Hr=v.merge(Hr);var Jn=Vn(Br,Jt);Hr.length?(Rn||(gr.polygonStart(),Rn=!0),Er(Hr,ln,Jn,pr,gr)):Jn&&(Rn||(gr.polygonStart(),Rn=!0),gr.lineStart(),pr(null,null,1,gr),gr.lineEnd()),Rn&&(gr.polygonEnd(),Rn=!1),Hr=Br=null},sphere:function(){gr.polygonStart(),gr.lineStart(),pr(null,null,1,gr),gr.lineEnd(),gr.polygonEnd()}};function Pn(Jn,ci){mt(Jn,ci)&&gr.point(Jn,ci)}function Zn(Jn,ci){_n.point(Jn,ci)}function Qn(){bn.point=Zn,_n.lineStart()}function di(){bn.point=Pn,_n.lineEnd()}function rn(Jn,ci){en.push([Jn,ci]),Sn.point(Jn,ci)}function ui(){Sn.lineStart(),en=[]}function qn(){rn(en[0][0],en[0][1]),Sn.lineEnd();var Jn,ci,Ii,Ui,jn=Sn.clean(),Yi=mn.result(),Ni=Yi.length;if(en.pop(),Br.push(en),en=null,Ni)if(1&jn){if((ci=(Ii=Yi[0]).length-1)>0){for(Rn||(gr.polygonStart(),Rn=!0),gr.lineStart(),Jn=0;Jn<ci;++Jn)gr.point((Ui=Ii[Jn])[0],Ui[1]);gr.lineEnd()}}else Ni>1&&2&jn&&Yi.push(Yi.pop().concat(Yi.shift())),Hr.push(Yi.filter(Ln))}return bn}}function Ln(mt){return mt.length>1}function ln(mt,Vt){return((mt=mt.x)[0]<0?mt[1]-r-t:r-mt[1])-((Vt=Vt.x)[0]<0?Vt[1]-r-t:r-Vt[1])}var qr=Gn(function(){return!0},function(mt){var Vt,pr=NaN,Jt=NaN,gr=NaN;return{lineStart:function(){mt.lineStart(),Vt=1},point:function(Br,Hr){var mn,Sn,Rn,bn,Pn,Zn,Qn,en=Br>0?a:-a,_n=c(Br-pr);c(_n-a)<t?(mt.point(pr,Jt=(Jt+Hr)/2>0?r:-r),mt.point(gr,Jt),mt.lineEnd(),mt.lineStart(),mt.point(en,Jt),mt.point(Br,Jt),Vt=0):gr!==en&&_n>=a&&(c(pr-gr)<t&&(pr-=gr*t),c(Br-en)<t&&(Br-=en*t),Sn=Jt,bn=Hr,Qn=_((mn=pr)-(Rn=Br)),Jt=c(Qn)>t?h((_(Sn)*(Zn=d(bn))*_(Rn)-_(bn)*(Pn=d(Sn))*_(mn))/(Pn*Zn*Qn)):(Sn+bn)/2,mt.point(gr,Jt),mt.lineEnd(),mt.lineStart(),mt.point(en,Jt),Vt=0),mt.point(pr=Br,Jt=Hr),gr=en},lineEnd:function(){mt.lineEnd(),pr=Jt=NaN},clean:function(){return 2-Vt}}},function(mt,Vt,pr,Jt){var gr;if(null==mt)Jt.point(-a,gr=pr*r),Jt.point(0,gr),Jt.point(a,gr),Jt.point(a,0),Jt.point(a,-gr),Jt.point(0,-gr),Jt.point(-a,-gr),Jt.point(-a,0),Jt.point(-a,gr);else if(c(mt[0]-Vt[0])>t){var Br=mt[0]<Vt[0]?a:-a;Jt.point(-Br,gr=pr*Br/2),Jt.point(0,gr),Jt.point(Br,gr)}else Jt.point(Vt[0],Vt[1])},[-a,-r]);function Pr(mt){var Vt=d(mt),pr=6*l,Jt=Vt>0,gr=c(Vt)>t;function Br(_n,mn){return d(_n)*d(mn)>Vt}function Hr(_n,mn,Sn){var Rn=[1,0,0],bn=ue(se(_n),se(mn)),Pn=ie(bn,bn),Zn=bn[0],Qn=Pn-Zn*Zn;if(!Qn)return!Sn&&_n;var di=Vt*Pn/Qn,rn=-Vt*Zn/Qn,ui=ue(Rn,bn),qn=de(Rn,di);le(qn,de(bn,rn));var Jn=ui,ci=ie(qn,Jn),Ii=ie(Jn,Jn),Ui=ci*ci-Ii*(ie(qn,qn)-1);if(!(Ui<0)){var jn=T(Ui),Yi=de(Jn,(-ci-jn)/Ii);if(le(Yi,qn),Yi=ne(Yi),!Sn)return Yi;var Ni,Mi=_n[0],Wi=mn[0],Fi=_n[1],pa=mn[1];Wi<Mi&&(Ni=Mi,Mi=Wi,Wi=Ni);var fi=Wi-Mi,ca=c(fi-a)<t;if(!ca&&pa<Fi&&(Ni=Fi,Fi=pa,pa=Ni),ca||fi<t?ca?Fi+pa>0^Yi[1]<(c(Yi[0]-Mi)<t?Fi:pa):Fi<=Yi[1]&&Yi[1]<=pa:fi>a^(Mi<=Yi[0]&&Yi[0]<=Wi)){var Qa=de(Jn,(-ci+jn)/Ii);return le(Qa,qn),[Yi,ne(Qa)]}}}function en(_n,mn){var Sn=Jt?mt:a-mt,Rn=0;return _n<-Sn?Rn|=1:_n>Sn&&(Rn|=2),mn<-Sn?Rn|=4:mn>Sn&&(Rn|=8),Rn}return Gn(Br,function(_n){var mn,Sn,Rn,bn,Pn;return{lineStart:function(){bn=Rn=!1,Pn=1},point:function(Zn,Qn){var di,rn=[Zn,Qn],ui=Br(Zn,Qn),qn=Jt?ui?0:en(Zn,Qn):ui?en(Zn+(Zn<0?a:-a),Qn):0;if(!mn&&(bn=Rn=ui)&&_n.lineStart(),ui!==Rn&&(!(di=Hr(mn,rn))||Sr(mn,di)||Sr(rn,di))&&(rn[2]=1),ui!==Rn)Pn=0,ui?(_n.lineStart(),di=Hr(rn,mn),_n.point(di[0],di[1])):(di=Hr(mn,rn),_n.point(di[0],di[1],2),_n.lineEnd()),mn=di;else if(gr&&mn&&Jt^ui){var Jn;qn&Sn||!(Jn=Hr(rn,mn,!0))||(Pn=0,Jt?(_n.lineStart(),_n.point(Jn[0][0],Jn[0][1]),_n.point(Jn[1][0],Jn[1][1]),_n.lineEnd()):(_n.point(Jn[1][0],Jn[1][1]),_n.lineEnd(),_n.lineStart(),_n.point(Jn[0][0],Jn[0][1],3)))}!ui||mn&&Sr(mn,rn)||_n.point(rn[0],rn[1]),mn=rn,Rn=ui,Sn=qn},lineEnd:function(){Rn&&_n.lineEnd(),mn=null},clean:function(){return Pn|(bn&&Rn)<<1}}},function(_n,mn,Sn,Rn){wr(Rn,mt,pr,Sn,_n,mn)},Jt?[0,-mt]:[-a,mt-a])}function un(mt,Vt,pr,Jt){function gr(mn,Sn){return mt<=mn&&mn<=pr&&Vt<=Sn&&Sn<=Jt}function Br(mn,Sn,Rn,bn){var Pn=0,Zn=0;if(null==mn||(Pn=Hr(mn,Rn))!==(Zn=Hr(Sn,Rn))||_n(mn,Sn)<0^Rn>0)do{bn.point(0===Pn||3===Pn?mt:pr,Pn>1?Jt:Vt)}while((Pn=(Pn+Rn+4)%4)!==Zn);else bn.point(Sn[0],Sn[1])}function Hr(mn,Sn){return c(mn[0]-mt)<t?Sn>0?0:3:c(mn[0]-pr)<t?Sn>0?2:1:c(mn[1]-Vt)<t?Sn>0?1:0:Sn>0?3:2}function en(mn,Sn){return _n(mn.x,Sn.x)}function _n(mn,Sn){var Rn=Hr(mn,1),bn=Hr(Sn,1);return Rn!==bn?Rn-bn:0===Rn?Sn[1]-mn[1]:1===Rn?mn[0]-Sn[0]:2===Rn?mn[1]-Sn[1]:Sn[0]-mn[0]}return function(mn){var Sn,Rn,bn,Pn,Zn,Qn,di,rn,ui,qn,Jn,ci=mn,Ii=_r(),Ui={point:jn,lineStart:function(){Ui.point=Yi,Rn&&Rn.push(bn=[]),qn=!0,ui=!1,di=rn=NaN},lineEnd:function(){Sn&&(Yi(Pn,Zn),Qn&&ui&&Ii.rejoin(),Sn.push(Ii.result())),Ui.point=jn,ui&&ci.lineEnd()},polygonStart:function(){ci=Ii,Sn=[],Rn=[],Jn=!0},polygonEnd:function(){var Ni=function(){for(var Fi=0,pa=0,fi=Rn.length;pa<fi;++pa)for(var ca,Qa,$o=Rn[pa],Vo=1,bo=$o.length,Ei=$o[0],Sa=Ei[0],Co=Ei[1];Vo<bo;++Vo)ca=Sa,Qa=Co,Sa=(Ei=$o[Vo])[0],Co=Ei[1],Qa<=Jt?Co>Jt&&(Sa-ca)*(Jt-Qa)>(Co-Qa)*(mt-ca)&&++Fi:Co<=Jt&&(Sa-ca)*(Jt-Qa)<(Co-Qa)*(mt-ca)&&--Fi;return Fi}(),Mi=Jn&&Ni,Wi=(Sn=v.merge(Sn)).length;(Mi||Wi)&&(mn.polygonStart(),Mi&&(mn.lineStart(),Br(null,null,1,mn),mn.lineEnd()),Wi&&Er(Sn,en,Ni,Br,mn),mn.polygonEnd()),ci=mn,Sn=Rn=bn=null}};function jn(Ni,Mi){gr(Ni,Mi)&&ci.point(Ni,Mi)}function Yi(Ni,Mi){var Wi=gr(Ni,Mi);if(Rn&&bn.push([Ni,Mi]),qn)Pn=Ni,Zn=Mi,Qn=Wi,qn=!1,Wi&&(ci.lineStart(),ci.point(Ni,Mi));else if(Wi&&ui)ci.point(Ni,Mi);else{var Fi=[di=Math.max(-1e9,Math.min(1e9,di)),rn=Math.max(-1e9,Math.min(1e9,rn))],pa=[Ni=Math.max(-1e9,Math.min(1e9,Ni)),Mi=Math.max(-1e9,Math.min(1e9,Mi))];!function(fi,ca,Qa,$o,Vo,bo){var Ei,Sa=fi[0],Co=fi[1],oa=0,Pa=1,eo=ca[0]-Sa,ga=ca[1]-Co;if(Ei=Qa-Sa,eo||!(Ei>0)){if(Ei/=eo,eo<0){if(Ei<oa)return;Ei<Pa&&(Pa=Ei)}else if(eo>0){if(Ei>Pa)return;Ei>oa&&(oa=Ei)}if(Ei=Vo-Sa,eo||!(Ei<0)){if(Ei/=eo,eo<0){if(Ei>Pa)return;Ei>oa&&(oa=Ei)}else if(eo>0){if(Ei<oa)return;Ei<Pa&&(Pa=Ei)}if(Ei=$o-Co,ga||!(Ei>0)){if(Ei/=ga,ga<0){if(Ei<oa)return;Ei<Pa&&(Pa=Ei)}else if(ga>0){if(Ei>Pa)return;Ei>oa&&(oa=Ei)}if(Ei=bo-Co,ga||!(Ei<0)){if(Ei/=ga,ga<0){if(Ei>Pa)return;Ei>oa&&(oa=Ei)}else if(ga>0){if(Ei<oa)return;Ei<Pa&&(Pa=Ei)}return oa>0&&(fi[0]=Sa+oa*eo,fi[1]=Co+oa*ga),Pa<1&&(ca[0]=Sa+Pa*eo,ca[1]=Co+Pa*ga),!0}}}}}(Fi,pa,mt,Vt,pr,Jt)?Wi&&(ci.lineStart(),ci.point(Ni,Mi),Jn=!1):(ui||(ci.lineStart(),ci.point(Fi[0],Fi[1])),ci.point(pa[0],pa[1]),Wi||ci.lineEnd(),Jn=!1)}di=Ni,rn=Mi,ui=Wi}return Ui}}var dn,cn,fn,Bn=u(),Nn={sphere:S,point:S,lineStart:function(){Nn.point=ar,Nn.lineEnd=Fn},lineEnd:S,polygonStart:S,polygonEnd:S};function Fn(){Nn.point=Nn.lineEnd=S}function ar(mt,Vt){dn=mt*=l,cn=_(Vt*=l),fn=d(Vt),Nn.point=Bt}function Bt(mt,Vt){mt*=l;var pr=_(Vt*=l),Jt=d(Vt),gr=c(mt-dn),Br=d(gr),Hr=Jt*_(gr),en=fn*pr-cn*Jt*Br,_n=cn*pr+fn*Jt*Br;Bn.add(m(T(Hr*Hr+en*en),_n)),dn=mt,cn=pr,fn=Jt}function Qt(mt){return Bn.reset(),X(mt,Nn),+Bn}var yr=[null,null],Dr={type:"LineString",coordinates:yr};function $r(mt,Vt){return yr[0]=mt,yr[1]=Vt,Qt(Dr)}var Xr={Feature:function(mt,Vt){return Lr(mt.geometry,Vt)},FeatureCollection:function(mt,Vt){for(var pr=mt.features,Jt=-1,gr=pr.length;++Jt<gr;)if(Lr(pr[Jt].geometry,Vt))return!0;return!1}},Mr={Sphere:function(){return!0},Point:function(mt,Vt){return Rr(mt.coordinates,Vt)},MultiPoint:function(mt,Vt){for(var pr=mt.coordinates,Jt=-1,gr=pr.length;++Jt<gr;)if(Rr(pr[Jt],Vt))return!0;return!1},LineString:function(mt,Vt){return Ir(mt.coordinates,Vt)},MultiLineString:function(mt,Vt){for(var pr=mt.coordinates,Jt=-1,gr=pr.length;++Jt<gr;)if(Ir(pr[Jt],Vt))return!0;return!1},Polygon:function(mt,Vt){return Fr(mt.coordinates,Vt)},MultiPolygon:function(mt,Vt){for(var pr=mt.coordinates,Jt=-1,gr=pr.length;++Jt<gr;)if(Fr(pr[Jt],Vt))return!0;return!1},GeometryCollection:function(mt,Vt){for(var pr=mt.geometries,Jt=-1,gr=pr.length;++Jt<gr;)if(Lr(pr[Jt],Vt))return!0;return!1}};function Lr(mt,Vt){return!(!mt||!Mr.hasOwnProperty(mt.type))&&Mr[mt.type](mt,Vt)}function Rr(mt,Vt){return 0===$r(mt,Vt)}function Ir(mt,Vt){for(var pr,Jt,gr,Br=0,Hr=mt.length;Br<Hr;Br++){if(0===(Jt=$r(mt[Br],Vt))||Br>0&&(gr=$r(mt[Br],mt[Br-1]))>0&&pr<=gr&&Jt<=gr&&(pr+Jt-gr)*(1-Math.pow((pr-Jt)/gr,2))<1e-12*gr)return!0;pr=Jt}return!1}function Fr(mt,Vt){return!!Vn(mt.map(Qr),yn(Vt))}function Qr(mt){return(mt=mt.map(yn)).pop(),mt}function yn(mt){return[mt[0]*l,mt[1]*l]}function In(mt,Vt,pr){var Jt=v.range(mt,Vt-t,pr).concat(Vt);return function(gr){return Jt.map(function(Br){return[gr,Br]})}}function nn(mt,Vt,pr){var Jt=v.range(mt,Vt-t,pr).concat(Vt);return function(gr){return Jt.map(function(Br){return[Br,gr]})}}function Cn(){var mt,Vt,pr,Jt,gr,Br,Hr,en,_n,mn,Sn,Rn,bn=10,Pn=bn,Zn=90,Qn=360,di=2.5;function rn(){return{type:"MultiLineString",coordinates:ui()}}function ui(){return v.range(o(Jt/Zn)*Zn,pr,Zn).map(Sn).concat(v.range(o(en/Qn)*Qn,Hr,Qn).map(Rn)).concat(v.range(o(Vt/bn)*bn,mt,bn).filter(function(qn){return c(qn%Zn)>t}).map(_n)).concat(v.range(o(Br/Pn)*Pn,gr,Pn).filter(function(qn){return c(qn%Qn)>t}).map(mn))}return rn.lines=function(){return ui().map(function(qn){return{type:"LineString",coordinates:qn}})},rn.outline=function(){return{type:"Polygon",coordinates:[Sn(Jt).concat(Rn(Hr).slice(1),Sn(pr).reverse().slice(1),Rn(en).reverse().slice(1))]}},rn.extent=function(qn){return arguments.length?rn.extentMajor(qn).extentMinor(qn):rn.extentMinor()},rn.extentMajor=function(qn){return arguments.length?(en=+qn[0][1],Hr=+qn[1][1],(Jt=+qn[0][0])>(pr=+qn[1][0])&&(qn=Jt,Jt=pr,pr=qn),en>Hr&&(qn=en,en=Hr,Hr=qn),rn.precision(di)):[[Jt,en],[pr,Hr]]},rn.extentMinor=function(qn){return arguments.length?(Br=+qn[0][1],gr=+qn[1][1],(Vt=+qn[0][0])>(mt=+qn[1][0])&&(qn=Vt,Vt=mt,mt=qn),Br>gr&&(qn=Br,Br=gr,gr=qn),rn.precision(di)):[[Vt,Br],[mt,gr]]},rn.step=function(qn){return arguments.length?rn.stepMajor(qn).stepMinor(qn):rn.stepMinor()},rn.stepMajor=function(qn){return arguments.length?(Zn=+qn[0],Qn=+qn[1],rn):[Zn,Qn]},rn.stepMinor=function(qn){return arguments.length?(bn=+qn[0],Pn=+qn[1],rn):[bn,Pn]},rn.precision=function(qn){return arguments.length?(di=+qn,_n=In(Br,gr,90),mn=nn(Vt,mt,di),Sn=In(en,Hr,90),Rn=nn(Jt,pr,di),rn):di},rn.extentMajor([[-180,-90+t],[180,90-t]]).extentMinor([[-180,-80-t],[180,80+t]])}function Ur(mt){return mt}var Kr,An,wn,Hn,gi=u(),ti=u(),En={point:S,lineStart:S,lineEnd:S,polygonStart:function(){En.lineStart=hi,En.lineEnd=ka},polygonEnd:function(){En.lineStart=En.lineEnd=En.point=S,gi.add(c(ti)),ti.reset()},result:function(){var mt=gi/2;return gi.reset(),mt}};function hi(){En.point=mi}function mi(mt,Vt){En.point=ra,Kr=wn=mt,An=Hn=Vt}function ra(mt,Vt){ti.add(Hn*mt-wn*Vt),wn=mt,Hn=Vt}function ka(){ra(Kr,An)}var Ho,Ko,Na,Vi,fa=1/0,Aa=fa,Bi=-fa,$i=Bi,yo={point:function(mt,Vt){mt<fa&&(fa=mt),mt>Bi&&(Bi=mt),Vt<Aa&&(Aa=Vt),Vt>$i&&($i=Vt)},lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S,result:function(){var mt=[[fa,Aa],[Bi,$i]];return Bi=$i=-(Aa=fa=1/0),mt}},ia=0,Qi=0,go=0,Ji=0,Dt=0,_t=0,st=0,sr=0,hn=0,ri={point:qi,lineStart:ko,lineEnd:Es,polygonStart:function(){ri.lineStart=os,ri.lineEnd=Ls},polygonEnd:function(){ri.point=qi,ri.lineStart=ko,ri.lineEnd=Es},result:function(){var mt=hn?[st/hn,sr/hn]:_t?[Ji/_t,Dt/_t]:go?[ia/go,Qi/go]:[NaN,NaN];return ia=Qi=go=Ji=Dt=_t=st=sr=hn=0,mt}};function qi(mt,Vt){ia+=mt,Qi+=Vt,++go}function ko(){ri.point=as}function as(mt,Vt){ri.point=aa,qi(Na=mt,Vi=Vt)}function aa(mt,Vt){var pr=mt-Na,Jt=Vt-Vi,gr=T(pr*pr+Jt*Jt);Ji+=gr*(Na+mt)/2,Dt+=gr*(Vi+Vt)/2,_t+=gr,qi(Na=mt,Vi=Vt)}function Es(){ri.point=qi}function os(){ri.point=Bs}function Ls(){bs(Ho,Ko)}function Bs(mt,Vt){ri.point=bs,qi(Ho=Na=mt,Ko=Vi=Vt)}function bs(mt,Vt){var pr=mt-Na,Jt=Vt-Vi,gr=T(pr*pr+Jt*Jt);Ji+=gr*(Na+mt)/2,Dt+=gr*(Vi+Vt)/2,_t+=gr,st+=(gr=Vi*mt-Na*Vt)*(Na+mt),sr+=gr*(Vi+Vt),hn+=3*gr,qi(Na=mt,Vi=Vt)}function Ns(mt){this._context=mt}Ns.prototype={_radius:4.5,pointRadius:function(mt){return this._radius=mt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(mt,Vt){switch(this._point){case 0:this._context.moveTo(mt,Vt),this._point=1;break;case 1:this._context.lineTo(mt,Vt);break;default:this._context.moveTo(mt+this._radius,Vt),this._context.arc(mt,Vt,this._radius,0,s)}},result:S};var Do,No,qo,jo,Yo,ss=u(),xo={point:S,lineStart:function(){xo.point=_s},lineEnd:function(){Do&&$a(No,qo),xo.point=S},polygonStart:function(){Do=!0},polygonEnd:function(){Do=null},result:function(){var mt=+ss;return ss.reset(),mt}};function _s(mt,Vt){xo.point=$a,No=jo=mt,qo=Yo=Vt}function $a(mt,Vt){ss.add(T((jo-=mt)*jo+(Yo-=Vt)*Yo)),jo=mt,Yo=Vt}function Wo(){this._string=[]}function ws(mt){return"m0,"+mt+"a"+mt+","+mt+" 0 1,1 0,"+-2*mt+"a"+mt+","+mt+" 0 1,1 0,"+2*mt+"z"}function So(mt){return function(Vt){var pr=new na;for(var Jt in mt)pr[Jt]=mt[Jt];return pr.stream=Vt,pr}}function na(){}function Ve(mt,Vt,pr){var Jt=mt.clipExtent&&mt.clipExtent();return mt.scale(150).translate([0,0]),null!=Jt&&mt.clipExtent(null),X(pr,mt.stream(yo)),Vt(yo.result()),null!=Jt&&mt.clipExtent(Jt),mt}function qe(mt,Vt,pr){return Ve(mt,function(Jt){var gr=Vt[1][0]-Vt[0][0],Br=Vt[1][1]-Vt[0][1],Hr=Math.min(gr/(Jt[1][0]-Jt[0][0]),Br/(Jt[1][1]-Jt[0][1])),en=+Vt[0][0]+(gr-Hr*(Jt[1][0]+Jt[0][0]))/2,_n=+Vt[0][1]+(Br-Hr*(Jt[1][1]+Jt[0][1]))/2;mt.scale(150*Hr).translate([en,_n])},pr)}function et(mt,Vt,pr){return qe(mt,[[0,0],Vt],pr)}function lt(mt,Vt,pr){return Ve(mt,function(Jt){var gr=+Vt,Br=gr/(Jt[1][0]-Jt[0][0]),Hr=(gr-Br*(Jt[1][0]+Jt[0][0]))/2,en=-Br*Jt[0][1];mt.scale(150*Br).translate([Hr,en])},pr)}function wt(mt,Vt,pr){return Ve(mt,function(Jt){var gr=+Vt,Br=gr/(Jt[1][1]-Jt[0][1]),Hr=-Br*Jt[0][0],en=(gr-Br*(Jt[1][1]+Jt[0][1]))/2;mt.scale(150*Br).translate([Hr,en])},pr)}Wo.prototype={_radius:4.5,_circle:ws(4.5),pointRadius:function(mt){return(mt=+mt)!==this._radius&&(this._radius=mt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(mt,Vt){switch(this._point){case 0:this._string.push("M",mt,",",Vt),this._point=1;break;case 1:this._string.push("L",mt,",",Vt);break;default:null==this._circle&&(this._circle=ws(this._radius)),this._string.push("M",mt,",",Vt,this._circle)}},result:function(){if(this._string.length){var mt=this._string.join("");return this._string=[],mt}return null}},na.prototype={constructor:na,point:function(mt,Vt){this.stream.point(mt,Vt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var vt=d(30*l);function Ot(mt,Vt){return+Vt?function(pr,Jt){function gr(Br,Hr,en,_n,mn,Sn,Rn,bn,Pn,Zn,Qn,di,rn,ui){var qn=Rn-Br,Jn=bn-Hr,ci=qn*qn+Jn*Jn;if(ci>4*Jt&&rn--){var Ii=_n+Zn,Ui=mn+Qn,jn=Sn+di,Yi=T(Ii*Ii+Ui*Ui+jn*jn),Ni=O(jn/=Yi),Mi=c(c(jn)-1)<t||c(en-Pn)<t?(en+Pn)/2:m(Ui,Ii),Wi=pr(Mi,Ni),Fi=Wi[0],pa=Wi[1],fi=Fi-Br,ca=pa-Hr,Qa=Jn*fi-qn*ca;(Qa*Qa/ci>Jt||c((qn*fi+Jn*ca)/ci-.5)>.3||_n*Zn+mn*Qn+Sn*di<vt)&&(gr(Br,Hr,en,_n,mn,Sn,Fi,pa,Mi,Ii/=Yi,Ui/=Yi,jn,rn,ui),ui.point(Fi,pa),gr(Fi,pa,Mi,Ii,Ui,jn,Rn,bn,Pn,Zn,Qn,di,rn,ui))}}return function(Br){var Hr,en,_n,mn,Sn,Rn,bn,Pn,Zn,Qn,di,rn,ui={point:qn,lineStart:Jn,lineEnd:Ii,polygonStart:function(){Br.polygonStart(),ui.lineStart=Ui},polygonEnd:function(){Br.polygonEnd(),ui.lineStart=Jn}};function qn(Ni,Mi){Ni=pr(Ni,Mi),Br.point(Ni[0],Ni[1])}function Jn(){Pn=NaN,ui.point=ci,Br.lineStart()}function ci(Ni,Mi){var Wi=se([Ni,Mi]),Fi=pr(Ni,Mi);gr(Pn,Zn,bn,Qn,di,rn,Pn=Fi[0],Zn=Fi[1],bn=Ni,Qn=Wi[0],di=Wi[1],rn=Wi[2],16,Br),Br.point(Pn,Zn)}function Ii(){ui.point=qn,Br.lineEnd()}function Ui(){Jn(),ui.point=jn,ui.lineEnd=Yi}function jn(Ni,Mi){ci(Hr=Ni,Mi),en=Pn,_n=Zn,mn=Qn,Sn=di,Rn=rn,ui.point=ci}function Yi(){gr(Pn,Zn,bn,Qn,di,rn,en,_n,Hr,mn,Sn,Rn,16,Br),ui.lineEnd=Ii,Ii()}return ui}}(mt,Vt):(pr=mt,So({point:function(Jt,gr){Jt=pr(Jt,gr),this.stream.point(Jt[0],Jt[1])}}));var pr}var ir=So({point:function(mt,Vt){this.stream.point(mt*l,Vt*l)}});function or(mt,Vt,pr,Jt,gr){function Br(Hr,en){return[Vt+mt*(Hr*=Jt),pr-mt*(en*=gr)]}return Br.invert=function(Hr,en){return[(Hr-Vt)/mt*Jt,(pr-en)/mt*gr]},Br}function er(mt,Vt,pr,Jt,gr,Br){var Hr=d(Br),en=_(Br),_n=Hr*mt,mn=en*mt,Sn=Hr/mt,Rn=en/mt,bn=(en*pr-Hr*Vt)/mt,Pn=(en*Vt+Hr*pr)/mt;function Zn(Qn,di){return[_n*(Qn*=Jt)-mn*(di*=gr)+Vt,pr-mn*Qn-_n*di]}return Zn.invert=function(Qn,di){return[Jt*(Sn*Qn-Rn*di+bn),gr*(Pn-Rn*Qn-Sn*di)]},Zn}function ur(mt){return xr(function(){return mt})()}function xr(mt){var Vt,pr,Jt,gr,Br,Hr,en,_n,mn,Sn,Rn=150,bn=480,Pn=250,Zn=0,Qn=0,di=0,rn=0,ui=0,qn=0,Jn=1,ci=1,Ii=null,Ui=qr,jn=null,Yi=Ur,Ni=.5;function Mi(fi){return _n(fi[0]*l,fi[1]*l)}function Wi(fi){return(fi=_n.invert(fi[0],fi[1]))&&[fi[0]*i,fi[1]*i]}function Fi(){var fi=er(Rn,0,0,Jn,ci,qn).apply(null,Vt(Zn,Qn)),ca=(qn?er:or)(Rn,bn-fi[0],Pn-fi[1],Jn,ci,qn);return pr=fr(di,rn,ui),en=Gt(Vt,ca),_n=Gt(pr,en),Hr=Ot(en,Ni),pa()}function pa(){return mn=Sn=null,Mi}return Mi.stream=function(fi){return mn&&Sn===fi?mn:mn=ir((ca=pr,So({point:function(Qa,$o){var Vo=ca(Qa,$o);return this.stream.point(Vo[0],Vo[1])}}))(Ui(Hr(Yi(Sn=fi)))));var ca},Mi.preclip=function(fi){return arguments.length?(Ui=fi,Ii=void 0,pa()):Ui},Mi.postclip=function(fi){return arguments.length?(Yi=fi,jn=Jt=gr=Br=null,pa()):Yi},Mi.clipAngle=function(fi){return arguments.length?(Ui=+fi?Pr(Ii=fi*l):(Ii=null,qr),pa()):Ii*i},Mi.clipExtent=function(fi){return arguments.length?(Yi=null==fi?(jn=Jt=gr=Br=null,Ur):un(jn=+fi[0][0],Jt=+fi[0][1],gr=+fi[1][0],Br=+fi[1][1]),pa()):null==jn?null:[[jn,Jt],[gr,Br]]},Mi.scale=function(fi){return arguments.length?(Rn=+fi,Fi()):Rn},Mi.translate=function(fi){return arguments.length?(bn=+fi[0],Pn=+fi[1],Fi()):[bn,Pn]},Mi.center=function(fi){return arguments.length?(Zn=fi[0]%360*l,Qn=fi[1]%360*l,Fi()):[Zn*i,Qn*i]},Mi.rotate=function(fi){return arguments.length?(di=fi[0]%360*l,rn=fi[1]%360*l,ui=fi.length>2?fi[2]%360*l:0,Fi()):[di*i,rn*i,ui*i]},Mi.angle=function(fi){return arguments.length?(qn=fi%360*l,Fi()):qn*i},Mi.reflectX=function(fi){return arguments.length?(Jn=fi?-1:1,Fi()):Jn<0},Mi.reflectY=function(fi){return arguments.length?(ci=fi?-1:1,Fi()):ci<0},Mi.precision=function(fi){return arguments.length?(Hr=Ot(en,Ni=fi*fi),pa()):T(Ni)},Mi.fitExtent=function(fi,ca){return qe(Mi,fi,ca)},Mi.fitSize=function(fi,ca){return et(Mi,fi,ca)},Mi.fitWidth=function(fi,ca){return lt(Mi,fi,ca)},Mi.fitHeight=function(fi,ca){return wt(Mi,fi,ca)},function(){return Vt=mt.apply(this,arguments),Mi.invert=Vt.invert&&Wi,Fi()}}function kr(mt){var Vt=0,pr=a/3,Jt=xr(mt),gr=Jt(Vt,pr);return gr.parallels=function(Br){return arguments.length?Jt(Vt=Br[0]*l,pr=Br[1]*l):[Vt*i,pr*i]},gr}function Cr(mt,Vt){var pr=_(mt),Jt=(pr+_(Vt))/2;if(c(Jt)<t)return function(en){var _n=d(en);function mn(Sn,Rn){return[Sn*_n,_(Rn)/_n]}return mn.invert=function(Sn,Rn){return[Sn/_n,O(Rn*_n)]},mn}(mt);var gr=1+pr*(2*Jt-pr),Br=T(gr)/Jt;function Hr(en,_n){var mn=T(gr-2*Jt*_(_n))/Jt;return[mn*_(en*=Jt),Br-mn*d(en)]}return Hr.invert=function(en,_n){var mn=Br-_n,Sn=m(en,c(mn))*A(mn);return mn*Jt<0&&(Sn-=a*A(en)*A(mn)),[Sn/Jt,O((gr-(en*en+mn*mn)*Jt*Jt)/(2*Jt))]},Hr}function Vr(){return kr(Cr).scale(155.424).center([0,33.6442])}function pn(){return Vr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Tn(mt){return function(Vt,pr){var Jt=d(Vt),gr=d(pr),Br=mt(Jt*gr);return[Br*gr*_(Vt),Br*_(pr)]}}function Un(mt){return function(Vt,pr){var Jt=T(Vt*Vt+pr*pr),gr=mt(Jt),Br=_(gr),Hr=d(gr);return[m(Vt*Br,Jt*Hr),O(Jt&&pr*Br/Jt)]}}var Wn=Tn(function(mt){return T(2/(1+mt))});Wn.invert=Un(function(mt){return 2*O(mt/2)});var ei=Tn(function(mt){return(mt=k(mt))&&mt/_(mt)});function Yn(mt,Vt){return[mt,g(E((r+Vt)/2))]}function Si(mt){var Vt,pr,Jt,gr=ur(mt),Br=gr.center,Hr=gr.scale,en=gr.translate,_n=gr.clipExtent,mn=null;function Sn(){var Rn=a*Hr(),bn=gr(Tr(gr.rotate()).invert([0,0]));return _n(null==mn?[[bn[0]-Rn,bn[1]-Rn],[bn[0]+Rn,bn[1]+Rn]]:mt===Yn?[[Math.max(bn[0]-Rn,mn),Vt],[Math.min(bn[0]+Rn,pr),Jt]]:[[mn,Math.max(bn[1]-Rn,Vt)],[pr,Math.min(bn[1]+Rn,Jt)]])}return gr.scale=function(Rn){return arguments.length?(Hr(Rn),Sn()):Hr()},gr.translate=function(Rn){return arguments.length?(en(Rn),Sn()):en()},gr.center=function(Rn){return arguments.length?(Br(Rn),Sn()):Br()},gr.clipExtent=function(Rn){return arguments.length?(null==Rn?mn=Vt=pr=Jt=null:(mn=+Rn[0][0],Vt=+Rn[0][1],pr=+Rn[1][0],Jt=+Rn[1][1]),Sn()):null==mn?null:[[mn,Vt],[pr,Jt]]},Sn()}function Ri(mt){return E((r+mt)/2)}function Ki(mt,Vt){var pr=d(mt),Jt=mt===Vt?_(mt):g(pr/d(Vt))/g(Ri(Vt)/Ri(mt)),gr=pr*w(Ri(mt),Jt)/Jt;if(!Jt)return Yn;function Br(Hr,en){gr>0?en<-r+t&&(en=-r+t):en>r-t&&(en=r-t);var _n=gr/w(Ri(en),Jt);return[_n*_(Jt*Hr),gr-_n*d(Jt*Hr)]}return Br.invert=function(Hr,en){var _n=gr-en,mn=A(Jt)*T(Hr*Hr+_n*_n),Sn=m(Hr,c(_n))*A(_n);return _n*Jt<0&&(Sn-=a*A(Hr)*A(_n)),[Sn/Jt,2*h(w(gr/mn,1/Jt))-r]},Br}function Zi(mt,Vt){return[mt,Vt]}function ea(mt,Vt){var pr=d(mt),Jt=mt===Vt?_(mt):(pr-d(Vt))/(Vt-mt),gr=pr/Jt+mt;if(c(Jt)<t)return Zi;function Br(Hr,en){var _n=gr-en,mn=Jt*Hr;return[_n*_(mn),gr-_n*d(mn)]}return Br.invert=function(Hr,en){var _n=gr-en,mn=m(Hr,c(_n))*A(_n);return _n*Jt<0&&(mn-=a*A(Hr)*A(_n)),[mn/Jt,gr-A(Jt)*T(Hr*Hr+_n*_n)]},Br}ei.invert=Un(function(mt){return mt}),Yn.invert=function(mt,Vt){return[mt,2*h(b(Vt))-r]},Zi.invert=Zi;var Oa=1.340264,Ia=-.081106,ya=893e-6,xa=.003796,Ca=T(3)/2;function Xa(mt,Vt){var pr=O(Ca*_(Vt)),Jt=pr*pr,gr=Jt*Jt*Jt;return[mt*d(pr)/(Ca*(Oa+3*Ia*Jt+gr*(7*ya+9*xa*Jt))),pr*(Oa+Ia*Jt+gr*(ya+xa*Jt))]}function so(mt,Vt){var pr=d(Vt),Jt=d(mt)*pr;return[pr*_(mt)/Jt,_(Vt)/Jt]}function lo(mt,Vt){var pr=Vt*Vt,Jt=pr*pr;return[mt*(.8707-.131979*pr+Jt*(Jt*(.003971*pr-.001529*Jt)-.013791)),Vt*(1.007226+pr*(.015085+Jt*(.028874*pr-.044475-.005916*Jt)))]}function co(mt,Vt){return[d(Vt)*_(mt),_(Vt)]}function uo(mt,Vt){var pr=d(Vt),Jt=1+d(mt)*pr;return[pr*_(mt)/Jt,_(Vt)/Jt]}function Hi(mt,Vt){return[g(E((r+Vt)/2)),-mt]}Xa.invert=function(mt,Vt){for(var pr,Jt=Vt,gr=Jt*Jt,Br=gr*gr*gr,Hr=0;Hr<12&&(Br=(gr=(Jt-=pr=(Jt*(Oa+Ia*gr+Br*(ya+xa*gr))-Vt)/(Oa+3*Ia*gr+Br*(7*ya+9*xa*gr)))*Jt)*gr*gr,!(c(pr)<1e-12));++Hr);return[Ca*mt*(Oa+3*Ia*gr+Br*(7*ya+9*xa*gr))/d(Jt),O(_(Jt)/Ca)]},so.invert=Un(h),lo.invert=function(mt,Vt){var pr,Jt=Vt,gr=25;do{var Br=Jt*Jt,Hr=Br*Br;Jt-=pr=(Jt*(1.007226+Br*(.015085+Hr*(.028874*Br-.044475-.005916*Hr)))-Vt)/(1.007226+Br*(.045255+Hr*(.259866*Br-.311325-.005916*11*Hr)))}while(c(pr)>t&&--gr>0);return[mt/(.8707+(Br=Jt*Jt)*(Br*(Br*Br*Br*(.003971-.001529*Br)-.013791)-.131979)),Jt]},co.invert=Un(O),uo.invert=Un(function(mt){return 2*h(mt)}),Hi.invert=function(mt,Vt){return[-Vt,2*h(b(mt))-r]},p.geoAlbers=pn,p.geoAlbersUsa=function(){var mt,Vt,pr,Jt,gr,Br,Hr=pn(),en=Vr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),_n=Vr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),mn={point:function(bn,Pn){Br=[bn,Pn]}};function Sn(bn){var Pn=bn[0],Zn=bn[1];return Br=null,pr.point(Pn,Zn),Br||(Jt.point(Pn,Zn),Br)||(gr.point(Pn,Zn),Br)}function Rn(){return mt=Vt=null,Sn}return Sn.invert=function(bn){var Pn=Hr.scale(),Zn=Hr.translate(),Qn=(bn[0]-Zn[0])/Pn,di=(bn[1]-Zn[1])/Pn;return(di>=.12&&di<.234&&Qn>=-.425&&Qn<-.214?en:di>=.166&&di<.234&&Qn>=-.214&&Qn<-.115?_n:Hr).invert(bn)},Sn.stream=function(bn){return mt&&Vt===bn?mt:(Pn=[Hr.stream(Vt=bn),en.stream(bn),_n.stream(bn)],Zn=Pn.length,mt={point:function(Qn,di){for(var rn=-1;++rn<Zn;)Pn[rn].point(Qn,di)},sphere:function(){for(var Qn=-1;++Qn<Zn;)Pn[Qn].sphere()},lineStart:function(){for(var Qn=-1;++Qn<Zn;)Pn[Qn].lineStart()},lineEnd:function(){for(var Qn=-1;++Qn<Zn;)Pn[Qn].lineEnd()},polygonStart:function(){for(var Qn=-1;++Qn<Zn;)Pn[Qn].polygonStart()},polygonEnd:function(){for(var Qn=-1;++Qn<Zn;)Pn[Qn].polygonEnd()}});var Pn,Zn},Sn.precision=function(bn){return arguments.length?(Hr.precision(bn),en.precision(bn),_n.precision(bn),Rn()):Hr.precision()},Sn.scale=function(bn){return arguments.length?(Hr.scale(bn),en.scale(.35*bn),_n.scale(bn),Sn.translate(Hr.translate())):Hr.scale()},Sn.translate=function(bn){if(!arguments.length)return Hr.translate();var Pn=Hr.scale(),Zn=+bn[0],Qn=+bn[1];return pr=Hr.translate(bn).clipExtent([[Zn-.455*Pn,Qn-.238*Pn],[Zn+.455*Pn,Qn+.238*Pn]]).stream(mn),Jt=en.translate([Zn-.307*Pn,Qn+.201*Pn]).clipExtent([[Zn-.425*Pn+t,Qn+.12*Pn+t],[Zn-.214*Pn-t,Qn+.234*Pn-t]]).stream(mn),gr=_n.translate([Zn-.205*Pn,Qn+.212*Pn]).clipExtent([[Zn-.214*Pn+t,Qn+.166*Pn+t],[Zn-.115*Pn-t,Qn+.234*Pn-t]]).stream(mn),Rn()},Sn.fitExtent=function(bn,Pn){return qe(Sn,bn,Pn)},Sn.fitSize=function(bn,Pn){return et(Sn,bn,Pn)},Sn.fitWidth=function(bn,Pn){return lt(Sn,bn,Pn)},Sn.fitHeight=function(bn,Pn){return wt(Sn,bn,Pn)},Sn.scale(1070)},p.geoArea=function(mt){return V.reset(),X(mt,ee),2*V},p.geoAzimuthalEqualArea=function(){return ur(Wn).scale(124.75).clipAngle(179.999)},p.geoAzimuthalEqualAreaRaw=Wn,p.geoAzimuthalEquidistant=function(){return ur(ei).scale(79.4188).clipAngle(179.999)},p.geoAzimuthalEquidistantRaw=ei,p.geoBounds=function(mt){var Vt,pr,Jt,gr,Br,Hr,en;if(he=Te=-(_e=be=1/0),Pe=[],X(mt,Ze),pr=Pe.length){for(Pe.sort(xt),Vt=1,Br=[Jt=Pe[0]];Vt<pr;++Vt)gt(Jt,(gr=Pe[Vt])[0])||gt(Jt,gr[1])?(ut(Jt[0],gr[1])>ut(Jt[0],Jt[1])&&(Jt[1]=gr[1]),ut(gr[0],Jt[1])>ut(Jt[0],Jt[1])&&(Jt[0]=gr[0])):Br.push(Jt=gr);for(Hr=-1/0,Vt=0,Jt=Br[pr=Br.length-1];Vt<=pr;Jt=gr,++Vt)(en=ut(Jt[1],(gr=Br[Vt])[0]))>Hr&&(Hr=en,_e=gr[0],Te=Jt[1])}return Pe=ze=null,_e===1/0||be===1/0?[[NaN,NaN],[NaN,NaN]]:[[_e,be],[Te,he]]},p.geoCentroid=function(mt){He=tt=Oe=Be=Je=Ye=nt=ft=dt=Rt=Et=0,X(mt,Pt);var Vt=dt,pr=Rt,Jt=Et,gr=Vt*Vt+pr*pr+Jt*Jt;return gr<1e-12&&(Vt=Ye,pr=nt,Jt=ft,tt<t&&(Vt=Oe,pr=Be,Jt=Je),(gr=Vt*Vt+pr*pr+Jt*Jt)<1e-12)?[NaN,NaN]:[m(pr,Vt)*i,O(Jt/T(gr))*i]},p.geoCircle=function(){var mt,Vt,pr=kt([0,0]),Jt=kt(90),gr=kt(6),Br={point:function(en,_n){mt.push(en=Vt(en,_n)),en[0]*=i,en[1]*=i}};function Hr(){var en=pr.apply(this,arguments),_n=Jt.apply(this,arguments)*l,mn=gr.apply(this,arguments)*l;return mt=[],Vt=fr(-en[0]*l,-en[1]*l,0).invert,wr(Br,_n,mn,1),en={type:"Polygon",coordinates:[mt]},mt=Vt=null,en}return Hr.center=function(en){return arguments.length?(pr="function"==typeof en?en:kt([+en[0],+en[1]]),Hr):pr},Hr.radius=function(en){return arguments.length?(Jt="function"==typeof en?en:kt(+en),Hr):Jt},Hr.precision=function(en){return arguments.length?(gr="function"==typeof en?en:kt(+en),Hr):gr},Hr},p.geoClipAntimeridian=qr,p.geoClipCircle=Pr,p.geoClipExtent=function(){var mt,Vt,pr,Jt=0,gr=0,Br=960,Hr=500;return pr={stream:function(en){return mt&&Vt===en?mt:mt=un(Jt,gr,Br,Hr)(Vt=en)},extent:function(en){return arguments.length?(Jt=+en[0][0],gr=+en[0][1],Br=+en[1][0],Hr=+en[1][1],mt=Vt=null,pr):[[Jt,gr],[Br,Hr]]}}},p.geoClipRectangle=un,p.geoConicConformal=function(){return kr(Ki).scale(109.5).parallels([30,30])},p.geoConicConformalRaw=Ki,p.geoConicEqualArea=Vr,p.geoConicEqualAreaRaw=Cr,p.geoConicEquidistant=function(){return kr(ea).scale(131.154).center([0,13.9389])},p.geoConicEquidistantRaw=ea,p.geoContains=function(mt,Vt){return(mt&&Xr.hasOwnProperty(mt.type)?Xr[mt.type]:Lr)(mt,Vt)},p.geoDistance=$r,p.geoEqualEarth=function(){return ur(Xa).scale(177.158)},p.geoEqualEarthRaw=Xa,p.geoEquirectangular=function(){return ur(Zi).scale(152.63)},p.geoEquirectangularRaw=Zi,p.geoGnomonic=function(){return ur(so).scale(144.049).clipAngle(60)},p.geoGnomonicRaw=so,p.geoGraticule=Cn,p.geoGraticule10=function(){return Cn()()},p.geoIdentity=function(){var mt,Vt,pr,Jt,gr,Br,Hr,en=1,_n=0,mn=0,Sn=1,Rn=1,bn=0,Pn=null,Zn=1,Qn=1,di=So({point:function(Jn,ci){var Ii=qn([Jn,ci]);this.stream.point(Ii[0],Ii[1])}}),rn=Ur;function ui(){return Zn=en*Sn,Qn=en*Rn,Br=Hr=null,qn}function qn(Jn){var ci=Jn[0]*Zn,Ii=Jn[1]*Qn;if(bn){var Ui=Ii*mt-ci*Vt;ci=ci*mt+Ii*Vt,Ii=Ui}return[ci+_n,Ii+mn]}return qn.invert=function(Jn){var ci=Jn[0]-_n,Ii=Jn[1]-mn;if(bn){var Ui=Ii*mt+ci*Vt;ci=ci*mt-Ii*Vt,Ii=Ui}return[ci/Zn,Ii/Qn]},qn.stream=function(Jn){return Br&&Hr===Jn?Br:Br=di(rn(Hr=Jn))},qn.postclip=function(Jn){return arguments.length?(rn=Jn,Pn=pr=Jt=gr=null,ui()):rn},qn.clipExtent=function(Jn){return arguments.length?(rn=null==Jn?(Pn=pr=Jt=gr=null,Ur):un(Pn=+Jn[0][0],pr=+Jn[0][1],Jt=+Jn[1][0],gr=+Jn[1][1]),ui()):null==Pn?null:[[Pn,pr],[Jt,gr]]},qn.scale=function(Jn){return arguments.length?(en=+Jn,ui()):en},qn.translate=function(Jn){return arguments.length?(_n=+Jn[0],mn=+Jn[1],ui()):[_n,mn]},qn.angle=function(Jn){return arguments.length?(Vt=_(bn=Jn%360*l),mt=d(bn),ui()):bn*i},qn.reflectX=function(Jn){return arguments.length?(Sn=Jn?-1:1,ui()):Sn<0},qn.reflectY=function(Jn){return arguments.length?(Rn=Jn?-1:1,ui()):Rn<0},qn.fitExtent=function(Jn,ci){return qe(qn,Jn,ci)},qn.fitSize=function(Jn,ci){return et(qn,Jn,ci)},qn.fitWidth=function(Jn,ci){return lt(qn,Jn,ci)},qn.fitHeight=function(Jn,ci){return wt(qn,Jn,ci)},qn},p.geoInterpolate=function(mt,Vt){var pr=mt[0]*l,Jt=mt[1]*l,gr=Vt[0]*l,Br=Vt[1]*l,Hr=d(Jt),en=_(Jt),_n=d(Br),mn=_(Br),Sn=Hr*d(pr),Rn=Hr*_(pr),bn=_n*d(gr),Pn=_n*_(gr),Zn=2*O(T(D(Br-Jt)+Hr*_n*D(gr-pr))),Qn=_(Zn),di=Zn?function(rn){var ui=_(rn*=Zn)/Qn,qn=_(Zn-rn)/Qn,Jn=qn*Sn+ui*bn,ci=qn*Rn+ui*Pn,Ii=qn*en+ui*mn;return[m(ci,Jn)*i,m(Ii,T(Jn*Jn+ci*ci))*i]}:function(){return[pr*i,Jt*i]};return di.distance=Zn,di},p.geoLength=Qt,p.geoMercator=function(){return Si(Yn).scale(961/s)},p.geoMercatorRaw=Yn,p.geoNaturalEarth1=function(){return ur(lo).scale(175.295)},p.geoNaturalEarth1Raw=lo,p.geoOrthographic=function(){return ur(co).scale(249.5).clipAngle(90+t)},p.geoOrthographicRaw=co,p.geoPath=function(mt,Vt){var pr,Jt,gr=4.5;function Br(Hr){return Hr&&("function"==typeof gr&&Jt.pointRadius(+gr.apply(this,arguments)),X(Hr,pr(Jt))),Jt.result()}return Br.area=function(Hr){return X(Hr,pr(En)),En.result()},Br.measure=function(Hr){return X(Hr,pr(xo)),xo.result()},Br.bounds=function(Hr){return X(Hr,pr(yo)),yo.result()},Br.centroid=function(Hr){return X(Hr,pr(ri)),ri.result()},Br.projection=function(Hr){return arguments.length?(pr=null==Hr?(mt=null,Ur):(mt=Hr).stream,Br):mt},Br.context=function(Hr){return arguments.length?(Jt=null==Hr?(Vt=null,new Wo):new Ns(Vt=Hr),"function"!=typeof gr&&Jt.pointRadius(gr),Br):Vt},Br.pointRadius=function(Hr){return arguments.length?(gr="function"==typeof Hr?Hr:(Jt.pointRadius(+Hr),+Hr),Br):gr},Br.projection(mt).context(Vt)},p.geoProjection=ur,p.geoProjectionMutator=xr,p.geoRotation=Tr,p.geoStereographic=function(){return ur(uo).scale(250).clipAngle(142)},p.geoStereographicRaw=uo,p.geoStream=X,p.geoTransform=function(mt){return{stream:So(mt)}},p.geoTransverseMercator=function(){var mt=Si(Hi),Vt=mt.center,pr=mt.rotate;return mt.center=function(Jt){return arguments.length?Vt([-Jt[1],Jt[0]]):[(Jt=Vt())[1],-Jt[0]]},mt.rotate=function(Jt){return arguments.length?pr([Jt[0],Jt[1],Jt.length>2?Jt[2]+90:90]):[(Jt=pr())[0],Jt[1],Jt[2]-90]},pr([0,0,90]).scale(159.155)},p.geoTransverseMercatorRaw=Hi,Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,x("d3-array")):v((p=p||self).d3=p.d3||{},p.d3)},{"d3-array":107}],115:[function(x,Q,K){var p;p=this,function(p){"use strict";function v(ie,ue){return ie.parent===ue.parent?1:2}function u(ie,ue){return ie+ue.x}function y(ie,ue){return Math.max(ie,ue.y)}function e(ie){var ue=0,le=ie.children,de=le&&le.length;if(de)for(;--de>=0;)ue+=le[de].value;else ue=1;ie.value=ue}function n(ie,ue){var le,de,ve,_e,be,Te=new f(ie),he=+ie.value&&(Te.value=ie.value),me=[Te];for(null==ue&&(ue=t);le=me.pop();)if(he&&(le.value=+le.data.value),(ve=ue(le.data))&&(be=ve.length))for(le.children=new Array(be),_e=be-1;_e>=0;--_e)me.push(de=le.children[_e]=new f(ve[_e])),de.parent=le,de.depth=le.depth+1;return Te.eachBefore(r)}function t(ie){return ie.children}function a(ie){ie.data=ie.data.data}function r(ie){var ue=0;do{ie.height=ue}while((ie=ie.parent)&&ie.height<++ue)}function f(ie){this.data=ie,this.depth=this.height=0,this.parent=null}f.prototype=n.prototype={constructor:f,count:function(){return this.eachAfter(e)},each:function(ie){var ue,le,de,ve,_e=this,be=[_e];do{for(ue=be.reverse(),be=[];_e=ue.pop();)if(ie(_e),le=_e.children)for(de=0,ve=le.length;de<ve;++de)be.push(le[de])}while(be.length);return this},eachAfter:function(ie){for(var ue,le,de,ve=this,_e=[ve],be=[];ve=_e.pop();)if(be.push(ve),ue=ve.children)for(le=0,de=ue.length;le<de;++le)_e.push(ue[le]);for(;ve=be.pop();)ie(ve);return this},eachBefore:function(ie){for(var ue,le,de=this,ve=[de];de=ve.pop();)if(ie(de),ue=de.children)for(le=ue.length-1;le>=0;--le)ve.push(ue[le]);return this},sum:function(ie){return this.eachAfter(function(ue){for(var le=+ie(ue.data)||0,de=ue.children,ve=de&&de.length;--ve>=0;)le+=de[ve].value;ue.value=le})},sort:function(ie){return this.eachBefore(function(ue){ue.children&&ue.children.sort(ie)})},path:function(ie){for(var ue=this,le=function(_e,be){if(_e===be)return _e;var Te=_e.ancestors(),he=be.ancestors(),me=null;for(_e=Te.pop(),be=he.pop();_e===be;)me=_e,_e=Te.pop(),be=he.pop();return me}(ue,ie),de=[ue];ue!==le;)de.push(ue=ue.parent);for(var ve=de.length;ie!==le;)de.splice(ve,0,ie),ie=ie.parent;return de},ancestors:function(){for(var ie=this,ue=[ie];ie=ie.parent;)ue.push(ie);return ue},descendants:function(){var ie=[];return this.each(function(ue){ie.push(ue)}),ie},leaves:function(){var ie=[];return this.eachBefore(function(ue){ue.children||ie.push(ue)}),ie},links:function(){var ie=this,ue=[];return ie.each(function(le){le!==ie&&ue.push({source:le.parent,target:le})}),ue},copy:function(){return n(this).eachBefore(a)}};var s=Array.prototype.slice;function i(ie){for(var ue,le,de=0,ve=(ie=function(be){for(var Te,he,me=be.length;me;)he=Math.random()*me--|0,Te=be[me],be[me]=be[he],be[he]=Te;return be}(s.call(ie))).length,_e=[];de<ve;)ue=ie[de],le&&h(le,ue)?++de:(le=d(_e=l(_e,ue)),de=0);return le}function l(ie,ue){var le,de;if(m(ue,ie))return[ue];for(le=0;le<ie.length;++le)if(c(ue,ie[le])&&m(o(ie[le],ue),ie))return[ie[le],ue];for(le=0;le<ie.length-1;++le)for(de=le+1;de<ie.length;++de)if(c(o(ie[le],ie[de]),ue)&&c(o(ie[le],ue),ie[de])&&c(o(ie[de],ue),ie[le])&&m(b(ie[le],ie[de],ue),ie))return[ie[le],ie[de],ue];throw new Error}function c(ie,ue){var le=ie.r-ue.r,de=ue.x-ie.x,ve=ue.y-ie.y;return le<0||le*le<de*de+ve*ve}function h(ie,ue){var le=ie.r-ue.r+1e-6,de=ue.x-ie.x,ve=ue.y-ie.y;return le>0&&le*le>de*de+ve*ve}function m(ie,ue){for(var le=0;le<ue.length;++le)if(!h(ie,ue[le]))return!1;return!0}function d(ie){switch(ie.length){case 1:return{x:(ue=ie[0]).x,y:ue.y,r:ue.r};case 2:return o(ie[0],ie[1]);case 3:return b(ie[0],ie[1],ie[2])}var ue}function o(ie,ue){var le=ie.x,de=ie.y,ve=ie.r,_e=ue.x,be=ue.y,Te=ue.r,he=_e-le,me=be-de,Ae=Te-ve,we=Math.sqrt(he*he+me*me);return{x:(le+_e+he/we*Ae)/2,y:(de+be+me/we*Ae)/2,r:(we+ve+Te)/2}}function b(ie,ue,le){var de=ie.x,ve=ie.y,_e=ie.r,be=ue.x,Te=ue.y,he=ue.r,me=le.x,Ae=le.y,we=le.r,Se=de-be,Pe=de-me,ze=ve-Te,He=ve-Ae,tt=he-_e,Oe=we-_e,Be=de*de+ve*ve-_e*_e,Je=Be-be*be-Te*Te+he*he,Ye=Be-me*me-Ae*Ae+we*we,nt=Pe*ze-Se*He,ft=(ze*Ye-He*Je)/(2*nt)-de,dt=(He*tt-ze*Oe)/nt,Rt=(Pe*Je-Se*Ye)/(2*nt)-ve,Et=(Se*Oe-Pe*tt)/nt,at=dt*dt+Et*Et-1,rt=2*(_e+ft*dt+Rt*Et),St=ft*ft+Rt*Rt-_e*_e,Xt=-(at?(rt+Math.sqrt(rt*rt-4*at*St))/(2*at):St/rt);return{x:de+ft+dt*Xt,y:ve+Rt+Et*Xt,r:Xt}}function g(ie,ue,le){var de,ve,_e,be,Te=ie.x-ue.x,he=ie.y-ue.y,me=Te*Te+he*he;me?(ve=ue.r+le.r,be=ie.r+le.r,(ve*=ve)>(be*=be)?(de=(me+be-ve)/(2*me),_e=Math.sqrt(Math.max(0,be/me-de*de)),le.x=ie.x-de*Te-_e*he,le.y=ie.y-de*he+_e*Te):(de=(me+ve-be)/(2*me),_e=Math.sqrt(Math.max(0,ve/me-de*de)),le.x=ue.x+de*Te-_e*he,le.y=ue.y+de*he+_e*Te)):(le.x=ue.x+le.r,le.y=ue.y)}function w(ie,ue){var le=ie.r+ue.r-1e-6,de=ue.x-ie.x,ve=ue.y-ie.y;return le>0&&le*le>de*de+ve*ve}function _(ie){var ue=ie._,le=ie.next._,de=ue.r+le.r,ve=(ue.x*le.r+le.x*ue.r)/de,_e=(ue.y*le.r+le.y*ue.r)/de;return ve*ve+_e*_e}function A(ie){this._=ie,this.next=null,this.previous=null}function T(ie){if(!(ve=ie.length))return 0;var ue,le,de,ve,_e,be,Te,he,me,Ae,we;if((ue=ie[0]).x=0,ue.y=0,!(ve>1))return ue.r;if(ue.x=-(le=ie[1]).r,le.x=ue.r,le.y=0,!(ve>2))return ue.r+le.r;g(le,ue,de=ie[2]),ue=new A(ue),le=new A(le),de=new A(de),ue.next=de.previous=le,le.next=ue.previous=de,de.next=le.previous=ue;e:for(Te=3;Te<ve;++Te){g(ue._,le._,de=ie[Te]),de=new A(de),he=le.next,me=ue.previous,Ae=le._.r,we=ue._.r;do{if(Ae<=we){if(w(he._,de._)){ue.next=le=he,le.previous=ue,--Te;continue e}Ae+=he._.r,he=he.next}else{if(w(me._,de._)){(ue=me).next=le,le.previous=ue,--Te;continue e}we+=me._.r,me=me.previous}}while(he!==me.next);for(de.previous=ue,de.next=le,ue.next=le.previous=le=de,_e=_(ue);(de=de.next)!==le;)(be=_(de))<_e&&(ue=de,_e=be);le=ue.next}for(ue=[le._],de=le;(de=de.next)!==le;)ue.push(de._);for(de=i(ue),Te=0;Te<ve;++Te)(ue=ie[Te]).x-=de.x,ue.y-=de.y;return de.r}function E(ie){return null==ie?null:k(ie)}function k(ie){if("function"!=typeof ie)throw new Error;return ie}function O(){return 0}function D(ie){return function(){return ie}}function S(ie){return Math.sqrt(ie.value)}function C(ie){return function(ue){ue.children||(ue.r=Math.max(0,+ie(ue)||0))}}function z(ie,ue){return function(le){if(de=le.children){var de,ve,_e,be=de.length,Te=ie(le)*ue||0;if(Te)for(ve=0;ve<be;++ve)de[ve].r+=Te;if(_e=T(de),Te)for(ve=0;ve<be;++ve)de[ve].r-=Te;le.r=_e+Te}}}function B(ie){return function(ue){var le=ue.parent;ue.r*=ie,le&&(ue.x=le.x+ie*ue.x,ue.y=le.y+ie*ue.y)}}function U(ie){ie.x0=Math.round(ie.x0),ie.y0=Math.round(ie.y0),ie.x1=Math.round(ie.x1),ie.y1=Math.round(ie.y1)}function G(ie,ue,le,de,ve){for(var _e,be=ie.children,Te=-1,he=be.length,me=ie.value&&(de-ue)/ie.value;++Te<he;)(_e=be[Te]).y0=le,_e.y1=ve,_e.x0=ue,_e.x1=ue+=_e.value*me}var X={depth:-1},Z={};function q(ie){return ie.id}function W(ie){return ie.parentId}function te(ie,ue){return ie.parent===ue.parent?1:2}function R(ie){var ue=ie.children;return ue?ue[0]:ie.t}function N(ie){var ue=ie.children;return ue?ue[ue.length-1]:ie.t}function V(ie,ue,le){var de=le/(ue.i-ie.i);ue.c-=de,ue.s+=le,ie.c+=de,ue.z+=le,ue.m+=le}function ee(ie,ue,le){return ie.a.parent===ue.parent?ie.a:le}function j(ie,ue){this._=ie,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=ue}function J(ie,ue,le,de,ve){for(var _e,be=ie.children,Te=-1,he=be.length,me=ie.value&&(ve-le)/ie.value;++Te<he;)(_e=be[Te]).x0=ue,_e.x1=de,_e.y0=le,_e.y1=le+=_e.value*me}j.prototype=Object.create(f.prototype);var $=(1+Math.sqrt(5))/2;function re(ie,ue,le,de,ve,_e){for(var be,Te,he,me,Ae,we,Se,Pe,ze,He,tt,Oe=[],Be=ue.children,Je=0,Ye=0,nt=Be.length,ft=ue.value;Je<nt;){he=ve-le,me=_e-de;do{Ae=Be[Ye++].value}while(!Ae&&Ye<nt);for(we=Se=Ae,tt=Ae*Ae*(He=Math.max(me/he,he/me)/(ft*ie)),ze=Math.max(Se/tt,tt/we);Ye<nt;++Ye){if(Ae+=Te=Be[Ye].value,Te<we&&(we=Te),Te>Se&&(Se=Te),tt=Ae*Ae*He,(Pe=Math.max(Se/tt,tt/we))>ze){Ae-=Te;break}ze=Pe}Oe.push(be={value:Ae,dice:he<me,children:Be.slice(Je,Ye)}),be.dice?G(be,le,de,ve,ft?de+=me*Ae/ft:_e):J(be,le,de,ft?le+=he*Ae/ft:ve,_e),ft-=Ae,Je=Ye}return Oe}var ne=function ie(ue){function le(de,ve,_e,be,Te){re(ue,de,ve,_e,be,Te)}return le.ratio=function(de){return ie((de=+de)>1?de:1)},le}($),se=function ie(ue){function le(de,ve,_e,be,Te){if((he=de._squarify)&&he.ratio===ue)for(var he,me,Ae,we,Se,Pe=-1,ze=he.length,He=de.value;++Pe<ze;){for(Ae=(me=he[Pe]).children,we=me.value=0,Se=Ae.length;we<Se;++we)me.value+=Ae[we].value;me.dice?G(me,ve,_e,be,_e+=(Te-_e)*me.value/He):J(me,ve,_e,ve+=(be-ve)*me.value/He,Te),He-=me.value}else de._squarify=he=re(ue,de,ve,_e,be,Te),he.ratio=ue}return le.ratio=function(de){return ie((de=+de)>1?de:1)},le}($);p.cluster=function(){var ie=v,ue=1,le=1,de=!1;function ve(_e){var be,Te=0;_e.eachAfter(function(Se){var ze,Pe=Se.children;Pe?(Se.x=(ze=Pe).reduce(u,0)/ze.length,Se.y=function(ze){return 1+ze.reduce(y,0)}(Pe)):(Se.x=be?Te+=ie(Se,be):0,Se.y=0,be=Se)});var he=function(Se){for(var Pe;Pe=Se.children;)Se=Pe[0];return Se}(_e),me=function(Se){for(var Pe;Pe=Se.children;)Se=Pe[Pe.length-1];return Se}(_e),Ae=he.x-ie(he,me)/2,we=me.x+ie(me,he)/2;return _e.eachAfter(de?function(Se){Se.x=(Se.x-_e.x)*ue,Se.y=(_e.y-Se.y)*le}:function(Se){Se.x=(Se.x-Ae)/(we-Ae)*ue,Se.y=(1-(_e.y?Se.y/_e.y:1))*le})}return ve.separation=function(_e){return arguments.length?(ie=_e,ve):ie},ve.size=function(_e){return arguments.length?(de=!1,ue=+_e[0],le=+_e[1],ve):de?null:[ue,le]},ve.nodeSize=function(_e){return arguments.length?(de=!0,ue=+_e[0],le=+_e[1],ve):de?[ue,le]:null},ve},p.hierarchy=n,p.pack=function(){var ie=null,ue=1,le=1,de=O;function ve(_e){return _e.x=ue/2,_e.y=le/2,ie?_e.eachBefore(C(ie)).eachAfter(z(de,.5)).eachBefore(B(1)):_e.eachBefore(C(S)).eachAfter(z(O,1)).eachAfter(z(de,_e.r/Math.min(ue,le))).eachBefore(B(Math.min(ue,le)/(2*_e.r))),_e}return ve.radius=function(_e){return arguments.length?(ie=E(_e),ve):ie},ve.size=function(_e){return arguments.length?(ue=+_e[0],le=+_e[1],ve):[ue,le]},ve.padding=function(_e){return arguments.length?(de="function"==typeof _e?_e:D(+_e),ve):de},ve},p.packEnclose=i,p.packSiblings=function(ie){return T(ie),ie},p.partition=function(){var ie=1,ue=1,le=0,de=!1;function ve(_e){var Te,he,be=_e.height+1;return _e.x0=_e.y0=le,_e.x1=ie,_e.y1=ue/be,_e.eachBefore((Te=ue,he=be,function(me){me.children&&G(me,me.x0,Te*(me.depth+1)/he,me.x1,Te*(me.depth+2)/he);var Ae=me.x0,we=me.y0,Se=me.x1-le,Pe=me.y1-le;Se<Ae&&(Ae=Se=(Ae+Se)/2),Pe<we&&(we=Pe=(we+Pe)/2),me.x0=Ae,me.y0=we,me.x1=Se,me.y1=Pe})),de&&_e.eachBefore(U),_e}return ve.round=function(_e){return arguments.length?(de=!!_e,ve):de},ve.size=function(_e){return arguments.length?(ie=+_e[0],ue=+_e[1],ve):[ie,ue]},ve.padding=function(_e){return arguments.length?(le=+_e,ve):le},ve},p.stratify=function(){var ie=q,ue=W;function le(de){var ve,_e,be,Te,he,me,Ae,we=de.length,Se=new Array(we),Pe={};for(_e=0;_e<we;++_e)he=Se[_e]=new f(ve=de[_e]),null!=(me=ie(ve,_e,de))&&(me+="")&&(Pe[Ae="$"+(he.id=me)]=Ae in Pe?Z:he);for(_e=0;_e<we;++_e)if(he=Se[_e],null!=(me=ue(de[_e],_e,de))&&(me+="")){if(!(Te=Pe["$"+me]))throw new Error("missing: "+me);if(Te===Z)throw new Error("ambiguous: "+me);Te.children?Te.children.push(he):Te.children=[he],he.parent=Te}else{if(be)throw new Error("multiple roots");be=he}if(!be)throw new Error("no root");if(be.parent=X,be.eachBefore(function(ze){ze.depth=ze.parent.depth+1,--we}).eachBefore(r),be.parent=null,we>0)throw new Error("cycle");return be}return le.id=function(de){return arguments.length?(ie=k(de),le):ie},le.parentId=function(de){return arguments.length?(ue=k(de),le):ue},le},p.tree=function(){var ie=te,ue=1,le=1,de=null;function ve(he){var me=function(Oe){for(var Be,Je,Ye,nt,ft,dt=new j(Oe,0),Rt=[dt];Be=Rt.pop();)if(Ye=Be._.children)for(Be.children=new Array(ft=Ye.length),nt=ft-1;nt>=0;--nt)Rt.push(Je=Be.children[nt]=new j(Ye[nt],nt)),Je.parent=Be;return(dt.parent=new j(null,0)).children=[dt],dt}(he);if(me.eachAfter(_e),me.parent.m=-me.z,me.eachBefore(be),de)he.eachBefore(Te);else{var Ae=he,we=he,Se=he;he.eachBefore(function(Oe){Oe.x<Ae.x&&(Ae=Oe),Oe.x>we.x&&(we=Oe),Oe.depth>Se.depth&&(Se=Oe)});var Pe=Ae===we?1:ie(Ae,we)/2,ze=Pe-Ae.x,He=ue/(we.x+Pe+ze),tt=le/(Se.depth||1);he.eachBefore(function(Oe){Oe.x=(Oe.x+ze)*He,Oe.y=Oe.depth*tt})}return he}function _e(he){var me=he.children,Ae=he.parent.children,we=he.i?Ae[he.i-1]:null;if(me){!function(Pe){for(var ze,He=0,tt=0,Oe=Pe.children,Be=Oe.length;--Be>=0;)(ze=Oe[Be]).z+=He,ze.m+=He,He+=ze.s+(tt+=ze.c)}(he);var Se=(me[0].z+me[me.length-1].z)/2;we?(he.z=we.z+ie(he._,we._),he.m=he.z-Se):he.z=Se}else we&&(he.z=we.z+ie(he._,we._));he.parent.A=function(Pe,ze,He){if(ze){for(var tt,Oe=Pe,Be=Pe,Je=ze,Ye=Oe.parent.children[0],nt=Oe.m,ft=Be.m,dt=Je.m,Rt=Ye.m;Je=N(Je),Oe=R(Oe),Je&&Oe;)Ye=R(Ye),(Be=N(Be)).a=Pe,(tt=Je.z+dt-Oe.z-nt+ie(Je._,Oe._))>0&&(V(ee(Je,Pe,He),Pe,tt),nt+=tt,ft+=tt),dt+=Je.m,nt+=Oe.m,Rt+=Ye.m,ft+=Be.m;Je&&!N(Be)&&(Be.t=Je,Be.m+=dt-ft),Oe&&!R(Ye)&&(Ye.t=Oe,Ye.m+=nt-Rt,He=Pe)}return He}(he,we,he.parent.A||Ae[0])}function be(he){he._.x=he.z+he.parent.m,he.m+=he.parent.m}function Te(he){he.x*=ue,he.y=he.depth*le}return ve.separation=function(he){return arguments.length?(ie=he,ve):ie},ve.size=function(he){return arguments.length?(de=!1,ue=+he[0],le=+he[1],ve):de?null:[ue,le]},ve.nodeSize=function(he){return arguments.length?(de=!0,ue=+he[0],le=+he[1],ve):de?[ue,le]:null},ve},p.treemap=function(){var ie=ne,ue=!1,le=1,de=1,ve=[0],_e=O,be=O,Te=O,he=O,me=O;function Ae(Se){return Se.x0=Se.y0=0,Se.x1=le,Se.y1=de,Se.eachBefore(we),ve=[0],ue&&Se.eachBefore(U),Se}function we(Se){var Pe=ve[Se.depth],ze=Se.x0+Pe,He=Se.y0+Pe,tt=Se.x1-Pe,Oe=Se.y1-Pe;tt<ze&&(ze=tt=(ze+tt)/2),Oe<He&&(He=Oe=(He+Oe)/2),Se.x0=ze,Se.y0=He,Se.x1=tt,Se.y1=Oe,Se.children&&(Pe=ve[Se.depth+1]=_e(Se)/2,ze+=me(Se)-Pe,He+=be(Se)-Pe,(tt-=Te(Se)-Pe)<ze&&(ze=tt=(ze+tt)/2),(Oe-=he(Se)-Pe)<He&&(He=Oe=(He+Oe)/2),ie(Se,ze,He,tt,Oe))}return Ae.round=function(Se){return arguments.length?(ue=!!Se,Ae):ue},Ae.size=function(Se){return arguments.length?(le=+Se[0],de=+Se[1],Ae):[le,de]},Ae.tile=function(Se){return arguments.length?(ie=k(Se),Ae):ie},Ae.padding=function(Se){return arguments.length?Ae.paddingInner(Se).paddingOuter(Se):Ae.paddingInner()},Ae.paddingInner=function(Se){return arguments.length?(_e="function"==typeof Se?Se:D(+Se),Ae):_e},Ae.paddingOuter=function(Se){return arguments.length?Ae.paddingTop(Se).paddingRight(Se).paddingBottom(Se).paddingLeft(Se):Ae.paddingTop()},Ae.paddingTop=function(Se){return arguments.length?(be="function"==typeof Se?Se:D(+Se),Ae):be},Ae.paddingRight=function(Se){return arguments.length?(Te="function"==typeof Se?Se:D(+Se),Ae):Te},Ae.paddingBottom=function(Se){return arguments.length?(he="function"==typeof Se?Se:D(+Se),Ae):he},Ae.paddingLeft=function(Se){return arguments.length?(me="function"==typeof Se?Se:D(+Se),Ae):me},Ae},p.treemapBinary=function(ie,ue,le,de,ve){var _e,be,Te=ie.children,he=Te.length,me=new Array(he+1);for(me[0]=be=_e=0;_e<he;++_e)me[_e+1]=be+=Te[_e].value;!function Ae(we,Se,Pe,ze,He,tt,Oe){if(we>=Se-1){var Be=Te[we];return Be.x0=ze,Be.y0=He,Be.x1=tt,void(Be.y1=Oe)}for(var Je=me[we],Ye=Pe/2+Je,nt=we+1,ft=Se-1;nt<ft;){var dt=nt+ft>>>1;me[dt]<Ye?nt=dt+1:ft=dt}Ye-me[nt-1]<me[nt]-Ye&&we+1<nt&&--nt;var Rt=me[nt]-Je,Et=Pe-Rt;if(tt-ze>Oe-He){var at=(ze*Et+tt*Rt)/Pe;Ae(we,nt,Rt,ze,He,at,Oe),Ae(nt,Se,Et,at,He,tt,Oe)}else{var rt=(He*Et+Oe*Rt)/Pe;Ae(we,nt,Rt,ze,He,tt,rt),Ae(nt,Se,Et,ze,rt,tt,Oe)}}(0,he,ie.value,ue,le,de,ve)},p.treemapDice=G,p.treemapResquarify=se,p.treemapSlice=J,p.treemapSliceDice=function(ie,ue,le,de,ve){(1&ie.depth?J:G)(ie,ue,le,de,ve)},p.treemapSquarify=ne,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof K&&void 0!==Q?K:(p=p||self).d3=p.d3||{})},{}],116:[function(x,Q,K){var p,v;p=this,v=function(p,v){"use strict";function u($,re,ne,se,ie){var ue=$*$,le=ue*$;return((1-3*$+3*ue-le)*re+(4-6*ue+3*le)*ne+(1+3*$+3*ue-3*le)*se+le*ie)/6}function y($){var re=$.length-1;return function(ne){var se=ne<=0?ne=0:ne>=1?(ne=1,re-1):Math.floor(ne*re),ie=$[se],ue=$[se+1];return u((ne-se/re)*re,se>0?$[se-1]:2*ie-ue,ie,ue,se<re-1?$[se+2]:2*ue-ie)}}function e($){var re=$.length;return function(ne){var se=Math.floor(((ne%=1)<0?++ne:ne)*re);return u((ne-se/re)*re,$[(se+re-1)%re],$[se%re],$[(se+1)%re],$[(se+2)%re])}}function n($){return function(){return $}}function t($,re){return function(ne){return $+ne*re}}function a($,re){var ne=re-$;return ne?t($,ne>180||ne<-180?ne-360*Math.round(ne/360):ne):n(isNaN($)?re:$)}function f($,re){var ne=re-$;return ne?t($,ne):n(isNaN($)?re:$)}var s=function $(re){var ne=function($){return 1==($=+$)?f:function(re,ne){return ne-re?(se=re,ie=ne,ue=$,se=Math.pow(se,ue),ie=Math.pow(ie,ue)-se,ue=1/ue,function(le){return Math.pow(se+le*ie,ue)}):n(isNaN(re)?ne:re);var se,ie,ue}}(re);function se(ie,ue){var le=ne((ie=v.rgb(ie)).r,(ue=v.rgb(ue)).r),de=ne(ie.g,ue.g),ve=ne(ie.b,ue.b),_e=f(ie.opacity,ue.opacity);return function(be){return ie.r=le(be),ie.g=de(be),ie.b=ve(be),ie.opacity=_e(be),ie+""}}return se.gamma=$,se}(1);function i($){return function(re){var ne,se,ie=re.length,ue=new Array(ie),le=new Array(ie),de=new Array(ie);for(ne=0;ne<ie;++ne)se=v.rgb(re[ne]),ue[ne]=se.r||0,le[ne]=se.g||0,de[ne]=se.b||0;return ue=$(ue),le=$(le),de=$(de),se.opacity=1,function(ve){return se.r=ue(ve),se.g=le(ve),se.b=de(ve),se+""}}}var l=i(y),c=i(e);function h($,re){re||(re=[]);var ne,se=$?Math.min(re.length,$.length):0,ie=re.slice();return function(ue){for(ne=0;ne<se;++ne)ie[ne]=$[ne]*(1-ue)+re[ne]*ue;return ie}}function m($){return ArrayBuffer.isView($)&&!($ instanceof DataView)}function d($,re){var ne,se=re?re.length:0,ie=$?Math.min(se,$.length):0,ue=new Array(ie),le=new Array(se);for(ne=0;ne<ie;++ne)ue[ne]=T($[ne],re[ne]);for(;ne<se;++ne)le[ne]=re[ne];return function(de){for(ne=0;ne<ie;++ne)le[ne]=ue[ne](de);return le}}function o($,re){var ne=new Date;return $=+$,re=+re,function(se){return ne.setTime($*(1-se)+re*se),ne}}function b($,re){return $=+$,re=+re,function(ne){return $*(1-ne)+re*ne}}function g($,re){var ne,se={},ie={};for(ne in null!==$&&"object"==typeof $||($={}),null!==re&&"object"==typeof re||(re={}),re)ne in $?se[ne]=T($[ne],re[ne]):ie[ne]=re[ne];return function(ue){for(ne in se)ie[ne]=se[ne](ue);return ie}}var w=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(w.source,"g");function A($,re){var ne,se,ie,_e,ue=w.lastIndex=_.lastIndex=0,le=-1,de=[],ve=[];for($+="",re+="";(ne=w.exec($))&&(se=_.exec(re));)(ie=se.index)>ue&&(ie=re.slice(ue,ie),de[le]?de[le]+=ie:de[++le]=ie),(ne=ne[0])===(se=se[0])?de[le]?de[le]+=se:de[++le]=se:(de[++le]=null,ve.push({i:le,x:b(ne,se)})),ue=_.lastIndex;return ue<re.length&&(ie=re.slice(ue),de[le]?de[le]+=ie:de[++le]=ie),de.length<2?ve[0]?(_e=ve[0].x,function(be){return _e(be)+""}):function(_e){return function(){return _e}}(re):(re=ve.length,function(_e){for(var be,Te=0;Te<re;++Te)de[(be=ve[Te]).i]=be.x(_e);return de.join("")})}function T($,re){var ne,se=typeof re;return null==re||"boolean"===se?n(re):("number"===se?b:"string"===se?(ne=v.color(re))?(re=ne,s):A:re instanceof v.color?s:re instanceof Date?o:m(re)?h:Array.isArray(re)?d:"function"!=typeof re.valueOf&&"function"!=typeof re.toString||isNaN(re)?g:b)($,re)}var E,k,O,D,S=180/Math.PI,C={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function z($,re,ne,se,ie,ue){var le,de,ve;return(le=Math.sqrt($*$+re*re))&&($/=le,re/=le),(ve=$*ne+re*se)&&(ne-=$*ve,se-=re*ve),(de=Math.sqrt(ne*ne+se*se))&&(ne/=de,se/=de,ve/=de),$*se<re*ne&&($=-$,re=-re,ve=-ve,le=-le),{translateX:ie,translateY:ue,rotate:Math.atan2(re,$)*S,skewX:Math.atan(ve)*S,scaleX:le,scaleY:de}}function B($,re,ne,se){function ie(ue){return ue.length?ue.pop()+" ":""}return function(ue,le){var _e,be,Te,de=[],ve=[];return ue=$(ue),le=$(le),function(_e,be,Te,he,me,Ae){if(_e!==Te||be!==he){var we=me.push("translate(",null,re,null,ne);Ae.push({i:we-4,x:b(_e,Te)},{i:we-2,x:b(be,he)})}else(Te||he)&&me.push("translate("+Te+re+he+ne)}(ue.translateX,ue.translateY,le.translateX,le.translateY,de,ve),Te=de,(_e=ue.rotate)!==(be=le.rotate)?(_e-be>180?be+=360:be-_e>180&&(_e+=360),ve.push({i:Te.push(ie(Te)+"rotate(",null,se)-2,x:b(_e,be)})):be&&Te.push(ie(Te)+"rotate("+be+se),function(_e,be,Te,he){_e!==be?he.push({i:Te.push(ie(Te)+"skewX(",null,se)-2,x:b(_e,be)}):be&&Te.push(ie(Te)+"skewX("+be+se)}(ue.skewX,le.skewX,de,ve),function(_e,be,Te,he,me,Ae){if(_e!==Te||be!==he){var we=me.push(ie(me)+"scale(",null,",",null,")");Ae.push({i:we-4,x:b(_e,Te)},{i:we-2,x:b(be,he)})}else 1===Te&&1===he||me.push(ie(me)+"scale("+Te+","+he+")")}(ue.scaleX,ue.scaleY,le.scaleX,le.scaleY,de,ve),ue=le=null,function(_e){for(var be,Te=-1,he=ve.length;++Te<he;)de[(be=ve[Te]).i]=be.x(_e);return de.join("")}}}var U=B(function($){return"none"===$?C:(E||(E=document.createElement("DIV"),k=document.documentElement,O=document.defaultView),E.style.transform=$,$=O.getComputedStyle(k.appendChild(E),null).getPropertyValue("transform"),k.removeChild(E),z(+($=$.slice(7,-1).split(","))[0],+$[1],+$[2],+$[3],+$[4],+$[5]))},"px, ","px)","deg)"),G=B(function($){return null==$?C:(D||(D=document.createElementNS("http://www.w3.org/2000/svg","g")),D.setAttribute("transform",$),($=D.transform.baseVal.consolidate())?z(($=$.matrix).a,$.b,$.c,$.d,$.e,$.f):C)},", ",")",")"),X=Math.SQRT2;function Z($){return(($=Math.exp($))+1/$)/2}function q($){return function(re,ne){var se=$((re=v.hsl(re)).h,(ne=v.hsl(ne)).h),ie=f(re.s,ne.s),ue=f(re.l,ne.l),le=f(re.opacity,ne.opacity);return function(de){return re.h=se(de),re.s=ie(de),re.l=ue(de),re.opacity=le(de),re+""}}}var W=q(a),te=q(f);function R($){return function(re,ne){var se=$((re=v.hcl(re)).h,(ne=v.hcl(ne)).h),ie=f(re.c,ne.c),ue=f(re.l,ne.l),le=f(re.opacity,ne.opacity);return function(de){return re.h=se(de),re.c=ie(de),re.l=ue(de),re.opacity=le(de),re+""}}}var N=R(a),V=R(f);function ee($){return function re(ne){function se(ie,ue){var le=$((ie=v.cubehelix(ie)).h,(ue=v.cubehelix(ue)).h),de=f(ie.s,ue.s),ve=f(ie.l,ue.l),_e=f(ie.opacity,ue.opacity);return function(be){return ie.h=le(be),ie.s=de(be),ie.l=ve(Math.pow(be,ne)),ie.opacity=_e(be),ie+""}}return ne=+ne,se.gamma=re,se}(1)}var j=ee(a),J=ee(f);p.interpolate=T,p.interpolateArray=function($,re){return(m(re)?h:d)($,re)},p.interpolateBasis=y,p.interpolateBasisClosed=e,p.interpolateCubehelix=j,p.interpolateCubehelixLong=J,p.interpolateDate=o,p.interpolateDiscrete=function($){var re=$.length;return function(ne){return $[Math.max(0,Math.min(re-1,Math.floor(ne*re)))]}},p.interpolateHcl=N,p.interpolateHclLong=V,p.interpolateHsl=W,p.interpolateHslLong=te,p.interpolateHue=function($,re){var ne=a(+$,+re);return function(se){var ie=ne(se);return ie-360*Math.floor(ie/360)}},p.interpolateLab=function($,re){var ne=f(($=v.lab($)).l,(re=v.lab(re)).l),se=f($.a,re.a),ie=f($.b,re.b),ue=f($.opacity,re.opacity);return function(le){return $.l=ne(le),$.a=se(le),$.b=ie(le),$.opacity=ue(le),$+""}},p.interpolateNumber=b,p.interpolateNumberArray=h,p.interpolateObject=g,p.interpolateRgb=s,p.interpolateRgbBasis=l,p.interpolateRgbBasisClosed=c,p.interpolateRound=function($,re){return $=+$,re=+re,function(ne){return Math.round($*(1-ne)+re*ne)}},p.interpolateString=A,p.interpolateTransformCss=U,p.interpolateTransformSvg=G,p.interpolateZoom=function($,re){var ne,se,ie=$[0],ue=$[1],le=$[2],_e=re[2],be=re[0]-ie,Te=re[1]-ue,he=be*be+Te*Te;if(he<1e-12)se=Math.log(_e/le)/X,ne=function(ze){return[ie+ze*be,ue+ze*Te,le*Math.exp(X*ze*se)]};else{var me=Math.sqrt(he),Ae=(_e*_e-le*le+4*he)/(2*le*2*me),we=(_e*_e-le*le-4*he)/(2*_e*2*me),Se=Math.log(Math.sqrt(Ae*Ae+1)-Ae),Pe=Math.log(Math.sqrt(we*we+1)-we);se=(Pe-Se)/X,ne=function(ze){var He,Je,tt=ze*se,Oe=Z(Se),Be=le/(2*me)*(Oe*(He=X*tt+Se,((He=Math.exp(2*He))-1)/(He+1))-(Je=Se,((Je=Math.exp(Je))-1/Je)/2));return[ie+Be*be,ue+Be*Te,le*Oe/Z(X*tt+Se)]}}return ne.duration=1e3*se,ne},p.piecewise=function($,re){for(var ne=0,se=re.length-1,ie=re[0],ue=new Array(se<0?0:se);ne<se;)ue[ne]=$(ie,ie=re[++ne]);return function(le){var de=Math.max(0,Math.min(se-1,Math.floor(le*=se)));return ue[de](le-de)}},p.quantize=function($,re){for(var ne=new Array(re),se=0;se<re;++se)ne[se]=$(se/(re-1));return ne},Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,x("d3-color")):v((p=p||self).d3=p.d3||{},p.d3)},{"d3-color":109}],117:[function(x,Q,K){var p;p=this,function(p){"use strict";var v=Math.PI,u=2*v,y=u-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new e}e.prototype=n.prototype={constructor:e,moveTo:function(t,a){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+a)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,a){this._+="L"+(this._x1=+t)+","+(this._y1=+a)},quadraticCurveTo:function(t,a,r,f){this._+="Q"+ +t+","+ +a+","+(this._x1=+r)+","+(this._y1=+f)},bezierCurveTo:function(t,a,r,f,s,i){this._+="C"+ +t+","+ +a+","+ +r+","+ +f+","+(this._x1=+s)+","+(this._y1=+i)},arcTo:function(t,a,r,f,s){var i=this._x1,l=this._y1,c=(r=+r)-(t=+t),h=(f=+f)-(a=+a),m=i-t,d=l-a,o=m*m+d*d;if((s=+s)<0)throw new Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=a);else if(o>1e-6)if(Math.abs(d*c-h*m)>1e-6&&s){var b=r-i,g=f-l,w=c*c+h*h,_=b*b+g*g,A=Math.sqrt(w),T=Math.sqrt(o),E=s*Math.tan((v-Math.acos((w+o-_)/(2*A*T)))/2),k=E/T,O=E/A;Math.abs(k-1)>1e-6&&(this._+="L"+(t+k*m)+","+(a+k*d)),this._+="A"+s+","+s+",0,0,"+ +(d*b>m*g)+","+(this._x1=t+O*c)+","+(this._y1=a+O*h)}else this._+="L"+(this._x1=t)+","+(this._y1=a)},arc:function(t,a,r,f,s,i){t=+t,a=+a,i=!!i;var l=(r=+r)*Math.cos(f),c=r*Math.sin(f),h=t+l,m=a+c,d=1^i,o=i?f-s:s-f;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+h+","+m:(Math.abs(this._x1-h)>1e-6||Math.abs(this._y1-m)>1e-6)&&(this._+="L"+h+","+m),r&&(o<0&&(o=o%u+u),o>y?this._+="A"+r+","+r+",0,1,"+d+","+(t-l)+","+(a-c)+"A"+r+","+r+",0,1,"+d+","+(this._x1=h)+","+(this._y1=m):o>1e-6&&(this._+="A"+r+","+r+",0,"+ +(o>=v)+","+d+","+(this._x1=t+r*Math.cos(s))+","+(this._y1=a+r*Math.sin(s))))},rect:function(t,a,r,f){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+a)+"h"+ +r+"v"+ +f+"h"+-r+"Z"},toString:function(){return this._}},p.path=n,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof K&&void 0!==Q?K:(p=p||self).d3=p.d3||{})},{}],118:[function(x,Q,K){var p;p=this,function(p){"use strict";function v(f,s,i,l){if(isNaN(s)||isNaN(i))return f;var c,h,m,d,o,b,g,w,_,A=f._root,T={data:l},E=f._x0,k=f._y0,O=f._x1,D=f._y1;if(!A)return f._root=T,f;for(;A.length;)if((b=s>=(h=(E+O)/2))?E=h:O=h,(g=i>=(m=(k+D)/2))?k=m:D=m,c=A,!(A=A[w=g<<1|b]))return c[w]=T,f;if(d=+f._x.call(null,A.data),o=+f._y.call(null,A.data),s===d&&i===o)return T.next=A,c?c[w]=T:f._root=T,f;do{c=c?c[w]=new Array(4):f._root=new Array(4),(b=s>=(h=(E+O)/2))?E=h:O=h,(g=i>=(m=(k+D)/2))?k=m:D=m}while((w=g<<1|b)==(_=(o>=m)<<1|d>=h));return c[_]=A,c[w]=T,f}function u(f,s,i,l,c){this.node=f,this.x0=s,this.y0=i,this.x1=l,this.y1=c}function y(f){return f[0]}function e(f){return f[1]}function n(f,s,i){var l=new t(null==s?y:s,null==i?e:i,NaN,NaN,NaN,NaN);return null==f?l:l.addAll(f)}function t(f,s,i,l,c,h){this._x=f,this._y=s,this._x0=i,this._y0=l,this._x1=c,this._y1=h,this._root=void 0}function a(f){for(var s={data:f.data},i=s;f=f.next;)i=i.next={data:f.data};return s}var r=n.prototype=t.prototype;r.copy=function(){var f,s,i=new t(this._x,this._y,this._x0,this._y0,this._x1,this._y1),l=this._root;if(!l)return i;if(!l.length)return i._root=a(l),i;for(f=[{source:l,target:i._root=new Array(4)}];l=f.pop();)for(var c=0;c<4;++c)(s=l.source[c])&&(s.length?f.push({source:s,target:l.target[c]=new Array(4)}):l.target[c]=a(s));return i},r.add=function(f){var s=+this._x.call(null,f),i=+this._y.call(null,f);return v(this.cover(s,i),s,i,f)},r.addAll=function(f){var s,i,l,c,h=f.length,m=new Array(h),d=new Array(h),o=1/0,b=1/0,g=-1/0,w=-1/0;for(i=0;i<h;++i)isNaN(l=+this._x.call(null,s=f[i]))||isNaN(c=+this._y.call(null,s))||(m[i]=l,d[i]=c,l<o&&(o=l),l>g&&(g=l),c<b&&(b=c),c>w&&(w=c));if(o>g||b>w)return this;for(this.cover(o,b).cover(g,w),i=0;i<h;++i)v(this,m[i],d[i],f[i]);return this},r.cover=function(f,s){if(isNaN(f=+f)||isNaN(s=+s))return this;var i=this._x0,l=this._y0,c=this._x1,h=this._y1;if(isNaN(i))c=(i=Math.floor(f))+1,h=(l=Math.floor(s))+1;else{for(var m,d,o=c-i,b=this._root;i>f||f>=c||l>s||s>=h;)switch(d=(s<l)<<1|f<i,(m=new Array(4))[d]=b,b=m,o*=2,d){case 0:c=i+o,h=l+o;break;case 1:i=c-o,h=l+o;break;case 2:c=i+o,l=h-o;break;case 3:i=c-o,l=h-o}this._root&&this._root.length&&(this._root=b)}return this._x0=i,this._y0=l,this._x1=c,this._y1=h,this},r.data=function(){var f=[];return this.visit(function(s){if(!s.length)do{f.push(s.data)}while(s=s.next)}),f},r.extent=function(f){return arguments.length?this.cover(+f[0][0],+f[0][1]).cover(+f[1][0],+f[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},r.find=function(f,s,i){var l,c,h,m,d,o,b,g=this._x0,w=this._y0,_=this._x1,A=this._y1,T=[],E=this._root;for(E&&T.push(new u(E,g,w,_,A)),null==i?i=1/0:(g=f-i,w=s-i,_=f+i,A=s+i,i*=i);o=T.pop();)if(!(!(E=o.node)||(c=o.x0)>_||(h=o.y0)>A||(m=o.x1)<g||(d=o.y1)<w))if(E.length){var k=(c+m)/2,O=(h+d)/2;T.push(new u(E[3],k,O,m,d),new u(E[2],c,O,k,d),new u(E[1],k,h,m,O),new u(E[0],c,h,k,O)),(b=(s>=O)<<1|f>=k)&&(o=T[T.length-1],T[T.length-1]=T[T.length-1-b],T[T.length-1-b]=o)}else{var D=f-+this._x.call(null,E.data),S=s-+this._y.call(null,E.data),C=D*D+S*S;if(C<i){var z=Math.sqrt(i=C);g=f-z,w=s-z,_=f+z,A=s+z,l=E.data}}return l},r.remove=function(f){if(isNaN(h=+this._x.call(null,f))||isNaN(m=+this._y.call(null,f)))return this;var s,i,l,c,h,m,d,o,b,g,w,_,A=this._root,T=this._x0,E=this._y0,k=this._x1,O=this._y1;if(!A)return this;if(A.length)for(;;){if((b=h>=(d=(T+k)/2))?T=d:k=d,(g=m>=(o=(E+O)/2))?E=o:O=o,s=A,!(A=A[w=g<<1|b]))return this;if(!A.length)break;(s[w+1&3]||s[w+2&3]||s[w+3&3])&&(i=s,_=w)}for(;A.data!==f;)if(l=A,!(A=A.next))return this;return(c=A.next)&&delete A.next,l?(c?l.next=c:delete l.next,this):s?(c?s[w]=c:delete s[w],(A=s[0]||s[1]||s[2]||s[3])&&A===(s[3]||s[2]||s[1]||s[0])&&!A.length&&(i?i[_]=A:this._root=A),this):(this._root=c,this)},r.removeAll=function(f){for(var s=0,i=f.length;s<i;++s)this.remove(f[s]);return this},r.root=function(){return this._root},r.size=function(){var f=0;return this.visit(function(s){if(!s.length)do{++f}while(s=s.next)}),f},r.visit=function(f){var s,i,l,c,h,m,d=[],o=this._root;for(o&&d.push(new u(o,this._x0,this._y0,this._x1,this._y1));s=d.pop();)if(!f(o=s.node,l=s.x0,c=s.y0,h=s.x1,m=s.y1)&&o.length){var b=(l+h)/2,g=(c+m)/2;(i=o[3])&&d.push(new u(i,b,g,h,m)),(i=o[2])&&d.push(new u(i,l,g,b,m)),(i=o[1])&&d.push(new u(i,b,c,h,g)),(i=o[0])&&d.push(new u(i,l,c,b,g))}return this},r.visitAfter=function(f){var s,i=[],l=[];for(this._root&&i.push(new u(this._root,this._x0,this._y0,this._x1,this._y1));s=i.pop();){var c=s.node;if(c.length){var h,m=s.x0,d=s.y0,o=s.x1,b=s.y1,g=(m+o)/2,w=(d+b)/2;(h=c[0])&&i.push(new u(h,m,d,g,w)),(h=c[1])&&i.push(new u(h,g,d,o,w)),(h=c[2])&&i.push(new u(h,m,w,g,b)),(h=c[3])&&i.push(new u(h,g,w,o,b))}l.push(s)}for(;s=l.pop();)f(s.node,s.x0,s.y0,s.x1,s.y1);return this},r.x=function(f){return arguments.length?(this._x=f,this):this._x},r.y=function(f){return arguments.length?(this._y=f,this):this._y},p.quadtree=n,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof K&&void 0!==Q?K:(p=p||self).d3=p.d3||{})},{}],119:[function(x,Q,K){var p,v;p=this,v=function(p,v){"use strict";function u(Fe){return function(){return Fe}}var y=Math.abs,e=Math.atan2,n=Math.cos,t=Math.max,a=Math.min,r=Math.sin,f=Math.sqrt,s=Math.PI,i=s/2,l=2*s;function c(Fe){return Fe>1?0:Fe<-1?s:Math.acos(Fe)}function h(Fe){return Fe>=1?i:Fe<=-1?-i:Math.asin(Fe)}function m(Fe){return Fe.innerRadius}function d(Fe){return Fe.outerRadius}function o(Fe){return Fe.startAngle}function b(Fe){return Fe.endAngle}function g(Fe){return Fe&&Fe.padAngle}function w(Fe,ht,kt,Gt,Zt,fr,$t,nr){var dr=kt-Fe,Tr=Gt-ht,wr=$t-Zt,mr=nr-fr,_r=mr*dr-wr*Tr;if(!(_r*_r<1e-12))return[Fe+(_r=(wr*(ht-fr)-mr*(Fe-Zt))/_r)*dr,ht+_r*Tr]}function _(Fe,ht,kt,Gt,Zt,fr,$t){var nr=Fe-kt,dr=ht-Gt,Tr=($t?fr:-fr)/f(nr*nr+dr*dr),wr=Tr*dr,mr=-Tr*nr,_r=Fe+wr,Sr=ht+mr,Gr=kt+wr,Er=Gt+mr,Zr=(_r+Gr)/2,an=(Sr+Er)/2,gn=Gr-_r,Vn=Er-Sr,Gn=gn*gn+Vn*Vn,Ln=Zt-fr,ln=_r*Er-Gr*Sr,qr=(Vn<0?-1:1)*f(t(0,Ln*Ln*Gn-ln*ln)),Pr=(ln*Vn-gn*qr)/Gn,un=(-ln*gn-Vn*qr)/Gn,dn=(ln*Vn+gn*qr)/Gn,cn=(-ln*gn+Vn*qr)/Gn,fn=Pr-Zr,Bn=un-an,Nn=dn-Zr,Fn=cn-an;return fn*fn+Bn*Bn>Nn*Nn+Fn*Fn&&(Pr=dn,un=cn),{cx:Pr,cy:un,x01:-wr,y01:-mr,x11:Pr*(Zt/Ln-1),y11:un*(Zt/Ln-1)}}function A(Fe){this._context=Fe}function T(Fe){return new A(Fe)}function E(Fe){return Fe[0]}function k(Fe){return Fe[1]}function O(){var Fe=E,ht=k,kt=u(!0),Gt=null,Zt=T,fr=null;function $t(nr){var dr,Tr,wr,mr=nr.length,_r=!1;for(null==Gt&&(fr=Zt(wr=v.path())),dr=0;dr<=mr;++dr)!(dr<mr&&kt(Tr=nr[dr],dr,nr))===_r&&((_r=!_r)?fr.lineStart():fr.lineEnd()),_r&&fr.point(+Fe(Tr,dr,nr),+ht(Tr,dr,nr));if(wr)return fr=null,wr+""||null}return $t.x=function(nr){return arguments.length?(Fe="function"==typeof nr?nr:u(+nr),$t):Fe},$t.y=function(nr){return arguments.length?(ht="function"==typeof nr?nr:u(+nr),$t):ht},$t.defined=function(nr){return arguments.length?(kt="function"==typeof nr?nr:u(!!nr),$t):kt},$t.curve=function(nr){return arguments.length?(Zt=nr,null!=Gt&&(fr=Zt(Gt)),$t):Zt},$t.context=function(nr){return arguments.length?(null==nr?Gt=fr=null:fr=Zt(Gt=nr),$t):Gt},$t}function D(){var Fe=E,ht=null,kt=u(0),Gt=k,Zt=u(!0),fr=null,$t=T,nr=null;function dr(wr){var mr,_r,Sr,Gr,Er,Zr=wr.length,an=!1,gn=new Array(Zr),Vn=new Array(Zr);for(null==fr&&(nr=$t(Er=v.path())),mr=0;mr<=Zr;++mr){if(!(mr<Zr&&Zt(Gr=wr[mr],mr,wr))===an)if(an=!an)_r=mr,nr.areaStart(),nr.lineStart();else{for(nr.lineEnd(),nr.lineStart(),Sr=mr-1;Sr>=_r;--Sr)nr.point(gn[Sr],Vn[Sr]);nr.lineEnd(),nr.areaEnd()}an&&(gn[mr]=+Fe(Gr,mr,wr),Vn[mr]=+kt(Gr,mr,wr),nr.point(ht?+ht(Gr,mr,wr):gn[mr],Gt?+Gt(Gr,mr,wr):Vn[mr]))}if(Er)return nr=null,Er+""||null}function Tr(){return O().defined(Zt).curve($t).context(fr)}return dr.x=function(wr){return arguments.length?(Fe="function"==typeof wr?wr:u(+wr),ht=null,dr):Fe},dr.x0=function(wr){return arguments.length?(Fe="function"==typeof wr?wr:u(+wr),dr):Fe},dr.x1=function(wr){return arguments.length?(ht=null==wr?null:"function"==typeof wr?wr:u(+wr),dr):ht},dr.y=function(wr){return arguments.length?(kt="function"==typeof wr?wr:u(+wr),Gt=null,dr):kt},dr.y0=function(wr){return arguments.length?(kt="function"==typeof wr?wr:u(+wr),dr):kt},dr.y1=function(wr){return arguments.length?(Gt=null==wr?null:"function"==typeof wr?wr:u(+wr),dr):Gt},dr.lineX0=dr.lineY0=function(){return Tr().x(Fe).y(kt)},dr.lineY1=function(){return Tr().x(Fe).y(Gt)},dr.lineX1=function(){return Tr().x(ht).y(kt)},dr.defined=function(wr){return arguments.length?(Zt="function"==typeof wr?wr:u(!!wr),dr):Zt},dr.curve=function(wr){return arguments.length?($t=wr,null!=fr&&(nr=$t(fr)),dr):$t},dr.context=function(wr){return arguments.length?(null==wr?fr=nr=null:nr=$t(fr=wr),dr):fr},dr}function S(Fe,ht){return ht<Fe?-1:ht>Fe?1:ht>=Fe?0:NaN}function C(Fe){return Fe}A.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Fe,ht){switch(Fe=+Fe,ht=+ht,this._point){case 0:this._point=1,this._line?this._context.lineTo(Fe,ht):this._context.moveTo(Fe,ht);break;case 1:this._point=2;default:this._context.lineTo(Fe,ht)}}};var z=U(T);function B(Fe){this._curve=Fe}function U(Fe){function ht(kt){return new B(Fe(kt))}return ht._curve=Fe,ht}function G(Fe){var ht=Fe.curve;return Fe.angle=Fe.x,delete Fe.x,Fe.radius=Fe.y,delete Fe.y,Fe.curve=function(kt){return arguments.length?ht(U(kt)):ht()._curve},Fe}function X(){return G(O().curve(z))}function Z(){var Fe=D().curve(z),ht=Fe.curve,kt=Fe.lineX0,Gt=Fe.lineX1,Zt=Fe.lineY0,fr=Fe.lineY1;return Fe.angle=Fe.x,delete Fe.x,Fe.startAngle=Fe.x0,delete Fe.x0,Fe.endAngle=Fe.x1,delete Fe.x1,Fe.radius=Fe.y,delete Fe.y,Fe.innerRadius=Fe.y0,delete Fe.y0,Fe.outerRadius=Fe.y1,delete Fe.y1,Fe.lineStartAngle=function(){return G(kt())},delete Fe.lineX0,Fe.lineEndAngle=function(){return G(Gt())},delete Fe.lineX1,Fe.lineInnerRadius=function(){return G(Zt())},delete Fe.lineY0,Fe.lineOuterRadius=function(){return G(fr())},delete Fe.lineY1,Fe.curve=function($t){return arguments.length?ht(U($t)):ht()._curve},Fe}function q(Fe,ht){return[(ht=+ht)*Math.cos(Fe-=Math.PI/2),ht*Math.sin(Fe)]}B.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Fe,ht){this._curve.point(ht*Math.sin(Fe),ht*-Math.cos(Fe))}};var W=Array.prototype.slice;function te(Fe){return Fe.source}function R(Fe){return Fe.target}function N(Fe){var ht=te,kt=R,Gt=E,Zt=k,fr=null;function $t(){var nr,dr=W.call(arguments),Tr=ht.apply(this,dr),wr=kt.apply(this,dr);if(fr||(fr=nr=v.path()),Fe(fr,+Gt.apply(this,(dr[0]=Tr,dr)),+Zt.apply(this,dr),+Gt.apply(this,(dr[0]=wr,dr)),+Zt.apply(this,dr)),nr)return fr=null,nr+""||null}return $t.source=function(nr){return arguments.length?(ht=nr,$t):ht},$t.target=function(nr){return arguments.length?(kt=nr,$t):kt},$t.x=function(nr){return arguments.length?(Gt="function"==typeof nr?nr:u(+nr),$t):Gt},$t.y=function(nr){return arguments.length?(Zt="function"==typeof nr?nr:u(+nr),$t):Zt},$t.context=function(nr){return arguments.length?(fr=null==nr?null:nr,$t):fr},$t}function V(Fe,ht,kt,Gt,Zt){Fe.moveTo(ht,kt),Fe.bezierCurveTo(ht=(ht+Gt)/2,kt,ht,Zt,Gt,Zt)}function ee(Fe,ht,kt,Gt,Zt){Fe.moveTo(ht,kt),Fe.bezierCurveTo(ht,kt=(kt+Zt)/2,Gt,kt,Gt,Zt)}function j(Fe,ht,kt,Gt,Zt){var fr=q(ht,kt),$t=q(ht,kt=(kt+Zt)/2),nr=q(Gt,kt),dr=q(Gt,Zt);Fe.moveTo(fr[0],fr[1]),Fe.bezierCurveTo($t[0],$t[1],nr[0],nr[1],dr[0],dr[1])}var J={draw:function(Fe,ht){var kt=Math.sqrt(ht/s);Fe.moveTo(kt,0),Fe.arc(0,0,kt,0,l)}},$={draw:function(Fe,ht){var kt=Math.sqrt(ht/5)/2;Fe.moveTo(-3*kt,-kt),Fe.lineTo(-kt,-kt),Fe.lineTo(-kt,-3*kt),Fe.lineTo(kt,-3*kt),Fe.lineTo(kt,-kt),Fe.lineTo(3*kt,-kt),Fe.lineTo(3*kt,kt),Fe.lineTo(kt,kt),Fe.lineTo(kt,3*kt),Fe.lineTo(-kt,3*kt),Fe.lineTo(-kt,kt),Fe.lineTo(-3*kt,kt),Fe.closePath()}},re=Math.sqrt(1/3),ne=2*re,se={draw:function(Fe,ht){var kt=Math.sqrt(ht/ne),Gt=kt*re;Fe.moveTo(0,-kt),Fe.lineTo(Gt,0),Fe.lineTo(0,kt),Fe.lineTo(-Gt,0),Fe.closePath()}},ie=Math.sin(s/10)/Math.sin(7*s/10),ue=Math.sin(l/10)*ie,le=-Math.cos(l/10)*ie,de={draw:function(Fe,ht){var kt=Math.sqrt(.8908130915292852*ht),Gt=ue*kt,Zt=le*kt;Fe.moveTo(0,-kt),Fe.lineTo(Gt,Zt);for(var fr=1;fr<5;++fr){var $t=l*fr/5,nr=Math.cos($t),dr=Math.sin($t);Fe.lineTo(dr*kt,-nr*kt),Fe.lineTo(nr*Gt-dr*Zt,dr*Gt+nr*Zt)}Fe.closePath()}},ve={draw:function(Fe,ht){var kt=Math.sqrt(ht),Gt=-kt/2;Fe.rect(Gt,Gt,kt,kt)}},_e=Math.sqrt(3),be={draw:function(Fe,ht){var kt=-Math.sqrt(ht/(3*_e));Fe.moveTo(0,2*kt),Fe.lineTo(-_e*kt,-kt),Fe.lineTo(_e*kt,-kt),Fe.closePath()}},Te=-.5,he=Math.sqrt(3)/2,me=1/Math.sqrt(12),Ae=3*(me/2+1),we={draw:function(Fe,ht){var kt=Math.sqrt(ht/Ae),Gt=kt/2,Zt=kt*me,fr=Gt,$t=kt*me+kt,nr=-fr,dr=$t;Fe.moveTo(Gt,Zt),Fe.lineTo(fr,$t),Fe.lineTo(nr,dr),Fe.lineTo(Te*Gt-he*Zt,he*Gt+Te*Zt),Fe.lineTo(Te*fr-he*$t,he*fr+Te*$t),Fe.lineTo(Te*nr-he*dr,he*nr+Te*dr),Fe.lineTo(Te*Gt+he*Zt,Te*Zt-he*Gt),Fe.lineTo(Te*fr+he*$t,Te*$t-he*fr),Fe.lineTo(Te*nr+he*dr,Te*dr-he*nr),Fe.closePath()}},Se=[J,$,se,ve,de,be,we];function Pe(){}function ze(Fe,ht,kt){Fe._context.bezierCurveTo((2*Fe._x0+Fe._x1)/3,(2*Fe._y0+Fe._y1)/3,(Fe._x0+2*Fe._x1)/3,(Fe._y0+2*Fe._y1)/3,(Fe._x0+4*Fe._x1+ht)/6,(Fe._y0+4*Fe._y1+kt)/6)}function He(Fe){this._context=Fe}function tt(Fe){this._context=Fe}function Oe(Fe){this._context=Fe}function Be(Fe,ht){this._basis=new He(Fe),this._beta=ht}He.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ze(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Fe,ht){switch(Fe=+Fe,ht=+ht,this._point){case 0:this._point=1,this._line?this._context.lineTo(Fe,ht):this._context.moveTo(Fe,ht);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ze(this,Fe,ht)}this._x0=this._x1,this._x1=Fe,this._y0=this._y1,this._y1=ht}},tt.prototype={areaStart:Pe,areaEnd:Pe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Fe,ht){switch(Fe=+Fe,ht=+ht,this._point){case 0:this._point=1,this._x2=Fe,this._y2=ht;break;case 1:this._point=2,this._x3=Fe,this._y3=ht;break;case 2:this._point=3,this._x4=Fe,this._y4=ht,this._context.moveTo((this._x0+4*this._x1+Fe)/6,(this._y0+4*this._y1+ht)/6);break;default:ze(this,Fe,ht)}this._x0=this._x1,this._x1=Fe,this._y0=this._y1,this._y1=ht}},Oe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Fe,ht){switch(Fe=+Fe,ht=+ht,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var kt=(this._x0+4*this._x1+Fe)/6,Gt=(this._y0+4*this._y1+ht)/6;this._line?this._context.lineTo(kt,Gt):this._context.moveTo(kt,Gt);break;case 3:this._point=4;default:ze(this,Fe,ht)}this._x0=this._x1,this._x1=Fe,this._y0=this._y1,this._y1=ht}},Be.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Fe=this._x,ht=this._y,kt=Fe.length-1;if(kt>0)for(var Gt,Zt=Fe[0],fr=ht[0],$t=Fe[kt]-Zt,nr=ht[kt]-fr,dr=-1;++dr<=kt;)this._basis.point(this._beta*Fe[dr]+(1-this._beta)*(Zt+(Gt=dr/kt)*$t),this._beta*ht[dr]+(1-this._beta)*(fr+Gt*nr));this._x=this._y=null,this._basis.lineEnd()},point:function(Fe,ht){this._x.push(+Fe),this._y.push(+ht)}};var Je=function Fe(ht){function kt(Gt){return 1===ht?new He(Gt):new Be(Gt,ht)}return kt.beta=function(Gt){return Fe(+Gt)},kt}(.85);function Ye(Fe,ht,kt){Fe._context.bezierCurveTo(Fe._x1+Fe._k*(Fe._x2-Fe._x0),Fe._y1+Fe._k*(Fe._y2-Fe._y0),Fe._x2+Fe._k*(Fe._x1-ht),Fe._y2+Fe._k*(Fe._y1-kt),Fe._x2,Fe._y2)}function nt(Fe,ht){this._context=Fe,this._k=(1-ht)/6}nt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ye(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Fe,ht){switch(Fe=+Fe,ht=+ht,this._point){case 0:this._point=1,this._line?this._context.lineTo(Fe,ht):this._context.moveTo(Fe,ht);break;case 1:this._point=2,this._x1=Fe,this._y1=ht;break;case 2:this._point=3;default:Ye(this,Fe,ht)}this._x0=this._x1,this._x1=this._x2,this._x2=Fe,this._y0=this._y1,this._y1=this._y2,this._y2=ht}};var ft=function Fe(ht){function kt(Gt){return new nt(Gt,ht)}return kt.tension=function(Gt){return Fe(+Gt)},kt}(0);function dt(Fe,ht){this._context=Fe,this._k=(1-ht)/6}dt.prototype={areaStart:Pe,areaEnd:Pe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Fe,ht){switch(Fe=+Fe,ht=+ht,this._point){case 0:this._point=1,this._x3=Fe,this._y3=ht;break;case 1:this._point=2,this._context.moveTo(this._x4=Fe,this._y4=ht);break;case 2:this._point=3,this._x5=Fe,this._y5=ht;break;default:Ye(this,Fe,ht)}this._x0=this._x1,this._x1=this._x2,this._x2=Fe,this._y0=this._y1,this._y1=this._y2,this._y2=ht}};var Rt=function Fe(ht){function kt(Gt){return new dt(Gt,ht)}return kt.tension=function(Gt){return Fe(+Gt)},kt}(0);function Et(Fe,ht){this._context=Fe,this._k=(1-ht)/6}Et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Fe,ht){switch(Fe=+Fe,ht=+ht,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ye(this,Fe,ht)}this._x0=this._x1,this._x1=this._x2,this._x2=Fe,this._y0=this._y1,this._y1=this._y2,this._y2=ht}};var at=function Fe(ht){function kt(Gt){return new Et(Gt,ht)}return kt.tension=function(Gt){return Fe(+Gt)},kt}(0);function rt(Fe,ht,kt){var Gt=Fe._x1,Zt=Fe._y1,fr=Fe._x2,$t=Fe._y2;if(Fe._l01_a>1e-12){var nr=2*Fe._l01_2a+3*Fe._l01_a*Fe._l12_a+Fe._l12_2a,dr=3*Fe._l01_a*(Fe._l01_a+Fe._l12_a);Gt=(Gt*nr-Fe._x0*Fe._l12_2a+Fe._x2*Fe._l01_2a)/dr,Zt=(Zt*nr-Fe._y0*Fe._l12_2a+Fe._y2*Fe._l01_2a)/dr}if(Fe._l23_a>1e-12){var Tr=2*Fe._l23_2a+3*Fe._l23_a*Fe._l12_a+Fe._l12_2a,wr=3*Fe._l23_a*(Fe._l23_a+Fe._l12_a);fr=(fr*Tr+Fe._x1*Fe._l23_2a-ht*Fe._l12_2a)/wr,$t=($t*Tr+Fe._y1*Fe._l23_2a-kt*Fe._l12_2a)/wr}Fe._context.bezierCurveTo(Gt,Zt,fr,$t,Fe._x2,Fe._y2)}function St(Fe,ht){this._context=Fe,this._alpha=ht}St.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Fe,ht){if(Fe=+Fe,ht=+ht,this._point){var kt=this._x2-Fe,Gt=this._y2-ht;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(kt*kt+Gt*Gt,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Fe,ht):this._context.moveTo(Fe,ht);break;case 1:this._point=2;break;case 2:this._point=3;default:rt(this,Fe,ht)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Fe,this._y0=this._y1,this._y1=this._y2,this._y2=ht}};var Xt=function Fe(ht){function kt(Gt){return ht?new St(Gt,ht):new nt(Gt,0)}return kt.alpha=function(Gt){return Fe(+Gt)},kt}(.5);function lr(Fe,ht){this._context=Fe,this._alpha=ht}lr.prototype={areaStart:Pe,areaEnd:Pe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Fe,ht){if(Fe=+Fe,ht=+ht,this._point){var kt=this._x2-Fe,Gt=this._y2-ht;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(kt*kt+Gt*Gt,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Fe,this._y3=ht;break;case 1:this._point=2,this._context.moveTo(this._x4=Fe,this._y4=ht);break;case 2:this._point=3,this._x5=Fe,this._y5=ht;break;default:rt(this,Fe,ht)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Fe,this._y0=this._y1,this._y1=this._y2,this._y2=ht}};var Ue=function Fe(ht){function kt(Gt){return ht?new lr(Gt,ht):new dt(Gt,0)}return kt.alpha=function(Gt){return Fe(+Gt)},kt}(.5);function Ze(Fe,ht){this._context=Fe,this._alpha=ht}Ze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Fe,ht){if(Fe=+Fe,ht=+ht,this._point){var kt=this._x2-Fe,Gt=this._y2-ht;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(kt*kt+Gt*Gt,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rt(this,Fe,ht)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Fe,this._y0=this._y1,this._y1=this._y2,this._y2=ht}};var Ne=function Fe(ht){function kt(Gt){return ht?new Ze(Gt,ht):new Et(Gt,0)}return kt.alpha=function(Gt){return Fe(+Gt)},kt}(.5);function it(Fe){this._context=Fe}function ke(Fe){return Fe<0?-1:1}function De(Fe,ht,kt){var Gt=Fe._x1-Fe._x0,Zt=ht-Fe._x1,fr=(Fe._y1-Fe._y0)/(Gt||Zt<0&&-0),$t=(kt-Fe._y1)/(Zt||Gt<0&&-0),nr=(fr*Zt+$t*Gt)/(Gt+Zt);return(ke(fr)+ke($t))*Math.min(Math.abs(fr),Math.abs($t),.5*Math.abs(nr))||0}function Re(Fe,ht){var kt=Fe._x1-Fe._x0;return kt?(3*(Fe._y1-Fe._y0)/kt-ht)/2:ht}function Ie(Fe,ht,kt){var Gt=Fe._x0,fr=Fe._x1,$t=Fe._y1,nr=(fr-Gt)/3;Fe._context.bezierCurveTo(Gt+nr,Fe._y0+nr*ht,fr-nr,$t-nr*kt,fr,$t)}function Ke(Fe){this._context=Fe}function ut(Fe){this._context=new xt(Fe)}function xt(Fe){this._context=Fe}function gt(Fe){this._context=Fe}function Pt(Fe){var ht,kt,Gt=Fe.length-1,Zt=new Array(Gt),fr=new Array(Gt),$t=new Array(Gt);for(Zt[0]=0,fr[0]=2,$t[0]=Fe[0]+2*Fe[1],ht=1;ht<Gt-1;++ht)Zt[ht]=1,fr[ht]=4,$t[ht]=4*Fe[ht]+2*Fe[ht+1];for(Zt[Gt-1]=2,fr[Gt-1]=7,$t[Gt-1]=8*Fe[Gt-1]+Fe[Gt],ht=1;ht<Gt;++ht)fr[ht]-=kt=Zt[ht]/fr[ht-1],$t[ht]-=kt*$t[ht-1];for(Zt[Gt-1]=$t[Gt-1]/fr[Gt-1],ht=Gt-2;ht>=0;--ht)Zt[ht]=($t[ht]-Zt[ht+1])/fr[ht];for(fr[Gt-1]=(Fe[Gt]+Zt[Gt-1])/2,ht=0;ht<Gt-1;++ht)fr[ht]=2*Fe[ht+1]-Zt[ht+1];return[Zt,fr]}function ct(Fe,ht){this._context=Fe,this._t=ht}function zt(Fe,ht){if((Zt=Fe.length)>1)for(var kt,Gt,Zt,fr=1,$t=Fe[ht[0]],nr=$t.length;fr<Zt;++fr)for(Gt=$t,$t=Fe[ht[fr]],kt=0;kt<nr;++kt)$t[kt][1]+=$t[kt][0]=isNaN(Gt[kt][1])?Gt[kt][0]:Gt[kt][1]}function Ft(Fe){for(var ht=Fe.length,kt=new Array(ht);--ht>=0;)kt[ht]=ht;return kt}function Qe(Fe,ht){return Fe[ht]}function yt(Fe){var ht=Fe.map(Nt);return Ft(Fe).sort(function(kt,Gt){return ht[kt]-ht[Gt]})}function Nt(Fe){for(var ht,kt=-1,Gt=0,Zt=Fe.length,fr=-1/0;++kt<Zt;)(ht=+Fe[kt][1])>fr&&(fr=ht,Gt=kt);return Gt}function Yt(Fe){var ht=Fe.map(rr);return Ft(Fe).sort(function(kt,Gt){return ht[kt]-ht[Gt]})}function rr(Fe){for(var ht,kt=0,Gt=-1,Zt=Fe.length;++Gt<Zt;)(ht=+Fe[Gt][1])&&(kt+=ht);return kt}it.prototype={areaStart:Pe,areaEnd:Pe,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Fe,ht){Fe=+Fe,ht=+ht,this._point?this._context.lineTo(Fe,ht):(this._point=1,this._context.moveTo(Fe,ht))}},Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ie(this,this._t0,Re(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Fe,ht){var kt=NaN;if(ht=+ht,(Fe=+Fe)!==this._x1||ht!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Fe,ht):this._context.moveTo(Fe,ht);break;case 1:this._point=2;break;case 2:this._point=3,Ie(this,Re(this,kt=De(this,Fe,ht)),kt);break;default:Ie(this,this._t0,kt=De(this,Fe,ht))}this._x0=this._x1,this._x1=Fe,this._y0=this._y1,this._y1=ht,this._t0=kt}}},(ut.prototype=Object.create(Ke.prototype)).point=function(Fe,ht){Ke.prototype.point.call(this,ht,Fe)},xt.prototype={moveTo:function(Fe,ht){this._context.moveTo(ht,Fe)},closePath:function(){this._context.closePath()},lineTo:function(Fe,ht){this._context.lineTo(ht,Fe)},bezierCurveTo:function(Fe,ht,kt,Gt,Zt,fr){this._context.bezierCurveTo(ht,Fe,Gt,kt,fr,Zt)}},gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Fe=this._x,ht=this._y,kt=Fe.length;if(kt)if(this._line?this._context.lineTo(Fe[0],ht[0]):this._context.moveTo(Fe[0],ht[0]),2===kt)this._context.lineTo(Fe[1],ht[1]);else for(var Gt=Pt(Fe),Zt=Pt(ht),fr=0,$t=1;$t<kt;++fr,++$t)this._context.bezierCurveTo(Gt[0][fr],Zt[0][fr],Gt[1][fr],Zt[1][fr],Fe[$t],ht[$t]);(this._line||0!==this._line&&1===kt)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Fe,ht){this._x.push(+Fe),this._y.push(+ht)}},ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Fe,ht){switch(Fe=+Fe,ht=+ht,this._point){case 0:this._point=1,this._line?this._context.lineTo(Fe,ht):this._context.moveTo(Fe,ht);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,ht),this._context.lineTo(Fe,ht);else{var kt=this._x*(1-this._t)+Fe*this._t;this._context.lineTo(kt,this._y),this._context.lineTo(kt,ht)}}this._x=Fe,this._y=ht}},p.arc=function(){var Fe=m,ht=d,kt=u(0),Gt=null,Zt=o,fr=b,$t=g,nr=null;function dr(){var Tr,wr,mr=+Fe.apply(this,arguments),_r=+ht.apply(this,arguments),Sr=Zt.apply(this,arguments)-i,Gr=fr.apply(this,arguments)-i,Er=y(Gr-Sr),Zr=Gr>Sr;if(nr||(nr=Tr=v.path()),_r<mr&&(wr=_r,_r=mr,mr=wr),_r>1e-12)if(Er>l-1e-12)nr.moveTo(_r*n(Sr),_r*r(Sr)),nr.arc(0,0,_r,Sr,Gr,!Zr),mr>1e-12&&(nr.moveTo(mr*n(Gr),mr*r(Gr)),nr.arc(0,0,mr,Gr,Sr,Zr));else{var an,gn,Vn=Sr,Gn=Gr,Ln=Sr,ln=Gr,qr=Er,Pr=Er,un=$t.apply(this,arguments)/2,dn=un>1e-12&&(Gt?+Gt.apply(this,arguments):f(mr*mr+_r*_r)),cn=a(y(_r-mr)/2,+kt.apply(this,arguments)),fn=cn,Bn=cn;if(dn>1e-12){var Nn=h(dn/mr*r(un)),Fn=h(dn/_r*r(un));(qr-=2*Nn)>1e-12?(Ln+=Nn*=Zr?1:-1,ln-=Nn):(qr=0,Ln=ln=(Sr+Gr)/2),(Pr-=2*Fn)>1e-12?(Vn+=Fn*=Zr?1:-1,Gn-=Fn):(Pr=0,Vn=Gn=(Sr+Gr)/2)}var ar=_r*n(Vn),Bt=_r*r(Vn),Qt=mr*n(ln),yr=mr*r(ln);if(cn>1e-12){var Dr,$r=_r*n(Gn),Xr=_r*r(Gn),Mr=mr*n(Ln),Lr=mr*r(Ln);if(Er<s&&(Dr=w(ar,Bt,Mr,Lr,$r,Xr,Qt,yr))){var Rr=ar-Dr[0],Ir=Bt-Dr[1],Fr=$r-Dr[0],Qr=Xr-Dr[1],yn=1/r(c((Rr*Fr+Ir*Qr)/(f(Rr*Rr+Ir*Ir)*f(Fr*Fr+Qr*Qr)))/2),In=f(Dr[0]*Dr[0]+Dr[1]*Dr[1]);fn=a(cn,(mr-In)/(yn-1)),Bn=a(cn,(_r-In)/(yn+1))}}Pr>1e-12?Bn>1e-12?(an=_(Mr,Lr,ar,Bt,_r,Bn,Zr),gn=_($r,Xr,Qt,yr,_r,Bn,Zr),nr.moveTo(an.cx+an.x01,an.cy+an.y01),Bn<cn?nr.arc(an.cx,an.cy,Bn,e(an.y01,an.x01),e(gn.y01,gn.x01),!Zr):(nr.arc(an.cx,an.cy,Bn,e(an.y01,an.x01),e(an.y11,an.x11),!Zr),nr.arc(0,0,_r,e(an.cy+an.y11,an.cx+an.x11),e(gn.cy+gn.y11,gn.cx+gn.x11),!Zr),nr.arc(gn.cx,gn.cy,Bn,e(gn.y11,gn.x11),e(gn.y01,gn.x01),!Zr))):(nr.moveTo(ar,Bt),nr.arc(0,0,_r,Vn,Gn,!Zr)):nr.moveTo(ar,Bt),mr>1e-12&&qr>1e-12?fn>1e-12?(an=_(Qt,yr,$r,Xr,mr,-fn,Zr),gn=_(ar,Bt,Mr,Lr,mr,-fn,Zr),nr.lineTo(an.cx+an.x01,an.cy+an.y01),fn<cn?nr.arc(an.cx,an.cy,fn,e(an.y01,an.x01),e(gn.y01,gn.x01),!Zr):(nr.arc(an.cx,an.cy,fn,e(an.y01,an.x01),e(an.y11,an.x11),!Zr),nr.arc(0,0,mr,e(an.cy+an.y11,an.cx+an.x11),e(gn.cy+gn.y11,gn.cx+gn.x11),Zr),nr.arc(gn.cx,gn.cy,fn,e(gn.y11,gn.x11),e(gn.y01,gn.x01),!Zr))):nr.arc(0,0,mr,ln,Ln,Zr):nr.lineTo(Qt,yr)}else nr.moveTo(0,0);if(nr.closePath(),Tr)return nr=null,Tr+""||null}return dr.centroid=function(){var Tr=(+Fe.apply(this,arguments)+ +ht.apply(this,arguments))/2,wr=(+Zt.apply(this,arguments)+ +fr.apply(this,arguments))/2-s/2;return[n(wr)*Tr,r(wr)*Tr]},dr.innerRadius=function(Tr){return arguments.length?(Fe="function"==typeof Tr?Tr:u(+Tr),dr):Fe},dr.outerRadius=function(Tr){return arguments.length?(ht="function"==typeof Tr?Tr:u(+Tr),dr):ht},dr.cornerRadius=function(Tr){return arguments.length?(kt="function"==typeof Tr?Tr:u(+Tr),dr):kt},dr.padRadius=function(Tr){return arguments.length?(Gt=null==Tr?null:"function"==typeof Tr?Tr:u(+Tr),dr):Gt},dr.startAngle=function(Tr){return arguments.length?(Zt="function"==typeof Tr?Tr:u(+Tr),dr):Zt},dr.endAngle=function(Tr){return arguments.length?(fr="function"==typeof Tr?Tr:u(+Tr),dr):fr},dr.padAngle=function(Tr){return arguments.length?($t="function"==typeof Tr?Tr:u(+Tr),dr):$t},dr.context=function(Tr){return arguments.length?(nr=null==Tr?null:Tr,dr):nr},dr},p.area=D,p.areaRadial=Z,p.curveBasis=function(Fe){return new He(Fe)},p.curveBasisClosed=function(Fe){return new tt(Fe)},p.curveBasisOpen=function(Fe){return new Oe(Fe)},p.curveBundle=Je,p.curveCardinal=ft,p.curveCardinalClosed=Rt,p.curveCardinalOpen=at,p.curveCatmullRom=Xt,p.curveCatmullRomClosed=Ue,p.curveCatmullRomOpen=Ne,p.curveLinear=T,p.curveLinearClosed=function(Fe){return new it(Fe)},p.curveMonotoneX=function(Fe){return new Ke(Fe)},p.curveMonotoneY=function(Fe){return new ut(Fe)},p.curveNatural=function(Fe){return new gt(Fe)},p.curveStep=function(Fe){return new ct(Fe,.5)},p.curveStepAfter=function(Fe){return new ct(Fe,1)},p.curveStepBefore=function(Fe){return new ct(Fe,0)},p.line=O,p.lineRadial=X,p.linkHorizontal=function(){return N(V)},p.linkRadial=function(){var Fe=N(j);return Fe.angle=Fe.x,delete Fe.x,Fe.radius=Fe.y,delete Fe.y,Fe},p.linkVertical=function(){return N(ee)},p.pie=function(){var Fe=C,ht=S,kt=null,Gt=u(0),Zt=u(l),fr=u(0);function $t(nr){var dr,Tr,wr,mr,_r,Sr=nr.length,Gr=0,Er=new Array(Sr),Zr=new Array(Sr),an=+Gt.apply(this,arguments),gn=Math.min(l,Math.max(-l,Zt.apply(this,arguments)-an)),Vn=Math.min(Math.abs(gn)/Sr,fr.apply(this,arguments)),Gn=Vn*(gn<0?-1:1);for(dr=0;dr<Sr;++dr)(_r=Zr[Er[dr]=dr]=+Fe(nr[dr],dr,nr))>0&&(Gr+=_r);for(null!=ht?Er.sort(function(Ln,ln){return ht(Zr[Ln],Zr[ln])}):null!=kt&&Er.sort(function(Ln,ln){return kt(nr[Ln],nr[ln])}),dr=0,wr=Gr?(gn-Sr*Gn)/Gr:0;dr<Sr;++dr,an=mr)mr=an+((_r=Zr[Tr=Er[dr]])>0?_r*wr:0)+Gn,Zr[Tr]={data:nr[Tr],index:dr,value:_r,startAngle:an,endAngle:mr,padAngle:Vn};return Zr}return $t.value=function(nr){return arguments.length?(Fe="function"==typeof nr?nr:u(+nr),$t):Fe},$t.sortValues=function(nr){return arguments.length?(ht=nr,kt=null,$t):ht},$t.sort=function(nr){return arguments.length?(kt=nr,ht=null,$t):kt},$t.startAngle=function(nr){return arguments.length?(Gt="function"==typeof nr?nr:u(+nr),$t):Gt},$t.endAngle=function(nr){return arguments.length?(Zt="function"==typeof nr?nr:u(+nr),$t):Zt},$t.padAngle=function(nr){return arguments.length?(fr="function"==typeof nr?nr:u(+nr),$t):fr},$t},p.pointRadial=q,p.radialArea=Z,p.radialLine=X,p.stack=function(){var Fe=u([]),ht=Ft,kt=zt,Gt=Qe;function Zt(fr){var $t,nr,dr=Fe.apply(this,arguments),Tr=fr.length,wr=dr.length,mr=new Array(wr);for($t=0;$t<wr;++$t){for(var _r,Sr=dr[$t],Gr=mr[$t]=new Array(Tr),Er=0;Er<Tr;++Er)Gr[Er]=_r=[0,+Gt(fr[Er],Sr,Er,fr)],_r.data=fr[Er];Gr.key=Sr}for($t=0,nr=ht(mr);$t<wr;++$t)mr[nr[$t]].index=$t;return kt(mr,nr),mr}return Zt.keys=function(fr){return arguments.length?(Fe="function"==typeof fr?fr:u(W.call(fr)),Zt):Fe},Zt.value=function(fr){return arguments.length?(Gt="function"==typeof fr?fr:u(+fr),Zt):Gt},Zt.order=function(fr){return arguments.length?(ht=null==fr?Ft:"function"==typeof fr?fr:u(W.call(fr)),Zt):ht},Zt.offset=function(fr){return arguments.length?(kt=null==fr?zt:fr,Zt):kt},Zt},p.stackOffsetDiverging=function(Fe,ht){if((nr=Fe.length)>0)for(var kt,Gt,Zt,fr,$t,nr,dr=0,Tr=Fe[ht[0]].length;dr<Tr;++dr)for(fr=$t=0,kt=0;kt<nr;++kt)(Zt=(Gt=Fe[ht[kt]][dr])[1]-Gt[0])>0?(Gt[0]=fr,Gt[1]=fr+=Zt):Zt<0?(Gt[1]=$t,Gt[0]=$t+=Zt):(Gt[0]=0,Gt[1]=Zt)},p.stackOffsetExpand=function(Fe,ht){if((Gt=Fe.length)>0){for(var kt,Gt,Zt,fr=0,$t=Fe[0].length;fr<$t;++fr){for(Zt=kt=0;kt<Gt;++kt)Zt+=Fe[kt][fr][1]||0;if(Zt)for(kt=0;kt<Gt;++kt)Fe[kt][fr][1]/=Zt}zt(Fe,ht)}},p.stackOffsetNone=zt,p.stackOffsetSilhouette=function(Fe,ht){if((kt=Fe.length)>0){for(var kt,Gt=0,Zt=Fe[ht[0]],fr=Zt.length;Gt<fr;++Gt){for(var $t=0,nr=0;$t<kt;++$t)nr+=Fe[$t][Gt][1]||0;Zt[Gt][1]+=Zt[Gt][0]=-nr/2}zt(Fe,ht)}},p.stackOffsetWiggle=function(Fe,ht){if((Zt=Fe.length)>0&&(Gt=(kt=Fe[ht[0]]).length)>0){for(var kt,Gt,Zt,fr=0,$t=1;$t<Gt;++$t){for(var nr=0,dr=0,Tr=0;nr<Zt;++nr){for(var wr=Fe[ht[nr]],mr=wr[$t][1]||0,_r=(mr-(wr[$t-1][1]||0))/2,Sr=0;Sr<nr;++Sr){var Gr=Fe[ht[Sr]];_r+=(Gr[$t][1]||0)-(Gr[$t-1][1]||0)}dr+=mr,Tr+=_r*mr}kt[$t-1][1]+=kt[$t-1][0]=fr,dr&&(fr-=Tr/dr)}kt[$t-1][1]+=kt[$t-1][0]=fr,zt(Fe,ht)}},p.stackOrderAppearance=yt,p.stackOrderAscending=Yt,p.stackOrderDescending=function(Fe){return Yt(Fe).reverse()},p.stackOrderInsideOut=function(Fe){var ht,kt,Gt=Fe.length,Zt=Fe.map(rr),fr=yt(Fe),$t=0,nr=0,dr=[],Tr=[];for(ht=0;ht<Gt;++ht)kt=fr[ht],$t<nr?($t+=Zt[kt],dr.push(kt)):(nr+=Zt[kt],Tr.push(kt));return Tr.reverse().concat(dr)},p.stackOrderNone=Ft,p.stackOrderReverse=function(Fe){return Ft(Fe).reverse()},p.symbol=function(){var Fe=u(J),ht=u(64),kt=null;function Gt(){var Zt;if(kt||(kt=Zt=v.path()),Fe.apply(this,arguments).draw(kt,+ht.apply(this,arguments)),Zt)return kt=null,Zt+""||null}return Gt.type=function(Zt){return arguments.length?(Fe="function"==typeof Zt?Zt:u(Zt),Gt):Fe},Gt.size=function(Zt){return arguments.length?(ht="function"==typeof Zt?Zt:u(+Zt),Gt):ht},Gt.context=function(Zt){return arguments.length?(kt=null==Zt?null:Zt,Gt):kt},Gt},p.symbolCircle=J,p.symbolCross=$,p.symbolDiamond=se,p.symbolSquare=ve,p.symbolStar=de,p.symbolTriangle=be,p.symbolWye=we,p.symbols=Se,Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,x("d3-path")):v((p=p||self).d3=p.d3||{},p.d3)},{"d3-path":117}],120:[function(x,Q,K){var p,v;p=this,v=function(p,v){"use strict";function u(at){if(0<=at.y&&at.y<100){var rt=new Date(-1,at.m,at.d,at.H,at.M,at.S,at.L);return rt.setFullYear(at.y),rt}return new Date(at.y,at.m,at.d,at.H,at.M,at.S,at.L)}function y(at){if(0<=at.y&&at.y<100){var rt=new Date(Date.UTC(-1,at.m,at.d,at.H,at.M,at.S,at.L));return rt.setUTCFullYear(at.y),rt}return new Date(Date.UTC(at.y,at.m,at.d,at.H,at.M,at.S,at.L))}function e(at,rt,St){return{y:at,m:rt,d:St,H:0,M:0,S:0,L:0}}function n(at){var rt=at.dateTime,St=at.date,Xt=at.time,lr=at.periods,Ue=at.days,Ze=at.shortDays,Ne=at.months,it=at.shortMonths,ke=c(lr),De=h(lr),Re=c(Ue),Ie=h(Ue),Ke=c(Ze),ut=h(Ze),xt=c(Ne),gt=h(Ne),Pt=c(it),ct=h(it),zt={a:function(rr){return Ze[rr.getDay()]},A:function(rr){return Ue[rr.getDay()]},b:function(rr){return it[rr.getMonth()]},B:function(rr){return Ne[rr.getMonth()]},c:null,d:Z,e:Z,f:N,H:q,I:W,j:te,L:R,m:V,M:ee,p:function(rr){return lr[+(rr.getHours()>=12)]},q:function(rr){return 1+~~(rr.getMonth()/3)},Q:nt,s:ft,S:j,u:J,U:$,V:re,w:ne,W:se,x:null,X:null,y:ie,Y:ue,Z:le,"%":Ye},Ft={a:function(rr){return Ze[rr.getUTCDay()]},A:function(rr){return Ue[rr.getUTCDay()]},b:function(rr){return it[rr.getUTCMonth()]},B:function(rr){return Ne[rr.getUTCMonth()]},c:null,d:de,e:de,f:he,H:ve,I:_e,j:be,L:Te,m:me,M:Ae,p:function(rr){return lr[+(rr.getUTCHours()>=12)]},q:function(rr){return 1+~~(rr.getUTCMonth()/3)},Q:nt,s:ft,S:we,u:Se,U:Pe,V:ze,w:He,W:tt,x:null,X:null,y:Oe,Y:Be,Z:Je,"%":Ye},Qe={a:function(rr,Fe,ht){var kt=Ke.exec(Fe.slice(ht));return kt?(rr.w=ut[kt[0].toLowerCase()],ht+kt[0].length):-1},A:function(rr,Fe,ht){var kt=Re.exec(Fe.slice(ht));return kt?(rr.w=Ie[kt[0].toLowerCase()],ht+kt[0].length):-1},b:function(rr,Fe,ht){var kt=Pt.exec(Fe.slice(ht));return kt?(rr.m=ct[kt[0].toLowerCase()],ht+kt[0].length):-1},B:function(rr,Fe,ht){var kt=xt.exec(Fe.slice(ht));return kt?(rr.m=gt[kt[0].toLowerCase()],ht+kt[0].length):-1},c:function(rr,Fe,ht){return Yt(rr,rt,Fe,ht)},d:k,e:k,f:B,H:D,I:D,j:O,L:z,m:E,M:S,p:function(rr,Fe,ht){var kt=ke.exec(Fe.slice(ht));return kt?(rr.p=De[kt[0].toLowerCase()],ht+kt[0].length):-1},q:T,Q:G,s:X,S:C,u:d,U:o,V:b,w:m,W:g,x:function(rr,Fe,ht){return Yt(rr,St,Fe,ht)},X:function(rr,Fe,ht){return Yt(rr,Xt,Fe,ht)},y:_,Y:w,Z:A,"%":U};function yt(rr,Fe){return function(ht){var kt,Gt,Zt,fr=[],$t=-1,nr=0,dr=rr.length;for(ht instanceof Date||(ht=new Date(+ht));++$t<dr;)37===rr.charCodeAt($t)&&(fr.push(rr.slice(nr,$t)),null!=(Gt=a[kt=rr.charAt(++$t)])?kt=rr.charAt(++$t):Gt="e"===kt?" ":"0",(Zt=Fe[kt])&&(kt=Zt(ht,Gt)),fr.push(kt),nr=$t+1);return fr.push(rr.slice(nr,$t)),fr.join("")}}function Nt(rr,Fe){return function(ht){var kt,Gt,Zt=e(1900,void 0,1);if(Yt(Zt,rr,ht+="",0)!=ht.length)return null;if("Q"in Zt)return new Date(Zt.Q);if("s"in Zt)return new Date(1e3*Zt.s+("L"in Zt?Zt.L:0));if(Fe&&!("Z"in Zt)&&(Zt.Z=0),"p"in Zt&&(Zt.H=Zt.H%12+12*Zt.p),void 0===Zt.m&&(Zt.m="q"in Zt?Zt.q:0),"V"in Zt){if(Zt.V<1||Zt.V>53)return null;"w"in Zt||(Zt.w=1),"Z"in Zt?(Gt=(kt=y(e(Zt.y,0,1))).getUTCDay(),kt=Gt>4||0===Gt?v.utcMonday.ceil(kt):v.utcMonday(kt),kt=v.utcDay.offset(kt,7*(Zt.V-1)),Zt.y=kt.getUTCFullYear(),Zt.m=kt.getUTCMonth(),Zt.d=kt.getUTCDate()+(Zt.w+6)%7):(Gt=(kt=u(e(Zt.y,0,1))).getDay(),kt=Gt>4||0===Gt?v.timeMonday.ceil(kt):v.timeMonday(kt),kt=v.timeDay.offset(kt,7*(Zt.V-1)),Zt.y=kt.getFullYear(),Zt.m=kt.getMonth(),Zt.d=kt.getDate()+(Zt.w+6)%7)}else("W"in Zt||"U"in Zt)&&("w"in Zt||(Zt.w="u"in Zt?Zt.u%7:"W"in Zt?1:0),Gt="Z"in Zt?y(e(Zt.y,0,1)).getUTCDay():u(e(Zt.y,0,1)).getDay(),Zt.m=0,Zt.d="W"in Zt?(Zt.w+6)%7+7*Zt.W-(Gt+5)%7:Zt.w+7*Zt.U-(Gt+6)%7);return"Z"in Zt?(Zt.H+=Zt.Z/100|0,Zt.M+=Zt.Z%100,y(Zt)):u(Zt)}}function Yt(rr,Fe,ht,kt){for(var Gt,Zt,fr=0,$t=Fe.length,nr=ht.length;fr<$t;){if(kt>=nr)return-1;if(37===(Gt=Fe.charCodeAt(fr++))){if(Gt=Fe.charAt(fr++),!(Zt=Qe[Gt in a?Fe.charAt(fr++):Gt])||(kt=Zt(rr,ht,kt))<0)return-1}else if(Gt!=ht.charCodeAt(kt++))return-1}return kt}return zt.x=yt(St,zt),zt.X=yt(Xt,zt),zt.c=yt(rt,zt),Ft.x=yt(St,Ft),Ft.X=yt(Xt,Ft),Ft.c=yt(rt,Ft),{format:function(rr){var Fe=yt(rr+="",zt);return Fe.toString=function(){return rr},Fe},parse:function(rr){var Fe=Nt(rr+="",!1);return Fe.toString=function(){return rr},Fe},utcFormat:function(rr){var Fe=yt(rr+="",Ft);return Fe.toString=function(){return rr},Fe},utcParse:function(rr){var Fe=Nt(rr+="",!0);return Fe.toString=function(){return rr},Fe}}}var t,a={"-":"",_:" ",0:"0"},r=/^\s*\d+/,f=/^%/,s=/[\\^$*+?|[\]().{}]/g;function i(at,rt,St){var Xt=at<0?"-":"",lr=(Xt?-at:at)+"",Ue=lr.length;return Xt+(Ue<St?new Array(St-Ue+1).join(rt)+lr:lr)}function l(at){return at.replace(s,"\\$&")}function c(at){return new RegExp("^(?:"+at.map(l).join("|")+")","i")}function h(at){for(var rt={},St=-1,Xt=at.length;++St<Xt;)rt[at[St].toLowerCase()]=St;return rt}function m(at,rt,St){var Xt=r.exec(rt.slice(St,St+1));return Xt?(at.w=+Xt[0],St+Xt[0].length):-1}function d(at,rt,St){var Xt=r.exec(rt.slice(St,St+1));return Xt?(at.u=+Xt[0],St+Xt[0].length):-1}function o(at,rt,St){var Xt=r.exec(rt.slice(St,St+2));return Xt?(at.U=+Xt[0],St+Xt[0].length):-1}function b(at,rt,St){var Xt=r.exec(rt.slice(St,St+2));return Xt?(at.V=+Xt[0],St+Xt[0].length):-1}function g(at,rt,St){var Xt=r.exec(rt.slice(St,St+2));return Xt?(at.W=+Xt[0],St+Xt[0].length):-1}function w(at,rt,St){var Xt=r.exec(rt.slice(St,St+4));return Xt?(at.y=+Xt[0],St+Xt[0].length):-1}function _(at,rt,St){var Xt=r.exec(rt.slice(St,St+2));return Xt?(at.y=+Xt[0]+(+Xt[0]>68?1900:2e3),St+Xt[0].length):-1}function A(at,rt,St){var Xt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(rt.slice(St,St+6));return Xt?(at.Z=Xt[1]?0:-(Xt[2]+(Xt[3]||"00")),St+Xt[0].length):-1}function T(at,rt,St){var Xt=r.exec(rt.slice(St,St+1));return Xt?(at.q=3*Xt[0]-3,St+Xt[0].length):-1}function E(at,rt,St){var Xt=r.exec(rt.slice(St,St+2));return Xt?(at.m=Xt[0]-1,St+Xt[0].length):-1}function k(at,rt,St){var Xt=r.exec(rt.slice(St,St+2));return Xt?(at.d=+Xt[0],St+Xt[0].length):-1}function O(at,rt,St){var Xt=r.exec(rt.slice(St,St+3));return Xt?(at.m=0,at.d=+Xt[0],St+Xt[0].length):-1}function D(at,rt,St){var Xt=r.exec(rt.slice(St,St+2));return Xt?(at.H=+Xt[0],St+Xt[0].length):-1}function S(at,rt,St){var Xt=r.exec(rt.slice(St,St+2));return Xt?(at.M=+Xt[0],St+Xt[0].length):-1}function C(at,rt,St){var Xt=r.exec(rt.slice(St,St+2));return Xt?(at.S=+Xt[0],St+Xt[0].length):-1}function z(at,rt,St){var Xt=r.exec(rt.slice(St,St+3));return Xt?(at.L=+Xt[0],St+Xt[0].length):-1}function B(at,rt,St){var Xt=r.exec(rt.slice(St,St+6));return Xt?(at.L=Math.floor(Xt[0]/1e3),St+Xt[0].length):-1}function U(at,rt,St){var Xt=f.exec(rt.slice(St,St+1));return Xt?St+Xt[0].length:-1}function G(at,rt,St){var Xt=r.exec(rt.slice(St));return Xt?(at.Q=+Xt[0],St+Xt[0].length):-1}function X(at,rt,St){var Xt=r.exec(rt.slice(St));return Xt?(at.s=+Xt[0],St+Xt[0].length):-1}function Z(at,rt){return i(at.getDate(),rt,2)}function q(at,rt){return i(at.getHours(),rt,2)}function W(at,rt){return i(at.getHours()%12||12,rt,2)}function te(at,rt){return i(1+v.timeDay.count(v.timeYear(at),at),rt,3)}function R(at,rt){return i(at.getMilliseconds(),rt,3)}function N(at,rt){return R(at,rt)+"000"}function V(at,rt){return i(at.getMonth()+1,rt,2)}function ee(at,rt){return i(at.getMinutes(),rt,2)}function j(at,rt){return i(at.getSeconds(),rt,2)}function J(at){var rt=at.getDay();return 0===rt?7:rt}function $(at,rt){return i(v.timeSunday.count(v.timeYear(at)-1,at),rt,2)}function re(at,rt){var St=at.getDay();return at=St>=4||0===St?v.timeThursday(at):v.timeThursday.ceil(at),i(v.timeThursday.count(v.timeYear(at),at)+(4===v.timeYear(at).getDay()),rt,2)}function ne(at){return at.getDay()}function se(at,rt){return i(v.timeMonday.count(v.timeYear(at)-1,at),rt,2)}function ie(at,rt){return i(at.getFullYear()%100,rt,2)}function ue(at,rt){return i(at.getFullYear()%1e4,rt,4)}function le(at){var rt=at.getTimezoneOffset();return(rt>0?"-":(rt*=-1,"+"))+i(rt/60|0,"0",2)+i(rt%60,"0",2)}function de(at,rt){return i(at.getUTCDate(),rt,2)}function ve(at,rt){return i(at.getUTCHours(),rt,2)}function _e(at,rt){return i(at.getUTCHours()%12||12,rt,2)}function be(at,rt){return i(1+v.utcDay.count(v.utcYear(at),at),rt,3)}function Te(at,rt){return i(at.getUTCMilliseconds(),rt,3)}function he(at,rt){return Te(at,rt)+"000"}function me(at,rt){return i(at.getUTCMonth()+1,rt,2)}function Ae(at,rt){return i(at.getUTCMinutes(),rt,2)}function we(at,rt){return i(at.getUTCSeconds(),rt,2)}function Se(at){var rt=at.getUTCDay();return 0===rt?7:rt}function Pe(at,rt){return i(v.utcSunday.count(v.utcYear(at)-1,at),rt,2)}function ze(at,rt){var St=at.getUTCDay();return at=St>=4||0===St?v.utcThursday(at):v.utcThursday.ceil(at),i(v.utcThursday.count(v.utcYear(at),at)+(4===v.utcYear(at).getUTCDay()),rt,2)}function He(at){return at.getUTCDay()}function tt(at,rt){return i(v.utcMonday.count(v.utcYear(at)-1,at),rt,2)}function Oe(at,rt){return i(at.getUTCFullYear()%100,rt,2)}function Be(at,rt){return i(at.getUTCFullYear()%1e4,rt,4)}function Je(){return"+0000"}function Ye(){return"%"}function nt(at){return+at}function ft(at){return Math.floor(+at/1e3)}function dt(at){return t=n(at),p.timeFormat=t.format,p.timeParse=t.parse,p.utcFormat=t.utcFormat,p.utcParse=t.utcParse,t}dt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Rt=Date.prototype.toISOString?function(at){return at.toISOString()}:p.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Et=+new Date("2000-01-01T00:00:00.000Z")?function(at){var rt=new Date(at);return isNaN(rt)?null:rt}:p.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");p.isoFormat=Rt,p.isoParse=Et,p.timeFormatDefaultLocale=dt,p.timeFormatLocale=n,Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof K&&void 0!==Q?v(K,x("d3-time")):v((p=p||self).d3=p.d3||{},p.d3)},{"d3-time":121}],121:[function(x,Q,K){var p;p=this,function(p){"use strict";var v=new Date,u=new Date;function y(me,Ae,we,Se){function Pe(ze){return me(ze=0===arguments.length?new Date:new Date(+ze)),ze}return Pe.floor=function(ze){return me(ze=new Date(+ze)),ze},Pe.ceil=function(ze){return me(ze=new Date(ze-1)),Ae(ze,1),me(ze),ze},Pe.round=function(ze){var He=Pe(ze),tt=Pe.ceil(ze);return ze-He<tt-ze?He:tt},Pe.offset=function(ze,He){return Ae(ze=new Date(+ze),null==He?1:Math.floor(He)),ze},Pe.range=function(ze,He,tt){var Oe,Be=[];if(ze=Pe.ceil(ze),tt=null==tt?1:Math.floor(tt),!(ze<He&&tt>0))return Be;do{Be.push(Oe=new Date(+ze)),Ae(ze,tt),me(ze)}while(Oe<ze&&ze<He);return Be},Pe.filter=function(ze){return y(function(He){if(He>=He)for(;me(He),!ze(He);)He.setTime(He-1)},function(He,tt){if(He>=He)if(tt<0)for(;++tt<=0;)for(;Ae(He,-1),!ze(He););else for(;--tt>=0;)for(;Ae(He,1),!ze(He););})},we&&(Pe.count=function(ze,He){return v.setTime(+ze),u.setTime(+He),me(v),me(u),Math.floor(we(v,u))},Pe.every=function(ze){return ze=Math.floor(ze),isFinite(ze)&&ze>0?ze>1?Pe.filter(Se?function(He){return Se(He)%ze==0}:function(He){return Pe.count(0,He)%ze==0}):Pe:null}),Pe}var e=y(function(){},function(me,Ae){me.setTime(+me+Ae)},function(me,Ae){return Ae-me});e.every=function(me){return me=Math.floor(me),isFinite(me)&&me>0?me>1?y(function(Ae){Ae.setTime(Math.floor(Ae/me)*me)},function(Ae,we){Ae.setTime(+Ae+we*me)},function(Ae,we){return(we-Ae)/me}):e:null};var n=e.range,t=y(function(me){me.setTime(me-me.getMilliseconds())},function(me,Ae){me.setTime(+me+1e3*Ae)},function(me,Ae){return(Ae-me)/1e3},function(me){return me.getUTCSeconds()}),a=t.range,r=y(function(me){me.setTime(me-me.getMilliseconds()-1e3*me.getSeconds())},function(me,Ae){me.setTime(+me+6e4*Ae)},function(me,Ae){return(Ae-me)/6e4},function(me){return me.getMinutes()}),f=r.range,s=y(function(me){me.setTime(me-me.getMilliseconds()-1e3*me.getSeconds()-6e4*me.getMinutes())},function(me,Ae){me.setTime(+me+36e5*Ae)},function(me,Ae){return(Ae-me)/36e5},function(me){return me.getHours()}),i=s.range,l=y(function(me){me.setHours(0,0,0,0)},function(me,Ae){me.setDate(me.getDate()+Ae)},function(me,Ae){return(Ae-me-6e4*(Ae.getTimezoneOffset()-me.getTimezoneOffset()))/864e5},function(me){return me.getDate()-1}),c=l.range;function h(me){return y(function(Ae){Ae.setDate(Ae.getDate()-(Ae.getDay()+7-me)%7),Ae.setHours(0,0,0,0)},function(Ae,we){Ae.setDate(Ae.getDate()+7*we)},function(Ae,we){return(we-Ae-6e4*(we.getTimezoneOffset()-Ae.getTimezoneOffset()))/6048e5})}var m=h(0),d=h(1),o=h(2),b=h(3),g=h(4),w=h(5),_=h(6),A=m.range,T=d.range,E=o.range,k=b.range,O=g.range,D=w.range,S=_.range,C=y(function(me){me.setDate(1),me.setHours(0,0,0,0)},function(me,Ae){me.setMonth(me.getMonth()+Ae)},function(me,Ae){return Ae.getMonth()-me.getMonth()+12*(Ae.getFullYear()-me.getFullYear())},function(me){return me.getMonth()}),z=C.range,B=y(function(me){me.setMonth(0,1),me.setHours(0,0,0,0)},function(me,Ae){me.setFullYear(me.getFullYear()+Ae)},function(me,Ae){return Ae.getFullYear()-me.getFullYear()},function(me){return me.getFullYear()});B.every=function(me){return isFinite(me=Math.floor(me))&&me>0?y(function(Ae){Ae.setFullYear(Math.floor(Ae.getFullYear()/me)*me),Ae.setMonth(0,1),Ae.setHours(0,0,0,0)},function(Ae,we){Ae.setFullYear(Ae.getFullYear()+we*me)}):null};var U=B.range,G=y(function(me){me.setUTCSeconds(0,0)},function(me,Ae){me.setTime(+me+6e4*Ae)},function(me,Ae){return(Ae-me)/6e4},function(me){return me.getUTCMinutes()}),X=G.range,Z=y(function(me){me.setUTCMinutes(0,0,0)},function(me,Ae){me.setTime(+me+36e5*Ae)},function(me,Ae){return(Ae-me)/36e5},function(me){return me.getUTCHours()}),q=Z.range,W=y(function(me){me.setUTCHours(0,0,0,0)},function(me,Ae){me.setUTCDate(me.getUTCDate()+Ae)},function(me,Ae){return(Ae-me)/864e5},function(me){return me.getUTCDate()-1}),te=W.range;function R(me){return y(function(Ae){Ae.setUTCDate(Ae.getUTCDate()-(Ae.getUTCDay()+7-me)%7),Ae.setUTCHours(0,0,0,0)},function(Ae,we){Ae.setUTCDate(Ae.getUTCDate()+7*we)},function(Ae,we){return(we-Ae)/6048e5})}var N=R(0),V=R(1),ee=R(2),j=R(3),J=R(4),$=R(5),re=R(6),ne=N.range,se=V.range,ie=ee.range,ue=j.range,le=J.range,de=$.range,ve=re.range,_e=y(function(me){me.setUTCDate(1),me.setUTCHours(0,0,0,0)},function(me,Ae){me.setUTCMonth(me.getUTCMonth()+Ae)},function(me,Ae){return Ae.getUTCMonth()-me.getUTCMonth()+12*(Ae.getUTCFullYear()-me.getUTCFullYear())},function(me){return me.getUTCMonth()}),be=_e.range,Te=y(function(me){me.setUTCMonth(0,1),me.setUTCHours(0,0,0,0)},function(me,Ae){me.setUTCFullYear(me.getUTCFullYear()+Ae)},function(me,Ae){return Ae.getUTCFullYear()-me.getUTCFullYear()},function(me){return me.getUTCFullYear()});Te.every=function(me){return isFinite(me=Math.floor(me))&&me>0?y(function(Ae){Ae.setUTCFullYear(Math.floor(Ae.getUTCFullYear()/me)*me),Ae.setUTCMonth(0,1),Ae.setUTCHours(0,0,0,0)},function(Ae,we){Ae.setUTCFullYear(Ae.getUTCFullYear()+we*me)}):null};var he=Te.range;p.timeDay=l,p.timeDays=c,p.timeFriday=w,p.timeFridays=D,p.timeHour=s,p.timeHours=i,p.timeInterval=y,p.timeMillisecond=e,p.timeMilliseconds=n,p.timeMinute=r,p.timeMinutes=f,p.timeMonday=d,p.timeMondays=T,p.timeMonth=C,p.timeMonths=z,p.timeSaturday=_,p.timeSaturdays=S,p.timeSecond=t,p.timeSeconds=a,p.timeSunday=m,p.timeSundays=A,p.timeThursday=g,p.timeThursdays=O,p.timeTuesday=o,p.timeTuesdays=E,p.timeWednesday=b,p.timeWednesdays=k,p.timeWeek=m,p.timeWeeks=A,p.timeYear=B,p.timeYears=U,p.utcDay=W,p.utcDays=te,p.utcFriday=$,p.utcFridays=de,p.utcHour=Z,p.utcHours=q,p.utcMillisecond=e,p.utcMilliseconds=n,p.utcMinute=G,p.utcMinutes=X,p.utcMonday=V,p.utcMondays=se,p.utcMonth=_e,p.utcMonths=be,p.utcSaturday=re,p.utcSaturdays=ve,p.utcSecond=t,p.utcSeconds=a,p.utcSunday=N,p.utcSundays=ne,p.utcThursday=J,p.utcThursdays=le,p.utcTuesday=ee,p.utcTuesdays=ie,p.utcWednesday=j,p.utcWednesdays=ue,p.utcWeek=N,p.utcWeeks=ne,p.utcYear=Te,p.utcYears=he,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof K&&void 0!==Q?K:(p=p||self).d3=p.d3||{})},{}],122:[function(x,Q,K){arguments[4][121][0].apply(K,arguments)},{dup:121}],123:[function(x,Q,K){var p;p=this,function(p){"use strict";var v,u,y=0,e=0,n=0,t=0,a=0,r=0,f="object"==typeof performance&&performance.now?performance:Date,s="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(g){setTimeout(g,17)};function i(){return a||(s(l),a=f.now()+r)}function l(){a=0}function c(){this._call=this._time=this._next=null}function h(g,w,_){var A=new c;return A.restart(g,w,_),A}function m(){i(),++y;for(var g,w=v;w;)(g=a-w._time)>=0&&w._call.call(null,g),w=w._next;--y}function d(){a=(t=f.now())+r,y=e=0;try{m()}finally{y=0,function(){for(var g,w,_=v,A=1/0;_;)_._call?(A>_._time&&(A=_._time),g=_,_=_._next):(w=_._next,_._next=null,_=g?g._next=w:v=w);u=g,b(A)}(),a=0}}function o(){var g=f.now(),w=g-t;w>1e3&&(r-=w,t=g)}function b(g){y||(e&&(e=clearTimeout(e)),g-a>24?(g<1/0&&(e=setTimeout(d,g-f.now()-r)),n&&(n=clearInterval(n))):(n||(t=f.now(),n=setInterval(o,1e3)),y=1,s(d)))}c.prototype=h.prototype={constructor:c,restart:function(g,w,_){if("function"!=typeof g)throw new TypeError("callback is not a function");_=(null==_?i():+_)+(null==w?0:+w),this._next||u===this||(u?u._next=this:v=this,u=this),this._call=g,this._time=_,b()},stop:function(){this._call&&(this._call=null,this._time=1/0,b())}},p.interval=function(g,w,_){var A=new c,T=w;return null==w?(A.restart(g,w,_),A):(w=+w,_=null==_?i():+_,A.restart(function E(k){k+=T,A.restart(E,T+=w,_),g(k)},w,_),A)},p.now=i,p.timeout=function(g,w,_){var A=new c;return A.restart(function(T){A.stop(),g(T+w)},w=null==w?0:+w,_),A},p.timer=h,p.timerFlush=m,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof K&&void 0!==Q?K:(p=p||self).d3=p.d3||{})},{}],124:[function(x,Q,K){Q.exports=function(){for(var p=0;p<arguments.length;p++)if(void 0!==arguments[p])return arguments[p]}},{}],125:[function(x,Q,K){"use strict";Q.exports=u;var p=(u.canvas=document.createElement("canvas")).getContext("2d"),v=y([32,126]);function u(e,n){Array.isArray(e)&&(e=e.join(", "));var t,a={},r=16,f=.05;n&&(2===n.length&&"number"==typeof n[0]?t=y(n):Array.isArray(n)?t=n:(n.o?t=y(n.o):n.pairs&&(t=n.pairs),n.fontSize&&(r=n.fontSize),null!=n.threshold&&(f=n.threshold))),t||(t=v),p.font=r+"px "+e;for(var s=0;s<t.length;s++){var i=t[s],l=p.measureText(i[0]).width+p.measureText(i[1]).width,c=p.measureText(i).width;Math.abs(l-c)>r*f&&(a[i]=(c-l)/r*1e3)}return a}function y(e){for(var n=[],t=e[0];t<=e[1];t++)for(var a=String.fromCharCode(t),r=e[0];r<e[1];r++){var f=a+String.fromCharCode(r);n.push(f)}return n}u.createPairs=y,u.ascii=v},{}],126:[function(x,Q,K){var p=x("abs-svg-path"),v=x("normalize-svg-path"),u={M:"moveTo",C:"bezierCurveTo"};Q.exports=function(y,e){y.beginPath(),v(p(e)).forEach(function(n){var t=n[0],a=n.slice(1);y[u[t]].apply(y,a)}),y.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(x,Q,K){Q.exports=function(p){switch(p){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(x,Q,K){"use strict";Q.exports=function(p,v){switch(void 0===v&&(v=0),typeof p){case"number":if(p>0)return function(u,y){var e,n;for(e=new Array(u),n=0;n<u;++n)e[n]=y;return e}(0|p,v);break;case"object":if("number"==typeof p.length)return function u(y,e,n){var t=0|y[n];if(t<=0)return[];var a,r=new Array(t);if(n===y.length-1)for(a=0;a<t;++a)r[a]=e;else for(a=0;a<t;++a)r[a]=u(y,e,n+1);return r}(p,v,0)}return[]}},{}],129:[function(x,Q,K){"use strict";function p(O,D,S){S=S||2;var C,z,B,U,G,X,Z,q=D&&D.length,W=q?D[0]*S:O.length,te=v(O,0,W,S,!0),R=[];if(!te||te.next===te.prev)return R;if(q&&(te=function(V,ee,j,J){var $,re,ie,ue=[];for($=0,re=ee.length;$<re;$++)(ie=v(V,ee[$]*J,$<re-1?ee[$+1]*J:V.length,J,!1))===ie.next&&(ie.steiner=!0),ue.push(l(ie));for(ue.sort(r),$=0;$<ue.length;$++)f(ue[$],j),j=u(j,j.next);return j}(O,D,te,S)),O.length>80*S){C=B=O[0],z=U=O[1];for(var N=S;N<W;N+=S)(G=O[N])<C&&(C=G),(X=O[N+1])<z&&(z=X),G>B&&(B=G),X>U&&(U=X);Z=0!==(Z=Math.max(B-C,U-z))?1/Z:0}return y(te,R,S,C,z,Z),R}function v(O,D,S,C,z){var B,U;if(z===k(O,D,S,C)>0)for(B=D;B<S;B+=C)U=A(B,O[B],O[B+1],U);else for(B=S-C;B>=D;B-=C)U=A(B,O[B],O[B+1],U);return U&&d(U,U.next)&&(T(U),U=U.next),U}function u(O,D){if(!O)return O;D||(D=O);var S,C=O;do{if(S=!1,C.steiner||!d(C,C.next)&&0!==m(C.prev,C,C.next))C=C.next;else{if(T(C),(C=D=C.prev)===C.next)break;S=!0}}while(S||C!==D);return D}function y(O,D,S,C,z,B,U){if(O){!U&&B&&function(q,W,te,R){var N=q;do{null===N.z&&(N.z=i(N.x,N.y,W,te,R)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next}while(N!==q);N.prevZ.nextZ=null,N.prevZ=null,function(V){var ee,j,J,$,re,ne,se,ie,ue=1;do{for(j=V,V=null,re=null,ne=0;j;){for(ne++,J=j,se=0,ee=0;ee<ue&&(se++,J=J.nextZ);ee++);for(ie=ue;se>0||ie>0&&J;)0!==se&&(0===ie||!J||j.z<=J.z)?($=j,j=j.nextZ,se--):($=J,J=J.nextZ,ie--),re?re.nextZ=$:V=$,$.prevZ=re,re=$;j=J}re.nextZ=null,ue*=2}while(ne>1)}(N)}(O,C,z,B);for(var G,X,Z=O;O.prev!==O.next;)if(G=O.prev,X=O.next,B?n(O,C,z,B):e(O))D.push(G.i/S),D.push(O.i/S),D.push(X.i/S),T(O),O=X.next,Z=X.next;else if((O=X)===Z){U?1===U?y(O=t(u(O),D,S),D,S,C,z,B,2):2===U&&a(O,D,S,C,z,B):y(u(O),D,S,C,z,B,1);break}}}function e(O){var D=O.prev,S=O,C=O.next;if(m(D,S,C)>=0)return!1;for(var z=O.next.next;z!==O.prev;){if(c(D.x,D.y,S.x,S.y,C.x,C.y,z.x,z.y)&&m(z.prev,z,z.next)>=0)return!1;z=z.next}return!0}function n(O,D,S,C){var z=O.prev,B=O,U=O.next;if(m(z,B,U)>=0)return!1;for(var Z=z.x>B.x?z.x>U.x?z.x:U.x:B.x>U.x?B.x:U.x,q=z.y>B.y?z.y>U.y?z.y:U.y:B.y>U.y?B.y:U.y,W=i(z.x<B.x?z.x<U.x?z.x:U.x:B.x<U.x?B.x:U.x,z.y<B.y?z.y<U.y?z.y:U.y:B.y<U.y?B.y:U.y,D,S,C),te=i(Z,q,D,S,C),R=O.prevZ,N=O.nextZ;R&&R.z>=W&&N&&N.z<=te;){if(R!==O.prev&&R!==O.next&&c(z.x,z.y,B.x,B.y,U.x,U.y,R.x,R.y)&&m(R.prev,R,R.next)>=0||(R=R.prevZ,N!==O.prev&&N!==O.next&&c(z.x,z.y,B.x,B.y,U.x,U.y,N.x,N.y)&&m(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;R&&R.z>=W;){if(R!==O.prev&&R!==O.next&&c(z.x,z.y,B.x,B.y,U.x,U.y,R.x,R.y)&&m(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;N&&N.z<=te;){if(N!==O.prev&&N!==O.next&&c(z.x,z.y,B.x,B.y,U.x,U.y,N.x,N.y)&&m(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function t(O,D,S){var C=O;do{var z=C.prev,B=C.next.next;!d(z,B)&&o(z,C,C.next,B)&&w(z,B)&&w(B,z)&&(D.push(z.i/S),D.push(C.i/S),D.push(B.i/S),T(C),T(C.next),C=O=B),C=C.next}while(C!==O);return u(C)}function a(O,D,S,C,z,B){var U=O;do{for(var G=U.next.next;G!==U.prev;){if(U.i!==G.i&&h(U,G)){var X=_(U,G);return U=u(U,U.next),X=u(X,X.next),y(U,D,S,C,z,B),void y(X,D,S,C,z,B)}G=G.next}U=U.next}while(U!==O)}function r(O,D){return O.x-D.x}function f(O,D){if(D=function(C,z){var B,U=z,G=C.x,X=C.y,Z=-1/0;do{if(X<=U.y&&X>=U.next.y&&U.next.y!==U.y){var q=U.x+(X-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(q<=G&&q>Z){if(Z=q,q===G){if(X===U.y)return U;if(X===U.next.y)return U.next}B=U.x<U.next.x?U:U.next}}U=U.next}while(U!==z);if(!B)return null;if(G===Z)return B;var W,te=B,R=B.x,N=B.y,V=1/0;U=B;do{G>=U.x&&U.x>=R&&G!==U.x&&c(X<N?G:Z,X,R,N,X<N?Z:G,X,U.x,U.y)&&(W=Math.abs(X-U.y)/(G-U.x),w(U,C)&&(W<V||W===V&&(U.x>B.x||U.x===B.x&&s(B,U)))&&(B=U,V=W)),U=U.next}while(U!==te);return B}(O,D)){var S=_(D,O);u(D,D.next),u(S,S.next)}}function s(O,D){return m(O.prev,O,D.prev)<0&&m(D.next,O,O.next)<0}function i(O,D,S,C,z){return(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-S)*z)|O<<8))|O<<4))|O<<2))|O<<1))|(D=1431655765&((D=858993459&((D=252645135&((D=16711935&((D=32767*(D-C)*z)|D<<8))|D<<4))|D<<2))|D<<1))<<1}function l(O){var D=O,S=O;do{(D.x<S.x||D.x===S.x&&D.y<S.y)&&(S=D),D=D.next}while(D!==O);return S}function c(O,D,S,C,z,B,U,G){return(z-U)*(D-G)-(O-U)*(B-G)>=0&&(O-U)*(C-G)-(S-U)*(D-G)>=0&&(S-U)*(B-G)-(z-U)*(C-G)>=0}function h(O,D){return O.next.i!==D.i&&O.prev.i!==D.i&&!function(S,C){var z=S;do{if(z.i!==S.i&&z.next.i!==S.i&&z.i!==C.i&&z.next.i!==C.i&&o(z,z.next,S,C))return!0;z=z.next}while(z!==S);return!1}(O,D)&&(w(O,D)&&w(D,O)&&function(S,C){var z=S,B=!1,U=(S.x+C.x)/2,G=(S.y+C.y)/2;do{z.y>G!=z.next.y>G&&z.next.y!==z.y&&U<(z.next.x-z.x)*(G-z.y)/(z.next.y-z.y)+z.x&&(B=!B),z=z.next}while(z!==S);return B}(O,D)&&(m(O.prev,O,D.prev)||m(O,D.prev,D))||d(O,D)&&m(O.prev,O,O.next)>0&&m(D.prev,D,D.next)>0)}function m(O,D,S){return(D.y-O.y)*(S.x-D.x)-(D.x-O.x)*(S.y-D.y)}function d(O,D){return O.x===D.x&&O.y===D.y}function o(O,D,S,C){var z=g(m(O,D,S)),B=g(m(O,D,C)),U=g(m(S,C,O)),G=g(m(S,C,D));return z!==B&&U!==G||!(0!==z||!b(O,S,D))||!(0!==B||!b(O,C,D))||!(0!==U||!b(S,O,C))||!(0!==G||!b(S,D,C))}function b(O,D,S){return D.x<=Math.max(O.x,S.x)&&D.x>=Math.min(O.x,S.x)&&D.y<=Math.max(O.y,S.y)&&D.y>=Math.min(O.y,S.y)}function g(O){return O>0?1:O<0?-1:0}function w(O,D){return m(O.prev,O,O.next)<0?m(O,D,O.next)>=0&&m(O,O.prev,D)>=0:m(O,D,O.prev)<0||m(O,O.next,D)<0}function _(O,D){var S=new E(O.i,O.x,O.y),C=new E(D.i,D.x,D.y),z=O.next,B=D.prev;return O.next=D,D.prev=O,S.next=z,z.prev=S,C.next=S,S.prev=C,B.next=C,C.prev=B,C}function A(O,D,S,C){var z=new E(O,D,S);return C?(z.next=C.next,z.prev=C,C.next.prev=z,C.next=z):(z.prev=z,z.next=z),z}function T(O){O.next.prev=O.prev,O.prev.next=O.next,O.prevZ&&(O.prevZ.nextZ=O.nextZ),O.nextZ&&(O.nextZ.prevZ=O.prevZ)}function E(O,D,S){this.i=O,this.x=D,this.y=S,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(O,D,S,C){for(var z=0,B=D,U=S-C;B<S;B+=C)z+=(O[U]-O[B])*(O[B+1]+O[U+1]),U=B;return z}Q.exports=p,Q.exports.default=p,p.deviation=function(O,D,S,C){var z=D&&D.length,U=Math.abs(k(O,0,z?D[0]*S:O.length,S));if(z)for(var G=0,X=D.length;G<X;G++)U-=Math.abs(k(O,D[G]*S,G<X-1?D[G+1]*S:O.length,S));var W=0;for(G=0;G<C.length;G+=3){var te=C[G]*S,R=C[G+1]*S,N=C[G+2]*S;W+=Math.abs((O[te]-O[N])*(O[R+1]-O[te+1])-(O[te]-O[R])*(O[N+1]-O[te+1]))}return 0===U&&0===W?0:Math.abs((W-U)/U)},p.flatten=function(O){for(var D=O[0][0].length,S={vertices:[],holes:[],dimensions:D},C=0,z=0;z<O.length;z++){for(var B=0;B<O[z].length;B++)for(var U=0;U<D;U++)S.vertices.push(O[z][B][U]);z>0&&S.holes.push(C+=O[z-1].length)}return S}},{}],130:[function(x,Q,K){var p=x("strongly-connected-components");Q.exports=function(v,u){var y,e=[],n=[],t=[],a={},r=[];function f(o){var b,g,w=!1;for(n.push(o),t[o]=!0,b=0;b<r[o].length;b++)(g=r[o][b])===y?(s(y,n),w=!0):t[g]||(w=f(g));if(w)!function A(T){t[T]=!1,a.hasOwnProperty(T)&&Object.keys(a[T]).forEach(function(E){delete a[T][E],t[E]&&A(E)})}(o);else for(b=0;b<r[o].length;b++){var _=a[g=r[o][b]];_||(a[g]=_={}),_[g]=!0}return n.pop(),w}function s(o,b){var g=[].concat(b).concat(o);u?u(f):e.push(g)}function i(o){!function(E){for(var k=0;k<v.length;k++)k<E&&(v[k]=[]),v[k]=v[k].filter(function(O){return O>=E})}(o);for(var b,g=p(v).components.filter(function(E){return E.length>1}),w=1/0,_=0;_<g.length;_++)for(var A=0;A<g[_].length;A++)g[_][A]<w&&(w=g[_][A],b=_);var T=g[b];return!!T&&{leastVertex:w,adjList:v.map(function(E,k){return-1===T.indexOf(k)?[]:E.filter(function(O){return-1!==T.indexOf(O)})})}}y=0;for(var l=v.length;y<l;){var c=i(y);if(y=c.leastVertex,r=c.adjList){for(var h=0;h<r.length;h++)for(var m=0;m<r[h].length;m++){var d=r[h][m];t[+d]=!1,a[d]={}}f(y),y+=1}else y=l}return u?void 0:e}},{"strongly-connected-components":306}],131:[function(x,Q,K){"use strict";var p=x("../../object/valid-value");Q.exports=function(){return p(this).length=0,this}},{"../../object/valid-value":162}],132:[function(x,Q,K){"use strict";Q.exports=x("./is-implemented")()?Array.from:x("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(x,Q,K){"use strict";Q.exports=function(){var p,v,u=Array.from;return"function"==typeof u&&(v=u(p=["raz","dwa"]),Boolean(v&&v!==p&&"dwa"===v[1]))}},{}],134:[function(x,Q,K){"use strict";var p=x("es6-symbol").iterator,v=x("../../function/is-arguments"),u=x("../../function/is-function"),y=x("../../number/to-pos-integer"),e=x("../../object/valid-callable"),n=x("../../object/valid-value"),t=x("../../object/is-value"),a=x("../../string/is-string"),r=Array.isArray,f=Function.prototype.call,s={configurable:!0,enumerable:!0,writable:!0,value:null},i=Object.defineProperty;Q.exports=function(l){var c,h,m,d,o,b,g,w,_,A,T=arguments[1],E=arguments[2];if(l=Object(n(l)),t(T)&&e(T),this&&this!==Array&&u(this))c=this;else{if(!T){if(v(l))return 1!==(o=l.length)?Array.apply(null,l):((d=new Array(1))[0]=l[0],d);if(r(l)){for(d=new Array(o=l.length),h=0;h<o;++h)d[h]=l[h];return d}}d=[]}if(!r(l))if(void 0!==(_=l[p])){for(g=e(_).call(l),c&&(d=new c),w=g.next(),h=0;!w.done;)A=T?f.call(T,E,w.value,h):w.value,c?(s.value=A,i(d,h,s)):d[h]=A,w=g.next(),++h;o=h}else if(a(l)){for(o=l.length,c&&(d=new c),h=0,m=0;h<o;++h)A=l[h],h+1<o&&(b=A.charCodeAt(0))>=55296&&b<=56319&&(A+=l[++h]),A=T?f.call(T,E,A,m):A,c?(s.value=A,i(d,m,s)):d[m]=A,++m;o=m}if(void 0===o)for(o=y(l.length),c&&(d=new c(o)),h=0;h<o;++h)A=T?f.call(T,E,l[h],h):l[h],c?(s.value=A,i(d,h,s)):d[h]=A;return c&&(s.value=null,d.length=o),d}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(x,Q,K){"use strict";var p=Object.prototype.toString,v=p.call(function(){return arguments}());Q.exports=function(u){return p.call(u)===v}},{}],136:[function(x,Q,K){"use strict";var p=Object.prototype.toString,v=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);Q.exports=function(u){return"function"==typeof u&&v(p.call(u))}},{}],137:[function(x,Q,K){"use strict";Q.exports=function(){}},{}],138:[function(x,Q,K){"use strict";Q.exports=x("./is-implemented")()?Math.sign:x("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(x,Q,K){"use strict";Q.exports=function(){var p=Math.sign;return"function"==typeof p&&1===p(10)&&-1===p(-20)}},{}],140:[function(x,Q,K){"use strict";Q.exports=function(p){return p=Number(p),isNaN(p)||0===p?p:p>0?1:-1}},{}],141:[function(x,Q,K){"use strict";var p=x("../math/sign"),v=Math.abs,u=Math.floor;Q.exports=function(y){return isNaN(y)?0:0!==(y=Number(y))&&isFinite(y)?p(y)*u(v(y)):y}},{"../math/sign":138}],142:[function(x,Q,K){"use strict";var p=x("./to-integer"),v=Math.max;Q.exports=function(u){return v(0,p(u))}},{"./to-integer":141}],143:[function(x,Q,K){"use strict";var p=x("./valid-callable"),v=x("./valid-value"),u=Function.prototype.bind,y=Function.prototype.call,e=Object.keys,n=Object.prototype.propertyIsEnumerable;Q.exports=function(t,a){return function(r,f){var s,i=arguments[2],l=arguments[3];return r=Object(v(r)),p(f),s=e(r),l&&s.sort("function"==typeof l?u.call(l,r):void 0),"function"!=typeof t&&(t=s[t]),y.call(t,s,function(c,h){return n.call(r,c)?y.call(f,i,r[c],c,r,h):a})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(x,Q,K){"use strict";Q.exports=x("./is-implemented")()?Object.assign:x("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(x,Q,K){"use strict";Q.exports=function(){var p,v=Object.assign;return"function"==typeof v&&(v(p={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),p.foo+p.bar+p.trzy==="razdwatrzy")}},{}],146:[function(x,Q,K){"use strict";var p=x("../keys"),v=x("../valid-value"),u=Math.max;Q.exports=function(y,e){var n,t,a,r=u(arguments.length,2);for(y=Object(v(y)),a=function(f){try{y[f]=e[f]}catch(s){n||(n=s)}},t=1;t<r;++t)p(e=arguments[t]).forEach(a);if(void 0!==n)throw n;return y}},{"../keys":152,"../valid-value":162}],147:[function(x,Q,K){"use strict";var p=x("../array/from"),v=x("./assign"),u=x("./valid-value");Q.exports=function(y){var e=Object(u(y)),n=arguments[1],t=Object(arguments[2]);if(e!==y&&!n)return e;var a={};return n?p(n,function(r){(t.ensure||r in y)&&(a[r]=y[r])}):v(a,y),a}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(x,Q,K){"use strict";var p,v,u,y,e=Object.create;x("./set-prototype-of/is-implemented")()||(p=x("./set-prototype-of/shim")),Q.exports=p?1!==p.level?e:(v={},u={},y={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(n){u[n]="__proto__"!==n?y:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(v,u),Object.defineProperty(p,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:v}),function(n,t){return e(null===n?v:n,t)}):e},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(x,Q,K){"use strict";Q.exports=x("./_iterate")("forEach")},{"./_iterate":143}],150:[function(x,Q,K){"use strict";var p=x("./is-value"),v={function:!0,object:!0};Q.exports=function(u){return p(u)&&v[typeof u]||!1}},{"./is-value":151}],151:[function(x,Q,K){"use strict";var p=x("../function/noop")();Q.exports=function(v){return v!==p&&null!==v}},{"../function/noop":137}],152:[function(x,Q,K){"use strict";Q.exports=x("./is-implemented")()?Object.keys:x("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(x,Q,K){"use strict";Q.exports=function(){try{return Object.keys("primitive"),!0}catch(p){return!1}}},{}],154:[function(x,Q,K){"use strict";var p=x("../is-value"),v=Object.keys;Q.exports=function(u){return v(p(u)?Object(u):u)}},{"../is-value":151}],155:[function(x,Q,K){"use strict";var p=x("./valid-callable"),v=x("./for-each"),u=Function.prototype.call;Q.exports=function(y,e){var n={},t=arguments[2];return p(e),v(y,function(a,r,f,s){n[r]=u.call(e,t,a,r,f,s)}),n}},{"./for-each":149,"./valid-callable":160}],156:[function(x,Q,K){"use strict";var p=x("./is-value"),v=Array.prototype.forEach,u=Object.create,y=function(e,n){var t;for(t in e)n[t]=e[t]};Q.exports=function(e){var n=u(null);return v.call(arguments,function(t){p(t)&&y(Object(t),n)}),n}},{"./is-value":151}],157:[function(x,Q,K){"use strict";Q.exports=x("./is-implemented")()?Object.setPrototypeOf:x("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(x,Q,K){"use strict";var p=Object.create,v=Object.getPrototypeOf,u={};Q.exports=function(){var y=Object.setPrototypeOf;return"function"==typeof y&&v(y((arguments[0]||p)(null),u))===u}},{}],159:[function(x,Q,K){"use strict";var p,t,a,r,v=x("../is-object"),u=x("../valid-value"),y=Object.prototype.isPrototypeOf,e=Object.defineProperty,n={configurable:!0,enumerable:!1,writable:!0,value:void 0};p=function(t,a){if(u(t),null===a||v(a))return t;throw new TypeError("Prototype must be null or an object")},Q.exports=(t=function(){var t,a=Object.create(null),r={},f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(f){try{(t=f.set).call(a,r)}catch(s){}if(Object.getPrototypeOf(a)===r)return{set:t,level:2}}return a.__proto__=r,Object.getPrototypeOf(a)===r?{level:2}:((a={}).__proto__=r,Object.getPrototypeOf(a)===r&&{level:1})}())?(2===t.level?t.set?(r=t.set,a=function(f,s){return r.call(p(f,s),s),f}):a=function(f,s){return p(f,s).__proto__=s,f}:a=function f(s,i){var l;return p(s,i),(l=y.call(f.nullPolyfill,s))&&delete f.nullPolyfill.__proto__,null===i&&(i=f.nullPolyfill),s.__proto__=i,l&&e(f.nullPolyfill,"__proto__",n),s},Object.defineProperty(a,"level",{configurable:!1,enumerable:!1,writable:!1,value:t.level})):null,x("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(x,Q,K){"use strict";Q.exports=function(p){if("function"!=typeof p)throw new TypeError(p+" is not a function");return p}},{}],161:[function(x,Q,K){"use strict";var p=x("./is-object");Q.exports=function(v){if(!p(v))throw new TypeError(v+" is not an Object");return v}},{"./is-object":150}],162:[function(x,Q,K){"use strict";var p=x("./is-value");Q.exports=function(v){if(!p(v))throw new TypeError("Cannot use null or undefined");return v}},{"./is-value":151}],163:[function(x,Q,K){"use strict";Q.exports=x("./is-implemented")()?String.prototype.contains:x("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(x,Q,K){"use strict";var p="razdwatrzy";Q.exports=function(){return"function"==typeof p.contains&&!0===p.contains("dwa")&&!1===p.contains("foo")}},{}],165:[function(x,Q,K){"use strict";var p=String.prototype.indexOf;Q.exports=function(v){return p.call(this,v,arguments[1])>-1}},{}],166:[function(x,Q,K){"use strict";var p=Object.prototype.toString,v=p.call("");Q.exports=function(u){return"string"==typeof u||u&&"object"==typeof u&&(u instanceof String||p.call(u)===v)||!1}},{}],167:[function(x,Q,K){"use strict";var p=Object.create(null),v=Math.random;Q.exports=function(){var u;do{u=v().toString(36).slice(2)}while(p[u]);return u}},{}],168:[function(x,Q,K){"use strict";var p,v=x("es5-ext/object/set-prototype-of"),u=x("es5-ext/string/#/contains"),y=x("d"),e=x("es6-symbol"),n=x("./"),t=Object.defineProperty;p=Q.exports=function(a,r){if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");n.call(this,a),r=r?u.call(r,"key+value")?"key+value":u.call(r,"key")?"key":"value":"value",t(this,"__kind__",y("",r))},v&&v(p,n),delete p.prototype.constructor,p.prototype=Object.create(n.prototype,{_resolve:y(function(a){return"value"===this.__kind__?this.__list__[a]:"key+value"===this.__kind__?[a,this.__list__[a]]:a})}),t(p.prototype,e.toStringTag,y("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(x,Q,K){"use strict";var p=x("es5-ext/function/is-arguments"),v=x("es5-ext/object/valid-callable"),u=x("es5-ext/string/is-string"),y=x("./get"),e=Array.isArray,n=Function.prototype.call,t=Array.prototype.some;Q.exports=function(a,r){var f,s,i,l,c,h,m,d,o=arguments[2];if(e(a)||p(a)?f="array":u(a)?f="string":a=y(a),v(r),i=function(){l=!0},"array"!==f)if("string"!==f)for(s=a.next();!s.done;){if(n.call(r,o,s.value,i),l)return;s=a.next()}else for(h=a.length,c=0;c<h&&(m=a[c],c+1<h&&(d=m.charCodeAt(0))>=55296&&d<=56319&&(m+=a[++c]),n.call(r,o,m,i),!l);++c);else t.call(a,function(b){return n.call(r,o,b,i),l})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(x,Q,K){"use strict";var p=x("es5-ext/function/is-arguments"),v=x("es5-ext/string/is-string"),u=x("./array"),y=x("./string"),e=x("./valid-iterable"),n=x("es6-symbol").iterator;Q.exports=function(t){return"function"==typeof e(t)[n]?t[n]():p(t)?new u(t):v(t)?new y(t):new u(t)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(x,Q,K){"use strict";var p,v=x("es5-ext/array/#/clear"),u=x("es5-ext/object/assign"),y=x("es5-ext/object/valid-callable"),e=x("es5-ext/object/valid-value"),n=x("d"),t=x("d/auto-bind"),a=x("es6-symbol"),r=Object.defineProperty,f=Object.defineProperties;Q.exports=p=function(s,i){if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");f(this,{__list__:n("w",e(s)),__context__:n("w",i),__nextIndex__:n("w",0)}),i&&(y(i.on),i.on("_add",this._onAdd),i.on("_delete",this._onDelete),i.on("_clear",this._onClear))},delete p.prototype.constructor,f(p.prototype,u({_next:n(function(){var s;if(this.__list__)return this.__redo__&&void 0!==(s=this.__redo__.shift())?s:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:n(function(){return this._createResult(this._next())}),_createResult:n(function(s){return void 0===s?{done:!0,value:void 0}:{done:!1,value:this._resolve(s)}}),_resolve:n(function(s){return this.__list__[s]}),_unBind:n(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:n(function(){return"[object "+(this[a.toStringTag]||"Object")+"]"})},t({_onAdd:n(function(s){s>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(i,l){i>=s&&(this.__redo__[l]=++i)},this),this.__redo__.push(s)):r(this,"__redo__",n("c",[s])))}),_onDelete:n(function(s){var i;s>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(i=this.__redo__.indexOf(s))&&this.__redo__.splice(i,1),this.__redo__.forEach(function(l,c){l>s&&(this.__redo__[c]=--l)},this)))}),_onClear:n(function(){this.__redo__&&v.call(this.__redo__),this.__nextIndex__=0})}))),r(p.prototype,a.iterator,n(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(x,Q,K){"use strict";var p=x("es5-ext/function/is-arguments"),v=x("es5-ext/object/is-value"),u=x("es5-ext/string/is-string"),y=x("es6-symbol").iterator,e=Array.isArray;Q.exports=function(n){return!(!v(n)||!e(n)&&!u(n)&&!p(n)&&"function"!=typeof n[y])}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(x,Q,K){"use strict";var p,v=x("es5-ext/object/set-prototype-of"),u=x("d"),y=x("es6-symbol"),e=x("./"),n=Object.defineProperty;p=Q.exports=function(t){if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");t=String(t),e.call(this,t),n(this,"__length__",u("",t.length))},v&&v(p,e),delete p.prototype.constructor,p.prototype=Object.create(e.prototype,{_next:u(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:u(function(t){var a,r=this.__list__[t];return this.__nextIndex__===this.__length__?r:(a=r.charCodeAt(0))>=55296&&a<=56319?r+this.__list__[this.__nextIndex__++]:r})}),n(p.prototype,y.toStringTag,u("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(x,Q,K){"use strict";var p=x("./is-iterable");Q.exports=function(v){if(!p(v))throw new TypeError(v+" is not iterable");return v}},{"./is-iterable":172}],175:[function(x,Q,K){"use strict";Q.exports=x("./is-implemented")()?x("ext/global-this").Symbol:x("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(x,Q,K){"use strict";var p=x("ext/global-this"),v={object:!0,symbol:!0};Q.exports=function(){var u,y=p.Symbol;if("function"!=typeof y)return!1;u=y("test symbol");try{String(u)}catch(e){return!1}return!!v[typeof y.iterator]&&!!v[typeof y.toPrimitive]&&!!v[typeof y.toStringTag]}},{"ext/global-this":188}],177:[function(x,Q,K){"use strict";Q.exports=function(p){return!!p&&("symbol"==typeof p||!!p.constructor&&"Symbol"===p.constructor.name&&"Symbol"===p[p.constructor.toStringTag])}},{}],178:[function(x,Q,K){"use strict";var p=x("d"),u=Object.defineProperty,y=Object.prototype,e=(0,Object.create)(null);Q.exports=function(n){for(var t,a,r=0;e[n+(r||"")];)++r;return e[n+=r||""]=!0,u(y,t="@@"+n,p.gs(null,function(f){a||(a=!0,u(this,t,p(f)),a=!1)})),t}},{d:106}],179:[function(x,Q,K){"use strict";var p=x("d"),v=x("ext/global-this").Symbol;Q.exports=function(u){return Object.defineProperties(u,{hasInstance:p("",v&&v.hasInstance||u("hasInstance")),isConcatSpreadable:p("",v&&v.isConcatSpreadable||u("isConcatSpreadable")),iterator:p("",v&&v.iterator||u("iterator")),match:p("",v&&v.match||u("match")),replace:p("",v&&v.replace||u("replace")),search:p("",v&&v.search||u("search")),species:p("",v&&v.species||u("species")),split:p("",v&&v.split||u("split")),toPrimitive:p("",v&&v.toPrimitive||u("toPrimitive")),toStringTag:p("",v&&v.toStringTag||u("toStringTag")),unscopables:p("",v&&v.unscopables||u("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(x,Q,K){"use strict";var p=x("d"),v=x("../../../validate-symbol"),u=Object.create(null);Q.exports=function(y){return Object.defineProperties(y,{for:p(function(e){return u[e]?u[e]:u[e]=y(String(e))}),keyFor:p(function(e){var n;for(n in v(e),u)if(u[n]===e)return n})})}},{"../../../validate-symbol":182,d:106}],181:[function(x,Q,K){"use strict";var p,v,u,y=x("d"),e=x("./validate-symbol"),n=x("ext/global-this").Symbol,t=x("./lib/private/generate-name"),a=x("./lib/private/setup/standard-symbols"),r=x("./lib/private/setup/symbol-registry"),f=Object.create,s=Object.defineProperties,i=Object.defineProperty;if("function"==typeof n)try{String(n()),u=!0}catch(l){}else n=null;v=function(l){if(this instanceof v)throw new TypeError("Symbol is not a constructor");return p(l)},Q.exports=p=function l(c){var h;if(this instanceof l)throw new TypeError("Symbol is not a constructor");return u?n(c):(h=f(v.prototype),c=void 0===c?"":String(c),s(h,{__description__:y("",c),__name__:y("",t(c))}))},a(p),r(p),s(v.prototype,{constructor:y(p),toString:y("",function(){return this.__name__})}),s(p.prototype,{toString:y(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:y(function(){return e(this)})}),i(p.prototype,p.toPrimitive,y("",function(){var l=e(this);return"symbol"==typeof l?l:l.toString()})),i(p.prototype,p.toStringTag,y("c","Symbol")),i(v.prototype,p.toStringTag,y("c",p.prototype[p.toStringTag])),i(v.prototype,p.toPrimitive,y("c",p.prototype[p.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(x,Q,K){"use strict";var p=x("./is-symbol");Q.exports=function(v){if(!p(v))throw new TypeError(v+" is not a symbol");return v}},{"./is-symbol":177}],183:[function(x,Q,K){"use strict";Q.exports=x("./is-implemented")()?WeakMap:x("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(x,Q,K){"use strict";Q.exports=function(){var p,v;if("function"!=typeof WeakMap)return!1;try{p=new WeakMap([[v={},"one"],[{},"two"],[{},"three"]])}catch(u){return!1}return"[object WeakMap]"===String(p)&&"function"==typeof p.set&&p.set({},1)===p&&"function"==typeof p.delete&&"function"==typeof p.has&&"one"===p.get(v)}},{}],185:[function(x,Q,K){"use strict";Q.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],186:[function(x,Q,K){"use strict";var p,v=x("es5-ext/object/is-value"),u=x("es5-ext/object/set-prototype-of"),y=x("es5-ext/object/valid-object"),e=x("es5-ext/object/valid-value"),n=x("es5-ext/string/random-uniq"),t=x("d"),a=x("es6-iterator/get"),r=x("es6-iterator/for-of"),f=x("es6-symbol").toStringTag,s=x("./is-native-implemented"),i=Array.isArray,l=Object.defineProperty,c=Object.prototype.hasOwnProperty,h=Object.getPrototypeOf;Q.exports=p=function(){var m,d=arguments[0];if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");return m=s&&u&&WeakMap!==p?u(new WeakMap,h(this)):this,v(d)&&(i(d)||(d=a(d))),l(m,"__weakMapData__",t("c","$weakMap$"+n())),d&&r(d,function(o){e(o),m.set(o[0],o[1])}),m},s&&(u&&u(p,WeakMap),p.prototype=Object.create(WeakMap.prototype,{constructor:t(p)})),Object.defineProperties(p.prototype,{delete:t(function(m){return!!c.call(y(m),this.__weakMapData__)&&(delete m[this.__weakMapData__],!0)}),get:t(function(m){if(c.call(y(m),this.__weakMapData__))return m[this.__weakMapData__]}),has:t(function(m){return c.call(y(m),this.__weakMapData__)}),set:t(function(m,d){return l(y(m),this.__weakMapData__,t("c",d)),this}),toString:t(function(){return"[object WeakMap]"})}),l(p.prototype,f,t("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(x,Q,K){var p=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};Q.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(v){return p()}try{return __global__||p()}finally{delete Object.prototype.__global__}}()},{}],188:[function(x,Q,K){"use strict";Q.exports=x("./is-implemented")()?globalThis:x("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(x,Q,K){"use strict";Q.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},{}],190:[function(x,Q,K){"use strict";var p=x("is-string-blank");Q.exports=function(v){var u=typeof v;if("string"===u){var y=v;if(0==(v=+v)&&p(y))return!1}else if("number"!==u)return!1;return v-v<1}},{"is-string-blank":237}],191:[function(x,Q,K){var p=x("dtype");Q.exports=function(v,u,y){if(!v)throw new TypeError("must specify data as first parameter");if(y=0|+(y||0),Array.isArray(v)&&v[0]&&"number"==typeof v[0][0]){var e,n,t,a,r=v[0].length,f=v.length*r;u&&"string"!=typeof u||(u=new(p(u||"float32"))(f+y));var s=u.length-y;if(f!==s)throw new Error("source length "+f+" ("+r+"x"+v.length+") does not match destination length "+s);for(e=0,t=y;e<v.length;e++)for(n=0;n<r;n++)u[t++]=null===v[e][n]?NaN:v[e][n]}else if(u&&"string"!=typeof u)u.set(v,y);else{var i=p(u||"float32");if(Array.isArray(v)||"array"===u)for(e=0,t=y,a=(u=new i(v.length+y)).length;t<a;t++,e++)u[t]=null===v[e]?NaN:v[e];else 0===y?u=new i(v):(u=new i(v.length+y)).set(v,y)}return u}},{dtype:127}],192:[function(x,Q,K){"use strict";var p=x("css-font/stringify"),v=[32,126];Q.exports=function(u){var y=(u=u||{}).shape?u.shape:u.canvas?[u.canvas.width,u.canvas.height]:[512,512],e=u.canvas||document.createElement("canvas"),n=u.font,t="number"==typeof u.step?[u.step,u.step]:u.step||[32,32],a=u.chars||v;if(n&&"string"!=typeof n&&(n=p(n)),Array.isArray(a)){if(2===a.length&&"number"==typeof a[0]&&"number"==typeof a[1]){for(var r=[],f=a[0],s=0;f<=a[1];f++)r[s++]=String.fromCharCode(f);a=r}}else a=String(a).split("");y=y.slice(),e.width=y[0],e.height=y[1];var i=e.getContext("2d");i.fillStyle="#000",i.fillRect(0,0,e.width,e.height),i.font=n,i.textAlign="center",i.textBaseline="middle",i.fillStyle="#fff";var l=t[0]/2,c=t[1]/2;for(f=0;f<a.length;f++)i.fillText(a[f],l,c),(l+=t[0])>y[0]-t[0]/2&&(l=t[0]/2,c+=t[1]);return e}},{"css-font/stringify":102}],193:[function(x,Q,K){"use strict";function p(e,n){n||(n={}),("string"==typeof e||Array.isArray(e))&&(n.family=e);var t=Array.isArray(n.family)?n.family.join(", "):n.family;if(!t)throw Error("`family` must be defined");var a=n.size||n.fontSize||n.em||48,f=(e=[n.style||n.fontStyle||"",n.weight||n.fontWeight||"",a].join(" ")+"px "+t,n.origin||"top");if(p.cache[t]&&a<=p.cache[t].em)return v(p.cache[t],f);var s=n.canvas||p.canvas,i=s.getContext("2d"),l={upper:void 0!==n.upper?n.upper:"H",lower:void 0!==n.lower?n.lower:"x",descent:void 0!==n.descent?n.descent:"p",ascent:void 0!==n.ascent?n.ascent:"h",tittle:void 0!==n.tittle?n.tittle:"i",overshoot:void 0!==n.overshoot?n.overshoot:"O"},c=Math.ceil(1.5*a);s.height=c,s.width=.5*c,i.font=e;var h={top:0};i.clearRect(0,0,c,c),i.textBaseline="top",i.fillStyle="black",i.fillText("H",0,0);var m=u(i.getImageData(0,0,c,c));i.clearRect(0,0,c,c),i.textBaseline="bottom",i.fillText("H",0,c);var d=u(i.getImageData(0,0,c,c));h.lineHeight=h.bottom=c-d+m,i.clearRect(0,0,c,c),i.textBaseline="alphabetic",i.fillText("H",0,c);var o=c-u(i.getImageData(0,0,c,c))-1+m;h.baseline=h.alphabetic=o,i.clearRect(0,0,c,c),i.textBaseline="middle",i.fillText("H",0,.5*c);var b=u(i.getImageData(0,0,c,c));h.median=h.middle=c-b-1+m-.5*c,i.clearRect(0,0,c,c),i.textBaseline="hanging",i.fillText("H",0,.5*c);var g=u(i.getImageData(0,0,c,c));h.hanging=c-g-1+m-.5*c,i.clearRect(0,0,c,c),i.textBaseline="ideographic",i.fillText("H",0,c);var w=u(i.getImageData(0,0,c,c));if(h.ideographic=c-w-1+m,l.upper&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(l.upper,0,0),h.upper=u(i.getImageData(0,0,c,c)),h.capHeight=h.baseline-h.upper),l.lower&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(l.lower,0,0),h.lower=u(i.getImageData(0,0,c,c)),h.xHeight=h.baseline-h.lower),l.tittle&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(l.tittle,0,0),h.tittle=u(i.getImageData(0,0,c,c))),l.ascent&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(l.ascent,0,0),h.ascent=u(i.getImageData(0,0,c,c))),l.descent&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(l.descent,0,0),h.descent=y(i.getImageData(0,0,c,c))),l.overshoot){i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(l.overshoot,0,0);var _=y(i.getImageData(0,0,c,c));h.overshoot=_-o}for(var A in h)h[A]/=a;return h.em=a,p.cache[t]=h,v(h,f)}function v(e,n){var t={};for(var a in"string"==typeof n&&(n=e[n]),e)"em"!==a&&(t[a]=e[a]-n);return t}function u(e){for(var n=e.height,t=e.data,a=3;a<t.length;a+=4)if(0!==t[a])return Math.floor(.25*(a-3)/n)}function y(e){for(var n=e.height,t=e.data,a=t.length-1;a>0;a-=4)if(0!==t[a])return Math.floor(.25*(a-3)/n)}Q.exports=p,p.canvas=document.createElement("canvas"),p.cache={}},{}],194:[function(x,Q,K){Q.exports=function(p,v){if("string"!=typeof p)throw new TypeError("must specify type string");if(v=v||{},"undefined"==typeof document&&!v.canvas)return null;var u=v.canvas||document.createElement("canvas");"number"==typeof v.width&&(u.width=v.width),"number"==typeof v.height&&(u.height=v.height);var y,e=v;try{var n=[p];0===p.indexOf("webgl")&&n.push("experimental-"+p);for(var t=0;t<n.length;t++)if(y=u.getContext(n[t],e))return y}catch(a){y=null}return y||null}},{}],195:[function(x,Q,K){Q.exports=function(p,v){var u=v[0],y=v[1],e=v[2],n=v[3],t=v[4],a=v[5],r=v[6],f=v[7],s=v[8],i=v[9],l=v[10],c=v[11],h=v[12],m=v[13],d=v[14],o=v[15];return p[0]=a*(l*o-c*d)-i*(r*o-f*d)+m*(r*c-f*l),p[1]=-(y*(l*o-c*d)-i*(e*o-n*d)+m*(e*c-n*l)),p[2]=y*(r*o-f*d)-a*(e*o-n*d)+m*(e*f-n*r),p[3]=-(y*(r*c-f*l)-a*(e*c-n*l)+i*(e*f-n*r)),p[4]=-(t*(l*o-c*d)-s*(r*o-f*d)+h*(r*c-f*l)),p[5]=u*(l*o-c*d)-s*(e*o-n*d)+h*(e*c-n*l),p[6]=-(u*(r*o-f*d)-t*(e*o-n*d)+h*(e*f-n*r)),p[7]=u*(r*c-f*l)-t*(e*c-n*l)+s*(e*f-n*r),p[8]=t*(i*o-c*m)-s*(a*o-f*m)+h*(a*c-f*i),p[9]=-(u*(i*o-c*m)-s*(y*o-n*m)+h*(y*c-n*i)),p[10]=u*(a*o-f*m)-t*(y*o-n*m)+h*(y*f-n*a),p[11]=-(u*(a*c-f*i)-t*(y*c-n*i)+s*(y*f-n*a)),p[12]=-(t*(i*d-l*m)-s*(a*d-r*m)+h*(a*l-r*i)),p[13]=u*(i*d-l*m)-s*(y*d-e*m)+h*(y*l-e*i),p[14]=-(u*(a*d-r*m)-t*(y*d-e*m)+h*(y*r-e*a)),p[15]=u*(a*l-r*i)-t*(y*l-e*i)+s*(y*r-e*a),p}},{}],196:[function(x,Q,K){Q.exports=function(p){var v=new Float32Array(16);return v[0]=p[0],v[1]=p[1],v[2]=p[2],v[3]=p[3],v[4]=p[4],v[5]=p[5],v[6]=p[6],v[7]=p[7],v[8]=p[8],v[9]=p[9],v[10]=p[10],v[11]=p[11],v[12]=p[12],v[13]=p[13],v[14]=p[14],v[15]=p[15],v}},{}],197:[function(x,Q,K){Q.exports=function(p,v){return p[0]=v[0],p[1]=v[1],p[2]=v[2],p[3]=v[3],p[4]=v[4],p[5]=v[5],p[6]=v[6],p[7]=v[7],p[8]=v[8],p[9]=v[9],p[10]=v[10],p[11]=v[11],p[12]=v[12],p[13]=v[13],p[14]=v[14],p[15]=v[15],p}},{}],198:[function(x,Q,K){Q.exports=function(){var p=new Float32Array(16);return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],199:[function(x,Q,K){Q.exports=function(p){var v=p[0],u=p[1],y=p[2],e=p[3],n=p[4],t=p[5],a=p[6],r=p[7],f=p[8],s=p[9],i=p[10],l=p[11],c=p[12],h=p[13],m=p[14],d=p[15];return(v*t-u*n)*(i*d-l*m)-(v*a-y*n)*(s*d-l*h)+(v*r-e*n)*(s*m-i*h)+(u*a-y*t)*(f*d-l*c)-(u*r-e*t)*(f*m-i*c)+(y*r-e*a)*(f*h-s*c)}},{}],200:[function(x,Q,K){Q.exports=function(p,v){var u=v[0],y=v[1],e=v[2],n=v[3],t=u+u,a=y+y,r=e+e,f=u*t,s=y*t,i=y*a,l=e*t,c=e*a,h=e*r,m=n*t,d=n*a,o=n*r;return p[0]=1-i-h,p[1]=s+o,p[2]=l-d,p[3]=0,p[4]=s-o,p[5]=1-f-h,p[6]=c+m,p[7]=0,p[8]=l+d,p[9]=c-m,p[10]=1-f-i,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],201:[function(x,Q,K){Q.exports=function(p,v,u){var y,e,n,t=u[0],a=u[1],r=u[2],f=Math.sqrt(t*t+a*a+r*r);return Math.abs(f)<1e-6?null:(t*=f=1/f,a*=f,r*=f,y=Math.sin(v),e=Math.cos(v),p[0]=t*t*(n=1-e)+e,p[1]=a*t*n+r*y,p[2]=r*t*n-a*y,p[3]=0,p[4]=t*a*n-r*y,p[5]=a*a*n+e,p[6]=r*a*n+t*y,p[7]=0,p[8]=t*r*n+a*y,p[9]=a*r*n-t*y,p[10]=r*r*n+e,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p)}},{}],202:[function(x,Q,K){Q.exports=function(p,v,u){var y=v[0],e=v[1],n=v[2],t=v[3],a=y+y,r=e+e,f=n+n,s=y*a,i=y*r,l=y*f,c=e*r,h=e*f,m=n*f,d=t*a,o=t*r,b=t*f;return p[0]=1-(c+m),p[1]=i+b,p[2]=l-o,p[3]=0,p[4]=i-b,p[5]=1-(s+m),p[6]=h+d,p[7]=0,p[8]=l+o,p[9]=h-d,p[10]=1-(s+c),p[11]=0,p[12]=u[0],p[13]=u[1],p[14]=u[2],p[15]=1,p}},{}],203:[function(x,Q,K){Q.exports=function(p,v){return p[0]=v[0],p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=v[1],p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=v[2],p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],204:[function(x,Q,K){Q.exports=function(p,v){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=v[0],p[13]=v[1],p[14]=v[2],p[15]=1,p}},{}],205:[function(x,Q,K){Q.exports=function(p,v){var u=Math.sin(v),y=Math.cos(v);return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=y,p[6]=u,p[7]=0,p[8]=0,p[9]=-u,p[10]=y,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],206:[function(x,Q,K){Q.exports=function(p,v){var u=Math.sin(v),y=Math.cos(v);return p[0]=y,p[1]=0,p[2]=-u,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=u,p[9]=0,p[10]=y,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],207:[function(x,Q,K){Q.exports=function(p,v){var u=Math.sin(v),y=Math.cos(v);return p[0]=y,p[1]=u,p[2]=0,p[3]=0,p[4]=-u,p[5]=y,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],208:[function(x,Q,K){Q.exports=function(p,v,u,y,e,n,t){var a=1/(u-v),r=1/(e-y),f=1/(n-t);return p[0]=2*n*a,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=2*n*r,p[6]=0,p[7]=0,p[8]=(u+v)*a,p[9]=(e+y)*r,p[10]=(t+n)*f,p[11]=-1,p[12]=0,p[13]=0,p[14]=t*n*2*f,p[15]=0,p}},{}],209:[function(x,Q,K){Q.exports=function(p){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],210:[function(x,Q,K){Q.exports={create:x("./create"),clone:x("./clone"),copy:x("./copy"),identity:x("./identity"),transpose:x("./transpose"),invert:x("./invert"),adjoint:x("./adjoint"),determinant:x("./determinant"),multiply:x("./multiply"),translate:x("./translate"),scale:x("./scale"),rotate:x("./rotate"),rotateX:x("./rotateX"),rotateY:x("./rotateY"),rotateZ:x("./rotateZ"),fromRotation:x("./fromRotation"),fromRotationTranslation:x("./fromRotationTranslation"),fromScaling:x("./fromScaling"),fromTranslation:x("./fromTranslation"),fromXRotation:x("./fromXRotation"),fromYRotation:x("./fromYRotation"),fromZRotation:x("./fromZRotation"),fromQuat:x("./fromQuat"),frustum:x("./frustum"),perspective:x("./perspective"),perspectiveFromFieldOfView:x("./perspectiveFromFieldOfView"),ortho:x("./ortho"),lookAt:x("./lookAt"),str:x("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(x,Q,K){Q.exports=function(p,v){var u=v[0],y=v[1],e=v[2],n=v[3],t=v[4],a=v[5],r=v[6],f=v[7],s=v[8],i=v[9],l=v[10],c=v[11],h=v[12],m=v[13],d=v[14],o=v[15],b=u*a-y*t,g=u*r-e*t,w=u*f-n*t,_=y*r-e*a,A=y*f-n*a,T=e*f-n*r,E=s*m-i*h,k=s*d-l*h,O=s*o-c*h,D=i*d-l*m,S=i*o-c*m,C=l*o-c*d,z=b*C-g*S+w*D+_*O-A*k+T*E;return z?(p[0]=(a*C-r*S+f*D)*(z=1/z),p[1]=(e*S-y*C-n*D)*z,p[2]=(m*T-d*A+o*_)*z,p[3]=(l*A-i*T-c*_)*z,p[4]=(r*O-t*C-f*k)*z,p[5]=(u*C-e*O+n*k)*z,p[6]=(d*w-h*T-o*g)*z,p[7]=(s*T-l*w+c*g)*z,p[8]=(t*S-a*O+f*E)*z,p[9]=(y*O-u*S-n*E)*z,p[10]=(h*A-m*w+o*b)*z,p[11]=(i*w-s*A-c*b)*z,p[12]=(a*k-t*D-r*E)*z,p[13]=(u*D-y*k+e*E)*z,p[14]=(m*g-h*_-d*b)*z,p[15]=(s*_-i*g+l*b)*z,p):null}},{}],212:[function(x,Q,K){var p=x("./identity");Q.exports=function(v,u,y,e){var n,t,a,r,f,s,i,l,c,h,m=u[0],d=u[1],o=u[2],b=e[0],g=e[1],w=e[2],_=y[0],A=y[1],T=y[2];return Math.abs(m-_)<1e-6&&Math.abs(d-A)<1e-6&&Math.abs(o-T)<1e-6?p(v):(i=m-_,l=d-A,c=o-T,n=g*(c*=h=1/Math.sqrt(i*i+l*l+c*c))-w*(l*=h),t=w*(i*=h)-b*c,a=b*l-g*i,(h=Math.sqrt(n*n+t*t+a*a))?(n*=h=1/h,t*=h,a*=h):(n=0,t=0,a=0),r=l*a-c*t,f=c*n-i*a,s=i*t-l*n,(h=Math.sqrt(r*r+f*f+s*s))?(r*=h=1/h,f*=h,s*=h):(r=0,f=0,s=0),v[0]=n,v[1]=r,v[2]=i,v[3]=0,v[4]=t,v[5]=f,v[6]=l,v[7]=0,v[8]=a,v[9]=s,v[10]=c,v[11]=0,v[12]=-(n*m+t*d+a*o),v[13]=-(r*m+f*d+s*o),v[14]=-(i*m+l*d+c*o),v[15]=1,v)}},{"./identity":209}],213:[function(x,Q,K){Q.exports=function(p,v,u){var y=v[0],e=v[1],n=v[2],t=v[3],a=v[4],r=v[5],f=v[6],s=v[7],i=v[8],l=v[9],c=v[10],h=v[11],m=v[12],d=v[13],o=v[14],b=v[15],g=u[0],w=u[1],_=u[2],A=u[3];return p[0]=g*y+w*a+_*i+A*m,p[1]=g*e+w*r+_*l+A*d,p[2]=g*n+w*f+_*c+A*o,p[3]=g*t+w*s+_*h+A*b,p[4]=(g=u[4])*y+(w=u[5])*a+(_=u[6])*i+(A=u[7])*m,p[5]=g*e+w*r+_*l+A*d,p[6]=g*n+w*f+_*c+A*o,p[7]=g*t+w*s+_*h+A*b,p[8]=(g=u[8])*y+(w=u[9])*a+(_=u[10])*i+(A=u[11])*m,p[9]=g*e+w*r+_*l+A*d,p[10]=g*n+w*f+_*c+A*o,p[11]=g*t+w*s+_*h+A*b,p[12]=(g=u[12])*y+(w=u[13])*a+(_=u[14])*i+(A=u[15])*m,p[13]=g*e+w*r+_*l+A*d,p[14]=g*n+w*f+_*c+A*o,p[15]=g*t+w*s+_*h+A*b,p}},{}],214:[function(x,Q,K){Q.exports=function(p,v,u,y,e,n,t){var a=1/(v-u),r=1/(y-e),f=1/(n-t);return p[0]=-2*a,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=-2*r,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=2*f,p[11]=0,p[12]=(v+u)*a,p[13]=(e+y)*r,p[14]=(t+n)*f,p[15]=1,p}},{}],215:[function(x,Q,K){Q.exports=function(p,v,u,y,e){var n=1/Math.tan(v/2),t=1/(y-e);return p[0]=n/u,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=n,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=(e+y)*t,p[11]=-1,p[12]=0,p[13]=0,p[14]=2*e*y*t,p[15]=0,p}},{}],216:[function(x,Q,K){Q.exports=function(p,v,u,y){var e=Math.tan(v.upDegrees*Math.PI/180),n=Math.tan(v.downDegrees*Math.PI/180),t=Math.tan(v.leftDegrees*Math.PI/180),a=Math.tan(v.rightDegrees*Math.PI/180),r=2/(t+a),f=2/(e+n);return p[0]=r,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=f,p[6]=0,p[7]=0,p[8]=-(t-a)*r*.5,p[9]=(e-n)*f*.5,p[10]=y/(u-y),p[11]=-1,p[12]=0,p[13]=0,p[14]=y*u/(u-y),p[15]=0,p}},{}],217:[function(x,Q,K){Q.exports=function(p,v,u,y){var e,n,t,a,r,f,s,i,l,c,h,m,d,o,b,g,w,_,A,T,E,k,O,D,S=y[0],C=y[1],z=y[2],B=Math.sqrt(S*S+C*C+z*z);return Math.abs(B)<1e-6?null:(S*=B=1/B,C*=B,z*=B,e=Math.sin(u),n=Math.cos(u),r=v[1],f=v[2],s=v[3],l=v[5],c=v[6],h=v[7],d=v[9],o=v[10],b=v[11],A=S*C*(t=1-n)-z*e,T=C*C*t+n,E=z*C*t+S*e,k=S*z*t+C*e,O=C*z*t-S*e,D=z*z*t+n,p[0]=(a=v[0])*(g=S*S*t+n)+(i=v[4])*(w=C*S*t+z*e)+(m=v[8])*(_=z*S*t-C*e),p[1]=r*g+l*w+d*_,p[2]=f*g+c*w+o*_,p[3]=s*g+h*w+b*_,p[4]=a*A+i*T+m*E,p[5]=r*A+l*T+d*E,p[6]=f*A+c*T+o*E,p[7]=s*A+h*T+b*E,p[8]=a*k+i*O+m*D,p[9]=r*k+l*O+d*D,p[10]=f*k+c*O+o*D,p[11]=s*k+h*O+b*D,v!==p&&(p[12]=v[12],p[13]=v[13],p[14]=v[14],p[15]=v[15]),p)}},{}],218:[function(x,Q,K){Q.exports=function(p,v,u){var y=Math.sin(u),e=Math.cos(u),n=v[4],t=v[5],a=v[6],r=v[7],f=v[8],s=v[9],i=v[10],l=v[11];return v!==p&&(p[0]=v[0],p[1]=v[1],p[2]=v[2],p[3]=v[3],p[12]=v[12],p[13]=v[13],p[14]=v[14],p[15]=v[15]),p[4]=n*e+f*y,p[5]=t*e+s*y,p[6]=a*e+i*y,p[7]=r*e+l*y,p[8]=f*e-n*y,p[9]=s*e-t*y,p[10]=i*e-a*y,p[11]=l*e-r*y,p}},{}],219:[function(x,Q,K){Q.exports=function(p,v,u){var y=Math.sin(u),e=Math.cos(u),n=v[0],t=v[1],a=v[2],r=v[3],f=v[8],s=v[9],i=v[10],l=v[11];return v!==p&&(p[4]=v[4],p[5]=v[5],p[6]=v[6],p[7]=v[7],p[12]=v[12],p[13]=v[13],p[14]=v[14],p[15]=v[15]),p[0]=n*e-f*y,p[1]=t*e-s*y,p[2]=a*e-i*y,p[3]=r*e-l*y,p[8]=n*y+f*e,p[9]=t*y+s*e,p[10]=a*y+i*e,p[11]=r*y+l*e,p}},{}],220:[function(x,Q,K){Q.exports=function(p,v,u){var y=Math.sin(u),e=Math.cos(u),n=v[0],t=v[1],a=v[2],r=v[3],f=v[4],s=v[5],i=v[6],l=v[7];return v!==p&&(p[8]=v[8],p[9]=v[9],p[10]=v[10],p[11]=v[11],p[12]=v[12],p[13]=v[13],p[14]=v[14],p[15]=v[15]),p[0]=n*e+f*y,p[1]=t*e+s*y,p[2]=a*e+i*y,p[3]=r*e+l*y,p[4]=f*e-n*y,p[5]=s*e-t*y,p[6]=i*e-a*y,p[7]=l*e-r*y,p}},{}],221:[function(x,Q,K){Q.exports=function(p,v,u){var y=u[0],e=u[1],n=u[2];return p[0]=v[0]*y,p[1]=v[1]*y,p[2]=v[2]*y,p[3]=v[3]*y,p[4]=v[4]*e,p[5]=v[5]*e,p[6]=v[6]*e,p[7]=v[7]*e,p[8]=v[8]*n,p[9]=v[9]*n,p[10]=v[10]*n,p[11]=v[11]*n,p[12]=v[12],p[13]=v[13],p[14]=v[14],p[15]=v[15],p}},{}],222:[function(x,Q,K){Q.exports=function(p){return"mat4("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+", "+p[4]+", "+p[5]+", "+p[6]+", "+p[7]+", "+p[8]+", "+p[9]+", "+p[10]+", "+p[11]+", "+p[12]+", "+p[13]+", "+p[14]+", "+p[15]+")"}},{}],223:[function(x,Q,K){Q.exports=function(p,v,u){var y,e,n,t,a,r,f,s,i,l,c,h,m=u[0],d=u[1],o=u[2];return v===p?(p[12]=v[0]*m+v[4]*d+v[8]*o+v[12],p[13]=v[1]*m+v[5]*d+v[9]*o+v[13],p[14]=v[2]*m+v[6]*d+v[10]*o+v[14],p[15]=v[3]*m+v[7]*d+v[11]*o+v[15]):(e=v[1],n=v[2],t=v[3],a=v[4],r=v[5],f=v[6],s=v[7],i=v[8],l=v[9],c=v[10],h=v[11],p[0]=y=v[0],p[1]=e,p[2]=n,p[3]=t,p[4]=a,p[5]=r,p[6]=f,p[7]=s,p[8]=i,p[9]=l,p[10]=c,p[11]=h,p[12]=y*m+a*d+i*o+v[12],p[13]=e*m+r*d+l*o+v[13],p[14]=n*m+f*d+c*o+v[14],p[15]=t*m+s*d+h*o+v[15]),p}},{}],224:[function(x,Q,K){Q.exports=function(p,v){if(p===v){var u=v[1],y=v[2],e=v[3],n=v[6],t=v[7],a=v[11];p[1]=v[4],p[2]=v[8],p[3]=v[12],p[4]=u,p[6]=v[9],p[7]=v[13],p[8]=y,p[9]=n,p[11]=v[14],p[12]=e,p[13]=t,p[14]=a}else p[0]=v[0],p[1]=v[4],p[2]=v[8],p[3]=v[12],p[4]=v[1],p[5]=v[5],p[6]=v[9],p[7]=v[13],p[8]=v[2],p[9]=v[6],p[10]=v[10],p[11]=v[14],p[12]=v[3],p[13]=v[7],p[14]=v[11],p[15]=v[15];return p}},{}],225:[function(x,Q,K){"use strict";var p=x("css-font"),v=x("pick-by-alias"),u=x("regl"),y=x("gl-util/context"),e=x("es6-weak-map"),n=x("color-normalize"),t=x("font-atlas"),a=x("typedarray-pool"),r=x("parse-rect"),f=x("is-plain-obj"),s=x("parse-unit"),i=x("to-px"),l=x("detect-kerning"),c=x("object-assign"),h=x("font-measure"),m=x("flatten-vertex-data"),d=x("bit-twiddle").nextPow2,o=new e,b=!1;if(document.body){var g=document.body.appendChild(document.createElement("div"));g.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(g).fontStretch&&(b=!0),document.body.removeChild(g)}var w=function(_){var A;this.gl="function"==typeof(A=_)&&A._gl&&A.prop&&A.texture&&A.buffer?(_={regl:_}).regl._gl:y(_),this.shader=o.get(this.gl),this.regl=this.shader?this.shader.regl:_.regl||u({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),o.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(f(_)?_:{})};w.prototype.createShader=function(){var _=this.regl,A=_({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:_.prop("count"),offset:_.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:_.this("sizeBuffer")},width:{offset:0,stride:8,buffer:_.this("sizeBuffer")},char:_.this("charBuffer"),position:_.this("position")},uniforms:{atlasSize:function(T,E){return[E.atlas.width,E.atlas.height]},atlasDim:function(T,E){return[E.atlas.cols,E.atlas.rows]},atlas:function(T,E){return E.atlas.texture},charStep:function(T,E){return E.atlas.step},em:function(T,E){return E.atlas.em},color:_.prop("color"),opacity:_.prop("opacity"),viewport:_.this("viewportArray"),scale:_.this("scale"),align:_.prop("align"),baseline:_.prop("baseline"),translate:_.this("translate"),positionOffset:_.prop("positionOffset")},primitive:"points",viewport:_.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:_,draw:A,atlas:{}}},w.prototype.update=function(_){var A=this;if("string"==typeof _)_={text:_};else if(!_)return;null!=(_=v(_,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(_.opacity)?_.opacity.map(function(me){return parseFloat(me)}):parseFloat(_.opacity)),null!=_.viewport&&(this.viewport=r(_.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=_.kerning&&(this.kerning=_.kerning),null!=_.offset&&("number"==typeof _.offset&&(_.offset=[_.offset,0]),this.positionOffset=m(_.offset)),_.direction&&(this.direction=_.direction),_.range&&(this.range=_.range,this.scale=[1/(_.range[2]-_.range[0]),1/(_.range[3]-_.range[1])],this.translate=[-_.range[0],-_.range[1]]),_.scale&&(this.scale=_.scale),_.translate&&(this.translate=_.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||_.font||(_.font=w.baseFontSize+"px sans-serif");var T,E=!1,k=!1;if(_.font&&(Array.isArray(_.font)?_.font:[_.font]).forEach(function(me,Ae){if("string"==typeof me)try{me=p.parse(me)}catch(tt){me=p.parse(w.baseFontSize+"px "+me)}else me=p.parse(p.stringify(me));var we=p.stringify({size:w.baseFontSize,family:me.family,stretch:b?me.stretch:void 0,variant:me.variant,weight:me.weight,style:me.style}),Se=s(me.size),Pe=Math.round(Se[0]*i(Se[1]));if(Pe!==A.fontSize[Ae]&&(k=!0,A.fontSize[Ae]=Pe),!(A.font[Ae]&&we==A.font[Ae].baseString||(E=!0,A.font[Ae]=w.fonts[we],A.font[Ae]))){var ze=me.family.join(", "),He=[me.style];me.style!=me.variant&&He.push(me.variant),me.variant!=me.weight&&He.push(me.weight),b&&me.weight!=me.stretch&&He.push(me.stretch),A.font[Ae]={baseString:we,family:ze,weight:me.weight,stretch:me.stretch,style:me.style,variant:me.variant,width:{},kerning:{},metrics:h(ze,{origin:"top",fontSize:w.baseFontSize,fontStyle:He.join(" ")})},w.fonts[we]=A.font[Ae]}}),(E||k)&&this.font.forEach(function(me,Ae){var we=p.stringify({size:A.fontSize[Ae],family:me.family,stretch:b?me.stretch:void 0,variant:me.variant,weight:me.weight,style:me.style});A.fontAtlas[Ae]=A.shader.atlas[we],A.fontAtlas[Ae]||(A.shader.atlas[we]=A.fontAtlas[Ae]={fontString:we,step:2*Math.ceil(A.fontSize[Ae]*me.metrics.bottom*.5),em:A.fontSize[Ae],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:A.regl.texture()}),null==_.text&&(_.text=A.text)}),"string"==typeof _.text&&_.position&&_.position.length>2){for(var O=Array(.5*_.position.length),D=0;D<O.length;D++)O[D]=_.text;_.text=O}if(null!=_.text||E){if(this.textOffsets=[0],Array.isArray(_.text)){this.count=_.text[0].length,this.counts=[this.count];for(var S=1;S<_.text.length;S++)this.textOffsets[S]=this.textOffsets[S-1]+_.text[S-1].length,this.count+=_.text[S].length,this.counts.push(_.text[S].length);this.text=_.text.join("")}else this.text=_.text,this.count=this.text.length,this.counts=[this.count];T=[],this.font.forEach(function(me,Ae){w.atlasContext.font=me.baseString;for(var we=A.fontAtlas[Ae],Se=0;Se<A.text.length;Se++){var Pe=A.text.charAt(Se);if(null==we.ids[Pe]&&(we.ids[Pe]=we.chars.length,we.chars.push(Pe),T.push(Pe)),null==me.width[Pe]&&(me.width[Pe]=w.atlasContext.measureText(Pe).width/w.baseFontSize,A.kerning)){var ze=[];for(var He in me.width)ze.push(He+Pe,Pe+He);c(me.kerning,l(me.family,{pairs:ze}))}}})}if(_.position)if(_.position.length>2){for(var C=!_.position[0].length,z=a.mallocFloat(2*this.count),B=0,U=0;B<this.counts.length;B++){var G=this.counts[B];if(C)for(var X=0;X<G;X++)z[U++]=_.position[2*B],z[U++]=_.position[2*B+1];else for(var Z=0;Z<G;Z++)z[U++]=_.position[B][0],z[U++]=_.position[B][1]}this.position.call?this.position({type:"float",data:z}):this.position=this.regl.buffer({type:"float",data:z}),a.freeFloat(z)}else this.position.destroy&&this.position.destroy(),this.position={constant:_.position};if(_.text||E){var q=a.mallocUint8(this.count),W=a.mallocFloat(2*this.count);this.textWidth=[];for(var te=0,R=0;te<this.counts.length;te++){for(var N=this.counts[te],V=this.font[te]||this.font[0],ee=this.fontAtlas[te]||this.fontAtlas[0],j=0;j<N;j++){var J=this.text.charAt(R),$=this.text.charAt(R-1);if(q[R]=ee.ids[J],W[2*R]=V.width[J],j){var se=W[2*R-1]+.5*W[2*R-2]+.5*W[2*R];if(this.kerning){var ie=V.kerning[$+J];ie&&(se+=.001*ie)}W[2*R+1]=se}else W[2*R+1]=.5*W[2*R];R++}this.textWidth.push(W.length?.5*W[2*R-2]+W[2*R-1]:0)}_.align||(_.align=this.align),this.charBuffer({data:q,type:"uint8",usage:"stream"}),this.sizeBuffer({data:W,type:"float",usage:"stream"}),a.freeUint8(q),a.freeFloat(W),T.length&&this.font.forEach(function(me,Ae){var we=A.fontAtlas[Ae],Se=we.step,Pe=Math.floor(w.maxAtlasSize/Se),ze=Math.min(Pe,we.chars.length),He=Math.ceil(we.chars.length/ze),tt=d(ze*Se),Oe=d(He*Se);we.width=tt,we.height=Oe,we.rows=He,we.cols=ze,we.em&&we.texture({data:t({canvas:w.atlasCanvas,font:we.fontString,chars:we.chars,shape:[tt,Oe],step:[Se,Se]})})})}if(_.align&&(this.align=_.align,this.alignOffset=this.textWidth.map(function(me,Ae){var we=Array.isArray(A.align)?A.align.length>1?A.align[Ae]:A.align[0]:A.align;if("number"==typeof we)return we;switch(we){case"right":case"end":return-me;case"center":case"centre":case"middle":return.5*-me}return 0})),null==this.baseline&&null==_.baseline&&(_.baseline=0),null!=_.baseline&&(this.baseline=_.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(me,Ae){var we=(A.font[Ae]||A.font[0]).metrics,Se=0;return-1*((Se+=.5*we.bottom)+("number"==typeof me?me-we.baseline:-we[me]))})),null!=_.color)if(_.color||(_.color="transparent"),"string"!=typeof _.color&&isNaN(_.color)){var ue;if("number"==typeof _.color[0]&&_.color.length>this.counts.length){var le=_.color.length;ue=a.mallocUint8(le);for(var de=(_.color.subarray||_.color.slice).bind(_.color),ve=0;ve<le;ve+=4)ue.set(n(de(ve,ve+4),"uint8"),ve)}else{var _e=_.color.length;ue=a.mallocUint8(4*_e);for(var be=0;be<_e;be++)ue.set(n(_.color[be]||0,"uint8"),4*be)}this.color=ue}else this.color=n(_.color,"uint8");if(_.position||_.text||_.color||_.baseline||_.align||_.font||_.offset||_.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Te=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Te);for(var he=0;he<this.batch.length;he++)this.batch[he]={count:this.counts.length>1?this.counts[he]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[he]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*he,4*he+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[he]:this.opacity,baseline:null!=this.baselineOffset[he]?this.baselineOffset[he]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[he]?this.alignOffset[he]:this.alignOffset[0]:0,atlas:this.fontAtlas[he]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*he,2*he+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},w.prototype.destroy=function(){},w.prototype.kerning=!0,w.prototype.position={constant:new Float32Array(2)},w.prototype.translate=null,w.prototype.scale=null,w.prototype.font=null,w.prototype.text="",w.prototype.positionOffset=[0,0],w.prototype.opacity=1,w.prototype.color=new Uint8Array([0,0,0,255]),w.prototype.alignOffset=[0,0],w.maxAtlasSize=1024,w.atlasCanvas=document.createElement("canvas"),w.atlasContext=w.atlasCanvas.getContext("2d",{alpha:!1}),w.baseFontSize=64,w.fonts={},Q.exports=w},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(x,Q,K){(function(p){(function(){"use strict";var v=x("pick-by-alias");function u(n){if(n.container)if(n.container==document.body)document.body.style.width||(n.canvas.width=n.width||n.pixelRatio*p.innerWidth),document.body.style.height||(n.canvas.height=n.height||n.pixelRatio*p.innerHeight);else{var t=n.container.getBoundingClientRect();n.canvas.width=n.width||t.right-t.left,n.canvas.height=n.height||t.bottom-t.top}}function y(n){return"function"==typeof n.getContext&&"width"in n&&"height"in n}function e(){var n=document.createElement("canvas");return n.style.position="absolute",n.style.top=0,n.style.left=0,n}Q.exports=function(n){var t,r;if(n?"string"==typeof n&&(n={container:n}):n={},(n=y(n)||"string"==typeof(t=n).nodeName&&"function"==typeof t.appendChild&&"function"==typeof t.getBoundingClientRect?{container:n}:"function"==typeof(r=n).drawArrays||"function"==typeof r.drawElements?{gl:n}:v(n,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(n.pixelRatio=p.pixelRatio||1),n.gl)return n.gl;if(n.canvas&&(n.container=n.canvas.parentNode),n.container){if("string"==typeof n.container){var a=document.querySelector(n.container);if(!a)throw Error("Element "+n.container+" is not found");n.container=a}y(n.container)?(n.canvas=n.container,n.container=n.canvas.parentNode):n.canvas||(n.canvas=e(),n.container.appendChild(n.canvas),u(n))}else if(!n.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");n.container=document.body||document.documentElement,n.canvas=e(),n.container.appendChild(n.canvas),u(n)}return n.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(r){try{n.gl=n.canvas.getContext(r,n.attrs)}catch(f){}return n.gl}),n.gl}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"pick-by-alias":253}],227:[function(x,Q,K){Q.exports=function(p){"string"==typeof p&&(p=[p]);for(var v=[].slice.call(arguments,1),u=[],y=0;y<p.length-1;y++)u.push(p[y],v[y]||"");return u.push(p[y]),u.join("")}},{}],228:[function(x,Q,K){(function(p){(function(){"use strict";var v,u=x("is-browser");v="function"==typeof p.matchMedia?!p.matchMedia("(hover: none)").matches:u,Q.exports=v}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":232}],229:[function(x,Q,K){"use strict";var p=x("is-browser");Q.exports=p&&function(){var v=!1;try{var u=Object.defineProperty({},"passive",{get:function(){v=!0}});window.addEventListener("test",null,u),window.removeEventListener("test",null,u)}catch(y){v=!1}return v}()},{"is-browser":232}],230:[function(x,Q,K){K.read=function(p,v,u,y,e){var n,t,a=8*e-y-1,r=(1<<a)-1,f=r>>1,s=-7,i=u?e-1:0,l=u?-1:1,c=p[v+i];for(i+=l,n=c&(1<<-s)-1,c>>=-s,s+=a;s>0;n=256*n+p[v+i],i+=l,s-=8);for(t=n&(1<<-s)-1,n>>=-s,s+=y;s>0;t=256*t+p[v+i],i+=l,s-=8);if(0===n)n=1-f;else{if(n===r)return t?NaN:1/0*(c?-1:1);t+=Math.pow(2,y),n-=f}return(c?-1:1)*t*Math.pow(2,n-y)},K.write=function(p,v,u,y,e,n){var t,a,r,f=8*n-e-1,s=(1<<f)-1,i=s>>1,l=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,c=y?0:n-1,h=y?1:-1,m=v<0||0===v&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(a=isNaN(v)?1:0,t=s):(t=Math.floor(Math.log(v)/Math.LN2),v*(r=Math.pow(2,-t))<1&&(t--,r*=2),(v+=t+i>=1?l/r:l*Math.pow(2,1-i))*r>=2&&(t++,r/=2),t+i>=s?(a=0,t=s):t+i>=1?(a=(v*r-1)*Math.pow(2,e),t+=i):(a=v*Math.pow(2,i-1)*Math.pow(2,e),t=0));e>=8;p[u+c]=255&a,c+=h,a/=256,e-=8);for(t=t<<e|a,f+=e;f>0;p[u+c]=255&t,c+=h,t/=256,f-=8);p[u+c-h]|=128*m}},{}],231:[function(x,Q,K){Q.exports="function"==typeof Object.create?function(p,v){v&&(p.super_=v,p.prototype=Object.create(v.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}))}:function(p,v){if(v){p.super_=v;var u=function(){};u.prototype=v.prototype,p.prototype=new u,p.prototype.constructor=p}}},{}],232:[function(x,Q,K){Q.exports=!0},{}],233:[function(x,Q,K){"use strict";Q.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(x,Q,K){"use strict";Q.exports=u,Q.exports.isMobile=u,Q.exports.default=u;var p=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,v=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function u(y){y||(y={});var e=y.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var n=y.tablet?v.test(e):p.test(e);return!n&&y.tablet&&y.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(n=!0),n}},{}],235:[function(x,Q,K){"use strict";Q.exports=function(p){var v=typeof p;return null!==p&&("object"===v||"function"===v)}},{}],236:[function(x,Q,K){"use strict";var p=Object.prototype.toString;Q.exports=function(v){var u;return"[object Object]"===p.call(v)&&(null===(u=Object.getPrototypeOf(v))||u===Object.getPrototypeOf({}))}},{}],237:[function(x,Q,K){"use strict";Q.exports=function(p){for(var v,u=p.length,y=0;y<u;y++)if(((v=p.charCodeAt(y))<9||v>13)&&32!==v&&133!==v&&160!==v&&5760!==v&&6158!==v&&(v<8192||v>8205)&&8232!==v&&8233!==v&&8239!==v&&8287!==v&&8288!==v&&12288!==v&&65279!==v)return!1;return!0}},{}],238:[function(x,Q,K){"use strict";Q.exports=function(p){return"string"==typeof p&&(p=p.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(p)&&/[\dz]$/i.test(p)&&p.length>4))}},{}],239:[function(x,Q,K){var p,v;p=this,v=function(){"use strict";var p,v,u;function y(e,n){if(p)if(v){var t="var sharedChunk = {}; ("+p+")(sharedChunk); ("+v+")(sharedChunk);",a={};p(a),(u=n(a)).workerUrl=window.URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}else v=n;else p=n}return y(0,function(e){function n(M,I){return M(I={exports:{}},I.exports),I.exports}var t=a;function a(M,I,Y,ae){this.cx=3*M,this.bx=3*(Y-M)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*I,this.by=3*(ae-I)-this.cy,this.ay=1-this.cy-this.by,this.p1x=M,this.p1y=ae,this.p2x=Y,this.p2y=ae}a.prototype.sampleCurveX=function(M){return((this.ax*M+this.bx)*M+this.cx)*M},a.prototype.sampleCurveY=function(M){return((this.ay*M+this.by)*M+this.cy)*M},a.prototype.sampleCurveDerivativeX=function(M){return(3*this.ax*M+2*this.bx)*M+this.cx},a.prototype.solveCurveX=function(M,I){var Y,ae,pe,ye,Ee;for(void 0===I&&(I=1e-6),pe=M,Ee=0;Ee<8;Ee++){if(ye=this.sampleCurveX(pe)-M,Math.abs(ye)<I)return pe;var je=this.sampleCurveDerivativeX(pe);if(Math.abs(je)<1e-6)break;pe-=ye/je}if((pe=M)<(Y=0))return Y;if(pe>(ae=1))return ae;for(;Y<ae;){if(ye=this.sampleCurveX(pe),Math.abs(ye-M)<I)return pe;M>ye?Y=pe:ae=pe,pe=.5*(ae-Y)+Y}return pe},a.prototype.solve=function(M,I){return this.sampleCurveY(this.solveCurveX(M,I))};var r=f;function f(M,I){this.x=M,this.y=I}function s(M,I,Y,ae){var pe=new t(M,I,Y,ae);return function(ye){return pe.solve(ye)}}f.prototype={clone:function(){return new f(this.x,this.y)},add:function(M){return this.clone()._add(M)},sub:function(M){return this.clone()._sub(M)},multByPoint:function(M){return this.clone()._multByPoint(M)},divByPoint:function(M){return this.clone()._divByPoint(M)},mult:function(M){return this.clone()._mult(M)},div:function(M){return this.clone()._div(M)},rotate:function(M){return this.clone()._rotate(M)},rotateAround:function(M,I){return this.clone()._rotateAround(M,I)},matMult:function(M){return this.clone()._matMult(M)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(M){return this.x===M.x&&this.y===M.y},dist:function(M){return Math.sqrt(this.distSqr(M))},distSqr:function(M){var I=M.x-this.x,Y=M.y-this.y;return I*I+Y*Y},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(M){return Math.atan2(this.y-M.y,this.x-M.x)},angleWith:function(M){return this.angleWithSep(M.x,M.y)},angleWithSep:function(M,I){return Math.atan2(this.x*I-this.y*M,this.x*M+this.y*I)},_matMult:function(M){var Y=M[2]*this.x+M[3]*this.y;return this.x=M[0]*this.x+M[1]*this.y,this.y=Y,this},_add:function(M){return this.x+=M.x,this.y+=M.y,this},_sub:function(M){return this.x-=M.x,this.y-=M.y,this},_mult:function(M){return this.x*=M,this.y*=M,this},_div:function(M){return this.x/=M,this.y/=M,this},_multByPoint:function(M){return this.x*=M.x,this.y*=M.y,this},_divByPoint:function(M){return this.x/=M.x,this.y/=M.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var M=this.y;return this.y=this.x,this.x=-M,this},_rotate:function(M){var I=Math.cos(M),Y=Math.sin(M),pe=Y*this.x+I*this.y;return this.x=I*this.x-Y*this.y,this.y=pe,this},_rotateAround:function(M,I){var Y=Math.cos(M),ae=Math.sin(M),ye=I.y+ae*(this.x-I.x)+Y*(this.y-I.y);return this.x=I.x+Y*(this.x-I.x)-ae*(this.y-I.y),this.y=ye,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(M){return M instanceof f?M:Array.isArray(M)?new f(M[0],M[1]):M};var i=s(.25,.1,.25,1);function l(M,I,Y){return Math.min(Y,Math.max(I,M))}function c(M,I,Y){var ae=Y-I,pe=((M-I)%ae+ae)%ae+I;return pe===I?Y:pe}function h(M){for(var I=[],Y=arguments.length-1;Y-- >0;)I[Y]=arguments[Y+1];for(var ae=0,pe=I;ae<pe.length;ae+=1){var ye=pe[ae];for(var Ee in ye)M[Ee]=ye[Ee]}return M}var m=1;function d(){return m++}function o(){return function M(I){return I?(I^16*Math.random()>>I/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,M)}()}function b(M){return!!M&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(M)}function g(M,I){M.forEach(function(Y){I[Y]&&(I[Y]=I[Y].bind(I))})}function w(M,I){return-1!==M.indexOf(I,M.length-I.length)}function _(M,I,Y){var ae={};for(var pe in M)ae[pe]=I.call(Y||this,M[pe],pe,M);return ae}function A(M,I,Y){var ae={};for(var pe in M)I.call(Y||this,M[pe],pe,M)&&(ae[pe]=M[pe]);return ae}function T(M){return Array.isArray(M)?M.map(T):"object"==typeof M&&M?_(M,T):M}var E={};function k(M){E[M]||("undefined"!=typeof console&&console.warn(M),E[M]=!0)}function O(M,I,Y){return(Y.y-M.y)*(I.x-M.x)>(I.y-M.y)*(Y.x-M.x)}function D(M){for(var I=0,Y=0,ae=M.length,pe=ae-1,ye=void 0,Ee=void 0;Y<ae;pe=Y++)I+=((Ee=M[pe]).x-(ye=M[Y]).x)*(ye.y+Ee.y);return I}function S(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function C(M){var I={};if(M.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ae,pe,ye,Ee){var je=ye||Ee;return I[pe]=!je||je.toLowerCase(),""}),I["max-age"]){var Y=parseInt(I["max-age"],10);isNaN(Y)?delete I["max-age"]:I["max-age"]=Y}return I}var z=null;function B(M){if(null==z){var I=M.navigator?M.navigator.userAgent:null;z=!!M.safari||!(!I||!(/\b(iPad|iPhone|iPod)\b/.test(I)||I.match("Safari")&&!I.match("Chrome")))}return z}function U(M){try{var I=self[M];return I.setItem("_mapbox_test_",1),I.removeItem("_mapbox_test_"),!0}catch(Y){return!1}}var G,X,Z,q,W=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),te=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,R=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,N={now:W,frame:function(M){var I=te(M);return{cancel:function(){return R(I)}}},getImageData:function(M,I){void 0===I&&(I=0);var Y=self.document.createElement("canvas"),ae=Y.getContext("2d");if(!ae)throw new Error("failed to create canvas 2d context");return Y.width=M.width,Y.height=M.height,ae.drawImage(M,0,0,M.width,M.height),ae.getImageData(-I,-I,M.width+2*I,M.height+2*I)},resolveURL:function(M){return G||(G=self.document.createElement("a")),G.href=M,G.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==X&&(X=self.matchMedia("(prefers-reduced-motion: reduce)")),X.matches)}},V={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ee={supported:!1,testSupport:function(M){j||!q||(J?$(M):Z=M)}},j=!1,J=!1;function $(M){var I=M.createTexture();M.bindTexture(M.TEXTURE_2D,I);try{if(M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,q),M.isContextLost())return;ee.supported=!0}catch(Y){}M.deleteTexture(I),j=!0}self.document&&((q=self.document.createElement("img")).onload=function(){Z&&$(Z),Z=null,J=!0},q.onerror=function(){j=!0,Z=null},q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var re="01",ne=function(M,I){this._transformRequestFn=M,this._customAccessToken=I,this._createSkuToken()};function se(M){return 0===M.indexOf("mapbox:")}ne.prototype._createSkuToken=function(){var M=function(){for(var I="",Y=0;Y<10;Y++)I+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",re,I].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=M.token,this._skuTokenExpiresAt=M.tokenExpiresAt},ne.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ne.prototype.transformRequest=function(M,I){return this._transformRequestFn&&this._transformRequestFn(M,I)||{url:M}},ne.prototype.normalizeStyleURL=function(M,I){if(!se(M))return M;var Y=de(M);return Y.path="/styles/v1"+Y.path,this._makeAPIURL(Y,this._customAccessToken||I)},ne.prototype.normalizeGlyphsURL=function(M,I){if(!se(M))return M;var Y=de(M);return Y.path="/fonts/v1"+Y.path,this._makeAPIURL(Y,this._customAccessToken||I)},ne.prototype.normalizeSourceURL=function(M,I){if(!se(M))return M;var Y=de(M);return Y.path="/v4/"+Y.authority+".json",Y.params.push("secure"),this._makeAPIURL(Y,this._customAccessToken||I)},ne.prototype.normalizeSpriteURL=function(M,I,Y,ae){var pe=de(M);return se(M)?(pe.path="/styles/v1"+pe.path+"/sprite"+I+Y,this._makeAPIURL(pe,this._customAccessToken||ae)):(pe.path+=""+I+Y,ve(pe))},ne.prototype.normalizeTileURL=function(M,I){if(this._isSkuTokenExpired()&&this._createSkuToken(),M&&!se(M))return M;var Y=de(M);Y.path=Y.path.replace(/(\.(png|jpg)\d*)(?=$)/,(N.devicePixelRatio>=2||512===I?"@2x":"")+(ee.supported?".webp":"$1")),Y.path=Y.path.replace(/^.+\/v4\//,"/"),Y.path="/v4"+Y.path;var ye=this._customAccessToken||function(Ee){for(var je=0,$e=Ee;je<$e.length;je+=1){var pt=$e[je].match(/^access_token=(.*)$/);if(pt)return pt[1]}return null}(Y.params)||V.ACCESS_TOKEN;return V.REQUIRE_ACCESS_TOKEN&&ye&&this._skuToken&&Y.params.push("sku="+this._skuToken),this._makeAPIURL(Y,ye)},ne.prototype.canonicalizeTileURL=function(M,I){var Y=de(M);if(!Y.path.match(/(^\/v4\/)/)||!Y.path.match(/\.[\w]+$/))return M;var ae="mapbox://tiles/";ae+=Y.path.replace("/v4/","");var pe=Y.params;return I&&(pe=pe.filter(function(ye){return!ye.match(/^access_token=/)})),pe.length&&(ae+="?"+pe.join("&")),ae},ne.prototype.canonicalizeTileset=function(M,I){for(var Y=!!I&&se(I),ae=[],pe=0,ye=M.tiles||[];pe<ye.length;pe+=1){var Ee=ye[pe];ue(Ee)?ae.push(this.canonicalizeTileURL(Ee,Y)):ae.push(Ee)}return ae},ne.prototype._makeAPIURL=function(M,I){var Y="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ae=de(V.API_URL);if(M.protocol=ae.protocol,M.authority=ae.authority,"/"!==ae.path&&(M.path=""+ae.path+M.path),!V.REQUIRE_ACCESS_TOKEN)return ve(M);if(!(I=I||V.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Y);if("s"===I[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Y);return M.params=M.params.filter(function(pe){return-1===pe.indexOf("access_token")}),M.params.push("access_token="+I),ve(M)};var ie=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ue(M){return ie.test(M)}var le=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function de(M){var I=M.match(le);if(!I)throw new Error("Unable to parse URL object");return{protocol:I[1],authority:I[2],path:I[3]||"/",params:I[4]?I[4].split("&"):[]}}function ve(M){var I=M.params.length?"?"+M.params.join("&"):"";return M.protocol+"://"+M.authority+M.path+I}function _e(M){if(!M)return null;var Y=M.split(".");if(!Y||3!==Y.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(Y[1]).split("").map(function(ae){return"%"+("00"+ae.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(ae){return null}}var be=function(M){this.type=M,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};be.prototype.getStorageKey=function(M){var ae,Y=_e(V.ACCESS_TOKEN);return ae=Y&&Y.u?self.btoa(encodeURIComponent(Y.u).replace(/%([0-9A-F]{2})/g,function(pe,ye){return String.fromCharCode(Number("0x"+ye))})):V.ACCESS_TOKEN||"",M?"mapbox.eventData."+M+":"+ae:"mapbox.eventData:"+ae},be.prototype.fetchEventData=function(){var M=U("localStorage"),I=this.getStorageKey(),Y=this.getStorageKey("uuid");if(M)try{var ae=self.localStorage.getItem(I);ae&&(this.eventData=JSON.parse(ae));var pe=self.localStorage.getItem(Y);pe&&(this.anonId=pe)}catch(ye){k("Unable to read from LocalStorage")}},be.prototype.saveEventData=function(){var M=U("localStorage"),I=this.getStorageKey(),Y=this.getStorageKey("uuid");if(M)try{self.localStorage.setItem(Y,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(I,JSON.stringify(this.eventData))}catch(ae){k("Unable to write to LocalStorage")}},be.prototype.processRequests=function(M){},be.prototype.postEvent=function(M,I,Y,ae){var pe=this;if(V.EVENTS_URL){var ye=de(V.EVENTS_URL);ye.params.push("access_token="+(ae||V.ACCESS_TOKEN||""));var Ee={event:this.type,created:new Date(M).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:re,userId:this.anonId},je=I?h(Ee,I):Ee,$e={url:ve(ye),headers:{"Content-Type":"text/plain"},body:JSON.stringify([je])};this.pendingRequest=Xt($e,function(pt){pe.pendingRequest=null,Y(pt),pe.saveEventData(),pe.processRequests(ae)})}},be.prototype.queueRequest=function(M,I){this.queue.push(M),this.processRequests(I)};var Te,he,me=function(M){function I(){M.call(this,"map.load"),this.success={},this.skuToken=""}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.postMapLoadEvent=function(Y,ae,pe,ye){this.skuToken=pe,(V.EVENTS_URL&&ye||V.ACCESS_TOKEN&&Array.isArray(Y)&&Y.some(function(Ee){return se(Ee)||ue(Ee)}))&&this.queueRequest({id:ae,timestamp:Date.now()},ye)},I.prototype.processRequests=function(Y){var ae=this;if(!this.pendingRequest&&0!==this.queue.length){var pe=this.queue.shift(),ye=pe.id,Ee=pe.timestamp;ye&&this.success[ye]||(this.anonId||this.fetchEventData(),b(this.anonId)||(this.anonId=o()),this.postEvent(Ee,{skuToken:this.skuToken},function(je){je||ye&&(ae.success[ye]=!0)},Y))}},I}(be),Ae=new(function(M){function I(Y){M.call(this,"appUserTurnstile"),this._customAccessToken=Y}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.postTurnstileEvent=function(Y,ae){V.EVENTS_URL&&V.ACCESS_TOKEN&&Array.isArray(Y)&&Y.some(function(pe){return se(pe)||ue(pe)})&&this.queueRequest(Date.now(),ae)},I.prototype.processRequests=function(Y){var ae=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var pe=_e(V.ACCESS_TOKEN),ye=pe?pe.u:V.ACCESS_TOKEN,Ee=ye!==this.eventData.tokenU;b(this.anonId)||(this.anonId=o(),Ee=!0);var je=this.queue.shift();if(this.eventData.lastSuccess){var $e=new Date(this.eventData.lastSuccess),pt=new Date(je),bt=(je-this.eventData.lastSuccess)/864e5;Ee=Ee||bt>=1||bt<-1||$e.getDate()!==pt.getDate()}else Ee=!0;if(!Ee)return this.processRequests();this.postEvent(je,{"enabled.telemetry":!1},function(qt){qt||(ae.eventData.lastSuccess=je,ae.eventData.tokenU=ye)},Y)}},I}(be)),we=Ae.postTurnstileEvent.bind(Ae),Se=new me,Pe=Se.postMapLoadEvent.bind(Se),ze=500,He=50;function tt(){self.caches&&!Te&&(Te=self.caches.open("mapbox-tiles"))}function Be(M){var I=M.indexOf("?");return I<0?M:M.slice(0,I)}var Ye,nt=1/0;function ft(){return null==Ye&&(Ye=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),Ye}var dt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(dt);var Rt=function(M){function I(Y,ae,pe){401===ae&&ue(pe)&&(Y+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),M.call(this,Y),this.status=ae,this.url=pe,this.name=this.constructor.name,this.message=Y}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},I}(Error),Et=S()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function at(M,I){var Y,ae=new self.AbortController,pe=new self.Request(M.url,{method:M.method||"GET",body:M.body,credentials:M.credentials,headers:M.headers,referrer:Et(),signal:ae.signal}),ye=!1,Ee=!1,je=(Y=pe.url).indexOf("sku=")>0&&ue(Y);"json"===M.type&&pe.headers.set("Accept","application/json");var $e=function(bt,qt,tr){if(!Ee){if(bt&&"SecurityError"!==bt.message&&k(bt),qt&&tr)return pt(qt);var Kt=Date.now();self.fetch(pe).then(function(hr){if(hr.ok){var Ar=je?hr.clone():null;return pt(hr,Ar,Kt)}return I(new Rt(hr.statusText,hr.status,M.url))}).catch(function(hr){20!==hr.code&&I(new Error(hr.message))})}},pt=function(bt,qt,tr){("arrayBuffer"===M.type?bt.arrayBuffer():"json"===M.type?bt.json():bt.text()).then(function(Kt){Ee||(qt&&tr&&function(M,I,Y){if(tt(),Te){var ae={status:I.status,statusText:I.statusText,headers:new self.Headers};I.headers.forEach(function(ye,Ee){return ae.headers.set(Ee,ye)});var pe=C(I.headers.get("Cache-Control")||"");pe["no-store"]||(pe["max-age"]&&ae.headers.set("Expires",new Date(Y+1e3*pe["max-age"]).toUTCString()),new Date(ae.headers.get("Expires")).getTime()-Y<42e4||function(ye,Ee){if(void 0===he)try{new Response(new ReadableStream),he=!0}catch(je){he=!1}he?Ee(ye.body):ye.blob().then(Ee)}(I,function(ye){var Ee=new self.Response(ye,ae);tt(),Te&&Te.then(function(je){return je.put(Be(M.url),Ee)}).catch(function(je){return k(je.message)})}))}}(pe,qt,tr),ye=!0,I(null,Kt,bt.headers.get("Cache-Control"),bt.headers.get("Expires")))}).catch(function(Kt){Ee||I(new Error(Kt.message))})};return je?function(M,I){if(tt(),!Te)return I(null);var Y=Be(M.url);Te.then(function(ae){ae.match(Y).then(function(pe){var ye=function(Ee){if(!Ee)return!1;var je=new Date(Ee.headers.get("Expires")||0),$e=C(Ee.headers.get("Cache-Control")||"");return je>Date.now()&&!$e["no-cache"]}(pe);ae.delete(Y),ye&&ae.put(Y,pe.clone()),I(null,pe,ye)}).catch(I)}).catch(I)}(pe,$e):$e(null,null),{cancel:function(){Ee=!0,ye||ae.abort()}}}var lr,Ue,rt=function(M,I){if(!(/^file:/.test(Y=M.url)||/^file:/.test(Et())&&!/^\w+:/.test(Y))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return at(M,I);if(S()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",M,I,void 0,!0)}var Y;return function(ae,pe){var ye=new self.XMLHttpRequest;for(var Ee in ye.open(ae.method||"GET",ae.url,!0),"arrayBuffer"===ae.type&&(ye.responseType="arraybuffer"),ae.headers)ye.setRequestHeader(Ee,ae.headers[Ee]);return"json"===ae.type&&(ye.responseType="text",ye.setRequestHeader("Accept","application/json")),ye.withCredentials="include"===ae.credentials,ye.onerror=function(){pe(new Error(ye.statusText))},ye.onload=function(){if((ye.status>=200&&ye.status<300||0===ye.status)&&null!==ye.response){var je=ye.response;if("json"===ae.type)try{je=JSON.parse(ye.response)}catch($e){return pe($e)}pe(null,je,ye.getResponseHeader("Cache-Control"),ye.getResponseHeader("Expires"))}else pe(new Rt(ye.statusText,ye.status,ae.url))},ye.send(ae.body),{cancel:function(){return ye.abort()}}}(M,I)},St=function(M,I){return rt(h(M,{type:"arrayBuffer"}),I)},Xt=function(M,I){return rt(h(M,{method:"POST"}),I)};lr=[],Ue=0;var Ze=function(M,I){if(ee.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),Ue>=V.MAX_PARALLEL_IMAGE_REQUESTS){var Y={requestParameters:M,callback:I,cancelled:!1,cancel:function(){this.cancelled=!0}};return lr.push(Y),Y}Ue++;var ae=!1,pe=function(){if(!ae)for(ae=!0,Ue--;lr.length&&Ue<V.MAX_PARALLEL_IMAGE_REQUESTS;){var Ee=lr.shift();Ee.cancelled||(Ee.cancel=Ze(Ee.requestParameters,Ee.callback).cancel)}},ye=St(M,function(Ee,je,$e,pt){var qt,tr;pe(),Ee?I(Ee):je&&(ft()?(qt=I,tr=new self.Blob([new Uint8Array(je)],{type:"image/png"}),self.createImageBitmap(tr).then(function(Kt){qt(null,Kt)}).catch(function(Kt){qt(new Error("Could not load image because of "+Kt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(bt,qt,tr,Kt){var hr=new self.Image,Ar=self.URL;hr.onload=function(){qt(null,hr),Ar.revokeObjectURL(hr.src)},hr.onerror=function(){return qt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var jr=new self.Blob([new Uint8Array(bt)],{type:"image/png"});hr.cacheControl=tr,hr.expires=Kt,hr.src=bt.byteLength?Ar.createObjectURL(jr):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(je,I,$e,pt))});return{cancel:function(){ye.cancel(),pe()}}};function Ne(M,I,Y){Y[M]&&-1!==Y[M].indexOf(I)||(Y[M]=Y[M]||[],Y[M].push(I))}function it(M,I,Y){if(Y&&Y[M]){var ae=Y[M].indexOf(I);-1!==ae&&Y[M].splice(ae,1)}}var ke=function(M,I){void 0===I&&(I={}),h(this,I),this.type=M},De=function(M){function I(Y,ae){void 0===ae&&(ae={}),M.call(this,"error",h({error:Y},ae))}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I}(ke),Re=function(){};Re.prototype.on=function(M,I){return this._listeners=this._listeners||{},Ne(M,I,this._listeners),this},Re.prototype.off=function(M,I){return it(M,I,this._listeners),it(M,I,this._oneTimeListeners),this},Re.prototype.once=function(M,I){return this._oneTimeListeners=this._oneTimeListeners||{},Ne(M,I,this._oneTimeListeners),this},Re.prototype.fire=function(M,I){"string"==typeof M&&(M=new ke(M,I||{}));var Y=M.type;if(this.listens(Y)){M.target=this;for(var ae=0,pe=this._listeners&&this._listeners[Y]?this._listeners[Y].slice():[];ae<pe.length;ae+=1)pe[ae].call(this,M);for(var ye=0,Ee=this._oneTimeListeners&&this._oneTimeListeners[Y]?this._oneTimeListeners[Y].slice():[];ye<Ee.length;ye+=1){var je=Ee[ye];it(Y,je,this._oneTimeListeners),je.call(this,M)}var $e=this._eventedParent;$e&&(h(M,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),$e.fire(M))}else M instanceof De&&console.error(M.error);return this},Re.prototype.listens=function(M){return this._listeners&&this._listeners[M]&&this._listeners[M].length>0||this._oneTimeListeners&&this._oneTimeListeners[M]&&this._oneTimeListeners[M].length>0||this._eventedParent&&this._eventedParent.listens(M)},Re.prototype.setEventedParent=function(M,I){return this._eventedParent=M,this._eventedParentData=I,this};var Ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ke=function(M,I,Y,ae){this.message=(M?M+": ":"")+Y,ae&&(this.identifier=ae),null!=I&&I.__line__&&(this.line=I.__line__)};function ut(M){var Y=M.value;return Y?[new Ke(M.key,Y,"constants have been deprecated as of v8")]:[]}function xt(M){for(var I=[],Y=arguments.length-1;Y-- >0;)I[Y]=arguments[Y+1];for(var ae=0,pe=I;ae<pe.length;ae+=1){var ye=pe[ae];for(var Ee in ye)M[Ee]=ye[Ee]}return M}function gt(M){return M instanceof Number||M instanceof String||M instanceof Boolean?M.valueOf():M}function Pt(M){if(Array.isArray(M))return M.map(Pt);if(M instanceof Object&&!(M instanceof Number||M instanceof String||M instanceof Boolean)){var I={};for(var Y in M)I[Y]=Pt(M[Y]);return I}return gt(M)}var ct=function(M){function I(Y,ae){M.call(this,ae),this.message=ae,this.key=Y}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I}(Error),zt=function(M,I){void 0===I&&(I=[]),this.parent=M,this.bindings={};for(var Y=0,ae=I;Y<ae.length;Y+=1){var pe=ae[Y];this.bindings[pe[0]]=pe[1]}};zt.prototype.concat=function(M){return new zt(this,M)},zt.prototype.get=function(M){if(this.bindings[M])return this.bindings[M];if(this.parent)return this.parent.get(M);throw new Error(M+" not found in scope.")},zt.prototype.has=function(M){return!!this.bindings[M]||!!this.parent&&this.parent.has(M)};var Ft={kind:"null"},Qe={kind:"number"},yt={kind:"string"},Nt={kind:"boolean"},Yt={kind:"color"},rr={kind:"object"},Fe={kind:"value"},ht={kind:"collator"},kt={kind:"formatted"},Gt={kind:"resolvedImage"};function Zt(M,I){return{kind:"array",itemType:M,N:I}}function fr(M){if("array"===M.kind){var I=fr(M.itemType);return"number"==typeof M.N?"array<"+I+", "+M.N+">":"value"===M.itemType.kind?"array":"array<"+I+">"}return M.kind}var $t=[Ft,Qe,yt,Nt,Yt,kt,rr,Zt(Fe),Gt];function nr(M,I){if("error"===I.kind)return null;if("array"===M.kind){if("array"===I.kind&&(0===I.N&&"value"===I.itemType.kind||!nr(M.itemType,I.itemType))&&("number"!=typeof M.N||M.N===I.N))return null}else{if(M.kind===I.kind)return null;if("value"===M.kind)for(var Y=0,ae=$t;Y<ae.length;Y+=1)if(!nr(ae[Y],I))return null}return"Expected "+fr(M)+" but found "+fr(I)+" instead."}function dr(M,I){return I.some(function(Y){return Y.kind===M.kind})}function Tr(M,I){return I.some(function(Y){return"null"===Y?null===M:"array"===Y?Array.isArray(M):"object"===Y?M&&!Array.isArray(M)&&"object"==typeof M:Y===typeof M})}var wr=n(function(M,I){var Y={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ae($e){return($e=Math.round($e))<0?0:$e>255?255:$e}function ye($e){return ae("%"===$e[$e.length-1]?parseFloat($e)/100*255:parseInt($e))}function Ee($e){return function($e){return $e<0?0:$e>1?1:$e}("%"===$e[$e.length-1]?parseFloat($e)/100:parseFloat($e))}function je($e,pt,bt){return bt<0?bt+=1:bt>1&&(bt-=1),6*bt<1?$e+(pt-$e)*bt*6:2*bt<1?pt:3*bt<2?$e+(pt-$e)*(2/3-bt)*6:$e}try{I.parseCSSColor=function($e){var pt,bt=$e.replace(/ /g,"").toLowerCase();if(bt in Y)return Y[bt].slice();if("#"===bt[0])return 4===bt.length?(pt=parseInt(bt.substr(1),16))>=0&&pt<=4095?[(3840&pt)>>4|(3840&pt)>>8,240&pt|(240&pt)>>4,15&pt|(15&pt)<<4,1]:null:7===bt.length&&(pt=parseInt(bt.substr(1),16))>=0&&pt<=16777215?[(16711680&pt)>>16,(65280&pt)>>8,255&pt,1]:null;var qt=bt.indexOf("("),tr=bt.indexOf(")");if(-1!==qt&&tr+1===bt.length){var Kt=bt.substr(0,qt),hr=bt.substr(qt+1,tr-(qt+1)).split(","),Ar=1;switch(Kt){case"rgba":if(4!==hr.length)return null;Ar=Ee(hr.pop());case"rgb":return 3!==hr.length?null:[ye(hr[0]),ye(hr[1]),ye(hr[2]),Ar];case"hsla":if(4!==hr.length)return null;Ar=Ee(hr.pop());case"hsl":if(3!==hr.length)return null;var jr=(parseFloat(hr[0])%360+360)%360/360,Nr=Ee(hr[1]),Yr=Ee(hr[2]),Wr=Yr<=.5?Yr*(Nr+1):Yr+Nr-Yr*Nr,tn=2*Yr-Wr;return[ae(255*je(tn,Wr,jr+1/3)),ae(255*je(tn,Wr,jr)),ae(255*je(tn,Wr,jr-1/3)),Ar];default:return null}}return null}}catch($e){}}).parseCSSColor,mr=function(M,I,Y,ae){void 0===ae&&(ae=1),this.r=M,this.g=I,this.b=Y,this.a=ae};mr.parse=function(M){if(M){if(M instanceof mr)return M;if("string"==typeof M){var I=wr(M);if(I)return new mr(I[0]/255*I[3],I[1]/255*I[3],I[2]/255*I[3],I[3])}}},mr.prototype.toString=function(){var M=this.toArray(),Y=M[1],ae=M[2],pe=M[3];return"rgba("+Math.round(M[0])+","+Math.round(Y)+","+Math.round(ae)+","+pe+")"},mr.prototype.toArray=function(){var ae=this.a;return 0===ae?[0,0,0,0]:[255*this.r/ae,255*this.g/ae,255*this.b/ae,ae]},mr.black=new mr(0,0,0,1),mr.white=new mr(1,1,1,1),mr.transparent=new mr(0,0,0,0),mr.red=new mr(1,0,0,1);var _r=function(M,I,Y){this.sensitivity=M?I?"variant":"case":I?"accent":"base",this.locale=Y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};_r.prototype.compare=function(M,I){return this.collator.compare(M,I)},_r.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Sr=function(M,I,Y,ae,pe){this.text=M,this.image=I,this.scale=Y,this.fontStack=ae,this.textColor=pe},Gr=function(M){this.sections=M};Gr.fromString=function(M){return new Gr([new Sr(M,null,null,null,null)])},Gr.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(M){return 0!==M.text.length||M.image&&0!==M.image.name.length})},Gr.factory=function(M){return M instanceof Gr?M:Gr.fromString(M)},Gr.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(M){return M.text}).join("")},Gr.prototype.serialize=function(){for(var M=["format"],I=0,Y=this.sections;I<Y.length;I+=1){var ae=Y[I];if(ae.image)M.push(["image",ae.image.name]);else{M.push(ae.text);var pe={};ae.fontStack&&(pe["text-font"]=["literal",ae.fontStack.split(",")]),ae.scale&&(pe["font-scale"]=ae.scale),ae.textColor&&(pe["text-color"]=["rgba"].concat(ae.textColor.toArray())),M.push(pe)}}return M};var Er=function(M){this.name=M.name,this.available=M.available};function Zr(M,I,Y,ae){return"number"==typeof M&&M>=0&&M<=255&&"number"==typeof I&&I>=0&&I<=255&&"number"==typeof Y&&Y>=0&&Y<=255?void 0===ae||"number"==typeof ae&&ae>=0&&ae<=1?null:"Invalid rgba value ["+[M,I,Y,ae].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof ae?[M,I,Y,ae]:[M,I,Y]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function an(M){if(null===M||"string"==typeof M||"boolean"==typeof M||"number"==typeof M||M instanceof mr||M instanceof _r||M instanceof Gr||M instanceof Er)return!0;if(Array.isArray(M)){for(var I=0,Y=M;I<Y.length;I+=1)if(!an(Y[I]))return!1;return!0}if("object"==typeof M){for(var ae in M)if(!an(M[ae]))return!1;return!0}return!1}function gn(M){if(null===M)return Ft;if("string"==typeof M)return yt;if("boolean"==typeof M)return Nt;if("number"==typeof M)return Qe;if(M instanceof mr)return Yt;if(M instanceof _r)return ht;if(M instanceof Gr)return kt;if(M instanceof Er)return Gt;if(Array.isArray(M)){for(var I,Y=M.length,ae=0,pe=M;ae<pe.length;ae+=1){var ye=gn(pe[ae]);if(I){if(I===ye)continue;I=Fe;break}I=ye}return Zt(I||Fe,Y)}return rr}function Vn(M){var I=typeof M;return null===M?"":"string"===I||"number"===I||"boolean"===I?String(M):M instanceof mr||M instanceof Gr||M instanceof Er?M.toString():JSON.stringify(M)}Er.prototype.toString=function(){return this.name},Er.fromString=function(M){return M?new Er({name:M,available:!1}):null},Er.prototype.serialize=function(){return["image",this.name]};var Gn=function(M,I){this.type=M,this.value=I};Gn.parse=function(M,I){if(2!==M.length)return I.error("'literal' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(!an(M[1]))return I.error("invalid value");var Y=M[1],ae=gn(Y),pe=I.expectedType;return"array"!==ae.kind||0!==ae.N||!pe||"array"!==pe.kind||"number"==typeof pe.N&&0!==pe.N||(ae=pe),new Gn(ae,Y)},Gn.prototype.evaluate=function(){return this.value},Gn.prototype.eachChild=function(){},Gn.prototype.outputDefined=function(){return!0},Gn.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof mr?["rgba"].concat(this.value.toArray()):this.value instanceof Gr?this.value.serialize():this.value};var Ln=function(M){this.name="ExpressionEvaluationError",this.message=M};Ln.prototype.toJSON=function(){return this.message};var ln={string:yt,number:Qe,boolean:Nt,object:rr},qr=function(M,I){this.type=M,this.args=I};qr.parse=function(M,I){if(M.length<2)return I.error("Expected at least one argument.");var Y,ae=1,pe=M[0];if("array"===pe){var ye,Ee;if(M.length>2){var je=M[1];if("string"!=typeof je||!(je in ln)||"object"===je)return I.error('The item type argument of "array" must be one of string, number, boolean',1);ye=ln[je],ae++}else ye=Fe;if(M.length>3){if(null!==M[2]&&("number"!=typeof M[2]||M[2]<0||M[2]!==Math.floor(M[2])))return I.error('The length argument to "array" must be a positive integer literal',2);Ee=M[2],ae++}Y=Zt(ye,Ee)}else Y=ln[pe];for(var $e=[];ae<M.length;ae++){var pt=I.parse(M[ae],ae,Fe);if(!pt)return null;$e.push(pt)}return new qr(Y,$e)},qr.prototype.evaluate=function(M){for(var I=0;I<this.args.length;I++){var Y=this.args[I].evaluate(M);if(!nr(this.type,gn(Y)))return Y;if(I===this.args.length-1)throw new Ln("Expected value to be of type "+fr(this.type)+", but found "+fr(gn(Y))+" instead.")}return null},qr.prototype.eachChild=function(M){this.args.forEach(M)},qr.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},qr.prototype.serialize=function(){var M=this.type,I=[M.kind];if("array"===M.kind){var Y=M.itemType;if("string"===Y.kind||"number"===Y.kind||"boolean"===Y.kind){I.push(Y.kind);var ae=M.N;("number"==typeof ae||this.args.length>1)&&I.push(ae)}}return I.concat(this.args.map(function(pe){return pe.serialize()}))};var Pr=function(M){this.type=kt,this.sections=M};Pr.parse=function(M,I){if(M.length<2)return I.error("Expected at least one argument.");var Y=M[1];if(!Array.isArray(Y)&&"object"==typeof Y)return I.error("First argument must be an image or text section.");for(var ae=[],pe=!1,ye=1;ye<=M.length-1;++ye){var Ee=M[ye];if(pe&&"object"==typeof Ee&&!Array.isArray(Ee)){pe=!1;var je=null;if(Ee["font-scale"]&&!(je=I.parse(Ee["font-scale"],1,Qe)))return null;var $e=null;if(Ee["text-font"]&&!($e=I.parse(Ee["text-font"],1,Zt(yt))))return null;var pt=null;if(Ee["text-color"]&&!(pt=I.parse(Ee["text-color"],1,Yt)))return null;var bt=ae[ae.length-1];bt.scale=je,bt.font=$e,bt.textColor=pt}else{var qt=I.parse(M[ye],1,Fe);if(!qt)return null;var tr=qt.type.kind;if("string"!==tr&&"value"!==tr&&"null"!==tr&&"resolvedImage"!==tr)return I.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");pe=!0,ae.push({content:qt,scale:null,font:null,textColor:null})}}return new Pr(ae)},Pr.prototype.evaluate=function(M){return new Gr(this.sections.map(function(I){var Y=I.content.evaluate(M);return gn(Y)===Gt?new Sr("",Y,null,null,null):new Sr(Vn(Y),null,I.scale?I.scale.evaluate(M):null,I.font?I.font.evaluate(M).join(","):null,I.textColor?I.textColor.evaluate(M):null)}))},Pr.prototype.eachChild=function(M){for(var I=0,Y=this.sections;I<Y.length;I+=1){var ae=Y[I];M(ae.content),ae.scale&&M(ae.scale),ae.font&&M(ae.font),ae.textColor&&M(ae.textColor)}},Pr.prototype.outputDefined=function(){return!1},Pr.prototype.serialize=function(){for(var M=["format"],I=0,Y=this.sections;I<Y.length;I+=1){var ae=Y[I];M.push(ae.content.serialize());var pe={};ae.scale&&(pe["font-scale"]=ae.scale.serialize()),ae.font&&(pe["text-font"]=ae.font.serialize()),ae.textColor&&(pe["text-color"]=ae.textColor.serialize()),M.push(pe)}return M};var un=function(M){this.type=Gt,this.input=M};un.parse=function(M,I){if(2!==M.length)return I.error("Expected two arguments.");var Y=I.parse(M[1],1,yt);return Y?new un(Y):I.error("No image name provided.")},un.prototype.evaluate=function(M){var I=this.input.evaluate(M),Y=Er.fromString(I);return Y&&M.availableImages&&(Y.available=M.availableImages.indexOf(I)>-1),Y},un.prototype.eachChild=function(M){M(this.input)},un.prototype.outputDefined=function(){return!1},un.prototype.serialize=function(){return["image",this.input.serialize()]};var dn={"to-boolean":Nt,"to-color":Yt,"to-number":Qe,"to-string":yt},cn=function(M,I){this.type=M,this.args=I};cn.parse=function(M,I){if(M.length<2)return I.error("Expected at least one argument.");var Y=M[0];if(("to-boolean"===Y||"to-string"===Y)&&2!==M.length)return I.error("Expected one argument.");for(var ae=dn[Y],pe=[],ye=1;ye<M.length;ye++){var Ee=I.parse(M[ye],ye,Fe);if(!Ee)return null;pe.push(Ee)}return new cn(ae,pe)},cn.prototype.evaluate=function(M){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(M));if("color"===this.type.kind){for(var I,Y,ae=0,pe=this.args;ae<pe.length;ae+=1){if(Y=null,(I=pe[ae].evaluate(M))instanceof mr)return I;if("string"==typeof I){var ye=M.parseColor(I);if(ye)return ye}else if(Array.isArray(I)&&!(Y=I.length<3||I.length>4?"Invalid rbga value "+JSON.stringify(I)+": expected an array containing either three or four numeric values.":Zr(I[0],I[1],I[2],I[3])))return new mr(I[0]/255,I[1]/255,I[2]/255,I[3])}throw new Ln(Y||"Could not parse color from value '"+("string"==typeof I?I:String(JSON.stringify(I)))+"'")}if("number"===this.type.kind){for(var Ee=null,je=0,$e=this.args;je<$e.length;je+=1){if(null===(Ee=$e[je].evaluate(M)))return 0;var pt=Number(Ee);if(!isNaN(pt))return pt}throw new Ln("Could not convert "+JSON.stringify(Ee)+" to number.")}return"formatted"===this.type.kind?Gr.fromString(Vn(this.args[0].evaluate(M))):"resolvedImage"===this.type.kind?Er.fromString(Vn(this.args[0].evaluate(M))):Vn(this.args[0].evaluate(M))},cn.prototype.eachChild=function(M){this.args.forEach(M)},cn.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},cn.prototype.serialize=function(){if("formatted"===this.type.kind)return new Pr([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new un(this.args[0]).serialize();var M=["to-"+this.type.kind];return this.eachChild(function(I){M.push(I.serialize())}),M};var fn=["Unknown","Point","LineString","Polygon"],Bn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Bn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Bn.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?fn[this.feature.type]:this.feature.type:null},Bn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Bn.prototype.canonicalID=function(){return this.canonical},Bn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Bn.prototype.parseColor=function(M){var I=this._parseColorCache[M];return I||(I=this._parseColorCache[M]=mr.parse(M)),I};var Nn=function(M,I,Y,ae){this.name=M,this.type=I,this._evaluate=Y,this.args=ae};Nn.prototype.evaluate=function(M){return this._evaluate(M,this.args)},Nn.prototype.eachChild=function(M){this.args.forEach(M)},Nn.prototype.outputDefined=function(){return!1},Nn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(M){return M.serialize()}))},Nn.parse=function(M,I){var Y,ae=M[0],pe=Nn.definitions[ae];if(!pe)return I.error('Unknown expression "'+ae+'". If you wanted a literal array, use ["literal", [...]].',0);for(var ye=Array.isArray(pe)?pe[0]:pe.type,Ee=Array.isArray(pe)?[[pe[1],pe[2]]]:pe.overloads,je=Ee.filter(function(yi){var li=yi[0];return!Array.isArray(li)||li.length===M.length-1}),$e=null,pt=0,bt=je;pt<bt.length;pt+=1){var qt=bt[pt],tr=qt[0],Kt=qt[1];$e=new wn(I.registry,I.path,null,I.scope);for(var hr=[],Ar=!1,jr=1;jr<M.length;jr++){var Nr=M[jr],Yr=Array.isArray(tr)?tr[jr-1]:tr.type,Wr=$e.parse(Nr,1+hr.length,Yr);if(!Wr){Ar=!0;break}hr.push(Wr)}if(!Ar)if(Array.isArray(tr)&&tr.length!==hr.length)$e.error("Expected "+tr.length+" arguments, but found "+hr.length+" instead.");else{for(var tn=0;tn<hr.length;tn++){var kn=Array.isArray(tr)?tr[tn]:tr.type,On=hr[tn];$e.concat(tn+1).checkSubtype(kn,On.type)}if(0===$e.errors.length)return new Nn(ae,ye,Kt,hr)}}if(1===je.length)(Y=I.errors).push.apply(Y,$e.errors);else{for(var $n=(je.length?je:Ee).map(function(yi){var li;return li=yi[0],Array.isArray(li)?"("+li.map(fr).join(", ")+")":"("+fr(li.type)+"...)"}).join(" | "),Xn=[],ii=1;ii<M.length;ii++){var vi=I.parse(M[ii],1+Xn.length);if(!vi)return null;Xn.push(fr(vi.type))}I.error("Expected arguments of type "+$n+", but found ("+Xn.join(", ")+") instead.")}return null},Nn.register=function(M,I){for(var Y in Nn.definitions=I,I)M[Y]=Nn};var Fn=function(M,I,Y){this.type=ht,this.locale=Y,this.caseSensitive=M,this.diacriticSensitive=I};function ar(M,I){M[0]=Math.min(M[0],I[0]),M[1]=Math.min(M[1],I[1]),M[2]=Math.max(M[2],I[0]),M[3]=Math.max(M[3],I[1])}function Bt(M,I){return!(M[0]<=I[0]||M[2]>=I[2]||M[1]<=I[1]||M[3]>=I[3])}function Qt(M,I){var ae=(180+M[0])/360,pe=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M[1]*Math.PI/360)))/360,ye=Math.pow(2,I.z);return[Math.round(ae*ye*8192),Math.round(pe*ye*8192)]}function yr(M,I,Y){return I[1]>M[1]!=Y[1]>M[1]&&M[0]<(Y[0]-I[0])*(M[1]-I[1])/(Y[1]-I[1])+I[0]}function Dr(M,I){for(var Y,ae,pe,ye,Ee,je,$e,pt=!1,bt=0,qt=I.length;bt<qt;bt++)for(var tr=I[bt],Kt=0,hr=tr.length;Kt<hr-1;Kt++){if(void 0,void 0,void 0,void 0,(ye=(Y=M)[0]-(ae=tr[Kt])[0])*($e=Y[1]-(pe=tr[Kt+1])[1])-(je=Y[0]-pe[0])*(Ee=Y[1]-ae[1])==0&&ye*je<=0&&Ee*$e<=0)return!1;yr(M,tr[Kt],tr[Kt+1])&&(pt=!pt)}return pt}function $r(M,I){for(var Y=0;Y<I.length;Y++)if(Dr(M,I[Y]))return!0;return!1}function Xr(M,I,Y,ae){var $e=ae[0]-Y[0],pt=ae[1]-Y[1],bt=(M[0]-Y[0])*pt-$e*(M[1]-Y[1]),qt=(I[0]-Y[0])*pt-$e*(I[1]-Y[1]);return bt>0&&qt<0||bt<0&&qt>0}function Mr(M,I,Y){for(var ae=0,pe=Y;ae<pe.length;ae+=1)for(var ye=pe[ae],Ee=0;Ee<ye.length-1;++Ee)if(void 0,void 0,(qt=[(bt=ye[Ee+1])[0]-(pt=ye[Ee])[0],bt[1]-pt[1]])[0]*(tr=[($e=I)[0]-(je=M)[0],$e[1]-je[1]])[1]-qt[1]*tr[0]!=0&&Xr(je,$e,pt,bt)&&Xr(pt,bt,je,$e))return!0;var je,$e,pt,bt,qt,tr;return!1}function Lr(M,I){for(var Y=0;Y<M.length;++Y)if(!Dr(M[Y],I))return!1;for(var ae=0;ae<M.length-1;++ae)if(Mr(M[ae],M[ae+1],I))return!1;return!0}function Rr(M,I){for(var Y=0;Y<I.length;Y++)if(Lr(M,I[Y]))return!0;return!1}function Ir(M,I,Y){for(var ae=[],pe=0;pe<M.length;pe++){for(var ye=[],Ee=0;Ee<M[pe].length;Ee++){var je=Qt(M[pe][Ee],Y);ar(I,je),ye.push(je)}ae.push(ye)}return ae}function Fr(M,I,Y){for(var ae=[],pe=0;pe<M.length;pe++){var ye=Ir(M[pe],I,Y);ae.push(ye)}return ae}function Qr(M,I,Y,ae){if(M[0]<Y[0]||M[0]>Y[2]){var pe=.5*ae,ye=M[0]-Y[0]>pe?-ae:Y[0]-M[0]>pe?ae:0;0===ye&&(ye=M[0]-Y[2]>pe?-ae:Y[2]-M[0]>pe?ae:0),M[0]+=ye}ar(I,M)}function yn(M,I,Y,ae){for(var pe=8192*Math.pow(2,ae.z),ye=[8192*ae.x,8192*ae.y],Ee=[],je=0,$e=M;je<$e.length;je+=1)for(var pt=0,bt=$e[je];pt<bt.length;pt+=1){var qt=bt[pt],tr=[qt.x+ye[0],qt.y+ye[1]];Qr(tr,I,Y,pe),Ee.push(tr)}return Ee}function In(M,I,Y,ae){for(var pe,ye=8192*Math.pow(2,ae.z),Ee=[8192*ae.x,8192*ae.y],je=[],$e=0,pt=M;$e<pt.length;$e+=1){for(var bt=[],qt=0,tr=pt[$e];qt<tr.length;qt+=1){var Kt=tr[qt],hr=[Kt.x+Ee[0],Kt.y+Ee[1]];ar(I,hr),bt.push(hr)}je.push(bt)}if(I[2]-I[0]<=ye/2){(pe=I)[0]=pe[1]=1/0,pe[2]=pe[3]=-1/0;for(var Ar=0,jr=je;Ar<jr.length;Ar+=1)for(var Nr=0,Yr=jr[Ar];Nr<Yr.length;Nr+=1)Qr(Yr[Nr],I,Y,ye)}return je}Fn.parse=function(M,I){if(2!==M.length)return I.error("Expected one argument.");var Y=M[1];if("object"!=typeof Y||Array.isArray(Y))return I.error("Collator options argument must be an object.");var ae=I.parse(void 0!==Y["case-sensitive"]&&Y["case-sensitive"],1,Nt);if(!ae)return null;var pe=I.parse(void 0!==Y["diacritic-sensitive"]&&Y["diacritic-sensitive"],1,Nt);if(!pe)return null;var ye=null;return Y.locale&&!(ye=I.parse(Y.locale,1,yt))?null:new Fn(ae,pe,ye)},Fn.prototype.evaluate=function(M){return new _r(this.caseSensitive.evaluate(M),this.diacriticSensitive.evaluate(M),this.locale?this.locale.evaluate(M):null)},Fn.prototype.eachChild=function(M){M(this.caseSensitive),M(this.diacriticSensitive),this.locale&&M(this.locale)},Fn.prototype.outputDefined=function(){return!1},Fn.prototype.serialize=function(){var M={};return M["case-sensitive"]=this.caseSensitive.serialize(),M["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(M.locale=this.locale.serialize()),["collator",M]};var nn=function(M,I){this.type=Nt,this.geojson=M,this.geometries=I};function Cn(M){if(M instanceof Nn&&("get"===M.name&&1===M.args.length||"feature-state"===M.name||"has"===M.name&&1===M.args.length||"properties"===M.name||"geometry-type"===M.name||"id"===M.name||/^filter-/.test(M.name))||M instanceof nn)return!1;var I=!0;return M.eachChild(function(Y){I&&!Cn(Y)&&(I=!1)}),I}function Ur(M){if(M instanceof Nn&&"feature-state"===M.name)return!1;var I=!0;return M.eachChild(function(Y){I&&!Ur(Y)&&(I=!1)}),I}function Kr(M,I){if(M instanceof Nn&&I.indexOf(M.name)>=0)return!1;var Y=!0;return M.eachChild(function(ae){Y&&!Kr(ae,I)&&(Y=!1)}),Y}nn.parse=function(M,I){if(2!==M.length)return I.error("'within' expression requires exactly one argument, but found "+(M.length-1)+" instead.");if(an(M[1])){var Y=M[1];if("FeatureCollection"===Y.type)for(var ae=0;ae<Y.features.length;++ae){var pe=Y.features[ae].geometry.type;if("Polygon"===pe||"MultiPolygon"===pe)return new nn(Y,Y.features[ae].geometry)}else if("Feature"===Y.type){var ye=Y.geometry.type;if("Polygon"===ye||"MultiPolygon"===ye)return new nn(Y,Y.geometry)}else if("Polygon"===Y.type||"MultiPolygon"===Y.type)return new nn(Y,Y)}return I.error("'within' expression requires valid geojson object that contains polygon geometry type.")},nn.prototype.evaluate=function(M){if(null!=M.geometry()&&null!=M.canonicalID()){if("Point"===M.geometryType())return function(I,Y){var ae=[1/0,1/0,-1/0,-1/0],pe=[1/0,1/0,-1/0,-1/0],ye=I.canonicalID();if("Polygon"===Y.type){var Ee=Ir(Y.coordinates,pe,ye),je=yn(I.geometry(),ae,pe,ye);if(!Bt(ae,pe))return!1;for(var $e=0,pt=je;$e<pt.length;$e+=1)if(!Dr(pt[$e],Ee))return!1}if("MultiPolygon"===Y.type){var bt=Fr(Y.coordinates,pe,ye),qt=yn(I.geometry(),ae,pe,ye);if(!Bt(ae,pe))return!1;for(var tr=0,Kt=qt;tr<Kt.length;tr+=1)if(!$r(Kt[tr],bt))return!1}return!0}(M,this.geometries);if("LineString"===M.geometryType())return function(I,Y){var ae=[1/0,1/0,-1/0,-1/0],pe=[1/0,1/0,-1/0,-1/0],ye=I.canonicalID();if("Polygon"===Y.type){var Ee=Ir(Y.coordinates,pe,ye),je=In(I.geometry(),ae,pe,ye);if(!Bt(ae,pe))return!1;for(var $e=0,pt=je;$e<pt.length;$e+=1)if(!Lr(pt[$e],Ee))return!1}if("MultiPolygon"===Y.type){var bt=Fr(Y.coordinates,pe,ye),qt=In(I.geometry(),ae,pe,ye);if(!Bt(ae,pe))return!1;for(var tr=0,Kt=qt;tr<Kt.length;tr+=1)if(!Rr(Kt[tr],bt))return!1}return!0}(M,this.geometries)}return!1},nn.prototype.eachChild=function(){},nn.prototype.outputDefined=function(){return!0},nn.prototype.serialize=function(){return["within",this.geojson]};var An=function(M,I){this.type=I.type,this.name=M,this.boundExpression=I};An.parse=function(M,I){if(2!==M.length||"string"!=typeof M[1])return I.error("'var' expression requires exactly one string literal argument.");var Y=M[1];return I.scope.has(Y)?new An(Y,I.scope.get(Y)):I.error('Unknown variable "'+Y+'". Make sure "'+Y+'" has been bound in an enclosing "let" expression before using it.',1)},An.prototype.evaluate=function(M){return this.boundExpression.evaluate(M)},An.prototype.eachChild=function(){},An.prototype.outputDefined=function(){return!1},An.prototype.serialize=function(){return["var",this.name]};var wn=function(M,I,Y,ae,pe){void 0===I&&(I=[]),void 0===ae&&(ae=new zt),void 0===pe&&(pe=[]),this.registry=M,this.path=I,this.key=I.map(function(ye){return"["+ye+"]"}).join(""),this.scope=ae,this.errors=pe,this.expectedType=Y};function Hn(M,I){for(var Y,pe=M.length-1,ye=0,Ee=pe,je=0;ye<=Ee;)if((Y=M[je=Math.floor((ye+Ee)/2)])<=I){if(je===pe||I<M[je+1])return je;ye=je+1}else{if(!(Y>I))throw new Ln("Input is not a number.");Ee=je-1}return 0}wn.prototype.parse=function(M,I,Y,ae,pe){return void 0===pe&&(pe={}),I?this.concat(I,Y,ae)._parse(M,pe):this._parse(M,pe)},wn.prototype._parse=function(M,I){function Y(pt,bt,qt){return"assert"===qt?new qr(bt,[pt]):"coerce"===qt?new cn(bt,[pt]):pt}if(null!==M&&"string"!=typeof M&&"boolean"!=typeof M&&"number"!=typeof M||(M=["literal",M]),Array.isArray(M)){if(0===M.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ae=M[0];if("string"!=typeof ae)return this.error("Expression name must be a string, but found "+typeof ae+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var pe=this.registry[ae];if(pe){var ye=pe.parse(M,this);if(!ye)return null;if(this.expectedType){var Ee=this.expectedType,je=ye.type;if("string"!==Ee.kind&&"number"!==Ee.kind&&"boolean"!==Ee.kind&&"object"!==Ee.kind&&"array"!==Ee.kind||"value"!==je.kind)if("color"!==Ee.kind&&"formatted"!==Ee.kind&&"resolvedImage"!==Ee.kind||"value"!==je.kind&&"string"!==je.kind){if(this.checkSubtype(Ee,je))return null}else ye=Y(ye,Ee,I.typeAnnotation||"coerce");else ye=Y(ye,Ee,I.typeAnnotation||"assert")}if(!(ye instanceof Gn)&&"resolvedImage"!==ye.type.kind&&function pt(bt){if(bt instanceof An)return pt(bt.boundExpression);if(bt instanceof Nn&&"error"===bt.name||bt instanceof Fn||bt instanceof nn)return!1;var qt=bt instanceof cn||bt instanceof qr,tr=!0;return bt.eachChild(function(Kt){tr=qt?tr&&pt(Kt):tr&&Kt instanceof Gn}),!!tr&&Cn(bt)&&Kr(bt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(ye)){var $e=new Bn;try{ye=new Gn(ye.type,ye.evaluate($e))}catch(pt){return this.error(pt.message),null}}return ye}return this.error('Unknown expression "'+ae+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===M?"'undefined' value invalid. Use null instead.":"object"==typeof M?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof M+" instead.")},wn.prototype.concat=function(M,I,Y){var ae="number"==typeof M?this.path.concat(M):this.path,pe=Y?this.scope.concat(Y):this.scope;return new wn(this.registry,ae,I||null,pe,this.errors)},wn.prototype.error=function(M){for(var I=[],Y=arguments.length-1;Y-- >0;)I[Y]=arguments[Y+1];var ae=""+this.key+I.map(function(pe){return"["+pe+"]"}).join("");this.errors.push(new ct(ae,M))},wn.prototype.checkSubtype=function(M,I){var Y=nr(M,I);return Y&&this.error(Y),Y};var gi=function(M,I,Y){this.type=M,this.input=I,this.labels=[],this.outputs=[];for(var ae=0,pe=Y;ae<pe.length;ae+=1){var ye=pe[ae],je=ye[1];this.labels.push(ye[0]),this.outputs.push(je)}};function ti(M,I,Y){return M*(1-Y)+I*Y}gi.parse=function(M,I){if(M.length-1<4)return I.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return I.error("Expected an even number of arguments.");var Y=I.parse(M[1],1,Qe);if(!Y)return null;var ae=[],pe=null;I.expectedType&&"value"!==I.expectedType.kind&&(pe=I.expectedType);for(var ye=1;ye<M.length;ye+=2){var Ee=1===ye?-1/0:M[ye],je=M[ye+1],$e=ye,pt=ye+1;if("number"!=typeof Ee)return I.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$e);if(ae.length&&ae[ae.length-1][0]>=Ee)return I.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',$e);var bt=I.parse(je,pt,pe);if(!bt)return null;pe=pe||bt.type,ae.push([Ee,bt])}return new gi(pe,Y,ae)},gi.prototype.evaluate=function(M){var I=this.labels,Y=this.outputs;if(1===I.length)return Y[0].evaluate(M);var ae=this.input.evaluate(M);if(ae<=I[0])return Y[0].evaluate(M);var pe=I.length;return ae>=I[pe-1]?Y[pe-1].evaluate(M):Y[Hn(I,ae)].evaluate(M)},gi.prototype.eachChild=function(M){M(this.input);for(var I=0,Y=this.outputs;I<Y.length;I+=1)M(Y[I])},gi.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},gi.prototype.serialize=function(){for(var M=["step",this.input.serialize()],I=0;I<this.labels.length;I++)I>0&&M.push(this.labels[I]),M.push(this.outputs[I].serialize());return M};var En=Object.freeze({__proto__:null,number:ti,color:function(M,I,Y){return new mr(ti(M.r,I.r,Y),ti(M.g,I.g,Y),ti(M.b,I.b,Y),ti(M.a,I.a,Y))},array:function(M,I,Y){return M.map(function(ae,pe){return ti(ae,I[pe],Y)})}}),hi=6/29,mi=3*hi*hi,ra=Math.PI/180,ka=180/Math.PI;function fa(M){return M>.008856451679035631?Math.pow(M,1/3):M/mi+4/29}function Aa(M){return M>hi?M*M*M:mi*(M-4/29)}function Bi(M){return 255*(M<=.0031308?12.92*M:1.055*Math.pow(M,1/2.4)-.055)}function $i(M){return(M/=255)<=.04045?M/12.92:Math.pow((M+.055)/1.055,2.4)}function yo(M){var I=$i(M.r),Y=$i(M.g),ae=$i(M.b),pe=fa((.4124564*I+.3575761*Y+.1804375*ae)/.95047),ye=fa((.2126729*I+.7151522*Y+.072175*ae)/1);return{l:116*ye-16,a:500*(pe-ye),b:200*(ye-fa((.0193339*I+.119192*Y+.9503041*ae)/1.08883)),alpha:M.a}}function Ho(M){var I=(M.l+16)/116,Y=isNaN(M.a)?I:I+M.a/500,ae=isNaN(M.b)?I:I-M.b/200;return I=1*Aa(I),Y=.95047*Aa(Y),ae=1.08883*Aa(ae),new mr(Bi(3.2404542*Y-1.5371385*I-.4985314*ae),Bi(-.969266*Y+1.8760108*I+.041556*ae),Bi(.0556434*Y-.2040259*I+1.0572252*ae),M.alpha)}function Ko(M,I,Y){var ae=I-M;return M+Y*(ae>180||ae<-180?ae-360*Math.round(ae/360):ae)}var Na={forward:yo,reverse:Ho,interpolate:function(M,I,Y){return{l:ti(M.l,I.l,Y),a:ti(M.a,I.a,Y),b:ti(M.b,I.b,Y),alpha:ti(M.alpha,I.alpha,Y)}}},Vi={forward:function(M){var I=yo(M),Y=I.l,ae=I.a,pe=I.b,ye=Math.atan2(pe,ae)*ka;return{h:ye<0?ye+360:ye,c:Math.sqrt(ae*ae+pe*pe),l:Y,alpha:M.a}},reverse:function(M){var I=M.h*ra,Y=M.c;return Ho({l:M.l,a:Math.cos(I)*Y,b:Math.sin(I)*Y,alpha:M.alpha})},interpolate:function(M,I,Y){return{h:Ko(M.h,I.h,Y),c:ti(M.c,I.c,Y),l:ti(M.l,I.l,Y),alpha:ti(M.alpha,I.alpha,Y)}}},ia=Object.freeze({__proto__:null,lab:Na,hcl:Vi}),Qi=function(M,I,Y,ae,pe){this.type=M,this.operator=I,this.interpolation=Y,this.input=ae,this.labels=[],this.outputs=[];for(var ye=0,Ee=pe;ye<Ee.length;ye+=1){var je=Ee[ye],pt=je[1];this.labels.push(je[0]),this.outputs.push(pt)}};function go(M,I,Y,ae){var pe=ae-Y,ye=M-Y;return 0===pe?0:1===I?ye/pe:(Math.pow(I,ye)-1)/(Math.pow(I,pe)-1)}Qi.interpolationFactor=function(M,I,Y,ae){var pe=0;if("exponential"===M.name)pe=go(I,M.base,Y,ae);else if("linear"===M.name)pe=go(I,1,Y,ae);else if("cubic-bezier"===M.name){var ye=M.controlPoints;pe=new t(ye[0],ye[1],ye[2],ye[3]).solve(go(I,1,Y,ae))}return pe},Qi.parse=function(M,I){var Y=M[0],ae=M[1],pe=M[2],ye=M.slice(3);if(!Array.isArray(ae)||0===ae.length)return I.error("Expected an interpolation type expression.",1);if("linear"===ae[0])ae={name:"linear"};else if("exponential"===ae[0]){var Ee=ae[1];if("number"!=typeof Ee)return I.error("Exponential interpolation requires a numeric base.",1,1);ae={name:"exponential",base:Ee}}else{if("cubic-bezier"!==ae[0])return I.error("Unknown interpolation type "+String(ae[0]),1,0);var je=ae.slice(1);if(4!==je.length||je.some(function(jr){return"number"!=typeof jr||jr<0||jr>1}))return I.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ae={name:"cubic-bezier",controlPoints:je}}if(M.length-1<4)return I.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if((M.length-1)%2!=0)return I.error("Expected an even number of arguments.");if(!(pe=I.parse(pe,2,Qe)))return null;var $e=[],pt=null;"interpolate-hcl"===Y||"interpolate-lab"===Y?pt=Yt:I.expectedType&&"value"!==I.expectedType.kind&&(pt=I.expectedType);for(var bt=0;bt<ye.length;bt+=2){var qt=ye[bt],tr=ye[bt+1],Kt=bt+3,hr=bt+4;if("number"!=typeof qt)return I.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Kt);if($e.length&&$e[$e.length-1][0]>=qt)return I.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Kt);var Ar=I.parse(tr,hr,pt);if(!Ar)return null;pt=pt||Ar.type,$e.push([qt,Ar])}return"number"===pt.kind||"color"===pt.kind||"array"===pt.kind&&"number"===pt.itemType.kind&&"number"==typeof pt.N?new Qi(pt,Y,ae,pe,$e):I.error("Type "+fr(pt)+" is not interpolatable.")},Qi.prototype.evaluate=function(M){var I=this.labels,Y=this.outputs;if(1===I.length)return Y[0].evaluate(M);var ae=this.input.evaluate(M);if(ae<=I[0])return Y[0].evaluate(M);var pe=I.length;if(ae>=I[pe-1])return Y[pe-1].evaluate(M);var ye=Hn(I,ae),$e=Qi.interpolationFactor(this.interpolation,ae,I[ye],I[ye+1]),pt=Y[ye].evaluate(M),bt=Y[ye+1].evaluate(M);return"interpolate"===this.operator?En[this.type.kind.toLowerCase()](pt,bt,$e):"interpolate-hcl"===this.operator?Vi.reverse(Vi.interpolate(Vi.forward(pt),Vi.forward(bt),$e)):Na.reverse(Na.interpolate(Na.forward(pt),Na.forward(bt),$e))},Qi.prototype.eachChild=function(M){M(this.input);for(var I=0,Y=this.outputs;I<Y.length;I+=1)M(Y[I])},Qi.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})},Qi.prototype.serialize=function(){var M;M="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var I=[this.operator,M,this.input.serialize()],Y=0;Y<this.labels.length;Y++)I.push(this.labels[Y],this.outputs[Y].serialize());return I};var Ji=function(M,I){this.type=M,this.args=I};Ji.parse=function(M,I){if(M.length<2)return I.error("Expectected at least one argument.");var Y=null,ae=I.expectedType;ae&&"value"!==ae.kind&&(Y=ae);for(var pe=[],ye=0,Ee=M.slice(1);ye<Ee.length;ye+=1){var $e=I.parse(Ee[ye],1+pe.length,Y,void 0,{typeAnnotation:"omit"});if(!$e)return null;Y=Y||$e.type,pe.push($e)}var pt=ae&&pe.some(function(bt){return nr(ae,bt.type)});return new Ji(pt?Fe:Y,pe)},Ji.prototype.evaluate=function(M){for(var I,Y=null,ae=0,pe=0,ye=this.args;pe<ye.length&&(ae++,(Y=ye[pe].evaluate(M))&&Y instanceof Er&&!Y.available&&(I||(I=Y.name),Y=null,ae===this.args.length&&(Y=I)),null===Y);pe+=1);return Y},Ji.prototype.eachChild=function(M){this.args.forEach(M)},Ji.prototype.outputDefined=function(){return this.args.every(function(M){return M.outputDefined()})},Ji.prototype.serialize=function(){var M=["coalesce"];return this.eachChild(function(I){M.push(I.serialize())}),M};var Dt=function(M,I){this.type=I.type,this.bindings=[].concat(M),this.result=I};Dt.prototype.evaluate=function(M){return this.result.evaluate(M)},Dt.prototype.eachChild=function(M){for(var I=0,Y=this.bindings;I<Y.length;I+=1)M(Y[I][1]);M(this.result)},Dt.parse=function(M,I){if(M.length<4)return I.error("Expected at least 3 arguments, but found "+(M.length-1)+" instead.");for(var Y=[],ae=1;ae<M.length-1;ae+=2){var pe=M[ae];if("string"!=typeof pe)return I.error("Expected string, but found "+typeof pe+" instead.",ae);if(/[^a-zA-Z0-9_]/.test(pe))return I.error("Variable names must contain only alphanumeric characters or '_'.",ae);var ye=I.parse(M[ae+1],ae+1);if(!ye)return null;Y.push([pe,ye])}var Ee=I.parse(M[M.length-1],M.length-1,I.expectedType,Y);return Ee?new Dt(Y,Ee):null},Dt.prototype.outputDefined=function(){return this.result.outputDefined()},Dt.prototype.serialize=function(){for(var M=["let"],I=0,Y=this.bindings;I<Y.length;I+=1){var ae=Y[I];M.push(ae[0],ae[1].serialize())}return M.push(this.result.serialize()),M};var _t=function(M,I,Y){this.type=M,this.index=I,this.input=Y};_t.parse=function(M,I){if(3!==M.length)return I.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var Y=I.parse(M[1],1,Qe),ae=I.parse(M[2],2,Zt(I.expectedType||Fe));return Y&&ae?new _t(ae.type.itemType,Y,ae):null},_t.prototype.evaluate=function(M){var I=this.index.evaluate(M),Y=this.input.evaluate(M);if(I<0)throw new Ln("Array index out of bounds: "+I+" < 0.");if(I>=Y.length)throw new Ln("Array index out of bounds: "+I+" > "+(Y.length-1)+".");if(I!==Math.floor(I))throw new Ln("Array index must be an integer, but found "+I+" instead.");return Y[I]},_t.prototype.eachChild=function(M){M(this.index),M(this.input)},_t.prototype.outputDefined=function(){return!1},_t.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var st=function(M,I){this.type=Nt,this.needle=M,this.haystack=I};st.parse=function(M,I){if(3!==M.length)return I.error("Expected 2 arguments, but found "+(M.length-1)+" instead.");var Y=I.parse(M[1],1,Fe),ae=I.parse(M[2],2,Fe);return Y&&ae?dr(Y.type,[Nt,yt,Qe,Ft,Fe])?new st(Y,ae):I.error("Expected first argument to be of type boolean, string, number or null, but found "+fr(Y.type)+" instead"):null},st.prototype.evaluate=function(M){var I=this.needle.evaluate(M),Y=this.haystack.evaluate(M);if(!Y)return!1;if(!Tr(I,["boolean","string","number","null"]))throw new Ln("Expected first argument to be of type boolean, string, number or null, but found "+fr(gn(I))+" instead.");if(!Tr(Y,["string","array"]))throw new Ln("Expected second argument to be of type array or string, but found "+fr(gn(Y))+" instead.");return Y.indexOf(I)>=0},st.prototype.eachChild=function(M){M(this.needle),M(this.haystack)},st.prototype.outputDefined=function(){return!0},st.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var sr=function(M,I,Y){this.type=Qe,this.needle=M,this.haystack=I,this.fromIndex=Y};sr.parse=function(M,I){if(M.length<=2||M.length>=5)return I.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var Y=I.parse(M[1],1,Fe),ae=I.parse(M[2],2,Fe);if(!Y||!ae)return null;if(!dr(Y.type,[Nt,yt,Qe,Ft,Fe]))return I.error("Expected first argument to be of type boolean, string, number or null, but found "+fr(Y.type)+" instead");if(4===M.length){var pe=I.parse(M[3],3,Qe);return pe?new sr(Y,ae,pe):null}return new sr(Y,ae)},sr.prototype.evaluate=function(M){var I=this.needle.evaluate(M),Y=this.haystack.evaluate(M);if(!Tr(I,["boolean","string","number","null"]))throw new Ln("Expected first argument to be of type boolean, string, number or null, but found "+fr(gn(I))+" instead.");if(!Tr(Y,["string","array"]))throw new Ln("Expected second argument to be of type array or string, but found "+fr(gn(Y))+" instead.");if(this.fromIndex){var ae=this.fromIndex.evaluate(M);return Y.indexOf(I,ae)}return Y.indexOf(I)},sr.prototype.eachChild=function(M){M(this.needle),M(this.haystack),this.fromIndex&&M(this.fromIndex)},sr.prototype.outputDefined=function(){return!1},sr.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var M=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),M]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var hn=function(M,I,Y,ae,pe,ye){this.inputType=M,this.type=I,this.input=Y,this.cases=ae,this.outputs=pe,this.otherwise=ye};hn.parse=function(M,I){if(M.length<5)return I.error("Expected at least 4 arguments, but found only "+(M.length-1)+".");if(M.length%2!=1)return I.error("Expected an even number of arguments.");var Y,ae;I.expectedType&&"value"!==I.expectedType.kind&&(ae=I.expectedType);for(var pe={},ye=[],Ee=2;Ee<M.length-1;Ee+=2){var je=M[Ee],$e=M[Ee+1];Array.isArray(je)||(je=[je]);var pt=I.concat(Ee);if(0===je.length)return pt.error("Expected at least one branch label.");for(var bt=0,qt=je;bt<qt.length;bt+=1){var tr=qt[bt];if("number"!=typeof tr&&"string"!=typeof tr)return pt.error("Branch labels must be numbers or strings.");if("number"==typeof tr&&Math.abs(tr)>Number.MAX_SAFE_INTEGER)return pt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof tr&&Math.floor(tr)!==tr)return pt.error("Numeric branch labels must be integer values.");if(Y){if(pt.checkSubtype(Y,gn(tr)))return null}else Y=gn(tr);if(void 0!==pe[String(tr)])return pt.error("Branch labels must be unique.");pe[String(tr)]=ye.length}var Kt=I.parse($e,Ee,ae);if(!Kt)return null;ae=ae||Kt.type,ye.push(Kt)}var hr=I.parse(M[1],1,Fe);if(!hr)return null;var Ar=I.parse(M[M.length-1],M.length-1,ae);return Ar?"value"!==hr.type.kind&&I.concat(1).checkSubtype(Y,hr.type)?null:new hn(Y,ae,hr,pe,ye,Ar):null},hn.prototype.evaluate=function(M){var I=this.input.evaluate(M);return(gn(I)===this.inputType&&this.outputs[this.cases[I]]||this.otherwise).evaluate(M)},hn.prototype.eachChild=function(M){M(this.input),this.outputs.forEach(M),M(this.otherwise)},hn.prototype.outputDefined=function(){return this.outputs.every(function(M){return M.outputDefined()})&&this.otherwise.outputDefined()},hn.prototype.serialize=function(){for(var M=this,I=["match",this.input.serialize()],Y=[],ae={},pe=0,ye=Object.keys(this.cases).sort();pe<ye.length;pe+=1){var Ee=ye[pe];void 0===(qt=ae[this.cases[Ee]])?(ae[this.cases[Ee]]=Y.length,Y.push([this.cases[Ee],[Ee]])):Y[qt][1].push(Ee)}for(var je=function(Kt){return"number"===M.inputType.kind?Number(Kt):Kt},$e=0,pt=Y;$e<pt.length;$e+=1){var bt=pt[$e],qt=bt[0],tr=bt[1];I.push(1===tr.length?je(tr[0]):tr.map(je)),I.push(this.outputs[outputIndex$1].serialize())}return I.push(this.otherwise.serialize()),I};var ri=function(M,I,Y){this.type=M,this.branches=I,this.otherwise=Y};ri.parse=function(M,I){if(M.length<4)return I.error("Expected at least 3 arguments, but found only "+(M.length-1)+".");if(M.length%2!=0)return I.error("Expected an odd number of arguments.");var Y;I.expectedType&&"value"!==I.expectedType.kind&&(Y=I.expectedType);for(var ae=[],pe=1;pe<M.length-1;pe+=2){var ye=I.parse(M[pe],pe,Nt);if(!ye)return null;var Ee=I.parse(M[pe+1],pe+1,Y);if(!Ee)return null;ae.push([ye,Ee]),Y=Y||Ee.type}var je=I.parse(M[M.length-1],M.length-1,Y);return je?new ri(Y,ae,je):null},ri.prototype.evaluate=function(M){for(var I=0,Y=this.branches;I<Y.length;I+=1){var ae=Y[I],ye=ae[1];if(ae[0].evaluate(M))return ye.evaluate(M)}return this.otherwise.evaluate(M)},ri.prototype.eachChild=function(M){for(var I=0,Y=this.branches;I<Y.length;I+=1){var ae=Y[I],ye=ae[1];M(ae[0]),M(ye)}M(this.otherwise)},ri.prototype.outputDefined=function(){return this.branches.every(function(M){return M[1].outputDefined()})&&this.otherwise.outputDefined()},ri.prototype.serialize=function(){var M=["case"];return this.eachChild(function(I){M.push(I.serialize())}),M};var qi=function(M,I,Y,ae){this.type=M,this.input=I,this.beginIndex=Y,this.endIndex=ae};function ko(M,I){return"=="===M||"!="===M?"boolean"===I.kind||"string"===I.kind||"number"===I.kind||"null"===I.kind||"value"===I.kind:"string"===I.kind||"number"===I.kind||"value"===I.kind}function as(M,I,Y,ae){return 0===ae.compare(I,Y)}function aa(M,I,Y){var ae="=="!==M&&"!="!==M;return function(){function pe(ye,Ee,je){this.type=Nt,this.lhs=ye,this.rhs=Ee,this.collator=je,this.hasUntypedArgument="value"===ye.type.kind||"value"===Ee.type.kind}return pe.parse=function(ye,Ee){if(3!==ye.length&&4!==ye.length)return Ee.error("Expected two or three arguments.");var je=ye[0],$e=Ee.parse(ye[1],1,Fe);if(!$e)return null;if(!ko(je,$e.type))return Ee.concat(1).error('"'+je+"\" comparisons are not supported for type '"+fr($e.type)+"'.");var pt=Ee.parse(ye[2],2,Fe);if(!pt)return null;if(!ko(je,pt.type))return Ee.concat(2).error('"'+je+"\" comparisons are not supported for type '"+fr(pt.type)+"'.");if($e.type.kind!==pt.type.kind&&"value"!==$e.type.kind&&"value"!==pt.type.kind)return Ee.error("Cannot compare types '"+fr($e.type)+"' and '"+fr(pt.type)+"'.");ae&&("value"===$e.type.kind&&"value"!==pt.type.kind?$e=new qr(pt.type,[$e]):"value"!==$e.type.kind&&"value"===pt.type.kind&&(pt=new qr($e.type,[pt])));var bt=null;if(4===ye.length){if("string"!==$e.type.kind&&"string"!==pt.type.kind&&"value"!==$e.type.kind&&"value"!==pt.type.kind)return Ee.error("Cannot use collator to compare non-string types.");if(!(bt=Ee.parse(ye[3],3,ht)))return null}return new pe($e,pt,bt)},pe.prototype.evaluate=function(ye){var Ee=this.lhs.evaluate(ye),je=this.rhs.evaluate(ye);if(ae&&this.hasUntypedArgument){var $e=gn(Ee),pt=gn(je);if($e.kind!==pt.kind||"string"!==$e.kind&&"number"!==$e.kind)throw new Ln('Expected arguments for "'+M+'" to be (string, string) or (number, number), but found ('+$e.kind+", "+pt.kind+") instead.")}if(this.collator&&!ae&&this.hasUntypedArgument){var bt=gn(Ee),qt=gn(je);if("string"!==bt.kind||"string"!==qt.kind)return I(ye,Ee,je)}return this.collator?Y(ye,Ee,je,this.collator.evaluate(ye)):I(ye,Ee,je)},pe.prototype.eachChild=function(ye){ye(this.lhs),ye(this.rhs),this.collator&&ye(this.collator)},pe.prototype.outputDefined=function(){return!0},pe.prototype.serialize=function(){var ye=[M];return this.eachChild(function(Ee){ye.push(Ee.serialize())}),ye},pe}()}qi.parse=function(M,I){if(M.length<=2||M.length>=5)return I.error("Expected 3 or 4 arguments, but found "+(M.length-1)+" instead.");var Y=I.parse(M[1],1,Fe),ae=I.parse(M[2],2,Qe);if(!Y||!ae)return null;if(!dr(Y.type,[Zt(Fe),yt,Fe]))return I.error("Expected first argument to be of type array or string, but found "+fr(Y.type)+" instead");if(4===M.length){var pe=I.parse(M[3],3,Qe);return pe?new qi(Y.type,Y,ae,pe):null}return new qi(Y.type,Y,ae)},qi.prototype.evaluate=function(M){var I=this.input.evaluate(M),Y=this.beginIndex.evaluate(M);if(!Tr(I,["string","array"]))throw new Ln("Expected first argument to be of type array or string, but found "+fr(gn(I))+" instead.");if(this.endIndex){var ae=this.endIndex.evaluate(M);return I.slice(Y,ae)}return I.slice(Y)},qi.prototype.eachChild=function(M){M(this.input),M(this.beginIndex),this.endIndex&&M(this.endIndex)},qi.prototype.outputDefined=function(){return!1},qi.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var M=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),M]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Es=aa("==",function(M,I,Y){return I===Y},as),os=aa("!=",function(M,I,Y){return I!==Y},function(M,I,Y,ae){return!as(0,I,Y,ae)}),Ls=aa("<",function(M,I,Y){return I<Y},function(M,I,Y,ae){return ae.compare(I,Y)<0}),Bs=aa(">",function(M,I,Y){return I>Y},function(M,I,Y,ae){return ae.compare(I,Y)>0}),bs=aa("<=",function(M,I,Y){return I<=Y},function(M,I,Y,ae){return ae.compare(I,Y)<=0}),Ns=aa(">=",function(M,I,Y){return I>=Y},function(M,I,Y,ae){return ae.compare(I,Y)>=0}),Do=function(M,I,Y,ae,pe){this.type=yt,this.number=M,this.locale=I,this.currency=Y,this.minFractionDigits=ae,this.maxFractionDigits=pe};Do.parse=function(M,I){if(3!==M.length)return I.error("Expected two arguments.");var Y=I.parse(M[1],1,Qe);if(!Y)return null;var ae=M[2];if("object"!=typeof ae||Array.isArray(ae))return I.error("NumberFormat options argument must be an object.");var pe=null;if(ae.locale&&!(pe=I.parse(ae.locale,1,yt)))return null;var ye=null;if(ae.currency&&!(ye=I.parse(ae.currency,1,yt)))return null;var Ee=null;if(ae["min-fraction-digits"]&&!(Ee=I.parse(ae["min-fraction-digits"],1,Qe)))return null;var je=null;return ae["max-fraction-digits"]&&!(je=I.parse(ae["max-fraction-digits"],1,Qe))?null:new Do(Y,pe,ye,Ee,je)},Do.prototype.evaluate=function(M){return new Intl.NumberFormat(this.locale?this.locale.evaluate(M):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(M):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(M):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(M):void 0}).format(this.number.evaluate(M))},Do.prototype.eachChild=function(M){M(this.number),this.locale&&M(this.locale),this.currency&&M(this.currency),this.minFractionDigits&&M(this.minFractionDigits),this.maxFractionDigits&&M(this.maxFractionDigits)},Do.prototype.outputDefined=function(){return!1},Do.prototype.serialize=function(){var M={};return this.locale&&(M.locale=this.locale.serialize()),this.currency&&(M.currency=this.currency.serialize()),this.minFractionDigits&&(M["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(M["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),M]};var No=function(M){this.type=Qe,this.input=M};No.parse=function(M,I){if(2!==M.length)return I.error("Expected 1 argument, but found "+(M.length-1)+" instead.");var Y=I.parse(M[1],1);return Y?"array"!==Y.type.kind&&"string"!==Y.type.kind&&"value"!==Y.type.kind?I.error("Expected argument of type string or array, but found "+fr(Y.type)+" instead."):new No(Y):null},No.prototype.evaluate=function(M){var I=this.input.evaluate(M);if("string"==typeof I||Array.isArray(I))return I.length;throw new Ln("Expected value to be of type string or array, but found "+fr(gn(I))+" instead.")},No.prototype.eachChild=function(M){M(this.input)},No.prototype.outputDefined=function(){return!1},No.prototype.serialize=function(){var M=["length"];return this.eachChild(function(I){M.push(I.serialize())}),M};var qo={"==":Es,"!=":os,">":Bs,"<":Ls,">=":Ns,"<=":bs,array:qr,at:_t,boolean:qr,case:ri,coalesce:Ji,collator:Fn,format:Pr,image:un,in:st,"index-of":sr,interpolate:Qi,"interpolate-hcl":Qi,"interpolate-lab":Qi,length:No,let:Dt,literal:Gn,match:hn,number:qr,"number-format":Do,object:qr,slice:qi,step:gi,string:qr,"to-boolean":cn,"to-color":cn,"to-number":cn,"to-string":cn,var:An,within:nn};function jo(M,I){var Y=I[0],ae=I[1],pe=I[2],ye=I[3];Y=Y.evaluate(M),ae=ae.evaluate(M),pe=pe.evaluate(M);var Ee=ye?ye.evaluate(M):1,je=Zr(Y,ae,pe,Ee);if(je)throw new Ln(je);return new mr(Y/255*Ee,ae/255*Ee,pe/255*Ee,Ee)}function Yo(M,I){return M in I}function ss(M,I){var Y=I[M];return void 0===Y?null:Y}function xo(M){return{type:M}}function _s(M){return{result:"success",value:M}}function $a(M){return{result:"error",value:M}}function Wo(M){return"data-driven"===M["property-type"]||"cross-faded-data-driven"===M["property-type"]}function ws(M){return!!M.expression&&M.expression.parameters.indexOf("zoom")>-1}function So(M){return!!M.expression&&M.expression.interpolated}function na(M){return M instanceof Number?"number":M instanceof String?"string":M instanceof Boolean?"boolean":Array.isArray(M)?"array":null===M?"null":typeof M}function Ve(M){return"object"==typeof M&&null!==M&&!Array.isArray(M)}function qe(M){return M}function et(M,I,Y){return void 0!==M?M:void 0!==I?I:void 0!==Y?Y:void 0}function lt(M,I,Y,ae,pe){return et(typeof Y===pe?ae[Y]:void 0,M.default,I.default)}function wt(M,I,Y){if("number"!==na(Y))return et(M.default,I.default);var ae=M.stops.length;if(1===ae||Y<=M.stops[0][0])return M.stops[0][1];if(Y>=M.stops[ae-1][0])return M.stops[ae-1][1];var pe=Hn(M.stops.map(function(ye){return ye[0]}),Y);return M.stops[pe][1]}function vt(M,I,Y){var ae=void 0!==M.base?M.base:1;if("number"!==na(Y))return et(M.default,I.default);var pe=M.stops.length;if(1===pe||Y<=M.stops[0][0])return M.stops[0][1];if(Y>=M.stops[pe-1][0])return M.stops[pe-1][1];var tr,Kt,Ar,jr,ye=Hn(M.stops.map(function(qt){return qt[0]}),Y),Ee=(tr=ae,jr=Y-(Kt=M.stops[ye][0]),0==(Ar=M.stops[ye+1][0]-Kt)?0:1===tr?jr/Ar:(Math.pow(tr,jr)-1)/(Math.pow(tr,Ar)-1)),je=M.stops[ye][1],$e=M.stops[ye+1][1],pt=En[I.type]||qe;if(M.colorSpace&&"rgb"!==M.colorSpace){var bt=ia[M.colorSpace];pt=function(qt,tr){return bt.reverse(bt.interpolate(bt.forward(qt),bt.forward(tr),Ee))}}return"function"==typeof je.evaluate?{evaluate:function(){for(var qt=[],tr=arguments.length;tr--;)qt[tr]=arguments[tr];var Kt=je.evaluate.apply(void 0,qt),hr=$e.evaluate.apply(void 0,qt);if(void 0!==Kt&&void 0!==hr)return pt(Kt,hr,Ee)}}:pt(je,$e,Ee)}function Ot(M,I,Y){return"color"===I.type?Y=mr.parse(Y):"formatted"===I.type?Y=Gr.fromString(Y.toString()):"resolvedImage"===I.type?Y=Er.fromString(Y.toString()):na(Y)===I.type||"enum"===I.type&&I.values[Y]||(Y=void 0),et(Y,M.default,I.default)}Nn.register(qo,{error:[{kind:"error"},[yt],function(M,I){throw new Ln(I[0].evaluate(M))}],typeof:[yt,[Fe],function(M,I){return fr(gn(I[0].evaluate(M)))}],"to-rgba":[Zt(Qe,4),[Yt],function(M,I){return I[0].evaluate(M).toArray()}],rgb:[Yt,[Qe,Qe,Qe],jo],rgba:[Yt,[Qe,Qe,Qe,Qe],jo],has:{type:Nt,overloads:[[[yt],function(M,I){return Yo(I[0].evaluate(M),M.properties())}],[[yt,rr],function(M,I){var ae=I[1];return Yo(I[0].evaluate(M),ae.evaluate(M))}]]},get:{type:Fe,overloads:[[[yt],function(M,I){return ss(I[0].evaluate(M),M.properties())}],[[yt,rr],function(M,I){var ae=I[1];return ss(I[0].evaluate(M),ae.evaluate(M))}]]},"feature-state":[Fe,[yt],function(M,I){return ss(I[0].evaluate(M),M.featureState||{})}],properties:[rr,[],function(M){return M.properties()}],"geometry-type":[yt,[],function(M){return M.geometryType()}],id:[Fe,[],function(M){return M.id()}],zoom:[Qe,[],function(M){return M.globals.zoom}],"heatmap-density":[Qe,[],function(M){return M.globals.heatmapDensity||0}],"line-progress":[Qe,[],function(M){return M.globals.lineProgress||0}],accumulated:[Fe,[],function(M){return void 0===M.globals.accumulated?null:M.globals.accumulated}],"+":[Qe,xo(Qe),function(M,I){for(var Y=0,ae=0,pe=I;ae<pe.length;ae+=1)Y+=pe[ae].evaluate(M);return Y}],"*":[Qe,xo(Qe),function(M,I){for(var Y=1,ae=0,pe=I;ae<pe.length;ae+=1)Y*=pe[ae].evaluate(M);return Y}],"-":{type:Qe,overloads:[[[Qe,Qe],function(M,I){var ae=I[1];return I[0].evaluate(M)-ae.evaluate(M)}],[[Qe],function(M,I){return-I[0].evaluate(M)}]]},"/":[Qe,[Qe,Qe],function(M,I){var ae=I[1];return I[0].evaluate(M)/ae.evaluate(M)}],"%":[Qe,[Qe,Qe],function(M,I){var ae=I[1];return I[0].evaluate(M)%ae.evaluate(M)}],ln2:[Qe,[],function(){return Math.LN2}],pi:[Qe,[],function(){return Math.PI}],e:[Qe,[],function(){return Math.E}],"^":[Qe,[Qe,Qe],function(M,I){var ae=I[1];return Math.pow(I[0].evaluate(M),ae.evaluate(M))}],sqrt:[Qe,[Qe],function(M,I){return Math.sqrt(I[0].evaluate(M))}],log10:[Qe,[Qe],function(M,I){return Math.log(I[0].evaluate(M))/Math.LN10}],ln:[Qe,[Qe],function(M,I){return Math.log(I[0].evaluate(M))}],log2:[Qe,[Qe],function(M,I){return Math.log(I[0].evaluate(M))/Math.LN2}],sin:[Qe,[Qe],function(M,I){return Math.sin(I[0].evaluate(M))}],cos:[Qe,[Qe],function(M,I){return Math.cos(I[0].evaluate(M))}],tan:[Qe,[Qe],function(M,I){return Math.tan(I[0].evaluate(M))}],asin:[Qe,[Qe],function(M,I){return Math.asin(I[0].evaluate(M))}],acos:[Qe,[Qe],function(M,I){return Math.acos(I[0].evaluate(M))}],atan:[Qe,[Qe],function(M,I){return Math.atan(I[0].evaluate(M))}],min:[Qe,xo(Qe),function(M,I){return Math.min.apply(Math,I.map(function(Y){return Y.evaluate(M)}))}],max:[Qe,xo(Qe),function(M,I){return Math.max.apply(Math,I.map(function(Y){return Y.evaluate(M)}))}],abs:[Qe,[Qe],function(M,I){return Math.abs(I[0].evaluate(M))}],round:[Qe,[Qe],function(M,I){var Y=I[0].evaluate(M);return Y<0?-Math.round(-Y):Math.round(Y)}],floor:[Qe,[Qe],function(M,I){return Math.floor(I[0].evaluate(M))}],ceil:[Qe,[Qe],function(M,I){return Math.ceil(I[0].evaluate(M))}],"filter-==":[Nt,[yt,Fe],function(M,I){var Y=I[0],ae=I[1];return M.properties()[Y.value]===ae.value}],"filter-id-==":[Nt,[Fe],function(M,I){var Y=I[0];return M.id()===Y.value}],"filter-type-==":[Nt,[yt],function(M,I){var Y=I[0];return M.geometryType()===Y.value}],"filter-<":[Nt,[yt,Fe],function(M,I){var Y=I[0],ae=I[1],pe=M.properties()[Y.value],ye=ae.value;return typeof pe==typeof ye&&pe<ye}],"filter-id-<":[Nt,[Fe],function(M,I){var Y=I[0],ae=M.id(),pe=Y.value;return typeof ae==typeof pe&&ae<pe}],"filter->":[Nt,[yt,Fe],function(M,I){var Y=I[0],ae=I[1],pe=M.properties()[Y.value],ye=ae.value;return typeof pe==typeof ye&&pe>ye}],"filter-id->":[Nt,[Fe],function(M,I){var Y=I[0],ae=M.id(),pe=Y.value;return typeof ae==typeof pe&&ae>pe}],"filter-<=":[Nt,[yt,Fe],function(M,I){var Y=I[0],ae=I[1],pe=M.properties()[Y.value],ye=ae.value;return typeof pe==typeof ye&&pe<=ye}],"filter-id-<=":[Nt,[Fe],function(M,I){var Y=I[0],ae=M.id(),pe=Y.value;return typeof ae==typeof pe&&ae<=pe}],"filter->=":[Nt,[yt,Fe],function(M,I){var Y=I[0],ae=I[1],pe=M.properties()[Y.value],ye=ae.value;return typeof pe==typeof ye&&pe>=ye}],"filter-id->=":[Nt,[Fe],function(M,I){var Y=I[0],ae=M.id(),pe=Y.value;return typeof ae==typeof pe&&ae>=pe}],"filter-has":[Nt,[Fe],function(M,I){return I[0].value in M.properties()}],"filter-has-id":[Nt,[],function(M){return null!==M.id()&&void 0!==M.id()}],"filter-type-in":[Nt,[Zt(yt)],function(M,I){return I[0].value.indexOf(M.geometryType())>=0}],"filter-id-in":[Nt,[Zt(Fe)],function(M,I){return I[0].value.indexOf(M.id())>=0}],"filter-in-small":[Nt,[yt,Zt(Fe)],function(M,I){var Y=I[0];return I[1].value.indexOf(M.properties()[Y.value])>=0}],"filter-in-large":[Nt,[yt,Zt(Fe)],function(M,I){var Y=I[0],ae=I[1];return function(pe,ye,Ee,je){for(;Ee<=je;){var $e=Ee+je>>1;if(ye[$e]===pe)return!0;ye[$e]>pe?je=$e-1:Ee=$e+1}return!1}(M.properties()[Y.value],ae.value,0,ae.value.length-1)}],all:{type:Nt,overloads:[[[Nt,Nt],function(M,I){var ae=I[1];return I[0].evaluate(M)&&ae.evaluate(M)}],[xo(Nt),function(M,I){for(var Y=0,ae=I;Y<ae.length;Y+=1)if(!ae[Y].evaluate(M))return!1;return!0}]]},any:{type:Nt,overloads:[[[Nt,Nt],function(M,I){var ae=I[1];return I[0].evaluate(M)||ae.evaluate(M)}],[xo(Nt),function(M,I){for(var Y=0,ae=I;Y<ae.length;Y+=1)if(ae[Y].evaluate(M))return!0;return!1}]]},"!":[Nt,[Nt],function(M,I){return!I[0].evaluate(M)}],"is-supported-script":[Nt,[yt],function(M,I){var ae=M.globals&&M.globals.isSupportedScript;return!ae||ae(I[0].evaluate(M))}],upcase:[yt,[yt],function(M,I){return I[0].evaluate(M).toUpperCase()}],downcase:[yt,[yt],function(M,I){return I[0].evaluate(M).toLowerCase()}],concat:[yt,xo(Fe),function(M,I){return I.map(function(Y){return Vn(Y.evaluate(M))}).join("")}],"resolved-locale":[yt,[ht],function(M,I){return I[0].evaluate(M).resolvedLocale()}]});var ir=function(M,I){var Y;this.expression=M,this._warningHistory={},this._evaluator=new Bn,this._defaultValue=I?"color"===(Y=I).type&&Ve(Y.default)?new mr(0,0,0,0):"color"===Y.type?mr.parse(Y.default)||null:void 0===Y.default?null:Y.default:null,this._enumValues=I&&"enum"===I.type?I.values:null};function or(M){return Array.isArray(M)&&M.length>0&&"string"==typeof M[0]&&M[0]in qo}function er(M,I){var pe,ye,Y=new wn(qo,[],I?(ye={color:Yt,string:yt,number:Qe,enum:yt,boolean:Nt,formatted:kt,resolvedImage:Gt},"array"===(pe=I).type?Zt(ye[pe.value]||Fe,pe.length):ye[pe.type]):void 0),ae=Y.parse(M,void 0,void 0,void 0,I&&"string"===I.type?{typeAnnotation:"coerce"}:void 0);return ae?_s(new ir(ae,I)):$a(Y.errors)}ir.prototype.evaluateWithoutErrorHandling=function(M,I,Y,ae,pe,ye){return this._evaluator.globals=M,this._evaluator.feature=I,this._evaluator.featureState=Y,this._evaluator.canonical=ae,this._evaluator.availableImages=pe||null,this._evaluator.formattedSection=ye,this.expression.evaluate(this._evaluator)},ir.prototype.evaluate=function(M,I,Y,ae,pe,ye){this._evaluator.globals=M,this._evaluator.feature=I||null,this._evaluator.featureState=Y||null,this._evaluator.canonical=ae,this._evaluator.availableImages=pe||null,this._evaluator.formattedSection=ye||null;try{var Ee=this.expression.evaluate(this._evaluator);if(null==Ee||"number"==typeof Ee&&Ee!=Ee)return this._defaultValue;if(this._enumValues&&!(Ee in this._enumValues))throw new Ln("Expected value to be one of "+Object.keys(this._enumValues).map(function(je){return JSON.stringify(je)}).join(", ")+", but found "+JSON.stringify(Ee)+" instead.");return Ee}catch(je){return this._warningHistory[je.message]||(this._warningHistory[je.message]=!0,"undefined"!=typeof console&&console.warn(je.message)),this._defaultValue}};var ur=function(M,I){this.kind=M,this._styleExpression=I,this.isStateDependent="constant"!==M&&!Ur(I.expression)};ur.prototype.evaluateWithoutErrorHandling=function(M,I,Y,ae,pe,ye){return this._styleExpression.evaluateWithoutErrorHandling(M,I,Y,ae,pe,ye)},ur.prototype.evaluate=function(M,I,Y,ae,pe,ye){return this._styleExpression.evaluate(M,I,Y,ae,pe,ye)};var xr=function(M,I,Y,ae){this.kind=M,this.zoomStops=Y,this._styleExpression=I,this.isStateDependent="camera"!==M&&!Ur(I.expression),this.interpolationType=ae};function kr(M,I){if("error"===(M=er(M,I)).result)return M;var Y=M.value.expression,ae=Cn(Y);if(!ae&&!Wo(I))return $a([new ct("","data expressions not supported")]);var pe=Kr(Y,["zoom"]);if(!pe&&!ws(I))return $a([new ct("","zoom expressions not supported")]);var ye=function je($e){var pt=null;if($e instanceof Dt)pt=je($e.result);else if($e instanceof Ji)for(var bt=0,qt=$e.args;bt<qt.length&&!(pt=je(qt[bt]));bt+=1);else($e instanceof gi||$e instanceof Qi)&&$e.input instanceof Nn&&"zoom"===$e.input.name&&(pt=$e);return pt instanceof ct||$e.eachChild(function(Kt){var hr=je(Kt);hr instanceof ct?pt=hr:!pt&&hr?pt=new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):pt&&hr&&pt!==hr&&(pt=new ct("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),pt}(Y);return ye||pe?ye instanceof ct?$a([ye]):ye instanceof Qi&&!So(I)?$a([new ct("",'"interpolate" expressions cannot be used with this property')]):_s(ye?new xr(ae?"camera":"composite",M.value,ye.labels,ye instanceof Qi?ye.interpolation:void 0):new ur(ae?"constant":"source",M.value)):$a([new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}xr.prototype.evaluateWithoutErrorHandling=function(M,I,Y,ae,pe,ye){return this._styleExpression.evaluateWithoutErrorHandling(M,I,Y,ae,pe,ye)},xr.prototype.evaluate=function(M,I,Y,ae,pe,ye){return this._styleExpression.evaluate(M,I,Y,ae,pe,ye)},xr.prototype.interpolationFactor=function(M,I,Y){return this.interpolationType?Qi.interpolationFactor(this.interpolationType,M,I,Y):0};var Cr=function(M,I){this._parameters=M,this._specification=I,xt(this,function Y(ae,pe){var ye,Ee,je,$e="color"===pe.type,pt=ae.stops&&"object"==typeof ae.stops[0][0],qt=pt||!(pt||void 0!==ae.property),tr=ae.type||(So(pe)?"exponential":"interval");if($e&&((ae=xt({},ae)).stops&&(ae.stops=ae.stops.map(function(yi){return[yi[0],mr.parse(yi[1])]})),ae.default=mr.parse(ae.default?ae.default:pe.default)),ae.colorSpace&&"rgb"!==ae.colorSpace&&!ia[ae.colorSpace])throw new Error("Unknown color space: "+ae.colorSpace);if("exponential"===tr)ye=vt;else if("interval"===tr)ye=wt;else if("categorical"===tr){ye=lt,Ee=Object.create(null);for(var Kt=0,hr=ae.stops;Kt<hr.length;Kt+=1){var Ar=hr[Kt];Ee[Ar[0]]=Ar[1]}je=typeof ae.stops[0][0]}else{if("identity"!==tr)throw new Error('Unknown function type "'+tr+'"');ye=Ot}if(pt){for(var jr={},Nr=[],Yr=0;Yr<ae.stops.length;Yr++){var Wr=ae.stops[Yr],tn=Wr[0].zoom;void 0===jr[tn]&&(jr[tn]={zoom:tn,type:ae.type,property:ae.property,default:ae.default,stops:[]},Nr.push(tn)),jr[tn].stops.push([Wr[0].value,Wr[1]])}for(var kn=[],On=0,$n=Nr;On<$n.length;On+=1){var Xn=$n[On];kn.push([jr[Xn].zoom,Y(jr[Xn],pe)])}var ii={name:"linear"};return{kind:"composite",interpolationType:ii,interpolationFactor:Qi.interpolationFactor.bind(void 0,ii),zoomStops:kn.map(function(yi){return yi[0]}),evaluate:function(yi,li){var ki=yi.zoom;return vt({stops:kn,base:ae.base},pe,ki).evaluate(ki,li)}}}if(qt){var vi="exponential"===tr?{name:"exponential",base:void 0!==ae.base?ae.base:1}:null;return{kind:"camera",interpolationType:vi,interpolationFactor:Qi.interpolationFactor.bind(void 0,vi),zoomStops:ae.stops.map(function(yi){return yi[0]}),evaluate:function(yi){return ye(ae,pe,yi.zoom,Ee,je)}}}return{kind:"source",evaluate:function(yi,li){var ki=li&&li.properties?li.properties[ae.property]:void 0;return void 0===ki?et(ae.default,pe.default):ye(ae,pe,ki,Ee,je)}}}(this._parameters,this._specification))};function Vr(M){var I=M.key,Y=M.value,ae=M.valueSpec||{},pe=M.objectElementValidators||{},ye=M.style,Ee=M.styleSpec,je=[],$e=na(Y);if("object"!==$e)return[new Ke(I,Y,"object expected, "+$e+" found")];for(var pt in Y){var bt=pt.split(".")[0],qt=ae[bt]||ae["*"],tr=void 0;if(pe[bt])tr=pe[bt];else if(ae[bt])tr=pr;else if(pe["*"])tr=pe["*"];else{if(!ae["*"]){je.push(new Ke(I,Y[pt],'unknown property "'+pt+'"'));continue}tr=pr}je=je.concat(tr({key:(I&&I+".")+pt,value:Y[pt],valueSpec:qt,style:ye,styleSpec:Ee,object:Y,objectKey:pt},Y))}for(var Kt in ae)pe[Kt]||ae[Kt].required&&void 0===ae[Kt].default&&void 0===Y[Kt]&&je.push(new Ke(I,Y,'missing required property "'+Kt+'"'));return je}function pn(M){var I=M.value,Y=M.valueSpec,ae=M.style,pe=M.styleSpec,ye=M.key,Ee=M.arrayElementValidator||pr;if("array"!==na(I))return[new Ke(ye,I,"array expected, "+na(I)+" found")];if(Y.length&&I.length!==Y.length)return[new Ke(ye,I,"array length "+Y.length+" expected, length "+I.length+" found")];if(Y["min-length"]&&I.length<Y["min-length"])return[new Ke(ye,I,"array length at least "+Y["min-length"]+" expected, length "+I.length+" found")];var je={type:Y.value,values:Y.values};pe.$version<7&&(je.function=Y.function),"object"===na(Y.value)&&(je=Y.value);for(var $e=[],pt=0;pt<I.length;pt++)$e=$e.concat(Ee({array:I,arrayIndex:pt,value:I[pt],valueSpec:je,style:ae,styleSpec:pe,key:ye+"["+pt+"]"}));return $e}function Tn(M){var I=M.key,Y=M.value,ae=M.valueSpec,pe=na(Y);return"number"===pe&&Y!=Y&&(pe="NaN"),"number"!==pe?[new Ke(I,Y,"number expected, "+pe+" found")]:"minimum"in ae&&Y<ae.minimum?[new Ke(I,Y,Y+" is less than the minimum value "+ae.minimum)]:"maximum"in ae&&Y>ae.maximum?[new Ke(I,Y,Y+" is greater than the maximum value "+ae.maximum)]:[]}function Un(M){var I,Y,ae,pe=M.valueSpec,ye=gt(M.value.type),Ee={},je="categorical"!==ye&&void 0===M.value.property,$e=!je,pt="array"===na(M.value.stops)&&"array"===na(M.value.stops[0])&&"object"===na(M.value.stops[0][0]),bt=Vr({key:M.key,value:M.value,valueSpec:M.styleSpec.function,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{stops:function(Kt){if("identity"===ye)return[new Ke(Kt.key,Kt.value,'identity function may not have a "stops" property')];var hr=[],Ar=Kt.value;return hr=hr.concat(pn({key:Kt.key,value:Ar,valueSpec:Kt.valueSpec,style:Kt.style,styleSpec:Kt.styleSpec,arrayElementValidator:qt})),"array"===na(Ar)&&0===Ar.length&&hr.push(new Ke(Kt.key,Ar,"array must have at least one stop")),hr},default:function(Kt){return pr({key:Kt.key,value:Kt.value,valueSpec:pe,style:Kt.style,styleSpec:Kt.styleSpec})}}});return"identity"===ye&&je&&bt.push(new Ke(M.key,M.value,'missing required property "property"')),"identity"===ye||M.value.stops||bt.push(new Ke(M.key,M.value,'missing required property "stops"')),"exponential"===ye&&M.valueSpec.expression&&!So(M.valueSpec)&&bt.push(new Ke(M.key,M.value,"exponential functions not supported")),M.styleSpec.$version>=8&&($e&&!Wo(M.valueSpec)?bt.push(new Ke(M.key,M.value,"property functions not supported")):je&&!ws(M.valueSpec)&&bt.push(new Ke(M.key,M.value,"zoom functions not supported"))),"categorical"!==ye&&!pt||void 0!==M.value.property||bt.push(new Ke(M.key,M.value,'"property" property is required')),bt;function qt(Kt){var hr=[],Ar=Kt.value,jr=Kt.key;if("array"!==na(Ar))return[new Ke(jr,Ar,"array expected, "+na(Ar)+" found")];if(2!==Ar.length)return[new Ke(jr,Ar,"array length 2 expected, length "+Ar.length+" found")];if(pt){if("object"!==na(Ar[0]))return[new Ke(jr,Ar,"object expected, "+na(Ar[0])+" found")];if(void 0===Ar[0].zoom)return[new Ke(jr,Ar,"object stop key must have zoom")];if(void 0===Ar[0].value)return[new Ke(jr,Ar,"object stop key must have value")];if(ae&&ae>gt(Ar[0].zoom))return[new Ke(jr,Ar[0].zoom,"stop zoom values must appear in ascending order")];gt(Ar[0].zoom)!==ae&&(ae=gt(Ar[0].zoom),Y=void 0,Ee={}),hr=hr.concat(Vr({key:jr+"[0]",value:Ar[0],valueSpec:{zoom:{}},style:Kt.style,styleSpec:Kt.styleSpec,objectElementValidators:{zoom:Tn,value:tr}}))}else hr=hr.concat(tr({key:jr+"[0]",value:Ar[0],valueSpec:{},style:Kt.style,styleSpec:Kt.styleSpec},Ar));return or(Pt(Ar[1]))?hr.concat([new Ke(jr+"[1]",Ar[1],"expressions are not allowed in function stops.")]):hr.concat(pr({key:jr+"[1]",value:Ar[1],valueSpec:pe,style:Kt.style,styleSpec:Kt.styleSpec}))}function tr(Kt,hr){var Ar=na(Kt.value),jr=gt(Kt.value),Nr=null!==Kt.value?Kt.value:hr;if(I){if(Ar!==I)return[new Ke(Kt.key,Nr,Ar+" stop domain type must match previous stop domain type "+I)]}else I=Ar;if("number"!==Ar&&"string"!==Ar&&"boolean"!==Ar)return[new Ke(Kt.key,Nr,"stop domain value must be a number, string, or boolean")];if("number"!==Ar&&"categorical"!==ye){var Yr="number expected, "+Ar+" found";return Wo(pe)&&void 0===ye&&(Yr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ke(Kt.key,Nr,Yr)]}return"categorical"!==ye||"number"!==Ar||isFinite(jr)&&Math.floor(jr)===jr?"categorical"!==ye&&"number"===Ar&&void 0!==Y&&jr<Y?[new Ke(Kt.key,Nr,"stop domain values must appear in ascending order")]:(Y=jr,"categorical"===ye&&jr in Ee?[new Ke(Kt.key,Nr,"stop domain values must be unique")]:(Ee[jr]=!0,[])):[new Ke(Kt.key,Nr,"integer expected, found "+jr)]}}function Wn(M){var I=("property"===M.expressionContext?kr:er)(Pt(M.value),M.valueSpec);if("error"===I.result)return I.value.map(function(ae){return new Ke(""+M.key+ae.key,M.value,ae.message)});var Y=I.value.expression||I.value._styleExpression.expression;if("property"===M.expressionContext&&"text-font"===M.propertyKey&&!Y.outputDefined())return[new Ke(M.key,M.value,'Invalid data expression for "'+M.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===M.expressionContext&&"layout"===M.propertyType&&!Ur(Y))return[new Ke(M.key,M.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===M.expressionContext&&!Ur(Y))return[new Ke(M.key,M.value,'"feature-state" data expressions are not supported with filters.')];if(M.expressionContext&&0===M.expressionContext.indexOf("cluster")){if(!Kr(Y,["zoom","feature-state"]))return[new Ke(M.key,M.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===M.expressionContext&&!Cn(Y))return[new Ke(M.key,M.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ei(M){var I=M.key,Y=M.value,ae=M.valueSpec,pe=[];return Array.isArray(ae.values)?-1===ae.values.indexOf(gt(Y))&&pe.push(new Ke(I,Y,"expected one of ["+ae.values.join(", ")+"], "+JSON.stringify(Y)+" found")):-1===Object.keys(ae.values).indexOf(gt(Y))&&pe.push(new Ke(I,Y,"expected one of ["+Object.keys(ae.values).join(", ")+"], "+JSON.stringify(Y)+" found")),pe}function Yn(M){if(!0===M||!1===M)return!0;if(!Array.isArray(M)||0===M.length)return!1;switch(M[0]){case"has":return M.length>=2&&"$id"!==M[1]&&"$type"!==M[1];case"in":return M.length>=3&&("string"!=typeof M[1]||Array.isArray(M[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==M.length||Array.isArray(M[1])||Array.isArray(M[2]);case"any":case"all":for(var I=0,Y=M.slice(1);I<Y.length;I+=1){var ae=Y[I];if(!Yn(ae)&&"boolean"!=typeof ae)return!1}return!0;default:return!0}}Cr.deserialize=function(M){return new Cr(M._parameters,M._specification)},Cr.serialize=function(M){return{_parameters:M._parameters,_specification:M._specification}};var Si={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ri(M){if(null==M)return{filter:function(){return!0},needGeometry:!1};Yn(M)||(M=Zi(M));var I=er(M,Si);if("error"===I.result)throw new Error(I.value.map(function(Y){return Y.key+": "+Y.message}).join(", "));return{filter:function(Y,ae,pe){return I.value.evaluate(Y,ae,{},pe)},needGeometry:function Y(ae){if(!Array.isArray(ae))return!1;if("within"===ae[0])return!0;for(var pe=1;pe<ae.length;pe++)if(Y(ae[pe]))return!0;return!1}(M)}}function Ki(M,I){return M<I?-1:M>I?1:0}function Zi(M){if(!M)return!0;var I,Y=M[0];return M.length<=1?"any"!==Y:"=="===Y?ea(M[1],M[2],"=="):"!="===Y?ya(ea(M[1],M[2],"==")):"<"===Y||">"===Y||"<="===Y||">="===Y?ea(M[1],M[2],Y):"any"===Y?(I=M.slice(1),["any"].concat(I.map(Zi))):"all"===Y?["all"].concat(M.slice(1).map(Zi)):"none"===Y?["all"].concat(M.slice(1).map(Zi).map(ya)):"in"===Y?Oa(M[1],M.slice(2)):"!in"===Y?ya(Oa(M[1],M.slice(2))):"has"===Y?Ia(M[1]):"!has"===Y?ya(Ia(M[1])):"within"!==Y||M}function ea(M,I,Y){switch(M){case"$type":return["filter-type-"+Y,I];case"$id":return["filter-id-"+Y,I];default:return["filter-"+Y,M,I]}}function Oa(M,I){if(0===I.length)return!1;switch(M){case"$type":return["filter-type-in",["literal",I]];case"$id":return["filter-id-in",["literal",I]];default:return I.length>200&&!I.some(function(Y){return typeof Y!=typeof I[0]})?["filter-in-large",M,["literal",I.sort(Ki)]]:["filter-in-small",M,["literal",I]]}}function Ia(M){switch(M){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",M]}}function ya(M){return["!",M]}function xa(M){return Yn(Pt(M.value))?Wn(xt({},M,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function I(Y){var ae=Y.value,pe=Y.key;if("array"!==na(ae))return[new Ke(pe,ae,"array expected, "+na(ae)+" found")];var ye,Ee=Y.styleSpec,je=[];if(ae.length<1)return[new Ke(pe,ae,"filter array must have at least 1 element")];switch(je=je.concat(ei({key:pe+"[0]",value:ae[0],valueSpec:Ee.filter_operator,style:Y.style,styleSpec:Y.styleSpec})),gt(ae[0])){case"<":case"<=":case">":case">=":ae.length>=2&&"$type"===gt(ae[1])&&je.push(new Ke(pe,ae,'"$type" cannot be use with operator "'+ae[0]+'"'));case"==":case"!=":3!==ae.length&&je.push(new Ke(pe,ae,'filter array for operator "'+ae[0]+'" must have 3 elements'));case"in":case"!in":ae.length>=2&&"string"!==(ye=na(ae[1]))&&je.push(new Ke(pe+"[1]",ae[1],"string expected, "+ye+" found"));for(var $e=2;$e<ae.length;$e++)ye=na(ae[$e]),"$type"===gt(ae[1])?je=je.concat(ei({key:pe+"["+$e+"]",value:ae[$e],valueSpec:Ee.geometry_type,style:Y.style,styleSpec:Y.styleSpec})):"string"!==ye&&"number"!==ye&&"boolean"!==ye&&je.push(new Ke(pe+"["+$e+"]",ae[$e],"string, number, or boolean expected, "+ye+" found"));break;case"any":case"all":case"none":for(var pt=1;pt<ae.length;pt++)je=je.concat(I({key:pe+"["+pt+"]",value:ae[pt],style:Y.style,styleSpec:Y.styleSpec}));break;case"has":case"!has":ye=na(ae[1]),2!==ae.length?je.push(new Ke(pe,ae,'filter array for "'+ae[0]+'" operator must have 2 elements')):"string"!==ye&&je.push(new Ke(pe+"[1]",ae[1],"string expected, "+ye+" found"));break;case"within":ye=na(ae[1]),2!==ae.length?je.push(new Ke(pe,ae,'filter array for "'+ae[0]+'" operator must have 2 elements')):"object"!==ye&&je.push(new Ke(pe+"[1]",ae[1],"object expected, "+ye+" found"))}return je}(M)}function Ca(M,I){var Y=M.key,ae=M.style,pe=M.styleSpec,ye=M.value,Ee=M.objectKey,je=pe[I+"_"+M.layerType];if(!je)return[];var $e=Ee.match(/^(.*)-transition$/);if("paint"===I&&$e&&je[$e[1]]&&je[$e[1]].transition)return pr({key:Y,value:ye,valueSpec:pe.transition,style:ae,styleSpec:pe});var pt,bt=M.valueSpec||je[Ee];if(!bt)return[new Ke(Y,ye,'unknown property "'+Ee+'"')];if("string"===na(ye)&&Wo(bt)&&!bt.tokens&&(pt=/^{([^}]+)}$/.exec(ye)))return[new Ke(Y,ye,'"'+Ee+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(pt[1])+" }`.")];var qt=[];return"symbol"===M.layerType&&("text-field"===Ee&&ae&&!ae.glyphs&&qt.push(new Ke(Y,ye,'use of "text-field" requires a style "glyphs" property')),"text-font"===Ee&&Ve(Pt(ye))&&"identity"===gt(ye.type)&&qt.push(new Ke(Y,ye,'"text-font" does not support identity functions'))),qt.concat(pr({key:M.key,value:ye,valueSpec:bt,style:ae,styleSpec:pe,expressionContext:"property",propertyType:I,propertyKey:Ee}))}function Xa(M){return Ca(M,"paint")}function so(M){return Ca(M,"layout")}function lo(M){var I=[],Y=M.value,ae=M.key,pe=M.style,ye=M.styleSpec;Y.type||Y.ref||I.push(new Ke(ae,Y,'either "type" or "ref" is required'));var Ee,je=gt(Y.type),$e=gt(Y.ref);if(Y.id)for(var pt=gt(Y.id),bt=0;bt<M.arrayIndex;bt++){var qt=pe.layers[bt];gt(qt.id)===pt&&I.push(new Ke(ae,Y.id,'duplicate layer id "'+Y.id+'", previously used at line '+qt.id.__line__))}if("ref"in Y)["type","source","source-layer","filter","layout"].forEach(function(hr){hr in Y&&I.push(new Ke(ae,Y[hr],'"'+hr+'" is prohibited for ref layers'))}),pe.layers.forEach(function(hr){gt(hr.id)===$e&&(Ee=hr)}),Ee?Ee.ref?I.push(new Ke(ae,Y.ref,"ref cannot reference another ref layer")):je=gt(Ee.type):I.push(new Ke(ae,Y.ref,'ref layer "'+$e+'" not found'));else if("background"!==je)if(Y.source){var tr=pe.sources&&pe.sources[Y.source],Kt=tr&&gt(tr.type);tr?"vector"===Kt&&"raster"===je?I.push(new Ke(ae,Y.source,'layer "'+Y.id+'" requires a raster source')):"raster"===Kt&&"raster"!==je?I.push(new Ke(ae,Y.source,'layer "'+Y.id+'" requires a vector source')):"vector"!==Kt||Y["source-layer"]?"raster-dem"===Kt&&"hillshade"!==je?I.push(new Ke(ae,Y.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==je||!Y.paint||!Y.paint["line-gradient"]||"geojson"===Kt&&tr.lineMetrics||I.push(new Ke(ae,Y,'layer "'+Y.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):I.push(new Ke(ae,Y,'layer "'+Y.id+'" must specify a "source-layer"')):I.push(new Ke(ae,Y.source,'source "'+Y.source+'" not found'))}else I.push(new Ke(ae,Y,'missing required property "source"'));return I=I.concat(Vr({key:ae,value:Y,valueSpec:ye.layer,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return pr({key:ae+".type",value:Y.type,valueSpec:ye.layer.type,style:M.style,styleSpec:M.styleSpec,object:Y,objectKey:"type"})},filter:xa,layout:function(hr){return Vr({layer:Y,key:hr.key,value:hr.value,style:hr.style,styleSpec:hr.styleSpec,objectElementValidators:{"*":function(Ar){return so(xt({layerType:je},Ar))}}})},paint:function(hr){return Vr({layer:Y,key:hr.key,value:hr.value,style:hr.style,styleSpec:hr.styleSpec,objectElementValidators:{"*":function(Ar){return Xa(xt({layerType:je},Ar))}}})}}}))}function co(M){var I=M.value,Y=M.key,ae=na(I);return"string"!==ae?[new Ke(Y,I,"string expected, "+ae+" found")]:[]}var uo={promoteId:function(M){var I=M.key,Y=M.value;if("string"===na(Y))return co({key:I,value:Y});var ae=[];for(var pe in Y)ae.push.apply(ae,co({key:I+"."+pe,value:Y[pe]}));return ae}};function Hi(M){var I=M.value,Y=M.key,ae=M.styleSpec,pe=M.style;if(!I.type)return[new Ke(Y,I,'"type" is required')];var ye,Ee=gt(I.type);switch(Ee){case"vector":case"raster":case"raster-dem":return Vr({key:Y,value:I,valueSpec:ae["source_"+Ee.replace("-","_")],style:M.style,styleSpec:ae,objectElementValidators:uo});case"geojson":if(ye=Vr({key:Y,value:I,valueSpec:ae.source_geojson,style:pe,styleSpec:ae,objectElementValidators:uo}),I.cluster)for(var je in I.clusterProperties){var $e=I.clusterProperties[je],pt=$e[0],qt="string"==typeof pt?[pt,["accumulated"],["get",je]]:pt;ye.push.apply(ye,Wn({key:Y+"."+je+".map",value:$e[1],expressionContext:"cluster-map"})),ye.push.apply(ye,Wn({key:Y+"."+je+".reduce",value:qt,expressionContext:"cluster-reduce"}))}return ye;case"video":return Vr({key:Y,value:I,valueSpec:ae.source_video,style:pe,styleSpec:ae});case"image":return Vr({key:Y,value:I,valueSpec:ae.source_image,style:pe,styleSpec:ae});case"canvas":return[new Ke(Y,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ei({key:Y+".type",value:I.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:pe,styleSpec:ae})}}function mt(M){var I=M.value,Y=M.styleSpec,ae=Y.light,pe=M.style,ye=[],Ee=na(I);if(void 0===I)return ye;if("object"!==Ee)return ye.concat([new Ke("light",I,"object expected, "+Ee+" found")]);for(var je in I){var $e=je.match(/^(.*)-transition$/);ye=ye.concat($e&&ae[$e[1]]&&ae[$e[1]].transition?pr({key:je,value:I[je],valueSpec:Y.transition,style:pe,styleSpec:Y}):ae[je]?pr({key:je,value:I[je],valueSpec:ae[je],style:pe,styleSpec:Y}):[new Ke(je,I[je],'unknown property "'+je+'"')])}return ye}var Vt={"*":function(){return[]},array:pn,boolean:function(M){var I=M.value,Y=M.key,ae=na(I);return"boolean"!==ae?[new Ke(Y,I,"boolean expected, "+ae+" found")]:[]},number:Tn,color:function(M){var I=M.key,Y=M.value,ae=na(Y);return"string"!==ae?[new Ke(I,Y,"color expected, "+ae+" found")]:null===wr(Y)?[new Ke(I,Y,'color expected, "'+Y+'" found')]:[]},constants:ut,enum:ei,filter:xa,function:Un,layer:lo,object:Vr,source:Hi,light:mt,string:co,formatted:function(M){return 0===co(M).length?[]:Wn(M)},resolvedImage:function(M){return 0===co(M).length?[]:Wn(M)}};function pr(M){var I=M.value,Y=M.valueSpec,ae=M.styleSpec;return Y.expression&&Ve(gt(I))?Un(M):Y.expression&&or(Pt(I))?Wn(M):Y.type&&Vt[Y.type]?Vt[Y.type](M):Vr(xt({},M,{valueSpec:Y.type?ae[Y.type]:Y}))}function Jt(M){var I=M.value,Y=M.key,ae=co(M);return ae.length||(-1===I.indexOf("{fontstack}")&&ae.push(new Ke(Y,I,'"glyphs" url must include a "{fontstack}" token')),-1===I.indexOf("{range}")&&ae.push(new Ke(Y,I,'"glyphs" url must include a "{range}" token'))),ae}function gr(M,I){void 0===I&&(I=Ie);var Y=[];return Y=Y.concat(pr({key:"",value:M,valueSpec:I.$root,styleSpec:I,style:M,objectElementValidators:{glyphs:Jt,"*":function(){return[]}}})),M.constants&&(Y=Y.concat(ut({key:"constants",value:M.constants,style:M,styleSpec:I}))),Br(Y)}function Br(M){return[].concat(M).sort(function(I,Y){return I.line-Y.line})}function Hr(M){return function(){for(var I=[],Y=arguments.length;Y--;)I[Y]=arguments[Y];return Br(M.apply(this,I))}}gr.source=Hr(Hi),gr.light=Hr(mt),gr.layer=Hr(lo),gr.filter=Hr(xa),gr.paintProperty=Hr(Xa),gr.layoutProperty=Hr(so);var en=gr,_n=en.light,mn=en.paintProperty,Sn=en.layoutProperty;function Rn(M,I){var Y=!1;if(I&&I.length)for(var ae=0,pe=I;ae<pe.length;ae+=1)M.fire(new De(new Error(pe[ae].message))),Y=!0;return Y}var bn=Pn;function Pn(M,I,Y){var ae=this.cells=[];if(M instanceof ArrayBuffer){this.arrayBuffer=M;var pe=new Int32Array(this.arrayBuffer);M=pe[0],this.d=(I=pe[1])+2*(Y=pe[2]);for(var ye=0;ye<this.d*this.d;ye++){var Ee=pe[3+ye],je=pe[3+ye+1];ae.push(Ee===je?null:pe.subarray(Ee,je))}var pt=pe[3+ae.length+1];this.keys=pe.subarray(pe[3+ae.length],pt),this.bboxes=pe.subarray(pt),this.insert=this._insertReadonly}else{this.d=I+2*Y;for(var bt=0;bt<this.d*this.d;bt++)ae.push([]);this.keys=[],this.bboxes=[]}this.n=I,this.extent=M,this.padding=Y,this.scale=I/M,this.uid=0;var qt=Y/I*M;this.min=-qt,this.max=M+qt}Pn.prototype.insert=function(M,I,Y,ae,pe){this._forEachCell(I,Y,ae,pe,this._insertCell,this.uid++),this.keys.push(M),this.bboxes.push(I),this.bboxes.push(Y),this.bboxes.push(ae),this.bboxes.push(pe)},Pn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Pn.prototype._insertCell=function(M,I,Y,ae,pe,ye){this.cells[pe].push(ye)},Pn.prototype.query=function(M,I,Y,ae,pe){var ye=this.min,Ee=this.max;if(M<=ye&&I<=ye&&Ee<=Y&&Ee<=ae&&!pe)return Array.prototype.slice.call(this.keys);var je=[];return this._forEachCell(M,I,Y,ae,this._queryCell,je,{},pe),je},Pn.prototype._queryCell=function(M,I,Y,ae,pe,ye,Ee,je){var $e=this.cells[pe];if(null!==$e)for(var pt=this.keys,bt=this.bboxes,qt=0;qt<$e.length;qt++){var tr=$e[qt];if(void 0===Ee[tr]){var Kt=4*tr;(je?je(bt[Kt+0],bt[Kt+1],bt[Kt+2],bt[Kt+3]):M<=bt[Kt+2]&&I<=bt[Kt+3]&&Y>=bt[Kt+0]&&ae>=bt[Kt+1])?(Ee[tr]=!0,ye.push(pt[tr])):Ee[tr]=!1}}},Pn.prototype._forEachCell=function(M,I,Y,ae,pe,ye,Ee,je){for(var $e=this._convertToCellCoord(M),pt=this._convertToCellCoord(I),bt=this._convertToCellCoord(Y),qt=this._convertToCellCoord(ae),tr=$e;tr<=bt;tr++)for(var Kt=pt;Kt<=qt;Kt++){var hr=this.d*Kt+tr;if((!je||je(this._convertFromCellCoord(tr),this._convertFromCellCoord(Kt),this._convertFromCellCoord(tr+1),this._convertFromCellCoord(Kt+1)))&&pe.call(this,M,I,Y,ae,hr,ye,Ee,je))return}},Pn.prototype._convertFromCellCoord=function(M){return(M-this.padding)/this.scale},Pn.prototype._convertToCellCoord=function(M){return Math.max(0,Math.min(this.d-1,Math.floor(M*this.scale)+this.padding))},Pn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var M=this.cells,I=3+this.cells.length+1+1,Y=0,ae=0;ae<this.cells.length;ae++)Y+=this.cells[ae].length;var pe=new Int32Array(I+Y+this.keys.length+this.bboxes.length);pe[0]=this.extent,pe[1]=this.n,pe[2]=this.padding;for(var ye=I,Ee=0;Ee<M.length;Ee++){var je=M[Ee];pe[3+Ee]=ye,pe.set(je,ye),ye+=je.length}return pe[3+M.length]=ye,pe.set(this.keys,ye),pe[3+M.length+1]=ye+=this.keys.length,pe.set(this.bboxes,ye),ye+=this.bboxes.length,pe.buffer};var Zn=self.ImageData,Qn=self.ImageBitmap,di={};function rn(M,I,Y){void 0===Y&&(Y={}),Object.defineProperty(I,"_classRegistryKey",{value:M,writeable:!1}),di[M]={klass:I,omit:Y.omit||[],shallow:Y.shallow||[]}}for(var ui in rn("Object",Object),bn.serialize=function(M,I){var Y=M.toArrayBuffer();return I&&I.push(Y),{buffer:Y}},bn.deserialize=function(M){return new bn(M.buffer)},rn("Grid",bn),rn("Color",mr),rn("Error",Error),rn("ResolvedImage",Er),rn("StylePropertyFunction",Cr),rn("StyleExpression",ir,{omit:["_evaluator"]}),rn("ZoomDependentExpression",xr),rn("ZoomConstantExpression",ur),rn("CompoundExpression",Nn,{omit:["_evaluate"]}),qo)qo[ui]._classRegistryKey||rn("Expression_"+ui,qo[ui]);function qn(M){return M&&"undefined"!=typeof ArrayBuffer&&(M instanceof ArrayBuffer||M.constructor&&"ArrayBuffer"===M.constructor.name)}function Jn(M){return Qn&&M instanceof Qn}function ci(M,I){if(null==M||"boolean"==typeof M||"number"==typeof M||"string"==typeof M||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp)return M;if(qn(M)||Jn(M))return I&&I.push(M),M;if(ArrayBuffer.isView(M)){var Y=M;return I&&I.push(Y.buffer),Y}if(M instanceof Zn)return I&&I.push(M.data.buffer),M;if(Array.isArray(M)){for(var ae=[],pe=0,ye=M;pe<ye.length;pe+=1)ae.push(ci(ye[pe],I));return ae}if("object"==typeof M){var je=M.constructor,$e=je._classRegistryKey;if(!$e)throw new Error("can't serialize object of unregistered class");var pt=je.serialize?je.serialize(M,I):{};if(!je.serialize){for(var bt in M)if(M.hasOwnProperty(bt)&&!(di[$e].omit.indexOf(bt)>=0)){var qt=M[bt];pt[bt]=di[$e].shallow.indexOf(bt)>=0?qt:ci(qt,I)}M instanceof Error&&(pt.message=M.message)}if(pt.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==$e&&(pt.$name=$e),pt}throw new Error("can't serialize object of type "+typeof M)}function Ii(M){if(null==M||"boolean"==typeof M||"number"==typeof M||"string"==typeof M||M instanceof Boolean||M instanceof Number||M instanceof String||M instanceof Date||M instanceof RegExp||qn(M)||Jn(M)||ArrayBuffer.isView(M)||M instanceof Zn)return M;if(Array.isArray(M))return M.map(Ii);if("object"==typeof M){var I=M.$name||"Object",Y=di[I].klass;if(!Y)throw new Error("can't deserialize unregistered class "+I);if(Y.deserialize)return Y.deserialize(M);for(var ae=Object.create(Y.prototype),pe=0,ye=Object.keys(M);pe<ye.length;pe+=1){var Ee=ye[pe];if("$name"!==Ee){var je=M[Ee];ae[Ee]=di[I].shallow.indexOf(Ee)>=0?je:Ii(je)}}return ae}throw new Error("can't deserialize object of type "+typeof M)}var Ui=function(){this.first=!0};Ui.prototype.update=function(M,I){var Y=Math.floor(M);return this.first?(this.first=!1,this.lastIntegerZoom=Y,this.lastIntegerZoomTime=0,this.lastZoom=M,this.lastFloorZoom=Y,!0):(this.lastFloorZoom>Y?(this.lastIntegerZoom=Y+1,this.lastIntegerZoomTime=I):this.lastFloorZoom<Y&&(this.lastIntegerZoom=Y,this.lastIntegerZoomTime=I),M!==this.lastZoom&&(this.lastZoom=M,this.lastFloorZoom=Y,!0))};var jn={"Latin-1 Supplement":function(M){return M>=128&&M<=255},Arabic:function(M){return M>=1536&&M<=1791},"Arabic Supplement":function(M){return M>=1872&&M<=1919},"Arabic Extended-A":function(M){return M>=2208&&M<=2303},"Hangul Jamo":function(M){return M>=4352&&M<=4607},"Unified Canadian Aboriginal Syllabics":function(M){return M>=5120&&M<=5759},Khmer:function(M){return M>=6016&&M<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(M){return M>=6320&&M<=6399},"General Punctuation":function(M){return M>=8192&&M<=8303},"Letterlike Symbols":function(M){return M>=8448&&M<=8527},"Number Forms":function(M){return M>=8528&&M<=8591},"Miscellaneous Technical":function(M){return M>=8960&&M<=9215},"Control Pictures":function(M){return M>=9216&&M<=9279},"Optical Character Recognition":function(M){return M>=9280&&M<=9311},"Enclosed Alphanumerics":function(M){return M>=9312&&M<=9471},"Geometric Shapes":function(M){return M>=9632&&M<=9727},"Miscellaneous Symbols":function(M){return M>=9728&&M<=9983},"Miscellaneous Symbols and Arrows":function(M){return M>=11008&&M<=11263},"CJK Radicals Supplement":function(M){return M>=11904&&M<=12031},"Kangxi Radicals":function(M){return M>=12032&&M<=12255},"Ideographic Description Characters":function(M){return M>=12272&&M<=12287},"CJK Symbols and Punctuation":function(M){return M>=12288&&M<=12351},Hiragana:function(M){return M>=12352&&M<=12447},Katakana:function(M){return M>=12448&&M<=12543},Bopomofo:function(M){return M>=12544&&M<=12591},"Hangul Compatibility Jamo":function(M){return M>=12592&&M<=12687},Kanbun:function(M){return M>=12688&&M<=12703},"Bopomofo Extended":function(M){return M>=12704&&M<=12735},"CJK Strokes":function(M){return M>=12736&&M<=12783},"Katakana Phonetic Extensions":function(M){return M>=12784&&M<=12799},"Enclosed CJK Letters and Months":function(M){return M>=12800&&M<=13055},"CJK Compatibility":function(M){return M>=13056&&M<=13311},"CJK Unified Ideographs Extension A":function(M){return M>=13312&&M<=19903},"Yijing Hexagram Symbols":function(M){return M>=19904&&M<=19967},"CJK Unified Ideographs":function(M){return M>=19968&&M<=40959},"Yi Syllables":function(M){return M>=40960&&M<=42127},"Yi Radicals":function(M){return M>=42128&&M<=42191},"Hangul Jamo Extended-A":function(M){return M>=43360&&M<=43391},"Hangul Syllables":function(M){return M>=44032&&M<=55215},"Hangul Jamo Extended-B":function(M){return M>=55216&&M<=55295},"Private Use Area":function(M){return M>=57344&&M<=63743},"CJK Compatibility Ideographs":function(M){return M>=63744&&M<=64255},"Arabic Presentation Forms-A":function(M){return M>=64336&&M<=65023},"Vertical Forms":function(M){return M>=65040&&M<=65055},"CJK Compatibility Forms":function(M){return M>=65072&&M<=65103},"Small Form Variants":function(M){return M>=65104&&M<=65135},"Arabic Presentation Forms-B":function(M){return M>=65136&&M<=65279},"Halfwidth and Fullwidth Forms":function(M){return M>=65280&&M<=65519}};function Yi(M){for(var I=0,Y=M;I<Y.length;I+=1)if(Mi(Y[I].charCodeAt(0)))return!0;return!1}function Ni(M){return!(jn.Arabic(M)||jn["Arabic Supplement"](M)||jn["Arabic Extended-A"](M)||jn["Arabic Presentation Forms-A"](M)||jn["Arabic Presentation Forms-B"](M))}function Mi(M){return!(746!==M&&747!==M&&(M<4352||!(jn["Bopomofo Extended"](M)||jn.Bopomofo(M)||jn["CJK Compatibility Forms"](M)&&!(M>=65097&&M<=65103)||jn["CJK Compatibility Ideographs"](M)||jn["CJK Compatibility"](M)||jn["CJK Radicals Supplement"](M)||jn["CJK Strokes"](M)||!(!jn["CJK Symbols and Punctuation"](M)||M>=12296&&M<=12305||M>=12308&&M<=12319||12336===M)||jn["CJK Unified Ideographs Extension A"](M)||jn["CJK Unified Ideographs"](M)||jn["Enclosed CJK Letters and Months"](M)||jn["Hangul Compatibility Jamo"](M)||jn["Hangul Jamo Extended-A"](M)||jn["Hangul Jamo Extended-B"](M)||jn["Hangul Jamo"](M)||jn["Hangul Syllables"](M)||jn.Hiragana(M)||jn["Ideographic Description Characters"](M)||jn.Kanbun(M)||jn["Kangxi Radicals"](M)||jn["Katakana Phonetic Extensions"](M)||jn.Katakana(M)&&12540!==M||!(!jn["Halfwidth and Fullwidth Forms"](M)||65288===M||65289===M||65293===M||M>=65306&&M<=65310||65339===M||65341===M||65343===M||M>=65371&&M<=65503||65507===M||M>=65512&&M<=65519)||!(!jn["Small Form Variants"](M)||M>=65112&&M<=65118||M>=65123&&M<=65126)||jn["Unified Canadian Aboriginal Syllabics"](M)||jn["Unified Canadian Aboriginal Syllabics Extended"](M)||jn["Vertical Forms"](M)||jn["Yijing Hexagram Symbols"](M)||jn["Yi Syllables"](M)||jn["Yi Radicals"](M))))}function Wi(M){return!(Mi(M)||(I=M,jn["Latin-1 Supplement"](I)&&(167===I||169===I||174===I||177===I||188===I||189===I||190===I||215===I||247===I)||jn["General Punctuation"](I)&&(8214===I||8224===I||8225===I||8240===I||8241===I||8251===I||8252===I||8258===I||8263===I||8264===I||8265===I||8273===I)||jn["Letterlike Symbols"](I)||jn["Number Forms"](I)||jn["Miscellaneous Technical"](I)&&(I>=8960&&I<=8967||I>=8972&&I<=8991||I>=8996&&I<=9e3||9003===I||I>=9085&&I<=9114||I>=9150&&I<=9165||9167===I||I>=9169&&I<=9179||I>=9186&&I<=9215)||jn["Control Pictures"](I)&&9251!==I||jn["Optical Character Recognition"](I)||jn["Enclosed Alphanumerics"](I)||jn["Geometric Shapes"](I)||jn["Miscellaneous Symbols"](I)&&!(I>=9754&&I<=9759)||jn["Miscellaneous Symbols and Arrows"](I)&&(I>=11026&&I<=11055||I>=11088&&I<=11097||I>=11192&&I<=11243)||jn["CJK Symbols and Punctuation"](I)||jn.Katakana(I)||jn["Private Use Area"](I)||jn["CJK Compatibility Forms"](I)||jn["Small Form Variants"](I)||jn["Halfwidth and Fullwidth Forms"](I)||8734===I||8756===I||8757===I||I>=9984&&I<=10087||I>=10102&&I<=10131||65532===I||65533===I));var I}function Fi(M){return M>=1424&&M<=2303||jn["Arabic Presentation Forms-A"](M)||jn["Arabic Presentation Forms-B"](M)}function pa(M,I){return!(!I&&Fi(M)||M>=2304&&M<=3583||M>=3840&&M<=4255||jn.Khmer(M))}function fi(M){for(var I=0,Y=M;I<Y.length;I+=1)if(Fi(Y[I].charCodeAt(0)))return!0;return!1}var ca="deferred",Qa="loading",$o="loaded",bo=null,Ei="unavailable",Sa=null,Co=function(M){M&&"string"==typeof M&&M.indexOf("NetworkError")>-1&&(Ei="error"),bo&&bo(M)};function oa(){Pa.fire(new ke("pluginStateChange",{pluginStatus:Ei,pluginURL:Sa}))}var Pa=new Re,eo=function(){return Ei},ga=function(){if(Ei!==ca||!Sa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ei=Qa,oa(),Sa&&St({url:Sa},function(M){M?Co(M):(Ei=$o,oa())})},mo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ei===$o||null!=mo.applyArabicShaping},isLoading:function(){return Ei===Qa},setState:function(M){Ei=M.pluginStatus,Sa=M.pluginURL},isParsed:function(){return null!=mo.applyArabicShaping&&null!=mo.processBidirectionalText&&null!=mo.processStyledBidirectionalText},getPluginURL:function(){return Sa}},ma=function(M,I){this.zoom=M,I?(this.now=I.now,this.fadeDuration=I.fadeDuration,this.zoomHistory=I.zoomHistory,this.transition=I.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ui,this.transition={})};ma.prototype.isSupportedScript=function(M){return function(I,Y){for(var ae=0,pe=I;ae<pe.length;ae+=1)if(!pa(pe[ae].charCodeAt(0),Y))return!1;return!0}(M,mo.isLoaded())},ma.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ma.prototype.getCrossfadeParameters=function(){var M=this.zoom,I=M-Math.floor(M),Y=this.crossFadingFactor();return M>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:I+(1-I)*Y}:{fromScale:.5,toScale:1,t:1-(1-Y)*I}};var fo=function(M,I){this.property=M,this.value=I,this.expression=function(Y,ae){if(Ve(Y))return new Cr(Y,ae);if(or(Y)){var pe=kr(Y,ae);if("error"===pe.result)throw new Error(pe.value.map(function(Ee){return Ee.key+": "+Ee.message}).join(", "));return pe.value}var ye=Y;return"string"==typeof Y&&"color"===ae.type&&(ye=mr.parse(Y)),{kind:"constant",evaluate:function(){return ye}}}(void 0===I?M.specification.default:I,M.specification)};fo.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},fo.prototype.possiblyEvaluate=function(M,I,Y){return this.property.possiblyEvaluate(this,M,I,Y)};var ps=function(M){this.property=M,this.value=new fo(M,void 0)};ps.prototype.transitioned=function(M,I){return new Us(this.property,this.value,I,h({},M.transition,this.transition),M.now)},ps.prototype.untransitioned=function(){return new Us(this.property,this.value,null,{},0)};var gs=function(M){this._properties=M,this._values=Object.create(M.defaultTransitionablePropertyValues)};gs.prototype.getValue=function(M){return T(this._values[M].value.value)},gs.prototype.setValue=function(M,I){this._values.hasOwnProperty(M)||(this._values[M]=new ps(this._values[M].property)),this._values[M].value=new fo(this._values[M].property,null===I?void 0:T(I))},gs.prototype.getTransition=function(M){return T(this._values[M].transition)},gs.prototype.setTransition=function(M,I){this._values.hasOwnProperty(M)||(this._values[M]=new ps(this._values[M].property)),this._values[M].transition=T(I)||void 0},gs.prototype.serialize=function(){for(var M={},I=0,Y=Object.keys(this._values);I<Y.length;I+=1){var ae=Y[I],pe=this.getValue(ae);void 0!==pe&&(M[ae]=pe);var ye=this.getTransition(ae);void 0!==ye&&(M[ae+"-transition"]=ye)}return M},gs.prototype.transitioned=function(M,I){for(var Y=new Ga(this._properties),ae=0,pe=Object.keys(this._values);ae<pe.length;ae+=1){var ye=pe[ae];Y._values[ye]=this._values[ye].transitioned(M,I._values[ye])}return Y},gs.prototype.untransitioned=function(){for(var M=new Ga(this._properties),I=0,Y=Object.keys(this._values);I<Y.length;I+=1){var ae=Y[I];M._values[ae]=this._values[ae].untransitioned()}return M};var Us=function(M,I,Y,ae,pe){this.property=M,this.value=I,this.begin=pe+ae.delay||0,this.end=this.begin+ae.duration||0,M.specification.transition&&(ae.delay||ae.duration)&&(this.prior=Y)};Us.prototype.possiblyEvaluate=function(M,I,Y){var ae=M.now||0,pe=this.value.possiblyEvaluate(M,I,Y),ye=this.prior;if(ye){if(ae>this.end)return this.prior=null,pe;if(this.value.isDataDriven())return this.prior=null,pe;if(ae<this.begin)return ye.possiblyEvaluate(M,I,Y);var Ee=(ae-this.begin)/(this.end-this.begin);return this.property.interpolate(ye.possiblyEvaluate(M,I,Y),pe,function(je){if(je<=0)return 0;if(je>=1)return 1;var $e=je*je,pt=$e*je;return 4*(je<.5?pt:3*(je-$e)+pt-.75)}(Ee))}return pe};var Ga=function(M){this._properties=M,this._values=Object.create(M.defaultTransitioningPropertyValues)};Ga.prototype.possiblyEvaluate=function(M,I,Y){for(var ae=new ls(this._properties),pe=0,ye=Object.keys(this._values);pe<ye.length;pe+=1){var Ee=ye[pe];ae._values[Ee]=this._values[Ee].possiblyEvaluate(M,I,Y)}return ae},Ga.prototype.hasTransition=function(){for(var M=0,I=Object.keys(this._values);M<I.length;M+=1)if(this._values[I[M]].prior)return!0;return!1};var Gs=function(M){this._properties=M,this._values=Object.create(M.defaultPropertyValues)};Gs.prototype.getValue=function(M){return T(this._values[M].value)},Gs.prototype.setValue=function(M,I){this._values[M]=new fo(this._values[M].property,null===I?void 0:T(I))},Gs.prototype.serialize=function(){for(var M={},I=0,Y=Object.keys(this._values);I<Y.length;I+=1){var ae=Y[I],pe=this.getValue(ae);void 0!==pe&&(M[ae]=pe)}return M},Gs.prototype.possiblyEvaluate=function(M,I,Y){for(var ae=new ls(this._properties),pe=0,ye=Object.keys(this._values);pe<ye.length;pe+=1){var Ee=ye[pe];ae._values[Ee]=this._values[Ee].possiblyEvaluate(M,I,Y)}return ae};var Ja=function(M,I,Y){this.property=M,this.value=I,this.parameters=Y};Ja.prototype.isConstant=function(){return"constant"===this.value.kind},Ja.prototype.constantOr=function(M){return"constant"===this.value.kind?this.value.value:M},Ja.prototype.evaluate=function(M,I,Y,ae){return this.property.evaluate(this.value,this.parameters,M,I,Y,ae)};var ls=function(M){this._properties=M,this._values=Object.create(M.defaultPossiblyEvaluatedValues)};ls.prototype.get=function(M){return this._values[M]};var bi=function(M){this.specification=M};bi.prototype.possiblyEvaluate=function(M,I){return M.expression.evaluate(I)},bi.prototype.interpolate=function(M,I,Y){var ae=En[this.specification.type];return ae?ae(M,I,Y):M};var Li=function(M,I){this.specification=M,this.overrides=I};Li.prototype.possiblyEvaluate=function(M,I,Y,ae){return new Ja(this,"constant"===M.expression.kind||"camera"===M.expression.kind?{kind:"constant",value:M.expression.evaluate(I,null,{},Y,ae)}:M.expression,I)},Li.prototype.interpolate=function(M,I,Y){if("constant"!==M.value.kind||"constant"!==I.value.kind)return M;if(void 0===M.value.value||void 0===I.value.value)return new Ja(this,{kind:"constant",value:void 0},M.parameters);var ae=En[this.specification.type];return ae?new Ja(this,{kind:"constant",value:ae(M.value.value,I.value.value,Y)},M.parameters):M},Li.prototype.evaluate=function(M,I,Y,ae,pe,ye){return"constant"===M.kind?M.value:M.evaluate(I,Y,ae,pe,ye)};var Ds=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.possiblyEvaluate=function(Y,ae,pe,ye){if(void 0===Y.value)return new Ja(this,{kind:"constant",value:void 0},ae);if("constant"===Y.expression.kind){var Ee=Y.expression.evaluate(ae,null,{},pe,ye),je="resolvedImage"===Y.property.specification.type&&"string"!=typeof Ee?Ee.name:Ee,$e=this._calculate(je,je,je,ae);return new Ja(this,{kind:"constant",value:$e},ae)}if("camera"===Y.expression.kind){var pt=this._calculate(Y.expression.evaluate({zoom:ae.zoom-1}),Y.expression.evaluate({zoom:ae.zoom}),Y.expression.evaluate({zoom:ae.zoom+1}),ae);return new Ja(this,{kind:"constant",value:pt},ae)}return new Ja(this,Y.expression,ae)},I.prototype.evaluate=function(Y,ae,pe,ye,Ee,je){if("source"===Y.kind){var $e=Y.evaluate(ae,pe,ye,Ee,je);return this._calculate($e,$e,$e,ae)}return"composite"===Y.kind?this._calculate(Y.evaluate({zoom:Math.floor(ae.zoom)-1},pe,ye),Y.evaluate({zoom:Math.floor(ae.zoom)},pe,ye),Y.evaluate({zoom:Math.floor(ae.zoom)+1},pe,ye),ae):Y.value},I.prototype._calculate=function(Y,ae,pe,ye){return ye.zoom>ye.zoomHistory.lastIntegerZoom?{from:Y,to:ae}:{from:pe,to:ae}},I.prototype.interpolate=function(Y){return Y},I}(Li),Hs=function(M){this.specification=M};Hs.prototype.possiblyEvaluate=function(M,I,Y,ae){if(void 0!==M.value){if("constant"===M.expression.kind){var pe=M.expression.evaluate(I,null,{},Y,ae);return this._calculate(pe,pe,pe,I)}return this._calculate(M.expression.evaluate(new ma(Math.floor(I.zoom-1),I)),M.expression.evaluate(new ma(Math.floor(I.zoom),I)),M.expression.evaluate(new ma(Math.floor(I.zoom+1),I)),I)}},Hs.prototype._calculate=function(M,I,Y,ae){return ae.zoom>ae.zoomHistory.lastIntegerZoom?{from:M,to:I}:{from:Y,to:I}},Hs.prototype.interpolate=function(M){return M};var ms=function(M){this.specification=M};ms.prototype.possiblyEvaluate=function(M,I,Y,ae){return!!M.expression.evaluate(I,null,{},Y,ae)},ms.prototype.interpolate=function(){return!1};var Oo=function(M){for(var I in this.properties=M,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],M){var Y=M[I];Y.specification.overridable&&this.overridableProperties.push(I);var ae=this.defaultPropertyValues[I]=new fo(Y,void 0),pe=this.defaultTransitionablePropertyValues[I]=new ps(Y);this.defaultTransitioningPropertyValues[I]=pe.untransitioned(),this.defaultPossiblyEvaluatedValues[I]=ae.possiblyEvaluate({})}};rn("DataDrivenProperty",Li),rn("DataConstantProperty",bi),rn("CrossFadedDataDrivenProperty",Ds),rn("CrossFadedProperty",Hs),rn("ColorRampProperty",ms);var Zo=function(M){function I(Y,ae){if(M.call(this),this.id=Y.id,this.type=Y.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==Y.type&&(this.metadata=(Y=Y).metadata,this.minzoom=Y.minzoom,this.maxzoom=Y.maxzoom,"background"!==Y.type&&(this.source=Y.source,this.sourceLayer=Y["source-layer"],this.filter=Y.filter),ae.layout&&(this._unevaluatedLayout=new Gs(ae.layout)),ae.paint)){for(var pe in this._transitionablePaint=new gs(ae.paint),Y.paint)this.setPaintProperty(pe,Y.paint[pe],{validate:!1});for(var ye in Y.layout)this.setLayoutProperty(ye,Y.layout[ye],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ls(ae.paint)}}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},I.prototype.getLayoutProperty=function(Y){return"visibility"===Y?this.visibility:this._unevaluatedLayout.getValue(Y)},I.prototype.setLayoutProperty=function(Y,ae,pe){void 0===pe&&(pe={}),null!=ae&&this._validate(Sn,"layers."+this.id+".layout."+Y,Y,ae,pe)||("visibility"!==Y?this._unevaluatedLayout.setValue(Y,ae):this.visibility=ae)},I.prototype.getPaintProperty=function(Y){return w(Y,"-transition")?this._transitionablePaint.getTransition(Y.slice(0,-"-transition".length)):this._transitionablePaint.getValue(Y)},I.prototype.setPaintProperty=function(Y,ae,pe){if(void 0===pe&&(pe={}),null!=ae&&this._validate(mn,"layers."+this.id+".paint."+Y,Y,ae,pe))return!1;if(w(Y,"-transition"))return this._transitionablePaint.setTransition(Y.slice(0,-"-transition".length),ae||void 0),!1;var Ee=this._transitionablePaint._values[Y],je="cross-faded-data-driven"===Ee.property.specification["property-type"],$e=Ee.value.isDataDriven(),pt=Ee.value;this._transitionablePaint.setValue(Y,ae),this._handleSpecialPaintPropertyUpdate(Y);var bt=this._transitionablePaint._values[Y].value;return bt.isDataDriven()||$e||je||this._handleOverridablePaintPropertyUpdate(Y,pt,bt)},I.prototype._handleSpecialPaintPropertyUpdate=function(Y){},I.prototype._handleOverridablePaintPropertyUpdate=function(Y,ae,pe){return!1},I.prototype.isHidden=function(Y){return!!(this.minzoom&&Y<this.minzoom)||!!(this.maxzoom&&Y>=this.maxzoom)||"none"===this.visibility},I.prototype.updateTransitions=function(Y){this._transitioningPaint=this._transitionablePaint.transitioned(Y,this._transitioningPaint)},I.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},I.prototype.recalculate=function(Y,ae){Y.getCrossfadeParameters&&(this._crossfadeParameters=Y.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Y,void 0,ae)),this.paint=this._transitioningPaint.possiblyEvaluate(Y,void 0,ae)},I.prototype.serialize=function(){var Y={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Y.layout=Y.layout||{},Y.layout.visibility=this.visibility),A(Y,function(ae,pe){return!(void 0===ae||"layout"===pe&&!Object.keys(ae).length||"paint"===pe&&!Object.keys(ae).length)})},I.prototype._validate=function(Y,ae,pe,ye,Ee){return void 0===Ee&&(Ee={}),(!Ee||!1!==Ee.validate)&&Rn(this,Y.call(en,{key:ae,layerType:this.type,objectKey:pe,value:ye,styleSpec:Ie,style:{glyphs:!0,sprite:!0}}))},I.prototype.is3D=function(){return!1},I.prototype.isTileClipped=function(){return!1},I.prototype.hasOffscreenPass=function(){return!1},I.prototype.resize=function(){},I.prototype.isStateDependent=function(){for(var Y in this.paint._values){var ae=this.paint.get(Y);if(ae instanceof Ja&&Wo(ae.property.specification)&&("source"===ae.value.kind||"composite"===ae.value.kind)&&ae.value.isStateDependent)return!0}return!1},I}(Re),Zs={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},js=function(M,I){this._structArray=M,this._pos1=I*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},sa=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ha(M,I){void 0===I&&(I=1);var Y=0,ae=0;return{members:M.map(function(pe){var Ee=Zs[pe.type].BYTES_PER_ELEMENT,je=Y=vs(Y,Math.max(I,Ee)),$e=pe.components||1;return ae=Math.max(ae,Ee),Y+=Ee*$e,{name:pe.name,type:pe.type,components:$e,offset:je}}),size:vs(Y,Math.max(ae,I)),alignment:I}}function vs(M,I){return Math.ceil(M/I)*I}sa.serialize=function(M,I){return M._trim(),I&&(M.isTransferred=!0,I.push(M.arrayBuffer)),{length:M.length,arrayBuffer:M.arrayBuffer}},sa.deserialize=function(M){var I=Object.create(this.prototype);return I.arrayBuffer=M.arrayBuffer,I.length=M.length,I.capacity=M.arrayBuffer.byteLength/I.bytesPerElement,I._refreshViews(),I},sa.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},sa.prototype.clear=function(){this.length=0},sa.prototype.resize=function(M){this.reserve(M),this.length=M},sa.prototype.reserve=function(M){if(M>this.capacity){this.capacity=Math.max(M,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var I=this.uint8;this._refreshViews(),I&&this.uint8.set(I)}},sa.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var cs=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae){var pe=this.length;return this.resize(pe+1),this.emplace(pe,Y,ae)},I.prototype.emplace=function(Y,ae,pe){var ye=2*Y;return this.int16[ye+0]=ae,this.int16[ye+1]=pe,Y},I}(sa);cs.prototype.bytesPerElement=4,rn("StructArrayLayout2i4",cs);var ja=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe,ye){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Y,ae,pe,ye)},I.prototype.emplace=function(Y,ae,pe,ye,Ee){var je=4*Y;return this.int16[je+0]=ae,this.int16[je+1]=pe,this.int16[je+2]=ye,this.int16[je+3]=Ee,Y},I}(sa);ja.prototype.bytesPerElement=8,rn("StructArrayLayout4i8",ja);var As=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe,ye,Ee,je){var $e=this.length;return this.resize($e+1),this.emplace($e,Y,ae,pe,ye,Ee,je)},I.prototype.emplace=function(Y,ae,pe,ye,Ee,je,$e){var pt=6*Y;return this.int16[pt+0]=ae,this.int16[pt+1]=pe,this.int16[pt+2]=ye,this.int16[pt+3]=Ee,this.int16[pt+4]=je,this.int16[pt+5]=$e,Y},I}(sa);As.prototype.bytesPerElement=12,rn("StructArrayLayout2i4i12",As);var qs=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe,ye,Ee,je){var $e=this.length;return this.resize($e+1),this.emplace($e,Y,ae,pe,ye,Ee,je)},I.prototype.emplace=function(Y,ae,pe,ye,Ee,je,$e){var pt=4*Y,bt=8*Y;return this.int16[pt+0]=ae,this.int16[pt+1]=pe,this.uint8[bt+4]=ye,this.uint8[bt+5]=Ee,this.uint8[bt+6]=je,this.uint8[bt+7]=$e,Y},I}(sa);qs.prototype.bytesPerElement=8,rn("StructArrayLayout2i4ub8",qs);var Os=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe,ye,Ee,je,$e,pt,bt,qt){var tr=this.length;return this.resize(tr+1),this.emplace(tr,Y,ae,pe,ye,Ee,je,$e,pt,bt,qt)},I.prototype.emplace=function(Y,ae,pe,ye,Ee,je,$e,pt,bt,qt,tr){var Kt=9*Y,hr=18*Y;return this.uint16[Kt+0]=ae,this.uint16[Kt+1]=pe,this.uint16[Kt+2]=ye,this.uint16[Kt+3]=Ee,this.uint16[Kt+4]=je,this.uint16[Kt+5]=$e,this.uint16[Kt+6]=pt,this.uint16[Kt+7]=bt,this.uint8[hr+16]=qt,this.uint8[hr+17]=tr,Y},I}(sa);Os.prototype.bytesPerElement=18,rn("StructArrayLayout8ui2ub18",Os);var Is=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe,ye,Ee,je,$e,pt,bt,qt,tr,Kt){var hr=this.length;return this.resize(hr+1),this.emplace(hr,Y,ae,pe,ye,Ee,je,$e,pt,bt,qt,tr,Kt)},I.prototype.emplace=function(Y,ae,pe,ye,Ee,je,$e,pt,bt,qt,tr,Kt,hr){var Ar=12*Y;return this.int16[Ar+0]=ae,this.int16[Ar+1]=pe,this.int16[Ar+2]=ye,this.int16[Ar+3]=Ee,this.uint16[Ar+4]=je,this.uint16[Ar+5]=$e,this.uint16[Ar+6]=pt,this.uint16[Ar+7]=bt,this.int16[Ar+8]=qt,this.int16[Ar+9]=tr,this.int16[Ar+10]=Kt,this.int16[Ar+11]=hr,Y},I}(sa);Is.prototype.bytesPerElement=24,rn("StructArrayLayout4i4ui4i24",Is);var Ts=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe){var ye=this.length;return this.resize(ye+1),this.emplace(ye,Y,ae,pe)},I.prototype.emplace=function(Y,ae,pe,ye){var Ee=3*Y;return this.float32[Ee+0]=ae,this.float32[Ee+1]=pe,this.float32[Ee+2]=ye,Y},I}(sa);Ts.prototype.bytesPerElement=12,rn("StructArrayLayout3f12",Ts);var Xs=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y){var ae=this.length;return this.resize(ae+1),this.emplace(ae,Y)},I.prototype.emplace=function(Y,ae){return this.uint32[1*Y+0]=ae,Y},I}(sa);Xs.prototype.bytesPerElement=4,rn("StructArrayLayout1ul4",Xs);var il=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe,ye,Ee,je,$e,pt,bt){var qt=this.length;return this.resize(qt+1),this.emplace(qt,Y,ae,pe,ye,Ee,je,$e,pt,bt)},I.prototype.emplace=function(Y,ae,pe,ye,Ee,je,$e,pt,bt,qt){var tr=10*Y,Kt=5*Y;return this.int16[tr+0]=ae,this.int16[tr+1]=pe,this.int16[tr+2]=ye,this.int16[tr+3]=Ee,this.int16[tr+4]=je,this.int16[tr+5]=$e,this.uint32[Kt+3]=pt,this.uint16[tr+8]=bt,this.uint16[tr+9]=qt,Y},I}(sa);il.prototype.bytesPerElement=20,rn("StructArrayLayout6i1ul2ui20",il);var Ms=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe,ye,Ee,je){var $e=this.length;return this.resize($e+1),this.emplace($e,Y,ae,pe,ye,Ee,je)},I.prototype.emplace=function(Y,ae,pe,ye,Ee,je,$e){var pt=6*Y;return this.int16[pt+0]=ae,this.int16[pt+1]=pe,this.int16[pt+2]=ye,this.int16[pt+3]=Ee,this.int16[pt+4]=je,this.int16[pt+5]=$e,Y},I}(sa);Ms.prototype.bytesPerElement=12,rn("StructArrayLayout2i2i2i12",Ms);var al=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe,ye,Ee){var je=this.length;return this.resize(je+1),this.emplace(je,Y,ae,pe,ye,Ee)},I.prototype.emplace=function(Y,ae,pe,ye,Ee,je){var $e=4*Y,pt=8*Y;return this.float32[$e+0]=ae,this.float32[$e+1]=pe,this.float32[$e+2]=ye,this.int16[pt+6]=Ee,this.int16[pt+7]=je,Y},I}(sa);al.prototype.bytesPerElement=16,rn("StructArrayLayout2f1f2i16",al);var Vs=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe,ye){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Y,ae,pe,ye)},I.prototype.emplace=function(Y,ae,pe,ye,Ee){var je=12*Y,$e=3*Y;return this.uint8[je+0]=ae,this.uint8[je+1]=pe,this.float32[$e+1]=ye,this.float32[$e+2]=Ee,Y},I}(sa);Vs.prototype.bytesPerElement=12,rn("StructArrayLayout2ub2f12",Vs);var ho=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe){var ye=this.length;return this.resize(ye+1),this.emplace(ye,Y,ae,pe)},I.prototype.emplace=function(Y,ae,pe,ye){var Ee=3*Y;return this.uint16[Ee+0]=ae,this.uint16[Ee+1]=pe,this.uint16[Ee+2]=ye,Y},I}(sa);ho.prototype.bytesPerElement=6,rn("StructArrayLayout3ui6",ho);var hl=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe,ye,Ee,je,$e,pt,bt,qt,tr,Kt,hr,Ar,jr,Nr,Yr){var Wr=this.length;return this.resize(Wr+1),this.emplace(Wr,Y,ae,pe,ye,Ee,je,$e,pt,bt,qt,tr,Kt,hr,Ar,jr,Nr,Yr)},I.prototype.emplace=function(Y,ae,pe,ye,Ee,je,$e,pt,bt,qt,tr,Kt,hr,Ar,jr,Nr,Yr,Wr){var tn=24*Y,kn=12*Y,On=48*Y;return this.int16[tn+0]=ae,this.int16[tn+1]=pe,this.uint16[tn+2]=ye,this.uint16[tn+3]=Ee,this.uint32[kn+2]=je,this.uint32[kn+3]=$e,this.uint32[kn+4]=pt,this.uint16[tn+10]=bt,this.uint16[tn+11]=qt,this.uint16[tn+12]=tr,this.float32[kn+7]=Kt,this.float32[kn+8]=hr,this.uint8[On+36]=Ar,this.uint8[On+37]=jr,this.uint8[On+38]=Nr,this.uint32[kn+10]=Yr,this.int16[tn+22]=Wr,Y},I}(sa);hl.prototype.bytesPerElement=48,rn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",hl);var kl=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe,ye,Ee,je,$e,pt,bt,qt,tr,Kt,hr,Ar,jr,Nr,Yr,Wr,tn,kn,On,$n,Xn,ii,vi,yi,li,ki){var wi=this.length;return this.resize(wi+1),this.emplace(wi,Y,ae,pe,ye,Ee,je,$e,pt,bt,qt,tr,Kt,hr,Ar,jr,Nr,Yr,Wr,tn,kn,On,$n,Xn,ii,vi,yi,li,ki)},I.prototype.emplace=function(Y,ae,pe,ye,Ee,je,$e,pt,bt,qt,tr,Kt,hr,Ar,jr,Nr,Yr,Wr,tn,kn,On,$n,Xn,ii,vi,yi,li,ki,wi){var xi=34*Y,da=17*Y;return this.int16[xi+0]=ae,this.int16[xi+1]=pe,this.int16[xi+2]=ye,this.int16[xi+3]=Ee,this.int16[xi+4]=je,this.int16[xi+5]=$e,this.int16[xi+6]=pt,this.int16[xi+7]=bt,this.uint16[xi+8]=qt,this.uint16[xi+9]=tr,this.uint16[xi+10]=Kt,this.uint16[xi+11]=hr,this.uint16[xi+12]=Ar,this.uint16[xi+13]=jr,this.uint16[xi+14]=Nr,this.uint16[xi+15]=Yr,this.uint16[xi+16]=Wr,this.uint16[xi+17]=tn,this.uint16[xi+18]=kn,this.uint16[xi+19]=On,this.uint16[xi+20]=$n,this.uint16[xi+21]=Xn,this.uint16[xi+22]=ii,this.uint32[da+12]=vi,this.float32[da+13]=yi,this.float32[da+14]=li,this.float32[da+15]=ki,this.float32[da+16]=wi,Y},I}(sa);kl.prototype.bytesPerElement=68,rn("StructArrayLayout8i15ui1ul4f68",kl);var ce=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y){var ae=this.length;return this.resize(ae+1),this.emplace(ae,Y)},I.prototype.emplace=function(Y,ae){return this.float32[1*Y+0]=ae,Y},I}(sa);ce.prototype.bytesPerElement=4,rn("StructArrayLayout1f4",ce);var L=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe){var ye=this.length;return this.resize(ye+1),this.emplace(ye,Y,ae,pe)},I.prototype.emplace=function(Y,ae,pe,ye){var Ee=3*Y;return this.int16[Ee+0]=ae,this.int16[Ee+1]=pe,this.int16[Ee+2]=ye,Y},I}(sa);L.prototype.bytesPerElement=6,rn("StructArrayLayout3i6",L);var P=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe){var ye=this.length;return this.resize(ye+1),this.emplace(ye,Y,ae,pe)},I.prototype.emplace=function(Y,ae,pe,ye){var je=4*Y;return this.uint32[2*Y+0]=ae,this.uint16[je+2]=pe,this.uint16[je+3]=ye,Y},I}(sa);P.prototype.bytesPerElement=8,rn("StructArrayLayout1ul2ui8",P);var F=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae){var pe=this.length;return this.resize(pe+1),this.emplace(pe,Y,ae)},I.prototype.emplace=function(Y,ae,pe){var ye=2*Y;return this.uint16[ye+0]=ae,this.uint16[ye+1]=pe,Y},I}(sa);F.prototype.bytesPerElement=4,rn("StructArrayLayout2ui4",F);var H=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y){var ae=this.length;return this.resize(ae+1),this.emplace(ae,Y)},I.prototype.emplace=function(Y,ae){return this.uint16[1*Y+0]=ae,Y},I}(sa);H.prototype.bytesPerElement=2,rn("StructArrayLayout1ui2",H);var oe=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae){var pe=this.length;return this.resize(pe+1),this.emplace(pe,Y,ae)},I.prototype.emplace=function(Y,ae,pe){var ye=2*Y;return this.float32[ye+0]=ae,this.float32[ye+1]=pe,Y},I}(sa);oe.prototype.bytesPerElement=8,rn("StructArrayLayout2f8",oe);var fe=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ae,pe,ye){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Y,ae,pe,ye)},I.prototype.emplace=function(Y,ae,pe,ye,Ee){var je=4*Y;return this.float32[je+0]=ae,this.float32[je+1]=pe,this.float32[je+2]=ye,this.float32[je+3]=Ee,Y},I}(sa);fe.prototype.bytesPerElement=16,rn("StructArrayLayout4f16",fe);var ge=function(M){function I(){M.apply(this,arguments)}M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I;var Y={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Y.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Y.x1.get=function(){return this._structArray.int16[this._pos2+2]},Y.y1.get=function(){return this._structArray.int16[this._pos2+3]},Y.x2.get=function(){return this._structArray.int16[this._pos2+4]},Y.y2.get=function(){return this._structArray.int16[this._pos2+5]},Y.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Y.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Y.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Y.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(I.prototype,Y),I}(js);ge.prototype.size=20;var xe=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.get=function(Y){return new ge(this,Y)},I}(il);rn("CollisionBoxArray",xe);var Ce=function(M){function I(){M.apply(this,arguments)}M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I;var Y={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Y.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Y.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Y.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Y.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Y.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Y.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Y.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Y.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Y.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Y.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Y.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Y.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Y.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Y.placedOrientation.set=function(ae){this._structArray.uint8[this._pos1+37]=ae},Y.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Y.hidden.set=function(ae){this._structArray.uint8[this._pos1+38]=ae},Y.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Y.crossTileID.set=function(ae){this._structArray.uint32[this._pos4+10]=ae},Y.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(I.prototype,Y),I}(js);Ce.prototype.size=48;var Ge=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.get=function(Y){return new Ce(this,Y)},I}(hl);rn("PlacedSymbolArray",Ge);var Xe=function(M){function I(){M.apply(this,arguments)}M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I;var Y={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Y.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Y.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Y.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Y.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Y.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Y.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Y.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Y.key.get=function(){return this._structArray.uint16[this._pos2+8]},Y.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Y.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Y.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Y.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Y.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Y.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Y.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Y.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Y.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Y.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Y.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Y.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Y.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Y.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Y.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Y.crossTileID.set=function(ae){this._structArray.uint32[this._pos4+12]=ae},Y.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Y.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Y.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Y.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(I.prototype,Y),I}(js);Xe.prototype.size=68;var ot=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.get=function(Y){return new Xe(this,Y)},I}(kl);rn("SymbolInstanceArray",ot);var Mt=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.getoffsetX=function(Y){return this.float32[1*Y+0]},I}(ce);rn("GlyphOffsetArray",Mt);var It=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.getx=function(Y){return this.int16[3*Y+0]},I.prototype.gety=function(Y){return this.int16[3*Y+1]},I.prototype.gettileUnitDistanceFromAnchor=function(Y){return this.int16[3*Y+2]},I}(L);rn("SymbolLineVertexArray",It);var Ct=function(M){function I(){M.apply(this,arguments)}M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I;var Y={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Y.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Y.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Y.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(I.prototype,Y),I}(js);Ct.prototype.size=8;var Lt=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.get=function(Y){return new Ct(this,Y)},I}(P);rn("FeatureIndexArray",Lt);var Tt=ha([{name:"a_pos",components:2,type:"Int16"}],4).members,Ht=function(M){void 0===M&&(M=[]),this.segments=M};function jt(M,I){return 256*(M=l(Math.floor(M),0,255))+l(Math.floor(I),0,255)}Ht.prototype.prepareSegment=function(M,I,Y,ae){var pe=this.segments[this.segments.length-1];return M>Ht.MAX_VERTEX_ARRAY_LENGTH&&k("Max vertices per segment is "+Ht.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+M),(!pe||pe.vertexLength+M>Ht.MAX_VERTEX_ARRAY_LENGTH||pe.sortKey!==ae)&&(pe={vertexOffset:I.length,primitiveOffset:Y.length,vertexLength:0,primitiveLength:0},void 0!==ae&&(pe.sortKey=ae),this.segments.push(pe)),pe},Ht.prototype.get=function(){return this.segments},Ht.prototype.destroy=function(){for(var M=0,I=this.segments;M<I.length;M+=1){var Y=I[M];for(var ae in Y.vaos)Y.vaos[ae].destroy()}},Ht.simpleSegment=function(M,I,Y,ae){return new Ht([{vertexOffset:M,primitiveOffset:I,vertexLength:Y,primitiveLength:ae,vaos:{},sortKey:0}])},Ht.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,rn("SegmentVector",Ht);var Wt=ha([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),cr=n(function(M){M.exports=function(I,Y){var ae,pe,ye,Ee,je,$e,pt,bt;for(pe=I.length-(ae=3&I.length),ye=Y,je=3432918353,$e=461845907,bt=0;bt<pe;)pt=255&I.charCodeAt(bt)|(255&I.charCodeAt(++bt))<<8|(255&I.charCodeAt(++bt))<<16|(255&I.charCodeAt(++bt))<<24,++bt,ye=27492+(65535&(Ee=5*(65535&(ye=(ye^=pt=(65535&(pt=(pt=(65535&pt)*je+(((pt>>>16)*je&65535)<<16)&4294967295)<<15|pt>>>17))*$e+(((pt>>>16)*$e&65535)<<16)&4294967295)<<13|ye>>>19))+((5*(ye>>>16)&65535)<<16)&4294967295))+((58964+(Ee>>>16)&65535)<<16);switch(pt=0,ae){case 3:pt^=(255&I.charCodeAt(bt+2))<<16;case 2:pt^=(255&I.charCodeAt(bt+1))<<8;case 1:ye^=pt=(65535&(pt=(pt=(65535&(pt^=255&I.charCodeAt(bt)))*je+(((pt>>>16)*je&65535)<<16)&4294967295)<<15|pt>>>17))*$e+(((pt>>>16)*$e&65535)<<16)&4294967295}return ye^=I.length,ye=2246822507*(65535&(ye^=ye>>>16))+((2246822507*(ye>>>16)&65535)<<16)&4294967295,ye=3266489909*(65535&(ye^=ye>>>13))+((3266489909*(ye>>>16)&65535)<<16)&4294967295,(ye^=ye>>>16)>>>0}}),br=n(function(M){M.exports=function(I,Y){for(var ae,pe=I.length,ye=Y^pe,Ee=0;pe>=4;)ae=1540483477*(65535&(ae=255&I.charCodeAt(Ee)|(255&I.charCodeAt(++Ee))<<8|(255&I.charCodeAt(++Ee))<<16|(255&I.charCodeAt(++Ee))<<24))+((1540483477*(ae>>>16)&65535)<<16),ye=1540483477*(65535&ye)+((1540483477*(ye>>>16)&65535)<<16)^(ae=1540483477*(65535&(ae^=ae>>>24))+((1540483477*(ae>>>16)&65535)<<16)),pe-=4,++Ee;switch(pe){case 3:ye^=(255&I.charCodeAt(Ee+2))<<16;case 2:ye^=(255&I.charCodeAt(Ee+1))<<8;case 1:ye=1540483477*(65535&(ye^=255&I.charCodeAt(Ee)))+((1540483477*(ye>>>16)&65535)<<16)}return ye=1540483477*(65535&(ye^=ye>>>13))+((1540483477*(ye>>>16)&65535)<<16),(ye^=ye>>>15)>>>0}}),zr=cr,sn=br;zr.murmur3=cr,zr.murmur2=sn;var on=function(){this.ids=[],this.positions=[],this.indexed=!1};on.prototype.add=function(M,I,Y,ae){this.ids.push(xn(M)),this.positions.push(I,Y,ae)},on.prototype.getPositions=function(M){for(var I=xn(M),Y=0,ae=this.ids.length-1;Y<ae;){var pe=Y+ae>>1;this.ids[pe]>=I?ae=pe:Y=pe+1}for(var ye=[];this.ids[Y]===I;)ye.push({index:this.positions[3*Y],start:this.positions[3*Y+1],end:this.positions[3*Y+2]}),Y++;return ye},on.serialize=function(M,I){var Y=new Float64Array(M.ids),ae=new Uint32Array(M.positions);return function pe(ye,Ee,je,$e){for(;je<$e;){for(var pt=ye[je+$e>>1],bt=je-1,qt=$e+1;;){do{bt++}while(ye[bt]<pt);do{qt--}while(ye[qt]>pt);if(bt>=qt)break;Kn(ye,bt,qt),Kn(Ee,3*bt,3*qt),Kn(Ee,3*bt+1,3*qt+1),Kn(Ee,3*bt+2,3*qt+2)}qt-je<$e-qt?(pe(ye,Ee,je,qt),je=qt+1):(pe(ye,Ee,qt+1,$e),$e=qt)}}(Y,ae,0,Y.length-1),I&&I.push(Y.buffer,ae.buffer),{ids:Y,positions:ae}},on.deserialize=function(M){var I=new on;return I.ids=M.ids,I.positions=M.positions,I.indexed=!0,I};var Mn=Math.pow(2,53)-1;function xn(M){var I=+M;return!isNaN(I)&&I<=Mn?I:zr(String(M))}function Kn(M,I,Y){var ae=M[I];M[I]=M[Y],M[Y]=ae}rn("FeaturePositionMap",on);var ai=function(M,I){this.gl=M.gl,this.location=I},_i=function(M){function I(Y,ae){M.call(this,Y,ae),this.current=0}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.set=function(Y){this.current!==Y&&(this.current=Y,this.gl.uniform1i(this.location,Y))},I}(ai),Jr=function(M){function I(Y,ae){M.call(this,Y,ae),this.current=0}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.set=function(Y){this.current!==Y&&(this.current=Y,this.gl.uniform1f(this.location,Y))},I}(ai),zn=function(M){function I(Y,ae){M.call(this,Y,ae),this.current=[0,0]}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]||(this.current=Y,this.gl.uniform2f(this.location,Y[0],Y[1]))},I}(ai),oi=function(M){function I(Y,ae){M.call(this,Y,ae),this.current=[0,0,0]}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]&&Y[2]===this.current[2]||(this.current=Y,this.gl.uniform3f(this.location,Y[0],Y[1],Y[2]))},I}(ai),ni=function(M){function I(Y,ae){M.call(this,Y,ae),this.current=[0,0,0,0]}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]&&Y[2]===this.current[2]&&Y[3]===this.current[3]||(this.current=Y,this.gl.uniform4f(this.location,Y[0],Y[1],Y[2],Y[3]))},I}(ai),pi=function(M){function I(Y,ae){M.call(this,Y,ae),this.current=mr.transparent}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.set=function(Y){Y.r===this.current.r&&Y.g===this.current.g&&Y.b===this.current.b&&Y.a===this.current.a||(this.current=Y,this.gl.uniform4f(this.location,Y.r,Y.g,Y.b,Y.a))},I}(ai),Ai=new Float32Array(16),zi=function(M){function I(Y,ae){M.call(this,Y,ae),this.current=Ai}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.set=function(Y){if(Y[12]!==this.current[12]||Y[0]!==this.current[0])return this.current=Y,void this.gl.uniformMatrix4fv(this.location,!1,Y);for(var ae=1;ae<16;ae++)if(Y[ae]!==this.current[ae]){this.current=Y,this.gl.uniformMatrix4fv(this.location,!1,Y);break}},I}(ai);function si(M){return[jt(255*M.r,255*M.g),jt(255*M.b,255*M.a)]}var Di=function(M,I,Y){this.value=M,this.uniformNames=I.map(function(ae){return"u_"+ae}),this.type=Y};Di.prototype.setUniform=function(M,I,Y){M.set(Y.constantOr(this.value))},Di.prototype.getBinding=function(M,I,Y){return"color"===this.type?new pi(M,I):new Jr(M,I)};var Ci=function(M,I){this.uniformNames=I.map(function(Y){return"u_"+Y}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ci.prototype.setConstantPatternPositions=function(M,I){this.pixelRatioFrom=I.pixelRatio,this.pixelRatioTo=M.pixelRatio,this.patternFrom=I.tlbr,this.patternTo=M.tlbr},Ci.prototype.setUniform=function(M,I,Y,ae){var pe="u_pattern_to"===ae?this.patternTo:"u_pattern_from"===ae?this.patternFrom:"u_pixel_ratio_to"===ae?this.pixelRatioTo:"u_pixel_ratio_from"===ae?this.pixelRatioFrom:null;pe&&M.set(pe)},Ci.prototype.getBinding=function(M,I,Y){return"u_pattern"===Y.substr(0,9)?new ni(M,I):new Jr(M,I)};var ji=function(M,I,Y,ae){this.expression=M,this.type=Y,this.maxValue=0,this.paintVertexAttributes=I.map(function(pe){return{name:"a_"+pe,type:"Float32",components:"color"===Y?2:1,offset:0}}),this.paintVertexArray=new ae};ji.prototype.populatePaintArray=function(M,I,Y,ae,pe){var ye=this.paintVertexArray.length,Ee=this.expression.evaluate(new ma(0),I,{},ae,[],pe);this.paintVertexArray.resize(M),this._setPaintValue(ye,M,Ee)},ji.prototype.updatePaintArray=function(M,I,Y,ae){var pe=this.expression.evaluate({zoom:0},Y,ae);this._setPaintValue(M,I,pe)},ji.prototype._setPaintValue=function(M,I,Y){if("color"===this.type)for(var ae=si(Y),pe=M;pe<I;pe++)this.paintVertexArray.emplace(pe,ae[0],ae[1]);else{for(var ye=M;ye<I;ye++)this.paintVertexArray.emplace(ye,Y);this.maxValue=Math.max(this.maxValue,Math.abs(Y))}},ji.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ji.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Oi=function(M,I,Y,ae,pe,ye){this.expression=M,this.uniformNames=I.map(function(Ee){return"u_"+Ee+"_t"}),this.type=Y,this.useIntegerZoom=ae,this.zoom=pe,this.maxValue=0,this.paintVertexAttributes=I.map(function(Ee){return{name:"a_"+Ee,type:"Float32",components:"color"===Y?4:2,offset:0}}),this.paintVertexArray=new ye};Oi.prototype.populatePaintArray=function(M,I,Y,ae,pe){var ye=this.expression.evaluate(new ma(this.zoom),I,{},ae,[],pe),Ee=this.expression.evaluate(new ma(this.zoom+1),I,{},ae,[],pe),je=this.paintVertexArray.length;this.paintVertexArray.resize(M),this._setPaintValue(je,M,ye,Ee)},Oi.prototype.updatePaintArray=function(M,I,Y,ae){var pe=this.expression.evaluate({zoom:this.zoom},Y,ae),ye=this.expression.evaluate({zoom:this.zoom+1},Y,ae);this._setPaintValue(M,I,pe,ye)},Oi.prototype._setPaintValue=function(M,I,Y,ae){if("color"===this.type)for(var pe=si(Y),ye=si(ae),Ee=M;Ee<I;Ee++)this.paintVertexArray.emplace(Ee,pe[0],pe[1],ye[0],ye[1]);else{for(var je=M;je<I;je++)this.paintVertexArray.emplace(je,Y,ae);this.maxValue=Math.max(this.maxValue,Math.abs(Y),Math.abs(ae))}},Oi.prototype.upload=function(M){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=M.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Oi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Oi.prototype.setUniform=function(M,I){var Y=this.useIntegerZoom?Math.floor(I.zoom):I.zoom,ae=l(this.expression.interpolationFactor(Y,this.zoom,this.zoom+1),0,1);M.set(ae)},Oi.prototype.getBinding=function(M,I,Y){return new Jr(M,I)};var Gi=function(M,I,Y,ae,pe,ye){this.expression=M,this.type=I,this.useIntegerZoom=Y,this.zoom=ae,this.layerId=ye,this.zoomInPaintVertexArray=new pe,this.zoomOutPaintVertexArray=new pe};Gi.prototype.populatePaintArray=function(M,I,Y){var ae=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(M),this.zoomOutPaintVertexArray.resize(M),this._setPaintValues(ae,M,I.patterns&&I.patterns[this.layerId],Y)},Gi.prototype.updatePaintArray=function(M,I,Y,ae,pe){this._setPaintValues(M,I,Y.patterns&&Y.patterns[this.layerId],pe)},Gi.prototype._setPaintValues=function(M,I,Y,ae){if(ae&&Y){var je=ae[Y.min],$e=ae[Y.mid],pt=ae[Y.max];if(je&&$e&&pt)for(var bt=M;bt<I;bt++)this.zoomInPaintVertexArray.emplace(bt,$e.tl[0],$e.tl[1],$e.br[0],$e.br[1],je.tl[0],je.tl[1],je.br[0],je.br[1],$e.pixelRatio,je.pixelRatio),this.zoomOutPaintVertexArray.emplace(bt,$e.tl[0],$e.tl[1],$e.br[0],$e.br[1],pt.tl[0],pt.tl[1],pt.br[0],pt.br[1],$e.pixelRatio,pt.pixelRatio)}},Gi.prototype.upload=function(M){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=M.createVertexBuffer(this.zoomInPaintVertexArray,Wt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=M.createVertexBuffer(this.zoomOutPaintVertexArray,Wt.members,this.expression.isStateDependent))},Gi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ta=function(M,I,Y,ae){this.binders={},this.layoutAttributes=ae,this._buffers=[];var pe=[];for(var ye in M.paint._values)if(Y(ye)){var Ee=M.paint.get(ye);if(Ee instanceof Ja&&Wo(Ee.property.specification)){var je=Va(ye,M.type),$e=Ee.value,pt=Ee.property.specification.type,bt=Ee.property.useIntegerZoom,qt=Ee.property.specification["property-type"],tr="cross-faded"===qt||"cross-faded-data-driven"===qt;if("constant"===$e.kind)this.binders[ye]=tr?new Ci($e.value,je):new Di($e.value,je,pt),pe.push("/u_"+ye);else if("source"===$e.kind||tr){var Kt=Ua(ye,pt,"source");this.binders[ye]=tr?new Gi($e,pt,bt,I,Kt,M.id):new ji($e,je,pt,Kt),pe.push("/a_"+ye)}else{var hr=Ua(ye,pt,"composite");this.binders[ye]=new Oi($e,je,pt,bt,I,hr),pe.push("/z_"+ye)}}}this.cacheKey=pe.sort().join("")};ta.prototype.getMaxValue=function(M){var I=this.binders[M];return I instanceof ji||I instanceof Oi?I.maxValue:0},ta.prototype.populatePaintArrays=function(M,I,Y,ae,pe){for(var ye in this.binders){var Ee=this.binders[ye];(Ee instanceof ji||Ee instanceof Oi||Ee instanceof Gi)&&Ee.populatePaintArray(M,I,Y,ae,pe)}},ta.prototype.setConstantPatternPositions=function(M,I){for(var Y in this.binders){var ae=this.binders[Y];ae instanceof Ci&&ae.setConstantPatternPositions(M,I)}},ta.prototype.updatePaintArrays=function(M,I,Y,ae,pe){var ye=!1;for(var Ee in M)for(var je=0,$e=I.getPositions(Ee);je<$e.length;je+=1){var pt=$e[je],bt=Y.feature(pt.index);for(var qt in this.binders){var tr=this.binders[qt];if((tr instanceof ji||tr instanceof Oi||tr instanceof Gi)&&!0===tr.expression.isStateDependent){var Kt=ae.paint.get(qt);tr.expression=Kt.value,tr.updatePaintArray(pt.start,pt.end,bt,M[Ee],pe),ye=!0}}}return ye},ta.prototype.defines=function(){var M=[];for(var I in this.binders){var Y=this.binders[I];(Y instanceof Di||Y instanceof Ci)&&M.push.apply(M,Y.uniformNames.map(function(ae){return"#define HAS_UNIFORM_"+ae}))}return M},ta.prototype.getPaintVertexBuffers=function(){return this._buffers},ta.prototype.getUniforms=function(M,I){var Y=[];for(var ae in this.binders){var pe=this.binders[ae];if(pe instanceof Di||pe instanceof Ci||pe instanceof Oi)for(var ye=0,Ee=pe.uniformNames;ye<Ee.length;ye+=1){var je=Ee[ye];if(I[je]){var $e=pe.getBinding(M,I[je],je);Y.push({name:je,property:ae,binding:$e})}}}return Y},ta.prototype.setUniforms=function(M,I,Y,ae){for(var pe=0,ye=I;pe<ye.length;pe+=1){var Ee=ye[pe],je=Ee.name,$e=Ee.property;this.binders[$e].setUniform(Ee.binding,ae,Y.get($e),je)}},ta.prototype.updatePaintBuffers=function(M){for(var I in this._buffers=[],this.binders){var Y=this.binders[I];if(M&&Y instanceof Gi){var ae=2===M.fromScale?Y.zoomInPaintVertexBuffer:Y.zoomOutPaintVertexBuffer;ae&&this._buffers.push(ae)}else(Y instanceof ji||Y instanceof Oi)&&Y.paintVertexBuffer&&this._buffers.push(Y.paintVertexBuffer)}},ta.prototype.upload=function(M){for(var I in this.binders){var Y=this.binders[I];(Y instanceof ji||Y instanceof Oi||Y instanceof Gi)&&Y.upload(M)}this.updatePaintBuffers()},ta.prototype.destroy=function(){for(var M in this.binders){var I=this.binders[M];(I instanceof ji||I instanceof Oi||I instanceof Gi)&&I.destroy()}};var Ta=function(M,I,Y,ae){void 0===ae&&(ae=function(){return!0}),this.programConfigurations={};for(var pe=0,ye=I;pe<ye.length;pe+=1){var Ee=ye[pe];this.programConfigurations[Ee.id]=new ta(Ee,Y,ae,M)}this.needsUpload=!1,this._featureMap=new on,this._bufferOffset=0};function Va(M,I){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[M]||[M.replace(I+"-","").replace(/-/g,"_")]}function Ua(M,I,Y){var pe={"line-pattern":{source:Os,composite:Os},"fill-pattern":{source:Os,composite:Os},"fill-extrusion-pattern":{source:Os,composite:Os}}[M];return pe&&pe[Y]||{color:{source:oe,composite:fe},number:{source:ce,composite:oe}}[I][Y]}Ta.prototype.populatePaintArrays=function(M,I,Y,ae,pe,ye){for(var Ee in this.programConfigurations)this.programConfigurations[Ee].populatePaintArrays(M,I,ae,pe,ye);void 0!==I.id&&this._featureMap.add(I.id,Y,this._bufferOffset,M),this._bufferOffset=M,this.needsUpload=!0},Ta.prototype.updatePaintArrays=function(M,I,Y,ae){for(var pe=0,ye=Y;pe<ye.length;pe+=1){var Ee=ye[pe];this.needsUpload=this.programConfigurations[Ee.id].updatePaintArrays(M,this._featureMap,I,Ee,ae)||this.needsUpload}},Ta.prototype.get=function(M){return this.programConfigurations[M]},Ta.prototype.upload=function(M){if(this.needsUpload){for(var I in this.programConfigurations)this.programConfigurations[I].upload(M);this.needsUpload=!1}},Ta.prototype.destroy=function(){for(var M in this.programConfigurations)this.programConfigurations[M].destroy()},rn("ConstantBinder",Di),rn("CrossFadedConstantBinder",Ci),rn("SourceExpressionBinder",ji),rn("CrossFadedCompositeBinder",Gi),rn("CompositeExpressionBinder",Oi),rn("ProgramConfiguration",ta,{omit:["_buffers"]}),rn("ProgramConfigurationSet",Ta);var Ra=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function Ea(M){for(var I=8192/M.extent,Y=M.loadGeometry(),ae=0;ae<Y.length;ae++)for(var pe=Y[ae],ye=0;ye<pe.length;ye++){var Ee=pe[ye];Ee.x=Math.round(Ee.x*I),Ee.y=Math.round(Ee.y*I),(Ee.x<Ra.min||Ee.x>Ra.max||Ee.y<Ra.min||Ee.y>Ra.max)&&(k("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Ee.x=l(Ee.x,Ra.min,Ra.max),Ee.y=l(Ee.y,Ra.min,Ra.max))}return Y}function _o(M,I,Y,ae,pe){M.emplaceBack(2*I+(ae+1)/2,2*Y+(pe+1)/2)}var to=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new cs,this.indexArray=new ho,this.segments=new Ht,this.programConfigurations=new Ta(Tt,M.layers,M.zoom),this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};function Io(M,I){for(var Y=0;Y<M.length;Y++)if(us(I,M[Y]))return!0;for(var ae=0;ae<I.length;ae++)if(us(M,I[ae]))return!0;return!!ol(M,I)}function Ps(M,I,Y){return!!us(M,I)||!!Eo(I,M,Y)}function Ys(M,I){if(1===M.length)return pl(I,M[0]);for(var Y=0;Y<I.length;Y++)for(var ae=I[Y],pe=0;pe<ae.length;pe++)if(us(M,ae[pe]))return!0;for(var ye=0;ye<M.length;ye++)if(pl(I,M[ye]))return!0;for(var Ee=0;Ee<I.length;Ee++)if(ol(M,I[Ee]))return!0;return!1}function dl(M,I,Y){if(M.length>1){if(ol(M,I))return!0;for(var ae=0;ae<I.length;ae++)if(Eo(I[ae],M,Y))return!0}for(var pe=0;pe<M.length;pe++)if(Eo(M[pe],I,Y))return!0;return!1}function ol(M,I){if(0===M.length||0===I.length)return!1;for(var Y=0;Y<M.length-1;Y++)for(var ae=M[Y],pe=M[Y+1],ye=0;ye<I.length-1;ye++)if(sl(ae,pe,I[ye],I[ye+1]))return!0;return!1}function sl(M,I,Y,ae){return O(M,Y,ae)!==O(I,Y,ae)&&O(M,I,Y)!==O(M,I,ae)}function Eo(M,I,Y){var ae=Y*Y;if(1===I.length)return M.distSqr(I[0])<ae;for(var pe=1;pe<I.length;pe++)if(Js(M,I[pe-1],I[pe])<ae)return!0;return!1}function Js(M,I,Y){var ae=I.distSqr(Y);if(0===ae)return M.distSqr(I);var pe=((M.x-I.x)*(Y.x-I.x)+(M.y-I.y)*(Y.y-I.y))/ae;return M.distSqr(pe<0?I:pe>1?Y:Y.sub(I)._mult(pe)._add(I))}function pl(M,I){for(var Y,ae,pe,ye=!1,Ee=0;Ee<M.length;Ee++)for(var je=0,$e=(Y=M[Ee]).length-1;je<Y.length;$e=je++)(ae=Y[je]).y>I.y!=(pe=Y[$e]).y>I.y&&I.x<(pe.x-ae.x)*(I.y-ae.y)/(pe.y-ae.y)+ae.x&&(ye=!ye);return ye}function us(M,I){for(var Y=!1,ae=0,pe=M.length-1;ae<M.length;pe=ae++){var ye=M[ae],Ee=M[pe];ye.y>I.y!=Ee.y>I.y&&I.x<(Ee.x-ye.x)*(I.y-ye.y)/(Ee.y-ye.y)+ye.x&&(Y=!Y)}return Y}function ml(M,I,Y){var ae=Y[0],pe=Y[2];if(M.x<ae.x&&I.x<ae.x||M.x>pe.x&&I.x>pe.x||M.y<ae.y&&I.y<ae.y||M.y>pe.y&&I.y>pe.y)return!1;var ye=O(M,I,Y[0]);return ye!==O(M,I,Y[1])||ye!==O(M,I,Y[2])||ye!==O(M,I,Y[3])}function za(M,I,Y){var ae=I.paint.get(M).value;return"constant"===ae.kind?ae.value:Y.programConfigurations.get(I.id).getMaxValue(M)}function Po(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])}function Ro(M,I,Y,ae,pe){if(!I[0]&&!I[1])return M;var ye=r.convert(I)._mult(pe);"viewport"===Y&&ye._rotate(-ae);for(var Ee=[],je=0;je<M.length;je++)Ee.push(M[je].sub(ye));return Ee}to.prototype.populate=function(M,I,Y){var ae=this.layers[0],pe=[],ye=null;"circle"===ae.type&&(ye=ae.layout.get("circle-sort-key"));for(var Ee=0,je=M;Ee<je.length;Ee+=1){var $e=je[Ee],pt=$e.feature,bt=$e.id,qt=$e.index,tr=$e.sourceLayerIndex,Kt=this.layers[0]._featureFilter.needGeometry,hr={type:pt.type,id:bt,properties:pt.properties,geometry:Kt?Ea(pt):[]};if(this.layers[0]._featureFilter.filter(new ma(this.zoom),hr,Y)){Kt||(hr.geometry=Ea(pt));var Ar=ye?ye.evaluate(hr,{},Y):void 0;pe.push({id:bt,properties:pt.properties,type:pt.type,sourceLayerIndex:tr,index:qt,geometry:hr.geometry,patterns:{},sortKey:Ar})}}ye&&pe.sort(function(ii,vi){return ii.sortKey-vi.sortKey});for(var Nr=0,Yr=pe;Nr<Yr.length;Nr+=1){var Wr=Yr[Nr],kn=Wr.geometry,On=Wr.index,$n=Wr.sourceLayerIndex,Xn=M[On].feature;this.addFeature(Wr,kn,On,Y),I.featureIndex.insert(Xn,kn,On,$n,this.index)}},to.prototype.update=function(M,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,I,this.stateDependentLayers,Y)},to.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},to.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},to.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Tt),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},to.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},to.prototype.addFeature=function(M,I,Y,ae){for(var pe=0,ye=I;pe<ye.length;pe+=1)for(var Ee=0,je=ye[pe];Ee<je.length;Ee+=1){var $e=je[Ee],pt=$e.x,bt=$e.y;if(!(pt<0||pt>=8192||bt<0||bt>=8192)){var qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,M.sortKey),tr=qt.vertexLength;_o(this.layoutVertexArray,pt,bt,-1,-1),_o(this.layoutVertexArray,pt,bt,1,-1),_o(this.layoutVertexArray,pt,bt,1,1),_o(this.layoutVertexArray,pt,bt,-1,1),this.indexArray.emplaceBack(tr,tr+1,tr+2),this.indexArray.emplaceBack(tr,tr+3,tr+2),qt.vertexLength+=4,qt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Y,{},ae)},rn("CircleBucket",to,{omit:["layers"]});var Ol=new Oo({"circle-sort-key":new Li(Ie.layout_circle["circle-sort-key"])}),fc={paint:new Oo({"circle-radius":new Li(Ie.paint_circle["circle-radius"]),"circle-color":new Li(Ie.paint_circle["circle-color"]),"circle-blur":new Li(Ie.paint_circle["circle-blur"]),"circle-opacity":new Li(Ie.paint_circle["circle-opacity"]),"circle-translate":new bi(Ie.paint_circle["circle-translate"]),"circle-translate-anchor":new bi(Ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new bi(Ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new bi(Ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Li(Ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Li(Ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Li(Ie.paint_circle["circle-stroke-opacity"])}),layout:Ol},Qo="undefined"!=typeof Float32Array?Float32Array:Array;function Il(M){return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=1,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=1,M[11]=0,M[12]=0,M[13]=0,M[14]=0,M[15]=1,M}function vl(M,I,Y){var ae=I[0],pe=I[1],ye=I[2],Ee=I[3],je=I[4],$e=I[5],pt=I[6],bt=I[7],qt=I[8],tr=I[9],Kt=I[10],hr=I[11],Ar=I[12],jr=I[13],Nr=I[14],Yr=I[15],Wr=Y[0],tn=Y[1],kn=Y[2],On=Y[3];return M[0]=Wr*ae+tn*je+kn*qt+On*Ar,M[1]=Wr*pe+tn*$e+kn*tr+On*jr,M[2]=Wr*ye+tn*pt+kn*Kt+On*Nr,M[3]=Wr*Ee+tn*bt+kn*hr+On*Yr,M[4]=(Wr=Y[4])*ae+(tn=Y[5])*je+(kn=Y[6])*qt+(On=Y[7])*Ar,M[5]=Wr*pe+tn*$e+kn*tr+On*jr,M[6]=Wr*ye+tn*pt+kn*Kt+On*Nr,M[7]=Wr*Ee+tn*bt+kn*hr+On*Yr,M[8]=(Wr=Y[8])*ae+(tn=Y[9])*je+(kn=Y[10])*qt+(On=Y[11])*Ar,M[9]=Wr*pe+tn*$e+kn*tr+On*jr,M[10]=Wr*ye+tn*pt+kn*Kt+On*Nr,M[11]=Wr*Ee+tn*bt+kn*hr+On*Yr,M[12]=(Wr=Y[12])*ae+(tn=Y[13])*je+(kn=Y[14])*qt+(On=Y[15])*Ar,M[13]=Wr*pe+tn*$e+kn*tr+On*jr,M[14]=Wr*ye+tn*pt+kn*Kt+On*Nr,M[15]=Wr*Ee+tn*bt+kn*hr+On*Yr,M}Math.hypot||(Math.hypot=function(){for(var M=arguments,I=0,Y=arguments.length;Y--;)I+=M[Y]*M[Y];return Math.sqrt(I)});var Ws,I,hc=vl;function ll(M,I,Y){var ae=I[0],pe=I[1],ye=I[2],Ee=I[3];return M[0]=Y[0]*ae+Y[4]*pe+Y[8]*ye+Y[12]*Ee,M[1]=Y[1]*ae+Y[5]*pe+Y[9]*ye+Y[13]*Ee,M[2]=Y[2]*ae+Y[6]*pe+Y[10]*ye+Y[14]*Ee,M[3]=Y[3]*ae+Y[7]*pe+Y[11]*ye+Y[15]*Ee,M}Ws=new Qo(3),Qo!=Float32Array&&(Ws[0]=0,Ws[1]=0,Ws[2]=0),I=new Qo(4),Qo!=Float32Array&&(I[0]=0,I[1]=0,I[2]=0,I[3]=0);var wu=(function(){var I=new Qo(2);Qo!=Float32Array&&(I[0]=0,I[1]=0)}(),function(M){function I(Y){M.call(this,Y,fc)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.createBucket=function(Y){return new to(Y)},I.prototype.queryRadius=function(Y){var ae=Y;return za("circle-radius",this,ae)+za("circle-stroke-width",this,ae)+Po(this.paint.get("circle-translate"))},I.prototype.queryIntersectsFeature=function(Y,ae,pe,ye,Ee,je,$e,pt){for(var bt=Ro(Y,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),je.angle,$e),qt=this.paint.get("circle-radius").evaluate(ae,pe)+this.paint.get("circle-stroke-width").evaluate(ae,pe),tr="map"===this.paint.get("circle-pitch-alignment"),Kt=tr?bt:function($n,Xn){return $n.map(function(ii){return Fc(ii,Xn)})}(bt,pt),hr=tr?qt*$e:qt,Ar=0,jr=ye;Ar<jr.length;Ar+=1)for(var Nr=0,Yr=jr[Ar];Nr<Yr.length;Nr+=1){var Wr=Yr[Nr],tn=tr?Wr:Fc(Wr,pt),kn=hr,On=ll([],[Wr.x,Wr.y,0,1],pt);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?kn*=On[3]/je.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(kn*=je.cameraToCenterDistance/On[3]),Ps(Kt,tn,kn))return!0}return!1},I}(Zo));function Fc(M,I){var Y=ll([],[M.x,M.y,0,1],I);return new r(Y[0]/Y[3],Y[1]/Y[3])}var Bc=function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I}(to);function pc(M,I,Y,ae){var pe=I.width,ye=I.height;if(ae){if(ae instanceof Uint8ClampedArray)ae=new Uint8Array(ae.buffer);else if(ae.length!==pe*ye*Y)throw new RangeError("mismatched image size")}else ae=new Uint8Array(pe*ye*Y);return M.width=pe,M.height=ye,M.data=ae,M}function Nc(M,I,Y){var ae=I.width,pe=I.height;if(ae!==M.width||pe!==M.height){var ye=pc({},{width:ae,height:pe},Y);jc(M,ye,{x:0,y:0},{x:0,y:0},{width:Math.min(M.width,ae),height:Math.min(M.height,pe)},Y),M.width=ae,M.height=pe,M.data=ye.data}}function jc(M,I,Y,ae,pe,ye){if(0===pe.width||0===pe.height)return I;if(pe.width>M.width||pe.height>M.height||Y.x>M.width-pe.width||Y.y>M.height-pe.height)throw new RangeError("out of range source coordinates for image copy");if(pe.width>I.width||pe.height>I.height||ae.x>I.width-pe.width||ae.y>I.height-pe.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ee=M.data,je=I.data,$e=0;$e<pe.height;$e++)for(var pt=((Y.y+$e)*M.width+Y.x)*ye,bt=((ae.y+$e)*I.width+ae.x)*ye,qt=0;qt<pe.width*ye;qt++)je[bt+qt]=Ee[pt+qt];return I}rn("HeatmapBucket",Bc,{omit:["layers"]});var Sl=function(M,I){pc(this,M,1,I)};Sl.prototype.resize=function(M){Nc(this,M,1)},Sl.prototype.clone=function(){return new Sl({width:this.width,height:this.height},new Uint8Array(this.data))},Sl.copy=function(M,I,Y,ae,pe){jc(M,I,Y,ae,pe,1)};var fs=function(M,I){pc(this,M,4,I)};fs.prototype.resize=function(M){Nc(this,M,4)},fs.prototype.replace=function(M,I){I?this.data.set(M):this.data=M instanceof Uint8ClampedArray?new Uint8Array(M.buffer):M},fs.prototype.clone=function(){return new fs({width:this.width,height:this.height},new Uint8Array(this.data))},fs.copy=function(M,I,Y,ae,pe){jc(M,I,Y,ae,pe,4)},rn("AlphaImage",Sl),rn("RGBAImage",fs);var Vc={paint:new Oo({"heatmap-radius":new Li(Ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Li(Ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new bi(Ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ms(Ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new bi(Ie.paint_heatmap["heatmap-opacity"])})};function Au(M,I){for(var Y=new Uint8Array(1024),ae={},pe=0,ye=0;pe<256;pe++,ye+=4){ae[I]=pe/255;var Ee=M.evaluate(ae);Y[ye+0]=Math.floor(255*Ee.r/Ee.a),Y[ye+1]=Math.floor(255*Ee.g/Ee.a),Y[ye+2]=Math.floor(255*Ee.b/Ee.a),Y[ye+3]=Math.floor(255*Ee.a)}return new fs({width:256,height:1},Y)}var Tu=function(M){function I(Y){M.call(this,Y,Vc),this._updateColorRamp()}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.createBucket=function(Y){return new Bc(Y)},I.prototype._handleSpecialPaintPropertyUpdate=function(Y){"heatmap-color"===Y&&this._updateColorRamp()},I.prototype._updateColorRamp=function(){this.colorRamp=Au(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},I.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},I}(Zo),Mu={paint:new Oo({"hillshade-illumination-direction":new bi(Ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new bi(Ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new bi(Ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new bi(Ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new bi(Ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new bi(Ie.paint_hillshade["hillshade-accent-color"])})},ku=function(M){function I(Y){M.call(this,Y,Mu)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},I}(Zo),Uc=ha([{name:"a_pos",components:2,type:"Int16"}],4).members,gc=Nl,Su=Nl;function Nl(M,I,Y){Y=Y||2;var ae,pe,ye,Ee,je,$e,pt,bt=I&&I.length,qt=bt?I[0]*Y:M.length,tr=Le(M,0,qt,Y,!0),Kt=[];if(!tr||tr.next===tr.prev)return Kt;if(bt&&(tr=function(Ar,jr,Nr,Yr){var Wr,tn,$n,Xn=[];for(Wr=0,tn=jr.length;Wr<tn;Wr++)($n=Le(Ar,jr[Wr]*Yr,Wr<tn-1?jr[Wr+1]*Yr:Ar.length,Yr,!1))===$n.next&&($n.steiner=!0),Xn.push(Xo($n));for(Xn.sort(Dn),Wr=0;Wr<Xn.length;Wr++)Ti(Xn[Wr],Nr),Nr=At(Nr,Nr.next);return Nr}(M,I,tr,Y)),M.length>80*Y){ae=ye=M[0],pe=Ee=M[1];for(var hr=Y;hr<qt;hr+=Y)(je=M[hr])<ae&&(ae=je),($e=M[hr+1])<pe&&(pe=$e),je>ye&&(ye=je),$e>Ee&&(Ee=$e);pt=0!==(pt=Math.max(ye-ae,Ee-pe))?1/pt:0}return Me(tr,Kt,Y,ae,pe,pt),Kt}function Le(M,I,Y,ae,pe){var ye,Ee;if(pe===Eu(M,I,Y,ae)>0)for(ye=I;ye<Y;ye+=ae)Ee=sf(ye,M[ye],M[ye+1],Ee);else for(ye=Y-ae;ye>=I;ye-=ae)Ee=sf(ye,M[ye],M[ye+1],Ee);return Ee&&ys(Ee,Ee.next)&&(mc(Ee),Ee=Ee.next),Ee}function At(M,I){if(!M)return M;I||(I=M);var Y,ae=M;do{if(Y=!1,ae.steiner||!ys(ae,ae.next)&&0!==ro(ae.prev,ae,ae.next))ae=ae.next;else{if(mc(ae),(ae=I=ae.prev)===ae.next)break;Y=!0}}while(Y||ae!==I);return I}function Me(M,I,Y,ae,pe,ye,Ee){if(M){!Ee&&ye&&function(bt,qt,tr,Kt){var hr=bt;do{null===hr.z&&(hr.z=es(hr.x,hr.y,qt,tr,Kt)),hr.prevZ=hr.prev,hr.nextZ=hr.next,hr=hr.next}while(hr!==bt);hr.prevZ.nextZ=null,hr.prevZ=null,function(Ar){var jr,Nr,Yr,Wr,tn,kn,On,$n,Xn=1;do{for(Nr=Ar,Ar=null,tn=null,kn=0;Nr;){for(kn++,Yr=Nr,On=0,jr=0;jr<Xn&&(On++,Yr=Yr.nextZ);jr++);for($n=Xn;On>0||$n>0&&Yr;)0!==On&&(0===$n||!Yr||Nr.z<=Yr.z)?(Wr=Nr,Nr=Nr.nextZ,On--):(Wr=Yr,Yr=Yr.nextZ,$n--),tn?tn.nextZ=Wr:Ar=Wr,Wr.prevZ=tn,tn=Wr;Nr=Yr}tn.nextZ=null,Xn*=2}while(kn>1)}(hr)}(M,ae,pe,ye);for(var je,$e,pt=M;M.prev!==M.next;)if(je=M.prev,$e=M.next,ye?Ut(M,ae,pe,ye):We(M))I.push(je.i/Y),I.push(M.i/Y),I.push($e.i/Y),mc(M),M=$e.next,pt=$e.next;else if((M=$e)===pt){Ee?1===Ee?Me(M=vr(At(M),I,Y),I,Y,ae,pe,ye,2):2===Ee&&vn(M,I,Y,ae,pe,ye):Me(At(M),I,Y,ae,pe,ye,1);break}}}function We(M){var I=M.prev,Y=M,ae=M.next;if(ro(I,Y,ae)>=0)return!1;for(var pe=M.next.next;pe!==M.prev;){if(Rs(I.x,I.y,Y.x,Y.y,ae.x,ae.y,pe.x,pe.y)&&ro(pe.prev,pe,pe.next)>=0)return!1;pe=pe.next}return!0}function Ut(M,I,Y,ae){var pe=M.prev,ye=M,Ee=M.next;if(ro(pe,ye,Ee)>=0)return!1;for(var pt=pe.x>ye.x?pe.x>Ee.x?pe.x:Ee.x:ye.x>Ee.x?ye.x:Ee.x,bt=pe.y>ye.y?pe.y>Ee.y?pe.y:Ee.y:ye.y>Ee.y?ye.y:Ee.y,qt=es(pe.x<ye.x?pe.x<Ee.x?pe.x:Ee.x:ye.x<Ee.x?ye.x:Ee.x,pe.y<ye.y?pe.y<Ee.y?pe.y:Ee.y:ye.y<Ee.y?ye.y:Ee.y,I,Y,ae),tr=es(pt,bt,I,Y,ae),Kt=M.prevZ,hr=M.nextZ;Kt&&Kt.z>=qt&&hr&&hr.z<=tr;){if(Kt!==M.prev&&Kt!==M.next&&Rs(pe.x,pe.y,ye.x,ye.y,Ee.x,Ee.y,Kt.x,Kt.y)&&ro(Kt.prev,Kt,Kt.next)>=0||(Kt=Kt.prevZ,hr!==M.prev&&hr!==M.next&&Rs(pe.x,pe.y,ye.x,ye.y,Ee.x,Ee.y,hr.x,hr.y)&&ro(hr.prev,hr,hr.next)>=0))return!1;hr=hr.nextZ}for(;Kt&&Kt.z>=qt;){if(Kt!==M.prev&&Kt!==M.next&&Rs(pe.x,pe.y,ye.x,ye.y,Ee.x,Ee.y,Kt.x,Kt.y)&&ro(Kt.prev,Kt,Kt.next)>=0)return!1;Kt=Kt.prevZ}for(;hr&&hr.z<=tr;){if(hr!==M.prev&&hr!==M.next&&Rs(pe.x,pe.y,ye.x,ye.y,Ee.x,Ee.y,hr.x,hr.y)&&ro(hr.prev,hr,hr.next)>=0)return!1;hr=hr.nextZ}return!0}function vr(M,I,Y){var ae=M;do{var pe=ae.prev,ye=ae.next.next;!ys(pe,ye)&&xl(pe,ae,ae.next,ye)&&ts(pe,ye)&&ts(ye,pe)&&(I.push(pe.i/Y),I.push(ae.i/Y),I.push(ye.i/Y),mc(ae),mc(ae.next),ae=M=ye),ae=ae.next}while(ae!==M);return At(ae)}function vn(M,I,Y,ae,pe,ye){var Ee=M;do{for(var je=Ee.next.next;je!==Ee.prev;){if(Ee.i!==je.i&&yl(Ee,je)){var $e=jl(Ee,je);return Ee=At(Ee,Ee.next),$e=At($e,$e.next),Me(Ee,I,Y,ae,pe,ye),void Me($e,I,Y,ae,pe,ye)}je=je.next}Ee=Ee.next}while(Ee!==M)}function Dn(M,I){return M.x-I.x}function Ti(M,I){if(I=function(ae,pe){var ye,Ee=pe,je=ae.x,$e=ae.y,pt=-1/0;do{if($e<=Ee.y&&$e>=Ee.next.y&&Ee.next.y!==Ee.y){var bt=Ee.x+($e-Ee.y)*(Ee.next.x-Ee.x)/(Ee.next.y-Ee.y);if(bt<=je&&bt>pt){if(pt=bt,bt===je){if($e===Ee.y)return Ee;if($e===Ee.next.y)return Ee.next}ye=Ee.x<Ee.next.x?Ee:Ee.next}}Ee=Ee.next}while(Ee!==pe);if(!ye)return null;if(je===pt)return ye;var qt,tr=ye,Kt=ye.x,hr=ye.y,Ar=1/0;Ee=ye;do{je>=Ee.x&&Ee.x>=Kt&&je!==Ee.x&&Rs($e<hr?je:pt,$e,Kt,hr,$e<hr?pt:je,$e,Ee.x,Ee.y)&&(qt=Math.abs($e-Ee.y)/(je-Ee.x),ts(Ee,ae)&&(qt<Ar||qt===Ar&&(Ee.x>ye.x||Ee.x===ye.x&&Ha(ye,Ee)))&&(ye=Ee,Ar=qt)),Ee=Ee.next}while(Ee!==tr);return ye}(M,I)){var Y=jl(I,M);At(I,I.next),At(Y,Y.next)}}function Ha(M,I){return ro(M.prev,M,I.prev)<0&&ro(I.next,M,M.next)<0}function es(M,I,Y,ae,pe){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-Y)*pe)|M<<8))|M<<4))|M<<2))|M<<1))|(I=1431655765&((I=858993459&((I=252645135&((I=16711935&((I=32767*(I-ae)*pe)|I<<8))|I<<4))|I<<2))|I<<1))<<1}function Xo(M){var I=M,Y=M;do{(I.x<Y.x||I.x===Y.x&&I.y<Y.y)&&(Y=I),I=I.next}while(I!==M);return Y}function Rs(M,I,Y,ae,pe,ye,Ee,je){return(pe-Ee)*(I-je)-(M-Ee)*(ye-je)>=0&&(M-Ee)*(ae-je)-(Y-Ee)*(I-je)>=0&&(Y-Ee)*(ye-je)-(pe-Ee)*(ae-je)>=0}function yl(M,I){return M.next.i!==I.i&&M.prev.i!==I.i&&!function(Y,ae){var pe=Y;do{if(pe.i!==Y.i&&pe.next.i!==Y.i&&pe.i!==ae.i&&pe.next.i!==ae.i&&xl(pe,pe.next,Y,ae))return!0;pe=pe.next}while(pe!==Y);return!1}(M,I)&&(ts(M,I)&&ts(I,M)&&function(Y,ae){var pe=Y,ye=!1,Ee=(Y.x+ae.x)/2,je=(Y.y+ae.y)/2;do{pe.y>je!=pe.next.y>je&&pe.next.y!==pe.y&&Ee<(pe.next.x-pe.x)*(je-pe.y)/(pe.next.y-pe.y)+pe.x&&(ye=!ye),pe=pe.next}while(pe!==Y);return ye}(M,I)&&(ro(M.prev,M,I.prev)||ro(M,I.prev,I))||ys(M,I)&&ro(M.prev,M,M.next)>0&&ro(I.prev,I,I.next)>0)}function ro(M,I,Y){return(I.y-M.y)*(Y.x-I.x)-(I.x-M.x)*(Y.y-I.y)}function ys(M,I){return M.x===I.x&&M.y===I.y}function xl(M,I,Y,ae){var pe=ks(ro(M,I,Y)),ye=ks(ro(M,I,ae)),Ee=ks(ro(Y,ae,M)),je=ks(ro(Y,ae,I));return pe!==ye&&Ee!==je||!(0!==pe||!Ka(M,Y,I))||!(0!==ye||!Ka(M,ae,I))||!(0!==Ee||!Ka(Y,M,ae))||!(0!==je||!Ka(Y,I,ae))}function Ka(M,I,Y){return I.x<=Math.max(M.x,Y.x)&&I.x>=Math.min(M.x,Y.x)&&I.y<=Math.max(M.y,Y.y)&&I.y>=Math.min(M.y,Y.y)}function ks(M){return M>0?1:M<0?-1:0}function ts(M,I){return ro(M.prev,M,M.next)<0?ro(M,I,M.next)>=0&&ro(M,M.prev,I)>=0:ro(M,I,M.prev)<0||ro(M,M.next,I)<0}function jl(M,I){var Y=new Cu(M.i,M.x,M.y),ae=new Cu(I.i,I.x,I.y),pe=M.next,ye=I.prev;return M.next=I,I.prev=M,Y.next=pe,pe.prev=Y,ae.next=Y,Y.prev=ae,ye.next=ae,ae.prev=ye,ae}function sf(M,I,Y,ae){var pe=new Cu(M,I,Y);return ae?(pe.next=ae.next,pe.prev=ae,ae.next.prev=pe,ae.next=pe):(pe.prev=pe,pe.next=pe),pe}function mc(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function Cu(M,I,Y){this.i=M,this.x=I,this.y=Y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Eu(M,I,Y,ae){for(var pe=0,ye=I,Ee=Y-ae;ye<Y;ye+=ae)pe+=(M[Ee]-M[ye])*(M[ye+1]+M[Ee+1]),Ee=ye;return pe}function Mh(M,I,Y,ae,pe){!function ye(Ee,je,$e,pt,bt){for(;pt>$e;){if(pt-$e>600){var qt=pt-$e+1,tr=je-$e+1,Kt=Math.log(qt),hr=.5*Math.exp(2*Kt/3),Ar=.5*Math.sqrt(Kt*hr*(qt-hr)/qt)*(tr-qt/2<0?-1:1);ye(Ee,je,Math.max($e,Math.floor(je-tr*hr/qt+Ar)),Math.min(pt,Math.floor(je+(qt-tr)*hr/qt+Ar)),bt)}var Yr=Ee[je],Wr=$e,tn=pt;for(vc(Ee,$e,je),bt(Ee[pt],Yr)>0&&vc(Ee,$e,pt);Wr<tn;){for(vc(Ee,Wr,tn),Wr++,tn--;bt(Ee[Wr],Yr)<0;)Wr++;for(;bt(Ee[tn],Yr)>0;)tn--}0===bt(Ee[$e],Yr)?vc(Ee,$e,tn):vc(Ee,++tn,pt),tn<=je&&($e=tn+1),je<=tn&&(pt=tn-1)}}(M,I,Y||0,ae||M.length-1,pe||kh)}function vc(M,I,Y){var ae=M[I];M[I]=M[Y],M[Y]=ae}function kh(M,I){return M<I?-1:M>I?1:0}function Lu(M,I){var Y=M.length;if(Y<=1)return[M];for(var ae,pe,ye=[],Ee=0;Ee<Y;Ee++){var je=D(M[Ee]);0!==je&&(M[Ee].area=Math.abs(je),void 0===pe&&(pe=je<0),pe===je<0?(ae&&ye.push(ae),ae=[M[Ee]]):ae.push(M[Ee]))}if(ae&&ye.push(ae),I>1)for(var $e=0;$e<ye.length;$e++)ye[$e].length<=I||(Mh(ye[$e],I,1,ye[$e].length-1,Sh),ye[$e]=ye[$e].slice(0,I));return ye}function Sh(M,I){return I.area-M.area}function Du(M,I,Y){for(var ae=Y.patternDependencies,pe=!1,ye=0,Ee=I;ye<Ee.length;ye+=1){var je=Ee[ye].paint.get(M+"-pattern");je.isConstant()||(pe=!0);var $e=je.constantOr(null);$e&&(pe=!0,ae[$e.to]=!0,ae[$e.from]=!0)}return pe}function Ou(M,I,Y,ae,pe){for(var ye=pe.patternDependencies,Ee=0,je=I;Ee<je.length;Ee+=1){var $e=je[Ee],pt=$e.paint.get(M+"-pattern").value;if("constant"!==pt.kind){var bt=pt.evaluate({zoom:ae-1},Y,{},pe.availableImages),qt=pt.evaluate({zoom:ae},Y,{},pe.availableImages),tr=pt.evaluate({zoom:ae+1},Y,{},pe.availableImages);qt=qt&&qt.name?qt.name:qt,tr=tr&&tr.name?tr.name:tr,ye[bt=bt&&bt.name?bt.name:bt]=!0,ye[qt]=!0,ye[tr]=!0,Y.patterns[$e.id]={min:bt,mid:qt,max:tr}}}return Y}Nl.deviation=function(M,I,Y,ae){var pe=I&&I.length,Ee=Math.abs(Eu(M,0,pe?I[0]*Y:M.length,Y));if(pe)for(var je=0,$e=I.length;je<$e;je++)Ee-=Math.abs(Eu(M,I[je]*Y,je<$e-1?I[je+1]*Y:M.length,Y));var qt=0;for(je=0;je<ae.length;je+=3){var tr=ae[je]*Y,Kt=ae[je+1]*Y,hr=ae[je+2]*Y;qt+=Math.abs((M[tr]-M[hr])*(M[Kt+1]-M[tr+1])-(M[tr]-M[Kt])*(M[hr+1]-M[tr+1]))}return 0===Ee&&0===qt?0:Math.abs((qt-Ee)/Ee)},Nl.flatten=function(M){for(var I=M[0][0].length,Y={vertices:[],holes:[],dimensions:I},ae=0,pe=0;pe<M.length;pe++){for(var ye=0;ye<M[pe].length;ye++)for(var Ee=0;Ee<I;Ee++)Y.vertices.push(M[pe][ye][Ee]);pe>0&&Y.holes.push(ae+=M[pe-1].length)}return Y},gc.default=Su;var Ks=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new cs,this.indexArray=new ho,this.indexArray2=new F,this.programConfigurations=new Ta(Uc,M.layers,M.zoom),this.segments=new Ht,this.segments2=new Ht,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};Ks.prototype.populate=function(M,I,Y){this.hasPattern=Du("fill",this.layers,I);for(var ae=this.layers[0].layout.get("fill-sort-key"),pe=[],ye=0,Ee=M;ye<Ee.length;ye+=1){var je=Ee[ye],$e=je.feature,pt=je.id,bt=je.index,qt=je.sourceLayerIndex,tr=this.layers[0]._featureFilter.needGeometry,Kt={type:$e.type,id:pt,properties:$e.properties,geometry:tr?Ea($e):[]};if(this.layers[0]._featureFilter.filter(new ma(this.zoom),Kt,Y)){tr||(Kt.geometry=Ea($e));var hr=ae?ae.evaluate(Kt,{},Y,I.availableImages):void 0;pe.push({id:pt,properties:$e.properties,type:$e.type,sourceLayerIndex:qt,index:bt,geometry:Kt.geometry,patterns:{},sortKey:hr})}}ae&&pe.sort(function(ii,vi){return ii.sortKey-vi.sortKey});for(var jr=0,Nr=pe;jr<Nr.length;jr+=1){var Yr=Nr[jr],tn=Yr.geometry,kn=Yr.index,On=Yr.sourceLayerIndex;if(this.hasPattern){var $n=Ou("fill",this.layers,Yr,this.zoom,I);this.patternFeatures.push($n)}else this.addFeature(Yr,tn,kn,Y,{});I.featureIndex.insert(M[kn].feature,tn,kn,On,this.index)}},Ks.prototype.update=function(M,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,I,this.stateDependentLayers,Y)},Ks.prototype.addFeatures=function(M,I,Y){for(var ae=0,pe=this.patternFeatures;ae<pe.length;ae+=1){var ye=pe[ae];this.addFeature(ye,ye.geometry,ye.index,I,Y)}},Ks.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ks.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ks.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Uc),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.indexBuffer2=M.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(M),this.uploaded=!0},Ks.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ks.prototype.addFeature=function(M,I,Y,ae,pe){for(var ye=0,Ee=Lu(I,500);ye<Ee.length;ye+=1){for(var je=Ee[ye],$e=0,pt=0,bt=je;pt<bt.length;pt+=1)$e+=bt[pt].length;for(var qt=this.segments.prepareSegment($e,this.layoutVertexArray,this.indexArray),tr=qt.vertexLength,Kt=[],hr=[],Ar=0,jr=je;Ar<jr.length;Ar+=1){var Nr=jr[Ar];if(0!==Nr.length){Nr!==je[0]&&hr.push(Kt.length/2);var Yr=this.segments2.prepareSegment(Nr.length,this.layoutVertexArray,this.indexArray2),Wr=Yr.vertexLength;this.layoutVertexArray.emplaceBack(Nr[0].x,Nr[0].y),this.indexArray2.emplaceBack(Wr+Nr.length-1,Wr),Kt.push(Nr[0].x),Kt.push(Nr[0].y);for(var tn=1;tn<Nr.length;tn++)this.layoutVertexArray.emplaceBack(Nr[tn].x,Nr[tn].y),this.indexArray2.emplaceBack(Wr+tn-1,Wr+tn),Kt.push(Nr[tn].x),Kt.push(Nr[tn].y);Yr.vertexLength+=Nr.length,Yr.primitiveLength+=Nr.length}}for(var kn=gc(Kt,hr),On=0;On<kn.length;On+=3)this.indexArray.emplaceBack(tr+kn[On],tr+kn[On+1],tr+kn[On+2]);qt.vertexLength+=$e,qt.primitiveLength+=kn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Y,pe,ae)},rn("FillBucket",Ks,{omit:["layers","patternFeatures"]});var Ch=new Oo({"fill-sort-key":new Li(Ie.layout_fill["fill-sort-key"])}),Eh={paint:new Oo({"fill-antialias":new bi(Ie.paint_fill["fill-antialias"]),"fill-opacity":new Li(Ie.paint_fill["fill-opacity"]),"fill-color":new Li(Ie.paint_fill["fill-color"]),"fill-outline-color":new Li(Ie.paint_fill["fill-outline-color"]),"fill-translate":new bi(Ie.paint_fill["fill-translate"]),"fill-translate-anchor":new bi(Ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ds(Ie.paint_fill["fill-pattern"])}),layout:Ch},Lh=function(M){function I(Y){M.call(this,Y,Eh)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.recalculate=function(Y,ae){M.prototype.recalculate.call(this,Y,ae);var pe=this.paint._values["fill-outline-color"];"constant"===pe.value.kind&&void 0===pe.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},I.prototype.createBucket=function(Y){return new Ks(Y)},I.prototype.queryRadius=function(){return Po(this.paint.get("fill-translate"))},I.prototype.queryIntersectsFeature=function(Y,ae,pe,ye,Ee,je,$e){return Ys(Ro(Y,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),je.angle,$e),ye)},I.prototype.isTileClipped=function(){return!0},I}(Zo),lf=ha([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,cf=Vl;function Vl(M,I,Y,ae,pe){this.properties={},this.extent=Y,this.type=0,this._pbf=M,this._geometry=-1,this._keys=ae,this._values=pe,M.readFields(Dh,this,I)}function Dh(M,I,Y){1==M?I.id=Y.readVarint():2==M?function(ae,pe){for(var ye=ae.readVarint()+ae.pos;ae.pos<ye;){var Ee=pe._keys[ae.readVarint()],je=pe._values[ae.readVarint()];pe.properties[Ee]=je}}(Y,I):3==M?I.type=Y.readVarint():4==M&&(I._geometry=Y.pos)}function Oh(M){for(var I,Y,ae=0,pe=0,ye=M.length,Ee=ye-1;pe<ye;Ee=pe++)ae+=((Y=M[Ee]).x-(I=M[pe]).x)*(I.y+Y.y);return ae}Vl.types=["Unknown","Point","LineString","Polygon"],Vl.prototype.loadGeometry=function(){var M=this._pbf;M.pos=this._geometry;for(var I,Y=M.readVarint()+M.pos,ae=1,pe=0,ye=0,Ee=0,je=[];M.pos<Y;){if(pe<=0){var $e=M.readVarint();ae=7&$e,pe=$e>>3}if(pe--,1===ae||2===ae)ye+=M.readSVarint(),Ee+=M.readSVarint(),1===ae&&(I&&je.push(I),I=[]),I.push(new r(ye,Ee));else{if(7!==ae)throw new Error("unknown command "+ae);I&&I.push(I[0].clone())}}return I&&je.push(I),je},Vl.prototype.bbox=function(){var M=this._pbf;M.pos=this._geometry;for(var I=M.readVarint()+M.pos,Y=1,ae=0,pe=0,ye=0,Ee=1/0,je=-1/0,$e=1/0,pt=-1/0;M.pos<I;){if(ae<=0){var bt=M.readVarint();Y=7&bt,ae=bt>>3}if(ae--,1===Y||2===Y)(pe+=M.readSVarint())<Ee&&(Ee=pe),pe>je&&(je=pe),(ye+=M.readSVarint())<$e&&($e=ye),ye>pt&&(pt=ye);else if(7!==Y)throw new Error("unknown command "+Y)}return[Ee,$e,je,pt]},Vl.prototype.toGeoJSON=function(M,I,Y){var ae,pe,ye=this.extent*Math.pow(2,Y),Ee=this.extent*M,je=this.extent*I,$e=this.loadGeometry(),pt=Vl.types[this.type];function bt(Kt){for(var hr=0;hr<Kt.length;hr++){var Ar=Kt[hr];Kt[hr]=[360*(Ar.x+Ee)/ye-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ar.y+je)/ye)*Math.PI/180))-90]}}switch(this.type){case 1:var qt=[];for(ae=0;ae<$e.length;ae++)qt[ae]=$e[ae][0];bt($e=qt);break;case 2:for(ae=0;ae<$e.length;ae++)bt($e[ae]);break;case 3:for($e=function(Kt){var hr=Kt.length;if(hr<=1)return[Kt];for(var Ar,jr,Nr=[],Yr=0;Yr<hr;Yr++){var Wr=Oh(Kt[Yr]);0!==Wr&&(void 0===jr&&(jr=Wr<0),jr===Wr<0?(Ar&&Nr.push(Ar),Ar=[Kt[Yr]]):Ar.push(Kt[Yr]))}return Ar&&Nr.push(Ar),Nr}($e),ae=0;ae<$e.length;ae++)for(pe=0;pe<$e[ae].length;pe++)bt($e[ae][pe])}1===$e.length?$e=$e[0]:pt="Multi"+pt;var tr={type:"Feature",geometry:{type:pt,coordinates:$e},properties:this.properties};return"id"in this&&(tr.id=this.id),tr};var uf=ff;function ff(M,I){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=M,this._keys=[],this._values=[],this._features=[],M.readFields(Ih,this,I),this.length=this._features.length}function Ih(M,I,Y){15===M?I.version=Y.readVarint():1===M?I.name=Y.readString():5===M?I.extent=Y.readVarint():2===M?I._features.push(Y.pos):3===M?I._keys.push(Y.readString()):4===M&&I._values.push(function(ae){for(var pe=null,ye=ae.readVarint()+ae.pos;ae.pos<ye;){var Ee=ae.readVarint()>>3;pe=1===Ee?ae.readString():2===Ee?ae.readFloat():3===Ee?ae.readDouble():4===Ee?ae.readVarint64():5===Ee?ae.readVarint():6===Ee?ae.readSVarint():7===Ee?ae.readBoolean():null}return pe}(Y))}function Ph(M,I,Y){if(3===M){var ae=new uf(Y,Y.readVarint()+Y.pos);ae.length&&(I[ae.name]=ae)}}ff.prototype.feature=function(M){if(M<0||M>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[M];var I=this._pbf.readVarint()+this._pbf.pos;return new cf(this._pbf,I,this.extent,this._keys,this._values)};var Ul={VectorTile:function(M,I){this.layers=M.readFields(Ph,{},I)},VectorTileFeature:cf,VectorTileLayer:uf},Rh=Ul.VectorTileFeature.types,Iu=Math.pow(2,13);function yc(M,I,Y,ae,pe,ye,Ee,je){M.emplaceBack(I,Y,2*Math.floor(ae*Iu)+Ee,pe*Iu*2,ye*Iu*2,Math.round(je))}var $s=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=M.index,this.hasPattern=!1,this.layoutVertexArray=new As,this.indexArray=new ho,this.programConfigurations=new Ta(lf,M.layers,M.zoom),this.segments=new Ht,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};function zh(M,I){return M.x===I.x&&(M.x<0||M.x>8192)||M.y===I.y&&(M.y<0||M.y>8192)}function Fh(M){return M.every(function(I){return I.x<0})||M.every(function(I){return I.x>8192})||M.every(function(I){return I.y<0})||M.every(function(I){return I.y>8192})}$s.prototype.populate=function(M,I,Y){this.features=[],this.hasPattern=Du("fill-extrusion",this.layers,I);for(var ae=0,pe=M;ae<pe.length;ae+=1){var ye=pe[ae],Ee=ye.feature,je=ye.id,$e=ye.index,pt=ye.sourceLayerIndex,bt=this.layers[0]._featureFilter.needGeometry,qt={type:Ee.type,id:je,properties:Ee.properties,geometry:bt?Ea(Ee):[]};if(this.layers[0]._featureFilter.filter(new ma(this.zoom),qt,Y)){var tr={id:je,sourceLayerIndex:pt,index:$e,geometry:bt?qt.geometry:Ea(Ee),properties:Ee.properties,type:Ee.type,patterns:{}};void 0!==Ee.id&&(tr.id=Ee.id),this.hasPattern?this.features.push(Ou("fill-extrusion",this.layers,tr,this.zoom,I)):this.addFeature(tr,tr.geometry,$e,Y,{}),I.featureIndex.insert(Ee,tr.geometry,$e,pt,this.index,!0)}}},$s.prototype.addFeatures=function(M,I,Y){for(var ae=0,pe=this.features;ae<pe.length;ae+=1){var ye=pe[ae];this.addFeature(ye,ye.geometry,ye.index,I,Y)}},$s.prototype.update=function(M,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,I,this.stateDependentLayers,Y)},$s.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},$s.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},$s.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,lf),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},$s.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},$s.prototype.addFeature=function(M,I,Y,ae,pe){for(var ye=0,Ee=Lu(I,500);ye<Ee.length;ye+=1){for(var je=Ee[ye],$e=0,pt=0,bt=je;pt<bt.length;pt+=1)$e+=bt[pt].length;for(var qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),tr=0,Kt=je;tr<Kt.length;tr+=1){var hr=Kt[tr];if(0!==hr.length&&!Fh(hr))for(var Ar=0,jr=0;jr<hr.length;jr++){var Nr=hr[jr];if(jr>=1){var Yr=hr[jr-1];if(!zh(Nr,Yr)){qt.vertexLength+4>Ht.MAX_VERTEX_ARRAY_LENGTH&&(qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Wr=Nr.sub(Yr)._perp()._unit(),tn=Yr.dist(Nr);Ar+tn>32768&&(Ar=0),yc(this.layoutVertexArray,Nr.x,Nr.y,Wr.x,Wr.y,0,0,Ar),yc(this.layoutVertexArray,Nr.x,Nr.y,Wr.x,Wr.y,0,1,Ar),yc(this.layoutVertexArray,Yr.x,Yr.y,Wr.x,Wr.y,0,0,Ar+=tn),yc(this.layoutVertexArray,Yr.x,Yr.y,Wr.x,Wr.y,0,1,Ar);var kn=qt.vertexLength;this.indexArray.emplaceBack(kn,kn+2,kn+1),this.indexArray.emplaceBack(kn+1,kn+2,kn+3),qt.vertexLength+=4,qt.primitiveLength+=2}}}}if(qt.vertexLength+$e>Ht.MAX_VERTEX_ARRAY_LENGTH&&(qt=this.segments.prepareSegment($e,this.layoutVertexArray,this.indexArray)),"Polygon"===Rh[M.type]){for(var On=[],$n=[],Xn=qt.vertexLength,ii=0,vi=je;ii<vi.length;ii+=1){var yi=vi[ii];if(0!==yi.length){yi!==je[0]&&$n.push(On.length/2);for(var li=0;li<yi.length;li++){var ki=yi[li];yc(this.layoutVertexArray,ki.x,ki.y,0,0,1,1,0),On.push(ki.x),On.push(ki.y)}}}for(var wi=gc(On,$n),xi=0;xi<wi.length;xi+=3)this.indexArray.emplaceBack(Xn+wi[xi],Xn+wi[xi+2],Xn+wi[xi+1]);qt.primitiveLength+=wi.length/3,qt.vertexLength+=$e}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Y,pe,ae)},rn("FillExtrusionBucket",$s,{omit:["layers","features"]});var Bh={paint:new Oo({"fill-extrusion-opacity":new bi(Ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Li(Ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new bi(Ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new bi(Ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ds(Ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Li(Ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Li(Ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new bi(Ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Nh=function(M){function I(Y){M.call(this,Y,Bh)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.createBucket=function(Y){return new $s(Y)},I.prototype.queryRadius=function(){return Po(this.paint.get("fill-extrusion-translate"))},I.prototype.is3D=function(){return!0},I.prototype.queryIntersectsFeature=function(Y,ae,pe,ye,Ee,je,$e,pt){var bt=Ro(Y,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),je.angle,$e),qt=this.paint.get("fill-extrusion-height").evaluate(ae,pe),tr=this.paint.get("fill-extrusion-base").evaluate(ae,pe),Kt=function(Ar,jr,Nr,Yr){for(var Wr=[],tn=0,kn=Ar;tn<kn.length;tn+=1){var On=kn[tn],$n=[On.x,On.y,0,1];ll($n,$n,jr),Wr.push(new r($n[0]/$n[3],$n[1]/$n[3]))}return Wr}(bt,pt),hr=function(Ar,jr,Nr,Yr){for(var Wr=[],tn=[],kn=Yr[8]*jr,On=Yr[9]*jr,$n=Yr[10]*jr,Xn=Yr[11]*jr,ii=Yr[8]*Nr,vi=Yr[9]*Nr,yi=Yr[10]*Nr,li=Yr[11]*Nr,ki=0,wi=Ar;ki<wi.length;ki+=1){for(var da=[],la=[],ba=0,Pi=wi[ki];ba<Pi.length;ba+=1){var ua=Pi[ba],Ba=ua.x,La=ua.y,Ya=Yr[0]*Ba+Yr[4]*La+Yr[12],Da=Yr[1]*Ba+Yr[5]*La+Yr[13],To=Yr[2]*Ba+Yr[6]*La+Yr[14],Wa=Yr[3]*Ba+Yr[7]*La+Yr[15],Jo=To+$n,Fo=Wa+Xn,Uo=Ya+ii,hs=Da+vi,ns=To+yi,Mo=Wa+li,Go=new r((Ya+kn)/Fo,(Da+On)/Fo);Go.z=Jo/Fo,da.push(Go);var vo=new r(Uo/Mo,hs/Mo);vo.z=ns/Mo,la.push(vo)}Wr.push(da),tn.push(la)}return[Wr,tn]}(ye,tr,qt,pt);return function(Ar,jr,Nr){var Yr=1/0;Ys(Nr,jr)&&(Yr=hf(Nr,jr[0]));for(var Wr=0;Wr<jr.length;Wr++)for(var tn=jr[Wr],kn=Ar[Wr],On=0;On<tn.length-1;On++){var $n=tn[On],yi=[$n,tn[On+1],kn[On+1],kn[On],$n];Io(Nr,yi)&&(Yr=Math.min(Yr,hf(Nr,yi)))}return Yr!==1/0&&Yr}(hr[0],hr[1],Kt)},I}(Zo);function xc(M,I){return M.x*I.x+M.y*I.y}function hf(M,I){if(1===M.length){for(var Y,ae=0,pe=I[ae++];!Y||pe.equals(Y);)if(!(Y=I[ae++]))return 1/0;for(;ae<I.length;ae++){var ye=I[ae],Ee=M[0],je=Y.sub(pe),$e=ye.sub(pe),pt=Ee.sub(pe),bt=xc(je,je),qt=xc(je,$e),tr=xc($e,$e),Kt=xc(pt,je),hr=xc(pt,$e),Ar=bt*tr-qt*qt,jr=(tr*Kt-qt*hr)/Ar,Nr=(bt*hr-qt*Kt)/Ar,Wr=pe.z*(1-jr-Nr)+Y.z*jr+ye.z*Nr;if(isFinite(Wr))return Wr}return 1/0}for(var tn=1/0,kn=0,On=I;kn<On.length;kn+=1)tn=Math.min(tn,On[kn].z);return tn}var df=ha([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,jh=Ul.VectorTileFeature.types,Vh=Math.cos(Math.PI/180*37.5),pf=Math.pow(2,14)/.5,xs=function(M){this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=M.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new qs,this.indexArray=new ho,this.programConfigurations=new Ta(df,M.layers,M.zoom),this.segments=new Ht,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};xs.prototype.populate=function(M,I,Y){this.hasPattern=Du("line",this.layers,I);for(var ae=this.layers[0].layout.get("line-sort-key"),pe=[],ye=0,Ee=M;ye<Ee.length;ye+=1){var je=Ee[ye],$e=je.feature,pt=je.id,bt=je.index,qt=je.sourceLayerIndex,tr=this.layers[0]._featureFilter.needGeometry,Kt={type:$e.type,id:pt,properties:$e.properties,geometry:tr?Ea($e):[]};if(this.layers[0]._featureFilter.filter(new ma(this.zoom),Kt,Y)){tr||(Kt.geometry=Ea($e));var hr=ae?ae.evaluate(Kt,{},Y):void 0;pe.push({id:pt,properties:$e.properties,type:$e.type,sourceLayerIndex:qt,index:bt,geometry:Kt.geometry,patterns:{},sortKey:hr})}}ae&&pe.sort(function(ii,vi){return ii.sortKey-vi.sortKey});for(var jr=0,Nr=pe;jr<Nr.length;jr+=1){var Yr=Nr[jr],tn=Yr.geometry,kn=Yr.index,On=Yr.sourceLayerIndex;if(this.hasPattern){var $n=Ou("line",this.layers,Yr,this.zoom,I);this.patternFeatures.push($n)}else this.addFeature(Yr,tn,kn,Y,{});I.featureIndex.insert(M[kn].feature,tn,kn,On,this.index)}},xs.prototype.update=function(M,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(M,I,this.stateDependentLayers,Y)},xs.prototype.addFeatures=function(M,I,Y){for(var ae=0,pe=this.patternFeatures;ae<pe.length;ae+=1){var ye=pe[ae];this.addFeature(ye,ye.geometry,ye.index,I,Y)}},xs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},xs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},xs.prototype.upload=function(M){this.uploaded||(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,df),this.indexBuffer=M.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(M),this.uploaded=!0},xs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},xs.prototype.addFeature=function(M,I,Y,ae,pe){for(var ye=this.layers[0].layout,Ee=ye.get("line-join").evaluate(M,{}),je=ye.get("line-cap"),$e=ye.get("line-miter-limit"),pt=ye.get("line-round-limit"),bt=0,qt=I;bt<qt.length;bt+=1)this.addLine(qt[bt],M,Ee,je,$e,pt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,M,Y,pe,ae)},xs.prototype.addLine=function(M,I,Y,ae,pe,ye){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,I.properties&&I.properties.hasOwnProperty("mapbox_clip_start")&&I.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+I.properties.mapbox_clip_start,this.clipEnd=+I.properties.mapbox_clip_end;for(var Ee=0;Ee<M.length-1;Ee++)this.totalDistance+=M[Ee].dist(M[Ee+1]);this.updateScaledDistance()}for(var je="Polygon"===jh[I.type],$e=M.length;$e>=2&&M[$e-1].equals(M[$e-2]);)$e--;for(var pt=0;pt<$e-1&&M[pt].equals(M[pt+1]);)pt++;if(!($e<(je?3:2))){"bevel"===Y&&(pe=1.05);var bt,qt=this.overscaling<=16?122880/(512*this.overscaling):0,tr=this.segments.prepareSegment(10*$e,this.layoutVertexArray,this.indexArray),Kt=void 0,hr=void 0,Ar=void 0,jr=void 0;this.e1=this.e2=-1,je&&(jr=M[pt].sub(bt=M[$e-2])._unit()._perp());for(var Nr=pt;Nr<$e;Nr++)if(!(hr=Nr===$e-1?je?M[pt+1]:void 0:M[Nr+1])||!M[Nr].equals(hr)){jr&&(Ar=jr),bt&&(Kt=bt),bt=M[Nr],jr=hr?hr.sub(bt)._unit()._perp():Ar;var Yr=(Ar=Ar||jr).add(jr);0===Yr.x&&0===Yr.y||Yr._unit();var Wr=Ar.x*jr.x+Ar.y*jr.y,tn=Yr.x*jr.x+Yr.y*jr.y,kn=0!==tn?1/tn:1/0,On=2*Math.sqrt(2-2*tn),$n=tn<Vh&&Kt&&hr,Xn=Ar.x*jr.y-Ar.y*jr.x>0;if($n&&Nr>pt){var ii=bt.dist(Kt);if(ii>2*qt){var vi=bt.sub(bt.sub(Kt)._mult(qt/ii)._round());this.updateDistance(Kt,vi),this.addCurrentVertex(vi,Ar,0,0,tr),Kt=vi}}var yi=Kt&&hr,li=yi?Y:je?"butt":ae;if(yi&&"round"===li&&(kn<ye?li="miter":kn<=2&&(li="fakeround")),"miter"===li&&kn>pe&&(li="bevel"),"bevel"===li&&(kn>2&&(li="flipbevel"),kn<pe&&(li="miter")),Kt&&this.updateDistance(Kt,bt),"miter"===li)Yr._mult(kn),this.addCurrentVertex(bt,Yr,0,0,tr);else if("flipbevel"===li){if(kn>100)Yr=jr.mult(-1);else{var ki=kn*Ar.add(jr).mag()/Ar.sub(jr).mag();Yr._perp()._mult(ki*(Xn?-1:1))}this.addCurrentVertex(bt,Yr,0,0,tr),this.addCurrentVertex(bt,Yr.mult(-1),0,0,tr)}else if("bevel"===li||"fakeround"===li){var wi=-Math.sqrt(kn*kn-1),xi=Xn?wi:0,da=Xn?0:wi;if(Kt&&this.addCurrentVertex(bt,Ar,xi,da,tr),"fakeround"===li)for(var la=Math.round(180*On/Math.PI/20),ba=1;ba<la;ba++){var Pi=ba/la;if(.5!==Pi){var ua=Pi-.5;Pi+=Pi*ua*(Pi-1)*((1.0904+Wr*(Wr*(3.55645-1.43519*Wr)-3.2452))*ua*ua+(.848013+Wr*(.215638*Wr-1.06021)))}var Ba=jr.sub(Ar)._mult(Pi)._add(Ar)._unit()._mult(Xn?-1:1);this.addHalfVertex(bt,Ba.x,Ba.y,!1,Xn,0,tr)}hr&&this.addCurrentVertex(bt,jr,-xi,-da,tr)}else if("butt"===li)this.addCurrentVertex(bt,Yr,0,0,tr);else if("square"===li){var La=Kt?1:-1;this.addCurrentVertex(bt,Yr,La,La,tr)}else"round"===li&&(Kt&&(this.addCurrentVertex(bt,Ar,0,0,tr),this.addCurrentVertex(bt,Ar,1,1,tr,!0)),hr&&(this.addCurrentVertex(bt,jr,-1,-1,tr,!0),this.addCurrentVertex(bt,jr,0,0,tr)));if($n&&Nr<$e-1){var Ya=bt.dist(hr);if(Ya>2*qt){var Da=bt.add(hr.sub(bt)._mult(qt/Ya)._round());this.updateDistance(bt,Da),this.addCurrentVertex(Da,jr,0,0,tr),bt=Da}}}}},xs.prototype.addCurrentVertex=function(M,I,Y,ae,pe,ye){void 0===ye&&(ye=!1);var $e=I.y*ae-I.x,pt=-I.y-I.x*ae;this.addHalfVertex(M,I.x+I.y*Y,I.y-I.x*Y,ye,!1,Y,pe),this.addHalfVertex(M,$e,pt,ye,!0,-ae,pe),this.distance>pf/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(M,I,Y,ae,pe,ye))},xs.prototype.addHalfVertex=function(M,I,Y,ae,pe,ye,Ee){var pt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((M.x<<1)+(ae?1:0),(M.y<<1)+(pe?1:0),Math.round(63*I)+128,Math.round(63*Y)+128,1+(0===ye?0:ye<0?-1:1)|(63&pt)<<2,pt>>6);var bt=Ee.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,bt),Ee.primitiveLength++),pe?this.e2=bt:this.e1=bt},xs.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(pf-1):this.distance},xs.prototype.updateDistance=function(M,I){this.distance+=M.dist(I),this.updateScaledDistance()},rn("LineBucket",xs,{omit:["layers","patternFeatures"]});var Uh=new Oo({"line-cap":new bi(Ie.layout_line["line-cap"]),"line-join":new Li(Ie.layout_line["line-join"]),"line-miter-limit":new bi(Ie.layout_line["line-miter-limit"]),"line-round-limit":new bi(Ie.layout_line["line-round-limit"]),"line-sort-key":new Li(Ie.layout_line["line-sort-key"])}),gf={paint:new Oo({"line-opacity":new Li(Ie.paint_line["line-opacity"]),"line-color":new Li(Ie.paint_line["line-color"]),"line-translate":new bi(Ie.paint_line["line-translate"]),"line-translate-anchor":new bi(Ie.paint_line["line-translate-anchor"]),"line-width":new Li(Ie.paint_line["line-width"]),"line-gap-width":new Li(Ie.paint_line["line-gap-width"]),"line-offset":new Li(Ie.paint_line["line-offset"]),"line-blur":new Li(Ie.paint_line["line-blur"]),"line-dasharray":new Hs(Ie.paint_line["line-dasharray"]),"line-pattern":new Ds(Ie.paint_line["line-pattern"]),"line-gradient":new ms(Ie.paint_line["line-gradient"])}),layout:Uh},mf=new(function(M){function I(){M.apply(this,arguments)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.possiblyEvaluate=function(Y,ae){return ae=new ma(Math.floor(ae.zoom),{now:ae.now,fadeDuration:ae.fadeDuration,zoomHistory:ae.zoomHistory,transition:ae.transition}),M.prototype.possiblyEvaluate.call(this,Y,ae)},I.prototype.evaluate=function(Y,ae,pe,ye){return ae=h({},ae,{zoom:Math.floor(ae.zoom)}),M.prototype.evaluate.call(this,Y,ae,pe,ye)},I}(Li))(gf.paint.properties["line-width"].specification);mf.useIntegerZoom=!0;var Gh=function(M){function I(Y){M.call(this,Y,gf)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype._handleSpecialPaintPropertyUpdate=function(Y){"line-gradient"===Y&&this._updateGradient()},I.prototype._updateGradient=function(){this.gradient=Au(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},I.prototype.recalculate=function(Y,ae){M.prototype.recalculate.call(this,Y,ae),this.paint._values["line-floorwidth"]=mf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Y)},I.prototype.createBucket=function(Y){return new xs(Y)},I.prototype.queryRadius=function(Y){var ae=Y,pe=vf(za("line-width",this,ae),za("line-gap-width",this,ae)),ye=za("line-offset",this,ae);return pe/2+Math.abs(ye)+Po(this.paint.get("line-translate"))},I.prototype.queryIntersectsFeature=function(Y,ae,pe,ye,Ee,je,$e){var pt=Ro(Y,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),je.angle,$e),bt=$e/2*vf(this.paint.get("line-width").evaluate(ae,pe),this.paint.get("line-gap-width").evaluate(ae,pe)),qt=this.paint.get("line-offset").evaluate(ae,pe);return qt&&(ye=function(tr,Kt){for(var hr=[],Ar=new r(0,0),jr=0;jr<tr.length;jr++){for(var Nr=tr[jr],Yr=[],Wr=0;Wr<Nr.length;Wr++){var kn=Nr[Wr],On=Nr[Wr+1],$n=0===Wr?Ar:kn.sub(Nr[Wr-1])._unit()._perp(),Xn=Wr===Nr.length-1?Ar:On.sub(kn)._unit()._perp(),ii=$n._add(Xn)._unit();ii._mult(1/(ii.x*Xn.x+ii.y*Xn.y)),Yr.push(ii._mult(Kt)._add(kn))}hr.push(Yr)}return hr}(ye,qt*$e)),function(tr,Kt,hr){for(var Ar=0;Ar<Kt.length;Ar++){var jr=Kt[Ar];if(tr.length>=3)for(var Nr=0;Nr<jr.length;Nr++)if(us(tr,jr[Nr]))return!0;if(dl(tr,jr,hr))return!0}return!1}(pt,ye,bt)},I.prototype.isTileClipped=function(){return!0},I}(Zo);function vf(M,I){return I>0?I+2*M:M}var Pu=ha([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Hh=ha([{name:"a_projected_pos",components:3,type:"Float32"}],4),qh=(ha([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ha([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),yf=(ha([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ha([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Yh=ha([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Wh(M,I,Y){return M.sections.forEach(function(ae){var pe,Ee,je;ae.text=(pe=ae.text,Ee=Y,"uppercase"===(je=I.layout.get("text-transform").evaluate(Ee,{}))?pe=pe.toLocaleUpperCase():"lowercase"===je&&(pe=pe.toLocaleLowerCase()),mo.applyArabicShaping&&(pe=mo.applyArabicShaping(pe)),pe)}),M}ha([{name:"triangle",components:3,type:"Uint16"}]),ha([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ha([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ha([{type:"Float32",name:"offsetX"}]),ha([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var bc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},xf=function(M,I,Y,ae,pe){var ye,Ee,je=8*pe-ae-1,$e=(1<<je)-1,pt=$e>>1,bt=-7,qt=Y?pe-1:0,tr=Y?-1:1,Kt=M[I+qt];for(qt+=tr,ye=Kt&(1<<-bt)-1,Kt>>=-bt,bt+=je;bt>0;ye=256*ye+M[I+qt],qt+=tr,bt-=8);for(Ee=ye&(1<<-bt)-1,ye>>=-bt,bt+=ae;bt>0;Ee=256*Ee+M[I+qt],qt+=tr,bt-=8);if(0===ye)ye=1-pt;else{if(ye===$e)return Ee?NaN:1/0*(Kt?-1:1);Ee+=Math.pow(2,ae),ye-=pt}return(Kt?-1:1)*Ee*Math.pow(2,ye-ae)},bf=function(M,I,Y,ae,pe,ye){var Ee,je,$e,pt=8*ye-pe-1,bt=(1<<pt)-1,qt=bt>>1,tr=23===pe?Math.pow(2,-24)-Math.pow(2,-77):0,Kt=ae?0:ye-1,hr=ae?1:-1,Ar=I<0||0===I&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(je=isNaN(I)?1:0,Ee=bt):(Ee=Math.floor(Math.log(I)/Math.LN2),I*($e=Math.pow(2,-Ee))<1&&(Ee--,$e*=2),(I+=Ee+qt>=1?tr/$e:tr*Math.pow(2,1-qt))*$e>=2&&(Ee++,$e/=2),Ee+qt>=bt?(je=0,Ee=bt):Ee+qt>=1?(je=(I*$e-1)*Math.pow(2,pe),Ee+=qt):(je=I*Math.pow(2,qt-1)*Math.pow(2,pe),Ee=0));pe>=8;M[Y+Kt]=255&je,Kt+=hr,je/=256,pe-=8);for(Ee=Ee<<pe|je,pt+=pe;pt>0;M[Y+Kt]=255&Ee,Kt+=hr,Ee/=256,pt-=8);M[Y+Kt-hr]|=128*Ar},Gc=Fa;function Fa(M){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(M)?M:new Uint8Array(M||0),this.pos=0,this.type=0,this.length=this.buf.length}Fa.Varint=0,Fa.Fixed64=1,Fa.Bytes=2,Fa.Fixed32=5;var _f="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function bl(M){return M.type===Fa.Bytes?M.readVarint()+M.pos:M.pos+1}function wf(M,I,Y){var ae=I<=16383?1:I<=2097151?2:I<=268435455?3:Math.floor(Math.log(I)/(7*Math.LN2));Y.realloc(ae);for(var pe=Y.pos-1;pe>=M;pe--)Y.buf[pe+ae]=Y.buf[pe]}function Zh(M,I){for(var Y=0;Y<M.length;Y++)I.writeVarint(M[Y])}function Xh(M,I){for(var Y=0;Y<M.length;Y++)I.writeSVarint(M[Y])}function Jh(M,I){for(var Y=0;Y<M.length;Y++)I.writeFloat(M[Y])}function Kh(M,I){for(var Y=0;Y<M.length;Y++)I.writeDouble(M[Y])}function $h(M,I){for(var Y=0;Y<M.length;Y++)I.writeBoolean(M[Y])}function Qh(M,I){for(var Y=0;Y<M.length;Y++)I.writeFixed32(M[Y])}function ed(M,I){for(var Y=0;Y<M.length;Y++)I.writeSFixed32(M[Y])}function td(M,I){for(var Y=0;Y<M.length;Y++)I.writeFixed64(M[Y])}function rd(M,I){for(var Y=0;Y<M.length;Y++)I.writeSFixed64(M[Y])}function Hc(M,I){return(M[I]|M[I+1]<<8|M[I+2]<<16)+16777216*M[I+3]}function Hl(M,I,Y){M[Y]=I,M[Y+1]=I>>>8,M[Y+2]=I>>>16,M[Y+3]=I>>>24}function Af(M,I){return(M[I]|M[I+1]<<8|M[I+2]<<16)+(M[I+3]<<24)}function nd(M,I,Y){1===M&&Y.readMessage(id,I)}function id(M,I,Y){if(3===M){var ae=Y.readMessage(ad,{}),Ee=ae.width,je=ae.height,$e=ae.left,pt=ae.top,bt=ae.advance;I.push({id:ae.id,bitmap:new Sl({width:Ee+6,height:je+6},ae.bitmap),metrics:{width:Ee,height:je,left:$e,top:pt,advance:bt}})}}function ad(M,I,Y){1===M?I.id=Y.readVarint():2===M?I.bitmap=Y.readBytes():3===M?I.width=Y.readVarint():4===M?I.height=Y.readVarint():5===M?I.left=Y.readSVarint():6===M?I.top=Y.readSVarint():7===M&&(I.advance=Y.readVarint())}function Tf(M){for(var I=0,Y=0,ae=0,pe=M;ae<pe.length;ae+=1){var ye=pe[ae];I+=ye.w*ye.h,Y=Math.max(Y,ye.w)}M.sort(function(Ar,jr){return jr.h-Ar.h});for(var Ee=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(I/.95)),Y),h:1/0}],je=0,$e=0,pt=0,bt=M;pt<bt.length;pt+=1)for(var qt=bt[pt],tr=Ee.length-1;tr>=0;tr--){var Kt=Ee[tr];if(!(qt.w>Kt.w||qt.h>Kt.h)){if(qt.x=Kt.x,qt.y=Kt.y,$e=Math.max($e,qt.y+qt.h),je=Math.max(je,qt.x+qt.w),qt.w===Kt.w&&qt.h===Kt.h){var hr=Ee.pop();tr<Ee.length&&(Ee[tr]=hr)}else qt.h===Kt.h?(Kt.x+=qt.w,Kt.w-=qt.w):qt.w===Kt.w?(Kt.y+=qt.h,Kt.h-=qt.h):(Ee.push({x:Kt.x+qt.w,y:Kt.y,w:Kt.w-qt.w,h:qt.h}),Kt.y+=qt.h,Kt.h-=qt.h);break}}return{w:je,h:$e,fill:I/(je*$e)||0}}Fa.prototype={destroy:function(){this.buf=null},readFields:function(M,I,Y){for(Y=Y||this.length;this.pos<Y;){var ae=this.readVarint(),pe=ae>>3,ye=this.pos;this.type=7&ae,M(pe,I,this),this.pos===ye&&this.skip(ae)}return I},readMessage:function(M,I){return this.readFields(M,I,this.readVarint()+this.pos)},readFixed32:function(){var M=Hc(this.buf,this.pos);return this.pos+=4,M},readSFixed32:function(){var M=Af(this.buf,this.pos);return this.pos+=4,M},readFixed64:function(){var M=Hc(this.buf,this.pos)+4294967296*Hc(this.buf,this.pos+4);return this.pos+=8,M},readSFixed64:function(){var M=Hc(this.buf,this.pos)+4294967296*Af(this.buf,this.pos+4);return this.pos+=8,M},readFloat:function(){var M=xf(this.buf,this.pos,!0,23,4);return this.pos+=4,M},readDouble:function(){var M=xf(this.buf,this.pos,!0,52,8);return this.pos+=8,M},readVarint:function(M){var I,Y,ae=this.buf;return I=127&(Y=ae[this.pos++]),Y<128?I:(I|=(127&(Y=ae[this.pos++]))<<7,Y<128?I:(I|=(127&(Y=ae[this.pos++]))<<14,Y<128?I:(I|=(127&(Y=ae[this.pos++]))<<21,Y<128?I:function(pe,ye,Ee){var je,$e,pt=Ee.buf;if(je=(112&($e=pt[Ee.pos++]))>>4,$e<128||(je|=(127&($e=pt[Ee.pos++]))<<3,$e<128)||(je|=(127&($e=pt[Ee.pos++]))<<10,$e<128)||(je|=(127&($e=pt[Ee.pos++]))<<17,$e<128)||(je|=(127&($e=pt[Ee.pos++]))<<24,$e<128)||(je|=(1&($e=pt[Ee.pos++]))<<31,$e<128))return function(M,I,Y){return Y?4294967296*I+(M>>>0):4294967296*(I>>>0)+(M>>>0)}(pe,je,ye);throw new Error("Expected varint not more than 10 bytes")}(I|=(15&(Y=ae[this.pos]))<<28,M,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var M=this.readVarint();return M%2==1?(M+1)/-2:M/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var M=this.readVarint()+this.pos,I=this.pos;return this.pos=M,M-I>=12&&_f?_f.decode(this.buf.subarray(I,M)):function(Y,ae,pe){for(var ye="",Ee=ae;Ee<pe;){var je,$e,pt,bt=Y[Ee],qt=null,tr=bt>239?4:bt>223?3:bt>191?2:1;if(Ee+tr>pe)break;1===tr?bt<128&&(qt=bt):2===tr?128==(192&(je=Y[Ee+1]))&&(qt=(31&bt)<<6|63&je)<=127&&(qt=null):3===tr?($e=Y[Ee+2],128==(192&(je=Y[Ee+1]))&&128==(192&$e)&&((qt=(15&bt)<<12|(63&je)<<6|63&$e)<=2047||qt>=55296&&qt<=57343)&&(qt=null)):4===tr&&($e=Y[Ee+2],pt=Y[Ee+3],128==(192&(je=Y[Ee+1]))&&128==(192&$e)&&128==(192&pt)&&((qt=(15&bt)<<18|(63&je)<<12|(63&$e)<<6|63&pt)<=65535||qt>=1114112)&&(qt=null)),null===qt?(qt=65533,tr=1):qt>65535&&(qt-=65536,ye+=String.fromCharCode(qt>>>10&1023|55296),qt=56320|1023&qt),ye+=String.fromCharCode(qt),Ee+=tr}return ye}(this.buf,I,M)},readBytes:function(){var M=this.readVarint()+this.pos,I=this.buf.subarray(this.pos,M);return this.pos=M,I},readPackedVarint:function(M,I){if(this.type!==Fa.Bytes)return M.push(this.readVarint(I));var Y=bl(this);for(M=M||[];this.pos<Y;)M.push(this.readVarint(I));return M},readPackedSVarint:function(M){if(this.type!==Fa.Bytes)return M.push(this.readSVarint());var I=bl(this);for(M=M||[];this.pos<I;)M.push(this.readSVarint());return M},readPackedBoolean:function(M){if(this.type!==Fa.Bytes)return M.push(this.readBoolean());var I=bl(this);for(M=M||[];this.pos<I;)M.push(this.readBoolean());return M},readPackedFloat:function(M){if(this.type!==Fa.Bytes)return M.push(this.readFloat());var I=bl(this);for(M=M||[];this.pos<I;)M.push(this.readFloat());return M},readPackedDouble:function(M){if(this.type!==Fa.Bytes)return M.push(this.readDouble());var I=bl(this);for(M=M||[];this.pos<I;)M.push(this.readDouble());return M},readPackedFixed32:function(M){if(this.type!==Fa.Bytes)return M.push(this.readFixed32());var I=bl(this);for(M=M||[];this.pos<I;)M.push(this.readFixed32());return M},readPackedSFixed32:function(M){if(this.type!==Fa.Bytes)return M.push(this.readSFixed32());var I=bl(this);for(M=M||[];this.pos<I;)M.push(this.readSFixed32());return M},readPackedFixed64:function(M){if(this.type!==Fa.Bytes)return M.push(this.readFixed64());var I=bl(this);for(M=M||[];this.pos<I;)M.push(this.readFixed64());return M},readPackedSFixed64:function(M){if(this.type!==Fa.Bytes)return M.push(this.readSFixed64());var I=bl(this);for(M=M||[];this.pos<I;)M.push(this.readSFixed64());return M},skip:function(M){var I=7&M;if(I===Fa.Varint)for(;this.buf[this.pos++]>127;);else if(I===Fa.Bytes)this.pos=this.readVarint()+this.pos;else if(I===Fa.Fixed32)this.pos+=4;else{if(I!==Fa.Fixed64)throw new Error("Unimplemented type: "+I);this.pos+=8}},writeTag:function(M,I){this.writeVarint(M<<3|I)},realloc:function(M){for(var I=this.length||16;I<this.pos+M;)I*=2;if(I!==this.length){var Y=new Uint8Array(I);Y.set(this.buf),this.buf=Y,this.length=I}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(M){this.realloc(4),Hl(this.buf,M,this.pos),this.pos+=4},writeSFixed32:function(M){this.realloc(4),Hl(this.buf,M,this.pos),this.pos+=4},writeFixed64:function(M){this.realloc(8),Hl(this.buf,-1&M,this.pos),Hl(this.buf,Math.floor(M*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(M){this.realloc(8),Hl(this.buf,-1&M,this.pos),Hl(this.buf,Math.floor(M*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(M){(M=+M||0)>268435455||M<0?function(I,Y){var ae,pe,ye,je;if(I>=0?(ae=I%4294967296|0,pe=I/4294967296|0):(pe=~(-I/4294967296),4294967295^(ae=~(-I%4294967296))?ae=ae+1|0:(ae=0,pe=pe+1|0)),I>=0x10000000000000000||I<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");Y.realloc(10),ye=ae,(je=Y).buf[je.pos++]=127&ye|128,ye>>>=7,je.buf[je.pos++]=127&ye|128,ye>>>=7,je.buf[je.pos++]=127&ye|128,ye>>>=7,je.buf[je.pos++]=127&ye|128,je.buf[je.pos]=127&(ye>>>=7),function(ye,Ee){var je=(7&ye)<<4;Ee.buf[Ee.pos++]|=je|((ye>>>=3)?128:0),ye&&(Ee.buf[Ee.pos++]=127&ye|((ye>>>=7)?128:0),ye&&(Ee.buf[Ee.pos++]=127&ye|((ye>>>=7)?128:0),ye&&(Ee.buf[Ee.pos++]=127&ye|((ye>>>=7)?128:0),ye&&(Ee.buf[Ee.pos++]=127&ye|((ye>>>=7)?128:0),ye&&(Ee.buf[Ee.pos++]=127&ye)))))}(pe,Y)}(M,this):(this.realloc(4),this.buf[this.pos++]=127&M|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=127&(M>>>=7)|(M>127?128:0),M<=127||(this.buf[this.pos++]=M>>>7&127))))},writeSVarint:function(M){this.writeVarint(M<0?2*-M-1:2*M)},writeBoolean:function(M){this.writeVarint(Boolean(M))},writeString:function(M){M=String(M),this.realloc(4*M.length),this.pos++;var I=this.pos;this.pos=function(ae,pe,ye){for(var Ee,je,$e=0;$e<pe.length;$e++){if((Ee=pe.charCodeAt($e))>55295&&Ee<57344){if(!je){Ee>56319||$e+1===pe.length?(ae[ye++]=239,ae[ye++]=191,ae[ye++]=189):je=Ee;continue}if(Ee<56320){ae[ye++]=239,ae[ye++]=191,ae[ye++]=189,je=Ee;continue}Ee=je-55296<<10|Ee-56320|65536,je=null}else je&&(ae[ye++]=239,ae[ye++]=191,ae[ye++]=189,je=null);Ee<128?ae[ye++]=Ee:(Ee<2048?ae[ye++]=Ee>>6|192:(Ee<65536?ae[ye++]=Ee>>12|224:(ae[ye++]=Ee>>18|240,ae[ye++]=Ee>>12&63|128),ae[ye++]=Ee>>6&63|128),ae[ye++]=63&Ee|128)}return ye}(this.buf,M,this.pos);var Y=this.pos-I;Y>=128&&wf(I,Y,this),this.pos=I-1,this.writeVarint(Y),this.pos+=Y},writeFloat:function(M){this.realloc(4),bf(this.buf,M,this.pos,!0,23,4),this.pos+=4},writeDouble:function(M){this.realloc(8),bf(this.buf,M,this.pos,!0,52,8),this.pos+=8},writeBytes:function(M){var I=M.length;this.writeVarint(I),this.realloc(I);for(var Y=0;Y<I;Y++)this.buf[this.pos++]=M[Y]},writeRawMessage:function(M,I){this.pos++;var Y=this.pos;M(I,this);var ae=this.pos-Y;ae>=128&&wf(Y,ae,this),this.pos=Y-1,this.writeVarint(ae),this.pos+=ae},writeMessage:function(M,I,Y){this.writeTag(M,Fa.Bytes),this.writeRawMessage(I,Y)},writePackedVarint:function(M,I){I.length&&this.writeMessage(M,Zh,I)},writePackedSVarint:function(M,I){I.length&&this.writeMessage(M,Xh,I)},writePackedBoolean:function(M,I){I.length&&this.writeMessage(M,$h,I)},writePackedFloat:function(M,I){I.length&&this.writeMessage(M,Jh,I)},writePackedDouble:function(M,I){I.length&&this.writeMessage(M,Kh,I)},writePackedFixed32:function(M,I){I.length&&this.writeMessage(M,Qh,I)},writePackedSFixed32:function(M,I){I.length&&this.writeMessage(M,ed,I)},writePackedFixed64:function(M,I){I.length&&this.writeMessage(M,td,I)},writePackedSFixed64:function(M,I){I.length&&this.writeMessage(M,rd,I)},writeBytesField:function(M,I){this.writeTag(M,Fa.Bytes),this.writeBytes(I)},writeFixed32Field:function(M,I){this.writeTag(M,Fa.Fixed32),this.writeFixed32(I)},writeSFixed32Field:function(M,I){this.writeTag(M,Fa.Fixed32),this.writeSFixed32(I)},writeFixed64Field:function(M,I){this.writeTag(M,Fa.Fixed64),this.writeFixed64(I)},writeSFixed64Field:function(M,I){this.writeTag(M,Fa.Fixed64),this.writeSFixed64(I)},writeVarintField:function(M,I){this.writeTag(M,Fa.Varint),this.writeVarint(I)},writeSVarintField:function(M,I){this.writeTag(M,Fa.Varint),this.writeSVarint(I)},writeStringField:function(M,I){this.writeTag(M,Fa.Bytes),this.writeString(I)},writeFloatField:function(M,I){this.writeTag(M,Fa.Fixed32),this.writeFloat(I)},writeDoubleField:function(M,I){this.writeTag(M,Fa.Fixed64),this.writeDouble(I)},writeBooleanField:function(M,I){this.writeVarintField(M,Boolean(I))}};var qc=function(M,I){var Y=I.pixelRatio,ae=I.version,pe=I.stretchX,ye=I.stretchY,Ee=I.content;this.paddedRect=M,this.pixelRatio=Y,this.stretchX=pe,this.stretchY=ye,this.content=Ee,this.version=ae},_c={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};_c.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},_c.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},_c.tlbr.get=function(){return this.tl.concat(this.br)},_c.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(qc.prototype,_c);var wc=function(M,I){var Y={},ae={};this.haveRenderCallbacks=[];var pe=[];this.addImages(M,Y,pe),this.addImages(I,ae,pe);var ye=Tf(pe),$e=new fs({width:ye.w||1,height:ye.h||1});for(var pt in M){var bt=M[pt],qt=Y[pt].paddedRect;fs.copy(bt.data,$e,{x:0,y:0},{x:qt.x+1,y:qt.y+1},bt.data)}for(var tr in I){var Kt=I[tr],hr=ae[tr].paddedRect,Ar=hr.x+1,jr=hr.y+1,Nr=Kt.data.width,Yr=Kt.data.height;fs.copy(Kt.data,$e,{x:0,y:0},{x:Ar,y:jr},Kt.data),fs.copy(Kt.data,$e,{x:0,y:Yr-1},{x:Ar,y:jr-1},{width:Nr,height:1}),fs.copy(Kt.data,$e,{x:0,y:0},{x:Ar,y:jr+Yr},{width:Nr,height:1}),fs.copy(Kt.data,$e,{x:Nr-1,y:0},{x:Ar-1,y:jr},{width:1,height:Yr}),fs.copy(Kt.data,$e,{x:0,y:0},{x:Ar+Nr,y:jr},{width:1,height:Yr})}this.image=$e,this.iconPositions=Y,this.patternPositions=ae};wc.prototype.addImages=function(M,I,Y){for(var ae in M){var pe=M[ae],ye={x:0,y:0,w:pe.data.width+2,h:pe.data.height+2};Y.push(ye),I[ae]=new qc(ye,pe),pe.hasRenderCallback&&this.haveRenderCallbacks.push(ae)}},wc.prototype.patchUpdatedImages=function(M,I){for(var Y in M.dispatchRenderCallbacks(this.haveRenderCallbacks),M.updatedImages)this.patchUpdatedImage(this.iconPositions[Y],M.getImage(Y),I),this.patchUpdatedImage(this.patternPositions[Y],M.getImage(Y),I)},wc.prototype.patchUpdatedImage=function(M,I,Y){if(M&&I&&M.version!==I.version){M.version=I.version;var ae=M.tl;Y.update(I.data,void 0,{x:ae[0],y:ae[1]})}},rn("ImagePosition",qc),rn("ImageAtlas",wc);var zs={horizontal:1,vertical:2,horizontalOnly:3},ql=function(){this.scale=1,this.fontStack="",this.imageName=null};ql.forText=function(M,I){var Y=new ql;return Y.scale=M||1,Y.fontStack=I,Y},ql.forImage=function(M){var I=new ql;return I.imageName=M,I};var rs=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Yc(M,I,Y,ae,pe,ye,Ee,je,$e,pt,bt,qt,tr,Kt,hr,Ar){var jr,Nr=rs.fromFeature(M,pe);qt===zs.vertical&&Nr.verticalizePunctuation();var Yr=mo.processBidirectionalText,Wr=mo.processStyledBidirectionalText;if(Yr&&1===Nr.sections.length){jr=[];for(var tn=0,kn=Yr(Nr.toString(),Ru(Nr,pt,ye,I,ae,Kt,hr));tn<kn.length;tn+=1){var On=kn[tn],$n=new rs;$n.text=On,$n.sections=Nr.sections;for(var Xn=0;Xn<On.length;Xn++)$n.sectionIndex.push(0);jr.push($n)}}else if(Wr){jr=[];for(var ii=0,vi=Wr(Nr.text,Nr.sectionIndex,Ru(Nr,pt,ye,I,ae,Kt,hr));ii<vi.length;ii+=1){var yi=vi[ii],li=new rs;li.text=yi[0],li.sectionIndex=yi[1],li.sections=Nr.sections,jr.push(li)}}else jr=function(xi,da){for(var la=[],ba=xi.text,Pi=0,ua=0,Ba=da;ua<Ba.length;ua+=1){var La=Ba[ua];la.push(xi.substring(Pi,La)),Pi=La}return Pi<ba.length&&la.push(xi.substring(Pi,ba.length)),la}(Nr,Ru(Nr,pt,ye,I,ae,Kt,hr));var ki=[],wi={positionedLines:ki,text:Nr.toString(),top:bt[1],bottom:bt[1],left:bt[0],right:bt[0],writingMode:qt,iconsInText:!1,verticalizable:!1};return function(xi,da,la,ba,Pi,ua,Ba,La,Ya,Da,To,Wa){for(var Jo=0,Fo=-17,Uo=0,hs=0,ns="right"===La?1:"left"===La?0:.5,Mo=0,Go=0,vo=Pi;Go<vo.length;Go+=1){var Lo=vo[Go];Lo.trim();var Xi=Lo.getMaxScale(),va=24*(Xi-1),io={positionedGlyphs:[],lineOffset:0};xi.positionedLines[Mo]=io;var ao=io.positionedGlyphs,no=0;if(Lo.length()){for(var Za=0;Za<Lo.length();Za++){var _a=Lo.getSection(Za),oo=Lo.getSectionIndex(Za),ds=Lo.getCharCode(Za),Cs=0,is=null,Qs=null,Al=null,Bo=24,el=!(Ya===zs.horizontal||!To&&!Mi(ds)||To&&(Wc[ds]||(El=ds,jn.Arabic(El)||jn["Arabic Supplement"](El)||jn["Arabic Extended-A"](El)||jn["Arabic Presentation Forms-A"](El)||jn["Arabic Presentation Forms-B"](El))));if(_a.imageName){var tl=ba[_a.imageName];if(!tl)continue;Al=_a.imageName,xi.iconsInText=xi.iconsInText||!0,Qs=tl.paddedRect;var rl=tl.displaySize;_a.scale=24*_a.scale/Wa,Cs=va+(24-rl[1]*_a.scale),Bo=(is={width:rl[0],height:rl[1],left:1,top:-3,advance:el?rl[1]:rl[0]}).advance;var Ql=el?rl[0]*_a.scale-24*Xi:rl[1]*_a.scale-24*Xi;Ql>0&&Ql>no&&(no=Ql)}else{var ru=la[_a.fontStack],Fl=ru&&ru[ds];if(Fl&&Fl.rect)Qs=Fl.rect,is=Fl.metrics;else{var nu=da[_a.fontStack],iu=nu&&nu[ds];if(!iu)continue;is=iu.metrics}Cs=24*(Xi-_a.scale)}el?(xi.verticalizable=!0,ao.push({glyph:ds,imageName:Al,x:Jo,y:Fo+Cs,vertical:el,scale:_a.scale,fontStack:_a.fontStack,sectionIndex:oo,metrics:is,rect:Qs}),Jo+=Bo*_a.scale+Da):(ao.push({glyph:ds,imageName:Al,x:Jo,y:Fo+Cs,vertical:el,scale:_a.scale,fontStack:_a.fontStack,sectionIndex:oo,metrics:is,rect:Qs}),Jo+=is.advance*_a.scale+Da)}0!==ao.length&&(Uo=Math.max(Jo-Da,Uo),sd(ao,0,ao.length-1,ns,no)),Jo=0;var ou=ua*Xi+no;io.lineOffset=Math.max(no,va),Fo+=ou,hs=Math.max(ou,hs),++Mo}else Fo+=ua,++Mo}var El,ec=Fo- -17,su=zu(Ba),tc=su.horizontalAlign,Ll=su.verticalAlign;(function(Mc,lu,cu,uu,kc,fu,Sc,hu,Cc){var rc,du=(lu-cu)*kc;rc=fu!==Sc?-hu*uu- -17:(-uu*Cc+.5)*Sc;for(var nc=0,ic=Mc;nc<ic.length;nc+=1)for(var ac=0,Ec=ic[nc].positionedGlyphs;ac<Ec.length;ac+=1){var oc=Ec[ac];oc.x+=du,oc.y+=rc}})(xi.positionedLines,ns,tc,Ll,Uo,hs,ua,ec,Pi.length),xi.top+=-Ll*ec,xi.bottom=xi.top+ec,xi.left+=-tc*Uo,xi.right=xi.left+Uo}(wi,I,Y,ae,jr,Ee,je,$e,qt,pt,tr,Ar),!function(xi){for(var da=0,la=xi;da<la.length;da+=1)if(0!==la[da].positionedGlyphs.length)return!1;return!0}(ki)&&wi}rs.fromFeature=function(M,I){for(var Y=new rs,ae=0;ae<M.sections.length;ae++){var pe=M.sections[ae];pe.image?Y.addImageSection(pe):Y.addTextSection(pe,I)}return Y},rs.prototype.length=function(){return this.text.length},rs.prototype.getSection=function(M){return this.sections[this.sectionIndex[M]]},rs.prototype.getSectionIndex=function(M){return this.sectionIndex[M]},rs.prototype.getCharCode=function(M){return this.text.charCodeAt(M)},rs.prototype.verticalizePunctuation=function(){this.text=function(M){for(var I="",Y=0;Y<M.length;Y++){var ae=M.charCodeAt(Y+1)||null,pe=M.charCodeAt(Y-1)||null;ae&&Wi(ae)&&!bc[M[Y+1]]||pe&&Wi(pe)&&!bc[M[Y-1]]||!bc[M[Y]]?I+=M[Y]:I+=bc[M[Y]]}return I}(this.text)},rs.prototype.trim=function(){for(var M=0,I=0;I<this.text.length&&Wc[this.text.charCodeAt(I)];I++)M++;for(var Y=this.text.length,ae=this.text.length-1;ae>=0&&ae>=M&&Wc[this.text.charCodeAt(ae)];ae--)Y--;this.text=this.text.substring(M,Y),this.sectionIndex=this.sectionIndex.slice(M,Y)},rs.prototype.substring=function(M,I){var Y=new rs;return Y.text=this.text.substring(M,I),Y.sectionIndex=this.sectionIndex.slice(M,I),Y.sections=this.sections,Y},rs.prototype.toString=function(){return this.text},rs.prototype.getMaxScale=function(){var M=this;return this.sectionIndex.reduce(function(I,Y){return Math.max(I,M.sections[Y].scale)},0)},rs.prototype.addTextSection=function(M,I){this.text+=M.text,this.sections.push(ql.forText(M.scale,M.fontStack||I));for(var Y=this.sections.length-1,ae=0;ae<M.text.length;++ae)this.sectionIndex.push(Y)},rs.prototype.addImageSection=function(M){var I=M.image?M.image.name:"";if(0!==I.length){var Y=this.getNextImageSectionCharCode();Y?(this.text+=String.fromCharCode(Y),this.sections.push(ql.forImage(I)),this.sectionIndex.push(this.sections.length-1)):k("Reached maximum number of images 6401")}else k("Can't add FormattedSection with an empty image.")},rs.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Wc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ss={};function Mf(M,I,Y,ae,pe,ye){if(I.imageName){var Ee=ae[I.imageName];return Ee?Ee.displaySize[0]*I.scale*24/ye+pe:0}var je=Y[I.fontStack],$e=je&&je[M];return $e?$e.metrics.advance*I.scale+pe:0}function kf(M,I,Y,ae){var pe=Math.pow(M-I,2);return ae?M<I?pe/2:2*pe:pe+Math.abs(Y)*Y}function od(M,I,Y){var ae=0;return 10===M&&(ae-=1e4),Y&&(ae+=150),40!==M&&65288!==M||(ae+=50),41!==I&&65289!==I||(ae+=50),ae}function Sf(M,I,Y,ae,pe,ye){for(var Ee=null,je=kf(I,Y,pe,ye),$e=0,pt=ae;$e<pt.length;$e+=1){var bt=pt[$e],qt=kf(I-bt.x,Y,pe,ye)+bt.badness;qt<=je&&(Ee=bt,je=qt)}return{index:M,x:I,priorBreak:Ee,badness:je}}function Ru(M,I,Y,ae,pe,ye,Ee){if("point"!==ye)return[];if(!M)return[];for(var je,$e=[],pt=function(jr,Nr,Yr,Wr,tn,kn){for(var On=0,$n=0;$n<jr.length();$n++){var Xn=jr.getSection($n);On+=Mf(jr.getCharCode($n),Xn,Wr,tn,Nr,kn)}return On/Math.max(1,Math.ceil(On/Yr))}(M,I,Y,ae,pe,Ee),bt=M.text.indexOf("\u200b")>=0,qt=0,tr=0;tr<M.length();tr++){var Kt=M.getSection(tr),hr=M.getCharCode(tr);if(Wc[hr]||(qt+=Mf(hr,Kt,ae,pe,I,Ee)),tr<M.length()-1){var Ar=!((je=hr)<11904||!(jn["Bopomofo Extended"](je)||jn.Bopomofo(je)||jn["CJK Compatibility Forms"](je)||jn["CJK Compatibility Ideographs"](je)||jn["CJK Compatibility"](je)||jn["CJK Radicals Supplement"](je)||jn["CJK Strokes"](je)||jn["CJK Symbols and Punctuation"](je)||jn["CJK Unified Ideographs Extension A"](je)||jn["CJK Unified Ideographs"](je)||jn["Enclosed CJK Letters and Months"](je)||jn["Halfwidth and Fullwidth Forms"](je)||jn.Hiragana(je)||jn["Ideographic Description Characters"](je)||jn["Kangxi Radicals"](je)||jn["Katakana Phonetic Extensions"](je)||jn.Katakana(je)||jn["Vertical Forms"](je)||jn["Yi Radicals"](je)||jn["Yi Syllables"](je)));(Ss[hr]||Ar||Kt.imageName)&&$e.push(Sf(tr+1,qt,pt,$e,od(hr,M.getCharCode(tr+1),Ar&&bt),!1))}}return function jr(Nr){return Nr?jr(Nr.priorBreak).concat(Nr.index):[]}(Sf(M.length(),qt,pt,$e,0,!0))}function zu(M){var I=.5,Y=.5;switch(M){case"right":case"top-right":case"bottom-right":I=1;break;case"left":case"top-left":case"bottom-left":I=0}switch(M){case"bottom":case"bottom-right":case"bottom-left":Y=1;break;case"top":case"top-right":case"top-left":Y=0}return{horizontalAlign:I,verticalAlign:Y}}function sd(M,I,Y,ae,pe){if(ae||pe)for(var ye=M[Y],je=(M[Y].x+ye.metrics.advance*ye.scale)*ae,$e=I;$e<=Y;$e++)M[$e].x-=je,M[$e].y+=pe}function Cf(M,I,Y,ae,pe,ye){var Ee,je=M.image;if(je.content){var $e=je.content,pt=je.pixelRatio||1;Ee=[$e[0]/pt,$e[1]/pt,je.displaySize[0]-$e[2]/pt,je.displaySize[1]-$e[3]/pt]}var bt,qt,tr,Kt,hr=I.left*ye,Ar=I.right*ye;"width"===Y||"both"===Y?(Kt=pe[0]+hr-ae[3],qt=pe[0]+Ar+ae[1]):qt=(Kt=pe[0]+(hr+Ar-je.displaySize[0])/2)+je.displaySize[0];var jr=I.top*ye,Nr=I.bottom*ye;return"height"===Y||"both"===Y?(bt=pe[1]+jr-ae[0],tr=pe[1]+Nr+ae[2]):tr=(bt=pe[1]+(jr+Nr-je.displaySize[1])/2)+je.displaySize[1],{image:je,top:bt,right:qt,bottom:tr,left:Kt,collisionPadding:Ee}}Ss[10]=!0,Ss[32]=!0,Ss[38]=!0,Ss[40]=!0,Ss[41]=!0,Ss[43]=!0,Ss[45]=!0,Ss[47]=!0,Ss[173]=!0,Ss[183]=!0,Ss[8203]=!0,Ss[8208]=!0,Ss[8211]=!0,Ss[8231]=!0;var Yl=function(M){function I(Y,ae,pe,ye){M.call(this,Y,ae),this.angle=pe,void 0!==ye&&(this.segment=ye)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.clone=function(){return new I(this.x,this.y,this.angle,this.segment)},I}(r);function Fu(M,I){var Y=I.expression;if("constant"===Y.kind)return{kind:"constant",layoutSize:Y.evaluate(new ma(M+1))};if("source"===Y.kind)return{kind:"source"};for(var ae=Y.zoomStops,pe=Y.interpolationType,ye=0;ye<ae.length&&ae[ye]<=M;)ye++;for(var Ee=ye=Math.max(0,ye-1);Ee<ae.length&&ae[Ee]<M+1;)Ee++;Ee=Math.min(ae.length-1,Ee);var je=ae[ye],$e=ae[Ee];return"composite"===Y.kind?{kind:"composite",minZoom:je,maxZoom:$e,interpolationType:pe}:{kind:"camera",minZoom:je,maxZoom:$e,minSize:Y.evaluate(new ma(je)),maxSize:Y.evaluate(new ma($e)),interpolationType:pe}}function Ef(M,I,Y){var ae=I.uSize,ye=Y.lowerSize;return"source"===M.kind?ye/128:"composite"===M.kind?ti(ye/128,Y.upperSize/128,I.uSizeT):ae}function Lf(M,I){var Y=0,ae=0;if("constant"===M.kind)ae=M.layoutSize;else if("source"!==M.kind){var pe=M.interpolationType,je=pe?l(Qi.interpolationFactor(pe,I,M.minZoom,M.maxZoom),0,1):0;"camera"===M.kind?ae=ti(M.minSize,M.maxSize,je):Y=je}return{uSizeT:Y,uSize:ae}}rn("Anchor",Yl);var ld=Object.freeze({__proto__:null,getSizeData:Fu,evaluateSizeForFeature:Ef,evaluateSizeForZoom:Lf,SIZE_PACK_FACTOR:128});function Df(M,I,Y,ae,pe){if(void 0===I.segment)return!0;for(var ye=I,Ee=I.segment+1,je=0;je>-Y/2;){if(--Ee<0)return!1;je-=M[Ee].dist(ye),ye=M[Ee]}je+=M[Ee].dist(M[Ee+1]),Ee++;for(var $e=[],pt=0;je<Y/2;){var qt=M[Ee],tr=M[Ee+1];if(!tr)return!1;var Kt=M[Ee-1].angleTo(qt)-qt.angleTo(tr);for(Kt=Math.abs((Kt+3*Math.PI)%(2*Math.PI)-Math.PI),$e.push({distance:je,angleDelta:Kt}),pt+=Kt;je-$e[0].distance>ae;)pt-=$e.shift().angleDelta;if(pt>pe)return!1;Ee++,je+=qt.dist(tr)}return!0}function Of(M){for(var I=0,Y=0;Y<M.length-1;Y++)I+=M[Y].dist(M[Y+1]);return I}function If(M,I,Y){return M?.6*I*Y:0}function Pf(M,I){return Math.max(M?M.right-M.left:0,I?I.right-I.left:0)}function cd(M,I,Y,ae,pe,ye){for(var Ee=If(Y,pe,ye),je=Pf(Y,ae)*ye,$e=0,pt=Of(M)/2,bt=0;bt<M.length-1;bt++){var qt=M[bt],tr=M[bt+1],Kt=qt.dist(tr);if($e+Kt>pt){var hr=(pt-$e)/Kt,Ar=ti(qt.x,tr.x,hr),jr=ti(qt.y,tr.y,hr),Nr=new Yl(Ar,jr,tr.angleTo(qt),bt);return Nr._round(),!Ee||Df(M,Nr,je,Ee,I)?Nr:void 0}$e+=Kt}}function ud(M,I,Y,ae,pe,ye,Ee,je,$e){var pt=If(ae,ye,Ee),bt=Pf(ae,pe),qt=bt*Ee,tr=0===M[0].x||M[0].x===$e||0===M[0].y||M[0].y===$e;return I-qt<I/4&&(I=qt+I/4),function Kt(hr,Ar,jr,Nr,Yr,Wr,tn,kn,On){for(var $n=Wr/2,Xn=Of(hr),ii=0,vi=Ar-jr,yi=[],li=0;li<hr.length-1;li++){for(var ki=hr[li],wi=hr[li+1],xi=ki.dist(wi),da=wi.angleTo(ki);vi+jr<ii+xi;){var la=((vi+=jr)-ii)/xi,ba=ti(ki.x,wi.x,la),Pi=ti(ki.y,wi.y,la);if(ba>=0&&ba<On&&Pi>=0&&Pi<On&&vi-$n>=0&&vi+$n<=Xn){var ua=new Yl(ba,Pi,da,li);ua._round(),Nr&&!Df(hr,ua,Wr,Nr,Yr)||yi.push(ua)}}ii+=xi}return kn||yi.length||tn||(yi=Kt(hr,ii/2,jr,Nr,Yr,Wr,tn,!0,On)),yi}(M,tr?I/2*je%I:(bt/2+2*ye)*Ee*je%I,I,pt,Y,qt,tr,!1,$e)}function Rf(M,I,Y,ae,pe){for(var ye=[],Ee=0;Ee<M.length;Ee++)for(var je=M[Ee],$e=void 0,pt=0;pt<je.length-1;pt++){var bt=je[pt],qt=je[pt+1];bt.x<I&&qt.x<I||(bt.x<I?bt=new r(I,bt.y+(I-bt.x)/(qt.x-bt.x)*(qt.y-bt.y))._round():qt.x<I&&(qt=new r(I,bt.y+(I-bt.x)/(qt.x-bt.x)*(qt.y-bt.y))._round()),bt.y<Y&&qt.y<Y||(bt.y<Y?bt=new r(bt.x+(Y-bt.y)/(qt.y-bt.y)*(qt.x-bt.x),Y)._round():qt.y<Y&&(qt=new r(bt.x+(Y-bt.y)/(qt.y-bt.y)*(qt.x-bt.x),Y)._round()),bt.x>=ae&&qt.x>=ae||(bt.x>=ae?bt=new r(ae,bt.y+(ae-bt.x)/(qt.x-bt.x)*(qt.y-bt.y))._round():qt.x>=ae&&(qt=new r(ae,bt.y+(ae-bt.x)/(qt.x-bt.x)*(qt.y-bt.y))._round()),bt.y>=pe&&qt.y>=pe||(bt.y>=pe?bt=new r(bt.x+(pe-bt.y)/(qt.y-bt.y)*(qt.x-bt.x),pe)._round():qt.y>=pe&&(qt=new r(bt.x+(pe-bt.y)/(qt.y-bt.y)*(qt.x-bt.x),pe)._round()),$e&&bt.equals($e[$e.length-1])||ye.push($e=[bt]),$e.push(qt)))))}return ye}function zf(M,I,Y,ae){var pe=[],ye=M.image,Ee=ye.pixelRatio,je=ye.paddedRect.w-2,$e=ye.paddedRect.h-2,pt=M.right-M.left,bt=M.bottom-M.top,qt=ye.stretchX||[[0,je]],tr=ye.stretchY||[[0,$e]],Kt=function(ua,Ba){return ua+Ba[1]-Ba[0]},hr=qt.reduce(Kt,0),Ar=tr.reduce(Kt,0),jr=je-hr,Nr=$e-Ar,Yr=0,Wr=hr,tn=0,kn=Ar,On=0,$n=jr,Xn=0,ii=Nr;if(ye.content&&ae){var vi=ye.content;Yr=Zc(qt,0,vi[0]),tn=Zc(tr,0,vi[1]),Wr=Zc(qt,vi[0],vi[2]),kn=Zc(tr,vi[1],vi[3]),On=vi[0]-Yr,Xn=vi[1]-tn,$n=vi[2]-vi[0]-Wr,ii=vi[3]-vi[1]-kn}var yi=function(ua,Ba,La,Ya){var Da=Xc(ua.stretch-Yr,Wr,pt,M.left),To=Jc(ua.fixed-On,$n,ua.stretch,hr),Wa=Xc(Ba.stretch-tn,kn,bt,M.top),Jo=Jc(Ba.fixed-Xn,ii,Ba.stretch,Ar),Fo=Xc(La.stretch-Yr,Wr,pt,M.left),Uo=Jc(La.fixed-On,$n,La.stretch,hr),hs=Xc(Ya.stretch-tn,kn,bt,M.top),ns=Jc(Ya.fixed-Xn,ii,Ya.stretch,Ar),Mo=new r(Da,Wa),Go=new r(Fo,Wa),vo=new r(Fo,hs),Lo=new r(Da,hs),Xi=new r(To/Ee,Jo/Ee),va=new r(Uo/Ee,ns/Ee),io=I*Math.PI/180;if(io){var ao=Math.sin(io),no=Math.cos(io),Za=[no,-ao,ao,no];Mo._matMult(Za),Go._matMult(Za),Lo._matMult(Za),vo._matMult(Za)}var _a=ua.stretch+ua.fixed,ds=Ba.stretch+Ba.fixed;return{tl:Mo,tr:Go,bl:Lo,br:vo,tex:{x:ye.paddedRect.x+1+_a,y:ye.paddedRect.y+1+ds,w:La.stretch+La.fixed-_a,h:Ya.stretch+Ya.fixed-ds},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Xi,pixelOffsetBR:va,minFontScaleX:$n/Ee/pt,minFontScaleY:ii/Ee/bt,isSDF:Y}};if(ae&&(ye.stretchX||ye.stretchY))for(var li=Ff(qt,jr,hr),ki=Ff(tr,Nr,Ar),wi=0;wi<li.length-1;wi++)for(var xi=li[wi],da=li[wi+1],la=0;la<ki.length-1;la++)pe.push(yi(xi,ki[la],da,ki[la+1]));else pe.push(yi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:je+1},{fixed:0,stretch:$e+1}));return pe}function Zc(M,I,Y){for(var ae=0,pe=0,ye=M;pe<ye.length;pe+=1){var Ee=ye[pe];ae+=Math.max(I,Math.min(Y,Ee[1]))-Math.max(I,Math.min(Y,Ee[0]))}return ae}function Ff(M,I,Y){for(var ae=[{fixed:-1,stretch:0}],pe=0,ye=M;pe<ye.length;pe+=1){var Ee=ye[pe],je=Ee[0],$e=Ee[1],pt=ae[ae.length-1];ae.push({fixed:je-pt.stretch,stretch:pt.stretch}),ae.push({fixed:je-pt.stretch,stretch:pt.stretch+($e-je)})}return ae.push({fixed:I+1,stretch:Y}),ae}function Xc(M,I,Y,ae){return M/I*Y+ae}function Jc(M,I,Y,ae){return M-I*Y/ae}var Kc=function(M,I,Y,ae,pe,ye,Ee,je,$e,pt){if(this.boxStartIndex=M.length,$e){var bt=ye.top,qt=ye.bottom,tr=ye.collisionPadding;tr&&(bt-=tr[1],qt+=tr[3]);var Kt=qt-bt;Kt>0&&(Kt=Math.max(10,Kt),this.circleDiameter=Kt)}else{var hr=ye.top*Ee-je,Ar=ye.bottom*Ee+je,jr=ye.left*Ee-je,Nr=ye.right*Ee+je,Yr=ye.collisionPadding;if(Yr&&(jr-=Yr[0]*Ee,hr-=Yr[1]*Ee,Nr+=Yr[2]*Ee,Ar+=Yr[3]*Ee),pt){var Wr=new r(jr,hr),tn=new r(Nr,hr),kn=new r(jr,Ar),On=new r(Nr,Ar),$n=pt*Math.PI/180;Wr._rotate($n),tn._rotate($n),kn._rotate($n),On._rotate($n),jr=Math.min(Wr.x,tn.x,kn.x,On.x),Nr=Math.max(Wr.x,tn.x,kn.x,On.x),hr=Math.min(Wr.y,tn.y,kn.y,On.y),Ar=Math.max(Wr.y,tn.y,kn.y,On.y)}M.emplaceBack(I.x,I.y,jr,hr,Nr,Ar,Y,ae,pe)}this.boxEndIndex=M.length},Wl=function(M,I){if(void 0===M&&(M=[]),void 0===I&&(I=fd),this.data=M,this.length=this.data.length,this.compare=I,this.length>0)for(var Y=(this.length>>1)-1;Y>=0;Y--)this._down(Y)};function fd(M,I){return M<I?-1:M>I?1:0}function hd(M,I,Y){void 0===I&&(I=1),void 0===Y&&(Y=!1);for(var ae=1/0,pe=1/0,ye=-1/0,Ee=-1/0,je=M[0],$e=0;$e<je.length;$e++){var pt=je[$e];(!$e||pt.x<ae)&&(ae=pt.x),(!$e||pt.y<pe)&&(pe=pt.y),(!$e||pt.x>ye)&&(ye=pt.x),(!$e||pt.y>Ee)&&(Ee=pt.y)}var tr=Math.min(ye-ae,Ee-pe),Kt=tr/2,hr=new Wl([],dd);if(0===tr)return new r(ae,pe);for(var Ar=ae;Ar<ye;Ar+=tr)for(var jr=pe;jr<Ee;jr+=tr)hr.push(new Zl(Ar+Kt,jr+Kt,Kt,M));for(var Nr=function(tn){for(var kn=0,On=0,$n=0,Xn=tn[0],ii=0,vi=Xn.length,yi=vi-1;ii<vi;yi=ii++){var li=Xn[ii],ki=Xn[yi],wi=li.x*ki.y-ki.x*li.y;On+=(li.x+ki.x)*wi,$n+=(li.y+ki.y)*wi,kn+=3*wi}return new Zl(On/kn,$n/kn,0,tn)}(M),Yr=hr.length;hr.length;){var Wr=hr.pop();(Wr.d>Nr.d||!Nr.d)&&(Nr=Wr,Y&&console.log("found best %d after %d probes",Math.round(1e4*Wr.d)/1e4,Yr)),Wr.max-Nr.d<=I||(hr.push(new Zl(Wr.p.x-(Kt=Wr.h/2),Wr.p.y-Kt,Kt,M)),hr.push(new Zl(Wr.p.x+Kt,Wr.p.y-Kt,Kt,M)),hr.push(new Zl(Wr.p.x-Kt,Wr.p.y+Kt,Kt,M)),hr.push(new Zl(Wr.p.x+Kt,Wr.p.y+Kt,Kt,M)),Yr+=4)}return Y&&(console.log("num probes: "+Yr),console.log("best distance: "+Nr.d)),Nr.p}function dd(M,I){return I.max-M.max}function Zl(M,I,Y,ae){this.p=new r(M,I),this.h=Y,this.d=function(pe,ye){for(var Ee=!1,je=1/0,$e=0;$e<ye.length;$e++)for(var pt=ye[$e],bt=0,qt=pt.length,tr=qt-1;bt<qt;tr=bt++){var Kt=pt[bt],hr=pt[tr];Kt.y>pe.y!=hr.y>pe.y&&pe.x<(hr.x-Kt.x)*(pe.y-Kt.y)/(hr.y-Kt.y)+Kt.x&&(Ee=!Ee),je=Math.min(je,Js(pe,Kt,hr))}return(Ee?1:-1)*Math.sqrt(je)}(this.p,ae),this.max=this.d+this.h*Math.SQRT2}Wl.prototype.push=function(M){this.data.push(M),this.length++,this._up(this.length-1)},Wl.prototype.pop=function(){if(0!==this.length){var M=this.data[0],I=this.data.pop();return this.length--,this.length>0&&(this.data[0]=I,this._down(0)),M}},Wl.prototype.peek=function(){return this.data[0]},Wl.prototype._up=function(M){for(var I=this.data,Y=this.compare,ae=I[M];M>0;){var pe=M-1>>1,ye=I[pe];if(Y(ae,ye)>=0)break;I[M]=ye,M=pe}I[M]=ae},Wl.prototype._down=function(M){for(var I=this.data,Y=this.compare,ae=this.length>>1,pe=I[M];M<ae;){var ye=1+(M<<1),Ee=I[ye],je=ye+1;if(je<this.length&&Y(I[je],Ee)<0&&(ye=je,Ee=I[je]),Y(Ee,pe)>=0)break;I[M]=Ee,M=ye}I[M]=pe};var Bu=Number.POSITIVE_INFINITY;function Bf(M,I){return I[1]!==Bu?function(Y,ae,pe){var ye=0,Ee=0;switch(ae=Math.abs(ae),pe=Math.abs(pe),Y){case"top-right":case"top-left":case"top":Ee=pe-7;break;case"bottom-right":case"bottom-left":case"bottom":Ee=7-pe}switch(Y){case"top-right":case"bottom-right":case"right":ye=-ae;break;case"top-left":case"bottom-left":case"left":ye=ae}return[ye,Ee]}(M,I[0],I[1]):function(Y,ae){var pe=0,ye=0;ae<0&&(ae=0);var Ee=ae/Math.sqrt(2);switch(Y){case"top-right":case"top-left":ye=Ee-7;break;case"bottom-right":case"bottom-left":ye=7-Ee;break;case"bottom":ye=7-ae;break;case"top":ye=ae-7}switch(Y){case"top-right":case"bottom-right":pe=-Ee;break;case"top-left":case"bottom-left":pe=Ee;break;case"left":pe=ae;break;case"right":pe=-ae}return[pe,ye]}(M,I[0])}function Nu(M){switch(M){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Nf(M,I,Y,ae,pe,ye,Ee,je,$e,pt,bt,qt,tr,Kt,hr){var Ar=function(tn,kn,On,$n,Xn,ii,vi,yi){for(var li=$n.layout.get("text-rotate").evaluate(ii,{})*Math.PI/180,ki=[],wi=0,xi=kn.positionedLines;wi<xi.length;wi+=1)for(var da=xi[wi],la=0,ba=da.positionedGlyphs;la<ba.length;la+=1){var Pi=ba[la];if(Pi.rect){var ua=Pi.rect||{},Ba=4,La=!0,Ya=1,Da=0,To=(Xn||yi)&&Pi.vertical,Wa=Pi.metrics.advance*Pi.scale/2;if(yi&&kn.verticalizable&&(Da=da.lineOffset/2-(Pi.imageName?-(24-Pi.metrics.width*Pi.scale)/2:24*(Pi.scale-1))),Pi.imageName){var Uo=vi[Pi.imageName];La=Uo.sdf,Ba=1/(Ya=Uo.pixelRatio)}var hs=Xn?[Pi.x+Wa,Pi.y]:[0,0],ns=Xn?[0,0]:[Pi.x+Wa+On[0],Pi.y+On[1]-Da],Mo=[0,0];To&&(Mo=ns,ns=[0,0]);var Go=(Pi.metrics.left-Ba)*Pi.scale-Wa+ns[0],vo=(-Pi.metrics.top-Ba)*Pi.scale+ns[1],Lo=Go+ua.w*Pi.scale/Ya,Xi=vo+ua.h*Pi.scale/Ya,va=new r(Go,vo),io=new r(Lo,vo),ao=new r(Go,Xi),no=new r(Lo,Xi);if(To){var Za=new r(-Wa,Wa- -17),_a=-Math.PI/2,oo=12-Wa,Cs=new r(22-oo,-(Pi.imageName?oo:0)),is=new(Function.prototype.bind.apply(r,[null].concat(Mo)));va._rotateAround(_a,Za)._add(Cs)._add(is),io._rotateAround(_a,Za)._add(Cs)._add(is),ao._rotateAround(_a,Za)._add(Cs)._add(is),no._rotateAround(_a,Za)._add(Cs)._add(is)}if(li){var Qs=Math.sin(li),Al=Math.cos(li),Bo=[Al,-Qs,Qs,Al];va._matMult(Bo),io._matMult(Bo),ao._matMult(Bo),no._matMult(Bo)}var el=new r(0,0),tl=new r(0,0);ki.push({tl:va,tr:io,bl:ao,br:no,tex:ua,writingMode:kn.writingMode,glyphOffset:hs,sectionIndex:Pi.sectionIndex,isSDF:La,pixelOffsetTL:el,pixelOffsetBR:tl,minFontScaleX:0,minFontScaleY:0})}}return ki}(0,Y,je,pe,ye,Ee,ae,M.allowVerticalPlacement),jr=M.textSizeData,Nr=null;"source"===jr.kind?(Nr=[128*pe.layout.get("text-size").evaluate(Ee,{})])[0]>32640&&k(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===jr.kind&&((Nr=[128*Kt.compositeTextSizes[0].evaluate(Ee,{},hr),128*Kt.compositeTextSizes[1].evaluate(Ee,{},hr)])[0]>32640||Nr[1]>32640)&&k(M.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),M.addSymbols(M.text,Ar,Nr,je,ye,Ee,pt,I,$e.lineStartIndex,$e.lineLength,tr,hr);for(var Yr=0,Wr=bt;Yr<Wr.length;Yr+=1)qt[Wr[Yr]]=M.text.placedSymbolArray.length-1;return 4*Ar.length}function jf(M){for(var I in M)return M[I];return null}function pd(M,I,Y,ae){var pe=M.compareText;if(I in pe){for(var ye=pe[I],Ee=ye.length-1;Ee>=0;Ee--)if(ae.dist(ye[Ee])<Y)return!0}else pe[I]=[];return pe[I].push(ae),!1}var gd=Ul.VectorTileFeature.types,md=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function $c(M,I,Y,ae,pe,ye,Ee,je,$e,pt,bt,qt,tr){var Kt=je?Math.min(32640,Math.round(je[0])):0,hr=je?Math.min(32640,Math.round(je[1])):0;M.emplaceBack(I,Y,Math.round(32*ae),Math.round(32*pe),ye,Ee,(Kt<<1)+($e?1:0),hr,16*pt,16*bt,256*qt,256*tr)}function ju(M,I,Y){M.emplaceBack(I.x,I.y,Y),M.emplaceBack(I.x,I.y,Y),M.emplaceBack(I.x,I.y,Y),M.emplaceBack(I.x,I.y,Y)}function vd(M){for(var I=0,Y=M.sections;I<Y.length;I+=1)if(fi(Y[I].text))return!0;return!1}var Xl=function(M){this.layoutVertexArray=new Is,this.indexArray=new ho,this.programConfigurations=M,this.segments=new Ht,this.dynamicLayoutVertexArray=new Ts,this.opacityVertexArray=new Xs,this.placedSymbolArray=new Ge};Xl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Xl.prototype.upload=function(M,I,Y,ae){this.isEmpty()||(Y&&(this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,Pu.members),this.indexBuffer=M.createIndexBuffer(this.indexArray,I),this.dynamicLayoutVertexBuffer=M.createVertexBuffer(this.dynamicLayoutVertexArray,Hh.members,!0),this.opacityVertexBuffer=M.createVertexBuffer(this.opacityVertexArray,md,!0),this.opacityVertexBuffer.itemSize=1),(Y||ae)&&this.programConfigurations.upload(M))},Xl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},rn("SymbolBuffers",Xl);var Ac=function(M,I,Y){this.layoutVertexArray=new M,this.layoutAttributes=I,this.indexArray=new Y,this.segments=new Ht,this.collisionVertexArray=new Vs};Ac.prototype.upload=function(M){this.layoutVertexBuffer=M.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=M.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=M.createVertexBuffer(this.collisionVertexArray,qh.members,!0)},Ac.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},rn("CollisionBuffers",Ac);var Ma=function(M){this.collisionBoxArray=M.collisionBoxArray,this.zoom=M.zoom,this.overscaling=M.overscaling,this.layers=M.layers,this.layerIds=this.layers.map(function(Ee){return Ee.id}),this.index=M.index,this.pixelRatio=M.pixelRatio,this.sourceLayerIndex=M.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Il([]),this.placementViewportMatrix=Il([]);var I=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Fu(this.zoom,I["text-size"]),this.iconSizeData=Fu(this.zoom,I["icon-size"]);var Y=this.layers[0].layout,ae=Y.get("symbol-sort-key"),pe=Y.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==pe&&void 0!==ae.constantOr(1),this.sortFeaturesByY=("viewport-y"===pe||"auto"===pe&&!this.sortFeaturesByKey)&&(Y.get("text-allow-overlap")||Y.get("icon-allow-overlap")||Y.get("text-ignore-placement")||Y.get("icon-ignore-placement")),"point"===Y.get("symbol-placement")&&(this.writingModes=Y.get("text-writing-mode").map(function(Ee){return zs[Ee]})),this.stateDependentLayerIds=this.layers.filter(function(Ee){return Ee.isStateDependent()}).map(function(Ee){return Ee.id}),this.sourceID=M.sourceID};Ma.prototype.createArrays=function(){this.text=new Xl(new Ta(Pu.members,this.layers,this.zoom,function(M){return/^text/.test(M)})),this.icon=new Xl(new Ta(Pu.members,this.layers,this.zoom,function(M){return/^icon/.test(M)})),this.glyphOffsetArray=new Mt,this.lineVertexArray=new It,this.symbolInstances=new ot},Ma.prototype.calculateGlyphDependencies=function(M,I,Y,ae,pe){for(var ye=0;ye<M.length;ye++)if(I[M.charCodeAt(ye)]=!0,(Y||ae)&&pe){var Ee=bc[M.charAt(ye)];Ee&&(I[Ee.charCodeAt(0)]=!0)}},Ma.prototype.populate=function(M,I,Y){var ae=this.layers[0],pe=ae.layout,ye=pe.get("text-font"),Ee=pe.get("text-field"),je=pe.get("icon-image"),$e=("constant"!==Ee.value.kind||Ee.value.value instanceof Gr&&!Ee.value.value.isEmpty()||Ee.value.value.toString().length>0)&&("constant"!==ye.value.kind||ye.value.value.length>0),pt="constant"!==je.value.kind||!!je.value.value||Object.keys(je.parameters).length>0,bt=pe.get("symbol-sort-key");if(this.features=[],$e||pt){for(var qt=I.iconDependencies,tr=I.glyphDependencies,Kt=I.availableImages,hr=new ma(this.zoom),Ar=0,jr=M;Ar<jr.length;Ar+=1){var Nr=jr[Ar],Yr=Nr.feature,Wr=Nr.id,tn=Nr.index,kn=Nr.sourceLayerIndex,On=ae._featureFilter.needGeometry,$n={type:Yr.type,id:Wr,properties:Yr.properties,geometry:On?Ea(Yr):[]};if(ae._featureFilter.filter(hr,$n,Y)){On||($n.geometry=Ea(Yr));var Xn=void 0;if($e){var ii=ae.getValueAndResolveTokens("text-field",$n,Y,Kt),vi=Gr.factory(ii);vd(vi)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===eo()||this.hasRTLText&&mo.isParsed())&&(Xn=Wh(vi,ae,$n))}var yi=void 0;if(pt){var li=ae.getValueAndResolveTokens("icon-image",$n,Y,Kt);yi=li instanceof Er?li:Er.fromString(li)}if(Xn||yi){var ki=this.sortFeaturesByKey?bt.evaluate($n,{},Y):void 0,wi={id:Wr,text:Xn,icon:yi,index:tn,sourceLayerIndex:kn,geometry:Ea(Yr),properties:Yr.properties,type:gd[Yr.type],sortKey:ki};if(this.features.push(wi),yi&&(qt[yi.name]=!0),Xn){var xi=ye.evaluate($n,{},Y).join(","),da="map"===pe.get("text-rotation-alignment")&&"point"!==pe.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(zs.vertical)>=0;for(var la=0,ba=Xn.sections;la<ba.length;la+=1){var Pi=ba[la];if(Pi.image)qt[Pi.image.name]=!0;else{var ua=Yi(Xn.toString()),Ba=Pi.fontStack||xi,La=tr[Ba]=tr[Ba]||{};this.calculateGlyphDependencies(Pi.text,La,da,this.allowVerticalPlacement,ua)}}}}}}"line"===pe.get("symbol-placement")&&(this.features=function(Ya){var Da={},To={},Wa=[],Jo=0;function Fo(no){Wa.push(Ya[no]),Jo++}function Uo(no,Za,_a){var oo=To[no];return delete To[no],To[Za]=oo,Wa[oo].geometry[0].pop(),Wa[oo].geometry[0]=Wa[oo].geometry[0].concat(_a[0]),oo}function hs(no,Za,_a){var oo=Da[Za];return delete Da[Za],Da[no]=oo,Wa[oo].geometry[0].shift(),Wa[oo].geometry[0]=_a[0].concat(Wa[oo].geometry[0]),oo}function ns(no,Za,_a){var oo=_a?Za[0][Za[0].length-1]:Za[0][0];return no+":"+oo.x+":"+oo.y}for(var Mo=0;Mo<Ya.length;Mo++){var Go=Ya[Mo],vo=Go.geometry,Lo=Go.text?Go.text.toString():null;if(Lo){var Xi=ns(Lo,vo),va=ns(Lo,vo,!0);if(Xi in To&&va in Da&&To[Xi]!==Da[va]){var io=hs(Xi,va,vo),ao=Uo(Xi,va,Wa[io].geometry);delete Da[Xi],delete To[va],To[ns(Lo,Wa[ao].geometry,!0)]=ao,Wa[io].geometry=null}else Xi in To?Uo(Xi,va,vo):va in Da?hs(Xi,va,vo):(Fo(Mo),Da[Xi]=Jo-1,To[va]=Jo-1)}else Fo(Mo)}return Wa.filter(function(no){return no.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ya,Da){return Ya.sortKey-Da.sortKey})}},Ma.prototype.update=function(M,I,Y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(M,I,this.layers,Y),this.icon.programConfigurations.updatePaintArrays(M,I,this.layers,Y))},Ma.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Ma.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ma.prototype.upload=function(M){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(M),this.iconCollisionBox.upload(M)),this.text.upload(M,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(M,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ma.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ma.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ma.prototype.addToLineVertexArray=function(M,I){var Y=this.lineVertexArray.length;if(void 0!==M.segment){for(var ae=M.dist(I[M.segment+1]),pe=M.dist(I[M.segment]),ye={},Ee=M.segment+1;Ee<I.length;Ee++)ye[Ee]={x:I[Ee].x,y:I[Ee].y,tileUnitDistanceFromAnchor:ae},Ee<I.length-1&&(ae+=I[Ee+1].dist(I[Ee]));for(var je=M.segment||0;je>=0;je--)ye[je]={x:I[je].x,y:I[je].y,tileUnitDistanceFromAnchor:pe},je>0&&(pe+=I[je-1].dist(I[je]));for(var $e=0;$e<I.length;$e++){var pt=ye[$e];this.lineVertexArray.emplaceBack(pt.x,pt.y,pt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Y,lineLength:this.lineVertexArray.length-Y}},Ma.prototype.addSymbols=function(M,I,Y,ae,pe,ye,Ee,je,$e,pt,bt,qt){for(var tr=M.indexArray,Kt=M.layoutVertexArray,hr=M.segments.prepareSegment(4*I.length,Kt,tr,ye.sortKey),Ar=this.glyphOffsetArray.length,jr=hr.vertexLength,Nr=this.allowVerticalPlacement&&Ee===zs.vertical?Math.PI/2:0,Yr=ye.text&&ye.text.sections,Wr=0;Wr<I.length;Wr++){var tn=I[Wr],kn=tn.tl,On=tn.tr,$n=tn.bl,Xn=tn.br,ii=tn.tex,vi=tn.pixelOffsetTL,yi=tn.pixelOffsetBR,li=tn.minFontScaleX,ki=tn.minFontScaleY,wi=tn.glyphOffset,xi=tn.isSDF,da=tn.sectionIndex,la=hr.vertexLength,ba=wi[1];$c(Kt,je.x,je.y,kn.x,ba+kn.y,ii.x,ii.y,Y,xi,vi.x,vi.y,li,ki),$c(Kt,je.x,je.y,On.x,ba+On.y,ii.x+ii.w,ii.y,Y,xi,yi.x,vi.y,li,ki),$c(Kt,je.x,je.y,$n.x,ba+$n.y,ii.x,ii.y+ii.h,Y,xi,vi.x,yi.y,li,ki),$c(Kt,je.x,je.y,Xn.x,ba+Xn.y,ii.x+ii.w,ii.y+ii.h,Y,xi,yi.x,yi.y,li,ki),ju(M.dynamicLayoutVertexArray,je,Nr),tr.emplaceBack(la,la+1,la+2),tr.emplaceBack(la+1,la+2,la+3),hr.vertexLength+=4,hr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wi[0]),Wr!==I.length-1&&da===I[Wr+1].sectionIndex||M.programConfigurations.populatePaintArrays(Kt.length,ye,ye.index,{},qt,Yr&&Yr[da])}M.placedSymbolArray.emplaceBack(je.x,je.y,Ar,this.glyphOffsetArray.length-Ar,jr,$e,pt,je.segment,Y?Y[0]:0,Y?Y[1]:0,ae[0],ae[1],Ee,0,!1,0,bt)},Ma.prototype._addCollisionDebugVertex=function(M,I,Y,ae,pe,ye){return I.emplaceBack(0,0),M.emplaceBack(Y.x,Y.y,ae,pe,Math.round(ye.x),Math.round(ye.y))},Ma.prototype.addCollisionDebugVertices=function(M,I,Y,ae,pe,ye,Ee){var je=pe.segments.prepareSegment(4,pe.layoutVertexArray,pe.indexArray),$e=je.vertexLength,pt=pe.layoutVertexArray,bt=pe.collisionVertexArray,qt=Ee.anchorX,tr=Ee.anchorY;this._addCollisionDebugVertex(pt,bt,ye,qt,tr,new r(M,I)),this._addCollisionDebugVertex(pt,bt,ye,qt,tr,new r(Y,I)),this._addCollisionDebugVertex(pt,bt,ye,qt,tr,new r(Y,ae)),this._addCollisionDebugVertex(pt,bt,ye,qt,tr,new r(M,ae)),je.vertexLength+=4;var Kt=pe.indexArray;Kt.emplaceBack($e,$e+1),Kt.emplaceBack($e+1,$e+2),Kt.emplaceBack($e+2,$e+3),Kt.emplaceBack($e+3,$e),je.primitiveLength+=4},Ma.prototype.addDebugCollisionBoxes=function(M,I,Y,ae){for(var pe=M;pe<I;pe++){var ye=this.collisionBoxArray.get(pe);this.addCollisionDebugVertices(ye.x1,ye.y1,ye.x2,ye.y2,ae?this.textCollisionBox:this.iconCollisionBox,ye.anchorPoint,Y)}},Ma.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ac(Ms,yf.members,F),this.iconCollisionBox=new Ac(Ms,yf.members,F);for(var M=0;M<this.symbolInstances.length;M++){var I=this.symbolInstances.get(M);this.addDebugCollisionBoxes(I.textBoxStartIndex,I.textBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.verticalTextBoxStartIndex,I.verticalTextBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.iconBoxStartIndex,I.iconBoxEndIndex,I,!1),this.addDebugCollisionBoxes(I.verticalIconBoxStartIndex,I.verticalIconBoxEndIndex,I,!1)}},Ma.prototype._deserializeCollisionBoxesForSymbol=function(M,I,Y,ae,pe,ye,Ee,je,$e){for(var pt={},bt=I;bt<Y;bt++){var qt=M.get(bt);pt.textBox={x1:qt.x1,y1:qt.y1,x2:qt.x2,y2:qt.y2,anchorPointX:qt.anchorPointX,anchorPointY:qt.anchorPointY},pt.textFeatureIndex=qt.featureIndex;break}for(var tr=ae;tr<pe;tr++){var Kt=M.get(tr);pt.verticalTextBox={x1:Kt.x1,y1:Kt.y1,x2:Kt.x2,y2:Kt.y2,anchorPointX:Kt.anchorPointX,anchorPointY:Kt.anchorPointY},pt.verticalTextFeatureIndex=Kt.featureIndex;break}for(var hr=ye;hr<Ee;hr++){var Ar=M.get(hr);pt.iconBox={x1:Ar.x1,y1:Ar.y1,x2:Ar.x2,y2:Ar.y2,anchorPointX:Ar.anchorPointX,anchorPointY:Ar.anchorPointY},pt.iconFeatureIndex=Ar.featureIndex;break}for(var jr=je;jr<$e;jr++){var Nr=M.get(jr);pt.verticalIconBox={x1:Nr.x1,y1:Nr.y1,x2:Nr.x2,y2:Nr.y2,anchorPointX:Nr.anchorPointX,anchorPointY:Nr.anchorPointY},pt.verticalIconFeatureIndex=Nr.featureIndex;break}return pt},Ma.prototype.deserializeCollisionBoxes=function(M){this.collisionArrays=[];for(var I=0;I<this.symbolInstances.length;I++){var Y=this.symbolInstances.get(I);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(M,Y.textBoxStartIndex,Y.textBoxEndIndex,Y.verticalTextBoxStartIndex,Y.verticalTextBoxEndIndex,Y.iconBoxStartIndex,Y.iconBoxEndIndex,Y.verticalIconBoxStartIndex,Y.verticalIconBoxEndIndex))}},Ma.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ma.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ma.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ma.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ma.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ma.prototype.addIndicesForPlacedSymbol=function(M,I){for(var Y=M.placedSymbolArray.get(I),ae=Y.vertexStartIndex+4*Y.numGlyphs,pe=Y.vertexStartIndex;pe<ae;pe+=4)M.indexArray.emplaceBack(pe,pe+1,pe+2),M.indexArray.emplaceBack(pe+1,pe+2,pe+3)},Ma.prototype.getSortedSymbolIndexes=function(M){if(this.sortedAngle===M&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var I=Math.sin(M),Y=Math.cos(M),ae=[],pe=[],ye=[],Ee=0;Ee<this.symbolInstances.length;++Ee){ye.push(Ee);var je=this.symbolInstances.get(Ee);ae.push(0|Math.round(I*je.anchorX+Y*je.anchorY)),pe.push(je.featureIndex)}return ye.sort(function($e,pt){return ae[$e]-ae[pt]||pe[pt]-pe[$e]}),ye},Ma.prototype.addToSortKeyRanges=function(M,I){var Y=this.sortKeyRanges[this.sortKeyRanges.length-1];Y&&Y.sortKey===I?Y.symbolInstanceEnd=M+1:this.sortKeyRanges.push({sortKey:I,symbolInstanceStart:M,symbolInstanceEnd:M+1})},Ma.prototype.sortFeatures=function(M){var I=this;if(this.sortFeaturesByY&&this.sortedAngle!==M&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(M),this.sortedAngle=M,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Y=0,ae=this.symbolInstanceIndexes;Y<ae.length;Y+=1){var ye=this.symbolInstances.get(ae[Y]);this.featureSortOrder.push(ye.featureIndex),[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach(function(Ee,je,$e){Ee>=0&&$e.indexOf(Ee)===je&&I.addIndicesForPlacedSymbol(I.text,Ee)}),ye.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,ye.verticalPlacedTextSymbolIndex),ye.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ye.placedIconSymbolIndex),ye.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ye.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},rn("SymbolBucket",Ma,{omit:["layers","collisionBoxArray","features","compareText"]}),Ma.MAX_GLYPHS=65535,Ma.addDynamicAttributes=ju;var yd=new Oo({"symbol-placement":new bi(Ie.layout_symbol["symbol-placement"]),"symbol-spacing":new bi(Ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new bi(Ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Li(Ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new bi(Ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new bi(Ie.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new bi(Ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new bi(Ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new bi(Ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new Li(Ie.layout_symbol["icon-size"]),"icon-text-fit":new bi(Ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new bi(Ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new Li(Ie.layout_symbol["icon-image"]),"icon-rotate":new Li(Ie.layout_symbol["icon-rotate"]),"icon-padding":new bi(Ie.layout_symbol["icon-padding"]),"icon-keep-upright":new bi(Ie.layout_symbol["icon-keep-upright"]),"icon-offset":new Li(Ie.layout_symbol["icon-offset"]),"icon-anchor":new Li(Ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new bi(Ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new bi(Ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new bi(Ie.layout_symbol["text-rotation-alignment"]),"text-field":new Li(Ie.layout_symbol["text-field"]),"text-font":new Li(Ie.layout_symbol["text-font"]),"text-size":new Li(Ie.layout_symbol["text-size"]),"text-max-width":new Li(Ie.layout_symbol["text-max-width"]),"text-line-height":new bi(Ie.layout_symbol["text-line-height"]),"text-letter-spacing":new Li(Ie.layout_symbol["text-letter-spacing"]),"text-justify":new Li(Ie.layout_symbol["text-justify"]),"text-radial-offset":new Li(Ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new bi(Ie.layout_symbol["text-variable-anchor"]),"text-anchor":new Li(Ie.layout_symbol["text-anchor"]),"text-max-angle":new bi(Ie.layout_symbol["text-max-angle"]),"text-writing-mode":new bi(Ie.layout_symbol["text-writing-mode"]),"text-rotate":new Li(Ie.layout_symbol["text-rotate"]),"text-padding":new bi(Ie.layout_symbol["text-padding"]),"text-keep-upright":new bi(Ie.layout_symbol["text-keep-upright"]),"text-transform":new Li(Ie.layout_symbol["text-transform"]),"text-offset":new Li(Ie.layout_symbol["text-offset"]),"text-allow-overlap":new bi(Ie.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new bi(Ie.layout_symbol["text-ignore-placement"]),"text-optional":new bi(Ie.layout_symbol["text-optional"])}),Vu={paint:new Oo({"icon-opacity":new Li(Ie.paint_symbol["icon-opacity"]),"icon-color":new Li(Ie.paint_symbol["icon-color"]),"icon-halo-color":new Li(Ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new Li(Ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Li(Ie.paint_symbol["icon-halo-blur"]),"icon-translate":new bi(Ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new bi(Ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new Li(Ie.paint_symbol["text-opacity"]),"text-color":new Li(Ie.paint_symbol["text-color"],{runtimeType:Yt,getOverride:function(M){return M.textColor},hasOverride:function(M){return!!M.textColor}}),"text-halo-color":new Li(Ie.paint_symbol["text-halo-color"]),"text-halo-width":new Li(Ie.paint_symbol["text-halo-width"]),"text-halo-blur":new Li(Ie.paint_symbol["text-halo-blur"]),"text-translate":new bi(Ie.paint_symbol["text-translate"]),"text-translate-anchor":new bi(Ie.paint_symbol["text-translate-anchor"])}),layout:yd},Jl=function(M){this.type=M.property.overrides?M.property.overrides.runtimeType:Ft,this.defaultValue=M};Jl.prototype.evaluate=function(M){if(M.formattedSection){var I=this.defaultValue.property.overrides;if(I&&I.hasOverride(M.formattedSection))return I.getOverride(M.formattedSection)}return M.feature&&M.featureState?this.defaultValue.evaluate(M.feature,M.featureState):this.defaultValue.property.specification.default},Jl.prototype.eachChild=function(M){this.defaultValue.isConstant()||M(this.defaultValue.value._styleExpression.expression)},Jl.prototype.outputDefined=function(){return!1},Jl.prototype.serialize=function(){return null},rn("FormatSectionOverride",Jl,{omit:["defaultValue"]});var xd=function(M){function I(Y){M.call(this,Y,Vu)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.recalculate=function(Y,ae){if(M.prototype.recalculate.call(this,Y,ae),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var pe=this.layout.get("text-writing-mode");if(pe){for(var ye=[],Ee=0,je=pe;Ee<je.length;Ee+=1){var $e=je[Ee];ye.indexOf($e)<0&&ye.push($e)}this.layout._values["text-writing-mode"]=ye}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},I.prototype.getValueAndResolveTokens=function(Y,ae,pe,ye){var $e,Ee=this.layout.get(Y).evaluate(ae,{},pe,ye),je=this._unevaluatedLayout._values[Y];return je.isDataDriven()||or(je.value)||!Ee?Ee:($e=ae.properties,Ee.replace(/{([^{}]+)}/g,function(bt,qt){return qt in $e?String($e[qt]):""}))},I.prototype.createBucket=function(Y){return new Ma(Y)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype._setPaintOverrides=function(){for(var Y=0,ae=Vu.paint.overridableProperties;Y<ae.length;Y+=1){var pe=ae[Y];if(I.hasPaintOverride(this.layout,pe)){var $e,ye=this.paint.get(pe),Ee=new Jl(ye),je=new ir(Ee,ye.property.specification);$e="constant"===ye.value.kind||"source"===ye.value.kind?new ur("source",je):new xr("composite",je,ye.value.zoomStops,ye.value._interpolationType),this.paint._values[pe]=new Ja(ye.property,$e,ye.parameters)}}},I.prototype._handleOverridablePaintPropertyUpdate=function(Y,ae,pe){return!(!this.layout||ae.isDataDriven()||pe.isDataDriven())&&I.hasPaintOverride(this.layout,Y)},I.hasPaintOverride=function(Y,ae){var pe=Y.get("text-field"),ye=Vu.paint.properties[ae],Ee=!1,je=function(bt){for(var qt=0,tr=bt;qt<tr.length;qt+=1)if(ye.overrides&&ye.overrides.hasOverride(tr[qt]))return void(Ee=!0)};if("constant"===pe.value.kind&&pe.value.value instanceof Gr)je(pe.value.value.sections);else if("source"===pe.value.kind){var $e=function(bt){Ee||(bt instanceof Gn&&gn(bt.value)===kt?je(bt.value.sections):bt instanceof Pr?je(bt.sections):bt.eachChild($e))},pt=pe.value;pt._styleExpression&&$e(pt._styleExpression.expression)}return Ee},I}(Zo),bd={paint:new Oo({"background-color":new bi(Ie.paint_background["background-color"]),"background-pattern":new Hs(Ie.paint_background["background-pattern"]),"background-opacity":new bi(Ie.paint_background["background-opacity"])})},_d=function(M){function I(Y){M.call(this,Y,bd)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I}(Zo),wd={paint:new Oo({"raster-opacity":new bi(Ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new bi(Ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new bi(Ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new bi(Ie.paint_raster["raster-brightness-max"]),"raster-saturation":new bi(Ie.paint_raster["raster-saturation"]),"raster-contrast":new bi(Ie.paint_raster["raster-contrast"]),"raster-resampling":new bi(Ie.paint_raster["raster-resampling"]),"raster-fade-duration":new bi(Ie.paint_raster["raster-fade-duration"])})},Ad=function(M){function I(Y){M.call(this,Y,wd)}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I}(Zo),Td=function(M){function I(Y){M.call(this,Y,{}),this.implementation=Y}return M&&(I.__proto__=M),(I.prototype=Object.create(M&&M.prototype)).constructor=I,I.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},I.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},I.prototype.recalculate=function(){},I.prototype.updateTransitions=function(){},I.prototype.hasTransition=function(){},I.prototype.serialize=function(){},I.prototype.onAdd=function(Y){this.implementation.onAdd&&this.implementation.onAdd(Y,Y.painter.context.gl)},I.prototype.onRemove=function(Y){this.implementation.onRemove&&this.implementation.onRemove(Y,Y.painter.context.gl)},I}(Zo),Md={circle:wu,heatmap:Tu,hillshade:ku,fill:Lh,"fill-extrusion":Nh,line:Gh,symbol:xd,background:_d,raster:Ad},Vf=self.HTMLImageElement,Uf=self.HTMLCanvasElement,Gf=self.HTMLVideoElement,Hf=self.ImageData,Qc=self.ImageBitmap,Pl=function(M,I,Y,ae){this.context=M,this.format=Y,this.texture=M.gl.createTexture(),this.update(I,ae)};Pl.prototype.update=function(M,I,Y){var ae=M.width,pe=M.height,ye=!(this.size&&this.size[0]===ae&&this.size[1]===pe||Y),Ee=this.context,je=Ee.gl;if(this.useMipmap=Boolean(I&&I.useMipmap),je.bindTexture(je.TEXTURE_2D,this.texture),Ee.pixelStoreUnpackFlipY.set(!1),Ee.pixelStoreUnpack.set(1),Ee.pixelStoreUnpackPremultiplyAlpha.set(this.format===je.RGBA&&(!I||!1!==I.premultiply)),ye)this.size=[ae,pe],M instanceof Vf||M instanceof Uf||M instanceof Gf||M instanceof Hf||Qc&&M instanceof Qc?je.texImage2D(je.TEXTURE_2D,0,this.format,this.format,je.UNSIGNED_BYTE,M):je.texImage2D(je.TEXTURE_2D,0,this.format,ae,pe,0,this.format,je.UNSIGNED_BYTE,M.data);else{var $e=Y||{x:0,y:0},pt=$e.x,bt=$e.y;M instanceof Vf||M instanceof Uf||M instanceof Gf||M instanceof Hf||Qc&&M instanceof Qc?je.texSubImage2D(je.TEXTURE_2D,0,pt,bt,je.RGBA,je.UNSIGNED_BYTE,M):je.texSubImage2D(je.TEXTURE_2D,0,pt,bt,ae,pe,je.RGBA,je.UNSIGNED_BYTE,M.data)}this.useMipmap&&this.isSizePowerOfTwo()&&je.generateMipmap(je.TEXTURE_2D)},Pl.prototype.bind=function(M,I,Y){var ae=this.context.gl;ae.bindTexture(ae.TEXTURE_2D,this.texture),Y!==ae.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Y=ae.LINEAR),M!==this.filter&&(ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,M),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,Y||M),this.filter=M),I!==this.wrap&&(ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,I),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,I),this.wrap=I)},Pl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Pl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Uu=function(M){var I=this;this._callback=M,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){I._triggered=!1,I._callback()})};Uu.prototype.trigger=function(){var M=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){M._triggered=!1,M._callback()},0))},Uu.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Kl=function(M,I,Y){this.target=M,this.parent=I,this.mapId=Y,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new Uu(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=S()?M:self};function qf(M,I,Y){var ae=2*Math.PI*6378137/256/Math.pow(2,Y);return[M*ae-2*Math.PI*6378137/2,I*ae-2*Math.PI*6378137/2]}Kl.prototype.send=function(M,I,Y,ae,pe){var ye=this;void 0===pe&&(pe=!1);var Ee=Math.round(1e18*Math.random()).toString(36).substring(0,10);Y&&(this.callbacks[Ee]=Y);var je=B(this.globalScope)?void 0:[];return this.target.postMessage({id:Ee,type:M,hasCallback:!!Y,targetMapId:ae,mustQueue:pe,sourceMapId:this.mapId,data:ci(I,je)},je),{cancel:function(){Y&&delete ye.callbacks[Ee],ye.target.postMessage({id:Ee,type:"<cancel>",targetMapId:ae,sourceMapId:ye.mapId})}}},Kl.prototype.receive=function(M){var I=M.data,Y=I.id;if(Y&&(!I.targetMapId||this.mapId===I.targetMapId))if("<cancel>"===I.type){delete this.tasks[Y];var ae=this.cancelCallbacks[Y];delete this.cancelCallbacks[Y],ae&&ae()}else S()||I.mustQueue?(this.tasks[Y]=I,this.taskQueue.push(Y),this.invoker.trigger()):this.processTask(Y,I)},Kl.prototype.process=function(){if(this.taskQueue.length){var M=this.taskQueue.shift(),I=this.tasks[M];delete this.tasks[M],this.taskQueue.length&&this.invoker.trigger(),I&&this.processTask(M,I)}},Kl.prototype.processTask=function(M,I){var Y=this;if("<response>"===I.type){var ae=this.callbacks[M];delete this.callbacks[M],ae&&(I.error?ae(Ii(I.error)):ae(null,Ii(I.data)))}else{var pe=!1,ye=B(this.globalScope)?void 0:[],Ee=I.hasCallback?function(bt,qt){pe=!0,delete Y.cancelCallbacks[M],Y.target.postMessage({id:M,type:"<response>",sourceMapId:Y.mapId,error:bt?ci(bt):null,data:ci(qt,ye)},ye)}:function(bt){pe=!0},je=null,$e=Ii(I.data);if(this.parent[I.type])je=this.parent[I.type](I.sourceMapId,$e,Ee);else if(this.parent.getWorkerSource){var pt=I.type.split(".");je=this.parent.getWorkerSource(I.sourceMapId,pt[0],$e.source)[pt[1]]($e,Ee)}else Ee(new Error("Could not find function "+I.type));!pe&&je&&je.cancel&&(this.cancelCallbacks[M]=je.cancel)}},Kl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var wo=function(M,I){M&&(I?this.setSouthWest(M).setNorthEast(I):4===M.length?this.setSouthWest([M[0],M[1]]).setNorthEast([M[2],M[3]]):this.setSouthWest(M[0]).setNorthEast(M[1]))};wo.prototype.setNorthEast=function(M){return this._ne=M instanceof qa?new qa(M.lng,M.lat):qa.convert(M),this},wo.prototype.setSouthWest=function(M){return this._sw=M instanceof qa?new qa(M.lng,M.lat):qa.convert(M),this},wo.prototype.extend=function(M){var I,Y,ae=this._sw,pe=this._ne;if(M instanceof qa)I=M,Y=M;else{if(!(M instanceof wo))return Array.isArray(M)?4===M.length||M.every(Array.isArray)?this.extend(wo.convert(M)):this.extend(qa.convert(M)):this;if(Y=M._ne,!(I=M._sw)||!Y)return this}return ae||pe?(ae.lng=Math.min(I.lng,ae.lng),ae.lat=Math.min(I.lat,ae.lat),pe.lng=Math.max(Y.lng,pe.lng),pe.lat=Math.max(Y.lat,pe.lat)):(this._sw=new qa(I.lng,I.lat),this._ne=new qa(Y.lng,Y.lat)),this},wo.prototype.getCenter=function(){return new qa((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},wo.prototype.getSouthWest=function(){return this._sw},wo.prototype.getNorthEast=function(){return this._ne},wo.prototype.getNorthWest=function(){return new qa(this.getWest(),this.getNorth())},wo.prototype.getSouthEast=function(){return new qa(this.getEast(),this.getSouth())},wo.prototype.getWest=function(){return this._sw.lng},wo.prototype.getSouth=function(){return this._sw.lat},wo.prototype.getEast=function(){return this._ne.lng},wo.prototype.getNorth=function(){return this._ne.lat},wo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},wo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},wo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},wo.prototype.contains=function(M){var I=qa.convert(M),Y=I.lng,ae=I.lat,ye=this._sw.lng<=Y&&Y<=this._ne.lng;return this._sw.lng>this._ne.lng&&(ye=this._sw.lng>=Y&&Y>=this._ne.lng),this._sw.lat<=ae&&ae<=this._ne.lat&&ye},wo.convert=function(M){return!M||M instanceof wo?M:new wo(M)};var qa=function(M,I){if(isNaN(M)||isNaN(I))throw new Error("Invalid LngLat object: ("+M+", "+I+")");if(this.lng=+M,this.lat=+I,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};qa.prototype.wrap=function(){return new qa(c(this.lng,-180,180),this.lat)},qa.prototype.toArray=function(){return[this.lng,this.lat]},qa.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},qa.prototype.distanceTo=function(M){var I=Math.PI/180,Y=this.lat*I,ae=M.lat*I,pe=Math.sin(Y)*Math.sin(ae)+Math.cos(Y)*Math.cos(ae)*Math.cos((M.lng-this.lng)*I);return 6371008.8*Math.acos(Math.min(pe,1))},qa.prototype.toBounds=function(M){void 0===M&&(M=0);var I=360*M/40075017,Y=I/Math.cos(Math.PI/180*this.lat);return new wo(new qa(this.lng-Y,this.lat-I),new qa(this.lng+Y,this.lat+I))},qa.convert=function(M){if(M instanceof qa)return M;if(Array.isArray(M)&&(2===M.length||3===M.length))return new qa(Number(M[0]),Number(M[1]));if(!Array.isArray(M)&&"object"==typeof M&&null!==M)return new qa(Number("lng"in M?M.lng:M.lon),Number(M.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Yf=2*Math.PI*6371008.8;function Wf(M){return Yf*Math.cos(M*Math.PI/180)}function Zf(M){return(180+M)/360}function Xf(M){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+M*Math.PI/360)))/360}function Jf(M,I){return M/Wf(I)}function Gu(M){return 360/Math.PI*Math.atan(Math.exp((180-360*M)*Math.PI/180))-90}var Rl=function(M,I,Y){void 0===Y&&(Y=0),this.x=+M,this.y=+I,this.z=+Y};Rl.fromLngLat=function(M,I){void 0===I&&(I=0);var Y=qa.convert(M);return new Rl(Zf(Y.lng),Xf(Y.lat),Jf(I,Y.lat))},Rl.prototype.toLngLat=function(){return new qa(360*this.x-180,Gu(this.y))},Rl.prototype.toAltitude=function(){return this.z*Wf(Gu(this.y))},Rl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Yf*(M=Gu(this.y),1/Math.cos(M*Math.PI/180));var M};var zl=function(M,I,Y){this.z=M,this.x=I,this.y=Y,this.key=Tc(0,M,M,I,Y)};zl.prototype.equals=function(M){return this.z===M.z&&this.x===M.x&&this.y===M.y},zl.prototype.url=function(M,I){var Y,ae,pe,ye,Ee,je=(ae=this.y,pe=this.z,ye=qf(256*(Y=this.x),256*(ae=Math.pow(2,pe)-ae-1),pe),Ee=qf(256*(Y+1),256*(ae+1),pe),ye[0]+","+ye[1]+","+Ee[0]+","+Ee[1]),$e=function(pt,bt,qt){for(var tr,Kt="",hr=pt;hr>0;hr--)Kt+=(bt&(tr=1<<hr-1)?1:0)+(qt&tr?2:0);return Kt}(this.z,this.x,this.y);return M[(this.x+this.y)%M.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===I?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",$e).replace("{bbox-epsg-3857}",je)},zl.prototype.getTilePoint=function(M){var I=Math.pow(2,this.z);return new r(8192*(M.x*I-this.x),8192*(M.y*I-this.y))},zl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Kf=function(M,I){this.wrap=M,this.canonical=I,this.key=Tc(M,I.z,I.z,I.x,I.y)},Ao=function(M,I,Y,ae,pe){this.overscaledZ=M,this.wrap=I,this.canonical=new zl(Y,+ae,+pe),this.key=Tc(I,M,Y,ae,pe)};function Tc(M,I,Y,ae,pe){(M*=2)<0&&(M=-1*M-1);var ye=1<<Y;return(ye*ye*M+ye*pe+ae).toString(36)+Y.toString(36)+I.toString(36)}Ao.prototype.equals=function(M){return this.overscaledZ===M.overscaledZ&&this.wrap===M.wrap&&this.canonical.equals(M.canonical)},Ao.prototype.scaledTo=function(M){var I=this.canonical.z-M;return M>this.canonical.z?new Ao(M,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ao(M,this.wrap,M,this.canonical.x>>I,this.canonical.y>>I)},Ao.prototype.calculateScaledKey=function(M,I){var Y=this.canonical.z-M;return M>this.canonical.z?Tc(this.wrap*+I,M,this.canonical.z,this.canonical.x,this.canonical.y):Tc(this.wrap*+I,M,M,this.canonical.x>>Y,this.canonical.y>>Y)},Ao.prototype.isChildOf=function(M){if(M.wrap!==this.wrap)return!1;var I=this.canonical.z-M.canonical.z;return 0===M.overscaledZ||M.overscaledZ<this.overscaledZ&&M.canonical.x===this.canonical.x>>I&&M.canonical.y===this.canonical.y>>I},Ao.prototype.children=function(M){if(this.overscaledZ>=M)return[new Ao(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var I=this.canonical.z+1,Y=2*this.canonical.x,ae=2*this.canonical.y;return[new Ao(I,this.wrap,I,Y,ae),new Ao(I,this.wrap,I,Y+1,ae),new Ao(I,this.wrap,I,Y,ae+1),new Ao(I,this.wrap,I,Y+1,ae+1)]},Ao.prototype.isLessThan=function(M){return this.wrap<M.wrap||!(this.wrap>M.wrap)&&(this.overscaledZ<M.overscaledZ||!(this.overscaledZ>M.overscaledZ)&&(this.canonical.x<M.canonical.x||!(this.canonical.x>M.canonical.x)&&this.canonical.y<M.canonical.y))},Ao.prototype.wrapped=function(){return new Ao(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Ao.prototype.unwrapTo=function(M){return new Ao(this.overscaledZ,M,this.canonical.z,this.canonical.x,this.canonical.y)},Ao.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Ao.prototype.toUnwrapped=function(){return new Kf(this.wrap,this.canonical)},Ao.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Ao.prototype.getTilePoint=function(M){return this.canonical.getTilePoint(new Rl(M.x-this.wrap,M.y))},rn("CanonicalTileID",zl),rn("OverscaledTileID",Ao,{omit:["posMatrix"]});var _l=function(M,I,Y){if(this.uid=M,I.height!==I.width)throw new RangeError("DEM tiles must be square");if(Y&&"mapbox"!==Y&&"terrarium"!==Y)return k('"'+Y+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=I.height;var ae=this.dim=I.height-2;this.data=new Uint32Array(I.data.buffer),this.encoding=Y||"mapbox";for(var pe=0;pe<ae;pe++)this.data[this._idx(-1,pe)]=this.data[this._idx(0,pe)],this.data[this._idx(ae,pe)]=this.data[this._idx(ae-1,pe)],this.data[this._idx(pe,-1)]=this.data[this._idx(pe,0)],this.data[this._idx(pe,ae)]=this.data[this._idx(pe,ae-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ae,-1)]=this.data[this._idx(ae-1,0)],this.data[this._idx(-1,ae)]=this.data[this._idx(0,ae-1)],this.data[this._idx(ae,ae)]=this.data[this._idx(ae-1,ae-1)]};_l.prototype.get=function(M,I){var Y=new Uint8Array(this.data.buffer),ae=4*this._idx(M,I);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(Y[ae],Y[ae+1],Y[ae+2])},_l.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},_l.prototype._idx=function(M,I){if(M<-1||M>=this.dim+1||I<-1||I>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(I+1)*this.stride+(M+1)},_l.prototype._unpackMapbox=function(M,I,Y){return(256*M*256+256*I+Y)/10-1e4},_l.prototype._unpackTerrarium=function(M,I,Y){return 256*M+I+Y/256-32768},_l.prototype.getPixels=function(){return new fs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},_l.prototype.backfillBorder=function(M,I,Y){if(this.dim!==M.dim)throw new Error("dem dimension mismatch");var ae=I*this.dim,pe=I*this.dim+this.dim,ye=Y*this.dim,Ee=Y*this.dim+this.dim;switch(I){case-1:ae=pe-1;break;case 1:pe=ae+1}switch(Y){case-1:ye=Ee-1;break;case 1:Ee=ye+1}for(var je=-I*this.dim,$e=-Y*this.dim,pt=ye;pt<Ee;pt++)for(var bt=ae;bt<pe;bt++)this.data[this._idx(bt,pt)]=M.data[this._idx(bt+je,pt+$e)]},rn("DEMData",_l);var eu=function(M){this._stringToNumber={},this._numberToString=[];for(var I=0;I<M.length;I++){var Y=M[I];this._stringToNumber[Y]=I,this._numberToString[I]=Y}};eu.prototype.encode=function(M){return this._stringToNumber[M]},eu.prototype.decode=function(M){return this._numberToString[M]};var tu=function(M,I,Y,ae,pe){this.type="Feature",this._vectorTileFeature=M,M._z=I,M._x=Y,M._y=ae,this.properties=M.properties,this.id=pe},Hu={geometry:{configurable:!0}};Hu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Hu.geometry.set=function(M){this._geometry=M},tu.prototype.toJSON=function(){var M={geometry:this.geometry};for(var I in this)"_geometry"!==I&&"_vectorTileFeature"!==I&&(M[I]=this[I]);return M},Object.defineProperties(tu.prototype,Hu);var $l=function(){this.state={},this.stateChanges={},this.deletedStates={}};$l.prototype.updateState=function(M,I,Y){var ae=String(I);if(this.stateChanges[M]=this.stateChanges[M]||{},this.stateChanges[M][ae]=this.stateChanges[M][ae]||{},h(this.stateChanges[M][ae],Y),null===this.deletedStates[M])for(var pe in this.deletedStates[M]={},this.state[M])pe!==ae&&(this.deletedStates[M][pe]=null);else if(this.deletedStates[M]&&null===this.deletedStates[M][ae])for(var ye in this.deletedStates[M][ae]={},this.state[M][ae])Y[ye]||(this.deletedStates[M][ae][ye]=null);else for(var Ee in Y)this.deletedStates[M]&&this.deletedStates[M][ae]&&null===this.deletedStates[M][ae][Ee]&&delete this.deletedStates[M][ae][Ee]},$l.prototype.removeFeatureState=function(M,I,Y){if(null!==this.deletedStates[M]){var ae=String(I);if(this.deletedStates[M]=this.deletedStates[M]||{},Y&&void 0!==I)null!==this.deletedStates[M][ae]&&(this.deletedStates[M][ae]=this.deletedStates[M][ae]||{},this.deletedStates[M][ae][Y]=null);else if(void 0!==I)if(this.stateChanges[M]&&this.stateChanges[M][ae])for(Y in this.deletedStates[M][ae]={},this.stateChanges[M][ae])this.deletedStates[M][ae][Y]=null;else this.deletedStates[M][ae]=null;else this.deletedStates[M]=null}},$l.prototype.getState=function(M,I){var Y=String(I),ye=h({},(this.state[M]||{})[Y],(this.stateChanges[M]||{})[Y]);if(null===this.deletedStates[M])return{};if(this.deletedStates[M]){var Ee=this.deletedStates[M][I];if(null===Ee)return{};for(var je in Ee)delete ye[je]}return ye},$l.prototype.initializeTileState=function(M,I){M.setFeatureState(this.state,I)},$l.prototype.coalesceChanges=function(M,I){var Y={};for(var ae in this.stateChanges){this.state[ae]=this.state[ae]||{};var pe={};for(var ye in this.stateChanges[ae])this.state[ae][ye]||(this.state[ae][ye]={}),h(this.state[ae][ye],this.stateChanges[ae][ye]),pe[ye]=this.state[ae][ye];Y[ae]=pe}for(var Ee in this.deletedStates){this.state[Ee]=this.state[Ee]||{};var je={};if(null===this.deletedStates[Ee])for(var $e in this.state[Ee])je[$e]={},this.state[Ee][$e]={};else for(var pt in this.deletedStates[Ee]){if(null===this.deletedStates[Ee][pt])this.state[Ee][pt]={};else for(var bt=0,qt=Object.keys(this.deletedStates[Ee][pt]);bt<qt.length;bt+=1)delete this.state[Ee][pt][qt[bt]];je[pt]=this.state[Ee][pt]}Y[Ee]=Y[Ee]||{},h(Y[Ee],je)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(Y).length)for(var Kt in M)M[Kt].setFeatureState(Y,I)};var wl=function(M,I){this.tileID=M,this.x=M.canonical.x,this.y=M.canonical.y,this.z=M.canonical.z,this.grid=new bn(8192,16,0),this.grid3D=new bn(8192,16,0),this.featureIndexArray=new Lt,this.promoteId=I};function $f(M,I,Y,ae,pe){return _(M,function(ye,Ee){var je=I instanceof ls?I.get(Ee):null;return je&&je.evaluate?je.evaluate(Y,ae,pe):je})}function Qf(M){for(var I=1/0,Y=1/0,ae=-1/0,pe=-1/0,ye=0,Ee=M;ye<Ee.length;ye+=1){var je=Ee[ye];I=Math.min(I,je.x),Y=Math.min(Y,je.y),ae=Math.max(ae,je.x),pe=Math.max(pe,je.y)}return{minX:I,minY:Y,maxX:ae,maxY:pe}}function kd(M,I){return I-M}wl.prototype.insert=function(M,I,Y,ae,pe,ye){var Ee=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Y,ae,pe);for(var je=ye?this.grid3D:this.grid,$e=0;$e<I.length;$e++){for(var pt=I[$e],bt=[1/0,1/0,-1/0,-1/0],qt=0;qt<pt.length;qt++){var tr=pt[qt];bt[0]=Math.min(bt[0],tr.x),bt[1]=Math.min(bt[1],tr.y),bt[2]=Math.max(bt[2],tr.x),bt[3]=Math.max(bt[3],tr.y)}bt[0]<8192&&bt[1]<8192&&bt[2]>=0&&bt[3]>=0&&je.insert(Ee,bt[0],bt[1],bt[2],bt[3])}},wl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ul.VectorTile(new Gc(this.rawTileData)).layers,this.sourceLayerCoder=new eu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},wl.prototype.query=function(M,I,Y,ae){var pe=this;this.loadVTLayers();for(var ye=M.params||{},Ee=8192/M.tileSize/M.scale,je=Ri(ye.filter),$e=M.queryGeometry,pt=M.queryPadding*Ee,bt=Qf($e),qt=this.grid.query(bt.minX-pt,bt.minY-pt,bt.maxX+pt,bt.maxY+pt),tr=Qf(M.cameraQueryGeometry),hr=0,Ar=this.grid3D.query(tr.minX-pt,tr.minY-pt,tr.maxX+pt,tr.maxY+pt,function(kn,On,$n,Xn){return function(ii,vi,yi,li,ki){for(var wi=0,xi=ii;wi<xi.length;wi+=1){var da=xi[wi];if(vi<=da.x&&yi<=da.y&&li>=da.x&&ki>=da.y)return!0}var la=[new r(vi,yi),new r(vi,ki),new r(li,ki),new r(li,yi)];if(ii.length>2)for(var ba=0,Pi=la;ba<Pi.length;ba+=1)if(us(ii,Pi[ba]))return!0;for(var ua=0;ua<ii.length-1;ua++)if(ml(ii[ua],ii[ua+1],la))return!0;return!1}(M.cameraQueryGeometry,kn-pt,On-pt,$n+pt,Xn+pt)});hr<Ar.length;hr+=1)qt.push(Ar[hr]);qt.sort(kd);for(var Nr,Yr={},Wr=function(kn){var On=qt[kn];if(On!==Nr){Nr=On;var $n=pe.featureIndexArray.get(On),Xn=null;pe.loadMatchingFeature(Yr,$n.bucketIndex,$n.sourceLayerIndex,$n.featureIndex,je,ye.layers,ye.availableImages,I,Y,ae,function(ii,vi,yi){return Xn||(Xn=Ea(ii)),vi.queryIntersectsFeature($e,ii,yi,Xn,pe.z,M.transform,Ee,M.pixelPosMatrix)})}},tn=0;tn<qt.length;tn++)Wr(tn);return Yr},wl.prototype.loadMatchingFeature=function(M,I,Y,ae,pe,ye,Ee,je,$e,pt,bt){var qt=this.bucketLayerIDs[I];if(!ye||function($n,Xn){for(var ii=0;ii<$n.length;ii++)if(Xn.indexOf($n[ii])>=0)return!0;return!1}(ye,qt)){var tr=this.sourceLayerCoder.decode(Y),Kt=this.vtLayers[tr].feature(ae);if(pe.filter(new ma(this.tileID.overscaledZ),Kt))for(var hr=this.getId(Kt,tr),Ar=0;Ar<qt.length;Ar++){var jr=qt[Ar];if(!(ye&&ye.indexOf(jr)<0)){var Nr=je[jr];if(Nr){var Yr={};void 0!==hr&&pt&&(Yr=pt.getState(Nr.sourceLayer||"_geojsonTileLayer",hr));var Wr=$e[jr];Wr.paint=$f(Wr.paint,Nr.paint,Kt,Yr,Ee),Wr.layout=$f(Wr.layout,Nr.layout,Kt,Yr,Ee);var tn=!bt||bt(Kt,Nr,Yr);if(tn){var kn=new tu(Kt,this.z,this.x,this.y,hr);kn.layer=Wr;var On=M[jr];void 0===On&&(On=M[jr]=[]),On.push({featureIndex:ae,feature:kn,intersectionZ:tn})}}}}}},wl.prototype.lookupSymbolFeatures=function(M,I,Y,ae,pe,ye,Ee,je){var $e={};this.loadVTLayers();for(var pt=Ri(pe),bt=0,qt=M;bt<qt.length;bt+=1)this.loadMatchingFeature($e,Y,ae,qt[bt],pt,ye,Ee,je,I);return $e},wl.prototype.hasLayer=function(M){for(var I=0,Y=this.bucketLayerIDs;I<Y.length;I+=1)for(var ae=0,pe=Y[I];ae<pe.length;ae+=1)if(M===pe[ae])return!0;return!1},wl.prototype.getId=function(M,I){var Y=M.id;return this.promoteId&&"boolean"==typeof(Y=M.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[I]])&&(Y=Number(Y)),Y},rn("FeatureIndex",wl,{omit:["rawTileData","sourceLayerCoder"]});var zo=function(M,I){this.tileID=M,this.uid=d(),this.uses=0,this.tileSize=I,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};zo.prototype.registerFadeDuration=function(M){var I=M+this.timeAdded;I<N.now()||this.fadeEndTime&&I<this.fadeEndTime||(this.fadeEndTime=I)},zo.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},zo.prototype.loadVectorData=function(M,I,Y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",M){for(var ae in M.featureIndex&&(this.latestFeatureIndex=M.featureIndex,M.rawTileData?(this.latestRawTileData=M.rawTileData,this.latestFeatureIndex.rawTileData=M.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=M.collisionBoxArray,this.buckets=function(pt,bt){var qt={};if(!bt)return qt;for(var tr=function(){var Ar=hr[Kt],jr=Ar.layerIds.map(function(tn){return bt.getLayer(tn)}).filter(Boolean);if(0!==jr.length){Ar.layers=jr,Ar.stateDependentLayerIds&&(Ar.stateDependentLayers=Ar.stateDependentLayerIds.map(function(tn){return jr.filter(function(kn){return kn.id===tn})[0]}));for(var Nr=0,Yr=jr;Nr<Yr.length;Nr+=1)qt[Yr[Nr].id]=Ar}},Kt=0,hr=pt;Kt<hr.length;Kt+=1)tr();return qt}(M.buckets,I.style),this.hasSymbolBuckets=!1,this.buckets){var pe=this.buckets[ae];if(pe instanceof Ma){if(this.hasSymbolBuckets=!0,!Y)break;pe.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var ye in this.buckets){var Ee=this.buckets[ye];if(Ee instanceof Ma&&Ee.hasRTLText){this.hasRTLText=!0,mo.isLoading()||mo.isLoaded()||"deferred"!==eo()||ga();break}}for(var je in this.queryPadding=0,this.buckets){var $e=this.buckets[je];this.queryPadding=Math.max(this.queryPadding,I.style.getLayer(je).queryRadius($e))}M.imageAtlas&&(this.imageAtlas=M.imageAtlas),M.glyphAtlasImage&&(this.glyphAtlasImage=M.glyphAtlasImage)}else this.collisionBoxArray=new xe},zo.prototype.unloadVectorData=function(){for(var M in this.buckets)this.buckets[M].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},zo.prototype.getBucket=function(M){return this.buckets[M.id]},zo.prototype.upload=function(M){for(var I in this.buckets){var Y=this.buckets[I];Y.uploadPending()&&Y.upload(M)}var ae=M.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Pl(M,this.imageAtlas.image,ae.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Pl(M,this.glyphAtlasImage,ae.ALPHA),this.glyphAtlasImage=null)},zo.prototype.prepare=function(M){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(M,this.imageAtlasTexture)},zo.prototype.queryRenderedFeatures=function(M,I,Y,ae,pe,ye,Ee,je,$e,pt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ae,cameraQueryGeometry:pe,scale:ye,tileSize:this.tileSize,pixelPosMatrix:pt,transform:je,params:Ee,queryPadding:this.queryPadding*$e},M,I,Y):{}},zo.prototype.querySourceFeatures=function(M,I){var Y=this.latestFeatureIndex;if(Y&&Y.rawTileData){var ae=Y.loadVTLayers(),pe=I?I.sourceLayer:"",ye=ae._geojsonTileLayer||ae[pe];if(ye)for(var Ee=Ri(I&&I.filter),je=this.tileID.canonical,$e=je.z,pt=je.x,bt=je.y,qt={z:$e,x:pt,y:bt},tr=0;tr<ye.length;tr++){var Kt=ye.feature(tr);if(Ee.filter(new ma(this.tileID.overscaledZ),Kt)){var hr=Y.getId(Kt,pe),Ar=new tu(Kt,$e,pt,bt,hr);Ar.tile=qt,M.push(Ar)}}}},zo.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},zo.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},zo.prototype.setExpiryData=function(M){var I=this.expirationTime;if(M.cacheControl){var Y=C(M.cacheControl);Y["max-age"]&&(this.expirationTime=Date.now()+1e3*Y["max-age"])}else M.expires&&(this.expirationTime=new Date(M.expires).getTime());if(this.expirationTime){var ae=Date.now(),pe=!1;if(this.expirationTime>ae)pe=!1;else if(I)if(this.expirationTime<I)pe=!0;else{var ye=this.expirationTime-I;ye?this.expirationTime=ae+Math.max(ye,3e4):pe=!0}else pe=!0;pe?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},zo.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},zo.prototype.setFeatureState=function(M,I){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(M).length){var Y=this.latestFeatureIndex.loadVTLayers();for(var ae in this.buckets)if(I.style.hasLayer(ae)){var pe=this.buckets[ae],ye=pe.layers[0].sourceLayer||"_geojsonTileLayer",Ee=Y[ye],je=M[ye];if(Ee&&je&&0!==Object.keys(je).length){pe.update(je,Ee,this.imageAtlas&&this.imageAtlas.patternPositions||{});var $e=I&&I.style&&I.style.getLayer(ae);$e&&(this.queryPadding=Math.max(this.queryPadding,$e.queryRadius(pe)))}}}},zo.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},zo.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<N.now()},zo.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},zo.prototype.setHoldDuration=function(M){this.symbolFadeHoldUntil=N.now()+M},zo.prototype.setDependencies=function(M,I){for(var Y={},ae=0,pe=I;ae<pe.length;ae+=1)Y[pe[ae]]=!0;this.dependencies[M]=Y},zo.prototype.hasDependency=function(M,I){for(var Y=0,ae=M;Y<ae.length;Y+=1){var ye=this.dependencies[ae[Y]];if(ye)for(var Ee=0,je=I;Ee<je.length;Ee+=1)if(ye[je[Ee]])return!0}return!1};var Cl=self.performance,eh=function(M){this._marks={start:[M.url,"start"].join("#"),end:[M.url,"end"].join("#"),measure:M.url.toString()},Cl.mark(this._marks.start)};eh.prototype.finish=function(){Cl.mark(this._marks.end);var M=Cl.getEntriesByName(this._marks.measure);return 0===M.length&&(Cl.measure(this._marks.measure,this._marks.start,this._marks.end),M=Cl.getEntriesByName(this._marks.measure),Cl.clearMarks(this._marks.start),Cl.clearMarks(this._marks.end),Cl.clearMeasures(this._marks.measure)),M},e.Actor=Kl,e.AlphaImage=Sl,e.CanonicalTileID=zl,e.CollisionBoxArray=xe,e.Color=mr,e.DEMData=_l,e.DataConstantProperty=bi,e.DictionaryCoder=eu,e.EXTENT=8192,e.ErrorEvent=De,e.EvaluationParameters=ma,e.Event=ke,e.Evented=Re,e.FeatureIndex=wl,e.FillBucket=Ks,e.FillExtrusionBucket=$s,e.ImageAtlas=wc,e.ImagePosition=qc,e.LineBucket=xs,e.LngLat=qa,e.LngLatBounds=wo,e.MercatorCoordinate=Rl,e.ONE_EM=24,e.OverscaledTileID=Ao,e.Point=r,e.Point$1=r,e.Properties=Oo,e.Protobuf=Gc,e.RGBAImage=fs,e.RequestManager=ne,e.RequestPerformance=eh,e.ResourceType=dt,e.SegmentVector=Ht,e.SourceFeatureState=$l,e.StructArrayLayout1ui2=H,e.StructArrayLayout2f1f2i16=al,e.StructArrayLayout2i4=cs,e.StructArrayLayout3ui6=ho,e.StructArrayLayout4i8=ja,e.SymbolBucket=Ma,e.Texture=Pl,e.Tile=zo,e.Transitionable=gs,e.Uniform1f=Jr,e.Uniform1i=_i,e.Uniform2f=zn,e.Uniform3f=oi,e.Uniform4f=ni,e.UniformColor=pi,e.UniformMatrix4f=zi,e.UnwrappedTileID=Kf,e.ValidationError=Ke,e.WritingMode=zs,e.ZoomHistory=Ui,e.add=function(M,I,Y){return M[0]=I[0]+Y[0],M[1]=I[1]+Y[1],M[2]=I[2]+Y[2],M},e.addDynamicAttributes=ju,e.asyncAll=function(M,I,Y){if(!M.length)return Y(null,[]);var ae=M.length,pe=new Array(M.length),ye=null;M.forEach(function(Ee,je){I(Ee,function($e,pt){$e&&(ye=$e),pe[je]=pt,0==--ae&&Y(ye,pe)})})},e.bezier=s,e.bindAll=g,e.browser=N,e.cacheEntryPossiblyAdded=function(M){++nt>He&&(M.getActor().send("enforceCacheSizeLimit",ze),nt=0)},e.clamp=l,e.clearTileCache=function(M){var I=self.caches.delete("mapbox-tiles");M&&I.catch(M).then(function(){return M()})},e.clipLine=Rf,e.clone=function(M){var I=new Qo(16);return I[0]=M[0],I[1]=M[1],I[2]=M[2],I[3]=M[3],I[4]=M[4],I[5]=M[5],I[6]=M[6],I[7]=M[7],I[8]=M[8],I[9]=M[9],I[10]=M[10],I[11]=M[11],I[12]=M[12],I[13]=M[13],I[14]=M[14],I[15]=M[15],I},e.clone$1=T,e.clone$2=function(M){var I=new Qo(3);return I[0]=M[0],I[1]=M[1],I[2]=M[2],I},e.collisionCircleLayout=Yh,e.config=V,e.create=function(){var M=new Qo(16);return Qo!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=0,M[12]=0,M[13]=0,M[14]=0),M[0]=1,M[5]=1,M[10]=1,M[15]=1,M},e.create$1=function(){var M=new Qo(9);return Qo!=Float32Array&&(M[1]=0,M[2]=0,M[3]=0,M[5]=0,M[6]=0,M[7]=0),M[0]=1,M[4]=1,M[8]=1,M},e.create$2=function(){var M=new Qo(4);return Qo!=Float32Array&&(M[1]=0,M[2]=0),M[0]=1,M[3]=1,M},e.createCommonjsModule=n,e.createExpression=er,e.createLayout=ha,e.createStyleLayer=function(M){return"custom"===M.type?new Td(M):new Md[M.type](M)},e.cross=function(M,I,Y){var ae=I[0],pe=I[1],ye=I[2],Ee=Y[0],je=Y[1],$e=Y[2];return M[0]=pe*$e-ye*je,M[1]=ye*Ee-ae*$e,M[2]=ae*je-pe*Ee,M},e.deepEqual=function M(I,Y){if(Array.isArray(I)){if(!Array.isArray(Y)||I.length!==Y.length)return!1;for(var ae=0;ae<I.length;ae++)if(!M(I[ae],Y[ae]))return!1;return!0}if("object"==typeof I&&null!==I&&null!==Y){if("object"!=typeof Y||Object.keys(I).length!==Object.keys(Y).length)return!1;for(var pe in I)if(!M(I[pe],Y[pe]))return!1;return!0}return I===Y},e.dot=function(M,I){return M[0]*I[0]+M[1]*I[1]+M[2]*I[2]},e.dot$1=function(M,I){return M[0]*I[0]+M[1]*I[1]+M[2]*I[2]+M[3]*I[3]},e.ease=i,e.emitValidationErrors=Rn,e.endsWith=w,e.enforceCacheSizeLimit=function(M){tt(),Te&&Te.then(function(I){I.keys().then(function(Y){for(var ae=0;ae<Y.length-M;ae++)I.delete(Y[ae])})})},e.evaluateSizeForFeature=Ef,e.evaluateSizeForZoom=Lf,e.evaluateVariableOffset=Bf,e.evented=Pa,e.extend=h,e.featureFilter=Ri,e.filterObject=A,e.fromRotation=function(M,I){var Y=Math.sin(I),ae=Math.cos(I);return M[0]=ae,M[1]=Y,M[2]=0,M[3]=-Y,M[4]=ae,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M},e.getAnchorAlignment=zu,e.getAnchorJustification=Nu,e.getArrayBuffer=St,e.getImage=Ze,e.getJSON=function(M,I){return rt(h(M,{type:"json"}),I)},e.getRTLTextPluginStatus=eo,e.getReferrer=Et,e.getVideo=function(M,I){var Y,ae,pe=self.document.createElement("video");pe.muted=!0,pe.onloadstart=function(){I(null,pe)};for(var ye=0;ye<M.length;ye++){var Ee=self.document.createElement("source");Y=M[ye],ae=void 0,(ae=self.document.createElement("a")).href=Y,(ae.protocol!==self.document.location.protocol||ae.host!==self.document.location.host)&&(pe.crossOrigin="Anonymous"),Ee.src=M[ye],pe.appendChild(Ee)}return{cancel:function(){}}},e.identity=Il,e.invert=function(M,I){var Y=I[0],ae=I[1],pe=I[2],ye=I[3],Ee=I[4],je=I[5],$e=I[6],pt=I[7],bt=I[8],qt=I[9],tr=I[10],Kt=I[11],hr=I[12],Ar=I[13],jr=I[14],Nr=I[15],Yr=Y*je-ae*Ee,Wr=Y*$e-pe*Ee,tn=Y*pt-ye*Ee,kn=ae*$e-pe*je,On=ae*pt-ye*je,$n=pe*pt-ye*$e,Xn=bt*Ar-qt*hr,ii=bt*jr-tr*hr,vi=bt*Nr-Kt*hr,yi=qt*jr-tr*Ar,li=qt*Nr-Kt*Ar,ki=tr*Nr-Kt*jr,wi=Yr*ki-Wr*li+tn*yi+kn*vi-On*ii+$n*Xn;return wi?(M[0]=(je*ki-$e*li+pt*yi)*(wi=1/wi),M[1]=(pe*li-ae*ki-ye*yi)*wi,M[2]=(Ar*$n-jr*On+Nr*kn)*wi,M[3]=(tr*On-qt*$n-Kt*kn)*wi,M[4]=($e*vi-Ee*ki-pt*ii)*wi,M[5]=(Y*ki-pe*vi+ye*ii)*wi,M[6]=(jr*tn-hr*$n-Nr*Wr)*wi,M[7]=(bt*$n-tr*tn+Kt*Wr)*wi,M[8]=(Ee*li-je*vi+pt*Xn)*wi,M[9]=(ae*vi-Y*li-ye*Xn)*wi,M[10]=(hr*On-Ar*tn+Nr*Yr)*wi,M[11]=(qt*tn-bt*On-Kt*Yr)*wi,M[12]=(je*ii-Ee*yi-$e*Xn)*wi,M[13]=(Y*yi-ae*ii+pe*Xn)*wi,M[14]=(Ar*Wr-hr*kn-jr*Yr)*wi,M[15]=(bt*kn-qt*Wr+tr*Yr)*wi,M):null},e.isChar=jn,e.isMapboxURL=se,e.keysDifference=function(M,I){var Y=[];for(var ae in M)ae in I||Y.push(ae);return Y},e.makeRequest=rt,e.mapObject=_,e.mercatorXfromLng=Zf,e.mercatorYfromLat=Xf,e.mercatorZfromAltitude=Jf,e.mul=hc,e.multiply=vl,e.mvt=Ul,e.normalize=function(M,I){var Y=I[0],ae=I[1],pe=I[2],ye=Y*Y+ae*ae+pe*pe;return ye>0&&(ye=1/Math.sqrt(ye)),M[0]=I[0]*ye,M[1]=I[1]*ye,M[2]=I[2]*ye,M},e.number=ti,e.offscreenCanvasSupported=ft,e.ortho=function(M,I,Y,ae,pe,ye,Ee){var je=1/(I-Y),$e=1/(ae-pe),pt=1/(ye-Ee);return M[0]=-2*je,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=-2*$e,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=2*pt,M[11]=0,M[12]=(I+Y)*je,M[13]=(pe+ae)*$e,M[14]=(Ee+ye)*pt,M[15]=1,M},e.parseGlyphPBF=function(M){return new Gc(M).readFields(nd,[])},e.pbf=Gc,e.performSymbolLayout=function(M,I,Y,ae,pe,ye,Ee){M.createArrays(),M.tilePixelRatio=8192/(512*M.overscaling),M.compareText={},M.iconsNeedLinear=!1;var $e=M.layers[0].layout,pt=M.layers[0]._unevaluatedLayout._values,bt={};if("composite"===M.textSizeData.kind){var qt=M.textSizeData,Kt=qt.maxZoom;bt.compositeTextSizes=[pt["text-size"].possiblyEvaluate(new ma(qt.minZoom),Ee),pt["text-size"].possiblyEvaluate(new ma(Kt),Ee)]}if("composite"===M.iconSizeData.kind){var hr=M.iconSizeData,jr=hr.maxZoom;bt.compositeIconSizes=[pt["icon-size"].possiblyEvaluate(new ma(hr.minZoom),Ee),pt["icon-size"].possiblyEvaluate(new ma(jr),Ee)]}bt.layoutTextSize=pt["text-size"].possiblyEvaluate(new ma(M.zoom+1),Ee),bt.layoutIconSize=pt["icon-size"].possiblyEvaluate(new ma(M.zoom+1),Ee),bt.textMaxSize=pt["text-size"].possiblyEvaluate(new ma(18));for(var Nr=24*$e.get("text-line-height"),Yr="map"===$e.get("text-rotation-alignment")&&"point"!==$e.get("symbol-placement"),Wr=$e.get("text-keep-upright"),tn=$e.get("text-size"),kn=function(){var Xn=$n[On],ii=$e.get("text-font").evaluate(Xn,{},Ee).join(","),vi=tn.evaluate(Xn,{},Ee),yi=bt.layoutTextSize.evaluate(Xn,{},Ee),li=bt.layoutIconSize.evaluate(Xn,{},Ee),ki={horizontal:{},vertical:void 0},wi=Xn.text,xi=[0,0];if(wi){var da=wi.toString(),la=24*$e.get("text-letter-spacing").evaluate(Xn,{},Ee),ba=function(Xi){for(var va=0,io=Xi;va<io.length;va+=1)if(!Ni(io[va].charCodeAt(0)))return!1;return!0}(da)?la:0,Pi=$e.get("text-anchor").evaluate(Xn,{},Ee),ua=$e.get("text-variable-anchor");if(!ua){var Ba=$e.get("text-radial-offset").evaluate(Xn,{},Ee);xi=Ba?Bf(Pi,[24*Ba,Bu]):$e.get("text-offset").evaluate(Xn,{},Ee).map(function(Xi){return 24*Xi})}var La=Yr?"center":$e.get("text-justify").evaluate(Xn,{},Ee),Ya=$e.get("symbol-placement"),Da="point"===Ya?24*$e.get("text-max-width").evaluate(Xn,{},Ee):0,To=function(){M.allowVerticalPlacement&&Yi(da)&&(ki.vertical=Yc(wi,I,Y,pe,ii,Da,Nr,Pi,"left",ba,xi,zs.vertical,!0,Ya,yi,vi))};if(!Yr&&ua){for(var Wa="auto"===La?ua.map(function(Xi){return Nu(Xi)}):[La],Jo=!1,Fo=0;Fo<Wa.length;Fo++){var Uo=Wa[Fo];if(!ki.horizontal[Uo])if(Jo)ki.horizontal[Uo]=ki.horizontal[0];else{var hs=Yc(wi,I,Y,pe,ii,Da,Nr,"center",Uo,ba,xi,zs.horizontal,!1,Ya,yi,vi);hs&&(ki.horizontal[Uo]=hs,Jo=1===hs.positionedLines.length)}}To()}else{"auto"===La&&(La=Nu(Pi));var ns=Yc(wi,I,Y,pe,ii,Da,Nr,Pi,La,ba,xi,zs.horizontal,!1,Ya,yi,vi);ns&&(ki.horizontal[La]=ns),To(),Yi(da)&&Yr&&Wr&&(ki.vertical=Yc(wi,I,Y,pe,ii,Da,Nr,Pi,La,ba,xi,zs.vertical,!1,Ya,yi,vi))}}var Xi,va,ao,ds,is,Mo=void 0,Go=!1;if(Xn.icon&&Xn.icon.name){var vo=ae[Xn.icon.name];vo&&(Xi=pe[Xn.icon.name],va=$e.get("icon-offset").evaluate(Xn,{},Ee),ao=zu($e.get("icon-anchor").evaluate(Xn,{},Ee)),Mo={image:Xi,top:is=va[1]-Xi.displaySize[1]*ao.verticalAlign,bottom:is+Xi.displaySize[1],left:ds=va[0]-Xi.displaySize[0]*ao.horizontalAlign,right:ds+Xi.displaySize[0]},Go=vo.sdf,void 0===M.sdfIcons?M.sdfIcons=vo.sdf:M.sdfIcons!==vo.sdf&&k("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(vo.pixelRatio!==M.pixelRatio||0!==$e.get("icon-rotate").constantOr(1))&&(M.iconsNeedLinear=!0))}var Lo=jf(ki.horizontal)||ki.vertical;M.iconsInText=!!Lo&&Lo.iconsInText,(Lo||Mo)&&function(Xi,va,io,ao,no,Za,_a,oo,ds,Cs,is){var Qs=Za.textMaxSize.evaluate(va,{});void 0===Qs&&(Qs=_a);var Al,Bo=Xi.layers[0].layout,el=Bo.get("icon-offset").evaluate(va,{},is),tl=jf(io.horizontal),rl=_a/24,qu=Xi.tilePixelRatio*rl,Ql=Xi.tilePixelRatio*Qs/24,ru=Xi.tilePixelRatio*oo,Fl=Xi.tilePixelRatio*Bo.get("symbol-spacing"),nu=Bo.get("text-padding")*Xi.tilePixelRatio,iu=Bo.get("icon-padding")*Xi.tilePixelRatio,au=Bo.get("text-max-angle")/180*Math.PI,ou="map"===Bo.get("text-rotation-alignment")&&"point"!==Bo.get("symbol-placement"),El="map"===Bo.get("icon-rotation-alignment")&&"point"!==Bo.get("symbol-placement"),ec=Bo.get("symbol-placement"),su=Fl/2,tc=Bo.get("icon-text-fit");ao&&"none"!==tc&&(Xi.allowVerticalPlacement&&io.vertical&&(Al=Cf(ao,io.vertical,tc,Bo.get("icon-text-fit-padding"),el,rl)),tl&&(ao=Cf(ao,tl,tc,Bo.get("icon-text-fit-padding"),el,rl)));var Ll=function(Cd,Lc){Lc.x<0||Lc.x>=8192||Lc.y<0||Lc.y>=8192||function(po,nl,Ed,Dl,Ju,ih,gu,cl,mu,Dc,vu,yu,Ku,ah,Oc,oh,sh,lh,ch,uh,Fs,xu,fh,ul,Ld){var $u,Bl,sc,lc,cc,uc=po.addToLineVertexArray(nl,Ed),hh=0,dh=0,ph=0,gh=0,Qu=-1,ef=-1,Tl={},mh=zr(""),tf=0,rf=0;if(void 0===cl._unevaluatedLayout.getValue("text-radial-offset")?(tf=($u=cl.layout.get("text-offset").evaluate(Fs,{},ul).map(function(Pc){return 24*Pc}))[0],rf=$u[1]):(tf=24*cl.layout.get("text-radial-offset").evaluate(Fs,{},ul),rf=Bu),po.allowVerticalPlacement&&Dl.vertical){var vh=cl.layout.get("text-rotate").evaluate(Fs,{},ul)+90;lc=new Kc(mu,nl,Dc,vu,yu,Dl.vertical,Ku,ah,Oc,vh),gu&&(cc=new Kc(mu,nl,Dc,vu,yu,gu,sh,lh,Oc,vh))}if(Ju){var nf=cl.layout.get("icon-rotate").evaluate(Fs,{}),yh="none"!==cl.layout.get("icon-text-fit"),xh=zf(Ju,nf,fh,yh),af=gu?zf(gu,nf,fh,yh):void 0;sc=new Kc(mu,nl,Dc,vu,yu,Ju,sh,lh,!1,nf),hh=4*xh.length;var bh=po.iconSizeData,Ic=null;"source"===bh.kind?(Ic=[128*cl.layout.get("icon-size").evaluate(Fs,{})])[0]>32640&&k(po.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===bh.kind&&((Ic=[128*xu.compositeIconSizes[0].evaluate(Fs,{},ul),128*xu.compositeIconSizes[1].evaluate(Fs,{},ul)])[0]>32640||Ic[1]>32640)&&k(po.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),po.addSymbols(po.icon,xh,Ic,uh,ch,Fs,!1,nl,uc.lineStartIndex,uc.lineLength,-1,ul),Qu=po.icon.placedSymbolArray.length-1,af&&(dh=4*af.length,po.addSymbols(po.icon,af,Ic,uh,ch,Fs,zs.vertical,nl,uc.lineStartIndex,uc.lineLength,-1,ul),ef=po.icon.placedSymbolArray.length-1)}for(var _h in Dl.horizontal){var bu=Dl.horizontal[_h];if(!Bl){mh=zr(bu.text);var Od=cl.layout.get("text-rotate").evaluate(Fs,{},ul);Bl=new Kc(mu,nl,Dc,vu,yu,bu,Ku,ah,Oc,Od)}var wh=1===bu.positionedLines.length;if(ph+=Nf(po,nl,bu,ih,cl,Oc,Fs,oh,uc,Dl.vertical?zs.horizontal:zs.horizontalOnly,wh?Object.keys(Dl.horizontal):[_h],Tl,Qu,xu,ul),wh)break}Dl.vertical&&(gh+=Nf(po,nl,Dl.vertical,ih,cl,Oc,Fs,oh,uc,zs.vertical,["vertical"],Tl,ef,xu,ul));var Id=Bl?Bl.boxStartIndex:po.collisionBoxArray.length,Pd=Bl?Bl.boxEndIndex:po.collisionBoxArray.length,Rd=lc?lc.boxStartIndex:po.collisionBoxArray.length,zd=lc?lc.boxEndIndex:po.collisionBoxArray.length,Fd=sc?sc.boxStartIndex:po.collisionBoxArray.length,Bd=sc?sc.boxEndIndex:po.collisionBoxArray.length,Nd=cc?cc.boxStartIndex:po.collisionBoxArray.length,jd=cc?cc.boxEndIndex:po.collisionBoxArray.length,fl=-1,_u=function(Pc,Th){return Pc&&Pc.circleDiameter?Math.max(Pc.circleDiameter,Th):Th};fl=_u(Bl,fl),fl=_u(lc,fl),fl=_u(sc,fl);var Ah=(fl=_u(cc,fl))>-1?1:0;Ah&&(fl*=Ld/24),po.glyphOffsetArray.length>=Ma.MAX_GLYPHS&&k("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Fs.sortKey&&po.addToSortKeyRanges(po.symbolInstances.length,Fs.sortKey),po.symbolInstances.emplaceBack(nl.x,nl.y,Tl.right>=0?Tl.right:-1,Tl.center>=0?Tl.center:-1,Tl.left>=0?Tl.left:-1,Tl.vertical||-1,Qu,ef,mh,Id,Pd,Rd,zd,Fd,Bd,Nd,jd,Dc,ph,gh,hh,dh,Ah,0,Ku,tf,rf,fl)}(Xi,Lc,Cd,io,ao,no,Al,Xi.layers[0],Xi.collisionBoxArray,va.index,va.sourceLayerIndex,Xi.index,qu,nu,ou,ds,ru,iu,El,el,va,Za,Cs,is,_a)};if("line"===ec)for(var Mc=0,lu=Rf(va.geometry,0,0,8192,8192);Mc<lu.length;Mc+=1)for(var cu=lu[Mc],kc=0,fu=ud(cu,Fl,au,io.vertical||tl,ao,24,Ql,Xi.overscaling,8192);kc<fu.length;kc+=1){var Sc=fu[kc];tl&&pd(Xi,tl.text,su,Sc)||Ll(cu,Sc)}else if("line-center"===ec)for(var Cc=0,du=va.geometry;Cc<du.length;Cc+=1){var rc=du[Cc];if(rc.length>1){var nc=cd(rc,au,io.vertical||tl,ao,24,Ql);nc&&Ll(rc,nc)}}else if("Polygon"===va.type)for(var ic=0,pu=Lu(va.geometry,0);ic<pu.length;ic+=1){var ac=pu[ic],Ec=hd(ac,16);Ll(ac[0],new Yl(Ec.x,Ec.y,0))}else if("LineString"===va.type)for(var oc=0,th=va.geometry;oc<th.length;oc+=1){var Yu=th[oc];Ll(Yu,new Yl(Yu[0].x,Yu[0].y,0))}else if("Point"===va.type)for(var Wu=0,rh=va.geometry;Wu<rh.length;Wu+=1)for(var Zu=0,nh=rh[Wu];Zu<nh.length;Zu+=1){var Xu=nh[Zu];Ll([Xu],new Yl(Xu.x,Xu.y,0))}}(M,Xn,ki,Mo,ae,bt,yi,li,xi,Go,Ee)},On=0,$n=M.features;On<$n.length;On+=1)kn();ye&&M.generateCollisionDebugBuffers()},e.perspective=function(M,I,Y,ae,pe){var ye,Ee=1/Math.tan(I/2);return M[0]=Ee/Y,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=Ee,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=-1,M[12]=0,M[13]=0,M[15]=0,null!=pe&&pe!==1/0?(M[10]=(pe+ae)*(ye=1/(ae-pe)),M[14]=2*pe*ae*ye):(M[10]=-1,M[14]=-2*ae),M},e.pick=function(M,I){for(var Y={},ae=0;ae<I.length;ae++){var pe=I[ae];pe in M&&(Y[pe]=M[pe])}return Y},e.plugin=mo,e.polygonIntersectsPolygon=Io,e.postMapLoadEvent=Pe,e.postTurnstileEvent=we,e.potpack=Tf,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=rn,e.registerForPluginStateChange=function(M){return M({pluginStatus:Ei,pluginURL:Sa}),Pa.on("pluginStateChange",M),M},e.rotate=function(M,I,Y){var ae=I[0],pe=I[1],ye=I[2],Ee=I[3],je=Math.sin(Y),$e=Math.cos(Y);return M[0]=ae*$e+ye*je,M[1]=pe*$e+Ee*je,M[2]=ae*-je+ye*$e,M[3]=pe*-je+Ee*$e,M},e.rotateX=function(M,I,Y){var ae=Math.sin(Y),pe=Math.cos(Y),ye=I[4],Ee=I[5],je=I[6],$e=I[7],pt=I[8],bt=I[9],qt=I[10],tr=I[11];return I!==M&&(M[0]=I[0],M[1]=I[1],M[2]=I[2],M[3]=I[3],M[12]=I[12],M[13]=I[13],M[14]=I[14],M[15]=I[15]),M[4]=ye*pe+pt*ae,M[5]=Ee*pe+bt*ae,M[6]=je*pe+qt*ae,M[7]=$e*pe+tr*ae,M[8]=pt*pe-ye*ae,M[9]=bt*pe-Ee*ae,M[10]=qt*pe-je*ae,M[11]=tr*pe-$e*ae,M},e.rotateZ=function(M,I,Y){var ae=Math.sin(Y),pe=Math.cos(Y),ye=I[0],Ee=I[1],je=I[2],$e=I[3],pt=I[4],bt=I[5],qt=I[6],tr=I[7];return I!==M&&(M[8]=I[8],M[9]=I[9],M[10]=I[10],M[11]=I[11],M[12]=I[12],M[13]=I[13],M[14]=I[14],M[15]=I[15]),M[0]=ye*pe+pt*ae,M[1]=Ee*pe+bt*ae,M[2]=je*pe+qt*ae,M[3]=$e*pe+tr*ae,M[4]=pt*pe-ye*ae,M[5]=bt*pe-Ee*ae,M[6]=qt*pe-je*ae,M[7]=tr*pe-$e*ae,M},e.scale=function(M,I,Y){var ae=Y[0],pe=Y[1],ye=Y[2];return M[0]=I[0]*ae,M[1]=I[1]*ae,M[2]=I[2]*ae,M[3]=I[3]*ae,M[4]=I[4]*pe,M[5]=I[5]*pe,M[6]=I[6]*pe,M[7]=I[7]*pe,M[8]=I[8]*ye,M[9]=I[9]*ye,M[10]=I[10]*ye,M[11]=I[11]*ye,M[12]=I[12],M[13]=I[13],M[14]=I[14],M[15]=I[15],M},e.scale$1=function(M,I,Y){return M[0]=I[0]*Y,M[1]=I[1]*Y,M[2]=I[2]*Y,M[3]=I[3]*Y,M},e.scale$2=function(M,I,Y){return M[0]=I[0]*Y,M[1]=I[1]*Y,M[2]=I[2]*Y,M},e.setCacheLimits=function(M,I){ze=M,He=I},e.setRTLTextPlugin=function(M,I,Y){if(void 0===Y&&(Y=!1),Ei===ca||Ei===Qa||Ei===$o)throw new Error("setRTLTextPlugin cannot be called multiple times.");Sa=N.resolveURL(M),Ei=ca,bo=I,oa(),Y||ga()},e.sphericalToCartesian=function(M){var I=M[0],Y=M[1],ae=M[2];return Y+=90,Y*=Math.PI/180,ae*=Math.PI/180,{x:I*Math.cos(Y)*Math.sin(ae),y:I*Math.sin(Y)*Math.sin(ae),z:I*Math.cos(ae)}},e.sqrLen=function(M){var I=M[0],Y=M[1];return I*I+Y*Y},e.styleSpec=Ie,e.sub=function(M,I,Y){return M[0]=I[0]-Y[0],M[1]=I[1]-Y[1],M[2]=I[2]-Y[2],M},e.symbolSize=ld,e.transformMat3=function(M,I,Y){var ae=I[0],pe=I[1],ye=I[2];return M[0]=ae*Y[0]+pe*Y[3]+ye*Y[6],M[1]=ae*Y[1]+pe*Y[4]+ye*Y[7],M[2]=ae*Y[2]+pe*Y[5]+ye*Y[8],M},e.transformMat4=ll,e.translate=function(M,I,Y){var ae,pe,ye,Ee,je,$e,pt,bt,qt,tr,Kt,hr,Ar=Y[0],jr=Y[1],Nr=Y[2];return I===M?(M[12]=I[0]*Ar+I[4]*jr+I[8]*Nr+I[12],M[13]=I[1]*Ar+I[5]*jr+I[9]*Nr+I[13],M[14]=I[2]*Ar+I[6]*jr+I[10]*Nr+I[14],M[15]=I[3]*Ar+I[7]*jr+I[11]*Nr+I[15]):(pe=I[1],ye=I[2],Ee=I[3],je=I[4],$e=I[5],pt=I[6],bt=I[7],qt=I[8],tr=I[9],Kt=I[10],hr=I[11],M[0]=ae=I[0],M[1]=pe,M[2]=ye,M[3]=Ee,M[4]=je,M[5]=$e,M[6]=pt,M[7]=bt,M[8]=qt,M[9]=tr,M[10]=Kt,M[11]=hr,M[12]=ae*Ar+je*jr+qt*Nr+I[12],M[13]=pe*Ar+$e*jr+tr*Nr+I[13],M[14]=ye*Ar+pt*jr+Kt*Nr+I[14],M[15]=Ee*Ar+bt*jr+hr*Nr+I[15]),M},e.triggerPluginCompletionEvent=Co,e.uniqueId=d,e.validateCustomStyleLayer=function(M){var I=[],Y=M.id;return void 0===Y&&I.push({message:"layers."+Y+': missing required property "id"'}),void 0===M.render&&I.push({message:"layers."+Y+': missing required method "render"'}),M.renderingMode&&"2d"!==M.renderingMode&&"3d"!==M.renderingMode&&I.push({message:"layers."+Y+': property "renderingMode" must be either "2d" or "3d"'}),I},e.validateLight=_n,e.validateStyle=en,e.values=function(M){var I=[];for(var Y in M)I.push(M[Y]);return I},e.vectorTile=Ul,e.version="1.10.1",e.warnOnce=k,e.webpSupported=ee,e.window=self,e.wrap=c}),y(0,function(e){function n(ke){var De=typeof ke;if("number"===De||"boolean"===De||"string"===De||null==ke)return JSON.stringify(ke);if(Array.isArray(ke)){for(var Re="[",Ie=0,Ke=ke;Ie<Ke.length;Ie+=1)Re+=n(Ke[Ie])+",";return Re+"]"}for(var ut=Object.keys(ke).sort(),xt="{",gt=0;gt<ut.length;gt++)xt+=JSON.stringify(ut[gt])+":"+n(ke[ut[gt]])+",";return xt+"}"}function t(ke){for(var De="",Re=0,Ie=e.refProperties;Re<Ie.length;Re+=1)De+="/"+n(ke[Ie[Re]]);return De}var a=function(ke){this.keyCache={},ke&&this.replace(ke)};a.prototype.replace=function(ke){this._layerConfigs={},this._layers={},this.update(ke,[])},a.prototype.update=function(ke,De){for(var Re=this,Ie=0,Ke=ke;Ie<Ke.length;Ie+=1){var ut=Ke[Ie];this._layerConfigs[ut.id]=ut;var xt=this._layers[ut.id]=e.createStyleLayer(ut);xt._featureFilter=e.featureFilter(xt.filter),this.keyCache[ut.id]&&delete this.keyCache[ut.id]}for(var gt=0,Pt=De;gt<Pt.length;gt+=1){var ct=Pt[gt];delete this.keyCache[ct],delete this._layerConfigs[ct],delete this._layers[ct]}this.familiesBySource={};for(var zt=0,Ft=function(ht,kt){for(var Gt={},Zt=0;Zt<ht.length;Zt++){var fr=kt&&kt[ht[Zt].id]||t(ht[Zt]);kt&&(kt[ht[Zt].id]=fr);var $t=Gt[fr];$t||($t=Gt[fr]=[]),$t.push(ht[Zt])}var nr=[];for(var dr in Gt)nr.push(Gt[dr]);return nr}(e.values(this._layerConfigs),this.keyCache);zt<Ft.length;zt+=1){var Qe=Ft[zt].map(function(ht){return Re._layers[ht.id]}),yt=Qe[0];if("none"!==yt.visibility){var Nt=yt.source||"",Yt=this.familiesBySource[Nt];Yt||(Yt=this.familiesBySource[Nt]={});var rr=yt.sourceLayer||"_geojsonTileLayer",Fe=Yt[rr];Fe||(Fe=Yt[rr]=[]),Fe.push(Qe)}}};var r=function(ke){var De={},Re=[];for(var Ie in ke){var Ke=ke[Ie],ut=De[Ie]={};for(var xt in Ke){var gt=Ke[+xt];if(gt&&0!==gt.bitmap.width&&0!==gt.bitmap.height){var Pt={x:0,y:0,w:gt.bitmap.width+2,h:gt.bitmap.height+2};Re.push(Pt),ut[xt]={rect:Pt,metrics:gt.metrics}}}}var ct=e.potpack(Re),Qe=new e.AlphaImage({width:ct.w||1,height:ct.h||1});for(var yt in ke){var Nt=ke[yt];for(var Yt in Nt){var rr=Nt[+Yt];if(rr&&0!==rr.bitmap.width&&0!==rr.bitmap.height){var Fe=De[yt][Yt].rect;e.AlphaImage.copy(rr.bitmap,Qe,{x:0,y:0},{x:Fe.x+1,y:Fe.y+1},rr.bitmap)}}}this.image=Qe,this.positions=De};e.register("GlyphAtlas",r);var f=function(ke){this.tileID=new e.OverscaledTileID(ke.tileID.overscaledZ,ke.tileID.wrap,ke.tileID.canonical.z,ke.tileID.canonical.x,ke.tileID.canonical.y),this.uid=ke.uid,this.zoom=ke.zoom,this.pixelRatio=ke.pixelRatio,this.tileSize=ke.tileSize,this.source=ke.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ke.showCollisionBoxes,this.collectResourceTiming=!!ke.collectResourceTiming,this.returnDependencies=!!ke.returnDependencies,this.promoteId=ke.promoteId};function s(ke,De,Re){for(var Ie=new e.EvaluationParameters(De),Ke=0,ut=ke;Ke<ut.length;Ke+=1)ut[Ke].recalculate(Ie,Re)}function i(ke,De){var Re=e.getArrayBuffer(ke.request,function(Ie,Ke,ut,xt){Ie?De(Ie):Ke&&De(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Ke)),rawData:Ke,cacheControl:ut,expires:xt})});return function(){Re.cancel(),De()}}f.prototype.parse=function(ke,De,Re,Ie,Ke){var ut=this;this.status="parsing",this.data=ke,this.collisionBoxArray=new e.CollisionBoxArray;var xt=new e.DictionaryCoder(Object.keys(ke.layers).sort()),gt=new e.FeatureIndex(this.tileID,this.promoteId);gt.bucketLayerIDs=[];var Pt,ct,zt,Ft,Qe={},yt={featureIndex:gt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Re},Nt=De.familiesBySource[this.source];for(var Yt in Nt){var rr=ke.layers[Yt];if(rr){1===rr.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+Yt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Fe=xt.encode(Yt),ht=[],kt=0;kt<rr.length;kt++){var Gt=rr.feature(kt),Zt=gt.getId(Gt,Yt);ht.push({feature:Gt,id:Zt,index:kt,sourceLayerIndex:Fe})}for(var fr=0,$t=Nt[Yt];fr<$t.length;fr+=1){var nr=$t[fr],dr=nr[0];dr.minzoom&&this.zoom<Math.floor(dr.minzoom)||dr.maxzoom&&this.zoom>=dr.maxzoom||"none"!==dr.visibility&&(s(nr,this.zoom,Re),(Qe[dr.id]=dr.createBucket({index:gt.bucketLayerIDs.length,layers:nr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Fe,sourceID:this.source})).populate(ht,yt,this.tileID.canonical),gt.bucketLayerIDs.push(nr.map(function(Sr){return Sr.id})))}}}var Tr=e.mapObject(yt.glyphDependencies,function(Sr){return Object.keys(Sr).map(Number)});Object.keys(Tr).length?Ie.send("getGlyphs",{uid:this.uid,stacks:Tr},function(Sr,Gr){Pt||(Pt=Sr,ct=Gr,_r.call(ut))}):ct={};var wr=Object.keys(yt.iconDependencies);wr.length?Ie.send("getImages",{icons:wr,source:this.source,tileID:this.tileID,type:"icons"},function(Sr,Gr){Pt||(Pt=Sr,zt=Gr,_r.call(ut))}):zt={};var mr=Object.keys(yt.patternDependencies);function _r(){if(Pt)return Ke(Pt);if(ct&&zt&&Ft){var Sr=new r(ct),Gr=new e.ImageAtlas(zt,Ft);for(var Er in Qe){var Zr=Qe[Er];Zr instanceof e.SymbolBucket?(s(Zr.layers,this.zoom,Re),e.performSymbolLayout(Zr,ct,Sr.positions,zt,Gr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Zr.hasPattern&&(Zr instanceof e.LineBucket||Zr instanceof e.FillBucket||Zr instanceof e.FillExtrusionBucket)&&(s(Zr.layers,this.zoom,Re),Zr.addFeatures(yt,this.tileID.canonical,Gr.patternPositions))}this.status="done",Ke(null,{buckets:e.values(Qe).filter(function(an){return!an.isEmpty()}),featureIndex:gt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Sr.image,imageAtlas:Gr,glyphMap:this.returnDependencies?ct:null,iconMap:this.returnDependencies?zt:null,glyphPositions:this.returnDependencies?Sr.positions:null})}}mr.length?Ie.send("getImages",{icons:mr,source:this.source,tileID:this.tileID,type:"patterns"},function(Sr,Gr){Pt||(Pt=Sr,Ft=Gr,_r.call(ut))}):Ft={},_r.call(this)};var l=function(ke,De,Re,Ie){this.actor=ke,this.layerIndex=De,this.availableImages=Re,this.loadVectorData=Ie||i,this.loading={},this.loaded={}};l.prototype.loadTile=function(ke,De){var Re=this,Ie=ke.uid;this.loading||(this.loading={});var Ke=!!(ke&&ke.request&&ke.request.collectResourceTiming)&&new e.RequestPerformance(ke.request),ut=this.loading[Ie]=new f(ke);ut.abort=this.loadVectorData(ke,function(xt,gt){if(delete Re.loading[Ie],xt||!gt)return ut.status="done",Re.loaded[Ie]=ut,De(xt);var Pt=gt.rawData,ct={};gt.expires&&(ct.expires=gt.expires),gt.cacheControl&&(ct.cacheControl=gt.cacheControl);var zt={};if(Ke){var Ft=Ke.finish();Ft&&(zt.resourceTiming=JSON.parse(JSON.stringify(Ft)))}ut.vectorTile=gt.vectorTile,ut.parse(gt.vectorTile,Re.layerIndex,Re.availableImages,Re.actor,function(Qe,yt){if(Qe||!yt)return De(Qe);De(null,e.extend({rawTileData:Pt.slice(0)},yt,ct,zt))}),Re.loaded=Re.loaded||{},Re.loaded[Ie]=ut})},l.prototype.reloadTile=function(ke,De){var Re=this,Ie=this.loaded,Ke=ke.uid,ut=this;if(Ie&&Ie[Ke]){var xt=Ie[Ke];xt.showCollisionBoxes=ke.showCollisionBoxes;var gt=function(Pt,ct){var zt=xt.reloadCallback;zt&&(delete xt.reloadCallback,xt.parse(xt.vectorTile,ut.layerIndex,Re.availableImages,ut.actor,zt)),De(Pt,ct)};"parsing"===xt.status?xt.reloadCallback=gt:"done"===xt.status&&(xt.vectorTile?xt.parse(xt.vectorTile,this.layerIndex,this.availableImages,this.actor,gt):gt())}},l.prototype.abortTile=function(ke,De){var Re=this.loading,Ie=ke.uid;Re&&Re[Ie]&&Re[Ie].abort&&(Re[Ie].abort(),delete Re[Ie]),De()},l.prototype.removeTile=function(ke,De){var Re=this.loaded,Ie=ke.uid;Re&&Re[Ie]&&delete Re[Ie],De()};var c=e.window.ImageBitmap,h=function(){this.loaded={}};h.prototype.loadTile=function(ke,De){var Re=ke.uid,Ie=ke.encoding,Ke=ke.rawImageData,ut=c&&Ke instanceof c?this.getImageData(Ke):Ke,xt=new e.DEMData(Re,ut,Ie);this.loaded=this.loaded||{},this.loaded[Re]=xt,De(null,xt)},h.prototype.getImageData=function(ke){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ke.width,ke.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ke.width,this.offscreenCanvas.height=ke.height,this.offscreenCanvasContext.drawImage(ke,0,0,ke.width,ke.height);var De=this.offscreenCanvasContext.getImageData(-1,-1,ke.width+2,ke.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:De.width,height:De.height},De.data)},h.prototype.removeTile=function(ke){var De=this.loaded,Re=ke.uid;De&&De[Re]&&delete De[Re]};var m=function ke(De,Re){var Ie,Ke=De&&De.type;if("FeatureCollection"===Ke)for(Ie=0;Ie<De.features.length;Ie++)ke(De.features[Ie],Re);else if("GeometryCollection"===Ke)for(Ie=0;Ie<De.geometries.length;Ie++)ke(De.geometries[Ie],Re);else if("Feature"===Ke)ke(De.geometry,Re);else if("Polygon"===Ke)d(De.coordinates,Re);else if("MultiPolygon"===Ke)for(Ie=0;Ie<De.coordinates.length;Ie++)d(De.coordinates[Ie],Re);return De};function d(ke,De){if(0!==ke.length){o(ke[0],De);for(var Re=1;Re<ke.length;Re++)o(ke[Re],!De)}}function o(ke,De){for(var Re=0,Ie=0,Ke=ke.length,ut=Ke-1;Ie<Ke;ut=Ie++)Re+=(ke[Ie][0]-ke[ut][0])*(ke[ut][1]+ke[Ie][1]);Re>=0!=!!De&&ke.reverse()}var b=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,g=function(ke){this._feature=ke,this.extent=e.EXTENT,this.type=ke.type,this.properties=ke.tags,"id"in ke&&!isNaN(ke.id)&&(this.id=parseInt(ke.id,10))};g.prototype.loadGeometry=function(){if(1===this._feature.type){for(var ke=[],De=0,Re=this._feature.geometry;De<Re.length;De+=1){var Ie=Re[De];ke.push([new e.Point$1(Ie[0],Ie[1])])}return ke}for(var Ke=[],ut=0,xt=this._feature.geometry;ut<xt.length;ut+=1){for(var gt=[],Pt=0,ct=xt[ut];Pt<ct.length;Pt+=1){var zt=ct[Pt];gt.push(new e.Point$1(zt[0],zt[1]))}Ke.push(gt)}return Ke},g.prototype.toGeoJSON=function(ke,De,Re){return b.call(this,ke,De,Re)};var w=function(ke){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=ke.length,this._features=ke};w.prototype.feature=function(ke){return new g(this._features[ke])};var _=e.vectorTile.VectorTileFeature,A=T;function T(ke,De){this.options=De||{},this.features=ke,this.length=ke.length}function E(ke,De){this.id="number"==typeof ke.id?ke.id:void 0,this.type=ke.type,this.rawGeometry=1===ke.type?[ke.geometry]:ke.geometry,this.properties=ke.tags,this.extent=De||4096}T.prototype.feature=function(ke){return new E(this.features[ke],this.options.extent)},E.prototype.loadGeometry=function(){var ke=this.rawGeometry;this.geometry=[];for(var De=0;De<ke.length;De++){for(var Re=ke[De],Ie=[],Ke=0;Ke<Re.length;Ke++)Ie.push(new e.Point$1(Re[Ke][0],Re[Ke][1]));this.geometry.push(Ie)}return this.geometry},E.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ke=this.geometry,De=1/0,Re=-1/0,Ie=1/0,Ke=-1/0,ut=0;ut<ke.length;ut++)for(var xt=ke[ut],gt=0;gt<xt.length;gt++){var Pt=xt[gt];De=Math.min(De,Pt.x),Re=Math.max(Re,Pt.x),Ie=Math.min(Ie,Pt.y),Ke=Math.max(Ke,Pt.y)}return[De,Ie,Re,Ke]},E.prototype.toGeoJSON=_.prototype.toGeoJSON;var k=C,S=A;function C(ke){var De=new e.pbf;return function(Re,Ie){for(var Ke in Re.layers)Ie.writeMessage(3,z,Re.layers[Ke])}(ke,De),De.finish()}function z(ke,De){var Re;De.writeVarintField(15,ke.version||1),De.writeStringField(1,ke.name||""),De.writeVarintField(5,ke.extent||4096);var Ie={keys:[],values:[],keycache:{},valuecache:{}};for(Re=0;Re<ke.length;Re++)Ie.feature=ke.feature(Re),De.writeMessage(2,B,Ie);var Ke=Ie.keys;for(Re=0;Re<Ke.length;Re++)De.writeStringField(3,Ke[Re]);var ut=Ie.values;for(Re=0;Re<ut.length;Re++)De.writeMessage(4,q,ut[Re])}function B(ke,De){var Re=ke.feature;void 0!==Re.id&&De.writeVarintField(1,Re.id),De.writeMessage(2,U,ke),De.writeVarintField(3,Re.type),De.writeMessage(4,Z,Re)}function U(ke,De){var Re=ke.feature,Ie=ke.keys,Ke=ke.values,ut=ke.keycache,xt=ke.valuecache;for(var gt in Re.properties){var Pt=ut[gt];void 0===Pt&&(Ie.push(gt),ut[gt]=Pt=Ie.length-1),De.writeVarint(Pt);var ct=Re.properties[gt],zt=typeof ct;"string"!==zt&&"boolean"!==zt&&"number"!==zt&&(ct=JSON.stringify(ct));var Ft=zt+":"+ct,Qe=xt[Ft];void 0===Qe&&(Ke.push(ct),xt[Ft]=Qe=Ke.length-1),De.writeVarint(Qe)}}function G(ke,De){return(De<<3)+(7&ke)}function X(ke){return ke<<1^ke>>31}function Z(ke,De){for(var Re=ke.loadGeometry(),Ie=ke.type,Ke=0,ut=0,xt=Re.length,gt=0;gt<xt;gt++){var Pt=Re[gt],ct=1;1===Ie&&(ct=Pt.length),De.writeVarint(G(1,ct));for(var zt=3===Ie?Pt.length-1:Pt.length,Ft=0;Ft<zt;Ft++){1===Ft&&1!==Ie&&De.writeVarint(G(2,zt-1));var Qe=Pt[Ft].x-Ke,yt=Pt[Ft].y-ut;De.writeVarint(X(Qe)),De.writeVarint(X(yt)),Ke+=Qe,ut+=yt}3===Ie&&De.writeVarint(G(7,1))}}function q(ke,De){var Re=typeof ke;"string"===Re?De.writeStringField(1,ke):"boolean"===Re?De.writeBooleanField(7,ke):"number"===Re&&(ke%1!=0?De.writeDoubleField(3,ke):ke<0?De.writeSVarintField(6,ke):De.writeVarintField(5,ke))}function W(ke,De,Re,Ie,Ke,ut){if(!(Ke-Ie<=Re)){var xt=Ie+Ke>>1;(function gt(Pt,ct,zt,Ft,Qe,yt){for(;Qe>Ft;){if(Qe-Ft>600){var Nt=Qe-Ft+1,Yt=zt-Ft+1,rr=Math.log(Nt),Fe=.5*Math.exp(2*rr/3),ht=.5*Math.sqrt(rr*Fe*(Nt-Fe)/Nt)*(Yt-Nt/2<0?-1:1);gt(Pt,ct,zt,Math.max(Ft,Math.floor(zt-Yt*Fe/Nt+ht)),Math.min(Qe,Math.floor(zt+(Nt-Yt)*Fe/Nt+ht)),yt)}var Zt=ct[2*zt+yt],fr=Ft,$t=Qe;for(te(Pt,ct,Ft,zt),ct[2*Qe+yt]>Zt&&te(Pt,ct,Ft,Qe);fr<$t;){for(te(Pt,ct,fr,$t),fr++,$t--;ct[2*fr+yt]<Zt;)fr++;for(;ct[2*$t+yt]>Zt;)$t--}ct[2*Ft+yt]===Zt?te(Pt,ct,Ft,$t):te(Pt,ct,++$t,Qe),$t<=zt&&(Ft=$t+1),zt<=$t&&(Qe=$t-1)}})(ke,De,xt,Ie,Ke,ut%2),W(ke,De,Re,Ie,xt-1,ut+1),W(ke,De,Re,xt+1,Ke,ut+1)}}function te(ke,De,Re,Ie){R(ke,Re,Ie),R(De,2*Re,2*Ie),R(De,2*Re+1,2*Ie+1)}function R(ke,De,Re){var Ie=ke[De];ke[De]=ke[Re],ke[Re]=Ie}function N(ke,De,Re,Ie){var Ke=ke-Re,ut=De-Ie;return Ke*Ke+ut*ut}k.fromVectorTileJs=C,k.fromGeojsonVt=function(ke,De){De=De||{};var Re={};for(var Ie in ke)Re[Ie]=new A(ke[Ie].features,De),Re[Ie].name=Ie,Re[Ie].version=De.version,Re[Ie].extent=De.extent;return C({layers:Re})},k.GeoJSONWrapper=S;var V=function(ke){return ke[0]},ee=function(ke){return ke[1]},j=function(ke,De,Re,Ie,Ke){void 0===De&&(De=V),void 0===Re&&(Re=ee),void 0===Ie&&(Ie=64),void 0===Ke&&(Ke=Float64Array),this.nodeSize=Ie,this.points=ke;for(var ut=ke.length<65536?Uint16Array:Uint32Array,xt=this.ids=new ut(ke.length),gt=this.coords=new Ke(2*ke.length),Pt=0;Pt<ke.length;Pt++)xt[Pt]=Pt,gt[2*Pt]=De(ke[Pt]),gt[2*Pt+1]=Re(ke[Pt]);W(xt,gt,Ie,0,xt.length-1,0)};j.prototype.range=function(ke,De,Re,Ie){return function(Ke,ut,xt,gt,Pt,ct,zt){for(var Ft,Qe,yt=[0,Ke.length-1,0],Nt=[];yt.length;){var Yt=yt.pop(),rr=yt.pop(),Fe=yt.pop();if(rr-Fe<=zt)for(var ht=Fe;ht<=rr;ht++)Qe=ut[2*ht+1],(Ft=ut[2*ht])>=xt&&Ft<=Pt&&Qe>=gt&&Qe<=ct&&Nt.push(Ke[ht]);else{var kt=Math.floor((Fe+rr)/2);Qe=ut[2*kt+1],(Ft=ut[2*kt])>=xt&&Ft<=Pt&&Qe>=gt&&Qe<=ct&&Nt.push(Ke[kt]);var Gt=(Yt+1)%2;(0===Yt?xt<=Ft:gt<=Qe)&&(yt.push(Fe),yt.push(kt-1),yt.push(Gt)),(0===Yt?Pt>=Ft:ct>=Qe)&&(yt.push(kt+1),yt.push(rr),yt.push(Gt))}}return Nt}(this.ids,this.coords,ke,De,Re,Ie,this.nodeSize)},j.prototype.within=function(ke,De,Re){return function(Ie,Ke,ut,xt,gt,Pt){for(var ct=[0,Ie.length-1,0],zt=[],Ft=gt*gt;ct.length;){var Qe=ct.pop(),yt=ct.pop(),Nt=ct.pop();if(yt-Nt<=Pt)for(var Yt=Nt;Yt<=yt;Yt++)N(Ke[2*Yt],Ke[2*Yt+1],ut,xt)<=Ft&&zt.push(Ie[Yt]);else{var rr=Math.floor((Nt+yt)/2),Fe=Ke[2*rr],ht=Ke[2*rr+1];N(Fe,ht,ut,xt)<=Ft&&zt.push(Ie[rr]);var kt=(Qe+1)%2;(0===Qe?ut-gt<=Fe:xt-gt<=ht)&&(ct.push(Nt),ct.push(rr-1),ct.push(kt)),(0===Qe?ut+gt>=Fe:xt+gt>=ht)&&(ct.push(rr+1),ct.push(yt),ct.push(kt))}}return zt}(this.ids,this.coords,ke,De,Re,this.nodeSize)};var J={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ke){return ke}},$=function(ke){this.options=de(Object.create(J),ke),this.trees=new Array(this.options.maxZoom+1)};function re(ke,De,Re,Ie,Ke){return{x:ke,y:De,zoom:1/0,id:Re,parentId:-1,numPoints:Ie,properties:Ke}}function ne(ke,De){var Re=ke.geometry.coordinates,Ke=Re[1];return{x:ue(Re[0]),y:le(Ke),zoom:1/0,index:De,parentId:-1}}function se(ke){return{type:"Feature",id:ke.id,properties:ie(ke),geometry:{type:"Point",coordinates:[(Ie=ke.x,360*(Ie-.5)),(De=ke.y,Re=(180-360*De)*Math.PI/180,360*Math.atan(Math.exp(Re))/Math.PI-90)]}};var De,Re,Ie}function ie(ke){var De=ke.numPoints,Re=De>=1e4?Math.round(De/1e3)+"k":De>=1e3?Math.round(De/100)/10+"k":De;return de(de({},ke.properties),{cluster:!0,cluster_id:ke.id,point_count:De,point_count_abbreviated:Re})}function ue(ke){return ke/360+.5}function le(ke){var De=Math.sin(ke*Math.PI/180),Re=.5-.25*Math.log((1+De)/(1-De))/Math.PI;return Re<0?0:Re>1?1:Re}function de(ke,De){for(var Re in De)ke[Re]=De[Re];return ke}function ve(ke){return ke.x}function _e(ke){return ke.y}function be(ke,De,Re,Ie,Ke,ut){var xt=Ke-Re,gt=ut-Ie;if(0!==xt||0!==gt){var Pt=((ke-Re)*xt+(De-Ie)*gt)/(xt*xt+gt*gt);Pt>1?(Re=Ke,Ie=ut):Pt>0&&(Re+=xt*Pt,Ie+=gt*Pt)}return(xt=ke-Re)*xt+(gt=De-Ie)*gt}function Te(ke,De,Re,Ie){var Ke={id:void 0===ke?null:ke,type:De,geometry:Re,tags:Ie,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ut){var xt=ut.geometry,gt=ut.type;if("Point"===gt||"MultiPoint"===gt||"LineString"===gt)he(ut,xt);else if("Polygon"===gt||"MultiLineString"===gt)for(var Pt=0;Pt<xt.length;Pt++)he(ut,xt[Pt]);else if("MultiPolygon"===gt)for(Pt=0;Pt<xt.length;Pt++)for(var ct=0;ct<xt[Pt].length;ct++)he(ut,xt[Pt][ct])}(Ke),Ke}function he(ke,De){for(var Re=0;Re<De.length;Re+=3)ke.minX=Math.min(ke.minX,De[Re]),ke.minY=Math.min(ke.minY,De[Re+1]),ke.maxX=Math.max(ke.maxX,De[Re]),ke.maxY=Math.max(ke.maxY,De[Re+1])}function me(ke,De,Re,Ie){if(De.geometry){var Ke=De.geometry.coordinates,ut=De.geometry.type,xt=Math.pow(Re.tolerance/((1<<Re.maxZoom)*Re.extent),2),gt=[],Pt=De.id;if(Re.promoteId?Pt=De.properties[Re.promoteId]:Re.generateId&&(Pt=Ie||0),"Point"===ut)Ae(Ke,gt);else if("MultiPoint"===ut)for(var ct=0;ct<Ke.length;ct++)Ae(Ke[ct],gt);else if("LineString"===ut)we(Ke,gt,xt,!1);else if("MultiLineString"===ut){if(Re.lineMetrics){for(ct=0;ct<Ke.length;ct++)we(Ke[ct],gt=[],xt,!1),ke.push(Te(Pt,"LineString",gt,De.properties));return}Se(Ke,gt,xt,!1)}else if("Polygon"===ut)Se(Ke,gt,xt,!0);else{if("MultiPolygon"!==ut){if("GeometryCollection"===ut){for(ct=0;ct<De.geometry.geometries.length;ct++)me(ke,{id:Pt,geometry:De.geometry.geometries[ct],properties:De.properties},Re,Ie);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ct=0;ct<Ke.length;ct++){var zt=[];Se(Ke[ct],zt,xt,!0),gt.push(zt)}}ke.push(Te(Pt,ut,gt,De.properties))}}function Ae(ke,De){De.push(Pe(ke[0])),De.push(ze(ke[1])),De.push(0)}function we(ke,De,Re,Ie){for(var Ke,ut,xt=0,gt=0;gt<ke.length;gt++){var Pt=Pe(ke[gt][0]),ct=ze(ke[gt][1]);De.push(Pt),De.push(ct),De.push(0),gt>0&&(xt+=Ie?(Ke*ct-Pt*ut)/2:Math.sqrt(Math.pow(Pt-Ke,2)+Math.pow(ct-ut,2))),Ke=Pt,ut=ct}var zt=De.length-3;De[2]=1,function Ft(Qe,yt,Nt,Yt){for(var rr,Fe=Yt,ht=Nt-yt>>1,kt=Nt-yt,Gt=Qe[yt],Zt=Qe[yt+1],fr=Qe[Nt],$t=Qe[Nt+1],nr=yt+3;nr<Nt;nr+=3){var dr=be(Qe[nr],Qe[nr+1],Gt,Zt,fr,$t);if(dr>Fe)rr=nr,Fe=dr;else if(dr===Fe){var Tr=Math.abs(nr-ht);Tr<kt&&(rr=nr,kt=Tr)}}Fe>Yt&&(rr-yt>3&&Ft(Qe,yt,rr,Yt),Qe[rr+2]=Fe,Nt-rr>3&&Ft(Qe,rr,Nt,Yt))}(De,0,zt,Re),De[zt+2]=1,De.size=Math.abs(xt),De.start=0,De.end=De.size}function Se(ke,De,Re,Ie){for(var Ke=0;Ke<ke.length;Ke++){var ut=[];we(ke[Ke],ut,Re,Ie),De.push(ut)}}function Pe(ke){return ke/360+.5}function ze(ke){var De=Math.sin(ke*Math.PI/180),Re=.5-.25*Math.log((1+De)/(1-De))/Math.PI;return Re<0?0:Re>1?1:Re}function He(ke,De,Re,Ie,Ke,ut,xt,gt){if(Ie/=De,ut>=(Re/=De)&&xt<Ie)return ke;if(xt<Re||ut>=Ie)return null;for(var Pt=[],ct=0;ct<ke.length;ct++){var zt=ke[ct],Ft=zt.geometry,Qe=zt.type,yt=0===Ke?zt.minX:zt.minY,Nt=0===Ke?zt.maxX:zt.maxY;if(yt>=Re&&Nt<Ie)Pt.push(zt);else if(!(Nt<Re||yt>=Ie)){var Yt=[];if("Point"===Qe||"MultiPoint"===Qe)tt(Ft,Yt,Re,Ie,Ke);else if("LineString"===Qe)Oe(Ft,Yt,Re,Ie,Ke,!1,gt.lineMetrics);else if("MultiLineString"===Qe)Je(Ft,Yt,Re,Ie,Ke,!1);else if("Polygon"===Qe)Je(Ft,Yt,Re,Ie,Ke,!0);else if("MultiPolygon"===Qe)for(var rr=0;rr<Ft.length;rr++){var Fe=[];Je(Ft[rr],Fe,Re,Ie,Ke,!0),Fe.length&&Yt.push(Fe)}if(Yt.length){if(gt.lineMetrics&&"LineString"===Qe){for(rr=0;rr<Yt.length;rr++)Pt.push(Te(zt.id,Qe,Yt[rr],zt.tags));continue}"LineString"!==Qe&&"MultiLineString"!==Qe||(1===Yt.length?(Qe="LineString",Yt=Yt[0]):Qe="MultiLineString"),"Point"!==Qe&&"MultiPoint"!==Qe||(Qe=3===Yt.length?"Point":"MultiPoint"),Pt.push(Te(zt.id,Qe,Yt,zt.tags))}}}return Pt.length?Pt:null}function tt(ke,De,Re,Ie,Ke){for(var ut=0;ut<ke.length;ut+=3){var xt=ke[ut+Ke];xt>=Re&&xt<=Ie&&(De.push(ke[ut]),De.push(ke[ut+1]),De.push(ke[ut+2]))}}function Oe(ke,De,Re,Ie,Ke,ut,xt){for(var gt,Pt,ct=Be(ke),zt=0===Ke?nt:ft,Ft=ke.start,Qe=0;Qe<ke.length-3;Qe+=3){var yt=ke[Qe],Nt=ke[Qe+1],Yt=ke[Qe+2],rr=ke[Qe+3],Fe=ke[Qe+4],ht=0===Ke?yt:Nt,kt=0===Ke?rr:Fe,Gt=!1;xt&&(gt=Math.sqrt(Math.pow(yt-rr,2)+Math.pow(Nt-Fe,2))),ht<Re?kt>Re&&(Pt=zt(ct,yt,Nt,rr,Fe,Re),xt&&(ct.start=Ft+gt*Pt)):ht>Ie?kt<Ie&&(Pt=zt(ct,yt,Nt,rr,Fe,Ie),xt&&(ct.start=Ft+gt*Pt)):Ye(ct,yt,Nt,Yt),kt<Re&&ht>=Re&&(Pt=zt(ct,yt,Nt,rr,Fe,Re),Gt=!0),kt>Ie&&ht<=Ie&&(Pt=zt(ct,yt,Nt,rr,Fe,Ie),Gt=!0),!ut&&Gt&&(xt&&(ct.end=Ft+gt*Pt),De.push(ct),ct=Be(ke)),xt&&(Ft+=gt)}var Zt=ke.length-3;yt=ke[Zt],Nt=ke[Zt+1],Yt=ke[Zt+2],(ht=0===Ke?yt:Nt)>=Re&&ht<=Ie&&Ye(ct,yt,Nt,Yt),Zt=ct.length-3,ut&&Zt>=3&&(ct[Zt]!==ct[0]||ct[Zt+1]!==ct[1])&&Ye(ct,ct[0],ct[1],ct[2]),ct.length&&De.push(ct)}function Be(ke){var De=[];return De.size=ke.size,De.start=ke.start,De.end=ke.end,De}function Je(ke,De,Re,Ie,Ke,ut){for(var xt=0;xt<ke.length;xt++)Oe(ke[xt],De,Re,Ie,Ke,ut,!1)}function Ye(ke,De,Re,Ie){ke.push(De),ke.push(Re),ke.push(Ie)}function nt(ke,De,Re,Ie,Ke,ut){var xt=(ut-De)/(Ie-De);return ke.push(ut),ke.push(Re+(Ke-Re)*xt),ke.push(1),xt}function ft(ke,De,Re,Ie,Ke,ut){var xt=(ut-Re)/(Ke-Re);return ke.push(De+(Ie-De)*xt),ke.push(ut),ke.push(1),xt}function dt(ke,De){for(var Re=[],Ie=0;Ie<ke.length;Ie++){var Ke,ut=ke[Ie],xt=ut.type;if("Point"===xt||"MultiPoint"===xt||"LineString"===xt)Ke=Rt(ut.geometry,De);else if("MultiLineString"===xt||"Polygon"===xt){Ke=[];for(var gt=0;gt<ut.geometry.length;gt++)Ke.push(Rt(ut.geometry[gt],De))}else if("MultiPolygon"===xt)for(Ke=[],gt=0;gt<ut.geometry.length;gt++){for(var Pt=[],ct=0;ct<ut.geometry[gt].length;ct++)Pt.push(Rt(ut.geometry[gt][ct],De));Ke.push(Pt)}Re.push(Te(ut.id,xt,Ke,ut.tags))}return Re}function Rt(ke,De){var Re=[];Re.size=ke.size,void 0!==ke.start&&(Re.start=ke.start,Re.end=ke.end);for(var Ie=0;Ie<ke.length;Ie+=3)Re.push(ke[Ie]+De,ke[Ie+1],ke[Ie+2]);return Re}function Et(ke,De){if(ke.transformed)return ke;var Re,Ie,Ke,ut=1<<ke.z,xt=ke.x,gt=ke.y;for(Re=0;Re<ke.features.length;Re++){var Pt=ke.features[Re],ct=Pt.geometry,zt=Pt.type;if(Pt.geometry=[],1===zt)for(Ie=0;Ie<ct.length;Ie+=2)Pt.geometry.push(at(ct[Ie],ct[Ie+1],De,ut,xt,gt));else for(Ie=0;Ie<ct.length;Ie++){var Ft=[];for(Ke=0;Ke<ct[Ie].length;Ke+=2)Ft.push(at(ct[Ie][Ke],ct[Ie][Ke+1],De,ut,xt,gt));Pt.geometry.push(Ft)}}return ke.transformed=!0,ke}function at(ke,De,Re,Ie,Ke,ut){return[Math.round(Re*(ke*Ie-Ke)),Math.round(Re*(De*Ie-ut))]}function rt(ke,De,Re,Ie,Ke){for(var ut=De===Ke.maxZoom?0:Ke.tolerance/((1<<De)*Ke.extent),xt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Re,y:Ie,z:De,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},gt=0;gt<ke.length;gt++){xt.numFeatures++,St(xt,ke[gt],ut,Ke);var Pt=ke[gt].minX,ct=ke[gt].minY,zt=ke[gt].maxX,Ft=ke[gt].maxY;Pt<xt.minX&&(xt.minX=Pt),ct<xt.minY&&(xt.minY=ct),zt>xt.maxX&&(xt.maxX=zt),Ft>xt.maxY&&(xt.maxY=Ft)}return xt}function St(ke,De,Re,Ie){var Ke=De.geometry,ut=De.type,xt=[];if("Point"===ut||"MultiPoint"===ut)for(var gt=0;gt<Ke.length;gt+=3)xt.push(Ke[gt]),xt.push(Ke[gt+1]),ke.numPoints++,ke.numSimplified++;else if("LineString"===ut)Xt(xt,Ke,ke,Re,!1,!1);else if("MultiLineString"===ut||"Polygon"===ut)for(gt=0;gt<Ke.length;gt++)Xt(xt,Ke[gt],ke,Re,"Polygon"===ut,0===gt);else if("MultiPolygon"===ut)for(var Pt=0;Pt<Ke.length;Pt++){var ct=Ke[Pt];for(gt=0;gt<ct.length;gt++)Xt(xt,ct[gt],ke,Re,!0,0===gt)}if(xt.length){var zt=De.tags||null;if("LineString"===ut&&Ie.lineMetrics){for(var Ft in zt={},De.tags)zt[Ft]=De.tags[Ft];zt.mapbox_clip_start=Ke.start/Ke.size,zt.mapbox_clip_end=Ke.end/Ke.size}var Qe={geometry:xt,type:"Polygon"===ut||"MultiPolygon"===ut?3:"LineString"===ut||"MultiLineString"===ut?2:1,tags:zt};null!==De.id&&(Qe.id=De.id),ke.features.push(Qe)}}function Xt(ke,De,Re,Ie,Ke,ut){var xt=Ie*Ie;if(Ie>0&&De.size<(Ke?xt:Ie))Re.numPoints+=De.length/3;else{for(var gt=[],Pt=0;Pt<De.length;Pt+=3)(0===Ie||De[Pt+2]>xt)&&(Re.numSimplified++,gt.push(De[Pt]),gt.push(De[Pt+1])),Re.numPoints++;Ke&&function(ct,zt){for(var Ft=0,Qe=0,yt=ct.length,Nt=yt-2;Qe<yt;Nt=Qe,Qe+=2)Ft+=(ct[Qe]-ct[Nt])*(ct[Qe+1]+ct[Nt+1]);if(Ft>0===zt)for(Qe=0,yt=ct.length;Qe<yt/2;Qe+=2){var Yt=ct[Qe],rr=ct[Qe+1];ct[Qe]=ct[yt-2-Qe],ct[Qe+1]=ct[yt-1-Qe],ct[yt-2-Qe]=Yt,ct[yt-1-Qe]=rr}}(gt,ut),ke.push(gt)}}function lr(ke,De){var Re=(De=this.options=function(Ke,ut){for(var xt in ut)Ke[xt]=ut[xt];return Ke}(Object.create(this.options),De)).debug;if(Re&&console.time("preprocess data"),De.maxZoom<0||De.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(De.promoteId&&De.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ke,ut,xt,gt,Pt,ct,Ie=function(Ke,ut){var xt=[];if("FeatureCollection"===Ke.type)for(var gt=0;gt<Ke.features.length;gt++)me(xt,Ke.features[gt],ut,gt);else me(xt,"Feature"===Ke.type?Ke:{geometry:Ke},ut);return xt}(ke,De);this.tiles={},this.tileCoords=[],Re&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",De.indexMaxZoom,De.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ke=Ie,ut=De,xt=ut.buffer/ut.extent,gt=Ke,Pt=He(Ke,1,-1-xt,xt,0,-1,2,ut),ct=He(Ke,1,1-xt,2+xt,0,-1,2,ut),(Pt||ct)&&(gt=He(Ke,1,-xt,1+xt,0,-1,2,ut)||[],Pt&&(gt=dt(Pt,1).concat(gt)),ct&&(gt=gt.concat(dt(ct,-1)))),Ie=gt).length&&this.splitTile(Ie,0,0,0),Re&&(Ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ue(ke,De,Re){return 32*((1<<ke)*Re+De)+ke}function Ze(ke,De){var Re=ke.tileID.canonical;if(!this._geoJSONIndex)return De(null,null);var Ie=this._geoJSONIndex.getTile(Re.z,Re.x,Re.y);if(!Ie)return De(null,null);var Ke=new w(Ie.features),ut=k(Ke);0===ut.byteOffset&&ut.byteLength===ut.buffer.byteLength||(ut=new Uint8Array(ut)),De(null,{vectorTile:Ke,rawData:ut.buffer})}$.prototype.load=function(ke){var De=this.options,Re=De.log,Ie=De.minZoom,Ke=De.maxZoom,ut=De.nodeSize;Re&&console.time("total time");var xt="prepare "+ke.length+" points";Re&&console.time(xt),this.points=ke;for(var gt=[],Pt=0;Pt<ke.length;Pt++)ke[Pt].geometry&&gt.push(ne(ke[Pt],Pt));this.trees[Ke+1]=new j(gt,ve,_e,ut,Float32Array),Re&&console.timeEnd(xt);for(var ct=Ke;ct>=Ie;ct--){var zt=+Date.now();gt=this._cluster(gt,ct),this.trees[ct]=new j(gt,ve,_e,ut,Float32Array),Re&&console.log("z%d: %d clusters in %dms",ct,gt.length,+Date.now()-zt)}return Re&&console.timeEnd("total time"),this},$.prototype.getClusters=function(ke,De){var Re=((ke[0]+180)%360+360)%360-180,Ie=Math.max(-90,Math.min(90,ke[1])),Ke=180===ke[2]?180:((ke[2]+180)%360+360)%360-180,ut=Math.max(-90,Math.min(90,ke[3]));if(ke[2]-ke[0]>=360)Re=-180,Ke=180;else if(Re>Ke){var xt=this.getClusters([Re,Ie,180,ut],De),gt=this.getClusters([-180,Ie,Ke,ut],De);return xt.concat(gt)}for(var Pt=this.trees[this._limitZoom(De)],ct=[],zt=0,Ft=Pt.range(ue(Re),le(ut),ue(Ke),le(Ie));zt<Ft.length;zt+=1){var yt=Pt.points[Ft[zt]];ct.push(yt.numPoints?se(yt):this.points[yt.index])}return ct},$.prototype.getChildren=function(ke){var De=this._getOriginId(ke),Re=this._getOriginZoom(ke),Ie="No cluster with the specified id.",Ke=this.trees[Re];if(!Ke)throw new Error(Ie);var ut=Ke.points[De];if(!ut)throw new Error(Ie);for(var xt=this.options.radius/(this.options.extent*Math.pow(2,Re-1)),gt=[],Pt=0,ct=Ke.within(ut.x,ut.y,xt);Pt<ct.length;Pt+=1){var Ft=Ke.points[ct[Pt]];Ft.parentId===ke&&gt.push(Ft.numPoints?se(Ft):this.points[Ft.index])}if(0===gt.length)throw new Error(Ie);return gt},$.prototype.getLeaves=function(ke,De,Re){var Ie=[];return this._appendLeaves(Ie,ke,De=De||10,Re=Re||0,0),Ie},$.prototype.getTile=function(ke,De,Re){var Ie=this.trees[this._limitZoom(ke)],Ke=Math.pow(2,ke),ut=this.options,gt=ut.radius/ut.extent,Pt=(Re-gt)/Ke,ct=(Re+1+gt)/Ke,zt={features:[]};return this._addTileFeatures(Ie.range((De-gt)/Ke,Pt,(De+1+gt)/Ke,ct),Ie.points,De,Re,Ke,zt),0===De&&this._addTileFeatures(Ie.range(1-gt/Ke,Pt,1,ct),Ie.points,Ke,Re,Ke,zt),De===Ke-1&&this._addTileFeatures(Ie.range(0,Pt,gt/Ke,ct),Ie.points,-1,Re,Ke,zt),zt.features.length?zt:null},$.prototype.getClusterExpansionZoom=function(ke){for(var De=this._getOriginZoom(ke)-1;De<=this.options.maxZoom;){var Re=this.getChildren(ke);if(De++,1!==Re.length)break;ke=Re[0].properties.cluster_id}return De},$.prototype._appendLeaves=function(ke,De,Re,Ie,Ke){for(var ut=0,xt=this.getChildren(De);ut<xt.length;ut+=1){var gt=xt[ut],Pt=gt.properties;if(Pt&&Pt.cluster?Ke+Pt.point_count<=Ie?Ke+=Pt.point_count:Ke=this._appendLeaves(ke,Pt.cluster_id,Re,Ie,Ke):Ke<Ie?Ke++:ke.push(gt),ke.length===Re)break}return Ke},$.prototype._addTileFeatures=function(ke,De,Re,Ie,Ke,ut){for(var xt=0,gt=ke;xt<gt.length;xt+=1){var Pt=De[gt[xt]],ct=Pt.numPoints,zt={type:1,geometry:[[Math.round(this.options.extent*(Pt.x*Ke-Re)),Math.round(this.options.extent*(Pt.y*Ke-Ie))]],tags:ct?ie(Pt):this.points[Pt.index].properties},Ft=void 0;ct?Ft=Pt.id:this.options.generateId?Ft=Pt.index:this.points[Pt.index].id&&(Ft=this.points[Pt.index].id),void 0!==Ft&&(zt.id=Ft),ut.features.push(zt)}},$.prototype._limitZoom=function(ke){return Math.max(this.options.minZoom,Math.min(ke,this.options.maxZoom+1))},$.prototype._cluster=function(ke,De){for(var Re=[],Ie=this.options,xt=Ie.reduce,gt=Ie.radius/(Ie.extent*Math.pow(2,De)),Pt=0;Pt<ke.length;Pt++){var ct=ke[Pt];if(!(ct.zoom<=De)){ct.zoom=De;for(var zt=this.trees[De+1],Ft=zt.within(ct.x,ct.y,gt),Qe=ct.numPoints||1,yt=ct.x*Qe,Nt=ct.y*Qe,Yt=xt&&Qe>1?this._map(ct,!0):null,rr=(Pt<<5)+(De+1)+this.points.length,Fe=0,ht=Ft;Fe<ht.length;Fe+=1){var Gt=zt.points[ht[Fe]];if(!(Gt.zoom<=De)){Gt.zoom=De;var Zt=Gt.numPoints||1;yt+=Gt.x*Zt,Nt+=Gt.y*Zt,Qe+=Zt,Gt.parentId=rr,xt&&(Yt||(Yt=this._map(ct,!0)),xt(Yt,this._map(Gt)))}}1===Qe?Re.push(ct):(ct.parentId=rr,Re.push(re(yt/Qe,Nt/Qe,rr,Qe,Yt)))}}return Re},$.prototype._getOriginId=function(ke){return ke-this.points.length>>5},$.prototype._getOriginZoom=function(ke){return(ke-this.points.length)%32},$.prototype._map=function(ke,De){if(ke.numPoints)return De?de({},ke.properties):ke.properties;var Re=this.points[ke.index].properties,Ie=this.options.map(Re);return De&&Ie===Re?de({},Ie):Ie},lr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},lr.prototype.splitTile=function(ke,De,Re,Ie,Ke,ut,xt){for(var gt=[ke,De,Re,Ie],Pt=this.options,ct=Pt.debug;gt.length;){Ie=gt.pop(),Re=gt.pop(),De=gt.pop(),ke=gt.pop();var zt=1<<De,Ft=Ue(De,Re,Ie),Qe=this.tiles[Ft];if(!Qe&&(ct>1&&console.time("creation"),Qe=this.tiles[Ft]=rt(ke,De,Re,Ie,Pt),this.tileCoords.push({z:De,x:Re,y:Ie}),ct)){ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",De,Re,Ie,Qe.numFeatures,Qe.numPoints,Qe.numSimplified),console.timeEnd("creation"));var yt="z"+De;this.stats[yt]=(this.stats[yt]||0)+1,this.total++}if(Qe.source=ke,Ke){if(De===Pt.maxZoom||De===Ke)continue;var Nt=1<<Ke-De;if(Re!==Math.floor(ut/Nt)||Ie!==Math.floor(xt/Nt))continue}else if(De===Pt.indexMaxZoom||Qe.numPoints<=Pt.indexMaxPoints)continue;if(Qe.source=null,0!==ke.length){ct>1&&console.time("clipping");var Yt,rr,Fe,ht,kt,Gt,Zt=.5*Pt.buffer/Pt.extent,fr=.5-Zt,$t=.5+Zt,nr=1+Zt;Yt=rr=Fe=ht=null,kt=He(ke,zt,Re-Zt,Re+$t,0,Qe.minX,Qe.maxX,Pt),Gt=He(ke,zt,Re+fr,Re+nr,0,Qe.minX,Qe.maxX,Pt),ke=null,kt&&(Yt=He(kt,zt,Ie-Zt,Ie+$t,1,Qe.minY,Qe.maxY,Pt),rr=He(kt,zt,Ie+fr,Ie+nr,1,Qe.minY,Qe.maxY,Pt),kt=null),Gt&&(Fe=He(Gt,zt,Ie-Zt,Ie+$t,1,Qe.minY,Qe.maxY,Pt),ht=He(Gt,zt,Ie+fr,Ie+nr,1,Qe.minY,Qe.maxY,Pt),Gt=null),ct>1&&console.timeEnd("clipping"),gt.push(Yt||[],De+1,2*Re,2*Ie),gt.push(rr||[],De+1,2*Re,2*Ie+1),gt.push(Fe||[],De+1,2*Re+1,2*Ie),gt.push(ht||[],De+1,2*Re+1,2*Ie+1)}}},lr.prototype.getTile=function(ke,De,Re){var Ie=this.options,Ke=Ie.extent,ut=Ie.debug;if(ke<0||ke>24)return null;var xt=1<<ke,gt=Ue(ke,De=(De%xt+xt)%xt,Re);if(this.tiles[gt])return Et(this.tiles[gt],Ke);ut>1&&console.log("drilling down to z%d-%d-%d",ke,De,Re);for(var Pt,ct=ke,zt=De,Ft=Re;!Pt&&ct>0;)ct--,zt=Math.floor(zt/2),Ft=Math.floor(Ft/2),Pt=this.tiles[Ue(ct,zt,Ft)];return Pt&&Pt.source?(ut>1&&console.log("found parent tile z%d-%d-%d",ct,zt,Ft),ut>1&&console.time("drilling down"),this.splitTile(Pt.source,ct,zt,Ft,ke,De,Re),ut>1&&console.timeEnd("drilling down"),this.tiles[gt]?Et(this.tiles[gt],Ke):null):null};var Ne=function(ke){function De(Re,Ie,Ke,ut){ke.call(this,Re,Ie,Ke,Ze),ut&&(this.loadGeoJSON=ut)}return ke&&(De.__proto__=ke),(De.prototype=Object.create(ke&&ke.prototype)).constructor=De,De.prototype.loadData=function(Re,Ie){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ie,this._pendingLoadDataParams=Re,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},De.prototype._loadData=function(){var Re=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ie=this._pendingCallback,Ke=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ut=!!(Ke&&Ke.request&&Ke.request.collectResourceTiming)&&new e.RequestPerformance(Ke.request);this.loadGeoJSON(Ke,function(xt,gt){if(xt||!gt)return Ie(xt);if("object"!=typeof gt)return Ie(new Error("Input data given to '"+Ke.source+"' is not a valid GeoJSON object."));m(gt,!0);try{Re._geoJSONIndex=Ke.cluster?new $(function(zt){var Ft=zt.superclusterOptions,Qe=zt.clusterProperties;if(!Qe||!Ft)return Ft;for(var yt={},Nt={},Yt={accumulated:null,zoom:0},rr={properties:null},Fe=Object.keys(Qe),ht=0,kt=Fe;ht<kt.length;ht+=1){var Gt=kt[ht],Zt=Qe[Gt],fr=Zt[0],nr=e.createExpression(Zt[1]),dr=e.createExpression("string"==typeof fr?[fr,["accumulated"],["get",Gt]]:fr);yt[Gt]=nr.value,Nt[Gt]=dr.value}return Ft.map=function(Tr){rr.properties=Tr;for(var wr={},mr=0,_r=Fe;mr<_r.length;mr+=1){var Sr=_r[mr];wr[Sr]=yt[Sr].evaluate(Yt,rr)}return wr},Ft.reduce=function(Tr,wr){rr.properties=wr;for(var mr=0,_r=Fe;mr<_r.length;mr+=1){var Sr=_r[mr];Yt.accumulated=Tr[Sr],Tr[Sr]=Nt[Sr].evaluate(Yt,rr)}},Ft}(Ke)).load(gt.features):new lr(zt=gt,Ke.geojsonVtOptions)}catch(zt){return Ie(zt)}var zt;Re.loaded={};var Pt={};if(ut){var ct=ut.finish();ct&&(Pt.resourceTiming={},Pt.resourceTiming[Ke.source]=JSON.parse(JSON.stringify(ct)))}Ie(null,Pt)})}},De.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},De.prototype.reloadTile=function(Re,Ie){var Ke=this.loaded;return Ke&&Ke[Re.uid]?ke.prototype.reloadTile.call(this,Re,Ie):this.loadTile(Re,Ie)},De.prototype.loadGeoJSON=function(Re,Ie){if(Re.request)e.getJSON(Re.request,Ie);else{if("string"!=typeof Re.data)return Ie(new Error("Input data given to '"+Re.source+"' is not a valid GeoJSON object."));try{return Ie(null,JSON.parse(Re.data))}catch(Ke){return Ie(new Error("Input data given to '"+Re.source+"' is not a valid GeoJSON object."))}}},De.prototype.removeSource=function(Re,Ie){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ie()},De.prototype.getClusterExpansionZoom=function(Re,Ie){try{Ie(null,this._geoJSONIndex.getClusterExpansionZoom(Re.clusterId))}catch(Ke){Ie(Ke)}},De.prototype.getClusterChildren=function(Re,Ie){try{Ie(null,this._geoJSONIndex.getChildren(Re.clusterId))}catch(Ke){Ie(Ke)}},De.prototype.getClusterLeaves=function(Re,Ie){try{Ie(null,this._geoJSONIndex.getLeaves(Re.clusterId,Re.limit,Re.offset))}catch(Ke){Ie(Ke)}},De}(l),it=function(ke){var De=this;this.self=ke,this.actor=new e.Actor(ke,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:Ne},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Re,Ie){if(De.workerSourceTypes[Re])throw new Error('Worker source with name "'+Re+'" already registered.');De.workerSourceTypes[Re]=Ie},this.self.registerRTLTextPlugin=function(Re){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=Re.applyArabicShaping,e.plugin.processBidirectionalText=Re.processBidirectionalText,e.plugin.processStyledBidirectionalText=Re.processStyledBidirectionalText}};return it.prototype.setReferrer=function(ke,De){this.referrer=De},it.prototype.setImages=function(ke,De,Re){for(var Ie in this.availableImages[ke]=De,this.workerSources[ke]){var Ke=this.workerSources[ke][Ie];for(var ut in Ke)Ke[ut].availableImages=De}Re()},it.prototype.setLayers=function(ke,De,Re){this.getLayerIndex(ke).replace(De),Re()},it.prototype.updateLayers=function(ke,De,Re){this.getLayerIndex(ke).update(De.layers,De.removedIds),Re()},it.prototype.loadTile=function(ke,De,Re){this.getWorkerSource(ke,De.type,De.source).loadTile(De,Re)},it.prototype.loadDEMTile=function(ke,De,Re){this.getDEMWorkerSource(ke,De.source).loadTile(De,Re)},it.prototype.reloadTile=function(ke,De,Re){this.getWorkerSource(ke,De.type,De.source).reloadTile(De,Re)},it.prototype.abortTile=function(ke,De,Re){this.getWorkerSource(ke,De.type,De.source).abortTile(De,Re)},it.prototype.removeTile=function(ke,De,Re){this.getWorkerSource(ke,De.type,De.source).removeTile(De,Re)},it.prototype.removeDEMTile=function(ke,De){this.getDEMWorkerSource(ke,De.source).removeTile(De)},it.prototype.removeSource=function(ke,De,Re){if(this.workerSources[ke]&&this.workerSources[ke][De.type]&&this.workerSources[ke][De.type][De.source]){var Ie=this.workerSources[ke][De.type][De.source];delete this.workerSources[ke][De.type][De.source],void 0!==Ie.removeSource?Ie.removeSource(De,Re):Re()}},it.prototype.loadWorkerSource=function(ke,De,Re){try{this.self.importScripts(De.url),Re()}catch(Ie){Re(Ie.toString())}},it.prototype.syncRTLPluginState=function(ke,De,Re){try{e.plugin.setState(De);var Ie=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=Ie){this.self.importScripts(Ie);var Ke=e.plugin.isParsed();Re(Ke?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ie),Ke)}}catch(ut){Re(ut.toString())}},it.prototype.getAvailableImages=function(ke){var De=this.availableImages[ke];return De||(De=[]),De},it.prototype.getLayerIndex=function(ke){var De=this.layerIndexes[ke];return De||(De=this.layerIndexes[ke]=new a),De},it.prototype.getWorkerSource=function(ke,De,Re){var Ie=this;return this.workerSources[ke]||(this.workerSources[ke]={}),this.workerSources[ke][De]||(this.workerSources[ke][De]={}),this.workerSources[ke][De][Re]||(this.workerSources[ke][De][Re]=new this.workerSourceTypes[De]({send:function(ut,xt,gt){Ie.actor.send(ut,xt,gt,ke)}},this.getLayerIndex(ke),this.getAvailableImages(ke))),this.workerSources[ke][De][Re]},it.prototype.getDEMWorkerSource=function(ke,De){return this.demWorkerSources[ke]||(this.demWorkerSources[ke]={}),this.demWorkerSources[ke][De]||(this.demWorkerSources[ke][De]=new h),this.demWorkerSources[ke][De]},it.prototype.enforceCacheSizeLimit=function(ke,De){e.enforceCacheSizeLimit(De)},"undefined"!=typeof WorkerGlobalScope&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new it(e.window)),it}),y(0,function(e){var n=e.createCommonjsModule(function(L){function P(oe){return!F(oe)}function F(oe){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var fe,ge,xe=new Blob([""],{type:"text/javascript"}),Ce=URL.createObjectURL(xe);try{ge=new Worker(Ce),fe=!0}catch(Ge){fe=!1}return ge&&ge.terminate(),URL.revokeObjectURL(Ce),fe}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var fe=document.createElement("canvas");fe.width=fe.height=1;var ge=fe.getContext("2d");if(!ge)return!1;var xe=ge.getImageData(0,0,1,1);return xe&&xe.width===fe.width}()?(void 0===H[fe=oe&&oe.failIfMajorPerformanceCaveat]&&(H[fe]=function(ge){var Ge,Xe,ot,xe=(Ge=ge,Xe=document.createElement("canvas"),(ot=Object.create(P.webGLContextAttributes)).failIfMajorPerformanceCaveat=Ge,Xe.probablySupportsContext?Xe.probablySupportsContext("webgl",ot)||Xe.probablySupportsContext("experimental-webgl",ot):Xe.supportsContext?Xe.supportsContext("webgl",ot)||Xe.supportsContext("experimental-webgl",ot):Xe.getContext("webgl",ot)||Xe.getContext("experimental-webgl",ot));if(!xe)return!1;var Ce=xe.createShader(xe.VERTEX_SHADER);return!(!Ce||xe.isContextLost())&&(xe.shaderSource(Ce,"void main() {}"),xe.compileShader(Ce),!0===xe.getShaderParameter(Ce,xe.COMPILE_STATUS))}(fe)),H[fe]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var fe}L.exports?L.exports=P:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=P,window.mapboxgl.notSupportedReason=F);var H={};P.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),t={create:function(L,P,F){var H=e.window.document.createElement(L);return void 0!==P&&(H.className=P),F&&F.appendChild(H),H},createNS:function(L,P){return e.window.document.createElementNS(L,P)}},a=e.window.document.documentElement.style;function r(L){if(!a)return L[0];for(var P=0;P<L.length;P++)if(L[P]in a)return L[P];return L[0]}var f,s=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);t.disableDrag=function(){a&&s&&(f=a[s],a[s]="none")},t.enableDrag=function(){a&&s&&(a[s]=f)};var i=r(["transform","WebkitTransform"]);t.setTransform=function(L,P){L.style[i]=P};var l=!1;try{var c=Object.defineProperty({},"passive",{get:function(){l=!0}});e.window.addEventListener("test",c,c),e.window.removeEventListener("test",c,c)}catch(L){l=!1}t.addEventListener=function(L,P,F,H){void 0===H&&(H={}),L.addEventListener(P,F,"passive"in H&&l?H:H.capture)},t.removeEventListener=function(L,P,F,H){void 0===H&&(H={}),L.removeEventListener(P,F,"passive"in H&&l?H:H.capture)};var h=function(L){L.preventDefault(),L.stopPropagation(),e.window.removeEventListener("click",h,!0)};function m(L){var P=L.userImage;return!!(P&&P.render&&P.render())&&(L.data.replace(new Uint8Array(P.data.buffer)),!0)}t.suppressClick=function(){e.window.addEventListener("click",h,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",h,!0)},0)},t.mousePos=function(L,P){var F=L.getBoundingClientRect();return new e.Point(P.clientX-F.left-L.clientLeft,P.clientY-F.top-L.clientTop)},t.touchPos=function(L,P){for(var F=L.getBoundingClientRect(),H=[],oe=0;oe<P.length;oe++)H.push(new e.Point(P[oe].clientX-F.left-L.clientLeft,P[oe].clientY-F.top-L.clientTop));return H},t.mouseButton=function(L){return void 0!==e.window.InstallTrigger&&2===L.button&&L.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:L.button},t.remove=function(L){L.parentNode&&L.parentNode.removeChild(L)};var d=function(L){function P(){L.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.isLoaded=function(){return this.loaded},P.prototype.setLoaded=function(F){if(this.loaded!==F&&(this.loaded=F,F)){for(var H=0,oe=this.requestors;H<oe.length;H+=1){var fe=oe[H];this._notify(fe.ids,fe.callback)}this.requestors=[]}},P.prototype.getImage=function(F){return this.images[F]},P.prototype.addImage=function(F,H){this._validate(F,H)&&(this.images[F]=H)},P.prototype._validate=function(F,H){var oe=!0;return this._validateStretch(H.stretchX,H.data&&H.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "stretchX" value'))),oe=!1),this._validateStretch(H.stretchY,H.data&&H.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "stretchY" value'))),oe=!1),this._validateContent(H.content,H)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "content" value'))),oe=!1),oe},P.prototype._validateStretch=function(F,H){if(!F)return!0;for(var oe=0,fe=0,ge=F;fe<ge.length;fe+=1){var xe=ge[fe];if(xe[0]<oe||xe[1]<xe[0]||H<xe[1])return!1;oe=xe[1]}return!0},P.prototype._validateContent=function(F,H){return!(F&&(4!==F.length||F[0]<0||H.data.width<F[0]||F[1]<0||H.data.height<F[1]||F[2]<0||H.data.width<F[2]||F[3]<0||H.data.height<F[3]||F[2]<F[0]||F[3]<F[1]))},P.prototype.updateImage=function(F,H){H.version=this.images[F].version+1,this.images[F]=H,this.updatedImages[F]=!0},P.prototype.removeImage=function(F){var H=this.images[F];delete this.images[F],delete this.patterns[F],H.userImage&&H.userImage.onRemove&&H.userImage.onRemove()},P.prototype.listImages=function(){return Object.keys(this.images)},P.prototype.getImages=function(F,H){var oe=!0;if(!this.isLoaded())for(var fe=0,ge=F;fe<ge.length;fe+=1)this.images[ge[fe]]||(oe=!1);this.isLoaded()||oe?this._notify(F,H):this.requestors.push({ids:F,callback:H})},P.prototype._notify=function(F,H){for(var oe={},fe=0,ge=F;fe<ge.length;fe+=1){var xe=ge[fe];this.images[xe]||this.fire(new e.Event("styleimagemissing",{id:xe}));var Ce=this.images[xe];Ce?oe[xe]={data:Ce.data.clone(),pixelRatio:Ce.pixelRatio,sdf:Ce.sdf,version:Ce.version,stretchX:Ce.stretchX,stretchY:Ce.stretchY,content:Ce.content,hasRenderCallback:Boolean(Ce.userImage&&Ce.userImage.render)}:e.warnOnce('Image "'+xe+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}H(null,oe)},P.prototype.getPixelSize=function(){var F=this.atlasImage;return{width:F.width,height:F.height}},P.prototype.getPattern=function(F){var H=this.patterns[F],oe=this.getImage(F);if(!oe)return null;if(H&&H.position.version===oe.version)return H.position;if(H)H.position.version=oe.version;else{var fe={w:oe.data.width+2,h:oe.data.height+2,x:0,y:0},ge=new e.ImagePosition(fe,oe);this.patterns[F]={bin:fe,position:ge}}return this._updatePatternAtlas(),this.patterns[F].position},P.prototype.bind=function(F){var H=F.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(F,this.atlasImage,H.RGBA),this.atlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE)},P.prototype._updatePatternAtlas=function(){var F=[];for(var H in this.patterns)F.push(this.patterns[H].bin);var oe=e.potpack(F),fe=oe.w,ge=oe.h,xe=this.atlasImage;for(var Ce in xe.resize({width:fe||1,height:ge||1}),this.patterns){var Ge=this.patterns[Ce].bin,Xe=Ge.x+1,ot=Ge.y+1,Mt=this.images[Ce].data,It=Mt.width,Ct=Mt.height;e.RGBAImage.copy(Mt,xe,{x:0,y:0},{x:Xe,y:ot},{width:It,height:Ct}),e.RGBAImage.copy(Mt,xe,{x:0,y:Ct-1},{x:Xe,y:ot-1},{width:It,height:1}),e.RGBAImage.copy(Mt,xe,{x:0,y:0},{x:Xe,y:ot+Ct},{width:It,height:1}),e.RGBAImage.copy(Mt,xe,{x:It-1,y:0},{x:Xe-1,y:ot},{width:1,height:Ct}),e.RGBAImage.copy(Mt,xe,{x:0,y:0},{x:Xe+It,y:ot},{width:1,height:Ct})}this.dirty=!0},P.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},P.prototype.dispatchRenderCallbacks=function(F){for(var H=0,oe=F;H<oe.length;H+=1){var fe=oe[H];if(!this.callbackDispatchedThisFrame[fe]){this.callbackDispatchedThisFrame[fe]=!0;var ge=this.images[fe];m(ge)&&this.updateImage(fe,ge)}}},P}(e.Evented),o=w,b=w,g=1e20;function w(L,P,F,H,oe,fe){this.fontSize=L||24,this.buffer=void 0===P?3:P,this.cutoff=H||.25,this.fontFamily=oe||"sans-serif",this.fontWeight=fe||"normal",this.radius=F||8;var ge=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ge,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ge*ge),this.gridInner=new Float64Array(ge*ge),this.f=new Float64Array(ge),this.d=new Float64Array(ge),this.z=new Float64Array(ge+1),this.v=new Int16Array(ge),this.middle=Math.round(ge/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function _(L,P,F,H,oe,fe,ge){for(var xe=0;xe<P;xe++){for(var Ce=0;Ce<F;Ce++)H[Ce]=L[Ce*P+xe];for(A(H,oe,fe,ge,F),Ce=0;Ce<F;Ce++)L[Ce*P+xe]=oe[Ce]}for(Ce=0;Ce<F;Ce++){for(xe=0;xe<P;xe++)H[xe]=L[Ce*P+xe];for(A(H,oe,fe,ge,P),xe=0;xe<P;xe++)L[Ce*P+xe]=Math.sqrt(oe[xe])}}function A(L,P,F,H,oe){F[0]=0,H[0]=-g,H[1]=+g;for(var fe=1,ge=0;fe<oe;fe++){for(var xe=(L[fe]+fe*fe-(L[F[ge]]+F[ge]*F[ge]))/(2*fe-2*F[ge]);xe<=H[ge];)ge--,xe=(L[fe]+fe*fe-(L[F[ge]]+F[ge]*F[ge]))/(2*fe-2*F[ge]);F[++ge]=fe,H[ge]=xe,H[ge+1]=+g}for(fe=0,ge=0;fe<oe;fe++){for(;H[ge+1]<fe;)ge++;P[fe]=(fe-F[ge])*(fe-F[ge])+L[F[ge]]}}w.prototype.draw=function(L){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(L,this.buffer,this.middle);for(var P=this.ctx.getImageData(0,0,this.size,this.size),F=new Uint8ClampedArray(this.size*this.size),H=0;H<this.size*this.size;H++){var oe=P.data[4*H+3]/255;this.gridOuter[H]=1===oe?0:0===oe?g:Math.pow(Math.max(0,.5-oe),2),this.gridInner[H]=1===oe?g:0===oe?0:Math.pow(Math.max(0,oe-.5),2)}for(_(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),_(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),H=0;H<this.size*this.size;H++)F[H]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[H]-this.gridInner[H])/this.radius+this.cutoff))));return F},o.default=b;var T=function(L,P){this.requestManager=L,this.localIdeographFontFamily=P,this.entries={}};T.prototype.setURL=function(L){this.url=L},T.prototype.getGlyphs=function(L,P){var F=this,H=[];for(var oe in L)for(var fe=0,ge=L[oe];fe<ge.length;fe+=1)H.push({stack:oe,id:ge[fe]});e.asyncAll(H,function(Ce,Ge){var Xe=Ce.stack,ot=Ce.id,Mt=F.entries[Xe];Mt||(Mt=F.entries[Xe]={glyphs:{},requests:{},ranges:{}});var It=Mt.glyphs[ot];if(void 0===It){if(It=F._tinySDF(Mt,Xe,ot))return Mt.glyphs[ot]=It,void Ge(null,{stack:Xe,id:ot,glyph:It});var Ct=Math.floor(ot/256);if(256*Ct>65535)Ge(new Error("glyphs > 65535 not supported"));else if(Mt.ranges[Ct])Ge(null,{stack:Xe,id:ot,glyph:It});else{var Lt=Mt.requests[Ct];Lt||(Lt=Mt.requests[Ct]=[],T.loadGlyphRange(Xe,Ct,F.url,F.requestManager,function(Tt,Ht){if(Ht){for(var jt in Ht)F._doesCharSupportLocalGlyph(+jt)||(Mt.glyphs[+jt]=Ht[+jt]);Mt.ranges[Ct]=!0}for(var Wt=0,cr=Lt;Wt<cr.length;Wt+=1)(0,cr[Wt])(Tt,Ht);delete Mt.requests[Ct]})),Lt.push(function(Tt,Ht){Tt?Ge(Tt):Ht&&Ge(null,{stack:Xe,id:ot,glyph:Ht[ot]||null})})}}else Ge(null,{stack:Xe,id:ot,glyph:It})},function(Ce,Ge){if(Ce)P(Ce);else if(Ge){for(var Xe={},ot=0,Mt=Ge;ot<Mt.length;ot+=1){var It=Mt[ot],Ct=It.stack,Lt=It.id,Tt=It.glyph;(Xe[Ct]||(Xe[Ct]={}))[Lt]=Tt&&{id:Tt.id,bitmap:Tt.bitmap.clone(),metrics:Tt.metrics}}P(null,Xe)}})},T.prototype._doesCharSupportLocalGlyph=function(L){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](L)||e.isChar["Hangul Syllables"](L)||e.isChar.Hiragana(L)||e.isChar.Katakana(L))},T.prototype._tinySDF=function(L,P,F){var H=this.localIdeographFontFamily;if(H&&this._doesCharSupportLocalGlyph(F)){var oe=L.tinySDF;if(!oe){var fe="400";/bold/i.test(P)?fe="900":/medium/i.test(P)?fe="500":/light/i.test(P)&&(fe="200"),oe=L.tinySDF=new T.TinySDF(24,3,8,.25,H,fe)}return{id:F,bitmap:new e.AlphaImage({width:30,height:30},oe.draw(String.fromCharCode(F))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},T.loadGlyphRange=function(L,P,F,H,oe){var fe=256*P,ge=fe+255,xe=H.transformRequest(H.normalizeGlyphsURL(F).replace("{fontstack}",L).replace("{range}",fe+"-"+ge),e.ResourceType.Glyphs);e.getArrayBuffer(xe,function(Ce,Ge){if(Ce)oe(Ce);else if(Ge){for(var Xe={},ot=0,Mt=e.parseGlyphPBF(Ge);ot<Mt.length;ot+=1){var It=Mt[ot];Xe[It.id]=It}oe(null,Xe)}})},T.TinySDF=o;var E=function(){this.specification=e.styleSpec.light.position};E.prototype.possiblyEvaluate=function(L,P){return e.sphericalToCartesian(L.expression.evaluate(P))},E.prototype.interpolate=function(L,P,F){return{x:e.number(L.x,P.x,F),y:e.number(L.y,P.y,F),z:e.number(L.z,P.z,F)}};var k=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new E,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),O=function(L){function P(F){L.call(this),this._transitionable=new e.Transitionable(k),this.setLight(F),this._transitioning=this._transitionable.untransitioned()}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getLight=function(){return this._transitionable.serialize()},P.prototype.setLight=function(F,H){if(void 0===H&&(H={}),!this._validate(e.validateLight,F,H))for(var oe in F){var fe=F[oe];e.endsWith(oe,"-transition")?this._transitionable.setTransition(oe.slice(0,-"-transition".length),fe):this._transitionable.setValue(oe,fe)}},P.prototype.updateTransitions=function(F){this._transitioning=this._transitionable.transitioned(F,this._transitioning)},P.prototype.hasTransition=function(){return this._transitioning.hasTransition()},P.prototype.recalculate=function(F){this.properties=this._transitioning.possiblyEvaluate(F)},P.prototype._validate=function(F,H,oe){return(!oe||!1!==oe.validate)&&e.emitValidationErrors(this,F.call(e.validateStyle,e.extend({value:H,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},P}(e.Evented),D=function(L,P){this.width=L,this.height=P,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};D.prototype.getDash=function(L,P){var F=L.join(",")+String(P);return this.dashEntry[F]||(this.dashEntry[F]=this.addDash(L,P)),this.dashEntry[F]},D.prototype.getDashRanges=function(L,P,F){var H=[],oe=L.length%2==1?-L[L.length-1]*F:0,fe=L[0]*F,ge=!0;H.push({left:oe,right:fe,isDash:ge,zeroLength:0===L[0]});for(var xe=L[0],Ce=1;Ce<L.length;Ce++){var Ge=L[Ce];oe=xe*F,fe=(xe+=Ge)*F,H.push({left:oe,right:fe,isDash:ge=!ge,zeroLength:0===Ge})}return H},D.prototype.addRoundDash=function(L,P,F){for(var H=P/2,oe=-F;oe<=F;oe++)for(var ge=this.width*(this.nextRow+F+oe),xe=0,Ce=L[xe],Ge=0;Ge<this.width;Ge++){Ge/Ce.right>1&&(Ce=L[++xe]);var Xe=Math.abs(Ge-Ce.left),ot=Math.abs(Ge-Ce.right),Mt=Math.min(Xe,ot),It=void 0,Ct=oe/F*(H+1);if(Ce.isDash){var Lt=H-Math.abs(Ct);It=Math.sqrt(Mt*Mt+Lt*Lt)}else It=H-Math.sqrt(Mt*Mt+Ct*Ct);this.data[ge+Ge]=Math.max(0,Math.min(255,It+128))}},D.prototype.addRegularDash=function(L){for(var P=L.length-1;P>=0;--P){var F=L[P],H=L[P+1];F.zeroLength?L.splice(P,1):H&&H.isDash===F.isDash&&(H.left=F.left,L.splice(P,1))}var oe=L[0],fe=L[L.length-1];oe.isDash===fe.isDash&&(oe.left=fe.left-this.width,fe.right=oe.right+this.width);for(var ge=this.width*this.nextRow,xe=0,Ce=L[xe],Ge=0;Ge<this.width;Ge++){Ge/Ce.right>1&&(Ce=L[++xe]);var Xe=Math.abs(Ge-Ce.left),ot=Math.abs(Ge-Ce.right),Mt=Math.min(Xe,ot);this.data[ge+Ge]=Math.max(0,Math.min(255,(Ce.isDash?Mt:-Mt)+128))}},D.prototype.addDash=function(L,P){var F=P?7:0,H=2*F+1;if(this.nextRow+H>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var oe=0,fe=0;fe<L.length;fe++)oe+=L[fe];if(0!==oe){var ge=this.width/oe,xe=this.getDashRanges(L,this.width,ge);P?this.addRoundDash(xe,ge,F):this.addRegularDash(xe)}var Ce={y:(this.nextRow+F+.5)/this.height,height:2*F/this.height,width:oe};return this.nextRow+=H,this.dirty=!0,Ce},D.prototype.bind=function(L){var P=L.gl;this.texture?(P.bindTexture(P.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,P.texSubImage2D(P.TEXTURE_2D,0,0,0,this.width,this.height,P.ALPHA,P.UNSIGNED_BYTE,this.data))):(this.texture=P.createTexture(),P.bindTexture(P.TEXTURE_2D,this.texture),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_S,P.REPEAT),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_T,P.REPEAT),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,P.LINEAR),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,P.LINEAR),P.texImage2D(P.TEXTURE_2D,0,P.ALPHA,this.width,this.height,0,P.ALPHA,P.UNSIGNED_BYTE,this.data))};var S=function L(P,F){this.workerPool=P,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var H=this.workerPool.acquire(this.id),oe=0;oe<H.length;oe++){var ge=new L.Actor(H[oe],F,this.id);ge.name="Worker "+oe,this.actors.push(ge)}};function C(L,P,F){var H=function(oe,fe){if(oe)return F(oe);if(fe){var ge=e.pick(e.extend(fe,L),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);fe.vector_layers&&(ge.vectorLayers=fe.vector_layers,ge.vectorLayerIds=ge.vectorLayers.map(function(xe){return xe.id})),ge.tiles=P.canonicalizeTileset(ge,L.url),F(null,ge)}};return L.url?e.getJSON(P.transformRequest(P.normalizeSourceURL(L.url),e.ResourceType.Source),H):e.browser.frame(function(){return H(null,L)})}S.prototype.broadcast=function(L,P,F){e.asyncAll(this.actors,function(H,oe){H.send(L,P,oe)},F=F||function(){})},S.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},S.prototype.remove=function(){this.actors.forEach(function(L){L.remove()}),this.actors=[],this.workerPool.release(this.id)},S.Actor=e.Actor;var z=function(L,P,F){this.bounds=e.LngLatBounds.convert(this.validateBounds(L)),this.minzoom=P||0,this.maxzoom=F||24};z.prototype.validateBounds=function(L){return Array.isArray(L)&&4===L.length?[Math.max(-180,L[0]),Math.max(-90,L[1]),Math.min(180,L[2]),Math.min(90,L[3])]:[-180,-90,180,90]},z.prototype.contains=function(L){var P=Math.pow(2,L.z),F=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*P),H=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*P),oe=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*P),fe=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*P);return L.x>=F&&L.x<oe&&L.y>=H&&L.y<fe};var B=function(L){function P(F,H,oe,fe){if(L.call(this),this.id=F,this.dispatcher=oe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(H,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},H),this._collectResourceTiming=H.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(fe)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.load=function(){var F=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(H,oe){F._tileJSONRequest=null,F._loaded=!0,H?F.fire(new e.ErrorEvent(H)):oe&&(e.extend(F,oe),oe.bounds&&(F.tileBounds=new z(oe.bounds,F.minzoom,F.maxzoom)),e.postTurnstileEvent(oe.tiles,F.map._requestManager._customAccessToken),e.postMapLoadEvent(oe.tiles,F.map._getMapId(),F.map._requestManager._skuToken,F.map._requestManager._customAccessToken),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},P.prototype.loaded=function(){return this._loaded},P.prototype.hasTile=function(F){return!this.tileBounds||this.tileBounds.contains(F.canonical)},P.prototype.onAdd=function(F){this.map=F,this.load()},P.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},P.prototype.serialize=function(){return e.extend({},this._options)},P.prototype.loadTile=function(F,H){var oe=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme)),fe={request:this.map._requestManager.transformRequest(oe,e.ResourceType.Tile),uid:F.uid,tileID:F.tileID,zoom:F.tileID.overscaledZ,tileSize:this.tileSize*F.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ge(xe,Ce){return delete F.request,F.aborted?H(null):xe&&404!==xe.status?H(xe):(Ce&&Ce.resourceTiming&&(F.resourceTiming=Ce.resourceTiming),this.map._refreshExpiredTiles&&Ce&&F.setExpiryData(Ce),F.loadVectorData(Ce,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),H(null),void(F.reloadCallback&&(this.loadTile(F,F.reloadCallback),F.reloadCallback=null)))}fe.request.collectResourceTiming=this._collectResourceTiming,F.actor&&"expired"!==F.state?"loading"===F.state?F.reloadCallback=H:F.request=F.actor.send("reloadTile",fe,ge.bind(this)):(F.actor=this.dispatcher.getActor(),F.request=F.actor.send("loadTile",fe,ge.bind(this)))},P.prototype.abortTile=function(F){F.request&&(F.request.cancel(),delete F.request),F.actor&&F.actor.send("abortTile",{uid:F.uid,type:this.type,source:this.id},void 0)},P.prototype.unloadTile=function(F){F.unloadVectorData(),F.actor&&F.actor.send("removeTile",{uid:F.uid,type:this.type,source:this.id},void 0)},P.prototype.hasTransition=function(){return!1},P}(e.Evented),U=function(L){function P(F,H,oe,fe){L.call(this),this.id=F,this.dispatcher=oe,this.setEventedParent(fe),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},H),e.extend(this,e.pick(H,["url","scheme","tileSize"]))}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.load=function(){var F=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(H,oe){F._tileJSONRequest=null,F._loaded=!0,H?F.fire(new e.ErrorEvent(H)):oe&&(e.extend(F,oe),oe.bounds&&(F.tileBounds=new z(oe.bounds,F.minzoom,F.maxzoom)),e.postTurnstileEvent(oe.tiles),e.postMapLoadEvent(oe.tiles,F.map._getMapId(),F.map._requestManager._skuToken),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},P.prototype.loaded=function(){return this._loaded},P.prototype.onAdd=function(F){this.map=F,this.load()},P.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},P.prototype.serialize=function(){return e.extend({},this._options)},P.prototype.hasTile=function(F){return!this.tileBounds||this.tileBounds.contains(F.canonical)},P.prototype.loadTile=function(F,H){var oe=this,fe=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);F.request=e.getImage(this.map._requestManager.transformRequest(fe,e.ResourceType.Tile),function(ge,xe){if(delete F.request,F.aborted)F.state="unloaded",H(null);else if(ge)F.state="errored",H(ge);else if(xe){oe.map._refreshExpiredTiles&&F.setExpiryData(xe),delete xe.cacheControl,delete xe.expires;var Ce=oe.map.painter.context,Ge=Ce.gl;F.texture=oe.map.painter.getTileTexture(xe.width),F.texture?F.texture.update(xe,{useMipmap:!0}):(F.texture=new e.Texture(Ce,xe,Ge.RGBA,{useMipmap:!0}),F.texture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE,Ge.LINEAR_MIPMAP_NEAREST),Ce.extTextureFilterAnisotropic&&Ge.texParameterf(Ge.TEXTURE_2D,Ce.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ce.extTextureFilterAnisotropicMax)),F.state="loaded",e.cacheEntryPossiblyAdded(oe.dispatcher),H(null)}})},P.prototype.abortTile=function(F,H){F.request&&(F.request.cancel(),delete F.request),H()},P.prototype.unloadTile=function(F,H){F.texture&&this.map.painter.saveTileTexture(F.texture),H()},P.prototype.hasTransition=function(){return!1},P}(e.Evented),G=function(L){function P(F,H,oe,fe){L.call(this,F,H,oe,fe),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},H),this.encoding=H.encoding||"mapbox"}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},P.prototype.loadTile=function(F,H){var oe=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function fe(ge,xe){ge&&(F.state="errored",H(ge)),xe&&(F.dem=xe,F.needsHillshadePrepare=!0,F.state="loaded",H(null))}F.request=e.getImage(this.map._requestManager.transformRequest(oe,e.ResourceType.Tile),function(ge,xe){if(delete F.request,F.aborted)F.state="unloaded",H(null);else if(ge)F.state="errored",H(ge);else if(xe){this.map._refreshExpiredTiles&&F.setExpiryData(xe),delete xe.cacheControl,delete xe.expires;var Ce=e.window.ImageBitmap&&xe instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?xe:e.browser.getImageData(xe,1),Ge={uid:F.uid,coord:F.tileID,source:this.id,rawImageData:Ce,encoding:this.encoding};F.actor&&"expired"!==F.state||(F.actor=this.dispatcher.getActor(),F.actor.send("loadDEMTile",Ge,fe.bind(this)))}}.bind(this)),F.neighboringTiles=this._getNeighboringTiles(F.tileID)},P.prototype._getNeighboringTiles=function(F){var H=F.canonical,oe=Math.pow(2,H.z),fe=(H.x-1+oe)%oe,ge=0===H.x?F.wrap-1:F.wrap,xe=(H.x+1+oe)%oe,Ce=H.x+1===oe?F.wrap+1:F.wrap,Ge={};return Ge[new e.OverscaledTileID(F.overscaledZ,ge,H.z,fe,H.y).key]={backfilled:!1},Ge[new e.OverscaledTileID(F.overscaledZ,Ce,H.z,xe,H.y).key]={backfilled:!1},H.y>0&&(Ge[new e.OverscaledTileID(F.overscaledZ,ge,H.z,fe,H.y-1).key]={backfilled:!1},Ge[new e.OverscaledTileID(F.overscaledZ,F.wrap,H.z,H.x,H.y-1).key]={backfilled:!1},Ge[new e.OverscaledTileID(F.overscaledZ,Ce,H.z,xe,H.y-1).key]={backfilled:!1}),H.y+1<oe&&(Ge[new e.OverscaledTileID(F.overscaledZ,ge,H.z,fe,H.y+1).key]={backfilled:!1},Ge[new e.OverscaledTileID(F.overscaledZ,F.wrap,H.z,H.x,H.y+1).key]={backfilled:!1},Ge[new e.OverscaledTileID(F.overscaledZ,Ce,H.z,xe,H.y+1).key]={backfilled:!1}),Ge},P.prototype.unloadTile=function(F){F.demTexture&&this.map.painter.saveTileTexture(F.demTexture),F.fbo&&(F.fbo.destroy(),delete F.fbo),F.dem&&delete F.dem,delete F.neighboringTiles,F.state="unloaded",F.actor&&F.actor.send("removeDEMTile",{uid:F.uid,source:this.id})},P}(U),X=function(L){function P(F,H,oe,fe){L.call(this),this.id=F,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=oe.getActor(),this.setEventedParent(fe),this._data=H.data,this._options=e.extend({},H),this._collectResourceTiming=H.collectResourceTiming,this._resourceTiming=[],void 0!==H.maxzoom&&(this.maxzoom=H.maxzoom),H.type&&(this.type=H.type),H.attribution&&(this.attribution=H.attribution),this.promoteId=H.promoteId;var ge=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:H.cluster||!1,geojsonVtOptions:{buffer:(void 0!==H.buffer?H.buffer:128)*ge,tolerance:(void 0!==H.tolerance?H.tolerance:.375)*ge,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:H.lineMetrics||!1,generateId:H.generateId||!1},superclusterOptions:{maxZoom:void 0!==H.clusterMaxZoom?Math.min(H.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(H.clusterRadius||50)*ge,log:!1,generateId:H.generateId||!1},clusterProperties:H.clusterProperties},H.workerOptions)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.load=function(){var F=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(H){if(H)F.fire(new e.ErrorEvent(H));else{var oe={dataType:"source",sourceDataType:"metadata"};F._collectResourceTiming&&F._resourceTiming&&F._resourceTiming.length>0&&(oe.resourceTiming=F._resourceTiming,F._resourceTiming=[]),F.fire(new e.Event("data",oe))}})},P.prototype.onAdd=function(F){this.map=F,this.load()},P.prototype.setData=function(F){var H=this;return this._data=F,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(oe){if(oe)H.fire(new e.ErrorEvent(oe));else{var fe={dataType:"source",sourceDataType:"content"};H._collectResourceTiming&&H._resourceTiming&&H._resourceTiming.length>0&&(fe.resourceTiming=H._resourceTiming,H._resourceTiming=[]),H.fire(new e.Event("data",fe))}}),this},P.prototype.getClusterExpansionZoom=function(F,H){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:F,source:this.id},H),this},P.prototype.getClusterChildren=function(F,H){return this.actor.send("geojson.getClusterChildren",{clusterId:F,source:this.id},H),this},P.prototype.getClusterLeaves=function(F,H,oe,fe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:F,limit:H,offset:oe},fe),this},P.prototype._updateWorkerData=function(F){var H=this;this._loaded=!1;var oe=e.extend({},this.workerOptions),fe=this._data;"string"==typeof fe?(oe.request=this.map._requestManager.transformRequest(e.browser.resolveURL(fe),e.ResourceType.Source),oe.request.collectResourceTiming=this._collectResourceTiming):oe.data=JSON.stringify(fe),this.actor.send(this.type+".loadData",oe,function(ge,xe){H._removed||xe&&xe.abandoned||(H._loaded=!0,xe&&xe.resourceTiming&&xe.resourceTiming[H.id]&&(H._resourceTiming=xe.resourceTiming[H.id].slice(0)),H.actor.send(H.type+".coalesce",{source:oe.source},null),F(ge))})},P.prototype.loaded=function(){return this._loaded},P.prototype.loadTile=function(F,H){var oe=this,fe=F.actor?"reloadTile":"loadTile";F.actor=this.actor,F.request=this.actor.send(fe,{type:this.type,uid:F.uid,tileID:F.tileID,zoom:F.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(xe,Ce){return delete F.request,F.unloadVectorData(),F.aborted?H(null):xe?H(xe):(F.loadVectorData(Ce,oe.map.painter,"reloadTile"===fe),H(null))})},P.prototype.abortTile=function(F){F.request&&(F.request.cancel(),delete F.request),F.aborted=!0},P.prototype.unloadTile=function(F){F.unloadVectorData(),this.actor.send("removeTile",{uid:F.uid,type:this.type,source:this.id})},P.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},P.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},P.prototype.hasTransition=function(){return!1},P}(e.Evented),Z=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),q=function(L){function P(F,H,oe,fe){L.call(this),this.id=F,this.dispatcher=oe,this.coordinates=H.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(fe),this.options=H}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.load=function(F,H){var oe=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(fe,ge){oe._loaded=!0,fe?oe.fire(new e.ErrorEvent(fe)):ge&&(oe.image=ge,F&&(oe.coordinates=F),H&&H(),oe._finishLoading())})},P.prototype.loaded=function(){return this._loaded},P.prototype.updateImage=function(F){var H=this;return this.image&&F.url?(this.options.url=F.url,this.load(F.coordinates,function(){H.texture=null}),this):this},P.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},P.prototype.onAdd=function(F){this.map=F,this.load()},P.prototype.setCoordinates=function(F){var H=this;this.coordinates=F;var oe=F.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(ge){for(var xe=1/0,Ce=1/0,Ge=-1/0,Xe=-1/0,ot=0,Mt=ge;ot<Mt.length;ot+=1){var It=Mt[ot];xe=Math.min(xe,It.x),Ce=Math.min(Ce,It.y),Ge=Math.max(Ge,It.x),Xe=Math.max(Xe,It.y)}var Tt=Math.max(Ge-xe,Xe-Ce),Ht=Math.max(0,Math.floor(-Math.log(Tt)/Math.LN2)),jt=Math.pow(2,Ht);return new e.CanonicalTileID(Ht,Math.floor((xe+Ge)/2*jt),Math.floor((Ce+Xe)/2*jt))}(oe),this.minzoom=this.maxzoom=this.tileID.z;var fe=oe.map(function(ge){return H.tileID.getTilePoint(ge)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(fe[0].x,fe[0].y,0,0),this._boundsArray.emplaceBack(fe[1].x,fe[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(fe[3].x,fe[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(fe[2].x,fe[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},P.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var F=this.map.painter.context,H=F.gl;for(var oe in this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(F,this.image,H.RGBA),this.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE)),this.tiles){var fe=this.tiles[oe];"loaded"!==fe.state&&(fe.state="loaded",fe.texture=this.texture)}}},P.prototype.loadTile=function(F,H){this.tileID&&this.tileID.equals(F.tileID.canonical)?(this.tiles[String(F.tileID.wrap)]=F,F.buckets={},H(null)):(F.state="errored",H(null))},P.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},P.prototype.hasTransition=function(){return!1},P}(e.Evented),W=function(L){function P(F,H,oe,fe){L.call(this,F,H,oe,fe),this.roundZoom=!0,this.type="video",this.options=H}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.load=function(){var F=this;this._loaded=!1;var H=this.options;this.urls=[];for(var oe=0,fe=H.urls;oe<fe.length;oe+=1)this.urls.push(this.map._requestManager.transformRequest(fe[oe],e.ResourceType.Source).url);e.getVideo(this.urls,function(xe,Ce){F._loaded=!0,xe?F.fire(new e.ErrorEvent(xe)):Ce&&(F.video=Ce,F.video.loop=!0,F.video.addEventListener("playing",function(){F.map.triggerRepaint()}),F.map&&F.video.play(),F._finishLoading())})},P.prototype.pause=function(){this.video&&this.video.pause()},P.prototype.play=function(){this.video&&this.video.play()},P.prototype.seek=function(F){if(this.video){var H=this.video.seekable;F<H.start(0)||F>H.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+H.start(0)+" and "+H.end(0)+"-second mark."))):this.video.currentTime=F}},P.prototype.getVideo=function(){return this.video},P.prototype.onAdd=function(F){this.map||(this.map=F,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},P.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var F=this.map.painter.context,H=F.gl;for(var oe in this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE),H.texSubImage2D(H.TEXTURE_2D,0,0,0,H.RGBA,H.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(F,this.video,H.RGBA),this.texture.bind(H.LINEAR,H.CLAMP_TO_EDGE)),this.tiles){var fe=this.tiles[oe];"loaded"!==fe.state&&(fe.state="loaded",fe.texture=this.texture)}}},P.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},P.prototype.hasTransition=function(){return this.video&&!this.video.paused},P}(q),te=function(L){function P(F,H,oe,fe){L.call(this,F,H,oe,fe),H.coordinates?Array.isArray(H.coordinates)&&4===H.coordinates.length&&!H.coordinates.some(function(ge){return!Array.isArray(ge)||2!==ge.length||ge.some(function(xe){return"number"!=typeof xe})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'missing required property "coordinates"'))),H.animate&&"boolean"!=typeof H.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'optional "animate" property must be a boolean value'))),H.canvas?"string"==typeof H.canvas||H.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'missing required property "canvas"'))),this.options=H,this.animate=void 0===H.animate||H.animate}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},P.prototype.getCanvas=function(){return this.canvas},P.prototype.onAdd=function(F){this.map=F,this.load(),this.canvas&&this.animate&&this.play()},P.prototype.onRemove=function(){this.pause()},P.prototype.prepare=function(){var F=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,F=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,F=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var H=this.map.painter.context,oe=H.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,Z.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(F||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(H,this.canvas,oe.RGBA,{premultiply:!0}),this.tiles){var ge=this.tiles[fe];"loaded"!==ge.state&&(ge.state="loaded",ge.texture=this.texture)}}},P.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},P.prototype.hasTransition=function(){return this._playing},P.prototype._hasInvalidDimensions=function(){for(var F=0,H=[this.canvas.width,this.canvas.height];F<H.length;F+=1){var oe=H[F];if(isNaN(oe)||oe<=0)return!0}return!1},P}(q),R={vector:B,raster:U,"raster-dem":G,geojson:X,video:W,image:q,canvas:te};function N(L,P){var F=e.identity([]);return e.translate(F,F,[1,1,0]),e.scale(F,F,[.5*L.width,.5*L.height,1]),e.multiply(F,F,L.calculatePosMatrix(P.toUnwrapped()))}function V(L,P,F,H,oe,fe){var ge=function(Lt,Tt,Ht){if(Lt)for(var jt=0,Wt=Lt;jt<Wt.length;jt+=1){var cr=Tt[Wt[jt]];if(cr&&cr.source===Ht&&"fill-extrusion"===cr.type)return!0}else for(var br in Tt){var zr=Tt[br];if(zr.source===Ht&&"fill-extrusion"===zr.type)return!0}return!1}(oe&&oe.layers,P,L.id),xe=fe.maxPitchScaleFactor(),Ce=L.tilesIn(H,xe,ge);Ce.sort(ee);for(var Ge=[],Xe=0,ot=Ce;Xe<ot.length;Xe+=1){var Mt=ot[Xe];Ge.push({wrappedTileID:Mt.tileID.wrapped().key,queryResults:Mt.tile.queryRenderedFeatures(P,F,L._state,Mt.queryGeometry,Mt.cameraQueryGeometry,Mt.scale,oe,fe,xe,N(L.transform,Mt.tileID))})}var It=function(Lt){for(var Tt={},Ht={},jt=0,Wt=Lt;jt<Wt.length;jt+=1){var cr=Wt[jt],br=cr.queryResults,zr=cr.wrappedTileID,Or=Ht[zr]=Ht[zr]||{};for(var sn in br)for(var on=br[sn],Mn=Or[sn]=Or[sn]||{},xn=Tt[sn]=Tt[sn]||[],Kn=0,ai=on;Kn<ai.length;Kn+=1){var _i=ai[Kn];Mn[_i.featureIndex]||(Mn[_i.featureIndex]=!0,xn.push(_i))}}return Tt}(Ge);for(var Ct in It)It[Ct].forEach(function(Lt){var Tt=Lt.feature,Ht=L.getFeatureState(Tt.layer["source-layer"],Tt.id);Tt.source=Tt.layer.source,Tt.layer["source-layer"]&&(Tt.sourceLayer=Tt.layer["source-layer"]),Tt.state=Ht});return It}function ee(L,P){var F=L.tileID,H=P.tileID;return F.overscaledZ-H.overscaledZ||F.canonical.y-H.canonical.y||F.wrap-H.wrap||F.canonical.x-H.canonical.x}var j=function(L,P){this.max=L,this.onRemove=P,this.reset()};j.prototype.reset=function(){for(var L in this.data)for(var P=0,F=this.data[L];P<F.length;P+=1){var H=F[P];H.timeout&&clearTimeout(H.timeout),this.onRemove(H.value)}return this.data={},this.order=[],this},j.prototype.add=function(L,P,F){var H=this,oe=L.wrapped().key;void 0===this.data[oe]&&(this.data[oe]=[]);var fe={value:P,timeout:void 0};if(void 0!==F&&(fe.timeout=setTimeout(function(){H.remove(L,fe)},F)),this.data[oe].push(fe),this.order.push(oe),this.order.length>this.max){var ge=this._getAndRemoveByKey(this.order[0]);ge&&this.onRemove(ge)}return this},j.prototype.has=function(L){return L.wrapped().key in this.data},j.prototype.getAndRemove=function(L){return this.has(L)?this._getAndRemoveByKey(L.wrapped().key):null},j.prototype._getAndRemoveByKey=function(L){var P=this.data[L].shift();return P.timeout&&clearTimeout(P.timeout),0===this.data[L].length&&delete this.data[L],this.order.splice(this.order.indexOf(L),1),P.value},j.prototype.getByKey=function(L){var P=this.data[L];return P?P[0].value:null},j.prototype.get=function(L){return this.has(L)?this.data[L.wrapped().key][0].value:null},j.prototype.remove=function(L,P){if(!this.has(L))return this;var F=L.wrapped().key,H=void 0===P?0:this.data[F].indexOf(P),oe=this.data[F][H];return this.data[F].splice(H,1),oe.timeout&&clearTimeout(oe.timeout),0===this.data[F].length&&delete this.data[F],this.onRemove(oe.value),this.order.splice(this.order.indexOf(F),1),this},j.prototype.setMaxSize=function(L){for(this.max=L;this.order.length>this.max;){var P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this},j.prototype.filter=function(L){var P=[];for(var F in this.data)for(var H=0,oe=this.data[F];H<oe.length;H+=1){var fe=oe[H];L(fe.value)||P.push(fe)}for(var ge=0,xe=P;ge<xe.length;ge+=1){var Ce=xe[ge];this.remove(Ce.value.tileID,Ce)}};var J=function(L,P,F){this.context=L;var H=L.gl;this.buffer=H.createBuffer(),this.dynamicDraw=Boolean(F),this.context.unbindVAO(),L.bindElementBuffer.set(this.buffer),H.bufferData(H.ELEMENT_ARRAY_BUFFER,P.arrayBuffer,this.dynamicDraw?H.DYNAMIC_DRAW:H.STATIC_DRAW),this.dynamicDraw||delete P.arrayBuffer};J.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},J.prototype.updateData=function(L){var P=this.context.gl;this.context.unbindVAO(),this.bind(),P.bufferSubData(P.ELEMENT_ARRAY_BUFFER,0,L.arrayBuffer)},J.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var $={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},re=function(L,P,F,H){this.length=P.length,this.attributes=F,this.itemSize=P.bytesPerElement,this.dynamicDraw=H,this.context=L;var oe=L.gl;this.buffer=oe.createBuffer(),L.bindVertexBuffer.set(this.buffer),oe.bufferData(oe.ARRAY_BUFFER,P.arrayBuffer,this.dynamicDraw?oe.DYNAMIC_DRAW:oe.STATIC_DRAW),this.dynamicDraw||delete P.arrayBuffer};re.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},re.prototype.updateData=function(L){var P=this.context.gl;this.bind(),P.bufferSubData(P.ARRAY_BUFFER,0,L.arrayBuffer)},re.prototype.enableAttributes=function(L,P){for(var F=0;F<this.attributes.length;F++){var oe=P.attributes[this.attributes[F].name];void 0!==oe&&L.enableVertexAttribArray(oe)}},re.prototype.setVertexAttribPointers=function(L,P,F){for(var H=0;H<this.attributes.length;H++){var oe=this.attributes[H],fe=P.attributes[oe.name];void 0!==fe&&L.vertexAttribPointer(fe,oe.components,L[$[oe.type]],!1,this.itemSize,oe.offset+this.itemSize*(F||0))}},re.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ne=function(L){this.gl=L.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ne.prototype.get=function(){return this.current},ne.prototype.set=function(L){},ne.prototype.getDefault=function(){return this.default},ne.prototype.setDefault=function(){this.set(this.default)};var se=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return e.Color.transparent},P.prototype.set=function(F){var H=this.current;(F.r!==H.r||F.g!==H.g||F.b!==H.b||F.a!==H.a||this.dirty)&&(this.gl.clearColor(F.r,F.g,F.b,F.a),this.current=F,this.dirty=!1)},P}(ne),ie=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return 1},P.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.clearDepth(F),this.current=F,this.dirty=!1)},P}(ne),ue=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return 0},P.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.clearStencil(F),this.current=F,this.dirty=!1)},P}(ne),le=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return[!0,!0,!0,!0]},P.prototype.set=function(F){var H=this.current;(F[0]!==H[0]||F[1]!==H[1]||F[2]!==H[2]||F[3]!==H[3]||this.dirty)&&(this.gl.colorMask(F[0],F[1],F[2],F[3]),this.current=F,this.dirty=!1)},P}(ne),de=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return!0},P.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.depthMask(F),this.current=F,this.dirty=!1)},P}(ne),ve=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return 255},P.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.stencilMask(F),this.current=F,this.dirty=!1)},P}(ne),_e=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},P.prototype.set=function(F){var H=this.current;(F.func!==H.func||F.ref!==H.ref||F.mask!==H.mask||this.dirty)&&(this.gl.stencilFunc(F.func,F.ref,F.mask),this.current=F,this.dirty=!1)},P}(ne),be=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){var F=this.gl;return[F.KEEP,F.KEEP,F.KEEP]},P.prototype.set=function(F){var H=this.current;(F[0]!==H[0]||F[1]!==H[1]||F[2]!==H[2]||this.dirty)&&(this.gl.stencilOp(F[0],F[1],F[2]),this.current=F,this.dirty=!1)},P}(ne),Te=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return!1},P.prototype.set=function(F){if(F!==this.current||this.dirty){var H=this.gl;F?H.enable(H.STENCIL_TEST):H.disable(H.STENCIL_TEST),this.current=F,this.dirty=!1}},P}(ne),he=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return[0,1]},P.prototype.set=function(F){var H=this.current;(F[0]!==H[0]||F[1]!==H[1]||this.dirty)&&(this.gl.depthRange(F[0],F[1]),this.current=F,this.dirty=!1)},P}(ne),me=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return!1},P.prototype.set=function(F){if(F!==this.current||this.dirty){var H=this.gl;F?H.enable(H.DEPTH_TEST):H.disable(H.DEPTH_TEST),this.current=F,this.dirty=!1}},P}(ne),Ae=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return this.gl.LESS},P.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.depthFunc(F),this.current=F,this.dirty=!1)},P}(ne),we=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return!1},P.prototype.set=function(F){if(F!==this.current||this.dirty){var H=this.gl;F?H.enable(H.BLEND):H.disable(H.BLEND),this.current=F,this.dirty=!1}},P}(ne),Se=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){var F=this.gl;return[F.ONE,F.ZERO]},P.prototype.set=function(F){var H=this.current;(F[0]!==H[0]||F[1]!==H[1]||this.dirty)&&(this.gl.blendFunc(F[0],F[1]),this.current=F,this.dirty=!1)},P}(ne),Pe=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return e.Color.transparent},P.prototype.set=function(F){var H=this.current;(F.r!==H.r||F.g!==H.g||F.b!==H.b||F.a!==H.a||this.dirty)&&(this.gl.blendColor(F.r,F.g,F.b,F.a),this.current=F,this.dirty=!1)},P}(ne),ze=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return this.gl.FUNC_ADD},P.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.blendEquation(F),this.current=F,this.dirty=!1)},P}(ne),He=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return!1},P.prototype.set=function(F){if(F!==this.current||this.dirty){var H=this.gl;F?H.enable(H.CULL_FACE):H.disable(H.CULL_FACE),this.current=F,this.dirty=!1}},P}(ne),tt=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return this.gl.BACK},P.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.cullFace(F),this.current=F,this.dirty=!1)},P}(ne),Oe=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return this.gl.CCW},P.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.frontFace(F),this.current=F,this.dirty=!1)},P}(ne),Be=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return null},P.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.useProgram(F),this.current=F,this.dirty=!1)},P}(ne),Je=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return this.gl.TEXTURE0},P.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.activeTexture(F),this.current=F,this.dirty=!1)},P}(ne),Ye=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){var F=this.gl;return[0,0,F.drawingBufferWidth,F.drawingBufferHeight]},P.prototype.set=function(F){var H=this.current;(F[0]!==H[0]||F[1]!==H[1]||F[2]!==H[2]||F[3]!==H[3]||this.dirty)&&(this.gl.viewport(F[0],F[1],F[2],F[3]),this.current=F,this.dirty=!1)},P}(ne),nt=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return null},P.prototype.set=function(F){if(F!==this.current||this.dirty){var H=this.gl;H.bindFramebuffer(H.FRAMEBUFFER,F),this.current=F,this.dirty=!1}},P}(ne),ft=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return null},P.prototype.set=function(F){if(F!==this.current||this.dirty){var H=this.gl;H.bindRenderbuffer(H.RENDERBUFFER,F),this.current=F,this.dirty=!1}},P}(ne),dt=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return null},P.prototype.set=function(F){if(F!==this.current||this.dirty){var H=this.gl;H.bindTexture(H.TEXTURE_2D,F),this.current=F,this.dirty=!1}},P}(ne),Rt=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return null},P.prototype.set=function(F){if(F!==this.current||this.dirty){var H=this.gl;H.bindBuffer(H.ARRAY_BUFFER,F),this.current=F,this.dirty=!1}},P}(ne),Et=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return null},P.prototype.set=function(F){var H=this.gl;H.bindBuffer(H.ELEMENT_ARRAY_BUFFER,F),this.current=F,this.dirty=!1},P}(ne),at=function(L){function P(F){L.call(this,F),this.vao=F.extVertexArrayObject}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return null},P.prototype.set=function(F){this.vao&&(F!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(F),this.current=F,this.dirty=!1)},P}(ne),rt=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return 4},P.prototype.set=function(F){if(F!==this.current||this.dirty){var H=this.gl;H.pixelStorei(H.UNPACK_ALIGNMENT,F),this.current=F,this.dirty=!1}},P}(ne),St=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return!1},P.prototype.set=function(F){if(F!==this.current||this.dirty){var H=this.gl;H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F),this.current=F,this.dirty=!1}},P}(ne),Xt=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return!1},P.prototype.set=function(F){if(F!==this.current||this.dirty){var H=this.gl;H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,F),this.current=F,this.dirty=!1}},P}(ne),lr=function(L){function P(F,H){L.call(this,F),this.context=F,this.parent=H}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getDefault=function(){return null},P}(ne),Ue=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.setDirty=function(){this.dirty=!0},P.prototype.set=function(F){if(F!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var H=this.gl;H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,F,0),this.current=F,this.dirty=!1}},P}(lr),Ze=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.set=function(F){if(F!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var H=this.gl;H.framebufferRenderbuffer(H.FRAMEBUFFER,H.DEPTH_ATTACHMENT,H.RENDERBUFFER,F),this.current=F,this.dirty=!1}},P}(lr),Ne=function(L,P,F,H){this.context=L,this.width=P,this.height=F;var fe=this.framebuffer=L.gl.createFramebuffer();this.colorAttachment=new Ue(L,fe),H&&(this.depthAttachment=new Ze(L,fe))};Ne.prototype.destroy=function(){var L=this.context.gl,P=this.colorAttachment.get();if(P&&L.deleteTexture(P),this.depthAttachment){var F=this.depthAttachment.get();F&&L.deleteRenderbuffer(F)}L.deleteFramebuffer(this.framebuffer)};var it=function(L,P,F){this.func=L,this.mask=P,this.range=F};it.ReadOnly=!1,it.ReadWrite=!0,it.disabled=new it(519,it.ReadOnly,[0,1]);var ke=function(L,P,F,H,oe,fe){this.test=L,this.ref=P,this.mask=F,this.fail=H,this.depthFail=oe,this.pass=fe};ke.disabled=new ke({func:519,mask:0},0,0,7680,7680,7680);var De=function(L,P,F){this.blendFunction=L,this.blendColor=P,this.mask=F};De.disabled=new De(De.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),De.unblended=new De(De.Replace,e.Color.transparent,[!0,!0,!0,!0]),De.alphaBlended=new De([1,771],e.Color.transparent,[!0,!0,!0,!0]);var Re=function(L,P,F){this.enable=L,this.mode=P,this.frontFace=F};Re.disabled=new Re(!1,1029,2305),Re.backCCW=new Re(!0,1029,2305);var Ie=function(L){this.gl=L,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new se(this),this.clearDepth=new ie(this),this.clearStencil=new ue(this),this.colorMask=new le(this),this.depthMask=new de(this),this.stencilMask=new ve(this),this.stencilFunc=new _e(this),this.stencilOp=new be(this),this.stencilTest=new Te(this),this.depthRange=new he(this),this.depthTest=new me(this),this.depthFunc=new Ae(this),this.blend=new we(this),this.blendFunc=new Se(this),this.blendColor=new Pe(this),this.blendEquation=new ze(this),this.cullFace=new He(this),this.cullFaceSide=new tt(this),this.frontFace=new Oe(this),this.program=new Be(this),this.activeTexture=new Je(this),this.viewport=new Ye(this),this.bindFramebuffer=new nt(this),this.bindRenderbuffer=new ft(this),this.bindTexture=new dt(this),this.bindVertexBuffer=new Rt(this),this.bindElementBuffer=new Et(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new at(this),this.pixelStoreUnpack=new rt(this),this.pixelStoreUnpackPremultiplyAlpha=new St(this),this.pixelStoreUnpackFlipY=new Xt(this),this.extTextureFilterAnisotropic=L.getExtension("EXT_texture_filter_anisotropic")||L.getExtension("MOZ_EXT_texture_filter_anisotropic")||L.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=L.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=L.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(L.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=L.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=L.getExtension("EXT_disjoint_timer_query")};Ie.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ie.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ie.prototype.createIndexBuffer=function(L,P){return new J(this,L,P)},Ie.prototype.createVertexBuffer=function(L,P,F){return new re(this,L,P,F)},Ie.prototype.createRenderbuffer=function(L,P,F){var H=this.gl,oe=H.createRenderbuffer();return this.bindRenderbuffer.set(oe),H.renderbufferStorage(H.RENDERBUFFER,L,P,F),this.bindRenderbuffer.set(null),oe},Ie.prototype.createFramebuffer=function(L,P,F){return new Ne(this,L,P,F)},Ie.prototype.clear=function(L){var P=L.color,F=L.depth,H=this.gl,oe=0;P&&(oe|=H.COLOR_BUFFER_BIT,this.clearColor.set(P),this.colorMask.set([!0,!0,!0,!0])),void 0!==F&&(oe|=H.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(F),this.depthMask.set(!0)),H.clear(oe)},Ie.prototype.setCullFace=function(L){!1===L.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(L.mode),this.frontFace.set(L.frontFace))},Ie.prototype.setDepthMode=function(L){L.func!==this.gl.ALWAYS||L.mask?(this.depthTest.set(!0),this.depthFunc.set(L.func),this.depthMask.set(L.mask),this.depthRange.set(L.range)):this.depthTest.set(!1)},Ie.prototype.setStencilMode=function(L){L.test.func!==this.gl.ALWAYS||L.mask?(this.stencilTest.set(!0),this.stencilMask.set(L.mask),this.stencilOp.set([L.fail,L.depthFail,L.pass]),this.stencilFunc.set({func:L.test.func,ref:L.ref,mask:L.test.mask})):this.stencilTest.set(!1)},Ie.prototype.setColorMode=function(L){e.deepEqual(L.blendFunction,De.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(L.blendFunction),this.blendColor.set(L.blendColor)),this.colorMask.set(L.mask)},Ie.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ke=function(L){function P(F,H,oe){var fe=this;L.call(this),this.id=F,this.dispatcher=oe,this.on("data",function(ge){"source"===ge.dataType&&"metadata"===ge.sourceDataType&&(fe._sourceLoaded=!0),fe._sourceLoaded&&!fe._paused&&"source"===ge.dataType&&"content"===ge.sourceDataType&&(fe.reload(),fe.transform&&fe.update(fe.transform))}),this.on("error",function(){fe._sourceErrored=!0}),this._source=function(ge,xe,Ce,Ge){var Xe=new R[xe.type](ge,xe,Ce,Ge);if(Xe.id!==ge)throw new Error("Expected Source id to be "+ge+" instead of "+Xe.id);return e.bindAll(["load","abort","unload","serialize","prepare"],Xe),Xe}(F,H,oe,this),this._tiles={},this._cache=new j(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.onAdd=function(F){this.map=F,this._maxTileCacheSize=F?F._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(F)},P.prototype.onRemove=function(F){this._source&&this._source.onRemove&&this._source.onRemove(F)},P.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var F in this._tiles){var H=this._tiles[F];if("loaded"!==H.state&&"errored"!==H.state)return!1}return!0},P.prototype.getSource=function(){return this._source},P.prototype.pause=function(){this._paused=!0},P.prototype.resume=function(){if(this._paused){var F=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,F&&this.reload(),this.transform&&this.update(this.transform)}},P.prototype._loadTile=function(F,H){return this._source.loadTile(F,H)},P.prototype._unloadTile=function(F){if(this._source.unloadTile)return this._source.unloadTile(F,function(){})},P.prototype._abortTile=function(F){if(this._source.abortTile)return this._source.abortTile(F,function(){})},P.prototype.serialize=function(){return this._source.serialize()},P.prototype.prepare=function(F){for(var H in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var oe=this._tiles[H];oe.upload(F),oe.prepare(this.map.style.imageManager)}},P.prototype.getIds=function(){return e.values(this._tiles).map(function(F){return F.tileID}).sort(ut).map(function(F){return F.key})},P.prototype.getRenderableIds=function(F){var H=this,oe=[];for(var fe in this._tiles)this._isIdRenderable(fe,F)&&oe.push(this._tiles[fe]);return F?oe.sort(function(ge,xe){var Ce=ge.tileID,Ge=xe.tileID,Xe=new e.Point(Ce.canonical.x,Ce.canonical.y)._rotate(H.transform.angle),ot=new e.Point(Ge.canonical.x,Ge.canonical.y)._rotate(H.transform.angle);return Ce.overscaledZ-Ge.overscaledZ||ot.y-Xe.y||ot.x-Xe.x}).map(function(ge){return ge.tileID.key}):oe.map(function(ge){return ge.tileID}).sort(ut).map(function(ge){return ge.key})},P.prototype.hasRenderableParent=function(F){var H=this.findLoadedParent(F,0);return!!H&&this._isIdRenderable(H.tileID.key)},P.prototype._isIdRenderable=function(F,H){return this._tiles[F]&&this._tiles[F].hasData()&&!this._coveredTiles[F]&&(H||!this._tiles[F].holdingForFade())},P.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var F in this._cache.reset(),this._tiles)"errored"!==this._tiles[F].state&&this._reloadTile(F,"reloading")},P.prototype._reloadTile=function(F,H){var oe=this._tiles[F];oe&&("loading"!==oe.state&&(oe.state=H),this._loadTile(oe,this._tileLoaded.bind(this,oe,F,H)))},P.prototype._tileLoaded=function(F,H,oe,fe){if(fe)return F.state="errored",void(404!==fe.status?this._source.fire(new e.ErrorEvent(fe,{tile:F})):this.update(this.transform));F.timeAdded=e.browser.now(),"expired"===oe&&(F.refreshedUponExpiration=!0),this._setTileReloadTimer(H,F),"raster-dem"===this.getSource().type&&F.dem&&this._backfillDEM(F),this._state.initializeTileState(F,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:F,coord:F.tileID}))},P.prototype._backfillDEM=function(F){for(var H=this.getRenderableIds(),oe=0;oe<H.length;oe++){var fe=H[oe];if(F.neighboringTiles&&F.neighboringTiles[fe]){var ge=this.getTileByID(fe);xe(F,ge),xe(ge,F)}}function xe(Ce,Ge){Ce.needsHillshadePrepare=!0;var Xe=Ge.tileID.canonical.x-Ce.tileID.canonical.x,ot=Ge.tileID.canonical.y-Ce.tileID.canonical.y,Mt=Math.pow(2,Ce.tileID.canonical.z),It=Ge.tileID.key;0===Xe&&0===ot||Math.abs(ot)>1||(Math.abs(Xe)>1&&(1===Math.abs(Xe+Mt)?Xe+=Mt:1===Math.abs(Xe-Mt)&&(Xe-=Mt)),Ge.dem&&Ce.dem&&(Ce.dem.backfillBorder(Ge.dem,Xe,ot),Ce.neighboringTiles&&Ce.neighboringTiles[It]&&(Ce.neighboringTiles[It].backfilled=!0)))}},P.prototype.getTile=function(F){return this.getTileByID(F.key)},P.prototype.getTileByID=function(F){return this._tiles[F]},P.prototype._retainLoadedChildren=function(F,H,oe,fe){for(var ge in this._tiles){var xe=this._tiles[ge];if(!(fe[ge]||!xe.hasData()||xe.tileID.overscaledZ<=H||xe.tileID.overscaledZ>oe)){for(var Ce=xe.tileID;xe&&xe.tileID.overscaledZ>H+1;){var Ge=xe.tileID.scaledTo(xe.tileID.overscaledZ-1);(xe=this._tiles[Ge.key])&&xe.hasData()&&(Ce=Ge)}for(var Xe=Ce;Xe.overscaledZ>H;)if(F[(Xe=Xe.scaledTo(Xe.overscaledZ-1)).key]){fe[Ce.key]=Ce;break}}}},P.prototype.findLoadedParent=function(F,H){if(F.key in this._loadedParentTiles){var oe=this._loadedParentTiles[F.key];return oe&&oe.tileID.overscaledZ>=H?oe:null}for(var fe=F.overscaledZ-1;fe>=H;fe--){var ge=F.scaledTo(fe),xe=this._getLoadedTile(ge);if(xe)return xe}},P.prototype._getLoadedTile=function(F){var H=this._tiles[F.key];return H&&H.hasData()?H:this._cache.getByKey(F.wrapped().key)},P.prototype.updateCacheSize=function(F){var H=(Math.ceil(F.width/this._source.tileSize)+1)*(Math.ceil(F.height/this._source.tileSize)+1),oe=Math.floor(5*H),fe="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,oe):oe;this._cache.setMaxSize(fe)},P.prototype.handleWrapJump=function(F){var oe=Math.round((F-(void 0===this._prevLng?F:this._prevLng))/360);if(this._prevLng=F,oe){var fe={};for(var ge in this._tiles){var xe=this._tiles[ge];xe.tileID=xe.tileID.unwrapTo(xe.tileID.wrap+oe),fe[xe.tileID.key]=xe}for(var Ce in this._tiles=fe,this._timers)clearTimeout(this._timers[Ce]),delete this._timers[Ce];for(var Ge in this._tiles)this._setTileReloadTimer(Ge,this._tiles[Ge])}},P.prototype.update=function(F){var H=this;if(this.transform=F,this._sourceLoaded&&!this._paused){var oe;this.updateCacheSize(F),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?oe=F.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Or){return new e.OverscaledTileID(Or.canonical.z,Or.wrap,Or.canonical.z,Or.canonical.x,Or.canonical.y)}):(oe=F.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(oe=oe.filter(function(Or){return H._source.hasTile(Or)}))):oe=[];var fe=F.coveringZoomLevel(this._source),ge=Math.max(fe-P.maxOverzooming,this._source.minzoom),xe=Math.max(fe+P.maxUnderzooming,this._source.minzoom),Ce=this._updateRetainedTiles(oe,fe);if(xt(this._source.type)){for(var Ge={},Xe={},ot=0,Mt=Object.keys(Ce);ot<Mt.length;ot+=1){var It=Mt[ot],Ct=Ce[It],Lt=this._tiles[It];if(Lt&&!(Lt.fadeEndTime&&Lt.fadeEndTime<=e.browser.now())){var Tt=this.findLoadedParent(Ct,ge);Tt&&(this._addTile(Tt.tileID),Ge[Tt.tileID.key]=Tt.tileID),Xe[It]=Ct}}for(var Ht in this._retainLoadedChildren(Xe,fe,xe,Ce),Ge)Ce[Ht]||(this._coveredTiles[Ht]=!0,Ce[Ht]=Ge[Ht])}for(var jt in Ce)this._tiles[jt].clearFadeHold();for(var Wt=0,cr=e.keysDifference(this._tiles,Ce);Wt<cr.length;Wt+=1){var br=cr[Wt],zr=this._tiles[br];zr.hasSymbolBuckets&&!zr.holdingForFade()?zr.setHoldDuration(this.map._fadeDuration):zr.hasSymbolBuckets&&!zr.symbolFadeFinished()||this._removeTile(br)}this._updateLoadedParentTileCache()}},P.prototype.releaseSymbolFadeTiles=function(){for(var F in this._tiles)this._tiles[F].holdingForFade()&&this._removeTile(F)},P.prototype._updateRetainedTiles=function(F,H){for(var oe={},fe={},ge=Math.max(H-P.maxOverzooming,this._source.minzoom),xe=Math.max(H+P.maxUnderzooming,this._source.minzoom),Ce={},Ge=0,Xe=F;Ge<Xe.length;Ge+=1){var ot=Xe[Ge],Mt=this._addTile(ot);oe[ot.key]=ot,Mt.hasData()||H<this._source.maxzoom&&(Ce[ot.key]=ot)}this._retainLoadedChildren(Ce,H,xe,oe);for(var It=0,Ct=F;It<Ct.length;It+=1){var Lt=Ct[It],Tt=this._tiles[Lt.key];if(!Tt.hasData()){if(H+1>this._source.maxzoom){var Ht=Lt.children(this._source.maxzoom)[0],jt=this.getTile(Ht);if(jt&&jt.hasData()){oe[Ht.key]=Ht;continue}}else{var Wt=Lt.children(this._source.maxzoom);if(oe[Wt[0].key]&&oe[Wt[1].key]&&oe[Wt[2].key]&&oe[Wt[3].key])continue}for(var cr=Tt.wasRequested(),br=Lt.overscaledZ-1;br>=ge;--br){var zr=Lt.scaledTo(br);if(fe[zr.key]||(fe[zr.key]=!0,!(Tt=this.getTile(zr))&&cr&&(Tt=this._addTile(zr)),Tt&&(oe[zr.key]=zr,cr=Tt.wasRequested(),Tt.hasData())))break}}}return oe},P.prototype._updateLoadedParentTileCache=function(){for(var F in this._loadedParentTiles={},this._tiles){for(var H=[],oe=void 0,fe=this._tiles[F].tileID;fe.overscaledZ>0;){if(fe.key in this._loadedParentTiles){oe=this._loadedParentTiles[fe.key];break}H.push(fe.key);var ge=fe.scaledTo(fe.overscaledZ-1);if(oe=this._getLoadedTile(ge))break;fe=ge}for(var xe=0,Ce=H;xe<Ce.length;xe+=1)this._loadedParentTiles[Ce[xe]]=oe}},P.prototype._addTile=function(F){var H=this._tiles[F.key];if(H)return H;(H=this._cache.getAndRemove(F))&&(this._setTileReloadTimer(F.key,H),H.tileID=F,this._state.initializeTileState(H,this.map?this.map.painter:null),this._cacheTimers[F.key]&&(clearTimeout(this._cacheTimers[F.key]),delete this._cacheTimers[F.key],this._setTileReloadTimer(F.key,H)));var oe=Boolean(H);return oe||(H=new e.Tile(F,this._source.tileSize*F.overscaleFactor()),this._loadTile(H,this._tileLoaded.bind(this,H,F.key,H.state))),H?(H.uses++,this._tiles[F.key]=H,oe||this._source.fire(new e.Event("dataloading",{tile:H,coord:H.tileID,dataType:"source"})),H):null},P.prototype._setTileReloadTimer=function(F,H){var oe=this;F in this._timers&&(clearTimeout(this._timers[F]),delete this._timers[F]);var fe=H.getExpiryTimeout();fe&&(this._timers[F]=setTimeout(function(){oe._reloadTile(F,"expired"),delete oe._timers[F]},fe))},P.prototype._removeTile=function(F){var H=this._tiles[F];H&&(H.uses--,delete this._tiles[F],this._timers[F]&&(clearTimeout(this._timers[F]),delete this._timers[F]),H.uses>0||(H.hasData()&&"reloading"!==H.state?this._cache.add(H.tileID,H,H.getExpiryTimeout()):(H.aborted=!0,this._abortTile(H),this._unloadTile(H))))},P.prototype.clearTiles=function(){for(var F in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(F);this._cache.reset()},P.prototype.tilesIn=function(F,H,oe){var fe=this,ge=[],xe=this.transform;if(!xe)return ge;for(var Ce=oe?xe.getCameraQueryGeometry(F):F,Ge=F.map(function(br){return xe.pointCoordinate(br)}),Xe=Ce.map(function(br){return xe.pointCoordinate(br)}),ot=this.getIds(),Mt=1/0,It=1/0,Ct=-1/0,Lt=-1/0,Tt=0,Ht=Xe;Tt<Ht.length;Tt+=1){var jt=Ht[Tt];Mt=Math.min(Mt,jt.x),It=Math.min(It,jt.y),Ct=Math.max(Ct,jt.x),Lt=Math.max(Lt,jt.y)}for(var Wt=function(br){var zr=fe._tiles[ot[br]];if(!zr.holdingForFade()){var Or=zr.tileID,sn=Math.pow(2,xe.zoom-zr.tileID.overscaledZ),on=H*zr.queryPadding*e.EXTENT/zr.tileSize/sn,Mn=[Or.getTilePoint(new e.MercatorCoordinate(Mt,It)),Or.getTilePoint(new e.MercatorCoordinate(Ct,Lt))];if(Mn[0].x-on<e.EXTENT&&Mn[0].y-on<e.EXTENT&&Mn[1].x+on>=0&&Mn[1].y+on>=0){var xn=Ge.map(function(ai){return Or.getTilePoint(ai)}),Kn=Xe.map(function(ai){return Or.getTilePoint(ai)});ge.push({tile:zr,tileID:Or,queryGeometry:xn,cameraQueryGeometry:Kn,scale:sn})}}},cr=0;cr<ot.length;cr++)Wt(cr);return ge},P.prototype.getVisibleCoordinates=function(F){for(var H=this,oe=this.getRenderableIds(F).map(function(Ce){return H._tiles[Ce].tileID}),fe=0,ge=oe;fe<ge.length;fe+=1){var xe=ge[fe];xe.posMatrix=this.transform.calculatePosMatrix(xe.toUnwrapped())}return oe},P.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(xt(this._source.type))for(var F in this._tiles){var H=this._tiles[F];if(void 0!==H.fadeEndTime&&H.fadeEndTime>=e.browser.now())return!0}return!1},P.prototype.setFeatureState=function(F,H,oe){this._state.updateState(F=F||"_geojsonTileLayer",H,oe)},P.prototype.removeFeatureState=function(F,H,oe){this._state.removeFeatureState(F=F||"_geojsonTileLayer",H,oe)},P.prototype.getFeatureState=function(F,H){return this._state.getState(F=F||"_geojsonTileLayer",H)},P.prototype.setDependencies=function(F,H,oe){var fe=this._tiles[F];fe&&fe.setDependencies(H,oe)},P.prototype.reloadTilesForDependencies=function(F,H){for(var oe in this._tiles)this._tiles[oe].hasDependency(F,H)&&this._reloadTile(oe,"reloading");this._cache.filter(function(fe){return!fe.hasDependency(F,H)})},P}(e.Evented);function ut(L,P){var F=Math.abs(2*L.wrap)-+(L.wrap<0),H=Math.abs(2*P.wrap)-+(P.wrap<0);return L.overscaledZ-P.overscaledZ||H-F||P.canonical.y-L.canonical.y||P.canonical.x-L.canonical.x}function xt(L){return"raster"===L||"image"===L||"video"===L}function gt(){return new e.window.Worker(ce.workerUrl)}Ke.maxOverzooming=10,Ke.maxUnderzooming=3;var Pt="mapboxgl_preloaded_worker_pool",ct=function(){this.active={}};ct.prototype.acquire=function(L){if(!this.workers)for(this.workers=[];this.workers.length<ct.workerCount;)this.workers.push(new gt);return this.active[L]=!0,this.workers.slice()},ct.prototype.release=function(L){delete this.active[L],0===this.numActive()&&(this.workers.forEach(function(P){P.terminate()}),this.workers=null)},ct.prototype.isPreloaded=function(){return!!this.active[Pt]},ct.prototype.numActive=function(){return Object.keys(this.active).length};var zt,Ft=Math.floor(e.browser.hardwareConcurrency/2);function Qe(){return zt||(zt=new ct),zt}function yt(L,P){var F={};for(var H in L)"ref"!==H&&(F[H]=L[H]);return e.refProperties.forEach(function(oe){oe in P&&(F[oe]=P[oe])}),F}function Nt(L){L=L.slice();for(var P=Object.create(null),F=0;F<L.length;F++)P[L[F].id]=L[F];for(var H=0;H<L.length;H++)"ref"in L[H]&&(L[H]=yt(L[H],P[L[H].ref]));return L}ct.workerCount=Math.max(Math.min(Ft,6),1);var Yt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function rr(L,P,F){F.push({command:Yt.addSource,args:[L,P[L]]})}function Fe(L,P,F){P.push({command:Yt.removeSource,args:[L]}),F[L]=!0}function ht(L,P,F,H){Fe(L,F,H),rr(L,P,F)}function kt(L,P,F){var H;for(H in L[F])if(L[F].hasOwnProperty(H)&&"data"!==H&&!e.deepEqual(L[F][H],P[F][H]))return!1;for(H in P[F])if(P[F].hasOwnProperty(H)&&"data"!==H&&!e.deepEqual(L[F][H],P[F][H]))return!1;return!0}function Gt(L,P,F,H,oe,fe){var ge;for(ge in P=P||{},L=L||{})L.hasOwnProperty(ge)&&(e.deepEqual(L[ge],P[ge])||F.push({command:fe,args:[H,ge,P[ge],oe]}));for(ge in P)P.hasOwnProperty(ge)&&!L.hasOwnProperty(ge)&&(e.deepEqual(L[ge],P[ge])||F.push({command:fe,args:[H,ge,P[ge],oe]}))}function Zt(L){return L.id}function fr(L,P){return L[P.id]=P,L}var nr=function(L,P){this.reset(L,P)};nr.prototype.reset=function(L,P){this.points=L||[],this._distances=[0];for(var F=1;F<this.points.length;F++)this._distances[F]=this._distances[F-1]+this.points[F].dist(this.points[F-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(P||0,.5*this.length),this.paddedLength=this.length-2*this.padding},nr.prototype.lerp=function(L){if(1===this.points.length)return this.points[0];L=e.clamp(L,0,1);for(var P=1,F=this._distances[P],H=L*this.paddedLength+this.padding;F<H&&P<this._distances.length;)F=this._distances[++P];var oe=P-1,fe=this._distances[oe],ge=F-fe,xe=ge>0?(H-fe)/ge:0;return this.points[oe].mult(1-xe).add(this.points[P].mult(xe))};var dr=function(L,P,F){var H=this.boxCells=[],oe=this.circleCells=[];this.xCellCount=Math.ceil(L/F),this.yCellCount=Math.ceil(P/F);for(var fe=0;fe<this.xCellCount*this.yCellCount;fe++)H.push([]),oe.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=L,this.height=P,this.xScale=this.xCellCount/L,this.yScale=this.yCellCount/P,this.boxUid=0,this.circleUid=0};function Tr(L,P,F,H,oe){var fe=e.create();return P?(e.scale(fe,fe,[1/oe,1/oe,1]),F||e.rotateZ(fe,fe,H.angle)):e.multiply(fe,H.labelPlaneMatrix,L),fe}function wr(L,P,F,H,oe){if(P){var fe=e.clone(L);return e.scale(fe,fe,[oe,oe,1]),F||e.rotateZ(fe,fe,-H.angle),fe}return H.glCoordMatrix}function mr(L,P){var F=[L.x,L.y,0,1];ln(F,F,P);var H=F[3];return{point:new e.Point(F[0]/H,F[1]/H),signedDistanceFromCamera:H}}function _r(L,P){return.5+L/P*.5}function Sr(L,P){var F=L[0]/L[3],H=L[1]/L[3];return F>=-P[0]&&F<=P[0]&&H>=-P[1]&&H<=P[1]}function Gr(L,P,F,H,oe,fe,ge,xe){var Ce=H?L.textSizeData:L.iconSizeData,Ge=e.evaluateSizeForZoom(Ce,F.transform.zoom),Xe=[256/F.width*2+1,256/F.height*2+1],ot=H?L.text.dynamicLayoutVertexArray:L.icon.dynamicLayoutVertexArray;ot.clear();for(var Mt=L.lineVertexArray,It=H?L.text.placedSymbolArray:L.icon.placedSymbolArray,Ct=F.transform.width/F.transform.height,Lt=!1,Tt=0;Tt<It.length;Tt++){var Ht=It.get(Tt);if(Ht.hidden||Ht.writingMode===e.WritingMode.vertical&&!Lt)Ln(Ht.numGlyphs,ot);else{Lt=!1;var jt=[Ht.anchorX,Ht.anchorY,0,1];if(e.transformMat4(jt,jt,P),Sr(jt,Xe)){var cr=_r(F.transform.cameraToCenterDistance,jt[3]),br=e.evaluateSizeForFeature(Ce,Ge,Ht),zr=ge?br/cr:br*cr,Or=new e.Point(Ht.anchorX,Ht.anchorY),sn=mr(Or,oe).point,on={},Mn=an(Ht,zr,!1,xe,P,oe,fe,L.glyphOffsetArray,Mt,ot,sn,Or,on,Ct);Lt=Mn.useVertical,(Mn.notEnoughRoom||Lt||Mn.needsFlipping&&an(Ht,zr,!0,xe,P,oe,fe,L.glyphOffsetArray,Mt,ot,sn,Or,on,Ct).notEnoughRoom)&&Ln(Ht.numGlyphs,ot)}else Ln(Ht.numGlyphs,ot)}}H?L.text.dynamicLayoutVertexBuffer.updateData(ot):L.icon.dynamicLayoutVertexBuffer.updateData(ot)}function Er(L,P,F,H,oe,fe,ge,xe,Ce,Ge,Xe){var ot=xe.glyphStartIndex+xe.numGlyphs,Mt=xe.lineStartIndex,It=xe.lineStartIndex+xe.lineLength,Ct=P.getoffsetX(xe.glyphStartIndex),Lt=P.getoffsetX(ot-1),Tt=Vn(L*Ct,F,H,oe,fe,ge,xe.segment,Mt,It,Ce,Ge,Xe);if(!Tt)return null;var Ht=Vn(L*Lt,F,H,oe,fe,ge,xe.segment,Mt,It,Ce,Ge,Xe);return Ht?{first:Tt,last:Ht}:null}function Zr(L,P,F,H){return L===e.WritingMode.horizontal&&Math.abs(F.y-P.y)>Math.abs(F.x-P.x)*H?{useVertical:!0}:(L===e.WritingMode.vertical?P.y<F.y:P.x>F.x)?{needsFlipping:!0}:null}function an(L,P,F,H,oe,fe,ge,xe,Ce,Ge,Xe,ot,Mt,It){var Ct,Lt=P/24,Tt=L.lineOffsetX*Lt,Ht=L.lineOffsetY*Lt;if(L.numGlyphs>1){var jt=L.glyphStartIndex+L.numGlyphs,Wt=L.lineStartIndex,cr=L.lineStartIndex+L.lineLength,br=Er(Lt,xe,Tt,Ht,F,Xe,ot,L,Ce,fe,Mt);if(!br)return{notEnoughRoom:!0};var zr=mr(br.first.point,ge).point,Or=mr(br.last.point,ge).point;if(H&&!F){var sn=Zr(L.writingMode,zr,Or,It);if(sn)return sn}Ct=[br.first];for(var on=L.glyphStartIndex+1;on<jt-1;on++)Ct.push(Vn(Lt*xe.getoffsetX(on),Tt,Ht,F,Xe,ot,L.segment,Wt,cr,Ce,fe,Mt));Ct.push(br.last)}else{if(H&&!F){var Mn=mr(ot,oe).point,xn=L.lineStartIndex+L.segment+1,Kn=new e.Point(Ce.getx(xn),Ce.gety(xn)),ai=mr(Kn,oe),_i=ai.signedDistanceFromCamera>0?ai.point:gn(ot,Kn,Mn,1,oe),Jr=Zr(L.writingMode,Mn,_i,It);if(Jr)return Jr}var zn=Vn(Lt*xe.getoffsetX(L.glyphStartIndex),Tt,Ht,F,Xe,ot,L.segment,L.lineStartIndex,L.lineStartIndex+L.lineLength,Ce,fe,Mt);if(!zn)return{notEnoughRoom:!0};Ct=[zn]}for(var oi=0,ni=Ct;oi<ni.length;oi+=1){var pi=ni[oi];e.addDynamicAttributes(Ge,pi.point,pi.angle)}return{}}function gn(L,P,F,H,oe){var fe=mr(L.add(L.sub(P)._unit()),oe).point,ge=F.sub(fe);return F.add(ge._mult(H/ge.mag()))}function Vn(L,P,F,H,oe,fe,ge,xe,Ce,Ge,Xe,ot){var Mt=H?L-P:L+P,It=Mt>0?1:-1,Ct=0;H&&(It*=-1,Ct=Math.PI),It<0&&(Ct+=Math.PI);for(var Lt=It>0?xe+ge:xe+ge+1,Tt=oe,Ht=oe,jt=0,Wt=0,cr=Math.abs(Mt),br=[];jt+Wt<=cr;){if((Lt+=It)<xe||Lt>=Ce)return null;if(Ht=Tt,br.push(Tt),void 0===(Tt=ot[Lt])){var zr=new e.Point(Ge.getx(Lt),Ge.gety(Lt)),Or=mr(zr,Xe);if(Or.signedDistanceFromCamera>0)Tt=ot[Lt]=Or.point;else{var sn=Lt-It;Tt=gn(0===jt?fe:new e.Point(Ge.getx(sn),Ge.gety(sn)),zr,Ht,cr-jt+1,Xe)}}jt+=Wt,Wt=Ht.dist(Tt)}var on=(cr-jt)/Wt,Mn=Tt.sub(Ht),xn=Mn.mult(on)._add(Ht);xn._add(Mn._unit()._perp()._mult(F*It));var Kn=Ct+Math.atan2(Tt.y-Ht.y,Tt.x-Ht.x);return br.push(xn),{point:xn,angle:Kn,path:br}}dr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},dr.prototype.insert=function(L,P,F,H,oe){this._forEachCell(P,F,H,oe,this._insertBoxCell,this.boxUid++),this.boxKeys.push(L),this.bboxes.push(P),this.bboxes.push(F),this.bboxes.push(H),this.bboxes.push(oe)},dr.prototype.insertCircle=function(L,P,F,H){this._forEachCell(P-H,F-H,P+H,F+H,this._insertCircleCell,this.circleUid++),this.circleKeys.push(L),this.circles.push(P),this.circles.push(F),this.circles.push(H)},dr.prototype._insertBoxCell=function(L,P,F,H,oe,fe){this.boxCells[oe].push(fe)},dr.prototype._insertCircleCell=function(L,P,F,H,oe,fe){this.circleCells[oe].push(fe)},dr.prototype._query=function(L,P,F,H,oe,fe){if(F<0||L>this.width||H<0||P>this.height)return!oe&&[];var ge=[];if(L<=0&&P<=0&&this.width<=F&&this.height<=H){if(oe)return!0;for(var xe=0;xe<this.boxKeys.length;xe++)ge.push({key:this.boxKeys[xe],x1:this.bboxes[4*xe],y1:this.bboxes[4*xe+1],x2:this.bboxes[4*xe+2],y2:this.bboxes[4*xe+3]});for(var Ce=0;Ce<this.circleKeys.length;Ce++){var Ge=this.circles[3*Ce],Xe=this.circles[3*Ce+1],ot=this.circles[3*Ce+2];ge.push({key:this.circleKeys[Ce],x1:Ge-ot,y1:Xe-ot,x2:Ge+ot,y2:Xe+ot})}return fe?ge.filter(fe):ge}return this._forEachCell(L,P,F,H,this._queryCell,ge,{hitTest:oe,seenUids:{box:{},circle:{}}},fe),oe?ge.length>0:ge},dr.prototype._queryCircle=function(L,P,F,H,oe){var fe=L-F,ge=L+F,xe=P-F,Ce=P+F;if(ge<0||fe>this.width||Ce<0||xe>this.height)return!H&&[];var Ge=[];return this._forEachCell(fe,xe,ge,Ce,this._queryCellCircle,Ge,{hitTest:H,circle:{x:L,y:P,radius:F},seenUids:{box:{},circle:{}}},oe),H?Ge.length>0:Ge},dr.prototype.query=function(L,P,F,H,oe){return this._query(L,P,F,H,!1,oe)},dr.prototype.hitTest=function(L,P,F,H,oe){return this._query(L,P,F,H,!0,oe)},dr.prototype.hitTestCircle=function(L,P,F,H){return this._queryCircle(L,P,F,!0,H)},dr.prototype._queryCell=function(L,P,F,H,oe,fe,ge,xe){var Ce=ge.seenUids,Ge=this.boxCells[oe];if(null!==Ge)for(var Xe=this.bboxes,ot=0,Mt=Ge;ot<Mt.length;ot+=1){var It=Mt[ot];if(!Ce.box[It]){Ce.box[It]=!0;var Ct=4*It;if(L<=Xe[Ct+2]&&P<=Xe[Ct+3]&&F>=Xe[Ct+0]&&H>=Xe[Ct+1]&&(!xe||xe(this.boxKeys[It]))){if(ge.hitTest)return fe.push(!0),!0;fe.push({key:this.boxKeys[It],x1:Xe[Ct],y1:Xe[Ct+1],x2:Xe[Ct+2],y2:Xe[Ct+3]})}}}var Lt=this.circleCells[oe];if(null!==Lt)for(var Tt=this.circles,Ht=0,jt=Lt;Ht<jt.length;Ht+=1){var Wt=jt[Ht];if(!Ce.circle[Wt]){Ce.circle[Wt]=!0;var cr=3*Wt;if(this._circleAndRectCollide(Tt[cr],Tt[cr+1],Tt[cr+2],L,P,F,H)&&(!xe||xe(this.circleKeys[Wt]))){if(ge.hitTest)return fe.push(!0),!0;var br=Tt[cr],zr=Tt[cr+1],Or=Tt[cr+2];fe.push({key:this.circleKeys[Wt],x1:br-Or,y1:zr-Or,x2:br+Or,y2:zr+Or})}}}},dr.prototype._queryCellCircle=function(L,P,F,H,oe,fe,ge,xe){var Ce=ge.circle,Ge=ge.seenUids,Xe=this.boxCells[oe];if(null!==Xe)for(var ot=this.bboxes,Mt=0,It=Xe;Mt<It.length;Mt+=1){var Ct=It[Mt];if(!Ge.box[Ct]){Ge.box[Ct]=!0;var Lt=4*Ct;if(this._circleAndRectCollide(Ce.x,Ce.y,Ce.radius,ot[Lt+0],ot[Lt+1],ot[Lt+2],ot[Lt+3])&&(!xe||xe(this.boxKeys[Ct])))return fe.push(!0),!0}}var Tt=this.circleCells[oe];if(null!==Tt)for(var Ht=this.circles,jt=0,Wt=Tt;jt<Wt.length;jt+=1){var cr=Wt[jt];if(!Ge.circle[cr]){Ge.circle[cr]=!0;var br=3*cr;if(this._circlesCollide(Ht[br],Ht[br+1],Ht[br+2],Ce.x,Ce.y,Ce.radius)&&(!xe||xe(this.circleKeys[cr])))return fe.push(!0),!0}}},dr.prototype._forEachCell=function(L,P,F,H,oe,fe,ge,xe){for(var Ce=this._convertToXCellCoord(L),Ge=this._convertToYCellCoord(P),Xe=this._convertToXCellCoord(F),ot=this._convertToYCellCoord(H),Mt=Ce;Mt<=Xe;Mt++)for(var It=Ge;It<=ot;It++)if(oe.call(this,L,P,F,H,this.xCellCount*It+Mt,fe,ge,xe))return},dr.prototype._convertToXCellCoord=function(L){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(L*this.xScale)))},dr.prototype._convertToYCellCoord=function(L){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(L*this.yScale)))},dr.prototype._circlesCollide=function(L,P,F,H,oe,fe){var ge=H-L,xe=oe-P,Ce=F+fe;return Ce*Ce>ge*ge+xe*xe},dr.prototype._circleAndRectCollide=function(L,P,F,H,oe,fe,ge){var xe=(fe-H)/2,Ce=Math.abs(L-(H+xe));if(Ce>xe+F)return!1;var Ge=(ge-oe)/2,Xe=Math.abs(P-(oe+Ge));if(Xe>Ge+F)return!1;if(Ce<=xe||Xe<=Ge)return!0;var ot=Ce-xe,Mt=Xe-Ge;return ot*ot+Mt*Mt<=F*F};var Gn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ln(L,P){for(var F=0;F<L;F++){var H=P.length;P.resize(H+4),P.float32.set(Gn,3*H)}}function ln(L,P,F){var H=P[0],oe=P[1];return L[0]=F[0]*H+F[4]*oe+F[12],L[1]=F[1]*H+F[5]*oe+F[13],L[3]=F[3]*H+F[7]*oe+F[15],L}var qr=function(L,P,F){void 0===P&&(P=new dr(L.width+200,L.height+200,25)),void 0===F&&(F=new dr(L.width+200,L.height+200,25)),this.transform=L,this.grid=P,this.ignoredGrid=F,this.pitchfactor=Math.cos(L._pitch)*L.cameraToCenterDistance,this.screenRightBoundary=L.width+100,this.screenBottomBoundary=L.height+100,this.gridRightBoundary=L.width+200,this.gridBottomBoundary=L.height+200};function Pr(L,P,F){return P*(e.EXTENT/(L.tileSize*Math.pow(2,F-L.tileID.overscaledZ)))}qr.prototype.placeCollisionBox=function(L,P,F,H,oe){var fe=this.projectAndGetPerspectiveRatio(H,L.anchorPointX,L.anchorPointY),ge=F*fe.perspectiveRatio,xe=L.x1*ge+fe.point.x,Ce=L.y1*ge+fe.point.y,Ge=L.x2*ge+fe.point.x,Xe=L.y2*ge+fe.point.y;return!this.isInsideGrid(xe,Ce,Ge,Xe)||!P&&this.grid.hitTest(xe,Ce,Ge,Xe,oe)?{box:[],offscreen:!1}:{box:[xe,Ce,Ge,Xe],offscreen:this.isOffscreen(xe,Ce,Ge,Xe)}},qr.prototype.placeCollisionCircles=function(L,P,F,H,oe,fe,ge,xe,Ce,Ge,Xe,ot,Mt){var It=[],Ct=new e.Point(P.anchorX,P.anchorY),Lt=mr(Ct,fe),Tt=_r(this.transform.cameraToCenterDistance,Lt.signedDistanceFromCamera),Ht=(Ge?oe/Tt:oe*Tt)/e.ONE_EM,jt=mr(Ct,ge).point,Wt=Er(Ht,H,P.lineOffsetX*Ht,P.lineOffsetY*Ht,!1,jt,Ct,P,F,ge,{}),cr=!1,br=!1,zr=!0;if(Wt){for(var Or=.5*ot*Tt+Mt,sn=new e.Point(-100,-100),on=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Mn=new nr,xn=Wt.first,Kn=Wt.last,ai=[],_i=xn.path.length-1;_i>=1;_i--)ai.push(xn.path[_i]);for(var Jr=1;Jr<Kn.path.length;Jr++)ai.push(Kn.path[Jr]);var zn=2.5*Or;if(xe){var oi=ai.map(function(_o){return mr(_o,xe)});ai=oi.some(function(_o){return _o.signedDistanceFromCamera<=0})?[]:oi.map(function(_o){return _o.point})}var ni=[];if(ai.length>0){for(var pi=ai[0].clone(),Ai=ai[0].clone(),zi=1;zi<ai.length;zi++)pi.x=Math.min(pi.x,ai[zi].x),pi.y=Math.min(pi.y,ai[zi].y),Ai.x=Math.max(Ai.x,ai[zi].x),Ai.y=Math.max(Ai.y,ai[zi].y);ni=pi.x>=sn.x&&Ai.x<=on.x&&pi.y>=sn.y&&Ai.y<=on.y?[ai]:Ai.x<sn.x||pi.x>on.x||Ai.y<sn.y||pi.y>on.y?[]:e.clipLine([ai],sn.x,sn.y,on.x,on.y)}for(var si=0,Di=ni;si<Di.length;si+=1){Mn.reset(Di[si],.25*Or);var ji;ji=Mn.length<=.5*Or?1:Math.ceil(Mn.paddedLength/zn)+1;for(var Oi=0;Oi<ji;Oi++){var Gi=Oi/Math.max(ji-1,1),ta=Mn.lerp(Gi),Ta=ta.x+100,Va=ta.y+100;It.push(Ta,Va,Or,0);var Ua=Ta-Or,wa=Va-Or,Ra=Ta+Or,Ea=Va+Or;if(zr=zr&&this.isOffscreen(Ua,wa,Ra,Ea),br=br||this.isInsideGrid(Ua,wa,Ra,Ea),!L&&this.grid.hitTestCircle(Ta,Va,Or,Xe)&&(cr=!0,!Ce))return{circles:[],offscreen:!1,collisionDetected:cr}}}}return{circles:!Ce&&cr||!br?[]:It,offscreen:zr,collisionDetected:cr}},qr.prototype.queryRenderedSymbols=function(L){if(0===L.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var P=[],F=1/0,H=1/0,oe=-1/0,fe=-1/0,ge=0,xe=L;ge<xe.length;ge+=1){var Ce=xe[ge],Ge=new e.Point(Ce.x+100,Ce.y+100);F=Math.min(F,Ge.x),H=Math.min(H,Ge.y),oe=Math.max(oe,Ge.x),fe=Math.max(fe,Ge.y),P.push(Ge)}for(var Xe={},ot={},Mt=0,It=this.grid.query(F,H,oe,fe).concat(this.ignoredGrid.query(F,H,oe,fe));Mt<It.length;Mt+=1){var Ct=It[Mt],Lt=Ct.key;if(void 0===Xe[Lt.bucketInstanceId]&&(Xe[Lt.bucketInstanceId]={}),!Xe[Lt.bucketInstanceId][Lt.featureIndex]){var Tt=[new e.Point(Ct.x1,Ct.y1),new e.Point(Ct.x2,Ct.y1),new e.Point(Ct.x2,Ct.y2),new e.Point(Ct.x1,Ct.y2)];e.polygonIntersectsPolygon(P,Tt)&&(Xe[Lt.bucketInstanceId][Lt.featureIndex]=!0,void 0===ot[Lt.bucketInstanceId]&&(ot[Lt.bucketInstanceId]=[]),ot[Lt.bucketInstanceId].push(Lt.featureIndex))}}return ot},qr.prototype.insertCollisionBox=function(L,P,F,H,oe){(P?this.ignoredGrid:this.grid).insert({bucketInstanceId:F,featureIndex:H,collisionGroupID:oe},L[0],L[1],L[2],L[3])},qr.prototype.insertCollisionCircles=function(L,P,F,H,oe){for(var fe=P?this.ignoredGrid:this.grid,ge={bucketInstanceId:F,featureIndex:H,collisionGroupID:oe},xe=0;xe<L.length;xe+=4)fe.insertCircle(ge,L[xe],L[xe+1],L[xe+2])},qr.prototype.projectAndGetPerspectiveRatio=function(L,P,F){var H=[P,F,0,1];return ln(H,H,L),{point:new e.Point((H[0]/H[3]+1)/2*this.transform.width+100,(-H[1]/H[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/H[3]*.5}},qr.prototype.isOffscreen=function(L,P,F,H){return F<100||L>=this.screenRightBoundary||H<100||P>this.screenBottomBoundary},qr.prototype.isInsideGrid=function(L,P,F,H){return F>=0&&L<this.gridRightBoundary&&H>=0&&P<this.gridBottomBoundary},qr.prototype.getViewportMatrix=function(){var L=e.identity([]);return e.translate(L,L,[-100,-100,0]),L};var un=function(L,P,F,H){this.opacity=L?Math.max(0,Math.min(1,L.opacity+(L.placed?P:-P))):H&&F?1:0,this.placed=F};un.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var dn=function(L,P,F,H,oe){this.text=new un(L?L.text:null,P,F,oe),this.icon=new un(L?L.icon:null,P,H,oe)};dn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var cn=function(L,P,F){this.text=L,this.icon=P,this.skipFade=F},fn=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Bn=function(L,P,F,H,oe){this.bucketInstanceId=L,this.featureIndex=P,this.sourceLayerIndex=F,this.bucketIndex=H,this.tileID=oe},Nn=function(L){this.crossSourceCollisions=L,this.maxGroupID=0,this.collisionGroups={}};function Fn(L,P,F,H,oe){var fe=e.getAnchorAlignment(L),ge=-(fe.horizontalAlign-.5)*P,xe=-(fe.verticalAlign-.5)*F,Ce=e.evaluateVariableOffset(L,H);return new e.Point(ge+Ce[0]*oe,xe+Ce[1]*oe)}function ar(L,P,F,H,oe,fe){var ge=L.x1,xe=L.x2,Ce=L.y1,Ge=L.y2,Xe=L.anchorPointX,ot=L.anchorPointY,Mt=new e.Point(P,F);return H&&Mt._rotate(oe?fe:-fe),{x1:ge+Mt.x,y1:Ce+Mt.y,x2:xe+Mt.x,y2:Ge+Mt.y,anchorPointX:Xe,anchorPointY:ot}}Nn.prototype.get=function(L){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[L]){var P=++this.maxGroupID;this.collisionGroups[L]={ID:P,predicate:function(F){return F.collisionGroupID===P}}}return this.collisionGroups[L]};var Bt=function(L,P,F,H){this.transform=L.clone(),this.collisionIndex=new qr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=P,this.retainedQueryData={},this.collisionGroups=new Nn(F),this.collisionCircleArrays={},this.prevPlacement=H,H&&(H.prevPlacement=void 0),this.placedOrientations={}};function Qt(L,P,F,H,oe){L.emplaceBack(P?1:0,F?1:0,H||0,oe||0),L.emplaceBack(P?1:0,F?1:0,H||0,oe||0),L.emplaceBack(P?1:0,F?1:0,H||0,oe||0),L.emplaceBack(P?1:0,F?1:0,H||0,oe||0)}Bt.prototype.getBucketParts=function(L,P,F,H){var oe=F.getBucket(P),fe=F.latestFeatureIndex;if(oe&&fe&&P.id===oe.layerIds[0]){var ge=F.collisionBoxArray,xe=oe.layers[0].layout,Ce=Math.pow(2,this.transform.zoom-F.tileID.overscaledZ),Ge=F.tileSize/e.EXTENT,Xe=this.transform.calculatePosMatrix(F.tileID.toUnwrapped()),ot="map"===xe.get("text-pitch-alignment"),Mt="map"===xe.get("text-rotation-alignment"),It=Pr(F,1,this.transform.zoom),Ct=Tr(Xe,ot,Mt,this.transform,It),Lt=null;if(ot){var Tt=wr(Xe,ot,Mt,this.transform,It);Lt=e.multiply([],this.transform.labelPlaneMatrix,Tt)}this.retainedQueryData[oe.bucketInstanceId]=new Bn(oe.bucketInstanceId,fe,oe.sourceLayerIndex,oe.index,F.tileID);var Ht={bucket:oe,layout:xe,posMatrix:Xe,textLabelPlaneMatrix:Ct,labelToScreenMatrix:Lt,scale:Ce,textPixelRatio:Ge,holdingForFade:F.holdingForFade(),collisionBoxArray:ge,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(oe.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(oe.sourceID)};if(H)for(var jt=0,Wt=oe.sortKeyRanges;jt<Wt.length;jt+=1){var cr=Wt[jt];L.push({sortKey:cr.sortKey,symbolInstanceStart:cr.symbolInstanceStart,symbolInstanceEnd:cr.symbolInstanceEnd,parameters:Ht})}else L.push({symbolInstanceStart:0,symbolInstanceEnd:oe.symbolInstances.length,parameters:Ht})}},Bt.prototype.attemptAnchorPlacement=function(L,P,F,H,oe,fe,ge,xe,Ce,Ge,Xe,ot,Mt,It,Ct){var Lt,Tt=[ot.textOffset0,ot.textOffset1],Ht=Fn(L,F,H,Tt,oe),jt=this.collisionIndex.placeCollisionBox(ar(P,Ht.x,Ht.y,fe,ge,this.transform.angle),Xe,xe,Ce,Ge.predicate);if((!Ct||0!==this.collisionIndex.placeCollisionBox(ar(Ct,Ht.x,Ht.y,fe,ge,this.transform.angle),Xe,xe,Ce,Ge.predicate).box.length)&&jt.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[ot.crossTileID]&&this.prevPlacement.placements[ot.crossTileID]&&this.prevPlacement.placements[ot.crossTileID].text&&(Lt=this.prevPlacement.variableOffsets[ot.crossTileID].anchor),this.variableOffsets[ot.crossTileID]={textOffset:Tt,width:F,height:H,anchor:L,textBoxScale:oe,prevAnchor:Lt},this.markUsedJustification(Mt,L,ot,It),Mt.allowVerticalPlacement&&(this.markUsedOrientation(Mt,It,ot),this.placedOrientations[ot.crossTileID]=It),{shift:Ht,placedGlyphBoxes:jt}},Bt.prototype.placeLayerBucketPart=function(L,P,F){var H=this,oe=L.parameters,fe=oe.bucket,ge=oe.layout,xe=oe.posMatrix,Ce=oe.textLabelPlaneMatrix,Ge=oe.labelToScreenMatrix,Xe=oe.textPixelRatio,ot=oe.holdingForFade,Mt=oe.collisionBoxArray,It=oe.partiallyEvaluatedTextSize,Ct=oe.collisionGroup,Lt=ge.get("text-optional"),Tt=ge.get("icon-optional"),Ht=ge.get("text-allow-overlap"),jt=ge.get("icon-allow-overlap"),Wt="map"===ge.get("text-rotation-alignment"),cr="map"===ge.get("text-pitch-alignment"),br="none"!==ge.get("icon-text-fit"),zr="viewport-y"===ge.get("symbol-z-order"),Or=Ht&&(jt||!fe.hasIconData()||Tt),sn=jt&&(Ht||!fe.hasTextData()||Lt);!fe.collisionArrays&&Mt&&fe.deserializeCollisionBoxes(Mt);var on=function(Jr,zn){if(!P[Jr.crossTileID])if(ot)H.placements[Jr.crossTileID]=new cn(!1,!1,!1);else{var oi,ni=!1,pi=!1,Ai=!0,zi=null,si={box:null,offscreen:null},Di={box:null,offscreen:null},Ci=null,ji=null,Oi=0,Gi=0,ta=0;zn.textFeatureIndex?Oi=zn.textFeatureIndex:Jr.useRuntimeCollisionCircles&&(Oi=Jr.featureIndex),zn.verticalTextFeatureIndex&&(Gi=zn.verticalTextFeatureIndex);var Ta=zn.textBox;if(Ta){var Va=function(za){var Po=e.WritingMode.horizontal;if(fe.allowVerticalPlacement&&!za&&H.prevPlacement){var Ro=H.prevPlacement.placedOrientations[Jr.crossTileID];Ro&&(H.placedOrientations[Jr.crossTileID]=Ro,H.markUsedOrientation(fe,Po=Ro,Jr))}return Po},Ua=function(za,Po){if(fe.allowVerticalPlacement&&Jr.numVerticalGlyphVertices>0&&zn.verticalTextBox)for(var Ro=0,Ol=fe.writingModes;Ro<Ol.length&&(Ol[Ro]===e.WritingMode.vertical?(si=Po(),Di=si):si=za(),!(si&&si.box&&si.box.length));Ro+=1);else si=za()};if(ge.get("text-variable-anchor")){var wa=ge.get("text-variable-anchor");if(H.prevPlacement&&H.prevPlacement.variableOffsets[Jr.crossTileID]){var Ra=H.prevPlacement.variableOffsets[Jr.crossTileID];wa.indexOf(Ra.anchor)>0&&(wa=wa.filter(function(za){return za!==Ra.anchor})).unshift(Ra.anchor)}var Ea=function(za,Po,Ro){for(var Ol=za.x2-za.x1,fc=za.y2-za.y1,Qo=Jr.textBoxScale,Il=br&&!jt?Po:null,vl={box:[],offscreen:!1},hc=Ht?2*wa.length:wa.length,Ws=0;Ws<hc;++Ws){var ll=H.attemptAnchorPlacement(wa[Ws%wa.length],za,Ol,fc,Qo,Wt,cr,Xe,xe,Ct,Ws>=wa.length,Jr,fe,Ro,Il);if(ll&&(vl=ll.placedGlyphBoxes)&&vl.box&&vl.box.length){ni=!0,zi=ll.shift;break}}return vl};Ua(function(){return Ea(Ta,zn.iconBox,e.WritingMode.horizontal)},function(){var za=zn.verticalTextBox;return fe.allowVerticalPlacement&&!(si&&si.box&&si.box.length)&&Jr.numVerticalGlyphVertices>0&&za?Ea(za,zn.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),si&&(ni=si.box,Ai=si.offscreen);var _o=Va(si&&si.box);if(!ni&&H.prevPlacement){var to=H.prevPlacement.variableOffsets[Jr.crossTileID];to&&(H.variableOffsets[Jr.crossTileID]=to,H.markUsedJustification(fe,to.anchor,Jr,_o))}}else{var Io=function(za,Po){var Ro=H.collisionIndex.placeCollisionBox(za,Ht,Xe,xe,Ct.predicate);return Ro&&Ro.box&&Ro.box.length&&(H.markUsedOrientation(fe,Po,Jr),H.placedOrientations[Jr.crossTileID]=Po),Ro};Ua(function(){return Io(Ta,e.WritingMode.horizontal)},function(){var za=zn.verticalTextBox;return fe.allowVerticalPlacement&&Jr.numVerticalGlyphVertices>0&&za?Io(za,e.WritingMode.vertical):{box:null,offscreen:null}}),Va(si&&si.box&&si.box.length)}}if(ni=(oi=si)&&oi.box&&oi.box.length>0,Ai=oi&&oi.offscreen,Jr.useRuntimeCollisionCircles){var Ps=fe.text.placedSymbolArray.get(Jr.centerJustifiedTextSymbolIndex),Ys=e.evaluateSizeForFeature(fe.textSizeData,It,Ps),dl=ge.get("text-padding");Ci=H.collisionIndex.placeCollisionCircles(Ht,Ps,fe.lineVertexArray,fe.glyphOffsetArray,Ys,xe,Ce,Ge,F,cr,Ct.predicate,Jr.collisionCircleDiameter,dl),ni=Ht||Ci.circles.length>0&&!Ci.collisionDetected,Ai=Ai&&Ci.offscreen}if(zn.iconFeatureIndex&&(ta=zn.iconFeatureIndex),zn.iconBox){var sl=function(za){var Po=br&&zi?ar(za,zi.x,zi.y,Wt,cr,H.transform.angle):za;return H.collisionIndex.placeCollisionBox(Po,jt,Xe,xe,Ct.predicate)};pi=Di&&Di.box&&Di.box.length&&zn.verticalIconBox?(ji=sl(zn.verticalIconBox)).box.length>0:(ji=sl(zn.iconBox)).box.length>0,Ai=Ai&&ji.offscreen}var Eo=Lt||0===Jr.numHorizontalGlyphVertices&&0===Jr.numVerticalGlyphVertices,Js=Tt||0===Jr.numIconVertices;if(Eo||Js?Js?Eo||(pi=pi&&ni):ni=pi&&ni:pi=ni=pi&&ni,ni&&oi&&oi.box&&H.collisionIndex.insertCollisionBox(oi.box,ge.get("text-ignore-placement"),fe.bucketInstanceId,Di&&Di.box&&Gi?Gi:Oi,Ct.ID),pi&&ji&&H.collisionIndex.insertCollisionBox(ji.box,ge.get("icon-ignore-placement"),fe.bucketInstanceId,ta,Ct.ID),Ci&&(ni&&H.collisionIndex.insertCollisionCircles(Ci.circles,ge.get("text-ignore-placement"),fe.bucketInstanceId,Oi,Ct.ID),F)){var pl=fe.bucketInstanceId,us=H.collisionCircleArrays[pl];void 0===us&&(us=H.collisionCircleArrays[pl]=new fn);for(var ml=0;ml<Ci.circles.length;ml+=4)us.circles.push(Ci.circles[ml+0]),us.circles.push(Ci.circles[ml+1]),us.circles.push(Ci.circles[ml+2]),us.circles.push(Ci.collisionDetected?1:0)}H.placements[Jr.crossTileID]=new cn(ni||Or,pi||sn,Ai||fe.justReloaded),P[Jr.crossTileID]=!0}};if(zr)for(var Mn=fe.getSortedSymbolIndexes(this.transform.angle),xn=Mn.length-1;xn>=0;--xn){var Kn=Mn[xn];on(fe.symbolInstances.get(Kn),fe.collisionArrays[Kn])}else for(var ai=L.symbolInstanceStart;ai<L.symbolInstanceEnd;ai++)on(fe.symbolInstances.get(ai),fe.collisionArrays[ai]);if(F&&fe.bucketInstanceId in this.collisionCircleArrays){var _i=this.collisionCircleArrays[fe.bucketInstanceId];e.invert(_i.invProjMatrix,xe),_i.viewportMatrix=this.collisionIndex.getViewportMatrix()}fe.justReloaded=!1},Bt.prototype.markUsedJustification=function(L,P,F,H){var oe;oe=H===e.WritingMode.vertical?F.verticalPlacedTextSymbolIndex:{left:F.leftJustifiedTextSymbolIndex,center:F.centerJustifiedTextSymbolIndex,right:F.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(P)];for(var ge=0,xe=[F.leftJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.rightJustifiedTextSymbolIndex,F.verticalPlacedTextSymbolIndex];ge<xe.length;ge+=1){var Ce=xe[ge];Ce>=0&&(L.text.placedSymbolArray.get(Ce).crossTileID=oe>=0&&Ce!==oe?0:F.crossTileID)}},Bt.prototype.markUsedOrientation=function(L,P,F){for(var H=P===e.WritingMode.horizontal||P===e.WritingMode.horizontalOnly?P:0,oe=P===e.WritingMode.vertical?P:0,fe=0,ge=[F.leftJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.rightJustifiedTextSymbolIndex];fe<ge.length;fe+=1)L.text.placedSymbolArray.get(ge[fe]).placedOrientation=H;F.verticalPlacedTextSymbolIndex&&(L.text.placedSymbolArray.get(F.verticalPlacedTextSymbolIndex).placedOrientation=oe)},Bt.prototype.commit=function(L){this.commitTime=L,this.zoomAtLastRecencyCheck=this.transform.zoom;var P=this.prevPlacement,F=!1;this.prevZoomAdjustment=P?P.zoomAdjustment(this.transform.zoom):0;var H=P?P.symbolFadeChange(L):1,oe=P?P.opacities:{},fe=P?P.variableOffsets:{},ge=P?P.placedOrientations:{};for(var xe in this.placements){var Ce=this.placements[xe],Ge=oe[xe];Ge?(this.opacities[xe]=new dn(Ge,H,Ce.text,Ce.icon),F=F||Ce.text!==Ge.text.placed||Ce.icon!==Ge.icon.placed):(this.opacities[xe]=new dn(null,H,Ce.text,Ce.icon,Ce.skipFade),F=F||Ce.text||Ce.icon)}for(var Xe in oe){var ot=oe[Xe];if(!this.opacities[Xe]){var Mt=new dn(ot,H,!1,!1);Mt.isHidden()||(this.opacities[Xe]=Mt,F=F||ot.text.placed||ot.icon.placed)}}for(var It in fe)this.variableOffsets[It]||!this.opacities[It]||this.opacities[It].isHidden()||(this.variableOffsets[It]=fe[It]);for(var Ct in ge)this.placedOrientations[Ct]||!this.opacities[Ct]||this.opacities[Ct].isHidden()||(this.placedOrientations[Ct]=ge[Ct]);F?this.lastPlacementChangeTime=L:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=P?P.lastPlacementChangeTime:L)},Bt.prototype.updateLayerOpacities=function(L,P){for(var F={},H=0,oe=P;H<oe.length;H+=1){var fe=oe[H],ge=fe.getBucket(L);ge&&fe.latestFeatureIndex&&L.id===ge.layerIds[0]&&this.updateBucketOpacities(ge,F,fe.collisionBoxArray)}},Bt.prototype.updateBucketOpacities=function(L,P,F){var H=this;L.hasTextData()&&L.text.opacityVertexArray.clear(),L.hasIconData()&&L.icon.opacityVertexArray.clear(),L.hasIconCollisionBoxData()&&L.iconCollisionBox.collisionVertexArray.clear(),L.hasTextCollisionBoxData()&&L.textCollisionBox.collisionVertexArray.clear();var oe=L.layers[0].layout,fe=new dn(null,0,!1,!1,!0),ge=oe.get("text-allow-overlap"),xe=oe.get("icon-allow-overlap"),Ce=oe.get("text-variable-anchor"),Ge="map"===oe.get("text-rotation-alignment"),Xe="map"===oe.get("text-pitch-alignment"),ot="none"!==oe.get("icon-text-fit"),Mt=new dn(null,0,ge&&(xe||!L.hasIconData()||oe.get("icon-optional")),xe&&(ge||!L.hasTextData()||oe.get("text-optional")),!0);!L.collisionArrays&&F&&(L.hasIconCollisionBoxData()||L.hasTextCollisionBoxData())&&L.deserializeCollisionBoxes(F);for(var It=function(Ht,jt,Wt){for(var cr=0;cr<jt/4;cr++)Ht.opacityVertexArray.emplaceBack(Wt)},Ct=function(Ht){var jt=L.symbolInstances.get(Ht),Wt=jt.numHorizontalGlyphVertices,cr=jt.numVerticalGlyphVertices,br=jt.crossTileID,Or=H.opacities[br];P[br]?Or=fe:Or||(H.opacities[br]=Or=Mt),P[br]=!0;var on=jt.numIconVertices>0,Mn=H.placedOrientations[jt.crossTileID],xn=Mn===e.WritingMode.vertical,Kn=Mn===e.WritingMode.horizontal||Mn===e.WritingMode.horizontalOnly;if(Wt>0||cr>0){var ai=Ir(Or.text);It(L.text,Wt,xn?Fr:ai),It(L.text,cr,Kn?Fr:ai);var zn=Or.text.isHidden();[jt.rightJustifiedTextSymbolIndex,jt.centerJustifiedTextSymbolIndex,jt.leftJustifiedTextSymbolIndex].forEach(function(ta){ta>=0&&(L.text.placedSymbolArray.get(ta).hidden=zn||xn?1:0)}),jt.verticalPlacedTextSymbolIndex>=0&&(L.text.placedSymbolArray.get(jt.verticalPlacedTextSymbolIndex).hidden=zn||Kn?1:0);var oi=H.variableOffsets[jt.crossTileID];oi&&H.markUsedJustification(L,oi.anchor,jt,Mn);var ni=H.placedOrientations[jt.crossTileID];ni&&(H.markUsedJustification(L,"left",jt,ni),H.markUsedOrientation(L,ni,jt))}if(on){var pi=Ir(Or.icon),Ai=!(ot&&jt.verticalPlacedIconSymbolIndex&&xn);jt.placedIconSymbolIndex>=0&&(It(L.icon,jt.numIconVertices,Ai?pi:Fr),L.icon.placedSymbolArray.get(jt.placedIconSymbolIndex).hidden=Or.icon.isHidden()),jt.verticalPlacedIconSymbolIndex>=0&&(It(L.icon,jt.numVerticalIconVertices,Ai?Fr:pi),L.icon.placedSymbolArray.get(jt.verticalPlacedIconSymbolIndex).hidden=Or.icon.isHidden())}if(L.hasIconCollisionBoxData()||L.hasTextCollisionBoxData()){var Di=L.collisionArrays[Ht];if(Di){var Ci=new e.Point(0,0);if(Di.textBox||Di.verticalTextBox){var ji=!0;if(Ce){var Oi=H.variableOffsets[br];Oi?(Ci=Fn(Oi.anchor,Oi.width,Oi.height,Oi.textOffset,Oi.textBoxScale),Ge&&Ci._rotate(Xe?H.transform.angle:-H.transform.angle)):ji=!1}Di.textBox&&Qt(L.textCollisionBox.collisionVertexArray,Or.text.placed,!ji||xn,Ci.x,Ci.y),Di.verticalTextBox&&Qt(L.textCollisionBox.collisionVertexArray,Or.text.placed,!ji||Kn,Ci.x,Ci.y)}var Gi=Boolean(!Kn&&Di.verticalIconBox);Di.iconBox&&Qt(L.iconCollisionBox.collisionVertexArray,Or.icon.placed,Gi,ot?Ci.x:0,ot?Ci.y:0),Di.verticalIconBox&&Qt(L.iconCollisionBox.collisionVertexArray,Or.icon.placed,!Gi,ot?Ci.x:0,ot?Ci.y:0)}}},Lt=0;Lt<L.symbolInstances.length;Lt++)Ct(Lt);if(L.sortFeatures(this.transform.angle),this.retainedQueryData[L.bucketInstanceId]&&(this.retainedQueryData[L.bucketInstanceId].featureSortOrder=L.featureSortOrder),L.hasTextData()&&L.text.opacityVertexBuffer&&L.text.opacityVertexBuffer.updateData(L.text.opacityVertexArray),L.hasIconData()&&L.icon.opacityVertexBuffer&&L.icon.opacityVertexBuffer.updateData(L.icon.opacityVertexArray),L.hasIconCollisionBoxData()&&L.iconCollisionBox.collisionVertexBuffer&&L.iconCollisionBox.collisionVertexBuffer.updateData(L.iconCollisionBox.collisionVertexArray),L.hasTextCollisionBoxData()&&L.textCollisionBox.collisionVertexBuffer&&L.textCollisionBox.collisionVertexBuffer.updateData(L.textCollisionBox.collisionVertexArray),L.bucketInstanceId in this.collisionCircleArrays){var Tt=this.collisionCircleArrays[L.bucketInstanceId];L.placementInvProjMatrix=Tt.invProjMatrix,L.placementViewportMatrix=Tt.viewportMatrix,L.collisionCircleArray=Tt.circles,delete this.collisionCircleArrays[L.bucketInstanceId]}},Bt.prototype.symbolFadeChange=function(L){return 0===this.fadeDuration?1:(L-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Bt.prototype.zoomAdjustment=function(L){return Math.max(0,(this.transform.zoom-L)/1.5)},Bt.prototype.hasTransitions=function(L){return this.stale||L-this.lastPlacementChangeTime<this.fadeDuration},Bt.prototype.stillRecent=function(L,P){var F=this.zoomAtLastRecencyCheck===P?1-this.zoomAdjustment(P):1;return this.zoomAtLastRecencyCheck=P,this.commitTime+this.fadeDuration*F>L},Bt.prototype.setStale=function(){this.stale=!0};var yr=Math.pow(2,25),Dr=Math.pow(2,24),$r=Math.pow(2,17),Xr=Math.pow(2,16),Mr=Math.pow(2,9),Lr=Math.pow(2,8),Rr=Math.pow(2,1);function Ir(L){if(0===L.opacity&&!L.placed)return 0;if(1===L.opacity&&L.placed)return 4294967295;var P=L.placed?1:0,F=Math.floor(127*L.opacity);return F*yr+P*Dr+F*$r+P*Xr+F*Mr+P*Lr+F*Rr+P}var Fr=0,Qr=function(L){this._sortAcrossTiles="viewport-y"!==L.layout.get("symbol-z-order")&&void 0!==L.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Qr.prototype.continuePlacement=function(L,P,F,H,oe){for(var fe=this._bucketParts;this._currentTileIndex<L.length;)if(P.getBucketParts(fe,H,L[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,oe())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,fe.sort(function(Ce,Ge){return Ce.sortKey-Ge.sortKey}));this._currentPartIndex<fe.length;)if(P.placeLayerBucketPart(fe[this._currentPartIndex],this._seenCrossTileIDs,F),this._currentPartIndex++,oe())return!0;return!1};var yn=function(L,P,F,H,oe,fe,ge){this.placement=new Bt(L,oe,fe,ge),this._currentPlacementIndex=P.length-1,this._forceFullPlacement=F,this._showCollisionBoxes=H,this._done=!1};yn.prototype.isDone=function(){return this._done},yn.prototype.continuePlacement=function(L,P,F){for(var H=this,oe=e.browser.now(),fe=function(){var Ce=e.browser.now()-oe;return!H._forceFullPlacement&&Ce>2};this._currentPlacementIndex>=0;){var ge=P[L[this._currentPlacementIndex]],xe=this.placement.collisionIndex.transform.zoom;if("symbol"===ge.type&&(!ge.minzoom||ge.minzoom<=xe)&&(!ge.maxzoom||ge.maxzoom>xe)){if(this._inProgressLayer||(this._inProgressLayer=new Qr(ge)),this._inProgressLayer.continuePlacement(F[ge.source],this.placement,this._showCollisionBoxes,ge,fe))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},yn.prototype.commit=function(L){return this.placement.commit(L),this.placement};var In=512/e.EXTENT/2,nn=function(L,P,F){this.tileID=L,this.indexedSymbolInstances={},this.bucketInstanceId=F;for(var H=0;H<P.length;H++){var oe=P.get(H),fe=oe.key;this.indexedSymbolInstances[fe]||(this.indexedSymbolInstances[fe]=[]),this.indexedSymbolInstances[fe].push({crossTileID:oe.crossTileID,coord:this.getScaledCoordinates(oe,L)})}};nn.prototype.getScaledCoordinates=function(L,P){var H=In/Math.pow(2,P.canonical.z-this.tileID.canonical.z);return{x:Math.floor((P.canonical.x*e.EXTENT+L.anchorX)*H),y:Math.floor((P.canonical.y*e.EXTENT+L.anchorY)*H)}},nn.prototype.findMatches=function(L,P,F){for(var H=this.tileID.canonical.z<P.canonical.z?1:Math.pow(2,this.tileID.canonical.z-P.canonical.z),oe=0;oe<L.length;oe++){var fe=L.get(oe);if(!fe.crossTileID){var ge=this.indexedSymbolInstances[fe.key];if(ge)for(var xe=this.getScaledCoordinates(fe,P),Ce=0,Ge=ge;Ce<Ge.length;Ce+=1){var Xe=Ge[Ce];if(Math.abs(Xe.coord.x-xe.x)<=H&&Math.abs(Xe.coord.y-xe.y)<=H&&!F[Xe.crossTileID]){F[Xe.crossTileID]=!0,fe.crossTileID=Xe.crossTileID;break}}}}};var Cn=function(){this.maxCrossTileID=0};Cn.prototype.generate=function(){return++this.maxCrossTileID};var Ur=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ur.prototype.handleWrapJump=function(L){var P=Math.round((L-this.lng)/360);if(0!==P)for(var F in this.indexes){var H=this.indexes[F],oe={};for(var fe in H){var ge=H[fe];ge.tileID=ge.tileID.unwrapTo(ge.tileID.wrap+P),oe[ge.tileID.key]=ge}this.indexes[F]=oe}this.lng=L},Ur.prototype.addBucket=function(L,P,F){if(this.indexes[L.overscaledZ]&&this.indexes[L.overscaledZ][L.key]){if(this.indexes[L.overscaledZ][L.key].bucketInstanceId===P.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(L.overscaledZ,this.indexes[L.overscaledZ][L.key])}for(var H=0;H<P.symbolInstances.length;H++)P.symbolInstances.get(H).crossTileID=0;this.usedCrossTileIDs[L.overscaledZ]||(this.usedCrossTileIDs[L.overscaledZ]={});var oe=this.usedCrossTileIDs[L.overscaledZ];for(var fe in this.indexes){var ge=this.indexes[fe];if(Number(fe)>L.overscaledZ)for(var xe in ge){var Ce=ge[xe];Ce.tileID.isChildOf(L)&&Ce.findMatches(P.symbolInstances,L,oe)}else{var Ge=ge[L.scaledTo(Number(fe)).key];Ge&&Ge.findMatches(P.symbolInstances,L,oe)}}for(var Xe=0;Xe<P.symbolInstances.length;Xe++){var ot=P.symbolInstances.get(Xe);ot.crossTileID||(ot.crossTileID=F.generate(),oe[ot.crossTileID]=!0)}return void 0===this.indexes[L.overscaledZ]&&(this.indexes[L.overscaledZ]={}),this.indexes[L.overscaledZ][L.key]=new nn(L,P.symbolInstances,P.bucketInstanceId),!0},Ur.prototype.removeBucketCrossTileIDs=function(L,P){for(var F in P.indexedSymbolInstances)for(var H=0,oe=P.indexedSymbolInstances[F];H<oe.length;H+=1)delete this.usedCrossTileIDs[L][oe[H].crossTileID]},Ur.prototype.removeStaleBuckets=function(L){var P=!1;for(var F in this.indexes){var H=this.indexes[F];for(var oe in H)L[H[oe].bucketInstanceId]||(this.removeBucketCrossTileIDs(F,H[oe]),delete H[oe],P=!0)}return P};var Kr=function(){this.layerIndexes={},this.crossTileIDs=new Cn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Kr.prototype.addLayer=function(L,P,F){var H=this.layerIndexes[L.id];void 0===H&&(H=this.layerIndexes[L.id]=new Ur);var oe=!1,fe={};H.handleWrapJump(F);for(var ge=0,xe=P;ge<xe.length;ge+=1){var Ce=xe[ge],Ge=Ce.getBucket(L);Ge&&L.id===Ge.layerIds[0]&&(Ge.bucketInstanceId||(Ge.bucketInstanceId=++this.maxBucketInstanceId),H.addBucket(Ce.tileID,Ge,this.crossTileIDs)&&(oe=!0),fe[Ge.bucketInstanceId]=!0)}return H.removeStaleBuckets(fe)&&(oe=!0),oe},Kr.prototype.pruneUnusedLayers=function(L){var P={};for(var F in L.forEach(function(H){P[H]=!0}),this.layerIndexes)P[F]||delete this.layerIndexes[F]};var An=function(L,P){return e.emitValidationErrors(L,P&&P.filter(function(F){return"source.canvas"!==F.identifier}))},wn=e.pick(Yt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Hn=e.pick(Yt,["setCenter","setZoom","setBearing","setPitch"]),gi=function(){var L={},P=e.styleSpec.$version;for(var F in e.styleSpec.$root){var H=e.styleSpec.$root[F];if(H.required){var oe;null!=(oe="version"===F?P:"array"===H.type?[]:{})&&(L[F]=oe)}}return L}(),ti=function(L){function P(F,H){var oe=this;void 0===H&&(H={}),L.call(this),this.map=F,this.dispatcher=new S(Qe(),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new T(F._requestManager,H.localIdeographFontFamily),this.lineAtlas=new D(256,512),this.crossTileSymbolIndex=new Kr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var fe=this;this._rtlTextPluginCallback=P.registerForPluginStateChange(function(ge){fe.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:ge.pluginStatus,pluginURL:ge.pluginURL},function(Ce,Ge){if(e.triggerPluginCompletionEvent(Ce),Ge&&Ge.every(function(ot){return ot}))for(var Xe in fe.sourceCaches)fe.sourceCaches[Xe].reload()})}),this.on("data",function(ge){if("source"===ge.dataType&&"metadata"===ge.sourceDataType){var xe=oe.sourceCaches[ge.sourceId];if(xe){var Ce=xe.getSource();if(Ce&&Ce.vectorLayerIds)for(var Ge in oe._layers){var Xe=oe._layers[Ge];Xe.source===Ce.id&&oe._validateLayer(Xe)}}}})}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.loadURL=function(F,H){var oe=this;void 0===H&&(H={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var fe="boolean"==typeof H.validate?H.validate:!e.isMapboxURL(F);F=this.map._requestManager.normalizeStyleURL(F,H.accessToken);var ge=this.map._requestManager.transformRequest(F,e.ResourceType.Style);this._request=e.getJSON(ge,function(xe,Ce){oe._request=null,xe?oe.fire(new e.ErrorEvent(xe)):Ce&&oe._load(Ce,fe)})},P.prototype.loadJSON=function(F,H){var oe=this;void 0===H&&(H={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){oe._request=null,oe._load(F,!1!==H.validate)})},P.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(gi,!1)},P.prototype._load=function(F,H){if(!H||!An(this,e.validateStyle(F))){for(var oe in this._loaded=!0,this.stylesheet=F,F.sources)this.addSource(oe,F.sources[oe],{validate:!1});F.sprite?this._loadSprite(F.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(F.glyphs);var fe=Nt(this.stylesheet.layers);this._order=fe.map(function(Ge){return Ge.id}),this._layers={},this._serializedLayers={};for(var ge=0,xe=fe;ge<xe.length;ge+=1){var Ce=xe[ge];(Ce=e.createStyleLayer(Ce)).setEventedParent(this,{layer:{id:Ce.id}}),this._layers[Ce.id]=Ce,this._serializedLayers[Ce.id]=Ce.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new O(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},P.prototype._loadSprite=function(F){var H=this;this._spriteRequest=function(oe,fe,ge){var xe,Ce,Ge,Xe=e.browser.devicePixelRatio>1?"@2x":"",ot=e.getJSON(fe.transformRequest(fe.normalizeSpriteURL(oe,Xe,".json"),e.ResourceType.SpriteJSON),function(Ct,Lt){ot=null,Ge||(Ge=Ct,xe=Lt,It())}),Mt=e.getImage(fe.transformRequest(fe.normalizeSpriteURL(oe,Xe,".png"),e.ResourceType.SpriteImage),function(Ct,Lt){Mt=null,Ge||(Ge=Ct,Ce=Lt,It())});function It(){if(Ge)ge(Ge);else if(xe&&Ce){var Ct=e.browser.getImageData(Ce),Lt={};for(var Tt in xe){var Ht=xe[Tt],jt=Ht.width,Wt=Ht.height,cr=Ht.x,br=Ht.y,zr=Ht.sdf,Or=Ht.pixelRatio,sn=Ht.stretchX,on=Ht.stretchY,Mn=Ht.content,xn=new e.RGBAImage({width:jt,height:Wt});e.RGBAImage.copy(Ct,xn,{x:cr,y:br},{x:0,y:0},{width:jt,height:Wt}),Lt[Tt]={data:xn,pixelRatio:Or,sdf:zr,stretchX:sn,stretchY:on,content:Mn}}ge(null,Lt)}}return{cancel:function(){ot&&(ot.cancel(),ot=null),Mt&&(Mt.cancel(),Mt=null)}}}(F,this.map._requestManager,function(oe,fe){if(H._spriteRequest=null,oe)H.fire(new e.ErrorEvent(oe));else if(fe)for(var ge in fe)H.imageManager.addImage(ge,fe[ge]);H.imageManager.setLoaded(!0),H._availableImages=H.imageManager.listImages(),H.dispatcher.broadcast("setImages",H._availableImages),H.fire(new e.Event("data",{dataType:"style"}))})},P.prototype._validateLayer=function(F){var H=this.sourceCaches[F.source];if(H){var oe=F.sourceLayer;if(oe){var fe=H.getSource();("geojson"===fe.type||fe.vectorLayerIds&&-1===fe.vectorLayerIds.indexOf(oe))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+oe+'" does not exist on source "'+fe.id+'" as specified by style layer "'+F.id+'"')))}}},P.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var F in this.sourceCaches)if(!this.sourceCaches[F].loaded())return!1;return!!this.imageManager.isLoaded()},P.prototype._serializeLayers=function(F){for(var H=[],oe=0,fe=F;oe<fe.length;oe+=1){var xe=this._layers[fe[oe]];"custom"!==xe.type&&H.push(xe.serialize())}return H},P.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var F in this.sourceCaches)if(this.sourceCaches[F].hasTransition())return!0;for(var H in this._layers)if(this._layers[H].hasTransition())return!0;return!1},P.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},P.prototype.update=function(F){if(this._loaded){var H=this._changed;if(this._changed){var oe=Object.keys(this._updatedLayers),fe=Object.keys(this._removedLayers);for(var ge in(oe.length||fe.length)&&this._updateWorkerLayers(oe,fe),this._updatedSources){var xe=this._updatedSources[ge];"reload"===xe?this._reloadSource(ge):"clear"===xe&&this._clearSource(ge)}for(var Ce in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Ce].updateTransitions(F);this.light.updateTransitions(F),this._resetUpdates()}for(var Ge in this.sourceCaches)this.sourceCaches[Ge].used=!1;for(var Xe=0,ot=this._order;Xe<ot.length;Xe+=1){var It=this._layers[ot[Xe]];It.recalculate(F,this._availableImages),!It.isHidden(F.zoom)&&It.source&&(this.sourceCaches[It.source].used=!0)}this.light.recalculate(F),this.z=F.zoom,H&&this.fire(new e.Event("data",{dataType:"style"}))}},P.prototype._updateTilesForChangedImages=function(){var F=Object.keys(this._changedImages);if(F.length){for(var H in this.sourceCaches)this.sourceCaches[H].reloadTilesForDependencies(["icons","patterns"],F);this._changedImages={}}},P.prototype._updateWorkerLayers=function(F,H){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(F),removedIds:H})},P.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},P.prototype.setState=function(F){var H=this;if(this._checkLoaded(),An(this,e.validateStyle(F)))return!1;(F=e.clone$1(F)).layers=Nt(F.layers);var oe=function(L,P){if(!L)return[{command:Yt.setStyle,args:[P]}];var F=[];try{if(!e.deepEqual(L.version,P.version))return[{command:Yt.setStyle,args:[P]}];e.deepEqual(L.center,P.center)||F.push({command:Yt.setCenter,args:[P.center]}),e.deepEqual(L.zoom,P.zoom)||F.push({command:Yt.setZoom,args:[P.zoom]}),e.deepEqual(L.bearing,P.bearing)||F.push({command:Yt.setBearing,args:[P.bearing]}),e.deepEqual(L.pitch,P.pitch)||F.push({command:Yt.setPitch,args:[P.pitch]}),e.deepEqual(L.sprite,P.sprite)||F.push({command:Yt.setSprite,args:[P.sprite]}),e.deepEqual(L.glyphs,P.glyphs)||F.push({command:Yt.setGlyphs,args:[P.glyphs]}),e.deepEqual(L.transition,P.transition)||F.push({command:Yt.setTransition,args:[P.transition]}),e.deepEqual(L.light,P.light)||F.push({command:Yt.setLight,args:[P.light]});var H={},oe=[];!function(ge,xe,Ce,Ge){var Xe;for(Xe in xe=xe||{},ge=ge||{})ge.hasOwnProperty(Xe)&&(xe.hasOwnProperty(Xe)||Fe(Xe,Ce,Ge));for(Xe in xe)xe.hasOwnProperty(Xe)&&(ge.hasOwnProperty(Xe)?e.deepEqual(ge[Xe],xe[Xe])||("geojson"===ge[Xe].type&&"geojson"===xe[Xe].type&&kt(ge,xe,Xe)?Ce.push({command:Yt.setGeoJSONSourceData,args:[Xe,xe[Xe].data]}):ht(Xe,xe,Ce,Ge)):rr(Xe,xe,Ce))}(L.sources,P.sources,oe,H);var fe=[];L.layers&&L.layers.forEach(function(ge){H[ge.source]?F.push({command:Yt.removeLayer,args:[ge.id]}):fe.push(ge)}),F=F.concat(oe),function(ge,xe,Ce){xe=xe||[];var Ge,Xe,ot,Mt,It,Ct,Lt,Tt=(ge=ge||[]).map(Zt),Ht=xe.map(Zt),jt=ge.reduce(fr,{}),Wt=xe.reduce(fr,{}),cr=Tt.slice(),br=Object.create(null);for(Ge=0,Xe=0;Ge<Tt.length;Ge++)Wt.hasOwnProperty(ot=Tt[Ge])?Xe++:(Ce.push({command:Yt.removeLayer,args:[ot]}),cr.splice(cr.indexOf(ot,Xe),1));for(Ge=0,Xe=0;Ge<Ht.length;Ge++)cr[cr.length-1-Ge]!==(ot=Ht[Ht.length-1-Ge])&&(jt.hasOwnProperty(ot)?(Ce.push({command:Yt.removeLayer,args:[ot]}),cr.splice(cr.lastIndexOf(ot,cr.length-Xe),1)):Xe++,Ce.push({command:Yt.addLayer,args:[Wt[ot],Ct=cr[cr.length-Ge]]}),cr.splice(cr.length-Ge,0,ot),br[ot]=!0);for(Ge=0;Ge<Ht.length;Ge++)if(Mt=jt[ot=Ht[Ge]],It=Wt[ot],!br[ot]&&!e.deepEqual(Mt,It))if(e.deepEqual(Mt.source,It.source)&&e.deepEqual(Mt["source-layer"],It["source-layer"])&&e.deepEqual(Mt.type,It.type)){for(Lt in Gt(Mt.layout,It.layout,Ce,ot,null,Yt.setLayoutProperty),Gt(Mt.paint,It.paint,Ce,ot,null,Yt.setPaintProperty),e.deepEqual(Mt.filter,It.filter)||Ce.push({command:Yt.setFilter,args:[ot,It.filter]}),e.deepEqual(Mt.minzoom,It.minzoom)&&e.deepEqual(Mt.maxzoom,It.maxzoom)||Ce.push({command:Yt.setLayerZoomRange,args:[ot,It.minzoom,It.maxzoom]}),Mt)Mt.hasOwnProperty(Lt)&&"layout"!==Lt&&"paint"!==Lt&&"filter"!==Lt&&"metadata"!==Lt&&"minzoom"!==Lt&&"maxzoom"!==Lt&&(0===Lt.indexOf("paint.")?Gt(Mt[Lt],It[Lt],Ce,ot,Lt.slice(6),Yt.setPaintProperty):e.deepEqual(Mt[Lt],It[Lt])||Ce.push({command:Yt.setLayerProperty,args:[ot,Lt,It[Lt]]}));for(Lt in It)It.hasOwnProperty(Lt)&&!Mt.hasOwnProperty(Lt)&&"layout"!==Lt&&"paint"!==Lt&&"filter"!==Lt&&"metadata"!==Lt&&"minzoom"!==Lt&&"maxzoom"!==Lt&&(0===Lt.indexOf("paint.")?Gt(Mt[Lt],It[Lt],Ce,ot,Lt.slice(6),Yt.setPaintProperty):e.deepEqual(Mt[Lt],It[Lt])||Ce.push({command:Yt.setLayerProperty,args:[ot,Lt,It[Lt]]}))}else Ce.push({command:Yt.removeLayer,args:[ot]}),Ct=cr[cr.lastIndexOf(ot)+1],Ce.push({command:Yt.addLayer,args:[It,Ct]})}(fe,P.layers,F)}catch(ge){console.warn("Unable to compute style diff:",ge),F=[{command:Yt.setStyle,args:[P]}]}return F}(this.serialize(),F).filter(function(ge){return!(ge.command in Hn)});if(0===oe.length)return!1;var fe=oe.filter(function(ge){return!(ge.command in wn)});if(fe.length>0)throw new Error("Unimplemented: "+fe.map(function(ge){return ge.command}).join(", ")+".");return oe.forEach(function(ge){"setTransition"!==ge.command&&H[ge.command].apply(H,ge.args)}),this.stylesheet=F,!0},P.prototype.addImage=function(F,H){if(this.getImage(F))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(F,H),this._availableImages=this.imageManager.listImages(),this._changedImages[F]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},P.prototype.updateImage=function(F,H){this.imageManager.updateImage(F,H)},P.prototype.getImage=function(F){return this.imageManager.getImage(F)},P.prototype.removeImage=function(F){if(!this.getImage(F))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(F),this._availableImages=this.imageManager.listImages(),this._changedImages[F]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},P.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},P.prototype.addSource=function(F,H,oe){var fe=this;if(void 0===oe&&(oe={}),this._checkLoaded(),void 0!==this.sourceCaches[F])throw new Error("There is already a source with this ID");if(!H.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(H).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(H.type)>=0&&this._validate(e.validateStyle.source,"sources."+F,H,null,oe))){this.map&&this.map._collectResourceTiming&&(H.collectResourceTiming=!0);var ge=this.sourceCaches[F]=new Ke(F,H,this.dispatcher);ge.style=this,ge.setEventedParent(this,function(){return{isSourceLoaded:fe.loaded(),source:ge.serialize(),sourceId:F}}),ge.onAdd(this.map),this._changed=!0}},P.prototype.removeSource=function(F){if(this._checkLoaded(),void 0===this.sourceCaches[F])throw new Error("There is no source with this ID");for(var H in this._layers)if(this._layers[H].source===F)return this.fire(new e.ErrorEvent(new Error('Source "'+F+'" cannot be removed while layer "'+H+'" is using it.')));var oe=this.sourceCaches[F];delete this.sourceCaches[F],delete this._updatedSources[F],oe.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:F})),oe.setEventedParent(null),oe.clearTiles(),oe.onRemove&&oe.onRemove(this.map),this._changed=!0},P.prototype.setGeoJSONSourceData=function(F,H){this._checkLoaded(),this.sourceCaches[F].getSource().setData(H),this._changed=!0},P.prototype.getSource=function(F){return this.sourceCaches[F]&&this.sourceCaches[F].getSource()},P.prototype.addLayer=function(F,H,oe){void 0===oe&&(oe={}),this._checkLoaded();var fe=F.id;if(this.getLayer(fe))this.fire(new e.ErrorEvent(new Error('Layer with id "'+fe+'" already exists on this map')));else{var ge;if("custom"===F.type){if(An(this,e.validateCustomStyleLayer(F)))return;ge=e.createStyleLayer(F)}else{if("object"==typeof F.source&&(this.addSource(fe,F.source),F=e.clone$1(F),F=e.extend(F,{source:fe})),this._validate(e.validateStyle.layer,"layers."+fe,F,{arrayIndex:-1},oe))return;ge=e.createStyleLayer(F),this._validateLayer(ge),ge.setEventedParent(this,{layer:{id:fe}}),this._serializedLayers[ge.id]=ge.serialize()}var xe=H?this._order.indexOf(H):this._order.length;if(H&&-1===xe)this.fire(new e.ErrorEvent(new Error('Layer with id "'+H+'" does not exist on this map.')));else{if(this._order.splice(xe,0,fe),this._layerOrderChanged=!0,this._layers[fe]=ge,this._removedLayers[fe]&&ge.source&&"custom"!==ge.type){var Ce=this._removedLayers[fe];delete this._removedLayers[fe],Ce.type!==ge.type?this._updatedSources[ge.source]="clear":(this._updatedSources[ge.source]="reload",this.sourceCaches[ge.source].pause())}this._updateLayer(ge),ge.onAdd&&ge.onAdd(this.map)}}},P.prototype.moveLayer=function(F,H){if(this._checkLoaded(),this._changed=!0,this._layers[F]){if(F!==H){var oe=this._order.indexOf(F);this._order.splice(oe,1);var fe=H?this._order.indexOf(H):this._order.length;H&&-1===fe?this.fire(new e.ErrorEvent(new Error('Layer with id "'+H+'" does not exist on this map.'))):(this._order.splice(fe,0,F),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be moved.")))},P.prototype.removeLayer=function(F){this._checkLoaded();var H=this._layers[F];if(H){H.setEventedParent(null);var oe=this._order.indexOf(F);this._order.splice(oe,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[F]=H,delete this._layers[F],delete this._serializedLayers[F],delete this._updatedLayers[F],delete this._updatedPaintProps[F],H.onRemove&&H.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be removed.")))},P.prototype.getLayer=function(F){return this._layers[F]},P.prototype.hasLayer=function(F){return F in this._layers},P.prototype.setLayerZoomRange=function(F,H,oe){this._checkLoaded();var fe=this.getLayer(F);fe?fe.minzoom===H&&fe.maxzoom===oe||(null!=H&&(fe.minzoom=H),null!=oe&&(fe.maxzoom=oe),this._updateLayer(fe)):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot have zoom extent.")))},P.prototype.setFilter=function(F,H,oe){void 0===oe&&(oe={}),this._checkLoaded();var fe=this.getLayer(F);if(fe){if(!e.deepEqual(fe.filter,H))return null==H?(fe.filter=void 0,void this._updateLayer(fe)):void(this._validate(e.validateStyle.filter,"layers."+fe.id+".filter",H,null,oe)||(fe.filter=e.clone$1(H),this._updateLayer(fe)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be filtered.")))},P.prototype.getFilter=function(F){return e.clone$1(this.getLayer(F).filter)},P.prototype.setLayoutProperty=function(F,H,oe,fe){void 0===fe&&(fe={}),this._checkLoaded();var ge=this.getLayer(F);ge?e.deepEqual(ge.getLayoutProperty(H),oe)||(ge.setLayoutProperty(H,oe,fe),this._updateLayer(ge)):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be styled.")))},P.prototype.getLayoutProperty=function(F,H){var oe=this.getLayer(F);if(oe)return oe.getLayoutProperty(H);this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style.")))},P.prototype.setPaintProperty=function(F,H,oe,fe){void 0===fe&&(fe={}),this._checkLoaded();var ge=this.getLayer(F);ge?e.deepEqual(ge.getPaintProperty(H),oe)||(ge.setPaintProperty(H,oe,fe)&&this._updateLayer(ge),this._changed=!0,this._updatedPaintProps[F]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be styled.")))},P.prototype.getPaintProperty=function(F,H){return this.getLayer(F).getPaintProperty(H)},P.prototype.setFeatureState=function(F,H){this._checkLoaded();var oe=F.source,fe=F.sourceLayer,ge=this.sourceCaches[oe];if(void 0!==ge){var xe=ge.getSource().type;"geojson"===xe&&fe?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==xe||fe?(void 0===F.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),ge.setFeatureState(fe,F.id,H)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+oe+"' does not exist in the map's style.")))},P.prototype.removeFeatureState=function(F,H){this._checkLoaded();var oe=F.source,fe=this.sourceCaches[oe];if(void 0!==fe){var ge=fe.getSource().type,xe="vector"===ge?F.sourceLayer:void 0;"vector"!==ge||xe?H&&"string"!=typeof F.id&&"number"!=typeof F.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):fe.removeFeatureState(xe,F.id,H):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+oe+"' does not exist in the map's style.")))},P.prototype.getFeatureState=function(F){this._checkLoaded();var H=F.source,oe=F.sourceLayer,fe=this.sourceCaches[H];if(void 0!==fe){if("vector"!==fe.getSource().type||oe)return void 0===F.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),fe.getFeatureState(oe,F.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+H+"' does not exist in the map's style.")))},P.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},P.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(F){return F.serialize()}),layers:this._serializeLayers(this._order)},function(F){return void 0!==F})},P.prototype._updateLayer=function(F){this._updatedLayers[F.id]=!0,F.source&&!this._updatedSources[F.source]&&"raster"!==this.sourceCaches[F.source].getSource().type&&(this._updatedSources[F.source]="reload",this.sourceCaches[F.source].pause()),this._changed=!0},P.prototype._flattenAndSortRenderedFeatures=function(F){for(var H=this,oe=function(Mn){return"fill-extrusion"===H._layers[Mn].type},fe={},ge=[],xe=this._order.length-1;xe>=0;xe--){var Ce=this._order[xe];if(oe(Ce)){fe[Ce]=xe;for(var Ge=0,Xe=F;Ge<Xe.length;Ge+=1){var ot=Xe[Ge][Ce];if(ot)for(var Mt=0,It=ot;Mt<It.length;Mt+=1)ge.push(It[Mt])}}}ge.sort(function(Mn,xn){return xn.intersectionZ-Mn.intersectionZ});for(var Lt=[],Tt=this._order.length-1;Tt>=0;Tt--){var Ht=this._order[Tt];if(oe(Ht))for(var jt=ge.length-1;jt>=0;jt--){var Wt=ge[jt].feature;if(fe[Wt.layer.id]<Tt)break;Lt.push(Wt),ge.pop()}else for(var cr=0,br=F;cr<br.length;cr+=1){var zr=br[cr][Ht];if(zr)for(var Or=0,sn=zr;Or<sn.length;Or+=1)Lt.push(sn[Or].feature)}}return Lt},P.prototype.queryRenderedFeatures=function(F,H,oe){H&&H.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",H.filter,null,H);var fe={};if(H&&H.layers){if(!Array.isArray(H.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ge=0,xe=H.layers;ge<xe.length;ge+=1){var Ce=xe[ge],Ge=this._layers[Ce];if(!Ge)return this.fire(new e.ErrorEvent(new Error("The layer '"+Ce+"' does not exist in the map's style and cannot be queried for features."))),[];fe[Ge.source]=!0}}var Xe=[];for(var ot in H.availableImages=this._availableImages,this.sourceCaches)H.layers&&!fe[ot]||Xe.push(V(this.sourceCaches[ot],this._layers,this._serializedLayers,F,H,oe));return this.placement&&Xe.push(function(Mt,It,Ct,Lt,Tt,Ht,jt){for(var Wt={},cr=Ht.queryRenderedSymbols(Lt),br=[],zr=0,Or=Object.keys(cr).map(Number);zr<Or.length;zr+=1)br.push(jt[Or[zr]]);br.sort(ee);for(var on=function(){var _i=xn[Mn],Jr=_i.featureIndex.lookupSymbolFeatures(cr[_i.bucketInstanceId],It,_i.bucketIndex,_i.sourceLayerIndex,Tt.filter,Tt.layers,Tt.availableImages,Mt);for(var zn in Jr){var oi=Wt[zn]=Wt[zn]||[],ni=Jr[zn];ni.sort(function(si,Di){var Ci=_i.featureSortOrder;if(Ci){var ji=Ci.indexOf(si.featureIndex);return Ci.indexOf(Di.featureIndex)-ji}return Di.featureIndex-si.featureIndex});for(var pi=0,Ai=ni;pi<Ai.length;pi+=1)oi.push(Ai[pi])}},Mn=0,xn=br;Mn<xn.length;Mn+=1)on();var Kn=function(_i){Wt[_i].forEach(function(Jr){var zn=Jr.feature,ni=Ct[Mt[_i].source].getFeatureState(zn.layer["source-layer"],zn.id);zn.source=zn.layer.source,zn.layer["source-layer"]&&(zn.sourceLayer=zn.layer["source-layer"]),zn.state=ni})};for(var ai in Wt)Kn(ai);return Wt}(this._layers,this._serializedLayers,this.sourceCaches,F,H,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Xe)},P.prototype.querySourceFeatures=function(F,H){H&&H.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",H.filter,null,H);var oe=this.sourceCaches[F];return oe?function(fe,ge){for(var xe=fe.getRenderableIds().map(function(It){return fe.getTileByID(It)}),Ce=[],Ge={},Xe=0;Xe<xe.length;Xe++){var ot=xe[Xe],Mt=ot.tileID.canonical.key;Ge[Mt]||(Ge[Mt]=!0,ot.querySourceFeatures(Ce,ge))}return Ce}(oe,H):[]},P.prototype.addSourceType=function(F,H,oe){return P.getSourceType(F)?oe(new Error('A source type called "'+F+'" already exists.')):(P.setSourceType(F,H),H.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:F,url:H.workerSourceURL},oe):oe(null,null))},P.prototype.getLight=function(){return this.light.getLight()},P.prototype.setLight=function(F,H){void 0===H&&(H={}),this._checkLoaded();var oe=this.light.getLight(),fe=!1;for(var ge in F)if(!e.deepEqual(F[ge],oe[ge])){fe=!0;break}if(fe){var xe={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(F,H),this.light.updateTransitions(xe)}},P.prototype._validate=function(F,H,oe,fe,ge){return void 0===ge&&(ge={}),(!ge||!1!==ge.validate)&&An(this,F.call(e.validateStyle,e.extend({key:H,style:this.serialize(),value:oe,styleSpec:e.styleSpec},fe)))},P.prototype._remove=function(){for(var F in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[F].setEventedParent(null);for(var H in this.sourceCaches)this.sourceCaches[H].clearTiles(),this.sourceCaches[H].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},P.prototype._clearSource=function(F){this.sourceCaches[F].clearTiles()},P.prototype._reloadSource=function(F){this.sourceCaches[F].resume(),this.sourceCaches[F].reload()},P.prototype._updateSources=function(F){for(var H in this.sourceCaches)this.sourceCaches[H].update(F)},P.prototype._generateCollisionBoxes=function(){for(var F in this.sourceCaches)this._reloadSource(F)},P.prototype._updatePlacement=function(F,H,oe,fe,ge){void 0===ge&&(ge=!1);for(var xe=!1,Ce=!1,Ge={},Xe=0,ot=this._order;Xe<ot.length;Xe+=1){var It=this._layers[ot[Xe]];if("symbol"===It.type){if(!Ge[It.source]){var Ct=this.sourceCaches[It.source];Ge[It.source]=Ct.getRenderableIds(!0).map(function(cr){return Ct.getTileByID(cr)}).sort(function(cr,br){return br.tileID.overscaledZ-cr.tileID.overscaledZ||(cr.tileID.isLessThan(br.tileID)?-1:1)})}var Lt=this.crossTileSymbolIndex.addLayer(It,Ge[It.source],F.center.lng);xe=xe||Lt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ge=ge||this._layerOrderChanged||0===oe)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),F.zoom))&&(this.pauseablePlacement=new yn(F,this._order,ge,H,oe,fe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ge),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Ce=!0),xe&&this.pauseablePlacement.placement.setStale()),Ce||xe)for(var Tt=0,Ht=this._order;Tt<Ht.length;Tt+=1){var Wt=this._layers[Ht[Tt]];"symbol"===Wt.type&&this.placement.updateLayerOpacities(Wt,Ge[Wt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},P.prototype._releaseSymbolFadeTiles=function(){for(var F in this.sourceCaches)this.sourceCaches[F].releaseSymbolFadeTiles()},P.prototype.getImages=function(F,H,oe){this.imageManager.getImages(H.icons,oe),this._updateTilesForChangedImages();var fe=this.sourceCaches[H.source];fe&&fe.setDependencies(H.tileID.key,H.type,H.icons)},P.prototype.getGlyphs=function(F,H,oe){this.glyphManager.getGlyphs(H.stacks,oe)},P.prototype.getResource=function(F,H,oe){return e.makeRequest(H,oe)},P}(e.Evented);ti.getSourceType=function(L){return R[L]},ti.setSourceType=function(L,P){R[L]=P},ti.registerForPluginStateChange=e.registerForPluginStateChange;var En=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),hi=aa("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),mi=aa("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ra=aa("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),ka=aa("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),fa=aa("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Aa=aa("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Bi=aa("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),$i=aa("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),yo=aa("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ho=aa("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Ko=aa("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Na=aa("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Vi=aa("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ia=aa("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Qi=aa("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),go=aa("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Ji=aa("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Dt=aa("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),_t=aa("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),st=aa("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),sr=aa("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),hn=aa("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),ri=aa("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),qi=aa("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),ko=aa("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),as=aa("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function aa(L,P){var F=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,H={};return{fragmentSource:L=L.replace(F,function(oe,fe,ge,xe,Ce){return H[Ce]=!0,"define"===fe?"\n#ifndef HAS_UNIFORM_u_"+Ce+"\nvarying "+ge+" "+xe+" "+Ce+";\n#else\nuniform "+ge+" "+xe+" u_"+Ce+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Ce+"\n    "+ge+" "+xe+" "+Ce+" = u_"+Ce+";\n#endif\n"}),vertexSource:P=P.replace(F,function(oe,fe,ge,xe,Ce){var Ge="float"===xe?"vec2":"vec4",Xe=Ce.match(/color/)?"color":Ge;return H[Ce]?"define"===fe?"\n#ifndef HAS_UNIFORM_u_"+Ce+"\nuniform lowp float u_"+Ce+"_t;\nattribute "+ge+" "+Ge+" a_"+Ce+";\nvarying "+ge+" "+xe+" "+Ce+";\n#else\nuniform "+ge+" "+xe+" u_"+Ce+";\n#endif\n":"vec4"===Xe?"\n#ifndef HAS_UNIFORM_u_"+Ce+"\n    "+Ce+" = a_"+Ce+";\n#else\n    "+ge+" "+xe+" "+Ce+" = u_"+Ce+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Ce+"\n    "+Ce+" = unpack_mix_"+Xe+"(a_"+Ce+", u_"+Ce+"_t);\n#else\n    "+ge+" "+xe+" "+Ce+" = u_"+Ce+";\n#endif\n":"define"===fe?"\n#ifndef HAS_UNIFORM_u_"+Ce+"\nuniform lowp float u_"+Ce+"_t;\nattribute "+ge+" "+Ge+" a_"+Ce+";\n#else\nuniform "+ge+" "+xe+" u_"+Ce+";\n#endif\n":"vec4"===Xe?"\n#ifndef HAS_UNIFORM_u_"+Ce+"\n    "+ge+" "+xe+" "+Ce+" = a_"+Ce+";\n#else\n    "+ge+" "+xe+" "+Ce+" = u_"+Ce+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Ce+"\n    "+ge+" "+xe+" "+Ce+" = unpack_mix_"+Xe+"(a_"+Ce+", u_"+Ce+"_t);\n#else\n    "+ge+" "+xe+" "+Ce+" = u_"+Ce+";\n#endif\n"})}}var Es=Object.freeze({__proto__:null,prelude:hi,background:mi,backgroundPattern:ra,circle:ka,clippingMask:fa,heatmap:Aa,heatmapTexture:Bi,collisionBox:$i,collisionCircle:yo,debug:Ho,fill:Ko,fillOutline:Na,fillOutlinePattern:Vi,fillPattern:ia,fillExtrusion:Qi,fillExtrusionPattern:go,hillshadePrepare:Ji,hillshade:Dt,line:_t,lineGradient:st,linePattern:sr,lineSDF:hn,raster:ri,symbolIcon:qi,symbolSDF:ko,symbolTextAndIcon:as}),os=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};os.prototype.bind=function(L,P,F,H,oe,fe,ge,xe){this.context=L;for(var Ce=this.boundPaintVertexBuffers.length!==H.length,Ge=0;!Ce&&Ge<H.length;Ge++)this.boundPaintVertexBuffers[Ge]!==H[Ge]&&(Ce=!0);L.extVertexArrayObject&&this.vao&&this.boundProgram===P&&this.boundLayoutVertexBuffer===F&&!Ce&&this.boundIndexBuffer===oe&&this.boundVertexOffset===fe&&this.boundDynamicVertexBuffer===ge&&this.boundDynamicVertexBuffer2===xe?(L.bindVertexArrayOES.set(this.vao),ge&&ge.bind(),oe&&oe.dynamicDraw&&oe.bind(),xe&&xe.bind()):this.freshBind(P,F,H,oe,fe,ge,xe)},os.prototype.freshBind=function(L,P,F,H,oe,fe,ge){var xe,Ce=L.numAttributes,Ge=this.context,Xe=Ge.gl;if(Ge.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ge.extVertexArrayObject.createVertexArrayOES(),Ge.bindVertexArrayOES.set(this.vao),xe=0,this.boundProgram=L,this.boundLayoutVertexBuffer=P,this.boundPaintVertexBuffers=F,this.boundIndexBuffer=H,this.boundVertexOffset=oe,this.boundDynamicVertexBuffer=fe,this.boundDynamicVertexBuffer2=ge;else{xe=Ge.currentNumAttributes||0;for(var ot=Ce;ot<xe;ot++)Xe.disableVertexAttribArray(ot)}P.enableAttributes(Xe,L);for(var Mt=0,It=F;Mt<It.length;Mt+=1)It[Mt].enableAttributes(Xe,L);fe&&fe.enableAttributes(Xe,L),ge&&ge.enableAttributes(Xe,L),P.bind(),P.setVertexAttribPointers(Xe,L,oe);for(var Ct=0,Lt=F;Ct<Lt.length;Ct+=1){var Tt=Lt[Ct];Tt.bind(),Tt.setVertexAttribPointers(Xe,L,oe)}fe&&(fe.bind(),fe.setVertexAttribPointers(Xe,L,oe)),H&&H.bind(),ge&&(ge.bind(),ge.setVertexAttribPointers(Xe,L,oe)),Ge.currentNumAttributes=Ce},os.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ls=function(L,P,F,H,oe){var fe=L.gl;this.program=fe.createProgram();var ge=F?F.defines():[];oe&&ge.push("#define OVERDRAW_INSPECTOR;");var xe=ge.concat(hi.fragmentSource,P.fragmentSource).join("\n"),Ce=ge.concat(hi.vertexSource,P.vertexSource).join("\n"),Ge=fe.createShader(fe.FRAGMENT_SHADER);if(fe.isContextLost())this.failedToCreate=!0;else{fe.shaderSource(Ge,xe),fe.compileShader(Ge),fe.attachShader(this.program,Ge);var Xe=fe.createShader(fe.VERTEX_SHADER);if(fe.isContextLost())this.failedToCreate=!0;else{fe.shaderSource(Xe,Ce),fe.compileShader(Xe),fe.attachShader(this.program,Xe);for(var ot=F?F.layoutAttributes:[],Mt=0;Mt<ot.length;Mt++)fe.bindAttribLocation(this.program,Mt,ot[Mt].name);fe.linkProgram(this.program),fe.deleteShader(Xe),fe.deleteShader(Ge),this.numAttributes=fe.getProgramParameter(this.program,fe.ACTIVE_ATTRIBUTES),this.attributes={};for(var It={},Ct=0;Ct<this.numAttributes;Ct++){var Lt=fe.getActiveAttrib(this.program,Ct);Lt&&(this.attributes[Lt.name]=fe.getAttribLocation(this.program,Lt.name))}for(var Tt=fe.getProgramParameter(this.program,fe.ACTIVE_UNIFORMS),Ht=0;Ht<Tt;Ht++){var jt=fe.getActiveUniform(this.program,Ht);jt&&(It[jt.name]=fe.getUniformLocation(this.program,jt.name))}this.fixedUniforms=H(L,It),this.binderUniforms=F?F.getUniforms(L,It):[]}}};function Bs(L,P,F){var H=1/Pr(F,1,P.transform.tileZoom),oe=Math.pow(2,F.tileID.overscaledZ),fe=F.tileSize*Math.pow(2,P.transform.tileZoom)/oe,ge=fe*(F.tileID.canonical.x+F.tileID.wrap*oe),xe=fe*F.tileID.canonical.y;return{u_image:0,u_texsize:F.imageAtlasTexture.size,u_scale:[H,L.fromScale,L.toScale],u_fade:L.t,u_pixel_coord_upper:[ge>>16,xe>>16],u_pixel_coord_lower:[65535&ge,65535&xe]}}Ls.prototype.draw=function(L,P,F,H,oe,fe,ge,xe,Ce,Ge,Xe,ot,Mt,It,Ct,Lt){var Tt,Ht=L.gl;if(!this.failedToCreate){for(var jt in L.program.set(this.program),L.setDepthMode(F),L.setStencilMode(H),L.setColorMode(oe),L.setCullFace(fe),this.fixedUniforms)this.fixedUniforms[jt].set(ge[jt]);It&&It.setUniforms(L,this.binderUniforms,ot,{zoom:Mt});for(var Wt=(Tt={},Tt[Ht.LINES]=2,Tt[Ht.TRIANGLES]=3,Tt[Ht.LINE_STRIP]=1,Tt)[P],cr=0,br=Xe.get();cr<br.length;cr+=1){var zr=br[cr],Or=zr.vaos||(zr.vaos={});(Or[xe]||(Or[xe]=new os)).bind(L,this,Ce,It?It.getPaintVertexBuffers():[],Ge,zr.vertexOffset,Ct,Lt),Ht.drawElements(P,zr.primitiveLength*Wt,Ht.UNSIGNED_SHORT,zr.primitiveOffset*Wt*2)}}};var bs=function(L,P,F,H){var oe=P.style.light,fe=oe.properties.get("position"),ge=[fe.x,fe.y,fe.z],xe=e.create$1();"viewport"===oe.properties.get("anchor")&&e.fromRotation(xe,-P.transform.angle),e.transformMat3(ge,ge,xe);var Ce=oe.properties.get("color");return{u_matrix:L,u_lightpos:ge,u_lightintensity:oe.properties.get("intensity"),u_lightcolor:[Ce.r,Ce.g,Ce.b],u_vertical_gradient:+F,u_opacity:H}},Ns=function(L,P,F,H,oe,fe,ge){return e.extend(bs(L,P,F,H),Bs(fe,P,ge),{u_height_factor:-Math.pow(2,oe.overscaledZ)/ge.tileSize/8})},Do=function(L){return{u_matrix:L}},No=function(L,P,F,H){return e.extend(Do(L),Bs(F,P,H))},qo=function(L,P){return{u_matrix:L,u_world:P}},jo=function(L,P,F,H,oe){return e.extend(No(L,P,F,H),{u_world:oe})},Yo=function(L,P,F,H){var oe,fe,ge=L.transform;if("map"===H.paint.get("circle-pitch-alignment")){var xe=Pr(F,1,ge.zoom);oe=!0,fe=[xe,xe]}else oe=!1,fe=ge.pixelsToGLUnits;return{u_camera_to_center_distance:ge.cameraToCenterDistance,u_scale_with_map:+("map"===H.paint.get("circle-pitch-scale")),u_matrix:L.translatePosMatrix(P.posMatrix,F,H.paint.get("circle-translate"),H.paint.get("circle-translate-anchor")),u_pitch_with_map:+oe,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:fe}},ss=function(L,P,F){var H=Pr(F,1,P.zoom),oe=Math.pow(2,P.zoom-F.tileID.overscaledZ),fe=F.tileID.overscaleFactor();return{u_matrix:L,u_camera_to_center_distance:P.cameraToCenterDistance,u_pixels_to_tile_units:H,u_extrude_scale:[P.pixelsToGLUnits[0]/(H*oe),P.pixelsToGLUnits[1]/(H*oe)],u_overscale_factor:fe}},xo=function(L,P,F){return{u_matrix:L,u_inv_matrix:P,u_camera_to_center_distance:F.cameraToCenterDistance,u_viewport_size:[F.width,F.height]}},_s=function(L,P,F){return void 0===F&&(F=1),{u_matrix:L,u_color:P,u_overlay:0,u_overlay_scale:F}},$a=function(L){return{u_matrix:L}},Wo=function(L,P,F,H){return{u_matrix:L,u_extrude_scale:Pr(P,1,F),u_intensity:H}};function ws(L,P){var F=Math.pow(2,P.canonical.z),H=P.canonical.y;return[new e.MercatorCoordinate(0,H/F).toLngLat().lat,new e.MercatorCoordinate(0,(H+1)/F).toLngLat().lat]}var So=function(L,P,F){var H=L.transform;return{u_matrix:lt(L,P,F),u_ratio:1/Pr(P,1,H.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/H.pixelsToGLUnits[0],1/H.pixelsToGLUnits[1]]}},na=function(L,P,F){return e.extend(So(L,P,F),{u_image:0})},Ve=function(L,P,F,H){var oe=L.transform,fe=et(P,oe);return{u_matrix:lt(L,P,F),u_texsize:P.imageAtlasTexture.size,u_ratio:1/Pr(P,1,oe.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[fe,H.fromScale,H.toScale],u_fade:H.t,u_units_to_pixels:[1/oe.pixelsToGLUnits[0],1/oe.pixelsToGLUnits[1]]}},qe=function(L,P,F,H,oe){var ge=L.lineAtlas,xe=et(P,L.transform),Ce="round"===F.layout.get("line-cap"),Ge=ge.getDash(H.from,Ce),Xe=ge.getDash(H.to,Ce),ot=Ge.width*oe.fromScale,Mt=Xe.width*oe.toScale;return e.extend(So(L,P,F),{u_patternscale_a:[xe/ot,-Ge.height/2],u_patternscale_b:[xe/Mt,-Xe.height/2],u_sdfgamma:ge.width/(256*Math.min(ot,Mt)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ge.y,u_tex_y_b:Xe.y,u_mix:oe.t})};function et(L,P){return 1/Pr(L,1,P.tileZoom)}function lt(L,P,F){return L.translatePosMatrix(P.tileID.posMatrix,P,F.paint.get("line-translate"),F.paint.get("line-translate-anchor"))}var wt=function(L,P,F,H,oe){return{u_matrix:L,u_tl_parent:P,u_scale_parent:F,u_buffer_scale:1,u_fade_t:H.mix,u_opacity:H.opacity*oe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:oe.paint.get("raster-brightness-min"),u_brightness_high:oe.paint.get("raster-brightness-max"),u_saturation_factor:(ge=oe.paint.get("raster-saturation"),ge>0?1-1/(1.001-ge):-ge),u_contrast_factor:(fe=oe.paint.get("raster-contrast"),fe>0?1/(1-fe):1+fe),u_spin_weights:vt(oe.paint.get("raster-hue-rotate"))};var fe,ge};function vt(L){L*=Math.PI/180;var P=Math.sin(L),F=Math.cos(L);return[(2*F+1)/3,(-Math.sqrt(3)*P-F+1)/3,(Math.sqrt(3)*P-F+1)/3]}var Ot,ir=function(L,P,F,H,oe,fe,ge,xe,Ce,Ge){var Xe=oe.transform;return{u_is_size_zoom_constant:+("constant"===L||"source"===L),u_is_size_feature_constant:+("constant"===L||"camera"===L),u_size_t:P?P.uSizeT:0,u_size:P?P.uSize:0,u_camera_to_center_distance:Xe.cameraToCenterDistance,u_pitch:Xe.pitch/360*2*Math.PI,u_rotate_symbol:+F,u_aspect_ratio:Xe.width/Xe.height,u_fade_change:oe.options.fadeDuration?oe.symbolFadeChange:1,u_matrix:fe,u_label_plane_matrix:ge,u_coord_matrix:xe,u_is_text:+Ce,u_pitch_with_map:+H,u_texsize:Ge,u_texture:0}},or=function(L,P,F,H,oe,fe,ge,xe,Ce,Ge,Xe){var ot=oe.transform;return e.extend(ir(L,P,F,H,oe,fe,ge,xe,Ce,Ge),{u_gamma_scale:H?Math.cos(ot._pitch)*ot.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+Xe})},er=function(L,P,F,H,oe,fe,ge,xe,Ce,Ge){return e.extend(or(L,P,F,H,oe,fe,ge,xe,!0,Ce,!0),{u_texsize_icon:Ge,u_texture_icon:1})},ur=function(L,P,F){return{u_matrix:L,u_opacity:P,u_color:F}},xr=function(L,P,F,H,oe,fe){return e.extend((xe=fe,Ge=oe,Xe=(Ce=F).imageManager.getPattern((ge=H).from.toString()),ot=Ce.imageManager.getPattern(ge.to.toString()),It=(Mt=Ce.imageManager.getPixelSize()).width,Ct=Mt.height,Lt=Math.pow(2,Ge.tileID.overscaledZ),Ht=(Tt=Ge.tileSize*Math.pow(2,Ce.transform.tileZoom)/Lt)*(Ge.tileID.canonical.x+Ge.tileID.wrap*Lt),jt=Tt*Ge.tileID.canonical.y,{u_image:0,u_pattern_tl_a:Xe.tl,u_pattern_br_a:Xe.br,u_pattern_tl_b:ot.tl,u_pattern_br_b:ot.br,u_texsize:[It,Ct],u_mix:xe.t,u_pattern_size_a:Xe.displaySize,u_pattern_size_b:ot.displaySize,u_scale_a:xe.fromScale,u_scale_b:xe.toScale,u_tile_units_to_pixels:1/Pr(Ge,1,Ce.transform.tileZoom),u_pixel_coord_upper:[Ht>>16,jt>>16],u_pixel_coord_lower:[65535&Ht,65535&jt]}),{u_matrix:L,u_opacity:P});var ge,xe,Ce,Ge,Xe,ot,Mt,It,Ct,Lt,Tt,Ht,jt},kr={fillExtrusion:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_lightpos:new e.Uniform3f(L,P.u_lightpos),u_lightintensity:new e.Uniform1f(L,P.u_lightintensity),u_lightcolor:new e.Uniform3f(L,P.u_lightcolor),u_vertical_gradient:new e.Uniform1f(L,P.u_vertical_gradient),u_opacity:new e.Uniform1f(L,P.u_opacity)}},fillExtrusionPattern:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_lightpos:new e.Uniform3f(L,P.u_lightpos),u_lightintensity:new e.Uniform1f(L,P.u_lightintensity),u_lightcolor:new e.Uniform3f(L,P.u_lightcolor),u_vertical_gradient:new e.Uniform1f(L,P.u_vertical_gradient),u_height_factor:new e.Uniform1f(L,P.u_height_factor),u_image:new e.Uniform1i(L,P.u_image),u_texsize:new e.Uniform2f(L,P.u_texsize),u_pixel_coord_upper:new e.Uniform2f(L,P.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(L,P.u_pixel_coord_lower),u_scale:new e.Uniform3f(L,P.u_scale),u_fade:new e.Uniform1f(L,P.u_fade),u_opacity:new e.Uniform1f(L,P.u_opacity)}},fill:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix)}},fillPattern:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_image:new e.Uniform1i(L,P.u_image),u_texsize:new e.Uniform2f(L,P.u_texsize),u_pixel_coord_upper:new e.Uniform2f(L,P.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(L,P.u_pixel_coord_lower),u_scale:new e.Uniform3f(L,P.u_scale),u_fade:new e.Uniform1f(L,P.u_fade)}},fillOutline:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_world:new e.Uniform2f(L,P.u_world)}},fillOutlinePattern:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_world:new e.Uniform2f(L,P.u_world),u_image:new e.Uniform1i(L,P.u_image),u_texsize:new e.Uniform2f(L,P.u_texsize),u_pixel_coord_upper:new e.Uniform2f(L,P.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(L,P.u_pixel_coord_lower),u_scale:new e.Uniform3f(L,P.u_scale),u_fade:new e.Uniform1f(L,P.u_fade)}},circle:function(L,P){return{u_camera_to_center_distance:new e.Uniform1f(L,P.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(L,P.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(L,P.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(L,P.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(L,P.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(L,P.u_matrix)}},collisionBox:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_camera_to_center_distance:new e.Uniform1f(L,P.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(L,P.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(L,P.u_extrude_scale),u_overscale_factor:new e.Uniform1f(L,P.u_overscale_factor)}},collisionCircle:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_inv_matrix:new e.UniformMatrix4f(L,P.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(L,P.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(L,P.u_viewport_size)}},debug:function(L,P){return{u_color:new e.UniformColor(L,P.u_color),u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_overlay:new e.Uniform1i(L,P.u_overlay),u_overlay_scale:new e.Uniform1f(L,P.u_overlay_scale)}},clippingMask:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix)}},heatmap:function(L,P){return{u_extrude_scale:new e.Uniform1f(L,P.u_extrude_scale),u_intensity:new e.Uniform1f(L,P.u_intensity),u_matrix:new e.UniformMatrix4f(L,P.u_matrix)}},heatmapTexture:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_world:new e.Uniform2f(L,P.u_world),u_image:new e.Uniform1i(L,P.u_image),u_color_ramp:new e.Uniform1i(L,P.u_color_ramp),u_opacity:new e.Uniform1f(L,P.u_opacity)}},hillshade:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_image:new e.Uniform1i(L,P.u_image),u_latrange:new e.Uniform2f(L,P.u_latrange),u_light:new e.Uniform2f(L,P.u_light),u_shadow:new e.UniformColor(L,P.u_shadow),u_highlight:new e.UniformColor(L,P.u_highlight),u_accent:new e.UniformColor(L,P.u_accent)}},hillshadePrepare:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_image:new e.Uniform1i(L,P.u_image),u_dimension:new e.Uniform2f(L,P.u_dimension),u_zoom:new e.Uniform1f(L,P.u_zoom),u_maxzoom:new e.Uniform1f(L,P.u_maxzoom),u_unpack:new e.Uniform4f(L,P.u_unpack)}},line:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_ratio:new e.Uniform1f(L,P.u_ratio),u_device_pixel_ratio:new e.Uniform1f(L,P.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(L,P.u_units_to_pixels)}},lineGradient:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_ratio:new e.Uniform1f(L,P.u_ratio),u_device_pixel_ratio:new e.Uniform1f(L,P.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(L,P.u_units_to_pixels),u_image:new e.Uniform1i(L,P.u_image)}},linePattern:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_texsize:new e.Uniform2f(L,P.u_texsize),u_ratio:new e.Uniform1f(L,P.u_ratio),u_device_pixel_ratio:new e.Uniform1f(L,P.u_device_pixel_ratio),u_image:new e.Uniform1i(L,P.u_image),u_units_to_pixels:new e.Uniform2f(L,P.u_units_to_pixels),u_scale:new e.Uniform3f(L,P.u_scale),u_fade:new e.Uniform1f(L,P.u_fade)}},lineSDF:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_ratio:new e.Uniform1f(L,P.u_ratio),u_device_pixel_ratio:new e.Uniform1f(L,P.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(L,P.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(L,P.u_patternscale_a),u_patternscale_b:new e.Uniform2f(L,P.u_patternscale_b),u_sdfgamma:new e.Uniform1f(L,P.u_sdfgamma),u_image:new e.Uniform1i(L,P.u_image),u_tex_y_a:new e.Uniform1f(L,P.u_tex_y_a),u_tex_y_b:new e.Uniform1f(L,P.u_tex_y_b),u_mix:new e.Uniform1f(L,P.u_mix)}},raster:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_tl_parent:new e.Uniform2f(L,P.u_tl_parent),u_scale_parent:new e.Uniform1f(L,P.u_scale_parent),u_buffer_scale:new e.Uniform1f(L,P.u_buffer_scale),u_fade_t:new e.Uniform1f(L,P.u_fade_t),u_opacity:new e.Uniform1f(L,P.u_opacity),u_image0:new e.Uniform1i(L,P.u_image0),u_image1:new e.Uniform1i(L,P.u_image1),u_brightness_low:new e.Uniform1f(L,P.u_brightness_low),u_brightness_high:new e.Uniform1f(L,P.u_brightness_high),u_saturation_factor:new e.Uniform1f(L,P.u_saturation_factor),u_contrast_factor:new e.Uniform1f(L,P.u_contrast_factor),u_spin_weights:new e.Uniform3f(L,P.u_spin_weights)}},symbolIcon:function(L,P){return{u_is_size_zoom_constant:new e.Uniform1i(L,P.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(L,P.u_is_size_feature_constant),u_size_t:new e.Uniform1f(L,P.u_size_t),u_size:new e.Uniform1f(L,P.u_size),u_camera_to_center_distance:new e.Uniform1f(L,P.u_camera_to_center_distance),u_pitch:new e.Uniform1f(L,P.u_pitch),u_rotate_symbol:new e.Uniform1i(L,P.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(L,P.u_aspect_ratio),u_fade_change:new e.Uniform1f(L,P.u_fade_change),u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(L,P.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(L,P.u_coord_matrix),u_is_text:new e.Uniform1i(L,P.u_is_text),u_pitch_with_map:new e.Uniform1i(L,P.u_pitch_with_map),u_texsize:new e.Uniform2f(L,P.u_texsize),u_texture:new e.Uniform1i(L,P.u_texture)}},symbolSDF:function(L,P){return{u_is_size_zoom_constant:new e.Uniform1i(L,P.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(L,P.u_is_size_feature_constant),u_size_t:new e.Uniform1f(L,P.u_size_t),u_size:new e.Uniform1f(L,P.u_size),u_camera_to_center_distance:new e.Uniform1f(L,P.u_camera_to_center_distance),u_pitch:new e.Uniform1f(L,P.u_pitch),u_rotate_symbol:new e.Uniform1i(L,P.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(L,P.u_aspect_ratio),u_fade_change:new e.Uniform1f(L,P.u_fade_change),u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(L,P.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(L,P.u_coord_matrix),u_is_text:new e.Uniform1i(L,P.u_is_text),u_pitch_with_map:new e.Uniform1i(L,P.u_pitch_with_map),u_texsize:new e.Uniform2f(L,P.u_texsize),u_texture:new e.Uniform1i(L,P.u_texture),u_gamma_scale:new e.Uniform1f(L,P.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(L,P.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(L,P.u_is_halo)}},symbolTextAndIcon:function(L,P){return{u_is_size_zoom_constant:new e.Uniform1i(L,P.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(L,P.u_is_size_feature_constant),u_size_t:new e.Uniform1f(L,P.u_size_t),u_size:new e.Uniform1f(L,P.u_size),u_camera_to_center_distance:new e.Uniform1f(L,P.u_camera_to_center_distance),u_pitch:new e.Uniform1f(L,P.u_pitch),u_rotate_symbol:new e.Uniform1i(L,P.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(L,P.u_aspect_ratio),u_fade_change:new e.Uniform1f(L,P.u_fade_change),u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(L,P.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(L,P.u_coord_matrix),u_is_text:new e.Uniform1i(L,P.u_is_text),u_pitch_with_map:new e.Uniform1i(L,P.u_pitch_with_map),u_texsize:new e.Uniform2f(L,P.u_texsize),u_texsize_icon:new e.Uniform2f(L,P.u_texsize_icon),u_texture:new e.Uniform1i(L,P.u_texture),u_texture_icon:new e.Uniform1i(L,P.u_texture_icon),u_gamma_scale:new e.Uniform1f(L,P.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(L,P.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(L,P.u_is_halo)}},background:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_opacity:new e.Uniform1f(L,P.u_opacity),u_color:new e.UniformColor(L,P.u_color)}},backgroundPattern:function(L,P){return{u_matrix:new e.UniformMatrix4f(L,P.u_matrix),u_opacity:new e.Uniform1f(L,P.u_opacity),u_image:new e.Uniform1i(L,P.u_image),u_pattern_tl_a:new e.Uniform2f(L,P.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(L,P.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(L,P.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(L,P.u_pattern_br_b),u_texsize:new e.Uniform2f(L,P.u_texsize),u_mix:new e.Uniform1f(L,P.u_mix),u_pattern_size_a:new e.Uniform2f(L,P.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(L,P.u_pattern_size_b),u_scale_a:new e.Uniform1f(L,P.u_scale_a),u_scale_b:new e.Uniform1f(L,P.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(L,P.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(L,P.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(L,P.u_tile_units_to_pixels)}}};function Cr(L,P,F,H,oe,fe,ge){for(var xe=L.context,Ce=xe.gl,Ge=L.useProgram("collisionBox"),Xe=[],ot=0,Mt=0,It=0;It<H.length;It++){var Ct=H[It],Lt=P.getTile(Ct),Tt=Lt.getBucket(F);if(Tt){var Ht=Ct.posMatrix;0===oe[0]&&0===oe[1]||(Ht=L.translatePosMatrix(Ct.posMatrix,Lt,oe,fe));var jt=ge?Tt.textCollisionBox:Tt.iconCollisionBox,Wt=Tt.collisionCircleArray;if(Wt.length>0){var cr=e.create(),br=Ht;e.mul(cr,Tt.placementInvProjMatrix,L.transform.glCoordMatrix),e.mul(cr,cr,Tt.placementViewportMatrix),Xe.push({circleArray:Wt,circleOffset:Mt,transform:br,invTransform:cr}),Mt=ot+=Wt.length/4}jt&&Ge.draw(xe,Ce.LINES,it.disabled,ke.disabled,L.colorModeForRenderPass(),Re.disabled,ss(Ht,L.transform,Lt),F.id,jt.layoutVertexBuffer,jt.indexBuffer,jt.segments,null,L.transform.zoom,null,null,jt.collisionVertexBuffer)}}if(ge&&Xe.length){var zr=L.useProgram("collisionCircle"),Or=new e.StructArrayLayout2f1f2i16;Or.resize(4*ot),Or._trim();for(var sn=0,on=0,Mn=Xe;on<Mn.length;on+=1)for(var xn=Mn[on],Kn=0;Kn<xn.circleArray.length/4;Kn++){var ai=4*Kn,_i=xn.circleArray[ai+0],Jr=xn.circleArray[ai+1],zn=xn.circleArray[ai+2],oi=xn.circleArray[ai+3];Or.emplace(sn++,_i,Jr,zn,oi,0),Or.emplace(sn++,_i,Jr,zn,oi,1),Or.emplace(sn++,_i,Jr,zn,oi,2),Or.emplace(sn++,_i,Jr,zn,oi,3)}(!Ot||Ot.length<2*ot)&&(Ot=function(Ci){var ji=2*Ci,Oi=new e.StructArrayLayout3ui6;Oi.resize(ji),Oi._trim();for(var Gi=0;Gi<ji;Gi++){var ta=6*Gi;Oi.uint16[ta+0]=4*Gi+0,Oi.uint16[ta+1]=4*Gi+1,Oi.uint16[ta+2]=4*Gi+2,Oi.uint16[ta+3]=4*Gi+2,Oi.uint16[ta+4]=4*Gi+3,Oi.uint16[ta+5]=4*Gi+0}return Oi}(ot));for(var ni=xe.createIndexBuffer(Ot,!0),pi=xe.createVertexBuffer(Or,e.collisionCircleLayout.members,!0),Ai=0,zi=Xe;Ai<zi.length;Ai+=1){var si=zi[Ai],Di=xo(si.transform,si.invTransform,L.transform);zr.draw(xe,Ce.TRIANGLES,it.disabled,ke.disabled,L.colorModeForRenderPass(),Re.disabled,Di,F.id,pi,ni,e.SegmentVector.simpleSegment(0,2*si.circleOffset,si.circleArray.length,si.circleArray.length/2),null,L.transform.zoom,null,null,null)}pi.destroy(),ni.destroy()}}var Vr=e.identity(new Float32Array(16));function pn(L,P,F,H,oe,fe){var ge=e.getAnchorAlignment(L),xe=-(ge.horizontalAlign-.5)*P,Ce=-(ge.verticalAlign-.5)*F,Ge=e.evaluateVariableOffset(L,H);return new e.Point((xe/oe+Ge[0])*fe,(Ce/oe+Ge[1])*fe)}function Tn(L,P,F,H,oe,fe,ge,xe,Ce,Ge,Xe){var ot=L.text.placedSymbolArray,Mt=L.text.dynamicLayoutVertexArray,It=L.icon.dynamicLayoutVertexArray,Ct={};Mt.clear();for(var Lt=0;Lt<ot.length;Lt++){var Tt=ot.get(Lt),jt=Tt.hidden||!Tt.crossTileID||L.allowVerticalPlacement&&!Tt.placedOrientation?null:H[Tt.crossTileID];if(jt){var Wt=new e.Point(Tt.anchorX,Tt.anchorY),cr=mr(Wt,F?xe:ge),br=_r(fe.cameraToCenterDistance,cr.signedDistanceFromCamera),zr=oe.evaluateSizeForFeature(L.textSizeData,Ge,Tt)*br/e.ONE_EM;F&&(zr*=L.tilePixelRatio/Ce);for(var on=pn(jt.anchor,jt.width,jt.height,jt.textOffset,jt.textBoxScale,zr),Mn=F?mr(Wt.add(on),ge).point:cr.point.add(P?on.rotate(-fe.angle):on),xn=L.allowVerticalPlacement&&Tt.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Kn=0;Kn<Tt.numGlyphs;Kn++)e.addDynamicAttributes(Mt,Mn,xn);Xe&&Tt.associatedIconIndex>=0&&(Ct[Tt.associatedIconIndex]={shiftedAnchor:Mn,angle:xn})}else Ln(Tt.numGlyphs,Mt)}if(Xe){It.clear();for(var ai=L.icon.placedSymbolArray,_i=0;_i<ai.length;_i++){var Jr=ai.get(_i);if(Jr.hidden)Ln(Jr.numGlyphs,It);else{var zn=Ct[_i];if(zn)for(var oi=0;oi<Jr.numGlyphs;oi++)e.addDynamicAttributes(It,zn.shiftedAnchor,zn.angle);else Ln(Jr.numGlyphs,It)}}L.icon.dynamicLayoutVertexBuffer.updateData(It)}L.text.dynamicLayoutVertexBuffer.updateData(Mt)}function Un(L,P,F){return F.iconsInText&&P?"symbolTextAndIcon":L?"symbolSDF":"symbolIcon"}function Wn(L,P,F,H,oe,fe,ge,xe,Ce,Ge,Xe,ot){for(var Mt=L.context,It=Mt.gl,Ct=L.transform,Lt="map"===xe,Tt="map"===Ce,Ht=Lt&&"point"!==F.layout.get("symbol-placement"),jt=Lt&&!Tt&&!Ht,Wt=void 0!==F.layout.get("symbol-sort-key").constantOr(1),cr=L.depthModeForSublayer(0,it.ReadOnly),br=F.layout.get("text-variable-anchor"),zr=[],Or=0,sn=H;Or<sn.length;Or+=1){var on=sn[Or],Mn=P.getTile(on),xn=Mn.getBucket(F);if(xn){var Kn=oe?xn.text:xn.icon;if(Kn&&Kn.segments.get().length){var ai=Kn.programConfigurations.get(F.id),_i=oe||xn.sdfIcons,Jr=oe?xn.textSizeData:xn.iconSizeData,zn=Tt||0!==Ct.pitch,oi=L.useProgram(Un(_i,oe,xn),ai),ni=e.evaluateSizeForZoom(Jr,Ct.zoom),pi=void 0,Ai=[0,0],zi=void 0,si=void 0,Di=null,Ci=void 0;if(oe)zi=Mn.glyphAtlasTexture,si=It.LINEAR,pi=Mn.glyphAtlasTexture.size,xn.iconsInText&&(Ai=Mn.imageAtlasTexture.size,Di=Mn.imageAtlasTexture,Ci=zn||L.options.rotating||L.options.zooming||"composite"===Jr.kind||"camera"===Jr.kind?It.LINEAR:It.NEAREST);else{var Oi=1!==F.layout.get("icon-size").constantOr(0)||xn.iconsNeedLinear;zi=Mn.imageAtlasTexture,si=_i||L.options.rotating||L.options.zooming||Oi||zn?It.LINEAR:It.NEAREST,pi=Mn.imageAtlasTexture.size}var Gi=Pr(Mn,1,L.transform.zoom),ta=Tr(on.posMatrix,Tt,Lt,L.transform,Gi),Ta=wr(on.posMatrix,Tt,Lt,L.transform,Gi),Va=br&&xn.hasTextData(),Ua="none"!==F.layout.get("icon-text-fit")&&Va&&xn.hasIconData();Ht&&Gr(xn,on.posMatrix,L,oe,ta,Ta,Tt,Ge);var wa=L.translatePosMatrix(on.posMatrix,Mn,fe,ge),Ra=Ht||oe&&br||Ua?Vr:ta,Ea=L.translatePosMatrix(Ta,Mn,fe,ge,!0),_o=_i&&0!==F.paint.get(oe?"text-halo-width":"icon-halo-width").constantOr(1),to={program:oi,buffers:Kn,uniformValues:_i?xn.iconsInText?er(Jr.kind,ni,jt,Tt,L,wa,Ra,Ea,pi,Ai):or(Jr.kind,ni,jt,Tt,L,wa,Ra,Ea,oe,pi,!0):ir(Jr.kind,ni,jt,Tt,L,wa,Ra,Ea,oe,pi),atlasTexture:zi,atlasTextureIcon:Di,atlasInterpolation:si,atlasInterpolationIcon:Ci,isSDF:_i,hasHalo:_o};if(Wt)for(var Io=0,Ps=Kn.segments.get();Io<Ps.length;Io+=1){var Ys=Ps[Io];zr.push({segments:new e.SegmentVector([Ys]),sortKey:Ys.sortKey,state:to})}else zr.push({segments:Kn.segments,sortKey:0,state:to})}}}Wt&&zr.sort(function(pl,us){return pl.sortKey-us.sortKey});for(var dl=0,ol=zr;dl<ol.length;dl+=1){var sl=ol[dl],Eo=sl.state;if(Mt.activeTexture.set(It.TEXTURE0),Eo.atlasTexture.bind(Eo.atlasInterpolation,It.CLAMP_TO_EDGE),Eo.atlasTextureIcon&&(Mt.activeTexture.set(It.TEXTURE1),Eo.atlasTextureIcon&&Eo.atlasTextureIcon.bind(Eo.atlasInterpolationIcon,It.CLAMP_TO_EDGE)),Eo.isSDF){var Js=Eo.uniformValues;Eo.hasHalo&&(Js.u_is_halo=1,ei(Eo.buffers,sl.segments,F,L,Eo.program,cr,Xe,ot,Js)),Js.u_is_halo=0}ei(Eo.buffers,sl.segments,F,L,Eo.program,cr,Xe,ot,Eo.uniformValues)}}function ei(L,P,F,H,oe,fe,ge,xe,Ce){var Ge=H.context;oe.draw(Ge,Ge.gl.TRIANGLES,fe,ge,xe,Re.disabled,Ce,F.id,L.layoutVertexBuffer,L.indexBuffer,P,F.paint,H.transform.zoom,L.programConfigurations.get(F.id),L.dynamicLayoutVertexBuffer,L.opacityVertexBuffer)}function Yn(L,P,F,H,oe,fe,ge){var xe,Ce,Ge,Xe,ot,Mt=L.context.gl,It=F.paint.get("fill-pattern"),Ct=It&&It.constantOr(1),Lt=F.getCrossfadeParameters();ge?(Ce=Ct&&!F.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",xe=Mt.LINES):(Ce=Ct?"fillPattern":"fill",xe=Mt.TRIANGLES);for(var Tt=0,Ht=H;Tt<Ht.length;Tt+=1){var jt=Ht[Tt],Wt=P.getTile(jt);if(!Ct||Wt.patternsLoaded()){var cr=Wt.getBucket(F);if(cr){var br=cr.programConfigurations.get(F.id),zr=L.useProgram(Ce,br);Ct&&(L.context.activeTexture.set(Mt.TEXTURE0),Wt.imageAtlasTexture.bind(Mt.LINEAR,Mt.CLAMP_TO_EDGE),br.updatePaintBuffers(Lt));var Or=It.constantOr(null);if(Or&&Wt.imageAtlas){var sn=Wt.imageAtlas,on=sn.patternPositions[Or.to.toString()],Mn=sn.patternPositions[Or.from.toString()];on&&Mn&&br.setConstantPatternPositions(on,Mn)}var xn=L.translatePosMatrix(jt.posMatrix,Wt,F.paint.get("fill-translate"),F.paint.get("fill-translate-anchor"));if(ge){Xe=cr.indexBuffer2,ot=cr.segments2;var Kn=[Mt.drawingBufferWidth,Mt.drawingBufferHeight];Ge="fillOutlinePattern"===Ce&&Ct?jo(xn,L,Lt,Wt,Kn):qo(xn,Kn)}else Xe=cr.indexBuffer,ot=cr.segments,Ge=Ct?No(xn,L,Lt,Wt):Do(xn);zr.draw(L.context,xe,oe,L.stencilModeForClipping(jt),fe,Re.disabled,Ge,F.id,cr.layoutVertexBuffer,Xe,ot,F.paint,L.transform.zoom,br)}}}}function Si(L,P,F,H,oe,fe,ge){for(var xe=L.context,Ce=xe.gl,Ge=F.paint.get("fill-extrusion-pattern"),Xe=Ge.constantOr(1),ot=F.getCrossfadeParameters(),Mt=F.paint.get("fill-extrusion-opacity"),It=0,Ct=H;It<Ct.length;It+=1){var Lt=Ct[It],Tt=P.getTile(Lt),Ht=Tt.getBucket(F);if(Ht){var jt=Ht.programConfigurations.get(F.id),Wt=L.useProgram(Xe?"fillExtrusionPattern":"fillExtrusion",jt);Xe&&(L.context.activeTexture.set(Ce.TEXTURE0),Tt.imageAtlasTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),jt.updatePaintBuffers(ot));var cr=Ge.constantOr(null);if(cr&&Tt.imageAtlas){var br=Tt.imageAtlas,zr=br.patternPositions[cr.to.toString()],Or=br.patternPositions[cr.from.toString()];zr&&Or&&jt.setConstantPatternPositions(zr,Or)}var sn=L.translatePosMatrix(Lt.posMatrix,Tt,F.paint.get("fill-extrusion-translate"),F.paint.get("fill-extrusion-translate-anchor")),on=F.paint.get("fill-extrusion-vertical-gradient"),Mn=Xe?Ns(sn,L,on,Mt,Lt,ot,Tt):bs(sn,L,on,Mt);Wt.draw(xe,xe.gl.TRIANGLES,oe,fe,ge,Re.backCCW,Mn,F.id,Ht.layoutVertexBuffer,Ht.indexBuffer,Ht.segments,F.paint,L.transform.zoom,jt)}}}function Ri(L,P,F,H,oe,fe){var ge=L.context,xe=ge.gl,Ce=P.fbo;if(Ce){var Ge=L.useProgram("hillshade");ge.activeTexture.set(xe.TEXTURE0),xe.bindTexture(xe.TEXTURE_2D,Ce.colorAttachment.get());var Xe=function(ot,Mt,It){var Ct=It.paint.get("hillshade-shadow-color"),Lt=It.paint.get("hillshade-highlight-color"),Tt=It.paint.get("hillshade-accent-color"),Ht=It.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===It.paint.get("hillshade-illumination-anchor")&&(Ht-=ot.transform.angle);var jt=!ot.options.moving;return{u_matrix:ot.transform.calculatePosMatrix(Mt.tileID.toUnwrapped(),jt),u_image:0,u_latrange:ws(0,Mt.tileID),u_light:[It.paint.get("hillshade-exaggeration"),Ht],u_shadow:Ct,u_highlight:Lt,u_accent:Tt}}(L,P,F);Ge.draw(ge,xe.TRIANGLES,H,oe,fe,Re.disabled,Xe,F.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments)}}function Ki(L,P,F,H,oe,fe,ge){var Tt,Ht,jt,Wt,cr,xe=L.context,Ce=xe.gl,Ge=P.dem;if(Ge&&Ge.data){var Xe=Ge.dim,ot=Ge.stride,Mt=Ge.getPixels();if(xe.activeTexture.set(Ce.TEXTURE1),xe.pixelStoreUnpackPremultiplyAlpha.set(!1),P.demTexture=P.demTexture||L.getTileTexture(ot),P.demTexture){var It=P.demTexture;It.update(Mt,{premultiply:!1}),It.bind(Ce.NEAREST,Ce.CLAMP_TO_EDGE)}else P.demTexture=new e.Texture(xe,Mt,Ce.RGBA,{premultiply:!1}),P.demTexture.bind(Ce.NEAREST,Ce.CLAMP_TO_EDGE);xe.activeTexture.set(Ce.TEXTURE0);var Ct=P.fbo;if(!Ct){var Lt=new e.Texture(xe,{width:Xe,height:Xe,data:null},Ce.RGBA);Lt.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),(Ct=P.fbo=xe.createFramebuffer(Xe,Xe,!0)).colorAttachment.set(Lt.texture)}xe.bindFramebuffer.set(Ct.framebuffer),xe.viewport.set([0,0,Xe,Xe]),L.useProgram("hillshadePrepare").draw(xe,Ce.TRIANGLES,oe,fe,ge,Re.disabled,(Tt=P.tileID,jt=H,Wt=(Ht=Ge).stride,cr=e.create(),e.ortho(cr,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(cr,cr,[0,-e.EXTENT,0]),{u_matrix:cr,u_image:1,u_dimension:[Wt,Wt],u_zoom:Tt.overscaledZ,u_maxzoom:jt,u_unpack:Ht.getUnpackVector()}),F.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments),P.needsHillshadePrepare=!1}}function Zi(L,P,F,H,oe){var fe=H.paint.get("raster-fade-duration");if(fe>0){var ge=e.browser.now(),xe=(ge-L.timeAdded)/fe,Ce=P?(ge-P.timeAdded)/fe:-1,Ge=F.getSource(),Xe=oe.coveringZoomLevel({tileSize:Ge.tileSize,roundZoom:Ge.roundZoom}),ot=!P||Math.abs(P.tileID.overscaledZ-Xe)>Math.abs(L.tileID.overscaledZ-Xe),Mt=ot&&L.refreshedUponExpiration?1:e.clamp(ot?xe:1-Ce,0,1);return L.refreshedUponExpiration&&xe>=1&&(L.refreshedUponExpiration=!1),P?{opacity:1,mix:1-Mt}:{opacity:Mt,mix:0}}return{opacity:1,mix:0}}var ea=new e.Color(1,0,0,1),Oa=new e.Color(0,1,0,1),Ia=new e.Color(0,0,1,1),ya=new e.Color(1,0,1,1),xa=new e.Color(0,1,1,1);function Xa(L,P,F,H){lo(L,0,P+F/2,L.transform.width,F,H)}function so(L,P,F,H){lo(L,P-F/2,0,F,L.transform.height,H)}function lo(L,P,F,H,oe,fe){var ge=L.context,xe=ge.gl;xe.enable(xe.SCISSOR_TEST),xe.scissor(P*e.browser.devicePixelRatio,F*e.browser.devicePixelRatio,H*e.browser.devicePixelRatio,oe*e.browser.devicePixelRatio),ge.clear({color:fe}),xe.disable(xe.SCISSOR_TEST)}function co(L,P,F){var H=L.context,oe=H.gl,fe=F.posMatrix,ge=L.useProgram("debug"),xe=it.disabled,Ce=ke.disabled,Ge=L.colorModeForRenderPass();H.activeTexture.set(oe.TEXTURE0),L.emptyTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),ge.draw(H,oe.LINE_STRIP,xe,Ce,Ge,Re.disabled,_s(fe,e.Color.red),"$debug",L.debugBuffer,L.tileBorderIndexBuffer,L.debugSegments);var Xe=P.getTileByID(F.key).latestRawTileData,Mt=Math.floor((Xe&&Xe.byteLength||0)/1024),It=P.getTile(F).tileSize,Ct=512/Math.min(It,512)*(F.overscaledZ/L.transform.zoom)*.5,Lt=F.canonical.toString();F.overscaledZ!==F.canonical.z&&(Lt+=" => "+F.overscaledZ),function(Tt,Ht){Tt.initDebugOverlayCanvas();var jt=Tt.debugOverlayCanvas,Wt=Tt.context.gl,cr=Tt.debugOverlayCanvas.getContext("2d");cr.clearRect(0,0,jt.width,jt.height),cr.shadowColor="white",cr.shadowBlur=2,cr.lineWidth=1.5,cr.strokeStyle="white",cr.textBaseline="top",cr.font="bold 36px Open Sans, sans-serif",cr.fillText(Ht,5,5),cr.strokeText(Ht,5,5),Tt.debugOverlayTexture.update(jt),Tt.debugOverlayTexture.bind(Wt.LINEAR,Wt.CLAMP_TO_EDGE)}(L,Lt+" "+Mt+"kb"),ge.draw(H,oe.TRIANGLES,xe,Ce,De.alphaBlended,Re.disabled,_s(fe,e.Color.transparent,Ct),"$debug",L.debugBuffer,L.quadTriangleIndexBuffer,L.debugSegments)}var uo={symbol:function(L,P,F,H,oe){if("translucent"===L.renderPass){var fe=ke.disabled,ge=L.colorModeForRenderPass();F.layout.get("text-variable-anchor")&&function(xe,Ce,Ge,Xe,ot,Mt,It){for(var Ct=Ce.transform,Lt="map"===ot,Tt="map"===Mt,Ht=0,jt=xe;Ht<jt.length;Ht+=1){var Wt=jt[Ht],cr=Xe.getTile(Wt),br=cr.getBucket(Ge);if(br&&br.text&&br.text.segments.get().length){var Or=e.evaluateSizeForZoom(br.textSizeData,Ct.zoom),sn=Pr(cr,1,Ce.transform.zoom),on=Tr(Wt.posMatrix,Tt,Lt,Ce.transform,sn),Mn="none"!==Ge.layout.get("icon-text-fit")&&br.hasIconData();if(Or){var xn=Math.pow(2,Ct.zoom-cr.tileID.overscaledZ);Tn(br,Lt,Tt,It,e.symbolSize,Ct,on,Wt.posMatrix,xn,Or,Mn)}}}}(H,L,F,P,F.layout.get("text-rotation-alignment"),F.layout.get("text-pitch-alignment"),oe),0!==F.paint.get("icon-opacity").constantOr(1)&&Wn(L,P,F,H,!1,F.paint.get("icon-translate"),F.paint.get("icon-translate-anchor"),F.layout.get("icon-rotation-alignment"),F.layout.get("icon-pitch-alignment"),F.layout.get("icon-keep-upright"),fe,ge),0!==F.paint.get("text-opacity").constantOr(1)&&Wn(L,P,F,H,!0,F.paint.get("text-translate"),F.paint.get("text-translate-anchor"),F.layout.get("text-rotation-alignment"),F.layout.get("text-pitch-alignment"),F.layout.get("text-keep-upright"),fe,ge),P.map.showCollisionBoxes&&(Cr(L,P,F,H,F.paint.get("text-translate"),F.paint.get("text-translate-anchor"),!0),Cr(L,P,F,H,F.paint.get("icon-translate"),F.paint.get("icon-translate-anchor"),!1))}},circle:function(L,P,F,H){if("translucent"===L.renderPass){var oe=F.paint.get("circle-opacity"),fe=F.paint.get("circle-stroke-width"),ge=F.paint.get("circle-stroke-opacity"),xe=void 0!==F.layout.get("circle-sort-key").constantOr(1);if(0!==oe.constantOr(1)||0!==fe.constantOr(1)&&0!==ge.constantOr(1)){for(var Ce=L.context,Ge=Ce.gl,Xe=L.depthModeForSublayer(0,it.ReadOnly),ot=ke.disabled,Mt=L.colorModeForRenderPass(),It=[],Ct=0;Ct<H.length;Ct++){var Lt=H[Ct],Tt=P.getTile(Lt),Ht=Tt.getBucket(F);if(Ht){var jt=Ht.programConfigurations.get(F.id),Wt={programConfiguration:jt,program:L.useProgram("circle",jt),layoutVertexBuffer:Ht.layoutVertexBuffer,indexBuffer:Ht.indexBuffer,uniformValues:Yo(L,Lt,Tt,F)};if(xe)for(var cr=0,br=Ht.segments.get();cr<br.length;cr+=1){var zr=br[cr];It.push({segments:new e.SegmentVector([zr]),sortKey:zr.sortKey,state:Wt})}else It.push({segments:Ht.segments,sortKey:0,state:Wt})}}xe&&It.sort(function(oi,ni){return oi.sortKey-ni.sortKey});for(var Or=0,sn=It;Or<sn.length;Or+=1){var on=sn[Or],Mn=on.state;Mn.program.draw(Ce,Ge.TRIANGLES,Xe,ot,Mt,Re.disabled,Mn.uniformValues,F.id,Mn.layoutVertexBuffer,Mn.indexBuffer,on.segments,F.paint,L.transform.zoom,Mn.programConfiguration)}}}},heatmap:function(L,P,F,H){if(0!==F.paint.get("heatmap-opacity"))if("offscreen"===L.renderPass){var oe=L.context,fe=oe.gl,ge=ke.disabled,xe=new De([fe.ONE,fe.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(Lt,Tt,Ht){var jt=Lt.gl;Lt.activeTexture.set(jt.TEXTURE1),Lt.viewport.set([0,0,Tt.width/4,Tt.height/4]);var br,zr,Or,sn,on,Wt=Ht.heatmapFbo;if(Wt)jt.bindTexture(jt.TEXTURE_2D,Wt.colorAttachment.get()),Lt.bindFramebuffer.set(Wt.framebuffer);else{var cr=jt.createTexture();jt.bindTexture(jt.TEXTURE_2D,cr),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_WRAP_S,jt.CLAMP_TO_EDGE),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_WRAP_T,jt.CLAMP_TO_EDGE),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_MIN_FILTER,jt.LINEAR),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_MAG_FILTER,jt.LINEAR),Or=cr,sn=Wt=Ht.heatmapFbo=Lt.createFramebuffer(Tt.width/4,Tt.height/4,!1),(on=(br=Lt).gl).texImage2D(on.TEXTURE_2D,0,on.RGBA,(zr=Tt).width/4,zr.height/4,0,on.RGBA,br.extRenderToTextureHalfFloat?br.extTextureHalfFloat.HALF_FLOAT_OES:on.UNSIGNED_BYTE,null),sn.colorAttachment.set(Or)}})(oe,L,F),oe.clear({color:e.Color.transparent});for(var Ce=0;Ce<H.length;Ce++){var Ge=H[Ce];if(!P.hasRenderableParent(Ge)){var Xe=P.getTile(Ge),ot=Xe.getBucket(F);if(ot){var Mt=ot.programConfigurations.get(F.id);L.useProgram("heatmap",Mt).draw(oe,fe.TRIANGLES,it.disabled,ge,xe,Re.disabled,Wo(Ge.posMatrix,Xe,L.transform.zoom,F.paint.get("heatmap-intensity")),F.id,ot.layoutVertexBuffer,ot.indexBuffer,ot.segments,F.paint,L.transform.zoom,Mt)}}}oe.viewport.set([0,0,L.width,L.height])}else"translucent"===L.renderPass&&(L.context.setColorMode(L.colorModeForRenderPass()),function(Lt,Tt){var Ht=Lt.context,jt=Ht.gl,Wt=Tt.heatmapFbo;if(Wt){Ht.activeTexture.set(jt.TEXTURE0),jt.bindTexture(jt.TEXTURE_2D,Wt.colorAttachment.get()),Ht.activeTexture.set(jt.TEXTURE1);var cr=Tt.colorRampTexture;cr||(cr=Tt.colorRampTexture=new e.Texture(Ht,Tt.colorRamp,jt.RGBA)),cr.bind(jt.LINEAR,jt.CLAMP_TO_EDGE),Lt.useProgram("heatmapTexture").draw(Ht,jt.TRIANGLES,it.disabled,ke.disabled,Lt.colorModeForRenderPass(),Re.disabled,function(br,zr,Or,sn){var on=e.create();e.ortho(on,0,br.width,br.height,0,0,1);var Mn=br.context.gl;return{u_matrix:on,u_world:[Mn.drawingBufferWidth,Mn.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:zr.paint.get("heatmap-opacity")}}(Lt,Tt),Tt.id,Lt.viewportBuffer,Lt.quadTriangleIndexBuffer,Lt.viewportSegments,Tt.paint,Lt.transform.zoom)}}(L,F))},line:function(L,P,F,H){if("translucent"===L.renderPass){var oe=F.paint.get("line-opacity"),fe=F.paint.get("line-width");if(0!==oe.constantOr(1)&&0!==fe.constantOr(1)){var ge=L.depthModeForSublayer(0,it.ReadOnly),xe=L.colorModeForRenderPass(),Ce=F.paint.get("line-dasharray"),Ge=F.paint.get("line-pattern"),Xe=Ge.constantOr(1),ot=F.paint.get("line-gradient"),Mt=F.getCrossfadeParameters(),It=Xe?"linePattern":Ce?"lineSDF":ot?"lineGradient":"line",Ct=L.context,Lt=Ct.gl,Tt=!0;if(ot){Ct.activeTexture.set(Lt.TEXTURE0);var Ht=F.gradientTexture;if(!F.gradient)return;Ht||(Ht=F.gradientTexture=new e.Texture(Ct,F.gradient,Lt.RGBA)),Ht.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE)}for(var jt=0,Wt=H;jt<Wt.length;jt+=1){var cr=Wt[jt],br=P.getTile(cr);if(!Xe||br.patternsLoaded()){var zr=br.getBucket(F);if(zr){var Or=zr.programConfigurations.get(F.id),sn=L.context.program.get(),on=L.useProgram(It,Or),Mn=Tt||on.program!==sn,xn=Ge.constantOr(null);if(xn&&br.imageAtlas){var Kn=br.imageAtlas,ai=Kn.patternPositions[xn.to.toString()],_i=Kn.patternPositions[xn.from.toString()];ai&&_i&&Or.setConstantPatternPositions(ai,_i)}var Jr=Xe?Ve(L,br,F,Mt):Ce?qe(L,br,F,Ce,Mt):ot?na(L,br,F):So(L,br,F);Xe?(Ct.activeTexture.set(Lt.TEXTURE0),br.imageAtlasTexture.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE),Or.updatePaintBuffers(Mt)):Ce&&(Mn||L.lineAtlas.dirty)&&(Ct.activeTexture.set(Lt.TEXTURE0),L.lineAtlas.bind(Ct)),on.draw(Ct,Lt.TRIANGLES,ge,L.stencilModeForClipping(cr),xe,Re.disabled,Jr,F.id,zr.layoutVertexBuffer,zr.indexBuffer,zr.segments,F.paint,L.transform.zoom,Or),Tt=!1}}}}}},fill:function(L,P,F,H){var oe=F.paint.get("fill-color"),fe=F.paint.get("fill-opacity");if(0!==fe.constantOr(1)){var ge=L.colorModeForRenderPass(),xe=F.paint.get("fill-pattern"),Ce=L.opaquePassEnabledForLayer()&&!xe.constantOr(1)&&1===oe.constantOr(e.Color.transparent).a&&1===fe.constantOr(0)?"opaque":"translucent";if(L.renderPass===Ce){var Ge=L.depthModeForSublayer(1,"opaque"===L.renderPass?it.ReadWrite:it.ReadOnly);Yn(L,P,F,H,Ge,ge,!1)}if("translucent"===L.renderPass&&F.paint.get("fill-antialias")){var Xe=L.depthModeForSublayer(F.getPaintProperty("fill-outline-color")?2:0,it.ReadOnly);Yn(L,P,F,H,Xe,ge,!0)}}},"fill-extrusion":function(L,P,F,H){var oe=F.paint.get("fill-extrusion-opacity");if(0!==oe&&"translucent"===L.renderPass){var fe=new it(L.context.gl.LEQUAL,it.ReadWrite,L.depthRangeFor3D);if(1!==oe||F.paint.get("fill-extrusion-pattern").constantOr(1))Si(L,P,F,H,fe,ke.disabled,De.disabled),Si(L,P,F,H,fe,L.stencilModeFor3D(),L.colorModeForRenderPass());else{var ge=L.colorModeForRenderPass();Si(L,P,F,H,fe,ke.disabled,ge)}}},hillshade:function(L,P,F,H){if("offscreen"===L.renderPass||"translucent"===L.renderPass){for(var oe=L.context,fe=P.getSource().maxzoom,ge=L.depthModeForSublayer(0,it.ReadOnly),xe=L.colorModeForRenderPass(),Ce="translucent"===L.renderPass?L.stencilConfigForOverlap(H):[{},H],Ge=Ce[0],Xe=0,ot=Ce[1];Xe<ot.length;Xe+=1){var Mt=ot[Xe],It=P.getTile(Mt);It.needsHillshadePrepare&&"offscreen"===L.renderPass?Ki(L,It,F,fe,ge,ke.disabled,xe):"translucent"===L.renderPass&&Ri(L,It,F,ge,Ge[Mt.overscaledZ],xe)}oe.viewport.set([0,0,L.width,L.height])}},raster:function(L,P,F,H){if("translucent"===L.renderPass&&0!==F.paint.get("raster-opacity")&&H.length)for(var oe=L.context,fe=oe.gl,ge=P.getSource(),xe=L.useProgram("raster"),Ce=L.colorModeForRenderPass(),Ge=ge instanceof q?[{},H]:L.stencilConfigForOverlap(H),Xe=Ge[0],ot=Ge[1],Mt=ot[ot.length-1].overscaledZ,It=!L.options.moving,Ct=0,Lt=ot;Ct<Lt.length;Ct+=1){var Tt=Lt[Ct],Ht=L.depthModeForSublayer(Tt.overscaledZ-Mt,1===F.paint.get("raster-opacity")?it.ReadWrite:it.ReadOnly,fe.LESS),jt=P.getTile(Tt),Wt=L.transform.calculatePosMatrix(Tt.toUnwrapped(),It);jt.registerFadeDuration(F.paint.get("raster-fade-duration"));var cr=P.findLoadedParent(Tt,0),br=Zi(jt,cr,P,F,L.transform),zr=void 0,Or=void 0,sn="nearest"===F.paint.get("raster-resampling")?fe.NEAREST:fe.LINEAR;oe.activeTexture.set(fe.TEXTURE0),jt.texture.bind(sn,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST),oe.activeTexture.set(fe.TEXTURE1),cr?(cr.texture.bind(sn,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST),zr=Math.pow(2,cr.tileID.overscaledZ-jt.tileID.overscaledZ),Or=[jt.tileID.canonical.x*zr%1,jt.tileID.canonical.y*zr%1]):jt.texture.bind(sn,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST);var on=wt(Wt,Or||[0,0],zr||1,br,F);ge instanceof q?xe.draw(oe,fe.TRIANGLES,Ht,ke.disabled,Ce,Re.disabled,on,F.id,ge.boundsBuffer,L.quadTriangleIndexBuffer,ge.boundsSegments):xe.draw(oe,fe.TRIANGLES,Ht,Xe[Tt.overscaledZ],Ce,Re.disabled,on,F.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments)}},background:function(L,P,F){var H=F.paint.get("background-color"),oe=F.paint.get("background-opacity");if(0!==oe){var fe=L.context,ge=fe.gl,xe=L.transform,Ce=xe.tileSize,Ge=F.paint.get("background-pattern");if(!L.isPatternMissing(Ge)){var Xe=!Ge&&1===H.a&&1===oe&&L.opaquePassEnabledForLayer()?"opaque":"translucent";if(L.renderPass===Xe){var ot=ke.disabled,Mt=L.depthModeForSublayer(0,"opaque"===Xe?it.ReadWrite:it.ReadOnly),It=L.colorModeForRenderPass(),Ct=L.useProgram(Ge?"backgroundPattern":"background"),Lt=xe.coveringTiles({tileSize:Ce});Ge&&(fe.activeTexture.set(ge.TEXTURE0),L.imageManager.bind(L.context));for(var Tt=F.getCrossfadeParameters(),Ht=0,jt=Lt;Ht<jt.length;Ht+=1){var Wt=jt[Ht],cr=L.transform.calculatePosMatrix(Wt.toUnwrapped()),br=Ge?xr(cr,oe,L,Ge,{tileID:Wt,tileSize:Ce},Tt):ur(cr,oe,H);Ct.draw(fe,ge.TRIANGLES,Mt,ot,It,Re.disabled,br,F.id,L.tileExtentBuffer,L.quadTriangleIndexBuffer,L.tileExtentSegments)}}}}},debug:function(L,P,F){for(var H=0;H<F.length;H++)co(L,P,F[H])},custom:function(L,P,F){var H=L.context,oe=F.implementation;if("offscreen"===L.renderPass){var fe=oe.prerender;fe&&(L.setCustomLayerDefaults(),H.setColorMode(L.colorModeForRenderPass()),fe.call(oe,H.gl,L.transform.customLayerMatrix()),H.setDirty(),L.setBaseState())}else if("translucent"===L.renderPass){L.setCustomLayerDefaults(),H.setColorMode(L.colorModeForRenderPass()),H.setStencilMode(ke.disabled);var ge="3d"===oe.renderingMode?new it(L.context.gl.LEQUAL,it.ReadWrite,L.depthRangeFor3D):L.depthModeForSublayer(0,it.ReadOnly);H.setDepthMode(ge),oe.render(H.gl,L.transform.customLayerMatrix()),H.setDirty(),L.setBaseState(),H.bindFramebuffer.set(null)}}},Hi=function(L,P){this.context=new Ie(L),this.transform=P,this._tileTextures={},this.setup(),this.numSublayers=Ke.maxUnderzooming+Ke.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Kr,this.gpuTimers={}};Hi.prototype.resize=function(L,P){if(this.width=L*e.browser.devicePixelRatio,this.height=P*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var F=0,H=this.style._order;F<H.length;F+=1)this.style._layers[H[F]].resize()},Hi.prototype.setup=function(){var L=this.context,P=new e.StructArrayLayout2i4;P.emplaceBack(0,0),P.emplaceBack(e.EXTENT,0),P.emplaceBack(0,e.EXTENT),P.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=L.createVertexBuffer(P,En.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var F=new e.StructArrayLayout2i4;F.emplaceBack(0,0),F.emplaceBack(e.EXTENT,0),F.emplaceBack(0,e.EXTENT),F.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=L.createVertexBuffer(F,En.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var H=new e.StructArrayLayout4i8;H.emplaceBack(0,0,0,0),H.emplaceBack(e.EXTENT,0,e.EXTENT,0),H.emplaceBack(0,e.EXTENT,0,e.EXTENT),H.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=L.createVertexBuffer(H,Z.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var oe=new e.StructArrayLayout2i4;oe.emplaceBack(0,0),oe.emplaceBack(1,0),oe.emplaceBack(0,1),oe.emplaceBack(1,1),this.viewportBuffer=L.createVertexBuffer(oe,En.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var fe=new e.StructArrayLayout1ui2;fe.emplaceBack(0),fe.emplaceBack(1),fe.emplaceBack(3),fe.emplaceBack(2),fe.emplaceBack(0),this.tileBorderIndexBuffer=L.createIndexBuffer(fe);var ge=new e.StructArrayLayout3ui6;ge.emplaceBack(0,1,2),ge.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=L.createIndexBuffer(ge),this.emptyTexture=new e.Texture(L,{width:1,height:1,data:new Uint8Array([0,0,0,0])},L.gl.RGBA);var xe=this.context.gl;this.stencilClearMode=new ke({func:xe.ALWAYS,mask:0},0,255,xe.ZERO,xe.ZERO,xe.ZERO)},Hi.prototype.clearStencil=function(){var L=this.context,P=L.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var F=e.create();e.ortho(F,0,this.width,this.height,0,0,1),e.scale(F,F,[P.drawingBufferWidth,P.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(L,P.TRIANGLES,it.disabled,this.stencilClearMode,De.disabled,Re.disabled,$a(F),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Hi.prototype._renderTileClippingMasks=function(L,P){if(this.currentStencilSource!==L.source&&L.isTileClipped()&&P&&P.length){this.currentStencilSource=L.source;var F=this.context,H=F.gl;this.nextStencilID+P.length>256&&this.clearStencil(),F.setColorMode(De.disabled),F.setDepthMode(it.disabled);var oe=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var fe=0,ge=P;fe<ge.length;fe+=1){var xe=ge[fe],Ce=this._tileClippingMaskIDs[xe.key]=this.nextStencilID++;oe.draw(F,H.TRIANGLES,it.disabled,new ke({func:H.ALWAYS,mask:0},Ce,255,H.KEEP,H.KEEP,H.REPLACE),De.disabled,Re.disabled,$a(xe.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Hi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var L=this.nextStencilID++,P=this.context.gl;return new ke({func:P.NOTEQUAL,mask:255},L,255,P.KEEP,P.KEEP,P.REPLACE)},Hi.prototype.stencilModeForClipping=function(L){var P=this.context.gl;return new ke({func:P.EQUAL,mask:255},this._tileClippingMaskIDs[L.key],0,P.KEEP,P.KEEP,P.REPLACE)},Hi.prototype.stencilConfigForOverlap=function(L){var P,F=this.context.gl,H=L.sort(function(Ce,Ge){return Ge.overscaledZ-Ce.overscaledZ}),oe=H[H.length-1].overscaledZ,fe=H[0].overscaledZ-oe+1;if(fe>1){this.currentStencilSource=void 0,this.nextStencilID+fe>256&&this.clearStencil();for(var ge={},xe=0;xe<fe;xe++)ge[xe+oe]=new ke({func:F.GEQUAL,mask:255},xe+this.nextStencilID,255,F.KEEP,F.KEEP,F.REPLACE);return this.nextStencilID+=fe,[ge,H]}return[(P={},P[oe]=ke.disabled,P),H]},Hi.prototype.colorModeForRenderPass=function(){var L=this.context.gl;return this._showOverdrawInspector?new De([L.CONSTANT_COLOR,L.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?De.unblended:De.alphaBlended},Hi.prototype.depthModeForSublayer=function(L,P,F){if(!this.opaquePassEnabledForLayer())return it.disabled;var H=1-((1+this.currentLayer)*this.numSublayers+L)*this.depthEpsilon;return new it(F||this.context.gl.LEQUAL,P,[H,H])},Hi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Hi.prototype.render=function(L,P){var F=this;this.style=L,this.options=P,this.lineAtlas=L.lineAtlas,this.imageManager=L.imageManager,this.glyphManager=L.glyphManager,this.symbolFadeChange=L.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var H=this.style._order,oe=this.style.sourceCaches;for(var fe in oe){var ge=oe[fe];ge.used&&ge.prepare(this.context)}var xe,Ce,Ge={},Xe={},ot={};for(var Mt in oe){var It=oe[Mt];Ge[Mt]=It.getVisibleCoordinates(),Xe[Mt]=Ge[Mt].slice().reverse(),ot[Mt]=It.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Ct=0;Ct<H.length;Ct++)if(this.style._layers[H[Ct]].is3D()){this.opaquePassCutoff=Ct;break}this.renderPass="offscreen";for(var Tt=0,Ht=H;Tt<Ht.length;Tt+=1){var Wt=this.style._layers[Ht[Tt]];if(Wt.hasOffscreenPass()&&!Wt.isHidden(this.transform.zoom)){var cr=Xe[Wt.source];("custom"===Wt.type||cr.length)&&this.renderLayer(this,oe[Wt.source],Wt,cr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:P.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=P.showOverdrawInspector,this.depthRangeFor3D=[0,1-(L._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=H.length-1;this.currentLayer>=0;this.currentLayer--){var br=this.style._layers[H[this.currentLayer]],zr=oe[br.source],Or=Ge[br.source];this._renderTileClippingMasks(br,Or),this.renderLayer(this,zr,br,Or)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<H.length;this.currentLayer++){var sn=this.style._layers[H[this.currentLayer]],on=oe[sn.source],Mn=("symbol"===sn.type?ot:Xe)[sn.source];this._renderTileClippingMasks(sn,Ge[sn.source]),this.renderLayer(this,on,sn,Mn)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(xn){xn.source&&!xn.isHidden(F.transform.zoom)&&(xn.source!==(Ce&&Ce.id)&&(Ce=F.style.sourceCaches[xn.source]),(!xe||xe.getSource().maxzoom<Ce.getSource().maxzoom)&&(xe=Ce))}),xe&&uo.debug(this,xe,xe.getVisibleCoordinates())),this.options.showPadding&&function(L){var P=L.transform.padding;Xa(L,L.transform.height-(P.top||0),3,ea),Xa(L,P.bottom||0,3,Oa),so(L,P.left||0,3,Ia),so(L,L.transform.width-(P.right||0),3,ya);var H,oe,fe,ge,F=L.transform.centerPoint;lo(H=L,(oe=F.x)-1,(fe=L.transform.height-F.y)-10,2,20,ge=xa),lo(H,oe-10,fe-1,20,2,ge)}(this),this.context.setDefault()},Hi.prototype.renderLayer=function(L,P,F,H){F.isHidden(this.transform.zoom)||("background"===F.type||"custom"===F.type||H.length)&&(this.id=F.id,this.gpuTimingStart(F),uo[F.type](L,P,F,H,this.style.placement.variableOffsets),this.gpuTimingEnd())},Hi.prototype.gpuTimingStart=function(L){if(this.options.gpuTiming){var P=this.context.extTimerQuery,F=this.gpuTimers[L.id];F||(F=this.gpuTimers[L.id]={calls:0,cpuTime:0,query:P.createQueryEXT()}),F.calls++,P.beginQueryEXT(P.TIME_ELAPSED_EXT,F.query)}},Hi.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var L=this.context.extTimerQuery;L.endQueryEXT(L.TIME_ELAPSED_EXT)}},Hi.prototype.collectGpuTimers=function(){var L=this.gpuTimers;return this.gpuTimers={},L},Hi.prototype.queryGpuTimers=function(L){var P={};for(var F in L){var H=L[F],oe=this.context.extTimerQuery,fe=oe.getQueryObjectEXT(H.query,oe.QUERY_RESULT_EXT)/1e6;oe.deleteQueryEXT(H.query),P[F]=fe}return P},Hi.prototype.translatePosMatrix=function(L,P,F,H,oe){if(!F[0]&&!F[1])return L;var fe=oe?"map"===H?this.transform.angle:0:"viewport"===H?-this.transform.angle:0;if(fe){var ge=Math.sin(fe),xe=Math.cos(fe);F=[F[0]*xe-F[1]*ge,F[0]*ge+F[1]*xe]}var Ce=[oe?F[0]:Pr(P,F[0],this.transform.zoom),oe?F[1]:Pr(P,F[1],this.transform.zoom),0],Ge=new Float32Array(16);return e.translate(Ge,L,Ce),Ge},Hi.prototype.saveTileTexture=function(L){var P=this._tileTextures[L.size[0]];P?P.push(L):this._tileTextures[L.size[0]]=[L]},Hi.prototype.getTileTexture=function(L){var P=this._tileTextures[L];return P&&P.length>0?P.pop():null},Hi.prototype.isPatternMissing=function(L){if(!L)return!1;if(!L.from||!L.to)return!0;var P=this.imageManager.getPattern(L.from.toString()),F=this.imageManager.getPattern(L.to.toString());return!P||!F},Hi.prototype.useProgram=function(L,P){this.cache=this.cache||{};var F=""+L+(P?P.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[F]||(this.cache[F]=new Ls(this.context,Es[L],P,kr[L],this._showOverdrawInspector)),this.cache[F]},Hi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Hi.prototype.setBaseState=function(){var L=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(L.FUNC_ADD)},Hi.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Hi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var mt=function(L,P){this.points=L,this.planes=P};mt.fromInvProjectionMatrix=function(L,P,F){var H=Math.pow(2,F),oe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ge){return e.transformMat4([],ge,L)}).map(function(ge){return e.scale$1([],ge,1/ge[3]/P*H)}),fe=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ge){var xe=e.sub([],oe[ge[0]],oe[ge[1]]),Ce=e.sub([],oe[ge[2]],oe[ge[1]]),Ge=e.normalize([],e.cross([],xe,Ce)),Xe=-e.dot(Ge,oe[ge[1]]);return Ge.concat(Xe)});return new mt(oe,fe)};var Vt=function(L,P){this.min=L,this.max=P,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};Vt.prototype.quadrant=function(L){for(var P=[L%2==0,L<2],F=e.clone$2(this.min),H=e.clone$2(this.max),oe=0;oe<P.length;oe++)F[oe]=P[oe]?this.min[oe]:this.center[oe],H[oe]=P[oe]?this.center[oe]:this.max[oe];return H[2]=this.max[2],new Vt(F,H)},Vt.prototype.distanceX=function(L){return Math.max(Math.min(this.max[0],L[0]),this.min[0])-L[0]},Vt.prototype.distanceY=function(L){return Math.max(Math.min(this.max[1],L[1]),this.min[1])-L[1]},Vt.prototype.intersects=function(L){for(var P=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],F=!0,H=0;H<L.planes.length;H++){for(var oe=L.planes[H],fe=0,ge=0;ge<P.length;ge++)fe+=e.dot$1(oe,P[ge])>=0;if(0===fe)return 0;fe!==P.length&&(F=!1)}if(F)return 2;for(var xe=0;xe<3;xe++){for(var Ce=Number.MAX_VALUE,Ge=-Number.MAX_VALUE,Xe=0;Xe<L.points.length;Xe++){var ot=L.points[Xe][xe]-this.min[xe];Ce=Math.min(Ce,ot),Ge=Math.max(Ge,ot)}if(Ge<0||Ce>this.max[xe]-this.min[xe])return 0}return 1};var pr=function(L,P,F,H){if(void 0===L&&(L=0),void 0===P&&(P=0),void 0===F&&(F=0),void 0===H&&(H=0),isNaN(L)||L<0||isNaN(P)||P<0||isNaN(F)||F<0||isNaN(H)||H<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=L,this.bottom=P,this.left=F,this.right=H};pr.prototype.interpolate=function(L,P,F){return null!=P.top&&null!=L.top&&(this.top=e.number(L.top,P.top,F)),null!=P.bottom&&null!=L.bottom&&(this.bottom=e.number(L.bottom,P.bottom,F)),null!=P.left&&null!=L.left&&(this.left=e.number(L.left,P.left,F)),null!=P.right&&null!=L.right&&(this.right=e.number(L.right,P.right,F)),this},pr.prototype.getCenter=function(L,P){var F=e.clamp((this.left+L-this.right)/2,0,L),H=e.clamp((this.top+P-this.bottom)/2,0,P);return new e.Point(F,H)},pr.prototype.equals=function(L){return this.top===L.top&&this.bottom===L.bottom&&this.left===L.left&&this.right===L.right},pr.prototype.clone=function(){return new pr(this.top,this.bottom,this.left,this.right)},pr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Jt=function(L,P,F,H,oe){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===oe||oe,this._minZoom=L||0,this._maxZoom=P||22,this._minPitch=null==F?0:F,this._maxPitch=null==H?60:H,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new pr,this._posMatrixCache={},this._alignedPosMatrixCache={}},gr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Jt.prototype.clone=function(){var L=new Jt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return L.tileSize=this.tileSize,L.latRange=this.latRange,L.width=this.width,L.height=this.height,L._center=this._center,L.zoom=this.zoom,L.angle=this.angle,L._fov=this._fov,L._pitch=this._pitch,L._unmodified=this._unmodified,L._edgeInsets=this._edgeInsets.clone(),L._calcMatrices(),L},gr.minZoom.get=function(){return this._minZoom},gr.minZoom.set=function(L){this._minZoom!==L&&(this._minZoom=L,this.zoom=Math.max(this.zoom,L))},gr.maxZoom.get=function(){return this._maxZoom},gr.maxZoom.set=function(L){this._maxZoom!==L&&(this._maxZoom=L,this.zoom=Math.min(this.zoom,L))},gr.minPitch.get=function(){return this._minPitch},gr.minPitch.set=function(L){this._minPitch!==L&&(this._minPitch=L,this.pitch=Math.max(this.pitch,L))},gr.maxPitch.get=function(){return this._maxPitch},gr.maxPitch.set=function(L){this._maxPitch!==L&&(this._maxPitch=L,this.pitch=Math.min(this.pitch,L))},gr.renderWorldCopies.get=function(){return this._renderWorldCopies},gr.renderWorldCopies.set=function(L){void 0===L?L=!0:null===L&&(L=!1),this._renderWorldCopies=L},gr.worldSize.get=function(){return this.tileSize*this.scale},gr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},gr.size.get=function(){return new e.Point(this.width,this.height)},gr.bearing.get=function(){return-this.angle/Math.PI*180},gr.bearing.set=function(L){var P=-e.wrap(L,-180,180)*Math.PI/180;this.angle!==P&&(this._unmodified=!1,this.angle=P,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},gr.pitch.get=function(){return this._pitch/Math.PI*180},gr.pitch.set=function(L){var P=e.clamp(L,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==P&&(this._unmodified=!1,this._pitch=P,this._calcMatrices())},gr.fov.get=function(){return this._fov/Math.PI*180},gr.fov.set=function(L){L=Math.max(.01,Math.min(60,L)),this._fov!==L&&(this._unmodified=!1,this._fov=L/180*Math.PI,this._calcMatrices())},gr.zoom.get=function(){return this._zoom},gr.zoom.set=function(L){var P=Math.min(Math.max(L,this.minZoom),this.maxZoom);this._zoom!==P&&(this._unmodified=!1,this._zoom=P,this.scale=this.zoomScale(P),this.tileZoom=Math.floor(P),this.zoomFraction=P-this.tileZoom,this._constrain(),this._calcMatrices())},gr.center.get=function(){return this._center},gr.center.set=function(L){L.lat===this._center.lat&&L.lng===this._center.lng||(this._unmodified=!1,this._center=L,this._constrain(),this._calcMatrices())},gr.padding.get=function(){return this._edgeInsets.toJSON()},gr.padding.set=function(L){this._edgeInsets.equals(L)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,L,1),this._calcMatrices())},gr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Jt.prototype.isPaddingEqual=function(L){return this._edgeInsets.equals(L)},Jt.prototype.interpolatePadding=function(L,P,F){this._unmodified=!1,this._edgeInsets.interpolate(L,P,F),this._constrain(),this._calcMatrices()},Jt.prototype.coveringZoomLevel=function(L){var P=(L.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/L.tileSize));return Math.max(0,P)},Jt.prototype.getVisibleUnwrappedCoordinates=function(L){var P=[new e.UnwrappedTileID(0,L)];if(this._renderWorldCopies)for(var F=this.pointCoordinate(new e.Point(0,0)),H=this.pointCoordinate(new e.Point(this.width,0)),oe=this.pointCoordinate(new e.Point(this.width,this.height)),fe=this.pointCoordinate(new e.Point(0,this.height)),ge=Math.floor(Math.min(F.x,H.x,oe.x,fe.x)),xe=Math.floor(Math.max(F.x,H.x,oe.x,fe.x)),Ce=ge-1;Ce<=xe+1;Ce++)0!==Ce&&P.push(new e.UnwrappedTileID(Ce,L));return P},Jt.prototype.coveringTiles=function(L){var P=this.coveringZoomLevel(L),F=P;if(void 0!==L.minzoom&&P<L.minzoom)return[];void 0!==L.maxzoom&&P>L.maxzoom&&(P=L.maxzoom);var H=e.MercatorCoordinate.fromLngLat(this.center),oe=Math.pow(2,P),fe=[oe*H.x,oe*H.y,0],ge=mt.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,P),xe=L.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(xe=P);var Ce=function(Mn){return{aabb:new Vt([Mn*oe,0,0],[(Mn+1)*oe,oe,0]),zoom:0,x:0,y:0,wrap:Mn,fullyVisible:!1}},Ge=[],Xe=[],ot=P,Mt=L.reparseOverscaled?F:P;if(this._renderWorldCopies)for(var It=1;It<=3;It++)Ge.push(Ce(-It)),Ge.push(Ce(It));for(Ge.push(Ce(0));Ge.length>0;){var Ct=Ge.pop(),Lt=Ct.x,Tt=Ct.y,Ht=Ct.fullyVisible;if(!Ht){var jt=Ct.aabb.intersects(ge);if(0===jt)continue;Ht=2===jt}var Wt=Ct.aabb.distanceX(fe),cr=Ct.aabb.distanceY(fe),br=Math.max(Math.abs(Wt),Math.abs(cr));if(Ct.zoom===ot||br>3+(1<<ot-Ct.zoom)-2&&Ct.zoom>=xe)Xe.push({tileID:new e.OverscaledTileID(Ct.zoom===ot?Mt:Ct.zoom,Ct.wrap,Ct.zoom,Lt,Tt),distanceSq:e.sqrLen([fe[0]-.5-Lt,fe[1]-.5-Tt])});else for(var Or=0;Or<4;Or++){var sn=(Lt<<1)+Or%2,on=(Tt<<1)+(Or>>1);Ge.push({aabb:Ct.aabb.quadrant(Or),zoom:Ct.zoom+1,x:sn,y:on,wrap:Ct.wrap,fullyVisible:Ht})}}return Xe.sort(function(Mn,xn){return Mn.distanceSq-xn.distanceSq}).map(function(Mn){return Mn.tileID})},Jt.prototype.resize=function(L,P){this.width=L,this.height=P,this.pixelsToGLUnits=[2/L,-2/P],this._constrain(),this._calcMatrices()},gr.unmodified.get=function(){return this._unmodified},Jt.prototype.zoomScale=function(L){return Math.pow(2,L)},Jt.prototype.scaleZoom=function(L){return Math.log(L)/Math.LN2},Jt.prototype.project=function(L){var P=e.clamp(L.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(L.lng)*this.worldSize,e.mercatorYfromLat(P)*this.worldSize)},Jt.prototype.unproject=function(L){return new e.MercatorCoordinate(L.x/this.worldSize,L.y/this.worldSize).toLngLat()},gr.point.get=function(){return this.project(this.center)},Jt.prototype.setLocationAtPoint=function(L,P){var F=this.pointCoordinate(P),H=this.pointCoordinate(this.centerPoint),oe=this.locationCoordinate(L),fe=new e.MercatorCoordinate(oe.x-(F.x-H.x),oe.y-(F.y-H.y));this.center=this.coordinateLocation(fe),this._renderWorldCopies&&(this.center=this.center.wrap())},Jt.prototype.locationPoint=function(L){return this.coordinatePoint(this.locationCoordinate(L))},Jt.prototype.pointLocation=function(L){return this.coordinateLocation(this.pointCoordinate(L))},Jt.prototype.locationCoordinate=function(L){return e.MercatorCoordinate.fromLngLat(L)},Jt.prototype.coordinateLocation=function(L){return L.toLngLat()},Jt.prototype.pointCoordinate=function(L){var P=[L.x,L.y,0,1],F=[L.x,L.y,1,1];e.transformMat4(P,P,this.pixelMatrixInverse),e.transformMat4(F,F,this.pixelMatrixInverse);var H=P[3],oe=F[3],xe=P[1]/H,Ce=F[1]/oe,Ge=P[2]/H,Xe=F[2]/oe,ot=Ge===Xe?0:(0-Ge)/(Xe-Ge);return new e.MercatorCoordinate(e.number(P[0]/H,F[0]/oe,ot)/this.worldSize,e.number(xe,Ce,ot)/this.worldSize)},Jt.prototype.coordinatePoint=function(L){var P=[L.x*this.worldSize,L.y*this.worldSize,0,1];return e.transformMat4(P,P,this.pixelMatrix),new e.Point(P[0]/P[3],P[1]/P[3])},Jt.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Jt.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Jt.prototype.setMaxBounds=function(L){L?(this.lngRange=[L.getWest(),L.getEast()],this.latRange=[L.getSouth(),L.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Jt.prototype.calculatePosMatrix=function(L,P){void 0===P&&(P=!1);var F=L.key,H=P?this._alignedPosMatrixCache:this._posMatrixCache;if(H[F])return H[F];var oe=L.canonical,fe=this.worldSize/this.zoomScale(oe.z),ge=oe.x+Math.pow(2,oe.z)*L.wrap,xe=e.identity(new Float64Array(16));return e.translate(xe,xe,[ge*fe,oe.y*fe,0]),e.scale(xe,xe,[fe/e.EXTENT,fe/e.EXTENT,1]),e.multiply(xe,P?this.alignedProjMatrix:this.projMatrix,xe),H[F]=new Float32Array(xe),H[F]},Jt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Jt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var L,P,F,H,oe=-90,fe=90,ge=-180,xe=180,Ce=this.size,Ge=this._unmodified;if(this.latRange){var Xe=this.latRange;oe=e.mercatorYfromLat(Xe[1])*this.worldSize,L=(fe=e.mercatorYfromLat(Xe[0])*this.worldSize)-oe<Ce.y?Ce.y/(fe-oe):0}if(this.lngRange){var ot=this.lngRange;ge=e.mercatorXfromLng(ot[0])*this.worldSize,P=(xe=e.mercatorXfromLng(ot[1])*this.worldSize)-ge<Ce.x?Ce.x/(xe-ge):0}var Mt=this.point,It=Math.max(P||0,L||0);if(It)return this.center=this.unproject(new e.Point(P?(xe+ge)/2:Mt.x,L?(fe+oe)/2:Mt.y)),this.zoom+=this.scaleZoom(It),this._unmodified=Ge,void(this._constraining=!1);if(this.latRange){var Ct=Mt.y,Lt=Ce.y/2;Ct-Lt<oe&&(H=oe+Lt),Ct+Lt>fe&&(H=fe-Lt)}if(this.lngRange){var Tt=Mt.x,Ht=Ce.x/2;Tt-Ht<ge&&(F=ge+Ht),Tt+Ht>xe&&(F=xe-Ht)}void 0===F&&void 0===H||(this.center=this.unproject(new e.Point(void 0!==F?F:Mt.x,void 0!==H?H:Mt.y))),this._unmodified=Ge,this._constraining=!1}},Jt.prototype._calcMatrices=function(){if(this.height){var P=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var F=Math.PI/2+this._pitch,H=this._fov*(.5+P.y/this.height),oe=Math.sin(H)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-F-H,.01,Math.PI-.01)),fe=this.point,ge=fe.x,xe=fe.y,Ce=1.01*(Math.cos(Math.PI/2-this._pitch)*oe+this.cameraToCenterDistance),Ge=this.height/50,Xe=new Float64Array(16);e.perspective(Xe,this._fov,this.width/this.height,Ge,Ce),Xe[8]=2*-P.x/this.width,Xe[9]=2*P.y/this.height,e.scale(Xe,Xe,[1,-1,1]),e.translate(Xe,Xe,[0,0,-this.cameraToCenterDistance]),e.rotateX(Xe,Xe,this._pitch),e.rotateZ(Xe,Xe,this.angle),e.translate(Xe,Xe,[-ge,-xe,0]),this.mercatorMatrix=e.scale([],Xe,[this.worldSize,this.worldSize,this.worldSize]),e.scale(Xe,Xe,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Xe,this.invProjMatrix=e.invert([],this.projMatrix);var ot=this.width%2/2,Mt=this.height%2/2,It=Math.cos(this.angle),Ct=Math.sin(this.angle),Lt=ge-Math.round(ge)+It*ot+Ct*Mt,Tt=xe-Math.round(xe)+It*Mt+Ct*ot,Ht=new Float64Array(Xe);if(e.translate(Ht,Ht,[Lt>.5?Lt-1:Lt,Tt>.5?Tt-1:Tt,0]),this.alignedProjMatrix=Ht,Xe=e.create(),e.scale(Xe,Xe,[this.width/2,-this.height/2,1]),e.translate(Xe,Xe,[1,-1,0]),this.labelPlaneMatrix=Xe,Xe=e.create(),e.scale(Xe,Xe,[1,-1,1]),e.translate(Xe,Xe,[-1,-1,0]),e.scale(Xe,Xe,[2/this.width,2/this.height,1]),this.glCoordMatrix=Xe,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Xe=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Xe,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Jt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var L=this.pointCoordinate(new e.Point(0,0)),P=[L.x*this.worldSize,L.y*this.worldSize,0,1];return e.transformMat4(P,P,this.pixelMatrix)[3]/this.cameraToCenterDistance},Jt.prototype.getCameraPoint=function(){var P=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,P))},Jt.prototype.getCameraQueryGeometry=function(L){var P=this.getCameraPoint();if(1===L.length)return[L[0],P];for(var F=P.x,H=P.y,oe=P.x,fe=P.y,ge=0,xe=L;ge<xe.length;ge+=1){var Ce=xe[ge];F=Math.min(F,Ce.x),H=Math.min(H,Ce.y),oe=Math.max(oe,Ce.x),fe=Math.max(fe,Ce.y)}return[new e.Point(F,H),new e.Point(oe,H),new e.Point(oe,fe),new e.Point(F,fe),new e.Point(F,H)]},Object.defineProperties(Jt.prototype,gr);var Br=function(L){var P,H,oe,fe;this._hashName=L&&encodeURIComponent(L),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(P=this._updateHashUnthrottled.bind(this),300,H=!1,oe=null,fe=function(){oe=null,H&&(P(),oe=setTimeout(fe,300),H=!1)},function(){return H=!0,oe||fe(),oe})};Br.prototype.addTo=function(L){return this._map=L,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Br.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Br.prototype.getHashString=function(L){var P=this._map.getCenter(),F=Math.round(100*this._map.getZoom())/100,H=Math.ceil((F*Math.LN2+Math.log(512/360/.5))/Math.LN10),oe=Math.pow(10,H),fe=Math.round(P.lng*oe)/oe,ge=Math.round(P.lat*oe)/oe,xe=this._map.getBearing(),Ce=this._map.getPitch(),Ge="";if(Ge+=L?"/"+fe+"/"+ge+"/"+F:F+"/"+ge+"/"+fe,(xe||Ce)&&(Ge+="/"+Math.round(10*xe)/10),Ce&&(Ge+="/"+Math.round(Ce)),this._hashName){var Xe=this._hashName,ot=!1,Mt=e.window.location.hash.slice(1).split("&").map(function(It){var Ct=It.split("=")[0];return Ct===Xe?(ot=!0,Ct+"="+Ge):It}).filter(function(It){return It});return ot||Mt.push(Xe+"="+Ge),"#"+Mt.join("&")}return"#"+Ge},Br.prototype._getCurrentHash=function(){var L,P=this,F=e.window.location.hash.replace("#","");return this._hashName?(F.split("&").map(function(H){return H.split("=")}).forEach(function(H){H[0]===P._hashName&&(L=H)}),(L&&L[1]||"").split("/")):F.split("/")},Br.prototype._onHashChange=function(){var L=this._getCurrentHash();if(L.length>=3&&!L.some(function(F){return isNaN(F)})){var P=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(L[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+L[2],+L[1]],zoom:+L[0],bearing:P,pitch:+(L[4]||0)}),!0}return!1},Br.prototype._updateHashUnthrottled=function(){var L=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",L)}catch(P){}};var Hr={linearity:.3,easing:e.bezier(0,0,.3,1)},en=e.extend({deceleration:2500,maxSpeed:1400},Hr),_n=e.extend({deceleration:20,maxSpeed:1400},Hr),mn=e.extend({deceleration:1e3,maxSpeed:360},Hr),Sn=e.extend({deceleration:1e3,maxSpeed:90},Hr),Rn=function(L){this._map=L,this.clear()};function bn(L,P){(!L.duration||L.duration<P.duration)&&(L.duration=P.duration,L.easing=P.easing)}function Pn(L,P,F){var H=F.maxSpeed,oe=F.linearity,fe=F.deceleration,ge=e.clamp(L*oe/(P/1e3),-H,H),xe=Math.abs(ge)/(fe*oe);return{easing:F.easing,duration:1e3*xe,amount:ge*(xe/2)}}Rn.prototype.clear=function(){this._inertiaBuffer=[]},Rn.prototype.record=function(L){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:L})},Rn.prototype._drainInertiaBuffer=function(){for(var L=this._inertiaBuffer,P=e.browser.now();L.length>0&&P-L[0].time>160;)L.shift()},Rn.prototype._onMoveEnd=function(L){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var P={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},F=0,H=this._inertiaBuffer;F<H.length;F+=1){var oe=H[F].settings;P.zoom+=oe.zoomDelta||0,P.bearing+=oe.bearingDelta||0,P.pitch+=oe.pitchDelta||0,oe.panDelta&&P.pan._add(oe.panDelta),oe.around&&(P.around=oe.around),oe.pinchAround&&(P.pinchAround=oe.pinchAround)}var fe=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ge={};if(P.pan.mag()){var xe=Pn(P.pan.mag(),fe,e.extend({},en,L||{}));ge.offset=P.pan.mult(xe.amount/P.pan.mag()),ge.center=this._map.transform.center,bn(ge,xe)}if(P.zoom){var Ce=Pn(P.zoom,fe,_n);ge.zoom=this._map.transform.zoom+Ce.amount,bn(ge,Ce)}if(P.bearing){var Ge=Pn(P.bearing,fe,mn);ge.bearing=this._map.transform.bearing+e.clamp(Ge.amount,-179,179),bn(ge,Ge)}if(P.pitch){var Xe=Pn(P.pitch,fe,Sn);ge.pitch=this._map.transform.pitch+Xe.amount,bn(ge,Xe)}if(ge.zoom||ge.bearing){var ot=void 0===P.pinchAround?P.around:P.pinchAround;ge.around=ot?this._map.unproject(ot):this._map.getCenter()}return this.clear(),e.extend(ge,{noMoveStart:!0})}};var Zn=function(L){function P(H,oe,fe,ge){void 0===ge&&(ge={});var xe=t.mousePos(oe.getCanvasContainer(),fe),Ce=oe.unproject(xe);L.call(this,H,e.extend({point:xe,lngLat:Ce,originalEvent:fe},ge)),this._defaultPrevented=!1,this.target=oe}L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P;var F={defaultPrevented:{configurable:!0}};return P.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(P.prototype,F),P}(e.Event),Qn=function(L){function P(H,oe,fe){var ge="touchend"===H?fe.changedTouches:fe.touches,xe=t.touchPos(oe.getCanvasContainer(),ge),Ce=xe.map(function(ot){return oe.unproject(ot)}),Ge=xe.reduce(function(ot,Mt,It,Ct){return ot.add(Mt.div(Ct.length))},new e.Point(0,0)),Xe=oe.unproject(Ge);L.call(this,H,{points:xe,point:Ge,lngLats:Ce,lngLat:Xe,originalEvent:fe}),this._defaultPrevented=!1}L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P;var F={defaultPrevented:{configurable:!0}};return P.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(P.prototype,F),P}(e.Event),di=function(L){function P(H,oe,fe){L.call(this,H,{originalEvent:fe}),this._defaultPrevented=!1}L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P;var F={defaultPrevented:{configurable:!0}};return P.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(P.prototype,F),P}(e.Event),rn=function(L,P){this._map=L,this._clickTolerance=P.clickTolerance};rn.prototype.reset=function(){delete this._mousedownPos},rn.prototype.wheel=function(L){return this._firePreventable(new di(L.type,this._map,L))},rn.prototype.mousedown=function(L,P){return this._mousedownPos=P,this._firePreventable(new Zn(L.type,this._map,L))},rn.prototype.mouseup=function(L){this._map.fire(new Zn(L.type,this._map,L))},rn.prototype.click=function(L,P){this._mousedownPos&&this._mousedownPos.dist(P)>=this._clickTolerance||this._map.fire(new Zn(L.type,this._map,L))},rn.prototype.dblclick=function(L){return this._firePreventable(new Zn(L.type,this._map,L))},rn.prototype.mouseover=function(L){this._map.fire(new Zn(L.type,this._map,L))},rn.prototype.mouseout=function(L){this._map.fire(new Zn(L.type,this._map,L))},rn.prototype.touchstart=function(L){return this._firePreventable(new Qn(L.type,this._map,L))},rn.prototype.touchmove=function(L){this._map.fire(new Qn(L.type,this._map,L))},rn.prototype.touchend=function(L){this._map.fire(new Qn(L.type,this._map,L))},rn.prototype.touchcancel=function(L){this._map.fire(new Qn(L.type,this._map,L))},rn.prototype._firePreventable=function(L){if(this._map.fire(L),L.defaultPrevented)return{}},rn.prototype.isEnabled=function(){return!0},rn.prototype.isActive=function(){return!1},rn.prototype.enable=function(){},rn.prototype.disable=function(){};var ui=function(L){this._map=L};ui.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ui.prototype.mousemove=function(L){this._map.fire(new Zn(L.type,this._map,L))},ui.prototype.mousedown=function(){this._delayContextMenu=!0},ui.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Zn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ui.prototype.contextmenu=function(L){this._delayContextMenu?this._contextMenuEvent=L:this._map.fire(new Zn(L.type,this._map,L)),this._map.listens("contextmenu")&&L.preventDefault()},ui.prototype.isEnabled=function(){return!0},ui.prototype.isActive=function(){return!1},ui.prototype.enable=function(){},ui.prototype.disable=function(){};var qn=function(L,P){this._map=L,this._el=L.getCanvasContainer(),this._container=L.getContainer(),this._clickTolerance=P.clickTolerance||1};function Jn(L,P){for(var F={},H=0;H<L.length;H++)F[L[H].identifier]=P[H];return F}qn.prototype.isEnabled=function(){return!!this._enabled},qn.prototype.isActive=function(){return!!this._active},qn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},qn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},qn.prototype.mousedown=function(L,P){this.isEnabled()&&L.shiftKey&&0===L.button&&(t.disableDrag(),this._startPos=this._lastPos=P,this._active=!0)},qn.prototype.mousemoveWindow=function(L,P){if(this._active){var F=P;if(!(this._lastPos.equals(F)||!this._box&&F.dist(this._startPos)<this._clickTolerance)){var H=this._startPos;this._lastPos=F,this._box||(this._box=t.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",L));var oe=Math.min(H.x,F.x),fe=Math.max(H.x,F.x),ge=Math.min(H.y,F.y),xe=Math.max(H.y,F.y);t.setTransform(this._box,"translate("+oe+"px,"+ge+"px)"),this._box.style.width=fe-oe+"px",this._box.style.height=xe-ge+"px"}}},qn.prototype.mouseupWindow=function(L,P){var F=this;if(this._active&&0===L.button){var H=this._startPos,oe=P;if(this.reset(),t.suppressClick(),H.x!==oe.x||H.y!==oe.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:L})),{cameraAnimation:function(fe){return fe.fitScreenCoordinates(H,oe,F._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",L)}},qn.prototype.keydown=function(L){this._active&&27===L.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",L))},qn.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(t.remove(this._box),this._box=null),t.enableDrag(),delete this._startPos,delete this._lastPos},qn.prototype._fireEvent=function(L,P){return this._map.fire(new e.Event(L,{originalEvent:P}))};var ci=function(L){this.reset(),this.numTouches=L.numTouches};ci.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ci.prototype.touchstart=function(L,P,F){(this.centroid||F.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=L.timeStamp),F.length===this.numTouches&&(this.centroid=function(H){for(var oe=new e.Point(0,0),fe=0,ge=H;fe<ge.length;fe+=1)oe._add(ge[fe]);return oe.div(H.length)}(P),this.touches=Jn(F,P)))},ci.prototype.touchmove=function(L,P,F){if(!this.aborted&&this.centroid){var H=Jn(F,P);for(var oe in this.touches){var ge=H[oe];(!ge||ge.dist(this.touches[oe])>30)&&(this.aborted=!0)}}},ci.prototype.touchend=function(L,P,F){if((!this.centroid||L.timeStamp-this.startTime>500)&&(this.aborted=!0),0===F.length){var H=!this.aborted&&this.centroid;if(this.reset(),H)return H}};var Ii=function(L){this.singleTap=new ci(L),this.numTaps=L.numTaps,this.reset()};Ii.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ii.prototype.touchstart=function(L,P,F){this.singleTap.touchstart(L,P,F)},Ii.prototype.touchmove=function(L,P,F){this.singleTap.touchmove(L,P,F)},Ii.prototype.touchend=function(L,P,F){var H=this.singleTap.touchend(L,P,F);if(H){var oe=L.timeStamp-this.lastTime<500,fe=!this.lastTap||this.lastTap.dist(H)<30;if(oe&&fe||this.reset(),this.count++,this.lastTime=L.timeStamp,this.lastTap=H,this.count===this.numTaps)return this.reset(),H}};var Ui=function(){this._zoomIn=new Ii({numTouches:1,numTaps:2}),this._zoomOut=new Ii({numTouches:2,numTaps:1}),this.reset()};Ui.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ui.prototype.touchstart=function(L,P,F){this._zoomIn.touchstart(L,P,F),this._zoomOut.touchstart(L,P,F)},Ui.prototype.touchmove=function(L,P,F){this._zoomIn.touchmove(L,P,F),this._zoomOut.touchmove(L,P,F)},Ui.prototype.touchend=function(L,P,F){var H=this,oe=this._zoomIn.touchend(L,P,F),fe=this._zoomOut.touchend(L,P,F);return oe?(this._active=!0,L.preventDefault(),setTimeout(function(){return H.reset()},0),{cameraAnimation:function(ge){return ge.easeTo({duration:300,zoom:ge.getZoom()+1,around:ge.unproject(oe)},{originalEvent:L})}}):fe?(this._active=!0,L.preventDefault(),setTimeout(function(){return H.reset()},0),{cameraAnimation:function(ge){return ge.easeTo({duration:300,zoom:ge.getZoom()-1,around:ge.unproject(fe)},{originalEvent:L})}}):void 0},Ui.prototype.touchcancel=function(){this.reset()},Ui.prototype.enable=function(){this._enabled=!0},Ui.prototype.disable=function(){this._enabled=!1,this.reset()},Ui.prototype.isEnabled=function(){return this._enabled},Ui.prototype.isActive=function(){return this._active};var jn=function(L){this.reset(),this._clickTolerance=L.clickTolerance||1};jn.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},jn.prototype._correctButton=function(L,P){return!1},jn.prototype._move=function(L,P){return{}},jn.prototype.mousedown=function(L,P){if(!this._lastPoint){var F=t.mouseButton(L);this._correctButton(L,F)&&(this._lastPoint=P,this._eventButton=F)}},jn.prototype.mousemoveWindow=function(L,P){var F=this._lastPoint;if(F&&(L.preventDefault(),this._moved||!(P.dist(F)<this._clickTolerance)))return this._moved=!0,this._lastPoint=P,this._move(F,P)},jn.prototype.mouseupWindow=function(L){t.mouseButton(L)===this._eventButton&&(this._moved&&t.suppressClick(),this.reset())},jn.prototype.enable=function(){this._enabled=!0},jn.prototype.disable=function(){this._enabled=!1,this.reset()},jn.prototype.isEnabled=function(){return this._enabled},jn.prototype.isActive=function(){return this._active};var Yi=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.mousedown=function(F,H){L.prototype.mousedown.call(this,F,H),this._lastPoint&&(this._active=!0)},P.prototype._correctButton=function(F,H){return 0===H&&!F.ctrlKey},P.prototype._move=function(F,H){return{around:H,panDelta:H.sub(F)}},P}(jn),Ni=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._correctButton=function(F,H){return 0===H&&F.ctrlKey||2===H},P.prototype._move=function(F,H){var oe=.8*(H.x-F.x);if(oe)return this._active=!0,{bearingDelta:oe}},P.prototype.contextmenu=function(F){F.preventDefault()},P}(jn),Mi=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype._correctButton=function(F,H){return 0===H&&F.ctrlKey||2===H},P.prototype._move=function(F,H){var oe=-.5*(H.y-F.y);if(oe)return this._active=!0,{pitchDelta:oe}},P.prototype.contextmenu=function(F){F.preventDefault()},P}(jn),Wi=function(L){this._minTouches=1,this._clickTolerance=L.clickTolerance||1,this.reset()};Wi.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},Wi.prototype.touchstart=function(L,P,F){return this._calculateTransform(L,P,F)},Wi.prototype.touchmove=function(L,P,F){if(this._active)return L.preventDefault(),this._calculateTransform(L,P,F)},Wi.prototype.touchend=function(L,P,F){this._calculateTransform(L,P,F),this._active&&F.length<this._minTouches&&this.reset()},Wi.prototype.touchcancel=function(){this.reset()},Wi.prototype._calculateTransform=function(L,P,F){F.length>0&&(this._active=!0);var H=Jn(F,P),oe=new e.Point(0,0),fe=new e.Point(0,0),ge=0;for(var xe in H){var Ce=H[xe],Ge=this._touches[xe];Ge&&(oe._add(Ce),fe._add(Ce.sub(Ge)),ge++,H[xe]=Ce)}if(this._touches=H,!(ge<this._minTouches)&&fe.mag()){var Xe=fe.div(ge);if(this._sum._add(Xe),!(this._sum.mag()<this._clickTolerance))return{around:oe.div(ge),panDelta:Xe}}},Wi.prototype.enable=function(){this._enabled=!0},Wi.prototype.disable=function(){this._enabled=!1,this.reset()},Wi.prototype.isEnabled=function(){return this._enabled},Wi.prototype.isActive=function(){return this._active};var Fi=function(){this.reset()};function pa(L,P,F){for(var H=0;H<L.length;H++)if(L[H].identifier===F)return P[H]}function fi(L,P){return Math.log(L/P)/Math.LN2}Fi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Fi.prototype._start=function(L){},Fi.prototype._move=function(L,P,F){return{}},Fi.prototype.touchstart=function(L,P,F){this._firstTwoTouches||F.length<2||(this._firstTwoTouches=[F[0].identifier,F[1].identifier],this._start([P[0],P[1]]))},Fi.prototype.touchmove=function(L,P,F){if(this._firstTwoTouches){L.preventDefault();var H=this._firstTwoTouches,fe=H[1],ge=pa(F,P,H[0]),xe=pa(F,P,fe);if(ge&&xe){var Ce=this._aroundCenter?null:ge.add(xe).div(2);return this._move([ge,xe],Ce,L)}}},Fi.prototype.touchend=function(L,P,F){if(this._firstTwoTouches){var H=this._firstTwoTouches,fe=H[1],ge=pa(F,P,H[0]),xe=pa(F,P,fe);ge&&xe||(this._active&&t.suppressClick(),this.reset())}},Fi.prototype.touchcancel=function(){this.reset()},Fi.prototype.enable=function(L){this._enabled=!0,this._aroundCenter=!!L&&"center"===L.around},Fi.prototype.disable=function(){this._enabled=!1,this.reset()},Fi.prototype.isEnabled=function(){return this._enabled},Fi.prototype.isActive=function(){return this._active};var ca=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.reset=function(){L.prototype.reset.call(this),delete this._distance,delete this._startDistance},P.prototype._start=function(F){this._startDistance=this._distance=F[0].dist(F[1])},P.prototype._move=function(F,H){var oe=this._distance;if(this._distance=F[0].dist(F[1]),this._active||!(Math.abs(fi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:fi(this._distance,oe),pinchAround:H}},P}(Fi);function Qa(L,P){return 180*L.angleWith(P)/Math.PI}var $o=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.reset=function(){L.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},P.prototype._start=function(F){this._startVector=this._vector=F[0].sub(F[1]),this._minDiameter=F[0].dist(F[1])},P.prototype._move=function(F,H){var oe=this._vector;if(this._vector=F[0].sub(F[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Qa(this._vector,oe),pinchAround:H}},P.prototype._isBelowThreshold=function(F){this._minDiameter=Math.min(this._minDiameter,F.mag());var H=25/(Math.PI*this._minDiameter)*360,oe=Qa(F,this._startVector);return Math.abs(oe)<H},P}(Fi);function Vo(L){return Math.abs(L.y)>Math.abs(L.x)}var bo=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.reset=function(){L.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},P.prototype._start=function(F){this._lastPoints=F,Vo(F[0].sub(F[1]))&&(this._valid=!1)},P.prototype._move=function(F,H,oe){var fe=F[0].sub(this._lastPoints[0]),ge=F[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(fe,ge,oe.timeStamp),this._valid)return this._lastPoints=F,this._active=!0,{pitchDelta:(fe.y+ge.y)/2*-.5}},P.prototype.gestureBeginsVertically=function(F,H,oe){if(void 0!==this._valid)return this._valid;var fe=F.mag()>=2,ge=H.mag()>=2;if(fe||ge){if(!fe||!ge)return void 0===this._firstMove&&(this._firstMove=oe),oe-this._firstMove<100&&void 0;var xe=F.y>0==H.y>0;return Vo(F)&&Vo(H)&&xe}},P}(Fi),Ei={panStep:100,bearingStep:15,pitchStep:10},Sa=function(){var L=Ei;this._panStep=L.panStep,this._bearingStep=L.bearingStep,this._pitchStep=L.pitchStep};function Co(L){return L*(2-L)}Sa.prototype.reset=function(){this._active=!1},Sa.prototype.keydown=function(L){var P=this;if(!(L.altKey||L.ctrlKey||L.metaKey)){var F=0,H=0,oe=0,fe=0,ge=0;switch(L.keyCode){case 61:case 107:case 171:case 187:F=1;break;case 189:case 109:case 173:F=-1;break;case 37:L.shiftKey?H=-1:(L.preventDefault(),fe=-1);break;case 39:L.shiftKey?H=1:(L.preventDefault(),fe=1);break;case 38:L.shiftKey?oe=1:(L.preventDefault(),ge=-1);break;case 40:L.shiftKey?oe=-1:(L.preventDefault(),ge=1);break;default:return}return{cameraAnimation:function(xe){var Ce=xe.getZoom();xe.easeTo({duration:300,easeId:"keyboardHandler",easing:Co,zoom:F?Math.round(Ce)+F*(L.shiftKey?2:1):Ce,bearing:xe.getBearing()+H*P._bearingStep,pitch:xe.getPitch()+oe*P._pitchStep,offset:[-fe*P._panStep,-ge*P._panStep],center:xe.getCenter()},{originalEvent:L})}}}},Sa.prototype.enable=function(){this._enabled=!0},Sa.prototype.disable=function(){this._enabled=!1,this.reset()},Sa.prototype.isEnabled=function(){return this._enabled},Sa.prototype.isActive=function(){return this._active};var oa=function(L,P){this._map=L,this._el=L.getCanvasContainer(),this._handler=P,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};oa.prototype.setZoomRate=function(L){this._defaultZoomRate=L},oa.prototype.setWheelZoomRate=function(L){this._wheelZoomRate=L},oa.prototype.isEnabled=function(){return!!this._enabled},oa.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},oa.prototype.isZooming=function(){return!!this._zooming},oa.prototype.enable=function(L){this.isEnabled()||(this._enabled=!0,this._aroundCenter=L&&"center"===L.around)},oa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},oa.prototype.wheel=function(L){if(this.isEnabled()){var P=L.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*L.deltaY:L.deltaY,F=e.browser.now(),H=F-(this._lastWheelEventTime||0);this._lastWheelEventTime=F,0!==P&&P%4.000244140625==0?this._type="wheel":0!==P&&Math.abs(P)<4?this._type="trackpad":H>400?(this._type=null,this._lastValue=P,this._timeout=setTimeout(this._onTimeout,40,L)):this._type||(this._type=Math.abs(H*P)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,P+=this._lastValue)),L.shiftKey&&P&&(P/=4),this._type&&(this._lastWheelEvent=L,this._delta-=P,this._active||this._start(L)),L.preventDefault()}},oa.prototype._onTimeout=function(L){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(L)},oa.prototype._start=function(L){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var P=t.mousePos(this._el,L);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(P)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},oa.prototype.renderFrame=function(){return this._onScrollFrame()},oa.prototype._onScrollFrame=function(){var L=this;if(this._frameId&&(this._frameId=null,this.isActive())){var P=this._map.transform;if(0!==this._delta){var F="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,H=2/(1+Math.exp(-Math.abs(this._delta*F)));this._delta<0&&0!==H&&(H=1/H);var oe="number"==typeof this._targetZoom?P.zoomScale(this._targetZoom):P.scale;this._targetZoom=Math.min(P.maxZoom,Math.max(P.minZoom,P.scaleZoom(oe*H))),"wheel"===this._type&&(this._startZoom=P.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var fe,ge="number"==typeof this._targetZoom?this._targetZoom:P.zoom,xe=this._startZoom,Ce=this._easing,Ge=!1;if("wheel"===this._type&&xe&&Ce){var Xe=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),ot=Ce(Xe);fe=e.number(xe,ge,ot),Xe<1?this._frameId||(this._frameId=!0):Ge=!0}else fe=ge,Ge=!0;return this._active=!0,Ge&&(this._active=!1,this._finishTimeout=setTimeout(function(){L._zooming=!1,L._handler._triggerRenderFrame(),delete L._targetZoom,delete L._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ge,zoomDelta:fe-P.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},oa.prototype._smoothOutEasing=function(L){var P=e.ease;if(this._prevEase){var F=this._prevEase,H=(e.browser.now()-F.start)/F.duration,oe=F.easing(H+.01)-F.easing(H),fe=.27/Math.sqrt(oe*oe+1e-4)*.01,ge=Math.sqrt(.0729-fe*fe);P=e.bezier(fe,ge,.25,1)}return this._prevEase={start:e.browser.now(),duration:L,easing:P},P},oa.prototype.reset=function(){this._active=!1};var Pa=function(L,P){this._clickZoom=L,this._tapZoom=P};Pa.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Pa.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Pa.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Pa.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var eo=function(){this.reset()};eo.prototype.reset=function(){this._active=!1},eo.prototype.dblclick=function(L,P){return L.preventDefault(),{cameraAnimation:function(F){F.easeTo({duration:300,zoom:F.getZoom()+(L.shiftKey?-1:1),around:F.unproject(P)},{originalEvent:L})}}},eo.prototype.enable=function(){this._enabled=!0},eo.prototype.disable=function(){this._enabled=!1,this.reset()},eo.prototype.isEnabled=function(){return this._enabled},eo.prototype.isActive=function(){return this._active};var ga=function(){this._tap=new Ii({numTouches:1,numTaps:1}),this.reset()};ga.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ga.prototype.touchstart=function(L,P,F){this._swipePoint||(this._tapTime&&L.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?F.length>0&&(this._swipePoint=P[0],this._swipeTouch=F[0].identifier):this._tap.touchstart(L,P,F))},ga.prototype.touchmove=function(L,P,F){if(this._tapTime){if(this._swipePoint){if(F[0].identifier!==this._swipeTouch)return;var H=P[0],oe=H.y-this._swipePoint.y;return this._swipePoint=H,L.preventDefault(),this._active=!0,{zoomDelta:oe/128}}}else this._tap.touchmove(L,P,F)},ga.prototype.touchend=function(L,P,F){this._tapTime?this._swipePoint&&0===F.length&&this.reset():this._tap.touchend(L,P,F)&&(this._tapTime=L.timeStamp)},ga.prototype.touchcancel=function(){this.reset()},ga.prototype.enable=function(){this._enabled=!0},ga.prototype.disable=function(){this._enabled=!1,this.reset()},ga.prototype.isEnabled=function(){return this._enabled},ga.prototype.isActive=function(){return this._active};var mo=function(L,P,F){this._el=L,this._mousePan=P,this._touchPan=F};mo.prototype.enable=function(L){this._inertiaOptions=L||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},mo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},mo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},mo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var ma=function(L,P,F){this._pitchWithRotate=L.pitchWithRotate,this._mouseRotate=P,this._mousePitch=F};ma.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},ma.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},ma.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},ma.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var fo=function(L,P,F,H){this._el=L,this._touchZoom=P,this._touchRotate=F,this._tapDragZoom=H,this._rotationDisabled=!1,this._enabled=!0};fo.prototype.enable=function(L){this._touchZoom.enable(L),this._rotationDisabled||this._touchRotate.enable(L),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},fo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},fo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},fo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},fo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},fo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ps=function(L){return L.zoom||L.drag||L.pitch||L.rotate},gs=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P}(e.Event);function Us(L){return L.panDelta&&L.panDelta.mag()||L.zoomDelta||L.bearingDelta||L.pitchDelta}var Ga=function(L,P){this._map=L,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Rn(L),this._bearingSnap=P.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(P),e.bindAll(["handleEvent","handleWindowEvent"],this);var F=this._el;this._listeners=[[F,"touchstart",{passive:!1}],[F,"touchmove",{passive:!1}],[F,"touchend",void 0],[F,"touchcancel",void 0],[F,"mousedown",void 0],[F,"mousemove",void 0],[F,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[F,"mouseover",void 0],[F,"mouseout",void 0],[F,"dblclick",void 0],[F,"click",void 0],[F,"keydown",{capture:!1}],[F,"keyup",void 0],[F,"wheel",{passive:!1}],[F,"contextmenu",void 0],[e.window,"blur",void 0]];for(var H=0,oe=this._listeners;H<oe.length;H+=1){var fe=oe[H],ge=fe[0];t.addEventListener(ge,fe[1],ge===e.window.document?this.handleWindowEvent:this.handleEvent,fe[2])}};Ga.prototype.destroy=function(){for(var L=0,P=this._listeners;L<P.length;L+=1){var F=P[L],H=F[0];t.removeEventListener(H,F[1],H===e.window.document?this.handleWindowEvent:this.handleEvent,F[2])}},Ga.prototype._addDefaultHandlers=function(L){var P=this._map,F=P.getCanvasContainer();this._add("mapEvent",new rn(P,L));var H=P.boxZoom=new qn(P,L);this._add("boxZoom",H);var oe=new Ui,fe=new eo;P.doubleClickZoom=new Pa(fe,oe),this._add("tapZoom",oe),this._add("clickZoom",fe);var ge=new ga;this._add("tapDragZoom",ge);var xe=P.touchPitch=new bo;this._add("touchPitch",xe);var Ce=new Ni(L),Ge=new Mi(L);P.dragRotate=new ma(L,Ce,Ge),this._add("mouseRotate",Ce,["mousePitch"]),this._add("mousePitch",Ge,["mouseRotate"]);var Xe=new Yi(L),ot=new Wi(L);P.dragPan=new mo(F,Xe,ot),this._add("mousePan",Xe),this._add("touchPan",ot,["touchZoom","touchRotate"]);var Mt=new $o,It=new ca;P.touchZoomRotate=new fo(F,It,Mt,ge),this._add("touchRotate",Mt,["touchPan","touchZoom"]),this._add("touchZoom",It,["touchPan","touchRotate"]);var Ct=P.scrollZoom=new oa(P,this);this._add("scrollZoom",Ct,["mousePan"]);var Lt=P.keyboard=new Sa;this._add("keyboard",Lt),this._add("blockableMapEvent",new ui(P));for(var Tt=0,Ht=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Tt<Ht.length;Tt+=1){var jt=Ht[Tt];L.interactive&&L[jt]&&P[jt].enable(L[jt])}},Ga.prototype._add=function(L,P,F){this._handlers.push({handlerName:L,handler:P,allowed:F}),this._handlersById[L]=P},Ga.prototype.stop=function(){if(!this._updatingCamera){for(var L=0,P=this._handlers;L<P.length;L+=1)P[L].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Ga.prototype.isActive=function(){for(var L=0,P=this._handlers;L<P.length;L+=1)if(P[L].handler.isActive())return!0;return!1},Ga.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Ga.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Ga.prototype.isMoving=function(){return Boolean(ps(this._eventsInProgress))||this.isZooming()},Ga.prototype._blockedByActive=function(L,P,F){for(var H in L)if(H!==F&&(!P||P.indexOf(H)<0))return!0;return!1},Ga.prototype.handleWindowEvent=function(L){this.handleEvent(L,L.type+"Window")},Ga.prototype._getMapTouches=function(L){for(var P=[],F=0,H=L;F<H.length;F+=1){var oe=H[F];this._el.contains(oe.target)&&P.push(oe)}return P},Ga.prototype.handleEvent=function(L,P){if("blur"!==L.type){this._updatingCamera=!0;for(var F="renderFrame"===L.type?void 0:L,H={needsRenderFrame:!1},oe={},fe={},ge=L.touches?this._getMapTouches(L.touches):void 0,xe=ge?t.touchPos(this._el,ge):t.mousePos(this._el,L),Ce=0,Ge=this._handlers;Ce<Ge.length;Ce+=1){var Xe=Ge[Ce],ot=Xe.handlerName,Mt=Xe.handler,It=Xe.allowed;if(Mt.isEnabled()){var Ct=void 0;this._blockedByActive(fe,It,ot)?Mt.reset():Mt[P||L.type]&&(Ct=Mt[P||L.type](L,xe,ge),this.mergeHandlerResult(H,oe,Ct,ot,F),Ct&&Ct.needsRenderFrame&&this._triggerRenderFrame()),(Ct||Mt.isActive())&&(fe[ot]=Mt)}}var Lt={};for(var Tt in this._previousActiveHandlers)fe[Tt]||(Lt[Tt]=F);this._previousActiveHandlers=fe,(Object.keys(Lt).length||Us(H))&&(this._changes.push([H,oe,Lt]),this._triggerRenderFrame()),(Object.keys(fe).length||Us(H))&&this._map._stop(!0),this._updatingCamera=!1;var Ht=H.cameraAnimation;Ht&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Ht(this._map))}else this.stop()},Ga.prototype.mergeHandlerResult=function(L,P,F,H,oe){if(F){e.extend(L,F);var fe={handlerName:H,originalEvent:F.originalEvent||oe};void 0!==F.zoomDelta&&(P.zoom=fe),void 0!==F.panDelta&&(P.drag=fe),void 0!==F.pitchDelta&&(P.pitch=fe),void 0!==F.bearingDelta&&(P.rotate=fe)}},Ga.prototype._applyChanges=function(){for(var L={},P={},F={},H=0,oe=this._changes;H<oe.length;H+=1){var fe=oe[H],ge=fe[0],xe=fe[1],Ce=fe[2];ge.panDelta&&(L.panDelta=(L.panDelta||new e.Point(0,0))._add(ge.panDelta)),ge.zoomDelta&&(L.zoomDelta=(L.zoomDelta||0)+ge.zoomDelta),ge.bearingDelta&&(L.bearingDelta=(L.bearingDelta||0)+ge.bearingDelta),ge.pitchDelta&&(L.pitchDelta=(L.pitchDelta||0)+ge.pitchDelta),void 0!==ge.around&&(L.around=ge.around),void 0!==ge.pinchAround&&(L.pinchAround=ge.pinchAround),ge.noInertia&&(L.noInertia=ge.noInertia),e.extend(P,xe),e.extend(F,Ce)}this._updateMapTransform(L,P,F),this._changes=[]},Ga.prototype._updateMapTransform=function(L,P,F){var H=this._map,oe=H.transform;if(!Us(L))return this._fireEvents(P,F);var fe=L.panDelta,ge=L.zoomDelta,xe=L.bearingDelta,Ce=L.pitchDelta,Ge=L.around,Xe=L.pinchAround;void 0!==Xe&&(Ge=Xe),H._stop(!0),Ge=Ge||H.transform.centerPoint;var ot=oe.pointLocation(fe?Ge.sub(fe):Ge);xe&&(oe.bearing+=xe),Ce&&(oe.pitch+=Ce),ge&&(oe.zoom+=ge),oe.setLocationAtPoint(ot,Ge),this._map._update(),L.noInertia||this._inertia.record(L),this._fireEvents(P,F)},Ga.prototype._fireEvents=function(L,P){var F=this,H=ps(this._eventsInProgress),oe=ps(L),fe={};for(var ge in L)this._eventsInProgress[ge]||(fe[ge+"start"]=L[ge].originalEvent),this._eventsInProgress[ge]=L[ge];for(var Ce in!H&&oe&&this._fireEvent("movestart",oe.originalEvent),fe)this._fireEvent(Ce,fe[Ce]);for(var Ge in L.rotate&&(this._bearingChanged=!0),oe&&this._fireEvent("move",oe.originalEvent),L)this._fireEvent(Ge,L[Ge].originalEvent);var ot,Mt={};for(var It in this._eventsInProgress){var Ct=this._eventsInProgress[It],Lt=Ct.handlerName,Tt=Ct.originalEvent;this._handlersById[Lt].isActive()||(delete this._eventsInProgress[It],Mt[It+"end"]=ot=P[Lt]||Tt)}for(var Ht in Mt)this._fireEvent(Ht,Mt[Ht]);var jt=ps(this._eventsInProgress);if((H||oe)&&!jt){this._updatingCamera=!0;var Wt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),cr=function(br){return 0!==br&&-F._bearingSnap<br&&br<F._bearingSnap};Wt?(cr(Wt.bearing||this._map.getBearing())&&(Wt.bearing=0),this._map.easeTo(Wt,{originalEvent:ot})):(this._map.fire(new e.Event("moveend",{originalEvent:ot})),cr(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},Ga.prototype._fireEvent=function(L,P){this._map.fire(new e.Event(L,P?{originalEvent:P}:{}))},Ga.prototype._triggerRenderFrame=function(){var L=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(P){delete L._frameId,L.handleEvent(new gs("renderFrame",{timeStamp:P})),L._applyChanges()}))};var Gs=function(L){function P(F,H){L.call(this),this._moving=!1,this._zooming=!1,this.transform=F,this._bearingSnap=H.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},P.prototype.setCenter=function(F,H){return this.jumpTo({center:F},H)},P.prototype.panBy=function(F,H,oe){return F=e.Point.convert(F).mult(-1),this.panTo(this.transform.center,e.extend({offset:F},H),oe)},P.prototype.panTo=function(F,H,oe){return this.easeTo(e.extend({center:F},H),oe)},P.prototype.getZoom=function(){return this.transform.zoom},P.prototype.setZoom=function(F,H){return this.jumpTo({zoom:F},H),this},P.prototype.zoomTo=function(F,H,oe){return this.easeTo(e.extend({zoom:F},H),oe)},P.prototype.zoomIn=function(F,H){return this.zoomTo(this.getZoom()+1,F,H),this},P.prototype.zoomOut=function(F,H){return this.zoomTo(this.getZoom()-1,F,H),this},P.prototype.getBearing=function(){return this.transform.bearing},P.prototype.setBearing=function(F,H){return this.jumpTo({bearing:F},H),this},P.prototype.getPadding=function(){return this.transform.padding},P.prototype.setPadding=function(F,H){return this.jumpTo({padding:F},H),this},P.prototype.rotateTo=function(F,H,oe){return this.easeTo(e.extend({bearing:F},H),oe)},P.prototype.resetNorth=function(F,H){return this.rotateTo(0,e.extend({duration:1e3},F),H),this},P.prototype.resetNorthPitch=function(F,H){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},F),H),this},P.prototype.snapToNorth=function(F,H){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(F,H):this},P.prototype.getPitch=function(){return this.transform.pitch},P.prototype.setPitch=function(F,H){return this.jumpTo({pitch:F},H),this},P.prototype.cameraForBounds=function(F,H){return F=e.LngLatBounds.convert(F),this._cameraForBoxAndBearing(F.getNorthWest(),F.getSouthEast(),0,H)},P.prototype._cameraForBoxAndBearing=function(F,H,oe,fe){var ge={top:0,bottom:0,right:0,left:0};if("number"==typeof(fe=e.extend({padding:ge,offset:[0,0],maxZoom:this.transform.maxZoom},fe)).padding){var xe=fe.padding;fe.padding={top:xe,bottom:xe,right:xe,left:xe}}fe.padding=e.extend(ge,fe.padding);var Ce=this.transform,Ge=Ce.padding,Xe=Ce.project(e.LngLat.convert(F)),ot=Ce.project(e.LngLat.convert(H)),Mt=Xe.rotate(-oe*Math.PI/180),It=ot.rotate(-oe*Math.PI/180),Ct=new e.Point(Math.max(Mt.x,It.x),Math.max(Mt.y,It.y)),Lt=new e.Point(Math.min(Mt.x,It.x),Math.min(Mt.y,It.y)),Tt=Ct.sub(Lt),Ht=(Ce.width-(Ge.left+Ge.right+fe.padding.left+fe.padding.right))/Tt.x,jt=(Ce.height-(Ge.top+Ge.bottom+fe.padding.top+fe.padding.bottom))/Tt.y;if(!(jt<0||Ht<0)){var Wt=Math.min(Ce.scaleZoom(Ce.scale*Math.min(Ht,jt)),fe.maxZoom),cr=e.Point.convert(fe.offset),Or=new e.Point(cr.x+(fe.padding.left-fe.padding.right)/2,cr.y+(fe.padding.top-fe.padding.bottom)/2).mult(Ce.scale/Ce.zoomScale(Wt));return{center:Ce.unproject(Xe.add(ot).div(2).sub(Or)),zoom:Wt,bearing:oe}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},P.prototype.fitBounds=function(F,H,oe){return this._fitInternal(this.cameraForBounds(F,H),H,oe)},P.prototype.fitScreenCoordinates=function(F,H,oe,fe,ge){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(F)),this.transform.pointLocation(e.Point.convert(H)),oe,fe),fe,ge)},P.prototype._fitInternal=function(F,H,oe){return F?(delete(H=e.extend(F,H)).padding,H.linear?this.easeTo(H,oe):this.flyTo(H,oe)):this},P.prototype.jumpTo=function(F,H){this.stop();var oe=this.transform,fe=!1,ge=!1,xe=!1;return"zoom"in F&&oe.zoom!==+F.zoom&&(fe=!0,oe.zoom=+F.zoom),void 0!==F.center&&(oe.center=e.LngLat.convert(F.center)),"bearing"in F&&oe.bearing!==+F.bearing&&(ge=!0,oe.bearing=+F.bearing),"pitch"in F&&oe.pitch!==+F.pitch&&(xe=!0,oe.pitch=+F.pitch),null==F.padding||oe.isPaddingEqual(F.padding)||(oe.padding=F.padding),this.fire(new e.Event("movestart",H)).fire(new e.Event("move",H)),fe&&this.fire(new e.Event("zoomstart",H)).fire(new e.Event("zoom",H)).fire(new e.Event("zoomend",H)),ge&&this.fire(new e.Event("rotatestart",H)).fire(new e.Event("rotate",H)).fire(new e.Event("rotateend",H)),xe&&this.fire(new e.Event("pitchstart",H)).fire(new e.Event("pitch",H)).fire(new e.Event("pitchend",H)),this.fire(new e.Event("moveend",H))},P.prototype.easeTo=function(F,H){var oe=this;this._stop(!1,F.easeId),(!1===(F=e.extend({offset:[0,0],duration:500,easing:e.ease},F)).animate||!F.essential&&e.browser.prefersReducedMotion)&&(F.duration=0);var fe=this.transform,ge=this.getZoom(),xe=this.getBearing(),Ce=this.getPitch(),Ge=this.getPadding(),Xe="zoom"in F?+F.zoom:ge,ot="bearing"in F?this._normalizeBearing(F.bearing,xe):xe,Mt="pitch"in F?+F.pitch:Ce,It="padding"in F?F.padding:fe.padding,Ct=e.Point.convert(F.offset),Lt=fe.centerPoint.add(Ct),Tt=fe.pointLocation(Lt),Ht=e.LngLat.convert(F.center||Tt);this._normalizeCenter(Ht);var jt,Wt,cr=fe.project(Tt),br=fe.project(Ht).sub(cr),zr=fe.zoomScale(Xe-ge);F.around&&(jt=e.LngLat.convert(F.around),Wt=fe.locationPoint(jt));var Or={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Xe!==ge,this._rotating=this._rotating||xe!==ot,this._pitching=this._pitching||Mt!==Ce,this._padding=!fe.isPaddingEqual(It),this._easeId=F.easeId,this._prepareEase(H,F.noMoveStart,Or),clearTimeout(this._easeEndTimeoutID),this._ease(function(sn){if(oe._zooming&&(fe.zoom=e.number(ge,Xe,sn)),oe._rotating&&(fe.bearing=e.number(xe,ot,sn)),oe._pitching&&(fe.pitch=e.number(Ce,Mt,sn)),oe._padding&&(fe.interpolatePadding(Ge,It,sn),Lt=fe.centerPoint.add(Ct)),jt)fe.setLocationAtPoint(jt,Wt);else{var on=fe.zoomScale(fe.zoom-ge),Mn=Xe>ge?Math.min(2,zr):Math.max(.5,zr),xn=Math.pow(Mn,1-sn),Kn=fe.unproject(cr.add(br.mult(sn*xn)).mult(on));fe.setLocationAtPoint(fe.renderWorldCopies?Kn.wrap():Kn,Lt)}oe._fireMoveEvents(H)},function(sn){oe._afterEase(H,sn)},F),this},P.prototype._prepareEase=function(F,H,oe){void 0===oe&&(oe={}),this._moving=!0,H||oe.moving||this.fire(new e.Event("movestart",F)),this._zooming&&!oe.zooming&&this.fire(new e.Event("zoomstart",F)),this._rotating&&!oe.rotating&&this.fire(new e.Event("rotatestart",F)),this._pitching&&!oe.pitching&&this.fire(new e.Event("pitchstart",F))},P.prototype._fireMoveEvents=function(F){this.fire(new e.Event("move",F)),this._zooming&&this.fire(new e.Event("zoom",F)),this._rotating&&this.fire(new e.Event("rotate",F)),this._pitching&&this.fire(new e.Event("pitch",F))},P.prototype._afterEase=function(F,H){if(!this._easeId||!H||this._easeId!==H){delete this._easeId;var oe=this._zooming,fe=this._rotating,ge=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,oe&&this.fire(new e.Event("zoomend",F)),fe&&this.fire(new e.Event("rotateend",F)),ge&&this.fire(new e.Event("pitchend",F)),this.fire(new e.Event("moveend",F))}},P.prototype.flyTo=function(F,H){var oe=this;if(!F.essential&&e.browser.prefersReducedMotion){var fe=e.pick(F,["center","zoom","bearing","pitch","around"]);return this.jumpTo(fe,H)}this.stop(),F=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},F);var ge=this.transform,xe=this.getZoom(),Ce=this.getBearing(),Ge=this.getPitch(),Xe=this.getPadding(),ot="zoom"in F?e.clamp(+F.zoom,ge.minZoom,ge.maxZoom):xe,Mt="bearing"in F?this._normalizeBearing(F.bearing,Ce):Ce,It="pitch"in F?+F.pitch:Ge,Ct="padding"in F?F.padding:ge.padding,Lt=ge.zoomScale(ot-xe),Tt=e.Point.convert(F.offset),Ht=ge.centerPoint.add(Tt),jt=ge.pointLocation(Ht),Wt=e.LngLat.convert(F.center||jt);this._normalizeCenter(Wt);var cr=ge.project(jt),br=ge.project(Wt).sub(cr),zr=F.curve,Or=Math.max(ge.width,ge.height),sn=Or/Lt,on=br.mag();if("minZoom"in F){var Mn=e.clamp(Math.min(F.minZoom,xe,ot),ge.minZoom,ge.maxZoom),xn=Or/ge.zoomScale(Mn-xe);zr=Math.sqrt(xn/on*2)}var Kn=zr*zr;function ai(si){var Di=(sn*sn-Or*Or+(si?-1:1)*Kn*Kn*on*on)/(2*(si?sn:Or)*Kn*on);return Math.log(Math.sqrt(Di*Di+1)-Di)}function _i(si){return(Math.exp(si)-Math.exp(-si))/2}function Jr(si){return(Math.exp(si)+Math.exp(-si))/2}var zn=ai(0),oi=function(si){return Jr(zn)/Jr(zn+zr*si)},ni=function(si){return Or*((Jr(zn)*(_i(Di=zn+zr*si)/Jr(Di))-_i(zn))/Kn)/on;var Di},pi=(ai(1)-zn)/zr;if(Math.abs(on)<1e-6||!isFinite(pi)){if(Math.abs(Or-sn)<1e-6)return this.easeTo(F,H);var Ai=sn<Or?-1:1;pi=Math.abs(Math.log(sn/Or))/zr,ni=function(){return 0},oi=function(si){return Math.exp(Ai*zr*si)}}return F.duration="duration"in F?+F.duration:1e3*pi/("screenSpeed"in F?+F.screenSpeed/zr:+F.speed),F.maxDuration&&F.duration>F.maxDuration&&(F.duration=0),this._zooming=!0,this._rotating=Ce!==Mt,this._pitching=It!==Ge,this._padding=!ge.isPaddingEqual(Ct),this._prepareEase(H,!1),this._ease(function(si){var Di=si*pi,Ci=1/oi(Di);ge.zoom=1===si?ot:xe+ge.scaleZoom(Ci),oe._rotating&&(ge.bearing=e.number(Ce,Mt,si)),oe._pitching&&(ge.pitch=e.number(Ge,It,si)),oe._padding&&(ge.interpolatePadding(Xe,Ct,si),Ht=ge.centerPoint.add(Tt));var ji=1===si?Wt:ge.unproject(cr.add(br.mult(ni(Di))).mult(Ci));ge.setLocationAtPoint(ge.renderWorldCopies?ji.wrap():ji,Ht),oe._fireMoveEvents(H)},function(){return oe._afterEase(H)},F),this},P.prototype.isEasing=function(){return!!this._easeFrameId},P.prototype.stop=function(){return this._stop()},P.prototype._stop=function(F,H){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var oe=this._onEaseEnd;delete this._onEaseEnd,oe.call(this,H)}if(!F){var fe=this.handlers;fe&&fe.stop()}return this},P.prototype._ease=function(F,H,oe){!1===oe.animate||0===oe.duration?(F(1),H()):(this._easeStart=e.browser.now(),this._easeOptions=oe,this._onEaseFrame=F,this._onEaseEnd=H,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},P.prototype._renderFrameCallback=function(){var F=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(F)),F<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},P.prototype._normalizeBearing=function(F,H){F=e.wrap(F,-180,180);var oe=Math.abs(F-H);return Math.abs(F-360-H)<oe&&(F-=360),Math.abs(F+360-H)<oe&&(F+=360),F},P.prototype._normalizeCenter=function(F){var H=this.transform;if(H.renderWorldCopies&&!H.lngRange){var oe=F.lng-H.center.lng;F.lng+=oe>180?-360:oe<-180?360:0}},P}(e.Evented),Ja=function(L){void 0===L&&(L={}),this.options=L,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Ja.prototype.getDefaultPosition=function(){return"bottom-right"},Ja.prototype.onAdd=function(L){var P=this.options&&this.options.compact;return this._map=L,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=t.create("div","mapboxgl-ctrl-attrib-inner",this._container),P&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===P&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ja.prototype.onRemove=function(){t.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ja.prototype._updateEditLink=function(){var L=this._editLink;L||(L=this._editLink=this._container.querySelector(".mapbox-improve-map"));var P=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(L){var F=P.reduce(function(H,oe,fe){return oe.value&&(H+=oe.key+"="+oe.value+(fe<P.length-1?"&":"")),H},"?");L.href=e.config.FEEDBACK_URL+"/"+F+(this._map._hash?this._map._hash.getHashString(!0):""),L.rel="noopener nofollow"}},Ja.prototype._updateData=function(L){!L||"metadata"!==L.sourceDataType&&"style"!==L.dataType||(this._updateAttributions(),this._updateEditLink())},Ja.prototype._updateAttributions=function(){if(this._map.style){var L=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?L=L.concat(this.options.customAttribution.map(function(xe){return"string"!=typeof xe?"":xe})):"string"==typeof this.options.customAttribution&&L.push(this.options.customAttribution)),this._map.style.stylesheet){var P=this._map.style.stylesheet;this.styleOwner=P.owner,this.styleId=P.id}var F=this._map.style.sourceCaches;for(var H in F){var oe=F[H];if(oe.used){var fe=oe.getSource();fe.attribution&&L.indexOf(fe.attribution)<0&&L.push(fe.attribution)}}L.sort(function(xe,Ce){return xe.length-Ce.length});var ge=(L=L.filter(function(xe,Ce){for(var Ge=Ce+1;Ge<L.length;Ge++)if(L[Ge].indexOf(xe)>=0)return!1;return!0})).join(" | ");ge!==this._attribHTML&&(this._attribHTML=ge,L.length?(this._innerContainer.innerHTML=ge,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ja.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var ls=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};ls.prototype.onAdd=function(L){this._map=L,this._container=t.create("div","mapboxgl-ctrl");var P=t.create("a","mapboxgl-ctrl-logo");return P.target="_blank",P.rel="noopener nofollow",P.href="https://www.mapbox.com/",P.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),P.setAttribute("rel","noopener nofollow"),this._container.appendChild(P),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ls.prototype.onRemove=function(){t.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ls.prototype.getDefaultPosition=function(){return"bottom-left"},ls.prototype._updateLogo=function(L){L&&"metadata"!==L.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},ls.prototype._logoRequired=function(){if(this._map.style){var L=this._map.style.sourceCaches;for(var P in L)if(L[P].getSource().mapbox_logo)return!0;return!1}},ls.prototype._updateCompact=function(){var L=this._container.children;if(L.length){var P=L[0];this._map.getCanvasContainer().offsetWidth<250?P.classList.add("mapboxgl-compact"):P.classList.remove("mapboxgl-compact")}};var bi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};bi.prototype.add=function(L){var P=++this._id;return this._queue.push({callback:L,id:P,cancelled:!1}),P},bi.prototype.remove=function(L){for(var P=this._currentlyRunning,F=0,H=P?this._queue.concat(P):this._queue;F<H.length;F+=1){var oe=H[F];if(oe.id===L)return void(oe.cancelled=!0)}},bi.prototype.run=function(L){void 0===L&&(L=0);var P=this._currentlyRunning=this._queue;this._queue=[];for(var F=0,H=P;F<H.length;F+=1){var oe=H[F];if(!oe.cancelled&&(oe.callback(L),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},bi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Li={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ds=e.window.HTMLImageElement,Hs=e.window.HTMLElement,ms=e.window.ImageBitmap,Oo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Zo=function(L){function P(H){var oe=this;if(null!=(H=e.extend({},Oo,H)).minZoom&&null!=H.maxZoom&&H.minZoom>H.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=H.minPitch&&null!=H.maxPitch&&H.minPitch>H.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=H.minPitch&&H.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=H.maxPitch&&H.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var fe=new Jt(H.minZoom,H.maxZoom,H.minPitch,H.maxPitch,H.renderWorldCopies);if(L.call(this,fe,H),this._interactive=H.interactive,this._maxTileCacheSize=H.maxTileCacheSize,this._failIfMajorPerformanceCaveat=H.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=H.preserveDrawingBuffer,this._antialias=H.antialias,this._trackResize=H.trackResize,this._bearingSnap=H.bearingSnap,this._refreshExpiredTiles=H.refreshExpiredTiles,this._fadeDuration=H.fadeDuration,this._crossSourceCollisions=H.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=H.collectResourceTiming,this._renderTaskQueue=new bi,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Li,H.locale),this._requestManager=new e.RequestManager(H.transformRequest,H.accessToken),"string"==typeof H.container){if(this._container=e.window.document.getElementById(H.container),!this._container)throw new Error("Container '"+H.container+"' not found.")}else{if(!(H.container instanceof Hs))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=H.container}if(H.maxBounds&&this.setMaxBounds(H.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return oe._update(!1)}),this.on("moveend",function(){return oe._update(!1)}),this.on("zoom",function(){return oe._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Ga(this,H),this._hash=H.hash&&new Br("string"==typeof H.hash&&H.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:H.center,zoom:H.zoom,bearing:H.bearing,pitch:H.pitch}),H.bounds&&(this.resize(),this.fitBounds(H.bounds,e.extend({},H.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=H.localIdeographFontFamily,H.style&&this.setStyle(H.style,{localIdeographFontFamily:H.localIdeographFontFamily}),H.attributionControl&&this.addControl(new Ja({customAttribution:H.customAttribution})),this.addControl(new ls,H.logoPosition),this.on("style.load",function(){oe.transform.unmodified&&oe.jumpTo(oe.style.stylesheet)}),this.on("data",function(xe){oe._update("style"===xe.dataType),oe.fire(new e.Event(xe.dataType+"data",xe))}),this.on("dataloading",function(xe){oe.fire(new e.Event(xe.dataType+"dataloading",xe))})}L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P;var F={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return P.prototype._getMapId=function(){return this._mapId},P.prototype.addControl=function(H,oe){if(void 0===oe&&H.getDefaultPosition&&(oe=H.getDefaultPosition()),void 0===oe&&(oe="top-right"),!H||!H.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var fe=H.onAdd(this);this._controls.push(H);var ge=this._controlPositions[oe];return-1!==oe.indexOf("bottom")?ge.insertBefore(fe,ge.firstChild):ge.appendChild(fe),this},P.prototype.removeControl=function(H){if(!H||!H.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var oe=this._controls.indexOf(H);return oe>-1&&this._controls.splice(oe,1),H.onRemove(this),this},P.prototype.resize=function(H){var oe=this._containerDimensions(),fe=oe[0],ge=oe[1];this._resizeCanvas(fe,ge),this.transform.resize(fe,ge),this.painter.resize(fe,ge);var xe=!this._moving;return xe&&(this.stop(),this.fire(new e.Event("movestart",H)).fire(new e.Event("move",H))),this.fire(new e.Event("resize",H)),xe&&this.fire(new e.Event("moveend",H)),this},P.prototype.getBounds=function(){return this.transform.getBounds()},P.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},P.prototype.setMaxBounds=function(H){return this.transform.setMaxBounds(e.LngLatBounds.convert(H)),this._update()},P.prototype.setMinZoom=function(H){if((H=null==H?-2:H)>=-2&&H<=this.transform.maxZoom)return this.transform.minZoom=H,this._update(),this.getZoom()<H&&this.setZoom(H),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},P.prototype.getMinZoom=function(){return this.transform.minZoom},P.prototype.setMaxZoom=function(H){if((H=null==H?22:H)>=this.transform.minZoom)return this.transform.maxZoom=H,this._update(),this.getZoom()>H&&this.setZoom(H),this;throw new Error("maxZoom must be greater than the current minZoom")},P.prototype.getMaxZoom=function(){return this.transform.maxZoom},P.prototype.setMinPitch=function(H){if((H=null==H?0:H)<0)throw new Error("minPitch must be greater than or equal to 0");if(H>=0&&H<=this.transform.maxPitch)return this.transform.minPitch=H,this._update(),this.getPitch()<H&&this.setPitch(H),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},P.prototype.getMinPitch=function(){return this.transform.minPitch},P.prototype.setMaxPitch=function(H){if((H=null==H?60:H)>60)throw new Error("maxPitch must be less than or equal to 60");if(H>=this.transform.minPitch)return this.transform.maxPitch=H,this._update(),this.getPitch()>H&&this.setPitch(H),this;throw new Error("maxPitch must be greater than the current minPitch")},P.prototype.getMaxPitch=function(){return this.transform.maxPitch},P.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},P.prototype.setRenderWorldCopies=function(H){return this.transform.renderWorldCopies=H,this._update()},P.prototype.project=function(H){return this.transform.locationPoint(e.LngLat.convert(H))},P.prototype.unproject=function(H){return this.transform.pointLocation(e.Point.convert(H))},P.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},P.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},P.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},P.prototype._createDelegatedListener=function(H,oe,fe){var ge,xe=this;if("mouseenter"===H||"mouseover"===H){var Ce=!1;return{layer:oe,listener:fe,delegates:{mousemove:function(Xe){var ot=xe.getLayer(oe)?xe.queryRenderedFeatures(Xe.point,{layers:[oe]}):[];ot.length?Ce||(Ce=!0,fe.call(xe,new Zn(H,xe,Xe.originalEvent,{features:ot}))):Ce=!1},mouseout:function(){Ce=!1}}}}if("mouseleave"===H||"mouseout"===H){var Ge=!1;return{layer:oe,listener:fe,delegates:{mousemove:function(Xe){(xe.getLayer(oe)?xe.queryRenderedFeatures(Xe.point,{layers:[oe]}):[]).length?Ge=!0:Ge&&(Ge=!1,fe.call(xe,new Zn(H,xe,Xe.originalEvent)))},mouseout:function(Xe){Ge&&(Ge=!1,fe.call(xe,new Zn(H,xe,Xe.originalEvent)))}}}}return{layer:oe,listener:fe,delegates:(ge={},ge[H]=function(Xe){var ot=xe.getLayer(oe)?xe.queryRenderedFeatures(Xe.point,{layers:[oe]}):[];ot.length&&(Xe.features=ot,fe.call(xe,Xe),delete Xe.features)},ge)}},P.prototype.on=function(H,oe,fe){if(void 0===fe)return L.prototype.on.call(this,H,oe);var ge=this._createDelegatedListener(H,oe,fe);for(var xe in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[H]=this._delegatedListeners[H]||[],this._delegatedListeners[H].push(ge),ge.delegates)this.on(xe,ge.delegates[xe]);return this},P.prototype.once=function(H,oe,fe){if(void 0===fe)return L.prototype.once.call(this,H,oe);var ge=this._createDelegatedListener(H,oe,fe);for(var xe in ge.delegates)this.once(xe,ge.delegates[xe]);return this},P.prototype.off=function(H,oe,fe){var ge=this;return void 0===fe?L.prototype.off.call(this,H,oe):(this._delegatedListeners&&this._delegatedListeners[H]&&function(xe){for(var Ce=xe[H],Ge=0;Ge<Ce.length;Ge++){var Xe=Ce[Ge];if(Xe.layer===oe&&Xe.listener===fe){for(var ot in Xe.delegates)ge.off(ot,Xe.delegates[ot]);return Ce.splice(Ge,1),ge}}}(this._delegatedListeners),this)},P.prototype.queryRenderedFeatures=function(H,oe){if(!this.style)return[];var fe;if(void 0!==oe||void 0===H||H instanceof e.Point||Array.isArray(H)||(oe=H,H=void 0),oe=oe||{},(H=H||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof H[0])fe=[e.Point.convert(H)];else{var ge=e.Point.convert(H[0]),xe=e.Point.convert(H[1]);fe=[ge,new e.Point(xe.x,ge.y),xe,new e.Point(ge.x,xe.y),ge]}return this.style.queryRenderedFeatures(fe,oe,this.transform)},P.prototype.querySourceFeatures=function(H,oe){return this.style.querySourceFeatures(H,oe)},P.prototype.setStyle=function(H,oe){return!1!==(oe=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},oe)).diff&&oe.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&H?(this._diffStyle(H,oe),this):(this._localIdeographFontFamily=oe.localIdeographFontFamily,this._updateStyle(H,oe))},P.prototype._getUIString=function(H){var oe=this._locale[H];if(null==oe)throw new Error("Missing UI string '"+H+"'");return oe},P.prototype._updateStyle=function(H,oe){return this.style&&(this.style.setEventedParent(null),this.style._remove()),H?(this.style=new ti(this,oe||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof H?this.style.loadURL(H):this.style.loadJSON(H),this):(delete this.style,this)},P.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ti(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},P.prototype._diffStyle=function(H,oe){var fe=this;if("string"==typeof H){var ge=this._requestManager.normalizeStyleURL(H),xe=this._requestManager.transformRequest(ge,e.ResourceType.Style);e.getJSON(xe,function(Ce,Ge){Ce?fe.fire(new e.ErrorEvent(Ce)):Ge&&fe._updateDiff(Ge,oe)})}else"object"==typeof H&&this._updateDiff(H,oe)},P.prototype._updateDiff=function(H,oe){try{this.style.setState(H)&&this._update(!0)}catch(fe){e.warnOnce("Unable to perform style diff: "+(fe.message||fe.error||fe)+".  Rebuilding the style from scratch."),this._updateStyle(H,oe)}},P.prototype.getStyle=function(){if(this.style)return this.style.serialize()},P.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},P.prototype.addSource=function(H,oe){return this._lazyInitEmptyStyle(),this.style.addSource(H,oe),this._update(!0)},P.prototype.isSourceLoaded=function(H){var oe=this.style&&this.style.sourceCaches[H];if(void 0!==oe)return oe.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+H+"'")))},P.prototype.areTilesLoaded=function(){var H=this.style&&this.style.sourceCaches;for(var oe in H){var fe=H[oe]._tiles;for(var ge in fe){var xe=fe[ge];if("loaded"!==xe.state&&"errored"!==xe.state)return!1}}return!0},P.prototype.addSourceType=function(H,oe,fe){return this._lazyInitEmptyStyle(),this.style.addSourceType(H,oe,fe)},P.prototype.removeSource=function(H){return this.style.removeSource(H),this._update(!0)},P.prototype.getSource=function(H){return this.style.getSource(H)},P.prototype.addImage=function(H,oe,fe){void 0===fe&&(fe={});var ge=fe.pixelRatio;void 0===ge&&(ge=1);var xe=fe.sdf;void 0===xe&&(xe=!1);var Ce=fe.stretchX,Ge=fe.stretchY,Xe=fe.content;if(this._lazyInitEmptyStyle(),oe instanceof Ds||ms&&oe instanceof ms){var ot=e.browser.getImageData(oe);this.style.addImage(H,{data:new e.RGBAImage({width:ot.width,height:ot.height},ot.data),pixelRatio:ge,stretchX:Ce,stretchY:Ge,content:Xe,sdf:xe,version:0})}else{if(void 0===oe.width||void 0===oe.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var jt=oe;this.style.addImage(H,{data:new e.RGBAImage({width:oe.width,height:oe.height},new Uint8Array(oe.data)),pixelRatio:ge,stretchX:Ce,stretchY:Ge,content:Xe,sdf:xe,version:0,userImage:jt}),jt.onAdd&&jt.onAdd(this,H)}},P.prototype.updateImage=function(H,oe){var fe=this.style.getImage(H);if(!fe)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ge=oe instanceof Ds||ms&&oe instanceof ms?e.browser.getImageData(oe):oe,xe=ge.width,Ce=ge.height,Ge=ge.data;return void 0===xe||void 0===Ce?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):xe!==fe.data.width||Ce!==fe.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(fe.data.replace(Ge,!(oe instanceof Ds||ms&&oe instanceof ms)),void this.style.updateImage(H,fe))},P.prototype.hasImage=function(H){return H?!!this.style.getImage(H):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},P.prototype.removeImage=function(H){this.style.removeImage(H)},P.prototype.loadImage=function(H,oe){e.getImage(this._requestManager.transformRequest(H,e.ResourceType.Image),oe)},P.prototype.listImages=function(){return this.style.listImages()},P.prototype.addLayer=function(H,oe){return this._lazyInitEmptyStyle(),this.style.addLayer(H,oe),this._update(!0)},P.prototype.moveLayer=function(H,oe){return this.style.moveLayer(H,oe),this._update(!0)},P.prototype.removeLayer=function(H){return this.style.removeLayer(H),this._update(!0)},P.prototype.getLayer=function(H){return this.style.getLayer(H)},P.prototype.setLayerZoomRange=function(H,oe,fe){return this.style.setLayerZoomRange(H,oe,fe),this._update(!0)},P.prototype.setFilter=function(H,oe,fe){return void 0===fe&&(fe={}),this.style.setFilter(H,oe,fe),this._update(!0)},P.prototype.getFilter=function(H){return this.style.getFilter(H)},P.prototype.setPaintProperty=function(H,oe,fe,ge){return void 0===ge&&(ge={}),this.style.setPaintProperty(H,oe,fe,ge),this._update(!0)},P.prototype.getPaintProperty=function(H,oe){return this.style.getPaintProperty(H,oe)},P.prototype.setLayoutProperty=function(H,oe,fe,ge){return void 0===ge&&(ge={}),this.style.setLayoutProperty(H,oe,fe,ge),this._update(!0)},P.prototype.getLayoutProperty=function(H,oe){return this.style.getLayoutProperty(H,oe)},P.prototype.setLight=function(H,oe){return void 0===oe&&(oe={}),this._lazyInitEmptyStyle(),this.style.setLight(H,oe),this._update(!0)},P.prototype.getLight=function(){return this.style.getLight()},P.prototype.setFeatureState=function(H,oe){return this.style.setFeatureState(H,oe),this._update()},P.prototype.removeFeatureState=function(H,oe){return this.style.removeFeatureState(H,oe),this._update()},P.prototype.getFeatureState=function(H){return this.style.getFeatureState(H)},P.prototype.getContainer=function(){return this._container},P.prototype.getCanvasContainer=function(){return this._canvasContainer},P.prototype.getCanvas=function(){return this._canvas},P.prototype._containerDimensions=function(){var H=0,oe=0;return this._container&&(H=this._container.clientWidth||400,oe=this._container.clientHeight||300),[H,oe]},P.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},P.prototype._setupContainer=function(){var H=this._container;H.classList.add("mapboxgl-map"),(this._missingCSSCanary=t.create("div","mapboxgl-canary",H)).style.visibility="hidden",this._detectMissingCSS();var oe=this._canvasContainer=t.create("div","mapboxgl-canvas-container",H);this._interactive&&oe.classList.add("mapboxgl-interactive"),this._canvas=t.create("canvas","mapboxgl-canvas",oe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var fe=this._containerDimensions();this._resizeCanvas(fe[0],fe[1]);var ge=this._controlContainer=t.create("div","mapboxgl-control-container",H),xe=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ce){xe[Ce]=t.create("div","mapboxgl-ctrl-"+Ce,ge)})},P.prototype._resizeCanvas=function(H,oe){var fe=e.browser.devicePixelRatio||1;this._canvas.width=fe*H,this._canvas.height=fe*oe,this._canvas.style.width=H+"px",this._canvas.style.height=oe+"px"},P.prototype._setupPainter=function(){var H=e.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),oe=this._canvas.getContext("webgl",H)||this._canvas.getContext("experimental-webgl",H);oe?(this.painter=new Hi(oe,this.transform),e.webpSupported.testSupport(oe)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},P.prototype._contextLost=function(H){H.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:H}))},P.prototype._contextRestored=function(H){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:H}))},P.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},P.prototype._update=function(H){return this.style?(this._styleDirty=this._styleDirty||H,this._sourcesDirty=!0,this.triggerRepaint(),this):this},P.prototype._requestRenderFrame=function(H){return this._update(),this._renderTaskQueue.add(H)},P.prototype._cancelRenderFrame=function(H){this._renderTaskQueue.remove(H)},P.prototype._render=function(H){var oe,fe=this,ge=0,xe=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(oe=xe.createQueryEXT(),xe.beginQueryEXT(xe.TIME_ELAPSED_EXT,oe),ge=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(H),!this._removed){var Ce=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ge=this.transform.zoom,Xe=e.browser.now();this.style.zoomHistory.update(Ge,Xe);var ot=new e.EvaluationParameters(Ge,{now:Xe,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Mt=ot.crossFadingFactor();1===Mt&&Mt===this._crossFadingFactor||(Ce=!0,this._crossFadingFactor=Mt),this.style.update(ot)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Ce)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var It=e.browser.now()-ge;xe.endQueryEXT(xe.TIME_ELAPSED_EXT,oe),setTimeout(function(){var Lt=xe.getQueryObjectEXT(oe,xe.QUERY_RESULT_EXT)/1e6;xe.deleteQueryEXT(oe),fe.fire(new e.Event("gpu-timing-frame",{cpuTime:It,gpuTime:Lt}))},50)}if(this.listens("gpu-timing-layer")){var Ct=this.painter.collectGpuTimers();setTimeout(function(){var Lt=fe.painter.queryGpuTimers(Ct);fe.fire(new e.Event("gpu-timing-layer",{layerTimes:Lt}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},P.prototype.remove=function(){this._hash&&this._hash.remove();for(var H=0,oe=this._controls;H<oe.length;H+=1)oe[H].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var fe=this.painter.context.gl.getExtension("WEBGL_lose_context");fe&&fe.loseContext(),Zs(this._canvasContainer),Zs(this._controlContainer),Zs(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},P.prototype.triggerRepaint=function(){var H=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(oe){H._frame=null,H._render(oe)}))},P.prototype._onWindowOnline=function(){this._update()},P.prototype._onWindowResize=function(H){this._trackResize&&this.resize({originalEvent:H})._update()},F.showTileBoundaries.get=function(){return!!this._showTileBoundaries},F.showTileBoundaries.set=function(H){this._showTileBoundaries!==H&&(this._showTileBoundaries=H,this._update())},F.showPadding.get=function(){return!!this._showPadding},F.showPadding.set=function(H){this._showPadding!==H&&(this._showPadding=H,this._update())},F.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},F.showCollisionBoxes.set=function(H){this._showCollisionBoxes!==H&&(this._showCollisionBoxes=H,H?this.style._generateCollisionBoxes():this._update())},F.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},F.showOverdrawInspector.set=function(H){this._showOverdrawInspector!==H&&(this._showOverdrawInspector=H,this._update())},F.repaint.get=function(){return!!this._repaint},F.repaint.set=function(H){this._repaint!==H&&(this._repaint=H,this.triggerRepaint())},F.vertices.get=function(){return!!this._vertices},F.vertices.set=function(H){this._vertices=H,this._update()},P.prototype._setCacheLimits=function(H,oe){e.setCacheLimits(H,oe)},F.version.get=function(){return e.version},Object.defineProperties(P.prototype,F),P}(Gs);function Zs(L){L.parentNode&&L.parentNode.removeChild(L)}var js={showCompass:!0,showZoom:!0,visualizePitch:!1},sa=function(L){var P=this;this.options=e.extend({},js,L),this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(F){return F.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(F){return P._map.zoomIn({},{originalEvent:F})}),t.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(F){return P._map.zoomOut({},{originalEvent:F})}),t.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(F){P.options.visualizePitch?P._map.resetNorthPitch({},{originalEvent:F}):P._map.resetNorth({},{originalEvent:F})}),this._compassIcon=t.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};sa.prototype._updateZoomButtons=function(){var L=this._map.getZoom();this._zoomInButton.disabled=L===this._map.getMaxZoom(),this._zoomOutButton.disabled=L===this._map.getMinZoom()},sa.prototype._rotateCompassArrow=function(){var L=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=L},sa.prototype.onAdd=function(L){return this._map=L,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ha(this._map,this._compass,this.options.visualizePitch)),this._container},sa.prototype.onRemove=function(){t.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},sa.prototype._createButton=function(L,P){var F=t.create("button",L,this._container);return F.type="button",F.addEventListener("click",P),F},sa.prototype._setButtonTitle=function(L,P){var F=this._map._getUIString("NavigationControl."+P);L.title=F,L.setAttribute("aria-label",F)};var ha=function(L,P,F){void 0===F&&(F=!1),this._clickTolerance=10,this.element=P,this.mouseRotate=new Ni({clickTolerance:L.dragRotate._mouseRotate._clickTolerance}),this.map=L,F&&(this.mousePitch=new Mi({clickTolerance:L.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),t.addEventListener(P,"mousedown",this.mousedown),t.addEventListener(P,"touchstart",this.touchstart,{passive:!1}),t.addEventListener(P,"touchmove",this.touchmove),t.addEventListener(P,"touchend",this.touchend),t.addEventListener(P,"touchcancel",this.reset)};function vs(L,P,F){if(L=new e.LngLat(L.lng,L.lat),P){var H=new e.LngLat(L.lng-360,L.lat),oe=new e.LngLat(L.lng+360,L.lat),fe=F.locationPoint(L).distSqr(P);F.locationPoint(H).distSqr(P)<fe?L=H:F.locationPoint(oe).distSqr(P)<fe&&(L=oe)}for(;Math.abs(L.lng-F.center.lng)>180;){var ge=F.locationPoint(L);if(ge.x>=0&&ge.y>=0&&ge.x<=F.width&&ge.y<=F.height)break;L.lng>F.center.lng?L.lng-=360:L.lng+=360}return L}ha.prototype.down=function(L,P){this.mouseRotate.mousedown(L,P),this.mousePitch&&this.mousePitch.mousedown(L,P),t.disableDrag()},ha.prototype.move=function(L,P){var F=this.map,H=this.mouseRotate.mousemoveWindow(L,P);if(H&&H.bearingDelta&&F.setBearing(F.getBearing()+H.bearingDelta),this.mousePitch){var oe=this.mousePitch.mousemoveWindow(L,P);oe&&oe.pitchDelta&&F.setPitch(F.getPitch()+oe.pitchDelta)}},ha.prototype.off=function(){var L=this.element;t.removeEventListener(L,"mousedown",this.mousedown),t.removeEventListener(L,"touchstart",this.touchstart,{passive:!1}),t.removeEventListener(L,"touchmove",this.touchmove),t.removeEventListener(L,"touchend",this.touchend),t.removeEventListener(L,"touchcancel",this.reset),this.offTemp()},ha.prototype.offTemp=function(){t.enableDrag(),t.removeEventListener(e.window,"mousemove",this.mousemove),t.removeEventListener(e.window,"mouseup",this.mouseup)},ha.prototype.mousedown=function(L){this.down(e.extend({},L,{ctrlKey:!0,preventDefault:function(){return L.preventDefault()}}),t.mousePos(this.element,L)),t.addEventListener(e.window,"mousemove",this.mousemove),t.addEventListener(e.window,"mouseup",this.mouseup)},ha.prototype.mousemove=function(L){this.move(L,t.mousePos(this.element,L))},ha.prototype.mouseup=function(L){this.mouseRotate.mouseupWindow(L),this.mousePitch&&this.mousePitch.mouseupWindow(L),this.offTemp()},ha.prototype.touchstart=function(L){1!==L.targetTouches.length?this.reset():(this._startPos=this._lastPos=t.touchPos(this.element,L.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return L.preventDefault()}},this._startPos))},ha.prototype.touchmove=function(L){1!==L.targetTouches.length?this.reset():(this._lastPos=t.touchPos(this.element,L.targetTouches)[0],this.move({preventDefault:function(){return L.preventDefault()}},this._lastPos))},ha.prototype.touchend=function(L){0===L.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},ha.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var cs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ja(L,P,F){var H=L.classList;for(var oe in cs)H.remove("mapboxgl-"+F+"-anchor-"+oe);H.add("mapboxgl-"+F+"-anchor-"+P)}var As,qs=function(L){function P(F,H){var oe=this;if(L.call(this),(F instanceof e.window.HTMLElement||H)&&(F=e.extend({element:F},H)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=F&&F.anchor||"center",this._color=F&&F.color||"#3FB1CE",this._draggable=F&&F.draggable||!1,this._state="inactive",this._rotation=F&&F.rotation||0,this._rotationAlignment=F&&F.rotationAlignment||"auto",this._pitchAlignment=F&&F.pitchAlignment&&"auto"!==F.pitchAlignment?F.pitchAlignment:this._rotationAlignment,F&&F.element)this._element=F.element,this._offset=e.Point.convert(F&&F.offset||[0,0]);else{this._defaultMarker=!0,this._element=t.create("div"),this._element.setAttribute("aria-label","Map marker");var fe=t.createNS("http://www.w3.org/2000/svg","svg");fe.setAttributeNS(null,"display","block"),fe.setAttributeNS(null,"height","41px"),fe.setAttributeNS(null,"width","27px"),fe.setAttributeNS(null,"viewBox","0 0 27 41");var ge=t.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"stroke","none"),ge.setAttributeNS(null,"stroke-width","1"),ge.setAttributeNS(null,"fill","none"),ge.setAttributeNS(null,"fill-rule","evenodd");var xe=t.createNS("http://www.w3.org/2000/svg","g");xe.setAttributeNS(null,"fill-rule","nonzero");var Ce=t.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Ce.setAttributeNS(null,"fill","#000000");for(var Ge=0,Xe=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ge<Xe.length;Ge+=1){var ot=Xe[Ge],Mt=t.createNS("http://www.w3.org/2000/svg","ellipse");Mt.setAttributeNS(null,"opacity","0.04"),Mt.setAttributeNS(null,"cx","10.5"),Mt.setAttributeNS(null,"cy","5.80029008"),Mt.setAttributeNS(null,"rx",ot.rx),Mt.setAttributeNS(null,"ry",ot.ry),Ce.appendChild(Mt)}var It=t.createNS("http://www.w3.org/2000/svg","g");It.setAttributeNS(null,"fill",this._color);var Ct=t.createNS("http://www.w3.org/2000/svg","path");Ct.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),It.appendChild(Ct);var Lt=t.createNS("http://www.w3.org/2000/svg","g");Lt.setAttributeNS(null,"opacity","0.25"),Lt.setAttributeNS(null,"fill","#000000");var Tt=t.createNS("http://www.w3.org/2000/svg","path");Tt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Lt.appendChild(Tt);var Ht=t.createNS("http://www.w3.org/2000/svg","g");Ht.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ht.setAttributeNS(null,"fill","#FFFFFF");var jt=t.createNS("http://www.w3.org/2000/svg","g");jt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Wt=t.createNS("http://www.w3.org/2000/svg","circle");Wt.setAttributeNS(null,"fill","#000000"),Wt.setAttributeNS(null,"opacity","0.25"),Wt.setAttributeNS(null,"cx","5.5"),Wt.setAttributeNS(null,"cy","5.5"),Wt.setAttributeNS(null,"r","5.4999962");var cr=t.createNS("http://www.w3.org/2000/svg","circle");cr.setAttributeNS(null,"fill","#FFFFFF"),cr.setAttributeNS(null,"cx","5.5"),cr.setAttributeNS(null,"cy","5.5"),cr.setAttributeNS(null,"r","5.4999962"),jt.appendChild(Wt),jt.appendChild(cr),xe.appendChild(Ce),xe.appendChild(It),xe.appendChild(Lt),xe.appendChild(Ht),xe.appendChild(jt),fe.appendChild(xe),this._element.appendChild(fe),this._offset=e.Point.convert(F&&F.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(br){br.preventDefault()}),this._element.addEventListener("mousedown",function(br){br.preventDefault()}),this._element.addEventListener("focus",function(){var br=oe._map.getContainer();br.scrollTop=0,br.scrollLeft=0}),ja(this._element,this._anchor,"marker"),this._popup=null}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.addTo=function(F){return this.remove(),this._map=F,F.getCanvasContainer().appendChild(this._element),F.on("move",this._update),F.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},P.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),t.remove(this._element),this._popup&&this._popup.remove(),this},P.prototype.getLngLat=function(){return this._lngLat},P.prototype.setLngLat=function(F){return this._lngLat=e.LngLat.convert(F),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},P.prototype.getElement=function(){return this._element},P.prototype.setPopup=function(F){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),F){if(!("offset"in F.options)){var H=Math.sqrt(Math.pow(13.5,2)/2);F.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[H,-1*(24.6+H)],"bottom-right":[-H,-1*(24.6+H)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=F,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},P.prototype._onKeyPress=function(F){var H=F.code,oe=F.charCode||F.keyCode;"Space"!==H&&"Enter"!==H&&32!==oe&&13!==oe||this.togglePopup()},P.prototype._onMapClick=function(F){var H=F.originalEvent.target,oe=this._element;this._popup&&(H===oe||oe.contains(H))&&this.togglePopup()},P.prototype.getPopup=function(){return this._popup},P.prototype.togglePopup=function(){var F=this._popup;return F?(F.isOpen()?F.remove():F.addTo(this._map),this):this},P.prototype._update=function(F){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=vs(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var H="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?H="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(H="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var oe="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?oe="rotateX(0deg)":"map"===this._pitchAlignment&&(oe="rotateX("+this._map.getPitch()+"deg)"),F&&"moveend"!==F.type||(this._pos=this._pos.round()),t.setTransform(this._element,cs[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+oe+" "+H)}},P.prototype.getOffset=function(){return this._offset},P.prototype.setOffset=function(F){return this._offset=e.Point.convert(F),this._update(),this},P.prototype._onMove=function(F){this._pos=F.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},P.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},P.prototype._addDragHandler=function(F){this._element.contains(F.originalEvent.target)&&(F.preventDefault(),this._positionDelta=F.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},P.prototype.setDraggable=function(F){return this._draggable=!!F,this._map&&(F?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},P.prototype.isDraggable=function(){return this._draggable},P.prototype.setRotation=function(F){return this._rotation=F||0,this._update(),this},P.prototype.getRotation=function(){return this._rotation},P.prototype.setRotationAlignment=function(F){return this._rotationAlignment=F||"auto",this._update(),this},P.prototype.getRotationAlignment=function(){return this._rotationAlignment},P.prototype.setPitchAlignment=function(F){return this._pitchAlignment=F&&"auto"!==F?F:this._rotationAlignment,this._update(),this},P.prototype.getPitchAlignment=function(){return this._pitchAlignment},P}(e.Evented),Os={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Is=0,Ts=!1,Xs=function(L){function P(F){L.call(this),this.options=e.extend({},Os,F),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.onAdd=function(F){var H;return this._map=F,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),H=this._setupUI,void 0!==As?H(As):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(oe){H(As="denied"!==oe.state)}):H(As=!!e.window.navigator.geolocation),this._container},P.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),t.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Is=0,Ts=!1},P.prototype._isOutOfMapMaxBounds=function(F){var H=this._map.getMaxBounds(),oe=F.coords;return H&&(oe.longitude<H.getWest()||oe.longitude>H.getEast()||oe.latitude<H.getSouth()||oe.latitude>H.getNorth())},P.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},P.prototype._onSuccess=function(F){if(this._map){if(this._isOutOfMapMaxBounds(F))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",F)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=F,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(F),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(F),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",F)),this._finish()}},P.prototype._updateCamera=function(F){var H=new e.LngLat(F.coords.longitude,F.coords.latitude),oe=F.coords.accuracy,fe=this._map.getBearing(),ge=e.extend({bearing:fe},this.options.fitBoundsOptions);this._map.fitBounds(H.toBounds(oe),ge,{geolocateSource:!0})},P.prototype._updateMarker=function(F){if(F){var H=new e.LngLat(F.coords.longitude,F.coords.latitude);this._accuracyCircleMarker.setLngLat(H).addTo(this._map),this._userLocationDotMarker.setLngLat(H).addTo(this._map),this._accuracy=F.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},P.prototype._updateCircleRadius=function(){var F=this._map._container.clientHeight/2,H=this._map.unproject([0,F]),oe=this._map.unproject([1,F]),fe=H.distanceTo(oe),ge=Math.ceil(2*this._accuracy/fe);this._circleElement.style.width=ge+"px",this._circleElement.style.height=ge+"px"},P.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},P.prototype._onError=function(F){if(this._map){if(this.options.trackUserLocation)if(1===F.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var H=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=H,this._geolocateButton.setAttribute("aria-label",H),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===F.code&&Ts)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",F)),this._finish()}},P.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},P.prototype._setupUI=function(F){var H=this;if(this._container.addEventListener("contextmenu",function(ge){return ge.preventDefault()}),this._geolocateButton=t.create("button","mapboxgl-ctrl-geolocate",this._container),t.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===F){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var oe=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=oe,this._geolocateButton.setAttribute("aria-label",oe)}else{var fe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=fe,this._geolocateButton.setAttribute("aria-label",fe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=t.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new qs(this._dotElement),this._circleElement=t.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new qs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ge){ge.geolocateSource||"ACTIVE_LOCK"!==H._watchState||ge.originalEvent&&"resize"===ge.originalEvent.type||(H._watchState="BACKGROUND",H._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),H._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),H.fire(new e.Event("trackuserlocationend")))})},P.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Is--,Ts=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var F;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Is>1?(F={maximumAge:6e5,timeout:0},Ts=!0):(F=this.options.positionOptions,Ts=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,F)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},P.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},P}(e.Evented),il={maxWidth:100,unit:"metric"},Ms=function(L){this.options=e.extend({},il,L),e.bindAll(["_onMove","setUnit"],this)};function al(L,P,F){var H=F&&F.maxWidth||100,oe=L._container.clientHeight/2,fe=L.unproject([0,oe]),ge=L.unproject([H,oe]),xe=fe.distanceTo(ge);if(F&&"imperial"===F.unit){var Ce=3.2808*xe;Ce>5280?Vs(P,H,Ce/5280,L._getUIString("ScaleControl.Miles")):Vs(P,H,Ce,L._getUIString("ScaleControl.Feet"))}else F&&"nautical"===F.unit?Vs(P,H,xe/1852,L._getUIString("ScaleControl.NauticalMiles")):xe>=1e3?Vs(P,H,xe/1e3,L._getUIString("ScaleControl.Kilometers")):Vs(P,H,xe,L._getUIString("ScaleControl.Meters"))}function Vs(L,P,F,H){var oe,fe,ge,Ge,Xe,xe=(oe=F,(fe=Math.pow(10,(""+Math.floor(oe)).length-1))*(ge=(ge=oe/fe)>=10?10:ge>=5?5:ge>=3?3:ge>=2?2:ge>=1?1:(Ge=ge,Xe=Math.pow(10,Math.ceil(-Math.log(Ge)/Math.LN10)),Math.round(Ge*Xe)/Xe)));L.style.width=P*(xe/F)+"px",L.innerHTML=xe+"&nbsp;"+H}Ms.prototype.getDefaultPosition=function(){return"bottom-left"},Ms.prototype._onMove=function(){al(this._map,this._container,this.options)},Ms.prototype.onAdd=function(L){return this._map=L,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",L.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ms.prototype.onRemove=function(){t.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ms.prototype.setUnit=function(L){this.options.unit=L,al(this._map,this._container,this.options)};var ho=function(L){this._fullscreen=!1,L&&L.container&&(L.container instanceof e.window.HTMLElement?this._container=L.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};ho.prototype.onAdd=function(L){return this._map=L,this._container||(this._container=this._map.getContainer()),this._controlContainer=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ho.prototype.onRemove=function(){t.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ho.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},ho.prototype._setupUI=function(){var L=this._fullscreenButton=t.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);t.create("span","mapboxgl-ctrl-icon",L).setAttribute("aria-hidden",!0),L.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ho.prototype._updateTitle=function(){var L=this._getTitle();this._fullscreenButton.setAttribute("aria-label",L),this._fullscreenButton.title=L},ho.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ho.prototype._isFullscreen=function(){return this._fullscreen},ho.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ho.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var hl={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},kl=function(L){function P(F){L.call(this),this.options=e.extend(Object.create(hl),F),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return L&&(P.__proto__=L),(P.prototype=Object.create(L&&L.prototype)).constructor=P,P.prototype.addTo=function(F){return this._map&&this.remove(),this._map=F,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},P.prototype.isOpen=function(){return!!this._map},P.prototype.remove=function(){return this._content&&t.remove(this._content),this._container&&(t.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},P.prototype.getLngLat=function(){return this._lngLat},P.prototype.setLngLat=function(F){return this._lngLat=e.LngLat.convert(F),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},P.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},P.prototype.getElement=function(){return this._container},P.prototype.setText=function(F){return this.setDOMContent(e.window.document.createTextNode(F))},P.prototype.setHTML=function(F){var H,oe=e.window.document.createDocumentFragment(),fe=e.window.document.createElement("body");for(fe.innerHTML=F;H=fe.firstChild;)oe.appendChild(H);return this.setDOMContent(oe)},P.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},P.prototype.setMaxWidth=function(F){return this.options.maxWidth=F,this._update(),this},P.prototype.setDOMContent=function(F){return this._createContent(),this._content.appendChild(F),this._update(),this},P.prototype.addClassName=function(F){this._container&&this._container.classList.add(F)},P.prototype.removeClassName=function(F){this._container&&this._container.classList.remove(F)},P.prototype.toggleClassName=function(F){if(this._container)return this._container.classList.toggle(F)},P.prototype._createContent=function(){this._content&&t.remove(this._content),this._content=t.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=t.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},P.prototype._onMouseUp=function(F){this._update(F.point)},P.prototype._onMouseMove=function(F){this._update(F.point)},P.prototype._onDrag=function(F){this._update(F.point)},P.prototype._update=function(F){var H=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=t.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=t.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Mt){return H._container.classList.add(Mt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=vs(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||F)){var fe=this._pos=this._trackPointer&&F?F:this._map.project(this._lngLat),ge=this.options.anchor,xe=function Mt(It){if(It){if("number"==typeof It){var Ct=Math.round(Math.sqrt(.5*Math.pow(It,2)));return{center:new e.Point(0,0),top:new e.Point(0,It),"top-left":new e.Point(Ct,Ct),"top-right":new e.Point(-Ct,Ct),bottom:new e.Point(0,-It),"bottom-left":new e.Point(Ct,-Ct),"bottom-right":new e.Point(-Ct,-Ct),left:new e.Point(It,0),right:new e.Point(-It,0)}}if(It instanceof e.Point||Array.isArray(It)){var Lt=e.Point.convert(It);return{center:Lt,top:Lt,"top-left":Lt,"top-right":Lt,bottom:Lt,"bottom-left":Lt,"bottom-right":Lt,left:Lt,right:Lt}}return{center:e.Point.convert(It.center||[0,0]),top:e.Point.convert(It.top||[0,0]),"top-left":e.Point.convert(It["top-left"]||[0,0]),"top-right":e.Point.convert(It["top-right"]||[0,0]),bottom:e.Point.convert(It.bottom||[0,0]),"bottom-left":e.Point.convert(It["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(It["bottom-right"]||[0,0]),left:e.Point.convert(It.left||[0,0]),right:e.Point.convert(It.right||[0,0])}}return Mt(new e.Point(0,0))}(this.options.offset);if(!ge){var Ce,Ge=this._container.offsetWidth,Xe=this._container.offsetHeight;Ce=fe.y+xe.bottom.y<Xe?["top"]:fe.y>this._map.transform.height-Xe?["bottom"]:[],fe.x<Ge/2?Ce.push("left"):fe.x>this._map.transform.width-Ge/2&&Ce.push("right"),ge=0===Ce.length?"bottom":Ce.join("-")}var ot=fe.add(xe[ge]).round();t.setTransform(this._container,cs[ge]+" translate("+ot.x+"px,"+ot.y+"px)"),ja(this._container,ge,"popup")}},P.prototype._onClose=function(){this.remove()},P}(e.Evented),ce={version:e.version,supported:n,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:Zo,NavigationControl:sa,GeolocateControl:Xs,AttributionControl:Ja,ScaleControl:Ms,FullscreenControl:ho,Popup:kl,Marker:qs,Style:ti,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){Qe().acquire(Pt)},clearPrewarmedResources:function(){var L=zt;L&&(L.isPreloaded()&&1===L.numActive()?(L.release(Pt),zt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(L){e.config.ACCESS_TOKEN=L},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(L){e.config.API_URL=L},get workerCount(){return ct.workerCount},set workerCount(L){ct.workerCount=L},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(L){e.config.MAX_PARALLEL_IMAGE_REQUESTS=L},clearStorage:function(L){e.clearTileCache(L)},workerUrl:""};return ce}),u},"object"==typeof K&&void 0!==Q?Q.exports=v():(p=p||self).mapboxgl=v()},{}],240:[function(x,Q,K){"use strict";Q.exports=Math.log2||function(p){return Math.log(p)*Math.LOG2E}},{}],241:[function(x,Q,K){"use strict";Q.exports=function(v,u){u||(u=v,v=window);var y=0,e=0,n=0,t={shift:!1,alt:!1,control:!1,meta:!1},a=!1;function r(b){var g=!1;return"altKey"in b&&(g=g||b.altKey!==t.alt,t.alt=!!b.altKey),"shiftKey"in b&&(g=g||b.shiftKey!==t.shift,t.shift=!!b.shiftKey),"ctrlKey"in b&&(g=g||b.ctrlKey!==t.control,t.control=!!b.ctrlKey),"metaKey"in b&&(g=g||b.metaKey!==t.meta,t.meta=!!b.metaKey),g}function f(b,g){var w=p.x(g),_=p.y(g);"buttons"in g&&(b=0|g.buttons),(b!==y||w!==e||_!==n||r(g))&&(y=0|b,e=w||0,n=_||0,u&&u(y,e,n,t))}function s(b){f(0,b)}function i(){(y||e||n||t.shift||t.alt||t.meta||t.control)&&(e=n=0,y=0,t.shift=t.alt=t.control=t.meta=!1,u&&u(0,0,0,t))}function l(b){r(b)&&u&&u(y,e,n,t)}function c(b){0===p.buttons(b)?f(0,b):f(y,b)}function h(b){f(y|p.buttons(b),b)}function m(b){f(y&~p.buttons(b),b)}function d(){a||(a=!0,v.addEventListener("mousemove",c),v.addEventListener("mousedown",h),v.addEventListener("mouseup",m),v.addEventListener("mouseleave",s),v.addEventListener("mouseenter",s),v.addEventListener("mouseout",s),v.addEventListener("mouseover",s),v.addEventListener("blur",i),v.addEventListener("keyup",l),v.addEventListener("keydown",l),v.addEventListener("keypress",l),v!==window&&(window.addEventListener("blur",i),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}d();var o={element:v};return Object.defineProperties(o,{enabled:{get:function(){return a},set:function(b){b?d():!a||(a=!1,v.removeEventListener("mousemove",c),v.removeEventListener("mousedown",h),v.removeEventListener("mouseup",m),v.removeEventListener("mouseleave",s),v.removeEventListener("mouseenter",s),v.removeEventListener("mouseout",s),v.removeEventListener("mouseover",s),v.removeEventListener("blur",i),v.removeEventListener("keyup",l),v.removeEventListener("keydown",l),v.removeEventListener("keypress",l),v!==window&&(window.removeEventListener("blur",i),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},buttons:{get:function(){return y},enumerable:!0},x:{get:function(){return e},enumerable:!0},y:{get:function(){return n},enumerable:!0},mods:{get:function(){return t},enumerable:!0}}),o};var p=x("mouse-event")},{"mouse-event":243}],242:[function(x,Q,K){var p={left:0,top:0};Q.exports=function(v,u,y){u=u||v.currentTarget||v.srcElement,Array.isArray(y)||(y=[0,0]);var a,e=v.clientX||0,n=v.clientY||0,t=(a=u)===window||a===document||a===document.body?p:a.getBoundingClientRect();return y[0]=e-t.left,y[1]=n-t.top,y}},{}],243:[function(x,Q,K){"use strict";function p(v){return v.target||v.srcElement||window}K.buttons=function(v){if("object"==typeof v){if("buttons"in v)return v.buttons;if("which"in v){if(2===(u=v.which))return 4;if(3===u)return 2;if(u>0)return 1<<u-1}else if("button"in v){var u;if(1===(u=v.button))return 4;if(2===u)return 2;if(u>=0)return 1<<u}}return 0},K.element=p,K.x=function(v){if("object"==typeof v){if("offsetX"in v)return v.offsetX;var u=p(v).getBoundingClientRect();return v.clientX-u.left}return 0},K.y=function(v){if("object"==typeof v){if("offsetY"in v)return v.offsetY;var u=p(v).getBoundingClientRect();return v.clientY-u.top}return 0}},{}],244:[function(x,Q,K){"use strict";var p=x("to-px");Q.exports=function(v,u,y){"function"==typeof v&&(y=!!u,u=v,v=window);var e=p("ex",v),n=function(t){y&&t.preventDefault();var a=t.deltaX||0,r=t.deltaY||0,f=t.deltaZ||0,s=1;switch(t.deltaMode){case 1:s=e;break;case 2:s=window.innerHeight}if(r*=s,f*=s,(a*=s)||r||f)return u(a,r,f,t)};return v.addEventListener("wheel",n),n}},{"to-px":314}],245:[function(x,Q,K){(function(p,v){(function(){var u,y,e;e=function(){"use strict";var u,y,e,n=Object.prototype.toString,t=void 0!==v?function(b){return v(b)}:setTimeout;try{Object.defineProperty({},"x",{}),u=function(b,g,w,_){return Object.defineProperty(b,g,{value:w,writable:!0,configurable:!1!==_})}}catch(b){u=function(g,w,_){return g[w]=_,g}}function a(b,g){e.add(b,g),y||(y=t(e.drain))}function r(b){var g,w=typeof b;return null==b||"object"!=w&&"function"!=w||(g=b.then),"function"==typeof g&&g}function f(){for(var b=0;b<this.chain.length;b++)s(this,1===this.state?this.chain[b].success:this.chain[b].failure,this.chain[b]);this.chain.length=0}function s(b,g,w){var _,A;try{!1===g?w.reject(b.msg):(_=!0===g?b.msg:g.call(void 0,b.msg))===w.promise?w.reject(TypeError("Promise-chain cycle")):(A=r(_))?A.call(_,w.resolve,w.reject):w.resolve(_)}catch(T){w.reject(T)}}function i(b){var g,w=this;if(!w.triggered){w.triggered=!0,w.def&&(w=w.def);try{(g=r(b))?a(function(){var _=new h(w);try{g.call(b,function(){i.apply(_,arguments)},function(){l.apply(_,arguments)})}catch(A){l.call(_,A)}}):(w.msg=b,w.state=1,w.chain.length>0&&a(f,w))}catch(_){l.call(new h(w),_)}}}function l(b){var g=this;g.triggered||(g.triggered=!0,g.def&&(g=g.def),g.msg=b,g.state=2,g.chain.length>0&&a(f,g))}function c(b,g,w,_){for(var A=0;A<g.length;A++)!function(T){b.resolve(g[T]).then(function(E){w(T,E)},_)}(A)}function h(b){this.def=b,this.triggered=!1}function m(b){this.promise=b,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function d(b){if("function"!=typeof b)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var g=new m(this);this.then=function(w,_){var A={success:"function"!=typeof w||w,failure:"function"==typeof _&&_};return A.promise=new this.constructor(function(T,E){if("function"!=typeof T||"function"!=typeof E)throw TypeError("Not a function");A.resolve=T,A.reject=E}),g.chain.push(A),0!==g.state&&a(f,g),A.promise},this.catch=function(w){return this.then(void 0,w)};try{b.call(void 0,function(w){i.call(g,w)},function(w){l.call(g,w)})}catch(w){l.call(g,w)}}e=function(){var b,g,w;function _(A,T){this.fn=A,this.self=T,this.next=void 0}return{add:function(A,T){w=new _(A,T),g?g.next=w:b=w,g=w,w=void 0},drain:function(){var A=b;for(b=g=y=void 0;A;)A.fn.call(A.self),A=A.next}}}();var o=u({},"constructor",d,!1);return d.prototype=o,u(o,"__NPO__",0,!1),u(d,"resolve",function(b){return b&&"object"==typeof b&&1===b.__NPO__?b:new this(function(g,w){if("function"!=typeof g||"function"!=typeof w)throw TypeError("Not a function");g(b)})}),u(d,"reject",function(b){return new this(function(g,w){if("function"!=typeof g||"function"!=typeof w)throw TypeError("Not a function");w(b)})}),u(d,"all",function(b){var g=this;return"[object Array]"!=n.call(b)?g.reject(TypeError("Not an array")):0===b.length?g.resolve([]):new g(function(w,_){if("function"!=typeof w||"function"!=typeof _)throw TypeError("Not a function");var A=b.length,T=Array(A),E=0;c(g,b,function(k,O){T[k]=O,++E===A&&w(T)},_)})}),u(d,"race",function(b){var g=this;return"[object Array]"!=n.call(b)?g.reject(TypeError("Not an array")):new g(function(w,_){if("function"!=typeof w||"function"!=typeof _)throw TypeError("Not a function");c(g,b,function(A,T){w(T)},_)})}),d},(y=void 0!==p?p:this)[u="Promise"]=y[u]||e(),void 0!==Q&&Q.exports&&(Q.exports=y[u])}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},x("timers").setImmediate)},{timers:311}],246:[function(x,Q,K){var p=Math.PI,v=t(120);function u(a,r,f,s){return["C",a,r,f,s,f,s]}function y(a,r,f,s,i,l){return["C",a/3+2/3*f,r/3+2/3*s,i/3+2/3*f,l/3+2/3*s,i,l]}function e(a,r,f,s,i,l,c,h,m,d){if(d)O=d[0],D=d[1],E=d[2],k=d[3];else{var o=n(a,r,-i);r=o.y;var b=((a=o.x)-(h=(o=n(h,m,-i)).x))/2,g=(r-(m=o.y))/2,w=b*b/(f*f)+g*g/(s*s);w>1&&(f*=w=Math.sqrt(w),s*=w);var _=f*f,A=s*s,T=(l==c?-1:1)*Math.sqrt(Math.abs((_*A-_*g*g-A*b*b)/(_*g*g+A*b*b)));T==1/0&&(T=1);var E=T*f*g/s+(a+h)/2,k=T*-s*b/f+(r+m)/2,O=Math.asin(((r-k)/s).toFixed(9)),D=Math.asin(((m-k)/s).toFixed(9));(O=a<E?p-O:O)<0&&(O=2*p+O),(D=h<E?p-D:D)<0&&(D=2*p+D),c&&O>D&&(O-=2*p),!c&&D>O&&(D-=2*p)}if(Math.abs(D-O)>v){var S=D,C=h,z=m;D=O+v*(c&&D>O?1:-1);var B=e(h=E+f*Math.cos(D),m=k+s*Math.sin(D),f,s,i,0,c,C,z,[D,S,E,k])}var U=Math.tan((D-O)/4),G=4/3*f*U,X=4/3*s*U,Z=[2*a-(a+G*Math.sin(O)),2*r-(r-X*Math.cos(O)),h+G*Math.sin(D),m-X*Math.cos(D),h,m];if(d)return Z;B&&(Z=Z.concat(B));for(var q=0;q<Z.length;){var W=n(Z[q],Z[q+1],i);Z[q++]=W.x,Z[q++]=W.y}return Z}function n(a,r,f){return{x:a*Math.cos(f)-r*Math.sin(f),y:a*Math.sin(f)+r*Math.cos(f)}}function t(a){return a*(p/180)}Q.exports=function(a){for(var r,f=[],s=0,i=0,l=0,c=0,h=null,m=null,d=0,o=0,b=0,g=a.length;b<g;b++){var w=a[b],_=w[0];switch(_){case"M":l=w[1],c=w[2];break;case"A":(w=e(d,o,w[1],w[2],t(w[3]),w[4],w[5],w[6],w[7])).unshift("C"),w.length>7&&(f.push(w.splice(0,7)),w.unshift("C"));break;case"S":var A=d,T=o;"C"!=r&&"S"!=r||(A+=A-s,T+=T-i),w=["C",A,T,w[1],w[2],w[3],w[4]];break;case"T":"Q"==r||"T"==r?(h=2*d-h,m=2*o-m):(h=d,m=o),w=y(d,o,h,m,w[1],w[2]);break;case"Q":h=w[1],m=w[2],w=y(d,o,w[1],w[2],w[3],w[4]);break;case"L":w=u(d,o,w[1],w[2]);break;case"H":w=u(d,o,w[1],o);break;case"V":w=u(d,o,d,w[1]);break;case"Z":w=u(d,o,l,c)}r=_,d=w[w.length-2],o=w[w.length-1],w.length>4?(s=w[w.length-4],i=w[w.length-3]):(s=d,i=o),f.push(w)}return f}},{}],247:[function(x,Q,K){"use strict";var p=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;function y(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}Q.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(n).map(function(r){return n[r]}).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(r){a[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(r){return!1}}()?Object.assign:function(e,n){for(var t,a,r=y(e),f=1;f<arguments.length;f++){for(var s in t=Object(arguments[f]))v.call(t,s)&&(r[s]=t[s]);if(p){a=p(t);for(var i=0;i<a.length;i++)u.call(t,a[i])&&(r[a[i]]=t[a[i]])}}return r}},{}],248:[function(x,Q,K){"use strict";function p(y,e){if("string"!=typeof y)return[y];var n=[y];"string"==typeof e||Array.isArray(e)?e={brackets:e}:e||(e={});var t=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],a=e.escape||"___",r=!!e.flat;t.forEach(function(s){var i=new RegExp(["\\",s[0],"[^\\",s[0],"\\",s[1],"]*\\",s[1]].join("")),l=[];function c(h,m,d){var o=n.push(h.slice(s[0].length,-s[1].length))-1;return l.push(o),a+o+a}n.forEach(function(h,m){for(var d,o=0;h!=d;)if(d=h,h=h.replace(i,c),o++>1e4)throw Error("References have circular dependency. Please, check them.");n[m]=h}),l=l.reverse(),n=n.map(function(h){return l.forEach(function(m){h=h.replace(new RegExp("(\\"+a+m+"\\"+a+")","g"),s[0]+"$1"+s[1])}),h})});var f=new RegExp("\\"+a+"([0-9]+)\\"+a);return r?n:function s(i,l,c){for(var h,m=[],d=0;h=f.exec(i);){if(d++>1e4)throw Error("Circular references in parenthesis");m.push(i.slice(0,h.index)),m.push(s(l[h[1]],l)),i=i.slice(h.index+h[0].length)}return m.push(i),m}(n[0],n)}function v(y,e){if(e&&e.flat){var n,t=e&&e.escape||"___",a=y[0];if(!a)return"";for(var r=new RegExp("\\"+t+"([0-9]+)\\"+t),f=0;a!=n;){if(f++>1e4)throw Error("Circular references in "+y);n=a,a=a.replace(r,s)}return a}return y.reduce(function i(l,c){return Array.isArray(c)&&(c=c.reduce(i,"")),l+c},"");function s(i,l){if(null==y[l])throw Error("Reference "+l+"is undefined");return y[l]}}function u(y,e){return Array.isArray(y)?v(y,e):p(y,e)}u.parse=p,u.stringify=v,Q.exports=u},{}],249:[function(x,Q,K){"use strict";var p=x("pick-by-alias");Q.exports=function(v){var u;return arguments.length>1&&(v=arguments),"string"==typeof v?v=v.split(/\s/).map(parseFloat):"number"==typeof v&&(v=[v]),v.length&&"number"==typeof v[0]?u=1===v.length?{width:v[0],height:v[0],x:0,y:0}:2===v.length?{width:v[0],height:v[1],x:0,y:0}:{x:v[0],y:v[1],width:v[2]-v[0]||0,height:v[3]-v[1]||0}:v&&((u={x:(v=p(v,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:v.top||0}).width=null==v.width?v.right?v.right-u.x:0:v.width,u.height=null==v.height?v.bottom?v.bottom-u.y:0:v.height),u}},{"pick-by-alias":253}],250:[function(x,Q,K){Q.exports=function(y){var e=[];return y.replace(v,function(n,t,a){var s,r=t.toLowerCase();for(s=void 0,a=(s=a.match(u))?s.map(Number):[],"m"==r&&a.length>2&&(e.push([t].concat(a.splice(0,2))),r="l",t="m"==t?"l":"L");;){if(a.length==p[r])return a.unshift(t),e.push(a);if(a.length<p[r])throw new Error("malformed path data");e.push([t].concat(a.splice(0,p[r])))}}),e};var p={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},v=/([astvzqmhlc])([^astvzqmhlc]*)/gi,u=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(x,Q,K){Q.exports=function(p,v){v||(v=[0,""]),p=String(p);var u=parseFloat(p,10);return v[0]=u,v[1]=p.match(/[\d.\-\+]*\s*(.*)/)[1]||"",v}},{}],252:[function(x,Q,K){(function(p){(function(){(function(){var v,u,y,e,n,t;"undefined"!=typeof performance&&null!==performance&&performance.now?Q.exports=function(){return performance.now()}:null!=p&&p.hrtime?(Q.exports=function(){return(v()-n)/1e6},u=p.hrtime,e=(v=function(){var a;return 1e9*(a=u())[0]+a[1]})(),t=1e9*p.uptime(),n=e-t):Date.now?(Q.exports=function(){return Date.now()-y},y=Date.now()):(Q.exports=function(){return(new Date).getTime()-y},y=(new Date).getTime())}).call(this)}).call(this)}).call(this,x("_process"))},{_process:277}],253:[function(x,Q,K){"use strict";Q.exports=function(u,y,e){var n,t,a={};if("string"==typeof y&&(y=v(y)),Array.isArray(y)){var r={};for(t=0;t<y.length;t++)r[y[t]]=!0;y=r}for(n in y)y[n]=v(y[n]);var f={};for(n in y){var s=y[n];if(Array.isArray(s))for(t=0;t<s.length;t++){var i=s[t];if(e&&(f[i]=!0),i in u){if(a[n]=u[i],e)for(var l=t;l<s.length;l++)f[s[l]]=!0;break}}else n in u&&(y[n]&&(a[n]=u[n]),e&&(f[n]=!0))}if(e)for(n in u)f[n]||(a[n]=u[n]);return a};var p={};function v(u){return p[u]?p[u]:("string"==typeof u&&(u=p[u]=u.split(/\s*,\s*|\s+/)),u)}},{}],254:[function(x,Q,K){var p,v=x("./lib/build-log"),u=x("./lib/epsilon"),y=x("./lib/intersecter"),e=x("./lib/segment-chainer"),n=x("./lib/segment-selector"),t=x("./lib/geojson"),a=!1,r=u();function f(s,i,l){var c=p.segments(s),h=p.segments(i),m=l(p.combine(c,h));return p.polygon(m)}p={buildLog:function(s){return!0===s?a=v():!1===s&&(a=!1),!1!==a&&a.list},epsilon:function(s){return r.epsilon(s)},segments:function(s){var i=y(!0,r,a);return s.regions.forEach(i.addRegion),{segments:i.calculate(s.inverted),inverted:s.inverted}},combine:function(s,i){return{combined:y(!1,r,a).calculate(s.segments,s.inverted,i.segments,i.inverted),inverted1:s.inverted,inverted2:i.inverted}},selectUnion:function(s){return{segments:n.union(s.combined,a),inverted:s.inverted1||s.inverted2}},selectIntersect:function(s){return{segments:n.intersect(s.combined,a),inverted:s.inverted1&&s.inverted2}},selectDifference:function(s){return{segments:n.difference(s.combined,a),inverted:s.inverted1&&!s.inverted2}},selectDifferenceRev:function(s){return{segments:n.differenceRev(s.combined,a),inverted:!s.inverted1&&s.inverted2}},selectXor:function(s){return{segments:n.xor(s.combined,a),inverted:s.inverted1!==s.inverted2}},polygon:function(s){return{regions:e(s.segments,r,a),inverted:s.inverted}},polygonFromGeoJSON:function(s){return t.toPolygon(p,s)},polygonToGeoJSON:function(s){return t.fromPolygon(p,r,s)},union:function(s,i){return f(s,i,p.selectUnion)},intersect:function(s,i){return f(s,i,p.selectIntersect)},difference:function(s,i){return f(s,i,p.selectDifference)},differenceRev:function(s,i){return f(s,i,p.selectDifferenceRev)},xor:function(s,i){return f(s,i,p.selectXor)}},"object"==typeof window&&(window.PolyBool=p),Q.exports=p},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(x,Q,K){Q.exports=function(){var p,v=0,u=!1;function y(e,n){return p.list.push({type:e,data:n?JSON.parse(JSON.stringify(n)):void 0}),p}return p={list:[],segmentId:function(){return v++},checkIntersection:function(e,n){return y("check",{seg1:e,seg2:n})},segmentChop:function(e,n){return y("div_seg",{seg:e,pt:n}),y("chop",{seg:e,pt:n})},statusRemove:function(e){return y("pop_seg",{seg:e})},segmentUpdate:function(e){return y("seg_update",{seg:e})},segmentNew:function(e,n){return y("new_seg",{seg:e,primary:n})},segmentRemove:function(e){return y("rem_seg",{seg:e})},tempStatus:function(e,n,t){return y("temp_status",{seg:e,above:n,below:t})},rewind:function(e){return y("rewind",{seg:e})},status:function(e,n,t){return y("status",{seg:e,above:n,below:t})},vert:function(e){return e===u?p:(u=e,y("vert",{x:e}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),y("log",{txt:e})},reset:function(){return y("reset")},selected:function(e){return y("selected",{segs:e})},chainStart:function(e){return y("chain_start",{seg:e})},chainRemoveHead:function(e,n){return y("chain_rem_head",{index:e,pt:n})},chainRemoveTail:function(e,n){return y("chain_rem_tail",{index:e,pt:n})},chainNew:function(e,n){return y("chain_new",{pt1:e,pt2:n})},chainMatch:function(e){return y("chain_match",{index:e})},chainClose:function(e){return y("chain_close",{index:e})},chainAddHead:function(e,n){return y("chain_add_head",{index:e,pt:n})},chainAddTail:function(e,n){return y("chain_add_tail",{index:e,pt:n})},chainConnect:function(e,n){return y("chain_con",{index1:e,index2:n})},chainReverse:function(e){return y("chain_rev",{index:e})},chainJoin:function(e,n){return y("chain_join",{index1:e,index2:n})},done:function(){return y("done")}}}},{}],256:[function(x,Q,K){Q.exports=function(p){"number"!=typeof p&&(p=1e-10);var v={epsilon:function(u){return"number"==typeof u&&(p=u),p},pointAboveOrOnLine:function(u,y,e){var n=y[0],t=y[1];return(e[0]-n)*(u[1]-t)-(e[1]-t)*(u[0]-n)>=-p},pointBetween:function(u,y,e){var t=e[0]-y[0],r=e[1]-y[1],f=(u[0]-y[0])*t+(u[1]-y[1])*r;return!(f<p||f-(t*t+r*r)>-p)},pointsSameX:function(u,y){return Math.abs(u[0]-y[0])<p},pointsSameY:function(u,y){return Math.abs(u[1]-y[1])<p},pointsSame:function(u,y){return v.pointsSameX(u,y)&&v.pointsSameY(u,y)},pointsCompare:function(u,y){return v.pointsSameX(u,y)?v.pointsSameY(u,y)?0:u[1]<y[1]?-1:1:u[0]<y[0]?-1:1},pointsCollinear:function(u,y,e){return Math.abs((u[0]-y[0])*(y[1]-e[1])-(y[0]-e[0])*(u[1]-y[1]))<p},linesIntersect:function(u,y,e,n){var t=y[0]-u[0],a=y[1]-u[1],r=n[0]-e[0],f=n[1]-e[1],s=t*f-a*r;if(Math.abs(s)<p)return!1;var i=u[0]-e[0],l=u[1]-e[1],c=(r*l-f*i)/s,h=(t*l-a*i)/s,m={alongA:0,alongB:0,pt:[u[0]+c*t,u[1]+c*a]};return m.alongA=c<=-p?-2:c<p?-1:c-1<=-p?0:c-1<p?1:2,m.alongB=h<=-p?-2:h<p?-1:h-1<=-p?0:h-1<p?1:2,m},pointInsideRegion:function(u,y){for(var e=u[0],n=u[1],t=y[y.length-1][0],a=y[y.length-1][1],r=!1,f=0;f<y.length;f++){var s=y[f][0],i=y[f][1];i-n>p!=a-n>p&&(t-s)*(n-i)/(a-i)+s-e>p&&(r=!r),t=s,a=i}return r}};return v}},{}],257:[function(x,Q,K){Q.exports={toPolygon:function(v,u){function y(t){if(t.length<=0)return v.segments({inverted:!1,regions:[]});function a(s){var i=s.slice(0,s.length-1);return v.segments({inverted:!1,regions:[i]})}for(var r=a(t[0]),f=1;f<t.length;f++)r=v.selectDifference(v.combine(r,a(t[f])));return r}if("Polygon"===u.type)return v.polygon(y(u.coordinates));if("MultiPolygon"===u.type){for(var e=v.segments({inverted:!1,regions:[]}),n=0;n<u.coordinates.length;n++)e=v.selectUnion(v.combine(e,y(u.coordinates[n])));return v.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(v,u,y){function e(h,m){return u.pointInsideRegion([.5*(h[0][0]+h[1][0]),.5*(h[0][1]+h[1][1])],m)}function n(h){return{region:h,children:[]}}y=v.polygon(v.segments(y));var t=n(null);function a(h,m){for(var d=0;d<h.children.length;d++)if(e(m,(b=h.children[d]).region))return void a(b,m);var o=n(m);for(d=0;d<h.children.length;d++){var b;e((b=h.children[d]).region,m)&&(o.children.push(b),h.children.splice(d,1),d--)}h.children.push(o)}for(var r=0;r<y.regions.length;r++){var f=y.regions[r];f.length<3||a(t,f)}function s(h,m){for(var d=0,o=h[h.length-1][0],b=h[h.length-1][1],g=[],w=0;w<h.length;w++){var _=h[w][0],A=h[w][1];g.push([_,A]),d+=A*o-_*b,o=_,b=A}return d<0!==m&&g.reverse(),g.push([g[0][0],g[0][1]]),g}var i=[];function l(h){var m=[s(h.region,!1)];i.push(m);for(var d=0;d<h.children.length;d++)m.push(c(h.children[d]))}function c(h){for(var m=0;m<h.children.length;m++)l(h.children[m]);return s(h.region,!0)}for(r=0;r<t.children.length;r++)l(t.children[r]);return i.length<=0?{type:"Polygon",coordinates:[]}:1==i.length?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}}},{}],258:[function(x,Q,K){var p=x("./linked-list");Q.exports=function(v,u,y){function e(s,i,l){return{id:y?y.segmentId():-1,start:s,end:i,myFill:{above:l.myFill.above,below:l.myFill.below},otherFill:null}}var n=p.create();function t(s,i){n.insertBefore(s,function(l){return c=s.isStart,m=i,d=l.isStart,b=l.other.pt,(0!==(g=u.pointsCompare(s.pt,o=l.pt))?g:u.pointsSame(m,b)?0:c!==d?c?1:-1:u.pointAboveOrOnLine(m,d?o:b,d?b:o)?1:-1)<0;var c,m,d,o,b,g})}function a(s,i){var c,m,l=(t(m=p.node({isStart:!0,pt:(c=s).start,seg:c,primary:i,other:null,status:null}),c.end),m);return function(c,h,m){var d=p.node({isStart:!1,pt:h.end,seg:h,primary:m,other:c,status:null});c.other=d,t(d,c.pt)}(l,s,i),l}function r(s,i){var c,h,l=e(i,s.seg.end,s.seg);return c=s,h=i,y&&y.segmentChop(c.seg,h),c.other.remove(),c.seg.end=h,c.other.pt=h,t(c.other,c.pt),a(l,s.primary)}function f(s,i){var l=p.create();function c(O){return l.findTransition(function(D){var S,C,z,B,U,G;return B=(S=O).seg.end,(u.pointsCollinear(z=S.seg.start,U=(C=D.ev).seg.start,G=C.seg.end)?u.pointsCollinear(B,U,G)||u.pointAboveOrOnLine(B,U,G)?1:-1:u.pointAboveOrOnLine(z,U,G)?1:-1)>0})}function h(O,D){var S=O.seg,C=D.seg,z=S.start,B=S.end,U=C.start,G=C.end;y&&y.checkIntersection(S,C);var X=u.linesIntersect(z,B,U,G);if(!1===X){if(!u.pointsCollinear(z,B,U)||u.pointsSame(z,G)||u.pointsSame(B,U))return!1;var Z=u.pointsSame(z,U),q=u.pointsSame(B,G);if(Z&&q)return D;var W=!Z&&u.pointBetween(z,U,G),te=!q&&u.pointBetween(B,U,G);if(Z)return te?r(D,B):r(O,G),D;W&&(q||(te?r(D,B):r(O,G)),r(D,z))}else 0===X.alongA&&(-1===X.alongB?r(O,U):0===X.alongB?r(O,X.pt):1===X.alongB&&r(O,G)),0===X.alongB&&(-1===X.alongA?r(D,z):0===X.alongA?r(D,X.pt):1===X.alongA&&r(D,B));return!1}for(var m=[];!n.isEmpty();){var d=n.getHead();if(y&&y.vert(d.pt[0]),d.isStart){let O=function(){if(b){var D=h(d,b);if(D)return D}return!!g&&h(d,g)};y&&y.segmentNew(d.seg,d.primary);var o=c(d),b=o.before?o.before.ev:null,g=o.after?o.after.ev:null;y&&y.tempStatus(d.seg,!!b&&b.seg,!!g&&g.seg);var w,A,_=O();if(_&&(v?(A=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=d.seg.myFill,y&&y.segmentUpdate(_.seg),d.other.remove(),d.remove()),n.getHead()!==d){y&&y.rewind(d.seg);continue}v?(A=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below,d.seg.myFill.below=g?g.seg.myFill.above:s,d.seg.myFill.above=A?!d.seg.myFill.below:d.seg.myFill.below):null===d.seg.otherFill&&(d.seg.otherFill={above:w=g?d.primary===g.primary?g.seg.otherFill.above:g.seg.myFill.above:d.primary?i:s,below:w}),y&&y.status(d.seg,!!b&&b.seg,!!g&&g.seg),d.other.status=o.insert(p.node({ev:d}))}else{var T=d.status;if(null===T)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(l.exists(T.prev)&&l.exists(T.next)&&h(T.prev.ev,T.next.ev),y&&y.statusRemove(T.ev.seg),T.remove(),!d.primary){var E=d.seg.myFill;d.seg.myFill=d.seg.otherFill,d.seg.otherFill=E}m.push(d.seg)}n.getHead().remove()}return y&&y.done(),m}return v?{addRegion:function(s){for(var i,l,c,h=s[s.length-1],m=0;m<s.length;m++){var d=u.pointsCompare(i=h,h=s[m]);0!==d&&a((l=d<0?i:h,c=d<0?h:i,{id:y?y.segmentId():-1,start:l,end:c,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(s){return f(s,!1)}}:{calculate:function(s,i,l,c){return s.forEach(function(h){a(e(h.start,h.end,h),!0)}),l.forEach(function(h){a(e(h.start,h.end,h),!1)}),f(i,c)}}}},{"./linked-list":259}],259:[function(x,Q,K){Q.exports={create:function(){var p={root:{root:!0,next:null},exists:function(v){return null!==v&&v!==p.root},isEmpty:function(){return null===p.root.next},getHead:function(){return p.root.next},insertBefore:function(v,u){for(var y=p.root,e=p.root.next;null!==e;){if(u(e))return v.prev=e.prev,v.next=e,e.prev.next=v,void(e.prev=v);y=e,e=e.next}y.next=v,v.prev=y,v.next=null},findTransition:function(v){for(var u=p.root,y=p.root.next;null!==y&&!v(y);)u=y,y=y.next;return{before:u===p.root?null:u,after:y,insert:function(e){return e.prev=u,e.next=y,u.next=e,null!==y&&(y.prev=e),e}}}};return p},node:function(p){return p.prev=null,p.next=null,p.remove=function(){p.prev.next=p.next,p.next&&(p.next.prev=p.prev),p.prev=null,p.next=null},p}}},{}],260:[function(x,Q,K){Q.exports=function(p,v,u){var y=[],e=[];return p.forEach(function(n){var t=n.start,a=n.end;if(v.pointsSame(t,a))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{u&&u.chainStart(n);for(var r={index:0,matches_head:!1,matches_pt1:!1},f={index:0,matches_head:!1,matches_pt1:!1},s=r,i=0;i<y.length;i++){var l=(o=y[i])[0],c=o[o.length-1];if(v.pointsSame(l,t)){if(k(i,!0,!0))break}else if(v.pointsSame(l,a)){if(k(i,!0,!1))break}else if(v.pointsSame(c,t)){if(k(i,!1,!0))break}else if(v.pointsSame(c,a)&&k(i,!1,!1))break}if(s===r)return y.push([t,a]),void(u&&u.chainNew(t,a));if(s===f){u&&u.chainMatch(r.index);var h=r.index,m=r.matches_pt1?a:t,d=r.matches_head,o=y[h],b=d?o[0]:o[o.length-1],g=d?o[1]:o[o.length-2],w=d?o[o.length-1]:o[0],_=d?o[o.length-2]:o[1];return v.pointsCollinear(g,b,m)&&(d?(u&&u.chainRemoveHead(r.index,m),o.shift()):(u&&u.chainRemoveTail(r.index,m),o.pop()),b=g),v.pointsSame(w,m)?(y.splice(h,1),v.pointsCollinear(_,w,b)&&(d?(u&&u.chainRemoveTail(r.index,b),o.pop()):(u&&u.chainRemoveHead(r.index,b),o.shift())),u&&u.chainClose(r.index),void e.push(o)):void(d?(u&&u.chainAddHead(r.index,m),o.unshift(m)):(u&&u.chainAddTail(r.index,m),o.push(m)))}var A=r.index,T=f.index;u&&u.chainConnect(A,T);var E=y[A].length<y[T].length;r.matches_head?f.matches_head?E?(O(A),D(A,T)):(O(T),D(T,A)):D(T,A):f.matches_head?D(A,T):E?(O(A),D(T,A)):(O(T),D(A,T))}function k(S,C,z){return s.index=S,s.matches_head=C,s.matches_pt1=z,s===r?(s=f,!1):(s=null,!0)}function O(S){u&&u.chainReverse(S),y[S].reverse()}function D(S,C){var z=y[S],B=y[C],U=z[z.length-1],G=z[z.length-2],X=B[0],Z=B[1];v.pointsCollinear(G,U,X)&&(u&&u.chainRemoveTail(S,U),z.pop(),U=G),v.pointsCollinear(U,X,Z)&&(u&&u.chainRemoveHead(C,X),B.shift()),u&&u.chainJoin(S,C),y[S]=z.concat(B),y.splice(C,1)}}),e}},{}],261:[function(x,Q,K){function p(u,y,e){var n=[];return u.forEach(function(t){var a=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==y[a]&&n.push({id:e?e.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===y[a],below:2===y[a]},otherFill:null})}),e&&e.selected(n),n}Q.exports={union:function(u,y){return p(u,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],y)},intersect:function(u,y){return p(u,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],y)},difference:function(u,y){return p(u,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],y)},differenceRev:function(u,y){return p(u,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],y)},xor:function(u,y){return p(u,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],y)}}},{}],262:[function(x,Q,K){"use strict";var p=x("stream").Transform,v=x("stream-parser");function u(){p.call(this,{readableObjectMode:!0})}function y(e,n,t){Error.call(this),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e,n&&(this.code=n),t&&(this.statusCode=t)}(u.prototype=Object.create(p.prototype)).constructor=u,v(u.prototype),K.ParserStream=u,K.sliceEq=function(e,n,t){for(var a=n,r=0;r<t.length;)if(e[a++]!==t[r++])return!1;return!0},K.str2arr=function(e,n){var t=[],a=0;if(n&&"hex"===n)for(;a<e.length;)t.push(parseInt(e.slice(a,a+2),16)),a+=2;else for(;a<e.length;a++)t.push(255&e.charCodeAt(a));return t},K.readUInt16LE=function(e,n){return e[n]|e[n+1]<<8},K.readUInt16BE=function(e,n){return e[n+1]|e[n]<<8},K.readUInt32LE=function(e,n){return e[n]|e[n+1]<<8|e[n+2]<<16|16777216*e[n+3]},K.readUInt32BE=function(e,n){return e[n+3]|e[n+2]<<8|e[n+1]<<16|16777216*e[n]},(y.prototype=Object.create(Error.prototype)).constructor=y,K.ProbeError=y},{stream:285,"stream-parser":301}],263:[function(x,Q,K){"use strict";function p(y,e){var n=new Error(y);return n.code=e,n}function v(y){try{return decodeURIComponent(escape(y))}catch(e){return y}}function u(y,e,n){this.input=y.subarray(e,n),this.start=e;var t=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==t&&"MM\0*"!==t)throw p("invalid TIFF signature","EBADDATA");this.big_endian="M"===t[0]}u.prototype.each=function(y){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var n=this.ifds_to_read.shift();n.offset&&this.scan_ifd(n.id,n.offset,y)}},u.prototype.read_uint16=function(y){var e=this.input;if(y+2>e.length)throw p("unexpected EOF","EBADDATA");return this.big_endian?256*e[y]+e[y+1]:e[y]+256*e[y+1]},u.prototype.read_uint32=function(y){var e=this.input;if(y+4>e.length)throw p("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[y]+65536*e[y+1]+256*e[y+2]+e[y+3]:e[y]+256*e[y+1]+65536*e[y+2]+16777216*e[y+3]},u.prototype.is_subifd_link=function(y,e){return 0===y&&34665===e||0===y&&34853===e||34665===y&&40965===e},u.prototype.exif_format_length=function(y){switch(y){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},u.prototype.exif_format_read=function(y,e){var n;switch(y){case 1:case 2:return this.input[e];case 6:return(n=this.input[e])|33554430*(128&n);case 3:return this.read_uint16(e);case 8:return(n=this.read_uint16(e))|131070*(32768&n);case 4:return this.read_uint32(e);case 9:return 0|this.read_uint32(e);case 5:case 10:case 11:case 12:case 7:default:return null}},u.prototype.scan_ifd=function(y,e,n){var t=this.read_uint16(e);e+=2;for(var a=0;a<t;a++){var r=this.read_uint16(e),f=this.read_uint16(e+2),s=this.read_uint32(e+4),i=this.exif_format_length(f),l=s*i,c=l<=4?e+8:this.read_uint32(e+8),h=!1;if(c+l>this.input.length)throw p("unexpected EOF","EBADDATA");for(var m=[],d=c,o=0;o<s;o++,d+=i){var b=this.exif_format_read(f,d);if(null===b){m=null;break}m.push(b)}if(Array.isArray(m)&&2===f&&(m=v(String.fromCharCode.apply(null,m)))&&"\0"===m[m.length-1]&&(m=m.slice(0,-1)),this.is_subifd_link(y,r)&&Array.isArray(m)&&Number.isInteger(m[0])&&m[0]>0&&(this.ifds_to_read.push({id:r,offset:m[0]}),h=!0),!1===n({is_big_endian:this.big_endian,ifd:y,tag:r,format:f,count:s,entry_offset:e+this.start,data_length:l,data_offset:c+this.start,value:m,is_subifd_link:h}))return void(this.aborted=!0);e+=12}0===y&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},Q.exports.ExifParser=u,Q.exports.get_orientation=function(y){var e=0;try{return new u(y,0,y.length).each(function(n){if(0===n.ifd&&274===n.tag&&Array.isArray(n.value))return e=n.value[0],!1}),e}catch(n){return-1}}},{}],264:[function(x,Q,K){"use strict";var p=x("./common").readUInt16BE,v=x("./common").readUInt32BE;function u(r,f){if(r.length<4+f)return null;var s=v(r,f);return r.length<s+f||s<8?null:{boxtype:String.fromCharCode.apply(null,r.slice(f+4,f+8)),data:r.slice(f+8,f+s),end:f+s}}function y(r,f){for(var s=0;;){var i=u(r,s);if(!i)break;switch(i.boxtype){case"ispe":f.sizes.push({width:v(i.data,4),height:v(i.data,8)});break;case"irot":f.transforms.push({type:"irot",value:3&i.data[0]});break;case"imir":f.transforms.push({type:"imir",value:1&i.data[0]})}s=i.end}}function e(r,f,s){for(var i=0,l=0;l<s;l++)i=256*i+(r[f+l]||0);return i}function n(r,f){for(var s=r[4]>>4&15,i=15&r[4],l=r[5]>>4&15,c=p(r,6),h=8,m=0;m<c;m++){var d=p(r,h),o=p(r,h+=2),b=e(r,h+=2,l),g=p(r,h+=l);if(h+=2,0===o&&1===g){var w=e(r,h,s),_=e(r,h+s,i);f.item_loc[d]={length:_,offset:w+b}}h+=g*(s+i)}}function t(r,f){for(var s=p(r,4),i=6,l=0;l<s;l++){var c=u(r,i);if(!c)break;if("infe"===c.boxtype){for(var h=p(c.data,4),m="",d=8;d<c.data.length&&c.data[d];d++)m+=String.fromCharCode(c.data[d]);f.item_inf[m]=h}i=c.end}}function a(r,f){for(var s=0;;){var i=u(r,s);if(!i)break;"ipco"===i.boxtype&&y(i.data,f),s=i.end}}Q.exports.unbox=u,Q.exports.readSizeFromMeta=function(r){var f={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(d,o){for(var b=4;;){var g=u(d,b);if(!g)break;"iprp"===g.boxtype&&a(g.data,o),"iloc"===g.boxtype&&n(g.data,o),"iinf"===g.boxtype&&t(g.data,o),b=g.end}}(r,f),f.sizes.length){var s,i,l,c=(i=(s=f.sizes).reduce(function(d,o){return d.width>o.width||d.width===o.width&&d.height>o.height?d:o}),l=s.reduce(function(d,o){return d.height>o.height||d.height===o.height&&d.width>o.width?d:o}),i.width>l.height||i.width===l.height&&i.height>l.width?i:l),h=1;f.transforms.forEach(function(d){var o={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},b={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===d.type&&(h=0===d.value?b[h]:o[h=o[h=b[h]]]),"irot"===d.type)for(var g=0;g<d.value;g++)h=o[h]});var m=null;return f.item_inf.Exif&&(m=f.item_loc[f.item_inf.Exif]),{width:c.width,height:c.height,orientation:f.transforms.length?h:null,variants:f.sizes,exif_location:m}}},Q.exports.getMimeType=function(r){var f=String.fromCharCode.apply(null,r.slice(0,4)),s={};s[f]=!0;for(var i=8;i<r.length;i+=4)s[String.fromCharCode.apply(null,r.slice(i,i+4))]=!0;if(s.mif1||s.msf1||s.miaf)return"avif"===f||"avis"===f||"avio"===f?{type:"avif",mime:"image/avif"}:"heic"===f||"heix"===f?{type:"heic",mime:"image/heic"}:"hevc"===f||"hevx"===f?{type:"heic",mime:"image/heic-sequence"}:s.avif||s.avis?{type:"avif",mime:"image/avif"}:s.heic||s.heix||s.hevc||s.hevx||s.heis?s.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(x,Q,K){"use strict";var p=x("../common").str2arr,v=x("../common").sliceEq,u=x("../common").readUInt32BE,y=x("../miaf_utils"),e=x("../exif_utils"),n=p("ftyp");Q.exports=function(t){if(v(t,4,n)){var a=y.unbox(t,0);if(a){var r=y.getMimeType(a.data);if(r){for(var f,s=a.end;;){var i=y.unbox(t,s);if(!i)break;if(s=i.end,"mdat"===i.boxtype)return;if("meta"===i.boxtype){f=i.data;break}}if(f){var l=y.readSizeFromMeta(f);if(l){var c={width:l.width,height:l.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(l.variants.length>1&&(c.variants=l.variants),l.orientation&&(c.orientation=l.orientation),l.exif_location&&l.exif_location.offset+l.exif_location.length<=t.length){var h=u(t,l.exif_location.offset),m=t.slice(l.exif_location.offset+h+4,l.exif_location.offset+l.exif_location.length),d=e.get_orientation(m);d>0&&(c.orientation=d)}return c}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(x,Q,K){"use strict";var p=x("../common").str2arr,v=x("../common").sliceEq,u=x("../common").readUInt16LE,y=p("BM");Q.exports=function(e){if(!(e.length<26)&&v(e,0,y))return{width:u(e,18),height:u(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(x,Q,K){"use strict";var p=x("../common").str2arr,v=x("../common").sliceEq,u=x("../common").readUInt16LE,y=p("GIF87a"),e=p("GIF89a");Q.exports=function(n){if(!(n.length<10)&&(v(n,0,y)||v(n,0,e)))return{width:u(n,6),height:u(n,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(x,Q,K){"use strict";var p=x("../common").readUInt16LE;Q.exports=function(v){var u=p(v,0),y=p(v,2),e=p(v,4);if(0===u&&1===y&&e){for(var n=[],t={width:0,height:0},a=0;a<e;a++){var r=v[6+16*a]||256,f=v[6+16*a+1]||256,s={width:r,height:f};n.push(s),(r>t.width||f>t.height)&&(t=s)}return{width:t.width,height:t.height,variants:n,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(x,Q,K){"use strict";var p=x("../common").readUInt16BE,v=x("../common").str2arr,u=x("../common").sliceEq,y=x("../exif_utils"),e=v("Exif\0\0");Q.exports=function(n){if(!(n.length<2)&&255===n[0]&&216===n[1])for(var t=2;;){if(n.length-t<2||255!==n[t++])return;for(var a,r,f=n[t++];255===f;)f=n[t++];if(208<=f&&f<=217||1===f)a=0;else{if(!(192<=f&&f<=254)||n.length-t<2)return;a=p(n,t)-2,t+=2}if(217===f||218===f)return;if(225===f&&a>=10&&u(n,t,e)&&(r=y.get_orientation(n.slice(t+6,t+a))),a>=5&&192<=f&&f<=207&&196!==f&&200!==f&&204!==f){if(n.length-t<a)return;var s={width:p(n,t+3),height:p(n,t+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return r>0&&(s.orientation=r),s}t+=a}}},{"../common":262,"../exif_utils":263}],270:[function(x,Q,K){"use strict";var p=x("../common").str2arr,v=x("../common").sliceEq,u=x("../common").readUInt32BE,y=p("\x89PNG\r\n\x1a\n"),e=p("IHDR");Q.exports=function(n){if(!(n.length<24)&&v(n,0,y)&&v(n,12,e))return{width:u(n,16),height:u(n,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(x,Q,K){"use strict";var p=x("../common").str2arr,v=x("../common").sliceEq,u=x("../common").readUInt32BE,y=p("8BPS\0\x01");Q.exports=function(e){if(!(e.length<22)&&v(e,0,y))return{width:u(e,18),height:u(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(x,Q,K){"use strict";function p(r){return"number"==typeof r&&isFinite(r)&&r>0}var v=/<[-_.:a-zA-Z0-9][^>]*>/,u=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,y=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,e=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,n=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,t=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function a(r){return t.test(r)?r.match(t)[0]:"px"}Q.exports=function(r){if(function(w){var _,A=0,T=w.length;for(239===w[0]&&187===w[1]&&191===w[2]&&(A=3);A<T&&(32===(_=w[A])||9===_||13===_||10===_);)A++;return A!==T&&60===w[A]}(r)){for(var f="",s=0;s<r.length;s++)f+=String.fromCharCode(r[s]);var i=(f.match(v)||[""])[0];if(u.test(i)){var l=(_=(w=i).match(y),A=w.match(e),T=w.match(n),{width:_&&(_[1]||_[2]),height:A&&(A[1]||A[2]),viewbox:T&&(T[1]||T[2])}),c=parseFloat(l.width),h=parseFloat(l.height);if(l.width&&l.height)return p(c)&&p(h)?{width:c,height:h,type:"svg",mime:"image/svg+xml",wUnits:a(l.width),hUnits:a(l.height)}:void 0;var m=(l.viewbox||"").split(" "),d={width:m[2],height:m[3]},o=parseFloat(d.width),b=parseFloat(d.height);if(p(o)&&p(b)&&a(d.width)===a(d.height)){var g=o/b;return l.width?p(c)?{width:c,height:c/g,type:"svg",mime:"image/svg+xml",wUnits:a(l.width),hUnits:a(l.width)}:void 0:l.height?p(h)?{width:h*g,height:h,type:"svg",mime:"image/svg+xml",wUnits:a(l.height),hUnits:a(l.height)}:void 0:{width:o,height:b,type:"svg",mime:"image/svg+xml",wUnits:a(d.width),hUnits:a(d.height)}}}}var w,_,A,T}},{}],273:[function(x,Q,K){"use strict";var p=x("../common").str2arr,v=x("../common").sliceEq,u=x("../common").readUInt16LE,y=x("../common").readUInt16BE,e=x("../common").readUInt32LE,n=x("../common").readUInt32BE,t=p("II*\0"),a=p("MM\0*");function r(i,l,c){return c?y(i,l):u(i,l)}function f(i,l,c){return c?n(i,l):e(i,l)}function s(i,l,c){var h=r(i,l+2,c);return 1!==f(i,l+4,c)||3!==h&&4!==h?null:3===h?r(i,l+8,c):f(i,l+8,c)}Q.exports=function(i){if(!(i.length<8)&&(v(i,0,t)||v(i,0,a))){var l=77===i[0],c=f(i,4,l)-8;if(!(c<0)){var h=c+8;if(!(i.length-h<2)){var m=12*r(i,h+0,l);if(!(m<=0||(h+=2,i.length-h<m))){var d,o,b,g;for(d=0;d<m;d+=12)256===(g=r(i,h+d,l))?o=s(i,h+d,l):257===g&&(b=s(i,h+d,l));return o&&b?{width:o,height:b,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":262}],274:[function(x,Q,K){"use strict";var p=x("../common").str2arr,v=x("../common").sliceEq,u=x("../common").readUInt16LE,y=x("../common").readUInt32LE,e=x("../exif_utils"),n=p("RIFF"),t=p("WEBP");function a(s,i){if(157===s[i+3]&&1===s[i+4]&&42===s[i+5])return{width:16383&u(s,i+6),height:16383&u(s,i+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function r(s,i){if(47===s[i]){var l=y(s,i+1);return{width:1+(16383&l),height:1+(l>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function f(s,i){return{width:1+(s[i+6]<<16|s[i+5]<<8|s[i+4]),height:1+(s[i+9]<<i|s[i+8]<<8|s[i+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}Q.exports=function(s){if(!(s.length<16)&&(v(s,0,n)||v(s,8,t))){var i=12,l=null,c=0,h=y(s,4)+8;if(!(h>s.length)){for(;i+8<h;)if(0!==s[i]){var m=String.fromCharCode.apply(null,s.slice(i,i+4)),d=y(s,i+4);"VP8 "===m&&d>=10?l=l||a(s,i+8):"VP8L"===m&&d>=9?l=l||r(s,i+8):"VP8X"===m&&d>=10?l=l||f(s,i+8):"EXIF"===m&&(c=e.get_orientation(s.slice(i+8,i+8+d)),i=1/0),i+=8+d}else i++;if(l)return c>0&&(l.orientation=c),l}}}},{"../common":262,"../exif_utils":263}],275:[function(x,Q,K){"use strict";Q.exports={avif:x("./parse_sync/avif"),bmp:x("./parse_sync/bmp"),gif:x("./parse_sync/gif"),ico:x("./parse_sync/ico"),jpeg:x("./parse_sync/jpeg"),png:x("./parse_sync/png"),psd:x("./parse_sync/psd"),svg:x("./parse_sync/svg"),tiff:x("./parse_sync/tiff"),webp:x("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(x,Q,K){"use strict";var p=x("./lib/parsers_sync");Q.exports=function(v){return function(u){for(var y=Object.keys(p),e=0;e<y.length;e++){var n=p[y[e]](u);if(n)return n}return null}(v)},Q.exports.parsers=p},{"./lib/parsers_sync":275}],277:[function(x,Q,K){var p,v,u=Q.exports={};function y(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function n(h){if(p===setTimeout)return setTimeout(h,0);if((p===y||!p)&&setTimeout)return p=setTimeout,setTimeout(h,0);try{return p(h,0)}catch(m){try{return p.call(null,h,0)}catch(d){return p.call(this,h,0)}}}!function(){try{p="function"==typeof setTimeout?setTimeout:y}catch(h){p=y}try{v="function"==typeof clearTimeout?clearTimeout:e}catch(h){v=e}}();var t,a=[],r=!1,f=-1;function s(){r&&t&&(r=!1,t.length?a=t.concat(a):f=-1,a.length&&i())}function i(){if(!r){var h=n(s);r=!0;for(var m=a.length;m;){for(t=a,a=[];++f<m;)t&&t[f].run();f=-1,m=a.length}t=null,r=!1,function(d){if(v===clearTimeout)return clearTimeout(d);if((v===e||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(d);try{v(d)}catch(o){try{return v.call(null,d)}catch(b){return v.call(this,d)}}}(h)}}function l(h,m){this.fun=h,this.array=m}function c(){}u.nextTick=function(h){var m=new Array(arguments.length-1);if(arguments.length>1)for(var d=1;d<arguments.length;d++)m[d-1]=arguments[d];a.push(new l(h,m)),1!==a.length||r||n(i)},l.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=c,u.addListener=c,u.once=c,u.off=c,u.removeListener=c,u.removeAllListeners=c,u.emit=c,u.prependListener=c,u.prependOnceListener=c,u.listeners=function(h){return[]},u.binding=function(h){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(h){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],278:[function(x,Q,K){(function(p){(function(){for(var v=x("performance-now"),u="undefined"==typeof window?p:window,y=["moz","webkit"],e="AnimationFrame",n=u["request"+e],t=u["cancel"+e]||u["cancelRequest"+e],a=0;!n&&a<y.length;a++)n=u[y[a]+"Request"+e],t=u[y[a]+"Cancel"+e]||u[y[a]+"CancelRequest"+e];if(!n||!t){var r=0,f=0,s=[];n=function(i){if(0===s.length){var l=v(),c=Math.max(0,1e3/60-(l-r));r=c+l,setTimeout(function(){var h=s.slice(0);s.length=0;for(var m=0;m<h.length;m++)if(!h[m].cancelled)try{h[m].callback(r)}catch(d){setTimeout(function(){throw d},0)}},Math.round(c))}return s.push({handle:++f,callback:i,cancelled:!1}),f},t=function(i){for(var l=0;l<s.length;l++)s[l].handle===i&&(s[l].cancelled=!0)}}Q.exports=function(i){return n.call(u,i)},Q.exports.cancel=function(){t.apply(u,arguments)},Q.exports.polyfill=function(i){i||(i=u),i.requestAnimationFrame=n,i.cancelAnimationFrame=t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":252}],279:[function(x,Q,K){"use strict";var p=x("array-bounds"),v=x("color-normalize"),u=x("update-diff"),y=x("pick-by-alias"),e=x("object-assign"),n=x("flatten-vertex-data"),t=x("to-float32"),a=t.float32,r=t.fract32;Q.exports=function(s,i){if("function"==typeof s?(i||(i={}),i.regl=s):i=s,i.length&&(i.positions=i),!(s=i.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var l,c,h,m,d,o,b=s._gl,g={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},w=[];return m=s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),d=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),o=s.buffer({usage:"static",type:"float",data:f}),E(i),l=s({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:s.prop("range"),lineWidth:s.prop("lineWidth"),capSize:s.prop("capSize"),opacity:s.prop("opacity"),scale:s.prop("scale"),translate:s.prop("translate"),scaleFract:s.prop("scaleFract"),translateFract:s.prop("translateFract"),viewport:function(O,D){return[D.viewport.x,D.viewport.y,O.viewportWidth,O.viewportHeight]}},attributes:{color:{buffer:m,offset:function(O,D){return 4*D.offset},divisor:1},position:{buffer:c,offset:function(O,D){return 8*D.offset},divisor:1},positionFract:{buffer:h,offset:function(O,D){return 8*D.offset},divisor:1},error:{buffer:d,offset:function(O,D){return 16*D.offset},divisor:1},direction:{buffer:o,stride:24,offset:0},lineOffset:{buffer:o,stride:24,offset:8},capOffset:{buffer:o,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:s.prop("viewport")},viewport:s.prop("viewport"),stencil:!1,instances:s.prop("count"),count:f.length}),e(_,{update:E,draw:A,destroy:k,regl:s,gl:b,canvas:b.canvas,groups:w}),_;function _(O){O?E(O):null===O&&k(),A()}function A(O){if("number"==typeof O)return T(O);O&&!Array.isArray(O)&&(O=[O]),s._refresh(),w.forEach(function(D,S){D&&(O&&(D.draw=!!O[S]),D.draw?T(S):D.draw=!0)})}function T(O){"number"==typeof O&&(O=w[O]),null!=O&&O&&O.count&&O.color&&O.opacity&&O.positions&&O.positions.length>1&&(O.scaleRatio=[O.scale[0]*O.viewport.width,O.scale[1]*O.viewport.height],l(O),O.after&&O.after(O))}function E(O){if(O){null!=O.length?"number"==typeof O[0]&&(O=[{positions:O}]):Array.isArray(O)||(O=[O]);var D=0,S=0;if(_.groups=w=O.map(function(Z,q){var W=w[q];return Z&&("function"==typeof Z?Z={after:Z}:"number"==typeof Z[0]&&(Z={positions:Z}),Z=y(Z,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),W||(w[q]=W={id:q,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},Z=e({},g,Z)),u(W,Z,[{lineWidth:function(te){return.5*+te},capSize:function(te){return.5*+te},opacity:parseFloat,errors:function(te){return te=n(te),S+=te.length,te},positions:function(te,R){return te=n(te,"float64"),R.count=Math.floor(te.length/2),R.bounds=p(te,2),R.offset=D,D+=R.count,te}},{color:function(te,R){var N=R.count;if(te||(te="transparent"),!Array.isArray(te)||"number"==typeof te[0]){var V=te;te=Array(N);for(var ee=0;ee<N;ee++)te[ee]=V}if(te.length<N)throw Error("Not enough colors");for(var j=new Uint8Array(4*N),J=0;J<N;J++){var $=v(te[J],"uint8");j.set($,4*J)}return j},range:function(te,R,N){return te||(te=R.bounds),R.scale=[1/(te[2]-te[0]),1/(te[3]-te[1])],R.translate=[-te[0],-te[1]],R.scaleFract=r(R.scale),R.translateFract=r(R.translate),te},viewport:function(te){var R;return Array.isArray(te)?R={x:te[0],y:te[1],width:te[2]-te[0],height:te[3]-te[1]}:te?((R={x:te.x||te.left||0,y:te.y||te.top||0}).width=te.right?te.right-R.x:te.w||te.width||0,R.height=te.bottom?te.bottom-R.y:te.h||te.height||0):R={x:0,y:0,width:b.drawingBufferWidth,height:b.drawingBufferHeight},R}}])),W}),D||S){var C=w.reduce(function(Z,q,W){return Z+(q?q.count:0)},0),z=new Float64Array(2*C),B=new Uint8Array(4*C),U=new Float32Array(4*C);w.forEach(function(Z,q){if(Z){var W=Z.positions,R=Z.offset,V=Z.errors;Z.count&&(B.set(Z.color,4*R),U.set(V,4*R),z.set(W,2*R))}});var G=a(z);c(G);var X=r(z,G);h(X),m(B),d(U)}}}function k(){c.destroy(),h.destroy(),m.destroy(),d.destroy(),o.destroy()}};var f=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(x,Q,K){"use strict";var p=x("color-normalize"),v=x("array-bounds"),u=x("object-assign"),y=x("glslify"),e=x("pick-by-alias"),n=x("flatten-vertex-data"),t=x("earcut"),a=x("array-normalize"),r=x("to-float32"),f=r.float32,s=r.fract32,i=x("es6-weak-map"),l=x("parse-rect"),c=x("array-find-index");function h(m,d){if(!(this instanceof h))return new h(m,d);if("function"==typeof m?(d||(d={}),d.regl=m):d=m,d.length&&(d.positions=d),!(m=d.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=m._gl,this.regl=m,this.passes=[],this.shaders=h.shaders.has(m)?h.shaders.get(m):h.shaders.set(m,h.createShaders(m)).get(m),this.update(d)}Q.exports=h,h.dashMult=2,h.maxPatternLength=256,h.precisionThreshold=3e6,h.maxPoints=1e4,h.maxLines=2048,h.shaders=new i,h.createShaders=function(m){var d,o=m.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),b={primitive:"triangle strip",instances:m.prop("count"),count:4,offset:0,uniforms:{miterMode:function(w,_){return"round"===_.join?2:1},miterLimit:m.prop("miterLimit"),scale:m.prop("scale"),scaleFract:m.prop("scaleFract"),translateFract:m.prop("translateFract"),translate:m.prop("translate"),thickness:m.prop("thickness"),dashTexture:m.prop("dashTexture"),opacity:m.prop("opacity"),pixelRatio:m.context("pixelRatio"),id:m.prop("id"),dashLength:m.prop("dashLength"),viewport:function(w,_){return[_.viewport.x,_.viewport.y,w.viewportWidth,w.viewportHeight]},depth:m.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(w,_){return!_.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:m.prop("viewport")},viewport:m.prop("viewport")},g=m(u({vert:y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:y(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:o,divisor:0,stride:8,offset:0},lineTop:{buffer:o,divisor:0,stride:8,offset:4},aCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:m.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:m.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:m.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},b));try{d=m(u({cull:{enable:!0,face:"back"},vert:y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:y(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:o,divisor:0,stride:8,offset:0},lineTop:{buffer:o,divisor:0,stride:8,offset:4},aColor:{buffer:m.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:m.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},b))}catch(w){d=g}return{fill:m({primitive:"triangle",elements:function(w,_){return _.triangles},offset:0,vert:y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:y(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:m.prop("scale"),color:m.prop("fill"),scaleFract:m.prop("scaleFract"),translateFract:m.prop("translateFract"),translate:m.prop("translate"),opacity:m.prop("opacity"),pixelRatio:m.context("pixelRatio"),id:m.prop("id"),viewport:function(w,_){return[_.viewport.x,_.viewport.y,w.viewportWidth,w.viewportHeight]}},attributes:{position:{buffer:m.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:m.prop("positionFractBuffer"),stride:8,offset:8}},blend:b.blend,depth:{enable:!1},scissor:b.scissor,stencil:b.stencil,viewport:b.viewport}),rect:g,miter:d}},h.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},h.prototype.render=function(){for(var m,d=[],o=arguments.length;o--;)d[o]=arguments[o];d.length&&(m=this).update.apply(m,d),this.draw()},h.prototype.draw=function(){for(var m=this,d=[],o=arguments.length;o--;)d[o]=arguments[o];return(d.length?d:this.passes).forEach(function(b,g){var w;if(b&&Array.isArray(b))return(w=m).draw.apply(w,b);"number"==typeof b&&(b=m.passes[b]),b&&b.count>1&&b.opacity&&(m.regl._refresh(),b.fill&&b.triangles&&b.triangles.length>2&&m.shaders.fill(b),b.thickness&&(b.scale[0]*b.viewport.width>h.precisionThreshold||b.scale[1]*b.viewport.height>h.precisionThreshold||"rect"===b.join||!b.join&&(b.thickness<=2||b.count>=h.maxPoints)?m.shaders.rect(b):m.shaders.miter(b)))}),this},h.prototype.update=function(m){var d=this;if(m){null!=m.length?"number"==typeof m[0]&&(m=[{positions:m}]):Array.isArray(m)||(m=[m]);var o=this.regl,b=this.gl;if(m.forEach(function(T,E){var k=d.passes[E];if(void 0!==T)if(null!==T){if("number"==typeof T[0]&&(T={positions:T}),T=e(T,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),k||(d.passes[E]=k={id:E,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:o.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:o.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:o.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},T=u({},h.defaults,T)),null!=T.thickness&&(k.thickness=parseFloat(T.thickness)),null!=T.opacity&&(k.opacity=parseFloat(T.opacity)),null!=T.miterLimit&&(k.miterLimit=parseFloat(T.miterLimit)),null!=T.overlay&&(k.overlay=!!T.overlay,E<h.maxLines&&(k.depth=2*(h.maxLines-1-E%h.maxLines)/h.maxLines-1)),null!=T.join&&(k.join=T.join),null!=T.hole&&(k.hole=T.hole),null!=T.fill&&(k.fill=T.fill?p(T.fill,"uint8"):null),null!=T.viewport&&(k.viewport=l(T.viewport)),k.viewport||(k.viewport=l([b.drawingBufferWidth,b.drawingBufferHeight])),null!=T.close&&(k.close=T.close),null===T.positions&&(T.positions=[]),T.positions){var O,D;if(T.positions.x&&T.positions.y){var S=T.positions.x,C=T.positions.y;D=k.count=Math.max(S.length,C.length),O=new Float64Array(2*D);for(var z=0;z<D;z++)O[2*z]=S[z],O[2*z+1]=C[z]}else O=n(T.positions,"float64"),D=k.count=Math.floor(O.length/2);var B=k.bounds=v(O,2);if(k.fill){for(var U=[],G={},X=0,Z=0,q=0,W=k.count;Z<W;Z++){var te=O[2*Z],R=O[2*Z+1];isNaN(te)||isNaN(R)||null==te||null==R?(te=O[2*X],R=O[2*X+1],G[Z]=X):X=Z,U[q++]=te,U[q++]=R}if(T.splitNull){k.count-1 in G||(G[k.count]=k.count-1);var N=Object.keys(G).map(Number).sort(function(St,Xt){return St-Xt}),V=[],ee=0,j=null!=k.hole?k.hole[0]:null;if(null!=j){var J=c(N,function(St){return St>=j});(N=N.slice(0,J)).push(j)}for(var $=function(St){var Xt=U.slice(2*ee,2*N[St]).concat(j?U.slice(2*j):[]),lr=(k.hole||[]).map(function(Ze){return Ze-j+(N[St]-ee)}),Ue=t(Xt,lr);Ue=Ue.map(function(Ze){return Ze+ee+(Ze+ee<N[St]?0:j-N[St])}),V.push.apply(V,Ue),ee=N[St]+1},re=0;re<N.length;re++)$(re);for(var ne=0,se=V.length;ne<se;ne++)null!=G[V[ne]]&&(V[ne]=G[V[ne]]);k.triangles=V}else{for(var ie=t(U,k.hole||[]),ue=0,le=ie.length;ue<le;ue++)null!=G[ie[ue]]&&(ie[ue]=G[ie[ue]]);k.triangles=ie}}var de=new Float64Array(O);a(de,2,B);var ve=new Float64Array(2*D+6);k.close?O[0]===O[2*D-2]&&O[1]===O[2*D-1]?(ve[0]=de[2*D-4],ve[1]=de[2*D-3]):(ve[0]=de[2*D-2],ve[1]=de[2*D-1]):(ve[0]=de[0],ve[1]=de[1]),ve.set(de,2),k.close?O[0]===O[2*D-2]&&O[1]===O[2*D-1]?(ve[2*D+2]=de[2],ve[2*D+3]=de[3],k.count-=1):(ve[2*D+2]=de[0],ve[2*D+3]=de[1],ve[2*D+4]=de[2],ve[2*D+5]=de[3]):(ve[2*D+2]=de[2*D-2],ve[2*D+3]=de[2*D-1],ve[2*D+4]=de[2*D-2],ve[2*D+5]=de[2*D-1]);var _e=f(ve);k.positionBuffer(_e);var be=s(ve,_e);k.positionFractBuffer(be)}if(T.range?k.range=T.range:k.range||(k.range=k.bounds),(T.range||T.positions)&&k.count){var Te=k.bounds,Ae=k.range[2]-k.range[0],we=k.range[3]-k.range[1];k.scale=[(Te[2]-Te[0])/Ae,(Te[3]-Te[1])/we],k.translate=[-k.range[0]/Ae+Te[0]/Ae||0,-k.range[1]/we+Te[1]/we||0],k.scaleFract=s(k.scale),k.translateFract=s(k.translate)}if(T.dashes){var Se,Pe=0;if(!T.dashes||T.dashes.length<2)Pe=1,Se=new Uint8Array([255,255,255,255,255,255,255,255]);else{Pe=0;for(var ze=0;ze<T.dashes.length;++ze)Pe+=T.dashes[ze];Se=new Uint8Array(Pe*h.dashMult);for(var He=0,tt=255,Oe=0;Oe<2;Oe++)for(var Be=0;Be<T.dashes.length;++Be){for(var Je=0,Ye=T.dashes[Be]*h.dashMult*.5;Je<Ye;++Je)Se[He++]=tt;tt^=255}}k.dashLength=Pe,k.dashTexture({channels:1,data:Se,width:Se.length,height:1,mag:"linear",min:"linear"},0,0)}if(T.color){var nt=k.count,ft=T.color;ft||(ft="transparent");var dt=new Uint8Array(4*nt+4);if(Array.isArray(ft)&&"number"!=typeof ft[0]){for(var Rt=0;Rt<nt;Rt++){var Et=p(ft[Rt],"uint8");dt.set(Et,4*Rt)}dt.set(p(ft[0],"uint8"),4*nt)}else for(var at=p(ft,"uint8"),rt=0;rt<nt+1;rt++)dt.set(at,4*rt);k.colorBuffer({usage:"dynamic",type:"uint8",data:dt})}}else d.passes[E]=null}),m.length<this.passes.length){for(var g=m.length;g<this.passes.length;g++){var w=this.passes[g];w&&(w.colorBuffer.destroy(),w.positionBuffer.destroy(),w.dashTexture.destroy())}this.passes.length=m.length}for(var _=[],A=0;A<this.passes.length;A++)null!==this.passes[A]&&_.push(this.passes[A]);return this.passes=_,this}},h.prototype.destroy=function(){return this.passes.forEach(function(m){m.colorBuffer.destroy(),m.positionBuffer.destroy(),m.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(x,Q,K){"use strict";function p(g,w){return function(_){if(Array.isArray(_))return _}(g)||function(_,A){var T=null==_?null:"undefined"!=typeof Symbol&&_[Symbol.iterator]||_["@@iterator"];if(null!=T){var E,k,O=[],D=!0,S=!1;try{for(T=T.call(_);!(D=(E=T.next()).done)&&(O.push(E.value),!A||O.length!==A);D=!0);}catch(C){S=!0,k=C}finally{try{D||null==T.return||T.return()}finally{if(S)throw k}}return O}}(g,w)||u(g,w)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(g){return function(w){if(Array.isArray(w))return y(w)}(g)||function(w){if("undefined"!=typeof Symbol&&null!=w[Symbol.iterator]||null!=w["@@iterator"])return Array.from(w)}(g)||u(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(g,w){if(g){if("string"==typeof g)return y(g,w);var _=Object.prototype.toString.call(g).slice(8,-1);return"Object"===_&&g.constructor&&(_=g.constructor.name),"Map"===_||"Set"===_?Array.from(g):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?y(g,w):void 0}}function y(g,w){(null==w||w>g.length)&&(w=g.length);for(var _=0,A=new Array(w);_<w;_++)A[_]=g[_];return A}var e=x("color-normalize"),n=x("array-bounds"),t=x("color-id"),a=x("@plotly/point-cluster"),r=x("object-assign"),f=x("glslify"),s=x("pick-by-alias"),i=x("update-diff"),l=x("flatten-vertex-data"),c=x("is-iexplorer"),h=x("to-float32"),m=x("parse-rect"),d=o;function o(g,w){var _=this;if(!(this instanceof o))return new o(g,w);"function"==typeof g?(w||(w={}),w.regl=g):(w=g,g=null),w&&w.length&&(w.positions=w);var A,T=(g=w.regl)._gl,E=[];this.tooManyColors=c,A=g.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),r(this,{regl:g,gl:T,groups:[],markerCache:[null],markerTextures:[null],palette:E,paletteIds:{},paletteTexture:A,maxColors:255,maxSize:100,canvas:T.canvas}),this.update(w);var k={uniforms:{constPointSize:!!w.constPointSize,opacity:g.prop("opacity"),paletteSize:function(S,C){return[_.tooManyColors?0:255,A.height]},pixelRatio:g.context("pixelRatio"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translate:g.prop("translate"),translateFract:g.prop("translateFract"),markerTexture:g.prop("markerTexture"),paletteTexture:A},attributes:{x:function(S,C){return C.xAttr||{buffer:C.positionBuffer,stride:8,offset:0}},y:function(S,C){return C.yAttr||{buffer:C.positionBuffer,stride:8,offset:4}},xFract:function(S,C){return C.xAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:0}},yFract:function(S,C){return C.yAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:4}},size:function(S,C){return C.size.length?{buffer:C.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*C.size/_.maxSize)]}},borderSize:function(S,C){return C.borderSize.length?{buffer:C.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*C.borderSize/_.maxSize)]}},colorId:function(S,C){return C.color.length?{buffer:C.colorBuffer,stride:_.tooManyColors?8:4,offset:0}:{constant:_.tooManyColors?E.slice(4*C.color,4*C.color+4):[C.color]}},borderColorId:function(S,C){return C.borderColor.length?{buffer:C.colorBuffer,stride:_.tooManyColors?8:4,offset:_.tooManyColors?4:2}:{constant:_.tooManyColors?E.slice(4*C.borderColor,4*C.borderColor+4):[C.borderColor]}},isActive:function(S,C){return!0===C.activation?{constant:[1]}:C.activation?C.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:g.prop("elements"),count:g.prop("count"),offset:g.prop("offset"),primitive:"points"},O=r({},k);O.frag=f(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),O.vert=f(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=g(O);var D=r({},k);D.frag=f(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),D.vert=f(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),c&&(D.frag=D.frag.replace("smoothstep","smoothStep"),O.frag=O.frag.replace("smoothstep","smoothStep")),this.drawCircle=g(D)}o.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},o.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},o.prototype.draw=function(){for(var g=this,w=arguments.length,_=new Array(w),A=0;A<w;A++)_[A]=arguments[A];var T=this.groups;if(1===_.length&&Array.isArray(_[0])&&(null===_[0][0]||Array.isArray(_[0][0]))&&(_=_[0]),this.regl._refresh(),_.length)for(var E=0;E<_.length;E++)this.drawItem(E,_[E]);else T.forEach(function(k,O){g.drawItem(O)});return this},o.prototype.drawItem=function(g,w){var _=this.groups,A=_[g];if("number"==typeof w&&(g=w,A=_[w],w=null),A&&A.count&&A.opacity){A.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,A,w));for(var T=[],E=1;E<A.activation.length;E++)A.activation[E]&&(!0===A.activation[E]||A.activation[E].data.length)&&T.push.apply(T,v(this.getMarkerDrawOptions(E,A,w)));T.length&&this.drawMarker(T)}},o.prototype.getMarkerDrawOptions=function(g,w,_){var A=w.range,T=w.tree,E=w.viewport,k=w.activation,O=w.selectionBuffer,D=w.count;if(!T)return _?[r({},w,{markerTexture:this.markerTextures[g],activation:k[g],count:_.length,elements:_,offset:0})]:[r({},w,{markerTexture:this.markerTextures[g],activation:k[g],offset:0})];var S=[],C=T.range(A,{lod:!0,px:[(A[2]-A[0])/E.width,(A[3]-A[1])/E.height]});if(_){for(var z=k[g].data,B=new Uint8Array(D),U=0;U<_.length;U++){var G=_[U];B[G]=z?z[G]:1}O.subdata(B)}for(var X=C.length;X--;){var Z=p(C[X],2),q=Z[0];S.push(r({},w,{markerTexture:this.markerTextures[g],activation:_?O:k[g],offset:q,count:Z[1]-q}))}return S},o.prototype.update=function(){for(var g=this,w=arguments.length,_=new Array(w),A=0;A<w;A++)_[A]=arguments[A];if(_.length){1===_.length&&Array.isArray(_[0])&&(_=_[0]);var T=this.groups,E=this.gl,k=this.regl,O=this.maxSize,D=this.maxColors,S=this.palette;this.groups=T=_.map(function(C,z){var B=T[z];if(void 0===C)return B;null===C?C={positions:null}:"function"==typeof C?C={ondraw:C}:"number"==typeof C[0]&&(C={positions:C}),null===(C=s(C,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(C.positions=[]),null!=C.tooManyColors&&(g.tooManyColors=C.tooManyColors),B||(T[z]=B={id:z,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:k.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:k.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:k.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:k.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:k.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},C=r({},o.defaults,C)),C.positions&&!("marker"in C)&&(C.marker=B.marker,delete B.marker),C.marker&&!("positions"in C)&&(C.positions=B.positions,delete B.positions);var U=0,G=0;if(i(B,C,[{snap:!0,size:function(le,de){return null==le&&(le=o.defaults.size),U+=le&&le.length?1:0,le},borderSize:function(le,de){return null==le&&(le=o.defaults.borderSize),U+=le&&le.length?1:0,le},opacity:parseFloat,color:function(le,de){return null==le&&(le=o.defaults.color),le=g.updateColor(le),G++,le},borderColor:function(le,de){return null==le&&(le=o.defaults.borderColor),le=g.updateColor(le),G++,le},bounds:function(le,de,ve){return"range"in ve||(ve.range=null),le},positions:function(le,de,ve){var _e=de.snap,be=de.positionBuffer,Te=de.positionFractBuffer,he=de.selectionBuffer;if(le.x||le.y)return de.xAttr=le.x.length?{buffer:k.buffer(le.x),offset:0,stride:4,count:le.x.length}:{buffer:le.x.buffer,offset:4*le.x.offset||0,stride:4*(le.x.stride||1),count:le.x.count},de.yAttr=le.y.length?{buffer:k.buffer(le.y),offset:0,stride:4,count:le.y.length}:{buffer:le.y.buffer,offset:4*le.y.offset||0,stride:4*(le.y.stride||1),count:le.y.count},de.count=Math.max(de.xAttr.count,de.yAttr.count),le;le=l(le,"float64");var me=de.count=Math.floor(le.length/2),Ae=de.bounds=me?n(le,2):null;if(ve.range||de.range||(delete de.range,ve.range=Ae),ve.marker||de.marker||(delete de.marker,ve.marker=null),_e&&(!0===_e||me>_e)?de.tree=a(le,{bounds:Ae}):_e&&_e.length&&(de.tree=_e),de.tree){var we={primitive:"points",usage:"static",data:de.tree,type:"uint32"};de.elements?de.elements(we):de.elements=k.elements(we)}var Se=h.float32(le);return be({data:Se,usage:"dynamic"}),Te({data:h.fract32(le,Se),usage:"dynamic"}),he({data:new Uint8Array(me),type:"uint8",usage:"stream"}),le}},{marker:function(le,de,ve){var _e=de.activation;if(_e.forEach(function(Se){return Se&&Se.destroy&&Se.destroy()}),_e.length=0,le&&"number"!=typeof le[0]){for(var be=[],Te=0,he=Math.min(le.length,de.count);Te<he;Te++){var me=g.addMarker(le[Te]);be[me]||(be[me]=new Uint8Array(de.count)),be[me][Te]=1}for(var Ae=0;Ae<be.length;Ae++)if(be[Ae]){var we={data:be[Ae],type:"uint8",usage:"static"};_e[Ae]?_e[Ae](we):_e[Ae]=k.buffer(we),_e[Ae].data=be[Ae]}}else _e[g.addMarker(le)]=!0;return le},range:function(le,de,ve){var _e=de.bounds;if(_e)return le||(le=_e),de.scale=[1/(le[2]-le[0]),1/(le[3]-le[1])],de.translate=[-le[0],-le[1]],de.scaleFract=h.fract(de.scale),de.translateFract=h.fract(de.translate),le},viewport:function(le){return m(le||[E.drawingBufferWidth,E.drawingBufferHeight])}}]),U){var Z=B.count,q=B.size,W=B.borderSize,te=B.sizeBuffer,R=new Uint8Array(2*Z);if(q.length||W.length)for(var N=0;N<Z;N++)R[2*N]=Math.round(255*(null==q[N]?q:q[N])/O),R[2*N+1]=Math.round(255*(null==W[N]?W:W[N])/O);te({data:R,usage:"dynamic"})}if(G){var V,j=B.count,J=B.color,$=B.borderColor,re=B.colorBuffer;if(g.tooManyColors){if(J.length||$.length){V=new Uint8Array(8*j);for(var ne=0;ne<j;ne++){var se=J[ne];V[8*ne]=S[4*se],V[8*ne+1]=S[4*se+1],V[8*ne+2]=S[4*se+2],V[8*ne+3]=S[4*se+3];var ie=$[ne];V[8*ne+4]=S[4*ie],V[8*ne+5]=S[4*ie+1],V[8*ne+6]=S[4*ie+2],V[8*ne+7]=S[4*ie+3]}}}else if(J.length||$.length){V=new Uint8Array(4*j+2);for(var ue=0;ue<j;ue++)null!=J[ue]&&(V[4*ue]=J[ue]%D,V[4*ue+1]=Math.floor(J[ue]/D)),null!=$[ue]&&(V[4*ue+2]=$[ue]%D,V[4*ue+3]=Math.floor($[ue]/D))}re({data:V||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return B})}},o.prototype.addMarker=function(g){var w,_=this.markerTextures,A=this.regl,T=this.markerCache,E=null==g?0:T.indexOf(g);if(E>=0)return E;if(g instanceof Uint8Array||g instanceof Uint8ClampedArray)w=g;else{w=new Uint8Array(g.length);for(var k=0,O=g.length;k<O;k++)w[k]=255*g[k]}var D=Math.floor(Math.sqrt(w.length));return E=_.length,T.push(g),_.push(A.texture({channels:1,data:w,radius:D,mag:"linear",min:"linear"})),E},o.prototype.updateColor=function(g){var w=this.paletteIds,_=this.palette,A=this.maxColors;Array.isArray(g)||(g=[g]);var T=[];if("number"==typeof g[0]){var E=[];if(Array.isArray(g))for(var k=0;k<g.length;k+=4)E.push(g.slice(k,k+4));else for(var O=0;O<g.length;O+=4)E.push(g.subarray(O,O+4));g=E}for(var D=0;D<g.length;D++){var S=g[D];S=e(S,"uint8");var C=t(S,!1);if(null==w[C]){var z=_.length;w[C]=Math.floor(z/4),_[z]=S[0],_[z+1]=S[1],_[z+2]=S[2],_[z+3]=S[3]}T[D]=w[C]}return!this.tooManyColors&&_.length>4*A&&(this.tooManyColors=!0),this.updatePalette(_),1===T.length?T[0]:T},o.prototype.updatePalette=function(g){if(!this.tooManyColors){var w=this.maxColors,_=this.paletteTexture,A=Math.ceil(.25*g.length/w);if(A>1)for(var T=.25*(g=g.slice()).length%w;T<A*w;T++)g.push(0,0,0,0);_.height<A&&_.resize(w,A),_.subimage({width:Math.min(.25*g.length,w),height:A,data:g},0,0)}},o.prototype.destroy=function(){return this.groups.forEach(function(g){g.sizeBuffer.destroy(),g.positionBuffer.destroy(),g.positionFractBuffer.destroy(),g.colorBuffer.destroy(),g.activation.forEach(function(w){return w&&w.destroy&&w.destroy()}),g.selectionBuffer.destroy(),g.elements&&g.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(g){return g&&g.destroy&&g.destroy()}),this};var b=x("object-assign");Q.exports=function(g,w){var _=new d(g,w),A=_.render.bind(_);return b(A,{render:A,update:_.update.bind(_),draw:_.draw.bind(_),destroy:_.destroy.bind(_),regl:_.regl,gl:_.gl,canvas:_.gl.canvas,groups:_.groups,markers:_.markerCache,palette:_.palette}),A}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(x,Q,K){"use strict";var p=x("regl-scatter2d"),v=x("pick-by-alias"),u=x("array-bounds"),y=x("raf"),e=x("array-range"),n=x("parse-rect"),t=x("flatten-vertex-data");function a(i,l){if(!(this instanceof a))return new a(i,l);this.traces=[],this.passes={},this.regl=i,this.scatter=p(i),this.canvas=this.scatter.canvas}function r(i,l,c){return(null!=i.id?i.id:i)<<16|(255&l)<<8|255&c}function f(i,l,c){var h,m,d,o,b=i[l],g=i[c];return b.length>2?(h=b[1],m=b[3]):b.length?(h=b[0],m=b[1]):(h=b.y,m=b.y+b.height),g.length>2?(d=g[0],o=g[2]):g.length?(d=g[0],o=g[1]):(d=g.x,o=g.x+g.width),[d,h,o,m]}function s(i){if("number"==typeof i)return[i,i,i,i];if(2===i.length)return[i[0],i[1],i[0],i[1]];var l=n(i);return[l.x,l.y,l.x+l.width,l.y+l.height]}Q.exports=a,a.prototype.render=function(){for(var i,l=this,c=[],h=arguments.length;h--;)c[h]=arguments[h];return c.length&&(i=this).update.apply(i,c),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=y(function(){l.draw(),l.dirty=!0,l.planned=null})):(this.draw(),this.dirty=!0,y(function(){l.dirty=!1})),this)},a.prototype.update=function(){for(var i,l=[],c=arguments.length;c--;)l[c]=arguments[c];if(l.length){for(var h=0;h<l.length;h++)this.updateItem(h,l[h]);this.traces=this.traces.filter(Boolean);for(var m=[],d=0,o=0;o<this.traces.length;o++){for(var b=this.traces[o],g=this.traces[o].passes,w=0;w<g.length;w++)m.push(this.passes[g[w]]);b.passOffset=d,d+=b.passes.length}return(i=this.scatter).update.apply(i,m),this}},a.prototype.updateItem=function(i,l){var c=this.regl;if(null===l)return this.traces[i]=null,this;if(!l)return this;var h,m=v(l,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),d=this.traces[i]||(this.traces[i]={id:i,buffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:n([c._gl.drawingBufferWidth,c._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=m.color&&(d.color=m.color),null!=m.size&&(d.size=m.size),null!=m.marker&&(d.marker=m.marker),null!=m.borderColor&&(d.borderColor=m.borderColor),null!=m.borderSize&&(d.borderSize=m.borderSize),null!=m.opacity&&(d.opacity=m.opacity),m.viewport&&(d.viewport=n(m.viewport)),null!=m.diagonal&&(d.diagonal=m.diagonal),null!=m.upper&&(d.upper=m.upper),null!=m.lower&&(d.lower=m.lower),m.data){d.buffer(t(m.data)),d.columns=m.data.length,d.count=m.data[0].length,d.bounds=[];for(var o=0;o<d.columns;o++)d.bounds[o]=u(m.data[o],1)}m.range&&(d.range=m.range,h=d.range&&"number"!=typeof d.range[0]),m.domain&&(d.domain=m.domain);var b=!1;null!=m.padding&&(Array.isArray(m.padding)&&m.padding.length===d.columns&&"number"==typeof m.padding[m.padding.length-1]?(d.padding=m.padding.map(s),b=!0):d.padding=s(m.padding));var g=d.columns,w=d.count,_=d.viewport.width,A=d.viewport.height,T=d.viewport.x,E=d.viewport.y,k=_/g,O=A/g;d.passes=[];for(var D=0;D<g;D++)for(var S=0;S<g;S++)if((d.diagonal||S!==D)&&(d.upper||!(D>S))&&(d.lower||!(D<S))){var C=r(d.id,D,S),z=this.passes[C]||(this.passes[C]={});if(m.data&&(z.positions=m.transpose?{x:{buffer:d.buffer,offset:S,count:w,stride:g},y:{buffer:d.buffer,offset:D,count:w,stride:g}}:{x:{buffer:d.buffer,offset:S*w,count:w},y:{buffer:d.buffer,offset:D*w,count:w}},z.bounds=f(d.bounds,D,S)),m.domain||m.viewport||m.data){var B=b?f(d.padding,D,S):d.padding;if(d.domain){var U=f(d.domain,D,S);z.viewport=[T+U[0]*_+B[0],E+U[1]*A+B[1],T+U[2]*_-B[2],E+U[3]*A-B[3]]}else z.viewport=[T+S*k+k*B[0],E+D*O+O*B[1],T+(S+1)*k-k*B[2],E+(D+1)*O-O*B[3]]}m.color&&(z.color=d.color),m.size&&(z.size=d.size),m.marker&&(z.marker=d.marker),m.borderSize&&(z.borderSize=d.borderSize),m.borderColor&&(z.borderColor=d.borderColor),m.opacity&&(z.opacity=d.opacity),m.range&&(z.range=h?f(d.range,D,S):d.range||z.bounds),d.passes.push(C)}return this},a.prototype.draw=function(){for(var i,l=[],c=arguments.length;c--;)l[c]=arguments[c];if(l.length){for(var h=[],m=0;m<l.length;m++)if("number"==typeof l[m]){var d=this.traces[l[m]],b=d.passOffset;h.push.apply(h,e(b,b+d.passes.length))}else if(l[m].length){var g=l[m],w=this.traces[m],_=w.passes,A=w.passOffset;_=_.map(function(T,E){h[A+E]=g})}(i=this.scatter).draw.apply(i,h)}else this.scatter.draw();return this},a.prototype.destroy=function(){return this.traces.forEach(function(i){i.buffer&&i.buffer.destroy&&i.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(x,Q,K){var v;v=function(){function p(Ne,it){this.id=V++,this.type=Ne,this.data=it}function v(Ne){return"["+function it(ke){if(0===ke.length)return[];var De=ke.charAt(0),Re=ke.charAt(ke.length-1);if(1<ke.length&&De===Re&&('"'===De||"'"===De))return['"'+ke.substr(1,ke.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(De=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ke))return it(ke.substr(0,De.index)).concat(it(De[1])).concat(it(ke.substr(De.index+De[0].length)));if(1===(De=ke.split(".")).length)return['"'+ke.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(ke=[],Re=0;Re<De.length;++Re)ke=ke.concat(it(De[Re]));return ke}(Ne).join("][")+"]"}function u(Ne){return"string"==typeof Ne?Ne.split():Ne}function y(Ne){return"string"==typeof Ne?document.querySelector(Ne):Ne}function n(Ne,it){for(var ke=Array(Ne),De=0;De<Ne;++De)ke[De]=it(De);return ke}function t(Ne){var it,ke;return it=(65535<Ne)<<4,it|=ke=(255<(Ne>>>=it))<<3,(it|=ke=(15<(Ne>>>=ke))<<2)|(ke=(3<(Ne>>>=ke))<<1)|Ne>>>ke>>1}function a(){function Ne(De){e:{for(var Re=16;268435456>=Re;Re*=16)if(De<=Re){De=Re;break e}De=0}return 0<(Re=ke[t(De)>>2]).length?Re.pop():new ArrayBuffer(De)}function it(De){ke[t(De.byteLength)>>2].push(De)}var ke=n(8,function(){return[]});return{alloc:Ne,free:it,allocType:function(De,Re){var Ie=null;switch(De){case 5120:Ie=new Int8Array(Ne(Re),0,Re);break;case 5121:Ie=new Uint8Array(Ne(Re),0,Re);break;case 5122:Ie=new Int16Array(Ne(2*Re),0,Re);break;case 5123:Ie=new Uint16Array(Ne(2*Re),0,Re);break;case 5124:Ie=new Int32Array(Ne(4*Re),0,Re);break;case 5125:Ie=new Uint32Array(Ne(4*Re),0,Re);break;case 5126:Ie=new Float32Array(Ne(4*Re),0,Re);break;default:return null}return Ie.length!==Re?Ie.subarray(0,Re):Ie},freeType:function(De){it(De.buffer)}}}function r(Ne){return!!Ne&&"object"==typeof Ne&&Array.isArray(Ne.shape)&&Array.isArray(Ne.stride)&&"number"==typeof Ne.offset&&Ne.shape.length===Ne.stride.length&&(Array.isArray(Ne.data)||ne(Ne.data))}function f(Ne,it,ke,De,Re,Ie){for(var Ke=0;Ke<it;++Ke)for(var ut=Ne[Ke],xt=0;xt<ke;++xt)for(var gt=ut[xt],Pt=0;Pt<De;++Pt)Re[Ie++]=gt[Pt]}function s(Ne){return 0|ue[Object.prototype.toString.call(Ne)]}function i(Ne,it){for(var ke=0;ke<it.length;++ke)Ne[ke]=it[ke]}function l(Ne,it,ke,De,Re,Ie,Ke){for(var ut=0,xt=0;xt<ke;++xt)for(var gt=0;gt<De;++gt)Ne[ut++]=it[Re*xt+Ie*gt+Ke]}function m(Ne){for(var it=$.allocType(5123,Ne.length),ke=0;ke<Ne.length;++ke)if(isNaN(Ne[ke]))it[ke]=65535;else if(1/0===Ne[ke])it[ke]=31744;else if(-1/0===Ne[ke])it[ke]=64512;else{he[0]=Ne[ke];var De=(Ie=me[0])>>>31<<15,Re=(Ie<<1>>>24)-127,Ie=Ie>>13&1023;it[ke]=-24>Re?De:-14>Re?De+(Ie+1024>>-14-Re):15<Re?De+31744:De+(Re+15<<10)+Ie}return it}function d(Ne){return Array.isArray(Ne)||ne(Ne)}function o(Ne){return"[object "+Ne+"]"}function b(Ne){return Array.isArray(Ne)&&(0===Ne.length||"number"==typeof Ne[0])}function g(Ne){return!(!Array.isArray(Ne)||0===Ne.length||!d(Ne[0]))}function w(Ne){return Object.prototype.toString.call(Ne)}function _(Ne){if(!Ne)return!1;var it=w(Ne);return 0<=Je.indexOf(it)||b(Ne)||g(Ne)||r(Ne)}function A(Ne,it){36193===Ne.type?(Ne.data=m(it),$.freeType(it)):Ne.data=it}function T(Ne,it,ke,De,Re,Ie){if(Ne=void 0!==nt[Ne]?nt[Ne]:Se[Ne]*Ye[it],Ie&&(Ne*=6),Re){for(De=0;1<=ke;)De+=Ne*ke*ke,ke/=2;return De}return Ne*ke*De}function O(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function z(Ne){return Array.prototype.slice.call(Ne)}function B(Ne){return z(Ne).join("")}function U(Ne){return Array.isArray(Ne)||ne(Ne)||r(Ne)}function G(Ne){return Ne.sort(function(it,ke){return"viewport"===it?-1:"viewport"===ke?1:it<ke?-1:1})}function X(Ne,it,ke,De){this.thisDep=Ne,this.contextDep=it,this.propDep=ke,this.append=De}function Z(Ne){return Ne&&!(Ne.thisDep||Ne.contextDep||Ne.propDep)}function q(Ne){return new X(!1,!1,!1,Ne)}function W(Ne,it){var ke=Ne.type;if(0===ke)return new X(!0,1<=(ke=Ne.data.length),2<=ke,it);if(4===ke)return new X((ke=Ne.data).thisDep,ke.contextDep,ke.propDep,it);if(5===ke)return new X(!1,!1,!1,it);if(6===ke){for(var De=ke=!1,Re=!1,Ie=0;Ie<Ne.data.length;++Ie){var Ke=Ne.data[Ie];1===Ke.type?Re=!0:2===Ke.type?De=!0:3===Ke.type?ke=!0:0===Ke.type?(ke=!0,1<=(Ke=Ke.data)&&(De=!0),2<=Ke&&(Re=!0)):4===Ke.type&&(ke=ke||Ke.data.thisDep,De=De||Ke.data.contextDep,Re=Re||Ke.data.propDep)}return new X(ke,De,Re,it)}return new X(3===ke,2===ke,1===ke,it)}function te(Ne,it,ke,De,Re,Ie,Ke,ut,xt,gt,Pt,ct,zt,Ft,Qe){function yt(Bt){return Bt.replace(".","_")}function Nt(Bt,Qt,yr){var Dr=yt(Bt);cn.push(Bt),dn[Dr]=un[Dr]=!!yr,fn[Dr]=Qt}function Yt(Bt,Qt,yr){var Dr=yt(Bt);cn.push(Bt),Array.isArray(yr)?(un[Dr]=yr.slice(),dn[Dr]=yr.slice()):un[Dr]=dn[Dr]=yr,Bn[Dr]=Qt}function rr(){var Bt=function(){function Ir(){var Ur=[],Kr=[];return N(function(){Ur.push.apply(Ur,z(arguments))},{def:function(){var An="v"+Qr++;return Kr.push(An),0<arguments.length&&(Ur.push(An,"="),Ur.push.apply(Ur,z(arguments)),Ur.push(";")),An},toString:function(){return B([0<Kr.length?"var "+Kr.join(",")+";":"",B(Ur)])}})}function Fr(){function Ur(gi,ti){An(gi,ti,"=",Kr.def(gi,ti),";")}var Kr=Ir(),An=Ir(),wn=Kr.toString,Hn=An.toString;return N(function(){Kr.apply(Kr,z(arguments))},{def:Kr.def,entry:Kr,exit:An,save:Ur,set:function(gi,ti,En){Ur(gi,ti),Kr(gi,ti,"=",En,";")},toString:function(){return wn()+Hn()}})}var Qr=0,yn=[],In=[],nn=Ir(),Cn={};return{global:nn,link:function(Ur){for(var Kr=0;Kr<In.length;++Kr)if(In[Kr]===Ur)return yn[Kr];return Kr="g"+Qr++,yn.push(Kr),In.push(Ur),Kr},block:Ir,proc:function(Ur,Kr){function An(){var ti="a"+wn.length;return wn.push(ti),ti}var wn=[];Kr=Kr||0;for(var Hn=0;Hn<Kr;++Hn)An();var gi=(Hn=Fr()).toString;return Cn[Ur]=N(Hn,{arg:An,toString:function(){return B(["function(",wn.join(),"){",gi(),"}"])}})},scope:Fr,cond:function(){var Ur=B(arguments),Kr=Fr(),An=Fr(),wn=Kr.toString,Hn=An.toString;return N(Kr,{then:function(){return Kr.apply(Kr,z(arguments)),this},else:function(){return An.apply(An,z(arguments)),this},toString:function(){var gi=Hn();return gi&&(gi="else{"+gi+"}"),B(["if(",Ur,"){",wn(),"}",gi])}})},compile:function(){var Ur=['"use strict";',nn,"return {"];Object.keys(Cn).forEach(function(An){Ur.push('"',An,'":',Cn[An].toString(),",")}),Ur.push("}");var Kr=B(Ur).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,yn.concat(Kr)).apply(null,In)}}}(),Qt=Bt.link,yr=Bt.global;Bt.id=ar++,Bt.batchId="0";var Dr=Qt(Nn),$r=Bt.shared={props:"a0"};Object.keys(Nn).forEach(function(Ir){$r[Ir]=yr.def(Dr,".",Ir)});var Xr=Bt.next={},Mr=Bt.current={};Object.keys(Bn).forEach(function(Ir){Array.isArray(un[Ir])&&(Xr[Ir]=yr.def($r.next,".",Ir),Mr[Ir]=yr.def($r.current,".",Ir))});var Lr=Bt.constants={};Object.keys(Fn).forEach(function(Ir){Lr[Ir]=yr.def(JSON.stringify(Fn[Ir]))}),Bt.invoke=function(Ir,Fr){switch(Fr.type){case 0:var Qr=["this",$r.context,$r.props,Bt.batchId];return Ir.def(Qt(Fr.data),".call(",Qr.slice(0,Math.max(Fr.data.length+1,4)),")");case 1:return Ir.def($r.props,Fr.data);case 2:return Ir.def($r.context,Fr.data);case 3:return Ir.def("this",Fr.data);case 4:return Fr.data.append(Bt,Ir),Fr.data.ref;case 5:return Fr.data.toString();case 6:return Fr.data.map(function(yn){return Bt.invoke(Ir,yn)})}},Bt.attribCache={};var Rr={};return Bt.scopeAttrib=function(Ir){if((Ir=it.id(Ir))in Rr)return Rr[Ir];var Fr=gt.scope[Ir];return Fr||(Fr=gt.scope[Ir]=new Gn),Rr[Ir]=Qt(Fr)},Bt}function Zt(Bt,Qt,yr,Dr,$r){function Xr(Cn){var Ur=Lr[Cn];Ur&&(Ir[Cn]=Ur)}var Cn,Kr,An,wn,Mr=function(Cn,Ur){if("string"==typeof(Kr=Cn.static).frag&&"string"==typeof Kr.vert){if(0<Object.keys(Ur.dynamic).length)return null;var Kr=Ur.static,An=Object.keys(Kr);if(0<An.length&&"number"==typeof Kr[An[0]]){for(var wn=[],Hn=0;Hn<An.length;++Hn)wn.push([0|Kr[An[Hn]],An[Hn]]);return wn}}return null}(Bt,Qt),Lr=function(Cn,Ur,Kr){function An(ti){if(ti in wn){var En=wn[ti];ti=!0;var hi,mi,ra=0|En.x,ka=0|En.y;return"width"in En?hi=0|En.width:ti=!1,"height"in En?mi=0|En.height:ti=!1,new X(!ti&&Ur&&Ur.thisDep,!ti&&Ur&&Ur.contextDep,!ti&&Ur&&Ur.propDep,function(Aa,Bi){var $i=Aa.shared.context,yo=hi;"width"in En||(yo=Bi.def($i,".","framebufferWidth","-",ra));var Ho=mi;return"height"in En||(Ho=Bi.def($i,".","framebufferHeight","-",ka)),[ra,ka,yo,Ho]})}if(ti in Hn){var fa=Hn[ti];return ti=W(fa,function(Aa,Bi){var $i=Aa.invoke(Bi,fa),yo=Aa.shared.context,Ho=Bi.def($i,".x|0"),Ko=Bi.def($i,".y|0");return[Ho,Ko,Bi.def('"width" in ',$i,"?",$i,".width|0:","(",yo,".","framebufferWidth","-",Ho,")"),$i=Bi.def('"height" in ',$i,"?",$i,".height|0:","(",yo,".","framebufferHeight","-",Ko,")")]}),Ur&&(ti.thisDep=ti.thisDep||Ur.thisDep,ti.contextDep=ti.contextDep||Ur.contextDep,ti.propDep=ti.propDep||Ur.propDep),ti}return Ur?new X(Ur.thisDep,Ur.contextDep,Ur.propDep,function(Aa,Bi){var $i=Aa.shared.context;return[0,0,Bi.def($i,".","framebufferWidth"),Bi.def($i,".","framebufferHeight")]}):null}var wn=Cn.static,Hn=Cn.dynamic;if(Cn=An("viewport")){var gi=Cn;Cn=new X(Cn.thisDep,Cn.contextDep,Cn.propDep,function(ti,En){var hi=gi.append(ti,En),mi=ti.shared.context;return En.set(mi,".viewportWidth",hi[2]),En.set(mi,".viewportHeight",hi[3]),hi})}return{viewport:Cn,scissor_box:An("scissor.box")}}(Bt,Qr=function(Bt,Qt){var yr=Bt.static,Dr=Bt.dynamic;if("framebuffer"in yr){var $r=yr.framebuffer;return $r?($r=ut.getFramebuffer($r),q(function(Mr,Lr){var Rr=Mr.link($r),Ir=Mr.shared;return Lr.set(Ir.framebuffer,".next",Rr),Lr.set(Ir=Ir.context,".framebufferWidth",Rr+".width"),Lr.set(Ir,".framebufferHeight",Rr+".height"),Rr})):q(function(Mr,Lr){var Rr=Mr.shared;return Lr.set(Rr.framebuffer,".next","null"),Lr.set(Rr=Rr.context,".framebufferWidth",Rr+".drawingBufferWidth"),Lr.set(Rr,".framebufferHeight",Rr+".drawingBufferHeight"),"null"})}if("framebuffer"in Dr){var Xr=Dr.framebuffer;return W(Xr,function(Mr,Lr){var Rr=Mr.invoke(Lr,Xr),Ir=Mr.shared,Fr=Ir.framebuffer;return Rr=Lr.def(Fr,".getFramebuffer(",Rr,")"),Lr.set(Fr,".next",Rr),Lr.set(Ir=Ir.context,".framebufferWidth",Rr+"?"+Rr+".width:"+Ir+".drawingBufferWidth"),Lr.set(Ir,".framebufferHeight",Rr+"?"+Rr+".height:"+Ir+".drawingBufferHeight"),Rr})}return null}(Bt)),Rr=function(Bt,Qt){function yr(nn,Cn){if(nn in Dr){var Ur=0|Dr[nn];return Cn?Xr.offset=Ur:Xr.instances=Ur,q(function(An,wn){return Cn&&(An.OFFSET=Ur),Ur})}if(nn in $r){var Kr=$r[nn];return W(Kr,function(An,wn){var Hn=An.invoke(wn,Kr);return Cn&&(An.OFFSET=Hn),Hn})}if(Cn){if(Rr)return q(function(An,wn){return An.OFFSET=0});if(Mr)return new X(Lr.thisDep,Lr.contextDep,Lr.propDep,function(An,wn){return wn.def(An.shared.vao+".currentVAO?"+An.shared.vao+".currentVAO.offset:0")})}else if(Mr)return new X(Lr.thisDep,Lr.contextDep,Lr.propDep,function(An,wn){return wn.def(An.shared.vao+".currentVAO?"+An.shared.vao+".currentVAO.instances:-1")});return null}var Dr=Bt.static,$r=Bt.dynamic,Xr={},Mr=!1,Lr=function(){if("vao"in Dr){var nn=Dr.vao;return null!==nn&&null===gt.getVAO(nn)&&(nn=gt.createVAO(nn)),Mr=!0,Xr.vao=nn,q(function(Ur){var Kr=gt.getVAO(nn);return Kr?Ur.link(Kr):"null"})}if("vao"in $r){Mr=!0;var Cn=$r.vao;return W(Cn,function(Ur,Kr){var An=Ur.invoke(Kr,Cn);return Kr.def(Ur.shared.vao+".getVAO("+An+")")})}return null}(),Rr=!1,Ir=function(){if("elements"in Dr){var nn=Dr.elements;if(Xr.elements=nn,U(nn)){var Cn=Xr.elements=Ie.create(nn,!0);nn=Ie.getElements(Cn),Rr=!0}else nn&&(nn=Ie.getElements(nn),Rr=!0);return(Cn=q(function(Kr,An){if(nn){var wn=Kr.link(nn);return Kr.ELEMENTS=wn}return Kr.ELEMENTS=null})).value=nn,Cn}if("elements"in $r){Rr=!0;var Ur=$r.elements;return W(Ur,function(Kr,An){var wn=(Hn=Kr.shared).isBufferArgs,Hn=Hn.elements,gi=Kr.invoke(An,Ur),ti=An.def("null");return wn=An.def(wn,"(",gi,")"),gi=Kr.cond(wn).then(ti,"=",Hn,".createStream(",gi,");").else(ti,"=",Hn,".getElements(",gi,");"),An.entry(gi),An.exit(Kr.cond(wn).then(Hn,".destroyStream(",ti,");")),Kr.ELEMENTS=ti})}return Mr?new X(Lr.thisDep,Lr.contextDep,Lr.propDep,function(Kr,An){return An.def(Kr.shared.vao+".currentVAO?"+Kr.shared.elements+".getElements("+Kr.shared.vao+".currentVAO.elements):null")}):null}(),Fr=yr("offset",!0),Qr=function(){if("primitive"in Dr){var nn=Dr.primitive;return Xr.primitive=nn,q(function(Ur,Kr){return Te[nn]})}if("primitive"in $r){var Cn=$r.primitive;return W(Cn,function(Ur,Kr){var An=Ur.constants.primTypes,wn=Ur.invoke(Kr,Cn);return Kr.def(An,"[",wn,"]")})}return Rr?Z(Ir)?q(Ir.value?function(Ur,Kr){return Kr.def(Ur.ELEMENTS,".primType")}:function(){return 4}):new X(Ir.thisDep,Ir.contextDep,Ir.propDep,function(Ur,Kr){var An=Ur.ELEMENTS;return Kr.def(An,"?",An,".primType:",4)}):Mr?new X(Lr.thisDep,Lr.contextDep,Lr.propDep,function(Ur,Kr){return Kr.def(Ur.shared.vao+".currentVAO?"+Ur.shared.vao+".currentVAO.primitive:4")}):null}(),yn=function(){if("count"in Dr){var nn=0|Dr.count;return Xr.count=nn,q(function(){return nn})}if("count"in $r){var Cn=$r.count;return W(Cn,function(Ur,Kr){return Ur.invoke(Kr,Cn)})}return Rr?Z(Ir)?Ir?Fr?new X(Fr.thisDep,Fr.contextDep,Fr.propDep,function(Ur,Kr){return Kr.def(Ur.ELEMENTS,".vertCount-",Ur.OFFSET)}):q(function(Ur,Kr){return Kr.def(Ur.ELEMENTS,".vertCount")}):q(function(){return-1}):new X(Ir.thisDep||Fr.thisDep,Ir.contextDep||Fr.contextDep,Ir.propDep||Fr.propDep,function(Ur,Kr){var An=Ur.ELEMENTS;return Ur.OFFSET?Kr.def(An,"?",An,".vertCount-",Ur.OFFSET,":-1"):Kr.def(An,"?",An,".vertCount:-1")}):Mr?new X(Lr.thisDep,Lr.contextDep,Lr.propDep,function(Ur,Kr){return Kr.def(Ur.shared.vao,".currentVAO?",Ur.shared.vao,".currentVAO.count:-1")}):null}(),In=yr("instances",!1);return{elements:Ir,primitive:Qr,count:yn,instances:In,offset:Fr,vao:Lr,vaoActive:Mr,elementsActive:Rr,static:Xr}}(Bt),Ir=(Kr=(Cn=Bt).static,An=Cn.dynamic,wn={},cn.forEach(function(Hn){function gi(En,hi){if(Hn in Kr){var mi=En(Kr[Hn]);wn[ti]=q(function(){return mi})}else if(Hn in An){var ra=An[Hn];wn[ti]=W(ra,function(ka,fa){return hi(ka,fa,ka.invoke(fa,ra))})}}var ti=yt(Hn);switch(Hn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return gi(function(En){return En},function(En,hi,mi){return mi});case"depth.func":return gi(function(En){return Xt[En]},function(En,hi,mi){return hi.def(En.constants.compareFuncs,"[",mi,"]")});case"depth.range":return gi(function(En){return En},function(En,hi,mi){return[hi.def("+",mi,"[0]"),hi=hi.def("+",mi,"[1]")]});case"blend.func":return gi(function(En){return[St["srcRGB"in En?En.srcRGB:En.src],St["dstRGB"in En?En.dstRGB:En.dst],St["srcAlpha"in En?En.srcAlpha:En.src],St["dstAlpha"in En?En.dstAlpha:En.dst]]},function(En,hi,mi){function ra(Bi,$i){return hi.def('"',Bi,$i,'" in ',mi,"?",mi,".",Bi,$i,":",mi,".",Bi)}En=En.constants.blendFuncs;var ka=ra("src","RGB"),fa=ra("dst","RGB"),Aa=(ka=hi.def(En,"[",ka,"]"),hi.def(En,"[",ra("src","Alpha"),"]"));return[ka,fa=hi.def(En,"[",fa,"]"),Aa,En=hi.def(En,"[",ra("dst","Alpha"),"]")]});case"blend.equation":return gi(function(En){return"string"==typeof En?[Ln[En],Ln[En]]:"object"==typeof En?[Ln[En.rgb],Ln[En.alpha]]:void 0},function(En,hi,mi){var ra=En.constants.blendEquations,ka=hi.def(),fa=hi.def();return(En=En.cond("typeof ",mi,'==="string"')).then(ka,"=",fa,"=",ra,"[",mi,"];"),En.else(ka,"=",ra,"[",mi,".rgb];",fa,"=",ra,"[",mi,".alpha];"),hi(En),[ka,fa]});case"blend.color":return gi(function(En){return n(4,function(hi){return+En[hi]})},function(En,hi,mi){return n(4,function(ra){return hi.def("+",mi,"[",ra,"]")})});case"stencil.mask":return gi(function(En){return 0|En},function(En,hi,mi){return hi.def(mi,"|0")});case"stencil.func":return gi(function(En){return[Xt[En.cmp||"keep"],En.ref||0,"mask"in En?En.mask:-1]},function(En,hi,mi){return[En=hi.def('"cmp" in ',mi,"?",En.constants.compareFuncs,"[",mi,".cmp]",":",7680),hi.def(mi,".ref|0"),hi=hi.def('"mask" in ',mi,"?",mi,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return gi(function(En){return["stencil.opBack"===Hn?1029:1028,lr[En.fail||"keep"],lr[En.zfail||"keep"],lr[En.zpass||"keep"]]},function(En,hi,mi){function ra(fa){return hi.def('"',fa,'" in ',mi,"?",ka,"[",mi,".",fa,"]:",7680)}var ka=En.constants.stencilOps;return["stencil.opBack"===Hn?1029:1028,ra("fail"),ra("zfail"),ra("zpass")]});case"polygonOffset.offset":return gi(function(En){return[0|En.factor,0|En.units]},function(En,hi,mi){return[hi.def(mi,".factor|0"),hi=hi.def(mi,".units|0")]});case"cull.face":return gi(function(En){var hi=0;return"front"===En?hi=1028:"back"===En&&(hi=1029),hi},function(En,hi,mi){return hi.def(mi,'==="front"?',1028,":",1029)});case"lineWidth":return gi(function(En){return En},function(En,hi,mi){return mi});case"frontFace":return gi(function(En){return Ue[En]},function(En,hi,mi){return hi.def(mi+'==="cw"?2304:2305')});case"colorMask":return gi(function(En){return En.map(function(hi){return!!hi})},function(En,hi,mi){return n(4,function(ra){return"!!"+mi+"["+ra+"]"})});case"sample.coverage":return gi(function(En){return["value"in En?En.value:1,!!En.invert]},function(En,hi,mi){return[hi.def('"value" in ',mi,"?+",mi,".value:1"),hi=hi.def("!!",mi,".invert")]})}}),wn),Fr=function(Bt,Qt,yr){function Dr(Ir){if(Ir in $r){var Fr=it.id($r[Ir]);return(Ir=q(function(){return Fr})).id=Fr,Ir}if(Ir in Xr){var Qr=Xr[Ir];return W(Qr,function(yn,In){var nn=yn.invoke(In,Qr);return In.def(yn.shared.strings,".id(",nn,")")})}return null}var $r=Bt.static,Xr=Bt.dynamic,Mr=Dr("frag"),Lr=Dr("vert"),Rr=null;return Z(Mr)&&Z(Lr)?(Rr=Pt.program(Lr.id,Mr.id,null,yr),Bt=q(function(Ir,Fr){return Ir.link(Rr)})):Bt=new X(Mr&&Mr.thisDep||Lr&&Lr.thisDep,Mr&&Mr.contextDep||Lr&&Lr.contextDep,Mr&&Mr.propDep||Lr&&Lr.propDep,function(Ir,Fr){var Qr,yn,In=Ir.shared.shader;return Qr=Mr?Mr.append(Ir,Fr):Fr.def(In,".","frag"),yn=Lr?Lr.append(Ir,Fr):Fr.def(In,".","vert"),Fr.def(In+".program("+yn+","+Qr+")")}),{frag:Mr,vert:Lr,progVar:Bt,program:Rr}}(Bt,0,Mr);Xr("viewport"),Xr(yt("scissor.box"));var Qr,yn=0<Object.keys(Ir).length;if((Qr={framebuffer:Qr,draw:Rr,shader:Fr,state:Ir,dirty:yn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Cn){var Ur,Kr=Cn.static;if(Cn=Cn.dynamic,"profile"in Kr){var An=!!Kr.profile;(Ur=q(function(Hn,gi){return An})).enable=An}else if("profile"in Cn){var wn=Cn.profile;Ur=W(wn,function(Hn,gi){return Hn.invoke(gi,wn)})}return Ur}(Bt),Qr.uniforms=function(Cn,Ur){var Kr=Cn.static,An=Cn.dynamic,wn={};return Object.keys(Kr).forEach(function(Hn){var gi,ti=Kr[Hn];if("number"==typeof ti||"boolean"==typeof ti)gi=q(function(){return ti});else if("function"==typeof ti){var En=ti._reglType;"texture2d"===En||"textureCube"===En?gi=q(function(hi){return hi.link(ti)}):"framebuffer"!==En&&"framebufferCube"!==En||(gi=q(function(hi){return hi.link(ti.color[0])}))}else d(ti)&&(gi=q(function(hi){return hi.global.def("[",n(ti.length,function(mi){return ti[mi]}),"]")}));gi.value=ti,wn[Hn]=gi}),Object.keys(An).forEach(function(Hn){var gi=An[Hn];wn[Hn]=W(gi,function(ti,En){return ti.invoke(En,gi)})}),wn}(yr),Qr.drawVAO=Qr.scopeVAO=Rr.vao,!Qr.drawVAO&&Fr.program&&!Mr&&ke.angle_instanced_arrays&&Rr.static.elements){var In=!0;if(Bt=Fr.program.attributes.map(function(Cn){return Cn=Qt.static[Cn],In=In&&!!Cn,Cn}),In&&0<Bt.length){var nn=gt.getVAO(gt.createVAO({attributes:Bt,elements:Rr.static.elements}));Qr.drawVAO=new X(null,null,null,function(Cn,Ur){return Cn.link(nn)}),Qr.useVAO=!0}}return Mr?Qr.useVAO=!0:Qr.attributes=function(Bt,Qt){var yr=Bt.static,Dr=Bt.dynamic,$r={};return Object.keys(yr).forEach(function(Xr){var Mr=yr[Xr],Lr=it.id(Xr),Rr=new Gn;if(U(Mr))Rr.state=1,Rr.buffer=Re.getBuffer(Re.create(Mr,34962,!1,!0)),Rr.type=0;else if(Fr=Re.getBuffer(Mr))Rr.state=1,Rr.buffer=Fr,Rr.type=0;else if("constant"in Mr){var Ir=Mr.constant;Rr.buffer="null",Rr.state=2,"number"==typeof Ir?Rr.x=Ir:at.forEach(function(Ur,Kr){Kr<Ir.length&&(Rr[Ur]=Ir[Kr])})}else{var Fr=U(Mr.buffer)?Re.getBuffer(Re.create(Mr.buffer,34962,!1,!0)):Re.getBuffer(Mr.buffer),Qr=0|Mr.offset,yn=0|Mr.stride,In=0|Mr.size,nn=!!Mr.normalized,Cn=0;"type"in Mr&&(Cn=le[Mr.type]),Mr=0|Mr.divisor,Rr.buffer=Fr,Rr.state=1,Rr.size=In,Rr.normalized=nn,Rr.type=Cn||Fr.dtype,Rr.offset=Qr,Rr.stride=yn,Rr.divisor=Mr}$r[Xr]=q(function(Ur,Kr){var An=Ur.attribCache;if(Lr in An)return An[Lr];var wn={isStream:!1};return Object.keys(Rr).forEach(function(Hn){wn[Hn]=Rr[Hn]}),Rr.buffer&&(wn.buffer=Ur.link(Rr.buffer),wn.type=wn.type||wn.buffer+".dtype"),An[Lr]=wn})}),Object.keys(Dr).forEach(function(Xr){var Mr=Dr[Xr];$r[Xr]=W(Mr,function(Lr,Rr){function Ir(An){Rr(nn[An],"=",Fr,".",An,"|0;")}var Fr=Lr.invoke(Rr,Mr),Qr=Lr.shared,yn=Lr.constants,In=Qr.isBufferArgs,nn=(Qr=Qr.buffer,{isStream:Rr.def(!1)}),Cn=new Gn;Cn.state=1,Object.keys(Cn).forEach(function(An){nn[An]=Rr.def(""+Cn[An])});var Ur=nn.buffer,Kr=nn.type;return Rr("if(",In,"(",Fr,")){",nn.isStream,"=true;",Ur,"=",Qr,".createStream(",34962,",",Fr,");",Kr,"=",Ur,".dtype;","}else{",Ur,"=",Qr,".getBuffer(",Fr,");","if(",Ur,"){",Kr,"=",Ur,".dtype;",'}else if("constant" in ',Fr,"){",nn.state,"=",2,";","if(typeof "+Fr+'.constant === "number"){',nn[at[0]],"=",Fr,".constant;",at.slice(1).map(function(An){return nn[An]}).join("="),"=0;","}else{",at.map(function(An,wn){return nn[An]+"="+Fr+".constant.length>"+wn+"?"+Fr+".constant["+wn+"]:0;"}).join(""),"}}else{","if(",In,"(",Fr,".buffer)){",Ur,"=",Qr,".createStream(",34962,",",Fr,".buffer);","}else{",Ur,"=",Qr,".getBuffer(",Fr,".buffer);","}",Kr,'="type" in ',Fr,"?",yn.glTypes,"[",Fr,".type]:",Ur,".dtype;",nn.normalized,"=!!",Fr,".normalized;"),Ir("size"),Ir("offset"),Ir("stride"),Ir("divisor"),Rr("}}"),Rr.exit("if(",nn.isStream,"){",Qr,".destroyStream(",Ur,");","}"),nn})}),$r}(Qt),Qr.context=function(Cn){var Ur=Cn.static,Kr=Cn.dynamic,An={};return Object.keys(Ur).forEach(function(wn){var Hn=Ur[wn];An[wn]=q(function(gi,ti){return"number"==typeof Hn||"boolean"==typeof Hn?""+Hn:gi.link(Hn)})}),Object.keys(Kr).forEach(function(wn){var Hn=Kr[wn];An[wn]=W(Hn,function(gi,ti){return gi.invoke(ti,Hn)})}),An}(Dr),Qr}function fr(Bt,Qt,yr){var Dr=Bt.shared.context,$r=Bt.scope();Object.keys(yr).forEach(function(Xr){Qt.save(Dr,"."+Xr);var Mr=yr[Xr].append(Bt,Qt);Array.isArray(Mr)?$r(Dr,".",Xr,"=[",Mr.join(),"];"):$r(Dr,".",Xr,"=",Mr,";")}),Qt($r)}function $t(Bt,Qt,yr,Dr){var $r,Xr=(Lr=Bt.shared).gl,Mr=Lr.framebuffer;qr&&($r=Qt.def(Lr.extensions,".webgl_draw_buffers"));var Lr=(Rr=Bt.constants).drawBuffer,Rr=Rr.backBuffer;Bt=yr?yr.append(Bt,Qt):Qt.def(Mr,".next"),Dr||Qt("if(",Bt,"!==",Mr,".cur){"),Qt("if(",Bt,"){",Xr,".bindFramebuffer(",36160,",",Bt,".framebuffer);"),qr&&Qt($r,".drawBuffersWEBGL(",Lr,"[",Bt,".colorAttachments.length]);"),Qt("}else{",Xr,".bindFramebuffer(",36160,",null);"),qr&&Qt($r,".drawBuffersWEBGL(",Rr,");"),Qt("}",Mr,".cur=",Bt,";"),Dr||Qt("}")}function nr(Bt,Qt,yr){var Dr=Bt.shared,$r=Dr.gl,Xr=Bt.current,Mr=Bt.next,Lr=Dr.current,Rr=Dr.next,Ir=Bt.cond(Lr,".dirty");cn.forEach(function(Fr){var Qr,yn;if(!((Fr=yt(Fr))in yr.state))if(Fr in Mr){Qr=Mr[Fr],yn=Xr[Fr];var In=n(un[Fr].length,function(nn){return Ir.def(Qr,"[",nn,"]")});Ir(Bt.cond(In.map(function(nn,Cn){return nn+"!=="+yn+"["+Cn+"]"}).join("||")).then($r,".",Bn[Fr],"(",In,");",In.map(function(nn,Cn){return yn+"["+Cn+"]="+nn}).join(";"),";"))}else Qr=Ir.def(Rr,".",Fr),In=Bt.cond(Qr,"!==",Lr,".",Fr),Ir(In),Fr in fn?In(Bt.cond(Qr).then($r,".enable(",fn[Fr],");").else($r,".disable(",fn[Fr],");"),Lr,".",Fr,"=",Qr,";"):In($r,".",Bn[Fr],"(",Qr,");",Lr,".",Fr,"=",Qr,";")}),0===Object.keys(yr.state).length&&Ir(Lr,".dirty=false;"),Qt(Ir)}function dr(Bt,Qt,yr,Dr){var $r=Bt.shared,Xr=Bt.current,Mr=$r.current,Lr=$r.gl;G(Object.keys(yr)).forEach(function(Rr){var Ir=yr[Rr];if(!Dr||Dr(Ir)){var Fr=Ir.append(Bt,Qt);if(fn[Rr]){var Qr=fn[Rr];Z(Ir)?Qt(Lr,Fr?".enable(":".disable(",Qr,");"):Qt(Bt.cond(Fr).then(Lr,".enable(",Qr,");").else(Lr,".disable(",Qr,");")),Qt(Mr,".",Rr,"=",Fr,";")}else if(d(Fr)){var yn=Xr[Rr];Qt(Lr,".",Bn[Rr],"(",Fr,");",Fr.map(function(In,nn){return yn+"["+nn+"]="+In}).join(";"),";")}else Qt(Lr,".",Bn[Rr],"(",Fr,");",Mr,".",Rr,"=",Fr,";")}})}function Tr(Bt,Qt){ln&&(Bt.instancing=Qt.def(Bt.shared.extensions,".angle_instanced_arrays"))}function wr(Bt,Qt,yr,Dr,$r){function Xr(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function Mr(Cn){Cn(Ir=Qt.def(),"=",Xr(),";"),"string"==typeof $r?Cn(yn,".count+=",$r,";"):Cn(yn,".count++;"),Ft&&(Dr?Cn(Fr=Qt.def(),"=",nn,".getNumPendingQueries();"):Cn(nn,".beginQuery(",yn,");"))}function Lr(Cn){Cn(yn,".cpuTime+=",Xr(),"-",Ir,";"),Ft&&(Dr?Cn(nn,".pushScopeStats(",Fr,",",nn,".getNumPendingQueries(),",yn,");"):Cn(nn,".endQuery();"))}function Rr(Cn){var Ur=Qt.def(In,".profile");Qt(In,".profile=",Cn,";"),Qt.exit(In,".profile=",Ur,";")}var Ir,Fr,Qr=Bt.shared,yn=Bt.stats,In=Qr.current,nn=Qr.timer;if(yr=yr.profile){if(Z(yr))return void(yr.enable?(Mr(Qt),Lr(Qt.exit),Rr("true")):Rr("false"));Rr(yr=yr.append(Bt,Qt))}else yr=Qt.def(In,".profile");Mr(Qr=Bt.block()),Qt("if(",yr,"){",Qr,"}"),Lr(Bt=Bt.block()),Qt.exit("if(",yr,"){",Bt,"}")}function mr(Bt,Qt,yr,Dr,$r){var Mr=Bt.shared;Dr.forEach(function(Lr){var Rr,Ir=Lr.name,Fr=yr.attributes[Ir];if(Fr){if(!$r(Fr))return;Rr=Fr.append(Bt,Qt)}else{if(!$r(Ze))return;var Qr=Bt.scopeAttrib(Ir);Rr={},Object.keys(new Gn).forEach(function(yn){Rr[yn]=Qt.def(Qr,".",yn)})}!function(Lr,Rr,Ir){function Fr(){Qt("if(!",nn,".buffer){",yn,".enableVertexAttribArray(",In,");}");var An,wn=Ir.type;An=Ir.size?Qt.def(Ir.size,"||",Rr):Rr,Qt("if(",nn,".type!==",wn,"||",nn,".size!==",An,"||",Kr.map(function(Hn){return nn+"."+Hn+"!=="+Ir[Hn]}).join("||"),"){",yn,".bindBuffer(",34962,",",Cn,".buffer);",yn,".vertexAttribPointer(",[In,An,wn,Ir.normalized,Ir.stride,Ir.offset],");",nn,".type=",wn,";",nn,".size=",An,";",Kr.map(function(Hn){return nn+"."+Hn+"="+Ir[Hn]+";"}).join(""),"}"),ln&&Qt("if(",nn,".divisor!==",wn=Ir.divisor,"){",Bt.instancing,".vertexAttribDivisorANGLE(",[In,wn],");",nn,".divisor=",wn,";}")}function Qr(){Qt("if(",nn,".buffer){",yn,".disableVertexAttribArray(",In,");",nn,".buffer=null;","}if(",at.map(function(An,wn){return nn+"."+An+"!=="+Ur[wn]}).join("||"),"){",yn,".vertexAttrib4f(",In,",",Ur,");",at.map(function(An,wn){return nn+"."+An+"="+Ur[wn]+";"}).join(""),"}")}var yn=Mr.gl,In=Qt.def(Lr,".location"),nn=Qt.def(Mr.attributes,"[",In,"]"),Cn=Ir.buffer,Ur=[Ir.x,Ir.y,Ir.z,Ir.w],Kr=["buffer","normalized","offset","stride"];1===(Lr=Ir.state)?Fr():2===Lr?Qr():(Qt("if(",Lr,"===",1,"){"),Fr(),Qt("}else{"),Qr(),Qt("}"))}(Bt.link(Lr),function(yn){switch(yn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Lr.info.type),Rr)})}function _r(Bt,Qt,yr,Dr,$r,Xr){for(var Mr,Lr=Bt.shared,Rr=Lr.gl,Ir={},Fr=0;Fr<Dr.length;++Fr){var Qr=(Kr=Dr[Fr]).name,yn=Kr.info.type,In=Kr.info.size,nn=yr.uniforms[Qr];if(1<In){if(!nn)continue;var Cn=Qr.replace("[0]","");if(Ir[Cn])continue;Ir[Cn]=1}var Ur,Kr=Bt.link(Kr)+".location";if(nn){if(!$r(nn))continue;if(Z(nn)){if(Qr=nn.value,35678===yn||35680===yn)Qt(Rr,".uniform1i(",Kr,",",(yn=Bt.link(Qr._texture||Qr.color[0]._texture))+".bind());"),Qt.exit(yn,".unbind();");else if(35674===yn||35675===yn||35676===yn)In=Bt.global.def("new Float32Array(["+Array.prototype.slice.call(Qr)+"])"),Qr=2,35675===yn?Qr=3:35676===yn&&(Qr=4),Qt(Rr,".uniformMatrix",Qr,"fv(",Kr,",false,",In,");");else{switch(yn){case 5126:Mr="1f";break;case 35664:Mr="2f";break;case 35665:Mr="3f";break;case 35666:Mr="4f";break;case 35670:case 5124:Mr="1i";break;case 35671:case 35667:Mr="2i";break;case 35672:case 35668:Mr="3i";break;case 35673:Mr="4i";break;case 35669:Mr="4i"}1<In?(Mr+="v",Qr=Bt.global.def("["+Array.prototype.slice.call(Qr)+"]")):Qr=d(Qr)?Array.prototype.slice.call(Qr):Qr,Qt(Rr,".uniform",Mr,"(",Kr,",",Qr,");")}continue}Ur=nn.append(Bt,Qt)}else{if(!$r(Ze))continue;Ur=Qt.def(Lr.uniforms,"[",it.id(Qr),"]")}switch(35678===yn?Qt("if(",Ur,"&&",Ur,'._reglType==="framebuffer"){',Ur,"=",Ur,".color[0];","}"):35680===yn&&Qt("if(",Ur,"&&",Ur,'._reglType==="framebufferCube"){',Ur,"=",Ur,".color[0];","}"),Qr=1,yn){case 35678:case 35680:yn=Qt.def(Ur,"._texture"),Qt(Rr,".uniform1i(",Kr,",",yn,".bind());"),Qt.exit(yn,".unbind();");continue;case 5124:case 35670:Mr="1i";break;case 35667:case 35671:Mr="2i",Qr=2;break;case 35668:case 35672:Mr="3i",Qr=3;break;case 35669:case 35673:Mr="4i",Qr=4;break;case 5126:Mr="1f";break;case 35664:Mr="2f",Qr=2;break;case 35665:Mr="3f",Qr=3;break;case 35666:Mr="4f",Qr=4;break;case 35674:Mr="Matrix2fv";break;case 35675:Mr="Matrix3fv";break;case 35676:Mr="Matrix4fv"}if(-1===Mr.indexOf("Matrix")&&1<In&&(Mr+="v",Qr=1),"M"===Mr.charAt(0)){Qt(Rr,".uniform",Mr,"(",Kr,","),Kr=Math.pow(yn-35674+2,2);var An=Bt.global.def("new Float32Array(",Kr,")");Array.isArray(Ur)?Qt("false,(",n(Kr,function(Hn){return An+"["+Hn+"]="+Ur[Hn]}),",",An,")"):Qt("false,(Array.isArray(",Ur,")||",Ur," instanceof Float32Array)?",Ur,":(",n(Kr,function(Hn){return An+"["+Hn+"]="+Ur+"["+Hn+"]"}),",",An,")"),Qt(");")}else{if(1<Qr){yn=[];var wn=[];for(In=0;In<Qr;++In)Array.isArray(Ur)?wn.push(Ur[In]):wn.push(Qt.def(Ur+"["+In+"]")),Xr&&yn.push(Qt.def());Xr&&Qt("if(!",Bt.batchId,"||",yn.map(function(Hn,gi){return Hn+"!=="+wn[gi]}).join("||"),"){",yn.map(function(Hn,gi){return Hn+"="+wn[gi]+";"}).join("")),Qt(Rr,".uniform",Mr,"(",Kr,",",wn.join(","),");")}else Xr&&(yn=Qt.def(),Qt("if(!",Bt.batchId,"||",yn,"!==",Ur,"){",yn,"=",Ur,";")),Qt(Rr,".uniform",Mr,"(",Kr,",",Ur,");");Xr&&Qt("}")}}}function Sr(Bt,Qt,yr,Dr){function $r(wn){var Hn=yn[wn];return Hn?Hn.append(Bt,Hn.contextDep&&Dr.contextDynamic||Hn.propDep?yr:Qt):Qt.def(Qr,".",wn)}function Xr(){function wn(){yr(Rr,".drawElementsInstancedANGLE(",[nn,Ur,Kr,Cn+"<<(("+Kr+"-5121)>>1)",Lr],");")}function Hn(){yr(Rr,".drawArraysInstancedANGLE(",[nn,Cn,Ur,Lr],");")}In&&"null"!==In?An?wn():(yr("if(",In,"){"),wn(),yr("}else{"),Hn(),yr("}")):Hn()}function Mr(){function wn(){yr(Fr+".drawElements("+[nn,Ur,Kr,Cn+"<<(("+Kr+"-5121)>>1)"]+");")}function Hn(){yr(Fr+".drawArrays("+[nn,Cn,Ur]+");")}In&&"null"!==In?An?wn():(yr("if(",In,"){"),wn(),yr("}else{"),Hn(),yr("}")):Hn()}var Lr,Rr,wn,Hn,Ir=Bt.shared,Fr=Ir.gl,Qr=Ir.draw,yn=Dr.draw,In=(Hn=Qt,(wn=yn.elements)?((wn.contextDep&&Dr.contextDynamic||wn.propDep)&&(Hn=yr),wn=wn.append(Bt,Hn),yn.elementsActive&&Hn("if("+wn+")"+Fr+".bindBuffer(34963,"+wn+".buffer.buffer);")):(wn=Hn.def(),Hn(wn,"=",Qr,".","elements",";","if(",wn,"){",Fr,".bindBuffer(",34963,",",wn,".buffer.buffer);}","else if(",Ir.vao,".currentVAO){",wn,"=",Bt.shared.elements+".getElements("+Ir.vao,".currentVAO.elements);",Pr?"":"if("+wn+")"+Fr+".bindBuffer(34963,"+wn+".buffer.buffer);","}")),wn),nn=$r("primitive"),Cn=$r("offset"),Ur=function(){var wn=yn.count,Hn=Qt;return wn?((wn.contextDep&&Dr.contextDynamic||wn.propDep)&&(Hn=yr),wn=wn.append(Bt,Hn)):wn=Hn.def(Qr,".","count"),wn}();if("number"==typeof Ur){if(0===Ur)return}else yr("if(",Ur,"){"),yr.exit("}");ln&&(Lr=$r("instances"),Rr=Bt.instancing);var Kr=In+".type",An=yn.elements&&Z(yn.elements)&&!yn.vaoActive;ln&&("number"!=typeof Lr||0<=Lr)?"string"==typeof Lr?(yr("if(",Lr,">0){"),Xr(),yr("}else if(",Lr,"<0){"),Mr(),yr("}")):Xr():Mr()}function Gr(Bt,Qt,yr,Dr,$r){return $r=(Qt=rr()).proc("body",$r),ln&&(Qt.instancing=$r.def(Qt.shared.extensions,".angle_instanced_arrays")),Bt(Qt,$r,yr,Dr),Qt.compile().body}function Er(Bt,Qt,yr,Dr){Tr(Bt,Qt),yr.useVAO?yr.drawVAO?Qt(Bt.shared.vao,".setVAO(",yr.drawVAO.append(Bt,Qt),");"):Qt(Bt.shared.vao,".setVAO(",Bt.shared.vao,".targetVAO);"):(Qt(Bt.shared.vao,".setVAO(null);"),mr(Bt,Qt,yr,Dr.attributes,function(){return!0})),_r(Bt,Qt,yr,Dr.uniforms,function(){return!0},!1),Sr(Bt,Qt,Qt,yr)}function Zr(Bt,Qt,yr,Dr){function $r(){return!0}Bt.batchId="a1",Tr(Bt,Qt),mr(Bt,Qt,yr,Dr.attributes,$r),_r(Bt,Qt,yr,Dr.uniforms,$r,!1),Sr(Bt,Qt,Qt,yr)}function an(Bt,Qt,yr,Dr){function $r(Qr){return Qr.contextDep&&Mr||Qr.propDep}function Xr(Qr){return!$r(Qr)}Tr(Bt,Qt);var Mr=yr.contextDep,Lr=Qt.def(),Rr=Qt.def();Bt.shared.props=Rr,Bt.batchId=Lr;var Ir=Bt.scope(),Fr=Bt.scope();Qt(Ir.entry,"for(",Lr,"=0;",Lr,"<","a1",";++",Lr,"){",Rr,"=","a0","[",Lr,"];",Fr,"}",Ir.exit),yr.needsContext&&fr(Bt,Fr,yr.context),yr.needsFramebuffer&&$t(Bt,Fr,yr.framebuffer),dr(Bt,Fr,yr.state,$r),yr.profile&&$r(yr.profile)&&wr(Bt,Fr,yr,!1,!0),Dr?(yr.useVAO?yr.drawVAO?$r(yr.drawVAO)?Fr(Bt.shared.vao,".setVAO(",yr.drawVAO.append(Bt,Fr),");"):Ir(Bt.shared.vao,".setVAO(",yr.drawVAO.append(Bt,Ir),");"):Ir(Bt.shared.vao,".setVAO(",Bt.shared.vao,".targetVAO);"):(Ir(Bt.shared.vao,".setVAO(null);"),mr(Bt,Ir,yr,Dr.attributes,Xr),mr(Bt,Fr,yr,Dr.attributes,$r)),_r(Bt,Ir,yr,Dr.uniforms,Xr,!1),_r(Bt,Fr,yr,Dr.uniforms,$r,!0),Sr(Bt,Ir,Fr,yr)):(Qt=Bt.global.def("{}"),Dr=yr.shader.progVar.append(Bt,Fr),Rr=Fr.def(Dr,".id"),Ir=Fr.def(Qt,"[",Rr,"]"),Fr(Bt.shared.gl,".useProgram(",Dr,".program);","if(!",Ir,"){",Ir,"=",Qt,"[",Rr,"]=",Bt.link(function(Qr){return Gr(Zr,Bt,yr,Qr,2)}),"(",Dr,");}",Ir,".call(this,a0[",Lr,"],",Lr,");"))}function Vn(Bt,Qt,yr){var Dr=Qt.static[yr];if(Dr&&function(Fr){if("object"==typeof Fr&&!d(Fr)){for(var Qr=Object.keys(Fr),yn=0;yn<Qr.length;++yn)if(ee.isDynamic(Fr[Qr[yn]]))return!0;return!1}}(Dr)){var $r=Bt.global,Xr=Object.keys(Dr),Mr=!1,Lr=!1,Rr=!1,Ir=Bt.global.def("{}");Xr.forEach(function(Fr){var Qr=Dr[Fr];if(ee.isDynamic(Qr))"function"==typeof Qr&&(Qr=Dr[Fr]=ee.unbox(Qr)),Fr=W(Qr,null),Mr=Mr||Fr.thisDep,Rr=Rr||Fr.propDep,Lr=Lr||Fr.contextDep;else{switch($r(Ir,".",Fr,"="),typeof Qr){case"number":$r(Qr);break;case"string":$r('"',Qr,'"');break;case"object":Array.isArray(Qr)&&$r("[",Qr.join(),"]");break;default:$r(Bt.link(Qr))}$r(";")}}),Qt.dynamic[yr]=new ee.DynamicVariable(4,{thisDep:Mr,contextDep:Lr,propDep:Rr,ref:Ir,append:function(Fr,Qr){Xr.forEach(function(yn){var In=Dr[yn];ee.isDynamic(In)&&(In=Fr.invoke(Qr,In),Qr(Ir,".",yn,"=",In,";"))})}}),delete Qt.static[yr]}}var Gn=gt.Record,Ln={add:32774,subtract:32778,"reverse subtract":32779};ke.ext_blend_minmax&&(Ln.min=32775,Ln.max=32776);var ln=ke.angle_instanced_arrays,qr=ke.webgl_draw_buffers,Pr=ke.oes_vertex_array_object,un={dirty:!0,profile:Qe.profile},dn={},cn=[],fn={},Bn={};Nt("dither",3024),Nt("blend.enable",3042),Yt("blend.color","blendColor",[0,0,0,0]),Yt("blend.equation","blendEquationSeparate",[32774,32774]),Yt("blend.func","blendFuncSeparate",[1,0,1,0]),Nt("depth.enable",2929,!0),Yt("depth.func","depthFunc",513),Yt("depth.range","depthRange",[0,1]),Yt("depth.mask","depthMask",!0),Yt("colorMask","colorMask",[!0,!0,!0,!0]),Nt("cull.enable",2884),Yt("cull.face","cullFace",1029),Yt("frontFace","frontFace",2305),Yt("lineWidth","lineWidth",1),Nt("polygonOffset.enable",32823),Yt("polygonOffset.offset","polygonOffset",[0,0]),Nt("sample.alpha",32926),Nt("sample.enable",32928),Yt("sample.coverage","sampleCoverage",[1,!1]),Nt("stencil.enable",2960),Yt("stencil.mask","stencilMask",-1),Yt("stencil.func","stencilFunc",[519,0,-1]),Yt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Yt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Nt("scissor.enable",3089),Yt("scissor.box","scissor",[0,0,Ne.drawingBufferWidth,Ne.drawingBufferHeight]),Yt("viewport","viewport",[0,0,Ne.drawingBufferWidth,Ne.drawingBufferHeight]);var Nn={gl:Ne,context:zt,strings:it,next:dn,current:un,draw:ct,elements:Ie,buffer:Re,shader:Pt,attributes:gt.state,vao:gt,uniforms:xt,framebuffer:ut,extensions:ke,timer:Ft,isBufferArgs:U},Fn={primTypes:Te,compareFuncs:Xt,blendFuncs:St,blendEquations:Ln,stencilOps:lr,glTypes:le,orientationType:Ue};qr&&(Fn.backBuffer=[1029],Fn.drawBuffer=n(De.maxDrawbuffers,function(Bt){return 0===Bt?[0]:n(Bt,function(Qt){return 36064+Qt})}));var ar=0;return{next:dn,current:un,procs:function(){var Bt=rr(),Qt=Bt.proc("poll"),yr=Bt.proc("refresh"),Dr=Bt.block();Qt(Dr),yr(Dr);var $r,Xr=Bt.shared,Mr=Xr.gl,Lr=Xr.next,Rr=Xr.current;Dr(Rr,".dirty=false;"),$t(Bt,Qt),$t(Bt,yr,null,!0),ln&&($r=Bt.link(ln)),ke.oes_vertex_array_object&&yr(Bt.link(ke.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Ir=0;Ir<De.maxAttributes;++Ir){var Fr=yr.def(Xr.attributes,"[",Ir,"]"),Qr=Bt.cond(Fr,".buffer");Qr.then(Mr,".enableVertexAttribArray(",Ir,");",Mr,".bindBuffer(",34962,",",Fr,".buffer.buffer);",Mr,".vertexAttribPointer(",Ir,",",Fr,".size,",Fr,".type,",Fr,".normalized,",Fr,".stride,",Fr,".offset);").else(Mr,".disableVertexAttribArray(",Ir,");",Mr,".vertexAttrib4f(",Ir,",",Fr,".x,",Fr,".y,",Fr,".z,",Fr,".w);",Fr,".buffer=null;"),yr(Qr),ln&&yr($r,".vertexAttribDivisorANGLE(",Ir,",",Fr,".divisor);")}return yr(Bt.shared.vao,".currentVAO=null;",Bt.shared.vao,".setVAO(",Bt.shared.vao,".targetVAO);"),Object.keys(fn).forEach(function(yn){var In=fn[yn],nn=Dr.def(Lr,".",yn),Cn=Bt.block();Cn("if(",nn,"){",Mr,".enable(",In,")}else{",Mr,".disable(",In,")}",Rr,".",yn,"=",nn,";"),yr(Cn),Qt("if(",nn,"!==",Rr,".",yn,"){",Cn,"}")}),Object.keys(Bn).forEach(function(yn){var In,nn,Cn=Bn[yn],Ur=un[yn],Kr=Bt.block();Kr(Mr,".",Cn,"("),d(Ur)?(Cn=Ur.length,In=Bt.global.def(Lr,".",yn),nn=Bt.global.def(Rr,".",yn),Kr(n(Cn,function(An){return In+"["+An+"]"}),");",n(Cn,function(An){return nn+"["+An+"]="+In+"["+An+"];"}).join("")),Qt("if(",n(Cn,function(An){return In+"["+An+"]!=="+nn+"["+An+"]"}).join("||"),"){",Kr,"}")):(In=Dr.def(Lr,".",yn),nn=Dr.def(Rr,".",yn),Kr(In,");",Rr,".",yn,"=",In,";"),Qt("if(",In,"!==",nn,"){",Kr,"}")),yr(Kr)}),Bt.compile()}(),compile:function(Bt,Qt,yr,Dr,$r){var Xr=rr();Xr.stats=Xr.link($r),Object.keys(Qt.static).forEach(function(Lr){Vn(Xr,Qt,Lr)}),rt.forEach(function(Lr){Vn(Xr,Bt,Lr)});var Mr=Zt(Bt,Qt,yr,Dr);return function(Lr,Rr){var Ir=Lr.proc("draw",1);Tr(Lr,Ir),fr(Lr,Ir,Rr.context),$t(Lr,Ir,Rr.framebuffer),nr(Lr,Ir,Rr),dr(Lr,Ir,Rr.state),wr(Lr,Ir,Rr,!1,!0);var Fr=Rr.shader.progVar.append(Lr,Ir);if(Ir(Lr.shared.gl,".useProgram(",Fr,".program);"),Rr.shader.program)Er(Lr,Ir,Rr,Rr.shader.program);else{Ir(Lr.shared.vao,".setVAO(null);");var Qr=Lr.global.def("{}"),yn=Ir.def(Fr,".id"),In=Ir.def(Qr,"[",yn,"]");Ir(Lr.cond(In).then(In,".call(this,a0);").else(In,"=",Qr,"[",yn,"]=",Lr.link(function(nn){return Gr(Er,Lr,Rr,nn,1)}),"(",Fr,");",In,".call(this,a0);"))}0<Object.keys(Rr.state).length&&Ir(Lr.shared.current,".dirty=true;"),Lr.shared.vao&&Ir(Lr.shared.vao,".setVAO(null);")}(Xr,Mr),function(Bt,Qt){function yr(Mr){var Lr=Qt.shader[Mr];Lr&&Dr.set($r.shader,"."+Mr,Lr.append(Bt,Dr))}var Dr=Bt.proc("scope",3);Bt.batchId="a2";var $r=Bt.shared,Xr=$r.current;fr(Bt,Dr,Qt.context),Qt.framebuffer&&Qt.framebuffer.append(Bt,Dr),G(Object.keys(Qt.state)).forEach(function(Mr){var Lr=Qt.state[Mr].append(Bt,Dr);d(Lr)?Lr.forEach(function(Rr,Ir){Dr.set(Bt.next[Mr],"["+Ir+"]",Rr)}):Dr.set($r.next,"."+Mr,Lr)}),wr(Bt,Dr,Qt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Mr){var Lr=Qt.draw[Mr];Lr&&Dr.set($r.draw,"."+Mr,""+Lr.append(Bt,Dr))}),Object.keys(Qt.uniforms).forEach(function(Mr){var Lr=Qt.uniforms[Mr].append(Bt,Dr);Array.isArray(Lr)&&(Lr="["+Lr.join()+"]"),Dr.set($r.uniforms,"["+it.id(Mr)+"]",Lr)}),Object.keys(Qt.attributes).forEach(function(Mr){var Lr=Qt.attributes[Mr].append(Bt,Dr),Rr=Bt.scopeAttrib(Mr);Object.keys(new Gn).forEach(function(Ir){Dr.set(Rr,"."+Ir,Lr[Ir])})}),Qt.scopeVAO&&Dr.set($r.vao,".targetVAO",Qt.scopeVAO.append(Bt,Dr)),yr("vert"),yr("frag"),0<Object.keys(Qt.state).length&&(Dr(Xr,".dirty=true;"),Dr.exit(Xr,".dirty=true;")),Dr("a1(",Bt.shared.context,",a0,",Bt.batchId,");")}(Xr,Mr),function(Lr,Rr){function Ir(Ur){return Ur.contextDep&&Qr||Ur.propDep}var Fr=Lr.proc("batch",2);Lr.batchId="0",Tr(Lr,Fr);var Qr=!1,yn=!0;Object.keys(Rr.context).forEach(function(Ur){Qr=Qr||Rr.context[Ur].propDep}),Qr||(fr(Lr,Fr,Rr.context),yn=!1);var In=!1;if((nn=Rr.framebuffer)?(nn.propDep?Qr=In=!0:nn.contextDep&&Qr&&(In=!0),In||$t(Lr,Fr,nn)):$t(Lr,Fr,null),Rr.state.viewport&&Rr.state.viewport.propDep&&(Qr=!0),nr(Lr,Fr,Rr),dr(Lr,Fr,Rr.state,function(Ur){return!Ir(Ur)}),Rr.profile&&Ir(Rr.profile)||wr(Lr,Fr,Rr,!1,"a1"),Rr.contextDep=Qr,Rr.needsContext=yn,Rr.needsFramebuffer=In,(yn=Rr.shader.progVar).contextDep&&Qr||yn.propDep)an(Lr,Fr,Rr,null);else if(yn=yn.append(Lr,Fr),Fr(Lr.shared.gl,".useProgram(",yn,".program);"),Rr.shader.program)an(Lr,Fr,Rr,Rr.shader.program);else{Fr(Lr.shared.vao,".setVAO(null);");var nn=Lr.global.def("{}"),Cn=(In=Fr.def(yn,".id"),Fr.def(nn,"[",In,"]"));Fr(Lr.cond(Cn).then(Cn,".call(this,a0,a1);").else(Cn,"=",nn,"[",In,"]=",Lr.link(function(Ur){return Gr(an,Lr,Rr,Ur,2)}),"(",yn,");",Cn,".call(this,a0,a1);"))}0<Object.keys(Rr.state).length&&Fr(Lr.shared.current,".dirty=true;"),Lr.shared.vao&&Fr(Lr.shared.vao,".setVAO(null);")}(Xr,Mr),N(Xr.compile(),{destroy:function(){Mr.shader.program.destroy()}})}}}function R(Ne,it){for(var ke=0;ke<Ne.length;++ke)if(Ne[ke]===it)return ke;return-1}var N=function(Ne,it){for(var ke=Object.keys(it),De=0;De<ke.length;++De)Ne[ke[De]]=it[ke[De]];return Ne},V=0,ee={DynamicVariable:p,define:function(Ne,it){return new p(Ne,v(it+""))},isDynamic:function(Ne){return"function"==typeof Ne&&!Ne._reglType||Ne instanceof p},unbox:function Ne(it,ke){return"function"==typeof it?new p(0,it):"number"==typeof it||"boolean"==typeof it?new p(5,it):Array.isArray(it)?new p(6,it.map(function(De,Re){return Ne(De,ke+"["+Re+"]")})):it instanceof p?it:void 0},accessor:v},j={next:"function"==typeof requestAnimationFrame?function(Ne){return requestAnimationFrame(Ne)}:function(Ne){return setTimeout(Ne,16)},cancel:"function"==typeof cancelAnimationFrame?function(Ne){return cancelAnimationFrame(Ne)}:clearTimeout},J="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},$=a();$.zero=a();var ne=function(Ne){return Ne instanceof Uint8Array||Ne instanceof Uint16Array||Ne instanceof Uint32Array||Ne instanceof Int8Array||Ne instanceof Int16Array||Ne instanceof Int32Array||Ne instanceof Float32Array||Ne instanceof Float64Array||Ne instanceof Uint8ClampedArray},se=function(Ne){return Object.keys(Ne).map(function(it){return Ne[it]})},ie={shape:function(Ne){for(var it=[];Ne.length;Ne=Ne[0])it.push(Ne.length);return it},flatten:function(Ne,it,ke,De){var Re=1;if(it.length)for(var Ie=0;Ie<it.length;++Ie)Re*=it[Ie];else Re=0;switch(ke=De||$.allocType(ke,Re),it.length){case 0:break;case 1:for(De=it[0],it=0;it<De;++it)ke[it]=Ne[it];break;case 2:for(De=it[0],it=it[1],Ie=Re=0;Ie<De;++Ie)for(var Ke=Ne[Ie],ut=0;ut<it;++ut)ke[Re++]=Ke[ut];break;case 3:f(Ne,it[0],it[1],it[2],ke,0);break;default:!function xt(gt,Pt,ct,zt,Ft){for(var Qe=1,yt=ct+1;yt<Pt.length;++yt)Qe*=Pt[yt];var Nt=Pt[ct];if(Pt.length-ct==4){var Yt=Pt[ct+1],rr=Pt[ct+2];for(Pt=Pt[ct+3],yt=0;yt<Nt;++yt)f(gt[yt],Yt,rr,Pt,zt,Ft),Ft+=Qe}else for(yt=0;yt<Nt;++yt)xt(gt[yt],Pt,ct+1,zt,Ft),Ft+=Qe}(Ne,it,0,ke,0)}return ke}},ue={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},le={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},de={dynamic:35048,stream:35040,static:35044},ve=ie.flatten,_e=ie.shape,be=[];be[5120]=1,be[5122]=2,be[5124]=4,be[5121]=1,be[5123]=2,be[5125]=4,be[5126]=4;var Te={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},he=new Float32Array(1),me=new Uint32Array(he.buffer),Ae=[9984,9986,9985,9987],we=[0,6409,6410,6407,6408],Se={};Se[6409]=Se[6406]=Se[6402]=1,Se[34041]=Se[6410]=2,Se[6407]=Se[35904]=3,Se[6408]=Se[35906]=4;var Pe=o("HTMLCanvasElement"),ze=o("OffscreenCanvas"),He=o("CanvasRenderingContext2D"),tt=o("ImageBitmap"),Oe=o("HTMLImageElement"),Be=o("HTMLVideoElement"),Je=Object.keys(ue).concat([Pe,ze,He,tt,Oe,Be]),Ye=[];Ye[5121]=1,Ye[5126]=4,Ye[36193]=2,Ye[5123]=2,Ye[5125]=4;var nt=[];nt[32854]=2,nt[32855]=2,nt[36194]=2,nt[34041]=4,nt[33776]=.5,nt[33777]=.5,nt[33778]=1,nt[33779]=1,nt[35986]=.5,nt[35987]=1,nt[34798]=1,nt[35840]=.5,nt[35841]=.25,nt[35842]=.5,nt[35843]=.25,nt[36196]=.5;var ft=[];ft[32854]=2,ft[32855]=2,ft[36194]=2,ft[33189]=2,ft[36168]=1,ft[34041]=4,ft[35907]=4,ft[34836]=16,ft[34842]=8,ft[34843]=6;var Rt=[];Rt[6408]=4,Rt[6407]=3;var Et=[];Et[5121]=1,Et[5126]=4,Et[36193]=2;var at=["x","y","z","w"],rt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),St={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Xt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},lr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ue={cw:2304,ccw:2305},Ze=new X(!1,!1,!1,function(){});return function(Ne){function it(){if(0===Zr.length)Fe&&Fe.update(),Gn=null;else{Gn=j.next(it),Pt();for(var ln=Zr.length-1;0<=ln;--ln){var qr=Zr[ln];qr&&qr(Zt,null,0)}Ft.flush(),Fe&&Fe.update()}}function ke(){!Gn&&0<Zr.length&&(Gn=j.next(it))}function De(){Gn&&(j.cancel(it),Gn=null)}function Re(ln){ln.preventDefault(),De(),an.forEach(function(qr){qr()})}function Ie(ln){Ft.getError(),yt.restore(),Tr.restore(),$t.restore(),wr.restore(),mr.restore(),_r.restore(),dr.restore(),Fe&&Fe.restore(),Sr.procs.refresh(),ke(),gn.forEach(function(qr){qr()})}function Ke(ln){function qr(Bt,Qt){var yr={},Dr={};return Object.keys(Bt).forEach(function($r){var Xr=Bt[$r];if(ee.isDynamic(Xr))Dr[$r]=ee.unbox(Xr,$r);else{if(Qt&&Array.isArray(Xr))for(var Mr=0;Mr<Xr.length;++Mr)if(ee.isDynamic(Xr[Mr]))return void(Dr[$r]=ee.unbox(Xr,$r));yr[$r]=Xr}}),{dynamic:Dr,static:yr}}var Pr=qr(ln.context||{},!0),un=qr(ln.uniforms||{},!0),dn=qr(ln.attributes||{},!1);ln=qr(function(Bt){function Qt(Dr){if(Dr in yr){var $r=yr[Dr];delete yr[Dr],Object.keys($r).forEach(function(Xr){yr[Dr+"."+Xr]=$r[Xr]})}}var yr=N({},Bt);return delete yr.uniforms,delete yr.attributes,delete yr.context,delete yr.vao,"stencil"in yr&&yr.stencil.op&&(yr.stencil.opBack=yr.stencil.opFront=yr.stencil.op,delete yr.stencil.op),Qt("blend"),Qt("depth"),Qt("cull"),Qt("stencil"),Qt("polygonOffset"),Qt("scissor"),Qt("sample"),"vao"in Bt&&(yr.vao=Bt.vao),yr}(ln),!1);var cn={gpuTime:0,cpuTime:0,count:0},fn=Sr.compile(ln,dn,un,Pr,cn),Bn=fn.draw,Nn=fn.batch,Fn=fn.scope,ar=[];return N(function(Bt,Qt){var yr;if("function"==typeof Bt)return Fn.call(this,null,Bt,0);if("function"==typeof Qt)if("number"==typeof Bt)for(yr=0;yr<Bt;++yr)Fn.call(this,null,Qt,yr);else{if(!Array.isArray(Bt))return Fn.call(this,Bt,Qt,0);for(yr=0;yr<Bt.length;++yr)Fn.call(this,Bt[yr],Qt,yr)}else if("number"==typeof Bt){if(0<Bt)return Nn.call(this,function(Dr){for(;ar.length<Dr;)ar.push(null);return ar}(0|Bt),0|Bt)}else{if(!Array.isArray(Bt))return Bn.call(this,Bt);if(Bt.length)return Nn.call(this,Bt,Bt.length)}},{stats:cn,destroy:function(){fn.destroy()}})}function ut(ln,qr){var Pr=0;Sr.procs.poll();var un=qr.color;un&&(Ft.clearColor(+un[0]||0,+un[1]||0,+un[2]||0,+un[3]||0),Pr|=16384),"depth"in qr&&(Ft.clearDepth(+qr.depth),Pr|=256),"stencil"in qr&&(Ft.clearStencil(0|qr.stencil),Pr|=1024),Ft.clear(Pr)}function xt(ln){return Zr.push(ln),ke(),{cancel:function(){var qr=R(Zr,ln);Zr[qr]=function Pr(){var un=R(Zr,Pr);Zr[un]=Zr[Zr.length-1],--Zr.length,0>=Zr.length&&De()}}}}function gt(){var ln=Gr.viewport,qr=Gr.scissor_box;ln[0]=ln[1]=qr[0]=qr[1]=0,Zt.viewportWidth=Zt.framebufferWidth=Zt.drawingBufferWidth=ln[2]=qr[2]=Ft.drawingBufferWidth,Zt.viewportHeight=Zt.framebufferHeight=Zt.drawingBufferHeight=ln[3]=qr[3]=Ft.drawingBufferHeight}function Pt(){Zt.tick+=1,Zt.time=zt(),gt(),Sr.procs.poll()}function ct(){wr.refresh(),gt(),Sr.procs.refresh(),Fe&&Fe.update()}function zt(){return(J()-ht)/1e3}if(!(Ne=function(Ne){var it,ke,De,Re,Ie=Ne||{};Ne={};var Ke=[],ut=[],xt="undefined"==typeof window?1:window.devicePixelRatio,gt=!1,Pt=function(zt){},ct=function(){};if("string"==typeof Ie?it=document.querySelector(Ie):"object"==typeof Ie&&("string"==typeof Ie.nodeName&&"function"==typeof Ie.appendChild&&"function"==typeof Ie.getBoundingClientRect?it=Ie:"function"==typeof Ie.drawArrays||"function"==typeof Ie.drawElements?De=(Re=Ie).canvas:("gl"in Ie?Re=Ie.gl:"canvas"in Ie?De=y(Ie.canvas):"container"in Ie&&(ke=y(Ie.container)),"attributes"in Ie&&(Ne=Ie.attributes),"extensions"in Ie&&(Ke=u(Ie.extensions)),"optionalExtensions"in Ie&&(ut=u(Ie.optionalExtensions)),"onDone"in Ie&&(Pt=Ie.onDone),"profile"in Ie&&(gt=!!Ie.profile),"pixelRatio"in Ie&&(xt=+Ie.pixelRatio))),it&&("canvas"===it.nodeName.toLowerCase()?De=it:ke=it),!Re){if(!De){if(!(it=function(zt,Ft,Qe){function yt(){var rr=window.innerWidth,Fe=window.innerHeight;zt!==document.body&&(rr=(Fe=Yt.getBoundingClientRect()).right-Fe.left,Fe=Fe.bottom-Fe.top),Yt.width=Qe*rr,Yt.height=Qe*Fe}var Nt,Yt=document.createElement("canvas");return N(Yt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),zt.appendChild(Yt),zt===document.body&&(Yt.style.position="absolute",N(zt.style,{margin:0,padding:0})),zt!==document.body&&"function"==typeof ResizeObserver?(Nt=new ResizeObserver(function(){setTimeout(yt)})).observe(zt):window.addEventListener("resize",yt,!1),yt(),{canvas:Yt,onDestroy:function(){Nt?Nt.disconnect():window.removeEventListener("resize",yt),zt.removeChild(Yt)}}}(ke||document.body,0,xt)))return null;De=it.canvas,ct=it.onDestroy}void 0===Ne.premultipliedAlpha&&(Ne.premultipliedAlpha=!0),Re=function(zt,Ft){function Qe(yt){try{return zt.getContext(yt,Ft)}catch(Nt){return null}}return Qe("webgl")||Qe("experimental-webgl")||Qe("webgl-experimental")}(De,Ne)}return Re?{gl:Re,canvas:De,container:ke,extensions:Ke,optionalExtensions:ut,pixelRatio:xt,profile:gt,onDone:Pt,onDestroy:ct}:(ct(),Pt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(Ne)))return null;var Ft=Ne.gl,Qe=Ft.getContextAttributes();Ft.isContextLost();var yt=function(ln,qr){function Pr(fn){var Bn;fn=fn.toLowerCase();try{Bn=un[fn]=ln.getExtension(fn)}catch(Nn){}return!!Bn}for(var un={},dn=0;dn<qr.extensions.length;++dn){var cn=qr.extensions[dn];if(!Pr(cn))return qr.onDestroy(),qr.onDone('"'+cn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return qr.optionalExtensions.forEach(Pr),{extensions:un,restore:function(){Object.keys(un).forEach(function(fn){if(un[fn]&&!Pr(fn))throw Error("(regl): error restoring extension "+fn)})}}}(Ft,Ne);if(!yt)return null;var ln,qr,Nt=(ln={"":0},qr=[""],{id:function(Pr){var un=ln[Pr];return un||(un=ln[Pr]=qr.length,qr.push(Pr),un)},str:function(Pr){return qr[Pr]}}),Yt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},rr=yt.extensions,Fe=function(ln,qr){function Pr(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function un(ar,Bt,Qt){var yr=fn.pop()||new Pr;yr.startQueryIndex=ar,yr.endQueryIndex=Bt,yr.sum=0,yr.stats=Qt,Bn.push(yr)}if(!qr.ext_disjoint_timer_query)return null;var dn=[],cn=[],fn=[],Bn=[],Nn=[],Fn=[];return{beginQuery:function(ar){var Bt=dn.pop()||qr.ext_disjoint_timer_query.createQueryEXT();qr.ext_disjoint_timer_query.beginQueryEXT(35007,Bt),cn.push(Bt),un(cn.length-1,cn.length,ar)},endQuery:function(){qr.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:un,update:function(){var ar,Bt;if(0!==(ar=cn.length)){Fn.length=Math.max(Fn.length,ar+1),Nn.length=Math.max(Nn.length,ar+1),Nn[0]=0;var Qt=Fn[0]=0;for(Bt=ar=0;Bt<cn.length;++Bt){var yr=cn[Bt];qr.ext_disjoint_timer_query.getQueryObjectEXT(yr,34919)?(Qt+=qr.ext_disjoint_timer_query.getQueryObjectEXT(yr,34918),dn.push(yr)):cn[ar++]=yr,Nn[Bt+1]=Qt,Fn[Bt+1]=ar}for(cn.length=ar,Bt=ar=0;Bt<Bn.length;++Bt){var Dr=(Qt=Bn[Bt]).startQueryIndex;Qt.sum+=Nn[yr=Qt.endQueryIndex]-Nn[Dr],(yr=Fn[yr])===(Dr=Fn[Dr])?(Qt.stats.gpuTime+=Qt.sum/1e6,fn.push(Qt)):(Qt.startQueryIndex=Dr,Qt.endQueryIndex=yr,Bn[ar++]=Qt)}Bn.length=ar}},getNumPendingQueries:function(){return cn.length},clear:function(){dn.push.apply(dn,cn);for(var ar=0;ar<dn.length;ar++)qr.ext_disjoint_timer_query.deleteQueryEXT(dn[ar]);cn.length=0,dn.length=0},restore:function(){cn.length=0,dn.length=0}}}(0,rr),ht=J(),kt=Ft.drawingBufferWidth,Gt=Ft.drawingBufferHeight,Zt={tick:0,time:0,viewportWidth:kt,viewportHeight:Gt,framebufferWidth:kt,framebufferHeight:Gt,drawingBufferWidth:kt,drawingBufferHeight:Gt,pixelRatio:Ne.pixelRatio},fr=(kt={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(Ne,it){var ke=1;it.ext_texture_filter_anisotropic&&(ke=Ne.getParameter(34047));var De=1,Re=1;it.webgl_draw_buffers&&(De=Ne.getParameter(34852),Re=Ne.getParameter(36063));var Ie=!!it.oes_texture_float;if(Ie){Ie=Ne.createTexture(),Ne.bindTexture(3553,Ie),Ne.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var Ke=Ne.createFramebuffer();if(Ne.bindFramebuffer(36160,Ke),Ne.framebufferTexture2D(36160,36064,3553,Ie,0),Ne.bindTexture(3553,null),36053!==Ne.checkFramebufferStatus(36160))Ie=!1;else{Ne.viewport(0,0,1,1),Ne.clearColor(1,0,0,1),Ne.clear(16384);var ut=$.allocType(5126,4);Ne.readPixels(0,0,1,1,6408,5126,ut),Ne.getError()?Ie=!1:(Ne.deleteFramebuffer(Ke),Ne.deleteTexture(Ie),Ie=1===ut[0]),$.freeType(ut)}}return ut=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ut=Ne.createTexture(),Ke=$.allocType(5121,36),Ne.activeTexture(33984),Ne.bindTexture(34067,ut),Ne.texImage2D(34069,0,6408,3,3,0,6408,5121,Ke),$.freeType(Ke),Ne.bindTexture(34067,null),Ne.deleteTexture(ut),ut=!Ne.getError()),{colorBits:[Ne.getParameter(3410),Ne.getParameter(3411),Ne.getParameter(3412),Ne.getParameter(3413)],depthBits:Ne.getParameter(3414),stencilBits:Ne.getParameter(3415),subpixelBits:Ne.getParameter(3408),extensions:Object.keys(it).filter(function(xt){return!!it[xt]}),maxAnisotropic:ke,maxDrawbuffers:De,maxColorAttachments:Re,pointSizeDims:Ne.getParameter(33901),lineWidthDims:Ne.getParameter(33902),maxViewportDims:Ne.getParameter(3386),maxCombinedTextureUnits:Ne.getParameter(35661),maxCubeMapSize:Ne.getParameter(34076),maxRenderbufferSize:Ne.getParameter(34024),maxTextureUnits:Ne.getParameter(34930),maxTextureSize:Ne.getParameter(3379),maxAttributes:Ne.getParameter(34921),maxVertexUniforms:Ne.getParameter(36347),maxVertexTextureUnits:Ne.getParameter(35660),maxVaryingVectors:Ne.getParameter(36348),maxFragmentUniforms:Ne.getParameter(36349),glsl:Ne.getParameter(35724),renderer:Ne.getParameter(7937),vendor:Ne.getParameter(7936),version:Ne.getParameter(7938),readFloat:Ie,npotTextureCube:ut}}(Ft,rr)),$t=function(Ne,it,ke,De){function Re(ct){this.id=xt++,this.buffer=Ne.createBuffer(),this.type=ct,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,ke.profile&&(this.stats={size:0})}function Ie(ct,zt,Ft){ct.byteLength=zt.byteLength,Ne.bufferData(ct.type,zt,Ft)}function Ke(ct,zt,Ft,Qe,yt,Nt){if(ct.usage=Ft,Array.isArray(zt)){if(ct.dtype=Qe||5126,0<zt.length)if(Array.isArray(zt[0])){yt=_e(zt);for(var Yt=Qe=1;Yt<yt.length;++Yt)Qe*=yt[Yt];ct.dimension=Qe,Ie(ct,zt=ve(zt,yt,ct.dtype),Ft),Nt?ct.persistentData=zt:$.freeType(zt)}else"number"==typeof zt[0]?(ct.dimension=yt,i(yt=$.allocType(ct.dtype,zt.length),zt),Ie(ct,yt,Ft),Nt?ct.persistentData=yt:$.freeType(yt)):ne(zt[0])&&(ct.dimension=zt[0].length,ct.dtype=Qe||s(zt[0])||5126,Ie(ct,zt=ve(zt,[zt.length,zt[0].length],ct.dtype),Ft),Nt?ct.persistentData=zt:$.freeType(zt))}else if(ne(zt))ct.dtype=Qe||s(zt),ct.dimension=yt,Ie(ct,zt,Ft),Nt&&(ct.persistentData=new Uint8Array(new Uint8Array(zt.buffer)));else if(r(zt)){var rr=zt.stride,Fe=(Yt=zt.offset,0),ht=0,kt=0,Gt=0;1===(yt=zt.shape).length?(Fe=yt[0],ht=1,kt=rr[0],Gt=0):2===yt.length&&(Fe=yt[0],ht=yt[1],kt=rr[0],Gt=rr[1]),ct.dtype=Qe||s(zt.data)||5126,ct.dimension=ht,l(yt=$.allocType(ct.dtype,Fe*ht),zt.data,Fe,ht,kt,Gt,Yt),Ie(ct,yt,Ft),Nt?ct.persistentData=yt:$.freeType(yt)}else zt instanceof ArrayBuffer&&(ct.dtype=5121,ct.dimension=yt,Ie(ct,zt,Ft),Nt&&(ct.persistentData=new Uint8Array(new Uint8Array(zt))))}function ut(ct){it.bufferCount--,De(ct),Ne.deleteBuffer(ct.buffer),ct.buffer=null,delete gt[ct.id]}var xt=0,gt={};Re.prototype.bind=function(){Ne.bindBuffer(this.type,this.buffer)},Re.prototype.destroy=function(){ut(this)};var Pt=[];return ke.profile&&(it.getTotalBufferSize=function(){var ct=0;return Object.keys(gt).forEach(function(zt){ct+=gt[zt].stats.size}),ct}),{create:function(ct,zt,Ft,Qe){function yt(Yt){var rr=35044,Fe=null,ht=0,kt=0,Gt=1;return Array.isArray(Yt)||ne(Yt)||r(Yt)||Yt instanceof ArrayBuffer?Fe=Yt:"number"==typeof Yt?ht=0|Yt:Yt&&("data"in Yt&&(Fe=Yt.data),"usage"in Yt&&(rr=de[Yt.usage]),"type"in Yt&&(kt=le[Yt.type]),"dimension"in Yt&&(Gt=0|Yt.dimension),"length"in Yt&&(ht=0|Yt.length)),Nt.bind(),Fe?Ke(Nt,Fe,rr,kt,Gt,Qe):(ht&&Ne.bufferData(Nt.type,ht,rr),Nt.dtype=kt||5121,Nt.usage=rr,Nt.dimension=Gt,Nt.byteLength=ht),ke.profile&&(Nt.stats.size=Nt.byteLength*be[Nt.dtype]),yt}it.bufferCount++;var Nt=new Re(zt);return gt[Nt.id]=Nt,Ft||yt(ct),yt._reglType="buffer",yt._buffer=Nt,yt.subdata=function(Yt,rr){var Fe,ht=0|(rr||0);if(Nt.bind(),ne(Yt)||Yt instanceof ArrayBuffer)Ne.bufferSubData(Nt.type,ht,Yt);else if(Array.isArray(Yt)){if(0<Yt.length)if("number"==typeof Yt[0]){var kt=$.allocType(Nt.dtype,Yt.length);i(kt,Yt),Ne.bufferSubData(Nt.type,ht,kt),$.freeType(kt)}else(Array.isArray(Yt[0])||ne(Yt[0]))&&(Fe=_e(Yt),kt=ve(Yt,Fe,Nt.dtype),Ne.bufferSubData(Nt.type,ht,kt),$.freeType(kt))}else if(r(Yt)){var Gt=Yt.stride,Zt=kt=0,fr=0,$t=0;1===(Fe=Yt.shape).length?(kt=Fe[0],Zt=1,fr=Gt[0],$t=0):2===Fe.length&&(kt=Fe[0],Zt=Fe[1],fr=Gt[0],$t=Gt[1]),Fe=Array.isArray(Yt.data)?Nt.dtype:s(Yt.data),l(Fe=$.allocType(Fe,kt*Zt),Yt.data,kt,Zt,fr,$t,Yt.offset),Ne.bufferSubData(Nt.type,ht,Fe),$.freeType(Fe)}return yt},ke.profile&&(yt.stats=Nt.stats),yt.destroy=function(){ut(Nt)},yt},createStream:function(ct,zt){var Ft=Pt.pop();return Ft||(Ft=new Re(ct)),Ft.bind(),Ke(Ft,zt,35040,0,1,!1),Ft},destroyStream:function(ct){Pt.push(ct)},clear:function(){se(gt).forEach(ut),Pt.forEach(ut)},getBuffer:function(ct){return ct&&ct._buffer instanceof Re?ct._buffer:null},restore:function(){se(gt).forEach(function(ct){ct.buffer=Ne.createBuffer(),Ne.bindBuffer(ct.type,ct.buffer),Ne.bufferData(ct.type,ct.persistentData||ct.byteLength,ct.usage)})},_initBuffer:Ke}}(Ft,Yt,Ne,function(ln){return dr.destroyBuffer(ln)}),nr=function(Ne,it,ke,De){function Re(ct){this.id=xt++,ut[this.id]=this,this.buffer=ct,this.primType=4,this.type=this.vertCount=0}function Ie(ct,zt,Ft,Qe,yt,Nt,Yt){var rr;if(ct.buffer.bind(),zt?((rr=Yt)||ne(zt)&&(!r(zt)||ne(zt.data))||(rr=it.oes_element_index_uint?5125:5123),ke._initBuffer(ct.buffer,zt,Ft,rr,3)):(Ne.bufferData(34963,Nt,Ft),ct.buffer.dtype=rr||5121,ct.buffer.usage=Ft,ct.buffer.dimension=3,ct.buffer.byteLength=Nt),rr=Yt,!Yt){switch(ct.buffer.dtype){case 5121:case 5120:rr=5121;break;case 5123:case 5122:rr=5123;break;case 5125:case 5124:rr=5125}ct.buffer.dtype=rr}ct.type=rr,0>(zt=yt)&&(zt=ct.buffer.byteLength,5123===rr?zt>>=1:5125===rr&&(zt>>=2)),ct.vertCount=zt,zt=Qe,0>Qe&&(zt=4,1===(Qe=ct.buffer.dimension)&&(zt=0),2===Qe&&(zt=1),3===Qe&&(zt=4)),ct.primType=zt}function Ke(ct){De.elementsCount--,delete ut[ct.id],ct.buffer.destroy(),ct.buffer=null}var ut={},xt=0,gt={uint8:5121,uint16:5123};it.oes_element_index_uint&&(gt.uint32=5125),Re.prototype.bind=function(){this.buffer.bind()};var Pt=[];return{create:function(ct,zt){function Ft(Nt){if(Nt)if("number"==typeof Nt)Qe(Nt),yt.primType=4,yt.vertCount=0|Nt,yt.type=5121;else{var Yt=null,rr=35044,Fe=-1,ht=-1,kt=0,Gt=0;Array.isArray(Nt)||ne(Nt)||r(Nt)?Yt=Nt:("data"in Nt&&(Yt=Nt.data),"usage"in Nt&&(rr=de[Nt.usage]),"primitive"in Nt&&(Fe=Te[Nt.primitive]),"count"in Nt&&(ht=0|Nt.count),"type"in Nt&&(Gt=gt[Nt.type]),"length"in Nt?kt=0|Nt.length:(kt=ht,5123===Gt||5122===Gt?kt*=2:5125!==Gt&&5124!==Gt||(kt*=4))),Ie(yt,Yt,rr,Fe,ht,kt,Gt)}else Qe(),yt.primType=4,yt.vertCount=0,yt.type=5121;return Ft}var Qe=ke.create(null,34963,!0),yt=new Re(Qe._buffer);return De.elementsCount++,Ft(ct),Ft._reglType="elements",Ft._elements=yt,Ft.subdata=function(Nt,Yt){return Qe.subdata(Nt,Yt),Ft},Ft.destroy=function(){Ke(yt)},Ft},createStream:function(ct){var zt=Pt.pop();return zt||(zt=new Re(ke.create(null,34963,!0,!1)._buffer)),Ie(zt,ct,35040,-1,-1,0,0),zt},destroyStream:function(ct){Pt.push(ct)},getElements:function(ct){return"function"==typeof ct&&ct._elements instanceof Re?ct._elements:null},clear:function(){se(ut).forEach(Ke)}}}(Ft,rr,$t,Yt),dr=function(Ne,it,ke,De,Re,Ie,Ke){function ut(){this.id=++Pt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Ft=it.oes_vertex_array_object;this.vao=Ft?Ft.createVertexArrayOES():null,ct[this.id]=this,this.buffers=[]}var xt=ke.maxAttributes,gt=Array(xt);for(ke=0;ke<xt;++ke)gt[ke]=new O;var Pt=0,ct={},zt={Record:O,scope:{},state:gt,currentVAO:null,targetVAO:null,restore:it.oes_vertex_array_object?function(){it.oes_vertex_array_object&&se(ct).forEach(function(Ft){Ft.refresh()})}:function(){},createVAO:function(Ft){function Qe(Nt){var Yt;Array.isArray(Nt)?(Yt=Nt,yt.elements&&yt.ownsElements&&yt.elements.destroy(),yt.elements=null,yt.ownsElements=!1,yt.offset=0,yt.count=0,yt.instances=-1,yt.primitive=4):(Nt.elements?(Yt=Nt.elements,yt.ownsElements?("function"==typeof Yt&&"elements"===Yt._reglType?yt.elements.destroy():yt.elements(Yt),yt.ownsElements=!1):Ie.getElements(Nt.elements)?(yt.elements=Nt.elements,yt.ownsElements=!1):(yt.elements=Ie.create(Nt.elements),yt.ownsElements=!0)):(yt.elements=null,yt.ownsElements=!1),Yt=Nt.attributes,yt.offset=0,yt.count=-1,yt.instances=-1,yt.primitive=4,yt.elements&&(yt.count=yt.elements._elements.vertCount,yt.primitive=yt.elements._elements.primType),"offset"in Nt&&(yt.offset=0|Nt.offset),"count"in Nt&&(yt.count=0|Nt.count),"instances"in Nt&&(yt.instances=0|Nt.instances),"primitive"in Nt&&(yt.primitive=Te[Nt.primitive])),Nt={};var rr=yt.attributes;rr.length=Yt.length;for(var Fe=0;Fe<Yt.length;++Fe){var ht,kt=Yt[Fe],Gt=rr[Fe]=new O,Zt=kt.data||kt;Array.isArray(Zt)||ne(Zt)||r(Zt)?(yt.buffers[Fe]&&(ht=yt.buffers[Fe],ne(Zt)&&ht._buffer.byteLength>=Zt.byteLength?ht.subdata(Zt):(ht.destroy(),yt.buffers[Fe]=null)),yt.buffers[Fe]||(ht=yt.buffers[Fe]=Re.create(kt,34962,!1,!0)),Gt.buffer=Re.getBuffer(ht),Gt.size=0|Gt.buffer.dimension,Gt.normalized=!1,Gt.type=Gt.buffer.dtype,Gt.offset=0,Gt.stride=0,Gt.divisor=0,Gt.state=1,Nt[Fe]=1):Re.getBuffer(kt)?(Gt.buffer=Re.getBuffer(kt),Gt.size=0|Gt.buffer.dimension,Gt.normalized=!1,Gt.type=Gt.buffer.dtype,Gt.offset=0,Gt.stride=0,Gt.divisor=0,Gt.state=1):Re.getBuffer(kt.buffer)?(Gt.buffer=Re.getBuffer(kt.buffer),Gt.size=0|(+kt.size||Gt.buffer.dimension),Gt.normalized=!!kt.normalized||!1,Gt.type="type"in kt?le[kt.type]:Gt.buffer.dtype,Gt.offset=0|(kt.offset||0),Gt.stride=0|(kt.stride||0),Gt.divisor=0|(kt.divisor||0),Gt.state=1):"x"in kt&&(Gt.x=+kt.x||0,Gt.y=+kt.y||0,Gt.z=+kt.z||0,Gt.w=+kt.w||0,Gt.state=2)}for(ht=0;ht<yt.buffers.length;++ht)!Nt[ht]&&yt.buffers[ht]&&(yt.buffers[ht].destroy(),yt.buffers[ht]=null);return yt.refresh(),Qe}var yt=new ut;return De.vaoCount+=1,Qe.destroy=function(){for(var Nt=0;Nt<yt.buffers.length;++Nt)yt.buffers[Nt]&&yt.buffers[Nt].destroy();yt.buffers.length=0,yt.ownsElements&&(yt.elements.destroy(),yt.elements=null,yt.ownsElements=!1),yt.destroy()},Qe._vao=yt,Qe._reglType="vao",Qe(Ft)},getVAO:function(Ft){return"function"==typeof Ft&&Ft._vao?Ft._vao:null},destroyBuffer:function(Ft){for(var Qe=0;Qe<gt.length;++Qe){var yt=gt[Qe];yt.buffer===Ft&&(Ne.disableVertexAttribArray(Qe),yt.buffer=null)}},setVAO:it.oes_vertex_array_object?function(Ft){Ft!==zt.currentVAO&&(it.oes_vertex_array_object.bindVertexArrayOES(Ft?Ft.vao:null),zt.currentVAO=Ft)}:function(Ft){if(Ft!==zt.currentVAO){if(Ft)Ft.bindAttrs();else{for(var Qe=it.angle_instanced_arrays,yt=0;yt<gt.length;++yt){var Nt=gt[yt];Nt.buffer?(Ne.enableVertexAttribArray(yt),Nt.buffer.bind(),Ne.vertexAttribPointer(yt,Nt.size,Nt.type,Nt.normalized,Nt.stride,Nt.offfset),Qe&&Nt.divisor&&Qe.vertexAttribDivisorANGLE(yt,Nt.divisor)):(Ne.disableVertexAttribArray(yt),Ne.vertexAttrib4f(yt,Nt.x,Nt.y,Nt.z,Nt.w))}Ne.bindBuffer(34963,Ke.elements?Ke.elements.buffer.buffer:null)}zt.currentVAO=Ft}},clear:it.oes_vertex_array_object?function(){se(ct).forEach(function(Ft){Ft.destroy()})}:function(){}};return ut.prototype.bindAttrs=function(){for(var Ft=it.angle_instanced_arrays,Qe=this.attributes,yt=0;yt<Qe.length;++yt){var Nt=Qe[yt];Nt.buffer?(Ne.enableVertexAttribArray(yt),Ne.bindBuffer(34962,Nt.buffer.buffer),Ne.vertexAttribPointer(yt,Nt.size,Nt.type,Nt.normalized,Nt.stride,Nt.offset),Ft&&Nt.divisor&&Ft.vertexAttribDivisorANGLE(yt,Nt.divisor)):(Ne.disableVertexAttribArray(yt),Ne.vertexAttrib4f(yt,Nt.x,Nt.y,Nt.z,Nt.w))}for(Ft=Qe.length;Ft<xt;++Ft)Ne.disableVertexAttribArray(Ft);(Ft=Ie.getElements(this.elements))?Ne.bindBuffer(34963,Ft.buffer.buffer):Ne.bindBuffer(34963,null)},ut.prototype.refresh=function(){var Ft=it.oes_vertex_array_object;Ft&&(Ft.bindVertexArrayOES(this.vao),this.bindAttrs(),zt.currentVAO=null,Ft.bindVertexArrayOES(null))},ut.prototype.destroy=function(){if(this.vao){var Ft=it.oes_vertex_array_object;this===zt.currentVAO&&(zt.currentVAO=null,Ft.bindVertexArrayOES(null)),Ft.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ct[this.id]&&(delete ct[this.id],--De.vaoCount)},zt}(Ft,rr,fr,Yt,$t,nr,kt),Tr=function(Ne,it,ke,De){function Re(Qe,yt,Nt,Yt){this.name=Qe,this.id=yt,this.location=Nt,this.info=Yt}function Ie(Qe,yt){for(var Nt=0;Nt<Qe.length;++Nt)if(Qe[Nt].id===yt.id)return void(Qe[Nt].location=yt.location);Qe.push(yt)}function Ke(Qe,yt,Nt){if(!(rr=(Nt=35632===Qe?gt:Pt)[yt])){var Yt=it.str(yt),rr=Ne.createShader(Qe);Ne.shaderSource(rr,Yt),Ne.compileShader(rr),Nt[yt]=rr}return rr}function ut(Qe,yt){this.id=Ft++,this.fragId=Qe,this.vertId=yt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,De.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function xt(Qe,yt,Nt){var Yt;Yt=Ke(35632,Qe.fragId);var rr=Ke(35633,Qe.vertId);if(yt=Qe.program=Ne.createProgram(),Ne.attachShader(yt,Yt),Ne.attachShader(yt,rr),Nt)for(Yt=0;Yt<Nt.length;++Yt)Ne.bindAttribLocation(yt,(rr=Nt[Yt])[0],rr[1]);Ne.linkProgram(yt),rr=Ne.getProgramParameter(yt,35718),De.profile&&(Qe.stats.uniformsCount=rr);var Fe=Qe.uniforms;for(Yt=0;Yt<rr;++Yt)if(Nt=Ne.getActiveUniform(yt,Yt)){if(1<Nt.size)for(var ht=0;ht<Nt.size;++ht){var kt=Nt.name.replace("[0]","["+ht+"]");Ie(Fe,new Re(kt,it.id(kt),Ne.getUniformLocation(yt,kt),Nt))}ht=Nt.name,1<Nt.size&&(ht=ht.replace("[0]","")),Ie(Fe,new Re(ht,it.id(ht),Ne.getUniformLocation(yt,ht),Nt))}for(rr=Ne.getProgramParameter(yt,35721),De.profile&&(Qe.stats.attributesCount=rr),Qe=Qe.attributes,Yt=0;Yt<rr;++Yt)(Nt=Ne.getActiveAttrib(yt,Yt))&&Ie(Qe,new Re(Nt.name,it.id(Nt.name),Ne.getAttribLocation(yt,Nt.name),Nt))}var gt={},Pt={},ct={},zt=[],Ft=0;return De.profile&&(ke.getMaxUniformsCount=function(){var Qe=0;return zt.forEach(function(yt){yt.stats.uniformsCount>Qe&&(Qe=yt.stats.uniformsCount)}),Qe},ke.getMaxAttributesCount=function(){var Qe=0;return zt.forEach(function(yt){yt.stats.attributesCount>Qe&&(Qe=yt.stats.attributesCount)}),Qe}),{clear:function(){var Qe=Ne.deleteShader.bind(Ne);se(gt).forEach(Qe),gt={},se(Pt).forEach(Qe),Pt={},zt.forEach(function(yt){Ne.deleteProgram(yt.program)}),zt.length=0,ct={},ke.shaderCount=0},program:function(Qe,yt,Nt,Yt){var rr=ct[yt];rr||(rr=ct[yt]={});var Fe=rr[Qe];if(Fe&&(Fe.refCount++,!Yt))return Fe;var ht=new ut(yt,Qe);return ke.shaderCount++,xt(ht,Nt,Yt),Fe||(rr[Qe]=ht),zt.push(ht),N(ht,{destroy:function(){if(ht.refCount--,0>=ht.refCount){Ne.deleteProgram(ht.program);var kt=zt.indexOf(ht);zt.splice(kt,1),ke.shaderCount--}0>=rr[ht.vertId].refCount&&(Ne.deleteShader(Pt[ht.vertId]),delete Pt[ht.vertId],delete ct[ht.fragId][ht.vertId]),Object.keys(ct[ht.fragId]).length||(Ne.deleteShader(gt[ht.fragId]),delete gt[ht.fragId],delete ct[ht.fragId])}})},restore:function(){gt={},Pt={};for(var Qe=0;Qe<zt.length;++Qe)xt(zt[Qe],null,zt[Qe].attributes.map(function(yt){return[yt.location,yt.name]}))},shader:Ke,frag:-1,vert:-1}}(Ft,Nt,Yt,Ne),wr=function(Ne,it,ke,De,Re,Ie,Ke){function ut(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function xt(ar,Bt){ar.internalformat=Bt.internalformat,ar.format=Bt.format,ar.type=Bt.type,ar.compressed=Bt.compressed,ar.premultiplyAlpha=Bt.premultiplyAlpha,ar.flipY=Bt.flipY,ar.unpackAlignment=Bt.unpackAlignment,ar.colorSpace=Bt.colorSpace,ar.width=Bt.width,ar.height=Bt.height,ar.channels=Bt.channels}function gt(ar,Bt){if("object"==typeof Bt&&Bt){"premultiplyAlpha"in Bt&&(ar.premultiplyAlpha=Bt.premultiplyAlpha),"flipY"in Bt&&(ar.flipY=Bt.flipY),"alignment"in Bt&&(ar.unpackAlignment=Bt.alignment),"colorSpace"in Bt&&(ar.colorSpace=Gr[Bt.colorSpace]),"type"in Bt&&(ar.type=Er[Bt.type]);var Qt=ar.width,yr=ar.height,Dr=ar.channels,$r=!1;"shape"in Bt?(Qt=Bt.shape[0],yr=Bt.shape[1],3===Bt.shape.length&&(Dr=Bt.shape[2],$r=!0)):("radius"in Bt&&(Qt=yr=Bt.radius),"width"in Bt&&(Qt=Bt.width),"height"in Bt&&(yr=Bt.height),"channels"in Bt&&(Dr=Bt.channels,$r=!0)),ar.width=0|Qt,ar.height=0|yr,ar.channels=0|Dr,Qt=!1,"format"in Bt&&(yr=ar.internalformat=Zr[Qt=Bt.format],ar.format=un[yr],Qt in Er&&!("type"in Bt)&&(ar.type=Er[Qt]),Qt in an&&(ar.compressed=!0),Qt=!0),!$r&&Qt?ar.channels=Se[ar.format]:$r&&!Qt&&ar.channels!==we[ar.format]&&(ar.format=ar.internalformat=we[ar.channels])}}function Pt(ar){Ne.pixelStorei(37440,ar.flipY),Ne.pixelStorei(37441,ar.premultiplyAlpha),Ne.pixelStorei(37443,ar.colorSpace),Ne.pixelStorei(3317,ar.unpackAlignment)}function ct(){ut.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function zt(ar,Bt){var Qt=null;if(_(Bt)?Qt=Bt:Bt&&(gt(ar,Bt),"x"in Bt&&(ar.xOffset=0|Bt.x),"y"in Bt&&(ar.yOffset=0|Bt.y),_(Bt.data)&&(Qt=Bt.data)),Bt.copy){var yr=Re.viewportWidth,Dr=Re.viewportHeight;ar.width=ar.width||yr-ar.xOffset,ar.height=ar.height||Dr-ar.yOffset,ar.needsCopy=!0}else if(Qt){if(ne(Qt))ar.channels=ar.channels||4,ar.data=Qt,"type"in Bt||5121!==ar.type||(ar.type=0|ue[Object.prototype.toString.call(Qt)]);else if(b(Qt)){switch(ar.channels=ar.channels||4,Dr=(yr=Qt).length,ar.type){case 5121:case 5123:case 5125:case 5126:(Dr=$.allocType(ar.type,Dr)).set(yr),ar.data=Dr;break;case 36193:ar.data=m(yr)}ar.alignment=1,ar.needsFree=!0}else if(r(Qt)){yr=Qt.data,Array.isArray(yr)||5121!==ar.type||(ar.type=0|ue[Object.prototype.toString.call(yr)]);var $r,Xr,Mr,Lr,Rr=Qt.stride;3===(Dr=Qt.shape).length?(Mr=Dr[2],Lr=Rr[2]):Lr=Mr=1,$r=Dr[0],Xr=Dr[1],Dr=Rr[0],Rr=Rr[1],ar.alignment=1,ar.width=$r,ar.height=Xr,ar.channels=Mr,ar.format=ar.internalformat=we[Mr],ar.needsFree=!0,$r=Lr,Qt=Qt.offset;for(var Ir=$.allocType(36193===ar.type?5126:ar.type,(Mr=ar.width)*(Lr=ar.height)*(Xr=ar.channels)),Fr=0,Qr=0;Qr<Lr;++Qr)for(var yn=0;yn<Mr;++yn)for(var In=0;In<Xr;++In)Ir[Fr++]=yr[Dr*yn+Rr*Qr+$r*In+Qt];A(ar,Ir)}else if(w(Qt)===Pe||w(Qt)===ze||w(Qt)===He)ar.element=w(Qt)===Pe||w(Qt)===ze?Qt:Qt.canvas,ar.width=ar.element.width,ar.height=ar.element.height,ar.channels=4;else if(w(Qt)===tt)ar.element=Qt,ar.width=Qt.width,ar.height=Qt.height,ar.channels=4;else if(w(Qt)===Oe)ar.element=Qt,ar.width=Qt.naturalWidth,ar.height=Qt.naturalHeight,ar.channels=4;else if(w(Qt)===Be)ar.element=Qt,ar.width=Qt.videoWidth,ar.height=Qt.videoHeight,ar.channels=4;else if(g(Qt)){for(yr=ar.width||Qt[0].length,Dr=ar.height||Qt.length,Rr=ar.channels,Rr=d(Qt[0][0])?Rr||Qt[0][0].length:Rr||1,$r=ie.shape(Qt),Mr=1,Lr=0;Lr<$r.length;++Lr)Mr*=$r[Lr];Mr=$.allocType(36193===ar.type?5126:ar.type,Mr),ie.flatten(Qt,$r,"",Mr),A(ar,Mr),ar.alignment=1,ar.width=yr,ar.height=Dr,ar.channels=Rr,ar.format=ar.internalformat=we[Rr],ar.needsFree=!0}}else ar.width=ar.width||1,ar.height=ar.height||1,ar.channels=ar.channels||4}function Ft(ar,Bt,Qt,yr,Dr){var $r=ar.element,Xr=ar.data,Mr=ar.internalformat,Lr=ar.format,Rr=ar.type,Ir=ar.width,Fr=ar.height;Pt(ar),$r?Ne.texSubImage2D(Bt,Dr,Qt,yr,Lr,Rr,$r):ar.compressed?Ne.compressedTexSubImage2D(Bt,Dr,Qt,yr,Mr,Ir,Fr,Xr):ar.needsCopy?(De(),Ne.copyTexSubImage2D(Bt,Dr,Qt,yr,ar.xOffset,ar.yOffset,Ir,Fr)):Ne.texSubImage2D(Bt,Dr,Qt,yr,Ir,Fr,Lr,Rr,Xr)}function Qe(){return dn.pop()||new ct}function yt(ar){ar.needsFree&&$.freeType(ar.data),ct.call(ar),dn.push(ar)}function Nt(){ut.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Yt(ar,Bt,Qt){var yr=ar.images[0]=Qe();ar.mipmask=1,yr.width=ar.width=Bt,yr.height=ar.height=Qt,yr.channels=ar.channels=4}function rr(ar,Bt){var Qt=null;if(_(Bt))xt(Qt=ar.images[0]=Qe(),ar),zt(Qt,Bt),ar.mipmask=1;else if(gt(ar,Bt),Array.isArray(Bt.mipmap))for(var yr=Bt.mipmap,Dr=0;Dr<yr.length;++Dr)xt(Qt=ar.images[Dr]=Qe(),ar),Qt.width>>=Dr,Qt.height>>=Dr,zt(Qt,yr[Dr]),ar.mipmask|=1<<Dr;else xt(Qt=ar.images[0]=Qe(),ar),zt(Qt,Bt),ar.mipmask=1;xt(ar,ar.images[0])}function Fe(ar,Bt){for(var Qt=ar.images,yr=0;yr<Qt.length&&Qt[yr];++yr){var Dr=Qt[yr],$r=Bt,Xr=yr,Mr=Dr.element,Lr=Dr.data,Rr=Dr.internalformat,Ir=Dr.format,Fr=Dr.type,Qr=Dr.width,yn=Dr.height;Pt(Dr),Mr?Ne.texImage2D($r,Xr,Ir,Ir,Fr,Mr):Dr.compressed?Ne.compressedTexImage2D($r,Xr,Rr,Qr,yn,0,Lr):Dr.needsCopy?(De(),Ne.copyTexImage2D($r,Xr,Ir,Dr.xOffset,Dr.yOffset,Qr,yn,0)):Ne.texImage2D($r,Xr,Ir,Qr,yn,0,Ir,Fr,Lr||null)}}function ht(){var ar=cn.pop()||new Nt;ut.call(ar);for(var Bt=ar.mipmask=0;16>Bt;++Bt)ar.images[Bt]=null;return ar}function kt(ar){for(var Bt=ar.images,Qt=0;Qt<Bt.length;++Qt)Bt[Qt]&&yt(Bt[Qt]),Bt[Qt]=null;cn.push(ar)}function Gt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Zt(ar,Bt){"min"in Bt&&(ar.minFilter=Sr[Bt.min],0<=Ae.indexOf(ar.minFilter)&&!("faces"in Bt)&&(ar.genMipmaps=!0)),"mag"in Bt&&(ar.magFilter=_r[Bt.mag]);var Qt=ar.wrapS,yr=ar.wrapT;if("wrap"in Bt){var Dr=Bt.wrap;"string"==typeof Dr?Qt=yr=mr[Dr]:Array.isArray(Dr)&&(Qt=mr[Dr[0]],yr=mr[Dr[1]])}else"wrapS"in Bt&&(Qt=mr[Bt.wrapS]),"wrapT"in Bt&&(yr=mr[Bt.wrapT]);if(ar.wrapS=Qt,ar.wrapT=yr,"anisotropic"in Bt&&(ar.anisotropic=Bt.anisotropic),"mipmap"in Bt){switch(Qt=!1,typeof Bt.mipmap){case"string":ar.mipmapHint=wr[Bt.mipmap],Qt=ar.genMipmaps=!0;break;case"boolean":Qt=ar.genMipmaps=Bt.mipmap;break;case"object":ar.genMipmaps=!1,Qt=!0}!Qt||"min"in Bt||(ar.minFilter=9984)}}function fr(ar,Bt){Ne.texParameteri(Bt,10241,ar.minFilter),Ne.texParameteri(Bt,10240,ar.magFilter),Ne.texParameteri(Bt,10242,ar.wrapS),Ne.texParameteri(Bt,10243,ar.wrapT),it.ext_texture_filter_anisotropic&&Ne.texParameteri(Bt,34046,ar.anisotropic),ar.genMipmaps&&(Ne.hint(33170,ar.mipmapHint),Ne.generateMipmap(Bt))}function $t(ar){ut.call(this),this.mipmask=0,this.internalformat=6408,this.id=fn++,this.refCount=1,this.target=ar,this.texture=Ne.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Gt,Ke.profile&&(this.stats={size:0})}function nr(ar){Ne.activeTexture(33984),Ne.bindTexture(ar.target,ar.texture)}function dr(){var ar=Fn[0];ar?Ne.bindTexture(ar.target,ar.texture):Ne.bindTexture(3553,null)}function Tr(ar){var Bt=ar.texture,Qt=ar.unit,yr=ar.target;0<=Qt&&(Ne.activeTexture(33984+Qt),Ne.bindTexture(yr,null),Fn[Qt]=null),Ne.deleteTexture(Bt),ar.texture=null,ar.params=null,ar.pixels=null,ar.refCount=0,delete Bn[ar.id],Ie.textureCount--}var wr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},mr={repeat:10497,clamp:33071,mirror:33648},_r={nearest:9728,linear:9729},Sr=N({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},_r),Gr={none:0,browser:37444},Er={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Zr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},an={};it.ext_srgb&&(Zr.srgb=35904,Zr.srgba=35906),it.oes_texture_float&&(Er.float32=Er.float=5126),it.oes_texture_half_float&&(Er.float16=Er["half float"]=36193),it.webgl_depth_texture&&(N(Zr,{depth:6402,"depth stencil":34041}),N(Er,{uint16:5123,uint32:5125,"depth stencil":34042})),it.webgl_compressed_texture_s3tc&&N(an,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),it.webgl_compressed_texture_atc&&N(an,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),it.webgl_compressed_texture_pvrtc&&N(an,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),it.webgl_compressed_texture_etc1&&(an["rgb etc1"]=36196);var gn=Array.prototype.slice.call(Ne.getParameter(34467));Object.keys(an).forEach(function(ar){var Bt=an[ar];0<=gn.indexOf(Bt)&&(Zr[ar]=Bt)});var Vn=Object.keys(Zr);ke.textureFormats=Vn;var Gn=[];Object.keys(Zr).forEach(function(ar){Gn[Zr[ar]]=ar});var Ln=[];Object.keys(Er).forEach(function(ar){Ln[Er[ar]]=ar});var ln=[];Object.keys(_r).forEach(function(ar){ln[_r[ar]]=ar});var qr=[];Object.keys(Sr).forEach(function(ar){qr[Sr[ar]]=ar});var Pr=[];Object.keys(mr).forEach(function(ar){Pr[mr[ar]]=ar});var un=Vn.reduce(function(ar,Bt){var Qt=Zr[Bt];return ar[Qt]=6409===Qt||6406===Qt||6409===Qt||6410===Qt||6402===Qt||34041===Qt||it.ext_srgb&&(35904===Qt||35906===Qt)?Qt:32855===Qt||0<=Bt.indexOf("rgba")?6408:6407,ar},{}),dn=[],cn=[],fn=0,Bn={},Nn=ke.maxTextureUnits,Fn=Array(Nn).map(function(){return null});return N($t.prototype,{bind:function(){this.bindCount+=1;var ar=this.unit;if(0>ar){for(var Bt=0;Bt<Nn;++Bt){var Qt=Fn[Bt];if(Qt){if(0<Qt.bindCount)continue;Qt.unit=-1}Fn[Bt]=this,ar=Bt;break}Ke.profile&&Ie.maxTextureUnits<ar+1&&(Ie.maxTextureUnits=ar+1),this.unit=ar,Ne.activeTexture(33984+ar),Ne.bindTexture(this.target,this.texture)}return ar},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Tr(this)}}),Ke.profile&&(Ie.getTotalTextureSize=function(){var ar=0;return Object.keys(Bn).forEach(function(Bt){ar+=Bn[Bt].stats.size}),ar}),{create2D:function(ar,Bt){function Qt(Dr,$r){var Xr=yr.texInfo;Gt.call(Xr);var Mr=ht();return"number"==typeof Dr?Yt(Mr,0|Dr,"number"==typeof $r?0|$r:0|Dr):Dr?(Zt(Xr,Dr),rr(Mr,Dr)):Yt(Mr,1,1),Xr.genMipmaps&&(Mr.mipmask=(Mr.width<<1)-1),yr.mipmask=Mr.mipmask,xt(yr,Mr),yr.internalformat=Mr.internalformat,Qt.width=Mr.width,Qt.height=Mr.height,nr(yr),Fe(Mr,3553),fr(Xr,3553),dr(),kt(Mr),Ke.profile&&(yr.stats.size=T(yr.internalformat,yr.type,Mr.width,Mr.height,Xr.genMipmaps,!1)),Qt.format=Gn[yr.internalformat],Qt.type=Ln[yr.type],Qt.mag=ln[Xr.magFilter],Qt.min=qr[Xr.minFilter],Qt.wrapS=Pr[Xr.wrapS],Qt.wrapT=Pr[Xr.wrapT],Qt}var yr=new $t(3553);return Bn[yr.id]=yr,Ie.textureCount++,Qt(ar,Bt),Qt.subimage=function(Dr,$r,Xr,Mr){$r|=0,Xr|=0,Mr|=0;var Lr=Qe();return xt(Lr,yr),Lr.width=0,Lr.height=0,zt(Lr,Dr),Lr.width=Lr.width||(yr.width>>Mr)-$r,Lr.height=Lr.height||(yr.height>>Mr)-Xr,nr(yr),Ft(Lr,3553,$r,Xr,Mr),dr(),yt(Lr),Qt},Qt.resize=function(Dr,$r){var Xr=0|Dr,Mr=0|$r||Xr;if(Xr===yr.width&&Mr===yr.height)return Qt;Qt.width=yr.width=Xr,Qt.height=yr.height=Mr,nr(yr);for(var Lr=0;yr.mipmask>>Lr;++Lr){var Rr=Xr>>Lr,Ir=Mr>>Lr;if(!Rr||!Ir)break;Ne.texImage2D(3553,Lr,yr.format,Rr,Ir,0,yr.format,yr.type,null)}return dr(),Ke.profile&&(yr.stats.size=T(yr.internalformat,yr.type,Xr,Mr,!1,!1)),Qt},Qt._reglType="texture2d",Qt._texture=yr,Ke.profile&&(Qt.stats=yr.stats),Qt.destroy=function(){yr.decRef()},Qt},createCube:function(ar,Bt,Qt,yr,Dr,$r){function Xr(Rr,Ir,Fr,Qr,yn,In){var nn,Cn=Mr.texInfo;for(Gt.call(Cn),nn=0;6>nn;++nn)Lr[nn]=ht();if("number"!=typeof Rr&&Rr){if("object"==typeof Rr)if(Ir)rr(Lr[0],Rr),rr(Lr[1],Ir),rr(Lr[2],Fr),rr(Lr[3],Qr),rr(Lr[4],yn),rr(Lr[5],In);else if(Zt(Cn,Rr),gt(Mr,Rr),"faces"in Rr)for(Rr=Rr.faces,nn=0;6>nn;++nn)xt(Lr[nn],Mr),rr(Lr[nn],Rr[nn]);else for(nn=0;6>nn;++nn)rr(Lr[nn],Rr)}else for(Rr=0|Rr||1,nn=0;6>nn;++nn)Yt(Lr[nn],Rr,Rr);for(xt(Mr,Lr[0]),Mr.mipmask=Cn.genMipmaps?(Lr[0].width<<1)-1:Lr[0].mipmask,Mr.internalformat=Lr[0].internalformat,Xr.width=Lr[0].width,Xr.height=Lr[0].height,nr(Mr),nn=0;6>nn;++nn)Fe(Lr[nn],34069+nn);for(fr(Cn,34067),dr(),Ke.profile&&(Mr.stats.size=T(Mr.internalformat,Mr.type,Xr.width,Xr.height,Cn.genMipmaps,!0)),Xr.format=Gn[Mr.internalformat],Xr.type=Ln[Mr.type],Xr.mag=ln[Cn.magFilter],Xr.min=qr[Cn.minFilter],Xr.wrapS=Pr[Cn.wrapS],Xr.wrapT=Pr[Cn.wrapT],nn=0;6>nn;++nn)kt(Lr[nn]);return Xr}var Mr=new $t(34067);Bn[Mr.id]=Mr,Ie.cubeCount++;var Lr=Array(6);return Xr(ar,Bt,Qt,yr,Dr,$r),Xr.subimage=function(Rr,Ir,Fr,Qr,yn){Fr|=0,Qr|=0,yn|=0;var In=Qe();return xt(In,Mr),In.width=0,In.height=0,zt(In,Ir),In.width=In.width||(Mr.width>>yn)-Fr,In.height=In.height||(Mr.height>>yn)-Qr,nr(Mr),Ft(In,34069+Rr,Fr,Qr,yn),dr(),yt(In),Xr},Xr.resize=function(Rr){if((Rr|=0)!==Mr.width){Xr.width=Mr.width=Rr,Xr.height=Mr.height=Rr,nr(Mr);for(var Ir=0;6>Ir;++Ir)for(var Fr=0;Mr.mipmask>>Fr;++Fr)Ne.texImage2D(34069+Ir,Fr,Mr.format,Rr>>Fr,Rr>>Fr,0,Mr.format,Mr.type,null);return dr(),Ke.profile&&(Mr.stats.size=T(Mr.internalformat,Mr.type,Xr.width,Xr.height,!1,!0)),Xr}},Xr._reglType="textureCube",Xr._texture=Mr,Ke.profile&&(Xr.stats=Mr.stats),Xr.destroy=function(){Mr.decRef()},Xr},clear:function(){for(var ar=0;ar<Nn;++ar)Ne.activeTexture(33984+ar),Ne.bindTexture(3553,null),Fn[ar]=null;se(Bn).forEach(Tr),Ie.cubeCount=0,Ie.textureCount=0},getTexture:function(ar){return null},restore:function(){for(var ar=0;ar<Nn;++ar){var Bt=Fn[ar];Bt&&(Bt.bindCount=0,Bt.unit=-1,Fn[ar]=null)}se(Bn).forEach(function(Qt){Qt.texture=Ne.createTexture(),Ne.bindTexture(Qt.target,Qt.texture);for(var yr=0;32>yr;++yr)if(0!=(Qt.mipmask&1<<yr))if(3553===Qt.target)Ne.texImage2D(3553,yr,Qt.internalformat,Qt.width>>yr,Qt.height>>yr,0,Qt.internalformat,Qt.type,null);else for(var Dr=0;6>Dr;++Dr)Ne.texImage2D(34069+Dr,yr,Qt.internalformat,Qt.width>>yr,Qt.height>>yr,0,Qt.internalformat,Qt.type,null);fr(Qt.texInfo,Qt.target)})},refresh:function(){for(var ar=0;ar<Nn;++ar){var Bt=Fn[ar];Bt&&(Bt.bindCount=0,Bt.unit=-1,Fn[ar]=null),Ne.activeTexture(33984+ar),Ne.bindTexture(3553,null),Ne.bindTexture(34067,null)}}}}(Ft,rr,fr,function(){Sr.procs.poll()},Zt,Yt,Ne),mr=function(Ne,it,ke,De,Re){function Ie(ct){this.id=gt++,this.refCount=1,this.renderbuffer=ct,this.format=32854,this.height=this.width=0,Re.profile&&(this.stats={size:0})}function Ke(ct){var zt=ct.renderbuffer;Ne.bindRenderbuffer(36161,null),Ne.deleteRenderbuffer(zt),ct.renderbuffer=null,ct.refCount=0,delete Pt[ct.id],De.renderbufferCount--}var ut={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};it.ext_srgb&&(ut.srgba=35907),it.ext_color_buffer_half_float&&(ut.rgba16f=34842,ut.rgb16f=34843),it.webgl_color_buffer_float&&(ut.rgba32f=34836);var xt=[];Object.keys(ut).forEach(function(ct){xt[ut[ct]]=ct});var gt=0,Pt={};return Ie.prototype.decRef=function(){0>=--this.refCount&&Ke(this)},Re.profile&&(De.getTotalRenderbufferSize=function(){var ct=0;return Object.keys(Pt).forEach(function(zt){ct+=Pt[zt].stats.size}),ct}),{create:function(ct,zt){function Ft(yt,Nt){var Yt=0,rr=0,Fe=32854;if("object"==typeof yt&&yt?("shape"in yt?(Yt=0|(rr=yt.shape)[0],rr=0|rr[1]):("radius"in yt&&(Yt=rr=0|yt.radius),"width"in yt&&(Yt=0|yt.width),"height"in yt&&(rr=0|yt.height)),"format"in yt&&(Fe=ut[yt.format])):"number"==typeof yt?(Yt=0|yt,rr="number"==typeof Nt?0|Nt:Yt):yt||(Yt=rr=1),Yt!==Qe.width||rr!==Qe.height||Fe!==Qe.format)return Ft.width=Qe.width=Yt,Ft.height=Qe.height=rr,Qe.format=Fe,Ne.bindRenderbuffer(36161,Qe.renderbuffer),Ne.renderbufferStorage(36161,Fe,Yt,rr),Re.profile&&(Qe.stats.size=ft[Qe.format]*Qe.width*Qe.height),Ft.format=xt[Qe.format],Ft}var Qe=new Ie(Ne.createRenderbuffer());return Pt[Qe.id]=Qe,De.renderbufferCount++,Ft(ct,zt),Ft.resize=function(yt,Nt){var Yt=0|yt,rr=0|Nt||Yt;return Yt===Qe.width&&rr===Qe.height||(Ft.width=Qe.width=Yt,Ft.height=Qe.height=rr,Ne.bindRenderbuffer(36161,Qe.renderbuffer),Ne.renderbufferStorage(36161,Qe.format,Yt,rr),Re.profile&&(Qe.stats.size=ft[Qe.format]*Qe.width*Qe.height)),Ft},Ft._reglType="renderbuffer",Ft._renderbuffer=Qe,Re.profile&&(Ft.stats=Qe.stats),Ft.destroy=function(){Qe.decRef()},Ft},clear:function(){se(Pt).forEach(Ke)},restore:function(){se(Pt).forEach(function(ct){ct.renderbuffer=Ne.createRenderbuffer(),Ne.bindRenderbuffer(36161,ct.renderbuffer),Ne.renderbufferStorage(36161,ct.format,ct.width,ct.height)}),Ne.bindRenderbuffer(36161,null)}}}(Ft,rr,0,Yt,Ne),_r=function(Ne,it,ke,De,Re,Ie){function Ke($t,nr,dr){this.target=$t,this.texture=nr,this.renderbuffer=dr;var Tr=$t=0;nr?($t=nr.width,Tr=nr.height):dr&&($t=dr.width,Tr=dr.height),this.width=$t,this.height=Tr}function ut($t){$t&&($t.texture&&$t.texture._texture.decRef(),$t.renderbuffer&&$t.renderbuffer._renderbuffer.decRef())}function xt($t,nr,dr){$t&&($t.texture?$t.texture._texture.refCount+=1:$t.renderbuffer._renderbuffer.refCount+=1)}function gt($t,nr){nr&&(nr.texture?Ne.framebufferTexture2D(36160,$t,nr.target,nr.texture._texture.texture,0):Ne.framebufferRenderbuffer(36160,$t,36161,nr.renderbuffer._renderbuffer.renderbuffer))}function Pt($t){var nr=3553,dr=null,Tr=null,wr=$t;return"object"==typeof $t&&(wr=$t.data,"target"in $t&&(nr=0|$t.target)),"texture2d"===($t=wr._reglType)||"textureCube"===$t?dr=wr:"renderbuffer"===$t&&(Tr=wr,nr=36161),new Ke(nr,dr,Tr)}function ct($t,nr,dr,Tr,wr){return dr?(($t=De.create2D({width:$t,height:nr,format:Tr,type:wr}))._texture.refCount=0,new Ke(3553,$t,null)):(($t=Re.create({width:$t,height:nr,format:Tr}))._renderbuffer.refCount=0,new Ke(36161,null,$t))}function zt($t){return $t&&($t.texture||$t.renderbuffer)}function Ft($t,nr,dr){$t&&($t.texture?$t.texture.resize(nr,dr):$t.renderbuffer&&$t.renderbuffer.resize(nr,dr),$t.width=nr,$t.height=dr)}function Qe(){this.id=Zt++,fr[this.id]=this,this.framebuffer=Ne.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function yt($t){$t.colorAttachments.forEach(ut),ut($t.depthAttachment),ut($t.stencilAttachment),ut($t.depthStencilAttachment)}function Nt($t){Ne.deleteFramebuffer($t.framebuffer),$t.framebuffer=null,Ie.framebufferCount--,delete fr[$t.id]}function Yt($t){var nr;Ne.bindFramebuffer(36160,$t.framebuffer);var dr=$t.colorAttachments;for(nr=0;nr<dr.length;++nr)gt(36064+nr,dr[nr]);for(nr=dr.length;nr<ke.maxColorAttachments;++nr)Ne.framebufferTexture2D(36160,36064+nr,3553,null,0);Ne.framebufferTexture2D(36160,33306,3553,null,0),Ne.framebufferTexture2D(36160,36096,3553,null,0),Ne.framebufferTexture2D(36160,36128,3553,null,0),gt(36096,$t.depthAttachment),gt(36128,$t.stencilAttachment),gt(33306,$t.depthStencilAttachment),Ne.checkFramebufferStatus(36160),Ne.isContextLost(),Ne.bindFramebuffer(36160,Fe.next?Fe.next.framebuffer:null),Fe.cur=Fe.next,Ne.getError()}function rr($t,nr){function dr(wr,mr){var _r,Sr=0,Gr=0,Er=!0,Zr=!0;_r=null;var an=!0,gn="rgba",Vn="uint8",Gn=1,Ln=null,ln=null,qr=null,Pr=!1;"number"==typeof wr?(Sr=0|wr,Gr=0|mr||Sr):wr?("shape"in wr?(Sr=(Gr=wr.shape)[0],Gr=Gr[1]):("radius"in wr&&(Sr=Gr=wr.radius),"width"in wr&&(Sr=wr.width),"height"in wr&&(Gr=wr.height)),("color"in wr||"colors"in wr)&&(_r=wr.color||wr.colors,Array.isArray(_r)),_r||("colorCount"in wr&&(Gn=0|wr.colorCount),"colorTexture"in wr&&(an=!!wr.colorTexture,gn="rgba4"),"colorType"in wr&&(Vn=wr.colorType,!an)&&("half float"===Vn||"float16"===Vn?gn="rgba16f":"float"!==Vn&&"float32"!==Vn||(gn="rgba32f")),"colorFormat"in wr&&(0<=ht.indexOf(gn=wr.colorFormat)?an=!0:0<=kt.indexOf(gn)&&(an=!1))),("depthTexture"in wr||"depthStencilTexture"in wr)&&(Pr=!(!wr.depthTexture&&!wr.depthStencilTexture)),"depth"in wr&&("boolean"==typeof wr.depth?Er=wr.depth:(Ln=wr.depth,Zr=!1)),"stencil"in wr&&("boolean"==typeof wr.stencil?Zr=wr.stencil:(ln=wr.stencil,Er=!1)),"depthStencil"in wr&&("boolean"==typeof wr.depthStencil?Er=Zr=wr.depthStencil:(qr=wr.depthStencil,Zr=Er=!1))):Sr=Gr=1;var un=null,dn=null,cn=null,fn=null;if(Array.isArray(_r))un=_r.map(Pt);else if(_r)un=[Pt(_r)];else for(un=Array(Gn),_r=0;_r<Gn;++_r)un[_r]=ct(Sr,Gr,an,gn,Vn);for(Sr=Sr||un[0].width,Gr=Gr||un[0].height,Ln?dn=Pt(Ln):Er&&!Zr&&(dn=ct(Sr,Gr,Pr,"depth","uint32")),ln?cn=Pt(ln):Zr&&!Er&&(cn=ct(Sr,Gr,!1,"stencil","uint8")),qr?fn=Pt(qr):!Ln&&!ln&&Zr&&Er&&(fn=ct(Sr,Gr,Pr,"depth stencil","depth stencil")),Er=null,_r=0;_r<un.length;++_r)xt(un[_r]),un[_r]&&un[_r].texture&&(Zr=Rt[un[_r].texture._texture.format]*Et[un[_r].texture._texture.type],null===Er&&(Er=Zr));return xt(dn),xt(cn),xt(fn),yt(Tr),Tr.width=Sr,Tr.height=Gr,Tr.colorAttachments=un,Tr.depthAttachment=dn,Tr.stencilAttachment=cn,Tr.depthStencilAttachment=fn,dr.color=un.map(zt),dr.depth=zt(dn),dr.stencil=zt(cn),dr.depthStencil=zt(fn),dr.width=Tr.width,dr.height=Tr.height,Yt(Tr),dr}var Tr=new Qe;return Ie.framebufferCount++,dr($t,nr),N(dr,{resize:function(wr,mr){var _r=Math.max(0|wr,1),Sr=Math.max(0|mr||_r,1);if(_r===Tr.width&&Sr===Tr.height)return dr;for(var Gr=Tr.colorAttachments,Er=0;Er<Gr.length;++Er)Ft(Gr[Er],_r,Sr);return Ft(Tr.depthAttachment,_r,Sr),Ft(Tr.stencilAttachment,_r,Sr),Ft(Tr.depthStencilAttachment,_r,Sr),Tr.width=dr.width=_r,Tr.height=dr.height=Sr,Yt(Tr),dr},_reglType:"framebuffer",_framebuffer:Tr,destroy:function(){Nt(Tr),yt(Tr)},use:function(wr){Fe.setFBO({framebuffer:dr},wr)}})}var Fe={cur:null,next:null,dirty:!1,setFBO:null},ht=["rgba"],kt=["rgba4","rgb565","rgb5 a1"];it.ext_srgb&&kt.push("srgba"),it.ext_color_buffer_half_float&&kt.push("rgba16f","rgb16f"),it.webgl_color_buffer_float&&kt.push("rgba32f");var Gt=["uint8"];it.oes_texture_half_float&&Gt.push("half float","float16"),it.oes_texture_float&&Gt.push("float","float32");var Zt=0,fr={};return N(Fe,{getFramebuffer:function($t){return"function"==typeof $t&&"framebuffer"===$t._reglType&&($t=$t._framebuffer)instanceof Qe?$t:null},create:rr,createCube:function($t){function nr(Tr){var wr,mr={color:null},_r=0,Sr=null;wr="rgba";var Gr="uint8",Er=1;if("number"==typeof Tr?_r=0|Tr:Tr?("shape"in Tr?_r=Tr.shape[0]:("radius"in Tr&&(_r=0|Tr.radius),"width"in Tr?_r=0|Tr.width:"height"in Tr&&(_r=0|Tr.height)),("color"in Tr||"colors"in Tr)&&(Sr=Tr.color||Tr.colors,Array.isArray(Sr)),Sr||("colorCount"in Tr&&(Er=0|Tr.colorCount),"colorType"in Tr&&(Gr=Tr.colorType),"colorFormat"in Tr&&(wr=Tr.colorFormat)),"depth"in Tr&&(mr.depth=Tr.depth),"stencil"in Tr&&(mr.stencil=Tr.stencil),"depthStencil"in Tr&&(mr.depthStencil=Tr.depthStencil)):_r=1,Sr)if(Array.isArray(Sr))for(Tr=[],wr=0;wr<Sr.length;++wr)Tr[wr]=Sr[wr];else Tr=[Sr];else for(Tr=Array(Er),Sr={radius:_r,format:wr,type:Gr},wr=0;wr<Er;++wr)Tr[wr]=De.createCube(Sr);for(mr.color=Array(Tr.length),wr=0;wr<Tr.length;++wr)Er=Tr[wr],_r=_r||Er.width,mr.color[wr]={target:34069,data:Tr[wr]};for(wr=0;6>wr;++wr){for(Er=0;Er<Tr.length;++Er)mr.color[Er].target=34069+wr;0<wr&&(mr.depth=dr[0].depth,mr.stencil=dr[0].stencil,mr.depthStencil=dr[0].depthStencil),dr[wr]?dr[wr](mr):dr[wr]=rr(mr)}return N(nr,{width:_r,height:_r,color:Tr})}var dr=Array(6);return nr($t),N(nr,{faces:dr,resize:function(Tr){var wr=0|Tr;if(wr===nr.width)return nr;var mr=nr.color;for(Tr=0;Tr<mr.length;++Tr)mr[Tr].resize(wr);for(Tr=0;6>Tr;++Tr)dr[Tr].resize(wr);return nr.width=nr.height=wr,nr},_reglType:"framebufferCube",destroy:function(){dr.forEach(function(Tr){Tr.destroy()})}})},clear:function(){se(fr).forEach(Nt)},restore:function(){Fe.cur=null,Fe.next=null,Fe.dirty=!0,se(fr).forEach(function($t){$t.framebuffer=Ne.createFramebuffer(),Yt($t)})}})}(Ft,rr,fr,wr,mr,Yt),Sr=te(Ft,Nt,rr,fr,$t,nr,0,_r,{},dr,Tr,kt,Zt,Fe,Ne),Gr=(Nt=function(Ne,it,ke,De,Re,Ie,Ke){function ut(xt){var gt;gt=null===it.next?5121:it.next.colorAttachments[0].texture._texture.type;var Pt=0,ct=0,zt=De.framebufferWidth,Ft=De.framebufferHeight,Qe=null;return ne(xt)?Qe=xt:xt&&(Pt=0|xt.x,ct=0|xt.y,zt=0|(xt.width||De.framebufferWidth-Pt),Ft=0|(xt.height||De.framebufferHeight-ct),Qe=xt.data||null),ke(),xt=zt*Ft*4,Qe||(5121===gt?Qe=new Uint8Array(xt):5126===gt&&(Qe=Qe||new Float32Array(xt))),Ne.pixelStorei(3333,4),Ne.readPixels(Pt,ct,zt,Ft,6408,gt,Qe),Qe}return function(xt){return xt&&"framebuffer"in xt?(it.setFBO({framebuffer:(gt=xt).framebuffer},function(){Pt=ut(gt)}),Pt):ut(xt);var gt,Pt}}(Ft,_r,Sr.procs.poll,Zt),Sr.next),Er=Ft.canvas,Zr=[],an=[],gn=[],Vn=[Ne.onDestroy],Gn=null;Er&&(Er.addEventListener("webglcontextlost",Re,!1),Er.addEventListener("webglcontextrestored",Ie,!1));var Ln=_r.setFBO=Ke({framebuffer:ee.define.call(null,1,"framebuffer")});return ct(),Qe=N(Ke,{clear:function(ln){if("framebuffer"in ln)if(ln.framebuffer&&"framebufferCube"===ln.framebuffer_reglType)for(var qr=0;6>qr;++qr)Ln(N({framebuffer:ln.framebuffer.faces[qr]},ln),ut);else Ln(ln,ut);else ut(0,ln)},prop:ee.define.bind(null,1),context:ee.define.bind(null,2),this:ee.define.bind(null,3),draw:Ke({}),buffer:function(ln){return $t.create(ln,34962,!1,!1)},elements:function(ln){return nr.create(ln,!1)},texture:wr.create2D,cube:wr.createCube,renderbuffer:mr.create,framebuffer:_r.create,framebufferCube:_r.createCube,vao:dr.createVAO,attributes:Qe,frame:xt,on:function(ln,qr){var Pr;switch(ln){case"frame":return xt(qr);case"lost":Pr=an;break;case"restore":Pr=gn;break;case"destroy":Pr=Vn}return Pr.push(qr),{cancel:function(){for(var un=0;un<Pr.length;++un)if(Pr[un]===qr){Pr[un]=Pr[Pr.length-1],Pr.pop();break}}}},limits:fr,hasExtension:function(ln){return 0<=fr.extensions.indexOf(ln.toLowerCase())},read:Nt,destroy:function(){Zr.length=0,De(),Er&&(Er.removeEventListener("webglcontextlost",Re),Er.removeEventListener("webglcontextrestored",Ie)),Tr.clear(),_r.clear(),mr.clear(),dr.clear(),wr.clear(),nr.clear(),$t.clear(),Fe&&Fe.clear(),Vn.forEach(function(ln){ln()})},_gl:Ft,_refresh:ct,poll:function(){Pt(),Fe&&Fe.update()},now:zt,stats:Yt}),Ne.onDone(null,Qe),Qe}},"object"==typeof K&&void 0!==Q?Q.exports=v():this.createREGL=v()},{}],284:[function(x,Q,K){var p=x("buffer"),v=p.Buffer;function u(e,n){for(var t in e)n[t]=e[t]}function y(e,n,t){return v(e,n,t)}v.from&&v.alloc&&v.allocUnsafe&&v.allocUnsafeSlow?Q.exports=p:(u(p,K),K.Buffer=y),y.prototype=Object.create(v.prototype),u(v,y),y.from=function(e,n,t){if("number"==typeof e)throw new TypeError("Argument must not be a number");return v(e,n,t)},y.alloc=function(e,n,t){if("number"!=typeof e)throw new TypeError("Argument must be a number");var a=v(e);return void 0!==n?"string"==typeof t?a.fill(n,t):a.fill(n):a.fill(0),a},y.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return v(e)},y.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return p.SlowBuffer(e)}},{buffer:85}],285:[function(x,Q,K){Q.exports=v;var p=x("events").EventEmitter;function v(){p.call(this)}x("inherits")(v,p),v.Readable=x("readable-stream/lib/_stream_readable.js"),v.Writable=x("readable-stream/lib/_stream_writable.js"),v.Duplex=x("readable-stream/lib/_stream_duplex.js"),v.Transform=x("readable-stream/lib/_stream_transform.js"),v.PassThrough=x("readable-stream/lib/_stream_passthrough.js"),v.finished=x("readable-stream/lib/internal/streams/end-of-stream.js"),v.pipeline=x("readable-stream/lib/internal/streams/pipeline.js"),v.Stream=v,v.prototype.pipe=function(u,y){var e=this;function n(l){u.writable&&!1===u.write(l)&&e.pause&&e.pause()}function t(){e.readable&&e.resume&&e.resume()}e.on("data",n),u.on("drain",t),u._isStdio||y&&!1===y.end||(e.on("end",r),e.on("close",f));var a=!1;function r(){a||(a=!0,u.end())}function f(){a||(a=!0,"function"==typeof u.destroy&&u.destroy())}function s(l){if(i(),0===p.listenerCount(this,"error"))throw l}function i(){e.removeListener("data",n),u.removeListener("drain",t),e.removeListener("end",r),e.removeListener("close",f),e.removeListener("error",s),u.removeListener("error",s),e.removeListener("end",i),e.removeListener("close",i),u.removeListener("close",i)}return e.on("error",s),u.on("error",s),e.on("end",i),e.on("close",i),u.on("close",i),u.emit("pipe",e),u}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(x,Q,K){"use strict";var p={};function v(y,e,n){n||(n=Error);var t=function(a){var r,f;function s(i,l,c){return a.call(this,"string"==typeof e?e:e(i,l,c))||this}return f=a,(r=s).prototype=Object.create(f.prototype),r.prototype.constructor=r,r.__proto__=f,s}(n);t.prototype.name=n.name,t.prototype.code=y,p[y]=t}function u(y,e){if(Array.isArray(y)){var n=y.length;return y=y.map(function(t){return String(t)}),n>2?"one of ".concat(e," ").concat(y.slice(0,n-1).join(", "),", or ")+y[n-1]:2===n?"one of ".concat(e," ").concat(y[0]," or ").concat(y[1]):"of ".concat(e," ").concat(y[0])}return"of ".concat(e," ").concat(String(y))}v("ERR_INVALID_OPT_VALUE",function(y,e){return'The value "'+e+'" is invalid for option "'+y+'"'},TypeError),v("ERR_INVALID_ARG_TYPE",function(y,e,n){var t,f,i,c;if("string"==typeof e&&"not "===e.substr(0,"not ".length)?(t="must not be",e=e.replace(/^not /,"")):t="must be",i=y,(void 0===c||c>i.length)&&(c=i.length)," argument"===i.substring(c-" argument".length,c))f="The ".concat(y," ").concat(t," ").concat(u(e,"type"));else{var s=function(i,l,c){return"number"!=typeof c&&(c=0),!(c+".".length>i.length)&&-1!==i.indexOf(".",c)}(y)?"property":"argument";f='The "'.concat(y,'" ').concat(s," ").concat(t," ").concat(u(e,"type"))}return f+". Received type ".concat(typeof n)},TypeError),v("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),v("ERR_METHOD_NOT_IMPLEMENTED",function(y){return"The "+y+" method is not implemented"}),v("ERR_STREAM_PREMATURE_CLOSE","Premature close"),v("ERR_STREAM_DESTROYED",function(y){return"Cannot call "+y+" after a stream was destroyed"}),v("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),v("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),v("ERR_STREAM_WRITE_AFTER_END","write after end"),v("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),v("ERR_UNKNOWN_ENCODING",function(y){return"Unknown encoding: "+y},TypeError),v("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Q.exports.codes=p},{}],287:[function(x,Q,K){(function(p){(function(){"use strict";var v=Object.keys||function(s){var i=[];for(var l in s)i.push(l);return i};Q.exports=a;var u=x("./_stream_readable"),y=x("./_stream_writable");x("inherits")(a,u);for(var e=v(y.prototype),n=0;n<e.length;n++){var t=e[n];a.prototype[t]||(a.prototype[t]=y.prototype[t])}function a(s){if(!(this instanceof a))return new a(s);u.call(this,s),y.call(this,s),this.allowHalfOpen=!0,s&&(!1===s.readable&&(this.readable=!1),!1===s.writable&&(this.writable=!1),!1===s.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",r)))}function r(){this._writableState.ended||p.nextTick(f,this)}function f(s){s.end()}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(s){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=s,this._writableState.destroyed=s)}})}).call(this)}).call(this,x("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(x,Q,K){"use strict";Q.exports=v;var p=x("./_stream_transform");function v(u){if(!(this instanceof v))return new v(u);p.call(this,u)}x("inherits")(v,p),v.prototype._transform=function(u,y,e){e(null,u)}},{"./_stream_transform":290,inherits:231}],289:[function(x,Q,K){(function(p,v){(function(){"use strict";var u;Q.exports=T,T.ReadableState=A,x("events");var a,y=function(R,N){return R.listeners(N).length},e=x("./internal/streams/stream"),n=x("buffer").Buffer,t=v.Uint8Array||function(){},r=x("util");a=r&&r.debuglog?r.debuglog("stream"):function(){};var f,s,i,l=x("./internal/streams/buffer_list"),c=x("./internal/streams/destroy"),h=x("./internal/streams/state").getHighWaterMark,m=x("../errors").codes,d=m.ERR_INVALID_ARG_TYPE,o=m.ERR_STREAM_PUSH_AFTER_EOF,b=m.ERR_METHOD_NOT_IMPLEMENTED,g=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;x("inherits")(T,e);var w=c.errorOrDestroy,_=["error","close","destroy","pause","resume"];function A(R,N,V){u=u||x("./_stream_duplex"),"boolean"!=typeof V&&(V=N instanceof u),this.objectMode=!!(R=R||{}).objectMode,V&&(this.objectMode=this.objectMode||!!R.readableObjectMode),this.highWaterMark=h(this,R,"readableHighWaterMark",V),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==R.emitClose,this.autoDestroy=!!R.autoDestroy,this.destroyed=!1,this.defaultEncoding=R.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,R.encoding&&(f||(f=x("string_decoder/").StringDecoder),this.decoder=new f(R.encoding),this.encoding=R.encoding)}function T(R){if(u=u||x("./_stream_duplex"),!(this instanceof T))return new T(R);this._readableState=new A(R,this,this instanceof u),this.readable=!0,R&&("function"==typeof R.read&&(this._read=R.read),"function"==typeof R.destroy&&(this._destroy=R.destroy)),e.call(this)}function E(R,N,V,ee,j){a("readableAddChunk",N);var J,re,ne,se,ie,$=R._readableState;if(null===N)$.reading=!1,function(re,ne){if(a("onEofChunk"),!ne.ended){if(ne.decoder){var se=ne.decoder.end();se&&se.length&&(ne.buffer.push(se),ne.length+=ne.objectMode?1:se.length)}ne.ended=!0,ne.sync?D(re):(ne.needReadable=!1,ne.emittedReadable||(ne.emittedReadable=!0,S(re)))}}(R,$);else if(j||(re=$,n.isBuffer(ie=ne=N)||ie instanceof t||"string"==typeof ne||void 0===ne||re.objectMode||(se=new d("chunk",["string","Buffer","Uint8Array"],ne)),J=se),J)w(R,J);else if($.objectMode||N&&N.length>0)if("string"==typeof N||$.objectMode||Object.getPrototypeOf(N)===n.prototype||(N=function(re){return n.from(re)}(N)),ee)$.endEmitted?w(R,new g):k(R,$,N,!0);else if($.ended)w(R,new o);else{if($.destroyed)return!1;$.reading=!1,$.decoder&&!V?(N=$.decoder.write(N),$.objectMode||0!==N.length?k(R,$,N,!1):C(R,$)):k(R,$,N,!1)}else ee||($.reading=!1,C(R,$));return!$.ended&&($.length<$.highWaterMark||0===$.length)}function k(R,N,V,ee){N.flowing&&0===N.length&&!N.sync?(N.awaitDrain=0,R.emit("data",V)):(N.length+=N.objectMode?1:V.length,ee?N.buffer.unshift(V):N.buffer.push(V),N.needReadable&&D(R)),C(R,N)}function O(R,N){return R<=0||0===N.length&&N.ended?0:N.objectMode?1:R!=R?N.flowing&&N.length?N.buffer.head.data.length:N.length:(R>N.highWaterMark&&(N.highWaterMark=((V=R)>=1073741824?V=1073741824:(V--,V|=V>>>1,V|=V>>>2,V|=V>>>4,V|=V>>>8,V|=V>>>16,V++),V)),R<=N.length?R:N.ended?N.length:(N.needReadable=!0,0));var V}function D(R){var N=R._readableState;a("emitReadable",N.needReadable,N.emittedReadable),N.needReadable=!1,N.emittedReadable||(a("emitReadable",N.flowing),N.emittedReadable=!0,p.nextTick(S,R))}function S(R){var N=R._readableState;a("emitReadable_",N.destroyed,N.length,N.ended),N.destroyed||!N.length&&!N.ended||(R.emit("readable"),N.emittedReadable=!1),N.needReadable=!N.flowing&&!N.ended&&N.length<=N.highWaterMark,X(R)}function C(R,N){N.readingMore||(N.readingMore=!0,p.nextTick(z,R,N))}function z(R,N){for(;!N.reading&&!N.ended&&(N.length<N.highWaterMark||N.flowing&&0===N.length);){var V=N.length;if(a("maybeReadMore read 0"),R.read(0),V===N.length)break}N.readingMore=!1}function B(R){var N=R._readableState;N.readableListening=R.listenerCount("readable")>0,N.resumeScheduled&&!N.paused?N.flowing=!0:R.listenerCount("data")>0&&R.resume()}function U(R){a("readable nexttick read 0"),R.read(0)}function G(R,N){a("resume",N.reading),N.reading||R.read(0),N.resumeScheduled=!1,R.emit("resume"),X(R),N.flowing&&!N.reading&&R.read(0)}function X(R){var N=R._readableState;for(a("flow",N.flowing);N.flowing&&null!==R.read(););}function Z(R,N){return 0===N.length?null:(N.objectMode?V=N.buffer.shift():!R||R>=N.length?(V=N.decoder?N.buffer.join(""):1===N.buffer.length?N.buffer.first():N.buffer.concat(N.length),N.buffer.clear()):V=N.buffer.consume(R,N.decoder),V);var V}function q(R){var N=R._readableState;a("endReadable",N.endEmitted),N.endEmitted||(N.ended=!0,p.nextTick(W,N,R))}function W(R,N){if(a("endReadableNT",R.endEmitted,R.length),!R.endEmitted&&0===R.length&&(R.endEmitted=!0,N.readable=!1,N.emit("end"),R.autoDestroy)){var V=N._writableState;(!V||V.autoDestroy&&V.finished)&&N.destroy()}}function te(R,N){for(var V=0,ee=R.length;V<ee;V++)if(R[V]===N)return V;return-1}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(R){this._readableState&&(this._readableState.destroyed=R)}}),T.prototype.destroy=c.destroy,T.prototype._undestroy=c.undestroy,T.prototype._destroy=function(R,N){N(R)},T.prototype.push=function(R,N){var V,ee=this._readableState;return ee.objectMode?V=!0:"string"==typeof R&&((N=N||ee.defaultEncoding)!==ee.encoding&&(R=n.from(R,N),N=""),V=!0),E(this,R,N,!1,V)},T.prototype.unshift=function(R){return E(this,R,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(R){f||(f=x("string_decoder/").StringDecoder);var N=new f(R);this._readableState.decoder=N,this._readableState.encoding=this._readableState.decoder.encoding;for(var V=this._readableState.buffer.head,ee="";null!==V;)ee+=N.write(V.data),V=V.next;return this._readableState.buffer.clear(),""!==ee&&this._readableState.buffer.push(ee),this._readableState.length=ee.length,this},T.prototype.read=function(R){a("read",R),R=parseInt(R,10);var N=this._readableState,V=R;if(0!==R&&(N.emittedReadable=!1),0===R&&N.needReadable&&((0!==N.highWaterMark?N.length>=N.highWaterMark:N.length>0)||N.ended))return a("read: emitReadable",N.length,N.ended),0===N.length&&N.ended?q(this):D(this),null;if(0===(R=O(R,N))&&N.ended)return 0===N.length&&q(this),null;var ee,j=N.needReadable;return a("need readable",j),(0===N.length||N.length-R<N.highWaterMark)&&a("length less than watermark",j=!0),N.ended||N.reading?a("reading or ended",j=!1):j&&(a("do read"),N.reading=!0,N.sync=!0,0===N.length&&(N.needReadable=!0),this._read(N.highWaterMark),N.sync=!1,N.reading||(R=O(V,N))),null===(ee=R>0?Z(R,N):null)?(N.needReadable=N.length<=N.highWaterMark,R=0):(N.length-=R,N.awaitDrain=0),0===N.length&&(N.ended||(N.needReadable=!0),V!==R&&N.ended&&q(this)),null!==ee&&this.emit("data",ee),ee},T.prototype._read=function(R){w(this,new b("_read()"))},T.prototype.pipe=function(R,N){var V=this,ee=this._readableState;switch(ee.pipesCount){case 0:ee.pipes=R;break;case 1:ee.pipes=[ee.pipes,R];break;default:ee.pipes.push(R)}ee.pipesCount+=1,a("pipe count=%d opts=%j",ee.pipesCount,N);var j=N&&!1===N.end||R===p.stdout||R===p.stderr?de:$;function $(){a("onend"),R.end()}ee.endEmitted?p.nextTick(j):V.once("end",j),R.on("unpipe",function J(ve,_e){a("onunpipe"),ve===V&&_e&&!1===_e.hasUnpiped&&(_e.hasUnpiped=!0,a("cleanup"),R.removeListener("close",ue),R.removeListener("finish",le),R.removeListener("drain",re),R.removeListener("error",ie),R.removeListener("unpipe",J),V.removeListener("end",$),V.removeListener("end",de),V.removeListener("data",se),ne=!0,!ee.awaitDrain||R._writableState&&!R._writableState.needDrain||re())});var ve,re=(ve=V,function(){var _e=ve._readableState;a("pipeOnDrain",_e.awaitDrain),_e.awaitDrain&&_e.awaitDrain--,0===_e.awaitDrain&&y(ve,"data")&&(_e.flowing=!0,X(ve))});R.on("drain",re);var ne=!1;function se(ve){a("ondata");var _e=R.write(ve);a("dest.write",_e),!1===_e&&((1===ee.pipesCount&&ee.pipes===R||ee.pipesCount>1&&-1!==te(ee.pipes,R))&&!ne&&(a("false write response, pause",ee.awaitDrain),ee.awaitDrain++),V.pause())}function ie(ve){a("onerror",ve),de(),R.removeListener("error",ie),0===y(R,"error")&&w(R,ve)}function ue(){R.removeListener("finish",le),de()}function le(){a("onfinish"),R.removeListener("close",ue),de()}function de(){a("unpipe"),V.unpipe(R)}return V.on("data",se),function(ve,_e,be){if("function"==typeof ve.prependListener)return ve.prependListener(_e,be);ve._events&&ve._events[_e]?Array.isArray(ve._events[_e])?ve._events[_e].unshift(be):ve._events[_e]=[be,ve._events[_e]]:ve.on(_e,be)}(R,"error",ie),R.once("close",ue),R.once("finish",le),R.emit("pipe",V),ee.flowing||(a("pipe resume"),V.resume()),R},T.prototype.unpipe=function(R){var N=this._readableState,V={hasUnpiped:!1};if(0===N.pipesCount)return this;if(1===N.pipesCount)return R&&R!==N.pipes||(R||(R=N.pipes),N.pipes=null,N.pipesCount=0,N.flowing=!1,R&&R.emit("unpipe",this,V)),this;if(!R){var ee=N.pipes,j=N.pipesCount;N.pipes=null,N.pipesCount=0,N.flowing=!1;for(var J=0;J<j;J++)ee[J].emit("unpipe",this,{hasUnpiped:!1});return this}var $=te(N.pipes,R);return-1===$||(N.pipes.splice($,1),N.pipesCount-=1,1===N.pipesCount&&(N.pipes=N.pipes[0]),R.emit("unpipe",this,V)),this},T.prototype.addListener=T.prototype.on=function(R,N){var V=e.prototype.on.call(this,R,N),ee=this._readableState;return"data"===R?(ee.readableListening=this.listenerCount("readable")>0,!1!==ee.flowing&&this.resume()):"readable"===R&&(ee.endEmitted||ee.readableListening||(ee.readableListening=ee.needReadable=!0,ee.flowing=!1,ee.emittedReadable=!1,a("on readable",ee.length,ee.reading),ee.length?D(this):ee.reading||p.nextTick(U,this))),V},T.prototype.removeListener=function(R,N){var V=e.prototype.removeListener.call(this,R,N);return"readable"===R&&p.nextTick(B,this),V},T.prototype.removeAllListeners=function(R){var N=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==R&&void 0!==R||p.nextTick(B,this),N},T.prototype.resume=function(){var V,R=this._readableState;return R.flowing||(a("resume"),R.flowing=!R.readableListening,this,(V=R).resumeScheduled||(V.resumeScheduled=!0,p.nextTick(G,this,V))),R.paused=!1,this},T.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(R){var N=this,V=this._readableState,ee=!1;for(var j in R.on("end",function(){if(a("wrapped end"),V.decoder&&!V.ended){var $=V.decoder.end();$&&$.length&&N.push($)}N.push(null)}),R.on("data",function($){a("wrapped data"),V.decoder&&($=V.decoder.write($)),V.objectMode&&null==$||(V.objectMode||$&&$.length)&&(N.push($)||(ee=!0,R.pause()))}),R)void 0===this[j]&&"function"==typeof R[j]&&(this[j]=function($){return function(){return R[$].apply(R,arguments)}}(j));for(var J=0;J<_.length;J++)R.on(_[J],this.emit.bind(this,_[J]));return this._read=function($){a("wrapped _read",$),ee&&(ee=!1,R.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return void 0===s&&(s=x("./internal/streams/async_iterator")),s(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(R){this._readableState&&(this._readableState.flowing=R)}}),T._fromList=Z,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(R,N){return void 0===i&&(i=x("./internal/streams/from")),i(T,R,N)})}).call(this)}).call(this,x("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(x,Q,K){"use strict";Q.exports=a;var p=x("../errors").codes,v=p.ERR_METHOD_NOT_IMPLEMENTED,u=p.ERR_MULTIPLE_CALLBACK,y=p.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=p.ERR_TRANSFORM_WITH_LENGTH_0,n=x("./_stream_duplex");function t(s,i){var l=this._transformState;l.transforming=!1;var c=l.writecb;if(null===c)return this.emit("error",new u);l.writechunk=null,l.writecb=null,null!=i&&this.push(i),c(s);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function a(s){if(!(this instanceof a))return new a(s);n.call(this,s),this._transformState={afterTransform:t.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&("function"==typeof s.transform&&(this._transform=s.transform),"function"==typeof s.flush&&(this._flush=s.flush)),this.on("prefinish",r)}function r(){var s=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(i,l){f(s,i,l)})}function f(s,i,l){if(i)return s.emit("error",i);if(null!=l&&s.push(l),s._writableState.length)throw new e;if(s._transformState.transforming)throw new y;return s.push(null)}x("inherits")(a,n),a.prototype.push=function(s,i){return this._transformState.needTransform=!1,n.prototype.push.call(this,s,i)},a.prototype._transform=function(s,i,l){l(new v("_transform()"))},a.prototype._write=function(s,i,l){var c=this._transformState;if(c.writecb=l,c.writechunk=s,c.writeencoding=i,!c.transforming){var h=this._readableState;(c.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}},a.prototype._read=function(s){var i=this._transformState;null===i.writechunk||i.transforming?i.needTransform=!0:(i.transforming=!0,this._transform(i.writechunk,i.writeencoding,i.afterTransform))},a.prototype._destroy=function(s,i){n.prototype._destroy.call(this,s,function(l){i(l)})}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(x,Q,K){(function(p,v){(function(){"use strict";function u(z){var B=this;this.next=null,this.entry=null,this.finish=function(){!function(U,G,X){var Z=U.entry;for(U.entry=null;Z;){var q=Z.callback;G.pendingcb--,q(undefined),Z=Z.next}G.corkedRequestsFree.next=U}(B,z)}}var y;Q.exports=T,T.WritableState=A;var r,e={deprecate:x("util-deprecate")},n=x("./internal/streams/stream"),t=x("buffer").Buffer,a=v.Uint8Array||function(){},f=x("./internal/streams/destroy"),s=x("./internal/streams/state").getHighWaterMark,i=x("../errors").codes,l=i.ERR_INVALID_ARG_TYPE,c=i.ERR_METHOD_NOT_IMPLEMENTED,h=i.ERR_MULTIPLE_CALLBACK,m=i.ERR_STREAM_CANNOT_PIPE,d=i.ERR_STREAM_DESTROYED,o=i.ERR_STREAM_NULL_VALUES,b=i.ERR_STREAM_WRITE_AFTER_END,g=i.ERR_UNKNOWN_ENCODING,w=f.errorOrDestroy;function _(){}function A(z,B,U){y=y||x("./_stream_duplex"),"boolean"!=typeof U&&(U=B instanceof y),this.objectMode=!!(z=z||{}).objectMode,U&&(this.objectMode=this.objectMode||!!z.writableObjectMode),this.highWaterMark=s(this,z,"writableHighWaterMark",U),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===z.decodeStrings),this.defaultEncoding=z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(X){!function(Z,q){var V,W=Z._writableState,te=W.sync,R=W.writecb;if("function"!=typeof R)throw new h;if((V=W).writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0,q)!function(V,ee,j,J,$){--ee.pendingcb,j?(p.nextTick($,J),p.nextTick(C,V,ee),V._writableState.errorEmitted=!0,w(V,J)):($(J),V._writableState.errorEmitted=!0,w(V,J),C(V,ee))}(Z,W,te,q,R);else{var N=D(W)||Z.destroyed;N||W.corked||W.bufferProcessing||!W.bufferedRequest||O(Z,W),te?p.nextTick(k,Z,W,N,R):k(Z,W,N,R)}}(B,X)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==z.emitClose,this.autoDestroy=!!z.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function T(z){var B=this instanceof(y=y||x("./_stream_duplex"));if(!B&&!r.call(T,this))return new T(z);this._writableState=new A(z,this,B),this.writable=!0,z&&("function"==typeof z.write&&(this._write=z.write),"function"==typeof z.writev&&(this._writev=z.writev),"function"==typeof z.destroy&&(this._destroy=z.destroy),"function"==typeof z.final&&(this._final=z.final)),n.call(this)}function E(z,B,U,G,X,Z,q){B.writelen=G,B.writecb=q,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new d("write")):U?z._writev(X,B.onwrite):z._write(X,Z,B.onwrite),B.sync=!1}function k(z,B,U,G){var X,Z;U||(X=z,0===(Z=B).length&&Z.needDrain&&(Z.needDrain=!1,X.emit("drain"))),B.pendingcb--,G(),C(z,B)}function O(z,B){B.bufferProcessing=!0;var U=B.bufferedRequest;if(z._writev&&U&&U.next){var X=new Array(B.bufferedRequestCount),Z=B.corkedRequestsFree;Z.entry=U;for(var q=0,W=!0;U;)X[q]=U,U.isBuf||(W=!1),U=U.next,q+=1;X.allBuffers=W,E(z,B,!0,B.length,X,"",Z.finish),B.pendingcb++,B.lastBufferedRequest=null,Z.next?(B.corkedRequestsFree=Z.next,Z.next=null):B.corkedRequestsFree=new u(B),B.bufferedRequestCount=0}else{for(;U;){var te=U.chunk;if(E(z,B,!1,B.objectMode?1:te.length,te,U.encoding,U.callback),U=U.next,B.bufferedRequestCount--,B.writing)break}null===U&&(B.lastBufferedRequest=null)}B.bufferedRequest=U,B.bufferProcessing=!1}function D(z){return z.ending&&0===z.length&&null===z.bufferedRequest&&!z.finished&&!z.writing}function S(z,B){z._final(function(U){B.pendingcb--,U&&w(z,U),B.prefinished=!0,z.emit("prefinish"),C(z,B)})}function C(z,B){var X,Z,U=D(B);if(U&&(X=z,(Z=B).prefinished||Z.finalCalled||("function"!=typeof X._final||Z.destroyed?(Z.prefinished=!0,X.emit("prefinish")):(Z.pendingcb++,Z.finalCalled=!0,p.nextTick(S,X,Z))),0===B.pendingcb&&(B.finished=!0,z.emit("finish"),B.autoDestroy))){var G=z._readableState;(!G||G.autoDestroy&&G.endEmitted)&&z.destroy()}return U}x("inherits")(T,n),A.prototype.getBuffer=function(){for(var z=this.bufferedRequest,B=[];z;)B.push(z),z=z.next;return B},function(){try{Object.defineProperty(A.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(z){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(r=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(z){return!!r.call(this,z)||this===T&&z&&z._writableState instanceof A}})):r=function(z){return z instanceof this},T.prototype.pipe=function(){w(this,new m)},T.prototype.write=function(z,B,U){var G,W,te,R,X=this._writableState,Z=!1,q=!X.objectMode&&(t.isBuffer(G=z)||G instanceof a);return q&&!t.isBuffer(z)&&(z=t.from(z)),"function"==typeof B&&(U=B,B=null),q?B="buffer":B||(B=X.defaultEncoding),"function"!=typeof U&&(U=_),X.ending?(W=this,te=U,R=new b,w(W,R),p.nextTick(te,R)):(q||function(W,te,R,N){var V;return null===R?V=new o:"string"==typeof R||te.objectMode||(V=new l("chunk",["string","Buffer"],R)),!V||(w(W,V),p.nextTick(N,V),!1)}(this,X,z,U))&&(X.pendingcb++,Z=function(W,te,R,N,V,ee){if(!R){var j=(se=N,(ne=te).objectMode||!1===ne.decodeStrings||"string"!=typeof se||(se=t.from(se,V)),se);N!==j&&(R=!0,V="buffer",N=j)}var ne,se,J=te.objectMode?1:N.length;te.length+=J;var $=te.length<te.highWaterMark;if($||(te.needDrain=!0),te.writing||te.corked){var re=te.lastBufferedRequest;te.lastBufferedRequest={chunk:N,encoding:V,isBuf:R,callback:ee,next:null},re?re.next=te.lastBufferedRequest:te.bufferedRequest=te.lastBufferedRequest,te.bufferedRequestCount+=1}else E(W,te,!1,J,N,V,ee);return $}(this,X,q,z,B,U)),Z},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var z=this._writableState;z.corked&&(z.corked--,z.writing||z.corked||z.bufferProcessing||!z.bufferedRequest||O(this,z))},T.prototype.setDefaultEncoding=function(z){if("string"==typeof z&&(z=z.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((z+"").toLowerCase())>-1))throw new g(z);return this._writableState.defaultEncoding=z,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(z,B,U){U(new c("_write()"))},T.prototype._writev=null,T.prototype.end=function(z,B,U){var X,Z,q,G=this._writableState;return"function"==typeof z?(U=z,z=null,B=null):"function"==typeof B&&(U=B,B=null),null!=z&&this.write(z,B),G.corked&&(G.corked=1,this.uncork()),G.ending||(X=this,q=U,(Z=G).ending=!0,C(X,Z),q&&(Z.finished?p.nextTick(q):X.once("finish",q)),Z.ended=!0,X.writable=!1),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(z){this._writableState&&(this._writableState.destroyed=z)}}),T.prototype.destroy=f.destroy,T.prototype._undestroy=f.undestroy,T.prototype._destroy=function(z,B){B(z)}}).call(this)}).call(this,x("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(x,Q,K){(function(p){(function(){"use strict";var v;function u(d,o,b){return o in d?Object.defineProperty(d,o,{value:b,enumerable:!0,configurable:!0,writable:!0}):d[o]=b,d}var y=x("./end-of-stream"),e=Symbol("lastResolve"),n=Symbol("lastReject"),t=Symbol("error"),a=Symbol("ended"),r=Symbol("lastPromise"),f=Symbol("handlePromise"),s=Symbol("stream");function i(d,o){return{value:d,done:o}}function l(d){var o=d[e];if(null!==o){var b=d[s].read();null!==b&&(d[r]=null,d[e]=null,d[n]=null,o(i(b,!1)))}}function c(d){p.nextTick(l,d)}var h=Object.getPrototypeOf(function(){}),m=Object.setPrototypeOf((u(v={get stream(){return this[s]},next:function(){var d=this,o=this[t];if(null!==o)return Promise.reject(o);if(this[a])return Promise.resolve(i(void 0,!0));if(this[s].destroyed)return new Promise(function(_,A){p.nextTick(function(){d[t]?A(d[t]):_(i(void 0,!0))})});var b,_,A,g=this[r];if(g)b=new Promise((_=g,A=this,function(T,E){_.then(function(){A[a]?T(i(void 0,!0)):A[f](T,E)},E)}));else{var w=this[s].read();if(null!==w)return Promise.resolve(i(w,!1));b=new Promise(this[f])}return this[r]=b,b}},Symbol.asyncIterator,function(){return this}),u(v,"return",function(){var d=this;return new Promise(function(o,b){d[s].destroy(null,function(g){g?b(g):o(i(void 0,!0))})})}),v),h);Q.exports=function(d){var o,b=Object.create(m,(u(o={},s,{value:d,writable:!0}),u(o,e,{value:null,writable:!0}),u(o,n,{value:null,writable:!0}),u(o,t,{value:null,writable:!0}),u(o,a,{value:d._readableState.endEmitted,writable:!0}),u(o,f,{value:function(g,w){var _=b[s].read();_?(b[r]=null,b[e]=null,b[n]=null,g(i(_,!1))):(b[e]=g,b[n]=w)},writable:!0}),o));return b[r]=null,y(d,function(g){if(g&&"ERR_STREAM_PREMATURE_CLOSE"!==g.code){var w=b[n];return null!==w&&(b[r]=null,b[e]=null,b[n]=null,w(g)),void(b[t]=g)}var _=b[e];null!==_&&(b[r]=null,b[e]=null,b[n]=null,_(i(void 0,!0))),b[a]=!0}),d.on("readable",c.bind(null,b)),b}}).call(this)}).call(this,x("_process"))},{"./end-of-stream":295,_process:277}],293:[function(x,Q,K){"use strict";function p(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(t);a&&(f=f.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,f)}return r}function v(t,a,r){return a in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function u(t,a){for(var r=0;r<a.length;r++){var f=a[r];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(t,f.key,f)}}var y=x("buffer").Buffer,e=x("util").inspect,n=e&&e.custom||"inspect";Q.exports=function(){function t(){(function(s,i){if(!(s instanceof i))throw new TypeError("Cannot call a class as a function")})(this,t),this.head=null,this.tail=null,this.length=0}var a,r;return a=t,(r=[{key:"push",value:function(s){var i={data:s,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(s){var i={data:s,next:this.head};0===this.length&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(0!==this.length){var s=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,s}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(s){if(0===this.length)return"";for(var i=this.head,l=""+i.data;i=i.next;)l+=s+i.data;return l}},{key:"concat",value:function(s){if(0===this.length)return y.alloc(0);for(var h=y.allocUnsafe(s>>>0),m=this.head,d=0;m;)y.prototype.copy.call(m.data,h,d),d+=m.data.length,m=m.next;return h}},{key:"consume",value:function(s,i){var l;return s<this.head.data.length?(l=this.head.data.slice(0,s),this.head.data=this.head.data.slice(s)):l=s===this.head.data.length?this.shift():i?this._getString(s):this._getBuffer(s),l}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(s){var i=this.head,l=1,c=i.data;for(s-=c.length;i=i.next;){var h=i.data,m=s>h.length?h.length:s;if(c+=m===h.length?h:h.slice(0,s),0==(s-=m)){m===h.length?(++l,this.head=i.next?i.next:this.tail=null):(this.head=i,i.data=h.slice(m));break}++l}return this.length-=l,c}},{key:"_getBuffer",value:function(s){var i=y.allocUnsafe(s),l=this.head,c=1;for(l.data.copy(i),s-=l.data.length;l=l.next;){var h=l.data,m=s>h.length?h.length:s;if(h.copy(i,i.length-s,0,m),0==(s-=m)){m===h.length?(++c,this.head=l.next?l.next:this.tail=null):(this.head=l,l.data=h.slice(m));break}++c}return this.length-=c,i}},{key:n,value:function(s,i){return e(this,function(l){for(var c=1;c<arguments.length;c++){var h=null!=arguments[c]?arguments[c]:{};c%2?p(Object(h),!0).forEach(function(m){v(l,m,h[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(h)):p(Object(h)).forEach(function(m){Object.defineProperty(l,m,Object.getOwnPropertyDescriptor(h,m))})}return l}({},i,{depth:0,customInspect:!1}))}}])&&u(a.prototype,r),t}()},{buffer:85,util:83}],294:[function(x,Q,K){(function(p){(function(){"use strict";function v(e,n){y(e,n),u(e)}function u(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function y(e,n){e.emit("error",n)}Q.exports={destroy:function(e,n){var t=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(n?n(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,p.nextTick(y,this,e)):p.nextTick(y,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(f){!n&&f?t._writableState?t._writableState.errorEmitted?p.nextTick(u,t):(t._writableState.errorEmitted=!0,p.nextTick(v,t,f)):p.nextTick(v,t,f):n?(p.nextTick(u,t),n(f)):p.nextTick(u,t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,n){var t=e._readableState,a=e._writableState;t&&t.autoDestroy||a&&a.autoDestroy?e.destroy(n):e.emit("error",n)}}}).call(this)}).call(this,x("_process"))},{_process:277}],295:[function(x,Q,K){"use strict";var p=x("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function v(){}Q.exports=function u(y,e,n){if("function"==typeof e)return u(y,null,e);var d,o;e||(e={}),d=n||v,o=!1,n=function(){if(!o){o=!0;for(var b=arguments.length,g=new Array(b),w=0;w<b;w++)g[w]=arguments[w];d.apply(this,g)}};var t=e.readable||!1!==e.readable&&y.readable,a=e.writable||!1!==e.writable&&y.writable,r=function(){y.writable||s()},f=y._writableState&&y._writableState.finished,s=function(){a=!1,f=!0,t||n.call(y)},i=y._readableState&&y._readableState.endEmitted,l=function(){t=!1,i=!0,a||n.call(y)},c=function(d){n.call(y,d)},h=function(){var d;return t&&!i?(y._readableState&&y._readableState.ended||(d=new p),n.call(y,d)):a&&!f?(y._writableState&&y._writableState.ended||(d=new p),n.call(y,d)):void 0},m=function(){y.req.on("finish",s)};return function(d){return d.setHeader&&"function"==typeof d.abort}(y)?(y.on("complete",s),y.on("abort",h),y.req?m():y.on("request",m)):a&&!y._writableState&&(y.on("end",r),y.on("close",r)),y.on("end",l),y.on("finish",s),!1!==e.error&&y.on("error",c),y.on("close",h),function(){y.removeListener("complete",s),y.removeListener("abort",h),y.removeListener("request",m),y.req&&y.req.removeListener("finish",s),y.removeListener("end",r),y.removeListener("close",r),y.removeListener("finish",s),y.removeListener("end",l),y.removeListener("error",c),y.removeListener("close",h)}}},{"../../../errors":286}],296:[function(x,Q,K){Q.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(x,Q,K){"use strict";var p,v=x("../../../errors").codes,u=v.ERR_MISSING_ARGS,y=v.ERR_STREAM_DESTROYED;function e(f){if(f)throw f}function n(f,s,i,l){var m,d;m=l,d=!1,l=function(){d||(d=!0,m.apply(void 0,arguments))};var c=!1;f.on("close",function(){c=!0}),void 0===p&&(p=x("./end-of-stream")),p(f,{readable:s,writable:i},function(m){if(m)return l(m);c=!0,l()});var h=!1;return function(m){if(!c&&!h)return h=!0,function(d){return d.setHeader&&"function"==typeof d.abort}(f)?f.abort():"function"==typeof f.destroy?f.destroy():void l(m||new y("pipe"))}}function t(f){f()}function a(f,s){return f.pipe(s)}function r(f){return f.length?"function"!=typeof f[f.length-1]?e:f.pop():e}Q.exports=function(){for(var f=arguments.length,s=new Array(f),i=0;i<f;i++)s[i]=arguments[i];var l,c=r(s);if(Array.isArray(s[0])&&(s=s[0]),s.length<2)throw new u("streams");var h=s.map(function(m,d){var o=d<s.length-1;return n(m,o,d>0,function(b){l||(l=b),b&&h.forEach(t),o||(h.forEach(t),c(l))})});return s.reduce(a)}},{"../../../errors":286,"./end-of-stream":295}],298:[function(x,Q,K){"use strict";var p=x("../../../errors").codes.ERR_INVALID_OPT_VALUE;Q.exports={getHighWaterMark:function(v,u,y,e){var t,n=null!=(t=u).highWaterMark?t.highWaterMark:e?t[y]:null;if(null!=n){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new p(e?y:"highWaterMark",n);return Math.floor(n)}return v.objectMode?16:16384}}},{"../../../errors":286}],299:[function(x,Q,K){Q.exports=x("events").EventEmitter},{events:84}],300:[function(x,Q,K){"use strict";var p=x("safe-buffer").Buffer,v=p.isEncoding||function(i){switch((i=""+i)&&i.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function u(i){var l;switch(this.encoding=function(c){var h=function(m){if(!m)return"utf8";for(var d;;)switch(m){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return m;default:if(d)return;m=(""+m).toLowerCase(),d=!0}}(c);if("string"!=typeof h&&(p.isEncoding===v||!v(c)))throw new Error("Unknown encoding: "+c);return h||c}(i),this.encoding){case"utf16le":this.text=n,this.end=t,l=4;break;case"utf8":this.fillLast=e,l=4;break;case"base64":this.text=a,this.end=r,l=3;break;default:return this.write=f,void(this.end=s)}this.lastNeed=0,this.lastTotal=0,this.lastChar=p.allocUnsafe(l)}function y(i){return i<=127?0:i>>5==6?2:i>>4==14?3:i>>3==30?4:i>>6==2?-1:-2}function e(i){var l=this.lastTotal-this.lastNeed,c=function(h,m,d){if(128!=(192&m[0]))return h.lastNeed=0,"\ufffd";if(h.lastNeed>1&&m.length>1){if(128!=(192&m[1]))return h.lastNeed=1,"\ufffd";if(h.lastNeed>2&&m.length>2&&128!=(192&m[2]))return h.lastNeed=2,"\ufffd"}}(this,i);return void 0!==c?c:this.lastNeed<=i.length?(i.copy(this.lastChar,l,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(i.copy(this.lastChar,l,0,i.length),void(this.lastNeed-=i.length))}function n(i,l){if((i.length-l)%2==0){var c=i.toString("utf16le",l);if(c){var h=c.charCodeAt(c.length-1);if(h>=55296&&h<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=i[i.length-1],i.toString("utf16le",l,i.length-1)}function t(i){var l=i&&i.length?this.write(i):"";return this.lastNeed?l+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):l}function a(i,l){var c=(i.length-l)%3;return 0===c?i.toString("base64",l):(this.lastNeed=3-c,this.lastTotal=3,1===c?this.lastChar[0]=i[i.length-1]:(this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1]),i.toString("base64",l,i.length-c))}function r(i){var l=i&&i.length?this.write(i):"";return this.lastNeed?l+this.lastChar.toString("base64",0,3-this.lastNeed):l}function f(i){return i.toString(this.encoding)}function s(i){return i&&i.length?this.write(i):""}K.StringDecoder=u,u.prototype.write=function(i){if(0===i.length)return"";var l,c;if(this.lastNeed){if(void 0===(l=this.fillLast(i)))return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<i.length?l?l+this.text(i,c):this.text(i,c):l||""},u.prototype.end=function(i){var l=i&&i.length?this.write(i):"";return this.lastNeed?l+"\ufffd":l},u.prototype.text=function(i,l){var c=function(m,d,o){var b=d.length-1;if(b<o)return 0;var g=y(d[b]);return g>=0?(g>0&&(m.lastNeed=g-1),g):--b<o||-2===g?0:(g=y(d[b]))>=0?(g>0&&(m.lastNeed=g-2),g):--b<o||-2===g?0:(g=y(d[b]))>=0?(g>0&&(2===g?g=0:m.lastNeed=g-3),g):0}(this,i,l);if(!this.lastNeed)return i.toString("utf8",l);this.lastTotal=c;var h=i.length-(c-this.lastNeed);return i.copy(this.lastChar,0,h),i.toString("utf8",l,h)},u.prototype.fillLast=function(i){if(this.lastNeed<=i.length)return i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,i.length),this.lastNeed-=i.length}},{"safe-buffer":284}],301:[function(x,Q,K){(function(p,v){(function(){var u=x("assert"),y=x("debug")("stream-parser");function e(c){y("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=-1,c._parserCallback=null,"function"==typeof c.push&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function n(c,h){u(!this._parserCallback,'there is already a "callback" set!'),u(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||e(this),y("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=h,this._parserState=0}function t(c,h){u(!this._parserCallback,'there is already a "callback" set!'),u(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||e(this),y("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=h,this._parserState=1}function a(c,h){u(!this._parserCallback,'There is already a "callback" set!'),u(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||e(this),y("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=h,this._parserState=2}function r(c,h,m){this._parserInit||e(this),y("write(%o bytes)",c.length),"function"==typeof h&&(m=h),i(this,c,null,m)}function f(c,h,m){this._parserInit||e(this),y("transform(%o bytes)",c.length),"function"!=typeof h&&(h=this._parserOutput),i(this,c,h,m)}function s(c,h,m,d){if(c._parserBytesLeft-=h.length,y("%o bytes left for stream piece",c._parserBytesLeft),0===c._parserState?(c._parserBuffers.push(h),c._parserBuffered+=h.length):2===c._parserState&&m(h),0!==c._parserBytesLeft)return d;var o=c._parserCallback;if(o&&0===c._parserState&&c._parserBuffers.length>1&&(h=v.concat(c._parserBuffers,c._parserBuffered)),0!==c._parserState&&(h=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=-1,c._parserBuffers.splice(0),o){var b=[];h&&b.push(h),m&&b.push(m);var g=o.length>b.length;g&&b.push(l(d));var w=o.apply(c,b);if(!g||d===w)return d}}Q.exports=function(c){var h=c&&"function"==typeof c._transform;if(!(h||c&&"function"==typeof c._write))throw new Error("must pass a Writable or Transform stream in");y("extending Parser into stream"),c._bytes=n,c._skipBytes=t,h&&(c._passthrough=a),h?c._transform=f:c._write=r};var i=l(function c(h,m,d,o){return h._parserBytesLeft<=0?o(new Error("got data but not currently parsing anything")):m.length<=h._parserBytesLeft?function(){return s(h,m,d,o)}:function(){var b=m.slice(0,h._parserBytesLeft);return s(h,b,d,function(g){return g?o(g):m.length>b.length?function(){return c(h,m.slice(b.length),d,o)}:void 0})}});function l(c){return function(){for(var h=c.apply(this,arguments);"function"==typeof h;)h=h();return h}}}).call(this)}).call(this,x("_process"),x("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(x,Q,K){(function(p){(function(){function v(){var u;try{u=K.storage.debug}catch(y){}return!u&&void 0!==p&&"env"in p&&(u=p.env.DEBUG),u}(K=Q.exports=x("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},K.formatArgs=function(u){var y=this.useColors;if(u[0]=(y?"%c":"")+this.namespace+(y?" %c":" ")+u[0]+(y?"%c ":" ")+"+"+K.humanize(this.diff),y){var e="color: "+this.color;u.splice(1,0,e,"color: inherit");var n=0,t=0;u[0].replace(/%[a-zA-Z%]/g,function(a){"%%"!==a&&(n++,"%c"===a&&(t=n))}),u.splice(t,0,e)}},K.save=function(u){try{null==u?K.storage.removeItem("debug"):K.storage.debug=u}catch(y){}},K.load=v,K.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},K.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(u){}}(),K.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],K.formatters.j=function(u){try{return JSON.stringify(u)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}},K.enable(v())}).call(this)}).call(this,x("_process"))},{"./debug":303,_process:277}],303:[function(x,Q,K){var p;function v(u){function y(){if(y.enabled){var e=y,n=+new Date;e.diff=n-(p||n),e.prev=p,e.curr=n,p=n;for(var a=new Array(arguments.length),r=0;r<a.length;r++)a[r]=arguments[r];a[0]=K.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var f=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(i,l){if("%%"===i)return i;f++;var c=K.formatters[l];return"function"==typeof c&&(i=c.call(e,a[f]),a.splice(f,1),f--),i}),K.formatArgs.call(e,a),(y.log||K.log||console.log.bind(console)).apply(e,a)}}return y.namespace=u,y.enabled=K.enabled(u),y.useColors=K.useColors(),y.color=function(e){var n,t=0;for(n in e)t=(t<<5)-t+e.charCodeAt(n),t|=0;return K.colors[Math.abs(t)%K.colors.length]}(u),"function"==typeof K.init&&K.init(y),y}(K=Q.exports=v.debug=v.default=v).coerce=function(u){return u instanceof Error?u.stack||u.message:u},K.disable=function(){K.enable("")},K.enable=function(u){K.save(u),K.names=[],K.skips=[];for(var y=("string"==typeof u?u:"").split(/[\s,]+/),e=y.length,n=0;n<e;n++)y[n]&&("-"===(u=y[n].replace(/\*/g,".*?"))[0]?K.skips.push(new RegExp("^"+u.substr(1)+"$")):K.names.push(new RegExp("^"+u+"$")))},K.enabled=function(u){var y,e;for(y=0,e=K.skips.length;y<e;y++)if(K.skips[y].test(u))return!1;for(y=0,e=K.names.length;y<e;y++)if(K.names[y].test(u))return!0;return!1},K.humanize=x("ms"),K.names=[],K.skips=[],K.formatters={}},{ms:304}],304:[function(x,Q,K){var p=1e3,v=6e4,u=60*v,y=24*u;function e(n,t,a){if(!(n<t))return n<1.5*t?Math.floor(n/t)+" "+a:Math.ceil(n/t)+" "+a+"s"}Q.exports=function(n,t){t=t||{};var a,f,r=typeof n;if("string"===r&&n.length>0)return function(f){if(!((f=String(f)).length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(f);if(s){var i=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return i*y;case"hours":case"hour":case"hrs":case"hr":case"h":return i*u;case"minutes":case"minute":case"mins":case"min":case"m":return i*v;case"seconds":case"second":case"secs":case"sec":case"s":return i*p;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(n);if("number"===r&&!1===isNaN(n))return t.long?e(a=n,y,"day")||e(a,u,"hour")||e(a,v,"minute")||e(a,p,"second")||a+" ms":(f=n)>=y?Math.round(f/y)+"d":f>=u?Math.round(f/u)+"h":f>=v?Math.round(f/v)+"m":f>=p?Math.round(f/p)+"s":f+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))}},{}],305:[function(x,Q,K){"use strict";var p=x("parenthesis");Q.exports=function(v,u,y){if(null==v)throw Error("First argument should be a string");if(null==u)throw Error("Separator should be a string or a RegExp");y?("string"==typeof y||Array.isArray(y))&&(y={ignore:y}):y={},null==y.escape&&(y.escape=!0),null==y.ignore?y.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof y.ignore&&(y.ignore=[y.ignore]),y.ignore=y.ignore.map(function(s){return 1===s.length&&(s+=s),s}));var e=p.parse(v,{flat:!0,brackets:y.ignore}),n=e[0].split(u);if(y.escape){for(var t=[],a=0;a<n.length;a++){var r=n[a];"\\"===r[r.length-1]&&"\\"!==r[r.length-2]?(t.push(r+u+n[a+1]),a++):t.push(r)}n=t}for(a=0;a<n.length;a++)e[0]=n[a],n[a]=p.stringify(e,{flat:!0});return n}},{parenthesis:248}],306:[function(x,Q,K){"use strict";Q.exports=function(p){for(var v=p.length,u=new Array(v),y=new Array(v),e=new Array(v),n=new Array(v),t=new Array(v),a=new Array(v),r=0;r<v;++r)u[r]=-1,y[r]=0,e[r]=!1,n[r]=0,t[r]=-1,a[r]=[];var f,s=0,i=[],l=[];function c(d){var o=[d],b=[d];for(u[d]=y[d]=s,e[d]=!0,s+=1;b.length>0;){var g=p[d=b[b.length-1]];if(n[d]<g.length){for(var w=n[d];w<g.length;++w){var _=g[w];if(u[_]<0){u[_]=y[_]=s,e[_]=!0,s+=1,o.push(_),b.push(_);break}e[_]&&(y[d]=0|Math.min(y[d],y[_])),t[_]>=0&&a[d].push(t[_])}n[d]=w}else{if(y[d]===u[d]){var A=[],T=[],E=0;for(w=o.length-1;w>=0;--w){var k=o[w];if(e[k]=!1,A.push(k),T.push(a[k]),E+=a[k].length,t[k]=i.length,k===d){o.length=w;break}}i.push(A);var O=new Array(E);for(w=0;w<T.length;w++)for(var D=0;D<T[w].length;D++)O[--E]=T[w][D];l.push(O)}b.pop()}}}for(r=0;r<v;++r)u[r]<0&&c(r);for(r=0;r<l.length;r++){var h=l[r];if(0!==h.length){h.sort(function(d,o){return d-o}),f=[h[0]];for(var m=1;m<h.length;m++)h[m]!==h[m-1]&&f.push(h[m]);l[r]=f}}return{components:i,adjacencyList:l}}},{}],307:[function(x,Q,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0});var v=2*Math.PI,u=function(n,t,a,r,f,s,i){var l=n.x,c=n.y;return{x:r*(l*=t)-f*(c*=a)+s,y:f*l+r*c+i}},y=function(n,t){var a=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:4/3*Math.tan(t/4),r=Math.cos(n),f=Math.sin(n),s=Math.cos(n+t),i=Math.sin(n+t);return[{x:r-f*a,y:f+r*a},{x:s+i*a,y:i-s*a},{x:s,y:i}]},e=function(n,t,a,r){var f=n*a+t*r;return f>1&&(f=1),f<-1&&(f=-1),(n*r-t*a<0?-1:1)*Math.acos(f)};K.default=function(n){var t=n.px,a=n.py,r=n.cx,f=n.cy,s=n.rx,i=n.ry,l=n.xAxisRotation,c=void 0===l?0:l,h=n.largeArcFlag,m=void 0===h?0:h,d=n.sweepFlag,o=void 0===d?0:d,b=[];if(0===s||0===i)return[];var g=Math.sin(c*v/360),w=Math.cos(c*v/360),_=w*(t-r)/2+g*(a-f)/2,A=-g*(t-r)/2+w*(a-f)/2;if(0===_&&0===A)return[];s=Math.abs(s),i=Math.abs(i);var T=Math.pow(_,2)/Math.pow(s,2)+Math.pow(A,2)/Math.pow(i,2);T>1&&(s*=Math.sqrt(T),i*=Math.sqrt(T));var k=function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(a,r){var f=[],s=!0,i=!1,l=void 0;try{for(var c,h=a[Symbol.iterator]();!(s=(c=h.next()).done)&&(f.push(c.value),!r||f.length!==r);s=!0);}catch(m){i=!0,l=m}finally{try{!s&&h.return&&h.return()}finally{if(i)throw l}}return f}(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(G,X,Z,q,W,te,R,N,V,ee,j,J){var $=Math.pow(W,2),re=Math.pow(te,2),ne=Math.pow(j,2),se=Math.pow(J,2),ie=$*re-$*se-re*ne;ie<0&&(ie=0),ie/=$*se+re*ne;var ue=(ie=Math.sqrt(ie)*(R===N?-1:1))*W/te*J,le=ie*-te/W*j,de=ee*ue-V*le+(G+Z)/2,ve=V*ue+ee*le+(X+q)/2,_e=(j-ue)/W,be=(J-le)/te,Te=(-j-ue)/W,he=(-J-le)/te,me=e(1,0,_e,be),Ae=e(_e,be,Te,he);return 0===N&&Ae>0&&(Ae-=v),1===N&&Ae<0&&(Ae+=v),[de,ve,me,Ae]}(t,a,r,f,s,i,m,o,g,w,_,A),4),O=k[0],D=k[1],S=k[2],C=k[3],z=Math.abs(C)/(v/4);Math.abs(1-z)<1e-7&&(z=1);var B=Math.max(Math.ceil(z),1);C/=B;for(var U=0;U<B;U++)b.push(y(S,C)),S+=C;return b.map(function(G){var X=u(G[0],s,i,w,g,O,D),Z=X.x,q=X.y,W=u(G[1],s,i,w,g,O,D),te=W.x,R=W.y,N=u(G[2],s,i,w,g,O,D);return{x1:Z,y1:q,x2:te,y2:R,x:N.x,y:N.y}})},Q.exports=K.default},{}],308:[function(x,Q,K){"use strict";var p=x("parse-svg-path"),v=x("abs-svg-path"),u=x("normalize-svg-path"),y=x("is-svg-path"),e=x("assert");Q.exports=function(n){if(Array.isArray(n)&&1===n.length&&"string"==typeof n[0]&&(n=n[0]),"string"==typeof n&&(e(y(n),"String is not an SVG path."),n=p(n)),e(Array.isArray(n),"Argument should be a string or an array of path segments."),n=v(n),!(n=u(n)).length)return[0,0,0,0];for(var t=[1/0,1/0,-1/0,-1/0],a=0,r=n.length;a<r;a++)for(var f=n[a].slice(1),s=0;s<f.length;s+=2)f[s+0]<t[0]&&(t[0]=f[s+0]),f[s+1]<t[1]&&(t[1]=f[s+1]),f[s+0]>t[2]&&(t[2]=f[s+0]),f[s+1]>t[3]&&(t[3]=f[s+1]);return t}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(x,Q,K){"use strict";Q.exports=function(y){for(var e,n=[],t=0,a=0,r=0,f=0,s=null,i=null,l=0,c=0,h=0,m=y.length;h<m;h++){var d=y[h],o=d[0];switch(o){case"M":r=d[1],f=d[2];break;case"A":var b=p({px:l,py:c,cx:d[6],cy:d[7],rx:d[1],ry:d[2],xAxisRotation:d[3],largeArcFlag:d[4],sweepFlag:d[5]});if(!b.length)continue;for(var g,w=0;w<b.length;w++)d=["C",(g=b[w]).x1,g.y1,g.x2,g.y2,g.x,g.y],w<b.length-1&&n.push(d);break;case"S":var _=l,A=c;"C"!=e&&"S"!=e||(_+=_-t,A+=A-a),d=["C",_,A,d[1],d[2],d[3],d[4]];break;case"T":"Q"==e||"T"==e?(s=2*l-s,i=2*c-i):(s=l,i=c),d=u(l,c,s,i,d[1],d[2]);break;case"Q":s=d[1],i=d[2],d=u(l,c,d[1],d[2],d[3],d[4]);break;case"L":d=v(l,c,d[1],d[2]);break;case"H":d=v(l,c,d[1],c);break;case"V":d=v(l,c,l,d[1]);break;case"Z":d=v(l,c,r,f)}e=o,l=d[d.length-2],c=d[d.length-1],d.length>4?(t=d[d.length-4],a=d[d.length-3]):(t=l,a=c),n.push(d)}return n};var p=x("svg-arc-to-cubic-bezier");function v(y,e,n,t){return["C",y,e,n,t,n,t]}function u(y,e,n,t,a,r){return["C",y/3+2/3*n,e/3+2/3*t,a/3+2/3*n,r/3+2/3*t,a,r]}},{"svg-arc-to-cubic-bezier":307}],310:[function(x,Q,K){"use strict";var p,v=x("svg-path-bounds"),u=x("parse-svg-path"),y=x("draw-svg-path"),e=x("is-svg-path"),n=x("bitmap-sdf"),t=document.createElement("canvas"),a=t.getContext("2d");Q.exports=function(r,f){if(!e(r))throw Error("Argument should be valid svg path string");var s,i;f||(f={}),f.shape?(s=f.shape[0],i=f.shape[1]):(s=t.width=f.w||f.width||200,i=t.height=f.h||f.height||200);var l=Math.min(s,i),c=f.stroke||0,h=f.viewbox||f.viewBox||v(r),m=[s/(h[2]-h[0]),i/(h[3]-h[1])],d=Math.min(m[0]||0,m[1]||0)/2;if(a.fillStyle="black",a.fillRect(0,0,s,i),a.fillStyle="white",c&&("number"!=typeof c&&(c=1),a.strokeStyle=c>0?"white":"black",a.lineWidth=Math.abs(c)),a.translate(.5*s,.5*i),a.scale(d,d),function(){if(null!=p)return p;var g=document.createElement("canvas").getContext("2d");if(g.canvas.width=g.canvas.height=1,!window.Path2D)return p=!1;var w=new Path2D("M0,0h1v1h-1v-1Z");g.fillStyle="black",g.fill(w);var _=g.getImageData(0,0,1,1);return p=_&&_.data&&255===_.data[3]}()){var o=new Path2D(r);a.fill(o),c&&a.stroke(o)}else{var b=u(r);y(a,b),a.fill(),c&&a.stroke()}return a.setTransform(1,0,0,1,0,0),n(a,{cutoff:null!=f.cutoff?f.cutoff:.5,radius:null!=f.radius?f.radius:.5*l})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(x,Q,K){(function(p,v){(function(){var u=x("process/browser.js").nextTick,y=Function.prototype.apply,e=Array.prototype.slice,n={},t=0;function a(r,f){this._id=r,this._clearFn=f}K.setTimeout=function(){return new a(y.call(setTimeout,window,arguments),clearTimeout)},K.setInterval=function(){return new a(y.call(setInterval,window,arguments),clearInterval)},K.clearTimeout=K.clearInterval=function(r){r.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},K.enroll=function(r,f){clearTimeout(r._idleTimeoutId),r._idleTimeout=f},K.unenroll=function(r){clearTimeout(r._idleTimeoutId),r._idleTimeout=-1},K._unrefActive=K.active=function(r){clearTimeout(r._idleTimeoutId);var f=r._idleTimeout;f>=0&&(r._idleTimeoutId=setTimeout(function(){r._onTimeout&&r._onTimeout()},f))},K.setImmediate="function"==typeof p?p:function(r){var f=t++,s=!(arguments.length<2)&&e.call(arguments,1);return n[f]=!0,u(function(){n[f]&&(s?r.apply(null,s):r.call(null),K.clearImmediate(f))}),f},K.clearImmediate="function"==typeof v?v:function(r){delete n[r]}}).call(this)}).call(this,x("timers").setImmediate,x("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(x,Q,K){!function(p){var v=/^\s+/,u=/\s+$/,y=0,e=p.round,n=p.min,t=p.max,a=p.random;function r(V,ee){if(ee=ee||{},(V=V||"")instanceof r)return V;if(!(this instanceof r))return new r(V,ee);var J,ve,_e,$,re,ne,se,ie,ue,le,j=($={r:0,g:0,b:0},re=1,ne=null,se=null,ie=null,ue=!1,le=!1,"string"==typeof(J=V)&&(J=function(be){be=be.replace(v,"").replace(u,"").toLowerCase();var Te,he=!1;if(O[be])be=O[be],he=!0;else if("transparent"==be)return{r:0,g:0,b:0,a:0,format:"name"};return(Te=R.rgb.exec(be))?{r:Te[1],g:Te[2],b:Te[3]}:(Te=R.rgba.exec(be))?{r:Te[1],g:Te[2],b:Te[3],a:Te[4]}:(Te=R.hsl.exec(be))?{h:Te[1],s:Te[2],l:Te[3]}:(Te=R.hsla.exec(be))?{h:Te[1],s:Te[2],l:Te[3],a:Te[4]}:(Te=R.hsv.exec(be))?{h:Te[1],s:Te[2],v:Te[3]}:(Te=R.hsva.exec(be))?{h:Te[1],s:Te[2],v:Te[3],a:Te[4]}:(Te=R.hex8.exec(be))?{r:B(Te[1]),g:B(Te[2]),b:B(Te[3]),a:Z(Te[4]),format:he?"name":"hex8"}:(Te=R.hex6.exec(be))?{r:B(Te[1]),g:B(Te[2]),b:B(Te[3]),format:he?"name":"hex"}:(Te=R.hex4.exec(be))?{r:B(Te[1]+""+Te[1]),g:B(Te[2]+""+Te[2]),b:B(Te[3]+""+Te[3]),a:Z(Te[4]+""+Te[4]),format:he?"name":"hex8"}:!!(Te=R.hex3.exec(be))&&{r:B(Te[1]+""+Te[1]),g:B(Te[2]+""+Te[2]),b:B(Te[3]+""+Te[3]),format:he?"name":"hex"}}(J)),"object"==typeof J&&(N(J.r)&&N(J.g)&&N(J.b)?(ve=J.g,_e=J.b,$={r:255*C(J.r,255),g:255*C(ve,255),b:255*C(_e,255)},ue=!0,le="%"===String(J.r).substr(-1)?"prgb":"rgb"):N(J.h)&&N(J.s)&&N(J.v)?(ne=G(J.s),se=G(J.v),$=function(be,Te,he){be=6*C(be,360),Te=C(Te,100),he=C(he,100);var me=p.floor(be),Ae=be-me,we=he*(1-Te),Se=he*(1-Ae*Te),Pe=he*(1-(1-Ae)*Te),ze=me%6;return{r:255*[he,Se,we,we,Pe,he][ze],g:255*[Pe,he,he,Se,we,we][ze],b:255*[we,we,Pe,he,he,Se][ze]}}(J.h,ne,se),ue=!0,le="hsv"):N(J.h)&&N(J.s)&&N(J.l)&&(ne=G(J.s),ie=G(J.l),$=function(be,Te,he){var me,Ae,we;function Se(He,tt,Oe){return Oe<0&&(Oe+=1),Oe>1&&(Oe-=1),Oe<1/6?He+6*(tt-He)*Oe:Oe<.5?tt:Oe<2/3?He+(tt-He)*(2/3-Oe)*6:He}if(be=C(be,360),Te=C(Te,100),he=C(he,100),0===Te)me=Ae=we=he;else{var Pe=he<.5?he*(1+Te):he+Te-he*Te,ze=2*he-Pe;me=Se(ze,Pe,be+1/3),Ae=Se(ze,Pe,be),we=Se(ze,Pe,be-1/3)}return{r:255*me,g:255*Ae,b:255*we}}(J.h,ne,ie),ue=!0,le="hsl"),J.hasOwnProperty("a")&&(re=J.a)),re=S(re),{ok:ue,format:J.format||le,r:n(255,t($.r,0)),g:n(255,t($.g,0)),b:n(255,t($.b,0)),a:re});this._originalInput=V,this._r=j.r,this._g=j.g,this._b=j.b,this._a=j.a,this._roundA=e(100*this._a)/100,this._format=ee.format||j.format,this._gradientType=ee.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=j.ok,this._tc_id=y++}function f(V,ee,j){V=C(V,255),ee=C(ee,255),j=C(j,255);var J,$,re=t(V,ee,j),ne=n(V,ee,j),se=(re+ne)/2;if(re==ne)J=$=0;else{var ie=re-ne;switch($=se>.5?ie/(2-re-ne):ie/(re+ne),re){case V:J=(ee-j)/ie+(ee<j?6:0);break;case ee:J=(j-V)/ie+2;break;case j:J=(V-ee)/ie+4}J/=6}return{h:J,s:$,l:se}}function s(V,ee,j){V=C(V,255),ee=C(ee,255),j=C(j,255);var J,$,re=t(V,ee,j),ne=n(V,ee,j),se=re,ie=re-ne;if($=0===re?0:ie/re,re==ne)J=0;else{switch(re){case V:J=(ee-j)/ie+(ee<j?6:0);break;case ee:J=(j-V)/ie+2;break;case j:J=(V-ee)/ie+4}J/=6}return{h:J,s:$,v:se}}function i(V,ee,j,J){var $=[U(e(V).toString(16)),U(e(ee).toString(16)),U(e(j).toString(16))];return J&&$[0].charAt(0)==$[0].charAt(1)&&$[1].charAt(0)==$[1].charAt(1)&&$[2].charAt(0)==$[2].charAt(1)?$[0].charAt(0)+$[1].charAt(0)+$[2].charAt(0):$.join("")}function l(V,ee,j,J){return[U(X(J)),U(e(V).toString(16)),U(e(ee).toString(16)),U(e(j).toString(16))].join("")}function c(V,ee){ee=0===ee?0:ee||10;var j=r(V).toHsl();return j.s-=ee/100,j.s=z(j.s),r(j)}function h(V,ee){ee=0===ee?0:ee||10;var j=r(V).toHsl();return j.s+=ee/100,j.s=z(j.s),r(j)}function m(V){return r(V).desaturate(100)}function d(V,ee){ee=0===ee?0:ee||10;var j=r(V).toHsl();return j.l+=ee/100,j.l=z(j.l),r(j)}function o(V,ee){ee=0===ee?0:ee||10;var j=r(V).toRgb();return j.r=t(0,n(255,j.r-e(-ee/100*255))),j.g=t(0,n(255,j.g-e(-ee/100*255))),j.b=t(0,n(255,j.b-e(-ee/100*255))),r(j)}function b(V,ee){ee=0===ee?0:ee||10;var j=r(V).toHsl();return j.l-=ee/100,j.l=z(j.l),r(j)}function g(V,ee){var j=r(V).toHsl(),J=(j.h+ee)%360;return j.h=J<0?360+J:J,r(j)}function w(V){var ee=r(V).toHsl();return ee.h=(ee.h+180)%360,r(ee)}function _(V){var ee=r(V).toHsl(),j=ee.h;return[r(V),r({h:(j+120)%360,s:ee.s,l:ee.l}),r({h:(j+240)%360,s:ee.s,l:ee.l})]}function A(V){var ee=r(V).toHsl(),j=ee.h;return[r(V),r({h:(j+90)%360,s:ee.s,l:ee.l}),r({h:(j+180)%360,s:ee.s,l:ee.l}),r({h:(j+270)%360,s:ee.s,l:ee.l})]}function T(V){var ee=r(V).toHsl(),j=ee.h;return[r(V),r({h:(j+72)%360,s:ee.s,l:ee.l}),r({h:(j+216)%360,s:ee.s,l:ee.l})]}function E(V,ee,j){ee=ee||6,j=j||30;var J=r(V).toHsl(),$=360/j,re=[r(V)];for(J.h=(J.h-($*ee>>1)+720)%360;--ee;)J.h=(J.h+$)%360,re.push(r(J));return re}function k(V,ee){ee=ee||6;for(var j=r(V).toHsv(),J=j.h,$=j.s,re=j.v,ne=[],se=1/ee;ee--;)ne.push(r({h:J,s:$,v:re})),re=(re+se)%1;return ne}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var V=this.toRgb();return(299*V.r+587*V.g+114*V.b)/1e3},getLuminance:function(){var V,ee,j,J=this.toRgb();return ee=J.g/255,j=J.b/255,.2126*((V=J.r/255)<=.03928?V/12.92:p.pow((V+.055)/1.055,2.4))+.7152*(ee<=.03928?ee/12.92:p.pow((ee+.055)/1.055,2.4))+.0722*(j<=.03928?j/12.92:p.pow((j+.055)/1.055,2.4))},setAlpha:function(V){return this._a=S(V),this._roundA=e(100*this._a)/100,this},toHsv:function(){var V=s(this._r,this._g,this._b);return{h:360*V.h,s:V.s,v:V.v,a:this._a}},toHsvString:function(){var V=s(this._r,this._g,this._b),ee=e(360*V.h),j=e(100*V.s),J=e(100*V.v);return 1==this._a?"hsv("+ee+", "+j+"%, "+J+"%)":"hsva("+ee+", "+j+"%, "+J+"%, "+this._roundA+")"},toHsl:function(){var V=f(this._r,this._g,this._b);return{h:360*V.h,s:V.s,l:V.l,a:this._a}},toHslString:function(){var V=f(this._r,this._g,this._b),ee=e(360*V.h),j=e(100*V.s),J=e(100*V.l);return 1==this._a?"hsl("+ee+", "+j+"%, "+J+"%)":"hsla("+ee+", "+j+"%, "+J+"%, "+this._roundA+")"},toHex:function(V){return i(this._r,this._g,this._b,V)},toHexString:function(V){return"#"+this.toHex(V)},toHex8:function(V){return j=this._g,J=this._b,$=this._a,re=V,ne=[U(e(this._r).toString(16)),U(e(j).toString(16)),U(e(J).toString(16)),U(X($))],re&&ne[0].charAt(0)==ne[0].charAt(1)&&ne[1].charAt(0)==ne[1].charAt(1)&&ne[2].charAt(0)==ne[2].charAt(1)&&ne[3].charAt(0)==ne[3].charAt(1)?ne[0].charAt(0)+ne[1].charAt(0)+ne[2].charAt(0)+ne[3].charAt(0):ne.join("");var j,J,$,re,ne},toHex8String:function(V){return"#"+this.toHex8(V)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*C(this._r,255))+"%",g:e(100*C(this._g,255))+"%",b:e(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+e(100*C(this._r,255))+"%, "+e(100*C(this._g,255))+"%, "+e(100*C(this._b,255))+"%)":"rgba("+e(100*C(this._r,255))+"%, "+e(100*C(this._g,255))+"%, "+e(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(D[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(V){var ee="#"+l(this._r,this._g,this._b,this._a),j=ee,J=this._gradientType?"GradientType = 1, ":"";if(V){var $=r(V);j="#"+l($._r,$._g,$._b,$._a)}return"progid:DXImageTransform.Microsoft.gradient("+J+"startColorstr="+ee+",endColorstr="+j+")"},toString:function(V){var ee=!!V;V=V||this._format;var j=!1;return ee||!(this._a<1&&this._a>=0)||"hex"!==V&&"hex6"!==V&&"hex3"!==V&&"hex4"!==V&&"hex8"!==V&&"name"!==V?("rgb"===V&&(j=this.toRgbString()),"prgb"===V&&(j=this.toPercentageRgbString()),"hex"!==V&&"hex6"!==V||(j=this.toHexString()),"hex3"===V&&(j=this.toHexString(!0)),"hex4"===V&&(j=this.toHex8String(!0)),"hex8"===V&&(j=this.toHex8String()),"name"===V&&(j=this.toName()),"hsl"===V&&(j=this.toHslString()),"hsv"===V&&(j=this.toHsvString()),j||this.toHexString()):"name"===V&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(V,ee){var j=V.apply(null,[this].concat([].slice.call(ee)));return this._r=j._r,this._g=j._g,this._b=j._b,this.setAlpha(j._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(o,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(h,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(g,arguments)},_applyCombination:function(V,ee){return V.apply(null,[this].concat([].slice.call(ee)))},analogous:function(){return this._applyCombination(E,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(A,arguments)}},r.fromRatio=function(V,ee){if("object"==typeof V){var j={};for(var J in V)V.hasOwnProperty(J)&&(j[J]="a"===J?V[J]:G(V[J]));V=j}return r(V,ee)},r.equals=function(V,ee){return!(!V||!ee)&&r(V).toRgbString()==r(ee).toRgbString()},r.random=function(){return r.fromRatio({r:a(),g:a(),b:a()})},r.mix=function(V,ee,j){j=0===j?0:j||50;var J=r(V).toRgb(),$=r(ee).toRgb(),re=j/100;return r({r:($.r-J.r)*re+J.r,g:($.g-J.g)*re+J.g,b:($.b-J.b)*re+J.b,a:($.a-J.a)*re+J.a})},r.readability=function(V,ee){var j=r(V),J=r(ee);return(p.max(j.getLuminance(),J.getLuminance())+.05)/(p.min(j.getLuminance(),J.getLuminance())+.05)},r.isReadable=function(V,ee,j){var J,$,ne,se,ie,re=r.readability(V,ee);switch($=!1,(ne=j,"AA"!==(se=((ne=ne||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==se&&(se="AA"),"small"!==(ie=(ne.size||"small").toLowerCase())&&"large"!==ie&&(ie="small"),J={level:se,size:ie}).level+J.size){case"AAsmall":case"AAAlarge":$=re>=4.5;break;case"AAlarge":$=re>=3;break;case"AAAsmall":$=re>=7}return $},r.mostReadable=function(V,ee,j){var J,$,re,ne,se=null,ie=0;$=(j=j||{}).includeFallbackColors,re=j.level,ne=j.size;for(var ue=0;ue<ee.length;ue++)(J=r.readability(V,ee[ue]))>ie&&(ie=J,se=r(ee[ue]));return r.isReadable(V,se,{level:re,size:ne})||!$?se:(j.includeFallbackColors=!1,r.mostReadable(V,["#fff","#000"],j))};var O=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},D=r.hexNames=function(V){var ee={};for(var j in V)V.hasOwnProperty(j)&&(ee[V[j]]=j);return ee}(O);function S(V){return V=parseFloat(V),(isNaN(V)||V<0||V>1)&&(V=1),V}function C(V,ee){var J;"string"==typeof(J=V)&&-1!=J.indexOf(".")&&1===parseFloat(J)&&(V="100%");var j=function(J){return"string"==typeof J&&-1!=J.indexOf("%")}(V);return V=n(ee,t(0,parseFloat(V))),j&&(V=parseInt(V*ee,10)/100),p.abs(V-ee)<1e-6?1:V%ee/parseFloat(ee)}function z(V){return n(1,t(0,V))}function B(V){return parseInt(V,16)}function U(V){return 1==V.length?"0"+V:""+V}function G(V){return V<=1&&(V=100*V+"%"),V}function X(V){return p.round(255*parseFloat(V)).toString(16)}function Z(V){return B(V)/255}var q,W,te,R=(W="[\\s|\\(]+("+(q="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",te="[\\s|\\(]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")[,|\\s]+("+q+")\\s*\\)?",{CSS_UNIT:new RegExp(q),rgb:new RegExp("rgb"+W),rgba:new RegExp("rgba"+te),hsl:new RegExp("hsl"+W),hsla:new RegExp("hsla"+te),hsv:new RegExp("hsv"+W),hsva:new RegExp("hsva"+te),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function N(V){return!!R.CSS_UNIT.exec(V)}void 0!==Q&&Q.exports?Q.exports=r:window.tinycolor=r}(Math)},{}],313:[function(x,Q,K){"use strict";Q.exports=v,Q.exports.float32=Q.exports.float=v,Q.exports.fract32=Q.exports.fract=function(u,y){if(u.length){if(u instanceof Float32Array)return new Float32Array(u.length);y instanceof Float32Array||(y=v(u));for(var e=0,n=y.length;e<n;e++)y[e]=u[e]-y[e];return y}return v(u-v(u))};var p=new Float32Array(1);function v(u){return u.length?u instanceof Float32Array?u:new Float32Array(u):(p[0]=u,p[0])}},{}],314:[function(x,Q,K){"use strict";var p=x("parse-unit");Q.exports=e;var v=y("in",document.body);function u(n,t){var a=p(getComputedStyle(n).getPropertyValue(t));return a[0]*e(a[1],n)}function y(n,t){var a=document.createElement("div");a.style.height="128"+n,t.appendChild(a);var r=u(a,"height")/128;return t.removeChild(a),r}function e(n,t){if(!n)return null;switch(t=t||document.body,n=(n+""||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),n){case"%":return t.clientHeight/100;case"ch":case"ex":return y(n,t);case"em":return u(t,"font-size");case"rem":return u(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return v;case"cm":return v/2.54;case"mm":return v/25.4;case"pt":return v/72;case"pc":return v/6;case"px":return 1}var a=p(n);if(!isNaN(a[0])&&a[1]){var r=e(a[1],t);return"number"==typeof r?a[0]*r:null}return null}},{"parse-unit":251}],315:[function(x,Q,K){var p;p=this,function(p){"use strict";function v(l){return l}function u(l){if(null==l)return v;var c,h,m=l.scale[0],d=l.scale[1],o=l.translate[0],b=l.translate[1];return function(g,w){w||(c=h=0);var _=2,A=g.length,T=new Array(A);for(T[0]=(c+=g[0])*m+o,T[1]=(h+=g[1])*d+b;_<A;)T[_]=g[_],++_;return T}}function y(l){var c,h=u(l.transform),m=1/0,d=m,o=-m,b=-m;function g(_){(_=h(_))[0]<m&&(m=_[0]),_[0]>o&&(o=_[0]),_[1]<d&&(d=_[1]),_[1]>b&&(b=_[1])}function w(_){switch(_.type){case"GeometryCollection":_.geometries.forEach(w);break;case"Point":g(_.coordinates);break;case"MultiPoint":_.coordinates.forEach(g)}}for(c in l.arcs.forEach(function(_){for(var A,T=-1,E=_.length;++T<E;)(A=h(_[T],T))[0]<m&&(m=A[0]),A[0]>o&&(o=A[0]),A[1]<d&&(d=A[1]),A[1]>b&&(b=A[1])}),l.objects)w(l.objects[c]);return[m,d,o,b]}function e(l,c){var h=c.id,m=c.bbox,d=null==c.properties?{}:c.properties,o=n(l,c);return null==h&&null==m?{type:"Feature",properties:d,geometry:o}:null==m?{type:"Feature",id:h,properties:d,geometry:o}:{type:"Feature",id:h,bbox:m,properties:d,geometry:o}}function n(l,c){var h=u(l.transform),m=l.arcs;function d(_,A){A.length&&A.pop();for(var T=m[_<0?~_:_],E=0,k=T.length;E<k;++E)A.push(h(T[E],E));_<0&&function(O,D){for(var S,C=O.length,z=C-D;z<--C;)S=O[z],O[z++]=O[C],O[C]=S}(A,k)}function o(_){return h(_)}function b(_){for(var A=[],T=0,E=_.length;T<E;++T)d(_[T],A);return A.length<2&&A.push(A[0]),A}function g(_){for(var A=b(_);A.length<4;)A.push(A[0]);return A}function w(_){return _.map(g)}return function _(A){var T,E=A.type;switch(E){case"GeometryCollection":return{type:E,geometries:A.geometries.map(_)};case"Point":T=o(A.coordinates);break;case"MultiPoint":T=A.coordinates.map(o);break;case"LineString":T=b(A.arcs);break;case"MultiLineString":T=A.arcs.map(b);break;case"Polygon":T=w(A.arcs);break;case"MultiPolygon":T=A.arcs.map(w);break;default:return null}return{type:E,coordinates:T}}(c)}function t(l,c){var h={},m={},d={},o=[],b=-1;function g(w,_){for(var A in w){var T=w[A];delete _[T.start],delete T.start,delete T.end,T.forEach(function(E){h[E<0?~E:E]=1}),o.push(T)}}return c.forEach(function(w,_){var A,T=l.arcs[w<0?~w:w];T.length<3&&!T[1][0]&&!T[1][1]&&(A=c[++b],c[b]=w,c[_]=A)}),c.forEach(function(w){var _,A,S,C,z,B,T=(B=(z=l.arcs[(S=w)<0?~S:S])[0],l.transform?(C=[0,0],z.forEach(function(U){C[0]+=U[0],C[1]+=U[1]})):C=z[z.length-1],S<0?[C,B]:[B,C]),E=T[0],k=T[1];if(_=d[E])if(delete d[_.end],_.push(w),_.end=k,A=m[k]){delete m[A.start];var O=A===_?_:_.concat(A);m[O.start=_.start]=d[O.end=A.end]=O}else m[_.start]=d[_.end]=_;else if(_=m[k])if(delete m[_.start],_.unshift(w),_.start=E,A=d[E]){delete d[A.end];var D=A===_?_:A.concat(_);m[D.start=A.start]=d[D.end=_.end]=D}else m[_.start]=d[_.end]=_;else m[(_=[w]).start=E]=d[_.end=k]=_}),g(d,m),g(m,d),c.forEach(function(w){h[w<0?~w:w]||o.push([w])}),o}function a(l,c,h){var m,d,o;if(arguments.length>1)m=r(0,c,h);else for(d=0,m=new Array(o=l.arcs.length);d<o;++d)m[d]=d;return{type:"MultiLineString",arcs:t(l,m)}}function r(l,c,h){var m,d=[],o=[];function b(_){var A=_<0?~_:_;(o[A]||(o[A]=[])).push({i:_,g:m})}function g(_){_.forEach(b)}function w(_){_.forEach(g)}return function _(A){switch(m=A,A.type){case"GeometryCollection":A.geometries.forEach(_);break;case"LineString":g(A.arcs);break;case"MultiLineString":case"Polygon":w(A.arcs);break;case"MultiPolygon":A.arcs.forEach(w)}}(c),o.forEach(null==h?function(_){d.push(_[0].i)}:function(_){h(_[0].g,_[_.length-1].g)&&d.push(_[0].i)}),d}function f(l,c){var h={},m=[],d=[];function o(g){g.forEach(function(w){w.forEach(function(_){(h[_=_<0?~_:_]||(h[_]=[])).push(g)})}),m.push(g)}function b(g){return function(w){for(var _,A=-1,T=w.length,E=w[T-1],k=0;++A<T;)k+=(_=E)[0]*(E=w[A])[1]-_[1]*E[0];return Math.abs(k)}(n(l,{type:"Polygon",arcs:[g]}).coordinates[0])}return c.forEach(function g(w){switch(w.type){case"GeometryCollection":w.geometries.forEach(g);break;case"Polygon":o(w.arcs);break;case"MultiPolygon":w.arcs.forEach(o)}}),m.forEach(function(g){if(!g._){var w=[],_=[g];for(g._=1,d.push(w);g=_.pop();)w.push(g),g.forEach(function(A){A.forEach(function(T){h[T<0?~T:T].forEach(function(E){E._||(E._=1,_.push(E))})})})}}),m.forEach(function(g){delete g._}),{type:"MultiPolygon",arcs:d.map(function(g){var w,_=[];if(g.forEach(function(O){O.forEach(function(D){D.forEach(function(S){h[S<0?~S:S].length<2&&_.push(S)})})}),(w=(_=t(l,_)).length)>1)for(var A,T,E=1,k=b(_[0]);E<w;++E)(A=b(_[E]))>k&&(T=_[0],_[0]=_[E],_[E]=T,k=A);return _}).filter(function(g){return g.length>0})}}function s(l,c){for(var h=0,m=l.length;h<m;){var d=h+m>>>1;l[d]<c?h=d+1:m=d}return h}function i(l){if(null==l)return v;var c,h,m=l.scale[0],d=l.scale[1],o=l.translate[0],b=l.translate[1];return function(g,w){w||(c=h=0);var _=2,A=g.length,T=new Array(A),E=Math.round((g[0]-o)/m),k=Math.round((g[1]-b)/d);for(T[0]=E-c,c=E,T[1]=k-h,h=k;_<A;)T[_]=g[_],++_;return T}}p.bbox=y,p.feature=function(l,c){return"string"==typeof c&&(c=l.objects[c]),"GeometryCollection"===c.type?{type:"FeatureCollection",features:c.geometries.map(function(h){return e(l,h)})}:e(l,c)},p.merge=function(l){return n(l,f.apply(this,arguments))},p.mergeArcs=f,p.mesh=function(l){return n(l,a.apply(this,arguments))},p.meshArcs=a,p.neighbors=function(l){var c={},h=l.map(function(){return[]});function m(O,D){O.forEach(function(S){S<0&&(S=~S);var C=c[S];C?C.push(D):c[S]=[D]})}function d(O,D){O.forEach(function(S){m(S,D)})}var o={LineString:m,MultiLineString:d,Polygon:d,MultiPolygon:function(O,D){O.forEach(function(S){d(S,D)})}};for(var b in l.forEach(function O(D,S){"GeometryCollection"===D.type?D.geometries.forEach(function(C){O(C,S)}):D.type in o&&o[D.type](D.arcs,S)}),c)for(var g=c[b],w=g.length,_=0;_<w;++_)for(var A=_+1;A<w;++A){var T,E=g[_],k=g[A];(T=h[E])[b=s(T,k)]!==k&&T.splice(b,0,k),(T=h[k])[b=s(T,E)]!==E&&T.splice(b,0,E)}return h},p.quantize=function(l,c){if(l.transform)throw new Error("already quantized");if(c&&c.scale)g=l.bbox;else{if(!((h=Math.floor(c))>=2))throw new Error("n must be \u22652");var h,m=(g=l.bbox||y(l))[0],d=g[1],o=g[2],b=g[3];c={scale:[o-m?(o-m)/(h-1):1,b-d?(b-d)/(h-1):1],translate:[m,d]}}var g,w,_=i(c),A=l.objects,T={};function E(O){return _(O)}function k(O){var D;switch(O.type){case"GeometryCollection":D={type:"GeometryCollection",geometries:O.geometries.map(k)};break;case"Point":D={type:"Point",coordinates:E(O.coordinates)};break;case"MultiPoint":D={type:"MultiPoint",coordinates:O.coordinates.map(E)};break;default:return O}return null!=O.id&&(D.id=O.id),null!=O.bbox&&(D.bbox=O.bbox),null!=O.properties&&(D.properties=O.properties),D}for(w in A)T[w]=k(A[w]);return{type:"Topology",bbox:g,transform:c,objects:T,arcs:l.arcs.map(function(O){var D,S=0,C=1,z=O.length,B=new Array(z);for(B[0]=_(O[0],0);++S<z;)((D=_(O[S],S))[0]||D[1])&&(B[C++]=D);return 1===C&&(B[C++]=[0,0]),B.length=C,B})}},p.transform=u,p.untransform=i,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof K&&void 0!==Q?K:(p=p||self).topojson=p.topojson||{})},{}],316:[function(x,Q,K){"use strict";var p=x("../prototype/is");Q.exports=function(v){if("function"!=typeof v||!hasOwnProperty.call(v,"length"))return!1;try{if("number"!=typeof v.length||"function"!=typeof v.call||"function"!=typeof v.apply)return!1}catch(u){return!1}return!p(v)}},{"../prototype/is":323}],317:[function(x,Q,K){"use strict";var p=x("../value/is"),v=x("../object/is"),u=x("../string/coerce"),y=x("./to-short-string"),e=function(n,t){return n.replace("%v",y(t))};Q.exports=function(n,t,a){if(!v(a))throw new TypeError(e(t,n));if(!p(n)){if("default"in a)return a.default;if(a.isOptional)return null}var r=u(a.errorMessage);throw p(r)||(r=t),new TypeError(e(r,n))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(x,Q,K){"use strict";Q.exports=function(p){try{return p.toString()}catch(v){try{return String(p)}catch(u){return null}}}},{}],319:[function(x,Q,K){"use strict";var p=x("./safe-to-string"),v=/[\n\r\u2028\u2029]/g;Q.exports=function(u){var y=p(u);return null===y?"<Non-coercible to string value>":(y.length>100&&(y=y.slice(0,99)+"\u2026"),y=y.replace(v,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":318}],320:[function(x,Q,K){"use strict";var p=x("../value/is"),v={object:!0,function:!0,undefined:!0};Q.exports=function(u){return!!p(u)&&hasOwnProperty.call(v,typeof u)}},{"../value/is":326}],321:[function(x,Q,K){"use strict";var p=x("../lib/resolve-exception"),v=x("./is");Q.exports=function(u){return v(u)?u:p(u,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(x,Q,K){"use strict";var p=x("../function/is"),v=/^\s*class[\s{/}]/,u=Function.prototype.toString;Q.exports=function(y){return!!p(y)&&!v.test(u.call(y))}},{"../function/is":316}],323:[function(x,Q,K){"use strict";var p=x("../object/is");Q.exports=function(v){if(!p(v))return!1;try{return!!v.constructor&&v.constructor.prototype===v}catch(u){return!1}}},{"../object/is":320}],324:[function(x,Q,K){"use strict";var p=x("../value/is"),v=x("../object/is"),u=Object.prototype.toString;Q.exports=function(y){if(!p(y))return null;if(v(y)){var e=y.toString;if("function"!=typeof e||e===u)return null}try{return""+y}catch(n){return null}}},{"../object/is":320,"../value/is":326}],325:[function(x,Q,K){"use strict";var p=x("../lib/resolve-exception"),v=x("./is");Q.exports=function(u){return v(u)?u:p(u,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(x,Q,K){"use strict";Q.exports=function(p){return null!=p}},{}],327:[function(x,Q,K){(function(p){(function(){"use strict";var v=x("bit-twiddle"),u=x("dup"),y=x("buffer").Buffer;p.__TYPEDARRAY_POOL||(p.__TYPEDARRAY_POOL={UINT8:u([32,0]),UINT16:u([32,0]),UINT32:u([32,0]),BIGUINT64:u([32,0]),INT8:u([32,0]),INT16:u([32,0]),INT32:u([32,0]),BIGINT64:u([32,0]),FLOAT:u([32,0]),DOUBLE:u([32,0]),DATA:u([32,0]),UINT8C:u([32,0]),BUFFER:u([32,0])});var e="undefined"!=typeof Uint8ClampedArray,n="undefined"!=typeof BigUint64Array,t="undefined"!=typeof BigInt64Array,a=p.__TYPEDARRAY_POOL;a.UINT8C||(a.UINT8C=u([32,0])),a.BIGUINT64||(a.BIGUINT64=u([32,0])),a.BIGINT64||(a.BIGINT64=u([32,0])),a.BUFFER||(a.BUFFER=u([32,0]));var r=a.DATA,f=a.BUFFER;function s(k){if(k){var D=v.log2(k.length||k.byteLength);r[D].push(k)}}function i(k){k=v.nextPow2(k);var O=v.log2(k),D=r[O];return D.length>0?D.pop():new ArrayBuffer(k)}function l(k){return new Uint8Array(i(k),0,k)}function c(k){return new Uint16Array(i(2*k),0,k)}function h(k){return new Uint32Array(i(4*k),0,k)}function m(k){return new Int8Array(i(k),0,k)}function d(k){return new Int16Array(i(2*k),0,k)}function o(k){return new Int32Array(i(4*k),0,k)}function b(k){return new Float32Array(i(4*k),0,k)}function g(k){return new Float64Array(i(8*k),0,k)}function w(k){return e?new Uint8ClampedArray(i(k),0,k):l(k)}function _(k){return n?new BigUint64Array(i(8*k),0,k):null}function A(k){return t?new BigInt64Array(i(8*k),0,k):null}function T(k){return new DataView(i(k),0,k)}function E(k){k=v.nextPow2(k);var O=v.log2(k),D=f[O];return D.length>0?D.pop():new y(k)}K.free=function(k){if(y.isBuffer(k))f[v.log2(k.length)].push(k);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(k)&&(k=k.buffer),!k)return;var D=0|v.log2(k.length||k.byteLength);r[D].push(k)}},K.freeUint8=K.freeUint16=K.freeUint32=K.freeBigUint64=K.freeInt8=K.freeInt16=K.freeInt32=K.freeBigInt64=K.freeFloat32=K.freeFloat=K.freeFloat64=K.freeDouble=K.freeUint8Clamped=K.freeDataView=function(k){s(k.buffer)},K.freeArrayBuffer=s,K.freeBuffer=function(k){f[v.log2(k.length)].push(k)},K.malloc=function(k,O){if(void 0===O||"arraybuffer"===O)return i(k);switch(O){case"uint8":return l(k);case"uint16":return c(k);case"uint32":return h(k);case"int8":return m(k);case"int16":return d(k);case"int32":return o(k);case"float":case"float32":return b(k);case"double":case"float64":return g(k);case"uint8_clamped":return w(k);case"bigint64":return A(k);case"biguint64":return _(k);case"buffer":return E(k);case"data":case"dataview":return T(k);default:return null}return null},K.mallocArrayBuffer=i,K.mallocUint8=l,K.mallocUint16=c,K.mallocUint32=h,K.mallocInt8=m,K.mallocInt16=d,K.mallocInt32=o,K.mallocFloat32=K.mallocFloat=b,K.mallocFloat64=K.mallocDouble=g,K.mallocUint8Clamped=w,K.mallocBigUint64=_,K.mallocBigInt64=A,K.mallocDataView=T,K.mallocBuffer=E,K.clearCache=function(){for(var k=0;k<32;++k)a.UINT8[k].length=0,a.UINT16[k].length=0,a.UINT32[k].length=0,a.INT8[k].length=0,a.INT16[k].length=0,a.INT32[k].length=0,a.FLOAT[k].length=0,a.DOUBLE[k].length=0,a.BIGUINT64[k].length=0,a.BIGINT64[k].length=0,a.UINT8C[k].length=0,r[k].length=0,f[k].length=0}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(x,Q,K){var p=/[\'\"]/;Q.exports=function(v){return v?(p.test(v.charAt(0))&&(v=v.substr(1)),p.test(v.charAt(v.length-1))&&(v=v.substr(0,v.length-1)),v):""}},{}],329:[function(x,Q,K){"use strict";Q.exports=function(p,v,u){Array.isArray(u)||(u=[].slice.call(arguments,2));for(var y=0,e=u.length;y<e;y++){var n=u[y];for(var t in n)if((void 0===v[t]||Array.isArray(v[t])||p[t]!==v[t])&&t in v){var a;if(!0===n[t])a=v[t];else if(!1===n[t]||"function"==typeof n[t]&&void 0===(a=n[t](v[t],p,v)))continue;p[t]=a}}return p}},{}],330:[function(x,Q,K){(function(p){(function(){function v(u){try{if(!p.localStorage)return!1}catch(e){return!1}var y=p.localStorage[u];return null!=y&&"true"===String(y).toLowerCase()}Q.exports=function(u,y){if(v("noDeprecation"))return u;var e=!1;return function(){if(!e){if(v("throwDeprecation"))throw new Error(y);v("traceDeprecation")?console.trace(y):console.warn(y),e=!0}return u.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],331:[function(x,Q,K){var p=x("get-canvas-context");Q.exports=function(v){return p("webgl",v)}},{"get-canvas-context":194}],332:[function(x,Q,K){var p=x("../main"),v=x("object-assign"),u=p.instance();function y(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}v(y.prototype=new p.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(s,i){if("string"==typeof s){var l=s.match(n);return l?l[0]:""}var c=this._validateYear(s),h=s.month(),m=""+this.toChineseMonth(c,h);return i&&m.length<2&&(m="0"+m),this.isIntercalaryMonth(c,h)&&(m+="i"),m},monthNames:function(s){if("string"==typeof s){var i=s.match(t);return i?i[0]:""}var l=this._validateYear(s),c=s.month(),h=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(l,c)-1];return this.isIntercalaryMonth(l,c)&&(h="\u95f0"+h),h},monthNamesShort:function(s){if("string"==typeof s){var i=s.match(a);return i?i[0]:""}var l=this._validateYear(s),c=s.month(),h=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(l,c)-1];return this.isIntercalaryMonth(l,c)&&(h="\u95f0"+h),h},parseMonth:function(s,i){s=this._validateYear(s);var l,c=parseInt(i);if(isNaN(c))"\u95f0"===i[0]&&(l=!0,i=i.substring(1)),"\u6708"===i[i.length-1]&&(i=i.substring(0,i.length-1)),c=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(i);else{var h=i[i.length-1];l="i"===h||"I"===h}return this.toMonthIndex(s,c,l)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(s,i){if(s.year&&(s=s.year()),"number"!=typeof s||s<1888||s>2111)throw i.replace(/\{0\}/,this.local.name);return s},toMonthIndex:function(s,i,l){var c=this.intercalaryMonth(s);if(l&&i!==c||i<1||i>12)throw p.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?!l&&i<=c?i-1:i:i-1},toChineseMonth:function(s,i){s.year&&(i=(s=s.year()).month());var l=this.intercalaryMonth(s);if(i<0||i>(l?12:11))throw p.local.invalidMonth.replace(/\{0\}/,this.local.name);return l?i<l?i+1:i:i+1},intercalaryMonth:function(s){return s=this._validateYear(s),r[s-r[0]]>>13},isIntercalaryMonth:function(s,i){s.year&&(i=(s=s.year()).month());var l=this.intercalaryMonth(s);return!!l&&l===i},leapYear:function(s){return 0!==this.intercalaryMonth(s)},weekOfYear:function(s,i,l){var c,h=this._validateYear(s,p.local.invalidyear),m=f[h-f[0]];(c=u.newDate(m>>9&4095,m>>5&15,31&m)).add(4-(c.dayOfWeek()||7),"d");var g=this.toJD(s,i,l)-c.toJD();return 1+Math.floor(g/7)},monthsInYear:function(s){return this.leapYear(s)?13:12},daysInMonth:function(s,i){s.year&&(i=s.month(),s=s.year()),s=this._validateYear(s);var l=r[s-r[0]];if(i>(l>>13?12:11))throw p.local.invalidMonth.replace(/\{0\}/,this.local.name);return l&1<<12-i?30:29},weekDay:function(s,i,l){return(this.dayOfWeek(s,i,l)||7)<6},toJD:function(s,i,l){var c=this._validate(s,m,l,p.local.invalidDate);s=this._validateYear(c.year()),i=c.month(),l=c.day();var h=this.isIntercalaryMonth(s,i),m=this.toChineseMonth(s,i),d=function(o,b,g,w,_){var A,T,E;if("object"==typeof o)T=o,A=b||{};else{var k;if(!("number"==typeof o&&o>=1888&&o<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof b&&b>=1&&b<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof g&&g>=1&&g<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof w?(k=!1,A=w):(k=!!w,A={}),T={year:o,month:b,day:g,isIntercalary:k}}E=T.day-1;var O,D=r[T.year-r[0]],S=D>>13;O=S&&(T.month>S||T.isIntercalary)?T.month:T.month-1;for(var C=0;C<O;C++)E+=D&1<<12-C?30:29;var z=f[T.year-f[0]],B=new Date(z>>9&4095,(z>>5&15)-1,(31&z)+E);return A.year=B.getFullYear(),A.month=1+B.getMonth(),A.day=B.getDate(),A}(s,m,l,h);return u.toJD(d.year,d.month,d.day)},fromJD:function(s){var i=u.fromJD(s),l=function(h,m,d,o){var b,g;if("object"==typeof h)b=h,g=m||{};else{if(!("number"==typeof h&&h>=1888&&h<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof m&&m>=1&&m<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof d&&d>=1&&d<=31))throw new Error("Solar day outside range 1 - 31");b={year:h,month:m,day:d},g={}}var w=f[b.year-f[0]];g.year=(b.year<<9|b.month<<5|b.day)>=w?b.year:b.year-1,w=f[g.year-f[0]];var A,T=new Date(w>>9&4095,(w>>5&15)-1,31&w),E=new Date(b.year,b.month-1,b.day);A=Math.round((E-T)/864e5);var k,O=r[g.year-r[0]];for(k=0;k<13;k++){var D=O&1<<12-k?30:29;if(A<D)break;A-=D}var S=O>>13;return!S||k<S?(g.isIntercalary=!1,g.month=1+k):k===S?(g.isIntercalary=!0,g.month=k):(g.isIntercalary=!1,g.month=k),g.day=1+A,g}(i.year(),i.month(),i.day()),c=this.toMonthIndex(l.year,l.month,l.isIntercalary);return this.newDate(l.year,c,l.day)},fromString:function(s){var i=s.match(e),l=this._validateYear(+i[1]),m=this.toMonthIndex(l,+i[2],!!i[3]);return this.newDate(l,m,+i[4])},add:function(s,i,l){var c=s.year(),h=s.month(),m=this.isIntercalaryMonth(c,h),d=this.toChineseMonth(c,h),o=Object.getPrototypeOf(y.prototype).add.call(this,s,i,l);if("y"===l){var b=o.year(),g=o.month(),w=this.isIntercalaryMonth(b,d),_=this.toMonthIndex(b,d,!(!m||!w));_!==g&&o.month(_)}return o}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,n=/^\d?\d[iI]?/m,t=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,a=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;p.calendars.chinese=y;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],f=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":346,"object-assign":247}],333:[function(x,Q,K){var p=x("../main");function u(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x("object-assign")(u.prototype=new p.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var e=this._validate(y,this.minMonth,this.minDay,p.local.invalidYear);return(y=e.year()+(e.year()<0?1:0))%4==3||y%4==-1},monthsInYear:function(y){return this._validate(y,this.minMonth,this.minDay,p.local.invalidYear||p.regionalOptions[""].invalidYear),13},weekOfYear:function(y,e,n){var t=this.newDate(y,e,n);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(y,e){var n=this._validate(y,e,this.minDay,p.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(y,e,n){return(this.dayOfWeek(y,e,n)||7)<6},toJD:function(y,e,n){var t=this._validate(y,e,n,p.local.invalidDate);return(y=t.year())<0&&y++,t.day()+30*(t.month()-1)+365*(y-1)+Math.floor(y/4)+this.jdEpoch-1},fromJD:function(y){var e=Math.floor(y)+.5-this.jdEpoch,n=Math.floor((e-Math.floor((e+366)/1461))/365)+1;n<=0&&n--,e=Math.floor(y)+.5-this.newDate(n,1,1).toJD();var t=Math.floor(e/30)+1;return this.newDate(n,t,e-30*(t-1)+1)}}),p.calendars.coptic=u},{"../main":346,"object-assign":247}],334:[function(x,Q,K){var p=x("../main");function u(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x("object-assign")(u.prototype=new p.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,p.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,p.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,p.local.invalidYear),400},weekOfYear:function(e,n,t){var a=this.newDate(e,n,t);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/8)+1},daysInMonth:function(e,n){var t=this._validate(e,n,this.minDay,p.local.invalidMonth);return this.daysPerMonth[t.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,n,t){return(this._validate(e,n,t,p.local.invalidDate).day()+1)%8},weekDay:function(e,n,t){var a=this.dayOfWeek(e,n,t);return a>=2&&a<=6},extraInfo:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate);return{century:y[Math.floor((a.year()-1)/100)+1]||""}},toJD:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate);return e=a.year()+(a.year()<0?1:0),n=a.month(),(t=a.day())+(n>1?16:0)+(n>2?32*(n-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var n=Math.floor(e/400)+1;e-=400*(n-1),e+=e>15?16:0;var t=Math.floor(e/32)+1;return this.newDate(n<=0?n-1:n,t,e-32*(t-1)+1)}});var y={20:"Fruitbat",21:"Anchovy"};p.calendars.discworld=u},{"../main":346,"object-assign":247}],335:[function(x,Q,K){var p=x("../main");function u(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x("object-assign")(u.prototype=new p.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var e=this._validate(y,this.minMonth,this.minDay,p.local.invalidYear);return(y=e.year()+(e.year()<0?1:0))%4==3||y%4==-1},monthsInYear:function(y){return this._validate(y,this.minMonth,this.minDay,p.local.invalidYear||p.regionalOptions[""].invalidYear),13},weekOfYear:function(y,e,n){var t=this.newDate(y,e,n);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(y,e){var n=this._validate(y,e,this.minDay,p.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(y,e,n){return(this.dayOfWeek(y,e,n)||7)<6},toJD:function(y,e,n){var t=this._validate(y,e,n,p.local.invalidDate);return(y=t.year())<0&&y++,t.day()+30*(t.month()-1)+365*(y-1)+Math.floor(y/4)+this.jdEpoch-1},fromJD:function(y){var e=Math.floor(y)+.5-this.jdEpoch,n=Math.floor((e-Math.floor((e+366)/1461))/365)+1;n<=0&&n--,e=Math.floor(y)+.5-this.newDate(n,1,1).toJD();var t=Math.floor(e/30)+1;return this.newDate(n,t,e-30*(t-1)+1)}}),p.calendars.ethiopian=u},{"../main":346,"object-assign":247}],336:[function(x,Q,K){var p=x("../main");function u(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function y(e,n){return e-n*Math.floor(e/n)}x("object-assign")(u.prototype=new p.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return this._leapYear(n.year())},_leapYear:function(e){return y(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,p.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,n,t){var a=this.newDate(e,n,t);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,n){return e.year&&(n=e.month(),e=e.year()),this._validate(e,n,this.minDay,p.local.invalidMonth),12===n&&this.leapYear(e)||8===n&&5===y(this.daysInYear(e),10)?30:9===n&&3===y(this.daysInYear(e),10)?29:this.daysPerMonth[n-1]},weekDay:function(e,n,t){return 6!==this.dayOfWeek(e,n,t)},extraInfo:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate);return{yearType:(this.leapYear(a)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(a)%10-3]}},toJD:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate);e=a.year(),n=a.month(),t=a.day();var r=e<=0?e+1:e,f=this.jdEpoch+this._delay1(r)+this._delay2(r)+t+1;if(n<7){for(var s=7;s<=this.monthsInYear(e);s++)f+=this.daysInMonth(e,s);for(s=1;s<n;s++)f+=this.daysInMonth(e,s)}else for(s=7;s<n;s++)f+=this.daysInMonth(e,s);return f},_delay1:function(e){var n=Math.floor((235*e-234)/19),a=29*n+Math.floor((12084+13753*n)/25920);return y(3*(a+1),7)<3&&a++,a},_delay2:function(e){var n=this._delay1(e-1),t=this._delay1(e);return this._delay1(e+1)-t==356?2:t-n==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var n=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===n?1:n+1,7,1);)n++;for(var t=e<this.toJD(n,1,1)?7:1;e>this.toJD(n,t,this.daysInMonth(n,t));)t++;var a=e-this.toJD(n,t,1)+1;return this.newDate(n,t,a)}}),p.calendars.hebrew=u},{"../main":346,"object-assign":247}],337:[function(x,Q,K){var p=x("../main");function u(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x("object-assign")(u.prototype=new p.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(y){return(11*this._validate(y,this.minMonth,this.minDay,p.local.invalidYear).year()+14)%30<11},weekOfYear:function(y,e,n){var t=this.newDate(y,e,n);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(y){return this.leapYear(y)?355:354},daysInMonth:function(y,e){var n=this._validate(y,e,this.minDay,p.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(y,e,n){return 5!==this.dayOfWeek(y,e,n)},toJD:function(y,e,n){var t=this._validate(y,e,n,p.local.invalidDate);return y=t.year(),e=t.month(),y=y<=0?y+1:y,(n=t.day())+Math.ceil(29.5*(e-1))+354*(y-1)+Math.floor((3+11*y)/30)+this.jdEpoch-1},fromJD:function(y){y=Math.floor(y)+.5;var e=Math.floor((30*(y-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var n=Math.min(12,Math.ceil((y-29-this.toJD(e,1,1))/29.5)+1),t=y-this.toJD(e,n,1)+1;return this.newDate(e,n,t)}}),p.calendars.islamic=u},{"../main":346,"object-assign":247}],338:[function(x,Q,K){var p=x("../main");function u(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x("object-assign")(u.prototype=new p.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var e=this._validate(y,this.minMonth,this.minDay,p.local.invalidYear);return(y=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(y,e,n){var t=this.newDate(y,e,n);return t.add(4-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(y,e){var n=this._validate(y,e,this.minDay,p.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(y,e,n){return(this.dayOfWeek(y,e,n)||7)<6},toJD:function(y,e,n){var t=this._validate(y,e,n,p.local.invalidDate);return y=t.year(),e=t.month(),n=t.day(),y<0&&y++,e<=2&&(y--,e+=12),Math.floor(365.25*(y+4716))+Math.floor(30.6001*(e+1))+n-1524.5},fromJD:function(y){var e=Math.floor(y+.5)+1524,n=Math.floor((e-122.1)/365.25),t=Math.floor(365.25*n),a=Math.floor((e-t)/30.6001),r=a-Math.floor(a<14?1:13),f=n-Math.floor(r>2?4716:4715),s=e-t-Math.floor(30.6001*a);return f<=0&&f--,this.newDate(f,r,s)}}),p.calendars.julian=u},{"../main":346,"object-assign":247}],339:[function(x,Q,K){var p=x("../main");function u(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}function y(n,t){return n-t*Math.floor(n/t)}function e(n,t){return y(n-1,t)+1}x("object-assign")(u.prototype=new p.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(n){return this._validate(n,this.minMonth,this.minDay,p.local.invalidYear),!1},formatYear:function(n){n=this._validate(n,this.minMonth,this.minDay,p.local.invalidYear).year();var t=Math.floor(n/400);return n%=400,n+=n<0?400:0,t+"."+Math.floor(n/20)+"."+n%20},forYear:function(n){if((n=n.split(".")).length<3)throw"Invalid Mayan year";for(var t=0,a=0;a<n.length;a++){var r=parseInt(n[a],10);if(Math.abs(r)>19||a>0&&r<0)throw"Invalid Mayan year";t=20*t+r}return t},monthsInYear:function(n){return this._validate(n,this.minMonth,this.minDay,p.local.invalidYear),18},weekOfYear:function(n,t,a){return this._validate(n,t,a,p.local.invalidDate),0},daysInYear:function(n){return this._validate(n,this.minMonth,this.minDay,p.local.invalidYear),360},daysInMonth:function(n,t){return this._validate(n,t,this.minDay,p.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(n,t,a){return this._validate(n,t,a,p.local.invalidDate).day()},weekDay:function(n,t,a){return this._validate(n,t,a,p.local.invalidDate),!0},extraInfo:function(n,t,a){var r=this._validate(n,t,a,p.local.invalidDate).toJD(),f=this._toHaab(r),s=this._toTzolkin(r);return{haabMonthName:this.local.haabMonths[f[0]-1],haabMonth:f[0],haabDay:f[1],tzolkinDayName:this.local.tzolkinMonths[s[0]-1],tzolkinDay:s[0],tzolkinTrecena:s[1]}},_toHaab:function(n){var t=y(8+(n-=this.jdEpoch)+340,365);return[Math.floor(t/20)+1,y(t,20)]},_toTzolkin:function(n){return[e(20+(n-=this.jdEpoch),20),e(n+4,13)]},toJD:function(n,t,a){var r=this._validate(n,t,a,p.local.invalidDate);return r.day()+20*r.month()+360*r.year()+this.jdEpoch},fromJD:function(n){n=Math.floor(n)+.5-this.jdEpoch;var t=Math.floor(n/360);n%=360,n+=n<0?360:0;var a=Math.floor(n/20);return this.newDate(t,a,n%20)}}),p.calendars.mayan=u},{"../main":346,"object-assign":247}],340:[function(x,Q,K){var p=x("../main"),v=x("object-assign");function u(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}u.prototype=new p.baseCalendar;var y=p.instance("gregorian");v(u.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear||p.regionalOptions[""].invalidYear);return y.leapYear(n.year()+(n.year()<1?1:0)+1469)},weekOfYear:function(e,n,t){var a=this.newDate(e,n,t);return a.add(1-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,n){var t=this._validate(e,n,this.minDay,p.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,n,t){return(this.dayOfWeek(e,n,t)||7)<6},toJD:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidMonth);(e=a.year())<0&&e++;for(var r=a.day(),f=1;f<a.month();f++)r+=this.daysPerMonth[f-1];return r+y.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var n=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(n+1,1,1);)n++;for(var t=e-Math.floor(this.toJD(n,1,1)+.5)+1,a=1;t>this.daysInMonth(n,a);)t-=this.daysInMonth(n,a),a++;return this.newDate(n,a,t)}}),p.calendars.nanakshahi=u},{"../main":346,"object-assign":247}],341:[function(x,Q,K){var p=x("../main");function u(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x("object-assign")(u.prototype=new p.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(y){return this.daysInYear(y)!==this.daysPerYear},weekOfYear:function(y,e,n){var t=this.newDate(y,e,n);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(y){if(y=this._validate(y,this.minMonth,this.minDay,p.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[y])return this.daysPerYear;for(var e=0,n=this.minMonth;n<=12;n++)e+=this.NEPALI_CALENDAR_DATA[y][n];return e},daysInMonth:function(y,e){return y.year&&(e=y.month(),y=y.year()),this._validate(y,e,this.minDay,p.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[y]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[y][e]},weekDay:function(y,e,n){return 6!==this.dayOfWeek(y,e,n)},toJD:function(y,e,n){var t=this._validate(y,e,n,p.local.invalidDate);y=t.year(),e=t.month(),n=t.day();var a=p.instance(),r=0,f=e,s=y;this._createMissingCalendarData(y);var i=y-(f>9||9===f&&n>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(9!==e&&(r=n,f--);9!==f;)f<=0&&(f=12,s--),r+=this.NEPALI_CALENDAR_DATA[s][f],f--;return 9===e?(r+=n-this.NEPALI_CALENDAR_DATA[s][0])<0&&(r+=a.daysInYear(i)):r+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],a.newDate(i,1,1).add(r,"d").toJD()},fromJD:function(y){var e=p.instance().fromJD(y),n=e.year(),t=e.dayOfYear(),a=n+56;this._createMissingCalendarData(a);for(var r=9,s=this.NEPALI_CALENDAR_DATA[a][r]-this.NEPALI_CALENDAR_DATA[a][0]+1;t>s;)++r>12&&(r=1,a++),s+=this.NEPALI_CALENDAR_DATA[a][r];return this.newDate(a,r,this.NEPALI_CALENDAR_DATA[a][r]-(s-t))},_createMissingCalendarData:function(y){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var n=y-1;n<y+2;n++)void 0===this.NEPALI_CALENDAR_DATA[n]&&(this.NEPALI_CALENDAR_DATA[n]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),p.calendars.nepali=u},{"../main":346,"object-assign":247}],342:[function(x,Q,K){var p=x("../main");function u(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function y(e,n){return e-n*Math.floor(e/n)}x("object-assign")(u.prototype=new p.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return 682*((n.year()-(n.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,n,t){var a=this.newDate(e,n,t);return a.add(-(a.dayOfWeek()+1)%7,"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,n){var t=this._validate(e,n,this.minDay,p.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,n,t){return 5!==this.dayOfWeek(e,n,t)},toJD:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate);e=a.year(),n=a.month(),t=a.day();var r=e-(e>=0?474:473),f=474+y(r,2820);return t+(n<=7?31*(n-1):30*(n-1)+6)+Math.floor((682*f-110)/2816)+365*(f-1)+1029983*Math.floor(r/2820)+this.jdEpoch-1},fromJD:function(e){var n=(e=Math.floor(e)+.5)-this.toJD(475,1,1),t=Math.floor(n/1029983),a=y(n,1029983),r=2820;if(1029982!==a){var f=Math.floor(a/366),s=y(a,366);r=Math.floor((2134*f+2816*s+2815)/1028522)+f+1}var i=r+2820*t+474,l=e-this.toJD(i=i<=0?i-1:i,1,1)+1,c=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),h=e-this.toJD(i,c,1)+1;return this.newDate(i,c,h)}}),p.calendars.persian=u,p.calendars.jalali=u},{"../main":346,"object-assign":247}],343:[function(x,Q,K){var p=x("../main"),v=x("object-assign"),u=p.instance();function y(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}v(y.prototype=new p.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return e=this._t2gYear(n.year()),u.leapYear(e)},weekOfYear:function(e,n,t){var a=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return e=this._t2gYear(a.year()),u.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,n){var t=this._validate(e,n,this.minDay,p.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,n,t){return(this.dayOfWeek(e,n,t)||7)<6},toJD:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate);return e=this._t2gYear(a.year()),u.toJD(e,a.month(),a.day())},fromJD:function(e){var n=u.fromJD(e),t=this._g2tYear(n.year());return this.newDate(t,n.month(),n.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),p.calendars.taiwan=y},{"../main":346,"object-assign":247}],344:[function(x,Q,K){var p=x("../main"),v=x("object-assign"),u=p.instance();function y(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}v(y.prototype=new p.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return e=this._t2gYear(n.year()),u.leapYear(e)},weekOfYear:function(e,n,t){var a=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return e=this._t2gYear(a.year()),u.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,n){var t=this._validate(e,n,this.minDay,p.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,n,t){return(this.dayOfWeek(e,n,t)||7)<6},toJD:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate);return e=this._t2gYear(a.year()),u.toJD(e,a.month(),a.day())},fromJD:function(e){var n=u.fromJD(e),t=this._g2tYear(n.year());return this.newDate(t,n.month(),n.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),p.calendars.thai=y},{"../main":346,"object-assign":247}],345:[function(x,Q,K){var p=x("../main");function u(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x("object-assign")(u.prototype=new p.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return 355===this.daysInYear(n.year())},weekOfYear:function(e,n,t){var a=this.newDate(e,n,t);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var n=0,t=1;t<=12;t++)n+=this.daysInMonth(e,t);return n},daysInMonth:function(e,n){for(var t=this._validate(e,n,this.minDay,p.local.invalidMonth).toJD()-24e5+.5,a=0,r=0;r<y.length;r++){if(y[r]>t)return y[a]-y[a-1];a++}return 30},weekDay:function(e,n,t){return 5!==this.dayOfWeek(e,n,t)},toJD:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate),r=12*(a.year()-1)+a.month()-15292;return a.day()+y[r-1]-1+24e5-.5},fromJD:function(e){for(var n=e-24e5+.5,t=0,a=0;a<y.length&&!(y[a]>n);a++)t++;var r=t+15292,f=Math.floor((r-1)/12);return this.newDate(f+1,r-12*f,n-y[t-1]+1)},isValid:function(e,n,t){var a=p.baseCalendar.prototype.isValid.apply(this,arguments);return a&&(a=(e=null!=e.year?e.year:e)>=1276&&e<=1500),a},_validate:function(e,n,t,a){var r=p.baseCalendar.prototype._validate.apply(this,arguments);if(r.year<1276||r.year>1500)throw a.replace(/\{0\}/,this.local.name);return r}}),p.calendars.ummalqura=u;var y=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(x,Q,K){var p=x("object-assign");function v(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function u(a,r,f,s){if(this._calendar=a,this._year=r,this._month=f,this._day=s,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(t.local.invalidDate||t.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function y(a,r){return"000000".substring(0,r-(a=""+a).length)+a}function e(){this.shortYearCutoff="+10"}function n(a){this.local=this.regionalOptions[a]||this.regionalOptions[""]}p(v.prototype,{instance:function(a,r){a=(a||"gregorian").toLowerCase();var f=this._localCals[a+"-"+(r=r||"")];if(!f&&this.calendars[a]&&(f=new this.calendars[a](r),this._localCals[a+"-"+r]=f),!f)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,a);return f},newDate:function(a,r,f,s,i){return(s=(null!=a&&a.year?a.calendar():"string"==typeof s?this.instance(s,i):s)||this.instance()).newDate(a,r,f)},substituteDigits:function(a){return function(r){return(r+"").replace(/[0-9]/g,function(f){return a[f]})}},substituteChineseDigits:function(a,r){return function(f){for(var s="",i=0;f>0;){var l=f%10;s=(0===l?"":a[l]+r[i])+s,i++,f=Math.floor(f/10)}return 0===s.indexOf(a[1]+r[1])&&(s=s.substr(1)),s||a[0]}}}),p(u.prototype,{newDate:function(a,r,f){return this._calendar.newDate(null==a?this:a,r,f)},year:function(a){return 0===arguments.length?this._year:this.set(a,"y")},month:function(a){return 0===arguments.length?this._month:this.set(a,"m")},day:function(a){return 0===arguments.length?this._day:this.set(a,"d")},date:function(a,r,f){if(!this._calendar.isValid(a,r,f))throw(t.local.invalidDate||t.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=a,this._month=r,this._day=f,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(a,r){return this._calendar.add(this,a,r)},set:function(a,r){return this._calendar.set(this,a,r)},compareTo:function(a){if(this._calendar.name!==a._calendar.name)throw(t.local.differentCalendars||t.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,a._calendar.local.name);var r=this._year!==a._year?this._year-a._year:this._month!==a._month?this.monthOfYear()-a.monthOfYear():this._day-a._day;return 0===r?0:r<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(a){return this._calendar.fromJD(a)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(a){return this._calendar.fromJSDate(a)},toString:function(){return(this.year()<0?"-":"")+y(Math.abs(this.year()),4)+"-"+y(this.month(),2)+"-"+y(this.day(),2)}}),p(e.prototype,{_validateLevel:0,newDate:function(a,r,f){return null==a?this.today():(a.year&&(this._validate(a,r,f,t.local.invalidDate||t.regionalOptions[""].invalidDate),f=a.day(),r=a.month(),a=a.year()),new u(this,a,r,f))},today:function(){return this.fromJSDate(new Date)},epoch:function(a){return this._validate(a,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(a){var r=this._validate(a,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear);return(r.year()<0?"-":"")+y(Math.abs(r.year()),4)},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear),12},monthOfYear:function(a,r){var f=this._validate(a,r,this.minDay,t.local.invalidMonth||t.regionalOptions[""].invalidMonth);return(f.month()+this.monthsInYear(f)-this.firstMonth)%this.monthsInYear(f)+this.minMonth},fromMonthOfYear:function(a,r){var f=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(a)+this.minMonth;return this._validate(a,f,this.minDay,t.local.invalidMonth||t.regionalOptions[""].invalidMonth),f},daysInYear:function(a){var r=this._validate(a,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear);return this.leapYear(r)?366:365},dayOfYear:function(a,r,f){var s=this._validate(a,r,f,t.local.invalidDate||t.regionalOptions[""].invalidDate);return s.toJD()-this.newDate(s.year(),this.fromMonthOfYear(s.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(a,r,f){var s=this._validate(a,r,f,t.local.invalidDate||t.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(s))+2)%this.daysInWeek()},extraInfo:function(a,r,f){return this._validate(a,r,f,t.local.invalidDate||t.regionalOptions[""].invalidDate),{}},add:function(a,r,f){return this._validate(a,this.minMonth,this.minDay,t.local.invalidDate||t.regionalOptions[""].invalidDate),this._correctAdd(a,this._add(a,r,f),r,f)},_add:function(a,r,f){if(this._validateLevel++,"d"===f||"w"===f){var s=a.toJD()+r*("w"===f?this.daysInWeek():1),i=a.calendar().fromJD(s);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{var l=a.year()+("y"===f?r:0),c=a.monthOfYear()+("m"===f?r:0);i=a.day(),"y"===f?(a.month()!==this.fromMonthOfYear(l,c)&&(c=this.newDate(l,a.month(),this.minDay).monthOfYear()),c=Math.min(c,this.monthsInYear(l)),i=Math.min(i,this.daysInMonth(l,this.fromMonthOfYear(l,c)))):"m"===f&&(function(m){for(;c<m.minMonth;)l--,c+=m.monthsInYear(l);for(var d=m.monthsInYear(l);c>d-1+m.minMonth;)l++,c-=d,d=m.monthsInYear(l)}(this),i=Math.min(i,this.daysInMonth(l,this.fromMonthOfYear(l,c))));var h=[l,this.fromMonthOfYear(l,c),i];return this._validateLevel--,h}catch(m){throw this._validateLevel--,m}},_correctAdd:function(a,r,f,s){if(!(this.hasYearZero||"y"!==s&&"m"!==s||0!==r[0]&&a.year()>0==r[0]>0)){var i={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s];r=this._add(a,f*i[0]+(f<0?-1:1)*i[1],i[2])}return a.date(r[0],r[1],r[2])},set:function(a,r,f){this._validate(a,this.minMonth,this.minDay,t.local.invalidDate||t.regionalOptions[""].invalidDate);var s="y"===f?r:a.year(),i="m"===f?r:a.month(),l="d"===f?r:a.day();return"y"!==f&&"m"!==f||(l=Math.min(l,this.daysInMonth(s,i))),a.date(s,i,l)},isValid:function(a,r,f){this._validateLevel++;var s=this.hasYearZero||0!==a;if(s){var i=this.newDate(a,r,this.minDay);s=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(i)&&f>=this.minDay&&f-this.minDay<this.daysInMonth(i)}return this._validateLevel--,s},toJSDate:function(a,r,f){var s=this._validate(a,r,f,t.local.invalidDate||t.regionalOptions[""].invalidDate);return t.instance().fromJD(this.toJD(s)).toJSDate()},fromJSDate:function(a){return this.fromJD(t.instance().fromJSDate(a).toJD())},_validate:function(a,r,f,s){if(a.year){if(0===this._validateLevel&&this.name!==a.calendar().name)throw(t.local.differentCalendars||t.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,a.calendar().local.name);return a}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(a,r,f))throw s.replace(/\{0\}/,this.local.name);var i=this.newDate(a,r,f);return this._validateLevel--,i}catch(l){throw this._validateLevel--,l}}}),p(n.prototype=new e,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var r=this._validate(a,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear);return(a=r.year()+(r.year()<0?1:0))%4==0&&(a%100!=0||a%400==0)},weekOfYear:function(a,r,f){var s=this.newDate(a,r,f);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(a,r){var f=this._validate(a,r,this.minDay,t.local.invalidMonth||t.regionalOptions[""].invalidMonth);return this.daysPerMonth[f.month()-1]+(2===f.month()&&this.leapYear(f.year())?1:0)},weekDay:function(a,r,f){return(this.dayOfWeek(a,r,f)||7)<6},toJD:function(a,r,f){var s=this._validate(a,r,f,t.local.invalidDate||t.regionalOptions[""].invalidDate);a=s.year(),r=s.month(),f=s.day(),a<0&&a++,r<3&&(r+=12,a--);var i=Math.floor(a/100),l=2-i+Math.floor(i/4);return Math.floor(365.25*(a+4716))+Math.floor(30.6001*(r+1))+f+l-1524.5},fromJD:function(a){var r=Math.floor(a+.5),f=Math.floor((r-1867216.25)/36524.25),s=1524+(f=r+1+f-Math.floor(f/4)),i=Math.floor((s-122.1)/365.25),l=Math.floor(365.25*i),c=Math.floor((s-l)/30.6001),h=s-l-Math.floor(30.6001*c),m=c-(c>13.5?13:1),d=i-(m>2.5?4716:4715);return d<=0&&d--,this.newDate(d,m,h)},toJSDate:function(a,r,f){var s=this._validate(a,r,f,t.local.invalidDate||t.regionalOptions[""].invalidDate),i=new Date(s.year(),s.month()-1,s.day());return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setHours(i.getHours()>12?i.getHours()+2:0),i},fromJSDate:function(a){return this.newDate(a.getFullYear(),a.getMonth()+1,a.getDate())}});var t=Q.exports=new v;t.cdate=u,t.baseCalendar=e,t.calendars.gregorian=n},{"object-assign":247}],347:[function(x,Q,K){var p=x("object-assign"),v=x("./main");p(v.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),v.local=v.regionalOptions[""],p(v.cdate.prototype,{formatDate:function(u,y){return"string"!=typeof u&&(y=u,u=""),this._calendar.formatDate(u||"",this,y)}}),p(v.baseCalendar.prototype,{UNIX_EPOCH:v.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:v.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(u,y,e){if("string"!=typeof u&&(e=y,y=u,u=""),!y)return"";if(y.calendar()!==this)throw v.local.invalidFormat||v.regionalOptions[""].invalidFormat;u=u||this.local.dateFormat;for(var t,a,r,f=(e=e||{}).dayNamesShort||this.local.dayNamesShort,s=e.dayNames||this.local.dayNames,i=e.monthNumbers||this.local.monthNumbers,l=e.monthNamesShort||this.local.monthNamesShort,c=e.monthNames||this.local.monthNames,h=function(E,k){for(var O=1;T+O<u.length&&u.charAt(T+O)===E;)O++;return T+=O-1,Math.floor(O/(k||1))>1},m=function(E,k,O,D){var S=""+k;if(h(E,D))for(;S.length<O;)S="0"+S;return S},d=this,b=function(E,k){return k?"function"==typeof c?c.call(d,E):c[E.month()-d.minMonth]:"function"==typeof l?l.call(d,E):l[E.month()-d.minMonth]},g=this.local.digits,w=function(E){return e.localNumbers&&g?g(E):E},_="",A=!1,T=0;T<u.length;T++)if(A)"'"!==u.charAt(T)||h("'")?_+=u.charAt(T):A=!1;else switch(u.charAt(T)){case"d":_+=w(m("d",y.day(),2));break;case"D":_+=("D",t=y.dayOfWeek(),a=f,r=s,h("D")?r[t]:a[t]);break;case"o":_+=m("o",y.dayOfYear(),3);break;case"w":_+=m("w",y.weekOfYear(),2);break;case"m":_+=(E=y,"function"==typeof i?i.call(d,E,h("m")):w(m("m",E.month(),2)));break;case"M":_+=b(y,h("M"));break;case"y":_+=h("y",2)?y.year():(y.year()%100<10?"0":"")+y.year()%100;break;case"Y":h("Y",2),_+=y.formatYear();break;case"J":_+=y.toJD();break;case"@":_+=(y.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":_+=(y.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":h("'")?_+="'":A=!0;break;default:_+=u.charAt(T)}var E;return _},parseDate:function(u,y,e){if(null==y)throw v.local.invalidArguments||v.regionalOptions[""].invalidArguments;if(""===(y="object"==typeof y?y.toString():y+""))return null;u=u||this.local.dateFormat;var n=(e=e||{}).shortYearCutoff||this.shortYearCutoff;n="string"!=typeof n?n:this.today().year()%100+parseInt(n,10);for(var t=e.dayNamesShort||this.local.dayNamesShort,a=e.dayNames||this.local.dayNames,r=e.parseMonth||this.local.parseMonth,f=e.monthNumbers||this.local.monthNumbers,s=e.monthNamesShort||this.local.monthNamesShort,i=e.monthNames||this.local.monthNames,l=-1,c=-1,h=-1,m=-1,d=-1,o=!1,b=!1,g=function(z,B){for(var U=1;D+U<u.length&&u.charAt(D+U)===z;)U++;return D+=U-1,Math.floor(U/(B||1))>1},w=function(z,B){var U=g(z,B),G=[2,3,U?4:2,U?4:2,10,11,20]["oyYJ@!".indexOf(z)+1],X=new RegExp("^-?\\d{1,"+G+"}"),Z=y.substring(O).match(X);if(!Z)throw(v.local.missingNumberAt||v.regionalOptions[""].missingNumberAt).replace(/\{0\}/,O);return O+=Z[0].length,parseInt(Z[0],10)},_=this,A=function(){if("function"==typeof f){g("m");var z=f.call(_,y.substring(O));return O+=z.length,z}return w("m")},T=function(z,B,U,G){for(var X=g(z,G)?U:B,Z=0;Z<X.length;Z++)if(y.substr(O,X[Z].length).toLowerCase()===X[Z].toLowerCase())return O+=X[Z].length,Z+_.minMonth;throw(v.local.unknownNameAt||v.regionalOptions[""].unknownNameAt).replace(/\{0\}/,O)},E=function(){if("function"==typeof i){var z=g("M")?i.call(_,y.substring(O)):s.call(_,y.substring(O));return O+=z.length,z}return T("M",s,i)},k=function(){if(y.charAt(O)!==u.charAt(D))throw(v.local.unexpectedLiteralAt||v.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,O);O++},O=0,D=0;D<u.length;D++)if(b)"'"!==u.charAt(D)||g("'")?k():b=!1;else switch(u.charAt(D)){case"d":m=w("d");break;case"D":T("D",t,a);break;case"o":d=w("o");break;case"w":w("w");break;case"m":h=A();break;case"M":h=E();break;case"y":var S=D;o=!g("y",2),D=S,c=w("y",2);break;case"Y":c=w("Y",2);break;case"J":l=w("J")+.5,"."===y.charAt(O)&&(O++,w("J"));break;case"@":l=w("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=w("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":O=y.length;break;case"'":g("'")?k():b=!0;break;default:k()}if(O<y.length)throw v.local.unexpectedText||v.regionalOptions[""].unexpectedText;if(-1===c?c=this.today().year():c<100&&o&&(c+=-1===n?1900:this.today().year()-this.today().year()%100-(c<=n?0:100)),"string"==typeof h&&(h=r.call(this,c,h)),d>-1){m=d;for(var C=this.daysInMonth(c,h=1);m>C;C=this.daysInMonth(c,h))h++,m-=C}return l>-1?this.fromJD(l):this.newDate(c,h,m)},determineDate:function(u,y,e,n,t){e&&"object"!=typeof e&&(t=n,n=e,e=null),"string"!=typeof n&&(t=n,n="");var a=this;return y=y?y.newDate():null,null==u?y:"string"==typeof u?function(r){try{return a.parseDate(n,r,t)}catch(l){}for(var f=((r=r.toLowerCase()).match(/^c/)&&e?e.newDate():null)||a.today(),s=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,i=s.exec(r);i;)f.add(parseInt(i[1],10),i[2]||"d"),i=s.exec(r);return f}(u):"number"==typeof u?isNaN(u)||u===1/0||u===-1/0?y:a.today().add(u,"d"):a.newDate(u)}})},{"./main":346,"object-assign":247}],348:[function(x,Q,K){"use strict";Q.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(x,Q,K){"use strict";var p=x("./arrow_paths"),v=x("../../plots/font_attributes"),u=x("../../plots/cartesian/constants"),y=x("../../plot_api/plot_template").templatedArray;x("../../constants/axis_placeable_objects"),Q.exports=y("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:v({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:p.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:p.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",u.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",u.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",u.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",u.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:v({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/cartesian/axes"),u=x("./draw").draw;function y(n){p.filterVisible(n._fullLayout.annotations).forEach(function(a){var r=v.getFromId(n,a.xref),f=v.getFromId(n,a.yref),s=v.getRefType(a.xref),i=v.getRefType(a.yref);a._extremes={},"range"===s&&e(a,r),"range"===i&&e(a,f)})}function e(n,t){var a,r=t._id,f=r.charAt(0),s=n[f],i=n["a"+f],h=n["_"+f+"padplus"],m=n["_"+f+"padminus"],d={x:1,y:-1}[f]*n[f+"shift"],o=3*n.arrowsize*n.arrowwidth||0,b=o+d,g=o-d,w=3*n.startarrowsize*n.arrowwidth||0,_=w+d,A=w-d;if(n["a"+f+"ref"]===n[f+"ref"]){var T=v.findExtremes(t,[t.r2c(s)],{ppadplus:b,ppadminus:g}),E=v.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(h,_),ppadminus:Math.max(m,A)});a={min:[T.min[0],E.min[0]],max:[T.max[0],E.max[0]]}}else _=i?_+i:_,A=i?A-i:A,a=v.findExtremes(t,[t.r2c(s)],{ppadplus:Math.max(h,b,_),ppadminus:Math.max(m,g,A)});n._extremes[r]=a}Q.exports=function(n){if(p.filterVisible(n._fullLayout.annotations).length&&n._fullData.length)return p.syncOrAsync([u,y],n)}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../registry"),u=x("../../plot_api/plot_template").arrayEditor;function y(n,t){var a,r,f,s,i,l,c,h=n._fullLayout.annotations,m=[],d=[],o=[],b=(t||[]).length;for(a=0;a<h.length;a++)if(s=(f=h[a]).clicktoshow){for(r=0;r<b;r++)if(l=(i=t[r]).xaxis,c=i.yaxis,l._id===f.xref&&c._id===f.yref&&l.d2r(i.x)===e(f._xclick,l)&&c.d2r(i.y)===e(f._yclick,c)){(f.visible?"onout"===s?d:o:m).push(a);break}r===b&&f.visible&&"onout"===s&&d.push(a)}return{on:m,off:d,explicitOff:o}}function e(n,t){return"log"===t.type?t.l2r(n):t.d2r(n)}Q.exports={hasClickToShow:function(n,t){var a=y(n,t);return a.on.length>0||a.explicitOff.length>0},onClick:function(n,t){var a,r,f=y(n,t),s=f.on,i=f.off.concat(f.explicitOff),l={},c=n._fullLayout.annotations;if(s.length||i.length){for(a=0;a<s.length;a++)(r=u(n.layout,"annotations",c[s[a]])).modifyItem("visible",!0),p.extendFlat(l,r.getUpdateObj());for(a=0;a<i.length;a++)(r=u(n.layout,"annotations",c[i[a]])).modifyItem("visible",!1),p.extendFlat(l,r.getUpdateObj());return v.call("update",n,{},l)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../color");Q.exports=function(u,y,e,n){n("opacity");var t=n("bgcolor"),a=n("bordercolor"),r=v.opacity(a);n("borderpad");var f=n("borderwidth"),s=n("showarrow");if(n("text",s?" ":e._dfltTitle.annotation),n("textangle"),p.coerceFont(n,"font",e.font),n("width"),n("align"),n("height")&&n("valign"),s){var i,l,c=n("arrowside");-1!==c.indexOf("end")&&(i=n("arrowhead"),l=n("arrowsize")),-1!==c.indexOf("start")&&(n("startarrowhead",i),n("startarrowsize",l)),n("arrowcolor",r?y.bordercolor:v.defaultLine),n("arrowwidth",2*(r&&f||1)),n("standoff"),n("startstandoff")}var h=n("hovertext"),m=e.hoverlabel||{};if(h){var d=n("hoverlabel.bgcolor",m.bgcolor||(v.opacity(t)?v.rgb(t):v.defaultLine)),o=n("hoverlabel.bordercolor",m.bordercolor||v.contrast(d));p.coerceFont(n,"hoverlabel.font",{family:m.font.family,size:m.font.size,color:m.font.color||o})}n("captureevents",!!h)}},{"../../lib":503,"../color":366}],353:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib/to_log_range");Q.exports=function(u,y,e,n){y=y||{};var t="log"===e&&"linear"===y.type;if(t||"linear"===e&&"log"===y.type)for(var r,f,s=u._fullLayout.annotations,i=y._id.charAt(0),l=0;l<s.length;l++)f="annotations["+l+"].",(r=s[l])[i+"ref"]===y._id&&c(i),r["a"+i+"ref"]===y._id&&c("a"+i);function c(h){var m=r[h],d=null;d=t?v(m,y.range):Math.pow(10,m),p(d)||(d=null),n(f+h,d)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/cartesian/axes"),u=x("../../plots/array_container_defaults"),y=x("./common_defaults"),e=x("./attributes");function n(t,a,r){function f(E,k){return p.coerce(t,a,e,E,k)}var s=f("visible"),i=f("clicktoshow");if(s||i){y(t,a,r,f);for(var l=a.showarrow,c=["x","y"],h=[-10,-30],m={_fullLayout:r},d=0;d<2;d++){var o=c[d],b=v.coerceRef(t,a,m,o,"","paper");if("paper"!==b&&v.getFromId(m,b)._annIndices.push(a._index),v.coercePosition(a,m,f,b,o,.5),l){var g="a"+o,w=v.coerceRef(t,a,m,g,"pixel",["pixel","paper"]);"pixel"!==w&&w!==b&&(w=a[g]="pixel"),v.coercePosition(a,m,f,w,g,"pixel"===w?h[d]:.4)}f(o+"anchor"),f(o+"shift")}if(p.noneOrAll(t,a,["x","y"]),l&&p.noneOrAll(t,a,["ax","ay"]),i){var A=f("xclick"),T=f("yclick");a._xclick=void 0===A?a.x:v.cleanPosition(A,m,a.xref),a._yclick=void 0===T?a.y:v.cleanPosition(T,m,a.yref)}}}Q.exports=function(t,a){u(t,a,{name:"annotations",handleItemDefaults:n})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../registry"),u=x("../../plots/plots"),y=x("../../lib"),e=y.strTranslate,n=x("../../plots/cartesian/axes"),t=x("../color"),a=x("../drawing"),r=x("../fx"),f=x("../../lib/svg_text_utils"),s=x("../../lib/setcursor"),i=x("../dragelement"),l=x("../../plot_api/plot_template").arrayEditor,c=x("./draw_arrow_head");function h(o,b){var g=o._fullLayout.annotations[b]||{},w=n.getFromId(o,g.xref),_=n.getFromId(o,g.yref);w&&w.setScale(),_&&_.setScale(),d(o,g,b,!1,w,_)}function m(o,b,g,w,_){var A=_[g],T=_[g+"ref"],E=-1!==g.indexOf("y"),k="domain"===n.getRefType(T),O=E?w.h:w.w;return o?k?A+(E?-b:b)/o._length:o.p2r(o.r2p(A)+b):A+(E?-b:b)/O}function d(o,b,g,w,_,A){var T,E,k=o._fullLayout,O=o._fullLayout._size,D=o._context.edits;w?(T="annotation-"+w,E=w+".annotations"):(T="annotation",E="annotations");var S=l(o.layout,E,b),C=S.modifyBase,z=S.modifyItem,B=S.getUpdateObj;k._infolayer.selectAll("."+T+'[data-index="'+g+'"]').remove();var U="clip"+k._uid+"_ann"+g;if(b._input&&!1!==b.visible){var G={x:{},y:{}},X=+b.textangle||0,Z=k._infolayer.append("g").classed(T,!0).attr("data-index",String(g)).style("opacity",b.opacity),q=Z.append("g").classed("annotation-text-g",!0),W=D[b.showarrow?"annotationTail":"annotationPosition"],te=b.captureevents||D.annotationText||W,R=q.append("g").style("pointer-events",te?"all":null).call(s,"pointer").on("click",function(){o._dragging=!1,o.emit("plotly_clickannotation",ie(p.event))});b.hovertext&&R.on("mouseover",function(){var de=b.hoverlabel,ve=de.font,_e=this.getBoundingClientRect(),be=o.getBoundingClientRect();r.loneHover({x0:_e.left-be.left,x1:_e.right-be.left,y:(_e.top+_e.bottom)/2-be.top,text:b.hovertext,color:de.bgcolor,borderColor:de.bordercolor,fontFamily:ve.family,fontSize:ve.size,fontColor:ve.color},{container:k._hoverlayer.node(),outerContainer:k._paper.node(),gd:o})}).on("mouseout",function(){r.loneUnhover(k._hoverlayer.node())});var N=b.borderwidth,ee=N+b.borderpad,j=R.append("rect").attr("class","bg").style("stroke-width",N+"px").call(t.stroke,b.bordercolor).call(t.fill,b.bgcolor),J=b.width||b.height,$=k._topclips.selectAll("#"+U).data(J?[0]:[]);$.enter().append("clipPath").classed("annclip",!0).attr("id",U).append("rect"),$.exit().remove();var re=b.font,ne=k._meta?y.templateString(b.text,k._meta):b.text,se=R.append("text").classed("annotation-text",!0).text(ne);D.annotationText?se.call(f.makeEditable,{delegate:R,gd:o}).call(ue).on("edit",function(de){b.text=de,this.call(ue),z("text",de),_&&_.autorange&&C(_._name+".autorange",!0),A&&A.autorange&&C(A._name+".autorange",!0),v.call("_guiRelayout",o,B())}):se.call(ue)}else p.selectAll("#"+U).remove();function ie(de){var ve={index:g,annotation:b._input,fullAnnotation:b,event:de};return w&&(ve.subplotId=w),ve}function ue(de){return de.call(a.font,re).attr({"text-anchor":{left:"start",right:"end"}[b.align]||"middle"}),f.convertToTspans(de,o,le),de}function le(){var de=se.selectAll("a");1===de.size()&&de.text()===se.text()&&R.insert("a",":first-child").attr({"xlink:xlink:href":de.attr("xlink:href"),"xlink:xlink:show":de.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(j.node());var ve=R.select(".annotation-text-math-group"),_e=!ve.empty(),be=a.bBox((_e?ve:se).node()),Te=be.width,he=be.height,me=b.width||Te,Ae=b.height||he,we=Math.round(me+2*ee),Se=Math.round(Ae+2*ee);function Pe(Qe,yt){return"auto"===yt&&(yt=Qe<1/3?"left":Qe>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[yt]}for(var ze=!1,He=["x","y"],tt=0;tt<He.length;tt++){var Oe,Be,Je,Ye,nt,ft=He[tt],dt=b[ft+"ref"]||ft,Rt=b["a"+ft+"ref"],Et={x:_,y:A}[ft],at=(X+("x"===ft?0:-90))*Math.PI/180,rt=we*Math.cos(at),St=Se*Math.sin(at),Xt=Math.abs(rt)+Math.abs(St),lr=b[ft+"anchor"],Ue=b[ft+"shift"]*("x"===ft?1:-1),Ze=G[ft],Ne=n.getRefType(dt);if(Et&&"domain"!==Ne){var it=Et.r2fraction(b[ft]);(it<0||it>1)&&(Rt===dt?((it=Et.r2fraction(b["a"+ft]))<0||it>1)&&(ze=!0):ze=!0),Oe=Et._offset+Et.r2p(b[ft]),Ye=.5}else{var ke="domain"===Ne;"x"===ft?(Je=b[ft],Oe=ke?Et._offset+Et._length*Je:Oe=O.l+O.w*Je):(Je=1-b[ft],Oe=ke?Et._offset+Et._length*Je:Oe=O.t+O.h*Je),Ye=b.showarrow?.5:Je}if(b.showarrow){Ze.head=Oe;var De=b["a"+ft];if(nt=rt*Pe(.5,b.xanchor)-St*Pe(.5,b.yanchor),Rt===dt){var Re=n.getRefType(Rt);"domain"===Re?("y"===ft&&(De=1-De),Ze.tail=Et._offset+Et._length*De):Ze.tail="paper"===Re?"y"===ft?O.t+O.h*(De=1-De):O.l+O.w*De:Et._offset+Et.r2p(De),Be=nt}else Ze.tail=Oe+De,Be=nt+De;Ze.text=Ze.tail+nt;var Ie=k["x"===ft?"width":"height"];if("paper"===dt&&(Ze.head=y.constrain(Ze.head,1,Ie-1)),"pixel"===Rt){var Ke=-Math.max(Ze.tail-3,Ze.text),ut=Math.min(Ze.tail+3,Ze.text)-Ie;Ke>0?(Ze.tail+=Ke,Ze.text+=Ke):ut>0&&(Ze.tail-=ut,Ze.text-=ut)}Ze.tail+=Ue,Ze.head+=Ue}else Be=nt=Xt*Pe(Ye,lr),Ze.text=Oe+nt;Ze.text+=Ue,nt+=Ue,b["_"+ft+"padplus"]=Xt/2+(Be+=Ue),b["_"+ft+"padminus"]=Xt/2-Be,b["_"+ft+"size"]=Xt,b["_"+ft+"shift"]=nt}if(ze)R.remove();else{var xt=0,gt=0;"left"!==b.align&&(xt=(me-Te)*("center"===b.align?.5:1)),"top"!==b.valign&&(gt=(Ae-he)*("middle"===b.valign?.5:1)),_e?ve.select("svg").attr({x:ee+xt-1,y:ee+gt}).call(a.setClipUrl,J?U:null,o):se.call(f.positionText,ee+xt-be.left,ee+gt-be.top).call(a.setClipUrl,J?U:null,o),$.select("rect").call(a.setRect,ee,ee,me,Ae),j.call(a.setRect,N/2,N/2,we-N,Se-N),R.call(a.setTranslate,Math.round(G.x.text-we/2),Math.round(G.y.text-Se/2)),q.attr({transform:"rotate("+X+","+G.x.text+","+G.y.text+")"});var zt,Ft=function(Qe,yt){Z.selectAll(".annotation-arrow-g").remove();var Nt=G.x.head,Yt=G.y.head,rr=G.x.tail+Qe,Fe=G.y.tail+yt,ht=G.x.text+Qe,kt=G.y.text+yt,Gt=y.rotationXYMatrix(X,ht,kt),Zt=y.apply2DTransform(Gt),fr=y.apply2DTransform2(Gt),$t=+j.attr("width"),nr=+j.attr("height"),dr=ht-.5*$t,Tr=dr+$t,wr=kt-.5*nr,mr=wr+nr,_r=[[dr,wr,dr,mr],[dr,mr,Tr,mr],[Tr,mr,Tr,wr],[Tr,wr,dr,wr]].map(fr);if(!_r.reduce(function(Pr,un){return Pr^!!y.segmentsIntersect(Nt,Yt,Nt+1e6,Yt+1e6,un[0],un[1],un[2],un[3])},!1)){_r.forEach(function(Pr){var un=y.segmentsIntersect(rr,Fe,Nt,Yt,Pr[0],Pr[1],Pr[2],Pr[3]);un&&(rr=un.x,Fe=un.y)});var Sr=b.arrowwidth,Gr=b.arrowcolor,Er=b.arrowside,Zr=Z.append("g").style({opacity:t.opacity(Gr)}).classed("annotation-arrow-g",!0),an=Zr.append("path").attr("d","M"+rr+","+Fe+"L"+Nt+","+Yt).style("stroke-width",Sr+"px").call(t.stroke,t.rgb(Gr));if(c(an,Er,b),D.annotationPosition&&an.node().parentNode&&!w){var gn=Nt,Vn=Yt;if(b.standoff){var Gn=Math.sqrt(Math.pow(Nt-rr,2)+Math.pow(Yt-Fe,2));gn+=b.standoff*(rr-Nt)/Gn,Vn+=b.standoff*(Fe-Yt)/Gn}var Ln,ln,qr=Zr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(rr-gn)+","+(Fe-Vn),transform:e(gn,Vn)}).style("stroke-width",Sr+6+"px").call(t.stroke,"rgba(0,0,0,0)").call(t.fill,"rgba(0,0,0,0)");i.init({element:qr.node(),gd:o,prepFn:function(){var Pr=a.getTranslate(R);Ln=Pr.x,ln=Pr.y,_&&_.autorange&&C(_._name+".autorange",!0),A&&A.autorange&&C(A._name+".autorange",!0)},moveFn:function(Pr,un){var dn=Zt(Ln,ln),cn=dn[0]+Pr,fn=dn[1]+un;R.call(a.setTranslate,cn,fn),z("x",m(_,Pr,"x",O,b)),z("y",m(A,un,"y",O,b)),b.axref===b.xref&&z("ax",m(_,Pr,"ax",O,b)),b.ayref===b.yref&&z("ay",m(A,un,"ay",O,b)),Zr.attr("transform",e(Pr,un)),q.attr({transform:"rotate("+X+","+cn+","+fn+")"})},doneFn:function(){v.call("_guiRelayout",o,B());var Pr=document.querySelector(".js-notes-box-panel");Pr&&Pr.redraw(Pr.selectedObj)}})}}};b.showarrow&&Ft(0,0),W&&i.init({element:R.node(),gd:o,prepFn:function(){zt=q.attr("transform")},moveFn:function(Qe,yt){var Nt="pointer";if(b.showarrow)z("ax",b.axref===b.xref?m(_,Qe,"ax",O,b):b.ax+Qe),z("ay",b.ayref===b.yref?m(A,yt,"ay",O.w,b):b.ay+yt),Ft(Qe,yt);else{if(w)return;var Yt,rr;if(_)Yt=m(_,Qe,"x",O,b);else{var Fe=b._xsize/O.w;Yt=i.align(b.x+(b._xshift-b.xshift)/O.w-Fe/2+Qe/O.w,Fe,0,1,b.xanchor)}if(A)rr=m(A,yt,"y",O,b);else{var kt=b._ysize/O.h;rr=i.align(b.y-(b._yshift+b.yshift)/O.h-kt/2-yt/O.h,kt,0,1,b.yanchor)}z("x",Yt),z("y",rr),_&&A||(Nt=i.getCursor(_?.5:Yt,A?.5:rr,b.xanchor,b.yanchor))}q.attr({transform:e(Qe,yt)+zt}),s(R,Nt)},clickFn:function(Qe,yt){b.captureevents&&o.emit("plotly_clickannotation",ie(yt))},doneFn:function(){s(R),v.call("_guiRelayout",o,B());var Qe=document.querySelector(".js-notes-box-panel");Qe&&Qe.redraw(Qe.selectedObj)}})}}}Q.exports={draw:function(o){var b=o._fullLayout;b._infolayer.selectAll(".annotation").remove();for(var g=0;g<b.annotations.length;g++)b.annotations[g].visible&&h(o,g);return u.previousPromises(o)},drawOne:h,drawRaw:d}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../color"),u=x("./arrow_paths"),y=x("../../lib"),e=y.strScale,n=y.strRotate,t=y.strTranslate;Q.exports=function(a,r,f){var s,i,l,c,h=a.node(),m=u[f.arrowhead||0],d=u[f.startarrowhead||0],o=(f.arrowwidth||1)*(f.arrowsize||1),b=(f.arrowwidth||1)*(f.startarrowsize||1),g=r.indexOf("start")>=0,w=r.indexOf("end")>=0,_=m.backoff*o+f.standoff,A=d.backoff*b+f.startstandoff;if("line"===h.nodeName){s={x:+a.attr("x1"),y:+a.attr("y1")},i={x:+a.attr("x2"),y:+a.attr("y2")};var T=s.x-i.x,E=s.y-i.y;if(c=(l=Math.atan2(E,T))+Math.PI,_&&A&&_+A>Math.sqrt(T*T+E*E))return void Z();if(_){if(_*_>T*T+E*E)return void Z();var k=_*Math.cos(l),O=_*Math.sin(l);i.x+=k,i.y+=O,a.attr({x2:i.x,y2:i.y})}if(A){if(A*A>T*T+E*E)return void Z();var D=A*Math.cos(l),S=A*Math.sin(l);s.x-=D,s.y-=S,a.attr({x1:s.x,y1:s.y})}}else if("path"===h.nodeName){var C=h.getTotalLength(),z="";if(C<_+A)return void Z();var B=h.getPointAtLength(0),U=h.getPointAtLength(.1);l=Math.atan2(B.y-U.y,B.x-U.x),s=h.getPointAtLength(Math.min(A,C)),z="0px,"+A+"px,";var G=h.getPointAtLength(C),X=h.getPointAtLength(C-.1);c=Math.atan2(G.y-X.y,G.x-X.x),i=h.getPointAtLength(Math.max(0,C-_)),a.style("stroke-dasharray",z+=C-(z?A+_:_)+"px,"+C+"px")}function Z(){a.style("stroke-dasharray","0px,100px")}function q(W,te,R,N){W.path&&(W.noRotate&&(R=0),p.select(h.parentNode).append("path").attr({class:a.attr("class"),d:W.path,transform:t(te.x,te.y)+n(180*R/Math.PI)+e(N)}).style({fill:v.rgb(f.arrowcolor),"stroke-width":0}))}g&&q(d,s,l,b),w&&q(m,i,c,o)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(x,Q,K){"use strict";var p=x("./draw"),v=x("./click");Q.exports={moduleType:"component",name:"annotations",layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),includeBasePlot:x("../../plots/cartesian/include_components")("annotations"),calcAutorange:x("./calc_autorange"),draw:p.draw,drawOne:p.drawOne,drawRaw:p.drawRaw,hasClickToShow:v.hasClickToShow,onClick:v.onClick,convertCoords:x("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(x,Q,K){"use strict";var p=x("../annotations/attributes"),v=x("../../plot_api/edit_types").overrideAll,u=x("../../plot_api/plot_template").templatedArray;Q.exports=v(u("annotation",{visible:p.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:p.xanchor,xshift:p.xshift,yanchor:p.yanchor,yshift:p.yshift,text:p.text,textangle:p.textangle,font:p.font,width:p.width,height:p.height,opacity:p.opacity,align:p.align,valign:p.valign,bgcolor:p.bgcolor,bordercolor:p.bordercolor,borderpad:p.borderpad,borderwidth:p.borderwidth,showarrow:p.showarrow,arrowcolor:p.arrowcolor,arrowhead:p.arrowhead,startarrowhead:p.startarrowhead,arrowside:p.arrowside,arrowsize:p.arrowsize,startarrowsize:p.startarrowsize,arrowwidth:p.arrowwidth,standoff:p.standoff,startstandoff:p.startstandoff,hovertext:p.hovertext,hoverlabel:p.hoverlabel,captureevents:p.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/cartesian/axes");function u(y,e){var n=e.fullSceneLayout.domain,t=e.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};y._xa={},p.extendFlat(y._xa,a),v.setConvert(y._xa),y._xa._offset=t.l+n.x[0]*t.w,y._xa.l2p=function(){return.5*(1+y._pdata[0]/y._pdata[3])*t.w*(n.x[1]-n.x[0])},y._ya={},p.extendFlat(y._ya,a),v.setConvert(y._ya),y._ya._offset=t.t+(1-n.y[1])*t.h,y._ya.l2p=function(){return.5*(1-y._pdata[1]/y._pdata[3])*t.h*(n.y[1]-n.y[0])}}Q.exports=function(y){for(var e=y.fullSceneLayout.annotations,n=0;n<e.length;n++)u(e[n],y);y.fullLayout._infolayer.selectAll(".annotation-"+y.id).remove()}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/cartesian/axes"),u=x("../../plots/array_container_defaults"),y=x("../annotations/common_defaults"),e=x("./attributes");function n(t,a,r,f){function s(l,c){return p.coerce(t,a,e,l,c)}function i(l){var c=l+"axis",h={_fullLayout:{}};return h._fullLayout[c]=r[c],v.coercePosition(a,h,s,l,l,.5)}s("visible")&&(y(t,a,f.fullLayout,s),i("x"),i("y"),i("z"),p.noneOrAll(t,a,["x","y","z"]),a.xref="x",a.yref="y",a.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),a.showarrow&&(a.axref="pixel",a.ayref="pixel",s("ax",-10),s("ay",-30),p.noneOrAll(t,a,["ax","ay"])))}Q.exports=function(t,a,r){u(t,a,{name:"annotations",handleItemDefaults:n,fullLayout:r.fullLayout})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(x,Q,K){"use strict";var p=x("../annotations/draw").drawRaw,v=x("../../plots/gl3d/project"),u=["x","y","z"];Q.exports=function(y){for(var e=y.fullSceneLayout,n=y.dataScale,t=e.annotations,a=0;a<t.length;a++){for(var r=t[a],f=!1,s=0;s<3;s++){var i=u[s],c=e[i+"axis"].r2fraction(r[i]);if(c<0||c>1){f=!0;break}}f?y.fullLayout._infolayer.select(".annotation-"+y.id+'[data-index="'+a+'"]').remove():(r._pdata=v(y.glplot.cameraParams,[e.xaxis.r2l(r.x)*n[0],e.yaxis.r2l(r.y)*n[1],e.zaxis.r2l(r.z)*n[2]]),p(y.graphDiv,r,a,y.id,r._xa,r._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../lib");Q.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:x("./attributes")}}},layoutAttributes:x("./attributes"),handleDefaults:x("./defaults"),includeBasePlot:function(u,y){var e=p.subplotsRegistry.gl3d;if(e)for(var n=e.attrRegex,t=Object.keys(u),a=0;a<t.length;a++){var r=t[a];n.test(r)&&(u[r].annotations||[]).length&&(v.pushUnique(y._basePlotModules,e),v.pushUnique(y._subplots.gl3d,r))}},convert:x("./convert"),draw:x("./draw")}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(x,Q,K){"use strict";Q.exports=x("world-calendars/dist/main"),x("world-calendars/dist/plus"),x("world-calendars/dist/calendars/chinese"),x("world-calendars/dist/calendars/coptic"),x("world-calendars/dist/calendars/discworld"),x("world-calendars/dist/calendars/ethiopian"),x("world-calendars/dist/calendars/hebrew"),x("world-calendars/dist/calendars/islamic"),x("world-calendars/dist/calendars/julian"),x("world-calendars/dist/calendars/mayan"),x("world-calendars/dist/calendars/nanakshahi"),x("world-calendars/dist/calendars/nepali"),x("world-calendars/dist/calendars/persian"),x("world-calendars/dist/calendars/taiwan"),x("world-calendars/dist/calendars/thai"),x("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(x,Q,K){"use strict";var p=x("./calendars"),v=x("../../lib"),u=x("../../constants/numerical"),y=u.EPOCHJD,e=u.ONEDAY,n={valType:"enumerated",values:v.sortObjectKeys(p.calendars),editType:"calc",dflt:"gregorian"},t=function(d,o,b,g){var w={};return w[b]=n,v.coerce(d,o,w,b,g)},a={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function f(d){return r[d]||(r[d]=p.instance(d))}function s(d){return v.extendFlat({},n,{description:d})}function i(d){return"Sets the calendar system to use with `"+d+"` date data."}var l={xcalendar:s(i("x"))},c=v.extendFlat({},l,{ycalendar:s(i("y"))}),h=v.extendFlat({},c,{zcalendar:s(i("z"))}),m=s(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));Q.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:c,bar:c,box:c,heatmap:c,contour:c,histogram:c,histogram2d:c,histogram2dcontour:c,scatter3d:h,surface:h,mesh3d:h,scattergl:c,ohlc:l,candlestick:l},layout:{calendar:s(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:m},yaxis:{calendar:m},scene:{xaxis:{calendar:m},yaxis:{calendar:m},zaxis:{calendar:m}},polar:{radialaxis:{calendar:m}}},transforms:{filter:{valuecalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:n,handleDefaults:t,handleTraceDefaults:function(d,o,b,g){for(var w=0;w<b.length;w++)t(d,o,b[w]+"calendar",g.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:f,worldCalFmt:function(d,o,b){for(var g,w,_,A,T,E=Math.floor((o+.05)/e)+y,k=f(b).fromJD(E),O=0;-1!==(O=d.indexOf("%",O));)"0"===(g=d.charAt(O+1))||"-"===g||"_"===g?(_=3,w=d.charAt(O+2),"_"===g&&(g="-")):(w=g,g="0",_=2),(A=a[w])?(T="##"===A?"##":k.formatDate(A[g]),d=d.substr(0,O)+T+d.substr(O+_),O+=T.length):O+=_;return d}}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(x,Q,K){"use strict";K.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],K.defaultLine="#444",K.lightLine="#eee",K.background="#fff",K.borderLine="#BEC8D9",K.lightFraction=1e3/11},{}],366:[function(x,Q,K){"use strict";var p=x("tinycolor2"),v=x("fast-isnumeric"),u=x("../../lib/array").isTypedArray,y=Q.exports={},e=x("./attributes");y.defaults=e.defaults;var n=y.defaultLine=e.defaultLine;y.lightLine=e.lightLine;var t=y.background=e.background;function a(r){if(v(r)||"string"!=typeof r)return r;var f=r.trim();if("rgb"!==f.substr(0,3))return r;var s=f.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return r;var i=s[1].trim().split(/\s*[\s,]\s*/),l="a"===f.charAt(3)&&4===i.length;if(!l&&3!==i.length)return r;for(var c=0;c<i.length;c++){if(!(i[c].length&&(i[c]=Number(i[c]),i[c]>=0)))return r;if(3===c)i[c]>1&&(i[c]=1);else if(i[c]>=1)return r}var h=Math.round(255*i[0])+", "+Math.round(255*i[1])+", "+Math.round(255*i[2]);return l?"rgba("+h+", "+i[3]+")":"rgb("+h+")"}y.tinyRGB=function(r){var f=r.toRgb();return"rgb("+Math.round(f.r)+", "+Math.round(f.g)+", "+Math.round(f.b)+")"},y.rgb=function(r){return y.tinyRGB(p(r))},y.opacity=function(r){return r?p(r).getAlpha():0},y.addOpacity=function(r,f){var s=p(r).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+f+")"},y.combine=function(r,f){var s=p(r).toRgb();if(1===s.a)return p(r).toRgbString();var i=p(f||t).toRgb(),l=1===i.a?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a};return p({r:l.r*(1-s.a)+s.r*s.a,g:l.g*(1-s.a)+s.g*s.a,b:l.b*(1-s.a)+s.b*s.a}).toRgbString()},y.contrast=function(r,f,s){var i=p(r);return 1!==i.getAlpha()&&(i=p(y.combine(r,t))),(i.isDark()?f?i.lighten(f):t:s?i.darken(s):n).toString()},y.stroke=function(r,f){var s=p(f);r.style({stroke:y.tinyRGB(s),"stroke-opacity":s.getAlpha()})},y.fill=function(r,f){var s=p(f);r.style({fill:y.tinyRGB(s),"fill-opacity":s.getAlpha()})},y.clean=function(r){if(r&&"object"==typeof r){var f,s,i,l,c=Object.keys(r);for(f=0;f<c.length;f++)if(l=r[i=c[f]],"color"===i.substr(i.length-5))if(Array.isArray(l))for(s=0;s<l.length;s++)l[s]=a(l[s]);else r[i]=a(l);else if("colorscale"===i.substr(i.length-10)&&Array.isArray(l))for(s=0;s<l.length;s++)Array.isArray(l[s])&&(l[s][1]=a(l[s][1]));else if(Array.isArray(l)){var h=l[0];if(!Array.isArray(h)&&h&&"object"==typeof h)for(s=0;s<l.length;s++)y.clean(l[s])}else l&&"object"==typeof l&&!u(l)&&y.clean(l)}}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/layout_attributes"),v=x("../../plots/font_attributes"),u=x("../../lib/extend").extendFlat,y=x("../../plot_api/edit_types").overrideAll;Q.exports=y({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:p.linecolor,outlinewidth:p.linewidth,bordercolor:p.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:p.tickmode,nticks:p.nticks,tick0:p.tick0,dtick:p.dtick,tickvals:p.tickvals,ticktext:p.ticktext,ticks:u({},p.ticks,{dflt:""}),ticklabeloverflow:u({},p.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:p.ticklen,tickwidth:p.tickwidth,tickcolor:p.tickcolor,showticklabels:p.showticklabels,tickfont:v({}),tickangle:p.tickangle,tickformat:p.tickformat,tickformatstops:p.tickformatstops,tickprefix:p.tickprefix,showtickprefix:p.showtickprefix,ticksuffix:p.ticksuffix,showticksuffix:p.showticksuffix,separatethousands:p.separatethousands,exponentformat:p.exponentformat,minexponent:p.minexponent,showexponent:p.showexponent,title:{text:{valType:"string"},font:v({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:v({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(x,Q,K){"use strict";Q.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plot_api/plot_template"),u=x("../../plots/cartesian/tick_value_defaults"),y=x("../../plots/cartesian/tick_mark_defaults"),e=x("../../plots/cartesian/tick_label_defaults"),n=x("../../plots/cartesian/prefix_suffix_defaults"),t=x("./attributes");Q.exports=function(a,r,f){var s=v.newContainer(r,"colorbar"),i=a.colorbar||{};function l(w,_){return p.coerce(i,s,t,w,_)}var c=l("thicknessmode");l("thickness","fraction"===c?30/(f.width-f.margin.l-f.margin.r):30);var h=l("lenmode");l("len","fraction"===h?1:f.height-f.margin.t-f.margin.b),l("x"),l("xanchor"),l("xpad"),l("y"),l("yanchor"),l("ypad"),p.noneOrAll(i,s,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var m=l("ticklabelposition");l("ticklabeloverflow",-1!==m.indexOf("inside")?"hide past domain":"hide past div"),u(i,s,l,"linear");var d=f.font,o={outerTicks:!1,font:d};-1!==m.indexOf("inside")&&(o.bgColor="black"),n(i,s,l,"linear",o),e(i,s,l,"linear",o),y(i,s,l,"linear",o),l("title.text",f._dfltTitle.colorbar);var b=s.tickfont,g=p.extendFlat({},b,{color:d.color,size:p.bigFont(b.size)});p.coerceFont(l,"title.font",g),l("title.side")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("tinycolor2"),u=x("../../plots/plots"),y=x("../../registry"),e=x("../../plots/cartesian/axes"),n=x("../dragelement"),t=x("../../lib"),a=t.strTranslate,r=x("../../lib/extend").extendFlat,f=x("../../lib/setcursor"),s=x("../drawing"),i=x("../color"),l=x("../titles"),c=x("../../lib/svg_text_utils"),h=x("../colorscale/helpers").flipScale,m=x("../../plots/cartesian/axis_defaults"),d=x("../../plots/cartesian/position_defaults"),o=x("../../plots/cartesian/layout_attributes"),b=x("../../constants/alignment"),g=b.LINE_SPACING,w=b.FROM_TL,_=b.FROM_BR,A=x("./constants").cn;Q.exports={draw:function(T){var E=T._fullLayout._infolayer.selectAll("g."+A.colorbar).data(function(k){var O,D,S,C,z=k._fullLayout,B=k.calcdata,U=[];function G(J){return r(J,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function X(){"function"==typeof C.calc?C.calc(k,S,O):(O._fillgradient=D.reversescale?h(D.colorscale):D.colorscale,O._zrange=[D[C.min],D[C.max]])}for(var Z=0;Z<B.length;Z++){var W=(S=B[Z][0].trace)._module.colorbar;if(!0===S.visible&&W)for(var te=Array.isArray(W),R=te?W:[W],N=0;N<R.length;N++){var V=(C=R[N]).container;(D=V?S[V]:S)&&D.showscale&&((O=G(D.colorbar))._id="cb"+S.uid+(te&&V?"-"+V:""),O._traceIndex=S.index,O._propPrefix=(V?V+".":"")+"colorbar.",O._meta=S._meta,X(),U.push(O))}}for(var ee in z._colorAxes)if((D=z[ee]).showscale){var j=z._colorAxes[ee];(O=G(D.colorbar))._id="cb"+ee,O._propPrefix=ee+".colorbar.",O._meta=z._meta,C={min:"cmin",max:"cmax"},"heatmap"!==j[0]&&(C.calc=(S=j[1])._module.colorbar.calc),X(),U.push(O)}return U}(T),function(k){return k._id});E.enter().append("g").attr("class",function(k){return k._id}).classed(A.colorbar,!0),E.each(function(k){var O=p.select(this);t.ensureSingle(O,"rect",A.cbbg),t.ensureSingle(O,"g",A.cbfills),t.ensureSingle(O,"g",A.cblines),t.ensureSingle(O,"g",A.cbaxis,function(S){S.classed(A.crisp,!0)}),t.ensureSingle(O,"g",A.cbtitleunshift,function(S){S.append("g").classed(A.cbtitle,!0)}),t.ensureSingle(O,"rect",A.cboutline);var S,C,z,B,U,G,X,D=function(S,C,z){var B=z._fullLayout,U=B._size,G=C._fillcolor,X=C._line,Z=C.title,q=Z.side,W=C._zrange||p.extent(("function"==typeof G?G:X.color).domain()),te="function"==typeof X.color?X.color:function(){return X.color},R="function"==typeof G?G:function(){return G},N=C._levels,V=function(Oe,Be,Je){var Ye,nt,ft=Be._levels,dt=[],Rt=[],Et=ft.end+ft.size/100,at=ft.size,rt=1.001*Je[0]-.001*Je[1],St=1.001*Je[1]-.001*Je[0];for(nt=0;nt<1e5&&(Ye=ft.start+nt*at,!(at>0?Ye>=Et:Ye<=Et));nt++)Ye>rt&&Ye<St&&dt.push(Ye);if(Be._fillgradient)Rt=[0];else if("function"==typeof Be._fillcolor){var Xt=Be._filllevels;if(Xt)for(Et=Xt.end+Xt.size/100,at=Xt.size,nt=0;nt<1e5&&(Ye=Xt.start+nt*at,!(at>0?Ye>=Et:Ye<=Et));nt++)Ye>Je[0]&&Ye<Je[1]&&Rt.push(Ye);else(Rt=dt.map(function(lr){return lr-ft.size/2})).push(Rt[Rt.length-1]+ft.size)}else Be._fillcolor&&"string"==typeof Be._fillcolor&&(Rt=[0]);return ft.size<0&&(dt.reverse(),Rt.reverse()),{line:dt,fill:Rt}}(0,C,W),ee=V.fill,j=V.line,J=Math.round(C.thickness*("fraction"===C.thicknessmode?U.w:1)),$=J/U.w,re=Math.round(C.len*("fraction"===C.lenmode?U.h:1)),ne=re/U.h,se=C.xpad/U.w,ie=(C.borderwidth+C.outlinewidth)/2,ue=C.ypad/U.h,le=Math.round(C.x*U.w+C.xpad),de=C.x-$*({center:.5,right:1}[C.xanchor]||0),ve=C.y+ne*(({top:-.5,bottom:.5}[C.yanchor]||0)-.5),_e=Math.round(U.h*(1-ve)),be=_e-re;C._lenFrac=ne,C._thickFrac=$,C._xLeftFrac=de,C._yBottomFrac=ve;var Te=C._axis=function(Oe,Be,Je){var Ye=Oe._fullLayout,nt={type:"linear",range:Je,tickmode:Be.tickmode,nticks:Be.nticks,tick0:Be.tick0,dtick:Be.dtick,tickvals:Be.tickvals,ticktext:Be.ticktext,ticks:Be.ticks,ticklen:Be.ticklen,tickwidth:Be.tickwidth,tickcolor:Be.tickcolor,showticklabels:Be.showticklabels,ticklabelposition:Be.ticklabelposition,ticklabeloverflow:Be.ticklabeloverflow,tickfont:Be.tickfont,tickangle:Be.tickangle,tickformat:Be.tickformat,exponentformat:Be.exponentformat,minexponent:Be.minexponent,separatethousands:Be.separatethousands,showexponent:Be.showexponent,showtickprefix:Be.showtickprefix,tickprefix:Be.tickprefix,showticksuffix:Be.showticksuffix,ticksuffix:Be.ticksuffix,title:Be.title,showline:!0,anchor:"free",side:"right",position:1},ft={type:"linear",_id:"y"+Be._id},dt={letter:"y",font:Ye.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:Ye.calendar};function Rt(Et,at){return t.coerce(nt,ft,o,Et,at)}return m(nt,ft,Rt,dt,Ye),d(nt,ft,Rt,dt),ft}(z,C,W);if(Te.position=C.x+se+$,-1!==["top","bottom"].indexOf(q)&&(Te.title.side=q,Te.titlex=C.x+se,Te.titley=ve+("top"===Z.side?ne-ue:ue)),X.color&&"auto"===C.tickmode){Te.tickmode="linear",Te.tick0=N.start;var he=N.size,me=t.constrain((_e-be)/50,4,15)+1,Ae=(W[1]-W[0])/((C.nticks||me)*he);if(Ae>1){var we=Math.pow(10,Math.floor(Math.log(Ae)/Math.LN10));he*=we*t.roundUp(Ae/we,[2,5,10]),(Math.abs(N.start)/N.size+1e-6)%1<2e-6&&(Te.tick0=0)}Te.dtick=he}Te.domain=[ve+ue,ve+ne-ue],Te.setScale(),S.attr("transform",a(Math.round(U.l),Math.round(U.t)));var Se,Pe=S.select("."+A.cbtitleunshift).attr("transform",a(-Math.round(U.l),-Math.round(U.t))),ze=S.select("."+A.cbaxis),He=0;function tt(Oe,Be){var Je={propContainer:Te,propName:C._propPrefix+"title",traceIndex:C._traceIndex,_meta:C._meta,placeholder:B._dfltTitle.colorbar,containerGroup:S.select("."+A.cbtitle)},Ye="h"===Oe.charAt(0)?Oe.substr(1):"h"+Oe;S.selectAll("."+Ye+",."+Ye+"-math-group").remove(),l.draw(z,Oe,r(Je,Be||{}))}return t.syncOrAsync([u.previousPromises,function(){if(-1!==["top","bottom"].indexOf(q)){var Je=Te.title.font.size;tt(Te._id+"title",{attributes:{x:U.l+(C.x+se)*U.w,y:"top"===q?(1-(ve+ne-ue))*U.h+U.t+3+.75*Je:(1-(ve+ue))*U.h+U.t-3-.25*Je,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(q)){var Oe=S.select("."+A.cbtitle),Be=Oe.select("text"),Je=[-C.outlinewidth/2,C.outlinewidth/2],Ye=Oe.select(".h"+Te._id+"title-math-group").node(),nt=15.6;if(Be.node()&&(nt=parseInt(Be.node().style.fontSize,10)*g),Ye?(He=s.bBox(Ye).height)>nt&&(Je[1]-=(He-nt)/2):Be.node()&&!Be.classed(A.jsPlaceholder)&&(He=s.bBox(Be.node()).height),He){if(He+=5,"top"===q)Te.domain[1]-=He/U.h,Je[1]*=-1;else{Te.domain[0]+=He/U.h;var ft=c.lineCount(Be);Je[1]+=(1-ft)*nt}Oe.attr("transform",a(Je[0],Je[1])),Te.setScale()}}S.selectAll("."+A.cbfills+",."+A.cblines).attr("transform",a(0,Math.round(U.h*(1-Te.domain[1])))),ze.attr("transform",a(0,Math.round(-U.t)));var dt=S.select("."+A.cbfills).selectAll("rect."+A.cbfill).attr("style","").data(ee);dt.enter().append("rect").classed(A.cbfill,!0).style("stroke","none"),dt.exit().remove();var Rt=W.map(Te.c2p).map(Math.round).sort(function(Xt,lr){return Xt-lr});dt.each(function(Xt,lr){var Ue=[0===lr?W[0]:(ee[lr]+ee[lr-1])/2,lr===ee.length-1?W[1]:(ee[lr]+ee[lr+1])/2].map(Te.c2p).map(Math.round);Ue[1]=t.constrain(Ue[1]+(Ue[1]>Ue[0])?1:-1,Rt[0],Rt[1]);var Ze=p.select(this).attr({x:le,width:Math.max(J,2),y:p.min(Ue),height:Math.max(p.max(Ue)-p.min(Ue),2)});if(C._fillgradient)s.gradient(Ze,z,C._id,"vertical",C._fillgradient,"fill");else{var Ne=R(Xt).replace("e-","");Ze.attr("fill",v(Ne).toHexString())}});var Et=S.select("."+A.cblines).selectAll("path."+A.cbline).data(X.color&&X.width?j:[]);Et.enter().append("path").classed(A.cbline,!0),Et.exit().remove(),Et.each(function(Xt){p.select(this).attr("d","M"+le+","+(Math.round(Te.c2p(Xt))+X.width/2%1)+"h"+J).call(s.lineGroupStyle,X.width,te(Xt),X.dash)}),ze.selectAll("g."+Te._id+"tick,path").remove();var at=le+J+(C.outlinewidth||0)/2-("outside"===C.ticks?1:0),rt=e.calcTicks(Te),St=e.getTickSigns(Te)[2];return e.drawTicks(z,Te,{vals:"inside"===Te.ticks?e.clipEnds(Te,rt):rt,layer:ze,path:e.makeTickPath(Te,at,St),transFn:e.makeTransTickFn(Te)}),e.drawLabels(z,Te,{vals:rt,layer:ze,transFn:e.makeTransTickLabelFn(Te),labelFns:e.makeLabelFns(Te,at)})},function(){if(-1===["top","bottom"].indexOf(q)){var Oe=Te.title.font.size,Be=Te._offset+Te._length/2,Je=U.l+(Te.position||0)*U.w+("right"===Te.side?10+Oe*(Te.showticklabels?1:.5):-10-Oe*(Te.showticklabels?.5:0));tt("h"+Te._id+"title",{avoid:{selection:p.select(z).selectAll("g."+Te._id+"tick"),side:q,offsetLeft:U.l,offsetTop:0,maxShift:B.width},attributes:{x:Je,y:Be,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}},u.previousPromises,function(){var Oe=J+C.outlinewidth/2;if(-1===Te.ticklabelposition.indexOf("inside")&&(Oe+=s.bBox(ze.node()).width),(Se=Pe.select("text")).node()&&!Se.classed(A.jsPlaceholder)){var Be,Je=Pe.select(".h"+Te._id+"title-math-group").node();Be=Je&&-1!==["top","bottom"].indexOf(q)?s.bBox(Je).width:s.bBox(Pe.node()).right-le-U.l,Oe=Math.max(Oe,Be)}var Ye=2*C.xpad+Oe+C.borderwidth+C.outlinewidth/2,nt=_e-be;S.select("."+A.cbbg).attr({x:le-C.xpad-(C.borderwidth+C.outlinewidth)/2,y:be-ie,width:Math.max(Ye,2),height:Math.max(nt+2*ie,2)}).call(i.fill,C.bgcolor).call(i.stroke,C.bordercolor).style("stroke-width",C.borderwidth),S.selectAll("."+A.cboutline).attr({x:le,y:be+C.ypad+("top"===q?He:0),width:Math.max(J,2),height:Math.max(nt-2*C.ypad-He,2)}).call(i.stroke,C.outlinecolor).style({fill:"none","stroke-width":C.outlinewidth}),S.attr("transform",a(U.l-({center:.5,right:1}[C.xanchor]||0)*Ye,U.t));var dt={},Rt=w[C.yanchor],Et=_[C.yanchor];"pixels"===C.lenmode?(dt.y=C.y,dt.t=nt*Rt,dt.b=nt*Et):(dt.t=dt.b=0,dt.yt=C.y+C.len*Rt,dt.yb=C.y-C.len*Et);var at=w[C.xanchor],rt=_[C.xanchor];if("pixels"===C.thicknessmode)dt.x=C.x,dt.l=Ye*at,dt.r=Ye*rt;else{var St=Ye-J;dt.l=St*at,dt.r=St*rt,dt.xl=C.x-C.thickness*at,dt.xr=C.x+C.thickness*rt}u.autoMargin(z,C._id,dt)}],z)}(O,k,T);D&&D.then&&(T._promises||[]).push(D),T._context.edits.colorbarPosition&&(C=k,X=(z=T)._fullLayout._size,n.init({element:(S=O).node(),gd:z,prepFn:function(){B=S.attr("transform"),f(S)},moveFn:function(Z,q){S.attr("transform",B+a(Z,q)),U=n.align(C._xLeftFrac+Z/X.w,C._thickFrac,0,1,C.xanchor),G=n.align(C._yBottomFrac-q/X.h,C._lenFrac,0,1,C.yanchor);var W=n.getCursor(U,G,C.xanchor,C.yanchor);f(S,W)},doneFn:function(){if(f(S),void 0!==U&&void 0!==G){var Z={};Z[C._propPrefix+"x"]=U,Z[C._propPrefix+"y"]=G,void 0!==C._traceIndex?y.call("_guiRestyle",z,Z,C._traceIndex):y.call("_guiRelayout",z,Z)}}}))}),E.exit().each(function(k){u.autoMargin(T,k._id)}).remove(),E.order()}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(x,Q,K){"use strict";var p=x("../../lib");Q.exports=function(v){return p.isPlainObject(v.colorbar)}},{"../../lib":503}],372:[function(x,Q,K){"use strict";Q.exports={moduleType:"component",name:"colorbar",attributes:x("./attributes"),supplyDefaults:x("./defaults"),draw:x("./draw").draw,hasColorbar:x("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(x,Q,K){"use strict";var p=x("../colorbar/attributes"),v=x("../../lib/regex").counter,u=x("../../lib/sort_object_keys"),y=x("./scales.js").scales;function e(n){return"`"+n+"`"}u(y),Q.exports=function(n,t){n=n||"";var a,r=(t=t||{}).cLetter||"c",f=("onlyIfNumerical"in t||Boolean(n),"noScale"in t?t.noScale:"marker.line"===n),s="showScaleDflt"in t?t.showScaleDflt:"z"===r,i="string"==typeof t.colorscaleDflt?y[t.colorscaleDflt]:null,l=t.editTypeOverride||"",c=n?n+".":"";"colorAttr"in t?a=t.colorAttr:e(c+(a={z:"z",c:"color"}[r]));var h=r+"auto",m=r+"min",d=r+"max",o=r+"mid",b=(e(c+h),e(c+m),e(c+d),{});b[m]=b[d]=void 0;var g={};g[h]=!1;var w={};return"color"===a&&(w.color={valType:"color",arrayOk:!0,editType:l||"style"},t.anim&&(w.color.anim=!0)),w[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:b},w[m]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:g},w[d]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:g},w[o]={valType:"number",dflt:null,editType:"calc",impliedEdits:b},w.colorscale={valType:"colorscale",editType:"calc",dflt:i,impliedEdits:{autocolorscale:!1}},w.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},w.reversescale={valType:"boolean",dflt:!1,editType:"plot"},f||(w.showscale={valType:"boolean",dflt:s,editType:"calc"},w.colorbar=p),t.noColorAxis||(w.coloraxis={valType:"subplotid",regex:v("coloraxis"),dflt:null,editType:"calc"}),w}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib"),u=x("./helpers").extractOpts;Q.exports=function(y,e,n){var a=y._fullLayout,r=n.vals,f=n.containerStr,s=f?v.nestedProperty(e,f).get():e,i=u(s),l=!1!==i.auto,c=i.min,h=i.max,m=i.mid,d=function(){return v.aggNums(Math.min,null,r)},o=function(){return v.aggNums(Math.max,null,r)};void 0===c?c=d():l&&(c=s._colorAx&&p(c)?Math.min(c,d()):d()),void 0===h?h=o():l&&(h=s._colorAx&&p(h)?Math.max(h,o()):o()),l&&void 0!==m&&(h-m>m-c?c=m-(h-m):h-m<m-c&&(h=m+(m-c))),c===h&&(c-=.5,h+=.5),i._sync("min",c),i._sync("max",h),i.autocolorscale&&i._sync("colorscale",c*h<0?a.colorscale.diverging:c>=0?a.colorscale.sequential:a.colorscale.sequentialminus)}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./helpers").hasColorscale,u=x("./helpers").extractOpts;Q.exports=function(y,e){function n(l,c){var h=l["_"+c];void 0!==h&&(l[c]=h)}function t(l,c){var h=c.container?p.nestedProperty(l,c.container).get():l;if(h)if(h.coloraxis)h._colorAx=e[h.coloraxis];else{var m=u(h),d=m.auto;(d||void 0===m.min)&&n(h,c.min),(d||void 0===m.max)&&n(h,c.max),m.autocolorscale&&n(h,"colorscale")}}for(var a=0;a<y.length;a++){var r=y[a],f=r._module.colorbar;if(f)if(Array.isArray(f))for(var s=0;s<f.length;s++)t(r,f[s]);else t(r,f);v(r,"marker.line")&&t(r,{container:"marker.line",min:"cmin",max:"cmax"})}for(var i in e._colorAxes)t(e[i],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib"),u=x("../colorbar/has_colorbar"),y=x("../colorbar/defaults"),e=x("./scales").isValid,n=x("../../registry").traceIs;function t(a,r){var f=r.slice(0,r.length-1);return r?v.nestedProperty(a,f).get()||{}:a}Q.exports=function a(r,f,s,i,l){var c=l.prefix,h=l.cLetter,m="_module"in f,d=t(r,c),o=t(f,c),b=t(f._template||{},c)||{},g=function(){return delete r.coloraxis,delete f.coloraxis,a(r,f,s,i,l)};if(m){var w=s._colorAxes||{},_=i(c+"coloraxis");if(_){var A=n(f,"contour")&&v.nestedProperty(f,"contours.coloring").get()||"heatmap",T=w[_];return void(T?(T[2].push(g),T[0]!==A&&(T[0]=!1,v.warn(["Ignoring coloraxis:",_,"setting","as it is linked to incompatible colorscales."].join(" ")))):w[_]=[A,f,[g]])}}var E=d[h+"min"],k=d[h+"max"],O=p(E)&&p(k)&&E<k;i(c+h+"auto",!O)?i(c+h+"mid"):(i(c+h+"min"),i(c+h+"max"));var D,S,C=d.colorscale,z=b.colorscale;void 0!==C&&(D=!e(C)),void 0!==z&&(D=!e(z)),i(c+"autocolorscale",D),i(c+"colorscale"),i(c+"reversescale"),"marker.line."!==c&&(c&&m&&(S=u(d)),i(c+"showscale",S)&&(c&&b&&(o._template=b),y(d,o,s)))}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("tinycolor2"),u=x("fast-isnumeric"),y=x("../../lib"),e=x("../color"),n=x("./scales").isValid,t=["showscale","autocolorscale","colorscale","reversescale","colorbar"],a=["min","max","mid","auto"];function r(c){var h,m,d,o=c._colorAx,b=o||c,g={};for(m=0;m<t.length;m++)g[d=t[m]]=b[d];if(o)for(h="c",m=0;m<a.length;m++)g[d=a[m]]=b["c"+d];else{var w;for(m=0;m<a.length;m++)((w="c"+(d=a[m]))in b||(w="z"+d)in b)&&(g[d]=b[w]);h=w.charAt(0)}return g._sync=function(_,A){var T=-1!==a.indexOf(_)?h+_:_;b[T]=b["_"+T]=A},g}function f(c){for(var h=r(c),m=h.min,d=h.max,o=h.reversescale?s(h.colorscale):h.colorscale,b=o.length,g=new Array(b),w=new Array(b),_=0;_<b;_++){var A=o[_];g[_]=m+A[0]*(d-m),w[_]=A[1]}return{domain:g,range:w}}function s(c){for(var h=c.length,m=new Array(h),d=h-1,o=0;d>=0;d--,o++){var b=c[d];m[o]=[1-b[0],b[1]]}return m}function i(c,h){h=h||{};for(var m=c.domain,d=c.range,o=d.length,b=new Array(o),g=0;g<o;g++){var w=v(d[g]).toRgb();b[g]=[w.r,w.g,w.b,w.a]}var _,A=p.scale.linear().domain(m).range(b).clamp(!0),T=h.noNumericCheck,E=h.returnArray;return(_=T&&E?A:T?function(k){return l(A(k))}:E?function(k){return u(k)?A(k):v(k).isValid()?k:e.defaultLine}:function(k){return u(k)?l(A(k)):v(k).isValid()?k:e.defaultLine}).domain=A.domain,_.range=function(){return d},_}function l(c){return v({r:c[0],g:c[1],b:c[2],a:c[3]}).toRgbString()}Q.exports={hasColorscale:function(c,h,m){var d=h?y.nestedProperty(c,h).get()||{}:c,o=d[m||"color"],b=!1;if(y.isArrayOrTypedArray(o))for(var g=0;g<o.length;g++)if(u(o[g])){b=!0;break}return y.isPlainObject(d)&&(b||!0===d.showscale||u(d.cmin)&&u(d.cmax)||n(d.colorscale)||y.isPlainObject(d.colorbar))},extractOpts:r,extractScale:f,flipScale:s,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:function(c,h){return i(f(c),h)}}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(x,Q,K){"use strict";var p=x("./scales"),v=x("./helpers");Q.exports={moduleType:"component",name:"colorscale",attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyLayoutDefaults:x("./layout_defaults"),handleDefaults:x("./defaults"),crossTraceDefaults:x("./cross_trace_defaults"),calc:x("./calc"),scales:p.scales,defaultScale:p.defaultScale,getScale:p.get,isValidScale:p.isValid,hasColorscale:v.hasColorscale,extractOpts:v.extractOpts,extractScale:v.extractScale,flipScale:v.flipScale,makeColorScaleFunc:v.makeColorScaleFunc,makeColorScaleFuncFromTrace:v.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(x,Q,K){"use strict";var p=x("../../lib/extend").extendFlat,v=x("./attributes"),u=x("./scales").scales;Q.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:u.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:u.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:u.RdBu,editType:"calc"}},coloraxis:p({_isSubplotObj:!0,editType:"calc"},v("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plot_api/plot_template"),u=x("./layout_attributes"),y=x("./defaults");Q.exports=function(e,n){function t(h,m){return p.coerce(e,n,u,h,m)}t("colorscale.sequential"),t("colorscale.sequentialminus"),t("colorscale.diverging");var a,r,f=n._colorAxes;function s(h,m){return p.coerce(a,r,u.coloraxis,h,m)}for(var i in f){var l=f[i];if(l[0])a=e[i]||{},(r=v.newContainer(n,i,"coloraxis"))._name=i,y(a,r,n,s,{prefix:"",cLetter:"c"});else{for(var c=0;c<l[2].length;c++)l[2][c]();delete n._colorAxes[i]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(x,Q,K){"use strict";var p=x("tinycolor2"),v={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},u=v.RdBu;function y(e){var n=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var t=0;t<e.length;t++){var a=e[t];if(2!==a.length||+a[0]<n||!p(a[1]).isValid())return!1;n=+a[0]}return!0}Q.exports={scales:v,defaultScale:u,get:function(e,n){if(n||(n=u),!e)return n;function t(){try{e=v[e]||JSON.parse(e)}catch(a){e=n}}return"string"==typeof e&&(t(),"string"==typeof e&&t()),y(e)?e:n},isValid:function(e){return void 0!==v[e]||y(e)}}},{tinycolor2:312}],382:[function(x,Q,K){"use strict";Q.exports=function(p,v,u,y,e){var n=(p-u)/(y-u),t=n+v/(y-u),a=(n+t)/2;return"left"===e||"bottom"===e?n:"center"===e||"middle"===e?a:"right"===e||"top"===e?t:n<2/3-a?n:t>4/3-a?t:a}},{}],383:[function(x,Q,K){"use strict";var p=x("../../lib"),v=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];Q.exports=function(u,y,e,n){return u="left"===e?0:"center"===e?1:"right"===e?2:p.constrain(Math.floor(3*u),0,2),y="bottom"===n?0:"middle"===n?1:"top"===n?2:p.constrain(Math.floor(3*y),0,2),v[y][u]}},{"../../lib":503}],384:[function(x,Q,K){"use strict";K.selectMode=function(p){return"lasso"===p||"select"===p},K.drawMode=function(p){return"drawclosedpath"===p||"drawopenpath"===p||"drawline"===p||"drawrect"===p||"drawcircle"===p},K.openMode=function(p){return"drawline"===p||"drawopenpath"===p},K.rectMode=function(p){return"select"===p||"drawline"===p||"drawrect"===p||"drawcircle"===p},K.freeMode=function(p){return"lasso"===p||"drawclosedpath"===p||"drawopenpath"===p},K.selectingOrDrawing=function(p){return K.freeMode(p)||K.rectMode(p)}},{}],385:[function(x,Q,K){"use strict";var p=x("mouse-event-offset"),v=x("has-hover"),u=x("has-passive-events"),y=x("../../lib").removeElement,e=x("../../plots/cartesian/constants"),n=Q.exports={};n.align=x("./align"),n.getCursor=x("./cursor");var t=x("./unhover");function a(){var f=document.createElement("div");f.className="dragcover";var s=f.style;return s.position="fixed",s.left=0,s.right=0,s.top=0,s.bottom=0,s.zIndex=999999999,s.background="none",document.body.appendChild(f),f}function r(f){return p(f.changedTouches?f.changedTouches[0]:f,document.body)}n.unhover=t.wrapped,n.unhoverRaw=t.raw,n.init=function(f){var s,i,l,c,h,m,d,o,b=f.gd,g=1,w=b._context.doubleClickDelay,_=f.element;b._mouseDownTime||(b._mouseDownTime=0),_.style.pointerEvents="all",_.onmousedown=T,u?(_._ontouchstart&&_.removeEventListener("touchstart",_._ontouchstart),_._ontouchstart=T,_.addEventListener("touchstart",T,{passive:!1})):_.ontouchstart=T;var A=f.clampFn||function(O,D,S){return Math.abs(O)<S&&(O=0),Math.abs(D)<S&&(D=0),[O,D]};function T(O){b._dragged=!1,b._dragging=!0;var D=r(O);s=D[0],i=D[1],d=O.target,m=O,o=2===O.buttons||O.ctrlKey,void 0===O.clientX&&void 0===O.clientY&&(O.clientX=s,O.clientY=i),(l=(new Date).getTime())-b._mouseDownTime<w?g+=1:(g=1,b._mouseDownTime=l),f.prepFn&&f.prepFn(O,s,i),v&&!o?(h=a()).style.cursor=window.getComputedStyle(_).cursor:v||(h=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(_).cursor),document.addEventListener("mouseup",k),document.addEventListener("touchend",k),!1!==f.dragmode&&(O.preventDefault(),document.addEventListener("mousemove",E),document.addEventListener("touchmove",E,{passive:!1}))}function E(O){O.preventDefault();var D=r(O),C=A(D[0]-s,D[1]-i,f.minDrag||e.MINDRAG),z=C[0],B=C[1];(z||B)&&(b._dragged=!0,n.unhover(b,O)),b._dragged&&f.moveFn&&!o&&(b._dragdata={element:_,dx:z,dy:B},f.moveFn(z,B))}function k(O){if(delete b._dragdata,!1!==f.dragmode&&(O.preventDefault(),document.removeEventListener("mousemove",E),document.removeEventListener("touchmove",E)),document.removeEventListener("mouseup",k),document.removeEventListener("touchend",k),v?y(h):c&&(h.documentElement.style.cursor=c,c=null),b._dragging){if(b._dragging=!1,(new Date).getTime()-b._mouseDownTime>w&&(g=Math.max(g-1,1)),b._dragged)f.doneFn&&f.doneFn();else if(f.clickFn&&f.clickFn(g,m),!o){var D;try{D=new MouseEvent("click",O)}catch(C){var S=r(O);(D=document.createEvent("MouseEvents")).initMouseEvent("click",O.bubbles,O.cancelable,O.view,O.detail,O.screenX,O.screenY,S[0],S[1],O.ctrlKey,O.altKey,O.shiftKey,O.metaKey,O.button,O.relatedTarget)}d.dispatchEvent(D)}b._dragging=!1,b._dragged=!1}else b._dragged=!1}},n.coverSlip=a},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(x,Q,K){"use strict";var p=x("../../lib/events"),v=x("../../lib/throttle"),u=x("../../lib/dom").getGraphDiv,y=x("../fx/constants"),e=Q.exports={};e.wrapped=function(n,t,a){(n=u(n))._fullLayout&&v.clear(n._fullLayout._uid+y.HOVERID),e.raw(n,t,a)},e.raw=function(n,t){var a=n._fullLayout,r=n._hoverdata;t||(t={}),t.target&&!n._dragged&&!1===p.triggerHandler(n,"plotly_beforehover",t)||(a._hoverlayer.selectAll("g").remove(),a._hoverlayer.selectAll("line").remove(),a._hoverlayer.selectAll("circle").remove(),n._hoverdata=void 0,t.target&&r&&n.emit("plotly_unhover",{event:t,points:r}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(x,Q,K){"use strict";K.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},K.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=v.numberFormat,y=x("fast-isnumeric"),e=x("tinycolor2"),n=x("../../registry"),t=x("../color"),a=x("../colorscale"),r=v.strTranslate,f=x("../../lib/svg_text_utils"),s=x("../../constants/xmlns_namespaces"),i=x("../../constants/alignment").LINE_SPACING,l=x("../../constants/interactions").DESELECTDIM,c=x("../../traces/scatter/subtypes"),h=x("../../traces/scatter/make_bubble_size_func"),m=x("../../components/fx/helpers").appendArrayPointValue,d=Q.exports={};d.font=function(Z,q,W,te){v.isPlainObject(q)&&(te=q.color,W=q.size,q=q.family),q&&Z.style("font-family",q),W+1&&Z.style("font-size",W+"px"),te&&Z.call(t.fill,te)},d.setPosition=function(Z,q,W){Z.attr("x",q).attr("y",W)},d.setSize=function(Z,q,W){Z.attr("width",q).attr("height",W)},d.setRect=function(Z,q,W,te,R){Z.call(d.setPosition,q,W).call(d.setSize,te,R)},d.translatePoint=function(Z,q,W,te){var R=W.c2p(Z.x),N=te.c2p(Z.y);return!!(y(R)&&y(N)&&q.node())&&("text"===q.node().nodeName?q.attr("x",R).attr("y",N):q.attr("transform",r(R,N)),!0)},d.translatePoints=function(Z,q,W){Z.each(function(te){var R=p.select(this);d.translatePoint(te,R,q,W)})},d.hideOutsideRangePoint=function(Z,q,W,te,R,N){q.attr("display",W.isPtWithinRange(Z,R)&&te.isPtWithinRange(Z,N)?null:"none")},d.hideOutsideRangePoints=function(Z,q){if(q._hasClipOnAxisFalse){var W=q.xaxis,te=q.yaxis;Z.each(function(R){var N=R[0].trace,V=N.xcalendar,ee=N.ycalendar,j=n.traceIs(N,"bar-like")?".bartext":".point,.textpoint";Z.selectAll(j).each(function(J){d.hideOutsideRangePoint(J,p.select(this),W,te,V,ee)})})}},d.crispRound=function(Z,q,W){return q&&y(q)?Z._context.staticPlot?q:q<1?1:Math.round(q):W||0},d.singleLineStyle=function(Z,q,W,te,R){q.style("fill","none");var N=(((Z||[])[0]||{}).trace||{}).line||{},V=W||N.width||0,ee=R||N.dash||"";t.stroke(q,te||N.color),d.dashLine(q,ee,V)},d.lineGroupStyle=function(Z,q,W,te){Z.style("fill","none").each(function(R){var N=(((R||[])[0]||{}).trace||{}).line||{},V=q||N.width||0,ee=te||N.dash||"";p.select(this).call(t.stroke,W||N.color).call(d.dashLine,ee,V)})},d.dashLine=function(Z,q,W){q=d.dashStyle(q,W=+W||0),Z.style({"stroke-dasharray":q,"stroke-width":W+"px"})},d.dashStyle=function(Z,q){q=+q||1;var W=Math.max(q,3);return"solid"===Z?Z="":"dot"===Z?Z=W+"px,"+W+"px":"dash"===Z?Z=3*W+"px,"+3*W+"px":"longdash"===Z?Z=5*W+"px,"+5*W+"px":"dashdot"===Z?Z=3*W+"px,"+W+"px,"+W+"px,"+W+"px":"longdashdot"===Z&&(Z=5*W+"px,"+2*W+"px,"+W+"px,"+2*W+"px"),Z},d.singleFillStyle=function(Z){var q=(((p.select(Z.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;q&&Z.call(t.fill,q)},d.fillGroupStyle=function(Z){Z.style("stroke-width",0).each(function(q){var W=p.select(this);q[0].trace&&W.call(t.fill,q[0].trace.fillcolor)})};var o=x("./symbol_defs");d.symbolNames=[],d.symbolFuncs=[],d.symbolNeedLines={},d.symbolNoDot={},d.symbolNoFill={},d.symbolList=[],Object.keys(o).forEach(function(Z){var q=o[Z],W=q.n;d.symbolList.push(W,String(W),Z,W+100,String(W+100),Z+"-open"),d.symbolNames[W]=Z,d.symbolFuncs[W]=q.f,q.needLine&&(d.symbolNeedLines[W]=!0),q.noDot?d.symbolNoDot[W]=!0:d.symbolList.push(W+200,String(W+200),Z+"-dot",W+300,String(W+300),Z+"-open-dot"),q.noFill&&(d.symbolNoFill[W]=!0)});var b=d.symbolNames.length;function g(Z,q){return d.symbolFuncs[Z%100](q)+(Z>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}d.symbolNumber=function(Z){if(y(Z))Z=+Z;else if("string"==typeof Z){var q=0;Z.indexOf("-open")>0&&(q=100,Z=Z.replace("-open","")),Z.indexOf("-dot")>0&&(q+=200,Z=Z.replace("-dot","")),(Z=d.symbolNames.indexOf(Z))>=0&&(Z+=q)}return Z%100>=b||Z>=400?0:Math.floor(Math.max(Z,0))};var w={x1:1,x2:0,y1:0,y2:0},_={x1:0,x2:0,y1:1,y2:0},A=u("~f"),T={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:w},horizontalreversed:{node:"linearGradient",attrs:w,reversed:!0},vertical:{node:"linearGradient",attrs:_},verticalreversed:{node:"linearGradient",attrs:_,reversed:!0}};d.gradient=function(Z,q,W,te,R,N){for(var V=R.length,ee=T[te],j=new Array(V),J=0;J<V;J++)ee.reversed?j[V-1-J]=[A(100*(1-R[J][0])),R[J][1]]:j[J]=[A(100*R[J][0]),R[J][1]];var $=q._fullLayout,re="g"+$._uid+"-"+W,ne=$._defs.select(".gradients").selectAll("#"+re).data([te+j.join(";")],v.identity);ne.exit().remove(),ne.enter().append(ee.node).each(function(){var ue=p.select(this);ee.attrs&&ue.attr(ee.attrs),ue.attr("id",re);var le=ue.selectAll("stop").data(j);le.exit().remove(),le.enter().append("stop"),le.each(function(de){var ve=e(de[1]);p.select(this).attr({offset:de[0]+"%","stop-color":t.tinyRGB(ve),"stop-opacity":ve.getAlpha()})})}),Z.style(N,U(re,q)).style(N+"-opacity",null);var se=function(ue){return"."+ue.attr("class").replace(/\s/g,".")},ie=se(p.select(Z.node().parentNode))+">"+se(Z);$._gradientUrlQueryParts[ie]=1},d.pattern=function(Z,q,W,te,R,N,V,ee,j,J,$,re){var ne="legend"===q;ee&&("overlay"===j?$=t.contrast(J=ee):(J=void 0,$=ee));var se,ie,ue,le,de,ve,_e,be,he,Ae=W._fullLayout,we="p"+Ae._uid+"-"+te,Se={};switch(R){case"/":se=N*Math.sqrt(2),ie=N*Math.sqrt(2),ve="path",Se={d:ue="M-"+se/4+","+ie/4+"l"+se/2+",-"+ie/2+"M0,"+ie+"L"+se+",0M"+se/4*3+","+ie/4*5+"l"+se/2+",-"+ie/2,opacity:re,stroke:$,"stroke-width":(le=V*N)+"px"};break;case"\\":se=N*Math.sqrt(2),ie=N*Math.sqrt(2),ve="path",Se={d:ue="M"+se/4*3+",-"+ie/4+"l"+se/2+","+ie/2+"M0,0L"+se+","+ie+"M-"+se/4+","+ie/4*3+"l"+se/2+","+ie/2,opacity:re,stroke:$,"stroke-width":(le=V*N)+"px"};break;case"x":se=N*Math.sqrt(2),ie=N*Math.sqrt(2),ue="M-"+se/4+","+ie/4+"l"+se/2+",-"+ie/2+"M0,"+ie+"L"+se+",0M"+se/4*3+","+ie/4*5+"l"+se/2+",-"+ie/2+"M"+se/4*3+",-"+ie/4+"l"+se/2+","+ie/2+"M0,0L"+se+","+ie+"M-"+se/4+","+ie/4*3+"l"+se/2+","+ie/2,le=N-N*Math.sqrt(1-V),ve="path",Se={d:ue,opacity:re,stroke:$,"stroke-width":le+"px"};break;case"|":ve="path",ve="path",Se={d:ue="M"+(se=N)/2+",0L"+se/2+","+(ie=N),opacity:re,stroke:$,"stroke-width":(le=V*N)+"px"};break;case"-":ve="path",ve="path",Se={d:ue="M0,"+(ie=N)/2+"L"+(se=N)+","+ie/2,opacity:re,stroke:$,"stroke-width":(le=V*N)+"px"};break;case"+":ve="path",ue="M"+(se=N)/2+",0L"+se/2+","+(ie=N)+"M0,"+ie/2+"L"+se+","+ie/2,le=N-N*Math.sqrt(1-V),ve="path",Se={d:ue,opacity:re,stroke:$,"stroke-width":le+"px"};break;case".":se=N,ie=N,V<Math.PI/4?de=Math.sqrt(V*N*N/Math.PI):(_e=V,be=Math.PI/4,1,de=(he=N/2)+(N/Math.sqrt(2)-he)*(_e-be)/(1-be)),ve="circle",Se={cx:se/2,cy:ie/2,r:de,opacity:re,fill:$}}var Pe=[R||"noSh",J||"noBg",$||"noFg",N,V].join(";"),ze=Ae._defs.select(".patterns").selectAll("#"+we).data([Pe],v.identity);ze.exit().remove(),ze.enter().append("pattern").each(function(){var tt=p.select(this);if(tt.attr({id:we,width:se+"px",height:ie+"px",patternUnits:"userSpaceOnUse",patternTransform:ne?"scale(0.8)":""}),J){var Oe=tt.selectAll("rect").data([0]);Oe.exit().remove(),Oe.enter().append("rect").attr({width:se+"px",height:ie+"px",fill:J})}var Be=tt.selectAll(ve).data([0]);Be.exit().remove(),Be.enter().append(ve).attr(Se)}),Z.style("fill",U(we,W)).style("fill-opacity",null),Z.classed("pattern_filled",!0);var He="."+p.select(Z.node().parentNode).attr("class").replace(/\s/g,".")+">.pattern_filled";Ae._patternUrlQueryParts[He]=1},d.initGradients=function(Z){var q=Z._fullLayout;v.ensureSingle(q._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),q._gradientUrlQueryParts={}},d.initPatterns=function(Z){var q=Z._fullLayout;v.ensureSingle(q._defs,"g","patterns").selectAll("pattern").remove(),q._patternUrlQueryParts={}},d.getPatternAttr=function(Z,q,W){return Z&&v.isArrayOrTypedArray(Z)?q<Z.length?Z[q]:W:Z},d.pointStyle=function(Z,q,W){if(Z.size()){var te=d.makePointStyleFns(q);Z.each(function(R){d.singlePointStyle(R,p.select(this),q,te,W)})}},d.singlePointStyle=function(Z,q,W,te,R){var N=W.marker,V=N.line;if(q.style("opacity",te.selectedOpacityFn?te.selectedOpacityFn(Z):void 0===Z.mo?N.opacity:Z.mo),te.ms2mrc){var ee;ee="various"===Z.ms||"various"===N.size?3:te.ms2mrc(Z.ms),Z.mrc=ee,te.selectedSizeFn&&(ee=Z.mrc=te.selectedSizeFn(Z));var j=d.symbolNumber(Z.mx||N.symbol)||0;Z.om=j%200>=100,q.attr("d",g(j,ee))}var J,$,re,ne=!1;if(Z.so?(re=V.outlierwidth,$=V.outliercolor,J=N.outliercolor):(re=(Z.mlw+1||(V||{}).width+1||(Z.trace?(Z.trace.marker.line||{}).width:0)+1)-1||0,$="mlc"in Z?Z.mlcc=te.lineScale(Z.mlc):v.isArrayOrTypedArray(V.color)?t.defaultLine:V.color,v.isArrayOrTypedArray(N.color)&&(J=t.defaultLine,ne=!0),J="mc"in Z?Z.mcc=te.markerScale(Z.mc):N.color||"rgba(0,0,0,0)",te.selectedColorFn&&(J=te.selectedColorFn(Z))),Z.om)q.call(t.stroke,J).style({"stroke-width":(re||1)+"px",fill:"none"});else{q.style("stroke-width",(Z.isBlank?0:re)+"px");var ie=N.gradient,ue=Z.mgt;ue?ne=!0:ue=ie&&ie.type,v.isArrayOrTypedArray(ue)&&(T[ue=ue[0]]||(ue=0));var le=N.pattern,de=le&&d.getPatternAttr(le.shape,Z.i,"");if(ue&&"none"!==ue){var ve=Z.mgc;ve?ne=!0:ve=ie.color;var _e=W.uid;ne&&(_e+="-"+Z.i),d.gradient(q,R,_e,ue,[[0,ve],[1,J]],"fill")}else if(de){var be=d.getPatternAttr(le.bgcolor,Z.i,null),Te=d.getPatternAttr(le.fgcolor,Z.i,null),he=le.fgopacity,me=d.getPatternAttr(le.size,Z.i,8),Ae=d.getPatternAttr(le.solidity,Z.i,.3),we=Z.mcc||v.isArrayOrTypedArray(le.shape)||v.isArrayOrTypedArray(le.bgcolor)||v.isArrayOrTypedArray(le.size)||v.isArrayOrTypedArray(le.solidity),Se=W.uid;we&&(Se+="-"+Z.i),d.pattern(q,"point",R,Se,de,me,Ae,Z.mcc,le.fillmode,be,Te,he)}else t.fill(q,J);re&&t.stroke(q,$)}},d.makePointStyleFns=function(Z){var q={},W=Z.marker;return q.markerScale=d.tryColorscale(W,""),q.lineScale=d.tryColorscale(W,"line"),n.traceIs(Z,"symbols")&&(q.ms2mrc=c.isBubble(Z)?h(Z):function(){return(W.size||6)/2}),Z.selectedpoints&&v.extendFlat(q,d.makeSelectedPointStyleFns(Z)),q},d.makeSelectedPointStyleFns=function(Z){var q={},R=Z.marker||{},N=(Z.selected||{}).marker||{},V=(Z.unselected||{}).marker||{},j=N.opacity,J=V.opacity,$=void 0!==j,re=void 0!==J;(v.isArrayOrTypedArray(R.opacity)||$||re)&&(q.selectedOpacityFn=function(be){var Te=void 0===be.mo?R.opacity:be.mo;return be.selected?$?j:Te:re?J:l*Te});var ne=R.color,se=N.color,ie=V.color;(se||ie)&&(q.selectedColorFn=function(be){var Te=be.mcc||ne;return be.selected?se||Te:ie||Te});var ue=R.size,le=N.size,de=V.size,ve=void 0!==le,_e=void 0!==de;return n.traceIs(Z,"symbols")&&(ve||_e)&&(q.selectedSizeFn=function(be){var Te=be.mrc||ue/2;return be.selected?ve?le/2:Te:_e?de/2:Te}),q},d.makeSelectedTextStyleFns=function(Z){var q={},ee=(Z.textfont||{}).color,j=((Z.selected||{}).textfont||{}).color,J=((Z.unselected||{}).textfont||{}).color;return q.selectedTextColorFn=function($){var re=$.tc||ee;return $.selected?j||re:J||(j?re:t.addOpacity(re,l))},q},d.selectedPointStyle=function(Z,q){if(Z.size()&&q.selectedpoints){var W=d.makeSelectedPointStyleFns(q),te=q.marker||{},R=[];W.selectedOpacityFn&&R.push(function(N,V){N.style("opacity",W.selectedOpacityFn(V))}),W.selectedColorFn&&R.push(function(N,V){t.fill(N,W.selectedColorFn(V))}),W.selectedSizeFn&&R.push(function(N,V){var ee=V.mx||te.symbol||0,j=W.selectedSizeFn(V);N.attr("d",g(d.symbolNumber(ee),j)),V.mrc2=j}),R.length&&Z.each(function(N){for(var V=p.select(this),ee=0;ee<R.length;ee++)R[ee](V,N)})}},d.tryColorscale=function(Z,q){var W=q?v.nestedProperty(Z,q).get():Z;return W&&(W.colorscale||W._colorAx)&&v.isArrayOrTypedArray(W.color)?a.makeColorScaleFuncFromTrace(W):v.identity};var E={start:1,end:-1,middle:0,bottom:1,top:-1};function k(Z,q,W,te){var R=p.select(Z.node().parentNode),N=-1!==q.indexOf("top")?"top":-1!==q.indexOf("bottom")?"bottom":"middle",V=-1!==q.indexOf("left")?"end":-1!==q.indexOf("right")?"start":"middle",ee=te?te/.8+1:0,j=(f.lineCount(Z)-1)*i+1,J=E[V]*ee,$=.75*W+E[N]*ee+(E[N]-1)*j*W/2;Z.attr("text-anchor",V),R.attr("transform",r(J,$))}function O(Z,q){var W=Z.ts||q.textfont.size;return y(W)&&W>0?W:0}function D(Z,q,W,te){var R=Z[0]-q[0],N=Z[1]-q[1],V=W[0]-q[0],ee=W[1]-q[1],j=Math.pow(R*R+N*N,.25),J=Math.pow(V*V+ee*ee,.25),$=(J*J*R-j*j*V)*te,re=(J*J*N-j*j*ee)*te,ne=3*J*(j+J),se=3*j*(j+J);return[[p.round(q[0]+(ne&&$/ne),2),p.round(q[1]+(ne&&re/ne),2)],[p.round(q[0]-(se&&$/se),2),p.round(q[1]-(se&&re/se),2)]]}d.textPointStyle=function(Z,q,W){if(Z.size()){var te;if(q.selectedpoints){var R=d.makeSelectedTextStyleFns(q);te=R.selectedTextColorFn}var N=q.texttemplate,V=W._fullLayout;Z.each(function(ee){var j=p.select(this),J=N?v.extractOption(ee,q,"txt","texttemplate"):v.extractOption(ee,q,"tx","text");if(J||0===J){if(N){var $=q._module.formatLabels,re=$?$(ee,q,V):{},ne={};m(ne,q,ee.i),J=v.texttemplateString(J,re,V._d3locale,ne,ee,q._meta||{})}var ie=ee.tp||q.textposition,ue=O(ee,q),le=te?te(ee):ee.tc||q.textfont.color;j.call(d.font,ee.tf||q.textfont.family,ue,le).text(J).call(f.convertToTspans,W).call(k,ie,ue,ee.mrc)}else j.remove()})}},d.selectedTextStyle=function(Z,q){if(Z.size()&&q.selectedpoints){var W=d.makeSelectedTextStyleFns(q);Z.each(function(te){var R=p.select(this),N=W.selectedTextColorFn(te),V=te.tp||q.textposition,ee=O(te,q);t.fill(R,N),k(R,V,ee,te.mrc2||te.mrc)})}},d.smoothopen=function(Z,q){if(Z.length<3)return"M"+Z.join("L");var W,te="M"+Z[0],R=[];for(W=1;W<Z.length-1;W++)R.push(D(Z[W-1],Z[W],Z[W+1],q));for(te+="Q"+R[0][0]+" "+Z[1],W=2;W<Z.length-1;W++)te+="C"+R[W-2][1]+" "+R[W-1][0]+" "+Z[W];return te+"Q"+R[Z.length-3][1]+" "+Z[Z.length-1]},d.smoothclosed=function(Z,q){if(Z.length<3)return"M"+Z.join("L")+"Z";var W,te="M"+Z[0],R=Z.length-1,N=[D(Z[R],Z[0],Z[1],q)];for(W=1;W<R;W++)N.push(D(Z[W-1],Z[W],Z[W+1],q));for(N.push(D(Z[R-1],Z[R],Z[0],q)),W=1;W<=R;W++)te+="C"+N[W-1][1]+" "+N[W][0]+" "+Z[W];return te+"C"+N[R][1]+" "+N[0][0]+" "+Z[0]+"Z"};var S={hv:function(Z,q){return"H"+p.round(q[0],2)+"V"+p.round(q[1],2)},vh:function(Z,q){return"V"+p.round(q[1],2)+"H"+p.round(q[0],2)},hvh:function(Z,q){return"H"+p.round((Z[0]+q[0])/2,2)+"V"+p.round(q[1],2)+"H"+p.round(q[0],2)},vhv:function(Z,q){return"V"+p.round((Z[1]+q[1])/2,2)+"H"+p.round(q[0],2)+"V"+p.round(q[1],2)}},C=function(Z,q){return"L"+p.round(q[0],2)+","+p.round(q[1],2)};d.steps=function(Z){var q=S[Z]||C;return function(W){for(var te="M"+p.round(W[0][0],2)+","+p.round(W[0][1],2),R=1;R<W.length;R++)te+=q(W[R-1],W[R]);return te}},d.makeTester=function(){var Z=v.ensureSingleById(p.select("body"),"svg","js-plotly-tester",function(W){W.attr(s.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),q=v.ensureSingle(Z,"path","js-reference-point",function(W){W.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});d.tester=Z,d.testref=q},d.savedBBoxes={};var z=0;function B(Z){var q=Z.getAttribute("data-unformatted");if(null!==q)return q+Z.getAttribute("data-math")+Z.getAttribute("text-anchor")+Z.getAttribute("style")}function U(Z,q){if(!Z)return null;var W=q._context,te=W._exportedPlot?"":W._baseUrl||"";return te?"url('"+te+"#"+Z+"')":"url(#"+Z+")"}d.bBox=function(Z,q,W){var te,R,N;if(W||(W=B(Z)),W){if(te=d.savedBBoxes[W])return v.extendFlat({},te)}else if(1===Z.childNodes.length){var V=Z.childNodes[0];if(W=B(V)){var ee=+V.getAttribute("x")||0,j=+V.getAttribute("y")||0,J=V.getAttribute("transform");if(!J){var $=d.bBox(V,!1,W);return ee&&($.left+=ee,$.right+=ee),j&&($.top+=j,$.bottom+=j),$}if(te=d.savedBBoxes[W+="~"+ee+"~"+j+"~"+J])return v.extendFlat({},te)}}q?R=Z:(N=d.tester.node(),R=Z.cloneNode(!0),N.appendChild(R)),p.select(R).attr("transform",null).call(f.positionText,0,0);var re=R.getBoundingClientRect(),ne=d.testref.node().getBoundingClientRect();q||N.removeChild(R);var se={height:re.height,width:re.width,left:re.left-ne.left,top:re.top-ne.top,right:re.right-ne.left,bottom:re.bottom-ne.top};return z>=1e4&&(d.savedBBoxes={},z=0),W&&(d.savedBBoxes[W]=se),z++,v.extendFlat({},se)},d.setClipUrl=function(Z,q,W){Z.attr("clip-path",U(q,W))},d.getTranslate=function(Z){var q=(Z[Z.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(W,te,R){return[te,R].join(" ")}).split(" ");return{x:+q[0]||0,y:+q[1]||0}},d.setTranslate=function(Z,q,W){var R=Z.attr?"attr":"setAttribute",N=Z[Z.attr?"attr":"getAttribute"]("transform")||"";return q=q||0,W=W||0,N=N.replace(/(\btranslate\(.*?\);?)/,"").trim(),N=(N+=r(q,W)).trim(),Z[R]("transform",N),N},d.getScale=function(Z){var q=(Z[Z.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(W,te,R){return[te,R].join(" ")}).split(" ");return{x:+q[0]||1,y:+q[1]||1}},d.setScale=function(Z,q,W){var R=Z.attr?"attr":"setAttribute",N=Z[Z.attr?"attr":"getAttribute"]("transform")||"";return q=q||1,W=W||1,N=N.replace(/(\bscale\(.*?\);?)/,"").trim(),N=(N+="scale("+q+","+W+")").trim(),Z[R]("transform",N),N};var G=/\s*sc.*/;d.setPointGroupScale=function(Z,q,W){if(q=q||1,W=W||1,Z){var te=1===q&&1===W?"":"scale("+q+","+W+")";Z.each(function(){var R=(this.getAttribute("transform")||"").replace(G,"");R=(R+=te).trim(),this.setAttribute("transform",R)})}};var X=/translate\([^)]*\)\s*$/;d.setTextPointsScale=function(Z,q,W){Z&&Z.each(function(){var te,R=p.select(this),N=R.select("text");if(N.node()){var V=parseFloat(N.attr("x")||0),ee=parseFloat(N.attr("y")||0),j=(R.attr("transform")||"").match(X);te=1===q&&1===W?[]:[r(V,ee),"scale("+q+","+W+")",r(-V,-ee)],j&&te.push(j),R.attr("transform",te.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":942,"../../traces/scatter/subtypes":950,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(x,Q,K){"use strict";var p=x("@plotly/d3");Q.exports={circle:{n:0,f:function(v){var u=p.round(v,2);return"M"+u+",0A"+u+","+u+" 0 1,1 0,-"+u+"A"+u+","+u+" 0 0,1 "+u+",0Z"}},square:{n:1,f:function(v){var u=p.round(v,2);return"M"+u+","+u+"H-"+u+"V-"+u+"H"+u+"Z"}},diamond:{n:2,f:function(v){var u=p.round(1.3*v,2);return"M"+u+",0L0,"+u+"L-"+u+",0L0,-"+u+"Z"}},cross:{n:3,f:function(v){var u=p.round(.4*v,2),y=p.round(1.2*v,2);return"M"+y+","+u+"H"+u+"V"+y+"H-"+u+"V"+u+"H-"+y+"V-"+u+"H-"+u+"V-"+y+"H"+u+"V-"+u+"H"+y+"Z"}},x:{n:4,f:function(v){var u=p.round(.8*v/Math.sqrt(2),2),y="l"+u+","+u,e="l"+u+",-"+u,n="l-"+u+",-"+u,t="l-"+u+","+u;return"M0,"+u+y+e+n+e+n+t+n+t+y+t+y+"Z"}},"triangle-up":{n:5,f:function(v){var u=p.round(2*v/Math.sqrt(3),2);return"M-"+u+","+p.round(v/2,2)+"H"+u+"L0,-"+p.round(v,2)+"Z"}},"triangle-down":{n:6,f:function(v){var u=p.round(2*v/Math.sqrt(3),2);return"M-"+u+",-"+p.round(v/2,2)+"H"+u+"L0,"+p.round(v,2)+"Z"}},"triangle-left":{n:7,f:function(v){var u=p.round(2*v/Math.sqrt(3),2);return"M"+p.round(v/2,2)+",-"+u+"V"+u+"L-"+p.round(v,2)+",0Z"}},"triangle-right":{n:8,f:function(v){var u=p.round(2*v/Math.sqrt(3),2);return"M-"+p.round(v/2,2)+",-"+u+"V"+u+"L"+p.round(v,2)+",0Z"}},"triangle-ne":{n:9,f:function(v){var u=p.round(.6*v,2),y=p.round(1.2*v,2);return"M-"+y+",-"+u+"H"+u+"V"+y+"Z"}},"triangle-se":{n:10,f:function(v){var u=p.round(.6*v,2),y=p.round(1.2*v,2);return"M"+u+",-"+y+"V"+u+"H-"+y+"Z"}},"triangle-sw":{n:11,f:function(v){var u=p.round(.6*v,2),y=p.round(1.2*v,2);return"M"+y+","+u+"H-"+u+"V-"+y+"Z"}},"triangle-nw":{n:12,f:function(v){var u=p.round(.6*v,2),y=p.round(1.2*v,2);return"M-"+u+","+y+"V-"+u+"H"+y+"Z"}},pentagon:{n:13,f:function(v){var u=p.round(.951*v,2),y=p.round(.588*v,2),e=p.round(-v,2),n=p.round(-.309*v,2);return"M"+u+","+n+"L"+y+","+p.round(.809*v,2)+"H-"+y+"L-"+u+","+n+"L0,"+e+"Z"}},hexagon:{n:14,f:function(v){var u=p.round(v,2),y=p.round(v/2,2),e=p.round(v*Math.sqrt(3)/2,2);return"M"+e+",-"+y+"V"+y+"L0,"+u+"L-"+e+","+y+"V-"+y+"L0,-"+u+"Z"}},hexagon2:{n:15,f:function(v){var u=p.round(v,2),y=p.round(v/2,2),e=p.round(v*Math.sqrt(3)/2,2);return"M-"+y+","+e+"H"+y+"L"+u+",0L"+y+",-"+e+"H-"+y+"L-"+u+",0Z"}},octagon:{n:16,f:function(v){var u=p.round(.924*v,2),y=p.round(.383*v,2);return"M-"+y+",-"+u+"H"+y+"L"+u+",-"+y+"V"+y+"L"+y+","+u+"H-"+y+"L-"+u+","+y+"V-"+y+"Z"}},star:{n:17,f:function(v){var u=1.4*v,y=p.round(.225*u,2),e=p.round(.951*u,2),n=p.round(.363*u,2),t=p.round(.588*u,2),a=p.round(-u,2),r=p.round(-.309*u,2),f=p.round(.118*u,2),s=p.round(.809*u,2);return"M"+y+","+r+"H"+e+"L"+n+","+f+"L"+t+","+s+"L0,"+p.round(.382*u,2)+"L-"+t+","+s+"L-"+n+","+f+"L-"+e+","+r+"H-"+y+"L0,"+a+"Z"}},hexagram:{n:18,f:function(v){var u=p.round(.66*v,2),y=p.round(.38*v,2),e=p.round(.76*v,2);return"M-"+e+",0l-"+y+",-"+u+"h"+e+"l"+y+",-"+u+"l"+y+","+u+"h"+e+"l-"+y+","+u+"l"+y+","+u+"h-"+e+"l-"+y+","+u+"l-"+y+",-"+u+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(v){var u=p.round(v*Math.sqrt(3)*.8,2),y=p.round(.8*v,2),e=p.round(1.6*v,2),n=p.round(4*v,2),t="A "+n+","+n+" 0 0 1 ";return"M-"+u+","+y+t+u+","+y+t+"0,-"+e+t+"-"+u+","+y+"Z"}},"star-triangle-down":{n:20,f:function(v){var u=p.round(v*Math.sqrt(3)*.8,2),y=p.round(.8*v,2),e=p.round(1.6*v,2),n=p.round(4*v,2),t="A "+n+","+n+" 0 0 1 ";return"M"+u+",-"+y+t+"-"+u+",-"+y+t+"0,"+e+t+u+",-"+y+"Z"}},"star-square":{n:21,f:function(v){var u=p.round(1.1*v,2),y=p.round(2*v,2),e="A "+y+","+y+" 0 0 1 ";return"M-"+u+",-"+u+e+"-"+u+","+u+e+u+","+u+e+u+",-"+u+e+"-"+u+",-"+u+"Z"}},"star-diamond":{n:22,f:function(v){var u=p.round(1.4*v,2),y=p.round(1.9*v,2),e="A "+y+","+y+" 0 0 1 ";return"M-"+u+",0"+e+"0,"+u+e+u+",0"+e+"0,-"+u+e+"-"+u+",0Z"}},"diamond-tall":{n:23,f:function(v){var u=p.round(.7*v,2),y=p.round(1.4*v,2);return"M0,"+y+"L"+u+",0L0,-"+y+"L-"+u+",0Z"}},"diamond-wide":{n:24,f:function(v){var u=p.round(1.4*v,2),y=p.round(.7*v,2);return"M0,"+y+"L"+u+",0L0,-"+y+"L-"+u+",0Z"}},hourglass:{n:25,f:function(v){var u=p.round(v,2);return"M"+u+","+u+"H-"+u+"L"+u+",-"+u+"H-"+u+"Z"},noDot:!0},bowtie:{n:26,f:function(v){var u=p.round(v,2);return"M"+u+","+u+"V-"+u+"L-"+u+","+u+"V-"+u+"Z"},noDot:!0},"circle-cross":{n:27,f:function(v){var u=p.round(v,2);return"M0,"+u+"V-"+u+"M"+u+",0H-"+u+"M"+u+",0A"+u+","+u+" 0 1,1 0,-"+u+"A"+u+","+u+" 0 0,1 "+u+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(v){var u=p.round(v,2),y=p.round(v/Math.sqrt(2),2);return"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y+"M"+u+",0A"+u+","+u+" 0 1,1 0,-"+u+"A"+u+","+u+" 0 0,1 "+u+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(v){var u=p.round(v,2);return"M0,"+u+"V-"+u+"M"+u+",0H-"+u+"M"+u+","+u+"H-"+u+"V-"+u+"H"+u+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(v){var u=p.round(v,2);return"M"+u+","+u+"L-"+u+",-"+u+"M"+u+",-"+u+"L-"+u+","+u+"M"+u+","+u+"H-"+u+"V-"+u+"H"+u+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(v){var u=p.round(1.3*v,2);return"M"+u+",0L0,"+u+"L-"+u+",0L0,-"+u+"ZM0,-"+u+"V"+u+"M-"+u+",0H"+u},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(v){var u=p.round(1.3*v,2),y=p.round(.65*v,2);return"M"+u+",0L0,"+u+"L-"+u+",0L0,-"+u+"ZM-"+y+",-"+y+"L"+y+","+y+"M-"+y+","+y+"L"+y+",-"+y},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(v){var u=p.round(1.4*v,2);return"M0,"+u+"V-"+u+"M"+u+",0H-"+u},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(v){var u=p.round(v,2);return"M"+u+","+u+"L-"+u+",-"+u+"M"+u+",-"+u+"L-"+u+","+u},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(v){var u=p.round(1.2*v,2),y=p.round(.85*v,2);return"M0,"+u+"V-"+u+"M"+u+",0H-"+u+"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(v){var u=p.round(v/2,2),y=p.round(v,2);return"M"+u+","+y+"V-"+y+"m-"+y+",0V"+y+"M"+y+","+u+"H-"+y+"m0,-"+y+"H"+y},needLine:!0,noFill:!0},"y-up":{n:37,f:function(v){var u=p.round(1.2*v,2),y=p.round(1.6*v,2),e=p.round(.8*v,2);return"M-"+u+","+e+"L0,0M"+u+","+e+"L0,0M0,-"+y+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(v){var u=p.round(1.2*v,2),y=p.round(1.6*v,2),e=p.round(.8*v,2);return"M-"+u+",-"+e+"L0,0M"+u+",-"+e+"L0,0M0,"+y+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(v){var u=p.round(1.2*v,2),y=p.round(1.6*v,2),e=p.round(.8*v,2);return"M"+e+","+u+"L0,0M"+e+",-"+u+"L0,0M-"+y+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(v){var u=p.round(1.2*v,2),y=p.round(1.6*v,2),e=p.round(.8*v,2);return"M-"+e+","+u+"L0,0M-"+e+",-"+u+"L0,0M"+y+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(v){var u=p.round(1.4*v,2);return"M"+u+",0H-"+u},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(v){var u=p.round(1.4*v,2);return"M0,"+u+"V-"+u},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(v){var u=p.round(v,2);return"M"+u+",-"+u+"L-"+u+","+u},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(v){var u=p.round(v,2);return"M"+u+","+u+"L-"+u+",-"+u},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(v){var u=p.round(v,2);return"M0,0L-"+u+","+p.round(2*v,2)+"H"+u+"Z"},noDot:!0},"arrow-down":{n:46,f:function(v){var u=p.round(v,2);return"M0,0L-"+u+",-"+p.round(2*v,2)+"H"+u+"Z"},noDot:!0},"arrow-left":{n:47,f:function(v){var u=p.round(2*v,2),y=p.round(v,2);return"M0,0L"+u+",-"+y+"V"+y+"Z"},noDot:!0},"arrow-right":{n:48,f:function(v){var u=p.round(2*v,2),y=p.round(v,2);return"M0,0L-"+u+",-"+y+"V"+y+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(v){var u=p.round(v,2);return"M-"+u+",0H"+u+"M0,0L-"+u+","+p.round(2*v,2)+"H"+u+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(v){var u=p.round(v,2);return"M-"+u+",0H"+u+"M0,0L-"+u+",-"+p.round(2*v,2)+"H"+u+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(v){var u=p.round(2*v,2),y=p.round(v,2);return"M0,-"+y+"V"+y+"M0,0L"+u+",-"+y+"V"+y+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(v){var u=p.round(2*v,2),y=p.round(v,2);return"M0,-"+y+"V"+y+"M0,0L-"+u+",-"+y+"V"+y+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(x,Q,K){"use strict";Q.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../registry"),u=x("../../plots/cartesian/axes"),y=x("../../lib"),e=x("./compute_error");function n(t,a,r,f){var s=a["error_"+f]||{},i=[];if(s.visible&&-1!==["linear","log"].indexOf(r.type)){for(var l=e(s),c=0;c<t.length;c++){var h=t[c],m=h.i;if(void 0===m)m=c;else if(null===m)continue;var d=h[f];if(p(r.c2l(d))){var o=l(d,m);if(p(o[0])&&p(o[1])){var b=h[f+"s"]=d-o[0],g=h[f+"h"]=d+o[1];i.push(b,g)}}}var _=a._extremes[r._id],A=u.findExtremes(r,i,y.extendFlat({tozero:_.opts.tozero},{padded:!0}));_.min=_.min.concat(A.min),_.max=_.max.concat(A.max)}}Q.exports=function(t){for(var a=t.calcdata,r=0;r<a.length;r++){var f=a[r],s=f[0].trace;if(!0===s.visible&&v.traceIs(s,"errorBarsOK")){var i=u.getFromId(t,s.xaxis),l=u.getFromId(t,s.yaxis);n(f,s,i,"x"),n(f,s,l,"y")}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(x,Q,K){"use strict";function p(v,u){return"percent"===v?function(y){return Math.abs(y*u/100)}:"constant"===v?function(){return Math.abs(u)}:"sqrt"===v?function(y){return Math.sqrt(Math.abs(y))}:void 0}Q.exports=function(v){var u=v.type,y=v.symmetric;if("data"===u){var e=v.array||[];if(y)return function(r,f){var s=+e[f];return[s,s]};var n=v.arrayminus||[];return function(r,f){var s=+e[f],i=+n[f];return isNaN(s)&&isNaN(i)?[NaN,NaN]:[i||0,s||0]}}var t=p(u,v.value),a=p(u,v.valueminus);return y||void 0===v.valueminus?function(r){var f=t(r);return[f,f]}:function(r){return[a(r),t(r)]}}},{}],393:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../registry"),u=x("../../lib"),y=x("../../plot_api/plot_template"),e=x("./attributes");Q.exports=function(n,t,a,r){var f="error_"+r.axis,s=y.newContainer(t,f),i=n[f]||{};function l(d,o){return u.coerce(i,s,e,d,o)}if(!1!==l("visible",void 0!==i.array||void 0!==i.value||"sqrt"===i.type)){var c=l("type","array"in i?"data":"percent"),h=!0;"sqrt"!==c&&(h=l("symmetric",!(("data"===c?"arrayminus":"valueminus")in i))),"data"===c?(l("array"),l("traceref"),h||(l("arrayminus"),l("tracerefminus"))):"percent"!==c&&"constant"!==c||(l("value"),h||l("valueminus"));var m="copy_"+r.inherit+"style";r.inherit&&(t["error_"+r.inherit]||{}).visible&&l(m,!(i.color||p(i.thickness)||p(i.width))),r.inherit&&s[m]||(l("color",a),l("thickness"),l("width",v.traceIs(t,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plot_api/edit_types").overrideAll,u=x("./attributes"),y={error_x:p.extendFlat({},u),error_y:p.extendFlat({},u)};delete y.error_x.copy_zstyle,delete y.error_y.copy_zstyle,delete y.error_y.copy_ystyle;var e={error_x:p.extendFlat({},u),error_y:p.extendFlat({},u),error_z:p.extendFlat({},u)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,Q.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:y,bar:y,histogram:y,scatter3d:v(e,"calc","nested"),scattergl:v(y,"calc","nested")}},supplyDefaults:x("./defaults"),calc:x("./calc"),makeComputeError:x("./compute_error"),plot:x("./plot"),style:x("./style"),hoverInfo:function(n,t,a){(t.error_y||{}).visible&&(a.yerr=n.yh-n.y,t.error_y.symmetric||(a.yerrneg=n.y-n.ys)),(t.error_x||{}).visible&&(a.xerr=n.xh-n.x,t.error_x.symmetric||(a.xerrneg=n.x-n.xs))}}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("fast-isnumeric"),u=x("../drawing"),y=x("../../traces/scatter/subtypes");Q.exports=function(e,n,t,a){var r=t.xaxis,f=t.yaxis,s=a&&a.duration>0;n.each(function(i){var l,c=i[0].trace,h=c.error_x||{},m=c.error_y||{};c.ids&&(l=function(g){return g.id});var d=y.hasMarkers(c)&&c.marker.maxdisplayed>0;m.visible||h.visible||(i=[]);var o=p.select(this).selectAll("g.errorbar").data(i,l);if(o.exit().remove(),i.length){h.visible||o.selectAll("path.xerror").remove(),m.visible||o.selectAll("path.yerror").remove(),o.style("opacity",1);var b=o.enter().append("g").classed("errorbar",!0);s&&b.style("opacity",0).transition().duration(a.duration).style("opacity",1),u.setClipUrl(o,t.layerClipId,e),o.each(function(g){var D,S,C,z,w=p.select(this),_=(C=f,z={x:(S=r).c2p((D=g).x),y:C.c2p(D.y)},void 0!==D.yh&&(z.yh=C.c2p(D.yh),z.ys=C.c2p(D.ys),v(z.ys)||(z.noYS=!0,z.ys=C.c2p(D.ys,!0))),void 0!==D.xh&&(z.xh=S.c2p(D.xh),z.xs=S.c2p(D.xs),v(z.xs)||(z.noXS=!0,z.xs=S.c2p(D.xs,!0))),z);if(!d||g.vis){var A,T=w.select("path.yerror");if(m.visible&&v(_.x)&&v(_.yh)&&v(_.ys)){var E=m.width;A="M"+(_.x-E)+","+_.yh+"h"+2*E+"m-"+E+",0V"+_.ys,_.noYS||(A+="m-"+E+",0h"+2*E),T.size()?s&&(T=T.transition().duration(a.duration).ease(a.easing)):T=w.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),T.attr("d",A)}else T.remove();var k=w.select("path.xerror");if(h.visible&&v(_.y)&&v(_.xh)&&v(_.xs)){var O=(h.copy_ystyle?m:h).width;A="M"+_.xh+","+(_.y-O)+"v"+2*O+"m0,-"+O+"H"+_.xs,_.noXS||(A+="m0,-"+O+"v"+2*O),k.size()?s&&(k=k.transition().duration(a.duration).ease(a.easing)):k=w.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),k.attr("d",A)}else k.remove()}})}})}},{"../../traces/scatter/subtypes":950,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../color");Q.exports=function(u){u.each(function(y){var e=y[0].trace,n=e.error_y||{},t=e.error_x||{},a=p.select(this);a.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(v.stroke,n.color),t.copy_ystyle&&(t=n),a.selectAll("path.xerror").style("stroke-width",t.thickness+"px").call(v.stroke,t.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(x,Q,K){"use strict";var p=x("../../plots/font_attributes"),v=x("./layout_attributes").hoverlabel,u=x("../../lib/extend").extendFlat;Q.exports={hoverlabel:{bgcolor:u({},v.bgcolor,{arrayOk:!0}),bordercolor:u({},v.bordercolor,{arrayOk:!0}),font:p({arrayOk:!0,editType:"none"}),align:u({},v.align,{arrayOk:!0}),namelength:u({},v.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../registry");function u(y,e,n,t){t=t||p.identity,Array.isArray(y)&&(e[0][n]=t(y))}Q.exports=function(y){var e=y.calcdata,n=y._fullLayout;function t(i){return function(l){return p.coerceHoverinfo({hoverinfo:l},{_module:i._module},n)}}for(var a=0;a<e.length;a++){var r=e[a],f=r[0].trace;if(!v.traceIs(f,"pie-like")){var s=v.traceIs(f,"2dMap")?u:p.fillArray;s(f.hoverinfo,r,"hi",t(f)),f.hovertemplate&&s(f.hovertemplate,r,"ht"),f.hoverlabel&&(s(f.hoverlabel.bgcolor,r,"hbg"),s(f.hoverlabel.bordercolor,r,"hbc"),s(f.hoverlabel.font.size,r,"hts"),s(f.hoverlabel.font.color,r,"htc"),s(f.hoverlabel.font.family,r,"htf"),s(f.hoverlabel.namelength,r,"hnl"),s(f.hoverlabel.align,r,"hta"))}}}},{"../../lib":503,"../../registry":638}],399:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("./hover").hover;Q.exports=function(u,y,e){var n=p.getComponentMethod("annotations","onClick")(u,u._hoverdata);function t(){u.emit("plotly_click",{points:u._hoverdata,event:y})}void 0!==e&&v(u,y,e,!0),u._hoverdata&&y&&y.target&&(n&&n.then?n.then(t):t(),y.stopImmediatePropagation&&y.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(x,Q,K){"use strict";Q.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./attributes"),u=x("./hoverlabel_defaults");Q.exports=function(y,e,n,t){var a=p.extendFlat({},t.hoverlabel);e.hovertemplate&&(a.namelength=-1),u(y,e,function(r,f){return p.coerce(y,e,v,r,f)},a)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(x,Q,K){"use strict";var p=x("../../lib");K.getSubplot=function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},K.isTraceInSubplots=function(t,a){if("splom"===t.type){for(var r=t.xaxes||[],f=t.yaxes||[],s=0;s<r.length;s++)for(var i=0;i<f.length;i++)if(-1!==a.indexOf(r[s]+f[i]))return!0;return!1}return-1!==a.indexOf(K.getSubplot(t))},K.flat=function(t,a){for(var r=new Array(t.length),f=0;f<t.length;f++)r[f]=a;return r},K.p2c=function(t,a){for(var r=new Array(t.length),f=0;f<t.length;f++)r[f]=t[f].p2c(a);return r},K.getDistanceFunction=function(t,a,r,f){return"closest"===t?f||K.quadrature(a,r):"x"===t.charAt(0)?a:r},K.getClosest=function(t,a,r){if(!1!==r.index)r.index>=0&&r.index<t.length?r.distance=0:r.index=!1;else for(var f=0;f<t.length;f++){var s=a(t[f]);s<=r.distance&&(r.index=f,r.distance=s)}return r},K.inbox=function(t,a,r){return t*a<0||0===t?r:1/0},K.quadrature=function(t,a){return function(r){var f=t(r),s=a(r);return Math.sqrt(f*f+s*s)}},K.makeEventData=function(t,a,r){var f="index"in t?t.index:t.pointNumber,s={data:a._input,fullData:a,curveNumber:a.index,pointNumber:f};if(a._indexToPoints){var i=a._indexToPoints[f];1===i.length?s.pointIndex=i[0]:s.pointIndices=i}else s.pointIndex=f;return a._module.eventData?s=a._module.eventData(s,t,a,r,f):("xVal"in t?s.x=t.xVal:"x"in t&&(s.x=t.x),"yVal"in t?s.y=t.yVal:"y"in t&&(s.y=t.y),t.xa&&(s.xaxis=t.xa),t.ya&&(s.yaxis=t.ya),void 0!==t.zLabelVal&&(s.z=t.zLabelVal)),K.appendArrayPointValue(s,a,f),s},K.appendArrayPointValue=function(t,a,r){var f=a._arrayAttrs;if(f)for(var s=0;s<f.length;s++){var i=f[s],l=u(i);if(void 0===t[l]){var c=y(p.nestedProperty(a,i).get(),r);void 0!==c&&(t[l]=c)}}},K.appendArrayMultiPointValues=function(t,a,r){var f=a._arrayAttrs;if(f)for(var s=0;s<f.length;s++){var i=f[s],l=u(i);if(void 0===t[l]){for(var c=p.nestedProperty(a,i).get(),h=new Array(r.length),m=0;m<r.length;m++)h[m]=y(c,r[m]);t[l]=h}}};var v={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function u(t){return v[t]||t}function y(t,a){return Array.isArray(a)?Array.isArray(t)&&Array.isArray(t[a[0]])?t[a[0]][a[1]]:void 0:t[a]}var e={x:!0,y:!0},n={"x unified":!0,"y unified":!0};K.isUnifiedHover=function(t){return"string"==typeof t&&!!n[t]},K.isXYhover=function(t){return"string"==typeof t&&!!e[t]}},{"../../lib":503}],403:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("fast-isnumeric"),u=x("tinycolor2"),y=x("../../lib"),e=y.strTranslate,n=y.strRotate,t=x("../../lib/events"),a=x("../../lib/svg_text_utils"),r=x("../../lib/override_cursor"),f=x("../drawing"),s=x("../color"),i=x("../dragelement"),l=x("../../plots/cartesian/axes"),c=x("../../registry"),h=x("./helpers"),m=x("./constants"),d=x("../legend/defaults"),o=x("../legend/draw"),b=m.YANGLE,g=Math.PI*b/180,w=1/Math.sin(g),_=Math.cos(g),A=Math.sin(g),T=m.HOVERARROWSIZE,E=m.HOVERTEXTPAD,k={box:!0,ohlc:!0,violin:!0,candlestick:!0},O={scatter:!0,scattergl:!0,splom:!0};function D(N){return[N.trace.index,N.index,N.x0,N.y0,N.name,N.attr,N.xa?N.xa._id:"",N.ya?N.ya._id:""].join(",")}K.hover=function(N,V,ee,j){N=y.getGraphDiv(N),y.throttle(N._fullLayout._uid+m.HOVERID,m.HOVERMINTIME,function(){!function(J,$,re,ne){re||(re="xy");var se=Array.isArray(re)?re:[re],ie=J._fullLayout,ue=ie._plots||[],le=ue[re],de=ie._has("cartesian");if(le){var ve=le.overlays.map(function(dn){return dn.id});se=se.concat(ve)}for(var _e=se.length,be=new Array(_e),Te=new Array(_e),he=!1,me=0;me<_e;me++){var Ae=se[me];if(ue[Ae])he=!0,be[me]=ue[Ae].xaxis,Te[me]=ue[Ae].yaxis;else{if(!ie[Ae]||!ie[Ae]._subplot)return void y.warn("Unrecognized subplot: "+Ae);var we=ie[Ae]._subplot;be[me]=we.xaxis,Te[me]=we.yaxis}}var Se=$.hovermode||ie.hovermode;if(Se&&!he&&(Se="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(Se)||!J.calcdata||J.querySelector(".zoombox")||J._dragging)return i.unhoverRaw(J,$);var Pe=ie.hoverdistance;-1===Pe&&(Pe=1/0);var ze=ie.spikedistance;-1===ze&&(ze=1/0);var He,tt,Oe,Be,Je,Ye,nt,ft,dt,Rt,Et,at,rt,St=[],Xt=[],lr={hLinePoint:null,vLinePoint:null},Ue=!1;if(Array.isArray($))for(Se="array",Oe=0;Oe<$.length;Oe++)(Je=J.calcdata[$[Oe].curveNumber||0])&&(Ye=Je[0].trace,"skip"!==Je[0].trace.hoverinfo&&(Xt.push(Je),"h"===Ye.orientation&&(Ue=!0)));else{for(Be=0;Be<J.calcdata.length;Be++)"skip"!==(Ye=(Je=J.calcdata[Be])[0].trace).hoverinfo&&h.isTraceInSubplots(Ye,se)&&(Xt.push(Je),"h"===Ye.orientation&&(Ue=!0));var Ze,Ne;if($.target){if(!1===t.triggerHandler(J,"plotly_beforehover",$))return;var it=$.composedPath&&$.composedPath()[0];it||(it=$.target);var ke=it.getBoundingClientRect();Ze=$.clientX-ke.left,Ne=$.clientY-ke.top,ie._calcInverseTransform(J);var De=y.apply3DTransform(ie._invTransform)(Ze,Ne);if(Ne=De[1],(Ze=De[0])<0||Ze>be[0]._length||Ne<0||Ne>Te[0]._length)return i.unhoverRaw(J,$)}else Ze="xpx"in $?$.xpx:be[0]._length/2,Ne="ypx"in $?$.ypx:Te[0]._length/2;if($.pointerX=Ze+be[0]._offset,$.pointerY=Ne+Te[0]._offset,He="xval"in $?h.flat(se,$.xval):h.p2c(be,Ze),tt="yval"in $?h.flat(se,$.yval):h.p2c(Te,Ne),!v(He[0])||!v(tt[0]))return y.warn("Fx.hover failed",$,J),i.unhoverRaw(J,$)}var Re=1/0;function Ie(dn,cn){for(Be=0;Be<Xt.length;Be++)if((Je=Xt[Be])&&Je[0]&&Je[0].trace&&!0===(Ye=Je[0].trace).visible&&0!==Ye._length&&-1===["carpet","contourcarpet"].indexOf(Ye._module.name)){if("splom"===Ye.type?nt=se[ft=0]:(nt=h.getSubplot(Ye),ft=se.indexOf(nt)),h.isUnifiedHover(dt=Se)&&(dt=dt.charAt(0)),at={cd:Je,trace:Ye,xa:be[ft],ya:Te[ft],maxHoverDistance:Pe,maxSpikeDistance:ze,index:!1,distance:Math.min(Re,Pe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:Ye.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ie[nt]&&(at.subplot=ie[nt]._subplot),ie._splomScenes&&ie._splomScenes[Ye.uid]&&(at.scene=ie._splomScenes[Ye.uid]),rt=St.length,"array"===dt){var fn=$[Be];"pointNumber"in fn?(at.index=fn.pointNumber,dt="closest"):(dt="","xval"in fn&&(Rt=fn.xval,dt="x"),"yval"in fn&&(Et=fn.yval,dt=dt?"closest":"y"))}else void 0!==dn&&void 0!==cn?(Rt=dn,Et=cn):(Rt=He[ft],Et=tt[ft]);if(0!==Pe)if(Ye._module&&Ye._module.hoverPoints){var Bn=Ye._module.hoverPoints(at,Rt,Et,dt,{finiteRange:!0,hoverLayer:ie._hoverlayer});if(Bn)for(var Nn,Fn=0;Fn<Bn.length;Fn++)v((Nn=Bn[Fn]).x0)&&v(Nn.y0)&&St.push(U(Nn,Se))}else y.log("Unrecognized trace type in hover:",Ye);if("closest"===Se&&St.length>rt&&(St.splice(0,rt),Re=St[0].distance),de&&0!==ze&&0===St.length){at.distance=ze,at.index=!1;var ar=Ye._module.hoverPoints(at,Rt,Et,"closest",{hoverLayer:ie._hoverlayer});if(ar&&(ar=ar.filter(function(Xr){return Xr.spikeDistance<=ze})),ar&&ar.length){var Bt,Qt=ar.filter(function(Xr){return Xr.xa.showspikes&&"hovered data"!==Xr.xa.spikesnap});if(Qt.length){var yr=Qt[0];v(yr.x0)&&v(yr.y0)&&(Bt=ut(yr),(!lr.vLinePoint||lr.vLinePoint.spikeDistance>Bt.spikeDistance)&&(lr.vLinePoint=Bt))}var Dr=ar.filter(function(Xr){return Xr.ya.showspikes&&"hovered data"!==Xr.ya.spikesnap});if(Dr.length){var $r=Dr[0];v($r.x0)&&v($r.y0)&&(Bt=ut($r),(!lr.hLinePoint||lr.hLinePoint.spikeDistance>Bt.spikeDistance)&&(lr.hLinePoint=Bt))}}}}}function Ke(dn,cn,fn){for(var Bn,Nn=null,Fn=1/0,ar=0;ar<dn.length;ar++)Bn=dn[ar].spikeDistance,fn&&0===ar&&(Bn=-1/0),Bn<=Fn&&Bn<=cn&&(Nn=dn[ar],Fn=Bn);return Nn}function ut(dn){return dn?{xa:dn.xa,ya:dn.ya,x:void 0!==dn.xSpike?dn.xSpike:(dn.x0+dn.x1)/2,y:void 0!==dn.ySpike?dn.ySpike:(dn.y0+dn.y1)/2,distance:dn.distance,spikeDistance:dn.spikeDistance,curveNumber:dn.trace.index,color:dn.color,pointNumber:dn.index}:null}Ie();var xt={fullLayout:ie,container:ie._hoverlayer,event:$},gt=J._spikepoints;J._spikepoints={vLinePoint:lr.vLinePoint,hLinePoint:lr.hLinePoint};var ct=function(){St.sort(function(dn,cn){return dn.distance-cn.distance}),St=function(dn,cn){for(var fn=cn.charAt(0),Bn=[],Nn=[],Fn=[],ar=0;ar<dn.length;ar++){var Bt=dn[ar];c.traceIs(Bt.trace,"bar-like")||c.traceIs(Bt.trace,"box-violin")?Fn.push(Bt):Bt.trace[fn+"period"]?Nn.push(Bt):Bn.push(Bt)}return Bn.concat(Nn).concat(Fn)}(St,Se)};ct();var zt=Se.charAt(0),Ft=("x"===zt||"y"===zt)&&St[0]&&O[St[0].trace.type];if(de&&0!==ze&&0!==St.length){var Qe=Ke(St.filter(function(dn){return dn.ya.showspikes}),ze,Ft);lr.hLinePoint=ut(Qe);var yt=Ke(St.filter(function(dn){return dn.xa.showspikes}),ze,Ft);lr.vLinePoint=ut(yt)}if(0===St.length){var Nt=i.unhoverRaw(J,$);return!de||null===lr.hLinePoint&&null===lr.vLinePoint||X(gt)&&G(J,lr,xt),Nt}if(de&&X(gt)&&G(J,lr,xt),h.isXYhover(dt)&&0!==St[0].length&&"splom"!==St[0].trace.type){var Yt=St[0],rr=(St=k[Yt.trace.type]?St.filter(function(dn){return dn.trace.index===Yt.trace.index}):[Yt]).length;Ie(q("x",Yt,ie),q("y",Yt,ie));var kt,Gt=[],Zt={},fr=0,$t=function(dn){var cn=k[dn.trace.type]?D(dn):dn.trace.index;if(Zt[cn]){var fn=Zt[cn]-1,Bn=Gt[fn];fn>0&&Math.abs(dn.distance)<Math.abs(Bn.distance)&&(Gt[fn]=dn)}else fr++,Zt[cn]=fr,Gt.push(dn)};for(kt=0;kt<rr;kt++)$t(St[kt]);for(kt=St.length-1;kt>rr-1;kt--)$t(St[kt]);St=Gt,ct()}var nr=J._hoverdata,dr=[],Tr=W(J),wr=te(J);for(Oe=0;Oe<St.length;Oe++){var mr=St[Oe],_r=h.makeEventData(mr,mr.trace,mr.cd);if(!1!==mr.hovertemplate){var Sr=!1;mr.cd[mr.index]&&mr.cd[mr.index].ht&&(Sr=mr.cd[mr.index].ht),mr.hovertemplate=Sr||mr.trace.hovertemplate||!1}if(mr.xa&&mr.ya){var Gr=mr.x0+mr.xa._offset,Er=mr.x1+mr.xa._offset,Zr=mr.y0+mr.ya._offset,an=mr.y1+mr.ya._offset,gn=Math.min(Gr,Er),Vn=Math.max(Gr,Er),Gn=Math.min(Zr,an),Ln=Math.max(Zr,an);_r.bbox={x0:gn+wr,x1:Vn+wr,y0:Gn+Tr,y1:Ln+Tr}}mr.eventData=[_r],dr.push(_r)}J._hoverdata=dr;var ln="y"===Se&&(Xt.length>1||St.length>1)||"closest"===Se&&Ue&&St.length>1,qr=s.combine(ie.plot_bgcolor||s.background,ie.paper_bgcolor),Pr=C(St,{gd:J,hovermode:Se,rotateLabels:ln,bgColor:qr,container:ie._hoverlayer,outerContainer:ie._paper.node(),commonLabelOpts:ie.hoverlabel,hoverdistance:ie.hoverdistance});if(h.isUnifiedHover(Se)||(function(dn,cn,fn){var Bn,Nn,Fn,ar,Bt,Qt,yr,Dr=0,$r=1,Xr=dn.size(),Mr=new Array(Xr),Lr=0;function Rr(Ur){var Kr=Ur[0],An=Ur[Ur.length-1];if(Fn=An.pos+An.dp+An.size-Kr.pmax,(Nn=Kr.pmin-Kr.pos-Kr.dp+Kr.size)>.01){for(Bt=Ur.length-1;Bt>=0;Bt--)Ur[Bt].dp+=Nn;Bn=!1}if(!(Fn<.01)){if(Nn<-.01){for(Bt=Ur.length-1;Bt>=0;Bt--)Ur[Bt].dp-=Fn;Bn=!1}if(Bn){var wn=0;for(ar=0;ar<Ur.length;ar++)(Qt=Ur[ar]).pos+Qt.dp+Qt.size>Kr.pmax&&wn++;for(ar=Ur.length-1;ar>=0&&!(wn<=0);ar--)(Qt=Ur[ar]).pos>Kr.pmax-1&&(Qt.del=!0,wn--);for(ar=0;ar<Ur.length&&!(wn<=0);ar++)if((Qt=Ur[ar]).pos<Kr.pmin+1)for(Qt.del=!0,wn--,Fn=2*Qt.size,Bt=Ur.length-1;Bt>=0;Bt--)Ur[Bt].dp-=Fn;for(ar=Ur.length-1;ar>=0&&!(wn<=0);ar--)(Qt=Ur[ar]).pos+Qt.dp+Qt.size>Kr.pmax&&(Qt.del=!0,wn--)}}}for(dn.each(function(Ur){var Kr=Ur[cn],An="x"===Kr._id.charAt(0),wn=Kr.range;0===Lr&&wn&&wn[0]>wn[1]!==An&&($r=-1),Mr[Lr++]=[{datum:Ur,traceIndex:Ur.trace.index,dp:0,pos:Ur.pos,posref:Ur.posref,size:Ur.by*(An?w:1)/2,pmin:0,pmax:An?fn.width:fn.height}]}),Mr.sort(function(Ur,Kr){return Ur[0].posref-Kr[0].posref||$r*(Kr[0].traceIndex-Ur[0].traceIndex)});!Bn&&Dr<=Xr;){for(Dr++,Bn=!0,ar=0;ar<Mr.length-1;){var Ir=Mr[ar],Fr=Mr[ar+1],Qr=Ir[Ir.length-1],yn=Fr[0];if((Nn=Qr.pos+Qr.dp+Qr.size-yn.pos-yn.dp+yn.size)>.01&&Qr.pmin===yn.pmin&&Qr.pmax===yn.pmax){for(Bt=Fr.length-1;Bt>=0;Bt--)Fr[Bt].dp+=Nn;for(Ir.push.apply(Ir,Fr),Mr.splice(ar+1,1),yr=0,Bt=Ir.length-1;Bt>=0;Bt--)yr+=Ir[Bt].dp;for(Fn=yr/Ir.length,Bt=Ir.length-1;Bt>=0;Bt--)Ir[Bt].dp-=Fn;Bn=!1}else ar++}Mr.forEach(Rr)}for(ar=Mr.length-1;ar>=0;ar--){var In=Mr[ar];for(Bt=In.length-1;Bt>=0;Bt--){var nn=In[Bt],Cn=nn.datum;Cn.offset=nn.dp,Cn.del=nn.del}}}(Pr,ln?"xa":"ya",ie),B(Pr,ln,ie._invScaleX,ie._invScaleY)),$.target&&$.target.tagName){var un=c.getComponentMethod("annotations","hasClickToShow")(J,dr);r(p.select($.target),un?"pointer":"")}!$.target||ne||!function(dn,cn,fn){if(!fn||fn.length!==dn._hoverdata.length)return!0;for(var Bn=fn.length-1;Bn>=0;Bn--){var Nn=fn[Bn],Fn=dn._hoverdata[Bn];if(Nn.curveNumber!==Fn.curveNumber||String(Nn.pointNumber)!==String(Fn.pointNumber)||String(Nn.pointNumbers)!==String(Fn.pointNumbers))return!0}return!1}(J,0,nr)||(nr&&J.emit("plotly_unhover",{event:$,points:nr}),J.emit("plotly_hover",{event:$,points:J._hoverdata,xaxes:be,yaxes:Te,xvals:He,yvals:tt}))}(N,V,ee,j)})},K.loneHover=function(N,V){var ee=!0;Array.isArray(N)||(ee=!1,N=[N]);var j=V.gd,J=W(j),$=te(j),re=C(N.map(function(ie){var ue=ie._x0||ie.x0||ie.x||0,le=ie._x1||ie.x1||ie.x||0,de=ie._y0||ie.y0||ie.y||0,ve=ie._y1||ie.y1||ie.y||0,_e=ie.eventData;if(_e){var be=Math.min(ue,le),Te=Math.max(ue,le),he=Math.min(de,ve),me=Math.max(de,ve),Ae=ie.trace;if(c.traceIs(Ae,"gl3d")){var we=j._fullLayout[Ae.scene]._scene.container,Se=we.offsetLeft,Pe=we.offsetTop;be+=Se,Te+=Se,he+=Pe,me+=Pe}_e.bbox={x0:be+$,x1:Te+$,y0:he+J,y1:me+J},V.inOut_bbox&&V.inOut_bbox.push(_e.bbox)}else _e=!1;return{color:ie.color||s.defaultLine,x0:ie.x0||ie.x||0,x1:ie.x1||ie.x||0,y0:ie.y0||ie.y||0,y1:ie.y1||ie.y||0,xLabel:ie.xLabel,yLabel:ie.yLabel,zLabel:ie.zLabel,text:ie.text,name:ie.name,idealAlign:ie.idealAlign,borderColor:ie.borderColor,fontFamily:ie.fontFamily,fontSize:ie.fontSize,fontColor:ie.fontColor,nameLength:ie.nameLength,textAlign:ie.textAlign,trace:ie.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ie.hovertemplate||!1,hovertemplateLabels:ie.hovertemplateLabels||!1,eventData:_e}}),{gd:j,hovermode:"closest",rotateLabels:!1,bgColor:V.bgColor||s.background,container:p.select(V.container),outerContainer:V.outerContainer||V.container}),ne=0,se=0;return re.sort(function(ie,ue){return ie.y0-ue.y0}).each(function(ie,ue){var le=ie.y0-ie.by/2;ie.offset=le-5<ne?ne-le+5:0,ne=le+ie.by+ie.offset,ue===V.anchorIndex&&(se=ie.offset)}).each(function(ie){ie.offset-=se}),B(re,!1,j._fullLayout._invScaleX,j._fullLayout._invScaleY),ee?re:re.node()};var S=/<extra>([\s\S]*)<\/extra>/;function C(N,V){var ee=V.gd,j=ee._fullLayout,J=V.hovermode,$=V.rotateLabels,re=V.bgColor,ne=V.container,se=V.outerContainer,ie=V.commonLabelOpts||{};if(0===N.length)return[[]];var ue=V.fontFamily||m.HOVERFONT,le=V.fontSize||m.HOVERFONTSIZE,de=N[0],ve=de.xa,_e=de.ya,be=J.charAt(0),Te=de[be+"Label"],he=R(ee,se),me=he.top,Ae=he.width,we=he.height,Se=void 0!==Te&&de.distance<=V.hoverdistance&&("x"===J||"y"===J);if(Se){var Pe,ze,He=!0;for(Pe=0;Pe<N.length;Pe++)if(He&&void 0===N[Pe].zLabel&&(He=!1),ze=N[Pe].hoverinfo||N[Pe].trace.hoverinfo){var tt=Array.isArray(ze)?ze:ze.split("+");if(-1===tt.indexOf("all")&&-1===tt.indexOf(J)){Se=!1;break}}He&&(Se=!1)}var Oe=ne.selectAll("g.axistext").data(Se?[0]:[]);if(Oe.enter().append("g").classed("axistext",!0),Oe.exit().remove(),Oe.each(function(){var Qe=p.select(this),yt=y.ensureSingle(Qe,"path","",function(Zr){Zr.style({"stroke-width":"1px"})}),Nt=y.ensureSingle(Qe,"text","",function(Zr){Zr.attr("data-notex",1)}),Yt=ie.bgcolor||s.defaultLine,rr=ie.bordercolor||s.contrast(Yt),Fe=s.contrast(Yt),ht={family:ie.font.family||ue,size:ie.font.size||le,color:ie.font.color||Fe};yt.style({fill:Yt,stroke:rr}),Nt.text(Te).call(f.font,ht).call(a.positionText,0,0).call(a.convertToTspans,ee),Qe.attr("transform","");var kt,Gt,Zt=R(ee,Nt.node());if("x"===J){var fr="top"===ve.side?"-":"";Nt.attr("text-anchor","middle").call(a.positionText,0,"top"===ve.side?me-Zt.bottom-T-E:me-Zt.top+T+E),Gt=_e._offset+("top"===ve.side?0:_e._length);var $t=Zt.width/2+E;(kt=ve._offset+(de.x0+de.x1)/2)<$t?(kt=$t,yt.attr("d","M-"+($t-T)+",0L-"+($t-2*T)+","+fr+T+"H"+(E+Zt.width/2)+"v"+fr+(2*E+Zt.height)+"H-"+$t+"V"+fr+T+"Z")):kt>j.width-$t?(kt=j.width-$t,yt.attr("d","M"+($t-T)+",0L"+$t+","+fr+T+"v"+fr+(2*E+Zt.height)+"H-"+$t+"V"+fr+T+"H"+($t-2*T)+"Z")):yt.attr("d","M0,0L"+T+","+fr+T+"H"+(E+Zt.width/2)+"v"+fr+(2*E+Zt.height)+"H-"+(E+Zt.width/2)+"V"+fr+T+"H-"+T+"Z")}else{var nr,dr,Tr;"right"===_e.side?(nr="start",dr=1,Tr="",kt=ve._offset+ve._length):(nr="end",dr=-1,Tr="-",kt=ve._offset),Gt=_e._offset+(de.y0+de.y1)/2,Nt.attr("text-anchor",nr),yt.attr("d","M0,0L"+Tr+T+","+T+"V"+(E+Zt.height/2)+"h"+Tr+(2*E+Zt.width)+"V-"+(E+Zt.height/2)+"H"+Tr+T+"V-"+T+"Z");var wr,mr=Zt.height/2,_r=me-Zt.top-mr,Sr="clip"+j._uid+"commonlabel"+_e._id;if(kt<Zt.width+2*E+T){wr="M-"+(T+E)+"-"+mr+"h-"+(Zt.width-E)+"V"+mr+"h"+(Zt.width-E)+"Z";var Gr=Zt.width-kt+E;a.positionText(Nt,Gr,_r),"end"===nr&&Nt.selectAll("tspan").each(function(){var Zr=p.select(this),an=f.tester.append("text").text(Zr.text()).call(f.font,ht),gn=R(ee,an.node());Math.round(gn.width)<Math.round(Zt.width)&&Zr.attr("x",Gr-gn.width),an.remove()})}else a.positionText(Nt,dr*(E+T),_r),wr=null;var Er=j._topclips.selectAll("#"+Sr).data(wr?[0]:[]);Er.enter().append("clipPath").attr("id",Sr).append("path"),Er.exit().remove(),Er.select("path").attr("d",wr),f.setClipUrl(Nt,wr?Sr:null,ee)}Qe.attr("transform",e(kt,Gt))}),h.isUnifiedHover(J)){ne.selectAll("g.hovertext").remove();var Be=N.filter(function(Qe){return"none"!==Qe.hoverinfo});if(0===Be.length)return;var Je=j.hoverlabel,Ye=Je.font,ft={};d({showlegend:!0,legend:{title:{text:Te,font:Ye},font:Ye,bgcolor:Je.bgcolor,bordercolor:Je.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:j.legend?j.legend.traceorder:void 0,orientation:"v"}},ft,ee._fullData);var dt=ft.legend;dt.entries=[];for(var Rt=0;Rt<Be.length;Rt++){var Et=Be[Rt];if("none"!==Et.hoverinfo){var at=z(Et,!0,J,j,Te),rt=at[0],St=at[1];Et.name=St,Et.text=""!==St?St+" : "+rt:rt;var Xt=Et.cd[Et.index];Xt&&(Xt.mc&&(Et.mc=Xt.mc),Xt.mcc&&(Et.mc=Xt.mcc),Xt.mlc&&(Et.mlc=Xt.mlc),Xt.mlcc&&(Et.mlc=Xt.mlcc),Xt.mlw&&(Et.mlw=Xt.mlw),Xt.mrc&&(Et.mrc=Xt.mrc),Xt.dir&&(Et.dir=Xt.dir)),Et._distinct=!0,dt.entries.push([Et])}}dt.entries.sort(function(Qe,yt){return Qe[0].trace.index-yt[0].trace.index}),dt.layer=ne,dt._inHover=!0,dt._groupTitleFont=Ye,o(ee,dt);var lr,Ue,Ze,Ne,it=ne.select("g.legend"),ke=R(ee,it.node()),De=ke.width+2*E,Re=ke.height+2*E,Ie=Be[0],Ke=(Ie.x0+Ie.x1)/2,ut=(Ie.y0+Ie.y1)/2,xt=!(c.traceIs(Ie.trace,"bar-like")||c.traceIs(Ie.trace,"box-violin"));"y"===be?xt?(Ue=ut-E,lr=ut+E):(Ue=Math.min.apply(null,Be.map(function(Qe){return Math.min(Qe.y0,Qe.y1)})),lr=Math.max.apply(null,Be.map(function(Qe){return Math.max(Qe.y0,Qe.y1)}))):Ue=lr=y.mean(Be.map(function(Qe){return(Qe.y0+Qe.y1)/2}))-Re/2,"x"===be?xt?(Ze=Ke+E,Ne=Ke-E):(Ze=Math.max.apply(null,Be.map(function(Qe){return Math.max(Qe.x0,Qe.x1)})),Ne=Math.min.apply(null,Be.map(function(Qe){return Math.min(Qe.x0,Qe.x1)}))):Ze=Ne=y.mean(Be.map(function(Qe){return(Qe.x0+Qe.x1)/2}))-De/2;var gt,Pt,ct=ve._offset,zt=_e._offset;return Ne+=ct-De,Ue+=zt-Re,gt=(Ze+=ct)+De<Ae&&Ze>=0?Ze:Ne+De<Ae&&Ne>=0?Ne:ct+De<Ae?ct:Ze-Ke<Ke-Ne+De?Ae-De:0,Pt=(lr+=zt)+Re<we&&lr>=0?lr:Ue+Re<we&&Ue>=0?Ue:zt+Re<we?zt:lr-ut<ut-Ue+Re?we-Re:0,it.attr("transform",e((gt+=E)-1,(Pt+=E)-1)),it}var Ft=ne.selectAll("g.hovertext").data(N,function(Qe){return D(Qe)});return Ft.enter().append("g").classed("hovertext",!0).each(function(){var Qe=p.select(this);Qe.append("rect").call(s.fill,s.addOpacity(re,.8)),Qe.append("text").classed("name",!0),Qe.append("path").style("stroke-width","1px"),Qe.append("text").classed("nums",!0).call(f.font,ue,le)}),Ft.exit().remove(),Ft.each(function(Qe){var yt=p.select(this).attr("transform",""),Nt=Qe.color;Array.isArray(Nt)&&(Nt=Nt[Qe.eventData[0].pointNumber]);var Yt=Qe.bgcolor||Nt,rr=s.combine(s.opacity(Yt)?Yt:s.defaultLine,re),Fe=s.combine(s.opacity(Nt)?Nt:s.defaultLine,re),ht=Qe.borderColor||s.contrast(rr),kt=z(Qe,Se,J,j,Te,yt),Gt=kt[0],Zt=kt[1],fr=yt.select("text.nums").call(f.font,Qe.fontFamily||ue,Qe.fontSize||le,Qe.fontColor||ht).text(Gt).attr("data-notex",1).call(a.positionText,0,0).call(a.convertToTspans,ee),$t=yt.select("text.name"),nr=0,dr=0;if(Zt&&Zt!==Gt){$t.call(f.font,Qe.fontFamily||ue,Qe.fontSize||le,Fe).text(Zt).attr("data-notex",1).call(a.positionText,0,0).call(a.convertToTspans,ee);var Tr=R(ee,$t.node());nr=Tr.width+2*E,dr=Tr.height+2*E}else $t.remove(),yt.select("rect").remove();yt.select("path").style({fill:rr,stroke:ht});var wr=Qe.xa._offset+(Qe.x0+Qe.x1)/2,mr=Qe.ya._offset+(Qe.y0+Qe.y1)/2,_r=Math.abs(Qe.x1-Qe.x0),Sr=Math.abs(Qe.y1-Qe.y0),Gr=R(ee,fr.node()),Er=Gr.width/j._invScaleX,Zr=Gr.height/j._invScaleY;Qe.ty0=(me-Gr.top)/j._invScaleY,Qe.bx=Er+2*E,Qe.by=Math.max(Zr+2*E,dr),Qe.anchor="start",Qe.txwidth=Er,Qe.tx2width=nr,Qe.offset=0;var an,gn,Vn=(Er+T+E+nr)*j._invScaleX;if($)Qe.pos=wr,an=mr+Sr/2+Vn<=we,gn=mr-Sr/2-Vn>=0,"top"!==Qe.idealAlign&&an||!gn?an?(mr+=Sr/2,Qe.anchor="start"):Qe.anchor="middle":(mr-=Sr/2,Qe.anchor="end");else if(Qe.pos=mr,an=wr+_r/2+Vn<=Ae,gn=wr-_r/2-Vn>=0,"left"!==Qe.idealAlign&&an||!gn)if(an)wr+=_r/2,Qe.anchor="start";else{Qe.anchor="middle";var Gn=Vn/2,Ln=wr+Gn-Ae,ln=wr-Gn;Ln>0&&(wr-=Ln),ln<0&&(wr+=-ln)}else wr-=_r/2,Qe.anchor="end";fr.attr("text-anchor",Qe.anchor),nr&&$t.attr("text-anchor",Qe.anchor),yt.attr("transform",e(wr,mr)+($?n(b):""))}),Ft}function z(N,V,ee,j,J,$){var re="",ne="";void 0!==N.nameOverride&&(N.name=N.nameOverride),N.name&&(N.trace._meta&&(N.name=y.templateString(N.name,N.trace._meta)),re=Z(N.name,N.nameLength));var se=ee.charAt(0);void 0!==N.zLabel?(void 0!==N.xLabel&&(ne+="x: "+N.xLabel+"<br>"),void 0!==N.yLabel&&(ne+="y: "+N.yLabel+"<br>"),"choropleth"!==N.trace.type&&"choroplethmapbox"!==N.trace.type&&(ne+=(ne?"z: ":"")+N.zLabel)):V&&N[se+"Label"]===J?ne=N[("x"===se?"y":"x")+"Label"]||"":void 0===N.xLabel?void 0!==N.yLabel&&"scattercarpet"!==N.trace.type&&(ne=N.yLabel):ne=void 0===N.yLabel?N.xLabel:"("+N.xLabel+", "+N.yLabel+")",!N.text&&0!==N.text||Array.isArray(N.text)||(ne+=(ne?"<br>":"")+N.text),void 0!==N.extraText&&(ne+=(ne?"<br>":"")+N.extraText),$&&""===ne&&!N.hovertemplate&&(""===re&&$.remove(),ne=re);var ue=N.hovertemplate||!1;if(ue){var le=N.hovertemplateLabels||N;N[se+"Label"]!==J&&(le[se+"other"]=le[se+"Val"],le[se+"otherLabel"]=le[se+"Label"]),ne=(ne=y.hovertemplateString(ue,le,j._d3locale,N.eventData[0]||{},N.trace._meta)).replace(S,function(de,ve){return re=Z(ve,N.nameLength),""})}return[ne,re]}function B(N,V,ee,j){var J=function(re){return re*ee},$=function(re){return re*j};N.each(function(re){var ne=p.select(this);if(re.del)return ne.remove();var se=ne.select("text.nums"),ie=re.anchor,ue="end"===ie?-1:1,le={start:1,end:-1,middle:0}[ie],de=le*(T+E),ve=de+le*(re.txwidth+E),_e=0,be=re.offset,Te="middle"===ie;Te&&(de-=re.tx2width/2,ve+=re.txwidth/2+E),V&&(be*=-A,_e=re.offset*_),ne.select("path").attr("d",Te?"M-"+J(re.bx/2+re.tx2width/2)+","+$(be-re.by/2)+"h"+J(re.bx)+"v"+$(re.by)+"h-"+J(re.bx)+"Z":"M0,0L"+J(ue*T+_e)+","+$(T+be)+"v"+$(re.by/2-T)+"h"+J(ue*re.bx)+"v-"+$(re.by)+"H"+J(ue*T+_e)+"V"+$(be-T)+"Z");var he=_e+de,me=be+re.ty0-re.by/2+E,Ae=re.textAlign||"auto";"auto"!==Ae&&("left"===Ae&&"start"!==ie?(se.attr("text-anchor","start"),he=Te?-re.bx/2-re.tx2width/2+E:-re.bx-E):"right"===Ae&&"end"!==ie&&(se.attr("text-anchor","end"),he=Te?re.bx/2-re.tx2width/2-E:re.bx+E)),se.call(a.positionText,J(he),$(me)),re.tx2width&&(ne.select("text.name").call(a.positionText,J(ve+le*E+_e),$(be+re.ty0-re.by/2+E)),ne.select("rect").call(f.setRect,J(ve+(le-1)*re.tx2width/2+_e),$(be-re.by/2-1),J(re.tx2width),$(re.by+2)))})}function U(N,V){var ee=N.index,j=N.trace||{},J=N.cd[0],$=N.cd[ee]||{};function re(de){return de||v(de)&&0===de}var ne=Array.isArray(ee)?function(de,ve){var _e=y.castOption(J,ee,de);return re(_e)?_e:y.extractOption({},j,"",ve)}:function(de,ve){return y.extractOption($,j,de,ve)};function se(de,ve,_e){var be=ne(ve,_e);re(be)&&(N[de]=be)}if(se("hoverinfo","hi","hoverinfo"),se("bgcolor","hbg","hoverlabel.bgcolor"),se("borderColor","hbc","hoverlabel.bordercolor"),se("fontFamily","htf","hoverlabel.font.family"),se("fontSize","hts","hoverlabel.font.size"),se("fontColor","htc","hoverlabel.font.color"),se("nameLength","hnl","hoverlabel.namelength"),se("textAlign","hta","hoverlabel.align"),N.posref="y"===V||"closest"===V&&"h"===j.orientation?N.xa._offset+(N.x0+N.x1)/2:N.ya._offset+(N.y0+N.y1)/2,N.x0=y.constrain(N.x0,0,N.xa._length),N.x1=y.constrain(N.x1,0,N.xa._length),N.y0=y.constrain(N.y0,0,N.ya._length),N.y1=y.constrain(N.y1,0,N.ya._length),void 0!==N.xLabelVal&&(N.xLabel="xLabel"in N?N.xLabel:l.hoverLabelText(N.xa,N.xLabelVal,j.xhoverformat),N.xVal=N.xa.c2d(N.xLabelVal)),void 0!==N.yLabelVal&&(N.yLabel="yLabel"in N?N.yLabel:l.hoverLabelText(N.ya,N.yLabelVal,j.yhoverformat),N.yVal=N.ya.c2d(N.yLabelVal)),void 0!==N.zLabelVal&&void 0===N.zLabel&&(N.zLabel=String(N.zLabelVal)),!(isNaN(N.xerr)||"log"===N.xa.type&&N.xerr<=0)){var ie=l.tickText(N.xa,N.xa.c2l(N.xerr),"hover").text;N.xLabel+=void 0!==N.xerrneg?" +"+ie+" / -"+l.tickText(N.xa,N.xa.c2l(N.xerrneg),"hover").text:" \xb1 "+ie,"x"===V&&(N.distance+=1)}if(!(isNaN(N.yerr)||"log"===N.ya.type&&N.yerr<=0)){var ue=l.tickText(N.ya,N.ya.c2l(N.yerr),"hover").text;N.yLabel+=void 0!==N.yerrneg?" +"+ue+" / -"+l.tickText(N.ya,N.ya.c2l(N.yerrneg),"hover").text:" \xb1 "+ue,"y"===V&&(N.distance+=1)}var le=N.hoverinfo||N.trace.hoverinfo;return le&&"all"!==le&&(-1===(le=Array.isArray(le)?le:le.split("+")).indexOf("x")&&(N.xLabel=void 0),-1===le.indexOf("y")&&(N.yLabel=void 0),-1===le.indexOf("z")&&(N.zLabel=void 0),-1===le.indexOf("text")&&(N.text=void 0),-1===le.indexOf("name")&&(N.name=void 0)),N}function G(N,V,ee){var j,J,$=ee.container,re=ee.fullLayout,ne=re._size,se=ee.event,ie=!!V.hLinePoint,ue=!!V.vLinePoint;if($.selectAll(".spikeline").remove(),ue||ie){var le=s.combine(re.plot_bgcolor,re.paper_bgcolor);if(ie){var de,ve,_e=V.hLinePoint;j=_e&&_e.xa,"cursor"===(J=_e&&_e.ya).spikesnap?(de=se.pointerX,ve=se.pointerY):(de=j._offset+_e.x,ve=J._offset+_e.y);var be,Te,he=u.readability(_e.color,le)<1.5?s.contrast(le):_e.color,me=J.spikemode,Ae=J.spikethickness,we=J.spikecolor||he,Se=l.getPxPosition(N,J);if(-1!==me.indexOf("toaxis")||-1!==me.indexOf("across")){if(-1!==me.indexOf("toaxis")&&(be=Se,Te=de),-1!==me.indexOf("across")){var Pe=J._counterDomainMin,ze=J._counterDomainMax;"free"===J.anchor&&(Pe=Math.min(Pe,J.position),ze=Math.max(ze,J.position)),be=ne.l+Pe*ne.w,Te=ne.l+ze*ne.w}$.insert("line",":first-child").attr({x1:be,x2:Te,y1:ve,y2:ve,"stroke-width":Ae,stroke:we,"stroke-dasharray":f.dashStyle(J.spikedash,Ae)}).classed("spikeline",!0).classed("crisp",!0),$.insert("line",":first-child").attr({x1:be,x2:Te,y1:ve,y2:ve,"stroke-width":Ae+2,stroke:le}).classed("spikeline",!0).classed("crisp",!0)}-1!==me.indexOf("marker")&&$.insert("circle",":first-child").attr({cx:Se+("right"!==J.side?Ae:-Ae),cy:ve,r:Ae,fill:we}).classed("spikeline",!0)}if(ue){var He,tt,Oe=V.vLinePoint;J=Oe&&Oe.ya,"cursor"===(j=Oe&&Oe.xa).spikesnap?(He=se.pointerX,tt=se.pointerY):(He=j._offset+Oe.x,tt=J._offset+Oe.y);var Be,Je,Ye=u.readability(Oe.color,le)<1.5?s.contrast(le):Oe.color,nt=j.spikemode,ft=j.spikethickness,dt=j.spikecolor||Ye,Rt=l.getPxPosition(N,j);if(-1!==nt.indexOf("toaxis")||-1!==nt.indexOf("across")){if(-1!==nt.indexOf("toaxis")&&(Be=Rt,Je=tt),-1!==nt.indexOf("across")){var Et=j._counterDomainMin,at=j._counterDomainMax;"free"===j.anchor&&(Et=Math.min(Et,j.position),at=Math.max(at,j.position)),Be=ne.t+(1-at)*ne.h,Je=ne.t+(1-Et)*ne.h}$.insert("line",":first-child").attr({x1:He,x2:He,y1:Be,y2:Je,"stroke-width":ft,stroke:dt,"stroke-dasharray":f.dashStyle(j.spikedash,ft)}).classed("spikeline",!0).classed("crisp",!0),$.insert("line",":first-child").attr({x1:He,x2:He,y1:Be,y2:Je,"stroke-width":ft+2,stroke:le}).classed("spikeline",!0).classed("crisp",!0)}-1!==nt.indexOf("marker")&&$.insert("circle",":first-child").attr({cx:He,cy:Rt-("top"!==j.side?ft:-ft),r:ft,fill:dt}).classed("spikeline",!0)}}}function X(N,V){return!V||V.vLinePoint!==N._spikepoints.vLinePoint||V.hLinePoint!==N._spikepoints.hLinePoint}function Z(N,V){return a.plainText(N||"",{len:V,allowedTags:["br","sub","sup","b","i","em"]})}function q(N,V,ee){var j=V[N+"a"],J=V[N+"Val"],$=V.cd[0];if("category"===j.type)J=j._categoriesMap[J];else if("date"===j.type){var re=V.trace[N+"periodalignment"];if(re){var ne=V.cd[V.index],se=ne[N+"Start"];void 0===se&&(se=ne[N]);var ie=ne[N+"End"];void 0===ie&&(ie=ne[N]);var ue=ie-se;"end"===re?J+=ue:"middle"===re&&(J+=ue/2)}J=j.d2c(J)}return $&&$.t&&$.t.posLetter===j._id&&("group"!==ee.boxmode&&"group"!==ee.violinmode||(J+=$.t.dPos)),J}function W(N){return N.offsetTop+N.clientTop}function te(N){return N.offsetLeft+N.clientLeft}function R(N,V){var ee=N._fullLayout,j=V.getBoundingClientRect(),J=j.x,$=j.y,re=J+j.width,ne=$+j.height,se=y.apply3DTransform(ee._invTransform)(J,$),ie=y.apply3DTransform(ee._invTransform)(re,ne),ue=se[0],le=se[1],de=ie[0],ve=ie[1];return{x:ue,y:le,width:de-ue,height:ve-le,top:Math.min(le,ve),left:Math.min(ue,de),right:Math.max(ue,de),bottom:Math.max(le,ve)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../color"),u=x("./helpers").isUnifiedHover;Q.exports=function(y,e,n,t){function a(r){t.font[r]||(t.font[r]=e.legend?e.legend.font[r]:e.font[r])}t=t||{},e&&u(e.hovermode)&&(t.font||(t.font={}),a("size"),a("family"),a("color"),e.legend?(t.bgcolor||(t.bgcolor=v.combine(e.legend.bgcolor,e.paper_bgcolor)),t.bordercolor||(t.bordercolor=e.legend.bordercolor)):t.bgcolor||(t.bgcolor=e.paper_bgcolor)),n("hoverlabel.bgcolor",t.bgcolor),n("hoverlabel.bordercolor",t.bordercolor),n("hoverlabel.namelength",t.namelength),p.coerceFont(n,"hoverlabel.font",t.font),n("hoverlabel.align",t.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./layout_attributes");Q.exports=function(u,y){function e(n,t){return void 0!==y[n]?y[n]:p.coerce(u,y,v,n,t)}return e("clickmode"),e("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=x("../dragelement"),y=x("./helpers"),e=x("./layout_attributes"),n=x("./hover");Q.exports={moduleType:"component",name:"fx",constants:x("./constants"),schema:{layout:e},attributes:x("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:x("./layout_global_defaults"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc"),getDistanceFunction:y.getDistanceFunction,getClosest:y.getClosest,inbox:y.inbox,quadrature:y.quadrature,appendArrayPointValue:y.appendArrayPointValue,castHoverOption:function(t,a,r){return v.castOption(t,a,"hoverlabel."+r)},castHoverinfo:function(t,a,r){return v.castOption(t,r,"hoverinfo",function(f){return v.coerceHoverinfo({hoverinfo:f},{_module:t._module},a)})},hover:n.hover,unhover:u.unhover,loneHover:n.loneHover,loneUnhover:function(t){var a=v.isD3Selection(t)?t:p.select(t);a.selectAll("g.hovertext").remove(),a.selectAll(".spikeline").remove()},click:x("./click")}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(x,Q,K){"use strict";var p=x("./constants"),v=x("../../plots/font_attributes")({editType:"none"});v.family.dflt=p.HOVERFONT,v.size.dflt=p.HOVERFONTSIZE,Q.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:v,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./layout_attributes"),u=x("./hovermode_defaults"),y=x("./hoverlabel_defaults");Q.exports=function(e,n){function t(s,i){return p.coerce(e,n,v,s,i)}u(e,n)&&(t("hoverdistance"),t("spikedistance")),"select"===t("dragmode")&&t("selectdirection");var a=n._has("mapbox"),r=n._has("geo"),f=n._basePlotModules.length;"zoom"===n.dragmode&&((a||r)&&1===f||a&&r&&2===f)&&(n.dragmode="pan"),y(e,n,t)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./hoverlabel_defaults"),u=x("./layout_attributes");Q.exports=function(y,e){v(y,e,function(n,t){return p.coerce(y,e,u,n,t)})}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../lib/regex").counter,u=x("../../plots/domain").attributes,y=x("../../plots/cartesian/constants").idRegex,e=x("../../plot_api/plot_template"),n={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[v("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[y.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[y.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:u({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function t(f,s,i){var l=s[i+"axes"],c=Object.keys((f._splomAxes||{})[i]||{});return Array.isArray(l)?l:c.length?c:void 0}function a(f,s,i,l,c,h){var m=s(f+"gap",i),d=s("domain."+f);s(f+"side",l);for(var o=new Array(c),b=d[0],g=(d[1]-b)/(c-m),w=g*(1-m),_=0;_<c;_++){var A=b+g*_;o[h?c-1-_:_]=[A,A+w]}return o}function r(f,s,i,l,c){var h,m=new Array(i);function d(o,b){-1!==s.indexOf(b)&&void 0===l[b]?(m[o]=b,l[b]=o):m[o]=""}if(Array.isArray(f))for(h=0;h<i;h++)d(h,f[h]);else for(d(0,c),h=1;h<i;h++)d(h,c+(h+1));return m}Q.exports={moduleType:"component",name:"grid",schema:{layout:{grid:n}},layoutAttributes:n,sizeDefaults:function(f,s){var i=f.grid||{},l=t(s,i,"x"),c=t(s,i,"y");if(f.grid||l||c){var h,m,d=Array.isArray(i.subplots)&&Array.isArray(i.subplots[0]),o=Array.isArray(l),b=Array.isArray(c),g=o&&l!==i.xaxes&&b&&c!==i.yaxes;d?(h=i.subplots.length,m=i.subplots[0].length):(b&&(h=c.length),o&&(m=l.length));var w=e.newContainer(s,"grid"),_=S("rows",h),A=S("columns",m);if(_*A>1){!d&&!o&&!b&&"independent"===S("pattern")&&(d=!0),w._hasSubplotGrid=d;var T,E,k="top to bottom"===S("roworder"),D=d?.3:.1;g&&s._splomGridDflt&&(T=s._splomGridDflt.xside,E=s._splomGridDflt.yside),w._domains={x:a("x",S,d?.2:.1,T,A),y:a("y",S,D,E,_,k)}}else delete s.grid}function S(C,z){return p.coerce(i,w,n,C,z)}},contentDefaults:function(f,s){var i=s.grid;if(i&&i._domains){var l,c,h,m,d,o,b,g=f.grid||{},w=s._subplots,_=i._hasSubplotGrid,A=i.rows,T=i.columns,E="independent"===i.pattern,k=i._axisMap={};if(_){var O=g.subplots||[];o=i.subplots=new Array(A);var D=1;for(l=0;l<A;l++){var S=o[l]=new Array(T),C=O[l]||[];for(c=0;c<T;c++)if(E?(d=1===D?"xy":"x"+D+"y"+D,D++):d=C[c],S[c]="",-1!==w.cartesian.indexOf(d)){if(b=d.indexOf("y"),h=d.slice(0,b),m=d.slice(b),void 0!==k[h]&&k[h]!==c||void 0!==k[m]&&k[m]!==l)continue;S[c]=d,k[h]=c,k[m]=l}}}else{var z=t(s,g,"x"),B=t(s,g,"y");i.xaxes=r(z,w.xaxis,T,k,"x"),i.yaxes=r(B,w.yaxis,A,k,"y")}var U=i._anchors={},G="top to bottom"===i.roworder;for(var X in k){var Z,q,W,te=X.charAt(0),R=i[te+"side"];if(R.length<8)U[X]="free";else if("x"===te){if("t"===R.charAt(0)===G?(Z=0,q=1,W=A):(Z=A-1,q=-1,W=-1),_){var N=k[X];for(l=Z;l!==W;l+=q)if((d=o[l][N])&&(b=d.indexOf("y"),d.slice(0,b)===X)){U[X]=d.slice(b);break}}else for(l=Z;l!==W;l+=q)if(-1!==w.cartesian.indexOf(X+(m=i.yaxes[l]))){U[X]=m;break}}else if("l"===R.charAt(0)?(Z=0,q=1,W=T):(Z=T-1,q=-1,W=-1),_){var V=k[X];for(l=Z;l!==W;l+=q)if((d=o[V][l])&&(b=d.indexOf("y"),d.slice(b)===X)){U[X]=d.slice(0,b);break}}else for(l=Z;l!==W;l+=q)if(-1!==w.cartesian.indexOf((h=i.xaxes[l])+X)){U[X]=h;break}}}}}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/constants"),v=x("../../plot_api/plot_template").templatedArray;x("../../constants/axis_placeable_objects"),Q.exports=v("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",p.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",p.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib/to_log_range");Q.exports=function(u,y,e,n){y=y||{};var t="log"===e&&"linear"===y.type;if(t||"linear"===e&&"log"===y.type)for(var r,f,s=u._fullLayout.images,i=y._id.charAt(0),l=0;l<s.length;l++)if(f="images["+l+"].",(r=s[l])[i+"ref"]===y._id){var c=r[i],h=r["size"+i],m=null,d=null;if(t){m=v(c,y.range);var o=h/Math.pow(10,m)/2;d=2*Math.log(o+Math.sqrt(1+o*o))/Math.LN10}else d=(m=Math.pow(10,c))*(Math.pow(10,h/2)-Math.pow(10,-h/2));p(m)?p(d)||(d=null):(m=null,d=null),n(f+i,m),n(f+"size"+i,d)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/cartesian/axes"),u=x("../../plots/array_container_defaults"),y=x("./attributes");function e(n,t,a){function r(m,d){return p.coerce(n,t,y,m,d)}var f=r("source");if(!r("visible",!!f))return t;r("layer"),r("xanchor"),r("yanchor"),r("sizex"),r("sizey"),r("sizing"),r("opacity");for(var s={_fullLayout:a},i=["x","y"],l=0;l<2;l++){var c=i[l],h=v.coerceRef(n,t,s,c,"paper",void 0);"paper"!==h&&v.getFromId(s,h)._imgIndices.push(t._index),v.coercePosition(t,s,r,h,c,0)}return t}Q.exports=function(n,t){u(n,t,{name:"images",handleItemDefaults:e})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../drawing"),u=x("../../plots/cartesian/axes"),y=x("../../plots/cartesian/axis_ids"),e=x("../../constants/xmlns_namespaces");Q.exports=function(n){var t,a,r=n._fullLayout,f=[],s={},i=[];for(a=0;a<r.images.length;a++){var l=r.images[a];if(l.visible)if("below"===l.layer&&"paper"!==l.xref&&"paper"!==l.yref){t=y.ref2id(l.xref)+y.ref2id(l.yref);var c=r._plots[t];if(!c){i.push(l);continue}c.mainplot&&(t=c.mainplot.id),s[t]||(s[t]=[]),s[t].push(l)}else"above"===l.layer?f.push(l):i.push(l)}var h={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},m={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function d(T){var E=p.select(this);if(this._imgSrc!==T.source)if(E.attr("xmlns",e.svg),T.source&&"data:"===T.source.slice(0,5))E.attr("xlink:href",T.source),this._imgSrc=T.source;else{var k=new Promise(function(O){var D=new Image;function S(){E.remove(),O()}this.img=D,D.setAttribute("crossOrigin","anonymous"),D.onerror=S,D.onload=function(){var C=document.createElement("canvas");C.width=this.width,C.height=this.height,C.getContext("2d").drawImage(this,0,0);var z=C.toDataURL("image/png");E.attr("xlink:href",z),O()},E.on("error",S),D.src=T.source,this._imgSrc=T.source}.bind(this));n._promises.push(k)}}function o(T){var E,k,O=p.select(this),D=u.getFromId(n,T.xref),S=u.getFromId(n,T.yref),C="domain"===u.getRefType(T.xref),z="domain"===u.getRefType(T.yref),B=r._size;E=void 0!==D?"string"==typeof T.xref&&C?D._length*T.sizex:Math.abs(D.l2p(T.sizex)-D.l2p(0)):T.sizex*B.w,k=void 0!==S?"string"==typeof T.yref&&z?S._length*T.sizey:Math.abs(S.l2p(T.sizey)-S.l2p(0)):T.sizey*B.h;var U,G,X=E*h[T.xanchor].offset,Z=k*m[T.yanchor].offset,q=h[T.xanchor].sizing+m[T.yanchor].sizing;switch(U=void 0!==D?"string"==typeof T.xref&&C?D._length*T.x+D._offset:D.r2p(T.x)+D._offset:T.x*B.w+B.l,U+=X,G=void 0!==S?"string"==typeof T.yref&&z?S._length*(1-T.y)+S._offset:S.r2p(T.y)+S._offset:B.h-T.y*B.h+B.t,G+=Z,T.sizing){case"fill":q+=" slice";break;case"stretch":q="none"}O.attr({x:U,y:G,width:E,height:k,preserveAspectRatio:q,opacity:T.opacity});var W=(D&&"domain"!==u.getRefType(T.xref)?D._id:"")+(S&&"domain"!==u.getRefType(T.yref)?S._id:"");v.setClipUrl(O,W?"clip"+r._uid+W:null,n)}var b=r._imageLowerLayer.selectAll("image").data(i),g=r._imageUpperLayer.selectAll("image").data(f);b.enter().append("image"),g.enter().append("image"),b.exit().remove(),g.exit().remove(),b.each(function(T){d.bind(this)(T),o.bind(this)(T)}),g.each(function(T){d.bind(this)(T),o.bind(this)(T)});var w=Object.keys(r._plots);for(a=0;a<w.length;a++){var _=r._plots[t=w[a]];if(_.imagelayer){var A=_.imagelayer.selectAll("image").data(s[t]||[]);A.enter().append("image"),A.exit().remove(),A.each(function(T){d.bind(this)(T),o.bind(this)(T)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(x,Q,K){"use strict";Q.exports={moduleType:"component",name:"images",layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),includeBasePlot:x("../../plots/cartesian/include_components")("images"),draw:x("./draw"),convertCoords:x("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(x,Q,K){"use strict";var p=x("../../plots/font_attributes"),v=x("../color/attributes");Q.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:v.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:p({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:p({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(x,Q,K){"use strict";Q.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../lib"),u=x("../../plot_api/plot_template"),y=x("./attributes"),e=x("../../plots/layout_attributes"),n=x("./helpers");Q.exports=function(t,a,r){for(var f=t.legend||{},s=0,i=!1,l="normal",c=0;c<r.length;c++){var h=r[c];h.visible&&((h.showlegend||h._dfltShowLegend&&!(h._module&&h._module.attributes&&h._module.attributes.showlegend&&!1===h._module.attributes.showlegend.dflt))&&(s++,h.showlegend&&(i=!0,(p.traceIs(h,"pie-like")||!0===h._input.showlegend)&&s++)),(p.traceIs(h,"bar")&&"stack"===a.barmode||-1!==["tonextx","tonexty"].indexOf(h.fill))&&(l=n.isGrouped({traceorder:l})?"grouped+reversed":"reversed"),void 0!==h.legendgroup&&""!==h.legendgroup&&(l=n.isReversed({traceorder:l})?"reversed+grouped":"grouped"))}var m=v.coerce(t,a,e,"showlegend",i&&s>1);if(!1!==m||f.uirevision){var d=u.newContainer(a,"legend");if(T("uirevision",a.uirevision),!1!==m){T("bgcolor",a.paper_bgcolor),T("bordercolor"),T("borderwidth");var o,b,g,w=v.coerceFont(T,"font",a.font),_="h"===T("orientation");if(_?(o=0,p.getComponentMethod("rangeslider","isVisible")(t.xaxis)?(b=1.1,g="bottom"):(b=-.1,g="top")):(o=1.02,b=1,g="auto"),T("traceorder",l),n.isGrouped(a.legend)&&T("tracegroupgap"),T("itemsizing"),T("itemwidth"),T("itemclick"),T("itemdoubleclick"),T("groupclick"),T("x",o),T("xanchor"),T("y",b),T("yanchor",g),T("valign"),v.noneOrAll(f,d,["x","y"]),T("title.text")){T("title.side",_?"left":"top");var A=v.extendFlat({},w,{size:v.bigFont(w.size)});v.coerceFont(T,"title.font",A)}}}function T(E,k){return v.coerce(f,d,y,E,k)}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=x("../../plots/plots"),y=x("../../registry"),e=x("../../lib/events"),n=x("../dragelement"),t=x("../drawing"),a=x("../color"),r=x("../../lib/svg_text_utils"),f=x("./handle_click"),s=x("./constants"),i=x("../../constants/alignment"),l=i.LINE_SPACING,c=i.FROM_TL,h=i.FROM_BR,m=x("./get_legend_data"),d=x("./style"),o=x("./helpers");function b(k,O,D,S,C){var z=D.data()[0][0].trace,B={event:C,node:D.node(),curveNumber:z.index,expandedIndex:z._expandedIndex,data:k.data,layout:k.layout,frames:k._transitionData._frames,config:k._context,fullData:k._fullData,fullLayout:k._fullLayout};z._group&&(B.group=z._group),y.traceIs(z,"pie-like")&&(B.label=D.datum()[0].label),!1!==e.triggerHandler(k,"plotly_legendclick",B)&&(1===S?O._clickTimeout=setTimeout(function(){k._fullLayout&&f(D,k,S)},k._context.doubleClickDelay):2===S&&(O._clickTimeout&&clearTimeout(O._clickTimeout),k._legendMouseDownTime=0,!1!==e.triggerHandler(k,"plotly_legenddoubleclick",B)&&f(D,k,S)))}function g(k,O,D){var S,C,z=k.data()[0][0],B=z.trace,U=y.traceIs(B,"pie-like"),G=!D._inHover&&O._context.edits.legendText&&!U,X=D._maxNameLength;z.groupTitle?(S=z.groupTitle.text,C=z.groupTitle.font):(C=D.font,D.entries?S=z.text:(S=U?z.label:B.name,B._meta&&(S=v.templateString(S,B._meta))));var Z=v.ensureSingle(k,"text","legendtext");Z.attr("text-anchor","start").call(t.font,C).text(G?w(S,X):S),r.positionText(Z,D.itemwidth+2*s.itemGap,0),G?Z.call(r.makeEditable,{gd:O,text:S}).call(A,k,O,D).on("edit",function(W){this.text(w(W,X)).call(A,k,O,D);var te=z.trace._fullInput||{},R={};if(y.hasTransform(te,"groupby")){var N=y.getTransformIndices(te,"groupby"),ee=v.keyedContainer(te,"transforms["+N[N.length-1]+"].styles","target","value.name");ee.set(z.trace._group,W),R=ee.constructUpdate()}else R.name=W;return y.call("_guiRestyle",O,R,B.index)}):A(Z,k,O,D)}function w(k,O){var D=Math.max(4,O);if(k&&k.trim().length>=D/2)return k;for(var S=D-(k=k||"").length;S>0;S--)k+=" ";return k}function _(k,O){var D,S=O._context.doubleClickDelay,C=1,z=v.ensureSingle(k,"rect","legendtoggle",function(B){O._context.staticPlot||B.style("cursor","pointer").attr("pointer-events","all"),B.call(a.fill,"rgba(0,0,0,0)")});O._context.staticPlot||(z.on("mousedown",function(){(D=(new Date).getTime())-O._legendMouseDownTime<S?C+=1:(C=1,O._legendMouseDownTime=D)}),z.on("mouseup",function(){if(!O._dragged&&!O._editing){var B=O._fullLayout.legend;(new Date).getTime()-O._legendMouseDownTime>S&&(C=Math.max(C-1,1)),b(O,B,k,C,p.event)}}))}function A(k,O,D,S,C){S._inHover&&k.attr("data-notex",!0),r.convertToTspans(k,D,function(){!function(z,B,U,G){var X=z.data()[0][0];if(U._inHover||!X||X.trace.showlegend){var Z=z.select("g[class*=math-group]"),q=Z.node();U||(U=B._fullLayout.legend);var R,N,te=U.borderwidth,V=(1===G?U.title.font:X.groupTitle?X.groupTitle.font:U.font).size*l;if(q){var ee=t.bBox(q);R=ee.height,N=ee.width,1===G?t.setTranslate(Z,te,te+.75*R):t.setTranslate(Z,0,.25*R)}else{var j=z.select(1===G?".legendtitletext":".legendtext"),J=r.lineCount(j),$=j.node();if(R=V*J,N=$?t.bBox($).width:0,1===G)"left"===U.title.side&&(N+=2*s.itemGap),r.positionText(j,te+s.titlePad,te+V);else{var re=2*s.itemGap+U.itemwidth;X.groupTitle&&(re=s.itemGap,N-=U.itemwidth),r.positionText(j,re,-V*((J-1)/2-.3))}}1===G?(U._titleWidth=N,U._titleHeight=R):(X.lineHeight=V,X.height=Math.max(R,16)+3,X.width=N)}else z.remove()}(O,D,S,C)})}function T(k){return v.isRightAnchor(k)?"right":v.isCenterAnchor(k)?"center":"left"}function E(k){return v.isBottomAnchor(k)?"bottom":v.isMiddleAnchor(k)?"middle":"top"}Q.exports=function(k,O){return O||(O=k._fullLayout.legend||{}),function(D,S){var C,z,B=D._fullLayout,U="legend"+B._uid,G=S._inHover;if(G?(C=S.layer,U+="-hover"):C=B._infolayer,C){if(D._legendMouseDownTime||(D._legendMouseDownTime=0),G){if(!S.entries)return;z=m(S.entries,S)}else{if(!D.calcdata)return;z=B.showlegend&&m(D.calcdata,S)}var X=B.hiddenlabels||[];if(!(G||B.showlegend&&z.length))return C.selectAll(".legend").remove(),B._topdefs.select("#"+U).remove(),u.autoMargin(D,"legend");var Z=v.ensureSingle(C,"g","legend",function(J){G||J.attr("pointer-events","all")}),q=v.ensureSingleById(B._topdefs,"clipPath",U,function(J){J.append("rect")}),W=v.ensureSingle(Z,"rect","bg",function(J){J.attr("shape-rendering","crispEdges")});W.call(a.stroke,S.bordercolor).call(a.fill,S.bgcolor).style("stroke-width",S.borderwidth+"px");var te=v.ensureSingle(Z,"g","scrollbox"),R=S.title;if(S._titleWidth=0,S._titleHeight=0,R.text){var N=v.ensureSingle(te,"text","legendtitletext");N.attr("text-anchor","start").call(t.font,R.font).text(R.text),A(N,te,D,S,1)}else te.selectAll(".legendtitletext").remove();var V=v.ensureSingle(Z,"rect","scrollbar",function(J){J.attr(s.scrollBarEnterAttrs).call(a.fill,s.scrollBarColor)}),ee=te.selectAll("g.groups").data(z);ee.enter().append("g").attr("class","groups"),ee.exit().remove();var j=ee.selectAll("g.traces").data(v.identity);j.enter().append("g").attr("class","traces"),j.exit().remove(),j.style("opacity",function(J){var $=J[0].trace;return y.traceIs($,"pie-like")?-1!==X.indexOf(J[0].label)?.5:1:"legendonly"===$.visible?.5:1}).each(function(){p.select(this).call(g,D,S)}).call(d,D,S).each(function(){G||p.select(this).call(_,D)}),v.syncOrAsync([u.previousPromises,function(){return function(J,$,re,ne){var se=J._fullLayout;ne||(ne=se.legend);var ie=se._size,ue=o.isVertical(ne),le=o.isGrouped(ne),de=ne.borderwidth,ve=2*de,_e=s.itemGap,be=ne.itemwidth+2*_e,Te=2*(de+_e),he=E(ne),me=ne.y<0||0===ne.y&&"top"===he,Ae=ne.y>1||1===ne.y&&"bottom"===he,we=ne.tracegroupgap;ne._maxHeight=Math.max(me||Ae?se.height/2:ie.h,30);var Se=0;ne._width=0,ne._height=0;var Ne,it,ke,De,Pe=(it=0,ke=0,(De=(Ne=ne).title.side)&&(-1!==De.indexOf("left")&&(it=Ne._titleWidth),-1!==De.indexOf("top")&&(ke=Ne._titleHeight)),[it,ke]);if(ue)re.each(function(Ne){var it=Ne[0].height;t.setTranslate(this,de+Pe[0],de+Pe[1]+ne._height+it/2+_e),ne._height+=it,ne._width=Math.max(ne._width,Ne[0].width)}),Se=be+ne._width,ne._width+=_e+be+ve,ne._height+=Te,le&&($.each(function(Ne,it){t.setTranslate(this,0,it*ne.tracegroupgap)}),ne._height+=(ne._lgroupsLength-1)*ne.tracegroupgap);else{var ze=T(ne),Oe=Ae||me,Be=se.width/2;ne._maxWidth=Math.max(ne.x<0||0===ne.x&&"right"===ze?Oe&&"left"===ze?ie.l+ie.w:Be:ne.x>1||1===ne.x&&"left"===ze?Oe&&"right"===ze?ie.r+ie.w:Be:ie.w,2*be);var Je=0,Ye=0;re.each(function(Ne){var it=Ne[0].width+be;Je=Math.max(Je,it),Ye+=it}),Se=null;var nt=0;if(le){var ft=0,dt=0,Rt=0;$.each(function(){var Ne=0,it=0;p.select(this).selectAll("g.traces").each(function(De){var Re=De[0].width,Ie=De[0].height;t.setTranslate(this,Pe[0],Pe[1]+de+_e+Ie/2+it),it+=Ie,Ne=Math.max(Ne,be+Re)}),ft=Math.max(ft,it);var ke=Ne+_e;dt>0&&ke+de+dt>ne._maxWidth&&(nt=Math.max(nt,dt),dt=0,Rt+=ft+we,ft=it),t.setTranslate(this,dt,Rt),dt+=ke}),ne._width=Math.max(nt,dt)+de,ne._height=Rt+ft+Te}else{var Et=re.size(),at=Ye+ve+(Et-1)*_e<ne._maxWidth,rt=0,St=0,Xt=0,lr=0;re.each(function(Ne){var it=Ne[0].height,ke=be+Ne[0].width,De=(at?ke:Je)+_e;De+de+St-_e>=ne._maxWidth&&(nt=Math.max(nt,lr),St=0,Xt+=rt,ne._height+=rt,rt=0),t.setTranslate(this,Pe[0]+de+St,Pe[1]+de+Xt+it/2+_e),lr=St+ke+_e,St+=De,rt=Math.max(rt,it)}),at?(ne._width=St+ve,ne._height=rt+Te):(ne._width=Math.max(nt,lr)+ve,ne._height+=rt+Te)}}ne._width=Math.ceil(Math.max(ne._width+Pe[0],ne._titleWidth+2*(de+s.titlePad))),ne._height=Math.ceil(Math.max(ne._height+Pe[1],ne._titleHeight+2*(de+s.itemGap))),ne._effHeight=Math.min(ne._height,ne._maxHeight);var Ue=J._context.edits,Ze=Ue.legendText||Ue.legendPosition;re.each(function(Ne){var it=p.select(this).select(".legendtoggle"),ke=Ne[0].height,De=Ze?be:Se||be+Ne[0].width;ue||(De+=_e/2),t.setRect(it,0,-ke/2,De,ke)})}(D,ee,j,S)},function(){var J,$,re,ne,Oe,Be,Je,Ye,se=B._size,ie=S.borderwidth;if(!G){if(Je=T(Be=(Oe=D)._fullLayout.legend),Ye=E(Be),u.autoMargin(Oe,"legend",{x:Be.x,y:Be.y,l:Be._width*c[Je],r:Be._width*h[Je],b:Be._effHeight*h[Ye],t:Be._effHeight*c[Ye]}))return;var ue=se.l+se.w*S.x-c[T(S)]*S._width,le=se.t+se.h*(1-S.y)-c[E(S)]*S._effHeight;if(B.margin.autoexpand){var de=ue,ve=le;ue=v.constrain(ue,0,B.width-S._width),le=v.constrain(le,0,B.height-S._effHeight),ue!==de&&v.log("Constrain legend.x to make legend fit inside graph"),le!==ve&&v.log("Constrain legend.y to make legend fit inside graph")}t.setTranslate(Z,ue,le)}if(V.on(".drag",null),Z.on("wheel",null),G||S._height<=S._maxHeight||D._context.staticPlot){var _e=S._effHeight;G&&(_e=S._height),W.attr({width:S._width-ie,height:_e-ie,x:ie/2,y:ie/2}),t.setTranslate(te,0,0),q.select("rect").attr({width:S._width-2*ie,height:_e-2*ie,x:ie,y:ie}),t.setClipUrl(te,U,D),t.setRect(V,0,0,0,0),delete S._scrollY}else{var be,he,me=Math.max(s.scrollBarMinHeight,S._effHeight*S._effHeight/S._height),Ae=S._effHeight-me-2*s.scrollBarMargin,we=S._height-S._effHeight,Se=Ae/we,Pe=Math.min(S._scrollY||0,we);W.attr({width:S._width-2*ie+s.scrollBarWidth+s.scrollBarMargin,height:S._effHeight-ie,x:ie/2,y:ie/2}),q.select("rect").attr({width:S._width-2*ie+s.scrollBarWidth+s.scrollBarMargin,height:S._effHeight-2*ie,x:ie,y:ie+Pe}),t.setClipUrl(te,U,D),tt(Pe,me,Se),Z.on("wheel",function(){tt(Pe=v.constrain(S._scrollY+p.event.deltaY/Ae*we,0,we),me,Se),0!==Pe&&Pe!==we&&p.event.preventDefault()});var ze=p.behavior.drag().on("dragstart",function(){var Oe=p.event.sourceEvent;be="touchstart"===Oe.type?Oe.changedTouches[0].clientY:Oe.clientY,he=Pe}).on("drag",function(){var Oe=p.event.sourceEvent;2===Oe.buttons||Oe.ctrlKey||tt(Pe=function(Be,Je,Ye){return v.constrain((Ye-Je)/Se+Be,0,we)}(he,be,"touchmove"===Oe.type?Oe.changedTouches[0].clientY:Oe.clientY),me,Se)});V.call(ze);var He=p.behavior.drag().on("dragstart",function(){var Oe=p.event.sourceEvent;"touchstart"===Oe.type&&(be=Oe.changedTouches[0].clientY,he=Pe)}).on("drag",function(){var Oe=p.event.sourceEvent;"touchmove"===Oe.type&&tt(Pe=function(Be,Je,Ye){return v.constrain((Je-Ye)/Se+Be,0,we)}(he,be,Oe.changedTouches[0].clientY),me,Se)});te.call(He)}function tt(Oe,Be,Je){S._scrollY=D._fullLayout.legend._scrollY=Oe,t.setTranslate(te,0,-Oe),t.setRect(V,S._width,s.scrollBarMargin+Oe*Je,s.scrollBarWidth,Be),q.select("rect").attr("y",ie+Oe)}D._context.edits.legendPosition&&(Z.classed("cursor-move",!0),n.init({element:Z.node(),gd:D,prepFn:function(){var Oe=t.getTranslate(Z);re=Oe.x,ne=Oe.y},moveFn:function(Oe,Be){var Je=re+Oe,Ye=ne+Be;t.setTranslate(Z,Je,Ye),J=n.align(Je,0,se.l,se.l+se.w,S.xanchor),$=n.align(Ye,0,se.t+se.h,se.t,S.yanchor)},doneFn:function(){void 0!==J&&void 0!==$&&y.call("_guiRelayout",D,{"legend.x":J,"legend.y":$})},clickFn:function(Oe,Be){var Je=C.selectAll("g.traces").filter(function(){var Ye=this.getBoundingClientRect();return Be.clientX>=Ye.left&&Be.clientX<=Ye.right&&Be.clientY>=Ye.top&&Be.clientY<=Ye.bottom});Je.size()>0&&b(D,Z,Je,Oe,Be)}}))}],D)}}(k,O)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("./helpers");Q.exports=function(u,y){var e,n,t=y._inHover,a=v.isGrouped(y),r=v.isReversed(y),f={},s=[],i=!1,l={},c=0,h=0;function m(B,U){if(""!==B&&v.isGrouped(y))-1===s.indexOf(B)?(s.push(B),i=!0,f[B]=[U]):f[B].push(U);else{var G="~~i"+c;s.push(G),f[G]=[U],c++}}for(e=0;e<u.length;e++){var d=u[e],o=d[0],b=o.trace,g=b.legendgroup;if(t||b.visible&&b.showlegend)if(p.traceIs(b,"pie-like"))for(l[g]||(l[g]={}),n=0;n<d.length;n++){var w=d[n].label;l[g][w]||(m(g,{label:w,color:d[n].color,i:d[n].i,trace:b,pts:d[n].pts}),l[g][w]=!0,h=Math.max(h,(w||"").length))}else m(g,o),h=Math.max(h,(b.name||"").length)}if(!s.length)return[];var _=!i||!a,A=[];for(e=0;e<s.length;e++){var T=f[s[e]];A.push(_?T[0]:T)}for(_&&(A=[A]),e=0;e<A.length;e++){var E=1/0;for(n=0;n<A[e].length;n++){var k=A[e][n].trace.legendrank;E>k&&(E=k)}A[e][0]._groupMinRank=E,A[e][0]._preGroupSort=e}var O=function(B,U){return B.trace.legendrank-U.trace.legendrank||B._preSort-U._preSort};for(A.forEach(function(B,U){B[0]._preGroupSort=U}),A.sort(function(B,U){return B[0]._groupMinRank-U[0]._groupMinRank||B[0]._preGroupSort-U[0]._preGroupSort}),e=0;e<A.length;e++){A[e].forEach(function(B,U){B._preSort=U}),A[e].sort(O);var D=A[e][0].trace,S=null;for(n=0;n<A[e].length;n++){var C=A[e][n].trace.legendgrouptitle;if(C&&C.text){S=C,t&&(C.font=y._groupTitleFont);break}}if(r&&A[e].reverse(),S){var z=!1;for(n=0;n<A[e].length;n++)if(p.traceIs(A[e][n].trace,"pie-like")){z=!0;break}A[e].unshift({i:-1,groupTitle:S,noClick:z,trace:{showlegend:D.showlegend,legendgroup:D.legendgroup,visible:"toggleitem"===y.groupclick||D.visible}})}for(n=0;n<A[e].length;n++)A[e][n]=[A[e][n]]}return y._lgroupsLength=A.length,y._maxNameLength=h,A}},{"../../registry":638,"./helpers":422}],421:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../registry"),u=!0;Q.exports=function(y,e,n){var t=e._fullLayout;if(!e._dragged&&!e._editing){var a,r=t.legend.itemclick,f=t.legend.itemdoubleclick,s=t.legend.groupclick;if(1===n&&"toggle"===r&&"toggleothers"===f&&u&&e.data&&e._context.showTips&&p.notifier(p._(e,"Double-click on legend to isolate one trace"),"long"),u=!1,1===n?a=r:2===n&&(a=f),a){var i="togglegroup"===s,l=t.hiddenlabels?t.hiddenlabels.slice():[],c=y.data()[0][0];if(!c.groupTitle||!c.noClick){var h,m,d,o,b,g=e._fullData,w=c.trace,_=w.legendgroup,A={},T=[],E=[],k=[];if(v.traceIs(w,"pie-like")){var O=c.label,D=l.indexOf(O);"toggle"===a?-1===D?l.push(O):l.splice(D,1):"toggleothers"===a&&(l=[],e.calcdata[0].forEach(function(V){O!==V.label&&l.push(V.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===l.length&&-1===D&&(l=[])),v.call("_guiRelayout",e,"hiddenlabels",l)}else{var S,C=_&&_.length,z=[];if(C)for(h=0;h<g.length;h++)(S=g[h]).visible&&S.legendgroup===_&&z.push(h);if("toggle"===a){var B;switch(w.visible){case!0:B="legendonly";break;case!1:B=!1;break;case"legendonly":B=!0}if(C)if(i)for(h=0;h<g.length;h++)!1!==g[h].visible&&g[h].legendgroup===_&&N(g[h],B);else N(w,B);else N(w,B)}else if("toggleothers"===a){var X,q=!0;for(h=0;h<g.length;h++)if(X=!0!==g[h].showlegend,!(g[h]===w||X||C&&g[h].legendgroup===_||!0!==g[h].visible||v.traceIs(g[h],"notLegendIsolatable"))){q=!1;break}for(h=0;h<g.length;h++)if(!1!==g[h].visible&&!v.traceIs(g[h],"notLegendIsolatable"))switch(w.visible){case"legendonly":N(g[h],!0);break;case!0:X=!0!==g[h].showlegend&&!g[h].legendgroup,N(g[h],!!(g[h]===w||C&&g[h].legendgroup===_||X)||!!q||"legendonly")}}for(h=0;h<E.length;h++)if(d=E[h]){var W=d.constructUpdate(),te=Object.keys(W);for(m=0;m<te.length;m++)(A[o=te[m]]=A[o]||[])[k[h]]=W[o]}for(b=Object.keys(A),h=0;h<b.length;h++)for(o=b[h],m=0;m<T.length;m++)A[o].hasOwnProperty(m)||(A[o][m]=void 0);v.call("_guiRestyle",e,A,T)}}}}function R(V,ee,j){var J=T.indexOf(V),$=A[ee];return $||($=A[ee]=[]),-1===T.indexOf(V)&&(T.push(V),J=T.length-1),$[J]=j,J}function N(V,ee){if(!c.groupTitle||i){var j=V._fullInput;if(v.hasTransform(j,"groupby")){var J=E[j.index];if(!J){var $=v.getTransformIndices(j,"groupby");J=p.keyedContainer(j,"transforms["+$[$.length-1]+"].styles","target","value.visible"),E[j.index]=J}var ne=J.get(V._group);void 0===ne&&(ne=!0),!1!==ne&&J.set(V._group,ee),k[j.index]=R(j.index,"visible",!1!==j.visible)}else R(j.index,"visible",!1!==j.visible&&ee)}}}},{"../../lib":503,"../../registry":638}],422:[function(x,Q,K){"use strict";K.isGrouped=function(p){return-1!==(p.traceorder||"").indexOf("grouped")},K.isVertical=function(p){return"h"!==p.orientation},K.isReversed=function(p){return-1!==(p.traceorder||"").indexOf("reversed")}},{}],423:[function(x,Q,K){"use strict";Q.exports={moduleType:"component",name:"legend",layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),draw:x("./draw"),style:x("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../registry"),u=x("../../lib"),y=u.strTranslate,e=x("../drawing"),n=x("../color"),t=x("../colorscale/helpers").extractOpts,a=x("../../traces/scatter/subtypes"),r=x("../../traces/pie/style_one"),f=x("../../traces/pie/helpers").castOption,s=x("./constants");function i(h,m){return(m?"radial":"horizontal")+(h?"":"reversed")}function l(h){var m=h[0].trace,d=m.contours,o=a.hasLines(m),b=a.hasMarkers(m),g=m.visible&&m.fill&&"none"!==m.fill,w=!1,_=!1;if(d){var A=d.coloring;"lines"===A?w=!0:o="none"===A||"heatmap"===A||d.showlines,"constraint"===d.type?g="="!==d._operation:"fill"!==A&&"heatmap"!==A||(_=!0)}return{showMarker:b,showLine:o,showFill:g,showGradientLine:w,showGradientFill:_,anyLine:o||w,anyFill:g||_}}function c(h,m,d){return h&&u.isArrayOrTypedArray(h)?m:h>d?d:h}Q.exports=function(h,m,d){d||(d=m._fullLayout.legend);var b="constant"===d.itemsizing,g=d.itemwidth,_=y((g+2*s.itemGap)/2,0),A=function(k,O,D,S){var C;if(k+1)C=k;else{if(!(O&&O.width>0))return 0;C=O.width}return b?S:Math.min(C,D)};function T(k,O,D){var S=k[0].trace,C=S.marker||{},z=C.line||{},B=D?S.visible&&S.type===D:v.traceIs(S,"bar"),U=p.select(O).select("g.legendpoints").selectAll("path.legend"+D).data(B?[k]:[]);U.enter().append("path").classed("legend"+D,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),U.exit().remove(),U.each(function(G){var X=p.select(this),Z=G[0],q=A(Z.mlw,C.line,5,2);X.style("stroke-width",q+"px");var W=Z.mcc;if(!d._inHover&&"mc"in Z){var te=t(C),R=te.mid;void 0===R&&(R=(te.max+te.min)/2),W=e.tryColorscale(C,"")(R)}var N=W||Z.mc||C.color,V=C.pattern,ee=V&&e.getPatternAttr(V.shape,0,"");if(ee){var j=e.getPatternAttr(V.bgcolor,0,null),J=e.getPatternAttr(V.fgcolor,0,null),$=V.fgopacity,re=c(V.size,8,10),ne=c(V.solidity,.5,1);X.call(e.pattern,"legend",m,"legend-"+S.uid,ee,re,ne,W,V.fillmode,j,J,$)}else X.call(n.fill,N);q&&n.stroke(X,Z.mlc||z.color)})}function E(k,O,D){var S=k[0],C=S.trace,z=D?C.visible&&C.type===D:v.traceIs(C,D),B=p.select(O).select("g.legendpoints").selectAll("path.legend"+D).data(z?[k]:[]);if(B.enter().append("path").classed("legend"+D,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),B.exit().remove(),B.size()){var U=(C.marker||{}).line,G=A(f(U.width,S.pts),U,5,2),X=u.minExtend(C,{marker:{line:{width:G}}});X.marker.line.color=U.color;var Z=u.minExtend(S,{trace:X});r(B,Z,X)}}h.each(function(k){var O=p.select(this),D=u.ensureSingle(O,"g","layers");D.style("opacity",k[0].trace.opacity);var S=d.valign,C=k[0].lineHeight,z=k[0].height;D.attr("transform","middle"!==S&&C&&z?y(0,{top:1,bottom:-1}[S]*(.5*(C-z+3))):null),D.selectAll("g.legendfill").data([k]).enter().append("g").classed("legendfill",!0),D.selectAll("g.legendlines").data([k]).enter().append("g").classed("legendlines",!0);var U=D.selectAll("g.legendsymbols").data([k]);U.enter().append("g").classed("legendsymbols",!0),U.selectAll("g.legendpoints").data([k]).enter().append("g").classed("legendpoints",!0)}).each(function(k){var O,D=k[0].trace,S=[];if(D.visible)switch(D.type){case"histogram2d":case"heatmap":S=[["M-15,-2V4H15V-2Z"]],O=!0;break;case"choropleth":case"choroplethmapbox":S=[["M-6,-6V6H6V-6Z"]],O=!0;break;case"densitymapbox":S=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],O="radial";break;case"cone":S=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],O=!1;break;case"streamtube":S=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],O=!1;break;case"surface":S=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],O=!0;break;case"mesh3d":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],O=!1;break;case"volume":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],O=!0;break;case"isosurface":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],O=!1}var C=p.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(S);C.enter().append("path").classed("legend3dandfriends",!0).attr("transform",_).style("stroke-miterlimit",1),C.exit().remove(),C.each(function(z,B){var U,G=p.select(this),X=t(D),Z=X.colorscale,q=X.reversescale;if(Z){if(!O){var W=Z.length;U=0===B?Z[q?W-1:0][1]:1===B?Z[q?0:W-1][1]:Z[Math.floor((W-1)/2)][1]}}else{var te=D.vertexcolor||D.facecolor||D.color;U=u.isArrayOrTypedArray(te)?te[B]||te[0]:te}G.attr("d",z[0]),U?G.call(n.fill,U):G.call(function(R){R.size()&&e.gradient(R,m,"legendfill-"+D.uid,i(q,"radial"===O),Z,"fill")})})}).each(function(k){var O=k[0].trace,D="waterfall"===O.type;if(k[0]._distinct&&D){var S=k[0].trace[k[0].dir].marker;return k[0].mc=S.color,k[0].mlw=S.line.width,k[0].mlc=S.line.color,T(k,this,"waterfall")}var C=[];O.visible&&D&&(C=k[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var z=p.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(C);z.enter().append("path").classed("legendwaterfall",!0).attr("transform",_).style("stroke-miterlimit",1),z.exit().remove(),z.each(function(B){var U=p.select(this),G=O[B[0]].marker,X=A(void 0,G.line,5,2);U.attr("d",B[1]).style("stroke-width",X+"px").call(n.fill,G.color),X&&U.call(n.stroke,G.line.color)})}).each(function(k){T(k,this,"funnel")}).each(function(k){T(k,this)}).each(function(k){var O=k[0].trace,D=p.select(this).select("g.legendpoints").selectAll("path.legendbox").data(O.visible&&v.traceIs(O,"box-violin")?[k]:[]);D.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),D.exit().remove(),D.each(function(){var S=p.select(this);if("all"!==O.boxpoints&&"all"!==O.points||0!==n.opacity(O.fillcolor)||0!==n.opacity((O.line||{}).color)){var C=A(void 0,O.line,5,2);S.style("stroke-width",C+"px").call(n.fill,O.fillcolor),C&&n.stroke(S,O.line.color)}else{var z=u.minExtend(O,{marker:{size:b?12:u.constrain(O.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});D.call(e.pointStyle,z,m)}})}).each(function(k){E(k,this,"funnelarea")}).each(function(k){E(k,this,"pie")}).each(function(k){var O,D,S=l(k),C=S.showFill,z=S.showLine,B=S.showGradientLine,U=S.showGradientFill,G=S.anyFill,X=S.anyLine,Z=k[0],q=Z.trace,W=t(q),te=W.colorscale,R=W.reversescale,N=a.hasMarkers(q)||!G?"M5,0":X?"M5,-2":"M5,-3",V=p.select(this),ee=V.select(".legendfill").selectAll("path").data(C||U?[k]:[]);if(ee.enter().append("path").classed("js-fill",!0),ee.exit().remove(),ee.attr("d",N+"h"+g+"v6h-"+g+"z").call(C?e.fillGroupStyle:function($){$.size()&&e.gradient($,m,"legendfill-"+q.uid,i(R),te,"fill")}),z||B){var j=A(void 0,q.line,10,5);D=u.minExtend(q,{line:{width:j}}),O=[u.minExtend(Z,{trace:D})]}var J=V.select(".legendlines").selectAll("path").data(z||B?[O]:[]);J.enter().append("path").classed("js-line",!0),J.exit().remove(),J.attr("d",N+(B?"l"+g+",0.0001":"h"+g)).call(z?e.lineGroupStyle:function($){if($.size()){var re="legendline-"+q.uid;e.lineGroupStyle($),e.gradient($,m,re,i(R),te,"stroke")}})}).each(function(k){var O,D,S=l(k),B=S.showLine,U=S.showMarker,G=k[0],X=G.trace,Z=!U&&!S.anyLine&&!S.anyFill&&a.hasText(X);function q(J,$,re,ne){var se=u.nestedProperty(X,J).get(),ie=u.isArrayOrTypedArray(se)&&$?$(se):se;if(b&&ie&&void 0!==ne&&(ie=ne),re){if(ie<re[0])return re[0];if(ie>re[1])return re[1]}return ie}function W(J){return G._distinct&&G.index&&J[G.index]?J[G.index]:J[0]}if(U||Z||B){var te={},R={};if(U){te.mc=q("marker.color",W),te.mx=q("marker.symbol",W),te.mo=q("marker.opacity",u.mean,[.2,1]),te.mlc=q("marker.line.color",W),te.mlw=q("marker.line.width",u.mean,[0,5],2),R.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var N=q("marker.size",u.mean,[2,16],12);te.ms=N,R.marker.size=N}B&&(R.line={width:q("line.width",W,[0,10],5)}),Z&&(te.tx="Aa",te.tp=q("textposition",W),te.ts=10,te.tc=q("textfont.color",W),te.tf=q("textfont.family",W)),O=[u.minExtend(G,te)],(D=u.minExtend(X,R)).selectedpoints=null,D.texttemplate=null}var V=p.select(this).select("g.legendpoints"),ee=V.selectAll("path.scatterpts").data(U?O:[]);ee.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",_),ee.exit().remove(),ee.call(e.pointStyle,D,m),U&&(O[0].mrc=3);var j=V.selectAll("g.pointtext").data(Z?O:[]);j.enter().append("g").classed("pointtext",!0).append("text").attr("transform",_),j.exit().remove(),j.selectAll("text").call(e.textPointStyle,D,m)}).each(function(k){var O=k[0].trace,D=p.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(O.visible&&"candlestick"===O.type?[k,k]:[]);D.enter().append("path").classed("legendcandle",!0).attr("d",function(S,C){return C?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",_).style("stroke-miterlimit",1),D.exit().remove(),D.each(function(S,C){var z=p.select(this),B=O[C?"increasing":"decreasing"],U=A(void 0,B.line,5,2);z.style("stroke-width",U+"px").call(n.fill,B.fillcolor),U&&n.stroke(z,B.line.color)})}).each(function(k){var O=k[0].trace,D=p.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(O.visible&&"ohlc"===O.type?[k,k]:[]);D.enter().append("path").classed("legendohlc",!0).attr("d",function(S,C){return C?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",_).style("stroke-miterlimit",1),D.exit().remove(),D.each(function(S,C){var z=p.select(this),B=O[C?"increasing":"decreasing"],U=A(void 0,B.line,5,2);z.style("fill","none").call(e.dashLine,B.line.dash,U),U&&n.stroke(z,B.line.color)})})}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":904,"../../traces/pie/style_one":910,"../../traces/scatter/subtypes":950,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(x,Q,K){"use strict";x("./constants"),Q.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../plots/plots"),u=x("../../plots/cartesian/axis_ids"),y=x("../../fonts/ploticon"),e=x("../shapes/draw").eraseActiveShape,n=x("../../lib"),t=n._,a=Q.exports={};function r(o,b){var g,w,_=b.currentTarget,A=_.getAttribute("data-attr"),T=_.getAttribute("data-val")||!0,E=o._fullLayout,k={},O=u.list(o,null,!0),D=E._cartesianSpikesEnabled;if("zoom"===A){var S,C="in"===T?.5:2,z=(1+C)/2,B=(1-C)/2;for(w=0;w<O.length;w++)if(!(g=O[w]).fixedrange)if(S=g._name,"auto"===T)k[S+".autorange"]=!0;else if("reset"===T){if(void 0===g._rangeInitial)k[S+".autorange"]=!0;else{var U=g._rangeInitial.slice();k[S+".range[0]"]=U[0],k[S+".range[1]"]=U[1]}void 0!==g._showSpikeInitial&&(k[S+".showspikes"]=g._showSpikeInitial,"on"!==D||g._showSpikeInitial||(D="off"))}else{var G=[g.r2l(g.range[0]),g.r2l(g.range[1])],X=[z*G[0]+B*G[1],z*G[1]+B*G[0]];k[S+".range[0]"]=g.l2r(X[0]),k[S+".range[1]"]=g.l2r(X[1])}}else"hovermode"!==A||"x"!==T&&"y"!==T||_.setAttribute("data-val",T=E._isHoriz?"y":"x"),k[A]=T;E._cartesianSpikesEnabled=D,p.call("_guiRelayout",o,k)}function f(o,b){for(var g=b.currentTarget,w=g.getAttribute("data-attr"),_=g.getAttribute("data-val")||!0,A=o._fullLayout._subplots.gl3d||[],T={},E=w.split("."),k=0;k<A.length;k++)T[A[k]+"."+E[1]]=_;T.dragmode="pan"===_?_:"zoom",p.call("_guiRelayout",o,T)}function s(o,b){for(var g=b.currentTarget.getAttribute("data-attr"),w="resetLastSave"===g,_="resetDefault"===g,A=o._fullLayout,T=A._subplots.gl3d||[],E={},k=0;k<T.length;k++){var O,D=T[k],S=D+".camera",C=D+".aspectratio",z=D+".aspectmode",B=A[D]._scene;w?(E[S+".up"]=B.viewInitial.up,E[S+".eye"]=B.viewInitial.eye,E[S+".center"]=B.viewInitial.center,O=!0):_&&(E[S+".up"]=null,E[S+".eye"]=null,E[S+".center"]=null,O=!0),O&&(E[C+".x"]=B.viewInitial.aspectratio.x,E[C+".y"]=B.viewInitial.aspectratio.y,E[C+".z"]=B.viewInitial.aspectratio.z,E[z]=B.viewInitial.aspectmode)}p.call("_guiRelayout",o,E)}function i(o,b){var g=b.currentTarget,w=g._previousVal,_=o._fullLayout,A=_._subplots.gl3d||[],T=["xaxis","yaxis","zaxis"],E={},k={};if(w)k=w,g._previousVal=null;else{for(var O=0;O<A.length;O++){var D=A[O],S=_[D],C=D+".hovermode";E[C]=S.hovermode,k[C]=!1;for(var z=0;z<3;z++){var B=T[z],U=D+"."+B+".showspikes";k[U]=!1,E[U]=S[B].showspikes}}g._previousVal=E}return k}function l(o,b){for(var g=b.currentTarget,w=g.getAttribute("data-attr"),_=g.getAttribute("data-val")||!0,A=o._fullLayout,T=A._subplots.geo||[],E=0;E<T.length;E++){var k=T[E];if("zoom"===w){var D=A[k].projection.scale;p.call("_guiRelayout",o,k+".projection.scale","in"===_?2*D:.5*D)}}"reset"===w&&d(o,"geo")}function c(o){var b=o._fullLayout;return!b.hovermode&&(b._has("cartesian")?b._isHoriz?"y":"x":"closest")}function h(o){var b=c(o);p.call("_guiRelayout",o,"hovermode",b)}function m(o,b){for(var g=b.currentTarget.getAttribute("data-val"),w=o._fullLayout,_=w._subplots.mapbox||[],A={},T=0;T<_.length;T++){var E=_[T],k=w[E].zoom;A[E+".zoom"]="in"===g?1.05*k:k/1.05}p.call("_guiRelayout",o,A)}function d(o,b){for(var g=o._fullLayout,w=g._subplots[b]||[],_={},A=0;A<w.length;A++)for(var T=w[A],E=g[T]._subplot.viewInitial,k=Object.keys(E),O=0;O<k.length;O++){var D=k[O];_[T+"."+D]=E[D]}p.call("_guiRelayout",o,_)}a.toImage={name:"toImage",title:function(o){return t(o,"png"===((o._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:y.camera,click:function(o){var b=o._context.toImageButtonOptions,g={format:b.format||"png"};n.notifier(t(o,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==g.format&&n.isIE()&&(n.notifier(t(o,"IE only supports svg.  Changing format to svg."),"long"),g.format="svg"),["filename","width","height","scale"].forEach(function(w){w in b&&(g[w]=b[w])}),p.call("downloadImage",o,g).then(function(w){n.notifier(t(o,"Snapshot succeeded")+" - "+w,"long")}).catch(function(){n.notifier(t(o,"Sorry, there was a problem downloading your snapshot!"),"long")})}},a.sendDataToCloud={name:"sendDataToCloud",title:function(o){return t(o,"Edit in Chart Studio")},icon:y.disk,click:function(o){v.sendDataToCloud(o)}},a.editInChartStudio={name:"editInChartStudio",title:function(o){return t(o,"Edit in Chart Studio")},icon:y.pencil,click:function(o){v.sendDataToCloud(o)}},a.zoom2d={name:"zoom2d",_cat:"zoom",title:function(o){return t(o,"Zoom")},attr:"dragmode",val:"zoom",icon:y.zoombox,click:r},a.pan2d={name:"pan2d",_cat:"pan",title:function(o){return t(o,"Pan")},attr:"dragmode",val:"pan",icon:y.pan,click:r},a.select2d={name:"select2d",_cat:"select",title:function(o){return t(o,"Box Select")},attr:"dragmode",val:"select",icon:y.selectbox,click:r},a.lasso2d={name:"lasso2d",_cat:"lasso",title:function(o){return t(o,"Lasso Select")},attr:"dragmode",val:"lasso",icon:y.lasso,click:r},a.drawclosedpath={name:"drawclosedpath",title:function(o){return t(o,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:y.drawclosedpath,click:r},a.drawopenpath={name:"drawopenpath",title:function(o){return t(o,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:y.drawopenpath,click:r},a.drawline={name:"drawline",title:function(o){return t(o,"Draw line")},attr:"dragmode",val:"drawline",icon:y.drawline,click:r},a.drawrect={name:"drawrect",title:function(o){return t(o,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:y.drawrect,click:r},a.drawcircle={name:"drawcircle",title:function(o){return t(o,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:y.drawcircle,click:r},a.eraseshape={name:"eraseshape",title:function(o){return t(o,"Erase active shape")},icon:y.eraseshape,click:e},a.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(o){return t(o,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:r},a.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(o){return t(o,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:r},a.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(o){return t(o,"Autoscale")},attr:"zoom",val:"auto",icon:y.autoscale,click:r},a.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(o){return t(o,"Reset axes")},attr:"zoom",val:"reset",icon:y.home,click:r},a.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(o){return t(o,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:y.tooltip_basic,gravity:"ne",click:r},a.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(o){return t(o,"Compare data on hover")},attr:"hovermode",val:function(o){return o._fullLayout._isHoriz?"y":"x"},icon:y.tooltip_compare,gravity:"ne",click:r},a.zoom3d={name:"zoom3d",_cat:"zoom",title:function(o){return t(o,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:y.zoombox,click:f},a.pan3d={name:"pan3d",_cat:"pan",title:function(o){return t(o,"Pan")},attr:"scene.dragmode",val:"pan",icon:y.pan,click:f},a.orbitRotation={name:"orbitRotation",title:function(o){return t(o,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:y["3d_rotate"],click:f},a.tableRotation={name:"tableRotation",title:function(o){return t(o,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:y["z-axis"],click:f},a.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(o){return t(o,"Reset camera to default")},attr:"resetDefault",icon:y.home,click:s},a.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(o){return t(o,"Reset camera to last save")},attr:"resetLastSave",icon:y.movie,click:s},a.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(o){return t(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:function(o,b){var g=i(o,b);p.call("_guiRelayout",o,g)}},a.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(o){return t(o,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:l},a.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(o){return t(o,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:l},a.resetGeo={name:"resetGeo",_cat:"reset",title:function(o){return t(o,"Reset")},attr:"reset",val:null,icon:y.autoscale,click:l},a.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(o){return t(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:h},a.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(o){return t(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:h},a.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(o){return t(o,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:y.tooltip_basic,gravity:"ne",click:h},a.resetViewSankey={name:"resetSankeyGroup",title:function(o){return t(o,"Reset view")},icon:y.home,click:function(o){for(var b={"node.groups":[],"node.x":[],"node.y":[]},g=0;g<o._fullData.length;g++){var w=o._fullData[g]._viewInitial;b["node.groups"].push(w.node.groups.slice()),b["node.x"].push(w.node.x.slice()),b["node.y"].push(w.node.y.slice())}p.call("restyle",o,b)}},a.toggleHover={name:"toggleHover",title:function(o){return t(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:function(o,b){var g=i(o,b);g.hovermode=c(o),p.call("_guiRelayout",o,g)}},a.resetViews={name:"resetViews",title:function(o){return t(o,"Reset views")},icon:y.home,click:function(o,b){var g=b.currentTarget;g.setAttribute("data-attr","zoom"),g.setAttribute("data-val","reset"),r(o,b),g.setAttribute("data-attr","resetLastSave"),s(o,b),d(o,"geo"),d(o,"mapbox")}},a.toggleSpikelines={name:"toggleSpikelines",title:function(o){return t(o,"Toggle Spike Lines")},icon:y.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(o){var b=o._fullLayout;b._cartesianSpikesEnabled="on"===b._cartesianSpikesEnabled?"off":"on",p.call("_guiRelayout",o,function(w){for(var _="on"===w._fullLayout._cartesianSpikesEnabled,A=u.list(w,null,!0),T={},E=0;E<A.length;E++){var k=A[E];T[k._name+".showspikes"]=!!_||k._showSpikeInitial}return T}(o))}},a.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(o){return t(o,"Reset view")},attr:"reset",icon:y.home,click:function(o){d(o,"mapbox")}},a.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(o){return t(o,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:m},a.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(o){return t(o,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:m}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(x,Q,K){"use strict";var p=x("./buttons"),v=Object.keys(p),u=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],y=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(u),e=[];v.forEach(function(n){!function(t){if(-1===y.indexOf(t._cat||t.name)){var a=t.name,r=(t._cat||t.name).toLowerCase();-1===e.indexOf(a)&&e.push(a),-1===e.indexOf(r)&&e.push(r)}}(p[n])}),e.sort(),Q.exports={DRAW_MODES:u,backButtons:y,foreButtons:e}},{"./buttons":426}],428:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../color"),u=x("../../plot_api/plot_template"),y=x("./attributes");Q.exports=function(e,n){var t=e.modebar||{},a=u.newContainer(n,"modebar");function r(s,i){return p.coerce(t,a,y,s,i)}r("orientation"),r("bgcolor",v.addOpacity(n.paper_bgcolor,.5));var f=v.contrast(v.rgb(n.modebar.bgcolor));r("color",v.addOpacity(f,.3)),r("activecolor",v.addOpacity(f,.7)),r("uirevision",n.uirevision),r("add"),r("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(x,Q,K){"use strict";Q.exports={moduleType:"component",name:"modebar",layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),manage:x("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axis_ids"),v=x("../../traces/scatter/subtypes"),u=x("../../registry"),y=x("../fx/helpers").isUnifiedHover,e=x("./modebar"),n=x("./buttons"),t=x("./constants").DRAW_MODES;Q.exports=function(a){var r=a._fullLayout,f=a._context,s=r._modeBar;if(f.displayModeBar||f.watermark){if(!Array.isArray(f.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(f.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i,l=f.modeBarButtons;i=Array.isArray(l)&&l.length?function(c){for(var h=0;h<c.length;h++)for(var m=c[h],d=0;d<m.length;d++){var o=m[d];if("string"==typeof o){if(void 0===n[o])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));c[h][d]=n[o]}}return c}(l):!f.displayModeBar&&f.watermark?[]:function(c){var h=c._fullLayout,m=c._fullData,d=c._context;function o(ne,se){if("string"==typeof se){if(se.toLowerCase()===ne.toLowerCase())return!0}else if(se.name===ne||(se._cat||se.name)===ne.toLowerCase())return!0;return!1}var b=h.modebar.add;"string"==typeof b&&(b=[b]);var g=h.modebar.remove;"string"==typeof g&&(g=[g]);var w=d.modeBarButtonsToAdd.concat(b.filter(function(ne){for(var se=0;se<d.modeBarButtonsToRemove.length;se++)if(o(ne,d.modeBarButtonsToRemove[se]))return!1;return!0})),_=d.modeBarButtonsToRemove.concat(g.filter(function(ne){for(var se=0;se<d.modeBarButtonsToAdd.length;se++)if(o(ne,d.modeBarButtonsToAdd[se]))return!1;return!0})),A=h._has("cartesian"),T=h._has("gl3d"),E=h._has("geo"),k=h._has("pie"),O=h._has("funnelarea"),D=h._has("gl2d"),S=h._has("ternary"),C=h._has("mapbox"),z=h._has("polar"),B=h._has("smith"),U=h._has("sankey"),G=function(ne){for(var se=p.list({_fullLayout:ne},null,!0),ie=0;ie<se.length;ie++)if(!se[ie].fixedrange)return!1;return!0}(h),X=y(h.hovermode),Z=[];function q(ne){if(ne.length){for(var se=[],ie=0;ie<ne.length;ie++){for(var ue=ne[ie],le=n[ue],de=le.name.toLowerCase(),ve=(le._cat||le.name).toLowerCase(),_e=!1,be=0;be<_.length;be++){var Te=_[be].toLowerCase();if(Te===de||Te===ve){_e=!0;break}}_e||se.push(n[ue])}Z.push(se)}}var W=["toImage"];d.showEditInChartStudio?W.push("editInChartStudio"):d.showSendToCloud&&W.push("sendDataToCloud"),q(W);var te=[],R=[],N=[],V=[];(A||D||k||O||S)+E+T+C+z+B>1?(R=["toggleHover"],N=["resetViews"]):E?(te=["zoomInGeo","zoomOutGeo"],R=["hoverClosestGeo"],N=["resetGeo"]):T?(R=["hoverClosest3d"],N=["resetCameraDefault3d","resetCameraLastSave3d"]):C?(te=["zoomInMapbox","zoomOutMapbox"],R=["toggleHover"],N=["resetViewMapbox"]):D?R=["hoverClosestGl2d"]:k?R=["hoverClosestPie"]:U?(R=["hoverClosestCartesian","hoverCompareCartesian"],N=["resetViewSankey"]):R=["toggleHover"],A&&(R=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(ne){for(var se=0;se<ne.length;se++)if(!u.traceIs(ne[se],"noHover"))return!1;return!0}(m)||X)&&(R=[]),!A&&!D||G||(te=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==N[0]&&(N=["resetScale2d"])),T?V=["zoom3d","pan3d","orbitRotation","tableRotation"]:(A||D)&&!G||S?V=["zoom2d","pan2d"]:C||E?V=["pan2d"]:z&&(V=["zoom2d"]),function(ne){for(var se=!1,ie=0;ie<ne.length&&!se;ie++){var ue=ne[ie];ue._module&&ue._module.selectPoints&&(u.traceIs(ue,"scatter-like")?(v.hasMarkers(ue)||v.hasText(ue))&&(se=!0):u.traceIs(ue,"box-violin")&&"all"!==ue.boxpoints&&"all"!==ue.points||(se=!0))}return se}(m)&&V.push("select2d","lasso2d");var ee=[],j=function(ne){-1===ee.indexOf(ne)&&-1!==R.indexOf(ne)&&ee.push(ne)};if(Array.isArray(w)){for(var J=[],$=0;$<w.length;$++){var re=w[$];"string"==typeof re?(re=re.toLowerCase(),-1!==t.indexOf(re)?(h._has("mapbox")||h._has("cartesian"))&&V.push(re):"togglespikelines"===re?j("toggleSpikelines"):"togglehover"===re?j("toggleHover"):"hovercompare"===re?j("hoverCompareCartesian"):"hoverclosest"===re?(j("hoverClosestCartesian"),j("hoverClosestGeo"),j("hoverClosest3d"),j("hoverClosestGl2d"),j("hoverClosestPie")):"v1hovermode"===re&&(j("toggleHover"),j("hoverClosestCartesian"),j("hoverCompareCartesian"),j("hoverClosestGeo"),j("hoverClosest3d"),j("hoverClosestGl2d"),j("hoverClosestPie"))):J.push(re)}w=J}return q(V),q(te.concat(N)),q(ee),function(ne,se){if(se.length)if(Array.isArray(se[0]))for(var ie=0;ie<se.length;ie++)ne.push(se[ie]);else ne.push(se);return ne}(Z,w)}(a),s?s.update(a,i):r._modeBar=e(a,i)}else s&&(s.destroy(),delete r._modeBar)}},{"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":950,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("fast-isnumeric"),u=x("../../lib"),y=x("../../fonts/ploticon"),e=new DOMParser;function n(a){this.container=a.container,this.element=document.createElement("div"),this.update(a.graphInfo,a.buttons),this.container.appendChild(this.element)}var t=n.prototype;t.update=function(a,r){this.graphInfo=a;var f=this.graphInfo._context,s=this.graphInfo._fullLayout,i="modebar-"+s._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===f.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===s.modebar.orientation&&(this.element.className+=" vertical",r=r.reverse());var l=s.modebar,c="hover"===f.displayModeBar?".js-plotly-plot .plotly:hover ":"";u.deleteRelatedStyleRule(i),u.addRelatedStyleRule(i,c+"#"+i+" .modebar-group","background-color: "+l.bgcolor),u.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+l.color),u.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+l.activecolor),u.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+l.activecolor);var h=!this.hasButtons(r),m=this.hasLogo!==f.displaylogo,d=this.locale!==f.locale;if(this.locale=f.locale,(h||m||d)&&(this.removeAllButtons(),this.updateButtons(r),f.watermark||f.displaylogo)){var o=this.getLogo();f.watermark&&(o.className=o.className+" watermark"),"v"===s.modebar.orientation?this.element.insertBefore(o,this.element.childNodes[0]):this.element.appendChild(o),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(a){var r=this;this.buttons=a,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(f){var s=r.createGroup();f.forEach(function(i){var l=i.name;if(!l)throw new Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(l))throw new Error("button name '"+l+"' is taken");r.buttonsNames.push(l);var c=r.createButton(i);r.buttonElements.push(c),s.appendChild(c)}),r.element.appendChild(s)})},t.createGroup=function(){var a=document.createElement("div");return a.className="modebar-group",a},t.createButton=function(a){var r=this,f=document.createElement("a");f.setAttribute("rel","tooltip"),f.className="modebar-btn";var s=a.title;void 0===s?s=a.name:"function"==typeof s&&(s=s(this.graphInfo)),(s||0===s)&&f.setAttribute("data-title",s),void 0!==a.attr&&f.setAttribute("data-attr",a.attr);var i=a.val;if(void 0!==i&&("function"==typeof i&&(i=i(this.graphInfo)),f.setAttribute("data-val",i)),"function"!=typeof a.click)throw new Error("must provide button 'click' function in button config");f.addEventListener("click",function(c){a.click(r.graphInfo,c),r.updateActiveButton(c.currentTarget)}),f.setAttribute("data-toggle",a.toggle||!1),a.toggle&&p.select(f).classed("active",!0);var l=a.icon;return f.appendChild("function"==typeof l?l():this.createIcon(l||y.question)),f.setAttribute("data-gravity",a.gravity||"n"),f},t.createIcon=function(a){var r,f=v(a.height)?Number(a.height):a.ascent-a.descent,s="http://www.w3.org/2000/svg";if(a.path){(r=document.createElementNS(s,"svg")).setAttribute("viewBox",[0,0,a.width,f].join(" ")),r.setAttribute("class","icon");var i=document.createElementNS(s,"path");i.setAttribute("d",a.path),a.transform?i.setAttribute("transform",a.transform):void 0!==a.ascent&&i.setAttribute("transform","matrix(1 0 0 -1 0 "+a.ascent+")"),r.appendChild(i)}return a.svg&&(r=e.parseFromString(a.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},t.updateActiveButton=function(a){var r=this.graphInfo._fullLayout,f=void 0!==a?a.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var i=s.getAttribute("data-val")||!0,l=s.getAttribute("data-attr"),c="true"===s.getAttribute("data-toggle"),h=p.select(s);if(c)l===f&&h.classed("active",!h.classed("active"));else{var m=null===l?l:u.nestedProperty(r,l).get();h.classed("active",m===i)}})},t.hasButtons=function(a){var r=this.buttons;if(!r||a.length!==r.length)return!1;for(var f=0;f<a.length;++f){if(a[f].length!==r[f].length)return!1;for(var s=0;s<a[f].length;s++)if(a[f][s].name!==r[f][s].name)return!1}return!0},t.getLogo=function(){var a=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",u._(this.graphInfo,"Produced with Plotly")),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(y.newplotlylogo)),a.appendChild(r),a},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){u.removeElement(this.container.querySelector(".modebar")),u.deleteRelatedStyleRule(this._uid)},Q.exports=function(a,r){var f=a._fullLayout,s=new n({graphInfo:a,container:f._modebardiv.node(),buttons:r});return f._privateplot&&p.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}},{"../../fonts/ploticon":482,"../../lib":503,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(x,Q,K){"use strict";var p=x("../../plots/font_attributes"),v=x("../color/attributes"),u=(0,x("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});Q.exports={visible:{valType:"boolean",editType:"plot"},buttons:u,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:p({editType:"plot"}),bgcolor:{valType:"color",dflt:v.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:v.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(x,Q,K){"use strict";Q.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../color"),u=x("../../plot_api/plot_template"),y=x("../../plots/array_container_defaults"),e=x("./attributes"),n=x("./constants");function t(a,r,f,s){var i=s.calendar;function l(h,m){return p.coerce(a,r,e.buttons,h,m)}if(l("visible")){var c=l("step");"all"!==c&&(!i||"gregorian"===i||"month"!==c&&"year"!==c?l("stepmode"):r.stepmode="backward",l("count")),l("label")}}Q.exports=function(a,r,f,s,i){var l=a.rangeselector||{},c=u.newContainer(r,"rangeselector");function h(o,b){return p.coerce(l,c,e,o,b)}if(h("visible",y(l,c,{name:"buttons",handleItemDefaults:t,calendar:i}).length>0)){var m=function(o,b,g){for(var w=g.filter(function(E){return b[E].anchor===o._id}),_=0,A=0;A<w.length;A++){var T=b[w[A]].domain;T&&(_=Math.max(T[1],_))}return[o.domain[0],_+n.yPad]}(r,f,s);h("x",m[0]),h("y",m[1]),p.noneOrAll(a,r,["x","y"]),h("xanchor"),h("yanchor"),p.coerceFont(h,"font",f.font);var d=h("bgcolor");h("activecolor",v.contrast(d,n.lightAmount,n.darkAmount)),h("bordercolor"),h("borderwidth")}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../registry"),u=x("../../plots/plots"),y=x("../color"),e=x("../drawing"),n=x("../../lib"),t=n.strTranslate,a=x("../../lib/svg_text_utils"),r=x("../../plots/cartesian/axis_ids"),f=x("../../constants/alignment"),s=f.LINE_SPACING,i=f.FROM_TL,l=f.FROM_BR,c=x("./constants"),h=x("./get_update_object");function m(b){return b._id}function d(b,g,w){var A,T,_=n.ensureSingle(b,"rect","selector-rect",function(A){A.attr("shape-rendering","crispEdges")});_.attr({rx:c.rx,ry:c.ry}),_.call(y.stroke,g.bordercolor).call(y.fill,(A=g,T=w,T._isActive||T._isHovered?A.activecolor:A.bgcolor)).style("stroke-width",g.borderwidth+"px")}function o(b,g,w,_){var A,T;n.ensureSingle(b,"text","selector-text",function(A){A.attr("text-anchor","middle")}).call(e.font,g.font).text((A=w,T=_._fullLayout._meta,A.label?T?n.templateString(A.label,T):A.label:"all"===A.step?"all":A.count+A.step.charAt(0))).call(function(A){a.convertToTspans(A,_)})}Q.exports=function(b){var g=b._fullLayout._infolayer.selectAll(".rangeselector").data(function(w){for(var _=r.list(w,"x",!0),A=[],T=0;T<_.length;T++){var E=_[T];E.rangeselector&&E.rangeselector.visible&&A.push(E)}return A}(b),m);g.enter().append("g").classed("rangeselector",!0),g.exit().remove(),g.style({cursor:"pointer","pointer-events":"all"}),g.each(function(w){var _=p.select(this),A=w,T=A.rangeselector,E=_.selectAll("g.button").data(n.filterVisible(T.buttons));E.enter().append("g").classed("button",!0),E.exit().remove(),E.each(function(k){var O=p.select(this),D=h(A,k);k._isActive=function(S,C,z){if("all"===C.step)return!0===S.autorange;var B=Object.keys(z);return S.range[0]===z[B[0]]&&S.range[1]===z[B[1]]}(A,k,D),O.call(d,T,k),O.call(o,T,k,b),O.on("click",function(){b._dragged||v.call("_guiRelayout",b,D)}),O.on("mouseover",function(){k._isHovered=!0,O.call(d,T,k)}),O.on("mouseout",function(){k._isHovered=!1,O.call(d,T,k)})}),function(k,O,D,S,C){var z=0,B=0,U=D.borderwidth;O.each(function(){var te=p.select(this).select(".selector-text"),N=Math.max(D.font.size*s*a.lineCount(te),16)+3;B=Math.max(B,N)}),O.each(function(){var te=p.select(this),R=te.select(".selector-rect"),N=te.select(".selector-text"),V=N.node()&&e.bBox(N.node()).width,ee=D.font.size*s,j=a.lineCount(N),J=Math.max(V+10,c.minButtonWidth);te.attr("transform",t(U+z,U)),R.attr({x:0,y:0,width:J,height:B}),a.positionText(N,J/2,B/2-(j-1)*ee/2+3),z+=J+5});var G=k._fullLayout._size,X=G.l+G.w*D.x,Z=G.t+G.h*(1-D.y),q="left";n.isRightAnchor(D)&&(X-=z,q="right"),n.isCenterAnchor(D)&&(X-=z/2,q="center");var W="top";n.isBottomAnchor(D)&&(Z-=B,W="bottom"),n.isMiddleAnchor(D)&&(Z-=B/2,W="middle"),z=Math.ceil(z),B=Math.ceil(B),X=Math.round(X),Z=Math.round(Z),u.autoMargin(k,S+"-range-selector",{x:D.x,y:D.y,l:z*i[q],r:z*l[q],b:B*l[W],t:B*i[W]}),C.attr("transform",t(X,Z))}(b,E,T,A._name,_)})}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(x,Q,K){"use strict";var p=x("d3-time"),v=x("../../lib").titleCase;Q.exports=function(u,y){var e=u._name,n={};if("all"===y.step)n[e+".autorange"]=!0;else{var t=function(a,r){var f,s=a.range,i=new Date(a.r2l(s[1])),c=p["utc"+v(r.step)],h=r.count;switch(r.stepmode){case"backward":f=a.l2r(+c.offset(i,-h));break;case"todate":var m=c.offset(i,-h);f=a.l2r(+c.ceil(m))}return[f,s[1]]}(u,y);n[e+".range[0]"]=t[0],n[e+".range[1]"]=t[1]}return n}},{"../../lib":503,"d3-time":122}],437:[function(x,Q,K){"use strict";Q.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:x("./attributes")}}},layoutAttributes:x("./attributes"),handleDefaults:x("./defaults"),draw:x("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(x,Q,K){"use strict";var p=x("../color/attributes");Q.exports={bgcolor:{valType:"color",dflt:p.background,editType:"plot"},bordercolor:{valType:"color",dflt:p.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axis_ids").list,v=x("../../plots/cartesian/autorange").getAutoRange,u=x("./constants");Q.exports=function(y){for(var e=p(y,"x",!0),n=0;n<e.length;n++){var t=e[n],a=t[u.name];a&&a.visible&&a.autorange&&(a._input.autorange=!0,a._input.range=a.range=v(y,t))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(x,Q,K){"use strict";Q.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plot_api/plot_template"),u=x("../../plots/cartesian/axis_ids"),y=x("./attributes"),e=x("./oppaxis_attributes");Q.exports=function(n,t,a){var r=n[a],f=t[a];if(r.rangeslider||t._requestRangeslider[f._id]){p.isPlainObject(r.rangeslider)||(r.rangeslider={});var s,i,l=r.rangeslider,c=v.newContainer(f,"rangeslider");if(_("visible")){_("bgcolor",t.plot_bgcolor),_("bordercolor"),_("borderwidth"),_("thickness"),_("autorange",!f.isValidRange(l.range)),_("range");var h=t._subplots;if(h)for(var m=h.cartesian.filter(function(T){return T.substr(0,T.indexOf("y"))===u.name2id(a)}).map(function(T){return T.substr(T.indexOf("y"),T.length)}),d=p.simpleMap(m,u.id2name),o=0;o<d.length;o++){var b=d[o];s=l[b]||{},i=v.newContainer(c,b,"yaxis");var g,w=t[b];s.range&&w.isValidRange(s.range)&&(g="fixed"),"match"!==A("rangemode",g)&&A("range",w.range.slice())}c._input=l}}function _(T,E){return p.coerce(l,c,y,T,E)}function A(T,E){return p.coerce(s,i,e,T,E)}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../registry"),u=x("../../plots/plots"),y=x("../../lib"),e=y.strTranslate,n=x("../drawing"),t=x("../color"),a=x("../titles"),r=x("../../plots/cartesian"),f=x("../../plots/cartesian/axis_ids"),s=x("../dragelement"),i=x("../../lib/setcursor"),l=x("./constants");function c(g,w,_,A){var T=y.ensureSingle(g,"rect",l.bgClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),E=A.borderwidth%2==0?A.borderwidth:A.borderwidth-1,k=-A._offsetShift,O=n.crispRound(w,A.borderwidth);T.attr({width:A._width+E,height:A._height+E,transform:e(k,k),fill:A.bgcolor,stroke:A.bordercolor,"stroke-width":O})}function h(g,w,_,A){y.ensureSingleById(w._fullLayout._topdefs,"clipPath",A._clipId,function(E){E.append("rect").attr({x:0,y:0})}).select("rect").attr({width:A._width,height:A._height})}function m(g,w,_,A){var T,E=w.calcdata,k=g.selectAll("g."+l.rangePlotClassName).data(_._subplotsWith,y.identity);k.enter().append("g").attr("class",function(O){return l.rangePlotClassName+" "+O}).call(n.setClipUrl,A._clipId,w),k.order(),k.exit().remove(),k.each(function(O,D){var S=p.select(this),C=0===D,z=f.getFromId(w,O,"y"),B=z._name,U=A[B],G={data:[],layout:{xaxis:{type:_.type,domain:[0,1],range:A.range.slice(),calendar:_.calendar},width:A._width,height:A._height,margin:{t:0,b:0,l:0,r:0}},_context:w._context};_.rangebreaks&&(G.layout.xaxis.rangebreaks=_.rangebreaks),G.layout[B]={type:z.type,domain:[0,1],range:"match"!==U.rangemode?U.range.slice():z.range.slice(),calendar:z.calendar},z.rangebreaks&&(G.layout[B].rangebreaks=z.rangebreaks),u.supplyDefaults(G);var X=G._fullLayout.xaxis,Z=G._fullLayout[B];X.clearCalc(),X.setScale(),Z.clearCalc(),Z.setScale();var q={id:O,plotgroup:S,xaxis:X,yaxis:Z,isRangePlot:!0};C?T=q:(q.mainplot="xy",q.mainplotinfo=T),r.rangePlot(w,q,function(W,te){for(var R=[],N=0;N<W.length;N++){var V=W[N],ee=V[0].trace;ee.xaxis+ee.yaxis===te&&R.push(V)}return R}(E,O))})}function d(g,w,_,A,T){y.ensureSingle(g,"rect",l.maskMinClassName,function(E){E.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",A._height).call(t.fill,l.maskColor),y.ensureSingle(g,"rect",l.maskMaxClassName,function(E){E.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",A._height).call(t.fill,l.maskColor),"match"!==T.rangemode&&(y.ensureSingle(g,"rect",l.maskMinOppAxisClassName,function(E){E.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",A._width).call(t.fill,l.maskOppAxisColor),y.ensureSingle(g,"rect",l.maskMaxOppAxisClassName,function(E){E.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",A._width).style("border-top",l.maskOppBorder).call(t.fill,l.maskOppAxisColor))}function o(g,w,_,A){w._context.staticPlot||y.ensureSingle(g,"rect",l.slideBoxClassName,function(T){T.attr({y:0,cursor:l.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:A._height,fill:l.slideBoxFill})}function b(g,w,_,A){var T=y.ensureSingle(g,"g",l.grabberMinClassName),E=y.ensureSingle(g,"g",l.grabberMaxClassName),k={x:0,width:l.handleWidth,rx:l.handleRadius,fill:t.background,stroke:t.defaultLine,"stroke-width":l.handleStrokeWidth,"shape-rendering":"crispEdges"},O={y:Math.round(A._height/4),height:Math.round(A._height/2)};y.ensureSingle(T,"rect",l.handleMinClassName,function(S){S.attr(k)}).attr(O),y.ensureSingle(E,"rect",l.handleMaxClassName,function(S){S.attr(k)}).attr(O);var D={width:l.grabAreaWidth,x:0,y:0,fill:l.grabAreaFill,cursor:w._context.staticPlot?void 0:l.grabAreaCursor};y.ensureSingle(T,"rect",l.grabAreaMinClassName,function(S){S.attr(D)}).attr("height",A._height),y.ensureSingle(E,"rect",l.grabAreaMaxClassName,function(S){S.attr(D)}).attr("height",A._height)}Q.exports=function(g){for(var w=g._fullLayout,_=w._rangeSliderData,A=0;A<_.length;A++){var T=_[A][l.name];T._clipId=T._id+"-"+w._uid}var E=w._infolayer.selectAll("g."+l.containerClassName).data(_,function(k){return k._name});E.exit().each(function(k){w._topdefs.select("#"+k[l.name]._clipId).remove()}).remove(),0!==_.length&&(E.enter().append("g").classed(l.containerClassName,!0).attr("pointer-events","all"),E.each(function(k){var O=p.select(this),D=k[l.name],S=w[f.id2name(k.anchor)],C=D[f.id2name(k.anchor)];if(D.range){var z,B=y.simpleMap(D.range,k.r2l),U=y.simpleMap(k.range,k.r2l);z=U[0]<U[1]?[Math.min(B[0],U[0]),Math.max(B[1],U[1])]:[Math.max(B[0],U[0]),Math.min(B[1],U[1])],D.range=D._input.range=y.simpleMap(z,k.l2r)}k.cleanRange("rangeslider.range");var G=w._size,X=k.domain;D._width=G.w*(X[1]-X[0]);var Z=Math.round(G.l+G.w*X[0]),q=Math.round(G.t+G.h*(1-k._counterDomainMin)+("bottom"===k.side?k._depth:0)+D._offsetShift+l.extraPad);O.attr("transform",e(Z,q)),D._rl=y.simpleMap(D.range,k.r2l);var W=D._rl[0],te=D._rl[1],R=te-W;if(D.p2d=function(se){return se/D._width*R+W},D.d2p=function(se){return(se-W)/R*D._width},k.rangebreaks){var N=k.locateBreaks(W,te);if(N.length){var V,ee,j=0;for(V=0;V<N.length;V++)j+=(ee=N[V]).max-ee.min;var J=D._width/(te-W-j),$=[-J*W];for(V=0;V<N.length;V++)$.push($[$.length-1]-J*((ee=N[V]).max-ee.min));for(D.d2p=function(se){for(var ie=$[0],ue=0;ue<N.length;ue++){var le=N[ue];if(se>=le.max)ie=$[ue+1];else if(se<le.min)break}return ie+J*se},V=0;V<N.length;V++)(ee=N[V]).pmin=D.d2p(ee.min),ee.pmax=D.d2p(ee.max);D.p2d=function(se){for(var ie=$[0],ue=0;ue<N.length;ue++){var le=N[ue];if(se>=le.pmax)ie=$[ue+1];else if(se<le.pmin)break}return(se-ie)/J}}}if("match"!==C.rangemode){var re=S.r2l(C.range[0]),ne=S.r2l(C.range[1])-re;D.d2pOppAxis=function(se){return(se-re)/ne*D._height}}O.call(c,g,k,D).call(h,g,k,D).call(m,g,k,D).call(d,g,k,D,C).call(o,g,k,D).call(b,g,k,D),function(se,ie,ue,le){if(!ie._context.staticPlot){var de=se.select("rect."+l.slideBoxClassName).node(),ve=se.select("rect."+l.grabAreaMinClassName).node(),_e=se.select("rect."+l.grabAreaMaxClassName).node();se.on("mousedown",be),se.on("touchstart",be)}function be(){var Te=p.event,he=Te.target,me=Te.clientX||Te.touches[0].clientX,Ae=me-se.node().getBoundingClientRect().left,we=le.d2p(ue._rl[0]),Se=le.d2p(ue._rl[1]),Pe=s.coverSlip();function ze(tt){var Oe,Be,Je,Ye=+(tt.clientX||tt.touches[0].clientX)-me;switch(he){case de:Je="ew-resize",Oe=we+Ye,Be=Se+Ye;break;case ve:Je="col-resize",Oe=we+Ye,Be=Se;break;case _e:Je="col-resize",Oe=we,Be=Se+Ye;break;default:Je="ew-resize",Oe=Ae,Be=Ae+Ye}if(Be<Oe){var nt=Be;Be=Oe,Oe=nt}le._pixelMin=Oe,le._pixelMax=Be,i(p.select(Pe),Je),function(ft,dt,Rt,Et){function at(Xt){return Rt.l2r(y.constrain(Xt,Et._rl[0],Et._rl[1]))}var rt=at(Et.p2d(Et._pixelMin)),St=at(Et.p2d(Et._pixelMax));window.requestAnimationFrame(function(){v.call("_guiRelayout",dt,Rt._name+".range",[rt,St])})}(0,ie,ue,le)}function He(){Pe.removeEventListener("mousemove",ze),Pe.removeEventListener("mouseup",He),this.removeEventListener("touchmove",ze),this.removeEventListener("touchend",He),y.removeElement(Pe)}this.addEventListener("touchmove",ze),this.addEventListener("touchend",He),Pe.addEventListener("mousemove",ze),Pe.addEventListener("mouseup",He)}}(O,g,k,D),function(se,ie,ue,le,de,ve){var _e=l.handleWidth/2;function be(He){return y.constrain(He,0,le._width)}function Te(He){return y.constrain(He,0,le._height)}function he(He){return y.constrain(He,-_e,le._width+_e)}var me=be(le.d2p(ue._rl[0])),Ae=be(le.d2p(ue._rl[1]));if(se.select("rect."+l.slideBoxClassName).attr("x",me).attr("width",Ae-me),se.select("rect."+l.maskMinClassName).attr("width",me),se.select("rect."+l.maskMaxClassName).attr("x",Ae).attr("width",le._width-Ae),"match"!==ve.rangemode){var we=le._height-Te(le.d2pOppAxis(de._rl[1])),Se=le._height-Te(le.d2pOppAxis(de._rl[0]));se.select("rect."+l.maskMinOppAxisClassName).attr("x",me).attr("height",we).attr("width",Ae-me),se.select("rect."+l.maskMaxOppAxisClassName).attr("x",me).attr("y",Se).attr("height",le._height-Se).attr("width",Ae-me),se.select("rect."+l.slideBoxClassName).attr("y",we).attr("height",Se-we)}var Pe=Math.round(he(me-_e))-.5,ze=Math.round(he(Ae-_e))+.5;se.select("g."+l.grabberMinClassName).attr("transform",e(Pe,.5)),se.select("g."+l.grabberMaxClassName).attr("transform",e(ze,.5))}(O,0,k,D,S,C),"bottom"===k.side&&a.draw(g,k._id+"title",{propContainer:k,propName:k._name+".title",placeholder:w._dfltTitle.x,attributes:{x:k._offset+k._length/2,y:q+D._height+D._offsetShift+10+1.5*k.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axis_ids"),v=x("../../lib/svg_text_utils"),u=x("./constants"),y=x("../../constants/alignment").LINE_SPACING,e=u.name;function n(t){var a=t&&t[e];return a&&a.visible}K.isVisible=n,K.makeData=function(t){var a=p.list({_fullLayout:t},"x",!0),r=t.margin,f=[];if(!t._has("gl2d"))for(var s=0;s<a.length;s++){var i=a[s];if(n(i)){f.push(i);var l=i[e];l._id=e+i._id,l._height=(t.height-r.b-r.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}t._rangeSliderData=f},K.autoMarginOpts=function(t,a){var r=t._fullLayout,f=a[e],s=a._id.charAt(0),i=0,l=0;return"bottom"===a.side&&(i=a._depth,a.title.text!==r._dfltTitle[s]&&(l=1.5*a.title.font.size+10+f._offsetShift,l+=(a.title.text.match(v.BR_TAG_ALL)||[]).length*a.title.font.size*y)),{x:0,y:a._counterDomainMin,l:0,r:0,t:0,b:f._height+i+Math.max(r.margin.b,l),pad:u.extraPad+2*f._offsetShift}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./attributes"),u=x("./oppaxis_attributes"),y=x("./helpers");Q.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:p.extendFlat({},v,{yaxis:u})}}},layoutAttributes:x("./attributes"),handleDefaults:x("./defaults"),calcAutorange:x("./calc_autorange"),draw:x("./draw"),isVisible:y.isVisible,makeData:y.makeData,autoMarginOpts:y.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(x,Q,K){"use strict";Q.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(x,Q,K){"use strict";var p=x("../annotations/attributes"),v=x("../../traces/scatter/attributes").line,u=x("../drawing/attributes").dash,y=x("../../lib/extend").extendFlat,e=x("../../plot_api/plot_template").templatedArray;x("../../constants/axis_placeable_objects"),Q.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:y({},p.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:y({},p.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:y({},v.color,{editType:"arraydraw"}),width:y({},v.width,{editType:"calc+arraydraw"}),dash:y({},u,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":925,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/cartesian/axes"),u=x("./constants"),y=x("./helpers");function e(r){return t(r.line.width,r.xsizemode,r.x0,r.x1,r.path,!1)}function n(r){return t(r.line.width,r.ysizemode,r.y0,r.y1,r.path,!0)}function t(r,f,s,i,l,c){var h=r/2,m=c;if("pixel"===f){var d=l?y.extractPathCoords(l,c?u.paramIsY:u.paramIsX):[s,i],o=p.aggNums(Math.max,null,d),b=p.aggNums(Math.min,null,d),g=b<0?Math.abs(b)+h:h,w=o>0?o+h:h;return{ppad:h,ppadplus:m?g:w,ppadminus:m?w:g}}return{ppad:h}}function a(r,f,s,i,l){var c="category"===r.type||"multicategory"===r.type?r.r2c:r.d2c;if(void 0!==f)return[c(f),c(s)];if(i){var h,m,d,o,b=1/0,g=-1/0,w=i.match(u.segmentRE);for("date"===r.type&&(c=y.decodeDate(c)),h=0;h<w.length;h++)void 0!==(m=l[w[h].charAt(0)].drawn)&&(!(d=w[h].substr(1).match(u.paramRE))||d.length<m||((o=c(d[m]))<b&&(b=o),o>g&&(g=o)));return g>=b?[b,g]:void 0}}Q.exports=function(r){var s=p.filterVisible(r._fullLayout.shapes);if(s.length&&r._fullData.length)for(var i=0;i<s.length;i++){var l,c,h=s[i];h._extremes={};var m=v.getRefType(h.xref),d=v.getRefType(h.yref);if("paper"!==h.xref&&"domain"!==m){var o="pixel"===h.xsizemode?h.xanchor:h.x0,b="pixel"===h.xsizemode?h.xanchor:h.x1;(c=a(l=v.getFromId(r,h.xref),o,b,h.path,u.paramIsX))&&(h._extremes[l._id]=v.findExtremes(l,c,e(h)))}if("paper"!==h.yref&&"domain"!==d){var g="pixel"===h.ysizemode?h.yanchor:h.y0,w="pixel"===h.ysizemode?h.yanchor:h.y1;(c=a(l=v.getFromId(r,h.yref),g,w,h.path,u.paramIsY))&&(h._extremes[l._id]=v.findExtremes(l,c,n(h)))}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(x,Q,K){"use strict";Q.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/cartesian/axes"),u=x("../../plots/array_container_defaults"),y=x("./attributes"),e=x("./helpers");function n(t,a,r){function f(C,z){return p.coerce(t,a,y,C,z)}if(f("visible")){var s=f("path"),i=f("type",s?"path":"rect");"path"!==a.type&&delete a.path,f("editable"),f("layer"),f("opacity"),f("fillcolor"),f("fillrule"),f("line.width")&&(f("line.color"),f("line.dash"));for(var l=f("xsizemode"),c=f("ysizemode"),h=["x","y"],m=0;m<2;m++){var d,o,b,g=h[m],w=g+"anchor",_="x"===g?l:c,A={_fullLayout:r},T=v.coerceRef(t,a,A,g,void 0,"paper");if("range"===v.getRefType(T)?((d=v.getFromId(A,T))._shapeIndices.push(a._index),b=e.rangeToShapePosition(d),o=e.shapePositionToRange(d)):o=b=p.identity,"path"!==i){var E=g+"0",k=g+"1",O=t[E],D=t[k];t[E]=o(t[E],!0),t[k]=o(t[k],!0),"pixel"===_?(f(E,0),f(k,10)):(v.coercePosition(a,A,f,T,E,.25),v.coercePosition(a,A,f,T,k,.75)),a[E]=b(a[E]),a[k]=b(a[k]),t[E]=O,t[k]=D}if("pixel"===_){var S=t[w];t[w]=o(t[w],!0),v.coercePosition(a,A,f,T,w,.25),a[w]=b(a[w]),t[w]=S}}"path"===i?f("path"):p.noneOrAll(t,a,["x0","x1","y0","y1"])}}Q.exports=function(t,a){u(t,a,{name:"shapes",handleItemDefaults:n})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../lib"),u=x("../../plots/cartesian/axes"),y=x("./draw_newshape/helpers").readPaths,e=x("./draw_newshape/display_outlines"),n=x("../../plots/cartesian/handle_outline").clearOutlineControllers,t=x("../color"),a=x("../drawing"),r=x("../../plot_api/plot_template").arrayEditor,f=x("../dragelement"),s=x("../../lib/setcursor"),i=x("./constants"),l=x("./helpers");function c(_){var A=_._fullLayout;for(var T in A._shapeUpperLayer.selectAll("path").remove(),A._shapeLowerLayer.selectAll("path").remove(),A._plots){var E=A._plots[T].shapelayer;E&&E.selectAll("path").remove()}for(var k=0;k<A.shapes.length;k++)A.shapes[k].visible&&d(_,k)}function h(_){return!!_._fullLayout._drawing}function m(_){return!_._context.edits.shapePosition}function d(_,A){_._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+A+'"]').remove();var T=l.makeOptionsAndPlotinfo(_,A),E=T.options,k=T.plotinfo;E._input&&!1!==E.visible&&function(D){var S=b(_,E),C={"data-index":A,"fill-rule":E.fillrule,d:S},z=E.opacity,B=E.fillcolor,U=E.line.width?E.line.color:"rgba(0,0,0,0)",G=E.line.width,X=E.line.dash;G||!0!==E.editable||(G=5,X="solid");var Z="Z"!==S[S.length-1],q=m(_)&&E.editable&&_._fullLayout._activeShapeIndex===A;q&&(B=Z?"rgba(0,0,0,0)":_._fullLayout.activeshape.fillcolor,z=_._fullLayout.activeshape.opacity);var W,te=D.append("path").attr(C).style("opacity",z).call(t.stroke,U).call(t.fill,B).call(a.dashLine,X,G);if(o(te,_,E),(q||_._context.edits.shapePosition)&&(W=r(_.layout,"shapes",E)),q){te.style({cursor:"move"});var R={element:te.node(),plotinfo:k,gd:_,editHelpers:W,isActiveShape:!0},N=y(S,_);e(N,te,R)}else _._context.edits.shapePosition?function(V,ee,j,J,$,re){var ne,se,ie,ue,le,de,ve,_e,be,Te,he,me,Ae,we,Se,Pe,ze="pixel"===j.xsizemode,He="pixel"===j.ysizemode,tt="line"===j.type,Oe="path"===j.type,Be=re.modifyItem,Je=u.getFromId(V,j.xref),Ye=u.getRefType(j.xref),nt=u.getFromId(V,j.yref),ft=u.getRefType(j.yref),dt=l.getDataToPixel(V,Je,!1,Ye),Rt=l.getDataToPixel(V,nt,!0,ft),Et=l.getPixelToData(V,Je,!1,Ye),at=l.getPixelToData(V,nt,!0,ft),rt=tt?function(){var it=Math.max(j.line.width,10),ke=$.append("g").attr("data-index",J);ke.append("path").attr("d",ee.attr("d")).style({cursor:"move","stroke-width":it,"stroke-opacity":"0"});var De={"fill-opacity":"0"},Re=Math.max(it/2,10);return ke.append("circle").attr({"data-line-point":"start-point",cx:ze?dt(j.xanchor)+j.x0:dt(j.x0),cy:He?Rt(j.yanchor)-j.y0:Rt(j.y0),r:Re}).style(De).classed("cursor-grab",!0),ke.append("circle").attr({"data-line-point":"end-point",cx:ze?dt(j.xanchor)+j.x1:dt(j.x1),cy:He?Rt(j.yanchor)-j.y1:Rt(j.y1),r:Re}).style(De).classed("cursor-grab",!0),ke}():ee,St={element:rt.node(),gd:V,prepFn:function(it){var ke,De,Re,Ie,Ke,ut,xt,gt;h(V)||(ze&&(le=dt(j.xanchor)),He&&(de=Rt(j.yanchor)),"path"===j.type?Se=j.path:(ne=ze?j.x0:dt(j.x0),se=He?j.y0:Rt(j.y0),ie=ze?j.x1:dt(j.x1),ue=He?j.y1:Rt(j.y1)),ne<ie?(be=ne,Ae="x0",Te=ie,we="x1"):(be=ie,Ae="x1",Te=ne,we="x0"),!He&&se<ue||He&&se>ue?(ve=se,he="y0",_e=ue,me="y1"):(ve=ue,he="y1",_e=se,me="y0"),Xt(it),Ze($,j),ke=ee,Ke=(De=j).yref,ut=u.getFromId(Re=V,Ie=De.xref),xt=u.getFromId(Re,Ke),gt="","paper"===Ie||ut.autorange||(gt+=Ie),"paper"===Ke||xt.autorange||(gt+=Ke),a.setClipUrl(ke,gt?"clip"+Re._fullLayout._uid+gt:null,Re),St.moveFn="move"===Pe?lr:Ue,St.altKey=it.altKey)},doneFn:function(){h(V)||(s(ee),Ne($),o(ee,V,j),p.call("_guiRelayout",V,re.getUpdateObj()))},clickFn:function(){h(V)||Ne($)}};function Xt(it){if(h(V))Pe=null;else if(tt)Pe="path"===it.target.tagName?"move":"start-point"===it.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var ke=St.element.getBoundingClientRect(),De=ke.right-ke.left,Re=ke.bottom-ke.top,ut=!Oe&&De>10&&Re>10&&!it.shiftKey?f.getCursor((it.clientX-ke.left)/De,1-(it.clientY-ke.top)/Re):"move";s(ee,ut),Pe=ut.split("-")[0]}}function lr(it,ke){if("path"===j.type){var De=function(Ke){return Ke},Re=De,Ie=De;ze?Be("xanchor",j.xanchor=Et(le+it)):(Re=function(Ke){return Et(dt(Ke)+it)},Je&&"date"===Je.type&&(Re=l.encodeDate(Re))),He?Be("yanchor",j.yanchor=at(de+ke)):(Ie=function(Ke){return at(Rt(Ke)+ke)},nt&&"date"===nt.type&&(Ie=l.encodeDate(Ie))),Be("path",j.path=g(Se,Re,Ie))}else ze?Be("xanchor",j.xanchor=Et(le+it)):(Be("x0",j.x0=Et(ne+it)),Be("x1",j.x1=Et(ie+it))),He?Be("yanchor",j.yanchor=at(de+ke)):(Be("y0",j.y0=at(se+ke)),Be("y1",j.y1=at(ue+ke)));ee.attr("d",b(V,j)),Ze($,j)}function Ue(it,ke){if(Oe){var De=function(Fe){return Fe},Re=De,Ie=De;ze?Be("xanchor",j.xanchor=Et(le+it)):(Re=function(Fe){return Et(dt(Fe)+it)},Je&&"date"===Je.type&&(Re=l.encodeDate(Re))),He?Be("yanchor",j.yanchor=at(de+ke)):(Ie=function(Fe){return at(Rt(Fe)+ke)},nt&&"date"===nt.type&&(Ie=l.encodeDate(Ie))),Be("path",j.path=g(Se,Re,Ie))}else if(tt){if("resize-over-start-point"===Pe){var Ke=ne+it,ut=He?se-ke:se+ke;Be("x0",j.x0=ze?Ke:Et(Ke)),Be("y0",j.y0=He?ut:at(ut))}else if("resize-over-end-point"===Pe){var xt=ie+it,gt=He?ue-ke:ue+ke;Be("x1",j.x1=ze?xt:Et(xt)),Be("y1",j.y1=He?gt:at(gt))}}else{var Pt=function(Fe){return-1!==Pe.indexOf(Fe)},ct=Pt("n"),zt=Pt("s"),Ft=Pt("w"),Qe=Pt("e"),yt=ct?ve+ke:ve,Nt=zt?_e+ke:_e,Yt=Ft?be+it:be,rr=Qe?Te+it:Te;He&&(ct&&(yt=ve-ke),zt&&(Nt=_e-ke)),(!He&&Nt-yt>10||He&&yt-Nt>10)&&(Be(he,j[he]=He?yt:at(yt)),Be(me,j[me]=He?Nt:at(Nt))),rr-Yt>10&&(Be(Ae,j[Ae]=ze?Yt:Et(Yt)),Be(we,j[we]=ze?rr:Et(rr)))}ee.attr("d",b(V,j)),Ze($,j)}function Ze(it,ke){(ze||He)&&function(){var De="path"!==ke.type,Re=it.selectAll(".visual-cue").data([0]);Re.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ie=dt(ze?ke.xanchor:v.midRange(De?[ke.x0,ke.x1]:l.extractPathCoords(ke.path,i.paramIsX))),Ke=Rt(He?ke.yanchor:v.midRange(De?[ke.y0,ke.y1]:l.extractPathCoords(ke.path,i.paramIsY)));Ie=l.roundPositionForSharpStrokeRendering(Ie,1),Ke=l.roundPositionForSharpStrokeRendering(Ke,1),Re.attr("d",ze&&He?"M"+(Ie-1-1)+","+(Ke-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":ze?"M"+(Ie-1-1)+","+(Ke-9-1)+"v18 h2 v-18 Z":"M"+(Ie-9-1)+","+(Ke-1-1)+"h18 v2 h-18 Z")}()}function Ne(it){it.selectAll(".visual-cue").remove()}f.init(St),rt.node().onmousemove=Xt}(_,te,E,A,D,W):!0===E.editable&&te.style("pointer-events",Z||t.opacity(B)*z<=.5?"stroke":"all");te.node().addEventListener("click",function(){return function(V,ee){if(m(V)){var j=+ee.node().getAttribute("data-index");if(j>=0){if(j===V._fullLayout._activeShapeIndex)return void w(V);V._fullLayout._activeShapeIndex=j,V._fullLayout._deactivateShape=w,c(V)}}}(_,te)})}("below"!==E.layer?_._fullLayout._shapeUpperLayer:"paper"===E.xref||"paper"===E.yref?_._fullLayout._shapeLowerLayer:k._hadPlotinfo?(k.mainplotinfo||k).shapelayer:_._fullLayout._shapeLowerLayer)}function o(_,A,T){var E=(T.xref+T.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");a.setClipUrl(_,E?"clip"+A._fullLayout._uid+E:null,A)}function b(_,A){var T,E,k,O,D,S,C,z,$,re,ne,ie,ue,le,de,B=A.type,U=u.getRefType(A.xref),G=u.getRefType(A.yref),X=u.getFromId(_,A.xref),Z=u.getFromId(_,A.yref),q=_._fullLayout._size;if(X?"domain"===U?E=function($){return X._offset+X._length*$}:(T=l.shapePositionToRange(X),E=function($){return X._offset+X.r2p(T($,!0))}):E=function($){return q.l+q.w*$},Z?"domain"===G?O=function($){return Z._offset+Z._length*(1-$)}:(k=l.shapePositionToRange(Z),O=function($){return Z._offset+Z.r2p(k($,!0))}):O=function($){return q.t+q.h*(1-$)},"path"===B)return X&&"date"===X.type&&(E=l.decodeDate(E)),Z&&"date"===Z.type&&(O=l.decodeDate(O)),re=E,ne=O,ie=($=A).xsizemode,ue=$.ysizemode,le=$.xanchor,de=$.yanchor,$.path.replace(i.segmentRE,function(ve){var _e=0,be=ve.charAt(0),Te=i.paramIsX[be],he=i.paramIsY[be],me=i.numParams[be],Ae=ve.substr(1).replace(i.paramRE,function(we){return Te[_e]?we="pixel"===ie?re(le)+Number(we):re(we):he[_e]&&(we="pixel"===ue?ne(de)-Number(we):ne(we)),++_e>me&&(we="X"),we});return _e>me&&(Ae=Ae.replace(/[\s,]*X.*/,""),v.log("Ignoring extra params in segment "+ve)),be+Ae});if("pixel"===A.xsizemode){var W=E(A.xanchor);D=W+A.x0,S=W+A.x1}else D=E(A.x0),S=E(A.x1);if("pixel"===A.ysizemode){var te=O(A.yanchor);C=te-A.y0,z=te-A.y1}else C=O(A.y0),z=O(A.y1);if("line"===B)return"M"+D+","+C+"L"+S+","+z;if("rect"===B)return"M"+D+","+C+"H"+S+"V"+z+"H"+D+"Z";var R=(D+S)/2,N=(C+z)/2,V=Math.abs(R-D),ee=Math.abs(N-C),j="A"+V+","+ee,J=R+V+","+N;return"M"+J+j+" 0 1,1 "+R+","+(N-ee)+j+" 0 0,1 "+J+"Z"}function g(_,A,T){return _.replace(i.segmentRE,function(E){var k=0,O=E.charAt(0),D=i.paramIsX[O],S=i.paramIsY[O],C=i.numParams[O];return O+E.substr(1).replace(i.paramRE,function(z){return k>=C||(D[k]?z=A(z):S[k]&&(z=T(z)),k++),z})})}function w(_){m(_)&&_._fullLayout._activeShapeIndex>=0&&(n(_),delete _._fullLayout._activeShapeIndex,c(_))}Q.exports={draw:c,drawOne:d,eraseActiveShape:function(_){if(m(_)){n(_);var A=_._fullLayout._activeShapeIndex,T=(_.layout||{}).shapes||[];if(A<T.length){for(var E=[],k=0;k<T.length;k++)k!==A&&E.push(T[k]);delete _._fullLayout._activeShapeIndex,p.call("_guiRelayout",_,{shapes:E})}}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(x,Q,K){"use strict";var p=x("../../drawing/attributes").dash,v=x("../../../lib/extend").extendFlat;Q.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:v({},p,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(x,Q,K){"use strict";Q.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(x,Q,K){"use strict";var p=x("../../color");Q.exports=function(v,u,y){y("newshape.drawdirection"),y("newshape.layer"),y("newshape.fillcolor"),y("newshape.fillrule"),y("newshape.opacity"),y("newshape.line.width")&&(y("newshape.line.color",p.contrast((v||{}).plot_bgcolor||"#FFF")),y("newshape.line.dash")),y("activeshape.fillcolor"),y("activeshape.opacity")}},{"../../color":366}],454:[function(x,Q,K){"use strict";var p=x("../../dragelement"),v=x("../../dragelement/helpers").drawMode,u=x("../../../registry"),y=x("./constants"),e=y.i000,n=y.i090,t=y.i180,a=y.i270,r=x("../../../plots/cartesian/handle_outline").clearOutlineControllers,f=x("./helpers"),s=f.pointsShapeRectangle,i=f.pointsShapeEllipse,l=f.writePaths,c=x("./newshapes");Q.exports=function h(m,d,o,b){b||(b=0);var g=o.gd;function w(){h(m,d,o,b++),i(m[0])&&_({redrawing:!0})}function _(W){o.isActiveShape=!1;var te=c(d,o);Object.keys(te).length&&u.call((W||{}).redrawing?"relayout":"_guiRelayout",g,te)}var A,T,E,k,O,D=o.isActiveShape,S=g._fullLayout._zoomlayer;function z(W){E=+W.srcElement.getAttribute("data-i"),k=+W.srcElement.getAttribute("data-j"),A[E][k].moveFn=B}function B(W,te){if(m.length){var R=O[E][k][1],N=O[E][k][2],V=m[E],ee=V.length;if(s(V)){for(var j=0;j<ee;j++)if(j!==k){var J=V[j];J[1]===V[k][1]&&(J[1]=R+W),J[2]===V[k][2]&&(J[2]=N+te)}if(V[k][1]=R+W,V[k][2]=N+te,!s(V))for(var $=0;$<ee;$++)for(var re=0;re<V[$].length;re++)V[$][re]=O[E][$][re]}else V[k][1]=R+W,V[k][2]=N+te;w()}}function U(){_()}function G(W,te){if(2===W){E=+te.srcElement.getAttribute("data-i"),k=+te.srcElement.getAttribute("data-j");var R=m[E];s(R)||i(R)||function(){if(m.length&&m[E]&&m[E].length){for(var N=[],V=0;V<m[E].length;V++)V!==k&&N.push(m[E][V]);N.length>1&&(2!==N.length||"Z"!==N[1][0])&&(0===k&&(N[0][0]="M"),m[E]=N,w(),_())}}()}}function X(W,te){(function(R,N){if(m.length)for(var V=0;V<m.length;V++)for(var ee=0;ee<m[V].length;ee++)for(var j=0;j+2<m[V][ee].length;j+=2)m[V][ee][j+1]=O[V][ee][j+1]+R,m[V][ee][j+2]=O[V][ee][j+2]+N})(W,te),w()}v(o.dragmode)?g._fullLayout._drawing=!0:g._fullLayout._activeShapeIndex>=0&&r(g),d.attr("d",l(m)),D&&!b&&(O=function(W,te){for(var R=0;R<te.length;R++){var N=te[R];W[R]=[];for(var V=0;V<N.length;V++){W[R][V]=[];for(var ee=0;ee<N[V].length;ee++)W[R][V][ee]=N[V][ee]}}return W}([],m),function(W){A=[];for(var te=0;te<m.length;te++){var R=m[te],N=!s(R)&&i(R);A[te]=[];for(var V=0;V<R.length;V++)if("Z"!==R[V][0]&&(!N||V===e||V===n||V===t||V===a)){var ee=R[V][1],j=R[V][2],J=W.append("circle").classed("cursor-grab",!0).attr("data-i",te).attr("data-j",V).attr("cx",ee).attr("cy",j).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});A[te][V]={element:J.node(),gd:g,prepFn:z,doneFn:U,clickFn:G},p.init(A[te][V])}}}(S.append("g").attr("class","outline-controllers")),T=[],m.length&&(T[0]={element:d[0][0],gd:g,prepFn:function(W){(E=+W.srcElement.getAttribute("data-i"))||(E=0),T[E].moveFn=X},doneFn:function(){_()}},p.init(T[0])))}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(x,Q,K){"use strict";var p=x("parse-svg-path"),v=x("./constants"),u=v.CIRCLE_SIDES,y=v.SQRT2,e=x("../../../plots/cartesian/helpers"),n=e.p2r,t=e.r2p,a=[0,3,4,5,6,1,2],r=[0,3,4,1,2];function f(i,l){return Math.abs(i-l)<=1e-6}function s(i,l){var c=l[1]-i[1],h=l[2]-i[2];return Math.sqrt(c*c+h*h)}K.writePaths=function(i){var l=i.length;if(!l)return"M0,0Z";for(var c="",h=0;h<l;h++)for(var m=i[h].length,d=0;d<m;d++){var o=i[h][d][0];if("Z"===o)c+="Z";else for(var b=i[h][d].length,g=0;g<b;g++){var w=g;"Q"===o||"S"===o?w=r[g]:"C"===o&&(w=a[g]),c+=i[h][d][w],g>0&&g<b-1&&(c+=",")}}return c},K.readPaths=function(i,l,c,h){var m,d,o,b=p(i),g=[],w=-1,_=0,A=0,T=function(){d=_,o=A};T();for(var E=0;E<b.length;E++){var C=[],z=b[E][0],B=z;switch(z){case"M":g[++w]=[],C.push([B,_=+b[E][1],A=+b[E][2]]),T();break;case"Q":case"S":C.push([B,_=+b[E][3],A=+b[E][4],+b[E][1],+b[E][2]]);break;case"C":C.push([B,_=+b[E][5],A=+b[E][6],+b[E][1],+b[E][2],+b[E][3],+b[E][4]]);break;case"T":case"L":C.push([B,_=+b[E][1],A=+b[E][2]]);break;case"H":C.push([B="L",_=+b[E][1],A]);break;case"V":C.push([B="L",_,A=+b[E][1]]);break;case"A":B="L";var U=+b[E][1],G=+b[E][2];+b[E][4]||(U=-U,G=-G);var X=_-U,Z=A;for(m=1;m<=u/2;m++){var q=2*Math.PI*m/u;C.push([B,X+U*Math.cos(q),Z+G*Math.sin(q)])}break;case"Z":_===d&&A===o||C.push([B,_=d,A=o])}for(var W=(c||{}).domain,te=l._fullLayout._size,R=c&&"pixel"===c.xsizemode,N=c&&"pixel"===c.ysizemode,V=!1===h,ee=0;ee<C.length;ee++){for(m=0;m+2<7;m+=2){var j=C[ee][m+1],J=C[ee][m+2];void 0!==j&&void 0!==J&&(_=j,A=J,c&&(c.xaxis&&c.xaxis.p2r?(V&&(j-=c.xaxis._offset),j=R?t(c.xaxis,c.xanchor)+j:n(c.xaxis,j)):(V&&(j-=te.l),W?j=W.x[0]+j/te.w:j/=te.w),c.yaxis&&c.yaxis.p2r?(V&&(J-=c.yaxis._offset),J=N?t(c.yaxis,c.yanchor)-J:n(c.yaxis,J)):(V&&(J-=te.t),J=W?W.y[1]-J/te.h:1-J/te.h)),C[ee][m+1]=j,C[ee][m+2]=J)}g[w].push(C[ee].slice())}}return g},K.pointsShapeRectangle=function(i){if(5!==i.length)return!1;for(var l=1;l<3;l++)if(!f(i[0][l]-i[1][l],i[3][l]-i[2][l])||!f(i[0][l]-i[3][l],i[1][l]-i[2][l]))return!1;return!(!f(i[0][1],i[1][1])&&!f(i[0][1],i[3][1])||!(s(i[0],i[1])*s(i[0],i[3])))},K.pointsShapeEllipse=function(i){var l=i.length;if(l!==u+1)return!1;l=u;for(var c=0;c<l;c++){var h=(2*l-c)%l,m=(l/2+h)%l;if(!f(s(i[c],i[(l/2+c)%l]),s(i[h],i[m])))return!1}return!0},K.handleEllipse=function(i,l,c){if(!i)return[l,c];var h=K.ellipseOver({x0:l[0],y0:l[1],x1:c[0],y1:c[1]}),m=(h.x1+h.x0)/2,d=(h.y1+h.y0)/2,o=(h.x1-h.x0)/2,b=(h.y1-h.y0)/2;o||(o=b/=y),b||(b=o/=y);for(var g=[],w=0;w<u;w++){var _=2*w*Math.PI/u;g.push([m+o*Math.cos(_),d+b*Math.sin(_)])}return g},K.ellipseOver=function(i){var l=i.x0,c=i.y0,h=i.x1,m=i.y1,d=h-l,o=m-c,b=((l-=d)+h)/2,g=((c-=o)+m)/2;return{x0:b-(d*=y),y0:g-(o*=y),x1:b+d,y1:g+o}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(x,Q,K){"use strict";var p=x("../../dragelement/helpers"),v=p.drawMode,u=p.openMode,y=x("./constants"),e=y.i000,n=y.i090,t=y.i180,a=y.i270,r=y.cos45,f=y.sin45,s=x("../../../plots/cartesian/helpers"),i=s.p2r,l=s.r2p,c=x("../../../plots/cartesian/handle_outline").clearSelect,h=x("./helpers"),m=h.readPaths,d=h.writePaths,o=h.ellipseOver;Q.exports=function(b,g){if(b.length){var w=b[0][0];if(w){var _=w.getAttribute("d"),A=g.gd,T=A._fullLayout.newshape,E=g.plotinfo,k=E.xaxis,O=E.yaxis,D=!!E.domain||!E.xaxis,S=!!E.domain||!E.yaxis,C=g.isActiveShape,z=g.dragmode,B=(A.layout||{}).shapes||[];if(!v(z)&&void 0!==C){var U=A._fullLayout._activeShapeIndex;if(U<B.length)switch(A._fullLayout.shapes[U].type){case"rect":z="drawrect";break;case"circle":z="drawcircle";break;case"line":z="drawline";break;case"path":var G=B[U].path||"";z="Z"===G[G.length-1]?"drawclosedpath":"drawopenpath"}}var X,Z=u(z),q=m(_,A,E,C),W={editable:!0,xref:D?"paper":k._id,yref:S?"paper":O._id,layer:T.layer,opacity:T.opacity,line:{color:T.line.color,width:T.line.width,dash:T.line.dash}};if(Z||(W.fillcolor=T.fillcolor,W.fillrule=T.fillrule),1===q.length&&(X=q[0]),X&&"drawrect"===z)W.type="rect",W.x0=X[0][1],W.y0=X[0][2],W.x1=X[2][1],W.y1=X[2][2];else if(X&&"drawline"===z)W.type="line",W.x0=X[0][1],W.y0=X[0][2],W.x1=X[1][1],W.y1=X[1][2];else if(X&&"drawcircle"===z){W.type="circle";var te=X[e][1],R=X[n][1],N=X[t][1],V=X[a][1],ee=X[e][2],j=X[n][2],J=X[t][2],$=X[a][2],re=E.xaxis&&("date"===E.xaxis.type||"log"===E.xaxis.type),ne=E.yaxis&&("date"===E.yaxis.type||"log"===E.yaxis.type);re&&(te=l(E.xaxis,te),R=l(E.xaxis,R),N=l(E.xaxis,N),V=l(E.xaxis,V)),ne&&(ee=l(E.yaxis,ee),j=l(E.yaxis,j),J=l(E.yaxis,J),$=l(E.yaxis,$));var se=(R+V)/2,ie=(ee+J)/2,ue=o({x0:se,y0:ie,x1:se+(V-R+N-te)/2*r,y1:ie+($-j+J-ee)/2*f});re&&(ue.x0=i(E.xaxis,ue.x0),ue.x1=i(E.xaxis,ue.x1)),ne&&(ue.y0=i(E.yaxis,ue.y0),ue.y1=i(E.yaxis,ue.y1)),W.x0=ue.x0,W.y0=ue.y0,W.x1=ue.x1,W.y1=ue.y1}else W.type="path",k&&O&&function(he,me,Ae){var we="date"===me.type,Se="date"===Ae.type;if(!we&&!Se)return he;for(var Pe=0;Pe<he.length;Pe++)for(var ze=0;ze<he[Pe].length;ze++)for(var He=0;He+2<he[Pe][ze].length;He+=2)we&&(he[Pe][ze][He+1]=he[Pe][ze][He+1].replace(" ","_")),Se&&(he[Pe][ze][He+2]=he[Pe][ze][He+2].replace(" ","_"))}(q,k,O),W.path=d(q),X=null;c(A);for(var le=g.editHelpers,de=(le||{}).modifyItem,ve=[],_e=0;_e<B.length;_e++){var be=A._fullLayout.shapes[_e];if(ve[_e]=be._input,void 0!==C&&_e===A._fullLayout._activeShapeIndex){var Te=W;switch(be.type){case"line":case"rect":case"circle":de("x0",Te.x0),de("x1",Te.x1),de("y0",Te.y0),de("y1",Te.y1);break;case"path":de("path",Te.path)}}}return void 0===C?(ve.push(W),ve):le?le.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(x,Q,K){"use strict";var p=x("./constants"),v=x("../../lib");K.rangeToShapePosition=function(u){return"log"===u.type?u.r2d:function(y){return y}},K.shapePositionToRange=function(u){return"log"===u.type?u.d2r:function(y){return y}},K.decodeDate=function(u){return function(y){return y.replace&&(y=y.replace("_"," ")),u(y)}},K.encodeDate=function(u){return function(y){return u(y).replace(" ","_")}},K.extractPathCoords=function(u,y){var e=[];return u.match(p.segmentRE).forEach(function(n){var t=y[n.charAt(0)].drawn;if(void 0!==t){var a=n.substr(1).match(p.paramRE);!a||a.length<t||e.push(v.cleanNumber(a[t]))}}),e},K.getDataToPixel=function(u,y,e,n){var t,a=u._fullLayout._size;if(y)if("domain"===n)t=function(f){return y._length*(e?1-f:f)+y._offset};else{var r=K.shapePositionToRange(y);t=function(f){return y._offset+y.r2p(r(f,!0))},"date"===y.type&&(t=K.decodeDate(t))}else t=e?function(f){return a.t+a.h*(1-f)}:function(f){return a.l+a.w*f};return t},K.getPixelToData=function(u,y,e,n){var t,a=u._fullLayout._size;if(y)if("domain"===n)t=function(f){var s=(f-y._offset)/y._length;return e?1-s:s};else{var r=K.rangeToShapePosition(y);t=function(f){return r(y.p2r(f-y._offset))}}else t=e?function(f){return 1-(f-a.t)/a.h}:function(f){return(f-a.l)/a.w};return t},K.roundPositionForSharpStrokeRendering=function(u,y){var e=1===Math.round(y%2),n=Math.round(u);return e?n+.5:n},K.makeOptionsAndPlotinfo=function(u,y){var e=u._fullLayout.shapes[y]||{},n=u._fullLayout._plots[e.xref+e.yref];return n?n._hadPlotinfo=!0:(n={},e.xref&&"paper"!==e.xref&&(n.xaxis=u._fullLayout[e.xref+"axis"]),e.yref&&"paper"!==e.yref&&(n.yaxis=u._fullLayout[e.yref+"axis"])),n.xsizemode=e.xsizemode,n.ysizemode=e.ysizemode,n.xanchor=e.xanchor,n.yanchor=e.yanchor,{options:e,plotinfo:n}}},{"../../lib":503,"./constants":448}],458:[function(x,Q,K){"use strict";var p=x("./draw");Q.exports={moduleType:"component",name:"shapes",layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),supplyDrawNewShapeDefaults:x("./draw_newshape/defaults"),includeBasePlot:x("../../plots/cartesian/include_components")("shapes"),calcAutorange:x("./calc_autorange"),draw:p.draw,drawOne:p.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(x,Q,K){"use strict";var p=x("../../plots/font_attributes"),v=x("../../plots/pad_attributes"),u=x("../../lib/extend").extendDeepAll,y=x("../../plot_api/edit_types").overrideAll,e=x("../../plots/animation_attributes"),n=x("../../plot_api/plot_template").templatedArray,t=x("./constants"),a=n("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});Q.exports=y(n("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:a,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:u(v({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:p({})},font:p({}),activebgcolor:{valType:"color",dflt:t.gripBgActiveColor},bgcolor:{valType:"color",dflt:t.railBgColor},bordercolor:{valType:"color",dflt:t.railBorderColor},borderwidth:{valType:"number",min:0,dflt:t.railBorderWidth},ticklen:{valType:"number",min:0,dflt:t.tickLength},tickcolor:{valType:"color",dflt:t.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:t.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(x,Q,K){"use strict";Q.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/array_container_defaults"),u=x("./attributes"),y=x("./constants").name,e=u.steps;function n(a,r,f){function s(m,d){return p.coerce(a,r,u,m,d)}for(var i=v(a,r,{name:"steps",handleItemDefaults:t}),l=0,c=0;c<i.length;c++)i[c].visible&&l++;if(l<2?r.visible=!1:s("visible")){r._stepCount=l;var h=r._visibleSteps=p.filterVisible(i);(i[s("active")]||{}).visible||(r.active=h[0]._index),s("x"),s("y"),p.noneOrAll(a,r,["x","y"]),s("xanchor"),s("yanchor"),s("len"),s("lenmode"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),p.coerceFont(s,"font",f.font),s("currentvalue.visible")&&(s("currentvalue.xanchor"),s("currentvalue.prefix"),s("currentvalue.suffix"),s("currentvalue.offset"),p.coerceFont(s,"currentvalue.font",r.font)),s("transition.duration"),s("transition.easing"),s("bgcolor"),s("activebgcolor"),s("bordercolor"),s("borderwidth"),s("ticklen"),s("tickwidth"),s("tickcolor"),s("minorticklen")}}function t(a,r){function f(i,l){return p.coerce(a,r,e,i,l)}if("skip"===a.method||Array.isArray(a.args)?f("visible"):r.visible=!1){f("method"),f("args");var s=f("label","step-"+r._index);f("value",s),f("execute")}}Q.exports=function(a,r){v(a,r,{name:y,handleItemDefaults:n})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../plots/plots"),u=x("../color"),y=x("../drawing"),e=x("../../lib"),n=e.strTranslate,t=x("../../lib/svg_text_utils"),a=x("../../plot_api/plot_template").arrayEditor,r=x("./constants"),f=x("../../constants/alignment"),s=f.LINE_SPACING,i=f.FROM_TL,l=f.FROM_BR;function c(C){return r.autoMarginIdRoot+C._index}function h(C){return C._index}function m(C,z){var B=y.tester.selectAll("g."+r.labelGroupClass).data(z._visibleSteps);B.enter().append("g").classed(r.labelGroupClass,!0);var U=0,G=0;B.each(function(ee){var j=b(p.select(this),{step:ee},z).node();if(j){var J=y.bBox(j);G=Math.max(G,J.height),U=Math.max(U,J.width)}}),B.remove();var X=z._dims={};X.inputAreaWidth=Math.max(r.railWidth,r.gripHeight);var Z=C._fullLayout._size;if(X.lx=Z.l+Z.w*z.x,X.ly=Z.t+Z.h*(1-z.y),X.outerLength="fraction"===z.lenmode?Math.round(Z.w*z.len):z.len,X.inputAreaStart=0,X.inputAreaLength=Math.round(X.outerLength-z.pad.l-z.pad.r),X.labelStride=Math.max(1,Math.ceil((U+r.labelPadding)/((X.inputAreaLength-2*r.stepInset)/(z._stepCount-1)))),X.labelHeight=G,X.currentValueMaxWidth=0,X.currentValueHeight=0,X.currentValueTotalHeight=0,X.currentValueMaxLines=1,z.currentvalue.visible){var te=y.tester.append("g");B.each(function(ee){var j=d(te,z,ee.label),J=j.node()&&y.bBox(j.node())||{width:0,height:0},$=t.lineCount(j);X.currentValueMaxWidth=Math.max(X.currentValueMaxWidth,Math.ceil(J.width)),X.currentValueHeight=Math.max(X.currentValueHeight,Math.ceil(J.height)),X.currentValueMaxLines=Math.max(X.currentValueMaxLines,$)}),X.currentValueTotalHeight=X.currentValueHeight+z.currentvalue.offset,te.remove()}X.height=X.currentValueTotalHeight+r.tickOffset+z.ticklen+r.labelOffset+X.labelHeight+z.pad.t+z.pad.b;var R="left";e.isRightAnchor(z)&&(X.lx-=X.outerLength,R="right"),e.isCenterAnchor(z)&&(X.lx-=X.outerLength/2,R="center");var N="top";e.isBottomAnchor(z)&&(X.ly-=X.height,N="bottom"),e.isMiddleAnchor(z)&&(X.ly-=X.height/2,N="middle"),X.outerLength=Math.ceil(X.outerLength),X.height=Math.ceil(X.height),X.lx=Math.round(X.lx),X.ly=Math.round(X.ly);var V={y:z.y,b:X.height*l[N],t:X.height*i[N]};"fraction"===z.lenmode?(V.l=0,V.xl=z.x-z.len*i[R],V.r=0,V.xr=z.x+z.len*l[R]):(V.x=z.x,V.l=X.outerLength*i[R],V.r=X.outerLength*l[R]),v.autoMargin(C,c(z),V)}function d(C,z,B){if(z.currentvalue.visible){var U,G,X=z._dims;switch(z.currentvalue.xanchor){case"right":U=X.inputAreaLength-r.currentValueInset-X.currentValueMaxWidth,G="left";break;case"center":U=.5*X.inputAreaLength,G="middle";break;default:U=r.currentValueInset,G="left"}var Z=e.ensureSingle(C,"text",r.labelClass,function(V){V.attr({"text-anchor":G,"data-notex":1})}),q=z.currentvalue.prefix?z.currentvalue.prefix:"";if("string"==typeof B)q+=B;else{var W=z.steps[z.active].label,te=z._gd._fullLayout._meta;te&&(W=e.templateString(W,te)),q+=W}z.currentvalue.suffix&&(q+=z.currentvalue.suffix),Z.call(y.font,z.currentvalue.font).text(q).call(t.convertToTspans,z._gd);var R=t.lineCount(Z);return t.positionText(Z,U,(X.currentValueMaxLines+1-R)*z.currentvalue.font.size*s),Z}}function o(C,z,B){e.ensureSingle(C,"rect",r.gripRectClass,function(U){U.call(A,z,C,B).style("pointer-events","all")}).attr({width:r.gripWidth,height:r.gripHeight,rx:r.gripRadius,ry:r.gripRadius}).call(u.stroke,B.bordercolor).call(u.fill,B.bgcolor).style("stroke-width",B.borderwidth+"px")}function b(C,z,B){var U=e.ensureSingle(C,"text",r.labelClass,function(Z){Z.attr({"text-anchor":"middle","data-notex":1})}),G=z.step.label,X=B._gd._fullLayout._meta;return X&&(G=e.templateString(G,X)),U.call(y.font,B.font).text(G).call(t.convertToTspans,B._gd),U}function g(C,z){var B=e.ensureSingle(C,"g",r.labelsClass),U=z._dims,G=B.selectAll("g."+r.labelGroupClass).data(U.labelSteps);G.enter().append("g").classed(r.labelGroupClass,!0),G.exit().remove(),G.each(function(X){var Z=p.select(this);Z.call(b,X,z),y.setTranslate(Z,k(z,X.fraction),r.tickOffset+z.ticklen+z.font.size*s+r.labelOffset+U.currentValueTotalHeight)})}function w(C,z,B,U,G){var X=Math.round(U*(B._stepCount-1)),Z=B._visibleSteps[X]._index;Z!==B.active&&_(C,z,B,Z,!0,G)}function _(C,z,B,U,G,X){var Z=B.active;B.active=U,a(C.layout,r.name,B).applyUpdate("active",U);var q=B.steps[B.active];z.call(E,B,X),z.call(d,B),C.emit("plotly_sliderchange",{slider:B,step:B.steps[B.active],interaction:G,previousActive:Z}),q&&q.method&&G&&(z._nextMethod?(z._nextMethod.step=q,z._nextMethod.doCallback=G,z._nextMethod.doTransition=X):(z._nextMethod={step:q,doCallback:G,doTransition:X},z._nextMethodRaf=window.requestAnimationFrame(function(){var W=z._nextMethod.step;W.method&&(W.execute&&v.executeAPICommand(C,W.method,W.args),z._nextMethod=null,z._nextMethodRaf=null)})))}function A(C,z,B){var U=B.node(),G=p.select(z);function X(){return B.data()[0]}function Z(){var q=X();z.emit("plotly_sliderstart",{slider:q});var W=B.select("."+r.gripRectClass);p.event.stopPropagation(),p.event.preventDefault(),W.call(u.fill,q.activebgcolor);var te=O(q,p.mouse(U)[0]);function R(){var V=X(),ee=O(V,p.mouse(U)[0]);w(z,B,V,ee,!1)}function N(){var V=X();V._dragging=!1,W.call(u.fill,V.bgcolor),G.on("mouseup",null),G.on("mousemove",null),G.on("touchend",null),G.on("touchmove",null),z.emit("plotly_sliderend",{slider:V,step:V.steps[V.active]})}w(z,B,q,te,!0),q._dragging=!0,G.on("mousemove",R),G.on("touchmove",R),G.on("mouseup",N),G.on("touchend",N)}C.on("mousedown",Z),C.on("touchstart",Z)}function T(C,z){var B=C.selectAll("rect."+r.tickRectClass).data(z._visibleSteps),U=z._dims;B.enter().append("rect").classed(r.tickRectClass,!0),B.exit().remove(),B.attr({width:z.tickwidth+"px","shape-rendering":"crispEdges"}),B.each(function(G,X){var Z=X%U.labelStride==0,q=p.select(this);q.attr({height:Z?z.ticklen:z.minorticklen}).call(u.fill,z.tickcolor),y.setTranslate(q,k(z,X/(z._stepCount-1))-.5*z.tickwidth,(Z?r.tickOffset:r.minorTickOffset)+U.currentValueTotalHeight)})}function E(C,z,B){for(var U=C.select("rect."+r.gripRectClass),G=0,X=0;X<z._stepCount;X++)if(z._visibleSteps[X]._index===z.active){G=X;break}var Z=k(z,G/(z._stepCount-1));if(!z._invokingCommand){var q=U;B&&z.transition.duration>0&&(q=q.transition().duration(z.transition.duration).ease(z.transition.easing)),q.attr("transform",n(Z-.5*r.gripWidth,z._dims.currentValueTotalHeight))}}function k(C,z){var B=C._dims;return B.inputAreaStart+r.stepInset+(B.inputAreaLength-2*r.stepInset)*Math.min(1,Math.max(0,z))}function O(C,z){var B=C._dims;return Math.min(1,Math.max(0,(z-r.stepInset-B.inputAreaStart)/(B.inputAreaLength-2*r.stepInset-2*B.inputAreaStart)))}function D(C,z,B){var U=B._dims,G=e.ensureSingle(C,"rect",r.railTouchRectClass,function(X){X.call(A,z,C,B).style("pointer-events","all")});G.attr({width:U.inputAreaLength,height:Math.max(U.inputAreaWidth,r.tickOffset+B.ticklen+U.labelHeight)}).call(u.fill,B.bgcolor).attr("opacity",0),y.setTranslate(G,0,U.currentValueTotalHeight)}function S(C,z){var B=z._dims,U=B.inputAreaLength-2*r.railInset,G=e.ensureSingle(C,"rect",r.railRectClass);G.attr({width:U,height:r.railWidth,rx:r.railRadius,ry:r.railRadius,"shape-rendering":"crispEdges"}).call(u.stroke,z.bordercolor).call(u.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px"),y.setTranslate(G,r.railInset,.5*(B.inputAreaWidth-r.railWidth)+B.currentValueTotalHeight)}Q.exports=function(C){var z=C._fullLayout,B=function(W,te){for(var R=W[r.name],N=[],V=0;V<R.length;V++){var ee=R[V];ee.visible&&(ee._gd=te,N.push(ee))}return N}(z,C),U=z._infolayer.selectAll("g."+r.containerClassName).data(B.length>0?[0]:[]);function G(W){W._commandObserver&&(W._commandObserver.remove(),delete W._commandObserver),v.autoMargin(C,c(W))}if(U.enter().append("g").classed(r.containerClassName,!0).style("cursor","ew-resize"),U.exit().each(function(){p.select(this).selectAll("g."+r.groupClassName).each(G)}).remove(),0!==B.length){var X=U.selectAll("g."+r.groupClassName).data(B,h);X.enter().append("g").classed(r.groupClassName,!0),X.exit().each(G).remove();for(var Z=0;Z<B.length;Z++)m(C,B[Z]);X.each(function(W){var te=p.select(this);(function(R){var N=R._dims;N.labelSteps=[];for(var V=R._stepCount,ee=0;ee<V;ee+=N.labelStride)N.labelSteps.push({fraction:ee/(V-1),step:R._visibleSteps[ee]})})(W),v.manageCommandObserver(C,W,W._visibleSteps,function(R){var N=te.data()[0];N.active!==R.index&&(N._dragging||_(C,te,N,R.index,!1,!0))}),function(R,N,V){(V.steps[V.active]||{}).visible||(V.active=V._visibleSteps[0]._index),N.call(d,V).call(S,V).call(g,V).call(T,V).call(D,R,V).call(o,R,V);var ee=V._dims;y.setTranslate(N,ee.lx+V.pad.l,ee.ly+V.pad.t),N.call(E,V,!1),N.call(d,V)}(C,p.select(this),W)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(x,Q,K){"use strict";var p=x("./constants");Q.exports={moduleType:"component",name:p.name,layoutAttributes:x("./attributes"),supplyLayoutDefaults:x("./defaults"),draw:x("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("fast-isnumeric"),u=x("../../plots/plots"),y=x("../../registry"),e=x("../../lib"),n=e.strTranslate,t=x("../drawing"),a=x("../color"),r=x("../../lib/svg_text_utils"),f=x("../../constants/interactions"),s=x("../../constants/alignment").OPPOSITE_SIDE,i=/ [XY][0-9]* /;Q.exports={draw:function(l,c,h){var m,o=h.propName,b=h.placeholder,g=h.traceIndex,w=h.avoid||{},_=h.attributes,A=h.transform,T=h.containerGroup,E=l._fullLayout,k=1,O=!1,D=h.propContainer.title,S=(D&&D.text?D.text:"").trim(),C=D&&D.font?D.font:{},z=C.family,B=C.size,U=C.color;"title.text"===o?m="titleText":-1!==o.indexOf("axis")?m="axisTitleText":o.indexOf(!0)&&(m="colorbarTitleText");var G=l._context.edits[m];""===S?k=0:S.replace(i," % ")===b.replace(i," % ")&&(k=.2,O=!0,G||(S="")),h._meta?S=e.templateString(S,h._meta):E._meta&&(S=e.templateString(S,E._meta));var X=S||G;T||(T=e.ensureSingle(E._infolayer,"g","g-"+c));var Z=T.selectAll("text").data(X?[0]:[]);if(Z.enter().append("text"),Z.text(S).attr("class",c),Z.exit().remove(),!X)return T;function q(R){e.syncOrAsync([W,te],R)}function W(R){var N;return A?(N="",A.rotate&&(N+="rotate("+[A.rotate,_.x,_.y]+")"),A.offset&&(N+=n(0,A.offset))):N=null,R.attr("transform",N),R.style({"font-family":z,"font-size":p.round(B,2)+"px",fill:a.rgb(U),opacity:k*a.opacity(U),"font-weight":u.fontWeight}).attr(_).call(r.convertToTspans,l),u.previousPromises(l)}function te(R){var N=p.select(R.node().parentNode);if(w&&w.selection&&w.side&&S){N.attr("transform",null);var V=s[w.side],ee="left"===w.side||"top"===w.side?-1:1,j=v(w.pad)?w.pad:2,J=t.bBox(N.node()),re=w.maxShift||ee*({left:0,top:0,right:E.width,bottom:E.height}[w.side]-J[w.side]),ne=0;if(re<0)ne=re;else{var se=w.offsetLeft||0,ie=w.offsetTop||0;J.left-=se,J.right-=se,J.top-=ie,J.bottom-=ie,w.selection.each(function(){var le=t.bBox(this);e.bBoxIntersect(J,le,j)&&(ne=Math.max(ne,ee*(le[w.side]-J[V])+j))}),ne=Math.min(re,ne)}if(ne>0||re<0){var ue={left:[-ne,0],right:[ne,0],top:[0,-ne],bottom:[0,ne]}[w.side];N.attr("transform",n(ue[0],ue[1]))}}}return Z.call(q),G&&(S?Z.on(".opacity",null):(k=0,O=!0,Z.text(b).on("mouseover.opacity",function(){p.select(this).transition().duration(f.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){p.select(this).transition().duration(f.HIDE_PLACEHOLDER).style("opacity",0)})),Z.call(r.makeEditable,{gd:l}).on("edit",function(R){void 0!==g?y.call("_guiRestyle",l,o,R,g):y.call("_guiRelayout",l,o,R)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(q)}).on("input",function(R){this.text(R||" ").call(r.positionText,_.x,_.y)})),Z.classed("js-placeholder",O),T}}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(x,Q,K){"use strict";var p=x("../../plots/font_attributes"),v=x("../color/attributes"),u=x("../../lib/extend").extendFlat,y=x("../../plot_api/edit_types").overrideAll,e=x("../../plots/pad_attributes"),n=x("../../plot_api/plot_template").templatedArray,t=n("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});Q.exports=y(n("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:t,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:u(e({editType:"arraydraw"}),{}),font:p({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:v.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(x,Q,K){"use strict";Q.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],467:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/array_container_defaults"),u=x("./attributes"),y=x("./constants").name,e=u.buttons;function n(a,r,f){function s(i,l){return p.coerce(a,r,u,i,l)}s("visible",v(a,r,{name:"buttons",handleItemDefaults:t}).length>0)&&(s("active"),s("direction"),s("type"),s("showactive"),s("x"),s("y"),p.noneOrAll(a,r,["x","y"]),s("xanchor"),s("yanchor"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),p.coerceFont(s,"font",f.font),s("bgcolor",f.paper_bgcolor),s("bordercolor"),s("borderwidth"))}function t(a,r){function f(s,i){return p.coerce(a,r,e,s,i)}f("visible","skip"===a.method||Array.isArray(a.args))&&(f("method"),f("args"),f("args2"),f("label"),f("execute"))}Q.exports=function(a,r){v(a,r,{name:y,handleItemDefaults:n})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../plots/plots"),u=x("../color"),y=x("../drawing"),e=x("../../lib"),n=x("../../lib/svg_text_utils"),t=x("../../plot_api/plot_template").arrayEditor,a=x("../../constants/alignment").LINE_SPACING,r=x("./constants"),f=x("./scrollbox");function s(k){return k._index}function i(k,O){return+k.attr(r.menuIndexAttrName)===O._index}function l(k,O,D,S,C,z,B,U){O.active=B,t(k.layout,r.name,O).applyUpdate("active",B),"buttons"===O.type?h(k,S,null,null,O):"dropdown"===O.type&&(C.attr(r.menuIndexAttrName,"-1"),c(k,S,C,z,O),U||h(k,S,C,z,O))}function c(k,O,D,S,C){var z=e.ensureSingle(O,"g",r.headerClassName,function(q){q.style("pointer-events","all")}),B=C._dims,X={y:C.pad.t,yPad:0,x:C.pad.l,xPad:0,index:0},Z={width:B.headerWidth,height:B.headerHeight};z.call(m,C,C.buttons[C.active]||r.blankHeaderOpts,k).call(T,C,X,Z),e.ensureSingle(O,"text",r.headerArrowClassName,function(q){q.attr("text-anchor","end").call(y.font,C.font).text(r.arrowSymbol[C.direction])}).attr({x:B.headerWidth-r.arrowOffsetX+C.pad.l,y:B.headerHeight/2+r.textOffsetY+C.pad.t}),z.on("click",function(){D.call(E,String(i(D,C)?-1:C._index)),h(k,O,D,S,C)}),z.on("mouseover",function(){z.call(g)}),z.on("mouseout",function(){z.call(w,C)}),y.setTranslate(O,B.lx,B.ly)}function h(k,O,D,S,C){D||(D=O).attr("pointer-events","all");var z=-1==+D.attr(r.menuIndexAttrName)&&"buttons"!==C.type?[]:C.buttons,B="dropdown"===C.type?r.dropdownButtonClassName:r.buttonClassName,U=D.selectAll("g."+B).data(e.filterVisible(z)),G=U.enter().append("g").classed(B,!0),X=U.exit();"dropdown"===C.type?(G.attr("opacity","0").transition().attr("opacity","1"),X.transition().attr("opacity","0").remove()):X.remove();var Z=0,q=0,W=C._dims,te=-1!==["up","down"].indexOf(C.direction);"dropdown"===C.type&&(te?q=W.headerHeight+r.gapButtonHeader:Z=W.headerWidth+r.gapButtonHeader),"dropdown"===C.type&&"up"===C.direction&&(q=-r.gapButtonHeader+r.gapButton-W.openHeight),"dropdown"===C.type&&"left"===C.direction&&(Z=-r.gapButtonHeader+r.gapButton-W.openWidth);var V,ee,j,R={x:W.lx+Z+C.pad.l,y:W.ly+q+C.pad.t,yPad:r.gapButton,xPad:r.gapButton,index:0},N={l:R.x+C.borderwidth,t:R.y+C.borderwidth};U.each(function(V,ee){var j=p.select(this);j.call(m,C,V,k).call(T,C,R),j.on("click",function(){p.event.defaultPrevented||(V.execute&&(V.args2&&C.active===ee?(l(k,C,0,O,D,S,-1),v.executeAPICommand(k,V.method,V.args2)):(l(k,C,0,O,D,S,ee),v.executeAPICommand(k,V.method,V.args))),k.emit("plotly_buttonclicked",{menu:C,button:V,active:C.active}))}),j.on("mouseover",function(){j.call(g)}),j.on("mouseout",function(){j.call(w,C),U.call(b,C)})}),U.call(b,C),te?(N.w=Math.max(W.openWidth,W.headerWidth),N.h=R.y-N.t):(N.w=R.x-N.l,N.h=Math.max(W.openHeight,W.headerHeight)),N.direction=C.direction,S&&(U.size()?function(V,ee,j,J,$,re){var ne,se,ie,ue=$.direction,de=$._dims,ve=$.active;if("up"===ue||"down"===ue)for(se=0,ie=0;ie<ve;ie++)se+=de.heights[ie]+r.gapButton;else for(ne=0,ie=0;ie<ve;ie++)ne+=de.widths[ie]+r.gapButton;J.enable(re,ne,se),J.hbar&&J.hbar.attr("opacity","0").transition().attr("opacity","1"),J.vbar&&J.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,S,C,N):(j=!!(V=S).vbar,(ee=!!V.hbar)&&V.hbar.transition().attr("opacity","0").each("end",function(){ee=!1,j||V.disable()}),j&&V.vbar.transition().attr("opacity","0").each("end",function(){j=!1,ee||V.disable()})))}function m(k,O,D,S){k.call(d,O).call(o,O,D,S)}function d(k,O){e.ensureSingle(k,"rect",r.itemRectClassName,function(D){D.attr({rx:r.rx,ry:r.ry,"shape-rendering":"crispEdges"})}).call(u.stroke,O.bordercolor).call(u.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px")}function o(k,O,D,S){var C=e.ensureSingle(k,"text",r.itemTextClassName,function(U){U.attr({"text-anchor":"start","data-notex":1})}),z=D.label,B=S._fullLayout._meta;B&&(z=e.templateString(z,B)),C.call(y.font,O.font).text(z).call(n.convertToTspans,S)}function b(k,O){var D=O.active;k.each(function(S,C){var z=p.select(this);C===D&&O.showactive&&z.select("rect."+r.itemRectClassName).call(u.fill,r.activeColor)})}function g(k){k.select("rect."+r.itemRectClassName).call(u.fill,r.hoverColor)}function w(k,O){k.select("rect."+r.itemRectClassName).call(u.fill,O.bgcolor)}function _(k,O){var D=O._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},S=y.tester.selectAll("g."+r.dropdownButtonClassName).data(e.filterVisible(O.buttons));S.enter().append("g").classed(r.dropdownButtonClassName,!0);var C=-1!==["up","down"].indexOf(O.direction);S.each(function(Z,q){var W=p.select(this);W.call(m,O,Z,k);var te=W.select("."+r.itemTextClassName),R=te.node()&&y.bBox(te.node()).width,N=Math.max(R+r.textPadX,r.minWidth),V=O.font.size*a,ee=n.lineCount(te),j=Math.max(V*ee,r.minHeight)+r.textOffsetY;j=Math.ceil(j),N=Math.ceil(N),D.widths[q]=N,D.heights[q]=j,D.height1=Math.max(D.height1,j),D.width1=Math.max(D.width1,N),C?(D.totalWidth=Math.max(D.totalWidth,N),D.openWidth=D.totalWidth,D.totalHeight+=j+r.gapButton,D.openHeight+=j+r.gapButton):(D.totalWidth+=N+r.gapButton,D.openWidth+=N+r.gapButton,D.totalHeight=Math.max(D.totalHeight,j),D.openHeight=D.totalHeight)}),C?D.totalHeight-=r.gapButton:D.totalWidth-=r.gapButton,D.headerWidth=D.width1+r.arrowPadX,D.headerHeight=D.height1,"dropdown"===O.type&&(C?(D.width1+=r.arrowPadX,D.totalHeight=D.height1):D.totalWidth=D.width1,D.totalWidth+=r.arrowPadX),S.remove();var z=D.totalWidth+O.pad.l+O.pad.r,B=D.totalHeight+O.pad.t+O.pad.b,U=k._fullLayout._size;D.lx=U.l+U.w*O.x,D.ly=U.t+U.h*(1-O.y);var G="left";e.isRightAnchor(O)&&(D.lx-=z,G="right"),e.isCenterAnchor(O)&&(D.lx-=z/2,G="center");var X="top";e.isBottomAnchor(O)&&(D.ly-=B,X="bottom"),e.isMiddleAnchor(O)&&(D.ly-=B/2,X="middle"),D.totalWidth=Math.ceil(D.totalWidth),D.totalHeight=Math.ceil(D.totalHeight),D.lx=Math.round(D.lx),D.ly=Math.round(D.ly),v.autoMargin(k,A(O),{x:O.x,y:O.y,l:z*({right:1,center:.5}[G]||0),r:z*({left:1,center:.5}[G]||0),b:B*({top:1,middle:.5}[X]||0),t:B*({bottom:1,middle:.5}[X]||0)})}function A(k){return r.autoMarginIdRoot+k._index}function T(k,O,D,S){S=S||{};var C=k.select("."+r.itemRectClassName),z=k.select("."+r.itemTextClassName),B=O.borderwidth,U=D.index,G=O._dims;y.setTranslate(k,B+D.x,B+D.y);var X=-1!==["up","down"].indexOf(O.direction),Z=S.height||(X?G.heights[U]:G.height1);C.attr({x:0,y:0,width:S.width||(X?G.width1:G.widths[U]),height:Z});var q=O.font.size*a,W=(n.lineCount(z)-1)*q/2;n.positionText(z,r.textOffsetX,Z/2-W+r.textOffsetY),X?D.y+=G.heights[U]+D.yPad:D.x+=G.widths[U]+D.xPad,D.index++}function E(k,O){k.attr(r.menuIndexAttrName,O||"-1").selectAll("g."+r.dropdownButtonClassName).remove()}Q.exports=function(k){var O=k._fullLayout,D=e.filterVisible(O[r.name]);function S(q){v.autoMargin(k,A(q))}var C=O._menulayer.selectAll("g."+r.containerClassName).data(D.length>0?[0]:[]);if(C.enter().append("g").classed(r.containerClassName,!0).style("cursor","pointer"),C.exit().each(function(){p.select(this).selectAll("g."+r.headerGroupClassName).each(S)}).remove(),0!==D.length){var z=C.selectAll("g."+r.headerGroupClassName).data(D,s);z.enter().append("g").classed(r.headerGroupClassName,!0);for(var B=e.ensureSingle(C,"g",r.dropdownButtonGroupClassName,function(q){q.style("pointer-events","all")}),U=0;U<D.length;U++)_(k,D[U]);var Z=new f(k,B,"updatemenus"+O._uid);z.enter().size()&&(B.node().parentNode.appendChild(B.node()),B.call(E)),z.exit().each(function(q){B.call(E),S(q)}).remove(),z.each(function(q){var W=p.select(this),te="dropdown"===q.type?B:null;v.manageCommandObserver(k,q,q.buttons,function(R){l(k,q,0,W,te,Z,R.index,!0)}),"dropdown"===q.type?(c(k,W,B,Z,q),i(B,q)&&h(k,W,B,Z,q)):h(k,W,null,null,q)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(x,Q,K){arguments[4][463][0].apply(K,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(x,Q,K){"use strict";Q.exports=e;var p=x("@plotly/d3"),v=x("../color"),u=x("../drawing"),y=x("../../lib");function e(n,t,a){this.gd=n,this.container=t,this.id=a,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(n,t,a){var r=this.gd._fullLayout,f=r.width,s=r.height;this.position=n;var i,l,c,h,m=this.position.l,d=this.position.w,o=this.position.t,b=this.position.h,g=this.position.direction,w="down"===g,_="left"===g,A="up"===g,T=d,E=b;w||_||"right"===g||A||(this.position.direction="down",w=!0),w||A?(l=(i=m)+T,w?(c=o,E=(h=Math.min(c+E,s))-c):E=(h=o+E)-(c=Math.max(h-E,0))):(h=(c=o)+E,_?T=(l=m+T)-(i=Math.max(l-T,0)):(i=m,T=(l=Math.min(i+T,f))-i)),this._box={l:i,t:c,w:T,h:E};var k=d>T,O=e.barLength+2*e.barPad,D=e.barWidth+2*e.barPad,S=m,C=o+b;C+D>s&&(C=s-D);var z=this.container.selectAll("rect.scrollbar-horizontal").data(k?[0]:[]);z.exit().on(".drag",null).remove(),z.enter().append("rect").classed("scrollbar-horizontal",!0).call(v.fill,e.barColor),k?(this.hbar=z.attr({rx:e.barRadius,ry:e.barRadius,x:S,y:C,width:O,height:D}),this._hbarXMin=S+O/2,this._hbarTranslateMax=T-O):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var B=b>E,U=e.barWidth+2*e.barPad,G=e.barLength+2*e.barPad,X=m+d,Z=o;X+U>f&&(X=f-U);var q=this.container.selectAll("rect.scrollbar-vertical").data(B?[0]:[]);q.exit().on(".drag",null).remove(),q.enter().append("rect").classed("scrollbar-vertical",!0).call(v.fill,e.barColor),B?(this.vbar=q.attr({rx:e.barRadius,ry:e.barRadius,x:X,y:Z,width:U,height:G}),this._vbarYMin=Z+G/2,this._vbarTranslateMax=E-G):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var W=this.id,te=i-.5,R=B?l+U+.5:l+.5,N=c-.5,V=k?h+D+.5:h+.5,ee=r._topdefs.selectAll("#"+W).data(k||B?[0]:[]);if(ee.exit().remove(),ee.enter().append("clipPath").attr("id",W).append("rect"),k||B?(this._clipRect=ee.select("rect").attr({x:Math.floor(te),y:Math.floor(N),width:Math.ceil(R)-Math.floor(te),height:Math.ceil(V)-Math.floor(N)}),this.container.call(u.setClipUrl,W,this.gd),this.bg.attr({x:m,y:o,width:d,height:b})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(u.setClipUrl,null),delete this._clipRect),k||B){var j=p.behavior.drag().on("dragstart",function(){p.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(j);var J=p.behavior.drag().on("dragstart",function(){p.event.sourceEvent.preventDefault(),p.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));k&&this.hbar.on(".drag",null).call(J),B&&this.vbar.on(".drag",null).call(J)}this.setTranslate(t,a)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(u.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var n=this.translateX,t=this.translateY;this.hbar&&(n-=p.event.dx),this.vbar&&(t-=p.event.dy),this.setTranslate(n,t)},e.prototype._onBoxWheel=function(){var n=this.translateX,t=this.translateY;this.hbar&&(n+=p.event.deltaY),this.vbar&&(t+=p.event.deltaY),this.setTranslate(n,t)},e.prototype._onBarDrag=function(){var n=this.translateX,t=this.translateY;if(this.hbar){var a=n+this._hbarXMin,r=a+this._hbarTranslateMax;n=(y.constrain(p.event.x,a,r)-a)/(r-a)*(this.position.w-this._box.w)}if(this.vbar){var f=t+this._vbarYMin,s=f+this._vbarTranslateMax;t=(y.constrain(p.event.y,f,s)-f)/(s-f)*(this.position.h-this._box.h)}this.setTranslate(n,t)},e.prototype.setTranslate=function(n,t){var a=this.position.w-this._box.w,r=this.position.h-this._box.h;n=y.constrain(n||0,0,a),t=y.constrain(t||0,0,r),this.translateX=n,this.translateY=t,this.container.call(u.setTranslate,this._box.l-this.position.l-n,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+n-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar&&this.hbar.call(u.setTranslate,n+n/a*this._hbarTranslateMax,t),this.vbar&&this.vbar.call(u.setTranslate,n,t+t/r*this._vbarTranslateMax)}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(x,Q,K){"use strict";Q.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(x,Q,K){"use strict";Q.exports={axisRefDescription:function(p,v,u){return["If set to a",p,"axis id (e.g. *"+p+"* or","*"+p+"2*), the `"+p+"` position refers to a",p,"coordinate. If set to *paper*, the `"+p+"`","position refers to the distance from the",v,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",v,"("+u+"). If set to a",p,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",v,"of the domain of that axis: e.g.,","*"+p+"2 domain* refers to the domain of the second",p," axis and a",p,"position of 0.5 refers to the","point between the",v,"and the",u,"of the domain of the","second",p,"axis."].join(" ")}}},{}],473:[function(x,Q,K){"use strict";Q.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],474:[function(x,Q,K){"use strict";Q.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(x,Q,K){"use strict";Q.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(x,Q,K){"use strict";Q.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(x,Q,K){"use strict";Q.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],478:[function(x,Q,K){"use strict";Q.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(x,Q,K){"use strict";Q.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(x,Q,K){"use strict";K.xmlns="http://www.w3.org/2000/xmlns/",K.svg="http://www.w3.org/2000/svg",K.xlink="http://www.w3.org/1999/xlink",K.svgAttrs={xmlns:K.svg,"xmlns:xlink":K.xlink}},{}],481:[function(x,Q,K){"use strict";K.version=x("./version").version,x("native-promise-only"),x("../build/plotcss");for(var p=x("./registry"),v=K.register=p.register,u=x("./plot_api"),y=Object.keys(u),e=0;e<y.length;e++){var n=y[e];"_"!==n.charAt(0)&&(K[n]=u[n]),v({moduleType:"apiMethod",name:n,fn:u[n]})}v(x("./traces/scatter")),v([x("./components/legend"),x("./components/fx"),x("./components/annotations"),x("./components/annotations3d"),x("./components/shapes"),x("./components/images"),x("./components/updatemenus"),x("./components/sliders"),x("./components/rangeslider"),x("./components/rangeselector"),x("./components/grid"),x("./components/errorbars"),x("./components/colorscale"),x("./components/colorbar"),x("./components/modebar")]),v([x("./locale-en"),x("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(v(window.PlotlyLocales),delete window.PlotlyLocales),K.Icons=x("./fonts/ploticon");var t=x("./components/fx"),a=x("./plots/plots");K.Plots={resize:a.resize,graphJson:a.graphJson,sendDataToCloud:a.sendDataToCloud},K.Fx={hover:t.hover,unhover:t.unhover,loneHover:t.loneHover,loneUnhover:t.loneUnhover},K.Snapshot=x("./snapshot"),K.PlotSchema=x("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":937,"./version":1118,"native-promise-only":245}],482:[function(x,Q,K){"use strict";Q.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(x,Q,K){"use strict";K.isLeftAnchor=function(p){return"left"===p.xanchor||"auto"===p.xanchor&&p.x<=1/3},K.isCenterAnchor=function(p){return"center"===p.xanchor||"auto"===p.xanchor&&p.x>1/3&&p.x<2/3},K.isRightAnchor=function(p){return"right"===p.xanchor||"auto"===p.xanchor&&p.x>=2/3},K.isTopAnchor=function(p){return"top"===p.yanchor||"auto"===p.yanchor&&p.y>=2/3},K.isMiddleAnchor=function(p){return"middle"===p.yanchor||"auto"===p.yanchor&&p.y>1/3&&p.y<2/3},K.isBottomAnchor=function(p){return"bottom"===p.yanchor||"auto"===p.yanchor&&p.y<=1/3}},{}],484:[function(x,Q,K){"use strict";var p=x("./mod"),v=p.mod,u=p.modHalf,y=Math.PI,e=2*y;function n(f){return Math.abs(f[1]-f[0])>e-1e-14}function t(f,s){return u(s-f,e)}function a(f,s){if(n(s))return!0;var i,l;s[0]<s[1]?(i=s[0],l=s[1]):(i=s[1],l=s[0]),(i=v(i,e))>(l=v(l,e))&&(l+=e);var c=v(f,e),h=c+e;return c>=i&&c<=l||h>=i&&h<=l}function r(f,s,i,l,c,h,m){c=c||0,h=h||0;var d,o,b,g,w,_=n([i,l]);function A(O,D){return[O*Math.cos(D)+c,h-O*Math.sin(D)]}_?(d=0,o=y,b=e):i<l?(d=i,b=l):(d=l,b=i),f<s?(g=f,w=s):(g=s,w=f);var T,E=Math.abs(b-d)<=y?0:1;function k(O,D,S){return"A"+[O,O]+" "+[0,E,S]+" "+A(O,D)}return _?T=null===g?"M"+A(w,d)+k(w,o,0)+k(w,b,0)+"Z":"M"+A(g,d)+k(g,o,0)+k(g,b,0)+"ZM"+A(w,d)+k(w,o,1)+k(w,b,1)+"Z":null===g?(T="M"+A(w,d)+k(w,b,0),m&&(T+="L0,0Z")):T="M"+A(g,d)+"L"+A(w,d)+k(w,b,0)+"L"+A(g,b)+k(g,d,1)+"Z",T}Q.exports={deg2rad:function(f){return f/180*y},rad2deg:function(f){return f/y*180},angleDelta:t,angleDist:function(f,s){return Math.abs(t(f,s))},isFullCircle:n,isAngleInsideSector:a,isPtInsideSector:function(f,s,i,l){return!!a(s,l)&&(i[0]<i[1]?(c=i[0],h=i[1]):(c=i[1],h=i[0]),f>=c&&f<=h);var c,h},pathArc:function(f,s,i,l,c){return r(null,f,s,i,l,c,0)},pathSector:function(f,s,i,l,c){return r(null,f,s,i,l,c,1)},pathAnnulus:function(f,s,i,l,c,h){return r(f,s,i,l,c,h,1)}}},{"./mod":510}],485:[function(x,Q,K){"use strict";var p=Array.isArray,v=ArrayBuffer,u=DataView;function y(t){return v.isView(t)&&!(t instanceof u)}function e(t){return p(t)||y(t)}function n(t,a,r){if(e(t)){if(e(t[0])){for(var f=r,s=0;s<t.length;s++)f=a(f,t[s].length);return f}return t.length}return 0}K.isTypedArray=y,K.isArrayOrTypedArray=e,K.isArray1D=function(t){return!e(t[0])},K.ensureArray=function(t,a){return p(t)||(t=[]),t.length=a,t},K.concat=function(){var t,a,r,f,s,i,l,c,h=[],m=!0,d=0;for(r=0;r<arguments.length;r++)(i=(f=arguments[r]).length)&&(a?h.push(f):(a=f,s=i),p(f)?t=!1:(m=!1,d?t!==f.constructor&&(t=!1):t=f.constructor),d+=i);if(!d)return[];if(!h.length)return a;if(m)return a.concat.apply(a,h);if(t){for((l=new t(d)).set(a),r=0;r<h.length;r++)l.set(f=h[r],s),s+=f.length;return l}for(l=new Array(d),c=0;c<a.length;c++)l[c]=a[c];for(r=0;r<h.length;r++){for(f=h[r],c=0;c<f.length;c++)l[s+c]=f[c];s+=c}return l},K.maxRowLength=function(t){return n(t,Math.max,0)},K.minRowLength=function(t){return n(t,Math.min,1/0)}},{}],486:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../constants/numerical").BADNUM,u=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;Q.exports=function(y){return"string"==typeof y&&(y=y.replace(u,"")),p(y)?Number(y):v}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(x,Q,K){"use strict";Q.exports=function(p){var v=p._fullLayout;v._glcanvas&&v._glcanvas.size()&&v._glcanvas.each(function(u){u.regl&&u.regl.clear({color:!0,depth:!0})})}},{}],488:[function(x,Q,K){"use strict";Q.exports=function(p){p._responsiveChartHandler&&(window.removeEventListener("resize",p._responsiveChartHandler),delete p._responsiveChartHandler)}},{}],489:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("tinycolor2"),u=x("../plots/attributes"),y=x("../components/colorscale/scales"),e=x("../components/color"),n=x("../constants/interactions").DESELECTDIM,t=x("./nested_property"),a=x("./regex").counter,r=x("./mod").modHalf,f=x("./array").isArrayOrTypedArray;function s(i,l){var c=K.valObjectMeta[l.valType];if(l.arrayOk&&f(i))return!0;if(c.validateFunction)return c.validateFunction(i,l);var h={},m=h;return c.coerceFunction(i,{set:function(o){m=o}},h,l),m!==h}K.valObjectMeta={data_array:{coerceFunction:function(i,l,c){f(i)?l.set(i):void 0!==c&&l.set(c)}},enumerated:{coerceFunction:function(i,l,c,h){h.coerceNumber&&(i=+i),-1===h.values.indexOf(i)?l.set(c):l.set(i)},validateFunction:function(i,l){l.coerceNumber&&(i=+i);for(var c=l.values,h=0;h<c.length;h++){var m=String(c[h]);if("/"===m.charAt(0)&&"/"===m.charAt(m.length-1)){if(new RegExp(m.substr(1,m.length-2)).test(i))return!0}else if(i===c[h])return!0}return!1}},boolean:{coerceFunction:function(i,l,c){l.set(!0===i||!1===i?i:c)}},number:{coerceFunction:function(i,l,c,h){!p(i)||void 0!==h.min&&i<h.min||void 0!==h.max&&i>h.max?l.set(c):l.set(+i)}},integer:{coerceFunction:function(i,l,c,h){i%1||!p(i)||void 0!==h.min&&i<h.min||void 0!==h.max&&i>h.max?l.set(c):l.set(+i)}},string:{coerceFunction:function(i,l,c,h){l.set("string"!=typeof i?!0!==h.strict&&"number"==typeof i?String(i):c:h.noBlank&&!i?c:i)}},color:{coerceFunction:function(i,l,c){v(i).isValid()?l.set(i):l.set(c)}},colorlist:{coerceFunction:function(i,l,c){Array.isArray(i)&&i.length&&i.every(function(h){return v(h).isValid()})?l.set(i):l.set(c)}},colorscale:{coerceFunction:function(i,l,c){l.set(y.get(i,c))}},angle:{coerceFunction:function(i,l,c){"auto"===i?l.set("auto"):p(i)?l.set(r(+i,360)):l.set(c)}},subplotid:{coerceFunction:function(i,l,c,h){var m=h.regex||a(c);"string"==typeof i&&m.test(i)?l.set(i):l.set(c)},validateFunction:function(i,l){var c=l.dflt;return i===c||"string"==typeof i&&!!a(c).test(i)}},flaglist:{coerceFunction:function(i,l,c,h){if("string"==typeof i)if(-1===(h.extras||[]).indexOf(i)){for(var m=i.split("+"),d=0;d<m.length;){var o=m[d];-1===h.flags.indexOf(o)||m.indexOf(o)<d?m.splice(d,1):d++}l.set(m.length?m.join("+"):c)}else l.set(i);else l.set(c)}},any:{coerceFunction:function(i,l,c){l.set(void 0===i?c:i)}},info_array:{coerceFunction:function(i,l,c,h){function m(C,z,B){var U;return void 0===B&&(B=z.dflt),K.valObjectMeta[z.valType].coerceFunction(C,{set:function(X){U=X}},B,z),U}var d=2===h.dimensions||"1-2"===h.dimensions&&Array.isArray(i)&&Array.isArray(i[0]);if(Array.isArray(i)){var o,b,g,_,A,T=h.items,E=[],k=Array.isArray(T),O=k&&d&&Array.isArray(T[0]),D=d&&k&&!O,S=k&&!D?T.length:i.length;if(c=Array.isArray(c)?c:[],d)for(o=0;o<S;o++)for(E[o]=[],g=Array.isArray(i[o])?i[o]:[],_=D?T.length:k?T[o].length:g.length,b=0;b<_;b++)void 0!==(A=m(g[b],D?T[b]:k?T[o][b]:T,(c[o]||[])[b]))&&(E[o][b]=A);else for(o=0;o<S;o++)void 0!==(A=m(i[o],k?T[o]:T,c[o]))&&(E[o]=A);l.set(E)}else l.set(c)},validateFunction:function(i,l){if(!Array.isArray(i))return!1;var c=l.items,h=Array.isArray(c),m=2===l.dimensions;if(!l.freeLength&&i.length!==c.length)return!1;for(var d=0;d<i.length;d++)if(m){if(!Array.isArray(i[d])||!l.freeLength&&i[d].length!==c[d].length)return!1;for(var o=0;o<i[d].length;o++)if(!s(i[d][o],h?c[d][o]:c))return!1}else if(!s(i[d],h?c[d]:c))return!1;return!0}}},K.coerce=function(i,l,c,h,m){var d=t(c,h).get(),o=t(i,h),b=t(l,h),g=o.get(),w=l._template;if(void 0===g&&w&&(g=t(w,h).get(),w=0),void 0===m&&(m=d.dflt),d.arrayOk&&f(g))return b.set(g),g;var _=K.valObjectMeta[d.valType].coerceFunction;_(g,b,m,d);var A=b.get();return w&&A===m&&!s(g,d)&&(_(g=t(w,h).get(),b,m,d),A=b.get()),A},K.coerce2=function(i,l,c,h,m){var d=t(i,h),o=K.coerce(i,l,c,h,m);return null!=d.get()&&o},K.coerceFont=function(i,l,c){var h={};return h.family=i(l+".family",(c=c||{}).family),h.size=i(l+".size",c.size),h.color=i(l+".color",c.color),h},K.coercePattern=function(i,l,c,h){if(i(l+".shape")){i(l+".solidity"),i(l+".size");var m="overlay"===i(l+".fillmode");if(!h){var d=i(l+".bgcolor",m?c:void 0);i(l+".fgcolor",m?e.contrast(d):c)}i(l+".fgopacity",m?.5:1)}},K.coerceHoverinfo=function(i,l,c){var h,m=l._module.attributes,d=m.hoverinfo?m:u,o=d.hoverinfo;if(1===c._dataLength){var b="all"===o.dflt?o.flags.slice():o.dflt.split("+");b.splice(b.indexOf("name"),1),h=b.join("+")}return K.coerce(i,l,d,"hoverinfo",h)},K.coerceSelectionMarkerOpacity=function(i,l){if(i.marker){var c,h,m=i.marker.opacity;void 0!==m&&(f(m)||i.selected||i.unselected||(c=m,h=n*m),l("selected.marker.opacity",c),l("unselected.marker.opacity",h))}},K.validate=s},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(x,Q,K){"use strict";var p,v,u=x("d3-time-format").timeFormat,y=x("fast-isnumeric"),e=x("./loggers"),n=x("./mod").mod,t=x("../constants/numerical"),a=t.BADNUM,r=t.ONEDAY,f=t.ONEHOUR,s=t.ONEMIN,i=t.ONESEC,l=t.EPOCHJD,c=x("../registry"),h=x("d3-time-format").utcFormat,m=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,o=(new Date).getFullYear()-70;function b(z){return z&&c.componentsRegistry.calendars&&"string"==typeof z&&"gregorian"!==z}function g(z,B){return String(z+Math.pow(10,B)).substr(1)}K.dateTick0=function(z,B){var X,Z,U=(Z=!!B,b(X=z)?Z?c.getComponentMethod("calendars","CANONICAL_SUNDAY")[X]:c.getComponentMethod("calendars","CANONICAL_TICK")[X]:Z?"2000-01-02":"2000-01-01");if(B<2)return U;var G=K.dateTime2ms(U,z);return K.ms2DateTime(G+=r*(B-1),0,z)},K.dfltRange=function(z){return b(z)?c.getComponentMethod("calendars","DFLTRANGE")[z]:["2000-01-01","2001-01-01"]},K.isJSDate=function(z){return"object"==typeof z&&null!==z&&"function"==typeof z.getTime},K.dateTime2ms=function(z,B){if(K.isJSDate(z)){var U=z.getTimezoneOffset()*s,G=(z.getUTCMinutes()-z.getMinutes())*s+(z.getUTCSeconds()-z.getSeconds())*i+(z.getUTCMilliseconds()-z.getMilliseconds());if(G){var X=3*s;U=U-X/2+n(G-U+X/2,X)}return(z=Number(z)-U)>=p&&z<=v?z:a}if("string"!=typeof z&&"number"!=typeof z)return a;z=String(z);var Z=b(B),q=z.charAt(0);!Z||"G"!==q&&"g"!==q||(z=z.substr(1),B="");var W=Z&&"chinese"===B.substr(0,7),te=z.match(W?d:m);if(!te)return a;var R=te[1],N=te[3]||"1",V=Number(te[5]||1),ee=Number(te[7]||0),j=Number(te[9]||0),J=Number(te[11]||0);if(Z){if(2===R.length)return a;var $;R=Number(R);try{var re=c.getComponentMethod("calendars","getCal")(B);if(W){var ne="i"===N.charAt(N.length-1);N=parseInt(N,10),$=re.newDate(R,re.toMonthIndex(R,N,ne),V)}else $=re.newDate(R,Number(N),V)}catch(ie){return a}return $?($.toJD()-l)*r+ee*f+j*s+J*i:a}R=2===R.length?(Number(R)+2e3-o)%100+o:Number(R),N-=1;var se=new Date(Date.UTC(2e3,N,V,ee,j));return se.setUTCFullYear(R),se.getUTCMonth()!==N||se.getUTCDate()!==V?a:se.getTime()+J*i},p=K.MIN_MS=K.dateTime2ms("-9999"),v=K.MAX_MS=K.dateTime2ms("9999-12-31 23:59:59.9999"),K.isDateTime=function(z,B){return K.dateTime2ms(z,B)!==a};var w=90*r,_=3*f,A=5*s;function T(z,B,U,G,X){if((B||U||G||X)&&(z+=" "+g(B,2)+":"+g(U,2),(G||X)&&(z+=":"+g(G,2),X))){for(var Z=4;X%10==0;)Z-=1,X/=10;z+="."+g(X,Z)}return z}K.ms2DateTime=function(z,B,U){if("number"!=typeof z||!(z>=p&&z<=v))return a;B||(B=0);var G,X,Z,q,W,te,R=Math.floor(10*n(z+.05,1)),N=Math.round(z-R/10);if(b(U)){var V=Math.floor(N/r)+l,ee=Math.floor(n(z,r));try{G=c.getComponentMethod("calendars","getCal")(U).fromJD(V).formatDate("yyyy-mm-dd")}catch(j){G=h("G%Y-%m-%d")(new Date(N))}if("-"===G.charAt(0))for(;G.length<11;)G="-0"+G.substr(1);else for(;G.length<10;)G="0"+G;X=B<w?Math.floor(ee/f):0,Z=B<w?Math.floor(ee%f/s):0,q=B<_?Math.floor(ee%s/i):0,W=B<A?ee%i*10+R:0}else te=new Date(N),G=h("%Y-%m-%d")(te),X=B<w?te.getUTCHours():0,Z=B<w?te.getUTCMinutes():0,q=B<_?te.getUTCSeconds():0,W=B<A?10*te.getUTCMilliseconds()+R:0;return T(G,X,Z,q,W)},K.ms2DateTimeLocal=function(z){if(!(z>=p+r&&z<=v-r))return a;var B=Math.floor(10*n(z+.05,1)),U=new Date(Math.round(z-B/10));return T(u("%Y-%m-%d")(U),U.getHours(),U.getMinutes(),U.getSeconds(),10*U.getUTCMilliseconds()+B)},K.cleanDate=function(z,B,U){if(z===a)return B;if(K.isJSDate(z)||"number"==typeof z&&isFinite(z)){if(b(U))return e.error("JS Dates and milliseconds are incompatible with world calendars",z),B;if(!(z=K.ms2DateTimeLocal(+z))&&void 0!==B)return B}else if(!K.isDateTime(z,U))return e.error("unrecognized date",z),B;return z};var E=/%\d?f/g,k=/%h/g,O={1:"1",2:"1",3:"2",4:"2"};function D(z,B,U,G){z=z.replace(E,function(Z){var q=Math.min(+Z.charAt(1)||6,6);return(B/1e3%1+2).toFixed(q).substr(2).replace(/0+$/,"")||"0"});var X=new Date(Math.floor(B+.05));if(z=z.replace(k,function(){return O[U("%q")(X)]}),b(G))try{z=c.getComponentMethod("calendars","worldCalFmt")(z,B,G)}catch(Z){return"Invalid"}return U(z)(X)}var S=[59,59.9,59.99,59.999,59.9999];K.formatDate=function(z,B,U,G,X,Z){if(X=b(X)&&X,!B)if("y"===U)B=Z.year;else if("m"===U)B=Z.month;else{if("d"!==U)return function(q,W){var te=n(q+.05,r),R=g(Math.floor(te/f),2)+":"+g(n(Math.floor(te/s),60),2);if("M"!==W){y(W)||(W=0);var N=(100+Math.min(n(q/i,60),S[W])).toFixed(W).substr(1);W>0&&(N=N.replace(/0+$/,"").replace(/[\.]$/,"")),R+=":"+N}return R}(z,U)+"\n"+D(Z.dayMonthYear,z,G,X);B=Z.dayMonth+"\n"+Z.year}return D(B,z,G,X)};var C=3*r;K.incrementMonth=function(z,B,U){U=b(U)&&U;var G=n(z,r);if(z=Math.round(z-G),U)try{var X=Math.round(z/r)+l,Z=c.getComponentMethod("calendars","getCal")(U),q=Z.fromJD(X);return B%12?Z.add(q,B,"m"):Z.add(q,B/12,"y"),(q.toJD()-l)*r+G}catch(te){e.error("invalid ms "+z+" in calendar "+U)}var W=new Date(z+C);return W.setUTCMonth(W.getUTCMonth()+B)+G-C},K.findExactDates=function(z,B){for(var U,G,X=0,Z=0,q=0,W=0,te=b(B)&&c.getComponentMethod("calendars","getCal")(B),R=0;R<z.length;R++)if(y(G=z[R])){if(!(G%r))if(te)try{1===(U=te.fromJD(G/r+l)).day()?1===U.month()?X++:Z++:q++}catch(V){}else 1===(U=new Date(G)).getUTCDate()?0===U.getUTCMonth()?X++:Z++:q++}else W++;q+=Z+=X;var N=z.length-W;return{exactYears:X/N,exactMonths:Z/N,exactDays:q/N}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("./loggers"),u=x("./matrix"),y=x("gl-mat4");function e(f){var s=f&&f.parentNode;s&&s.removeChild(f)}function n(f,s,i){var l="plotly.js-style-"+f,c=document.getElementById(l);c||((c=document.createElement("style")).setAttribute("id",l),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var h=c.sheet;h.insertRule?h.insertRule(s+"{"+i+"}",0):h.addRule?h.addRule(s,i,0):v.warn("addStyleRule failed")}function t(f){var s=window.getComputedStyle(f,null),i=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("-moz-transform")||s.getPropertyValue("-ms-transform")||s.getPropertyValue("-o-transform")||s.getPropertyValue("transform");return"none"===i?null:i.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(l){return+l})}function a(f){for(var s=[];r(f);)s.push(f),f=f.parentNode;return s}function r(f){return f&&(f instanceof Element||f instanceof HTMLElement)}Q.exports={getGraphDiv:function(f){var s;if("string"==typeof f){if(null===(s=document.getElementById(f)))throw new Error("No DOM element with id '"+f+"' exists on the page.");return s}if(null==f)throw new Error("DOM element provided is null or undefined");return f},isPlotDiv:function(f){var s=p.select(f);return s.node()instanceof HTMLElement&&s.size()&&s.classed("js-plotly-plot")},removeElement:e,addStyleRule:function(f,s){n("global",f,s)},addRelatedStyleRule:n,deleteRelatedStyleRule:function(f){var i=document.getElementById("plotly.js-style-"+f);i&&e(i)},getFullTransformMatrix:function(f){var s=a(f),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return s.forEach(function(l){var c=t(l);if(c){var h=u.convertCssMatrix(c);i=y.multiply(i,i,h)}}),i},getElementTransformMatrix:t,getElementAndAncestors:a,equalDomRects:function(f,s){return f&&s&&f.x===s.x&&f.y===s.y&&f.top===s.top&&f.left===s.left&&f.right===s.right&&f.bottom===s.bottom}}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(x,Q,K){"use strict";var p=x("events").EventEmitter;Q.exports={init:function(u){if(u._ev instanceof p)return u;var y=new p,e=new p;return u._ev=y,u._internalEv=e,u.on=y.on.bind(y),u.once=y.once.bind(y),u.removeListener=y.removeListener.bind(y),u.removeAllListeners=y.removeAllListeners.bind(y),u._internalOn=e.on.bind(e),u._internalOnce=e.once.bind(e),u._removeInternalListener=e.removeListener.bind(e),u._removeAllInternalListeners=e.removeAllListeners.bind(e),u.emit=function(n,t){"undefined"!=typeof jQuery&&jQuery(u).trigger(n,t),y.emit(n,t),e.emit(n,t)},u},triggerHandler:function(u,y,e){var n,t;"undefined"!=typeof jQuery&&(n=jQuery(u).triggerHandler(y,e));var a=u._ev;if(!a)return n;var r,f=a._events[y];if(!f)return n;function s(i){return i.listener?(a.removeListener(y,i.listener),i.fired?void 0:(i.fired=!0,i.listener.apply(a,[e]))):i.apply(a,[e])}for(f=Array.isArray(f)?f:[f],r=0;r<f.length-1;r++)s(f[r]);return t=s(f[r]),void 0!==n?n:t},purge:function(u){return delete u._ev,delete u.on,delete u.once,delete u.removeListener,delete u.removeAllListeners,delete u.emit,delete u._ev,delete u._internalEv,delete u._internalOn,delete u._internalOnce,delete u._removeInternalListener,delete u._removeAllInternalListeners,u}}},{events:84}],493:[function(x,Q,K){"use strict";var p=x("./is_plain_object.js"),v=Array.isArray;function u(y,e,n,t){var a,r,f,s,i,l,c=y[0],h=y.length;if(2===h&&v(c)&&v(y[1])&&0===c.length){if(function(d,o){var b,g;for(b=0;b<d.length;b++){if(null!==(g=d[b])&&"object"==typeof g)return!1;void 0!==g&&(o[b]=g)}return!0}(y[1],c))return c;c.splice(0,c.length)}for(var m=1;m<h;m++)for(r in a=y[m])f=c[r],s=a[r],t&&v(s)?c[r]=s:e&&s&&(p(s)||(i=v(s)))?(i?(i=!1,l=f&&v(f)?f:[]):l=f&&p(f)?f:{},c[r]=u([l,s],e,n,t)):(void 0!==s||n)&&(c[r]=s);return c}K.extendFlat=function(){return u(arguments,!1,!1,!1)},K.extendDeep=function(){return u(arguments,!0,!1,!1)},K.extendDeepAll=function(){return u(arguments,!0,!0,!1)},K.extendDeepNoArrays=function(){return u(arguments,!0,!1,!0)}},{"./is_plain_object.js":504}],494:[function(x,Q,K){"use strict";Q.exports=function(p){for(var v={},u=[],y=0,e=0;e<p.length;e++){var n=p[e];1!==v[n]&&(v[n]=1,u[y++]=n)}return u}},{}],495:[function(x,Q,K){"use strict";function p(u){return!0===u.visible}function v(u){var y=u[0].trace;return!0===y.visible&&0!==y._length}Q.exports=function(u){for(var y,e=(y=u,Array.isArray(y)&&Array.isArray(y[0])&&y[0][0]&&y[0][0].trace?v:p),n=[],t=0;t<u.length;t++){var a=u[t];e(a)&&n.push(a)}return n}},{}],496:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("country-regex"),u=x("@turf/area"),y=x("@turf/centroid"),e=x("@turf/bbox"),n=x("./identity"),t=x("./loggers"),a=x("./is_plain_object"),r=x("./nested_property"),f=x("./polygon"),s=Object.keys(v),i={"ISO-3":n,"USA-states":n,"country names":function(c){for(var h=0;h<s.length;h++){var m=s[h];if(new RegExp(v[m]).test(c.trim().toLowerCase()))return m}return t.log("Unrecognized country name: "+c+"."),!1}};function l(c){var h=c.geojson,m=window.PlotlyGeoAssets||{},d="string"==typeof h?m[h]:h;return a(d)?d:(t.error("Oops ... something went wrong when fetching "+h),!1)}Q.exports={locationToFeature:function(c,h,m){if(!h||"string"!=typeof h)return!1;var d,o,b,g=i[c](h);if(g){if("USA-states"===c)for(d=[],b=0;b<m.length;b++)(o=m[b]).properties&&o.properties.gu&&"USA"===o.properties.gu&&d.push(o);else d=m;for(b=0;b<d.length;b++)if((o=d[b]).id===g)return o;t.log(["Location with id",g,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(c){var h,m,d,o,b=c.geometry,g=b.coordinates,w=c.id,_=[];function A(T){for(var E=0;E<T.length-1;E++)if(T[E][0]>0&&T[E+1][0]<0)return E;return null}switch(h="RUS"===w||"FJI"===w?function(T){var E;if(null===A(T))E=T;else for(E=new Array(T.length),o=0;o<T.length;o++)E[o]=[T[o][0]<0?T[o][0]+360:T[o][0],T[o][1]];_.push(f.tester(E))}:"ATA"===w?function(T){var E=A(T);if(null===E)return _.push(f.tester(T));var k=new Array(T.length+1),O=0;for(o=0;o<T.length;o++)o>E?k[O++]=[T[o][0]+360,T[o][1]]:o===E?(k[O++]=T[o],k[O++]=[T[o][0],-90]):k[O++]=T[o];var D=f.tester(k);D.pts.pop(),_.push(D)}:function(T){_.push(f.tester(T))},b.type){case"MultiPolygon":for(m=0;m<g.length;m++)for(d=0;d<g[m].length;d++)h(g[m][d]);break;case"Polygon":for(m=0;m<g.length;m++)h(g[m])}return _},getTraceGeojson:l,extractTraceFeature:function(c){var h=c[0].trace,m=l(h);if(!m)return!1;var d,o={},b=[];for(d=0;d<h._length;d++){var g=c[d];(g.loc||0===g.loc)&&(o[g.loc]=g)}function w(T){var E=r(T,h.featureidkey||"id").get(),k=o[E];if(k){var O=T.geometry;if("Polygon"===O.type||"MultiPolygon"===O.type){var D={type:"Feature",id:E,geometry:O,properties:{}};D.properties.ct=function(S){var C,z=S.geometry;if("MultiPolygon"===z.type)for(var B=z.coordinates,U=0,G=0;G<B.length;G++){var X={type:"Polygon",coordinates:B[G]},Z=u.default(X);Z>U&&(U=Z,C=X)}else C=z;return y.default(C).geometry.coordinates}(D),k.fIn=T,k.fOut=D,b.push(D)}else t.log(["Location",k.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete o[E]}switch(m.type){case"FeatureCollection":var _=m.features;for(d=0;d<_.length;d++)w(_[d]);break;case"Feature":w(m);break;default:return t.warn(["Invalid GeoJSON type",(m.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var A in o)t.log(["Location *"+A+"*","does not have a matching feature with id-key","*"+h.featureidkey+"*."].join(" "));return b},fetchTraceGeoData:function(c){var h=window.PlotlyGeoAssets||{},m=[];function d(w){return new Promise(function(_,A){p.json(w,function(T,E){return T?(delete h[w],A(new Error(404===T.status?'GeoJSON at URL "'+w+'" does not exist.':"Unexpected error while fetching from "+w))):(h[w]=E,_(E))})})}function o(w){return new Promise(function(_,A){var T=0,E=setInterval(function(){return h[w]&&"pending"!==h[w]?(clearInterval(E),_(h[w])):T>100?(clearInterval(E),A("Unexpected error while fetching from "+w)):void T++},50)})}for(var b=0;b<c.length;b++){var g=c[b][0].trace.geojson;"string"==typeof g&&(h[g]?"pending"===h[g]&&m.push(o(g)):(h[g]="pending",m.push(d(g))))}return m},computeBbox:function(c){return e.default(c)}}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(x,Q,K){"use strict";var p=x("../constants/numerical").BADNUM;K.calcTraceToLineCoords=function(v){for(var u=v[0].trace.connectgaps,y=[],e=[],n=0;n<v.length;n++){var t=v[n].lonlat;t[0]!==p?e.push(t):!u&&e.length>0&&(y.push(e),e=[])}return e.length>0&&y.push(e),y},K.makeLine=function(v){return 1===v.length?{type:"LineString",coordinates:v[0]}:{type:"MultiLineString",coordinates:v}},K.makePolygon=function(v){if(1===v.length)return{type:"Polygon",coordinates:v};for(var u=new Array(v.length),y=0;y<v.length;y++)u[y]=[v[y]];return{type:"MultiPolygon",coordinates:u}},K.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(x,Q,K){"use strict";var p,v,u,y=x("./mod").mod;function e(t,a,r,f,s,i,l,c){var h=r-t,m=s-t,d=l-s,o=f-a,b=i-a,g=c-i,w=h*g-d*o;if(0===w)return null;var _=(m*g-d*b)/w,A=(m*o-h*b)/w;return A<0||A>1||_<0||_>1?null:{x:t+h*_,y:a+o*_}}function n(t,a,r,f,s){var i=f*t+s*a;if(i<0)return f*f+s*s;if(i>r){var l=f-t,c=s-a;return l*l+c*c}var h=f*a-s*t;return h*h/r}K.segmentsIntersect=e,K.segmentDistance=function(t,a,r,f,s,i,l,c){if(e(t,a,r,f,s,i,l,c))return 0;var h=r-t,m=f-a,d=l-s,o=c-i,b=h*h+m*m,g=d*d+o*o,w=Math.min(n(h,m,b,s-t,i-a),n(h,m,b,l-t,c-a),n(d,o,g,t-s,a-i),n(d,o,g,r-s,f-i));return Math.sqrt(w)},K.getTextLocation=function(t,a,r,f){if(t===v&&f===u||(p={},v=t,u=f),p[r])return p[r];var s=t.getPointAtLength(y(r-f/2,a)),i=t.getPointAtLength(y(r+f/2,a)),l=Math.atan((i.y-s.y)/(i.x-s.x)),c=t.getPointAtLength(y(r,a)),h={x:(4*c.x+s.x+i.x)/6,y:(4*c.y+s.y+i.y)/6,theta:l};return p[r]=h,h},K.clearLocationCache=function(){v=null},K.getVisibleSegment=function(t,a,r){var f,s,i=a.left,l=a.right,c=a.top,h=a.bottom,m=0,d=t.getTotalLength(),o=d;function b(w){var _=t.getPointAtLength(w);0===w?f=_:w===d&&(s=_);var A=_.x<i?i-_.x:_.x>l?_.x-l:0,T=_.y<c?c-_.y:_.y>h?_.y-h:0;return Math.sqrt(A*A+T*T)}for(var g=b(m);g;){if((m+=g+r)>o)return;g=b(m)}for(g=b(o);g;){if(m>(o-=g+r))return;g=b(o)}return{min:m,max:o,len:o-m,total:d,isClosed:0===m&&o===d&&Math.abs(f.x-s.x)<.1&&Math.abs(f.y-s.y)<.1}},K.findPointOnPath=function(t,a,r,f){for(var s,i,l,c=(f=f||{}).pathLength||t.getTotalLength(),h=f.tolerance||.001,m=f.iterationLimit||30,d=t.getPointAtLength(0)[r]>t.getPointAtLength(c)[r]?-1:1,o=0,b=0,g=c;o<m;){if(l=(i=t.getPointAtLength(s=(b+g)/2))[r]-a,Math.abs(l)<h)return i;d*l>0?g=s:b=s,o++}return i}},{"./mod":510}],499:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("tinycolor2"),u=x("color-normalize"),y=x("../components/colorscale"),e=x("../components/color/attributes").defaultLine,n=x("./array").isArrayOrTypedArray,t=u(e);function a(s,i){var l=s;return l[3]*=i,l}function r(s){if(p(s))return t;var i=u(s);return i.length?i:t}function f(s){return p(s)?s:1}Q.exports={formatColor:function(s,i,l){var c,h,m,d,o,b=s.color,g=n(b),w=n(i),_=y.extractOpts(s),A=[];if(c=void 0!==_.colorscale?y.makeColorScaleFuncFromTrace(s):r,h=g?function(E,k){return void 0===E[k]?t:u(c(E[k]))}:r,m=w?function(E,k){return void 0===E[k]?1:f(E[k])}:f,g||w)for(var T=0;T<l;T++)d=h(b,T),o=m(i,T),A[T]=a(d,o);else A=a(u(b),i);return A},parseColorScale:function(s){var i=y.extractOpts(s),l=i.colorscale;return i.reversescale&&(l=y.flipScale(i.colorscale)),l.map(function(c){var h=c[0],m=v(c[1]).toRgb();return{index:h,rgb:[m.r,m.g,m.b,m.a]}})}}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(x,Q,K){"use strict";var p=x("./identity");function v(u){return[u]}Q.exports={keyFun:function(u){return u.key},repeat:v,descend:p,wrap:v,unwrap:function(u){return u[0]}}},{"./identity":501}],501:[function(x,Q,K){"use strict";Q.exports=function(p){return p}},{}],502:[function(x,Q,K){"use strict";Q.exports=function(p,v){if(!v)return p;var u=1/Math.abs(v),y=u>1?(u*p+u*v)/u:p+v,e=String(y).length;if(e>16){var n=String(v).length;if(e>=String(p).length+n){var t=parseFloat(y).toPrecision(12);-1===t.indexOf("e+")&&(y=+t)}}return y}},{}],503:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("d3-time-format").utcFormat,u=x("d3-format").format,y=x("fast-isnumeric"),e=x("../constants/numerical"),n=e.FP_SAFE,t=-n,a=e.BADNUM,r=Q.exports={};r.adjustFormat=function(R){return!R||/^\d[.]\df/.test(R)||/[.]\d%/.test(R)?R:"0.f"===R?"~f":/^\d%/.test(R)?"~%":/^\ds/.test(R)?"~s":!/^[~,.0$]/.test(R)&&/[&fps]/.test(R)?"~"+R:R};var f={};r.warnBadFormat=function(R){var N=String(R);f[N]||(f[N]=1,r.warn('encountered bad format: "'+N+'"'))},r.noFormat=function(R){return String(R)},r.numberFormat=function(R){var N;try{N=u(r.adjustFormat(R))}catch(V){return r.warnBadFormat(R),r.noFormat}return N},r.nestedProperty=x("./nested_property"),r.keyedContainer=x("./keyed_container"),r.relativeAttr=x("./relative_attr"),r.isPlainObject=x("./is_plain_object"),r.toLogRange=x("./to_log_range"),r.relinkPrivateKeys=x("./relink_private");var s=x("./array");r.isTypedArray=s.isTypedArray,r.isArrayOrTypedArray=s.isArrayOrTypedArray,r.isArray1D=s.isArray1D,r.ensureArray=s.ensureArray,r.concat=s.concat,r.maxRowLength=s.maxRowLength,r.minRowLength=s.minRowLength;var i=x("./mod");r.mod=i.mod,r.modHalf=i.modHalf;var l=x("./coerce");r.valObjectMeta=l.valObjectMeta,r.coerce=l.coerce,r.coerce2=l.coerce2,r.coerceFont=l.coerceFont,r.coercePattern=l.coercePattern,r.coerceHoverinfo=l.coerceHoverinfo,r.coerceSelectionMarkerOpacity=l.coerceSelectionMarkerOpacity,r.validate=l.validate;var c=x("./dates");r.dateTime2ms=c.dateTime2ms,r.isDateTime=c.isDateTime,r.ms2DateTime=c.ms2DateTime,r.ms2DateTimeLocal=c.ms2DateTimeLocal,r.cleanDate=c.cleanDate,r.isJSDate=c.isJSDate,r.formatDate=c.formatDate,r.incrementMonth=c.incrementMonth,r.dateTick0=c.dateTick0,r.dfltRange=c.dfltRange,r.findExactDates=c.findExactDates,r.MIN_MS=c.MIN_MS,r.MAX_MS=c.MAX_MS;var h=x("./search");r.findBin=h.findBin,r.sorterAsc=h.sorterAsc,r.sorterDes=h.sorterDes,r.distinctVals=h.distinctVals,r.roundUp=h.roundUp,r.sort=h.sort,r.findIndexOfMin=h.findIndexOfMin,r.sortObjectKeys=x("./sort_object_keys");var m=x("./stats");r.aggNums=m.aggNums,r.len=m.len,r.mean=m.mean,r.median=m.median,r.midRange=m.midRange,r.variance=m.variance,r.stdev=m.stdev,r.interp=m.interp;var d=x("./matrix");r.init2dArray=d.init2dArray,r.transposeRagged=d.transposeRagged,r.dot=d.dot,r.translationMatrix=d.translationMatrix,r.rotationMatrix=d.rotationMatrix,r.rotationXYMatrix=d.rotationXYMatrix,r.apply3DTransform=d.apply3DTransform,r.apply2DTransform=d.apply2DTransform,r.apply2DTransform2=d.apply2DTransform2,r.convertCssMatrix=d.convertCssMatrix,r.inverseTransformMatrix=d.inverseTransformMatrix;var o=x("./angles");r.deg2rad=o.deg2rad,r.rad2deg=o.rad2deg,r.angleDelta=o.angleDelta,r.angleDist=o.angleDist,r.isFullCircle=o.isFullCircle,r.isAngleInsideSector=o.isAngleInsideSector,r.isPtInsideSector=o.isPtInsideSector,r.pathArc=o.pathArc,r.pathSector=o.pathSector,r.pathAnnulus=o.pathAnnulus;var b=x("./anchor_utils");r.isLeftAnchor=b.isLeftAnchor,r.isCenterAnchor=b.isCenterAnchor,r.isRightAnchor=b.isRightAnchor,r.isTopAnchor=b.isTopAnchor,r.isMiddleAnchor=b.isMiddleAnchor,r.isBottomAnchor=b.isBottomAnchor;var g=x("./geometry2d");r.segmentsIntersect=g.segmentsIntersect,r.segmentDistance=g.segmentDistance,r.getTextLocation=g.getTextLocation,r.clearLocationCache=g.clearLocationCache,r.getVisibleSegment=g.getVisibleSegment,r.findPointOnPath=g.findPointOnPath;var w=x("./extend");r.extendFlat=w.extendFlat,r.extendDeep=w.extendDeep,r.extendDeepAll=w.extendDeepAll,r.extendDeepNoArrays=w.extendDeepNoArrays;var _=x("./loggers");r.log=_.log,r.warn=_.warn,r.error=_.error;var A=x("./regex");r.counterRegex=A.counter;var T=x("./throttle");r.throttle=T.throttle,r.throttleDone=T.done,r.clearThrottle=T.clear;var E=x("./dom");function k(R){var N={};for(var V in R)for(var ee=R[V],j=0;j<ee.length;j++)N[ee[j]]=+V;return N}r.getGraphDiv=E.getGraphDiv,r.isPlotDiv=E.isPlotDiv,r.removeElement=E.removeElement,r.addStyleRule=E.addStyleRule,r.addRelatedStyleRule=E.addRelatedStyleRule,r.deleteRelatedStyleRule=E.deleteRelatedStyleRule,r.getFullTransformMatrix=E.getFullTransformMatrix,r.getElementTransformMatrix=E.getElementTransformMatrix,r.getElementAndAncestors=E.getElementAndAncestors,r.equalDomRects=E.equalDomRects,r.clearResponsive=x("./clear_responsive"),r.preserveDrawingBuffer=x("./preserve_drawing_buffer"),r.makeTraceGroups=x("./make_trace_groups"),r._=x("./localize"),r.notifier=x("./notifier"),r.filterUnique=x("./filter_unique"),r.filterVisible=x("./filter_visible"),r.pushUnique=x("./push_unique"),r.increment=x("./increment"),r.cleanNumber=x("./clean_number"),r.ensureNumber=function(R){return y(R)?(R=Number(R))>n||R<t?a:R:a},r.isIndex=function(R,N){return!(void 0!==N&&R>=N)&&y(R)&&R>=0&&R%1==0},r.noop=x("./noop"),r.identity=x("./identity"),r.repeat=function(R,N){for(var V=new Array(N),ee=0;ee<N;ee++)V[ee]=R;return V},r.swapAttrs=function(R,N,V,ee){V||(V="x"),ee||(ee="y");for(var j=0;j<N.length;j++){var J=N[j],$=r.nestedProperty(R,J.replace("?",V)),re=r.nestedProperty(R,J.replace("?",ee)),ne=$.get();$.set(re.get()),re.set(ne)}},r.raiseToTop=function(R){R.parentNode.appendChild(R)},r.cancelTransition=function(R){return R.transition().duration(0)},r.constrain=function(R,N,V){return N>V?Math.max(V,Math.min(N,R)):Math.max(N,Math.min(V,R))},r.bBoxIntersect=function(R,N,V){return R.left<=N.right+(V=V||0)&&N.left<=R.right+V&&R.top<=N.bottom+V&&N.top<=R.bottom+V},r.simpleMap=function(R,N,V,ee,j){for(var J=R.length,$=new Array(J),re=0;re<J;re++)$[re]=N(R[re],V,ee,j);return $},r.randstr=function R(N,V,ee,j){if(ee||(ee=16),void 0===V&&(V=24),V<=0)return"0";var J,$,re=Math.log(Math.pow(2,V))/Math.log(ee),ne="";for(J=2;re===1/0;J*=2)re=Math.log(Math.pow(2,V/J))/Math.log(ee)*J;var se=re-Math.floor(re);for(J=0;J<Math.floor(re);J++)ne=Math.floor(Math.random()*ee).toString(ee)+ne;se&&($=Math.pow(ee,se),ne=Math.floor(Math.random()*$).toString(ee)+ne);var ie=parseInt(ne,ee);return N&&N[ne]||ie!==1/0&&ie>=Math.pow(2,V)?j>10?(r.warn("randstr failed uniqueness"),ne):R(N,V,ee,(j||0)+1):ne},r.OptionControl=function(R,N){R||(R={}),N||(N="opt");var V={optionList:[],_newoption:function(ee){ee[N]=R,V[ee.name]=ee,V.optionList.push(ee)}};return V["_"+N]=R,V},r.smooth=function(R,N){if((N=Math.round(N)||0)<2)return R;var V,ee,j,J,$=R.length,re=2*$,ne=2*N-1,se=new Array(ne),ie=new Array($);for(V=0;V<ne;V++)se[V]=(1-Math.cos(Math.PI*(V+1)/N))/(2*N);for(V=0;V<$;V++){for(J=0,ee=0;ee<ne;ee++)(j=V+ee+1-N)<-$?j-=re*Math.round(j/re):j>=re&&(j-=re*Math.floor(j/re)),j<0?j=-1-j:j>=$&&(j=re-1-j),J+=R[j]*se[ee];ie[V]=J}return ie},r.syncOrAsync=function(R,N,V){var ee;function j(){return r.syncOrAsync(R,N,V)}for(;R.length;)if((ee=(0,R.splice(0,1)[0])(N))&&ee.then)return ee.then(j);return V&&V(N)},r.stripTrailingSlash=function(R){return"/"===R.substr(-1)?R.substr(0,R.length-1):R},r.noneOrAll=function(R,N,V){if(R){var ee,j=!1,J=!0;for(ee=0;ee<V.length;ee++)null!=R[V[ee]]?j=!0:J=!1;if(j&&!J)for(ee=0;ee<V.length;ee++)R[V[ee]]=N[V[ee]]}},r.mergeArray=function(R,N,V,ee){var j="function"==typeof ee;if(r.isArrayOrTypedArray(R))for(var J=Math.min(R.length,N.length),$=0;$<J;$++){var re=R[$];N[$][V]=j?ee(re):re}},r.mergeArrayCastPositive=function(R,N,V){return r.mergeArray(R,N,V,function(ee){var j=+ee;return isFinite(j)&&j>0?j:0})},r.fillArray=function(R,N,V,ee){if(ee=ee||r.identity,r.isArrayOrTypedArray(R))for(var j=0;j<N.length;j++)N[j][V]=ee(R[j])},r.castOption=function(R,N,V,ee){ee=ee||r.identity;var j=r.nestedProperty(R,V).get();return r.isArrayOrTypedArray(j)?Array.isArray(N)&&r.isArrayOrTypedArray(j[N[0]])?ee(j[N[0]][N[1]]):ee(j[N]):j},r.extractOption=function(R,N,V,ee){if(V in R)return R[V];var j=r.nestedProperty(N,ee).get();return Array.isArray(j)?void 0:j},r.tagSelected=function(R,N,V){var ee,j,J=N.selectedpoints,$=N._indexToPoints;$&&(ee=k($));for(var re=0;re<J.length;re++){var ne=J[re];if(r.isIndex(ne)||r.isArrayOrTypedArray(ne)&&r.isIndex(ne[0])&&r.isIndex(ne[1])){var se=ee?ee[ne]:ne,ie=V?V[se]:se;void 0!==(j=ie)&&j<R.length&&(R[ie].selected=1)}}},r.selIndices2selPoints=function(R){var N=R.selectedpoints,V=R._indexToPoints;if(V){for(var ee=k(V),j=[],J=0;J<N.length;J++){var $=N[J];if(r.isIndex($)){var re=ee[$];r.isIndex(re)&&j.push(re)}}return j}return N},r.getTargetArray=function(R,N){var V=N.target;if("string"==typeof V&&V){var ee=r.nestedProperty(R,V).get();return!!Array.isArray(ee)&&ee}return!!Array.isArray(V)&&V},r.minExtend=function(R,N){var V={};"object"!=typeof N&&(N={});var ee,j,J,$=Object.keys(R);for(ee=0;ee<$.length;ee++)J=R[j=$[ee]],"_"!==j.charAt(0)&&"function"!=typeof J&&(V[j]="module"===j?J:Array.isArray(J)?"colorscale"===j?J.slice():J.slice(0,3):r.isTypedArray(J)?J.subarray(0,3):J&&"object"==typeof J?r.minExtend(R[j],N[j]):J);for($=Object.keys(N),ee=0;ee<$.length;ee++)"object"==typeof(J=N[j=$[ee]])&&j in V&&"object"==typeof V[j]||(V[j]=J);return V},r.titleCase=function(R){return R.charAt(0).toUpperCase()+R.substr(1)},r.containsAny=function(R,N){for(var V=0;V<N.length;V++)if(-1!==R.indexOf(N[V]))return!0;return!1},r.isIE=function(){return void 0!==window.navigator.msSaveBlob};var O=/Version\/[\d\.]+.*Safari/;r.isSafari=function(){return O.test(window.navigator.userAgent)};var D=/iPad|iPhone|iPod/;r.isIOS=function(){return D.test(window.navigator.userAgent)};var S=/Firefox\/(\d+)\.\d+/;r.getFirefoxVersion=function(){var R=S.exec(window.navigator.userAgent);if(R&&2===R.length){var N=parseInt(R[1]);if(!isNaN(N))return N}return null},r.isD3Selection=function(R){return R instanceof p.selection},r.ensureSingle=function(R,N,V,ee){var j=R.select(N+(V?"."+V:""));if(j.size())return j;var J=R.append(N);return V&&J.classed(V,!0),ee&&J.call(ee),J},r.ensureSingleById=function(R,N,V,ee){var j=R.select(N+"#"+V);if(j.size())return j;var J=R.append(N).attr("id",V);return ee&&J.call(ee),J},r.objectFromPath=function(R,N){for(var V,ee=R.split("."),j=V={},J=0;J<ee.length;J++){var $=ee[J],re=null,ne=ee[J].match(/(.*)\[([0-9]+)\]/);ne?(re=ne[2],(V=V[$=ne[1]]=[])[re]=J===ee.length-1?N:{},V=V[re]):(V[$]=J===ee.length-1?N:{},V=V[$])}return j};var C=/^([^\[\.]+)\.(.+)?/,z=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;r.expandObjectPaths=function(R){var N,V,ee,j,J,$,re;if("object"==typeof R&&!Array.isArray(R))for(V in R)R.hasOwnProperty(V)&&((N=V.match(C))?(j=R[V],ee=N[1],delete R[V],R[ee]=r.extendDeepNoArrays(R[ee]||{},r.objectFromPath(V,r.expandObjectPaths(j))[ee])):(N=V.match(z))?(j=R[V],ee=N[1],J=parseInt(N[2]),delete R[V],R[ee]=R[ee]||[],"."===N[3]?(re=N[4],$=R[ee][J]=R[ee][J]||{},r.extendDeepNoArrays($,r.objectFromPath(re,r.expandObjectPaths(j)))):R[ee][J]=r.expandObjectPaths(j)):R[V]=r.expandObjectPaths(R[V]));return R},r.numSeparate=function(R,N,V){if(V||(V=!1),"string"!=typeof N||0===N.length)throw new Error("Separator string required for formatting!");"number"==typeof R&&(R=String(R));var ee=/(\d+)(\d{3})/,j=N.charAt(0),J=N.charAt(1),$=R.split("."),re=$[0],ne=$.length>1?j+$[1]:"";if(J&&($.length>1||re.length>4||V))for(;ee.test(re);)re=re.replace(ee,"$1"+J+"$2");return re+ne},r.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var B=/^\w*$/;r.templateString=function(R,N){var V={};return R.replace(r.TEMPLATE_STRING_REGEX,function(ee,j){var J;return B.test(j)?J=N[j]:(V[j]=V[j]||r.nestedProperty(N,j).get,J=V[j]()),r.isValidTextValue(J)?J:""})};var U={max:10,count:0,name:"hovertemplate"};r.hovertemplateString=function(){return Z.apply(U,arguments)};var G={max:10,count:0,name:"texttemplate"};r.texttemplateString=function(){return Z.apply(G,arguments)};var X=/^[:|\|]/;function Z(R,N,V){var ee=this,j=arguments;N||(N={});var J={};return R.replace(r.TEMPLATE_STRING_REGEX,function($,re,ne){var se,ie,ue,le="_xother"===re||"_yother"===re,de="_xother_"===re||"_yother_"===re,ve="xother_"===re||"yother_"===re,_e="xother"===re||"yother"===re||le||ve||de,be=re;if((le||de)&&(be=be.substring(1)),(ve||de)&&(be=be.substring(0,be.length-1)),_e){if(void 0===(se=N[be]))return""}else for(ue=3;ue<j.length;ue++)if(ie=j[ue]){if(ie.hasOwnProperty(be)){se=ie[be];break}if(B.test(be)||(se=r.nestedProperty(ie,be).get(),(se=J[be]||r.nestedProperty(ie,be).get())&&(J[be]=se)),void 0!==se)break}if(void 0===se&&ee)return ee.count<ee.max&&(r.warn("Variable '"+be+"' in "+ee.name+" could not be found!"),se=$),ee.count===ee.max&&r.warn("Too many "+ee.name+" warnings - additional warnings will be suppressed"),ee.count++,$;if(ne){var Te;if(":"===ne[0]&&(se=(Te=V?V.numberFormat:r.numberFormat)(ne.replace(X,""))(se)),"|"===ne[0]){Te=V?V.timeFormat:v;var he=r.dateTime2ms(se);se=r.formatDate(he,ne.replace(X,""),!1,Te)}}else{var me=be+"Label";N.hasOwnProperty(me)&&(se=N[me])}return _e&&(se="("+se+")",(le||de)&&(se=" "+se),(ve||de)&&(se+=" ")),se})}r.subplotSort=function(R,N){for(var V=Math.min(R.length,N.length)+1,ee=0,j=0,J=0;J<V;J++){var $=R.charCodeAt(J)||0,re=N.charCodeAt(J)||0,ne=$>=48&&$<=57,se=re>=48&&re<=57;if(ne&&(ee=10*ee+$-48),se&&(j=10*j+re-48),!ne||!se){if(ee!==j)return ee-j;if($!==re)return $-re}}return j-ee};var q=2e9;r.seedPseudoRandom=function(){q=2e9},r.pseudoRandom=function(){var R=q;return q=(69069*q+1)%4294967296,Math.abs(q-R)<429496729?r.pseudoRandom():q/4294967296},r.fillText=function(R,N,V){var ee=Array.isArray(V)?function($){V.push($)}:function($){V.text=$},j=r.extractOption(R,N,"htx","hovertext");if(r.isValidTextValue(j))return ee(j);var J=r.extractOption(R,N,"tx","text");return r.isValidTextValue(J)?ee(J):void 0},r.isValidTextValue=function(R){return R||0===R},r.formatPercent=function(R,N){N=N||0;for(var V=(Math.round(100*R*Math.pow(10,N))*Math.pow(.1,N)).toFixed(N)+"%",ee=0;ee<N;ee++)-1!==V.indexOf(".")&&(V=(V=V.replace("0%","%")).replace(".%","%"));return V},r.isHidden=function(R){var N=window.getComputedStyle(R).display;return!N||"none"===N},r.strTranslate=function(R,N){return R||N?"translate("+R+","+N+")":""},r.strRotate=function(R){return R?"rotate("+R+")":""},r.strScale=function(R){return 1!==R?"scale("+R+")":""},r.getTextTransform=function(R){var N=R.noCenter,V=R.textX,ee=R.textY,ne=R.rotate,se=R.scale;return se?se>1&&(se=1):se=0,r.strTranslate(R.targetX-se*(V+(R.anchorX||0)),R.targetY-se*(ee+(R.anchorY||0)))+r.strScale(se)+(ne?"rotate("+ne+(N?"":" "+V+" "+ee)+")":"")},r.ensureUniformFontSize=function(R,N){var V=r.extendFlat({},N);return V.size=Math.max(N.size,R._fullLayout.uniformtext.minsize||0),V},r.join2=function(R,N,V){var ee=R.length;return ee>1?R.slice(0,-1).join(N)+V+R[ee-1]:R.join(N)},r.bigFont=function(R){return Math.round(1.2*R)};var W=r.getFirefoxVersion(),te=null!==W&&W<86;r.getPositionFromD3Event=function(){return te?[p.event.layerX,p.event.layerY]:[p.event.offsetX,p.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(x,Q,K){"use strict";Q.exports=function(p){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(p):"[object Object]"===Object.prototype.toString.call(p)&&Object.getPrototypeOf(p).hasOwnProperty("hasOwnProperty")}},{}],505:[function(x,Q,K){"use strict";var p=x("./nested_property"),v=/^\w*$/;Q.exports=function(u,y,e,n){var t,a,r;e=e||"name",n=n||"value";var f={};y&&y.length?(r=p(u,y),a=r.get()):a=u,y=y||"";var s={};if(a)for(t=0;t<a.length;t++)s[a[t][e]]=t;var i=v.test(n),l={set:function(c,h){var m=null===h?4:0;if(!a){if(!r||4===m)return;r.set(a=[])}var d=s[c];if(void 0===d){if(4===m)return;m|=3,s[c]=d=a.length}else h!==(i?a[d][n]:p(a[d],n).get())&&(m|=2);var o=a[d]=a[d]||{};return o[e]=c,i?o[n]=h:p(o,n).set(h),null!==h&&(m&=-5),f[d]=f[d]|m,l},get:function(c){if(a){var h=s[c];return void 0===h?void 0:i?a[h][n]:p(a[h],n).get()}},rename:function(c,h){var m=s[c];return void 0===m||(f[m]=1|f[m],s[h]=m,delete s[c],a[m][e]=h),l},remove:function(c){var h=s[c];if(void 0===h)return l;var m=a[h];if(Object.keys(m).length>2)return f[h]=2|f[h],l.set(c,null);if(i){for(t=h;t<a.length;t++)f[t]=3|f[t];for(t=h;t<a.length;t++)s[a[t][e]]--;a.splice(h,1),delete s[c]}else p(m,n).set(null),f[h]=6|f[h];return l},constructUpdate:function(){for(var c,h,m={},d=Object.keys(f),o=0;o<d.length;o++)c=y+"["+(h=d[o])+"]",a[h]?(1&f[h]&&(m[c+"."+e]=a[h][e]),2&f[h]&&(m[c+"."+n]=i?4&f[h]?null:a[h][n]:4&f[h]?null:p(a[h],n).get())):m[c]=null;return m}};return l}},{"./nested_property":511}],506:[function(x,Q,K){"use strict";var p=x("../registry");Q.exports=function(v,u){for(var y=v._context.locale,e=0;e<2;e++){for(var n=v._context.locales,t=0;t<2;t++){var a=(n[y]||{}).dictionary;if(a){var r=a[u];if(r)return r}n=p.localeRegistry}var f=y.split("-")[0];if(f===y)break;y=f}return u}},{"../registry":638}],507:[function(x,Q,K){"use strict";var p=x("../plot_api/plot_config").dfltConfig,v=x("./notifier"),u=Q.exports={};u.log=function(){var y;if(p.logging>1){var e=["LOG:"];for(y=0;y<arguments.length;y++)e.push(arguments[y]);console.trace.apply(console,e)}if(p.notifyOnLogging>1){var n=[];for(y=0;y<arguments.length;y++)n.push(arguments[y]);v(n.join("<br>"),"long")}},u.warn=function(){var y;if(p.logging>0){var e=["WARN:"];for(y=0;y<arguments.length;y++)e.push(arguments[y]);console.trace.apply(console,e)}if(p.notifyOnLogging>0){var n=[];for(y=0;y<arguments.length;y++)n.push(arguments[y]);v(n.join("<br>"),"stick")}},u.error=function(){var y;if(p.logging>0){var e=["ERROR:"];for(y=0;y<arguments.length;y++)e.push(arguments[y]);console.error.apply(console,e)}if(p.notifyOnLogging>0){var n=[];for(y=0;y<arguments.length;y++)n.push(arguments[y]);v(n.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(x,Q,K){"use strict";var p=x("@plotly/d3");Q.exports=function(v,u,y){var e=v.selectAll("g."+y.replace(/\s/g,".")).data(u,function(t){return t[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",y),e.order();var n=v.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(t){t[0][n]=p.select(this)}),e}},{"@plotly/d3":58}],509:[function(x,Q,K){"use strict";var p=x("gl-mat4");K.init2dArray=function(v,u){for(var y=new Array(v),e=0;e<v;e++)y[e]=new Array(u);return y},K.transposeRagged=function(v){var u,y,e=0,n=v.length;for(u=0;u<n;u++)e=Math.max(e,v[u].length);var t=new Array(e);for(u=0;u<e;u++)for(t[u]=new Array(n),y=0;y<n;y++)t[u][y]=v[y][u];return t},K.dot=function(v,u){if(!v.length||!u.length||v.length!==u.length)return null;var y,e,n=v.length;if(v[0].length)for(y=new Array(n),e=0;e<n;e++)y[e]=K.dot(v[e],u);else if(u[0].length){var t=K.transposeRagged(u);for(y=new Array(t.length),e=0;e<t.length;e++)y[e]=K.dot(v,t[e])}else for(y=0,e=0;e<n;e++)y+=v[e]*u[e];return y},K.translationMatrix=function(v,u){return[[1,0,v],[0,1,u],[0,0,1]]},K.rotationMatrix=function(v){var u=v*Math.PI/180;return[[Math.cos(u),-Math.sin(u),0],[Math.sin(u),Math.cos(u),0],[0,0,1]]},K.rotationXYMatrix=function(v,u,y){return K.dot(K.dot(K.translationMatrix(u,y),K.rotationMatrix(v)),K.translationMatrix(-u,-y))},K.apply3DTransform=function(v){return function(){var u=arguments,y=1===arguments.length?u[0]:[u[0],u[1],u[2]||0];return K.dot(v,[y[0],y[1],y[2],1]).slice(0,3)}},K.apply2DTransform=function(v){return function(){var u=arguments;3===u.length&&(u=u[0]);var y=1===arguments.length?u[0]:[u[0],u[1]];return K.dot(v,[y[0],y[1],1]).slice(0,2)}},K.apply2DTransform2=function(v){var u=K.apply2DTransform(v);return function(y){return u(y.slice(0,2)).concat(u(y.slice(2,4)))}},K.convertCssMatrix=function(v){if(v){var u=v.length;if(16===u)return v;if(6===u)return[v[0],v[1],0,0,v[2],v[3],0,0,0,0,1,0,v[4],v[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},K.inverseTransformMatrix=function(v){var u=[];return p.invert(u,v),[[u[0],u[1],u[2],u[3]],[u[4],u[5],u[6],u[7]],[u[8],u[9],u[10],u[11]],[u[12],u[13],u[14],u[15]]]}},{"gl-mat4":210}],510:[function(x,Q,K){"use strict";Q.exports={mod:function(p,v){var u=p%v;return u<0?u+v:u},modHalf:function(p,v){return Math.abs(p)>v/2?p-Math.round(p/v)*v:p}}},{}],511:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("./array").isArrayOrTypedArray;function u(f,s){return function(){var i,l,c,h,m,d=f;for(h=0;h<s.length-1;h++){if(-1===(i=s[h])){for(l=!0,c=[],m=0;m<d.length;m++)c[m]=u(d[m],s.slice(h+1))(),c[m]!==c[0]&&(l=!1);return l?c[0]:c}if("number"==typeof i&&!v(d)||"object"!=typeof(d=d[i])||null===d)return}if("object"==typeof d&&null!==d&&null!==(c=d[s[h]]))return c}}Q.exports=function(f,s){if(p(s))s=String(s);else if("string"!=typeof s||"[-1]"===s.substr(s.length-4))throw"bad property string";for(var i,l,c,h=0,m=s.split(".");h<m.length;){if(i=String(m[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(i[1])m[h]=i[1];else{if(0!==h)throw"bad property string";m.splice(0,1)}for(l=i[2].substr(1,i[2].length-2).split("]["),c=0;c<l.length;c++)h++,m.splice(h,0,Number(l[c]))}h++}return"object"!=typeof f?{set:function(){throw"bad container"},get:function(){},astr:s,parts:m,obj:f}:{set:n(f,m,s),get:u(f,m),astr:s,parts:m,obj:f}};var y=/(^|\.)args\[/;function e(f,s){return void 0===f||null===f&&!s.match(y)}function n(f,s,i){return function(l){var c,h,m=f,d="",o=[[f,d]],b=e(l,i);for(h=0;h<s.length-1;h++){if("number"==typeof(c=s[h])&&!v(m))throw"array index but container is not an array";if(-1===c){if(b=!a(m,s.slice(h+1),l,i))break;return}if(!r(m,c,s[h+1],b))break;if("object"!=typeof(m=m[c])||null===m)throw"container is not an object";d=t(d,c),o.push([m,d])}if(b){if(h===s.length-1&&(delete m[s[h]],Array.isArray(m)&&+s[h]==m.length-1))for(;m.length&&void 0===m[m.length-1];)m.pop()}else m[s[h]]=l}}function t(f,s){var i=s;return p(s)?i="["+s+"]":f&&(i="."+s),f+i}function a(f,s,i,l){var c,h=v(i),m=!0,d=i,o=l.replace("-1",0),b=!h&&e(i,o),g=s[0];for(c=0;c<f.length;c++)o=l.replace("-1",c),h&&(b=e(d=i[c%i.length],o)),b&&(m=!1),r(f,c,g,b)&&n(f[c],s,l.replace("-1",c))(d);return m}function r(f,s,i,l){if(void 0===f[s]){if(l)return!1;f[s]="number"==typeof i?[]:{}}return!0}},{"./array":485,"fast-isnumeric":190}],512:[function(x,Q,K){"use strict";Q.exports=function(){}},{}],513:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("fast-isnumeric"),u=[];Q.exports=function(y,e){if(-1===u.indexOf(y)){u.push(y);var n=1e3;v(e)?n=e:"long"===e&&(n=3e3);var t=p.select("body").selectAll(".plotly-notifier").data([0]);t.enter().append("div").classed("plotly-notifier",!0),t.selectAll(".notifier-note").data(u).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(r){var f=p.select(this);f.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){f.transition().call(a)});for(var s=f.append("p"),i=r.split(/<br\s*\/?>/g),l=0;l<i.length;l++)l&&s.append("br"),s.append("span").text(i[l]);"stick"===e?f.transition().duration(350).style("opacity",1):f.transition().duration(700).style("opacity",1).transition().delay(n).call(a)})}function a(r){r.duration(700).style("opacity",0).each("end",function(f){var s=u.indexOf(f);-1!==s&&u.splice(s,1),p.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(x,Q,K){"use strict";var p=x("./setcursor"),v="data-savedcursor";Q.exports=function(u,y){var e=u.attr(v);if(y){if(!e){for(var n=(u.attr("class")||"").split(" "),t=0;t<n.length;t++){var a=n[t];0===a.indexOf("cursor-")&&u.attr(v,a.substr(7)).classed(a,!1)}u.attr(v)||u.attr(v,"!!")}p(u,y)}else e&&(u.attr(v,null),"!!"===e?p(u):p(u,e))}},{"./setcursor":524}],515:[function(x,Q,K){"use strict";var p=x("./matrix").dot,v=x("../constants/numerical").BADNUM,u=Q.exports={};u.tester=function(y){var e,n=y.slice(),t=n[0][0],a=t,r=n[0][1],f=r;for(n.push(n[0]),e=1;e<n.length;e++)t=Math.min(t,n[e][0]),a=Math.max(a,n[e][0]),r=Math.min(r,n[e][1]),f=Math.max(f,n[e][1]);var s,i=!1;5===n.length&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(i=!0,s=function(h){return h[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(i=!0,s=function(h){return h[1]===n[0][1]}));var l=!0,c=n[0];for(e=1;e<n.length;e++)if(c[0]!==n[e][0]||c[1]!==n[e][1]){l=!1;break}return{xmin:t,xmax:a,ymin:r,ymax:f,pts:n,contains:i?function(h,m){var d=h[0],o=h[1];return!(d===v||d<t||d>a||o===v||o<r||o>f||m&&s(h))}:function(h,m){var d=h[0],o=h[1];if(d===v||d<t||d>a||o===v||o<r||o>f)return!1;var b,g,w,_,A,T=n.length,E=n[0][0],k=n[0][1],O=0;for(b=1;b<T;b++)if(g=E,w=k,E=n[b][0],k=n[b][1],!(d<(_=Math.min(g,E))||d>Math.max(g,E)||o>Math.max(w,k)))if(o<Math.min(w,k))d!==_&&O++;else{if(o===(A=E===g?o:w+(d-g)*(k-w)/(E-g)))return 1!==b||!m;o<=A&&d!==_&&O++}return O%2==1},isRect:i,degenerate:l}},u.isSegmentBent=function(y,e,n,t){var a,r,f,s=y[e],i=[y[n][0]-s[0],y[n][1]-s[1]],l=p(i,i),c=Math.sqrt(l),h=[-i[1]/c,i[0]/c];for(a=e+1;a<n;a++)if((f=p(r=[y[a][0]-s[0],y[a][1]-s[1]],i))<0||f>l||Math.abs(p(r,h))>t)return!0;return!1},u.filter=function(y,e){var n=[y[0]],t=0,a=0;function r(f){y.push(f);var s=n.length,i=t;n.splice(a+1);for(var l=i+1;l<y.length;l++)(l===y.length-1||u.isSegmentBent(y,i,l+1,e))&&(n.push(y[l]),n.length<s-2&&(t=l,a=n.length-1),i=l)}return y.length>1&&r(y.pop()),{addPt:r,raw:y,filtered:n}}},{"../constants/numerical":479,"./matrix":509}],516:[function(x,Q,K){(function(p){(function(){"use strict";var v=x("./show_no_webgl_msg"),u=x("regl");Q.exports=function(y,e){var n=y._fullLayout,t=!0;return n._glcanvas.each(function(a){if(!a.regl&&(!a.pick||n._has("parcoords"))){try{a.regl=u({canvas:this,attributes:{antialias:!a.pick,preserveDrawingBuffer:!0},pixelRatio:y._context.plotGlPixelRatio||p.devicePixelRatio,extensions:e||[]})}catch(r){t=!1}a.regl||(t=!1),t&&this.addEventListener("webglcontextlost",function(r){y&&y.emit&&y.emit("plotly_webglcontextlost",{event:r,layer:a.key})},!1)}}),t||v({container:n._glcontainer.node()}),t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("is-mobile");Q.exports=function(u){var y,s;if("string"!=typeof(y=u&&u.hasOwnProperty("userAgent")?u.userAgent:("undefined"!=typeof navigator&&(s=navigator.userAgent),s&&s.headers&&"string"==typeof s.headers["user-agent"]&&(s=s.headers["user-agent"]),s)))return!0;var e=v({ua:{headers:{"user-agent":y}},tablet:!0,featureDetect:!1});if(!e)for(var n=y.split(" "),t=1;t<n.length;t++)if(-1!==n[t].indexOf("Safari"))for(var a=t-1;a>-1;a--){var r=n[a];if("Version/"===r.substr(0,8)){var f=r.substr(8).split(".")[0];if(p(f)&&(f=+f),f>=13)return!0}}return e}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(x,Q,K){"use strict";Q.exports=function(p,v){if(v instanceof RegExp){for(var u=v.toString(),y=0;y<p.length;y++)if(p[y]instanceof RegExp&&p[y].toString()===u)return p;p.push(v)}else!v&&0!==v||-1!==p.indexOf(v)||p.push(v);return p}},{}],519:[function(x,Q,K){"use strict";var p=x("../lib"),v=x("../plot_api/plot_config").dfltConfig,u={add:function(y,e,n,t,a){var r,f;y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},f=y.undoQueue.index,y.autoplay?y.undoQueue.inSequence||(y.autoplay=!1):(!y.undoQueue.sequence||y.undoQueue.beginSequence?(y.undoQueue.queue.splice(f,y.undoQueue.queue.length-f,r={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),y.undoQueue.index+=1):r=y.undoQueue.queue[f-1],y.undoQueue.beginSequence=!1,r&&(r.undo.calls.unshift(e),r.undo.args.unshift(n),r.redo.calls.push(t),r.redo.args.push(a)),y.undoQueue.queue.length>v.queueLength&&(y.undoQueue.queue.shift(),y.undoQueue.index--))},startSequence:function(y){y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},y.undoQueue.sequence=!0,y.undoQueue.beginSequence=!0},stopSequence:function(y){y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},y.undoQueue.sequence=!1,y.undoQueue.beginSequence=!1},undo:function(y){var e,n;if(!(void 0===y.undoQueue||isNaN(y.undoQueue.index)||y.undoQueue.index<=0)){for(y.undoQueue.index--,e=y.undoQueue.queue[y.undoQueue.index],y.undoQueue.inSequence=!0,n=0;n<e.undo.calls.length;n++)u.plotDo(y,e.undo.calls[n],e.undo.args[n]);y.undoQueue.inSequence=!1,y.autoplay=!1}},redo:function(y){var e,n;if(!(void 0===y.undoQueue||isNaN(y.undoQueue.index)||y.undoQueue.index>=y.undoQueue.queue.length)){for(e=y.undoQueue.queue[y.undoQueue.index],y.undoQueue.inSequence=!0,n=0;n<e.redo.calls.length;n++)u.plotDo(y,e.redo.calls[n],e.redo.args[n]);y.undoQueue.inSequence=!1,y.autoplay=!1,y.undoQueue.index++}},plotDo:function(y,e,n){y.autoplay=!0,n=function(t,a){for(var r,f=[],s=0;s<a.length;s++)f[s]=(r=a[s])===t?r:"object"==typeof r?Array.isArray(r)?p.extendDeep([],r):p.extendDeepAll({},r):r;return f}(y,n),e.apply(null,n)}};Q.exports=u},{"../lib":503,"../plot_api/plot_config":541}],520:[function(x,Q,K){"use strict";K.counter=function(p,v,u,y){var e=(v||"")+(u?"":"$"),n=!1===y?"":"^";return"xy"===p?new RegExp(n+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(n+p+"([2-9]|[1-9][0-9]+)?"+e)}},{}],521:[function(x,Q,K){"use strict";var p=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,v=/^[^\.\[\]]+$/;Q.exports=function(u,y){for(;y;){var e=u.match(p);if(e)u=e[1];else{if(!u.match(v))throw new Error("bad relativeAttr call:"+[u,y]);u=""}if("^"!==y.charAt(0))break;y=y.slice(1)}return u&&"["!==y.charAt(0)?u+"."+y:u+y}},{}],522:[function(x,Q,K){"use strict";var p=x("./array").isArrayOrTypedArray,v=x("./is_plain_object");Q.exports=function u(y,e){for(var n in e){var t=e[n],a=y[n];if(a!==t)if("_"===n.charAt(0)||"function"==typeof t){if(n in y)continue;y[n]=t}else if(p(t)&&p(a)&&v(t[0])){if("customdata"===n||"ids"===n)continue;for(var r=Math.min(t.length,a.length),f=0;f<r;f++)a[f]!==t[f]&&v(t[f])&&v(a[f])&&u(a[f],t[f])}else v(t)&&v(a)&&(u(a,t),Object.keys(a).length||delete y[n])}}},{"./array":485,"./is_plain_object":504}],523:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("./loggers"),u=x("./identity"),y=x("../constants/numerical").BADNUM;function e(r,f){return r<f}function n(r,f){return r<=f}function t(r,f){return r>f}function a(r,f){return r>=f}K.findBin=function(r,f,s){if(p(f.start))return s?Math.ceil((r-f.start)/f.size-1e-9)-1:Math.floor((r-f.start)/f.size+1e-9);var i,l,c=0,h=f.length,m=0,d=h>1?(f[h-1]-f[0])/(h-1):1;for(l=d>=0?s?e:n:s?a:t,r+=1e-9*d*(s?-1:1)*(d>=0?1:-1);c<h&&m++<100;)l(f[i=Math.floor((c+h)/2)],r)?c=i+1:h=i;return m>90&&v.log("Long binary search..."),c-1},K.sorterAsc=function(r,f){return r-f},K.sorterDes=function(r,f){return f-r},K.distinctVals=function(r){var f,s=r.slice();for(s.sort(K.sorterAsc),f=s.length-1;f>-1&&s[f]===y;f--);for(var i,l=s[f]-s[0]||1,c=l/(f||1)/1e4,h=[],m=0;m<=f;m++){var d=s[m],o=d-i;void 0===i?(h.push(d),i=d):o>c&&(l=Math.min(l,o),h.push(d),i=d)}return{vals:h,minDiff:l}},K.roundUp=function(r,f,s){for(var i,l=0,c=f.length-1,h=0,m=s?0:1,d=s?1:0,o=s?Math.ceil:Math.floor;l<c&&h++<100;)f[i=o((l+c)/2)]<=r?l=i+m:c=i-d;return f[l]},K.sort=function(r,f){for(var s=0,i=0,l=1;l<r.length;l++){var c=f(r[l],r[l-1]);if(c<0?s=1:c>0&&(i=1),s&&i)return r.sort(f)}return i?r:r.reverse()},K.findIndexOfMin=function(r,f){f=f||u;for(var s,i=1/0,l=0;l<r.length;l++){var c=f(r[l]);c<i&&(i=c,s=l)}return s}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(x,Q,K){"use strict";Q.exports=function(p,v){(p.attr("class")||"").split(" ").forEach(function(u){0===u.indexOf("cursor-")&&p.classed(u,!1)}),v&&p.classed("cursor-"+v,!0)}},{}],525:[function(x,Q,K){"use strict";var p=x("../components/color"),v=function(){};Q.exports=function(u){for(var y in u)"function"==typeof u[y]&&(u[y]=v);u.destroy=function(){u.container.parentNode.removeChild(u.container)};var e=document.createElement("div");e.className="no-webgl",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=p.defaults[0],e.style.position="absolute",e.style.left=e.style.top="0px",e.style.width=e.style.height="100%",e.style["background-color"]=p.lightLine,e.style["z-index"]=30;var n=document.createElement("p");return n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",e.appendChild(n),u.container.appendChild(e),u.container.style.background="#FFFFFF",u.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(x,Q,K){"use strict";Q.exports=function(p){return Object.keys(p).sort()}},{}],527:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("./array").isArrayOrTypedArray;K.aggNums=function(u,y,e,n){var t,a;if((!n||n>e.length)&&(n=e.length),p(y)||(y=!1),v(e[0])){for(a=new Array(n),t=0;t<n;t++)a[t]=K.aggNums(u,y,e[t]);e=a}for(t=0;t<n;t++)p(y)?p(e[t])&&(y=u(+y,+e[t])):y=e[t];return y},K.len=function(u){return K.aggNums(function(y){return y+1},0,u)},K.mean=function(u,y){return y||(y=K.len(u)),K.aggNums(function(e,n){return e+n},0,u)/y},K.midRange=function(u){if(void 0!==u&&0!==u.length)return(K.aggNums(Math.max,null,u)+K.aggNums(Math.min,null,u))/2},K.variance=function(u,y,e){return y||(y=K.len(u)),p(e)||(e=K.mean(u,y)),K.aggNums(function(n,t){return n+Math.pow(t-e,2)},0,u)/y},K.stdev=function(u,y,e){return Math.sqrt(K.variance(u,y,e))},K.median=function(u){var y=u.slice().sort();return K.interp(y,.5)},K.interp=function(u,y){if(!p(y))throw"n should be a finite number";if((y=y*u.length-.5)<0)return u[0];if(y>u.length-1)return u[u.length-1];var e=y%1;return e*u[Math.ceil(y)]+(1-e)*u[Math.floor(y)]}},{"./array":485,"fast-isnumeric":190}],528:[function(x,Q,K){"use strict";var p=x("color-normalize");Q.exports=function(v){return v?p(v):[0,0,0,1]}},{"color-normalize":89}],529:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../lib"),u=v.strTranslate,y=x("../constants/xmlns_namespaces"),e=x("../constants/alignment").LINE_SPACING,n=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;K.convertToTspans=function(D,S,C){var z=D.text(),B=!D.attr("data-notex")&&"undefined"!=typeof MathJax&&z.match(n),U=p.select(D.node().parentNode);if(!U.empty()){var G=D.attr("class")?D.attr("class").split(" ")[0]:"text";return U.selectAll("svg."+(G+="-math")).remove(),U.selectAll("g."+G+"-group").remove(),D.style("display",null).attr({"data-unformatted":z,"data-math":"N"}),B?(S&&S._promises||[]).push(new Promise(function(Z){D.style("display","none");var te,R,N,V,ee,j,J,q=parseInt(D.node().style.fontSize,10);te=B[2],R={fontSize:q},N=function(te,R,N){U.selectAll("svg."+G).remove(),U.selectAll("g."+G+"-group").remove();var V=te&&te.select("svg");if(!V||!V.node())return X(),void Z();var ee=U.append("g").classed(G+"-group",!0).attr({"pointer-events":"none","data-unformatted":z,"data-math":"Y"});ee.node().appendChild(V.node()),R&&R.node()&&V.node().insertBefore(R.node().cloneNode(!0),V.node().firstChild);var j=N.width,J=N.height;V.attr({class:G,height:J,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var $=D.node().style.fill||"black",re=V.select("g");re.attr({fill:$,stroke:$});var ne=re.node().getBoundingClientRect(),se=ne.width,ie=ne.height;(se>j||ie>J)&&(V.style("overflow","hidden"),se=(ne=V.node().getBoundingClientRect()).width,ie=ne.height);var ue=+D.attr("x"),le=+D.attr("y"),de=-(q||D.node().getBoundingClientRect().height)/4;if("y"===G[0])ee.attr({transform:"rotate("+[-90,ue,le]+")"+u(-se/2,de-ie/2)});else if("l"===G[0])le=de-ie/2;else if("a"===G[0]&&0!==G.indexOf("atitle"))ue=0,le=de;else{var ve=D.attr("text-anchor");ue-=se*("middle"===ve?.5:"end"===ve?1:0),le=le+de-ie/2}V.attr({x:ue,y:le}),C&&C.call(D,ee),Z(ee)},MathJax.Hub.Queue(function(){return ee=v.extendDeepAll({},MathJax.Hub.config),j=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(V=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var $="math-output-"+v.randstr({},64);return J=p.select("body").append("div").attr({id:$}).style({visibility:"hidden",position:"absolute"}).style({"font-size":R.fontSize+"px"}).text(te.replace(t,"\\lt ").replace(a,"\\gt ")),MathJax.Hub.Typeset(J.node())},function(){var $=p.select("body").select("#MathJax_SVG_glyphs");if(J.select(".MathJax_SVG").empty()||!J.select("svg").node())v.log("There was an error in the tex syntax.",te),N();else{var re=J.select("svg").node().getBoundingClientRect();N(J.select(".MathJax_SVG"),$,re)}if(J.remove(),"SVG"!==V)return MathJax.Hub.setRenderer(V)},function(){return void 0!==j&&(MathJax.Hub.processSectionDelay=j),MathJax.Hub.Config(ee)})})):X(),D}function X(){U.empty()||(G=D.attr("class")+"-math",U.select("svg."+G).remove()),D.text("").style("white-space","pre"),function(Z,q){q=q.replace(l," ");var W,te=!1,R=[],N=-1;function V(){N++;var Te=document.createElementNS(y.svg,"tspan");p.select(Te).attr({class:"line",dy:N*e+"em"}),Z.appendChild(Te),W=Te;var he=R;if(R=[{node:Te}],he.length>1)for(var me=1;me<he.length;me++)ee(he[me])}function ee(Te){var he,me=Te.type,Ae={};if("a"===me){he="a";var we=Te.target,Se=Te.href,Pe=Te.popup;Se&&(Ae={"xlink:xlink:show":"_blank"===we||"_"!==we.charAt(0)?"new":"replace",target:we,"xlink:xlink:href":Se},Pe&&(Ae.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Pe+'");return false;'))}else he="tspan";Te.style&&(Ae.style=Te.style);var ze=document.createElementNS(y.svg,he);if("sup"===me||"sub"===me){j(W,"\u200b"),W.appendChild(ze);var He=document.createElementNS(y.svg,"tspan");j(He,"\u200b"),p.select(He).attr("dy",s[me]),Ae.dy=f[me],W.appendChild(ze),W.appendChild(He)}else W.appendChild(ze);p.select(ze).attr(Ae),W=Te.node=ze,R.push(Te)}function j(Te,he){Te.appendChild(document.createTextNode(he))}function J(Te){if(1!==R.length){var he=R.pop();Te!==he.type&&v.log("Start tag <"+he.type+"> doesnt match end tag <"+Te+">. Pretending it did match.",q),W=R[R.length-1].node}else v.log("Ignoring unexpected end tag </"+Te+">.",q)}m.test(q)?V():(W=Z,R=[{node:Z}]);for(var $=q.split(c),re=0;re<$.length;re++){var ne=$[re],se=ne.match(h),ie=se&&se[2].toLowerCase(),ue=r[ie];if("br"===ie)V();else if(void 0===ue)j(W,E(ne));else if(se[1])J(ie);else{var le=se[4],de={type:ie},ve=w(le,d);if(ve?(ve=ve.replace(_,"$1 fill:"),ue&&(ve+=";"+ue)):ue&&(ve=ue),ve&&(de.style=ve),"a"===ie){te=!0;var _e=w(le,o);if(_e){var be=k(_e);be&&(de.href=be,de.target=w(le,b)||"_blank",de.popup=w(le,g))}}ee(de)}}return te}(D.node(),z)&&D.style("pointer-events","all"),K.positionText(D),C&&C.call(D)}};var t=/(<|&lt;|&#60;)/g,a=/(>|&gt;|&#62;)/g,r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},f={sub:"0.3em",sup:"-0.6em"},s={sub:"-0.21em",sup:"0.42em"},i=["http:","https:","mailto:","",void 0,":"],l=K.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,h=/<(\/?)([^ >]*)(\s+(.*))?>/i,m=/<br(\s+.*)?>/i;K.BR_TAG_ALL=/<br(\s+.*)?>/gi;var d=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,o=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,b=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,g=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function w(D,S){if(!D)return null;var C=D.match(S),z=C&&(C[3]||C[4]);return z&&E(z)}var _=/(^|;)\s*color:/;K.plainText=function(D,S){for(var C=void 0!==(S=S||{}).len&&-1!==S.len?S.len:1/0,z=void 0!==S.allowedTags?S.allowedTags:["br"],B="...".length,U=D.split(c),G=[],X="",Z=0,q=0;q<U.length;q++){var W=U[q],te=W.match(h),R=te&&te[2].toLowerCase();if(R)-1!==z.indexOf(R)&&(G.push(W),X=R);else{var N=W.length;if(Z+N<C)G.push(W),Z+=N;else if(Z<C){var V=C-Z;X&&("br"!==X||V<=B||N<=B)&&G.pop(),G.push(C>B?W.substr(0,V-B)+"...":W.substr(0,V));break}X=""}}return G.join("")};var A={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},T=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(D){return D.replace(T,function(S,C){return("#"===C.charAt(0)?function(z){if(!(z>1114111)){var B=String.fromCodePoint;if(B)return B(z);var U=String.fromCharCode;return z<=65535?U(z):U(55232+(z>>10),z%1024+56320)}}("x"===C.charAt(1)?parseInt(C.substr(2),16):parseInt(C.substr(1),10)):A[C])||S})}function k(D){var S=encodeURI(decodeURI(D)),C=document.createElement("a"),z=document.createElement("a");C.href=D,z.href=S;var U=z.protocol;return-1!==i.indexOf(C.protocol)&&-1!==i.indexOf(U)?S:""}function O(D,S,C){var z,B,U,G=C.horizontalAlign,X=C.verticalAlign||"top",Z=D.node().getBoundingClientRect(),q=S.node().getBoundingClientRect();return B="bottom"===X?function(){return Z.bottom-z.height}:"middle"===X?function(){return Z.top+(Z.height-z.height)/2}:function(){return Z.top},U="right"===G?function(){return Z.right-z.width}:"center"===G?function(){return Z.left+(Z.width-z.width)/2}:function(){return Z.left},function(){z=this.node().getBoundingClientRect();var W=U()-q.left,te=B()-q.top,R=C.gd||{};if(C.gd){R._fullLayout._calcInverseTransform(R);var N=v.apply3DTransform(R._fullLayout._invTransform)(W,te);W=N[0],te=N[1]}return this.style({top:te+"px",left:W+"px","z-index":1e3}),this}}K.convertEntities=E,K.sanitizeHTML=function(D){D=D.replace(l," ");for(var S=document.createElement("p"),C=S,z=[],B=D.split(c),U=0;U<B.length;U++){var G=B[U],X=G.match(h),Z=X&&X[2].toLowerCase();if(Z in r)if(X[1])z.length&&(C=z.pop());else{var q=X[4],W=w(q,d),te=W?{style:W}:{};if("a"===Z){var R=w(q,o);if(R){var N=k(R);if(N){te.href=N;var V=w(q,b);V&&(te.target=V)}}}var ee=document.createElement(Z);C.appendChild(ee),p.select(ee).attr(te),C=ee,z.push(ee)}else C.appendChild(document.createTextNode(E(G)))}return S.innerHTML},K.lineCount=function(D){return D.selectAll("tspan.line").size()||1},K.positionText=function(D,S,C){return D.each(function(){var z=p.select(this);function B(X,Z){return void 0===Z?null===(Z=z.attr(X))&&(z.attr(X,0),Z=0):z.attr(X,Z),Z}var U=B("x",S),G=B("y",C);"text"===this.nodeName&&z.selectAll("tspan.line").attr({x:U,y:G})})},K.makeTextShadow=function(D){var S="1px ",C="1px ",z="1px ";return S+C+z+D+", -"+S+"-"+C+z+D+", "+S+"-"+C+z+D+", -"+S+C+z+D},K.makeEditable=function(D,S){var C=S.gd,z=S.delegate,B=p.dispatch("edit","input","cancel"),U=z||D;if(D.style({"pointer-events":z?"none":"all"}),1!==D.size())throw new Error("boo");function G(){var W,te,R,N,V;W=p.select(C).select(".svg-container"),te=W.append("div"),R=D.node().style,N=parseFloat(R.fontSize||12),void 0===(V=S.text)&&(V=D.attr("data-unformatted")),te.classed("plugin-editable editable",!0).style({position:"absolute","font-family":R.fontFamily||"Arial","font-size":N,color:S.fill||R.fill||"black",opacity:1,"background-color":S.background||"transparent",outline:"#ffffff33 1px solid",margin:[-N/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(V).call(O(D,W,S)).on("blur",function(){C._editing=!1,D.text(this.textContent).style({opacity:1});var ee,j=p.select(this).attr("class");(ee=j?"."+j.split(" ")[0]+"-math-group":"[class*=-math-group]")&&p.select(D.node().parentNode).select(ee).style({opacity:0});var J=this.textContent;p.select(this).transition().duration(0).remove(),p.select(document).on("mouseup",null),B.edit.call(D,J)}).on("focus",function(){var ee=this;C._editing=!0,p.select(document).on("mouseup",function(){if(p.event.target===ee)return!1;document.activeElement===te.node()&&te.node().blur()})}).on("keyup",function(){27===p.event.which?(C._editing=!1,D.style({opacity:1}),p.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),B.cancel.call(D,this.textContent)):(B.input.call(D,this.textContent),p.select(this).call(O(D,W,S)))}).on("keydown",function(){13===p.event.which&&this.blur()}).call(X),D.style({opacity:0});var Z,q=U.attr("class");(Z=q?"."+q.split(" ")[0]+"-math-group":"[class*=-math-group]")&&p.select(D.node().parentNode).select(Z).style({opacity:0})}function X(Z){var q=Z.node(),W=document.createRange();W.selectNodeContents(q);var te=window.getSelection();te.removeAllRanges(),te.addRange(W),q.focus()}return S.immediate?G():U.on("click",G),p.rebind(D,B,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(x,Q,K){"use strict";var p={};function v(u){u&&null!==u.timer&&(clearTimeout(u.timer),u.timer=null)}K.throttle=function(u,y,e){var n=p[u],t=Date.now();if(!n){for(var a in p)p[a].ts<t-6e4&&delete p[a];n=p[u]={ts:0,timer:null}}function r(){e(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}v(n),t>n.ts+y?r():n.timer=setTimeout(function(){r(),n.timer=null},y)},K.done=function(u){var y=p[u];return y&&y.timer?new Promise(function(e){var n=y.onDone;y.onDone=function(){n&&n(),e(),y.onDone=null}}):Promise.resolve()},K.clear=function(u){if(u)v(p[u]),delete p[u];else for(var y in p)K.clear(y)}},{}],531:[function(x,Q,K){"use strict";var p=x("fast-isnumeric");Q.exports=function(v,u){if(v>0)return Math.log(v)/Math.LN10;var y=Math.log(Math.min(u[0],u[1]))/Math.LN10;return p(y)||(y=Math.log(Math.max(u[0],u[1]))/Math.LN10-6),y}},{"fast-isnumeric":190}],532:[function(x,Q,K){"use strict";var p=Q.exports={},v=x("../plots/geo/constants").locationmodeToLayer,u=x("topojson-client").feature;p.getTopojsonName=function(y){return[y.scope.replace(/ /g,"-"),"_",y.resolution.toString(),"m"].join("")},p.getTopojsonPath=function(y,e){return y+e+".json"},p.getTopojsonFeatures=function(y,e){return u(e,e.objects[v[y.locationmode]]).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(x,Q,K){"use strict";Q.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(x,Q,K){"use strict";Q.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(x,Q,K){"use strict";var p=x("../registry");Q.exports=function(v){for(var u,y,e=p.layoutArrayContainers,n=p.layoutArrayRegexes,t=v.split("[")[0],a=0;a<n.length;a++)if((y=v.match(n[a]))&&0===y.index){u=y[0];break}if(u||(u=e[e.indexOf(t)]),!u)return!1;var r=v.substr(u.length);return r?!!(y=r.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:u,index:Number(y[1]),property:y[3]||""}:{array:u,index:"",property:""}}},{"../registry":638}],536:[function(x,Q,K){"use strict";var p=x("../lib"),v=p.extendFlat,u=p.isPlainObject,y={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},n=y.flags.slice().concat(["fullReplot"]),t=e.flags.slice().concat("layoutReplot");function a(s){for(var i={},l=0;l<s.length;l++)i[s[l]]=!1;return i}function r(s,i,l){var c=v({},s);for(var h in c){var m=c[h];u(m)&&(c[h]=f(m,i,0,h))}return"from-root"===l&&(c.editType=i),c}function f(s,i,l,c){if(s.valType){var h=v({},s);if(h.editType=i,Array.isArray(s.items)){h.items=new Array(s.items.length);for(var m=0;m<s.items.length;m++)h.items[m]=f(s.items[m],i)}return h}return r(s,i,"_"===c.charAt(0)?"nested":"from-root")}Q.exports={traces:y,layout:e,traceFlags:function(){return a(n)},layoutFlags:function(){return a(t)},update:function(s,i){var l=i.editType;if(l&&"none"!==l)for(var c=l.split("+"),h=0;h<c.length;h++)s[c[h]]=!0},overrideAll:r}},{"../lib":503}],537:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("gl-mat4/fromQuat"),u=x("../registry"),y=x("../lib"),e=x("../plots/plots"),n=x("../plots/cartesian/axis_ids"),t=x("../components/color"),a=n.cleanId,r=n.getFromTrace,f=u.traceIs;function s(g,w){var _=g[w],A=w.charAt(0);_&&"paper"!==_&&(g[w]=a(_,A,!0))}function i(g){function w(_,A){g[_]&&(!g.title||!g.title[A])&&(g.title||(g.title={}),g.title[A]=g[_],delete g[_])}g&&("string"!=typeof g.title&&"number"!=typeof g.title||(g.title={text:g.title}),w("titlefont","font"),w("titleposition","position"),w("titleside","side"),w("titleoffset","offset"))}function l(g){if(!y.isPlainObject(g))return!1;var w=g.name;return delete g.name,delete g.showlegend,("string"==typeof w||"number"==typeof w)&&String(w)}function c(g,w,_,A){if(_&&!A)return g;if(A&&!_||!g.trim())return w;if(!w.trim())return g;var T,E=Math.min(g.length,w.length);for(T=0;T<E&&g.charAt(T)===w.charAt(T);T++);return g.substr(0,T).trim()}function h(g){var w="middle",_="center";return"string"==typeof g&&(-1!==g.indexOf("top")?w="top":-1!==g.indexOf("bottom")&&(w="bottom"),-1!==g.indexOf("left")?_="left":-1!==g.indexOf("right")&&(_="right")),w+" "+_}function m(g,w){return w in g&&"object"==typeof g[w]&&0===Object.keys(g[w]).length}K.clearPromiseQueue=function(g){Array.isArray(g._promises)&&g._promises.length>0&&y.log("Clearing previous rejected promises from queue."),g._promises=[]},K.cleanLayout=function(g){var w,_;g||(g={}),g.xaxis1&&(g.xaxis||(g.xaxis=g.xaxis1),delete g.xaxis1),g.yaxis1&&(g.yaxis||(g.yaxis=g.yaxis1),delete g.yaxis1),g.scene1&&(g.scene||(g.scene=g.scene1),delete g.scene1);var A=(e.subplotsRegistry.cartesian||{}).attrRegex,T=(e.subplotsRegistry.polar||{}).attrRegex,E=(e.subplotsRegistry.ternary||{}).attrRegex,k=(e.subplotsRegistry.gl3d||{}).attrRegex,O=Object.keys(g);for(w=0;w<O.length;w++){var D=O[w];if(A&&A.test(D)){var S=g[D];S.anchor&&"free"!==S.anchor&&(S.anchor=a(S.anchor)),S.overlaying&&(S.overlaying=a(S.overlaying)),S.type||(S.isdate?S.type="date":S.islog?S.type="log":!1===S.isdate&&!1===S.islog&&(S.type="linear")),"withzero"!==S.autorange&&"tozero"!==S.autorange||(S.autorange=!0,S.rangemode="tozero"),delete S.islog,delete S.isdate,delete S.categories,m(S,"domain")&&delete S.domain,void 0!==S.autotick&&(void 0===S.tickmode&&(S.tickmode=S.autotick?"auto":"linear"),delete S.autotick),i(S)}else if(T&&T.test(D))i(g[D].radialaxis);else if(E&&E.test(D)){var C=g[D];i(C.aaxis),i(C.baxis),i(C.caxis)}else if(k&&k.test(D)){var z=g[D],B=z.cameraposition;if(Array.isArray(B)&&4===B[0].length){var G=B[1],X=B[2],Z=v([],B[0]),q=[];for(_=0;_<3;++_)q[_]=G[_]+X*Z[2+4*_];z.camera={eye:{x:q[0],y:q[1],z:q[2]},center:{x:G[0],y:G[1],z:G[2]},up:{x:0,y:0,z:1}},delete z.cameraposition}i(z.xaxis),i(z.yaxis),i(z.zaxis)}}var W=Array.isArray(g.annotations)?g.annotations.length:0;for(w=0;w<W;w++){var te=g.annotations[w];y.isPlainObject(te)&&(te.ref&&("paper"===te.ref?(te.xref="paper",te.yref="paper"):"data"===te.ref&&(te.xref="x",te.yref="y"),delete te.ref),s(te,"xref"),s(te,"yref"))}var R=Array.isArray(g.shapes)?g.shapes.length:0;for(w=0;w<R;w++){var N=g.shapes[w];y.isPlainObject(N)&&(s(N,"xref"),s(N,"yref"))}var V=Array.isArray(g.images)?g.images.length:0;for(w=0;w<V;w++){var ee=g.images[w];y.isPlainObject(ee)&&(s(ee,"xref"),s(ee,"yref"))}var j=g.legend;return j&&(j.x>3?(j.x=1.02,j.xanchor="left"):j.x<-2&&(j.x=-.02,j.xanchor="right"),j.y>3?(j.y=1.02,j.yanchor="bottom"):j.y<-2&&(j.y=-.02,j.yanchor="top")),i(g),"rotate"===g.dragmode&&(g.dragmode="orbit"),t.clean(g),g.template&&g.template.layout&&K.cleanLayout(g.template.layout),g},K.cleanData=function(g){for(var w=0;w<g.length;w++){var _,A=g[w];if("histogramy"===A.type&&"xbins"in A&&!("ybins"in A)&&(A.ybins=A.xbins,delete A.xbins),A.error_y&&"opacity"in A.error_y){var T=t.defaults,E=A.error_y.color||(f(A,"bar")?t.defaultLine:T[w%T.length]);A.error_y.color=t.addOpacity(t.rgb(E),t.opacity(E)*A.error_y.opacity),delete A.error_y.opacity}if("bardir"in A&&("h"!==A.bardir||!f(A,"bar")&&"histogram"!==A.type.substr(0,9)||(A.orientation="h",K.swapXYData(A)),delete A.bardir),"histogramy"===A.type&&K.swapXYData(A),"histogramx"!==A.type&&"histogramy"!==A.type||(A.type="histogram"),"scl"in A&&!("colorscale"in A)&&(A.colorscale=A.scl,delete A.scl),"reversescl"in A&&!("reversescale"in A)&&(A.reversescale=A.reversescl,delete A.reversescl),A.xaxis&&(A.xaxis=a(A.xaxis,"x")),A.yaxis&&(A.yaxis=a(A.yaxis,"y")),f(A,"gl3d")&&A.scene&&(A.scene=e.subplotsRegistry.gl3d.cleanId(A.scene)),!f(A,"pie-like")&&!f(A,"bar-like"))if(Array.isArray(A.textposition))for(_=0;_<A.textposition.length;_++)A.textposition[_]=h(A.textposition[_]);else A.textposition&&(A.textposition=h(A.textposition));var k=u.getModule(A);if(k&&k.colorbar){var O=k.colorbar.container,D=O?A[O]:A;D&&D.colorscale&&("YIGnBu"===D.colorscale&&(D.colorscale="YlGnBu"),"YIOrRd"===D.colorscale&&(D.colorscale="YlOrRd"))}if("surface"===A.type&&y.isPlainObject(A.contours)){var S=["x","y","z"];for(_=0;_<S.length;_++){var C=A.contours[S[_]];y.isPlainObject(C)&&(C.highlightColor&&(C.highlightcolor=C.highlightColor,delete C.highlightColor),C.highlightWidth&&(C.highlightwidth=C.highlightWidth,delete C.highlightWidth))}}if("candlestick"===A.type||"ohlc"===A.type){var z=!1!==(A.increasing||{}).showlegend,B=!1!==(A.decreasing||{}).showlegend,U=l(A.increasing),G=l(A.decreasing);if(!1!==U&&!1!==G){var X=c(U,G,z,B);X&&(A.name=X)}else!U&&!G||A.name||(A.name=U||G)}if(Array.isArray(A.transforms)){var Z=A.transforms;for(_=0;_<Z.length;_++){var q=Z[_];if(y.isPlainObject(q))switch(q.type){case"filter":q.filtersrc&&(q.target=q.filtersrc,delete q.filtersrc),q.calendar&&(q.valuecalendar||(q.valuecalendar=q.calendar),delete q.calendar);break;case"groupby":if(q.styles=q.styles||q.style,q.styles&&!Array.isArray(q.styles)){var W=q.styles,te=Object.keys(W);q.styles=[];for(var R=0;R<te.length;R++)q.styles.push({target:te[R],value:W[te[R]]})}}}}m(A,"line")&&delete A.line,"marker"in A&&(m(A.marker,"line")&&delete A.marker.line,m(A,"marker")&&delete A.marker),t.clean(A),A.autobinx&&(delete A.autobinx,delete A.xbins),A.autobiny&&(delete A.autobiny,delete A.ybins),i(A),A.colorbar&&i(A.colorbar),A.marker&&A.marker.colorbar&&i(A.marker.colorbar),A.line&&A.line.colorbar&&i(A.line.colorbar),A.aaxis&&i(A.aaxis),A.baxis&&i(A.baxis)}},K.swapXYData=function(g){var w;if(y.swapAttrs(g,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(g.z)&&Array.isArray(g.z[0])&&(g.transpose?delete g.transpose:g.transpose=!0),g.error_x&&g.error_y){var _=g.error_y,A="copy_ystyle"in _?_.copy_ystyle:!(_.color||_.thickness||_.width);y.swapAttrs(g,["error_?.copy_ystyle"]),A&&y.swapAttrs(g,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof g.hoverinfo){var T=g.hoverinfo.split("+");for(w=0;w<T.length;w++)"x"===T[w]?T[w]="y":"y"===T[w]&&(T[w]="x");g.hoverinfo=T.join("+")}},K.coerceTraceIndices=function(g,w){if(p(w))return[w];if(!Array.isArray(w)||!w.length)return g.data.map(function(T,E){return E});if(Array.isArray(w)){for(var _=[],A=0;A<w.length;A++)y.isIndex(w[A],g.data.length)?_.push(w[A]):y.warn("trace index (",w[A],") is not a number or is out of bounds");return _}return w},K.manageArrayContainers=function(g,w,_){var A=g.obj,T=g.parts,E=T.length,k=T[E-1],O=p(k);if(O&&null===w){var D=T.slice(0,E-1).join(".");y.nestedProperty(A,D).get().splice(k,1)}else O&&void 0===g.get()&&void 0===g.get()&&(_[g.astr]=null),g.set(w)};var d=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function o(g){var w=g.search(d);if(w>0)return g.substr(0,w)}K.hasParent=function(g,w){for(var _=o(w);_;){if(_ in g)return!0;_=o(_)}return!1};var b=["x","y","z"];K.clearAxisTypes=function(g,w,_){for(var A=0;A<w.length;A++)for(var T=g._fullData[A],E=0;E<3;E++){var k=r(g,T,b[E]);if(k&&"log"!==k.type){var O=k._name,D=k._id.substr(1);if("scene"===D.substr(0,5)){if(void 0!==_[D])continue;O=D+"."+O}var S=O+".type";void 0===_[O]&&void 0===_[S]&&y.nestedProperty(g.layout,S).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(x,Q,K){"use strict";var p=x("./plot_api");K._doPlot=p._doPlot,K.newPlot=p.newPlot,K.restyle=p.restyle,K.relayout=p.relayout,K.redraw=p.redraw,K.update=p.update,K._guiRestyle=p._guiRestyle,K._guiRelayout=p._guiRelayout,K._guiUpdate=p._guiUpdate,K._storeDirectGUIEdit=p._storeDirectGUIEdit,K.react=p.react,K.extendTraces=p.extendTraces,K.prependTraces=p.prependTraces,K.addTraces=p.addTraces,K.deleteTraces=p.deleteTraces,K.moveTraces=p.moveTraces,K.purge=p.purge,K.addFrames=p.addFrames,K.deleteFrames=p.deleteFrames,K.animate=p.animate,K.setPlotConfig=p.setPlotConfig,K.toImage=x("./to_image"),K.validate=x("./validate"),K.downloadImage=x("../snapshot/download");var v=x("./template_api");K.makeTemplate=v.makeTemplate,K.validateTemplate=v.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(x,Q,K){"use strict";var p=x("../lib/is_plain_object"),v=x("../lib/noop"),u=x("../lib/loggers"),y=x("../lib/search").sorterAsc,e=x("../registry");K.containerArrayMatch=x("./container_array_match");var n=K.isAddVal=function(a){return"add"===a||p(a)},t=K.isRemoveVal=function(a){return null===a||"remove"===a};K.applyContainerArrayChanges=function(a,r,f,s,i){var l=r.astr,c=e.getComponentMethod(l,"supplyLayoutDefaults"),h=e.getComponentMethod(l,"draw"),m=e.getComponentMethod(l,"drawOne"),d=s.replot||s.recalc||c===v||h===v,o=a.layout,b=a._fullLayout;if(f[""]){Object.keys(f).length>1&&u.warn("Full array edits are incompatible with other edits",l);var g=f[""][""];if(t(g))r.set(null);else{if(!Array.isArray(g))return u.warn("Unrecognized full array edit value",l,g),!0;r.set(g)}return!d&&(c(o,b),h(a),!0)}var w,_,A,T,E,k,O,S=Object.keys(f).map(Number).sort(y),C=r.get(),z=C||[],B=i(b,l).get(),U=[],G=-1,X=z.length;for(w=0;w<S.length;w++)if(T=f[A=S[w]],E=Object.keys(T),O=n(k=T[""]),A<0||A>z.length-(O?0:1))u.warn("index out of range",l,A);else if(void 0!==k)E.length>1&&u.warn("Insertion & removal are incompatible with edits to the same index.",l,A),t(k)?U.push(A):O?("add"===k&&(k={}),z.splice(A,0,k),B&&B.splice(A,0,{})):u.warn("Unrecognized full object edit value",l,A,k),-1===G&&(G=A);else for(_=0;_<E.length;_++)i(z[A],E[_],l+"["+A+"].").set(T[E[_]]);for(w=U.length-1;w>=0;w--)z.splice(U[w],1),B&&B.splice(U[w],1);if(z.length?C||r.set(z):r.set(null),d)return!1;if(c(o,b),m!==v){var Z;if(-1===G)Z=S;else{for(X=Math.max(z.length,X),Z=[],w=0;w<S.length&&!((A=S[w])>=G);w++)Z.push(A);for(w=G;w<X;w++)Z.push(w)}for(w=0;w<Z.length;w++)m(a,Z[w])}else h(a);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("fast-isnumeric"),u=x("has-hover"),y=x("../lib"),e=y.nestedProperty,n=x("../lib/events"),t=x("../lib/queue"),a=x("../registry"),r=x("./plot_schema"),f=x("../plots/plots"),s=x("../plots/cartesian/axes"),i=x("../components/drawing"),l=x("../components/color"),c=x("../plots/cartesian/graph_interact").initInteractions,h=x("../constants/xmlns_namespaces"),m=x("../plots/cartesian/select").clearSelect,d=x("./plot_config").dfltConfig,o=x("./manage_arrays"),b=x("./helpers"),g=x("./subroutines"),w=x("./edit_types"),_=x("../plots/cartesian/constants").AX_NAME_PATTERN,A=0;function T(he){var me=he._fullLayout;me._redrawFromAutoMarginCount?me._redrawFromAutoMarginCount--:he.emit("plotly_afterplot")}function E(he,me){try{he._fullLayout._paper.style("background",me)}catch(Ae){y.error(Ae)}}function k(he,me){E(he,l.combine(me,"white"))}function O(he,me){if(!he._context){he._context=y.extendDeep({},d);var Ae=p.select("base");he._context._baseUrl=Ae.size()&&Ae.attr("href")?window.location.href.split("#")[0]:""}var we,Se,Pe,ze=he._context;if(me){for(Se=Object.keys(me),we=0;we<Se.length;we++)"editable"!==(Pe=Se[we])&&"edits"!==Pe&&Pe in ze&&(ze[Pe]="setBackground"===Pe&&"opaque"===me[Pe]?k:me[Pe]);me.plot3dPixelRatio&&!ze.plotGlPixelRatio&&(ze.plotGlPixelRatio=ze.plot3dPixelRatio);var He=me.editable;if(void 0!==He)for(ze.editable=He,Se=Object.keys(ze.edits),we=0;we<Se.length;we++)ze.edits[Se[we]]=He;if(me.edits)for(Se=Object.keys(me.edits),we=0;we<Se.length;we++)(Pe=Se[we])in ze.edits&&(ze.edits[Pe]=me.edits[Pe]);ze._exportedPlot=me._exportedPlot}ze.staticPlot&&(ze.editable=!1,ze.edits={},ze.autosizable=!1,ze.scrollZoom=!1,ze.doubleClick=!1,ze.showTips=!1,ze.showLink=!1,ze.displayModeBar=!1),"hover"!==ze.displayModeBar||u||(ze.displayModeBar=!0),"transparent"!==ze.setBackground&&"function"==typeof ze.setBackground||(ze.setBackground=E),ze._hasZeroHeight=ze._hasZeroHeight||0===he.clientHeight,ze._hasZeroWidth=ze._hasZeroWidth||0===he.clientWidth;var tt=ze.scrollZoom,Oe=ze._scrollZoom={};if(!0===tt)Oe.cartesian=1,Oe.gl3d=1,Oe.geo=1,Oe.mapbox=1;else if("string"==typeof tt){var Be=tt.split("+");for(we=0;we<Be.length;we++)Oe[Be[we]]=1}else!1!==tt&&(Oe.gl3d=1,Oe.geo=1,Oe.mapbox=1)}function D(he,me){var Ae,we,Se=me+1,Pe=[];for(Ae=0;Ae<he.length;Ae++)(we=he[Ae])<0?Pe.push(Se+we):Pe.push(we);return Pe}function S(he,me,Ae){var we,Se;for(we=0;we<me.length;we++){if((Se=me[we])!==parseInt(Se,10))throw new Error("all values in "+Ae+" must be integers");if(Se>=he.data.length||Se<-he.data.length)throw new Error(Ae+" must be valid indices for gd.data.");if(me.indexOf(Se,we+1)>-1||Se>=0&&me.indexOf(-he.data.length+Se)>-1||Se<0&&me.indexOf(he.data.length+Se)>-1)throw new Error("each index in "+Ae+" must be unique.")}}function C(he,me,Ae){if(!Array.isArray(he.data))throw new Error("gd.data must be an array.");if(void 0===me)throw new Error("currentIndices is a required argument.");if(Array.isArray(me)||(me=[me]),S(he,me,"currentIndices"),void 0===Ae||Array.isArray(Ae)||(Ae=[Ae]),void 0!==Ae&&S(he,Ae,"newIndices"),void 0!==Ae&&me.length!==Ae.length)throw new Error("current and new indices must be of equal length.")}function z(he,me,Ae,we,Se){!function(Ye,nt,ft,dt){var Rt=y.isPlainObject(dt);if(!Array.isArray(Ye.data))throw new Error("gd.data must be an array");if(!y.isPlainObject(nt))throw new Error("update must be a key:value object");if(void 0===ft)throw new Error("indices must be an integer or array of integers");for(var Et in S(Ye,ft,"indices"),nt){if(!Array.isArray(nt[Et])||nt[Et].length!==ft.length)throw new Error("attribute "+Et+" must be an array of length equal to indices array length");if(Rt&&(!(Et in dt)||!Array.isArray(dt[Et])||dt[Et].length!==nt[Et].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(he,me,Ae,we);for(var Pe=function(Ye,nt,ft,dt){var Et,at,rt,St,Xt=y.isPlainObject(dt),lr=[];for(var Ue in Array.isArray(ft)||(ft=[ft]),ft=D(ft,Ye.data.length-1),nt)for(var Ze=0;Ze<ft.length;Ze++){if(Et=(at=e(Ye.data[ft[Ze]],Ue)).get(),!y.isArrayOrTypedArray(rt=nt[Ue][Ze]))throw new Error("attribute: "+Ue+" index: "+Ze+" must be an array");if(!y.isArrayOrTypedArray(Et))throw new Error("cannot extend missing or non-array attribute: "+Ue);if(Et.constructor!==rt.constructor)throw new Error("cannot extend array with an array of a different type: "+Ue);v(St=Xt?dt[Ue][Ze]:dt)||(St=-1),lr.push({prop:at,target:Et,insert:rt,maxp:Math.floor(St)})}return lr}(he,me,Ae,we),ze={},He={},tt=0;tt<Pe.length;tt++){var Oe=Pe[tt].prop,Je=Se(Pe[tt].target,Pe[tt].insert,Pe[tt].maxp);Oe.set(Je[0]),Array.isArray(ze[Oe.astr])||(ze[Oe.astr]=[]),ze[Oe.astr].push(Je[1]),Array.isArray(He[Oe.astr])||(He[Oe.astr]=[]),He[Oe.astr].push(Pe[tt].target.length)}return{update:ze,maxPoints:He}}function B(he,me){var Ae=new he.constructor(he.length+me.length);return Ae.set(he),Ae.set(me,he.length),Ae}function U(he,me,Ae,we){he=y.getGraphDiv(he),b.clearPromiseQueue(he);var Se={};if("string"==typeof me)Se[me]=Ae;else{if(!y.isPlainObject(me))return y.warn("Restyle fail.",me,Ae,we),Promise.reject();Se=y.extendFlat({},me),void 0===we&&(we=Ae)}Object.keys(Se).length&&(he.changed=!0);var Pe=b.coerceTraceIndices(he,we),ze=q(he,Se,Pe),He=ze.flags;He.calc&&(he.calcdata=void 0),He.clearAxisTypes&&b.clearAxisTypes(he,Pe,{});var tt=[];He.fullReplot?tt.push(K._doPlot):(tt.push(f.previousPromises),f.supplyDefaults(he),He.markerSize&&(f.doCalcdata(he),N(tt)),He.style&&tt.push(g.doTraceStyle),He.colorbars&&tt.push(g.doColorBars),tt.push(T)),tt.push(f.rehover,f.redrag),t.add(he,U,[he,ze.undoit,ze.traces],U,[he,ze.redoit,ze.traces]);var Oe=y.syncOrAsync(tt,he);return Oe&&Oe.then||(Oe=Promise.resolve()),Oe.then(function(){return he.emit("plotly_restyle",ze.eventData),he})}function G(he){return void 0===he?null:he}function X(he,me){return me?function(Ae,we,Se){var Pe=e(Ae,we),ze=Pe.set;return Pe.set=function(He){Z((Se||"")+we,Pe.get(),He,he),ze(He)},Pe}:e}function Z(he,me,Ae,we){if(Array.isArray(me)||Array.isArray(Ae))for(var Se=Array.isArray(me)?me:[],Pe=Array.isArray(Ae)?Ae:[],ze=Math.max(Se.length,Pe.length),He=0;He<ze;He++)Z(he+"["+He+"]",Se[He],Pe[He],we);else if(y.isPlainObject(me)||y.isPlainObject(Ae)){var tt=y.isPlainObject(me)?me:{},Oe=y.isPlainObject(Ae)?Ae:{},Be=y.extendFlat({},tt,Oe);for(var Je in Be)Z(he+"."+Je,tt[Je],Oe[Je],we)}else void 0===we[he]&&(we[he]=G(me))}function q(he,me,Ae){var we,Se=he._fullLayout,Pe=he._fullData,ze=he.data,He=Se._guiEditing,tt=X(Se._preGUI,He),Oe=y.extendDeepAll({},me);W(me);var Be,Je=w.traceFlags(),Ye={},nt={};function ft(){return Ae.map(function(){})}function dt(kt){var Gt=s.id2name(kt);-1===Be.indexOf(Gt)&&Be.push(Gt)}function Rt(kt){return"LAYOUT"+kt+".autorange"}function Et(kt){return"LAYOUT"+kt+".range"}function at(kt){for(var Gt=kt;Gt<Pe.length;Gt++)if(Pe[Gt]._input===ze[kt])return Pe[Gt]}function rt(kt,Gt,Zt){if(Array.isArray(kt))kt.forEach(function(nr){rt(nr,Gt,Zt)});else if(!(kt in me)&&!b.hasParent(me,kt)){var fr;if("LAYOUT"===kt.substr(0,6))fr=tt(he.layout,kt.replace("LAYOUT",""));else{var $t=Ae[Zt];fr=X(Se._tracePreGUI[at($t)._fullInput.uid],He)(ze[$t],kt)}kt in nt||(nt[kt]=ft()),void 0===nt[kt][Zt]&&(nt[kt][Zt]=G(fr.get())),void 0!==Gt&&fr.set(Gt)}}function St(kt){return function(Gt){return Pe[Gt][kt]}}function Xt(kt){return function(Gt,Zt){return!1===Gt?Pe[Ae[Zt]][kt]:null}}for(var lr in me){if(b.hasParent(me,lr))throw new Error("cannot set "+lr+" and a parent attribute simultaneously");var Ue,Ze,Ne,it,ke,De,Re=me[lr];if("autobinx"!==lr&&"autobiny"!==lr||(lr=lr.charAt(lr.length-1)+"bins",Re=Array.isArray(Re)?Re.map(Xt(lr)):!1===Re?Ae.map(St(lr)):null),Ye[lr]=Re,"LAYOUT"!==lr.substr(0,6)){for(nt[lr]=ft(),we=0;we<Ae.length;we++)if(Ue=ze[Ae[we]],Ze=at(Ae[we]),it=(Ne=X(Se._tracePreGUI[Ze._fullInput.uid],He)(Ue,lr)).get(),void 0!==(ke=Array.isArray(Re)?Re[we%Re.length]:Re)){var Ie=Ne.parts[Ne.parts.length-1],Ke=lr.substr(0,lr.length-Ie.length-1),ut=Ke?Ke+".":"",xt=Ke?e(Ze,Ke).get():Ze;if((De=r.getTraceValObject(Ze,Ne.parts))&&De.impliedEdits&&null!==ke)for(var gt in De.impliedEdits)rt(y.relativeAttr(lr,gt),De.impliedEdits[gt],we);else if("thicknessmode"!==Ie&&"lenmode"!==Ie||it===ke||"fraction"!==ke&&"pixels"!==ke||!xt){if("type"===lr&&("pie"===ke!=("pie"===it)||"funnelarea"===ke!=("funnelarea"===it))){var Pt="x",ct="y";"bar"!==ke&&"bar"!==it||"h"!==Ue.orientation||(Pt="y",ct="x"),y.swapAttrs(Ue,["?","?src"],"labels",Pt),y.swapAttrs(Ue,["d?","?0"],"label",Pt),y.swapAttrs(Ue,["?","?src"],"values",ct),"pie"===it||"funnelarea"===it?(e(Ue,"marker.color").set(e(Ue,"marker.colors").get()),Se._pielayer.selectAll("g.trace").remove()):a.traceIs(Ue,"cartesian")&&e(Ue,"marker.colors").set(e(Ue,"marker.color").get())}}else{var zt=Se._size,Ft=xt.orient,Qe="top"===Ft||"bottom"===Ft;if("thicknessmode"===Ie){var yt=Qe?zt.h:zt.w;rt(ut+"thickness",xt.thickness*("fraction"===ke?1/yt:yt),we)}else{var Nt=Qe?zt.w:zt.h;rt(ut+"len",xt.len*("fraction"===ke?1/Nt:Nt),we)}}if(nt[lr][we]=G(it),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(lr)){if("orientation"===lr){Ne.set(ke);var Yt=Ue.x&&!Ue.y?"h":"v";if((Ne.get()||Yt)===Ze.orientation)continue}else"orientationaxes"===lr&&(Ue.orientation={v:"h",h:"v"}[Ze.orientation]);b.swapXYData(Ue),Je.calc=Je.clearAxisTypes=!0}else-1!==f.dataArrayContainers.indexOf(Ne.parts[0])?(b.manageArrayContainers(Ne,ke,nt),Je.calc=!0):(De?De.arrayOk&&!a.traceIs(Ze,"regl")&&(y.isArrayOrTypedArray(ke)||y.isArrayOrTypedArray(it))?Je.calc=!0:w.update(Je,De):Je.calc=!0,Ne.set(ke))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(lr)&&s.swap(he,Ae),"orientationaxes"===lr){var rr=e(he.layout,"hovermode"),Fe=rr.get();"x"===Fe?rr.set("y"):"y"===Fe?rr.set("x"):"x unified"===Fe?rr.set("y unified"):"y unified"===Fe&&rr.set("x unified")}if(-1!==["orientation","type"].indexOf(lr)){for(Be=[],we=0;we<Ae.length;we++){var ht=ze[Ae[we]];a.traceIs(ht,"cartesian")&&(dt(ht.xaxis||"x"),dt(ht.yaxis||"y"))}rt(Be.map(Rt),!0,0),rt(Be.map(Et),[0,1],0)}}else Ne=tt(he.layout,lr.replace("LAYOUT","")),nt[lr]=[G(Ne.get())],Ne.set(Array.isArray(Re)?Re[0]:Re),Je.calc=!0}return(Je.calc||Je.plot)&&(Je.fullReplot=!0),{flags:Je,undoit:nt,redoit:Ye,traces:Ae,eventData:y.extendDeepNoArrays([],[Oe,Ae])}}function W(he){var me,Ae,we,Se=y.counterRegex("axis",".title",!1,!1),Pe=/colorbar\.title$/,ze=Object.keys(he);for(me=0;me<ze.length;me++)we=he[Ae=ze[me]],"title"!==Ae&&!Se.test(Ae)&&!Pe.test(Ae)||"string"!=typeof we&&"number"!=typeof we?Ae.indexOf("titlefont")>-1?He(Ae,Ae.replace("titlefont","title.font")):Ae.indexOf("titleposition")>-1?He(Ae,Ae.replace("titleposition","title.position")):Ae.indexOf("titleside")>-1?He(Ae,Ae.replace("titleside","title.side")):Ae.indexOf("titleoffset")>-1&&He(Ae,Ae.replace("titleoffset","title.offset")):He(Ae,Ae.replace("title","title.text"));function He(tt,Oe){he[Oe]=he[tt],delete he[tt]}}function te(he,me,Ae){he=y.getGraphDiv(he),b.clearPromiseQueue(he);var we={};if("string"==typeof me)we[me]=Ae;else{if(!y.isPlainObject(me))return y.warn("Relayout fail.",me,Ae),Promise.reject();we=y.extendFlat({},me)}Object.keys(we).length&&(he.changed=!0);var Se=J(he,we),Pe=Se.flags;Pe.calc&&(he.calcdata=void 0);var ze=[f.previousPromises];Pe.layoutReplot?ze.push(g.layoutReplot):Object.keys(we).length&&(R(he,Pe,Se)||f.supplyDefaults(he),Pe.legend&&ze.push(g.doLegend),Pe.layoutstyle&&ze.push(g.layoutStyles),Pe.axrange&&N(ze,Se.rangesAltered),Pe.ticks&&ze.push(g.doTicksRelayout),Pe.modebar&&ze.push(g.doModeBar),Pe.camera&&ze.push(g.doCamera),Pe.colorbars&&ze.push(g.doColorBars),ze.push(T)),ze.push(f.rehover,f.redrag),t.add(he,te,[he,Se.undoit],te,[he,Se.redoit]);var He=y.syncOrAsync(ze,he);return He&&He.then||(He=Promise.resolve(he)),He.then(function(){return he.emit("plotly_relayout",Se.eventData),he})}function R(he,me,Ae){var we=he._fullLayout;if(!me.axrange)return!1;for(var Se in me)if("axrange"!==Se&&me[Se])return!1;for(var Pe in Ae.rangesAltered){var ze=s.id2name(Pe),He=he.layout[ze],tt=we[ze];if(tt.autorange=He.autorange,He.range&&(tt.range=He.range.slice()),tt.cleanRange(),tt._matchGroup)for(var Oe in tt._matchGroup)if(Oe!==Pe){var Be=we[s.id2name(Oe)];Be.autorange=tt.autorange,Be.range=tt.range.slice(),Be._input.range=tt.range.slice()}}return!0}function N(he,me){he.push(m,g.doAutoRangeAndConstraints,me?function(we){var Se=[],Pe=!0;for(var ze in me){var He=s.getFromId(we,ze);if(Se.push(ze),-1!==(He.ticklabelposition||"").indexOf("inside")&&He._anchorAxis&&Se.push(He._anchorAxis._id),He._matchGroup)for(var tt in He._matchGroup)me[tt]||Se.push(tt);He.automargin&&(Pe=!1)}return s.draw(we,Se,{skipTitle:Pe})}:function(we){return s.draw(we,"redraw")},g.drawData,g.finalDraw)}var V=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ee=/^[xyz]axis[0-9]*\.autorange$/,j=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function J(he,me){var Ae,we,Se,Pe=he.layout,ze=he._fullLayout,tt=X(ze._preGUI,ze._guiEditing),Oe=Object.keys(me),Be=s.list(he),Je=y.extendDeepAll({},me),Ye={};for(W(me),Oe=Object.keys(me),we=0;we<Oe.length;we++)if(0===Oe[we].indexOf("allaxes")){for(Se=0;Se<Be.length;Se++){var nt=Be[Se]._id.substr(1),ft=-1!==nt.indexOf("scene")?nt+".":"",dt=Oe[we].replace("allaxes",ft+Be[Se]._name);me[dt]||(me[dt]=me[Oe[we]])}delete me[Oe[we]]}var Rt=w.layoutFlags(),Et={},at={};function rt($t,nr){if(Array.isArray($t))$t.forEach(function(Tr){rt(Tr,nr)});else if(!($t in me)&&!b.hasParent(me,$t)){var dr=tt(Pe,$t);$t in at||(at[$t]=G(dr.get())),void 0!==nr&&dr.set(nr)}}var St,Xt={};function lr($t){var nr=s.name2id($t.split(".")[0]);return Xt[nr]=1,nr}for(var Ue in me){if(b.hasParent(me,Ue))throw new Error("cannot set "+Ue+" and a parent attribute simultaneously");for(var Ze=tt(Pe,Ue),Ne=me[Ue],it=Ze.parts.length-1;it>0&&"string"!=typeof Ze.parts[it];)it--;var ke=Ze.parts[it],De=Ze.parts[it-1]+"."+ke,Re=Ze.parts.slice(0,it).join("."),Ie=e(he.layout,Re).get(),Ke=e(ze,Re).get(),ut=Ze.get();if(void 0!==Ne){Et[Ue]=Ne,at[Ue]="reverse"===ke?Ne:G(ut);var xt=r.getLayoutValObject(ze,Ze.parts);if(xt&&xt.impliedEdits&&null!==Ne)for(var gt in xt.impliedEdits)rt(y.relativeAttr(Ue,gt),xt.impliedEdits[gt]);if(-1!==["width","height"].indexOf(Ue))if(Ne){rt("autosize",null);var Pt="height"===Ue?"width":"height";rt(Pt,ze[Pt])}else ze[Ue]=he._initialAutoSize[Ue];else if("autosize"===Ue)rt("width",Ne?null:ze.width),rt("height",Ne?null:ze.height);else if(De.match(V))lr(De),e(ze,Re+"._inputRange").set(null);else if(De.match(ee)){lr(De),e(ze,Re+"._inputRange").set(null);var ct=e(ze,Re).get();ct._inputDomain&&(ct._input.domain=ct._inputDomain.slice())}else De.match(j)&&e(ze,Re+"._inputDomain").set(null);if("type"===ke){St=Ie;var zt="linear"===Ke.type&&"log"===Ne;if(zt||"log"===Ke.type&&"linear"===Ne){if(St&&St.range)if(Ke.autorange)zt&&(St.range=St.range[1]>St.range[0]?[1,2]:[2,1]);else{var Qe=St.range[0],yt=St.range[1];zt?(Qe<=0&&yt<=0&&rt(Re+".autorange",!0),Qe<=0?Qe=yt/1e6:yt<=0&&(yt=Qe/1e6),rt(Re+".range[0]",Math.log(Qe)/Math.LN10),rt(Re+".range[1]",Math.log(yt)/Math.LN10)):(rt(Re+".range[0]",Math.pow(10,Qe)),rt(Re+".range[1]",Math.pow(10,yt)))}else rt(Re+".autorange",!0);Array.isArray(ze._subplots.polar)&&ze._subplots.polar.length&&ze[Ze.parts[0]]&&"radialaxis"===Ze.parts[1]&&delete ze[Ze.parts[0]]._subplot.viewInitial["radialaxis.range"],a.getComponentMethod("annotations","convertCoords")(he,Ke,Ne,rt),a.getComponentMethod("images","convertCoords")(he,Ke,Ne,rt)}else rt(Re+".autorange",!0),rt(Re+".range",null);e(ze,Re+"._inputRange").set(null)}else if(ke.match(_)){var Nt=e(ze,Ue).get(),Yt=(Ne||{}).type;Yt&&"-"!==Yt||(Yt="linear"),a.getComponentMethod("annotations","convertCoords")(he,Nt,Yt,rt),a.getComponentMethod("images","convertCoords")(he,Nt,Yt,rt)}var rr=o.containerArrayMatch(Ue);if(rr){Ae=rr.array;var Fe=rr.property,ht=xt||{editType:"calc"};""!==(we=rr.index)&&""===Fe&&(o.isAddVal(Ne)?at[Ue]=null:o.isRemoveVal(Ne)?at[Ue]=(e(Pe,Ae).get()||[])[we]:y.warn("unrecognized full object value",me)),w.update(Rt,ht),Ye[Ae]||(Ye[Ae]={});var kt=Ye[Ae][we];kt||(kt=Ye[Ae][we]={}),kt[Fe]=Ne,delete me[Ue]}else"reverse"===ke?(Ie.range?Ie.range.reverse():(rt(Re+".autorange",!0),Ie.range=[1,0]),Ke.autorange?Rt.calc=!0:Rt.plot=!0):(ze._has("scatter-like")&&ze._has("regl")&&"dragmode"===Ue&&("lasso"===Ne||"select"===Ne)&&"lasso"!==ut&&"select"!==ut||ze._has("gl2d")?Rt.plot=!0:xt?w.update(Rt,xt):Rt.calc=!0,Ze.set(Ne))}}for(Ae in Ye)o.applyContainerArrayChanges(he,tt(Pe,Ae),Ye[Ae],Rt,tt)||(Rt.plot=!0);for(var Gt in Xt){var Zt=(St=s.getFromId(he,Gt))&&St._constraintGroup;if(Zt)for(var fr in Rt.calc=!0,Zt)Xt[fr]||(s.getFromId(he,fr)._constraintShrinkable=!0)}return($(he)||me.height||me.width)&&(Rt.plot=!0),(Rt.plot||Rt.calc)&&(Rt.layoutReplot=!0),{flags:Rt,rangesAltered:Xt,undoit:at,redoit:Et,eventData:Je}}function $(he){var me=he._fullLayout,Ae=me.width,we=me.height;return he.layout.autosize&&f.plotAutoSize(he,he.layout,me),me.width!==Ae||me.height!==we}function re(he,me,Ae,we){he=y.getGraphDiv(he),b.clearPromiseQueue(he),y.isPlainObject(me)||(me={}),y.isPlainObject(Ae)||(Ae={}),Object.keys(me).length&&(he.changed=!0),Object.keys(Ae).length&&(he.changed=!0);var Se=b.coerceTraceIndices(he,we),Pe=q(he,y.extendFlat({},me),Se),ze=Pe.flags,He=J(he,y.extendFlat({},Ae)),tt=He.flags;(ze.calc||tt.calc)&&(he.calcdata=void 0),ze.clearAxisTypes&&b.clearAxisTypes(he,Se,Ae);var Oe=[];tt.layoutReplot?Oe.push(g.layoutReplot):ze.fullReplot?Oe.push(K._doPlot):(Oe.push(f.previousPromises),R(he,tt,He)||f.supplyDefaults(he),ze.style&&Oe.push(g.doTraceStyle),(ze.colorbars||tt.colorbars)&&Oe.push(g.doColorBars),tt.legend&&Oe.push(g.doLegend),tt.layoutstyle&&Oe.push(g.layoutStyles),tt.axrange&&N(Oe,He.rangesAltered),tt.ticks&&Oe.push(g.doTicksRelayout),tt.modebar&&Oe.push(g.doModeBar),tt.camera&&Oe.push(g.doCamera),Oe.push(T)),Oe.push(f.rehover,f.redrag),t.add(he,re,[he,Pe.undoit,He.undoit,Pe.traces],re,[he,Pe.redoit,He.redoit,Pe.traces]);var Be=y.syncOrAsync(Oe,he);return Be&&Be.then||(Be=Promise.resolve(he)),Be.then(function(){return he.emit("plotly_update",{data:Pe.eventData,layout:He.eventData}),he})}function ne(he){return function(me){me._fullLayout._guiEditing=!0;var Ae=he.apply(null,arguments);return me._fullLayout._guiEditing=!1,Ae}}var se=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ie=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ue(he,me){for(var Ae=0;Ae<me.length;Ae++){var we=me[Ae],Se=he.match(we.pattern);if(Se)return{head:Se[1],attr:we.attr}}}function le(he,me){var Ae=e(me,he).get();if(void 0!==Ae)return Ae;var we=he.split(".");for(we.pop();we.length>1;)if(we.pop(),void 0!==(Ae=e(me,we.join(".")+".uirevision").get()))return Ae;return me.uirevision}function de(he,me){for(var Ae=0;Ae<me.length;Ae++)if(me[Ae]._fullInput.uid===he)return Ae;return-1}function ve(he,me,Ae){for(var we=0;we<me.length;we++)if(me[we].uid===he)return we;return!me[Ae]||me[Ae].uid?-1:Ae}function _e(he,me){var Ae=y.isPlainObject(he),we=Array.isArray(he);return Ae||we?(Ae&&y.isPlainObject(me)||we&&Array.isArray(me))&&JSON.stringify(he)===JSON.stringify(me):he===me}function be(he,me,Ae,we){var Se,Pe,ze,He=we.getValObject,tt=we.flags,Oe=we.immutable,Be=we.inArray,Je=we.arrayIndex;function Ye(){var Ie=Se.editType;Be&&-1!==Ie.indexOf("arraydraw")?y.pushUnique(tt.arrays[Be],Je):(w.update(tt,Se),"none"!==Ie&&tt.nChanges++,we.transition&&Se.anim&&tt.nChangesAnim++,(V.test(ze)||ee.test(ze))&&(tt.rangesAltered[Ae[0]]=1),j.test(ze)&&e(me,"_inputDomain").set(null),"datarevision"===Pe&&(tt.newDataRevision=1))}function nt(Ie){return"data_array"===Ie.valType||Ie.arrayOk}for(Pe in he){if(tt.calc&&!we.transition)return;var ft=he[Pe],dt=me[Pe],Rt=Ae.concat(Pe);if(ze=Rt.join("."),"_"!==Pe.charAt(0)&&"function"!=typeof ft&&ft!==dt){if(("tick0"===Pe||"dtick"===Pe)&&"geo"!==Ae[0]){var Et=me.tickmode;if("auto"===Et||"array"===Et||!Et)continue}if(("range"!==Pe||!me.autorange)&&("zmin"!==Pe&&"zmax"!==Pe||"contourcarpet"!==me.type)&&(Se=He(Rt))&&(!Se._compareAsJSON||JSON.stringify(ft)!==JSON.stringify(dt))){var at,rt=Se.valType,St=nt(Se),Xt=Array.isArray(ft),lr=Array.isArray(dt);if(Xt&&lr){var Ue="_input_"+Pe,Ze=he[Ue],Ne=me[Ue];if(Array.isArray(Ze)&&Ze===Ne)continue}if(void 0===dt)St&&Xt?tt.calc=!0:Ye();else if(Se._isLinkedToArray){var it=[],ke=!1;Be||(tt.arrays[Pe]=it);var De=Math.min(ft.length,dt.length),Re=Math.max(ft.length,dt.length);if(De!==Re){if("arraydraw"!==Se.editType){Ye();continue}ke=!0}for(at=0;at<De;at++)be(ft[at],dt[at],Rt.concat(at),y.extendFlat({inArray:Pe,arrayIndex:at},we));if(ke)for(at=De;at<Re;at++)it.push(at)}else!rt&&y.isPlainObject(ft)?be(ft,dt,Rt,we):St?Xt&&lr?(Oe&&(tt.calc=!0),(Oe||we.newDataRevision)&&Ye()):Xt!==lr?tt.calc=!0:Ye():Xt&&lr&&ft.length===dt.length&&String(ft)===String(dt)||Ye()}}}for(Pe in me)if(!(Pe in he)&&"_"!==Pe.charAt(0)&&"function"!=typeof me[Pe]){if(nt(Se=He(Ae.concat(Pe)))&&Array.isArray(me[Pe]))return void(tt.calc=!0);Ye()}}function Te(he){var me=he._fullLayout,Ae=he.getBoundingClientRect();if(!y.equalDomRects(Ae,me._lastBBox)){var we=me._invTransform=y.inverseTransformMatrix(y.getFullTransformMatrix(he));me._invScaleX=Math.sqrt(we[0][0]*we[0][0]+we[0][1]*we[0][1]+we[0][2]*we[0][2]),me._invScaleY=Math.sqrt(we[1][0]*we[1][0]+we[1][1]*we[1][1]+we[1][2]*we[1][2]),me._lastBBox=Ae}}K.animate=function(he,me,Ae){if(he=y.getGraphDiv(he),!y.isPlotDiv(he))throw new Error("This element is not a Plotly plot: "+he+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var we=he._transitionData;we._frameQueue||(we._frameQueue=[]);var Se=(Ae=f.supplyAnimationDefaults(Ae)).transition,Pe=Ae.frame;function ze(Oe){return Array.isArray(Se)?Oe>=Se.length?Se[0]:Se[Oe]:Se}function He(Oe){return Array.isArray(Pe)?Oe>=Pe.length?Pe[0]:Pe[Oe]:Pe}function tt(Oe,Be){var Je=0;return function(){if(Oe&&++Je===Be)return Oe()}}return void 0===we._frameWaitingCnt&&(we._frameWaitingCnt=0),new Promise(function(Oe,Be){function Ye(){he.emit("plotly_animating"),we._lastFrameAt=-1/0,we._timeToNext=0,we._runningTransitions=0,we._currentFrame=null;var Ze=function(){we._animationRaf=window.requestAnimationFrame(Ze),Date.now()-we._lastFrameAt>we._timeToNext&&function(){we._currentFrame&&we._currentFrame.onComplete&&we._currentFrame.onComplete();var Ze=we._currentFrame=we._frameQueue.shift();if(Ze){var Ne=Ze.name?Ze.name.toString():null;he._fullLayout._currentFrame=Ne,we._lastFrameAt=Date.now(),we._timeToNext=Ze.frameOpts.duration,f.transition(he,Ze.frame.data,Ze.frame.layout,b.coerceTraceIndices(he,Ze.frame.traces),Ze.frameOpts,Ze.transitionOpts).then(function(){Ze.onComplete&&Ze.onComplete()}),he.emit("plotly_animatingframe",{name:Ne,frame:Ze.frame,animation:{frame:Ze.frameOpts,transition:Ze.transitionOpts}})}else he.emit("plotly_animated"),window.cancelAnimationFrame(we._animationRaf),we._animationRaf=null}()};Ze()}var nt,ft,dt=0;function Rt(Ze){return Ze.transitionOpts=Array.isArray(Se)?dt>=Se.length?Se[dt]:Se[0]:Se,dt++,Ze}var Et=[],at=null==me,rt=Array.isArray(me);if(at||rt||!y.isPlainObject(me)){if(at||-1!==["string","number"].indexOf(typeof me))for(nt=0;nt<we._frames.length;nt++)(ft=we._frames[nt])&&(at||String(ft.group)===String(me))&&Et.push({type:"byname",name:String(ft.name),data:Rt({name:ft.name})});else if(rt)for(nt=0;nt<me.length;nt++){var St=me[nt];-1!==["number","string"].indexOf(typeof St)?(St=String(St),Et.push({type:"byname",name:St,data:Rt({name:St})})):y.isPlainObject(St)&&Et.push({type:"object",data:Rt(y.extendFlat({},St))})}}else Et.push({type:"object",data:Rt(y.extendFlat({},me))});for(nt=0;nt<Et.length;nt++)if("byname"===(ft=Et[nt]).type&&!we._frameHash[ft.data.name])return y.warn('animate failure: frame not found: "'+ft.data.name+'"'),void Be();-1!==["next","immediate"].indexOf(Ae.mode)&&function(){if(0!==we._frameQueue.length){for(;we._frameQueue.length;){var Ze=we._frameQueue.pop();Ze.onInterrupt&&Ze.onInterrupt()}he.emit("plotly_animationinterrupted",[])}}(),"reverse"===Ae.direction&&Et.reverse();var Xt=he._fullLayout._currentFrame;if(Xt&&Ae.fromcurrent){var lr=-1;for(nt=0;nt<Et.length;nt++)if("byname"===(ft=Et[nt]).type&&ft.name===Xt){lr=nt;break}if(lr>0&&lr<Et.length-1){var Ue=[];for(nt=0;nt<Et.length;nt++)ft=Et[nt],("byname"!==Et[nt].type||nt>lr)&&Ue.push(ft);Et=Ue}}Et.length>0?function(Ze){if(0!==Ze.length){for(var Ne=0;Ne<Ze.length;Ne++){var it;it="byname"===Ze[Ne].type?f.computeFrame(he,Ze[Ne].name):Ze[Ne].data;var ke=He(Ne),De=ze(Ne);De.duration=Math.min(De.duration,ke.duration);var Re={frame:it,name:Ze[Ne].name,frameOpts:ke,transitionOpts:De};Ne===Ze.length-1&&(Re.onComplete=tt(Oe,2),Re.onInterrupt=Be),we._frameQueue.push(Re)}"immediate"===Ae.mode&&(we._lastFrameAt=-1/0),we._animationRaf||Ye()}}(Et):(he.emit("plotly_animated"),Oe())})},K.addFrames=function(he,me,Ae){if(he=y.getGraphDiv(he),null==me)return Promise.resolve();if(!y.isPlotDiv(he))throw new Error("This element is not a Plotly plot: "+he+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var we,Se,Pe,ze,He=he._transitionData._frames,tt=he._transitionData._frameHash;if(!Array.isArray(me))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+me);var Oe=He.length+2*me.length,Be=[],Je={};for(we=me.length-1;we>=0;we--)if(y.isPlainObject(me[we])){var Ye=me[we].name,nt=(tt[Ye]||Je[Ye]||{}).name,ft=me[we].name;nt&&ft&&"number"==typeof ft&&(tt[nt]||Je[nt])&&A<5&&(A++,y.warn('addFrames: overwriting frame "'+(tt[nt]||Je[nt]).name+'" with a frame whose name of type "number" also equates to "'+nt+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===A&&y.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Je[Ye]={name:Ye},Be.push({frame:f.supplyFrameDefaults(me[we]),index:Ae&&null!=Ae[we]?Ae[we]:Oe+we})}Be.sort(function(Ue,Ze){return Ue.index>Ze.index?-1:Ue.index<Ze.index?1:0});var Rt=[],Et=[],at=He.length;for(we=Be.length-1;we>=0;we--){if("number"==typeof(Se=Be[we].frame).name&&y.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Se.name)for(;tt[Se.name="frame "+he._transitionData._counter++];);if(tt[Se.name]){for(Pe=0;Pe<He.length&&(He[Pe]||{}).name!==Se.name;Pe++);Rt.push({type:"replace",index:Pe,value:Se}),Et.unshift({type:"replace",index:Pe,value:He[Pe]})}else ze=Math.max(0,Math.min(Be[we].index,at)),Rt.push({type:"insert",index:ze,value:Se}),Et.unshift({type:"delete",index:ze}),at++}return t&&t.add(he,f.modifyFrames,[he,Et],f.modifyFrames,[he,Rt]),f.modifyFrames(he,Rt)},K.deleteFrames=function(he,me){if(he=y.getGraphDiv(he),!y.isPlotDiv(he))throw new Error("This element is not a Plotly plot: "+he);var Ae,we,Se=he._transitionData._frames,Pe=[],ze=[];if(!me)for(me=[],Ae=0;Ae<Se.length;Ae++)me.push(Ae);for((me=me.slice()).sort(),Ae=me.length-1;Ae>=0;Ae--)Pe.push({type:"delete",index:we=me[Ae]}),ze.unshift({type:"insert",index:we,value:Se[we]});return t&&t.add(he,f.modifyFrames,[he,ze],f.modifyFrames,[he,Pe]),f.modifyFrames(he,Pe)},K.addTraces=function he(me,Ae,we){me=y.getGraphDiv(me);var Se,Pe,ze=[],He=K.deleteTraces,tt=he,Oe=[me,ze],Be=[me,Ae];for(function(Je,Ye,nt){var ft,dt;if(!Array.isArray(Je.data))throw new Error("gd.data must be an array.");if(void 0===Ye)throw new Error("traces must be defined.");for(Array.isArray(Ye)||(Ye=[Ye]),ft=0;ft<Ye.length;ft++)if("object"!=typeof(dt=Ye[ft])||Array.isArray(dt)||null===dt)throw new Error("all values in traces array must be non-array objects");if(void 0===nt||Array.isArray(nt)||(nt=[nt]),void 0!==nt&&nt.length!==Ye.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(me,Ae,we),Array.isArray(Ae)||(Ae=[Ae]),Ae=Ae.map(function(Je){return y.extendFlat({},Je)}),b.cleanData(Ae),Se=0;Se<Ae.length;Se++)me.data.push(Ae[Se]);for(Se=0;Se<Ae.length;Se++)ze.push(-Ae.length+Se);if(void 0===we)return Pe=K.redraw(me),t.add(me,He,Oe,tt,Be),Pe;Array.isArray(we)||(we=[we]);try{C(me,ze,we)}catch(Je){throw me.data.splice(me.data.length-Ae.length,Ae.length),Je}return t.startSequence(me),t.add(me,He,Oe,tt,Be),Pe=K.moveTraces(me,ze,we),t.stopSequence(me),Pe},K.deleteTraces=function he(me,Ae){me=y.getGraphDiv(me);var we,Se,Pe=[],ze=K.addTraces,He=he,tt=[me,Pe,Ae],Oe=[me,Ae];if(void 0===Ae)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ae)||(Ae=[Ae]),S(me,Ae,"indices"),(Ae=D(Ae,me.data.length-1)).sort(y.sorterDes),we=0;we<Ae.length;we+=1)Se=me.data.splice(Ae[we],1)[0],Pe.push(Se);var Be=K.redraw(me);return t.add(me,ze,tt,He,Oe),Be},K.extendTraces=function he(me,Ae,we,Se){function Pe(Oe,Be,Je){var Ye,nt;if(y.isTypedArray(Oe))if(Je<0){var ft=new Oe.constructor(0),dt=B(Oe,Be);Je<0?(Ye=dt,nt=ft):(Ye=ft,nt=dt)}else if(Ye=new Oe.constructor(Je),nt=new Oe.constructor(Oe.length+Be.length-Je),Je===Be.length)Ye.set(Be),nt.set(Oe);else if(Je<Be.length){var Rt=Be.length-Je;Ye.set(Be.subarray(Rt)),nt.set(Oe),nt.set(Be.subarray(0,Rt),Oe.length)}else{var Et=Je-Be.length,at=Oe.length-Et;Ye.set(Oe.subarray(at)),Ye.set(Be,Et),nt.set(Oe.subarray(0,at))}else Ye=Oe.concat(Be),nt=Je>=0&&Je<Ye.length?Ye.splice(0,Ye.length-Je):[];return[Ye,nt]}var ze=z(me=y.getGraphDiv(me),Ae,we,Se,Pe),He=K.redraw(me);return t.add(me,K.prependTraces,[me,ze.update,we,ze.maxPoints],he,arguments),He},K.moveTraces=function he(me,Ae,we){var Se,Pe=[],ze=[],He=he,tt=he,Oe=[me=y.getGraphDiv(me),we,Ae],Be=[me,Ae,we];if(C(me,Ae,we),Ae=Array.isArray(Ae)?Ae:[Ae],void 0===we)for(we=[],Se=0;Se<Ae.length;Se++)we.push(-Ae.length+Se);for(we=Array.isArray(we)?we:[we],Ae=D(Ae,me.data.length-1),we=D(we,me.data.length-1),Se=0;Se<me.data.length;Se++)-1===Ae.indexOf(Se)&&Pe.push(me.data[Se]);for(Se=0;Se<Ae.length;Se++)ze.push({newIndex:we[Se],trace:me.data[Ae[Se]]});for(ze.sort(function(Ye,nt){return Ye.newIndex-nt.newIndex}),Se=0;Se<ze.length;Se+=1)Pe.splice(ze[Se].newIndex,0,ze[Se].trace);me.data=Pe;var Je=K.redraw(me);return t.add(me,He,Oe,tt,Be),Je},K.prependTraces=function he(me,Ae,we,Se){function Pe(Oe,Be,Je){var Ye,nt;if(y.isTypedArray(Oe))if(Je<=0){var ft=new Oe.constructor(0),dt=B(Be,Oe);Je<0?(Ye=dt,nt=ft):(Ye=ft,nt=dt)}else if(Ye=new Oe.constructor(Je),nt=new Oe.constructor(Oe.length+Be.length-Je),Je===Be.length)Ye.set(Be),nt.set(Oe);else if(Je<Be.length){var Rt=Be.length-Je;Ye.set(Be.subarray(0,Rt)),nt.set(Be.subarray(Rt)),nt.set(Oe,Rt)}else{var Et=Je-Be.length;Ye.set(Be),Ye.set(Oe.subarray(0,Et),Be.length),nt.set(Oe.subarray(Et))}else Ye=Be.concat(Oe),nt=Je>=0&&Je<Ye.length?Ye.splice(Je,Ye.length):[];return[Ye,nt]}var ze=z(me=y.getGraphDiv(me),Ae,we,Se,Pe),He=K.redraw(me);return t.add(me,K.extendTraces,[me,ze.update,we,ze.maxPoints],he,arguments),He},K.newPlot=function(he,me,Ae,we){return he=y.getGraphDiv(he),f.cleanPlot([],{},he._fullData||[],he._fullLayout||{}),f.purge(he),K._doPlot(he,me,Ae,we)},K._doPlot=function(he,me,Ae,we){var Se;if(he=y.getGraphDiv(he),n.init(he),y.isPlainObject(me)){var Pe=me;me=Pe.data,Ae=Pe.layout,we=Pe.config,Se=Pe.frames}if(!1===n.triggerHandler(he,"plotly_beforeplot",[me,Ae,we]))return Promise.reject();me||Ae||y.isPlotDiv(he)||y.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",he),O(he,we),Ae||(Ae={}),p.select(he).classed("js-plotly-plot",!0),i.makeTester(),Array.isArray(he._promises)||(he._promises=[]);var ze=0===(he.data||[]).length&&Array.isArray(me);Array.isArray(me)&&(b.cleanData(me),ze?he.data=me:he.data.push.apply(he.data,me),he.empty=!1),he.layout&&!ze||(he.layout=b.cleanLayout(Ae)),f.supplyDefaults(he);var He=he._fullLayout,tt=He._has("cartesian");He._replotting=!0,(ze||He._shouldCreateBgLayer)&&(function(Et){var at=p.select(Et),rt=Et._fullLayout;if(rt._calcInverseTransform=Te,rt._calcInverseTransform(Et),rt._container=at.selectAll(".plot-container").data([0]),rt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),rt._paperdiv=rt._container.selectAll(".svg-container").data([0]),rt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),rt._glcontainer=rt._paperdiv.selectAll(".gl-container").data([{}]),rt._glcontainer.enter().append("div").classed("gl-container",!0),rt._paperdiv.selectAll(".main-svg").remove(),rt._paperdiv.select(".modebar-container").remove(),rt._paper=rt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),rt._toppaper=rt._paperdiv.append("svg").classed("main-svg",!0),rt._modebardiv=rt._paperdiv.append("div"),delete rt._modeBar,rt._hoverpaper=rt._paperdiv.append("svg").classed("main-svg",!0),!rt._uid){var St={};p.selectAll("defs").each(function(){this.id&&(St[this.id.split("-")[1]]=1)}),rt._uid=y.randstr(St)}rt._paperdiv.selectAll(".main-svg").attr(h.svgAttrs),rt._defs=rt._paper.append("defs").attr("id","defs-"+rt._uid),rt._clips=rt._defs.append("g").classed("clips",!0),rt._topdefs=rt._toppaper.append("defs").attr("id","topdefs-"+rt._uid),rt._topclips=rt._topdefs.append("g").classed("clips",!0),rt._bgLayer=rt._paper.append("g").classed("bglayer",!0),rt._draggers=rt._paper.append("g").classed("draglayer",!0);var Xt=rt._paper.append("g").classed("layer-below",!0);rt._imageLowerLayer=Xt.append("g").classed("imagelayer",!0),rt._shapeLowerLayer=Xt.append("g").classed("shapelayer",!0),rt._cartesianlayer=rt._paper.append("g").classed("cartesianlayer",!0),rt._polarlayer=rt._paper.append("g").classed("polarlayer",!0),rt._smithlayer=rt._paper.append("g").classed("smithlayer",!0),rt._ternarylayer=rt._paper.append("g").classed("ternarylayer",!0),rt._geolayer=rt._paper.append("g").classed("geolayer",!0),rt._funnelarealayer=rt._paper.append("g").classed("funnelarealayer",!0),rt._pielayer=rt._paper.append("g").classed("pielayer",!0),rt._iciclelayer=rt._paper.append("g").classed("iciclelayer",!0),rt._treemaplayer=rt._paper.append("g").classed("treemaplayer",!0),rt._sunburstlayer=rt._paper.append("g").classed("sunburstlayer",!0),rt._indicatorlayer=rt._toppaper.append("g").classed("indicatorlayer",!0),rt._glimages=rt._paper.append("g").classed("glimages",!0);var lr=rt._toppaper.append("g").classed("layer-above",!0);rt._imageUpperLayer=lr.append("g").classed("imagelayer",!0),rt._shapeUpperLayer=lr.append("g").classed("shapelayer",!0),rt._infolayer=rt._toppaper.append("g").classed("infolayer",!0),rt._menulayer=rt._toppaper.append("g").classed("menulayer",!0),rt._zoomlayer=rt._toppaper.append("g").classed("zoomlayer",!0),rt._hoverlayer=rt._hoverpaper.append("g").classed("hoverlayer",!0),rt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Et.emit("plotly_framework")}(he),He._shouldCreateBgLayer&&delete He._shouldCreateBgLayer),i.initGradients(he),i.initPatterns(he),ze&&s.saveShowSpikeInitial(he);var Oe=!he.calcdata||he.calcdata.length!==(he._fullData||[]).length;Oe&&f.doCalcdata(he);for(var Be=0;Be<he.calcdata.length;Be++)he.calcdata[Be][0].trace=he._fullData[Be];he._context.responsive?he._responsiveChartHandler||(he._responsiveChartHandler=function(){y.isHidden(he)||f.resize(he)},window.addEventListener("resize",he._responsiveChartHandler)):y.clearResponsive(he);var Je=y.extendFlat({},He._size),Ye=0;function nt(){if(f.clearAutoMarginIds(he),g.drawMarginPushers(he),s.allowAutoMargin(he),He._has("pie"))for(var Et=he._fullData,at=0;at<Et.length;at++){var rt=Et[at];"pie"===rt.type&&rt.automargin&&f.allowAutoMargin(he,"pie."+rt.uid+".automargin")}return f.doAutoMargin(he),f.previousPromises(he)}function ft(){he._transitioning||(g.doAutoRangeAndConstraints(he),ze&&s.saveRangeInitial(he),a.getComponentMethod("rangeslider","calcAutorange")(he))}var dt=[f.previousPromises,function(){if(Se)return K.addFrames(he,Se)},function Et(){for(var at=He._basePlotModules,rt=0;rt<at.length;rt++)at[rt].drawFramework&&at[rt].drawFramework(he);!He._glcanvas&&He._has("gl")&&(He._glcanvas=He._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Ue){return Ue.key}),He._glcanvas.enter().append("canvas").attr("class",function(Ue){return"gl-canvas gl-canvas-"+Ue.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var St=he._context.plotGlPixelRatio;if(He._glcanvas){He._glcanvas.attr("width",He.width*St).attr("height",He.height*St).style("width",He.width+"px").style("height",He.height+"px");var Xt=He._glcanvas.data()[0].regl;if(Xt&&(Math.floor(He.width*St)!==Xt._gl.drawingBufferWidth||Math.floor(He.height*St)!==Xt._gl.drawingBufferHeight)){var lr="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Ye)return y.log(lr+" Clearing graph and plotting again."),f.cleanPlot([],{},he._fullData,He),f.supplyDefaults(he),He=he._fullLayout,f.doCalcdata(he),Ye++,Et();y.error(lr)}}return"h"===He.modebar.orientation?He._modebardiv.style("height",null).style("width","100%"):He._modebardiv.style("width",null).style("height",He.height+"px"),f.previousPromises(he)},nt,function(){if(f.didMarginChange(Je,He._size))return y.syncOrAsync([nt,g.layoutStyles],he)}];tt&&dt.push(function(){if(Oe)return y.syncOrAsync([a.getComponentMethod("shapes","calcAutorange"),a.getComponentMethod("annotations","calcAutorange"),ft],he);ft()}),dt.push(g.layoutStyles),tt&&dt.push(function(){return s.draw(he,ze?"":"redraw")},function(Et){Et._fullLayout._insideTickLabelsAutorange&&te(Et,Et._fullLayout._insideTickLabelsAutorange).then(function(){Et._fullLayout._insideTickLabelsAutorange=void 0})}),dt.push(g.drawData,g.finalDraw,c,f.addLinks,f.rehover,f.redrag,f.doAutoMargin,function(Et){Et._fullLayout._insideTickLabelsAutorange&&ze&&s.saveRangeInitial(Et,!0)},f.previousPromises);var Rt=y.syncOrAsync(dt,he);return Rt&&Rt.then||(Rt=Promise.resolve()),Rt.then(function(){return T(he),he})},K.purge=function(he){var me=(he=y.getGraphDiv(he))._fullLayout||{};return f.cleanPlot([],{},he._fullData||[],me),f.purge(he),n.purge(he),me._container&&me._container.remove(),delete he._context,he},K.react=function(he,me,Ae,we){var Se,Pe;he=y.getGraphDiv(he),b.clearPromiseQueue(he);var Re,Ie,Ke,ut,xt,gt,ze=he._fullData,He=he._fullLayout;if(y.isPlotDiv(he)&&ze&&He){if(y.isPlainObject(me)){var tt=me;me=tt.data,Ae=tt.layout,we=tt.config,Se=tt.frames}var Oe=!1;if(we){var Be=y.extendDeep({},he._context);he._context=void 0,O(he,we),Oe=function Re(Ie,Ke){var ut;for(ut in Ie)if("_"!==ut.charAt(0)){var xt=Ie[ut],gt=Ke[ut];if(xt!==gt)if(y.isPlainObject(xt)&&y.isPlainObject(gt)){if(Re(xt,gt))return!0}else{if(!Array.isArray(xt)||!Array.isArray(gt)||xt.length!==gt.length)return!0;for(var Pt=0;Pt<xt.length;Pt++)if(xt[Pt]!==gt[Pt]&&(!y.isPlainObject(xt[Pt])||!y.isPlainObject(gt[Pt])||Re(xt[Pt],gt[Pt])))return!0}}}(Be,he._context)}he.data=me||[],b.cleanData(he.data),he.layout=Ae||{},b.cleanLayout(he.layout),function(Re,Ie,Ke,ut){var xt,gt,Pt,ct,zt,Ft,Qe,yt,Nt=ut._preGUI,Yt=[],rr={};for(xt in Nt){if(zt=ue(xt,se)){if((ct=(Pt=e(ut,gt=zt.attr||zt.head+".uirevision").get())&&le(gt,Ie))&&ct===Pt&&(null===(Ft=Nt[xt])&&(Ft=void 0),_e(yt=(Qe=e(Ie,xt)).get(),Ft))){void 0===yt&&"autorange"===xt.substr(xt.length-9)&&Yt.push(xt.substr(0,xt.length-10)),Qe.set(G(e(ut,xt).get()));continue}}else y.warn("unrecognized GUI edit: "+xt);delete Nt[xt],"range["===xt.substr(xt.length-8,6)&&(rr[xt.substr(0,xt.length-9)]=1)}for(var Fe=0;Fe<Yt.length;Fe++){var ht=Yt[Fe];if(rr[ht]){var kt=e(Ie,ht).get();kt&&delete kt.autorange}}var Gt=ut._tracePreGUI;for(var Zt in Gt){var fr,$t=Gt[Zt],nr=null;for(xt in $t){if(!nr){var dr=de(Zt,Ke);if(dr<0){delete Gt[Zt];break}var Tr=ve(Zt,Re,(fr=Ke[dr]._fullInput).index);if(Tr<0){delete Gt[Zt];break}nr=Re[Tr]}if(zt=ue(xt,ie)){if(zt.attr?ct=(Pt=e(ut,zt.attr).get())&&le(zt.attr,Ie):(Pt=fr.uirevision,void 0===(ct=nr.uirevision)&&(ct=Ie.uirevision)),ct&&ct===Pt&&(null===(Ft=$t[xt])&&(Ft=void 0),_e(yt=(Qe=e(nr,xt)).get(),Ft))){Qe.set(G(e(fr,xt).get()));continue}}else y.warn("unrecognized GUI edit: "+xt+" in trace uid "+Zt);delete $t[xt]}}}(he.data,he.layout,ze,He),f.supplyDefaults(he,{skipUpdateCalc:!0});var Je=he._fullData,Ye=he._fullLayout,nt=void 0===Ye.datarevision,ft=Ye.transition,dt=(Re=he,Ie=He,Ke=Ye,ut=nt,xt=ft,(gt=w.layoutFlags()).arrays={},gt.rangesAltered={},gt.nChanges=0,gt.nChangesAnim=0,be(Ie,Ke,[],{getValObject:function(ct){return r.getLayoutValObject(Ke,ct)},flags:gt,immutable:ut,transition:xt,gd:Re}),(gt.plot||gt.calc)&&(gt.layoutReplot=!0),xt&&gt.nChanges&&gt.nChangesAnim&&(gt.anim=gt.nChanges===gt.nChangesAnim?"all":"some"),gt),Et=function(Re,Ie,Ke,ut,xt,gt){var Pt=Ie.length===Ke.length;if(!xt&&!Pt)return{fullReplot:!0,calc:!0};var ct,zt,Ft=w.traceFlags();Ft.arrays={},Ft.nChanges=0,Ft.nChangesAnim=0;var Qe={getValObject:function(Nt){var Yt=r.getTraceValObject(zt,Nt);return!zt._module.animatable&&Yt.anim&&(Yt.anim=!1),Yt},flags:Ft,immutable:ut,transition:xt,newDataRevision:gt,gd:Re},yt={};for(ct=0;ct<Ie.length;ct++)if(Ke[ct]){if(f.hasMakesDataTransform(zt=Ke[ct]._fullInput)&&(zt=Ke[ct]),yt[zt.uid])continue;yt[zt.uid]=1,be(Ie[ct]._fullInput,zt,[],Qe)}return(Ft.calc||Ft.plot)&&(Ft.fullReplot=!0),xt&&Ft.nChanges&&Ft.nChangesAnim&&(Ft.anim=Ft.nChanges===Ft.nChangesAnim&&Pt?"all":"some"),Ft}(he,ze,Je,nt,ft,dt.newDataRevision);if($(he)&&(dt.layoutReplot=!0),Et.calc||dt.calc){he.calcdata=void 0;for(var at=Object.getOwnPropertyNames(Ye),rt=0;rt<at.length;rt++){var St=at[rt],Xt=St.substring(0,5);if("xaxis"===Xt||"yaxis"===Xt){var lr=Ye[St]._emptyCategories;lr&&lr()}}}else f.supplyDefaultsUpdateCalc(he.calcdata,Je);var Ue=[];if(Se&&(he._transitionData={},f.createTransitionData(he),Ue.push(function(){return K.addFrames(he,Se)})),Ye.transition&&!Oe&&(Et.anim||dt.anim))dt.ticks&&Ue.push(g.doTicksRelayout),f.doCalcdata(he),g.doAutoRangeAndConstraints(he),Ue.push(function(){return f.transitionFromReact(he,Et,dt,He)});else if(Et.fullReplot||dt.layoutReplot||Oe)he._fullLayout._skipDefaults=!0,Ue.push(K._doPlot);else{for(var Ze in dt.arrays){var Ne=dt.arrays[Ze];if(Ne.length){var it=a.getComponentMethod(Ze,"drawOne");if(it!==y.noop)for(var ke=0;ke<Ne.length;ke++)it(he,Ne[ke]);else{var De=a.getComponentMethod(Ze,"draw");if(De===y.noop)throw new Error("cannot draw components: "+Ze);De(he)}}}Ue.push(f.previousPromises),Et.style&&Ue.push(g.doTraceStyle),(Et.colorbars||dt.colorbars)&&Ue.push(g.doColorBars),dt.legend&&Ue.push(g.doLegend),dt.layoutstyle&&Ue.push(g.layoutStyles),dt.axrange&&N(Ue),dt.ticks&&Ue.push(g.doTicksRelayout),dt.modebar&&Ue.push(g.doModeBar),dt.camera&&Ue.push(g.doCamera),Ue.push(T)}Ue.push(f.rehover,f.redrag),(Pe=y.syncOrAsync(Ue,he))&&Pe.then||(Pe=Promise.resolve(he))}else Pe=K.newPlot(he,me,Ae,we);return Pe.then(function(){return he.emit("plotly_react",{data:me,layout:Ae}),he})},K.redraw=function(he){if(he=y.getGraphDiv(he),!y.isPlotDiv(he))throw new Error("This element is not a Plotly plot: "+he);return b.cleanData(he.data),b.cleanLayout(he.layout),he.calcdata=void 0,K._doPlot(he).then(function(){return he.emit("plotly_redraw"),he})},K.relayout=te,K.restyle=U,K.setPlotConfig=function(he){return y.extendFlat(d,he)},K.update=re,K._guiRelayout=ne(te),K._guiRestyle=ne(U),K._guiUpdate=ne(re),K._storeDirectGUIEdit=function(he,me,Ae){for(var we in Ae)Z(we,e(he,we).get(),Ae[we],me)}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(x,Q,K){"use strict";var p={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},v={};(function u(y,e){for(var n in y){var t=y[n];t.valType?e[n]=t.dflt:(e[n]||(e[n]={}),u(t,e[n]))}})(p,v),Q.exports={configAttributes:p,dfltConfig:v}},{}],542:[function(x,Q,K){"use strict";var p=x("../registry"),v=x("../lib"),u=x("../plots/attributes"),y=x("../plots/layout_attributes"),e=x("../plots/frame_attributes"),n=x("../plots/animation_attributes"),t=x("./plot_config").configAttributes,a=x("./edit_types"),r=v.extendDeepAll,f=v.isPlainObject,s=v.isArrayOrTypedArray,i=v.nestedProperty,l=v.valObjectMeta,c=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function h(_,A,T){if(!_)return!1;if(_._isLinkedToArray)if(m(A[T]))T++;else if(T<A.length)return!1;for(;T<A.length;T++){var E=_[A[T]];if(!f(E)||(_=E,T===A.length-1))break;if(_._isLinkedToArray){if(!m(A[++T]))return!1}else if("info_array"===_.valType){var k=A[++T];if(!m(k))return!1;var O=_.items;if(Array.isArray(O)){if(k>=O.length)return!1;if(2===_.dimensions){if(T++,A.length===T)return _;var D=A[T];if(!m(D))return!1;_=O[k][D]}else _=O[k]}else _=O}}return _}function m(_){return _===Math.round(_)&&_>=0}function d(){var _,A,T={};for(_ in r(T,y),p.subplotsRegistry)if((A=p.subplotsRegistry[_]).layoutAttributes)if(Array.isArray(A.attr))for(var E=0;E<A.attr.length;E++)g(T,A,A.attr[E]);else g(T,A,"subplot"===A.attr?A.name:A.attr);for(_ in p.componentsRegistry){var k=(A=p.componentsRegistry[_]).schema;if(k&&(k.subplots||k.layout)){var O=k.subplots;if(O&&O.xaxis&&!O.yaxis)for(var D in O.xaxis)delete T.yaxis[D]}else"colorscale"===A.name?r(T,A.layoutAttributes):A.layoutAttributes&&w(T,A.layoutAttributes,A.name)}return{layoutAttributes:b(T)}}function o(){var _={frames:r({},e)};return b(_),_.frames}function b(_){return K.crawl(_,function(T,E,k){K.isValObject(T)?!0!==T.arrayOk&&"data_array"!==T.valType||(k[E+"src"]={valType:"string",editType:"none"}):f(T)&&(T.role="object")}),K.crawl(_,function(T,E,k){if(T){var O=T._isLinkedToArray;O&&(delete T._isLinkedToArray,k[E]={items:{}},k[E].items[O]=T,k[E].role="object")}}),function(A){!function T(E){for(var k in E)if(f(E[k]))T(E[k]);else if(Array.isArray(E[k]))for(var O=0;O<E[k].length;O++)T(E[k][O]);else E[k]instanceof RegExp&&(E[k]=E[k].toString())}(A)}(_),_}function g(_,A,T){var E=i(_,T),k=r({},A.layoutAttributes);k._isSubplotObj=!0,E.set(k)}function w(_,A,T){var E=i(_,T);E.set(r(E.get()||{},A))}K.IS_SUBPLOT_OBJ="_isSubplotObj",K.IS_LINKED_TO_ARRAY="_isLinkedToArray",K.DEPRECATED="_deprecated",K.UNDERSCORE_ATTRS=c,K.get=function(){var _={};p.allTypes.forEach(function(T){_[T]=function(E){var k,O;O=(k=p.modules[E]._module).basePlotModule;var D={type:null},S=r({},u),C=r({},k.attributes);K.crawl(C,function(U,G,X,Z,q){i(S,q).set(void 0),void 0===U&&i(C,q).set(void 0)}),r(D,S),p.traceIs(E,"noOpacity")&&delete D.opacity,p.traceIs(E,"showLegend")||(delete D.showlegend,delete D.legendgroup),p.traceIs(E,"noHover")&&(delete D.hoverinfo,delete D.hoverlabel),k.selectPoints||delete D.selectedpoints,r(D,C),O.attributes&&r(D,O.attributes),D.type=E;var z={meta:k.meta||{},categories:k.categories||{},animatable:Boolean(k.animatable),type:E,attributes:b(D)};if(k.layoutAttributes){var B={};r(B,k.layoutAttributes),z.layoutAttributes=b(B)}return k.animatable||K.crawl(z,function(U){K.isValObject(U)&&"anim"in U&&delete U.anim}),z}(T)});var A={};return Object.keys(p.transformsRegistry).forEach(function(T){var E,O;A[T]=(O=r({},p.transformsRegistry[E=T].attributes),Object.keys(p.componentsRegistry).forEach(function(D){var S=p.componentsRegistry[D];S.schema&&S.schema.transforms&&S.schema.transforms[E]&&Object.keys(S.schema.transforms[E]).forEach(function(C){w(O,S.schema.transforms[E][C],C)})}),{attributes:b(O)})}),{defs:{valObjects:l,metaKeys:c.concat(["description","role","editType","impliedEdits"]),editType:{traces:a.traces,layout:a.layout},impliedEdits:{}},traces:_,layout:d(),transforms:A,frames:o(),animation:b(n),config:b(t)}},K.crawl=function(_,A,T,E){var k=T||0;E=E||"",Object.keys(_).forEach(function(O){var D=_[O];if(-1===c.indexOf(O)){var S=(E?E+".":"")+O;A(D,O,_,k,S),K.isValObject(D)||f(D)&&"impliedEdits"!==O&&K.crawl(D,A,k+1,S)}})},K.isValObject=function(_){return _&&void 0!==_.valType},K.findArrayAttributes=function(_){var A,T,E=[],k=[],O=[];function D(U,G,X,Z){k=k.slice(0,Z).concat([G]),O=O.slice(0,Z).concat([U&&U._isLinkedToArray]),U&&("data_array"===U.valType||!0===U.arrayOk)&&("colorbar"!==k[Z-1]||"ticktext"!==G&&"tickvals"!==G)&&function q(W,te,R){var N=W[k[te]],V=R+k[te];if(te===k.length-1)s(N)&&E.push(T+V);else if(O[te]){if(Array.isArray(N))for(var ee=0;ee<N.length;ee++)f(N[ee])&&q(N[ee],te+1,V+"["+ee+"].")}else f(N)&&q(N,te+1,V+".")}(A,0,"")}A=_,T="",K.crawl(u,D),_._module&&_._module.attributes&&K.crawl(_._module.attributes,D);var S=_.transforms;if(S)for(var C=0;C<S.length;C++){var z=S[C],B=z._module;B&&(T="transforms["+C+"].",A=z,K.crawl(B.attributes,D))}return E},K.getTraceValObject=function(_,A){var T,E,k=A[0],O=1;if("transforms"===k){if(1===A.length)return u.transforms;var D=_.transforms;if(!Array.isArray(D)||!D.length)return!1;var S=A[1];if(!m(S)||S>=D.length)return!1;E=(T=(p.transformsRegistry[D[S].type]||{}).attributes)&&T[A[2]],O=3}else{var C=_._module;if(C||(C=(p.modules[_.type||u.type.dflt]||{})._module),!C)return!1;if(!(E=(T=C.attributes)&&T[k])){var z=C.basePlotModule;z&&z.attributes&&(E=z.attributes[k])}E||(E=u[k])}return h(E,A,O)},K.getLayoutValObject=function(_,A){return h(function(T,E){var k,O,D,S,C=T._basePlotModules;if(C){var z;for(k=0;k<C.length;k++){if((D=C[k]).attrRegex&&D.attrRegex.test(E)){if(D.layoutAttrOverrides)return D.layoutAttrOverrides;!z&&D.layoutAttributes&&(z=D.layoutAttributes)}var B=D.baseLayoutAttrOverrides;if(B&&E in B)return B[E]}if(z)return z}var U=T._modules;if(U)for(k=0;k<U.length;k++)if((S=U[k].layoutAttributes)&&E in S)return S[E];for(O in p.componentsRegistry){if("colorscale"===(D=p.componentsRegistry[O]).name&&0===E.indexOf("coloraxis"))return D.layoutAttributes[E];if(!D.schema&&E===D.name)return D.layoutAttributes}return E in y&&y[E]}(_,A[0]),A,1)}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(x,Q,K){"use strict";var p=x("../lib"),v=x("../plots/attributes"),u={name:{valType:"string",editType:"none"}};function y(n){return n&&"string"==typeof n}function e(n){return"s"!==n.charAt(n.length-1)&&p.warn("bad argument to arrayDefaultKey: "+n),n.substr(0,n.length-1)+"defaults"}u.templateitemname={valType:"string",editType:"calc"},K.templatedArray=function(n,t){return t._isLinkedToArray=n,t.name=u.name,t.templateitemname=u.templateitemname,t},K.traceTemplater=function(n){var t,a,r={};for(t in n)a=n[t],Array.isArray(a)&&a.length&&(r[t]=0);return{newTrace:function(f){var s={type:t=p.coerce(f,{},v,"type"),_template:null};if(t in r){var i=r[t]%(a=n[t]).length;r[t]++,s._template=a[i]}return s}}},K.newContainer=function(n,t,a){var r=n._template,f=r&&(r[t]||a&&r[a]);return p.isPlainObject(f)||(f=null),n[t]={_template:f}},K.arrayTemplater=function(n,t,a){var r=n._template,f=r&&r[e(t)],s=r&&r[t];Array.isArray(s)&&s.length||(s=[]);var i={};return{newItem:function(l){var c={name:l.name,_input:l},h=c.templateitemname=l.templateitemname;if(!y(h))return c._template=f,c;for(var m=0;m<s.length;m++){var d=s[m];if(d.name===h)return i[h]=1,c._template=d,c}return c[a]=l[a]||!1,c._template=!1,c},defaultItems:function(){for(var l=[],c=0;c<s.length;c++){var h=s[c],m=h.name;if(y(m)&&!i[m]){var d={_template:h,name:m,_input:{_templateitemname:m}};d.templateitemname=h.templateitemname,l.push(d),i[m]=1}}return l}}},K.arrayDefaultKey=e,K.arrayEditor=function(n,t,a){var r=(p.nestedProperty(n,t).get()||[]).length,f=a._index,s=f>=r&&(a._input||{})._templateitemname;s&&(f=r);var i,l=t+"["+f+"]";function c(){i={},s&&(i[l]={},i[l].templateitemname=s)}function h(d,o){s?p.nestedProperty(i[l],d).set(o):i[l+"."+d]=o}function m(){var d=i;return c(),d}return c(),{modifyBase:function(d,o){i[d]=o},modifyItem:h,getUpdateObj:m,applyUpdate:function(d,o){d&&h(d,o);var b=m();for(var g in b)p.nestedProperty(n,g).set(b[g])}}}},{"../lib":503,"../plots/attributes":550}],544:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../registry"),u=x("../plots/plots"),y=x("../lib"),e=x("../lib/clear_gl_canvases"),n=x("../components/color"),t=x("../components/drawing"),a=x("../components/titles"),r=x("../components/modebar"),f=x("../plots/cartesian/axes"),s=x("../constants/alignment"),i=x("../plots/cartesian/constraints"),l=i.enforce,c=i.clean,h=x("../plots/cartesian/autorange").doAutoRange;function m(A,T,E){for(var k=0;k<E.length;k++){var O=E[k][0],D=E[k][1];if(!(O[0]>=A[1]||O[1]<=A[0])&&D[0]<T[1]&&D[1]>T[0])return!0}return!1}function d(A){var T,E,k,O,D,S,C=A._fullLayout,z=C._size,B=z.p,U=f.list(A,"",!0);if(C._paperdiv.style({width:A._context.responsive&&C.autosize&&!A._context._hasZeroWidth&&!A.layout.width?"100%":C.width+"px",height:A._context.responsive&&C.autosize&&!A._context._hasZeroHeight&&!A.layout.height?"100%":C.height+"px"}).selectAll(".main-svg").call(t.setSize,C.width,C.height),A._context.setBackground(A,C.paper_bgcolor),K.drawMainTitle(A),r.manage(A),!C._has("cartesian"))return u.previousPromises(A);function G(Ye,nt,ft){var dt=Ye._lw/2;return"x"===Ye._id.charAt(0)?nt?"top"===ft?nt._offset-B-dt:nt._offset+nt._length+B+dt:z.t+z.h*(1-(Ye.position||0))+dt%1:nt?"right"===ft?nt._offset+nt._length+B+dt:nt._offset-B-dt:z.l+z.w*(Ye.position||0)+dt%1}for(T=0;T<U.length;T++){var X=(O=U[T])._anchorAxis;O._linepositions={},O._lw=t.crispRound(A,O.linewidth,1),O._mainLinePosition=G(O,X,O.side),O._mainMirrorPosition=O.mirror&&X?G(O,X,s.OPPOSITE_SIDE[O.side]):null}var Z=[],q=[],W=[],te=1===n.opacity(C.paper_bgcolor)&&1===n.opacity(C.plot_bgcolor)&&C.paper_bgcolor===C.plot_bgcolor;for(E in C._plots)if((k=C._plots[E]).mainplot)k.bg&&k.bg.remove(),k.bg=void 0;else{var R=k.xaxis.domain,N=k.yaxis.domain,V=k.plotgroup;if(m(R,N,W)){var ee=V.node(),j=k.bg=y.ensureSingle(V,"rect","bg");ee.insertBefore(j.node(),ee.childNodes[0]),q.push(E)}else V.select("rect.bg").remove(),W.push([R,N]),te||(Z.push(E),q.push(E))}var J,$,re,ne,se,ie,ue,le,de,ve,_e,be,Te,he=C._bgLayer.selectAll(".bg").data(Z);for(he.enter().append("rect").classed("bg",!0),he.exit().remove(),he.each(function(Ye){C._plots[Ye].bg=p.select(this)}),T=0;T<q.length;T++)D=(k=C._plots[q[T]]).xaxis,S=k.yaxis,k.bg&&void 0!==D._offset&&void 0!==S._offset&&k.bg.call(t.setRect,D._offset-B,S._offset-B,D._length+2*B,S._length+2*B).call(n.fill,C.plot_bgcolor).style("stroke-width",0);if(!C._hasOnlyLargeSploms)for(E in C._plots){D=(k=C._plots[E]).xaxis,S=k.yaxis;var me,Ae,we=k.clipId="clip"+C._uid+E+"plot",Se=y.ensureSingleById(C._clips,"clipPath",we,function(Ye){Ye.classed("plotclip",!0).append("rect")});k.clipRect=Se.select("rect").attr({width:D._length,height:S._length}),t.setTranslate(k.plot,D._offset,S._offset),k._hasClipOnAxisFalse?(me=null,Ae=we):(me=we,Ae=null),t.setClipUrl(k.plot,me,A),k.layerClipId=Ae}function Pe(Ye){return"M"+J+","+Ye+"H"+$}function ze(Ye){return"M"+D._offset+","+Ye+"h"+D._length}function He(Ye){return"M"+Ye+","+le+"V"+ue}function tt(Ye){return"M"+Ye+","+S._offset+"v"+S._length}function Oe(Ye,nt,ft){if(!Ye.showline||E!==Ye._mainSubplot)return"";if(!Ye._anchorAxis)return ft(Ye._mainLinePosition);var dt=nt(Ye._mainLinePosition);return Ye.mirror&&(dt+=nt(Ye._mainMirrorPosition)),dt}for(E in C._plots){S=(k=C._plots[E]).yaxis;var Be="M0,0";o(D=k.xaxis,E)&&(se=g(D,"left",S,U),J=D._offset-(se?B+se:0),ie=g(D,"right",S,U),$=D._offset+D._length+(ie?B+ie:0),re=G(D,S,"bottom"),ne=G(D,S,"top"),!(Te=!D._anchorAxis||E!==D._mainSubplot)||"allticks"!==D.mirror&&"all"!==D.mirror||(D._linepositions[E]=[re,ne]),Be=Oe(D,Pe,ze),Te&&D.showline&&("all"===D.mirror||"allticks"===D.mirror)&&(Be+=Pe(re)+Pe(ne)),k.xlines.style("stroke-width",D._lw+"px").call(n.stroke,D.showline?D.linecolor:"rgba(0,0,0,0)")),k.xlines.attr("d",Be);var Je="M0,0";o(S,E)&&(_e=g(S,"bottom",D,U),ue=S._offset+S._length+(_e?B:0),be=g(S,"top",D,U),le=S._offset-(be?B:0),de=G(S,D,"left"),ve=G(S,D,"right"),!(Te=!S._anchorAxis||E!==S._mainSubplot)||"allticks"!==S.mirror&&"all"!==S.mirror||(S._linepositions[E]=[de,ve]),Je=Oe(S,He,tt),Te&&S.showline&&("all"===S.mirror||"allticks"===S.mirror)&&(Je+=He(de)+He(ve)),k.ylines.style("stroke-width",S._lw+"px").call(n.stroke,S.showline?S.linecolor:"rgba(0,0,0,0)")),k.ylines.attr("d",Je)}return f.makeClipPaths(A),u.previousPromises(A)}function o(A,T){return(A.ticks||A.showline)&&(T===A._mainSubplot||"all"===A.mirror||"allticks"===A.mirror)}function b(A,T,E){if(!E.showline||!E._lw)return!1;if("all"===E.mirror||"allticks"===E.mirror)return!0;var k=E._anchorAxis;if(!k)return!1;var O=s.FROM_BL[T];return E.side===T?k.domain[O]===A.domain[O]:E.mirror&&k.domain[1-O]===A.domain[1-O]}function g(A,T,E,k){if(b(A,T,E))return E._lw;for(var O=0;O<k.length;O++){var D=k[O];if(D._mainAxis===E._mainAxis&&b(A,T,D))return D._lw}return 0}function w(A,T){var E=A.title,k=A._size,O=0;switch("start"===T?O=E.pad.l:"end"===T&&(O=-E.pad.r),E.xref){case"paper":return k.l+k.w*E.x+O;case"container":default:return A.width*E.x+O}}function _(A,T){var E=A.title,k=A._size,O=0;if("0em"!==T&&T?T===s.CAP_SHIFT+"em"&&(O=E.pad.t):O=-E.pad.b,"auto"===E.y)return k.t/2;switch(E.yref){case"paper":return k.t+k.h-k.h*E.y+O;case"container":default:return A.height-A.height*E.y+O}}K.layoutStyles=function(A){return y.syncOrAsync([u.doAutoMargin,d],A)},K.drawMainTitle=function(A){var D,S,T=A._fullLayout,E=(S="middle",y.isRightAnchor(D=T.title)?S="end":y.isLeftAnchor(D)&&(S="start"),S),k=function(O){var D=O.title,S="0em";return y.isTopAnchor(D)?S=s.CAP_SHIFT+"em":y.isMiddleAnchor(D)&&(S=s.MID_SHIFT+"em"),S}(T);a.draw(A,"gtitle",{propContainer:T,propName:"title.text",placeholder:T._dfltTitle.plot,attributes:{x:w(T,E),y:_(T,k),"text-anchor":E,dy:k}})},K.doTraceStyle=function(A){var T,E=A.calcdata,k=[];for(T=0;T<E.length;T++){var O=E[T],D=O[0]||{},S=D.trace||{},C=S._module||{},z=C.arraysToCalcdata;z&&z(O,S);var B=C.editStyle;B&&k.push({fn:B,cd0:D})}if(k.length){for(T=0;T<k.length;T++){var U=k[T];U.fn(A,U.cd0)}e(A),K.redrawReglTraces(A)}return u.style(A),v.getComponentMethod("legend","draw")(A),u.previousPromises(A)},K.doColorBars=function(A){return v.getComponentMethod("colorbar","draw")(A),u.previousPromises(A)},K.layoutReplot=function(A){var T=A.layout;return A.layout=void 0,v.call("_doPlot",A,"",T)},K.doLegend=function(A){return v.getComponentMethod("legend","draw")(A),u.previousPromises(A)},K.doTicksRelayout=function(A){return f.draw(A,"redraw"),A._fullLayout._hasOnlyLargeSploms&&(v.subplotsRegistry.splom.updateGrid(A),e(A),K.redrawReglTraces(A)),K.drawMainTitle(A),u.previousPromises(A)},K.doModeBar=function(A){var T=A._fullLayout;r.manage(A);for(var E=0;E<T._basePlotModules.length;E++){var k=T._basePlotModules[E].updateFx;k&&k(A)}return u.previousPromises(A)},K.doCamera=function(A){for(var T=A._fullLayout,E=T._subplots.gl3d,k=0;k<E.length;k++){var O=T[E[k]];O._scene.setViewport(O)}},K.drawData=function(A){var T=A._fullLayout;e(A);for(var E=T._basePlotModules,k=0;k<E.length;k++)E[k].plot(A);return K.redrawReglTraces(A),u.style(A),v.getComponentMethod("shapes","draw")(A),v.getComponentMethod("annotations","draw")(A),v.getComponentMethod("images","draw")(A),T._replotting=!1,u.previousPromises(A)},K.redrawReglTraces=function(A){var T=A._fullLayout;if(T._has("regl")){var E,k,O=A._fullData,D=[],S=[];for(T._hasOnlyLargeSploms&&T._splomGrid.draw(),E=0;E<O.length;E++){var C=O[E];!0===C.visible&&0!==C._length&&("splom"===C.type?T._splomScenes[C.uid].draw():"scattergl"===C.type?y.pushUnique(D,C.xaxis+C.yaxis):"scatterpolargl"===C.type&&y.pushUnique(S,C.subplot))}for(E=0;E<D.length;E++)(k=T._plots[D[E]])._scene&&k._scene.draw();for(E=0;E<S.length;E++)(k=T[S[E]]._subplot)._scene&&k._scene.draw()}},K.doAutoRangeAndConstraints=function(A){for(var T,E=f.list(A,"",!0),k={},O=0;O<E.length;O++)if(!k[(T=E[O])._id]){k[T._id]=1,c(A,T),h(A,T);var D=T._matchGroup;if(D)for(var S in D){var C=f.getFromId(A,S);h(A,C,T.range),k[S]=1}}l(A)},K.finalDraw=function(A){v.getComponentMethod("rangeslider","draw")(A),v.getComponentMethod("rangeselector","draw")(A)},K.drawMarginPushers=function(A){v.getComponentMethod("legend","draw")(A),v.getComponentMethod("rangeselector","draw")(A),v.getComponentMethod("sliders","draw")(A),v.getComponentMethod("updatemenus","draw")(A),v.getComponentMethod("colorbar","draw")(A)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(x,Q,K){"use strict";var p=x("../lib"),v=p.isPlainObject,u=x("./plot_schema"),y=x("../plots/plots"),e=x("../plots/attributes"),n=x("./plot_template"),t=x("./plot_config").dfltConfig;function a(m,d){m=p.extendDeep({},m);var o,b,g=Object.keys(m).sort();function w(k,O,D){if(v(O)&&v(k))a(k,O);else if(Array.isArray(O)&&Array.isArray(k)){var S=n.arrayTemplater({_template:m},D);for(b=0;b<O.length;b++){var C=O[b],z=S.newItem(C)._template;z&&a(z,C)}var B=S.defaultItems();for(b=0;b<B.length;b++)O.push(B[b]._template);for(b=0;b<O.length;b++)delete O[b].templateitemname}}for(o=0;o<g.length;o++){var _=g[o],A=m[_];if(_ in d?w(A,d[_],_):d[_]=A,r(_)===_)for(var T in d){var E=r(T);T===E||E!==_||T in m||w(A,d[T],_)}}}function r(m){return m.replace(/[0-9]+$/,"")}function f(m,d,o,b,g){var w=g&&o(g);for(var _ in m){var A=m[_],T=l(m,_,b),E=l(m,_,g),k=o(E);if(!k){var O=r(_);O!==_&&(k=o(E=l(m,O,g)))}if(!(w&&w===k||!k||k._noTemplating||"data_array"===k.valType||k.arrayOk&&Array.isArray(A)))if(!k.valType&&v(A))f(A,d,o,T,E);else if(k._isLinkedToArray&&Array.isArray(A))for(var D=!1,S=0,C={},z=0;z<A.length;z++){var B=A[z];if(v(B)){var U=B.name;if(U)C[U]||(f(B,d,o,l(A,S,T),l(A,S,E)),S++,C[U]=1);else if(!D){var G=l(m,n.arrayDefaultKey(_),b),X=l(A,S,T);f(B,d,o,X,l(A,S,E));var Z=p.nestedProperty(d,X);p.nestedProperty(d,G).set(Z.get()),Z.set(null),D=!0}}}else p.nestedProperty(d,T).set(A)}}function s(m,d){return u.getLayoutValObject(m,p.nestedProperty({},d).parts)}function i(m,d){return u.getTraceValObject(m,p.nestedProperty({},d).parts)}function l(m,d,o){return o?Array.isArray(m)?o+"["+d+"]":o+"."+d:d}function c(m){for(var d=0;d<m.length;d++)if(v(m[d]))return!0}function h(m){var d;switch(m.code){case"data":d="The template has no key data.";break;case"layout":d="The template has no key layout.";break;case"missing":d=m.path?"There are no templates for item "+m.path+" with name "+m.templateitemname:"There are no templates for trace "+m.index+", of type "+m.traceType+".";break;case"unused":d=m.path?"The template item at "+m.path+" was not used in constructing the plot.":m.dataCount?"Some of the templates of type "+m.traceType+" were not used. The template has "+m.templateCount+" traces, the data only has "+m.dataCount+" of this type.":"The template has "+m.templateCount+" traces of type "+m.traceType+" but there are none in the data.";break;case"reused":d="Some of the templates of type "+m.traceType+" were used more than once. The template has "+m.templateCount+" traces, the data has "+m.dataCount+" of this type."}return m.msg=d,m}K.makeTemplate=function(m){m=p.isPlainObject(m)?m:p.getGraphDiv(m),m=p.extendDeep({_context:t},{data:m.data,layout:m.layout}),y.supplyDefaults(m);var d=m.data||[],o=m.layout||{};o._basePlotModules=m._fullLayout._basePlotModules,o._modules=m._fullLayout._modules;var b={data:{},layout:{}};d.forEach(function(S){var C={};f(S,C,i.bind(null,S));var z=p.coerce(S,{},e,"type"),B=b.data[z];B||(B=b.data[z]=[]),B.push(C)}),f(o,b.layout,s.bind(null,o)),delete b.layout.template;var g=o.template;if(v(g)){var w,_,A,T,E,k,O=g.layout;v(O)&&a(O,b.layout);var D=g.data;if(v(D)){for(_ in b.data)if(A=D[_],Array.isArray(A)){for(k=(E=b.data[_]).length,T=A.length,w=0;w<k;w++)a(A[w%T],E[w]);for(w=k;w<T;w++)E.push(p.extendDeep({},A[w]))}for(_ in D)_ in b.data||(b.data[_]=p.extendDeep([],D[_]))}}return b},K.validateTemplate=function(m,d){var o=p.extendDeep({},{_context:t,data:m.data,layout:m.layout}),b=o.layout||{};v(d)||(d=b.template||{});var g=d.layout,w=d.data,_=[];o.layout=b,o.layout.template=d,y.supplyDefaults(o);var A=o._fullLayout,T=o._fullData,E={};if(v(g)?(function B(U,G){for(var X in U)if("_"!==X.charAt(0)&&v(U[X])){var Z,q=r(X),W=[];for(Z=0;Z<G.length;Z++)W.push(l(U,X,G[Z])),q!==X&&W.push(l(U,q,G[Z]));for(Z=0;Z<W.length;Z++)E[W[Z]]=1;B(U[X],W)}}(A,["layout"]),function B(U,G){for(var X in U)if(-1===X.indexOf("defaults")&&v(U[X])){var Z=l(U,X,G);E[Z]?B(U[X],Z):_.push({code:"unused",path:Z})}}(g,"layout")):_.push({code:"layout"}),v(w)){for(var k,O={},D=0;D<T.length;D++){var S=T[D];O[k=S.type]=(O[k]||0)+1,S._fullInput._template||_.push({code:"missing",index:S._fullInput.index,traceType:k})}for(k in w){var C=w[k].length,z=O[k]||0;C>z?_.push({code:"unused",traceType:k,templateCount:C,dataCount:z}):z>C&&_.push({code:"reused",traceType:k,templateCount:C,dataCount:z})}}else _.push({code:"data"});if(function B(U,G){for(var X in U)if("_"!==X.charAt(0)){var Z=U[X],q=l(U,X,G);v(Z)?(Array.isArray(U)&&!1===Z._template&&Z.templateitemname&&_.push({code:"missing",path:q,templateitemname:Z.templateitemname}),B(Z,q)):Array.isArray(Z)&&c(Z)&&B(Z,q)}}({data:T,layout:A},""),_.length)return _.map(h)}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("./plot_api"),u=x("../plots/plots"),y=x("../lib"),e=x("../snapshot/helpers"),n=x("../snapshot/tosvg"),t=x("../snapshot/svgtoimg"),a=x("../version").version,r={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};Q.exports=function(f,s){var i,l,c,h;function m(z){return!(z in s)||y.validate(s[z],r[z])}if(s=s||{},y.isPlainObject(f)?(i=f.data||[],l=f.layout||{},c=f.config||{},h={}):(f=y.getGraphDiv(f),i=y.extendDeep([],f.data),l=y.extendDeep({},f.layout),c=f._context,h=f._fullLayout||{}),!m("width")&&null!==s.width||!m("height")&&null!==s.height)throw new Error("Height and width should be pixel values.");if(!m("format"))throw new Error("Export format is not "+y.join2(r.format.values,", "," or ")+".");var d={};function o(z,B){return y.coerce(s,d,r,z,B)}var b=o("format"),g=o("width"),w=o("height"),_=o("scale"),A=o("setBackground"),T=o("imageDataOnly"),E=document.createElement("div");E.style.position="absolute",E.style.left="-5000px",document.body.appendChild(E);var k=y.extendFlat({},l);g?k.width=g:null===s.width&&p(h.width)&&(k.width=h.width),w?k.height=w:null===s.height&&p(h.height)&&(k.height=h.height);var O=y.extendFlat({},c,{_exportedPlot:!0,staticPlot:!0,setBackground:A}),D=e.getRedrawFunc(E);function S(){return new Promise(function(z){setTimeout(z,e.getDelay(E._fullLayout))})}function C(){return new Promise(function(z,B){var U=n(E,b,_),G=E._fullLayout.width,X=E._fullLayout.height;function Z(){v.purge(E),document.body.removeChild(E)}if("full-json"===b){var q=u.graphJson(E,!1,"keepdata","object",!0,!0);return q.version=a,q=JSON.stringify(q),Z(),z(T?q:e.encodeJSON(q))}if(Z(),"svg"===b)return z(T?U:e.encodeSVG(U));var W=document.createElement("canvas");W.id=y.randstr(),t({format:b,width:G,height:X,scale:_,canvas:W,svg:U,promise:!0}).then(z).catch(B)})}return new Promise(function(z,B){v.newPlot(E,i,k,O).then(D).then(S).then(C).then(function(U){var G;z((G=U,T?G.replace(e.IMAGE_URL_PREFIX,""):G))}).catch(function(U){B(U)})})}},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1118,"./plot_api":540,"fast-isnumeric":190}],547:[function(x,Q,K){"use strict";var p=x("../lib"),v=x("../plots/plots"),u=x("./plot_schema"),y=x("./plot_config").dfltConfig,e=p.isPlainObject,n=Array.isArray,t=p.isArrayOrTypedArray;function a(d,o,b,g,w,_){_=_||[];for(var A=Object.keys(d),T=0;T<A.length;T++){var E=A[T];if("transforms"!==E){var k=_.slice();k.push(E);var O=d[E],D=o[E],S=c(b,E),C=(S||{}).valType,z="info_array"===C,B="colorscale"===C,U=(S||{}).items;if(l(b,E))if(e(O)&&e(D)&&"any"!==C)a(O,D,S,g,w,k);else if(z&&n(O)){O.length>D.length&&g.push(i("unused",w,k.concat(D.length)));var G,X,q,W,te=D.length,R=Array.isArray(U);if(R&&(te=Math.min(te,U.length)),2===S.dimensions)for(X=0;X<te;X++)if(n(O[X])){O[X].length>D[X].length&&g.push(i("unused",w,k.concat(X,D[X].length)));var N=D[X].length;for(G=0;G<(R?Math.min(N,U[X].length):N);G++)W=D[X][G],p.validate(q=O[X][G],R?U[X][G]:U)?W!==q&&W!==+q&&g.push(i("dynamic",w,k.concat(X,G),q,W)):g.push(i("value",w,k.concat(X,G),q))}else g.push(i("array",w,k.concat(X),O[X]));else for(X=0;X<te;X++)W=D[X],p.validate(q=O[X],R?U[X]:U)?W!==q&&W!==+q&&g.push(i("dynamic",w,k.concat(X),q,W)):g.push(i("value",w,k.concat(X),q))}else if(S.items&&!z&&n(O)){var V,ee,j=U[Object.keys(U)[0]],J=[];for(V=0;V<D.length;V++){var $=D[V]._index||V;if((ee=k.slice()).push($),e(O[$])&&e(D[V])){J.push($);var re=O[$],ne=D[V];e(re)&&!1!==re.visible&&!1===ne.visible?g.push(i("invisible",w,ee)):a(re,ne,j,g,w,ee)}}for(V=0;V<O.length;V++)(ee=k.slice()).push(V),e(O[V])?-1===J.indexOf(V)&&g.push(i("unused",w,ee)):g.push(i("object",w,ee,O[V]))}else!e(O)&&e(D)?g.push(i("object",w,k,O)):t(O)||!t(D)||z||B?E in o?p.validate(O,S)?"enumerated"===S.valType&&(S.coerceNumber&&O!==+D||O!==D)&&g.push(i("dynamic",w,k,O,D)):g.push(i("value",w,k,O)):g.push(i("unused",w,k,O)):g.push(i("array",w,k,O));else g.push(i("schema",w,k))}}return g}function r(d,o){for(var b=d.layout.layoutAttributes,g=0;g<o.length;g++){var w=o[g],_=d.traces[w.type],A=_.layoutAttributes;A&&p.extendFlat(w.subplot?b[_.attributes.subplot.dflt]:b,A)}return b}Q.exports=function(d,o){void 0===d&&(d=[]),void 0===o&&(o={});var b,g,w=u.get(),_=[],A={_context:p.extendFlat({},y)};n(d)?(A.data=p.extendDeep([],d),b=d):(A.data=[],b=[],_.push(i("array","data"))),e(o)?(A.layout=p.extendDeep({},o),g=o):(A.layout={},g={},arguments.length>1&&_.push(i("object","layout"))),v.supplyDefaults(A);for(var T=A._fullData,E=b.length,k=0;k<E;k++){var O=b[k],D=["data",k];if(e(O)){var S=T[k],C=S.type,z=w.traces[C].attributes;z.type={valType:"enumerated",values:[C]},!1===S.visible&&!1!==O.visible&&_.push(i("invisible",D)),a(O,S,z,_,D);var B=O.transforms,U=S.transforms;if(B){n(B)||_.push(i("array",D,["transforms"])),D.push("transforms");for(var G=0;G<B.length;G++){var X=["transforms",G],Z=B[G].type;if(e(B[G])){var q=w.transforms[Z]?w.transforms[Z].attributes:{};q.type={valType:"enumerated",values:Object.keys(w.transforms)},a(B[G],U[G],q,_,D,X)}else _.push(i("object",D,X))}}}else _.push(i("object",D))}return a(g,A._fullLayout,r(w,T),_,"layout"),0===_.length?void 0:_};var f={object:function(d,o){return("layout"===d&&""===o?"The layout argument":"data"===d[0]&&""===o?"Trace "+d[1]+" in the data argument":s(d)+"key "+o)+" must be linked to an object container"},array:function(d,o){return("data"===d?"The data argument":s(d)+"key "+o)+" must be linked to an array container"},schema:function(d,o){return s(d)+"key "+o+" is not part of the schema"},unused:function(d,o,b){var g=e(b)?"container":"key";return s(d)+g+" "+o+" did not get coerced"},dynamic:function(d,o,b,g){return[s(d)+"key",o,"(set to '"+b+"')","got reset to","'"+g+"'","during defaults."].join(" ")},invisible:function(d,o){return(o?s(d)+"item "+o:"Trace "+d[1])+" got defaulted to be not visible"},value:function(d,o,b){return[s(d)+"key "+o,"is set to an invalid value ("+b+")"].join(" ")}};function s(d){return n(d)?"In data trace "+d[1]+", ":"In "+d+", "}function i(d,o,b,g,w){var _,A;b=b||"",n(o)?(_=o[0],A=o[1]):(_=o,A=null);var T=function(k){if(!n(k))return String(k);for(var O="",D=0;D<k.length;D++){var S=k[D];"number"==typeof S?O=O.substr(0,O.length-1)+"["+S+"]":O+=S,D<k.length-1&&(O+=".")}return O}(b),E=f[d](o,T,g,w);return p.log(E),{code:d,container:_,trace:A,path:b,astr:T,msg:E}}function l(d,o){var b=m(o),g=b.keyMinusId;return!!(g in d&&d[g]._isSubplotObj&&b.id)||o in d}function c(d,o){return o in d?d[o]:d[m(o).keyMinusId]}var h=p.counterRegex("([a-z]+)");function m(d){var o=d.match(h);return{keyMinusId:o&&o[1],id:o&&o[2]}}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(x,Q,K){"use strict";Q.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(x,Q,K){"use strict";var p=x("../lib"),v=x("../plot_api/plot_template");Q.exports=function(u,y,e){var n,t,a=e.name,r=e.inclusionAttr||"visible",f=y[a],s=p.isArrayOrTypedArray(u[a])?u[a]:[],i=y[a]=[],l=v.arrayTemplater(y,a,r);for(n=0;n<s.length;n++){var c=s[n];p.isPlainObject(c)?t=l.newItem(c):(t=l.newItem({}))[r]=!1,t._index=n,!1!==t[r]&&e.handleItemDefaults(c,t,y,e),i.push(t)}var h=l.defaultItems();for(n=0;n<h.length;n++)(t=h[n])._index=i.length,e.handleItemDefaults({},t,y,e,{}),i.push(t);if(p.isArrayOrTypedArray(f)){var m=Math.min(f.length,i.length);for(n=0;n<m;n++)p.relinkPrivateKeys(i[n],f[n])}return i}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(x,Q,K){"use strict";var p=x("./font_attributes"),v=x("../components/fx/attributes");Q.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:p({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:v.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib"),u=v.dateTime2ms,y=v.incrementMonth,e=x("../../constants/numerical").ONEAVGMONTH;Q.exports=function(n,t,a,r){if("date"!==t.type)return{vals:r};var f=n[a+"periodalignment"];if(!f)return{vals:r};var s,i=n[a+"period"];if(p(i)){if((i=+i)<=0)return{vals:r}}else if("string"==typeof i&&"M"===i.charAt(0)){var l=+i.substring(1);if(!(l>0&&Math.round(l)===l))return{vals:r};s=l}for(var c=t.calendar,h="start"===f,m="end"===f,o=u(n[a+"period0"],c)||0,b=[],g=[],w=[],_=r.length,A=0;A<_;A++){var T,E,k,O=r[A];if(s){for(T=Math.round((O-o)/(s*e)),k=y(o,s*T,c);k>O;)k=y(k,-s,c);for(;k<=O;)k=y(k,s,c);E=y(k,-s,c)}else{for(k=o+(T=Math.round((O-o)/i))*i;k>O;)k-=i;for(;k<=O;)k+=i;E=k-i}b[A]=h?E:m?k:(E+k)/2,g[A]=E,w[A]=k}return{vals:b,starts:g,ends:w}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(x,Q,K){"use strict";Q.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("fast-isnumeric"),u=x("../../lib"),y=x("../../constants/numerical").FP_SAFE,e=x("../../registry"),n=x("../../components/drawing"),t=x("./axis_ids"),a=t.getFromId,r=t.isLinked;function f(g,w){var _,A,T=[],E=g._fullLayout,k=i(E,w,0),O=i(E,w,1),D=l(g,w),S=D.min,C=D.max;if(0===S.length||0===C.length)return u.simpleMap(w.range,w.r2l);var z=S[0].val,B=C[0].val;for(_=1;_<S.length&&z===B;_++)z=Math.min(z,S[_].val);for(_=1;_<C.length&&z===B;_++)B=Math.max(B,C[_].val);var U=!1;if(w.range){var G=u.simpleMap(w.range,w.r2l);U=G[1]<G[0]}"reversed"===w.autorange&&(U=!0,w.autorange=!0);var X,Z,q,W,te,R,N=w.rangemode,V="tozero"===N,ee="nonnegative"===N,j=w._length,J=j/10,$=0;for(_=0;_<S.length;_++)for(X=S[_],A=0;A<C.length;A++)(R=(Z=C[A]).val-X.val-s(w,X.val,Z.val))>0&&((te=j-k(X)-O(Z))>J?R/te>$&&(q=X,W=Z,$=R/te):R/j>$&&(q={val:X.val,nopad:1},W={val:Z.val,nopad:1},$=R/j));if(z===B){var re=z-1,ne=z+1;if(V)if(0===z)T=[0,1];else{var se=(z>0?C:S).reduce(function(ue,le){return Math.max(ue,O(le))},0),ie=z/(1-Math.min(.5,se/j));T=z>0?[0,ie]:[ie,0]}else T=ee?[Math.max(0,re),Math.max(1,ne)]:[re,ne]}else V?(q.val>=0&&(q={val:0,nopad:1}),W.val<=0&&(W={val:0,nopad:1})):ee&&(q.val-$*k(q)<0&&(q={val:0,nopad:1}),W.val<=0&&(W={val:1,nopad:1})),$=(W.val-q.val-s(w,X.val,Z.val))/(j-k(q)-O(W)),T=[q.val-$*k(q),W.val+$*O(W)];return U&&T.reverse(),u.simpleMap(T,w.l2r||Number)}function s(g,w,_){var A=0;if(g.rangebreaks)for(var T=g.locateBreaks(w,_),E=0;E<T.length;E++){var k=T[E];A+=k.max-k.min}return A}function i(g,w,_){var A=.05*w._length,T=w._anchorAxis||{};if(-1!==(w.ticklabelposition||"").indexOf("inside")||-1!==(T.ticklabelposition||"").indexOf("inside")){var E="reversed"===w.autorange;if(!E){var k=u.simpleMap(w.range,w.r2l);E=k[1]<k[0]}E&&(_=!_)}var O=0;return r(g,w._id)||(O=function(D,S,C){var z=0,B="x"===S._id.charAt(0);for(var U in D._plots){var G=D._plots[U];if(S._id===G.xaxis._id||S._id===G.yaxis._id){var X=(B?G.yaxis:G.xaxis)||{};if(-1!==(X.ticklabelposition||"").indexOf("inside")&&(!C&&("left"===X.side||"bottom"===X.side)||C&&("top"===X.side||"right"===X.side))){if(X._vals){var Z=u.deg2rad(X._tickAngles[X._id+"tick"]||0),q=Math.abs(Math.cos(Z)),W=Math.abs(Math.sin(Z));X._vals[0].bb||X._selections[X._id+"tick"].each(function(j){var J=p.select(this);J.select(".text-math-group").empty()&&(j.bb=n.bBox(J.node()))});for(var R=0;R<X._vals.length;R++){var N=X._vals[R].bb;if(N){var V=6+N.width,ee=6+N.height;z=Math.max(z,B?Math.max(V*q,ee*W):Math.max(ee*q,V*W))}}}"inside"===X.ticks&&"inside"===X.ticklabelposition&&(z+=X.ticklen||0)}}}return z}(g,w,_)),A=Math.max(O,A),"domain"===w.constrain&&w._inputDomain&&(A*=(w._inputDomain[1]-w._inputDomain[0])/(w.domain[1]-w.domain[0])),function(D){return D.nopad?0:D.pad+(D.extrapad?A:O)}}function l(g,w,_){var A,T,E,k=w._id,D=g._fullLayout,S=[],C=[];function z(Z,q){for(A=0;A<q.length;A++){var W=Z[q[A]],te=(W._extremes||{})[k];if(!0===W.visible&&te){for(T=0;T<te.min.length;T++)c(S,(E=te.min[T]).val,E.pad,{extrapad:E.extrapad});for(T=0;T<te.max.length;T++)h(C,(E=te.max[T]).val,E.pad,{extrapad:E.extrapad})}}}if(z(g._fullData,w._traceIndices),z(D.annotations||[],w._annIndices||[]),z(D.shapes||[],w._shapeIndices||[]),w._matchGroup&&!_)for(var B in w._matchGroup)if(B!==w._id){var U=a(g,B),G=l(g,U,!0),X=w._length/U._length;for(T=0;T<G.min.length;T++)c(S,(E=G.min[T]).val,E.pad*X,{extrapad:E.extrapad});for(T=0;T<G.max.length;T++)h(C,(E=G.max[T]).val,E.pad*X,{extrapad:E.extrapad})}return{min:S,max:C}}function c(g,w,_,A){m(g,w,_,A,o)}function h(g,w,_,A){m(g,w,_,A,b)}function m(g,w,_,A,T){for(var E=A.tozero,k=A.extrapad,O=!0,D=0;D<g.length&&O;D++){var S=g[D];if(T(S.val,w)&&S.pad>=_&&(S.extrapad||!k)){O=!1;break}T(w,S.val)&&S.pad<=_&&(k||!S.extrapad)&&(g.splice(D,1),D--)}if(O){var C=E&&0===w;g.push({val:w,pad:C?0:_,extrapad:!C&&k})}}function d(g){return v(g)&&Math.abs(g)<y}function o(g,w){return g<=w}function b(g,w){return g>=w}Q.exports={getAutoRange:f,makePadFn:i,doAutoRange:function(g,w,_){if(w.setScale(),w.autorange){w.range=_?_.slice():f(g,w),w._r=w.range.slice(),w._rl=u.simpleMap(w._r,w.r2l);var A=w._input,T={};T[w._attr+".range"]=w.range,T[w._attr+".autorange"]=w.autorange,e.call("_storeDirectGUIEdit",g.layout,g._fullLayout._preGUI,T),A.range=w.range.slice(),A.autorange=w.autorange}var E=w._anchorAxis;if(E&&E.rangeslider){var k=E.rangeslider[w._name];k&&"auto"===k.rangemode&&(k.range=f(g,w)),E._input.rangeslider[w._name]=u.extendFlat({},k)}},findExtremes:function(g,w,_){_||(_={}),g._m||g.setScale();var A,T,E,k,O,D,S,C,z,B=[],U=[],G=w.length,X=_.padded||!1,Z=_.tozero&&("linear"===g.type||"-"===g.type),q="log"===g.type,W=!1,te=_.vpadLinearized||!1;function R(ne){if(Array.isArray(ne))return W=!0,function(ie){return Math.max(Number(ne[ie]||0),0)};var se=Math.max(Number(ne||0),0);return function(){return se}}var N=R((g._m>0?_.ppadplus:_.ppadminus)||_.ppad||0),V=R((g._m>0?_.ppadminus:_.ppadplus)||_.ppad||0),ee=R(_.vpadplus||_.vpad),j=R(_.vpadminus||_.vpad);if(!W){if(C=1/0,z=-1/0,q)for(A=0;A<G;A++)(T=w[A])<C&&T>0&&(C=T),T>z&&T<y&&(z=T);else for(A=0;A<G;A++)(T=w[A])<C&&T>-y&&(C=T),T>z&&T<y&&(z=T);w=[C,z],G=2}var J={tozero:Z,extrapad:X};function $(ne){v(E=w[ne])&&(D=N(ne),S=V(ne),te?(k=g.c2l(E)-j(ne),O=g.c2l(E)+ee(ne)):(C=E-j(ne),z=E+ee(ne),q&&C<z/10&&(C=z/10),k=g.c2l(C),O=g.c2l(z)),Z&&(k=Math.min(0,k),O=Math.max(0,O)),d(k)&&c(B,k,S,J),d(O)&&h(U,O,D,J))}var re=Math.min(6,G);for(A=0;A<re;A++)$(A);for(A=G-1;A>=re;A--)$(A);return{min:B,max:U,opts:_}},concatExtremes:l}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("fast-isnumeric"),u=x("../../plots/plots"),y=x("../../registry"),e=x("../../lib"),n=e.strTranslate,t=x("../../lib/svg_text_utils"),a=x("../../components/titles"),r=x("../../components/color"),f=x("../../components/drawing"),s=x("./layout_attributes"),i=x("./clean_ticks"),l=x("../../constants/numerical"),c=l.ONEMAXYEAR,h=l.ONEAVGYEAR,m=l.ONEMINYEAR,d=l.ONEMAXQUARTER,o=l.ONEAVGQUARTER,b=l.ONEMINQUARTER,g=l.ONEMAXMONTH,w=l.ONEAVGMONTH,_=l.ONEMINMONTH,A=l.ONEWEEK,T=l.ONEDAY,E=T/2,k=l.ONEHOUR,O=l.ONEMIN,D=l.ONESEC,S=l.MINUS_SIGN,C=l.BADNUM,z={K:"zeroline"},B={K:"gridline",L:"path"},U={K:"tick",L:"path"},G={K:"tick",L:"text"},X=x("../../constants/alignment"),Z=X.MID_SHIFT,q=X.CAP_SHIFT,W=X.LINE_SPACING,te=X.OPPOSITE_SIDE,R=Q.exports={};R.setConvert=x("./set_convert");var N=x("./axis_autotype"),V=x("./axis_ids"),ee=V.idSort,j=V.isLinked;R.id2name=V.id2name,R.name2id=V.name2id,R.cleanId=V.cleanId,R.list=V.list,R.listIds=V.listIds,R.getFromId=V.getFromId,R.getFromTrace=V.getFromTrace;var J=x("./autorange");function $(Ue){var Ze=1e-4*(Ue[1]-Ue[0]);return[Ue[0]-Ze,Ue[1]+Ze]}R.getAutoRange=J.getAutoRange,R.findExtremes=J.findExtremes,R.coerceRef=function(Ue,Ze,Ne,it,ke,De){var Re=it.charAt(it.length-1),Ie=Ne._fullLayout._subplots[Re+"axis"],Ke=it+"ref",ut={};return ke||(ke=Ie[0]||("string"==typeof De?De:De[0])),De||(De=ke),Ie=Ie.concat(Ie.map(function(xt){return xt+" domain"})),ut[Ke]={valType:"enumerated",values:Ie.concat(De?"string"==typeof De?[De]:De:[]),dflt:ke},e.coerce(Ue,Ze,ut,Ke)},R.getRefType=function(Ue){return void 0===Ue?Ue:"paper"===Ue?"paper":"pixel"===Ue?"pixel":/( domain)$/.test(Ue)?"domain":"range"},R.coercePosition=function(Ue,Ze,Ne,it,ke,De){var Re,Ie;if("range"!==R.getRefType(it))Re=e.ensureNumber,Ie=Ne(ke,De);else{var Ke=R.getFromId(Ze,it);Ie=Ne(ke,De=Ke.fraction2r(De)),Re=Ke.cleanPos}Ue[ke]=Re(Ie)},R.cleanPosition=function(Ue,Ze,Ne){return("paper"===Ne||"pixel"===Ne?e.ensureNumber:R.getFromId(Ze,Ne).cleanPos)(Ue)},R.redrawComponents=function(Ue,Ze){Ze=Ze||R.listIds(Ue);var Ne=Ue._fullLayout;function it(ke,De,Re,Ie){for(var Ke=y.getComponentMethod(ke,De),ut={},xt=0;xt<Ze.length;xt++)for(var gt=Ne[R.id2name(Ze[xt])][Re],Pt=0;Pt<gt.length;Pt++){var ct=gt[Pt];if(!ut[ct]&&(Ke(Ue,ct),ut[ct]=1,Ie))return}}it("annotations","drawOne","_annIndices"),it("shapes","drawOne","_shapeIndices"),it("images","draw","_imgIndices",!0)};var re=R.getDataConversions=function(Ue,Ze,Ne,it){var ke,De="x"===Ne||"y"===Ne||"z"===Ne?Ne:it;if(Array.isArray(De)){if(ke={type:N(it,void 0,{autotypenumbers:Ue._fullLayout.autotypenumbers}),_categories:[]},R.setConvert(ke),"category"===ke.type)for(var Re=0;Re<it.length;Re++)ke.d2c(it[Re])}else ke=R.getFromTrace(Ue,Ze,De);return ke?{d2c:ke.d2c,c2d:ke.c2d}:"ids"===De?{d2c:se,c2d:se}:{d2c:ne,c2d:ne}};function ne(Ue){return+Ue}function se(Ue){return String(Ue)}function ie(Ue){return+Ue.substring(1)}R.getDataToCoordFunc=function(Ue,Ze,Ne,it){return re(Ue,Ze,Ne,it).d2c},R.counterLetter=function(Ue){var Ze=Ue.charAt(0);return"x"===Ze?"y":"y"===Ze?"x":void 0},R.minDtick=function(Ue,Ze,Ne,it){-1===["log","category","multicategory"].indexOf(Ue.type)&&it?void 0===Ue._minDtick?(Ue._minDtick=Ze,Ue._forceTick0=Ne):Ue._minDtick&&((Ue._minDtick/Ze+1e-6)%1<2e-6&&((Ne-Ue._forceTick0)/Ze%1+1.000001)%1<2e-6?(Ue._minDtick=Ze,Ue._forceTick0=Ne):((Ze/Ue._minDtick+1e-6)%1>2e-6||((Ne-Ue._forceTick0)/Ue._minDtick%1+1.000001)%1>2e-6)&&(Ue._minDtick=0)):Ue._minDtick=0},R.saveRangeInitial=function(Ue,Ze){for(var Ne=R.list(Ue,"",!0),it=!1,ke=0;ke<Ne.length;ke++){var De=Ne[ke],Re=void 0===De._rangeInitial;(Re&&!1===De.autorange||Ze&&(Re||De.range[0]!==De._rangeInitial[0]||De.range[1]!==De._rangeInitial[1]))&&(De._rangeInitial=De.range.slice(),it=!0)}return it},R.saveShowSpikeInitial=function(Ue,Ze){for(var Ne=R.list(Ue,"",!0),it=!1,ke="on",De=0;De<Ne.length;De++){var Re=Ne[De],Ie=void 0===Re._showSpikeInitial;(Ie||Ze&&(Ie||Re.showspikes!==Re._showspikes))&&(Re._showSpikeInitial=Re.showspikes,it=!0),"on"!==ke||Re.showspikes||(ke="off")}return Ue._fullLayout._cartesianSpikesEnabled=ke,it},R.autoBin=function(Ue,Ze,Ne,it,ke,De){var Re,Ie=e.aggNums(Math.min,null,Ue),Ke=e.aggNums(Math.max,null,Ue);if("category"===Ze.type||"multicategory"===Ze.type)return{start:Ie-.5,end:Ke+.5,size:Math.max(1,Math.round(De)||1),_dataSpan:Ke-Ie};if(ke||(ke=Ze.calendar),Re="log"===Ze.type?{type:"linear",range:[Ie,Ke]}:{type:Ze.type,range:e.simpleMap([Ie,Ke],Ze.c2r,0,ke),calendar:ke},R.setConvert(Re),De=De&&i.dtick(De,Re.type))Re.dtick=De,Re.tick0=i.tick0(void 0,Re.type,ke);else{var ut;if(Ne)ut=(Ke-Ie)/Ne;else{var xt=e.distinctVals(Ue),gt=Math.pow(10,Math.floor(Math.log(xt.minDiff)/Math.LN10)),Pt=gt*e.roundUp(xt.minDiff/gt,[.9,1.9,4.9,9.9],!0);ut=Math.max(Pt,2*e.stdev(Ue)/Math.pow(Ue.length,it?.25:.4)),v(ut)||(ut=1)}R.autoTicks(Re,ut)}var ct,zt=Re.dtick,Ft=R.tickIncrement(R.tickFirst(Re),zt,"reverse",ke);if("number"==typeof zt)ct=(Ft=function(Qe,yt,Nt,Yt,rr){var Fe=0,ht=0,kt=0,Gt=0;function Zt(dr){return(1+100*(dr-Qe)/Nt.dtick)%100<2}for(var fr=0;fr<yt.length;fr++)yt[fr]%1==0?kt++:v(yt[fr])||Gt++,Zt(yt[fr])&&Fe++,Zt(yt[fr]+Nt.dtick/2)&&ht++;var $t=yt.length-Gt;if(kt===$t&&"date"!==Nt.type)Nt.dtick<1?Qe=Yt-.5*Nt.dtick:(Qe-=.5)+Nt.dtick<Yt&&(Qe+=Nt.dtick);else if(ht<.1*$t&&(Fe>.3*$t||Zt(Yt)||Zt(rr))){var nr=Nt.dtick/2;Qe+=Qe+nr<Yt?nr:-nr}return Qe}(Ft,Ue,Re,Ie,Ke))+(1+Math.floor((Ke-Ft)/zt))*zt;else for("M"===Re.dtick.charAt(0)&&(Ft=function(Qe,yt,Nt,Yt,rr){var Fe=e.findExactDates(yt,rr);if(Fe.exactDays>.8){var ht=Number(Nt.substr(1));Fe.exactYears>.8&&ht%12==0?Qe=R.tickIncrement(Qe,"M6","reverse")+1.5*T:Fe.exactMonths>.8?Qe=R.tickIncrement(Qe,"M1","reverse")+15.5*T:Qe-=E;var kt=R.tickIncrement(Qe,Nt);if(kt<=Yt)return kt}return Qe}(Ft,Ue,zt,Ie,ke)),ct=Ft;ct<=Ke;)ct=R.tickIncrement(ct,zt,!1,ke);return{start:Ze.c2r(Ft,0,ke),end:Ze.c2r(ct,0,ke),size:zt,_dataSpan:Ke-Ie}},R.prepTicks=function(Ue,Ze){var Ne=e.simpleMap(Ue.range,Ue.r2l,void 0,void 0,Ze);if(Ue._dtickInit=Ue.dtick,Ue._tick0Init=Ue.tick0,"auto"===Ue.tickmode||!Ue.dtick){var it,ke=Ue.nticks;ke||("category"===Ue.type||"multicategory"===Ue.type?(it=Ue.tickfont?e.bigFont(Ue.tickfont.size||12):15,ke=Ue._length/it):(it="y"===Ue._id.charAt(0)?40:80,ke=e.constrain(Ue._length/it,4,9)+1),"radialaxis"===Ue._name&&(ke*=2)),"array"===Ue.tickmode&&(ke*=100),Ue._roughDTick=Math.abs(Ne[1]-Ne[0])/ke,R.autoTicks(Ue,Ue._roughDTick),Ue._minDtick>0&&Ue.dtick<2*Ue._minDtick&&(Ue.dtick=Ue._minDtick,Ue.tick0=Ue.l2r(Ue._forceTick0))}"period"===Ue.ticklabelmode&&function(De){var Re;function Ie(){return!(v(De.dtick)||"M"!==De.dtick.charAt(0))}var Ke=Ie(),ut=R.getTickFormat(De);if(ut){var xt=De._dtickInit!==De.dtick;/%[fLQsSMX]/.test(ut)||(/%[HI]/.test(ut)?(Re=k,xt&&!Ke&&De.dtick<k&&(De.dtick=k)):/%p/.test(ut)?(Re=E,xt&&!Ke&&De.dtick<E&&(De.dtick=E)):/%[Aadejuwx]/.test(ut)?(Re=T,xt&&!Ke&&De.dtick<T&&(De.dtick=T)):/%[UVW]/.test(ut)?(Re=A,xt&&!Ke&&De.dtick<A&&(De.dtick=A)):/%[Bbm]/.test(ut)?(Re=w,xt&&(Ke?ie(De.dtick)<1:De.dtick<_)&&(De.dtick="M1")):/%[q]/.test(ut)?(Re=o,xt&&(Ke?ie(De.dtick)<3:De.dtick<b)&&(De.dtick="M3")):/%[Yy]/.test(ut)&&(Re=h,xt&&(Ke?ie(De.dtick)<12:De.dtick<m)&&(De.dtick="M12")))}(Ke=Ie())&&De.tick0===De._dowTick0&&(De.tick0=De._rawTick0),De._definedDelta=Re}(Ue),Ue.tick0||(Ue.tick0="date"===Ue.type?"2000-01-01":0),"date"===Ue.type&&Ue.dtick<.1&&(Ue.dtick=.1),me(Ue)},R.calcTicks=function(Ue,Ze){R.prepTicks(Ue,Ze);var Ne=e.simpleMap(Ue.range,Ue.r2l,void 0,void 0,Ze);if("array"===Ue.tickmode)return function(fr){var $t=fr.tickvals,nr=fr.ticktext,dr=new Array($t.length),Tr=$(e.simpleMap(fr.range,fr.r2l)),wr=Math.min(Tr[0],Tr[1]),mr=Math.max(Tr[0],Tr[1]),_r=0;Array.isArray(nr)||(nr=[]);var Sr="category"===fr.type?fr.d2l_noadd:fr.d2l;"log"===fr.type&&"L"!==String(fr.dtick).charAt(0)&&(fr.dtick="L"+Math.pow(10,Math.floor(Math.min(fr.range[0],fr.range[1]))-1));for(var Gr=0;Gr<$t.length;Gr++){var Er=Sr($t[Gr]);Er>wr&&Er<mr&&(dr[_r]=void 0===nr[Gr]?R.tickText(fr,Er):Ae(fr,Er,String(nr[Gr])),_r++)}return _r<$t.length&&dr.splice(_r,$t.length-_r),fr.rangebreaks&&(dr=dr.filter(function(Zr){return fr.maskBreaks(Zr.x)!==C})),dr}(Ue);var it=$(Ne),ke=it[0],De=it[1],Re=Ne[1]<Ne[0],Ie=Math.min(Ne[0],Ne[1]),Ke=Math.max(Ne[0],Ne[1]),ut="log"===Ue.type&&!(v(Ue.dtick)||"L"===Ue.dtick.charAt(0)),xt="period"===Ue.ticklabelmode;if(Ue._tmin=R.tickFirst(Ue,Ze),Ue._tmin<ke!==Re)return[];"category"!==Ue.type&&"multicategory"!==Ue.type||(De=Re?Math.max(-.5,De):Math.min(Ue._categories.length-.5,De));var gt=Ue._tmin;Ue.rangebreaks&&Ue._tick0Init!==Ue.tick0&&(gt=St(gt,Ue),Re||(gt=R.tickIncrement(gt,Ue.dtick,!Re,Ue.calendar))),xt&&(gt=R.tickIncrement(gt,Ue.dtick,!Re,Ue.calendar));for(var Pt,ct=Math.max(1e3,Ue._length||0),zt=[],Ft=null;Re?gt>=De:gt<=De;gt=R.tickIncrement(gt,Ue.dtick,Re,Ue.calendar)){if(Ue.rangebreaks&&!Re){if(gt<ke)continue;if(Ue.maskBreaks(gt)===C&&St(gt,Ue)>=Ke)break}if(zt.length>ct||gt===Ft)break;Ft=gt;var Qe=!1;ut&&gt!==(0|gt)&&(Qe=!0),zt.push({minor:Qe,value:gt})}if(xt&&function(fr,$t,nr){for(var dr=0;dr<fr.length;dr++){var Tr=fr[dr].value,wr=dr,mr=dr+1;dr<fr.length-1?(wr=dr,mr=dr+1):dr>0?(wr=dr-1,mr=dr):(wr=dr,mr=dr);var _r,Er=Math.abs(fr[mr].value-fr[wr].value),Zr=nr||Er,an=0;Zr>=m?an=Er>=m&&Er<=c?Er:h:nr===o&&Zr>=b?an=Er>=b&&Er<=d?Er:o:Zr>=_?an=Er>=_&&Er<=g?Er:w:nr===A&&Zr>=A?an=A:Zr>=T?an=T:nr===E&&Zr>=E?an=E:nr===k&&Zr>=k&&(an=k),an>=Er&&(an=Er,_r=!0);var gn=Tr+an;if($t.rangebreaks&&an>0){for(var Vn=0,Gn=0;Gn<84;Gn++){var Ln=(Gn+.5)/84;$t.maskBreaks(Tr*(1-Ln)+Ln*gn)!==C&&Vn++}(an*=Vn/84)||(fr[dr].drop=!0),_r&&Er>A&&(an=Er)}(an>0||0===dr)&&(fr[dr].periodX=Tr+an/2)}}(zt,Ue,Ue._definedDelta),Ue.rangebreaks){var yt="y"===Ue._id.charAt(0),Nt=1;"auto"===Ue.tickmode&&(Nt=Ue.tickfont?Ue.tickfont.size:12);var Yt=NaN;for(Pt=zt.length-1;Pt>-1;Pt--)if(zt[Pt].drop)zt.splice(Pt,1);else{zt[Pt].value=St(zt[Pt].value,Ue);var rr=Ue.c2p(zt[Pt].value);(yt?Yt>rr-Nt:Yt<rr+Nt)?zt.splice(Re?Pt+1:Pt,1):Yt=rr}}rt(Ue)&&360===Math.abs(Ne[1]-Ne[0])&&zt.pop(),Ue._tmax=(zt[zt.length-1]||{}).value,Ue._prevDateHead="",Ue._inCalcTicks=!0;var Fe,ht,kt=[];for(Pt=0;Pt<zt.length;Pt++)Fe=R.tickText(Ue,zt[Pt].value,!1,zt[Pt].minor),void 0!==(ht=zt[Pt].periodX)&&(Fe.periodX=ht,(ht>Ke||ht<Ie)&&(ht>Ke&&(Fe.periodX=Ke),ht<Ie&&(Fe.periodX=Ie),Fe.text=" ",Ue._prevDateHead="")),kt.push(Fe);return Ue._inCalcTicks=!1,kt};var ue=[2,5,10],le=[1,2,3,6,12],de=[1,2,5,10,15,30],ve=[1,2,3,7,14],_e=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],be=[-.301,0,.301,.699,1],Te=[15,30,45,90,180];function he(Ue,Ze,Ne){return Ze*e.roundUp(Ue/Ze,Ne)}function me(Ue){var Ze=Ue.dtick;if(Ue._tickexponent=0,v(Ze)||"string"==typeof Ze||(Ze=1),"category"!==Ue.type&&"multicategory"!==Ue.type||(Ue._tickround=null),"date"===Ue.type){var Ne=Ue.r2l(Ue.tick0),it=Ue.l2r(Ne).replace(/(^-|i)/g,""),ke=it.length;if("M"===String(Ze).charAt(0))Ue._tickround=ke>10||"01-01"!==it.substr(5)?"d":+Ze.substr(1)%12==0?"y":"m";else if(Ze>=T&&ke<=10||Ze>=15*T)Ue._tickround="d";else if(Ze>=O&&ke<=16||Ze>=k)Ue._tickround="M";else if(Ze>=D&&ke<=19||Ze>=O)Ue._tickround="S";else{var De=Ue.l2r(Ne+Ze).replace(/^-/,"").length;Ue._tickround=Math.max(ke,De)-20,Ue._tickround<0&&(Ue._tickround=4)}}else if(v(Ze)||"L"===Ze.charAt(0)){var Re=Ue.range.map(Ue.r2d||Number);v(Ze)||(Ze=Number(Ze.substr(1))),Ue._tickround=2-Math.floor(Math.log(Ze)/Math.LN10+.01);var Ie=Math.max(Math.abs(Re[0]),Math.abs(Re[1])),Ke=Math.floor(Math.log(Ie)/Math.LN10+.01),ut=void 0===Ue.minexponent?3:Ue.minexponent;Math.abs(Ke)>ut&&(Ue._tickexponent=Se(Ue.exponentformat)&&!Pe(Ke)?3*Math.round((Ke-1)/3):Ke)}else Ue._tickround=null}function Ae(Ue,Ze,Ne){var it=Ue.tickfont||{};return{x:Ze,dx:0,dy:0,text:Ne||"",fontSize:it.size,font:it.family,fontColor:it.color}}R.autoTicks=function(Ue,Ze){var Ne;function it(xt){return Math.pow(xt,Math.floor(Math.log(Ze)/Math.LN10))}if("date"===Ue.type){Ue.tick0=e.dateTick0(Ue.calendar,0);var ke=2*Ze;if(ke>h)Ze/=h,Ne=it(10),Ue.dtick="M"+12*he(Ze,Ne,ue);else if(ke>w)Ue.dtick="M"+he(Ze/=w,1,le);else if(ke>T){Ue.dtick=he(Ze,T,Ue._hasDayOfWeekBreaks?[1,2,7,14]:ve);var De=R.getTickFormat(Ue),Re="period"===Ue.ticklabelmode;Re&&(Ue._rawTick0=Ue.tick0),Ue.tick0=/%[uVW]/.test(De)?e.dateTick0(Ue.calendar,2):e.dateTick0(Ue.calendar,1),Re&&(Ue._dowTick0=Ue.tick0)}else ke>k?Ue.dtick=he(Ze,k,le):ke>O?Ue.dtick=he(Ze,O,de):ke>D?Ue.dtick=he(Ze,D,de):(Ne=it(10),Ue.dtick=he(Ze,Ne,ue))}else if("log"===Ue.type){Ue.tick0=0;var Ie=e.simpleMap(Ue.range,Ue.r2l);if(Ze>.7)Ue.dtick=Math.ceil(Ze);else if(Math.abs(Ie[1]-Ie[0])<1){var Ke=1.5*Math.abs((Ie[1]-Ie[0])/Ze);Ze=Math.abs(Math.pow(10,Ie[1])-Math.pow(10,Ie[0]))/Ke,Ne=it(10),Ue.dtick="L"+he(Ze,Ne,ue)}else Ue.dtick=Ze>.3?"D2":"D1"}else"category"===Ue.type||"multicategory"===Ue.type?(Ue.tick0=0,Ue.dtick=Math.ceil(Math.max(Ze,1))):rt(Ue)?(Ue.tick0=0,Ue.dtick=he(Ze,Ne=1,Te)):(Ue.tick0=0,Ne=it(10),Ue.dtick=he(Ze,Ne,ue));if(0===Ue.dtick&&(Ue.dtick=1),!v(Ue.dtick)&&"string"!=typeof Ue.dtick){var ut=Ue.dtick;throw Ue.dtick=1,"ax.dtick error: "+String(ut)}},R.tickIncrement=function(Ue,Ze,Ne,it){var ke=Ne?-1:1;if(v(Ze))return e.increment(Ue,ke*Ze);var De=Ze.charAt(0),Re=ke*Number(Ze.substr(1));if("M"===De)return e.incrementMonth(Ue,Re,it);if("L"===De)return Math.log(Math.pow(10,Ue)+Re)/Math.LN10;if("D"===De){var Ie="D2"===Ze?be:_e,Ke=Ue+.01*ke,ut=e.roundUp(e.mod(Ke,1),Ie,Ne);return Math.floor(Ke)+Math.log(p.round(Math.pow(10,ut),1))/Math.LN10}throw"unrecognized dtick "+String(Ze)},R.tickFirst=function(Ue,Ze){var Ne=Ue.r2l||Number,it=e.simpleMap(Ue.range,Ne,void 0,void 0,Ze),ke=it[1]<it[0],De=ke?Math.floor:Math.ceil,Re=$(it)[0],Ie=Ue.dtick,Ke=Ne(Ue.tick0);if(v(Ie)){var ut=De((Re-Ke)/Ie)*Ie+Ke;return"category"!==Ue.type&&"multicategory"!==Ue.type||(ut=e.constrain(ut,0,Ue._categories.length-1)),ut}var xt=Ie.charAt(0),gt=Number(Ie.substr(1));if("M"===xt){for(var Pt,ct,zt,Ft=0,Qe=Ke;Ft<10;){if(((Pt=R.tickIncrement(Qe,Ie,ke,Ue.calendar))-Re)*(Qe-Re)<=0)return ke?Math.min(Qe,Pt):Math.max(Qe,Pt);ct=(Re-(Qe+Pt)/2)/(Pt-Qe),zt=xt+(Math.abs(Math.round(ct))||1)*gt,Qe=R.tickIncrement(Qe,zt,ct<0?!ke:ke,Ue.calendar),Ft++}return e.error("tickFirst did not converge",Ue),Qe}if("L"===xt)return Math.log(De((Math.pow(10,Re)-Ke)/gt)*gt+Ke)/Math.LN10;if("D"===xt){var yt="D2"===Ie?be:_e,Nt=e.roundUp(e.mod(Re,1),yt,ke);return Math.floor(Re)+Math.log(p.round(Math.pow(10,Nt),1))/Math.LN10}throw"unrecognized dtick "+String(Ie)},R.tickText=function(Ue,Ze,Ne,it){var ke,De=Ae(Ue,Ze),Re="array"===Ue.tickmode,Ie=Ne||Re,Ke=Ue.type,ut="category"===Ke?Ue.d2l_noadd:Ue.d2l;if(Re&&Array.isArray(Ue.ticktext)){var xt=e.simpleMap(Ue.range,Ue.r2l),gt=(Math.abs(xt[1]-xt[0])-(Ue._lBreaks||0))/1e4;for(ke=0;ke<Ue.ticktext.length&&!(Math.abs(Ze-ut(Ue.tickvals[ke]))<gt);ke++);if(ke<Ue.ticktext.length)return De.text=String(Ue.ticktext[ke]),De}function Pt(Ft){return void 0===Ft||(Ne?"none"===Ft:"all"!==Ft&&Ze!=={first:Ue._tmin,last:Ue._tmax}[Ft])}var Qe,yt,ct=Ne?"never":"none"!==Ue.exponentformat&&Pt(Ue.showexponent)?"hide":"";if("date"===Ke?function(Ft,Qe,yt,Nt){var Yt=Ft._tickround,rr=yt&&Ft.hoverformat||R.getTickFormat(Ft);Nt&&(Yt=v(Yt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Yt]);var Fe,ht=e.formatDate(Qe.x,rr,Yt,Ft._dateFormat,Ft.calendar,Ft._extraFormat),kt=ht.indexOf("\n");if(-1!==kt&&(Fe=ht.substr(kt+1),ht=ht.substr(0,kt)),Nt&&("00:00:00"===ht||"00:00"===ht?(ht=Fe,Fe=""):8===ht.length&&(ht=ht.replace(/:00$/,""))),Fe)if(yt)"d"===Yt?ht+=", "+Fe:ht=Fe+(ht?", "+ht:"");else if(Ft._inCalcTicks&&Ft._prevDateHead===Fe){var Gt=Xt(Ft),Zt=Ft._trueSide||Ft.side;(!Gt&&"top"===Zt||Gt&&"bottom"===Zt)&&(ht+="<br> ")}else Ft._prevDateHead=Fe,ht+="<br>"+Fe;Qe.text=ht}(Ue,De,Ne,Ie):"log"===Ke?function(Ft,Qe,yt,Nt,Yt){var rr=Ft.dtick,Fe=Qe.x,ht=Ft.tickformat,kt="string"==typeof rr&&rr.charAt(0);if("never"===Yt&&(Yt=""),Nt&&"L"!==kt&&(rr="L3",kt="L"),ht||"L"===kt)Qe.text=ze(Math.pow(10,Fe),Ft,Yt,Nt);else if(v(rr)||"D"===kt&&e.mod(Fe+.01,1)<.1){var Gt=Math.round(Fe),Zt=Math.abs(Gt),fr=Ft.exponentformat;"power"===fr||Se(fr)&&Pe(Gt)?(Qe.text=0===Gt?1:1===Gt?"10":"10<sup>"+(Gt>1?"":S)+Zt+"</sup>",Qe.fontSize*=1.25):("e"===fr||"E"===fr)&&Zt>2?Qe.text="1"+fr+(Gt>0?"+":S)+Zt:(Qe.text=ze(Math.pow(10,Fe),Ft,"","fakehover"),"D1"===rr&&"y"===Ft._id.charAt(0)&&(Qe.dy-=Qe.fontSize/6))}else{if("D"!==kt)throw"unrecognized dtick "+String(rr);Qe.text=String(Math.round(Math.pow(10,e.mod(Fe,1)))),Qe.fontSize*=.75}if("D1"===Ft.dtick){var $t=String(Qe.text).charAt(0);"0"!==$t&&"1"!==$t||("y"===Ft._id.charAt(0)?Qe.dx-=Qe.fontSize/4:(Qe.dy+=Qe.fontSize/2,Qe.dx+=(Ft.range[1]>Ft.range[0]?1:-1)*Qe.fontSize*(Fe<0?.5:.25)))}}(Ue,De,0,Ie,ct):"category"===Ke?(Qe=De,void 0===(yt=Ue._categories[Math.round(Qe.x)])&&(yt=""),Qe.text=String(yt)):"multicategory"===Ke?function(Ft,Qe,yt){var Nt=Math.round(Qe.x),Yt=Ft._categories[Nt]||[],rr=void 0===Yt[1]?"":String(Yt[1]),Fe=void 0===Yt[0]?"":String(Yt[0]);yt?Qe.text=Fe+" - "+rr:(Qe.text=rr,Qe.text2=Fe)}(Ue,De,Ne):rt(Ue)?function(Ft,Qe,yt,Nt,Yt){if("radians"!==Ft.thetaunit||yt)Qe.text=ze(Qe.x,Ft,Yt,Nt);else{var rr=Qe.x/180;if(0===rr)Qe.text="0";else{var Fe=function(kt){function Gt(nr,dr){return Math.abs(nr-dr)<=1e-6}var Zt=function(nr){for(var dr=1;!Gt(Math.round(nr*dr)/dr,nr);)dr*=10;return dr}(kt),fr=kt*Zt,$t=Math.abs(function nr(dr,Tr){return Gt(Tr,0)?dr:nr(Tr,dr%Tr)}(fr,Zt));return[Math.round(fr/$t),Math.round(Zt/$t)]}(rr);if(Fe[1]>=100)Qe.text=ze(e.deg2rad(Qe.x),Ft,Yt,Nt);else{var ht=Qe.x<0;Qe.text=1===Fe[1]?1===Fe[0]?"\u03c0":Fe[0]+"\u03c0":["<sup>",Fe[0],"</sup>","\u2044","<sub>",Fe[1],"</sub>","\u03c0"].join(""),ht&&(Qe.text=S+Qe.text)}}}}(Ue,De,Ne,Ie,ct):function(Ft,Qe,yt,Nt,Yt){"never"===Yt?Yt="":"all"===Ft.showexponent&&Math.abs(Qe.x/Ft.dtick)<1e-6&&(Yt="hide"),Qe.text=ze(Qe.x,Ft,Yt,Nt)}(Ue,De,0,Ie,ct),it||(Ue.tickprefix&&!Pt(Ue.showtickprefix)&&(De.text=Ue.tickprefix+De.text),Ue.ticksuffix&&!Pt(Ue.showticksuffix)&&(De.text+=Ue.ticksuffix)),"boundaries"===Ue.tickson||Ue.showdividers){var zt=function(Ft){var Qe=Ue.l2p(Ft);return Qe>=0&&Qe<=Ue._length?Ft:null};De.xbnd=[zt(De.x-.5),zt(De.x+Ue.dtick-.5)]}return De},R.hoverLabelText=function(Ue,Ze,Ne){Ne&&(Ue=e.extendFlat({},Ue,{hoverformat:Ne}));var it=Array.isArray(Ze)?Ze[0]:Ze,ke=Array.isArray(Ze)?Ze[1]:void 0;if(void 0!==ke&&ke!==it)return R.hoverLabelText(Ue,it,Ne)+" - "+R.hoverLabelText(Ue,ke,Ne);var De="log"===Ue.type&&it<=0,Re=R.tickText(Ue,Ue.c2l(De?-it:it),"hover").text;return De?0===it?"0":S+Re:Re};var we=["f","p","n","\u03bc","m","","k","M","G","T"];function Se(Ue){return"SI"===Ue||"B"===Ue}function Pe(Ue){return Ue>14||Ue<-15}function ze(Ue,Ze,Ne,it){var ke=Ue<0,De=Ze._tickround,Re=Ne||Ze.exponentformat||"B",Ie=Ze._tickexponent,Ke=R.getTickFormat(Ze),ut=Ze.separatethousands;if(it){var xt={exponentformat:Re,minexponent:Ze.minexponent,dtick:"none"===Ze.showexponent?Ze.dtick:v(Ue)&&Math.abs(Ue)||1,range:"none"===Ze.showexponent?Ze.range.map(Ze.r2d):[0,Ue||1]};me(xt),De=(Number(xt._tickround)||0)+4,Ie=xt._tickexponent,Ze.hoverformat&&(Ke=Ze.hoverformat)}if(Ke)return Ze._numFormat(Ke)(Ue).replace(/-/g,S);var gt,Pt=Math.pow(10,-De)/2;if("none"===Re&&(Ie=0),(Ue=Math.abs(Ue))<Pt)Ue="0",ke=!1;else{if(Ue+=Pt,Ie&&(Ue*=Math.pow(10,-Ie),De+=Ie),0===De)Ue=String(Math.floor(Ue));else if(De<0){Ue=(Ue=String(Math.round(Ue))).substr(0,Ue.length+De);for(var ct=De;ct<0;ct++)Ue+="0"}else{var zt=(Ue=String(Ue)).indexOf(".")+1;zt&&(Ue=Ue.substr(0,zt+De).replace(/\.?0+$/,""))}Ue=e.numSeparate(Ue,Ze._separators,ut)}return Ie&&"hide"!==Re&&(Se(Re)&&Pe(Ie)&&(Re="power"),gt=Ie<0?S+-Ie:"power"!==Re?"+"+Ie:String(Ie),"e"===Re||"E"===Re?Ue+=Re+gt:"power"===Re?Ue+="\xd710<sup>"+gt+"</sup>":"B"===Re&&9===Ie?Ue+="B":Se(Re)&&(Ue+=we[Ie/3+5])),ke?S+Ue:Ue}function He(Ue,Ze){for(var Ne=[],it={},ke=0;ke<Ze.length;ke++){var De=Ze[ke];it[De.text2]?it[De.text2].push(De.x):it[De.text2]=[De.x]}for(var Re in it)Ne.push(Ae(Ue,e.interp(it[Re],.5),Re));return Ne}function tt(Ue){return void 0!==Ue.periodX?Ue.periodX:Ue.x}function Oe(Ue){return[Ue.text,Ue.x,Ue.axInfo,Ue.font,Ue.fontSize,Ue.fontColor].join("_")}function Be(Ue){var Ze=Ue.title.font.size,Ne=(Ue.title.text.match(t.BR_TAG_ALL)||[]).length;return Ue.title.hasOwnProperty("standoff")?Ne?Ze*(q+Ne*W):Ze*q:Ne?Ze*(Ne+1)*W:Ze}function Je(Ue,Ze){var Ne=Ue.l2p(Ze);return Ne>1&&Ne<Ue._length-1}function Ye(Ue){var Ze=p.select(Ue),Ne=Ze.select(".text-math-group");return Ne.empty()?Ze.select("text"):Ne}function nt(Ue){return Ue._id+".automargin"}function ft(Ue){return nt(Ue)+".mirror"}function dt(Ue){return Ue._id+".rangeslider"}function Rt(Ue,Ze){for(var Ne=0;Ne<Ze.length;Ne++)-1===Ue.indexOf(Ze[Ne])&&Ue.push(Ze[Ne])}function Et(Ue,Ze,Ne){var it,ke,De=[],Re=[],Ie=Ue.layout;for(it=0;it<Ze.length;it++)De.push(R.getFromId(Ue,Ze[it]));for(it=0;it<Ne.length;it++)Re.push(R.getFromId(Ue,Ne[it]));var Ke=Object.keys(s),ut=["anchor","domain","overlaying","position","side","tickangle","editType"],xt=["linear","log"];for(it=0;it<Ke.length;it++){var gt=Ke[it],Pt=De[0][gt],ct=Re[0][gt],zt=!0,Ft=!1,Qe=!1;if("_"!==gt.charAt(0)&&"function"!=typeof Pt&&-1===ut.indexOf(gt)){for(ke=1;ke<De.length&&zt;ke++){var yt=De[ke][gt];"type"===gt&&-1!==xt.indexOf(Pt)&&-1!==xt.indexOf(yt)&&Pt!==yt?Ft=!0:yt!==Pt&&(zt=!1)}for(ke=1;ke<Re.length&&zt;ke++){var Nt=Re[ke][gt];"type"===gt&&-1!==xt.indexOf(ct)&&-1!==xt.indexOf(Nt)&&ct!==Nt?Qe=!0:Re[ke][gt]!==ct&&(zt=!1)}zt&&(Ft&&(Ie[De[0]._name].type="linear"),Qe&&(Ie[Re[0]._name].type="linear"),at(Ie,gt,De,Re,Ue._fullLayout._dfltTitle))}}for(it=0;it<Ue._fullLayout.annotations.length;it++){var Yt=Ue._fullLayout.annotations[it];-1!==Ze.indexOf(Yt.xref)&&-1!==Ne.indexOf(Yt.yref)&&e.swapAttrs(Ie.annotations[it],["?"])}}function at(Ue,Ze,Ne,it,ke){var De,Re=e.nestedProperty,Ie=Re(Ue[Ne[0]._name],Ze).get(),Ke=Re(Ue[it[0]._name],Ze).get();for("title"===Ze&&(Ie&&Ie.text===ke.x&&(Ie.text=ke.y),Ke&&Ke.text===ke.y&&(Ke.text=ke.x)),De=0;De<Ne.length;De++)Re(Ue,Ne[De]._name+"."+Ze).set(Ke);for(De=0;De<it.length;De++)Re(Ue,it[De]._name+"."+Ze).set(Ie)}function rt(Ue){return"angularaxis"===Ue._id}function St(Ue,Ze){for(var Ne=Ze._rangebreaks.length,it=0;it<Ne;it++){var ke=Ze._rangebreaks[it];if(Ue>=ke.min&&Ue<ke.max)return ke.max}return Ue}function Xt(Ue){return-1!==(Ue.ticklabelposition||"").indexOf("inside")}function lr(Ue,Ze){Xt(Ue._anchorAxis||{})&&Ue._hideCounterAxisInsideTickLabels&&Ue._hideCounterAxisInsideTickLabels(Ze)}R.getTickFormat=function(Ue){var Ze,Ne,it,ke,De,Re,Ie,Ke,Pt,ct,zt,Ft,Qe,yt;function ut(Pt){return"string"!=typeof Pt?Pt:Number(Pt.replace("M",""))*w}function xt(Pt,ct){var zt=["L","D"];if(typeof Pt==typeof ct){if("number"==typeof Pt)return Pt-ct;var Ft=zt.indexOf(Pt.charAt(0)),Qe=zt.indexOf(ct.charAt(0));return Ft===Qe?Number(Pt.replace(/(L|D)/g,""))-Number(ct.replace(/(L|D)/g,"")):Ft-Qe}return"number"==typeof Pt?1:-1}if(Ue.tickformatstops&&Ue.tickformatstops.length>0)switch(Ue.type){case"date":case"linear":for(Ze=0;Ze<Ue.tickformatstops.length;Ze++)if((it=Ue.tickformatstops[Ze]).enabled&&(ke=Ue.dtick,Re=void 0,void 0,void 0,Re=ut||function(Pt){return Pt},Ke=(De=it.dtickrange)[1],(!(Ie=De[0])&&"number"!=typeof Ie||Re(Ie)<=Re(ke))&&(!Ke&&"number"!=typeof Ke||Re(Ke)>=Re(ke)))){Ne=it;break}break;case"log":for(Ze=0;Ze<Ue.tickformatstops.length;Ze++)if((it=Ue.tickformatstops[Ze]).enabled&&(zt=void 0,Ft=void 0,Qe=void 0,yt=void 0,zt=null===(ct=it.dtickrange)[0],Ft=null===ct[1],Qe=xt(Pt=Ue.dtick,ct[0])>=0,yt=xt(Pt,ct[1])<=0,(zt||Qe)&&(Ft||yt))){Ne=it;break}}return Ne?Ne.value:Ue.tickformat},R.getSubplots=function(Ue,Ze){var Ne=Ue._fullLayout._subplots,it=Ne.cartesian.concat(Ne.gl2d||[]),ke=Ze?R.findSubplotsWithAxis(it,Ze):it;return ke.sort(function(De,Re){var Ie=De.substr(1).split("y"),Ke=Re.substr(1).split("y");return Ie[0]===Ke[0]?+Ie[1]-+Ke[1]:+Ie[0]-+Ke[0]}),ke},R.findSubplotsWithAxis=function(Ue,Ze){for(var Ne=new RegExp("x"===Ze._id.charAt(0)?"^"+Ze._id+"y":Ze._id+"$"),it=[],ke=0;ke<Ue.length;ke++){var De=Ue[ke];Ne.test(De)&&it.push(De)}return it},R.makeClipPaths=function(Ue){var Ze=Ue._fullLayout;if(!Ze._hasOnlyLargeSploms){var Ne,it,ke={_offset:0,_length:Ze.width,_id:""},De={_offset:0,_length:Ze.height,_id:""},Re=R.list(Ue,"x",!0),Ie=R.list(Ue,"y",!0),Ke=[];for(Ne=0;Ne<Re.length;Ne++)for(Ke.push({x:Re[Ne],y:De}),it=0;it<Ie.length;it++)0===Ne&&Ke.push({x:ke,y:Ie[it]}),Ke.push({x:Re[Ne],y:Ie[it]});var ut=Ze._clips.selectAll(".axesclip").data(Ke,function(xt){return xt.x._id+xt.y._id});ut.enter().append("clipPath").classed("axesclip",!0).attr("id",function(xt){return"clip"+Ze._uid+xt.x._id+xt.y._id}).append("rect"),ut.exit().remove(),ut.each(function(xt){p.select(this).select("rect").attr({x:xt.x._offset||0,y:xt.y._offset||0,width:xt.x._length||1,height:xt.y._length||1})})}},R.draw=function(Ue,Ze,Ne){var it=Ue._fullLayout;"redraw"===Ze&&it._paper.selectAll("g.subplot").each(function(De){var Ie=it._plots[De[0]];if(Ie){var Ke=Ie.xaxis,ut=Ie.yaxis;Ie.xaxislayer.selectAll("."+Ke._id+"tick").remove(),Ie.yaxislayer.selectAll("."+ut._id+"tick").remove(),Ie.xaxislayer.selectAll("."+Ke._id+"tick2").remove(),Ie.yaxislayer.selectAll("."+ut._id+"tick2").remove(),Ie.xaxislayer.selectAll("."+Ke._id+"divider").remove(),Ie.yaxislayer.selectAll("."+ut._id+"divider").remove(),Ie.gridlayer&&Ie.gridlayer.selectAll("path").remove(),Ie.zerolinelayer&&Ie.zerolinelayer.selectAll("path").remove(),it._infolayer.select(".g-"+Ke._id+"title").remove(),it._infolayer.select(".g-"+ut._id+"title").remove()}});var ke=Ze&&"redraw"!==Ze?Ze:R.listIds(Ue);return e.syncOrAsync(ke.map(function(De){return function(){if(De){var Re=R.getFromId(Ue,De),Ie=R.drawOne(Ue,Re,Ne);return Re._r=Re.range.slice(),Re._rl=e.simpleMap(Re._r,Re.r2l),Ie}}}))},R.drawOne=function(Ue,Ze,Ne){var it,ke,De;Ne=Ne||{},Ze.setScale();var Re=Ue._fullLayout,Ie=Ze._id,Ke=Ie.charAt(0),ut=R.counterLetter(Ie),xt=Re._plots[Ze._mainSubplot];if(xt){var gt=xt[Ke+"axislayer"],Pt=Ze._mainLinePosition,ct=Ze._mainMirrorPosition,zt=Ze._vals=R.calcTicks(Ze),Ft=[Ze.mirror,Pt,ct].join("_");for(it=0;it<zt.length;it++)zt[it].axInfo=Ft;Ze._selections={},Ze._tickAngles&&(Ze._prevTickAngles=Ze._tickAngles),Ze._tickAngles={},Ze._depth=null;var Qe={};if(Ze.visible){var yt,Nt,Yt=R.makeTransTickFn(Ze),rr=R.makeTransTickLabelFn(Ze),Fe="inside"===Ze.ticks,ht="outside"===Ze.ticks;if("boundaries"===Ze.tickson){var kt=function(qr,Pr){var un,dn=[],cn=function(fn,Bn){var Nn=fn.xbnd[Bn];null!==Nn&&dn.push(e.extendFlat({},fn,{x:Nn}))};if(Pr.length){for(un=0;un<Pr.length;un++)cn(Pr[un],0);cn(Pr[un-1],1)}return dn}(0,zt);Nt=R.clipEnds(Ze,kt),yt=Fe?Nt:kt}else Nt=R.clipEnds(Ze,zt),yt=Fe&&"period"!==Ze.ticklabelmode?Nt:zt;var Gt=Ze._gridVals=Nt,Zt=function(qr,Pr){var un,dn,cn=[],fn=Pr.length&&Pr[Pr.length-1].x<Pr[0].x,Bn=function(Fn,ar){var Bt=Fn.xbnd[ar];null!==Bt&&cn.push(e.extendFlat({},Fn,{x:Bt}))};if(qr.showdividers&&Pr.length){for(un=0;un<Pr.length;un++){var Nn=Pr[un];Nn.text2!==dn&&Bn(Nn,fn?1:0),dn=Nn.text2}Bn(Pr[un-1],fn?0:1)}return cn}(Ze,zt);if(!Re._hasOnlyLargeSploms){var fr=Ze._subplotsWith,$t={};for(it=0;it<fr.length;it++){var nr=(De=Re._plots[ke=fr[it]])[ut+"axis"],dr=nr._mainAxis._id;if(!$t[dr]){$t[dr]=1;var Tr="x"===Ke?"M0,"+nr._offset+"v"+nr._length:"M"+nr._offset+",0h"+nr._length;R.drawGrid(Ue,Ze,{vals:Gt,counterAxis:nr,layer:De.gridlayer.select("."+Ie),path:Tr,transFn:Yt}),R.drawZeroLine(Ue,Ze,{counterAxis:nr,layer:De.zerolinelayer,path:Tr,transFn:Yt})}}}var wr=R.getTickSigns(Ze),mr=[];if(Ze.ticks){var _r,Sr,Gr,Er=R.makeTickPath(Ze,Pt,wr[2]);if(Ze._anchorAxis&&Ze.mirror&&!0!==Ze.mirror?(_r=R.makeTickPath(Ze,ct,wr[3]),Sr=Er+_r):(_r="",Sr=Er),Ze.showdividers&&ht&&"boundaries"===Ze.tickson){var Zr={};for(it=0;it<Zt.length;it++)Zr[Zt[it].x]=1;Gr=function(qr){return Zr[qr.x]?_r:Sr}}else Gr=Sr;R.drawTicks(Ue,Ze,{vals:yt,layer:gt,path:Gr,transFn:Yt}),"allticks"===Ze.mirror&&(mr=Object.keys(Ze._linepositions||{}))}for(it=0;it<mr.length;it++){De=Re._plots[ke=mr[it]];var an=Ze._linepositions[ke]||[],gn=R.makeTickPath(Ze,an[0],wr[0])+R.makeTickPath(Ze,an[1],wr[1]);R.drawTicks(Ue,Ze,{vals:yt,layer:De[Ke+"axislayer"],path:gn,transFn:Yt})}var Vn=[];if(Vn.push(function(){return R.drawLabels(Ue,Ze,{vals:zt,layer:gt,plotinfo:De,transFn:rr,labelFns:R.makeLabelFns(Ze,Pt)})}),"multicategory"===Ze.type){var Gn={x:2,y:10}[Ke];Vn.push(function(){var qr={x:"height",y:"width"}[Ke],Pr=ln()[qr]+Gn+(Ze._tickAngles[Ie+"tick"]?Ze.tickfont.size*W:0);return R.drawLabels(Ue,Ze,{vals:He(Ze,zt),layer:gt,cls:Ie+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Yt,labelFns:R.makeLabelFns(Ze,Pt+Pr*wr[4])})}),Vn.push(function(){return Ze._depth=wr[4]*(ln("tick2")[Ze.side]-Pt),qr=Ue,Pr=Ze,cn=(un={vals:Zt,layer:gt,path:R.makeTickPath(Ze,Pt,wr[4],Ze._depth),transFn:Yt}).vals,(fn=un.layer.selectAll("path."+(dn=Pr._id+"divider")).data(cn,Oe)).exit().remove(),fn.enter().insert("path",":first-child").classed(dn,1).classed("crisp",1).call(r.stroke,Pr.dividercolor).style("stroke-width",f.crispRound(qr,Pr.dividerwidth,1)+"px"),void fn.attr("transform",un.transFn).attr("d",un.path);var qr,Pr,un,dn,cn,fn})}else Ze.title.hasOwnProperty("standoff")&&Vn.push(function(){Ze._depth=wr[4]*(ln()[Ze.side]-Pt)});var Ln=y.getComponentMethod("rangeslider","isVisible")(Ze);return Vn.push(function(){var qr,Pr,un,dn,cn=Ze.side.charAt(0),fn=te[Ze.side].charAt(0),Bn=R.getPxPosition(Ue,Ze),Nn=ht?Ze.ticklen:0;if((Ze.automargin||Ln)&&("multicategory"===Ze.type?qr=ln("tick2"):(qr=ln(),"x"===Ke&&"b"===cn&&(Ze._depth=Math.max(qr.width>0?qr.bottom-Bn:0,Nn)))),Ze.automargin){Pr={x:0,y:0,r:0,l:0,t:0,b:0};var Fn=[0,1];if("x"===Ke){if("b"===cn?Pr[cn]=Ze._depth:(Pr[cn]=Ze._depth=Math.max(qr.width>0?Bn-qr.top:0,Nn),Fn.reverse()),qr.width>0){var ar=qr.right-(Ze._offset+Ze._length);ar>0&&(Pr.xr=1,Pr.r=ar);var Bt=Ze._offset-qr.left;Bt>0&&(Pr.xl=0,Pr.l=Bt)}}else if("l"===cn?Pr[cn]=Ze._depth=Math.max(qr.height>0?Bn-qr.left:0,Nn):(Pr[cn]=Ze._depth=Math.max(qr.height>0?qr.right-Bn:0,Nn),Fn.reverse()),qr.height>0){var Qt=qr.bottom-(Ze._offset+Ze._length);Qt>0&&(Pr.yb=0,Pr.b=Qt);var yr=Ze._offset-qr.top;yr>0&&(Pr.yt=1,Pr.t=yr)}Pr[ut]="free"===Ze.anchor?Ze.position:Ze._anchorAxis.domain[Fn[0]],Ze.title.text!==Re._dfltTitle[Ke]&&(Pr[cn]+=Be(Ze)+(Ze.title.standoff||0)),Ze.mirror&&"free"!==Ze.anchor&&((un={x:0,y:0,r:0,l:0,t:0,b:0})[fn]=Ze.linewidth,Ze.mirror&&!0!==Ze.mirror&&(un[fn]+=Nn),!0===Ze.mirror||"ticks"===Ze.mirror?un[ut]=Ze._anchorAxis.domain[Fn[1]]:"all"!==Ze.mirror&&"allticks"!==Ze.mirror||(un[ut]=[Ze._counterDomainMin,Ze._counterDomainMax][Fn[1]]))}Ln&&(dn=y.getComponentMethod("rangeslider","autoMarginOpts")(Ue,Ze)),u.autoMargin(Ue,nt(Ze),Pr),u.autoMargin(Ue,ft(Ze),un),u.autoMargin(Ue,dt(Ze),dn)}),Ne.skipTitle||Ln&&"bottom"===Ze.side||Vn.push(function(){return function(qr,Pr){var un,dn=qr._fullLayout,cn=Pr._id,fn=cn.charAt(0),Bn=Pr.title.font.size;if(Pr.title.hasOwnProperty("standoff"))un=Pr._depth+Pr.title.standoff+Be(Pr);else{var Nn=Xt(Pr);if("multicategory"===Pr.type)un=Pr._depth;else{var Fn=1.5*Bn;Nn&&(Fn=.5*Bn,"outside"===Pr.ticks&&(Fn+=Pr.ticklen)),un=10+Fn+(Pr.linewidth?Pr.linewidth-1:0)}Nn||(un+="x"===fn?"top"===Pr.side?Bn*(Pr.showticklabels?1:0):Bn*(Pr.showticklabels?1.5:.5):"right"===Pr.side?Bn*(Pr.showticklabels?1:.5):Bn*(Pr.showticklabels?.5:0))}var ar,Bt,Qt,yr,Dr=R.getPxPosition(qr,Pr);if("x"===fn?(Bt=Pr._offset+Pr._length/2,Qt="top"===Pr.side?Dr-un:Dr+un):(Qt=Pr._offset+Pr._length/2,Bt="right"===Pr.side?Dr+un:Dr-un,ar={rotate:"-90",offset:0}),"multicategory"!==Pr.type){var $r=Pr._selections[Pr._id+"tick"];if(yr={selection:$r,side:Pr.side},$r&&$r.node()&&$r.node().parentNode){var Xr=f.getTranslate($r.node().parentNode);yr.offsetLeft=Xr.x,yr.offsetTop=Xr.y}Pr.title.hasOwnProperty("standoff")&&(yr.pad=0)}return a.draw(qr,cn+"title",{propContainer:Pr,propName:Pr._name+".title.text",placeholder:dn._dfltTitle[fn],avoid:yr,transform:ar,attributes:{x:Bt,y:Qt,"text-anchor":"middle"}})}(Ue,Ze)}),e.syncOrAsync(Vn)}}function ln(qr){var un,dn,cn,fn,Bn,Nn,Pr=Ie+(qr||"tick");return Qe[Pr]||(Qe[Pr]=((un=Ze)._selections[dn=Pr].size()?(cn=1/0,fn=-1/0,Bn=1/0,Nn=-1/0,un._selections[dn].each(function(){var Fn=Ye(this),ar=f.bBox(Fn.node().parentNode);cn=Math.min(cn,ar.top),fn=Math.max(fn,ar.bottom),Bn=Math.min(Bn,ar.left),Nn=Math.max(Nn,ar.right)})):(cn=0,fn=0,Bn=0,Nn=0),{top:cn,bottom:fn,left:Bn,right:Nn,height:fn-cn,width:Nn-Bn})),Qe[Pr]}},R.getTickSigns=function(Ue){var Ze=Ue._id.charAt(0),it=Ue.side==={x:"top",y:"right"}[Ze]?1:-1,ke=[-1,1,it,-it];return"inside"!==Ue.ticks==("x"===Ze)&&(ke=ke.map(function(De){return-De})),Ue.side&&ke.push({l:-1,t:-1,r:1,b:1}[Ue.side.charAt(0)]),ke},R.makeTransTickFn=function(Ue){return"x"===Ue._id.charAt(0)?function(Ze){return n(Ue._offset+Ue.l2p(Ze.x),0)}:function(Ze){return n(0,Ue._offset+Ue.l2p(Ze.x))}},R.makeTransTickLabelFn=function(Ue){var Ze=function(ke){var De=ke.ticklabelposition||"",Re=function(yt){return-1!==De.indexOf(yt)},Ie=Re("top"),Ke=Re("left"),ut=Re("right"),xt=Re("bottom"),gt=Re("inside"),Pt=xt||Ke||Ie||ut;if(!Pt&&!gt)return[0,0];var ct=ke.side,zt=Pt?(ke.tickwidth||0)/2:0,Ft=3,Qe=ke.tickfont?ke.tickfont.size:12;return(xt||Ie)&&(zt+=Qe*q,Ft+=(ke.linewidth||0)/2),(Ke||ut)&&(zt+=(ke.linewidth||0)/2,Ft+=3),gt&&"top"===ct&&(Ft-=Qe*(1-q)),(Ke||Ie)&&(zt=-zt),"bottom"!==ct&&"right"!==ct||(Ft=-Ft),[Pt?zt:0,gt?Ft:0]}(Ue),Ne=Ze[0],it=Ze[1];return"x"===Ue._id.charAt(0)?function(ke){return n(Ne+Ue._offset+Ue.l2p(tt(ke)),it)}:function(ke){return n(it,Ne+Ue._offset+Ue.l2p(tt(ke)))}},R.makeTickPath=function(Ue,Ze,Ne,it){it=void 0!==it?it:Ue.ticklen;var ke=Ue._id.charAt(0),De=(Ue.linewidth||1)/2;return"x"===ke?"M0,"+(Ze+De*Ne)+"v"+it*Ne:"M"+(Ze+De*Ne)+",0h"+it*Ne},R.makeLabelFns=function(Ue,Ze,Ne){var it=Ue.ticklabelposition||"",ke=function($t){return-1!==it.indexOf($t)},De=ke("top"),Re=ke("left"),Ie=ke("right"),Ke=ke("bottom")||Re||De||Ie,ut=ke("inside"),xt="inside"===it&&"inside"===Ue.ticks||!ut&&"outside"===Ue.ticks&&"boundaries"!==Ue.tickson,gt=0,Pt=0,ct=xt?Ue.ticklen:0;if(ut?ct*=-1:Ke&&(ct=0),xt&&(gt+=ct,Ne)){var zt=e.deg2rad(Ne);gt=ct*Math.cos(zt)+1,Pt=ct*Math.sin(zt)}Ue.showticklabels&&(xt||Ue.showline)&&(gt+=.2*Ue.tickfont.size);var Ft,Qe,yt,Nt,Yt,rr={labelStandoff:gt+=(Ue.linewidth||1)/2*(ut?-1:1),labelShift:Pt},Fe=0,ht=Ue.side,kt=Ue._id.charAt(0),Gt=Ue.tickangle;if("x"===kt)Nt=(Yt=!ut&&"bottom"===ht||ut&&"top"===ht)?1:-1,ut&&(Nt*=-1),Ft=Pt*Nt,Qe=Ze+gt*Nt,yt=Yt?1:-.2,90===Math.abs(Gt)&&(ut?yt+=Z:yt=-90===Gt&&"bottom"===ht?q:90===Gt&&"top"===ht?Z:.5,Fe=Z/2*(Gt/90)),rr.xFn=function($t){return $t.dx+Ft+Fe*$t.fontSize},rr.yFn=function($t){return $t.dy+Qe+$t.fontSize*yt},rr.anchorFn=function($t,nr){if(Ke){if(Re)return"end";if(Ie)return"start"}return v(nr)&&0!==nr&&180!==nr?nr*Nt<0!==ut?"end":"start":"middle"},rr.heightFn=function($t,nr,dr){return nr<-60||nr>60?-.5*dr:"top"===Ue.side!==ut?-dr:0};else if("y"===kt){if(Nt=(Yt=!ut&&"left"===ht||ut&&"right"===ht)?1:-1,ut&&(Nt*=-1),Ft=gt,Qe=Pt*Nt,yt=0,ut||90!==Math.abs(Gt)||(yt=-90===Gt&&"left"===ht||90===Gt&&"right"===ht?q:.5),ut){var Zt=v(Gt)?+Gt:0;if(0!==Zt){var fr=e.deg2rad(Zt);Fe=Math.abs(Math.sin(fr))*q*Nt,yt=0}}rr.xFn=function($t){return $t.dx+Ze-(Ft+$t.fontSize*yt)*Nt+Fe*$t.fontSize},rr.yFn=function($t){return $t.dy+Qe+$t.fontSize*Z},rr.anchorFn=function($t,nr){return v(nr)&&90===Math.abs(nr)?"middle":Yt?"end":"start"},rr.heightFn=function($t,nr,dr){return"right"===Ue.side&&(nr*=-1),nr<-30?-dr:nr<30?-.5*dr:0}}return rr},R.drawTicks=function(Ue,Ze,Ne){var it=Ze._id+"tick",ke=(Ne=Ne||{}).vals;"period"===Ze.ticklabelmode&&(ke=ke.slice()).shift();var De=Ne.layer.selectAll("path."+it).data(Ze.ticks?ke:[],Oe);De.exit().remove(),De.enter().append("path").classed(it,1).classed("ticks",1).classed("crisp",!1!==Ne.crisp).call(r.stroke,Ze.tickcolor).style("stroke-width",f.crispRound(Ue,Ze.tickwidth,1)+"px").attr("d",Ne.path).style("display",null),lr(Ze,[U]),De.attr("transform",Ne.transFn)},R.drawGrid=function(Ue,Ze,Ne){var it=Ze._id+"grid",ke=(Ne=Ne||{}).vals,De=Ne.counterAxis;if(!1===Ze.showgrid)ke=[];else if(De&&R.shouldShowZeroLine(Ue,Ze,De))for(var Re="array"===Ze.tickmode,Ie=0;Ie<ke.length;Ie++){var Ke=ke[Ie].x;if(Re?!Ke:Math.abs(Ke)<Ze.dtick/100){if(ke=ke.slice(0,Ie).concat(ke.slice(Ie+1)),!Re)break;Ie--}}var ut=Ne.layer.selectAll("path."+it).data(ke,Oe);ut.exit().remove(),ut.enter().append("path").classed(it,1).classed("crisp",!1!==Ne.crisp),Ze._gw=f.crispRound(Ue,Ze.gridwidth,1),ut.attr("transform",Ne.transFn).attr("d",Ne.path).call(r.stroke,Ze.gridcolor||"#ddd").style("stroke-width",Ze._gw+"px").style("display",null),lr(Ze,[B]),"function"==typeof Ne.path&&ut.attr("d",Ne.path)},R.drawZeroLine=function(Ue,Ze,Ne){var it=Ze._id+"zl",ke=R.shouldShowZeroLine(Ue,Ze,(Ne=Ne||Ne).counterAxis),De=Ne.layer.selectAll("path."+it).data(ke?[{x:0,id:Ze._id}]:[]);De.exit().remove(),De.enter().append("path").classed(it,1).classed("zl",1).classed("crisp",!1!==Ne.crisp).each(function(){Ne.layer.selectAll("path").sort(function(Re,Ie){return ee(Re.id,Ie.id)})}),De.attr("transform",Ne.transFn).attr("d",Ne.path).call(r.stroke,Ze.zerolinecolor||r.defaultLine).style("stroke-width",f.crispRound(Ue,Ze.zerolinewidth,Ze._gw||1)+"px").style("display",null),lr(Ze,[z])},R.drawLabels=function(Ue,Ze,Ne){Ne=Ne||{};var it=Ue._fullLayout,ke=Ze._id,De=ke.charAt(0),Re=Ne.cls||ke+"tick",Ie=Ne.vals,Ke=Ne.labelFns,ut=Ne.secondary?0:Ze.tickangle,xt=(Ze._prevTickAngles||{})[Re],gt=Ne.layer.selectAll("g."+Re).data(Ze.showticklabels?Ie:[],Oe),Pt=[];function ct(Nt,Yt){Nt.each(function(rr){var Fe=p.select(this),ht=Fe.select(".text-math-group"),kt=Ke.anchorFn(rr,Yt),Gt=Ne.transFn.call(Fe.node(),rr)+(v(Yt)&&0!=+Yt?" rotate("+Yt+","+Ke.xFn(rr)+","+(Ke.yFn(rr)-rr.fontSize/2)+")":""),Zt=t.lineCount(Fe),fr=W*rr.fontSize,$t=Ke.heightFn(rr,v(Yt)?+Yt:0,(Zt-1)*fr);if($t&&(Gt+=n(0,$t)),ht.empty()){var nr=Fe.select("text");nr.attr({transform:Gt,"text-anchor":kt}),nr.style("opacity",1),Ze._adjustTickLabelsOverflow&&Ze._adjustTickLabelsOverflow()}else{var dr=f.bBox(ht.node()).width*{end:-.5,start:.5}[kt];ht.attr("transform",Gt+n(dr,0))}})}gt.enter().append("g").classed(Re,1).append("text").attr("text-anchor","middle").each(function(Nt){var Yt=p.select(this),rr=Ue._promises.length;Yt.call(t.positionText,Ke.xFn(Nt),Ke.yFn(Nt)).call(f.font,Nt.font,Nt.fontSize,Nt.fontColor).text(Nt.text).call(t.convertToTspans,Ue),Ue._promises[rr]?Pt.push(Ue._promises.pop().then(function(){ct(Yt,ut)})):ct(Yt,ut)}),lr(Ze,[G]),gt.exit().remove(),Ne.repositionOnUpdate&&gt.each(function(Nt){p.select(this).select("text").call(t.positionText,Ke.xFn(Nt),Ke.yFn(Nt))}),Ze._adjustTickLabelsOverflow=function(){var Nt=Ze.ticklabeloverflow;if(Nt&&"allow"!==Nt){var Yt=-1!==Nt.indexOf("hide"),rr="x"===Ze._id.charAt(0),Fe=0,ht=rr?Ue._fullLayout.width:Ue._fullLayout.height;if(-1!==Nt.indexOf("domain")){var kt=e.simpleMap(Ze.range,Ze.r2l);Fe=Ze.l2p(kt[0])+Ze._offset,ht=Ze.l2p(kt[1])+Ze._offset}var Gt=Math.min(Fe,ht),Zt=Math.max(Fe,ht),fr=Ze.side,$t=1/0,nr=-1/0;for(var dr in gt.each(function(mr){var _r=p.select(this);if(_r.select(".text-math-group").empty()){var Sr=f.bBox(_r.node()),Gr=0;rr?(Sr.right>Zt||Sr.left<Gt)&&(Gr=1):(Sr.bottom>Zt||Sr.top+(Ze.tickangle?0:mr.fontSize/4)<Gt)&&(Gr=1);var Er=_r.select("text");Gr?Yt&&Er.style("opacity",0):(Er.style("opacity",1),$t="bottom"===fr||"right"===fr?Math.min($t,rr?Sr.top:Sr.left):-1/0,nr="top"===fr||"left"===fr?Math.max(nr,rr?Sr.bottom:Sr.right):1/0)}}),it._plots){var Tr=it._plots[dr];if(Ze._id===Tr.xaxis._id||Ze._id===Tr.yaxis._id){var wr=rr?Tr.yaxis:Tr.xaxis;wr&&(wr["_visibleLabelMin_"+Ze._id]=$t,wr["_visibleLabelMax_"+Ze._id]=nr)}}}},Ze._hideCounterAxisInsideTickLabels=function(Nt){var Yt="x"===Ze._id.charAt(0),rr=[];for(var Fe in it._plots){var ht=it._plots[Fe];Ze._id!==ht.xaxis._id&&Ze._id!==ht.yaxis._id||rr.push(Yt?ht.yaxis:ht.xaxis)}rr.forEach(function(kt,Gt){kt&&Xt(kt)&&(Nt||[z,B,U,G]).forEach(function(Zt){var fr="tick"===Zt.K&&"text"===Zt.L&&"period"===Ze.ticklabelmode,$t=it._plots[Ze._mainSubplot];(Zt.K===z.K?$t.zerolinelayer.selectAll("."+Ze._id+"zl"):Zt.K===B.K?$t.gridlayer.selectAll("."+Ze._id):$t[Ze._id.charAt(0)+"axislayer"]).each(function(){var nr=p.select(this);Zt.L&&(nr=nr.selectAll(Zt.L)),nr.each(function(dr){var Tr=Ze.l2p(fr?tt(dr):dr.x)+Ze._offset,wr=p.select(this);Tr<Ze["_visibleLabelMax_"+kt._id]&&Tr>Ze["_visibleLabelMin_"+kt._id]?wr.style("display","none"):"tick"!==Zt.K||Gt||wr.style("display",null)})})})})},ct(gt,xt+1?xt:ut);var zt=null;Ze._selections&&(Ze._selections[Re]=gt);var Ft=[function(){return Pt.length&&Promise.all(Pt)}];Ze.automargin&&it._redrawFromAutoMarginCount&&90===xt?(zt=90,Ft.push(function(){ct(gt,xt)})):Ft.push(function(){if(ct(gt,ut),Ie.length&&"x"===De&&!v(ut)&&("log"!==Ze.type||"D"!==String(Ze.dtick).charAt(0))){zt=0;var Nt,Yt=0,rr=[];if(gt.each(function(_r){Yt=Math.max(Yt,_r.fontSize);var Sr=Ze.l2p(_r.x),Gr=Ye(this),Er=f.bBox(Gr.node());rr.push({top:0,bottom:10,height:10,left:Sr-Er.width/2,right:Sr+Er.width/2+2,width:Er.width+2})}),"boundaries"!==Ze.tickson&&!Ze.showdividers||Ne.secondary){var Fe=Ie.length,ht=Math.abs((Ie[Fe-1].x-Ie[0].x)*Ze._m)/(Fe-1),kt=Ze.ticklabelposition||"",Gt=function(_r){return-1!==kt.indexOf(_r)},Zt=Gt("top"),fr=Gt("left"),$t=Gt("right"),nr=Gt("bottom")||fr||Zt||$t?(Ze.tickwidth||0)+6:0,dr=ht<2.5*Yt||"multicategory"===Ze.type||"realaxis"===Ze._name;for(Nt=0;Nt<rr.length-1;Nt++)if(e.bBoxIntersect(rr[Nt],rr[Nt+1],nr)){zt=dr?90:30;break}}else{var Tr=2;for(Ze.ticks&&(Tr+=Ze.tickwidth/2),Nt=0;Nt<rr.length;Nt++){var wr=Ie[Nt].xbnd,mr=rr[Nt];if(null!==wr[0]&&mr.left-Ze.l2p(wr[0])<Tr||null!==wr[1]&&Ze.l2p(wr[1])-mr.right<Tr){zt=90;break}}}zt&&ct(gt,zt)}}),Ze._tickAngles&&Ft.push(function(){Ze._tickAngles[Re]=null===zt?v(ut)?ut:0:zt});var Qe=Ze._anchorAxis;Qe&&Qe.autorange&&Xt(Ze)&&!j(it,Ze._id)&&(it._insideTickLabelsAutorange||(it._insideTickLabelsAutorange={}),it._insideTickLabelsAutorange[Qe._name+".autorange"]=Qe.autorange,Ft.push(function(){gt.each(function(Nt,Yt){var rr=Ye(this);rr.select(".text-math-group").empty()&&(Ze._vals[Yt].bb=f.bBox(rr.node()))})}));var yt=e.syncOrAsync(Ft);return yt&&yt.then&&Ue._promises.push(yt),yt},R.getPxPosition=function(Ue,Ze){var Ne,it=Ue._fullLayout._size,ke=Ze._id.charAt(0),De=Ze.side;return"free"!==Ze.anchor?Ne=Ze._anchorAxis:"x"===ke?Ne={_offset:it.t+(1-(Ze.position||0))*it.h,_length:0}:"y"===ke&&(Ne={_offset:it.l+(Ze.position||0)*it.w,_length:0}),"top"===De||"left"===De?Ne._offset:"bottom"===De||"right"===De?Ne._offset+Ne._length:void 0},R.shouldShowZeroLine=function(Ue,Ze,Ne){var it=e.simpleMap(Ze.range,Ze.r2l);return it[0]*it[1]<=0&&Ze.zeroline&&("linear"===Ze.type||"-"===Ze.type)&&!(Ze.rangebreaks&&Ze.maskBreaks(0)===C)&&(Je(Ze,0)||!function(ke,De,Re,Ie){var Ke=Re._mainAxis;if(Ke){var ut=ke._fullLayout,xt=De._id.charAt(0),gt=R.counterLetter(De._id),Pt=De._offset+(Math.abs(Ie[0])<Math.abs(Ie[1])==("x"===xt)?0:De._length),zt=ut._plots[Re._mainSubplot];if(!(zt.mainplotinfo||zt).overlays.length)return ct(Re);for(var Ft=R.list(ke,gt),Qe=0;Qe<Ft.length;Qe++){var yt=Ft[Qe];if(yt._mainAxis===Ke&&ct(yt))return!0}}function ct(Nt){if(!Nt.showline||!Nt.linewidth)return!1;var Yt=Math.max((Nt.linewidth+De.zerolinewidth)/2,1);function rr(kt){return"number"==typeof kt&&Math.abs(kt-Pt)<Yt}if(rr(Nt._mainLinePosition)||rr(Nt._mainMirrorPosition))return!0;var Fe=Nt._linepositions||{};for(var ht in Fe)if(rr(Fe[ht][0])||rr(Fe[ht][1]))return!0}}(Ue,Ze,Ne,it)||function(ke,De){for(var Re=ke._fullData,Ie=De._mainSubplot,Ke=De._id.charAt(0),ut=0;ut<Re.length;ut++){var xt=Re[ut];if(!0===xt.visible&&xt.xaxis+xt.yaxis===Ie&&(y.traceIs(xt,"bar-like")&&xt.orientation==={x:"h",y:"v"}[Ke]||xt.fill&&xt.fill.charAt(xt.fill.length-1)===Ke))return!0}return!1}(Ue,Ze))},R.clipEnds=function(Ue,Ze){return Ze.filter(function(Ne){return Je(Ue,Ne.x)})},R.allowAutoMargin=function(Ue){for(var Ze=R.list(Ue,"",!0),Ne=0;Ne<Ze.length;Ne++){var it=Ze[Ne];it.automargin&&(u.allowAutoMargin(Ue,nt(it)),it.mirror&&u.allowAutoMargin(Ue,ft(it))),y.getComponentMethod("rangeslider","isVisible")(it)&&u.allowAutoMargin(Ue,dt(it))}},R.swap=function(Ue,Ze){for(var Ne=function(ke,De){var Re,Ie,Ke=[];for(Re=0;Re<De.length;Re++){var ut=[],xt=ke._fullData[De[Re]].xaxis,gt=ke._fullData[De[Re]].yaxis;if(xt&&gt){for(Ie=0;Ie<Ke.length;Ie++)-1===Ke[Ie].x.indexOf(xt)&&-1===Ke[Ie].y.indexOf(gt)||ut.push(Ie);if(ut.length){var Pt,ct=Ke[ut[0]];if(ut.length>1)for(Ie=1;Ie<ut.length;Ie++)Rt(ct.x,(Pt=Ke[ut[Ie]]).x),Rt(ct.y,Pt.y);Rt(ct.x,[xt]),Rt(ct.y,[gt])}else Ke.push({x:[xt],y:[gt]})}}return Ke}(Ue,Ze),it=0;it<Ne.length;it++)Et(Ue,Ne[it].x,Ne[it].y)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib"),u=x("../../constants/numerical").BADNUM,y=v.isArrayOrTypedArray,e=v.isDateTime,n=v.cleanNumber,t=Math.round;function a(f,s){return s?p(f):"number"==typeof f}function r(f){return Math.max(1,(f-1)/1e3)}Q.exports=function(f,s,i){var b,l=f,c=i.noMultiCategory;if(y(l)&&!l.length)return"-";if(!c&&y((b=l)[0])&&y(b[1]))return"multicategory";if(c&&Array.isArray(l[0])){for(var h=[],m=0;m<l.length;m++)if(y(l[m]))for(var d=0;d<l[m].length;d++)h.push(l[m][d]);l=h}if(function(b,g){for(var w=b.length,_=r(w),A=0,T=0,E={},k=0;k<w;k+=_){var D=b[t(k)],S=String(D);E[S]||(E[S]=1,e(D,g)&&A++,p(D)&&T++)}return A>2*T}(l,s))return"date";var o="strict"!==i.autotypenumbers;return function(b,g){for(var w=b.length,_=r(w),A=0,T=0,E={},k=0;k<w;k+=_){var D=b[t(k)],S=String(D);if(!E[S]){E[S]=1;var C=typeof D;"boolean"===C?T++:(g?n(D)!==u:"number"===C)?A++:"string"===C&&T++}}return T>2*A}(l,o)?"category":function(b,g){for(var w=b.length,_=0;_<w;_++)if(a(b[_],g))return!0;return!1}(l,o)?"linear":"-"}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../registry"),u=x("../../lib"),y=x("../array_container_defaults"),e=x("./layout_attributes"),n=x("./tick_value_defaults"),t=x("./tick_mark_defaults"),a=x("./tick_label_defaults"),r=x("./prefix_suffix_defaults"),f=x("./category_order_defaults"),s=x("./line_grid_defaults"),i=x("./set_convert"),l=x("./constants").WEEKDAY_PATTERN,c=x("./constants").HOUR_PATTERN;function h(o,b,g){function w(S,C){return u.coerce(o,b,e.rangebreaks,S,C)}if(w("enabled")){var _=w("bounds");if(_&&_.length>=2){var A,T,E="";if(2===_.length)for(A=0;A<2;A++)if(T=d(_[A])){E=l;break}var k=w("pattern",E);if(k===l)for(A=0;A<2;A++)(T=d(_[A]))&&(b.bounds[A]=_[A]=T-1);if(k)for(A=0;A<2;A++)switch(T=_[A],k){case l:if(!p(T)||(T=+T)!==Math.floor(T)||T<0||T>=7)return void(b.enabled=!1);b.bounds[A]=_[A]=T;break;case c:if(!p(T)||(T=+T)<0||T>24)return void(b.enabled=!1);b.bounds[A]=_[A]=T}if(!1===g.autorange){var O=g.range;if(O[0]<O[1]){if(_[0]<O[0]&&_[1]>O[1])return void(b.enabled=!1)}else if(_[0]>O[0]&&_[1]<O[1])return void(b.enabled=!1)}}else{var D=w("values");if(!D||!D.length)return void(b.enabled=!1);w("dvalue")}}}Q.exports=function(o,b,g,w,_){var A,T=w.letter,E=w.font||{},k=w.splomStash||{},O=g("visible",!w.visibleDflt),S=b.type||(b._template||{}).type||"-";"date"===S&&(v.getComponentMethod("calendars","handleDefaults")(o,b,"calendar",w.calendar),w.noTicklabelmode||(A=g("ticklabelmode")));var C="";w.noTicklabelposition&&"multicategory"!==S||(C=u.coerce(o,b,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===A?["outside","inside"]:"x"===T?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),w.noTicklabeloverflow||g("ticklabeloverflow",-1!==C.indexOf("inside")?"hide past domain":"category"===S||"multicategory"===S?"allow":"hide past div"),i(b,_);var z=!b.isValidRange(o.range);z&&w.reverseDflt&&(z="reversed"),!g("autorange",z)||"linear"!==S&&"-"!==S||g("rangemode"),g("range"),b.cleanRange(),f(o,b,g,w),"category"===S||w.noHover||g("hoverformat");var B=g("color"),U=B!==e.color.dflt?B:E.color,G=k.label||_._dfltTitle[T];if(r(o,b,g,S,w),!O)return b;g("title.text",G),u.coerceFont(g,"title.font",{family:E.family,size:u.bigFont(E.size),color:U}),n(o,b,g,S),a(o,b,g,S,w),t(o,b,g,w),s(o,b,g,{dfltColor:B,bgColor:w.bgColor,showGrid:w.showGrid,attributes:e}),(b.showline||b.ticks)&&g("mirror"),w.automargin&&g("automargin");var X,Z="multicategory"===S;if(w.noTickson||"category"!==S&&!Z||!b.ticks&&!b.showgrid||(Z&&(X="boundaries"),"boundaries"===g("tickson",X)&&delete b.ticklabelposition),Z&&g("showdividers")&&(g("dividercolor"),g("dividerwidth")),"date"===S)if(y(o,b,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:h}),b.rangebreaks.length){for(var q=0;q<b.rangebreaks.length;q++)if(b.rangebreaks[q].pattern===l){b._hasDayOfWeekBreaks=!0;break}if(i(b,_),_._has("scattergl")||_._has("splom"))for(var W=0;W<w.data.length;W++){var te=w.data[W];"scattergl"!==te.type&&"splom"!==te.type||(te.visible=!1,u.warn(te.type+" traces do not work on axes with rangebreaks. Setting trace "+te.index+" to `visible: false`."))}}else delete b.rangebreaks;return b};var m={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function d(o){if("string"==typeof o)return m[o.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(x,Q,K){"use strict";var p=x("../../constants/docs"),v=p.FORMAT_LINK,u=p.DATE_FORMAT_LINK;function y(n,t){return["Sets the "+n+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+v+"."].join(" ")}function e(n,t){return y(n,t)+[" And for dates see: "+u+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}Q.exports={axisHoverFormat:function(n,t){return{valType:"string",dflt:"",editType:"none",description:(t?y:e)("hover text",n)+["By default the values are formatted using "+(t?"generic number format":"`"+n+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:y,descriptionWithDates:e}},{"../../constants/docs":474}],558:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("./constants");function u(y,e){if(e&&e.length)for(var n=0;n<e.length;n++)if(e[n][y])return!0;return!1}K.id2name=function(y){if("string"==typeof y&&y.match(v.AX_ID_PATTERN)){var e=y.split(" ")[0].substr(1);return"1"===e&&(e=""),y.charAt(0)+"axis"+e}},K.name2id=function(y){if(y.match(v.AX_NAME_PATTERN)){var e=y.substr(5);return"1"===e&&(e=""),y.charAt(0)+e}},K.cleanId=function(y,e,n){var t=/( domain)$/.test(y);if("string"==typeof y&&y.match(v.AX_ID_PATTERN)&&(!e||y.charAt(0)===e)&&(!t||n)){var a=y.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===a&&(a=""),y.charAt(0)+a+(t&&n?" domain":"")}},K.list=function(y,e,n){var t=y._fullLayout;if(!t)return[];var a,r=K.listIds(y,e),f=new Array(r.length);for(a=0;a<r.length;a++){var s=r[a];f[a]=t[s.charAt(0)+"axis"+s.substr(1)]}if(!n){var i=t._subplots.gl3d||[];for(a=0;a<i.length;a++){var l=t[i[a]];e?f.push(l[e+"axis"]):f.push(l.xaxis,l.yaxis,l.zaxis)}}return f},K.listIds=function(y,e){var n=y._fullLayout;if(!n)return[];var t=n._subplots;return e?t[e+"axis"]:t.xaxis.concat(t.yaxis)},K.getFromId=function(y,e,n){var t=y._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===n?e=e.replace(/y[0-9]*/,""):"y"===n&&(e=e.replace(/x[0-9]*/,"")),t[K.id2name(e)]},K.getFromTrace=function(y,e,n){var t=y._fullLayout,a=null;if(p.traceIs(e,"gl3d")){var r=e.scene;"scene"===r.substr(0,5)&&(a=t[r][n+"axis"])}else a=K.getFromId(y,e[n+"axis"]||n);return a},K.idSort=function(y,e){var n=y.charAt(0),t=e.charAt(0);return n!==t?n>t?1:-1:+(y.substr(1)||1)-+(e.substr(1)||1)},K.ref2id=function(y){return!!/^[xyz]/.test(y)&&y.split(" ")[0]},K.isLinked=function(y,e){return u(e,y._axisMatchGroups)||u(e,y._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(x,Q,K){"use strict";Q.exports=function(p,v,u,y){if("category"===v.type){var e,n=p.categoryarray,t=Array.isArray(n)&&n.length>0;t&&(e="array");var a,r=u("categoryorder",e);"array"===r&&(a=u("categoryarray")),t||"array"!==r||(r=v.categoryorder="trace"),"trace"===r?v._initialCategories=[]:"array"===r?v._initialCategories=a.slice():(a=function(f,s){var i,l,c,h=s.dataAttr||f._id.charAt(0),m={};if(s.axData)i=s.axData;else for(i=[],l=0;l<s.data.length;l++){var d=s.data[l];d[h+"axis"]===f._id&&i.push(d)}for(l=0;l<i.length;l++){var o=i[l][h];for(c=0;c<o.length;c++){var b=o[c];null!=b&&(m[b]=1)}}return Object.keys(m)}(v,y).sort(),"category ascending"===r?v._initialCategories=a:"category descending"===r&&(v._initialCategories=a.reverse()))}}},{}],560:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib"),u=x("../../constants/numerical"),y=u.ONEDAY,e=u.ONEWEEK;K.dtick=function(n,t){var a="log"===t,r="date"===t,f="category"===t,s=r?y:1;if(!n)return s;if(p(n))return(n=Number(n))<=0?s:f?Math.max(1,Math.round(n)):r?Math.max(.1,n):n;if("string"!=typeof n||!r&&!a)return s;var i=n.charAt(0),l=n.substr(1);return(l=p(l)?Number(l):0)<=0||!(r&&"M"===i&&l===Math.round(l)||a&&"L"===i||a&&"D"===i&&(1===l||2===l))?s:n},K.tick0=function(n,t,a,r){return"date"===t?v.cleanDate(n,v.dateTick0(a,r%e==0?1:0)):"D1"!==r&&"D2"!==r?p(n)?Number(n):0:void 0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(x,Q,K){"use strict";var p=x("../../lib/regex").counter;Q.exports={idRegex:{x:p("x","( domain)?"),y:p("y","( domain)?")},attrRegex:p("[xy]axis"),xAxisMatch:p("xaxis"),yAxisMatch:p("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./autorange"),u=x("./axis_ids").id2name,y=x("./layout_attributes"),e=x("./scale_zoom"),n=x("./set_convert"),t=x("../../constants/numerical").ALMOST_EQUAL,a=x("../../constants/alignment").FROM_BL;function r(m,d,o){var b=o.axIds,g=o.layoutOut,w=o.hasImage,_=g._axisConstraintGroups,A=g._axisMatchGroups,T=d._id,E=T.charAt(0),k=((g._splomAxes||{})[E]||{})[T]||{},O=d._id,D="x"===O.charAt(0);function S(ee,j){return p.coerce(m,d,y,ee,j)}d._matchGroup=null,d._constraintGroup=null,S("constrain",w?"domain":"range"),p.coerce(m,d,{constraintoward:{valType:"enumerated",values:D?["left","center","right"]:["bottom","middle","top"],dflt:D?"center":"middle"}},"constraintoward");var C,z,B=d.type,U=[];for(C=0;C<b.length;C++)(z=b[C])!==O&&g[u(z)].type===B&&U.push(z);var G=s(_,O);if(G){var X=[];for(C=0;C<U.length;C++)G[z=U[C]]||X.push(z);U=X}var Z,q,W=U.length;W&&(m.matches||k.matches)&&(Z=p.coerce(m,d,{matches:{valType:"enumerated",values:U,dflt:-1!==U.indexOf(k.matches)?k.matches:void 0}},"matches"));var te=w&&!D?d.anchor:void 0;if(W&&!Z&&(m.scaleanchor||te)&&(q=p.coerce(m,d,{scaleanchor:{valType:"enumerated",values:U}},"scaleanchor",te)),Z){d._matchGroup=i(A,O,Z,1);var R=g[u(Z)],N=f(g,d)/f(g,R);D!==("x"===Z.charAt(0))&&(N=(D?"x":"y")+N),i(_,O,Z,N)}else m.matches&&-1!==b.indexOf(m.matches)&&p.warn("ignored "+d._name+'.matches: "'+m.matches+'" to avoid an infinite loop');if(q){var V=S("scaleratio");V||(V=d.scaleratio=1),i(_,O,q,V)}else m.scaleanchor&&-1!==b.indexOf(m.scaleanchor)&&p.warn("ignored "+d._name+'.scaleanchor: "'+m.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function f(m,d){var o=d.domain;return o||(o=m[u(d.overlaying)].domain),o[1]-o[0]}function s(m,d){for(var o=0;o<m.length;o++)if(m[o][d])return m[o];return null}function i(m,d,o,b){var g,w,_,A,T,E=s(m,d);null===E?((E={})[d]=1,T=m.length,m.push(E)):T=m.indexOf(E);var k=Object.keys(E);for(g=0;g<m.length;g++)if(_=m[g],g!==T&&_[o]){var O=_[o];for(w=0;w<k.length;w++)_[A=k[w]]=l(O,l(b,E[A]));return void m.splice(T,1)}if(1!==b)for(w=0;w<k.length;w++){var D=k[w];E[D]=l(b,E[D])}E[o]=1}function l(m,d){var o,b,g="",w="";"string"==typeof m&&(o=(g=m.match(/^[xy]*/)[0]).length,m=+m.substr(o)),"string"==typeof d&&(b=(w=d.match(/^[xy]*/)[0]).length,d=+d.substr(b));var _=m*d;return o||b?o&&b&&g.charAt(0)!==w.charAt(0)?o===b?_:(o>b?g.substr(b):w.substr(o))+_:g+w+m*d:_}function c(m,d){for(var o=d._size,b=o.h/o.w,g={},w=Object.keys(m),_=0;_<w.length;_++){var A=w[_],T=m[A];if("string"==typeof T){var E=T.match(/^[xy]*/)[0],k=E.length;T=+T.substr(k);for(var O="y"===E.charAt(0)?b:1/b,D=0;D<k;D++)T*=O}g[A]=T}return g}function h(m,d){var o=m._inputDomain,g=o[0]+(o[1]-o[0])*a[m.constraintoward];m.domain=m._input.domain=[g+(o[0]-g)/d,g+(o[1]-g)/d],m.setScale()}K.handleDefaults=function(m,d,o){var b,g,w,_,A,T,E,k,O=o.axIds,D=o.axHasImage,S=d._axisConstraintGroups=[],C=d._axisMatchGroups=[];for(b=0;b<O.length;b++)r(A=m[_=u(O[b])],T=d[_],{axIds:O,layoutOut:d,hasImage:D[_]});function z(R,N){for(b=0;b<R.length;b++)for(w in g=R[b])d[u(w)][N]=g}for(z(C,"_matchGroup"),b=0;b<S.length;b++)for(w in g=S[b])if((T=d[u(w)]).fixedrange){for(var B in g){var U=u(B);!1===(m[U]||{}).fixedrange&&p.warn("fixedrange was specified as false for axis "+U+" but was overridden because another axis in its constraint group has fixedrange true"),d[U].fixedrange=!0}break}for(b=0;b<S.length;){for(w in g=S[b]){(T=d[u(w)])._matchGroup&&Object.keys(T._matchGroup).length===Object.keys(g).length&&(S.splice(b,1),b--);break}b++}z(S,"_constraintGroup");var G=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],X=!1,Z=!1;function q(){k=T[E],"rangebreaks"===E&&(Z=T._hasDayOfWeekBreaks)}for(b=0;b<C.length;b++){g=C[b];for(var W=0;W<G.length;W++){var te;for(w in E=G[W],k=null,g)if(A=m[_=u(w)],E in(T=d[_])){if(!T.matches&&(te=T,E in A)){q();break}null===k&&E in A&&q()}if("range"===E&&k&&(X=!0),"autorange"===E&&null===k&&X&&(k=!1),null===k&&E in te&&(k=te[E]),null!==k)for(w in g)(T=d[u(w)])[E]="range"===E?k.slice():k,"rangebreaks"===E&&(T._hasDayOfWeekBreaks=Z,n(T,d))}}},K.enforce=function(m){var d,o,b,g,w,_,A,T,E=m._fullLayout,k=E._axisConstraintGroups||[];for(d=0;d<k.length;d++){b=c(k[d],E);var O=Object.keys(b),D=1/0,S=0,C=1/0,z={},B={},U=!1;for(o=0;o<O.length;o++)B[g=O[o]]=w=E[u(g)],w._inputDomain?w.domain=w._inputDomain.slice():w._inputDomain=w.domain.slice(),w._inputRange||(w._inputRange=w.range.slice()),w.setScale(),z[g]=_=Math.abs(w._m)/b[g],D=Math.min(D,_),"domain"!==w.constrain&&w._constraintShrinkable||(C=Math.min(C,_)),delete w._constraintShrinkable,S=Math.max(S,_),"domain"===w.constrain&&(U=!0);if(!(D>t*S)||U)for(o=0;o<O.length;o++)if(_=z[g=O[o]],A=(w=B[g]).constrain,_!==C||"domain"===A)if(T=_/C,"range"===A)e(w,T);else{var G=w._inputDomain,X=(w.domain[1]-w.domain[0])/(G[1]-G[0]),Z=(w.r2l(w.range[1])-w.r2l(w.range[0]))/(w.r2l(w._inputRange[1])-w.r2l(w._inputRange[0]));if((T/=X)*Z<1){w.domain=w._input.domain=G.slice(),e(w,T);continue}if(Z<1&&(w.range=w._input.range=w._inputRange.slice(),T*=Z),w.autorange){var q=w.r2l(w.range[0]),W=w.r2l(w.range[1]),te=(q+W)/2,R=te,N=te,V=Math.abs(W-te),ee=te-V*T*1.0001,j=te+V*T*1.0001,J=v.makePadFn(E,w,0),$=v.makePadFn(E,w,1);h(w,T);var re,ne,se=Math.abs(w._m),ie=v.concatExtremes(m,w),ue=ie.min,le=ie.max;for(ne=0;ne<ue.length;ne++)(re=ue[ne].val-J(ue[ne])/se)>ee&&re<R&&(R=re);for(ne=0;ne<le.length;ne++)(re=le[ne].val+$(le[ne])/se)<j&&re>N&&(N=re);T/=(N-R)/(2*V),R=w.l2r(R),N=w.l2r(N),w.range=w._input.range=q<W?[R,N]:[N,R]}h(w,T)}}},K.getAxisGroup=function(m,d){for(var o=m._axisMatchGroups,b=0;b<o.length;b++)if(o[b][d])return"g"+b;return d},K.clean=function(m,d){if(d._inputDomain){for(var o=!1,b=d._id,g=m._fullLayout._axisConstraintGroups,w=0;w<g.length;w++)if(g[w][b]){o=!0;break}o&&"domain"===d.constrain||(d._input.domain=d.domain=d._inputDomain,delete d._inputDomain)}}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=v.numberFormat,y=x("tinycolor2"),e=x("has-passive-events"),n=x("../../registry"),t=v.strTranslate,a=x("../../lib/svg_text_utils"),r=x("../../components/color"),f=x("../../components/drawing"),s=x("../../components/fx"),i=x("./axes"),l=x("../../lib/setcursor"),c=x("../../components/dragelement"),h=x("../../components/dragelement/helpers"),m=h.selectingOrDrawing,d=h.freeMode,o=x("../../constants/alignment").FROM_TL,b=x("../../lib/clear_gl_canvases"),g=x("../../plot_api/subroutines").redrawReglTraces,w=x("../plots"),_=x("./axis_ids").getFromId,A=x("./select").prepSelect,T=x("./select").clearSelect,E=x("./select").selectOnClick,k=x("./scale_zoom"),O=x("./constants"),D=O.MINDRAG,S=O.MINZOOM,C=!0;function z(re,ne,se,ie){var ue=v.ensureSingle(re.draglayer,ne,se,function(le){le.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",re.id)});return ue.call(l,ie),ue.node()}function B(re,ne,se,ie,ue,le,de){var ve=z(re,"rect",ne,se);return p.select(ve).call(f.setRect,ie,ue,le,de),ve}function U(re,ne){for(var se=0;se<re.length;se++)if(!re[se].fixedrange)return ne;return""}function G(re,ne,se,ie,ue){for(var le=0;le<re.length;le++){var de=re[le];if(!de.fixedrange)if(de.rangebreaks){var ve="y"===de._id.charAt(0),be=ve?1-se:se;ie[de._name+".range[0]"]=de.l2r(de.p2l((ve?1-ne:ne)*de._length)),ie[de._name+".range[1]"]=de.l2r(de.p2l(be*de._length))}else{var Te=de._rl[0],he=de._rl[1]-Te;ie[de._name+".range[0]"]=de.l2r(Te+he*ne),ie[de._name+".range[1]"]=de.l2r(Te+he*se)}}if(ue&&ue.length){var me=(ne+(1-se))/2;G(ue,me,1-me,ie,[])}}function X(re,ne){for(var se=0;se<re.length;se++){var ie=re[se];if(!ie.fixedrange)if(ie.rangebreaks){var ue=ie._length,le=(ie.p2l(0+ne)-ie.p2l(0)+(ie.p2l(ue+ne)-ie.p2l(ue)))/2;ie.range=[ie.l2r(ie._rl[0]-le),ie.l2r(ie._rl[1]-le)]}else ie.range=[ie.l2r(ie._rl[0]-ne/ie._m),ie.l2r(ie._rl[1]-ne/ie._m)]}}function Z(re){return 1-(re>=0?Math.min(re,.9):1/(1/Math.max(re,-.3)+3.222))}function q(re,ne,se,ie,ue){return re.append("path").attr("class","zoombox").style({fill:ne>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",t(se,ie)).attr("d",ue+"Z")}function W(re,ne,se){return re.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("transform",t(ne,se)).attr("d","M0,0Z")}function te(re,ne,se,ie,ue,le){re.attr("d",ie+"M"+se.l+","+se.t+"v"+se.h+"h"+se.w+"v-"+se.h+"h-"+se.w+"Z"),R(re,ne,ue,le)}function R(re,ne,se,ie){se||(re.transition().style("fill",ie>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ne.transition().style("opacity",1).duration(200))}function N(re){p.select(re).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function V(re){C&&re.data&&re._context.showTips&&(v.notifier(v._(re,"Double-click to zoom back out"),"long"),C=!1)}function ee(re){var ne=Math.floor(Math.min(re.b-re.t,re.r-re.l,S)/2);return"M"+(re.l-3.5)+","+(re.t-.5+ne)+"h3v"+-ne+"h"+ne+"v-3h-"+(ne+3)+"ZM"+(re.r+3.5)+","+(re.t-.5+ne)+"h-3v"+-ne+"h"+-ne+"v-3h"+(ne+3)+"ZM"+(re.r+3.5)+","+(re.b+.5-ne)+"h-3v"+ne+"h"+-ne+"v3h"+(ne+3)+"ZM"+(re.l-3.5)+","+(re.b+.5-ne)+"h3v"+ne+"h"+ne+"v3h-"+(ne+3)+"Z"}function j(re,ne,se,ie,ue){for(var le,de,ve,_e,be=!1,Te={},he={},me=(ue||{}).xaHash,Ae=(ue||{}).yaHash,we=0;we<ne.length;we++){var Se=ne[we];for(le in se)if(Se[le]){for(ve in Se)ue&&(me[ve]||Ae[ve])||("x"===ve.charAt(0)?se:ie)[ve]||(Te[ve]=le);for(de in ie)ue&&(me[de]||Ae[de])||!Se[de]||(be=!0)}for(de in ie)if(Se[de])for(_e in Se)ue&&(me[_e]||Ae[_e])||("x"===_e.charAt(0)?se:ie)[_e]||(he[_e]=de)}be&&(v.extendFlat(Te,he),he={});var Pe={},ze=[];for(ve in Te){var He=_(re,ve);ze.push(He),Pe[He._id]=He}var tt={},Oe=[];for(_e in he){var Be=_(re,_e);Oe.push(Be),tt[Be._id]=Be}return{xaHash:Pe,yaHash:tt,xaxes:ze,yaxes:Oe,xLinks:Te,yLinks:he,isSubplotConstrained:be}}function J(re,ne){if(e){var se=void 0!==re.onwheel?"wheel":"mousewheel";re._onwheel&&re.removeEventListener(se,re._onwheel),re._onwheel=ne,re.addEventListener(se,ne,{passive:!1})}else void 0!==re.onwheel?re.onwheel=ne:void 0!==re.onmousewheel?re.onmousewheel=ne:re.isAddedWheelEvent||(re.isAddedWheelEvent=!0,re.addEventListener("wheel",ne,{passive:!1}))}function $(re){var ne=[];for(var se in re)ne.push(re[se]);return ne}Q.exports={makeDragBox:function(re,ne,se,ie,ue,le,de,ve){var _e,be,Te,he,me,Ae,we,Se,Pe,ze,He,tt,Oe,Be,Je,Ye,nt,ft,dt,Rt,Et,at,rt,St=re._fullLayout._zoomlayer,Xt=de+ve==="nsew",lr=1===(de+ve).length;function Ue(){if(Pe=(_e=ne.xaxis)._length,ze=(be=ne.yaxis)._length,we=_e._offset,Se=be._offset,(Te={})[_e._id]=_e,(he={})[be._id]=be,de&&ve)for(var mr=ne.overlays,_r=0;_r<mr.length;_r++){var Sr=mr[_r].xaxis;Te[Sr._id]=Sr;var Gr=mr[_r].yaxis;he[Gr._id]=Gr}me=$(Te),Ae=$(he),Oe=U(me,ve),Be=U(Ae,de),Je=!Be&&!Oe,tt=j(re,re._fullLayout._axisMatchGroups,Te,he);var Er=(He=j(re,re._fullLayout._axisConstraintGroups,Te,he,tt)).isSubplotConstrained||tt.isSubplotConstrained;Ye=ve||Er,nt=de||Er;var Zr=re._fullLayout;ft=Zr._has("scattergl"),dt=Zr._has("splom"),Rt=Zr._has("svg")}Ue();var mr,Ze=(mr=Be+Oe)?"nsew"===mr?Xt?"":"pan"===re._fullLayout.dragmode?"move":"crosshair":mr.toLowerCase()+"-resize":"pointer",Ne=B(ne,de+ve+"drag",Ze,se,ie,ue,le);if(Je&&!Xt)return Ne.onmousedown=null,Ne.style.pointerEvents="none",Ne;var it,ke,De,Re,Ie,Ke,ut,xt,gt,Pt,ct={element:Ne,gd:re,plotinfo:ne};function zt(){ct.plotinfo.selection=!1,T(re)}function Ft(mr,_r){var Ln,ln,qr,Pr,un,Sr=ct.gd;if(Sr._fullLayout._activeShapeIndex>=0)Sr._fullLayout._deactivateShape(Sr);else{var Gr=Sr._fullLayout.clickmode;if(N(Sr),2!==mr||lr||function(){if(!re._transitioningWithDuration){var mr=re._context.doubleClick,_r=[];Oe&&(_r=_r.concat(me)),Be&&(_r=_r.concat(Ae)),tt.xaxes&&(_r=_r.concat(tt.xaxes)),tt.yaxes&&(_r=_r.concat(tt.yaxes));var Sr,Gr,Er,Zr={};if("reset+autosize"===mr)for(mr="autosize",Gr=0;Gr<_r.length;Gr++)if((Sr=_r[Gr])._rangeInitial&&(Sr.range[0]!==Sr._rangeInitial[0]||Sr.range[1]!==Sr._rangeInitial[1])||!Sr._rangeInitial&&!Sr.autorange){mr="reset";break}if("autosize"===mr)for(Gr=0;Gr<_r.length;Gr++)(Sr=_r[Gr]).fixedrange||(Zr[Sr._name+".autorange"]=!0);else if("reset"===mr)for((Oe||He.isSubplotConstrained)&&(_r=_r.concat(He.xaxes)),Be&&!He.isSubplotConstrained&&(_r=_r.concat(He.yaxes)),He.isSubplotConstrained&&(Oe?Be||(_r=_r.concat(Ae)):_r=_r.concat(me)),Gr=0;Gr<_r.length;Gr++)(Sr=_r[Gr]).fixedrange||(Sr._rangeInitial?(Zr[Sr._name+".range[0]"]=(Er=Sr._rangeInitial)[0],Zr[Sr._name+".range[1]"]=Er[1]):Zr[Sr._name+".autorange"]=!0);re.emit("plotly_doubleclick",null),n.call("_guiRelayout",re,Zr)}}(),Xt)Gr.indexOf("select")>-1&&E(_r,Sr,me,Ae,ne.id,ct),Gr.indexOf("event")>-1&&s.click(Sr,_r,ne.id);else if(1===mr&&lr){var Er=de?be:_e,Zr="s"===de||"w"===ve?0:1,an=Er._name+".range["+Zr+"]",gn=(Pr=(Ln=Er).range[ln=Zr],un=Math.abs(Pr-Ln.range[1-ln]),"date"===Ln.type?Pr:"log"===Ln.type?(qr=Math.ceil(Math.max(0,-Math.log(un)/Math.LN10))+3,u("."+qr+"g")(Math.pow(10,Pr))):(qr=Math.floor(Math.log(Math.abs(Pr))/Math.LN10)-Math.floor(Math.log(un)/Math.LN10)+4,u("."+String(qr)+"g")(Pr))),Vn="left",Gn="middle";if(Er.fixedrange)return;de?(Gn="n"===de?"top":"bottom","right"===Er.side&&(Vn="right")):"e"===ve&&(Vn="right"),Sr._context.showAxisRangeEntryBoxes&&p.select(Ne).call(a.makeEditable,{gd:Sr,immediate:!0,background:Sr._fullLayout.paper_bgcolor,text:String(gn),fill:Er.tickfont?Er.tickfont.color:"#444",horizontalAlign:Vn,verticalAlign:Gn}).on("edit",function(Ln){var ln=Er.d2r(Ln);void 0!==ln&&n.call("_guiRelayout",Sr,an,ln)})}}}function Qe(mr,_r){if(re._transitioningWithDuration)return!1;var Gn,Ln,Sr=Math.max(0,Math.min(Pe,at*mr+it)),Gr=Math.max(0,Math.min(ze,rt*_r+ke)),Er=Math.abs(Sr-it),Zr=Math.abs(Gr-ke);function an(){ut="",De.r=De.l,De.t=De.b,gt.attr("d","M0,0Z")}if(De.l=Math.min(it,Sr),De.r=Math.max(it,Sr),De.t=Math.min(ke,Gr),De.b=Math.max(ke,Gr),He.isSubplotConstrained)Er>S||Zr>S?(ut="xy",Er/Pe>Zr/ze?(Zr=Er*ze/Pe,ke>Gr?De.t=ke-Zr:De.b=ke+Zr):(Er=Zr*Pe/ze,it>Sr?De.l=it-Er:De.r=it+Er),gt.attr("d",ee(De))):an();else if(tt.isSubplotConstrained)if(Er>S||Zr>S){ut="xy";var gn=Math.min(De.l/Pe,(ze-De.b)/ze),Vn=Math.max(De.r/Pe,(ze-De.t)/ze);De.l=gn*Pe,De.r=Vn*Pe,De.b=(1-gn)*ze,De.t=(1-Vn)*ze,gt.attr("d",ee(De))}else an();else!Be||Zr<Math.min(Math.max(.6*Er,D),S)?Er<D||!Oe?an():(De.t=0,De.b=ze,ut="x",gt.attr("d","M"+((Gn=De).l-.5)+","+((Ln=ke)-S-.5)+"h-3v"+(2*S+1)+"h3ZM"+(Gn.r+.5)+","+(Ln-S-.5)+"h3v"+(2*S+1)+"h-3Z")):!Oe||Er<Math.min(.6*Zr,S)?(De.l=0,De.r=Pe,ut="y",gt.attr("d",function(Gn,Ln){return"M"+(Ln-S-.5)+","+(Gn.t-.5)+"v-3h"+(2*S+1)+"v3ZM"+(Ln-S-.5)+","+(Gn.b+.5)+"v3h"+(2*S+1)+"v-3Z"}(De,it))):(ut="xy",gt.attr("d",ee(De)));De.w=De.r-De.l,De.h=De.b-De.t,ut&&(Pt=!0),re._dragged=Pt,te(xt,gt,De,Ie,Ke,Re),yt(),re.emit("plotly_relayouting",Et),Ke=!0}function yt(){Et={},"xy"!==ut&&"x"!==ut||(G(me,De.l/Pe,De.r/Pe,Et,He.xaxes),Gt("x",Et)),"xy"!==ut&&"y"!==ut||(G(Ae,(ze-De.b)/ze,(ze-De.t)/ze,Et,He.yaxes),Gt("y",Et))}function Nt(){yt(),N(re),$t(),V(re)}ct.prepFn=function(mr,_r,Sr){var Gr=ct.dragmode,Er=re._fullLayout.dragmode;Er!==Gr&&(ct.dragmode=Er),Ue(),at=re._fullLayout._invScaleX,rt=re._fullLayout._invScaleY,Je||(Xt?mr.shiftKey?"pan"===Er?Er="zoom":m(Er)||(Er="pan"):mr.ctrlKey&&(Er="pan"):Er="pan"),ct.minDrag=d(Er)?1:void 0,m(Er)?(ct.xaxes=me,ct.yaxes=Ae,A(mr,_r,Sr,ct,Er)):(ct.clickFn=Ft,m(Gr)&&zt(),Je||("zoom"===Er?(ct.moveFn=Qe,ct.doneFn=Nt,ct.minDrag=1,function(Zr,an,gn){var Vn=Ne.getBoundingClientRect();it=an-Vn.left,ke=gn-Vn.top,re._fullLayout._calcInverseTransform(re);var Gn=v.apply3DTransform(re._fullLayout._invTransform)(it,ke);De={l:it=Gn[0],r:it,w:0,t:ke=Gn[1],b:ke,h:0},Re=re._hmpixcount?re._hmlumcount/re._hmpixcount:y(re._fullLayout.plot_bgcolor).getLuminance(),Ke=!1,ut="xy",Pt=!1,xt=q(St,Re,we,Se,Ie="M0,0H"+Pe+"V"+ze+"H0V0"),gt=W(St,we,Se)}(0,_r,Sr)):"pan"===Er&&(ct.moveFn=kt,ct.doneFn=$t))),re._fullLayout._redrag=function(){var Zr=re._dragdata;Zr&&Zr.element===Ne&&(m(re._fullLayout.dragmode)||(Ue(),nr([0,0,Pe,ze]),ct.moveFn(Zr.dx,Zr.dy)))}},c.init(ct);var Yt=[0,0,Pe,ze],rr=null,Fe=O.REDRAWDELAY,ht=ne.mainplot?re._fullLayout._plots[ne.mainplot]:ne;function kt(mr,_r){if(mr*=at,_r*=rt,!re._transitioningWithDuration){if(re._fullLayout._replotting=!0,"ew"===Oe||"ns"===Be){var Sr=Oe?-mr:0,Gr=Be?-_r:0;if(tt.isSubplotConstrained){if(Oe&&Be){var Er=(mr/Pe-_r/ze)/2;Sr=-(mr=Er*Pe),Gr=-(_r=-Er*ze)}Be?Sr=-Gr*Pe/ze:Gr=-Sr*ze/Pe}return Oe&&(X(me,mr),Gt("x")),Be&&(X(Ae,_r),Gt("y")),nr([Sr,Gr,Pe,ze]),Zt(),void re.emit("plotly_relayouting",Et)}var Zr,an,gn="w"===Oe==("n"===Be)?1:-1;if(Oe&&Be&&(He.isSubplotConstrained||tt.isSubplotConstrained)){var Vn=(mr/Pe+gn*_r/ze)/2;mr=Vn*Pe,_r=gn*Vn*ze}if("w"===Oe?mr=qr(me,0,mr):"e"===Oe?mr=qr(me,1,-mr):Oe||(mr=0),"n"===Be?_r=qr(Ae,1,_r):"s"===Be?_r=qr(Ae,0,-_r):Be||(_r=0),Zr="w"===Oe?mr:0,an="n"===Be?_r:0,He.isSubplotConstrained&&!tt.isSubplotConstrained||tt.isSubplotConstrained&&Oe&&Be&&gn>0){var Gn;if(tt.isSubplotConstrained||!Oe&&1===Be.length){for(Gn=0;Gn<me.length;Gn++)me[Gn].range=me[Gn]._r.slice(),k(me[Gn],1-_r/ze);Zr=(mr=_r*Pe/ze)/2}if(tt.isSubplotConstrained||!Be&&1===Oe.length){for(Gn=0;Gn<Ae.length;Gn++)Ae[Gn].range=Ae[Gn]._r.slice(),k(Ae[Gn],1-mr/Pe);an=(_r=mr*ze/Pe)/2}}tt.isSubplotConstrained&&Be||Gt("x"),tt.isSubplotConstrained&&Oe||Gt("y");var Ln=Pe-mr,ln=ze-_r;!tt.isSubplotConstrained||Oe&&Be||(Oe?(an=Zr?0:mr*ze/Pe,ln=Ln*ze/Pe):(Zr=an?0:_r*Pe/ze,Ln=ln*Pe/ze)),nr([Zr,an,Ln,ln]),Zt(),re.emit("plotly_relayouting",Et)}function qr(Pr,un,dn){for(var cn,fn,Bn=1-un,Nn=0;Nn<Pr.length;Nn++){var Fn=Pr[Nn];if(!Fn.fixedrange){cn=Fn,fn=Fn._rl[Bn]+(Fn._rl[un]-Fn._rl[Bn])/Z(dn/Fn._length);var ar=Fn.l2r(fn);!1!==ar&&void 0!==ar&&(Fn.range[un]=ar)}}return cn._length*(cn._rl[un]-fn)/(cn._rl[un]-cn._rl[Bn])}}function Gt(mr,_r){for(var Sr=tt.isSubplotConstrained?{x:Ae,y:me}[mr]:tt[mr+"axes"],Gr=tt.isSubplotConstrained?{x:me,y:Ae}[mr]:[],Er=0;Er<Sr.length;Er++){var Zr=Sr[Er],an=Zr._id,gn=tt.xLinks[an]||tt.yLinks[an],Vn=Gr[0]||Te[gn]||he[gn];Vn&&(_r?(_r[Zr._name+".range[0]"]=_r[Vn._name+".range[0]"],_r[Zr._name+".range[1]"]=_r[Vn._name+".range[1]"]):Zr.range=Vn.range.slice())}}function Zt(){var mr,_r=[];function Sr(Zr){for(mr=0;mr<Zr.length;mr++)Zr[mr].fixedrange||_r.push(Zr[mr]._id)}for(Ye&&(Sr(me),Sr(He.xaxes),Sr(tt.xaxes)),nt&&(Sr(Ae),Sr(He.yaxes),Sr(tt.yaxes)),Et={},mr=0;mr<_r.length;mr++){var Er=_(re,_r[mr]);i.drawOne(re,Er,{skipTitle:!0}),Et[Er._name+".range[0]"]=Er.range[0],Et[Er._name+".range[1]"]=Er.range[1]}i.redrawComponents(re,_r)}function $t(){nr([0,0,Pe,ze]),v.syncOrAsync([w.previousPromises,function(){re._fullLayout._replotting=!1,n.call("_guiRelayout",re,Et)}],re)}function nr(mr){var _r,Sr,Gr,Er,Zr=re._fullLayout,an=Zr._plots,gn=Zr._subplots.cartesian;if(dt&&n.subplotsRegistry.splom.drag(re),ft)for(_r=0;_r<gn.length;_r++)if(Gr=(Sr=an[gn[_r]]).xaxis,Er=Sr.yaxis,Sr._scene){var Vn=v.simpleMap(Gr.range,Gr.r2l),Gn=v.simpleMap(Er.range,Er.r2l);Sr._scene.update({range:[Vn[0],Gn[0],Vn[1],Gn[1]]})}if((dt||ft)&&(b(re),g(re)),Rt){var Ln=mr[2]/_e._length,ln=mr[3]/be._length;for(_r=0;_r<gn.length;_r++){Gr=(Sr=an[gn[_r]]).xaxis,Er=Sr.yaxis;var qr,Pr,un,dn,fn=(nt||tt.isSubplotConstrained)&&!Er.fixedrange&&he[Er._id];if((Ye||tt.isSubplotConstrained)&&!Gr.fixedrange&&Te[Gr._id]?(qr=Ln,un=ve||tt.isSubplotConstrained?mr[0]:wr(Gr,qr)):tt.xaHash[Gr._id]?(qr=Ln,un=mr[0]*Gr._length/_e._length):tt.yaHash[Gr._id]?(qr=ln,un="ns"===Be?-mr[1]*Gr._length/be._length:wr(Gr,qr,{n:"top",s:"bottom"}[Be])):un=Tr(Gr,qr=dr(Gr,Ln,ln)),fn?(Pr=ln,dn=de||tt.isSubplotConstrained?mr[1]:wr(Er,Pr)):tt.yaHash[Er._id]?(Pr=ln,dn=mr[1]*Er._length/be._length):tt.xaHash[Er._id]?(Pr=Ln,dn="ew"===Oe?-mr[0]*Er._length/_e._length:wr(Er,Pr,{e:"right",w:"left"}[Oe])):dn=Tr(Er,Pr=dr(Er,Ln,ln)),qr||Pr){qr||(qr=1),Pr||(Pr=1);var Bn=Gr._offset-un/qr,Nn=Er._offset-dn/Pr;Sr.clipRect.call(f.setTranslate,un,dn).call(f.setScale,qr,Pr),Sr.plot.call(f.setTranslate,Bn,Nn).call(f.setScale,1/qr,1/Pr),qr===Sr.xScaleFactor&&Pr===Sr.yScaleFactor||(f.setPointGroupScale(Sr.zoomScalePts,qr,Pr),f.setTextPointsScale(Sr.zoomScaleTxt,qr,Pr)),f.hideOutsideRangePoints(Sr.clipOnAxisFalseTraces,Sr),Sr.xScaleFactor=qr,Sr.yScaleFactor=Pr}}}}function dr(mr,_r,Sr){return mr.fixedrange?0:Ye&&He.xaHash[mr._id]?_r:nt&&(He.isSubplotConstrained?He.xaHash:He.yaHash)[mr._id]?Sr:0}function Tr(mr,_r){return _r?(mr.range=mr._r.slice(),k(mr,_r),wr(mr,_r)):0}function wr(mr,_r,Sr){return mr._length*(1-_r)*o[Sr||mr.constraintoward||"middle"]}return de.length*ve.length!=1&&J(Ne,function(mr){if(re._context._scrollZoom.cartesian||re._fullLayout._enablescrollzoom){if(zt(),re._transitioningWithDuration)return mr.preventDefault(),void mr.stopPropagation();Ue(),clearTimeout(rr);var _r=-mr.deltaY;if(isFinite(_r)||(_r=mr.wheelDelta/10),isFinite(_r)){var Sr,Gr=Math.exp(-Math.min(Math.max(_r,-20),20)/200),Er=ht.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Zr=(mr.clientX-Er.left)/Er.width,an=(Er.bottom-mr.clientY)/Er.height;if(Ye){for(ve||(Zr=.5),Sr=0;Sr<me.length;Sr++)gn(me[Sr],Zr,Gr);Gt("x"),Yt[2]*=Gr,Yt[0]+=Yt[2]*Zr*(1/Gr-1)}if(nt){for(de||(an=.5),Sr=0;Sr<Ae.length;Sr++)gn(Ae[Sr],an,Gr);Gt("y"),Yt[3]*=Gr,Yt[1]+=Yt[3]*(1-an)*(1/Gr-1)}nr(Yt),Zt(),re.emit("plotly_relayouting",Et),rr=setTimeout(function(){re._fullLayout&&(Yt=[0,0,Pe,ze],$t())},Fe),mr.preventDefault()}else v.log("Did not find wheel motion attributes: ",mr)}function gn(Vn,Gn,Ln){if(!Vn.fixedrange){var ln=v.simpleMap(Vn.range,Vn.r2l),qr=ln[0]+(ln[1]-ln[0])*Gn;Vn.range=ln.map(function(Pr){return Vn.l2r(qr+(Pr-qr)*Ln)})}}}),Ne},makeDragger:z,makeRectDragger:B,makeZoombox:q,makeCorners:W,updateZoombox:te,xyCorners:ee,transitionZoombox:R,removeZoombox:N,showDoubleClickNotifier:V,attachWheelEventHandler:J}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/fx"),u=x("../../components/dragelement"),y=x("../../lib/setcursor"),e=x("./dragbox").makeDragBox,n=x("./constants").DRAGGERSIZE;K.initInteractions=function(t){var a=t._fullLayout;if(t._context.staticPlot)p.select(t).selectAll(".drag").remove();else if(a._has("cartesian")||a._has("splom")){Object.keys(a._plots||{}).sort(function(f,s){if((a._plots[f].mainplot&&!0)===(a._plots[s].mainplot&&!0)){var i=f.split("y"),l=s.split("y");return i[0]===l[0]?Number(i[1]||1)-Number(l[1]||1):Number(i[0]||1)-Number(l[0]||1)}return a._plots[f].mainplot?1:-1}).forEach(function(f){var s=a._plots[f],i=s.xaxis,l=s.yaxis;if(!s.mainplot){var c=e(t,s,i._offset,l._offset,i._length,l._length,"ns","ew");c.onmousemove=function(d){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===f&&t._fullLayout._plots[f]&&v.hover(t,d,f)},v.hover(t,d,f),t._fullLayout._lasthover=c,t._fullLayout._hoversubplot=f},c.onmouseout=function(d){t._dragging||(t._fullLayout._hoversubplot=null,u.unhover(t,d))},t._context.showAxisDragHandles&&(e(t,s,i._offset-n,l._offset-n,n,n,"n","w"),e(t,s,i._offset+i._length,l._offset-n,n,n,"n","e"),e(t,s,i._offset-n,l._offset+l._length,n,n,"s","w"),e(t,s,i._offset+i._length,l._offset+l._length,n,n,"s","e"))}if(t._context.showAxisDragHandles){if(f===i._mainSubplot){var h=i._mainLinePosition;"top"===i.side&&(h-=n),e(t,s,i._offset+.1*i._length,h,.8*i._length,n,"","ew"),e(t,s,i._offset,h,.1*i._length,n,"","w"),e(t,s,i._offset+.9*i._length,h,.1*i._length,n,"","e")}if(f===l._mainSubplot){var m=l._mainLinePosition;"right"!==l.side&&(m-=n),e(t,s,m,l._offset+.1*l._length,n,.8*l._length,"ns",""),e(t,s,m,l._offset+.9*l._length,n,.1*l._length,"s",""),e(t,s,m,l._offset,n,.1*l._length,"n","")}}});var r=a._hoverlayer.node();r.onmousemove=function(f){f.target=t._fullLayout._lasthover,v.hover(t,f,a._hoversubplot)},r.onclick=function(f){f.target=t._fullLayout._lasthover,v.click(t,f)},r.onmousedown=function(f){t._fullLayout._lasthover.onmousedown(f)},K.updateFx(t)}},K.updateFx=function(t){var a=t._fullLayout;y(a._draggers,"pan"===a.dragmode?"move":"crosshair")}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(x,Q,K){"use strict";Q.exports={clearOutlineControllers:function(p){var v=p._fullLayout._zoomlayer;v&&v.selectAll(".outline-controllers").remove()},clearSelect:function(p){var v=p._fullLayout._zoomlayer;v&&v.selectAll(".select-outline").remove(),p._fullLayout._drawing=!1}}},{}],566:[function(x,Q,K){"use strict";var p=x("../../lib").strTranslate;function v(u,y){switch(u.type){case"log":return u.p2d(y);case"date":return u.p2r(y,0,u.calendar);default:return u.p2r(y)}}Q.exports={p2r:v,r2p:function(u,y){switch(u.type){case"log":return u.d2p(y);case"date":return u.r2p(y,0,u.calendar);default:return u.r2p(y)}},axValue:function(u){var y="y"===u._id.charAt(0)?1:0;return function(e){return v(u,e[y])}},getTransform:function(u){return p(u.xaxis._offset,u.yaxis._offset)}}},{"../../lib":503}],567:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../lib"),u=x("./axis_ids");Q.exports=function(y){return function(e,n){var t=e[y];if(Array.isArray(t))for(var a=p.subplotsRegistry.cartesian,r=a.idRegex,f=n._subplots,s=f.xaxis,i=f.yaxis,l=f.cartesian,c=n._has("cartesian")||n._has("gl2d"),h=0;h<t.length;h++){var m=t[h];if(v.isPlainObject(m)){var d=u.cleanId(m.xref,"x",!1),o=u.cleanId(m.yref,"y",!1),b=r.x.test(d),g=r.y.test(o);if(b||g){c||v.pushUnique(n._basePlotModules,a);var w=!1;b&&-1===s.indexOf(d)&&(s.push(d),w=!0),g&&-1===i.indexOf(o)&&(i.push(o),w=!0),w&&b&&g&&l.push(d+o)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../registry"),u=x("../../lib"),y=x("../plots"),e=x("../../components/drawing"),n=x("../get_data").getModuleCalcData,t=x("./axis_ids"),a=x("./constants"),r=x("../../constants/xmlns_namespaces"),f=u.ensureSingle;function s(m,d,o){return u.ensureSingle(m,d,o,function(b){b.datum(o)})}function i(m,d,o,b,g){for(var w,_,A,T=a.traceLayerClasses,E=m._fullLayout,k=E._modules,O=[],D=[],S=0;S<k.length;S++){var C=(w=k[S]).name,z=v.modules[C].categories;if(z.svg){var B=w.layerName||C+"layer",U=w.plot;A=(_=n(o,U))[0],o=_[1],A.length&&O.push({i:T.indexOf(B),className:B,plotMethod:U,cdModule:A}),z.zoomScale&&D.push("."+B)}}O.sort(function(Z,q){return Z.i-q.i});var G=d.plot.selectAll("g.mlayer").data(O,function(Z){return Z.className});if(G.enter().append("g").attr("class",function(Z){return Z.className}).classed("mlayer",!0).classed("rangeplot",d.isRangePlot),G.exit().remove(),G.order(),G.each(function(Z){var q=p.select(this),W=Z.className;Z.plotMethod(m,d,Z.cdModule,q,b,g),-1===a.clipOnAxisFalseQuery.indexOf("."+W)&&e.setClipUrl(q,d.layerClipId,m)}),E._has("scattergl")&&(w=v.getModule("scattergl"),A=n(o,w)[0],w.plot(m,d,A)),!m._context.staticPlot&&(d._hasClipOnAxisFalse&&(d.clipOnAxisFalseTraces=d.plot.selectAll(a.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),D.length)){var X=d.plot.selectAll(D.join(",")).selectAll(".trace");d.zoomScalePts=X.selectAll("path.point"),d.zoomScaleTxt=X.selectAll(".textpoint")}}function l(m,d){var o=d.plotgroup,b=d.id,g=a.layerValue2layerClass[d.xaxis.layer],w=a.layerValue2layerClass[d.yaxis.layer],_=m._fullLayout._hasOnlyLargeSploms;if(d.mainplot){var A=d.mainplotinfo,T=A.plotgroup,E=b+"-x",k=b+"-y";d.gridlayer=A.gridlayer,d.zerolinelayer=A.zerolinelayer,f(A.overlinesBelow,"path",E),f(A.overlinesBelow,"path",k),f(A.overaxesBelow,"g",E),f(A.overaxesBelow,"g",k),d.plot=f(A.overplot,"g",b),f(A.overlinesAbove,"path",E),f(A.overlinesAbove,"path",k),f(A.overaxesAbove,"g",E),f(A.overaxesAbove,"g",k),d.xlines=T.select(".overlines-"+g).select("."+E),d.ylines=T.select(".overlines-"+w).select("."+k),d.xaxislayer=T.select(".overaxes-"+g).select("."+E),d.yaxislayer=T.select(".overaxes-"+w).select("."+k)}else if(_)d.xlines=f(o,"path","xlines-above"),d.ylines=f(o,"path","ylines-above"),d.xaxislayer=f(o,"g","xaxislayer-above"),d.yaxislayer=f(o,"g","yaxislayer-above");else{var O=f(o,"g","layer-subplot");d.shapelayer=f(O,"g","shapelayer"),d.imagelayer=f(O,"g","imagelayer"),d.gridlayer=f(o,"g","gridlayer"),d.zerolinelayer=f(o,"g","zerolinelayer"),f(o,"path","xlines-below"),f(o,"path","ylines-below"),d.overlinesBelow=f(o,"g","overlines-below"),f(o,"g","xaxislayer-below"),f(o,"g","yaxislayer-below"),d.overaxesBelow=f(o,"g","overaxes-below"),d.plot=f(o,"g","plot"),d.overplot=f(o,"g","overplot"),d.xlines=f(o,"path","xlines-above"),d.ylines=f(o,"path","ylines-above"),d.overlinesAbove=f(o,"g","overlines-above"),f(o,"g","xaxislayer-above"),f(o,"g","yaxislayer-above"),d.overaxesAbove=f(o,"g","overaxes-above"),d.xlines=o.select(".xlines-"+g),d.ylines=o.select(".ylines-"+w),d.xaxislayer=o.select(".xaxislayer-"+g),d.yaxislayer=o.select(".yaxislayer-"+w)}_||(s(d.gridlayer,"g",d.xaxis._id),s(d.gridlayer,"g",d.yaxis._id),d.gridlayer.selectAll("g").map(function(D){return D[0]}).sort(t.idSort)),d.xlines.style("fill","none").classed("crisp",!0),d.ylines.style("fill","none").classed("crisp",!0)}function c(m,d){if(m){var o={};for(var b in m.each(function(A){var T=A[0];p.select(this).remove(),h(T,d),o[T]=!0}),d._plots)for(var g=d._plots[b].overlays||[],w=0;w<g.length;w++){var _=g[w];o[_.id]&&_.plot.selectAll(".trace").remove()}}}function h(m,d){d._draggers.selectAll("g."+m).remove(),d._defs.select("#clip"+d._uid+m+"plot").remove()}K.name="cartesian",K.attr=["xaxis","yaxis"],K.idRoot=["x","y"],K.idRegex=a.idRegex,K.attrRegex=a.attrRegex,K.attributes=x("./attributes"),K.layoutAttributes=x("./layout_attributes"),K.supplyLayoutDefaults=x("./layout_defaults"),K.transitionAxes=x("./transition_axes"),K.finalizeSubplots=function(m,d){var o,b,g,w=d._subplots,_=w.xaxis,A=w.yaxis,T=w.cartesian,E=T.concat(w.gl2d||[]),k={},O={};for(o=0;o<E.length;o++){var D=E[o].split("y");k[D[0]]=1,O["y"+D[1]]=1}for(o=0;o<_.length;o++)k[b=_[o]]||(g=(m[t.id2name(b)]||{}).anchor,a.idRegex.y.test(g)||(g="y"),T.push(b+g),E.push(b+g),O[g]||(O[g]=1,u.pushUnique(A,g)));for(o=0;o<A.length;o++)O[g=A[o]]||(b=(m[t.id2name(g)]||{}).anchor,a.idRegex.x.test(b)||(b="x"),T.push(b+g),E.push(b+g),k[b]||(k[b]=1,u.pushUnique(_,b)));if(!E.length){for(var S in b="",g="",m)a.attrRegex.test(S)&&("x"===S.charAt(0)?(!b||+S.substr(5)<+b.substr(5))&&(b=S):(!g||+S.substr(5)<+g.substr(5))&&(g=S));b=b?t.name2id(b):"x",g=g?t.name2id(g):"y",_.push(b),A.push(g),T.push(b+g)}},K.plot=function(m,d,o,b){var g,w=m._fullLayout,_=w._subplots.cartesian,A=m.calcdata;if(!Array.isArray(d))for(d=[],g=0;g<A.length;g++)d.push(g);for(g=0;g<_.length;g++){for(var T,E=_[g],k=w._plots[E],O=[],D=0;D<A.length;D++){var S=A[D],C=S[0].trace;C.xaxis+C.yaxis===E&&((-1!==d.indexOf(C.index)||C.carpet)&&(T&&T[0].trace.xaxis+T[0].trace.yaxis===E&&-1!==["tonextx","tonexty","tonext"].indexOf(C.fill)&&-1===O.indexOf(T)&&O.push(T),O.push(S)),T=S)}i(m,k,O,o,b)}},K.clean=function(m,d,o,b){var g,w,_,A=b._plots||{},T=d._plots||{},E=b._subplots||{};if(b._hasOnlyLargeSploms&&!d._hasOnlyLargeSploms)for(_ in A)(g=A[_]).plotgroup&&g.plotgroup.remove();var k=b._has&&b._has("gl"),O=d._has&&d._has("gl");if(k&&!O)for(_ in A)(g=A[_])._scene&&g._scene.destroy();if(E.xaxis&&E.yaxis){var D=t.listIds({_fullLayout:b});for(w=0;w<D.length;w++){var S=D[w];d[t.id2name(S)]||b._infolayer.selectAll(".g-"+S+"title").remove()}}var C=b._has&&b._has("cartesian"),z=d._has&&d._has("cartesian");if(C&&!z)c(b._cartesianlayer.selectAll(".subplot"),b),b._defs.selectAll(".axesclip").remove(),delete b._axisConstraintGroups,delete b._axisMatchGroups;else if(E.cartesian)for(w=0;w<E.cartesian.length;w++){var B=E.cartesian[w];T[B]||(b._cartesianlayer.selectAll("."+B+",."+B+"-x,."+B+"-y").remove(),h(B,b))}},K.drawFramework=function(m){var d=m._fullLayout,o=function(g){var w,_,A,T,E,k,O=g._fullLayout,D=O._subplots.cartesian,S=D.length,C=[],z=[];for(w=0;w<S;w++){var G=(E=(T=O._plots[A=D[w]]).xaxis)._mainAxis._id+(k=T.yaxis)._mainAxis._id,X=O._plots[G];T.overlays=[],G!==A&&X?(T.mainplot=G,T.mainplotinfo=X,z.push(A)):(T.mainplot=void 0,T.mainplotinfo=void 0,C.push(A))}for(w=0;w<z.length;w++)(T=O._plots[A=z[w]]).mainplotinfo.overlays.push(T);var Z=C.concat(z),q=new Array(S);for(w=0;w<S;w++){var W=[A=Z[w],(E=(T=O._plots[A]).xaxis).layer,(k=T.yaxis).layer,E.overlaying||"",k.overlaying||""];for(_=0;_<T.overlays.length;_++)W.push(T.overlays[_].id);q[w]=W}return q}(m),b=d._cartesianlayer.selectAll(".subplot").data(o,String);b.enter().append("g").attr("class",function(g){return"subplot "+g[0]}),b.order(),b.exit().call(c,d),b.each(function(g){var w=g[0],_=d._plots[w];_.plotgroup=p.select(this),l(m,_),_.draglayer=f(d._draggers,"g",w)})},K.rangePlot=function(m,d,o){l(m,d),i(m,d,o),y.style(m)},K.toSVG=function(m){var d=m._fullLayout._glimages,o=p.select(m).selectAll(".svg-container");o.filter(function(b,g){return g===o.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var b=this.toDataURL("image/png");d.append("svg:image").attr({xmlns:r.svg,"xlink:href":b,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},K.updateFx=x("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(x,Q,K){"use strict";var p=x("../font_attributes"),v=x("../../components/color/attributes"),u=x("../../components/drawing/attributes").dash,y=x("../../lib/extend").extendFlat,e=x("../../plot_api/plot_template").templatedArray,n=x("../../plots/cartesian/axis_format_attributes").descriptionWithDates,t=x("../../constants/numerical").ONEDAY,a=x("./constants"),r=a.HOUR_PATTERN,f=a.WEEKDAY_PATTERN;Q.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:v.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:p({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[f,r,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:t},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:v.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:y({},u,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:p({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:n("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:n("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:v.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:v.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:v.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:v.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:p({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/color"),u=x("../../components/fx/helpers").isUnifiedHover,y=x("../../components/fx/hovermode_defaults"),e=x("../../plot_api/plot_template"),n=x("../layout_attributes"),t=x("./layout_attributes"),a=x("./type_defaults"),r=x("./axis_defaults"),f=x("./constraints"),s=x("./position_defaults"),i=x("./axis_ids"),l=i.id2name,c=i.name2id,h=x("./constants").AX_ID_PATTERN,m=x("../../registry"),d=m.traceIs,o=m.getComponentMethod;function b(g,w,_){Array.isArray(g[w])?g[w].push(_):g[w]=[_]}Q.exports=function(g,w,_){var A,T,E=w.autotypenumbers,k={},O={},D={},S={},C={},z={},B={},U={},G={},X={};for(A=0;A<_.length;A++){var Z=_[A];if(d(Z,"cartesian")||d(Z,"gl2d")){var q,W;if(Z.xaxis)q=l(Z.xaxis),b(k,q,Z);else if(Z.xaxes)for(T=0;T<Z.xaxes.length;T++)b(k,l(Z.xaxes[T]),Z);if(Z.yaxis)W=l(Z.yaxis),b(k,W,Z);else if(Z.yaxes)for(T=0;T<Z.yaxes.length;T++)b(k,l(Z.yaxes[T]),Z);"funnel"===Z.type?"h"===Z.orientation?(q&&(O[q]=!0),W&&(B[W]=!0)):W&&(D[W]=!0):"image"===Z.type?(W&&(U[W]=!0),q&&(U[q]=!0)):(W&&(C[W]=!0,z[W]=!0),d(Z,"carpet")&&("carpet"!==Z.type||Z._cheater)||q&&(S[q]=!0)),"carpet"===Z.type&&Z._cheater&&q&&(O[q]=!0),d(Z,"2dMap")&&(G[q]=!0,G[W]=!0),d(Z,"oriented")&&(X["h"===Z.orientation?W:q]=!0)}}var te=w._subplots,R=te.xaxis,N=te.yaxis,V=p.simpleMap(R,l),ee=p.simpleMap(N,l),j=V.concat(ee),J=v.background;R.length&&N.length&&(J=p.coerce(g,w,n,"plot_bgcolor"));var $,re,ne,se,ie,ue=v.combine(J,w.paper_bgcolor);function le(){ie._traceIndices=(k[$]||[]).map(function(St){return St._expandedIndex}),ie._annIndices=[],ie._shapeIndices=[],ie._imgIndices=[],ie._subplotsWith=[],ie._counterAxes=[],ie._name=ie._attr=$,ie._id=re}function de(rt,St){return p.coerce(se,ie,t,rt,St)}function ve(rt,St){return p.coerce2(se,ie,t,rt,St)}function _e(rt){return"x"===rt?N:R}function be(rt,St){for(var Xt="x"===rt?V:ee,lr=[],Ue=0;Ue<Xt.length;Ue++){var Ze=Xt[Ue];Ze===St||(g[Ze]||{}).overlaying||lr.push(c(Ze))}return lr}var Te={x:_e("x"),y:_e("y")},he=Te.x.concat(Te.y),me={},Ae=[];function we(){var rt=se.matches;h.test(rt)&&-1===he.indexOf(rt)&&(me[rt]=se.type,Ae=Object.keys(me))}var Se=y(g,w),Pe=u(Se);for(A=0;A<j.length;A++){re=c($=j[A]),ne=$.charAt(0),p.isPlainObject(g[$])||(g[$]={}),se=g[$],ie=e.newContainer(w,$,ne+"axis"),le();var tt={letter:ne,font:w.font,outerTicks:G[$],showGrid:!X[$],data:k[$]||[],bgColor:ue,calendar:w.calendar,automargin:!0,visibleDflt:"x"===ne&&!S[$]&&O[$]||"y"===ne&&!C[$]&&D[$],reverseDflt:"y"===ne&&(!z[$]&&B[$]||U[$]),autotypenumbersDflt:E,splomStash:((w._splomAxes||{})[ne]||{})[re]};de("uirevision",w.uirevision),a(se,ie,de,tt),r(se,ie,de,tt,w);var Oe=Pe&&ne===Se.charAt(0),Be=ve("spikecolor",Pe?ie.color:void 0),Je=ve("spikethickness",Pe?1.5:void 0),Ye=ve("spikedash",Pe?"dot":void 0),nt=ve("spikemode",Pe?"across":void 0),ft=ve("spikesnap");de("showspikes",!!(Oe||Be||Je||Ye||nt||ft))||(delete ie.spikecolor,delete ie.spikethickness,delete ie.spikedash,delete ie.spikemode,delete ie.spikesnap),s(se,ie,de,{letter:ne,counterAxes:Te[ne],overlayableAxes:be(ne,$),grid:w.grid}),de("title.standoff"),we(),ie._input=se}for(A=0;A<Ae.length;){re=Ae[A++],ne=($=l(re)).charAt(0),p.isPlainObject(g[$])||(g[$]={}),se=g[$],ie=e.newContainer(w,$,ne+"axis"),le();var dt={letter:ne,font:w.font,outerTicks:G[$],showGrid:!X[$],data:[],bgColor:ue,calendar:w.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:E,splomStash:((w._splomAxes||{})[ne]||{})[re]};de("uirevision",w.uirevision),ie.type=me[re]||"linear",r(se,ie,de,dt,w),s(se,ie,de,{letter:ne,counterAxes:Te[ne],overlayableAxes:be(ne,$),grid:w.grid}),de("fixedrange"),we(),ie._input=se}var Rt=o("rangeslider","handleDefaults"),Et=o("rangeselector","handleDefaults");for(A=0;A<V.length;A++)se=g[$=V[A]],ie=w[$],Rt(g,w,$),"date"===ie.type&&Et(se,ie,w,ee,ie.calendar),de("fixedrange");for(A=0;A<ee.length;A++){se=g[$=ee[A]];var at=w[l((ie=w[$]).anchor)];de("fixedrange",o("rangeslider","isVisible")(at))}f.handleDefaults(g,w,{axIds:he.concat(Ae).sort(i.idSort),axHasImage:U})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(x,Q,K){"use strict";var p=x("tinycolor2").mix,v=x("../../components/color/attributes").lightFraction,u=x("../../lib");Q.exports=function(y,e,n,t){var a=(t=t||{}).dfltColor;function r(m,d){return u.coerce2(y,e,t.attributes,m,d)}var f=r("linecolor",a),s=r("linewidth");n("showline",t.showLine||!!f||!!s)||(delete e.linecolor,delete e.linewidth);var i=r("gridcolor",p(a,t.bgColor,t.blend||v).toRgbString()),l=r("gridwidth");if(n("showgrid",t.showGrid||!!i||!!l)||(delete e.gridcolor,delete e.gridwidth),!t.noZeroLine){var c=r("zerolinecolor",a),h=r("zerolinewidth");n("zeroline",t.showGrid||!!c||!!h)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib");Q.exports=function(u,y,e,n){var t,a,r,f,s=n.counterAxes||[],i=n.overlayableAxes||[],l=n.letter,c=n.grid;c&&(t=c._anchors[y._id],(a=c._domains[l][c._axisMap[y._id]])&&(r=c[l+"side"].split(" ")[0],f=c.domain[l]["right"===r||"top"===r?1:0])),a=a||[0,1],t=t||(p(u.position)?"free":s[0]||"free"),r=r||("x"===l?"bottom":"left"),f=f||0,"free"===v.coerce(u,y,{anchor:{valType:"enumerated",values:["free"].concat(s),dflt:t}},"anchor")&&e("position",f),v.coerce(u,y,{side:{valType:"enumerated",values:"x"===l?["bottom","top"]:["left","right"],dflt:r}},"side");var h=!1;if(i.length&&(h=v.coerce(u,y,{overlaying:{valType:"enumerated",values:[!1].concat(i),dflt:!1}},"overlaying")),!h){var m=e("domain",a);m[0]>m[1]-1/4096&&(y.domain=a),v.noneOrAll(u.domain,y.domain,a)}return e("layer"),y}},{"../../lib":503,"fast-isnumeric":190}],573:[function(x,Q,K){"use strict";var p=x("./show_dflt");Q.exports=function(v,u,y,e,n){n||(n={});var t=n.tickSuffixDflt,a=p(v);y("tickprefix")&&y("showtickprefix",a),y("ticksuffix",t)&&y("showticksuffix",a)}},{"./show_dflt":577}],574:[function(x,Q,K){"use strict";var p=x("../../constants/alignment").FROM_BL;Q.exports=function(v,u,y){void 0===y&&(y=p[v.constraintoward||"center"]);var e=[v.r2l(v.range[0]),v.r2l(v.range[1])],n=e[0]+(e[1]-e[0])*y;v.range=v._input.range=[v.l2r(n+(e[0]-n)*u),v.l2r(n+(e[1]-n)*u)],v.setScale()}},{"../../constants/alignment":471}],575:[function(x,Q,K){"use strict";var p=x("polybooljs"),v=x("../../registry"),u=x("../../components/drawing").dashStyle,y=x("../../components/color"),e=x("../../components/fx"),n=x("../../components/fx/helpers").makeEventData,t=x("../../components/dragelement/helpers"),a=t.freeMode,r=t.rectMode,f=t.drawMode,s=t.openMode,i=t.selectMode,l=x("../../components/shapes/draw_newshape/display_outlines"),c=x("../../components/shapes/draw_newshape/helpers").handleEllipse,h=x("../../components/shapes/draw_newshape/newshapes"),m=x("../../lib"),d=x("../../lib/polygon"),o=x("../../lib/throttle"),b=x("./axis_ids").getFromId,g=x("../../lib/clear_gl_canvases"),w=x("../../plot_api/subroutines").redrawReglTraces,_=x("./constants"),A=_.MINSELECT,T=d.filter,E=d.tester,k=x("./handle_outline").clearSelect,O=x("./helpers"),D=O.p2r,S=O.axValue,C=O.getTransform;function z(V,ee,j,J,$,re,ne){var se,ie,ue,le,de,ve,_e,be,Te,He,he=ee._hoverdata,me=ee._fullLayout.clickmode.indexOf("event")>-1,Ae=[];if((He=he)&&Array.isArray(He)&&!0!==He[0].hoverOnBox){X(V,ee,re);var we=function(He,tt){var Oe,Be,Je=He[0],Ye=-1,nt=[];for(Be=0;Be<tt.length;Be++)if(Je.fullData._expandedIndex===(Oe=tt[Be]).cd[0].trace._expandedIndex){if(!0===Je.hoverOnBox)break;void 0!==Je.pointNumber?Ye=Je.pointNumber:void 0!==Je.binNumber&&(Ye=Je.binNumber,nt=Je.pointNumbers);break}return{pointNumber:Ye,pointNumbers:nt,searchInfo:Oe}}(he,se=q(ee,j,J,$));if(we.pointNumbers.length>0?function(He,tt){var Oe,Be,Je,Ye=[];for(Je=0;Je<He.length;Je++)(Oe=He[Je]).cd[0].trace.selectedpoints&&Oe.cd[0].trace.selectedpoints.length>0&&Ye.push(Oe);if(1===Ye.length&&Ye[0]===tt.searchInfo&&(Be=tt.searchInfo.cd[0].trace).selectedpoints.length===tt.pointNumbers.length){for(Je=0;Je<tt.pointNumbers.length;Je++)if(Be.selectedpoints.indexOf(tt.pointNumbers[Je])<0)return!1;return!0}return!1}(se,we):function(He){var Oe,Be,Je=0;for(Be=0;Be<He.length;Be++)if((Oe=He[Be].cd[0].trace).selectedpoints&&(Oe.selectedpoints.length>1||(Je+=Oe.selectedpoints.length)>1))return!1;return 1===Je}(se)&&(ve=W(we))){for(ne&&ne.remove(),Te=0;Te<se.length;Te++)(ie=se[Te])._module.selectPoints(ie,!1);te(ee,se),Z(re),me&&ee.emit("plotly_deselect",null)}else{for(_e=V.shiftKey&&(void 0!==ve?ve:W(we)),ue=function(He,tt,Oe){return{pointNumber:He,searchInfo:tt,subtract:Oe}}(we.pointNumber,we.searchInfo,_e),le=G(re.selectionDefs.concat([ue])),Te=0;Te<se.length;Te++)if(de=R(se[Te]._module.selectPoints(se[Te],le),se[Te]),Ae.length)for(var Se=0;Se<de.length;Se++)Ae.push(de[Se]);else Ae=de;if(te(ee,se,be={points:Ae}),ue&&re&&re.selectionDefs.push(ue),ne){var Pe=re.mergedPolygons,ze=s(re.dragmode);l(N(Pe,ze),ne,re)}me&&ee.emit("plotly_selected",be)}}}function B(V){return"pointNumber"in V&&"searchInfo"in V}function U(V){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ee,j,J,$){return $.cd[0].trace._expandedIndex===V.searchInfo.cd[0].trace._expandedIndex&&J===V.pointNumber},isRect:!1,degenerate:!1,subtract:V.subtract}}function G(V){for(var ee=[],j=B(V[0])?0:V[0][0][0],J=j,$=B(V[0])?0:V[0][0][1],re=$,ne=0;ne<V.length;ne++)if(B(V[ne]))ee.push(U(V[ne]));else{var se=d.tester(V[ne]);se.subtract=V[ne].subtract,ee.push(se),j=Math.min(j,se.xmin),J=Math.max(J,se.xmax),$=Math.min($,se.ymin),re=Math.max(re,se.ymax)}return{xmin:j,xmax:J,ymin:$,ymax:re,pts:[],contains:function(ie,ue,le,de){for(var ve=!1,_e=0;_e<ee.length;_e++)ee[_e].contains(ie,ue,le,de)&&(ve=!1===ee[_e].subtract);return ve},isRect:!1,degenerate:!1}}function X(V,ee,j){ee._fullLayout._drawing=!1;var J=ee._fullLayout,$=j.plotinfo,re=j.dragmode,ne=J._lastSelectedSubplot&&J._lastSelectedSubplot===$.id,se=(V.shiftKey||V.altKey)&&!(f(re)&&s(re));ne&&se&&$.selection&&$.selection.selectionDefs&&!j.selectionDefs?(j.selectionDefs=$.selection.selectionDefs,j.mergedPolygons=$.selection.mergedPolygons):se&&$.selection||Z(j),ne||(k(ee),J._lastSelectedSubplot=$.id)}function Z(V){var ee=V.dragmode,j=V.plotinfo,J=V.gd;if(J._fullLayout._activeShapeIndex>=0&&J._fullLayout._deactivateShape(J),f(ee)){var $=J._fullLayout._zoomlayer.selectAll(".select-outline-"+j.id);if($&&J._fullLayout._drawing){var re=h($,V);re&&v.call("_guiRelayout",J,{shapes:re}),J._fullLayout._drawing=!1}}j.selection={},j.selection.selectionDefs=V.selectionDefs=[],j.selection.mergedPolygons=V.mergedPolygons=[]}function q(V,ee,j,J){var $,re,ne,se=[],ie=ee.map(function(_e){return _e._id}),ue=j.map(function(_e){return _e._id});for(ne=0;ne<V.calcdata.length;ne++)if(!0===(re=($=V.calcdata[ne])[0].trace).visible&&re._module&&re._module.selectPoints)if(!J||re.subplot!==J&&re.geo!==J)if("splom"===re.type&&re._xaxes[ie[0]]&&re._yaxes[ue[0]]){var le=ve(re._module,$,ee[0],j[0]);le.scene=V._fullLayout._splomScenes[re.uid],se.push(le)}else if("sankey"===re.type){var de=ve(re._module,$,ee[0],j[0]);se.push(de)}else{if(-1===ie.indexOf(re.xaxis)||-1===ue.indexOf(re.yaxis))continue;se.push(ve(re._module,$,b(V,re.xaxis),b(V,re.yaxis)))}else se.push(ve(re._module,$,ee[0],j[0]));return se;function ve(_e,be,Te,he){return{_module:_e,cd:be,xaxis:Te,yaxis:he}}}function W(V){var ee=V.searchInfo.cd[0].trace,J=V.pointNumbers;return!!ee.selectedpoints&&ee.selectedpoints.indexOf(J.length>0?J[0]:V.pointNumber)>-1}function te(V,ee,j){var J,$,re,ne;for(J=0;J<ee.length;J++){var se=ee[J].cd[0].trace._fullInput,ie=V._fullLayout._tracePreGUI[se.uid]||{};void 0===ie.selectedpoints&&(ie.selectedpoints=se._input.selectedpoints||null)}if(j){var ue=j.points||[];for(J=0;J<ee.length;J++)(ne=ee[J].cd[0].trace)._input.selectedpoints=ne._fullInput.selectedpoints=[],ne._fullInput!==ne&&(ne.selectedpoints=[]);for(J=0;J<ue.length;J++){var le=ue[J],de=le.data,ve=le.fullData;le.pointIndices?([].push.apply(de.selectedpoints,le.pointIndices),ne._fullInput!==ne&&[].push.apply(ve.selectedpoints,le.pointIndices)):(de.selectedpoints.push(le.pointIndex),ne._fullInput!==ne&&ve.selectedpoints.push(le.pointIndex))}}else for(J=0;J<ee.length;J++)delete(ne=ee[J].cd[0].trace).selectedpoints,delete ne._input.selectedpoints,ne._fullInput!==ne&&delete ne._fullInput.selectedpoints;var _e=!1;for(J=0;J<ee.length;J++){ne=(re=($=ee[J]).cd)[0].trace,v.traceIs(ne,"regl")&&(_e=!0);var be=$._module,Te=be.styleOnSelect||be.style;Te&&(Te(V,re,re[0].node3),re[0].nodeRangePlot3&&Te(V,re,re[0].nodeRangePlot3))}_e&&(g(V),w(V))}function R(V,ee){if(Array.isArray(V))for(var j=ee.cd,J=ee.cd[0].trace,$=0;$<V.length;$++)V[$]=n(V[$],J,j);return V}function N(V,ee){for(var j=[],J=0;J<V.length;J++){j[J]=[];for(var $=0;$<V[J].length;$++){j[J][$]=[],j[J][$][0]=$?"L":"M";for(var re=0;re<V[J][$].length;re++)j[J][$].push(V[J][$][re])}ee||j[J].push(["Z",j[J][0][1],j[J][0][2]])}return j}Q.exports={prepSelect:function(V,ee,j,J,$){var re=a($),ne=r($),se=s($),ie=f($),ue=i($),le="drawcircle"===$,de="drawline"===$||le,ve=J.gd,_e=ve._fullLayout,be=_e._zoomlayer,Te=J.element.getBoundingClientRect(),he=J.plotinfo,me=C(he),Ae=ee-Te.left,we=j-Te.top;_e._calcInverseTransform(ve);var Pe,ze,He,tt,Oe,Be,Je,Se=m.apply3DTransform(_e._invTransform)(Ae,we),Ye=_e._invScaleX,nt=_e._invScaleY,ft=Ae=Se[0],dt=we=Se[1],Rt="M"+Ae+","+we,Et=J.xaxes[0]._length,at=J.yaxes[0]._length,rt=J.xaxes.concat(J.yaxes),St=V.altKey&&!(f($)&&se);X(V,ve,J),re&&(Pe=T([[Ae,we]],_.BENDPX));var Xt=be.selectAll("path.select-outline-"+he.id).data(ie?[0]:[1,2]),lr=_e.newshape;Xt.enter().append("path").attr("class",function(Re){return"select-outline select-outline-"+Re+" select-outline-"+he.id}).style(ie?{opacity:lr.opacity/2,fill:se?void 0:lr.fillcolor,stroke:lr.line.color,"stroke-dasharray":u(lr.line.dash,lr.line.width),"stroke-width":lr.line.width+"px"}:{}).attr("fill-rule",lr.fillrule).classed("cursor-move",!!ie).attr("transform",me).attr("d",Rt+"Z");var Ue,Ze=be.append("path").attr("class","zoombox-corners").style({fill:y.background,stroke:y.defaultLine,"stroke-width":1}).attr("transform",me).attr("d","M0,0Z"),Ne=_e._uid+_.SELECTID,it=[],ke=q(ve,J.xaxes,J.yaxes,J.subplot);function De(Re,Ie){return Re-Ie}Ue=he.fillRangeItems?he.fillRangeItems:ne?function(Re,Ie){var Ke=Re.range={};for(Oe=0;Oe<rt.length;Oe++){var ut=rt[Oe],xt=ut._id.charAt(0);Ke[ut._id]=[D(ut,Ie[xt+"min"]),D(ut,Ie[xt+"max"])].sort(De)}}:function(Re,Ie,Ke){var ut=Re.lassoPoints={};for(Oe=0;Oe<rt.length;Oe++){var xt=rt[Oe];ut[xt._id]=Ke.filtered.map(S(xt))}},J.moveFn=function(Re,Ie){ft=Math.max(0,Math.min(Et,Ye*Re+Ae)),dt=Math.max(0,Math.min(at,nt*Ie+we));var zt,Ft,Ke=Math.abs(ft-Ae),ut=Math.abs(dt-we);if(ne){var xt,gt,Pt;if(ue){var ct=_e.selectdirection;switch(xt="any"===ct?ut<Math.min(.6*Ke,A)?"h":Ke<Math.min(.6*ut,A)?"v":"d":ct){case"h":gt=le?at/2:0,Pt=at;break;case"v":gt=le?Et/2:0,Pt=Et}}if(ie)switch(_e.newshape.drawdirection){case"vertical":xt="h",gt=le?at/2:0,Pt=at;break;case"horizontal":xt="v",gt=le?Et/2:0,Pt=Et;break;case"ortho":Ke<ut?(xt="h",gt=we,Pt=dt):(xt="v",gt=Ae,Pt=ft);break;default:xt="d"}"h"===xt?((tt=de?c(le,[ft,gt],[ft,Pt]):[[Ae,gt],[Ae,Pt],[ft,Pt],[ft,gt]]).xmin=de?ft:Math.min(Ae,ft),tt.xmax=de?ft:Math.max(Ae,ft),tt.ymin=Math.min(gt,Pt),tt.ymax=Math.max(gt,Pt),Ze.attr("d","M"+tt.xmin+","+(we-A)+"h-4v"+2*A+"h4ZM"+(tt.xmax-1)+","+(we-A)+"h4v"+2*A+"h-4Z")):"v"===xt?((tt=de?c(le,[gt,dt],[Pt,dt]):[[gt,we],[gt,dt],[Pt,dt],[Pt,we]]).xmin=Math.min(gt,Pt),tt.xmax=Math.max(gt,Pt),tt.ymin=de?dt:Math.min(we,dt),tt.ymax=de?dt:Math.max(we,dt),Ze.attr("d","M"+(Ae-A)+","+tt.ymin+"v-4h"+2*A+"v4ZM"+(Ae-A)+","+(tt.ymax-1)+"v4h"+2*A+"v-4Z")):"d"===xt&&((tt=de?c(le,[Ae,we],[ft,dt]):[[Ae,we],[Ae,dt],[ft,dt],[ft,we]]).xmin=Math.min(Ae,ft),tt.xmax=Math.max(Ae,ft),tt.ymin=Math.min(we,dt),tt.ymax=Math.max(we,dt),Ze.attr("d","M0,0Z"))}else re&&(Pe.addPt([ft,dt]),tt=Pe.filtered);J.selectionDefs&&J.selectionDefs.length?(zt=J.mergedPolygons,Ft=tt,He=St?p.difference({regions:zt,inverted:!1},{regions:[Ft],inverted:!1}).regions:p.union({regions:zt,inverted:!1},{regions:[Ft],inverted:!1}).regions,tt.subtract=St,ze=G(J.selectionDefs.concat([tt]))):(He=[tt],ze=E(tt)),l(N(He,se),Xt,J),ue&&o.throttle(Ne,_.SELECTDELAY,function(){var zt;it=[];var Ft,Qe=[];for(Oe=0;Oe<ke.length;Oe++)if(Ft=(Be=ke[Oe])._module.selectPoints(Be,ze),Qe.push(Ft),zt=R(Ft,Be),it.length)for(var yt=0;yt<zt.length;yt++)it.push(zt[yt]);else it=zt;te(ve,ke,Je={points:it}),Ue(Je,tt,Pe),J.gd.emit("plotly_selecting",Je)})},J.clickFn=function(Re,Ie){if(Ze.remove(),ve._fullLayout._activeShapeIndex>=0)ve._fullLayout._deactivateShape(ve);else if(!ie){var Ke=_e.clickmode;o.done(Ne).then(function(){if(o.clear(Ne),2===Re){for(Xt.remove(),Oe=0;Oe<ke.length;Oe++)(Be=ke[Oe])._module.selectPoints(Be,!1);te(ve,ke),Z(J),ve.emit("plotly_deselect",null)}else Ke.indexOf("select")>-1&&z(Ie,ve,J.xaxes,J.yaxes,J.subplot,J,Xt),"event"===Ke&&ve.emit("plotly_selected",void 0);e.click(ve,Ie)}).catch(m.error)}},J.doneFn=function(){Ze.remove(),o.done(Ne).then(function(){o.clear(Ne),J.gd.emit("plotly_selected",Je),tt&&J.selectionDefs&&(tt.subtract=St,J.selectionDefs.push(tt),J.mergedPolygons.length=0,[].push.apply(J.mergedPolygons,He)),J.doneFnCompleted&&J.doneFnCompleted(it)}).catch(m.error),ie&&Z(J)}},clearSelect:k,clearSelectionsCache:Z,selectOnClick:z}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("d3-time-format").utcFormat,u=x("../../lib"),y=u.numberFormat,e=x("fast-isnumeric"),n=u.cleanNumber,t=u.ms2DateTime,a=u.dateTime2ms,r=u.ensureNumber,f=u.isArrayOrTypedArray,s=x("../../constants/numerical"),i=s.FP_SAFE,l=s.BADNUM,c=s.LOG_CLIP,h=s.ONEWEEK,m=s.ONEDAY,d=s.ONEHOUR,o=s.ONEMIN,b=s.ONESEC,g=x("./axis_ids"),w=x("./constants"),_=w.HOUR_PATTERN,A=w.WEEKDAY_PATTERN;function T(k){return Math.pow(10,k)}function E(k){return null!=k}Q.exports=function(k,O){O=O||{};var D=k._id||"x",S=D.charAt(0);function C(j,J){if(j>0)return Math.log(j)/Math.LN10;if(j<=0&&J&&k.range&&2===k.range.length){var $=k.range[0],re=k.range[1];return.5*($+re-2*c*Math.abs($-re))}return l}function z(j,J,$,re){if((re||{}).msUTC&&e(j))return+j;var ne=a(j,$||k.calendar);if(ne===l){if(!e(j))return l;j=+j;var se=Math.floor(10*u.mod(j+.05,1)),ie=Math.round(j-se/10);ne=a(new Date(ie))+se/10}return ne}function B(j,J,$){return t(j,J,$||k.calendar)}function U(j){return k._categories[Math.round(j)]}function G(j){if(E(j)){if(void 0===k._categoriesMap&&(k._categoriesMap={}),void 0!==k._categoriesMap[j])return k._categoriesMap[j];k._categories.push("number"==typeof j?String(j):j);var J=k._categories.length-1;return k._categoriesMap[j]=J,J}return l}function X(j){if(k._categoriesMap)return k._categoriesMap[j]}function Z(j){var J=X(j);return void 0!==J?J:e(j)?+j:void 0}function q(j){return e(j)?+j:X(j)}function W(j,J,$){return p.round($+J*j,2)}function te(j,J,$){return(j-$)/J}var R=function(j){return e(j)?W(j,k._m,k._b):l},N=function(j){return te(j,k._m,k._b)};if(k.rangebreaks){var V="y"===S;R=function(j){if(!e(j))return l;var J=k._rangebreaks.length;if(!J)return W(j,k._m,k._b);var $=V;k.range[0]>k.range[1]&&($=!$);for(var re=$?-1:1,ne=re*j,se=0,ie=0;ie<J;ie++){var ue=re*k._rangebreaks[ie].min,le=re*k._rangebreaks[ie].max;if(ne<ue)break;if(!(ne>le)){se=ne<(ue+le)/2?ie:ie+1;break}se=ie+1}var de=k._B[se]||0;return isFinite(de)?W(j,k._m2,de):0},N=function(j){var J=k._rangebreaks.length;if(!J)return te(j,k._m,k._b);for(var $=0,re=0;re<J&&!(j<k._rangebreaks[re].pmin);re++)j>k._rangebreaks[re].pmax&&($=re+1);return te(j,k._m2,k._B[$])}}k.c2l="log"===k.type?C:r,k.l2c="log"===k.type?T:r,k.l2p=R,k.p2l=N,k.c2p="log"===k.type?function(j,J){return R(C(j,J))}:R,k.p2c="log"===k.type?function(j){return T(N(j))}:N,-1!==["linear","-"].indexOf(k.type)?(k.d2r=k.r2d=k.d2c=k.r2c=k.d2l=k.r2l=n,k.c2d=k.c2r=k.l2d=k.l2r=r,k.d2p=k.r2p=function(j){return k.l2p(n(j))},k.p2d=k.p2r=N,k.cleanPos=r):"log"===k.type?(k.d2r=k.d2l=function(j,J){return C(n(j),J)},k.r2d=k.r2c=function(j){return T(n(j))},k.d2c=k.r2l=n,k.c2d=k.l2r=r,k.c2r=C,k.l2d=T,k.d2p=function(j,J){return k.l2p(k.d2r(j,J))},k.p2d=function(j){return T(N(j))},k.r2p=function(j){return k.l2p(n(j))},k.p2r=N,k.cleanPos=r):"date"===k.type?(k.d2r=k.r2d=u.identity,k.d2c=k.r2c=k.d2l=k.r2l=z,k.c2d=k.c2r=k.l2d=k.l2r=B,k.d2p=k.r2p=function(j,J,$){return k.l2p(z(j,0,$))},k.p2d=k.p2r=function(j,J,$){return B(N(j),J,$)},k.cleanPos=function(j){return u.cleanDate(j,l,k.calendar)}):"category"===k.type?(k.d2c=k.d2l=G,k.r2d=k.c2d=k.l2d=U,k.d2r=k.d2l_noadd=Z,k.r2c=function(j){var J=q(j);return void 0!==J?J:k.fraction2r(.5)},k.l2r=k.c2r=r,k.r2l=q,k.d2p=function(j){return k.l2p(k.r2c(j))},k.p2d=function(j){return U(N(j))},k.r2p=k.d2p,k.p2r=N,k.cleanPos=function(j){return"string"==typeof j&&""!==j?j:r(j)}):"multicategory"===k.type&&(k.r2d=k.c2d=k.l2d=U,k.d2r=k.d2l_noadd=Z,k.r2c=function(j){var J=Z(j);return void 0!==J?J:k.fraction2r(.5)},k.r2c_just_indices=X,k.l2r=k.c2r=r,k.r2l=Z,k.d2p=function(j){return k.l2p(k.r2c(j))},k.p2d=function(j){return U(N(j))},k.r2p=k.d2p,k.p2r=N,k.cleanPos=function(j){return Array.isArray(j)||"string"==typeof j&&""!==j?j:r(j)},k.setupMultiCategory=function(j){var J,$,re=k._traceIndices,ne=k._matchGroup;if(ne&&0===k._categories.length)for(var se in ne)if(se!==D){var ie=O[g.id2name(se)];re=re.concat(ie._traceIndices)}var ue=[[0,{}],[0,{}]],le=[];for(J=0;J<re.length;J++){var de=j[re[J]];if(S in de){var ve=de[S],_e=de._length||u.minRowLength(ve);if(f(ve[0])&&f(ve[1]))for($=0;$<_e;$++){var be=ve[0][$],Te=ve[1][$];E(be)&&E(Te)&&(le.push([be,Te]),be in ue[0][1]||(ue[0][1][be]=ue[0][0]++),Te in ue[1][1]||(ue[1][1][Te]=ue[1][0]++))}}}for(le.sort(function(he,me){var Ae=ue[0][1],we=Ae[he[0]]-Ae[me[0]];if(we)return we;var Se=ue[1][1];return Se[he[1]]-Se[me[1]]}),J=0;J<le.length;J++)G(le[J])}),k.fraction2r=function(j){var J=k.r2l(k.range[0]),$=k.r2l(k.range[1]);return k.l2r(J+j*($-J))},k.r2fraction=function(j){var J=k.r2l(k.range[0]),$=k.r2l(k.range[1]);return(k.r2l(j)-J)/($-J)},k.cleanRange=function(j,J){J||(J={}),j||(j="range");var $,re,ne=u.nestedProperty(k,j).get();if(re=(re="date"===k.type?u.dfltRange(k.calendar):"y"===S?w.DFLTRANGEY:"realaxis"===k._name?[0,1]:J.dfltRange||w.DFLTRANGEX).slice(),"tozero"!==k.rangemode&&"nonnegative"!==k.rangemode||(re[0]=0),ne&&2===ne.length)for("date"!==k.type||k.autorange||(ne[0]=u.cleanDate(ne[0],l,k.calendar),ne[1]=u.cleanDate(ne[1],l,k.calendar)),$=0;$<2;$++)if("date"===k.type){if(!u.isDateTime(ne[$],k.calendar)){k[j]=re;break}if(k.r2l(ne[0])===k.r2l(ne[1])){var se=u.constrain(k.r2l(ne[0]),u.MIN_MS+1e3,u.MAX_MS-1e3);ne[0]=k.l2r(se-1e3),ne[1]=k.l2r(se+1e3);break}}else{if(!e(ne[$])){if(!e(ne[1-$])){k[j]=re;break}ne[$]=ne[1-$]*($?10:.1)}if(ne[$]<-i?ne[$]=-i:ne[$]>i&&(ne[$]=i),ne[0]===ne[1]){var ie=Math.max(1,Math.abs(1e-6*ne[0]));ne[0]-=ie,ne[1]+=ie}}else u.nestedProperty(k,j).set(re)},k.setScale=function(j){var J=O._size;if(k.overlaying){var $=g.getFromId({_fullLayout:O},k.overlaying);k.domain=$.domain}var re=j&&k._r?"_r":"range",ne=k.calendar;k.cleanRange(re);var se,ie,ue=k.r2l(k[re][0],ne),le=k.r2l(k[re][1],ne),de="y"===S;if(de?(k._offset=J.t+(1-k.domain[1])*J.h,k._length=J.h*(k.domain[1]-k.domain[0]),k._m=k._length/(ue-le),k._b=-k._m*le):(k._offset=J.l+k.domain[0]*J.w,k._length=J.w*(k.domain[1]-k.domain[0]),k._m=k._length/(le-ue),k._b=-k._m*ue),k._rangebreaks=[],k._lBreaks=0,k._m2=0,k._B=[],k.rangebreaks&&(k._rangebreaks=k.locateBreaks(Math.min(ue,le),Math.max(ue,le)),k._rangebreaks.length)){for(se=0;se<k._rangebreaks.length;se++)ie=k._rangebreaks[se],k._lBreaks+=Math.abs(ie.max-ie.min);var ve=de;ue>le&&(ve=!ve),ve&&k._rangebreaks.reverse();var _e=ve?-1:1;for(k._m2=_e*k._length/(Math.abs(le-ue)-k._lBreaks),k._B.push(-k._m2*(de?le:ue)),se=0;se<k._rangebreaks.length;se++)k._B.push(k._B[k._B.length-1]-_e*k._m2*((ie=k._rangebreaks[se]).max-ie.min));for(se=0;se<k._rangebreaks.length;se++)(ie=k._rangebreaks[se]).pmin=R(ie.min),ie.pmax=R(ie.max)}if(!isFinite(k._m)||!isFinite(k._b)||k._length<0)throw O._replotting=!1,new Error("Something went wrong with axis scaling")},k.maskBreaks=function(j){var J,$,re,ne,se,ie=k.rangebreaks||[];ie._cachedPatterns||(ie._cachedPatterns=ie.map(function(be){return be.enabled&&be.bounds?u.simpleMap(be.bounds,be.pattern?n:k.d2c):null})),ie._cachedValues||(ie._cachedValues=ie.map(function(be){return be.enabled&&be.values?u.simpleMap(be.values,k.d2c).sort(u.sorterAsc):null}));for(var ue=0;ue<ie.length;ue++){var le=ie[ue];if(le.enabled)if(le.bounds){switch($=(J=ie._cachedPatterns[ue])[0],re=J[1],le.pattern){case A:ne=(se=new Date(j)).getUTCDay(),$>re&&(re+=7,ne<$&&(ne+=7));break;case _:ne=(se=new Date(j)).getUTCHours()+(se.getUTCMinutes()/60+se.getUTCSeconds()/3600+se.getUTCMilliseconds()/36e5),$>re&&(re+=24,ne<$&&(ne+=24));break;case"":ne=j}if(ne>=$&&ne<re)return l}else for(var ve=ie._cachedValues[ue],_e=0;_e<ve.length;_e++)if(re=($=ve[_e])+le.dvalue,j>=$&&j<re)return l}return j},k.locateBreaks=function(j,J){var $,re,ne,se,ie=[];if(!k.rangebreaks)return ie;var ue=k.rangebreaks.slice().sort(function(Se,Pe){return Se.pattern===A&&Pe.pattern===_?-1:Pe.pattern===A&&Se.pattern===_?1:0}),le=function(Se,Pe){if((Se=u.constrain(Se,j,J))!==(Pe=u.constrain(Pe,j,J))){for(var ze=!0,He=0;He<ie.length;He++){var tt=ie[He];Se<tt.max&&Pe>=tt.min&&(Se<tt.min&&(tt.min=Se),Pe>tt.max&&(tt.max=Pe),ze=!1)}ze&&ie.push({min:Se,max:Pe})}};for($=0;$<ue.length;$++){var de=ue[$];if(de.enabled)if(de.bounds){var ve=j,_e=J;de.pattern&&(ve=Math.floor(ve)),ne=(re=u.simpleMap(de.bounds,de.pattern?n:k.r2l))[0],se=re[1];var be,Te,he=new Date(ve);switch(de.pattern){case A:Te=h,be=(se-ne+(se<ne?7:0))*m,ve+=ne*m-(he.getUTCDay()*m+he.getUTCHours()*d+he.getUTCMinutes()*o+he.getUTCSeconds()*b+he.getUTCMilliseconds());break;case _:Te=m,be=(se-ne+(se<ne?24:0))*d,ve+=ne*d-(he.getUTCHours()*d+he.getUTCMinutes()*o+he.getUTCSeconds()*b+he.getUTCMilliseconds());break;default:ve=Math.min(re[0],re[1]),be=Te=(_e=Math.max(re[0],re[1]))-ve}for(var me=ve;me<_e;me+=Te)le(me,me+be)}else for(var Ae=u.simpleMap(de.values,k.d2c),we=0;we<Ae.length;we++)le(ne=Ae[we],se=ne+de.dvalue)}return ie.sort(function(Se,Pe){return Se.min-Pe.min}),ie},k.makeCalcdata=function(j,J,$){var re,ne,se,ie,ue=k.type,le="date"===ue&&j[J+"calendar"];if(J in j){if(re=j[J],ie=j._length||u.minRowLength(re),u.isTypedArray(re)&&("linear"===ue||"log"===ue)){if(ie===re.length)return re;if(re.subarray)return re.subarray(0,ie)}if("multicategory"===ue)return function(_e,be){for(var Te=new Array(be),he=0;he<be;he++)Te[he]=X([(_e[0]||[])[he],(_e[1]||[])[he]]);return Te}(re,ie);for(ne=new Array(ie),se=0;se<ie;se++)ne[se]=k.d2c(re[se],0,le,$)}else{var de=J+"0"in j?k.d2c(j[J+"0"],0,le):0,ve=j["d"+J]?Number(j["d"+J]):1;for(re=j[{x:"y",y:"x"}[J]],ie=j._length||re.length,ne=new Array(ie),se=0;se<ie;se++)ne[se]=de+se*ve}if(k.rangebreaks)for(se=0;se<ie;se++)ne[se]=k.maskBreaks(ne[se]);return ne},k.isValidRange=function(j){return Array.isArray(j)&&2===j.length&&e(k.r2l(j[0]))&&e(k.r2l(j[1]))},k.isPtWithinRange=function(j,J){var $=k.c2l(j[S],null,J),re=k.r2l(k.range[0]),ne=k.r2l(k.range[1]);return re<ne?re<=$&&$<=ne:ne<=$&&$<=re},k._emptyCategories=function(){k._categories=[],k._categoriesMap={}},k.clearCalc=function(){var j=k._matchGroup;if(j){var J=null,$=null;for(var re in j){var ne=O[g.id2name(re)];if(ne._categories){J=ne._categories,$=ne._categoriesMap;break}}J&&$?(k._categories=J,k._categoriesMap=$):k._emptyCategories()}else k._emptyCategories();if(k._initialCategories)for(var se=0;se<k._initialCategories.length;se++)G(k._initialCategories[se])},k.sortByInitialCategories=function(){var j=[];if(k._emptyCategories(),k._initialCategories)for(var J=0;J<k._initialCategories.length;J++)G(k._initialCategories[J]);j=j.concat(k._traceIndices);var $=k._matchGroup;for(var re in $)if(D!==re){var ne=O[g.id2name(re)];ne._categories=k._categories,ne._categoriesMap=k._categoriesMap,j=j.concat(ne._traceIndices)}return j};var ee=O._d3locale;"date"===k.type&&(k._dateFormat=ee?ee.timeFormat:v,k._extraFormat=O._extraFormat),k._separators=O.separators,k._numFormat=ee?ee.numberFormat:y,delete k._minDtick,delete k._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(x,Q,K){"use strict";Q.exports=function(p){var v=["showexponent","showtickprefix","showticksuffix"].filter(function(u){return void 0!==p[u]});if(v.every(function(u){return p[u]===p[v[0]]})||1===v.length)return p[v[0]]}},{}],578:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/color").contrast,u=x("./layout_attributes"),y=x("./show_dflt"),e=x("../array_container_defaults");function n(t,a){function r(f,s){return p.coerce(t,a,u.tickformatstops,f,s)}r("enabled")&&(r("dtickrange"),r("value"))}Q.exports=function(t,a,r,f,s){s||(s={});var i=y(t);if(r("showticklabels")){var l=s.font||{},c=a.color,h=-1!==(a.ticklabelposition||"").indexOf("inside")?v(s.bgColor):c&&c!==u.color.dflt?c:l.color;if(p.coerceFont(r,"tickfont",{family:l.family,size:l.size,color:h}),s.noAng||r("tickangle"),"category"!==f){var m=r("tickformat");e(t,a,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:n}),a.tickformatstops.length||delete a.tickformatstops,s.noExp||m||"date"===f||(r("showexponent",i),r("exponentformat"),r("minexponent"),r("separatethousands"))}}}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./layout_attributes");Q.exports=function(u,y,e,n){var t=p.coerce2(u,y,v,"ticklen"),a=p.coerce2(u,y,v,"tickwidth"),r=p.coerce2(u,y,v,"tickcolor",y.color);e("ticks",n.outerTicks||t||a||r?"outside":"")||(delete y.ticklen,delete y.tickwidth,delete y.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(x,Q,K){"use strict";var p=x("./clean_ticks"),v=x("../../lib").isArrayOrTypedArray;Q.exports=function(u,y,e,n){function t(l){var c=u[l];return void 0!==c?c:(y._template||{})[l]}var a=t("tick0"),r=t("dtick"),f=t("tickvals"),s=e("tickmode",v(f)?"array":r?"linear":"auto");if("auto"===s)e("nticks");else if("linear"===s){var i=y.dtick=p.dtick(r,n);y.tick0=p.tick0(a,n,y.calendar,i)}else"multicategory"!==n&&(void 0===e("tickvals")?y.tickmode="auto":e("ticktext"))}},{"../../lib":503,"./clean_ticks":560}],581:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../registry"),u=x("../../lib"),y=x("../../components/drawing"),e=x("./axes");Q.exports=function(n,t,a,r){var f=n._fullLayout;if(0!==t.length){var s,i,l,c;r&&(s=r());var h=p.ease(a.easing);return n._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var o={},b=0;b<t.length;b++){var g=t[b],_=g.plotinfo.yaxis;g.xr0&&(o[g.plotinfo.xaxis._name+".range"]=g.xr0.slice()),g.yr0&&(o[_._name+".range"]=g.yr0.slice())}return v.call("relayout",n,o).then(function(){for(var A=0;A<t.length;A++)m(t[A].plotinfo)})}()}),i=Date.now(),c=window.requestAnimationFrame(function o(){l=Date.now();for(var b=Math.min(1,(l-i)/a.duration),g=h(b),w=0;w<t.length;w++)d(t[w],g);l-i>a.duration?(function(){for(var _={},A=0;A<t.length;A++){var T=t[A],k=T.plotinfo.yaxis;T.xr1&&(_[T.plotinfo.xaxis._name+".range"]=T.xr1.slice()),T.yr1&&(_[k._name+".range"]=T.yr1.slice())}s&&s(),v.call("relayout",n,_).then(function(){for(var O=0;O<t.length;O++)m(t[O].plotinfo)})}(),c=window.cancelAnimationFrame(o)):c=window.requestAnimationFrame(o)}),Promise.resolve()}function m(o){var b=o.xaxis,g=o.yaxis;f._defs.select("#"+o.clipId+"> rect").call(y.setTranslate,0,0).call(y.setScale,1,1),o.plot.call(y.setTranslate,b._offset,g._offset).call(y.setScale,1,1);var w=o.plot.selectAll(".scatterlayer .trace");w.selectAll(".point").call(y.setPointGroupScale,1,1),w.selectAll(".textpoint").call(y.setTextPointsScale,1,1),w.call(y.hideOutsideRangePoints,o)}function d(o,b){var g=o.plotinfo,w=g.xaxis,_=g.yaxis,A=w._length,T=_._length,E=!!o.xr1,k=!!o.yr1,O=[];if(E){var D=u.simpleMap(o.xr0,w.r2l),S=u.simpleMap(o.xr1,w.r2l),C=D[1]-D[0],z=S[1]-S[0];O[0]=(D[0]*(1-b)+b*S[0]-D[0])/(D[1]-D[0])*A,O[2]=A*(1-b+b*z/C),w.range[0]=w.l2r(D[0]*(1-b)+b*S[0]),w.range[1]=w.l2r(D[1]*(1-b)+b*S[1])}else O[0]=0,O[2]=A;if(k){var B=u.simpleMap(o.yr0,_.r2l),U=u.simpleMap(o.yr1,_.r2l),G=B[1]-B[0],X=U[1]-U[0];O[1]=(B[1]*(1-b)+b*U[1]-B[1])/(B[0]-B[1])*T,O[3]=T*(1-b+b*X/G),_.range[0]=w.l2r(B[0]*(1-b)+b*U[0]),_.range[1]=_.l2r(B[1]*(1-b)+b*U[1])}else O[1]=0,O[3]=T;e.drawOne(n,w,{skipTitle:!0}),e.drawOne(n,_,{skipTitle:!0}),e.redrawComponents(n,[w._id,_._id]);var Z=E?A/O[2]:1,q=k?T/O[3]:1,V=w._offset-(E?O[0]/O[2]*A:0),ee=_._offset-(k?O[1]/O[3]*T:0);g.clipRect.call(y.setTranslate,E?O[0]:0,k?O[1]:0).call(y.setScale,1/Z,1/q),g.plot.call(y.setTranslate,V,ee).call(y.setScale,Z,q),y.setPointGroupScale(g.zoomScalePts,1/Z,1/q),y.setTextPointsScale(g.zoomScaleTxt,1/Z,1/q)}e.redrawComponents(n)}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(x,Q,K){"use strict";var p=x("../../registry").traceIs,v=x("./axis_autotype");function u(e){return{v:"x",h:"y"}[e.orientation||"v"]}function y(e,n){var t=u(e),a=p(e,"box-violin"),r=p(e._fullInput||{},"candlestick");return a&&!r&&n===t&&void 0===e[t]&&void 0===e[t+"0"]}Q.exports=function(e,n,t,a){t("autotypenumbers",a.autotypenumbersDflt),"-"===t("type",(a.splomStash||{}).type)&&(function(r,f){if("-"===r.type){var s,i=r._id,l=i.charAt(0);-1!==i.indexOf("scene")&&(i=l);var c=function(_,A,T){for(var E=0;E<_.length;E++){var k=_[E];if("splom"===k.type&&k._length>0&&(k["_"+T+"axes"]||{})[A]||(k[T+"axis"]||T)===A&&(y(k,T)||(k[T]||[]).length||k[T+"0"]))return k}}(f,i,l);if(c){if("histogram"===c.type&&l==={v:"y",h:"x"}[c.orientation||"v"])return void(r.type="linear");var h=l+"calendar",m=c[h],d={noMultiCategory:!p(c,"cartesian")||p(c,"noMultiCategory")};if("box"===c.type&&c._hasPreCompStats&&l==={h:"x",v:"y"}[c.orientation||"v"]&&(d.noMultiCategory=!0),d.autotypenumbers=r.autotypenumbers,y(c,l)){var o=u(c),b=[];for(s=0;s<f.length;s++){var g=f[s];p(g,"box-violin")&&(g[l+"axis"]||l)===i&&(b.push(void 0!==g[o]?g[o][0]:void 0!==g.name?g.name:"text"),g[h]!==m&&(m=void 0))}r.type=v(b,m,d)}else if("splom"===c.type){var w=c.dimensions[c._axesDim[i]];w.visible&&(r.type=v(w.values,m,d))}else r.type=v(c[l]||[c[l+"0"]],m,d)}}}(n,a.data),"-"===n.type?n.type="linear":e.type=n.type)}},{"../../registry":638,"./axis_autotype":555}],583:[function(x,Q,K){"use strict";var p=x("../registry"),v=x("../lib");function u(t,a,r){var f,s,i,l=!1;if("data"===a.type)f=t._fullData[null!==a.traces?a.traces[0]:0];else{if("layout"!==a.type)return!1;f=t._fullLayout}return s=v.nestedProperty(f,a.prop).get(),(i=r[a.type]=r[a.type]||{}).hasOwnProperty(a.prop)&&i[a.prop]!==s&&(l=!0),i[a.prop]=s,{changed:l,value:s}}function y(t,a){var r=[],f=a[0],s={};if("string"==typeof f)s[f]=a[1];else{if(!v.isPlainObject(f))return r;s=f}return n(s,function(i,l,c){r.push({type:"layout",prop:i,value:c})},"",0),r}function e(t,a){var r,f,s,i,l=[];if(s=a[1],r=a[2],i={},"string"==typeof(f=a[0]))i[f]=s;else{if(!v.isPlainObject(f))return l;i=f,void 0===r&&(r=s)}return void 0===r&&(r=null),n(i,function(c,h,m){var d,o;if(Array.isArray(m)){o=m.slice();var b=Math.min(o.length,t.data.length);r&&(b=Math.min(b,r.length)),d=[];for(var g=0;g<b;g++)d[g]=r?r[g]:g}else o=m,d=r?r.slice():null;if(null===d)Array.isArray(o)&&(o=o[0]);else if(Array.isArray(d)){if(!Array.isArray(o)){var w=o;o=[];for(var _=0;_<d.length;_++)o[_]=w}o.length=Math.min(d.length,o.length)}l.push({type:"data",prop:c,traces:d,value:o})},"",0),l}function n(t,a,r,f){Object.keys(t).forEach(function(s){var i=t[s];if("_"!==s[0]){var l=r+(f>0?".":"")+s;v.isPlainObject(i)?n(i,a,l,f+1):a(l,s,i)}})}K.manageCommandObserver=function(t,a,r,f){var s={},i=!0;a&&a._commandObserver&&(s=a._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var l=K.hasSimpleAPICommandBindings(t,r,s.lookupTable);if(a&&a._commandObserver){if(l)return s;if(a._commandObserver.remove)return a._commandObserver.remove(),a._commandObserver=null,s}if(l){u(t,l,s.cache),s.check=function(){if(i){var m=u(t,l,s.cache);return m.changed&&f&&void 0!==s.lookupTable[m.value]&&(s.disable(),Promise.resolve(f({value:m.value,type:l.type,prop:l.prop,traces:l.traces,index:s.lookupTable[m.value]})).then(s.enable,s.enable)),m.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<c.length;h++)t._internalOn(c[h],s.check);s.remove=function(){for(var m=0;m<c.length;m++)t._removeInternalListener(c[m],s.check)}}else v.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){i=!1},s.enable=function(){i=!0},a&&(a._commandObserver=s),s},K.hasSimpleAPICommandBindings=function(t,a,r){var f,s,i=a.length;for(f=0;f<i;f++){var l,c=a[f],h=c.method,m=c.args;if(Array.isArray(m)||(m=[]),!h)return!1;var d=K.computeAPICommandBindings(t,h,m);if(1!==d.length)return!1;if(s){if((l=d[0]).type!==s.type||l.prop!==s.prop)return!1;if(Array.isArray(s.traces)){if(!Array.isArray(l.traces))return!1;l.traces.sort();for(var o=0;o<s.traces.length;o++)if(s.traces[o]!==l.traces[o])return!1}else if(l.prop!==s.prop)return!1}else s=d[0],Array.isArray(s.traces)&&s.traces.sort();var b=(l=d[0]).value;if(Array.isArray(b)){if(1!==b.length)return!1;b=b[0]}r&&(r[b]=f)}return s},K.executeAPICommand=function(t,a,r){if("skip"===a)return Promise.resolve();var f=p.apiMethodRegistry[a],s=[t];Array.isArray(r)||(r=[]);for(var i=0;i<r.length;i++)s.push(r[i]);return f.apply(null,s).catch(function(l){return v.warn("API call to Plotly."+a+" rejected.",l),Promise.reject(l)})},K.computeAPICommandBindings=function(t,a,r){var f,i;switch(Array.isArray(r)||(r=[]),a){case"restyle":f=e(t,r);break;case"relayout":f=y(0,r);break;case"update":f=e(t,[r[0],r[2]]).concat(y(0,[r[1]]));break;case"animate":i=r,f=Array.isArray(i[0])&&1===i[0].length&&-1!==["string","number"].indexOf(typeof i[0][0])?[{type:"layout",prop:"_currentFrame",value:i[0][0].toString()}]:[];break;default:f=[]}return f}},{"../lib":503,"../registry":638}],584:[function(x,Q,K){"use strict";var p=x("../lib/extend").extendFlat;K.attributes=function(v,u){u=u||{};var y={valType:"info_array",editType:(v=v||{}).editType,items:[{valType:"number",min:0,max:1,editType:v.editType},{valType:"number",min:0,max:1,editType:v.editType}],dflt:[0,1]},e={x:p({},y,{}),y:p({},y,{}),editType:v.editType};return v.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:v.editType},e.column={valType:"integer",min:0,dflt:0,editType:v.editType}),e},K.defaults=function(v,u,y,e){var n=e&&e.x||[0,1],t=e&&e.y||[0,1],a=u.grid;if(a){var r=y("domain.column");void 0!==r&&(r<a.columns?n=a._domains.x[r]:delete v.domain.column);var f=y("domain.row");void 0!==f&&(f<a.rows?t=a._domains.y[f]:delete v.domain.row)}var s=y("domain.x",n),i=y("domain.y",t);s[0]<s[1]||(v.domain.x=n.slice()),i[0]<i[1]||(v.domain.y=t.slice())}},{"../lib/extend":493}],585:[function(x,Q,K){"use strict";Q.exports=function(p){var v=p.editType,u=p.colorEditType;void 0===u&&(u=v);var y={family:{valType:"string",noBlank:!0,strict:!0,editType:v},size:{valType:"number",min:1,editType:v},color:{valType:"color",editType:u},editType:v};return p.arrayOk&&(y.family.arrayOk=!0,y.size.arrayOk=!0,y.color.arrayOk=!0),y}},{}],586:[function(x,Q,K){"use strict";Q.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(x,Q,K){"use strict";K.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},K.axesNames=["lonaxis","lataxis"],K.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},K.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},K.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},K.clipPad=.001,K.precision=.1,K.landColor="#F0DC82",K.waterColor="#3399FF",K.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},K.sphereSVG={type:"Sphere"},K.fillLayers={ocean:1,land:1,lakes:1},K.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},K.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],K.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],K.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("d3-geo"),u=v.geoPath,y=v.geoDistance,e=x("d3-geo-projection"),n=x("../../registry"),t=x("../../lib"),a=t.strTranslate,r=x("../../components/color"),f=x("../../components/drawing"),s=x("../../components/fx"),i=x("../plots"),l=x("../cartesian/axes"),c=x("../cartesian/autorange").getAutoRange,h=x("../../components/dragelement"),m=x("../cartesian/select").prepSelect,d=x("../cartesian/select").clearSelect,o=x("../cartesian/select").selectOnClick,b=x("./zoom"),g=x("./constants"),w=x("../../lib/geo_location_utils"),_=x("../../lib/topojson_utils"),A=x("topojson-client").feature;function T(O){this.id=O.id,this.graphDiv=O.graphDiv,this.container=O.container,this.topojsonURL=O.topojsonURL,this.isStatic=O.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var E=T.prototype;function k(O,D){var S=g.clipPad,C=O[0]+S,z=O[1]-S,B=D[0]+S,U=D[1]-S;C>0&&z<0&&(z+=360);var G=(z-C)/4;return{type:"Polygon",coordinates:[[[C,B],[C,U],[C+G,U],[C+2*G,U],[C+3*G,U],[z,U],[z,B],[z-G,B],[z-2*G,B],[z-3*G,B],[C,B]]]}}Q.exports=function(O){return new T(O)},E.plot=function(O,D,S){var C=this,z=D[this.id],B=[],U=!1;for(var G in g.layerNameToAdjective)if("frame"!==G&&z["show"+G]){U=!0;break}for(var X=0;X<O.length;X++)if(O[0][0].trace.locationmode){U=!0;break}if(U){var Z=_.getTopojsonName(z);null!==C.topojson&&Z===C.topojsonName||(C.topojsonName=Z,void 0===PlotlyGeoAssets.topojson[C.topojsonName]&&B.push(C.fetchTopojson()))}B=B.concat(w.fetchTraceGeoData(O)),S.push(new Promise(function(q,W){Promise.all(B).then(function(){C.topojson=PlotlyGeoAssets.topojson[C.topojsonName],C.update(O,D),q()}).catch(W)}))},E.fetchTopojson=function(){var O=this,D=_.getTopojsonPath(O.topojsonURL,O.topojsonName);return new Promise(function(S,C){p.json(D,function(z,B){if(z)return C(404===z.status?new Error(["plotly.js could not find topojson file at",D,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",D].join(" ")));PlotlyGeoAssets.topojson[O.topojsonName]=B,S()})})},E.update=function(O,D){var S=D[this.id];this.hasChoropleth=!1;for(var C=0;C<O.length;C++){var z=O[C],B=z[0].trace;"choropleth"===B.type&&(this.hasChoropleth=!0),!0===B.visible&&B._length>0&&B._module.calcGeoJSON(z,D)}if(!this.updateProjection(O,D)){this.viewInitial&&this.scope===S.scope||this.saveViewInitial(S),this.scope=S.scope,this.updateBaseLayers(D,S),this.updateDims(D,S),this.updateFx(D,S),i.generalUpdatePerTraceModule(this.graphDiv,this,O,S);var U=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=U.selectAll(".point"),this.dataPoints.text=U.selectAll("text"),this.dataPaths.line=U.selectAll(".js-line");var G=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=G.selectAll("path"),this.render()}},E.updateProjection=function(O,D){var S=this.graphDiv,C=D[this.id],z=D._size,B=C.domain,U=C.projection,G=C.lonaxis,X=C.lataxis,Z=G._ax,q=X._ax,W=this.projection=function(he){var me=he.projection,Ae=me.type,we=g.projNames[Ae];we="geo"+t.titleCase(we);for(var Se=(v[we]||e[we])(),Pe=he._isSatellite?180*Math.acos(1/me.distance)/Math.PI:he._isClipped?g.lonaxisSpan[Ae]/2:null,ze=["center","rotate","parallels","clipExtent"],He=function(Be){return Be?Se:[]},tt=0;tt<ze.length;tt++){var Oe=ze[tt];"function"!=typeof Se[Oe]&&(Se[Oe]=He)}return Se.isLonLatOverEdges=function(Be){if(null===Se(Be))return!0;if(Pe){var Je=Se.rotate();return y(Be,[-Je[0],-Je[1]])>Pe*Math.PI/180}return!1},Se.getPath=function(){return u().projection(Se)},Se.getBounds=function(Be){return Se.getPath().bounds(Be)},Se.precision(g.precision),he._isSatellite&&Se.tilt(me.tilt).distance(me.distance),Pe&&Se.clipAngle(Pe-g.clipPad),Se}(C),te=[[z.l+z.w*B.x[0],z.t+z.h*(1-B.y[1])],[z.l+z.w*B.x[1],z.t+z.h*(1-B.y[0])]],R=C.center||{},N=U.rotation||{},V=G.range||[],ee=X.range||[];if(C.fitbounds){Z._length=te[1][0]-te[0][0],q._length=te[1][1]-te[0][1],Z.range=c(S,Z),q.range=c(S,q);var j=(Z.range[0]+Z.range[1])/2,J=(q.range[0]+q.range[1])/2;if(C._isScoped)R={lon:j,lat:J};else if(C._isClipped){R={lon:j,lat:J},N={lon:j,lat:J,roll:N.roll};var $=U.type,re=g.lonaxisSpan[$]/2||180,ne=g.lataxisSpan[$]/2||90;V=[j-re,j+re],ee=[J-ne,J+ne]}else R={lon:j,lat:J},N={lon:j,lat:N.lat,roll:N.roll}}W.center([R.lon-N.lon,R.lat-N.lat]).rotate([-N.lon,-N.lat,N.roll]).parallels(U.parallels);var se=k(V,ee);W.fitExtent(te,se);var ie=this.bounds=W.getBounds(se),ue=this.fitScale=W.scale(),le=W.translate();if(C.fitbounds){var de=W.getBounds(k(Z.range,q.range)),ve=Math.min((ie[1][0]-ie[0][0])/(de[1][0]-de[0][0]),(ie[1][1]-ie[0][1])/(de[1][1]-de[0][1]));isFinite(ve)?W.scale(ve*ue):t.warn("Something went wrong during"+this.id+"fitbounds computations.")}else W.scale(U.scale*ue);var _e=this.midPt=[(ie[0][0]+ie[1][0])/2,(ie[0][1]+ie[1][1])/2];if(W.translate([le[0]+(_e[0]-le[0]),le[1]+(_e[1]-le[1])]).clipExtent(ie),C._isAlbersUsa){var be=W([R.lon,R.lat]),Te=W.translate();W.translate([Te[0]-(be[0]-Te[0]),Te[1]-(be[1]-Te[1])])}},E.updateBaseLayers=function(O,D){var S=this,C=S.topojson,z=S.layers,B=S.basePaths;function U(W){return"lonaxis"===W||"lataxis"===W}function G(W){return Boolean(g.lineLayers[W])}function X(W){return Boolean(g.fillLayers[W])}var Z=(this.hasChoropleth?g.layersForChoropleth:g.layers).filter(function(W){return G(W)||X(W)?D["show"+W]:!U(W)||D[W].showgrid}),q=S.framework.selectAll(".layer").data(Z,String);q.exit().each(function(W){delete z[W],delete B[W],p.select(this).remove()}),q.enter().append("g").attr("class",function(W){return"layer "+W}).each(function(W){var te=z[W]=p.select(this);"bg"===W?S.bgRect=te.append("rect").style("pointer-events","all"):U(W)?B[W]=te.append("path").style("fill","none"):"backplot"===W?te.append("g").classed("choroplethlayer",!0):"frontplot"===W?te.append("g").classed("scatterlayer",!0):G(W)?B[W]=te.append("path").style("fill","none").style("stroke-miterlimit",2):X(W)&&(B[W]=te.append("path").style("stroke","none"))}),q.order(),q.each(function(W){var te=B[W],R=g.layerNameToAdjective[W];"frame"===W?te.datum(g.sphereSVG):G(W)||X(W)?te.datum(A(C,C.objects[W])):U(W)&&te.datum(function(N,V,ee){var j,J,$,re=V[N],ne=g.scopeDefaults[V.scope];"lonaxis"===N?(j=ne.lonaxisRange,J=ne.lataxisRange,$=function(Te,he){return[Te,he]}):"lataxis"===N&&(j=ne.lataxisRange,J=ne.lonaxisRange,$=function(Te,he){return[he,Te]});var se={type:"linear",range:[j[0],j[1]-1e-6],tick0:re.tick0,dtick:re.dtick};l.setConvert(se,ee);var ie=l.calcTicks(se);V.isScoped||"lonaxis"!==N||ie.pop();for(var ue=ie.length,le=new Array(ue),de=0;de<ue;de++)for(var ve=ie[de].x,_e=le[de]=[],be=J[0];be<J[1]+2.5;be+=2.5)_e.push($(ve,be));return{type:"MultiLineString",coordinates:le}}(W,D,O)).call(r.stroke,D[W].gridcolor).call(f.dashLine,"",D[W].gridwidth),G(W)?te.call(r.stroke,D[R+"color"]).call(f.dashLine,"",D[R+"width"]):X(W)&&te.call(r.fill,D[R+"color"])})},E.updateDims=function(O,D){var S=this.bounds,C=(D.framewidth||0)/2,z=S[0][0]-C,B=S[0][1]-C,U=S[1][0]-z+C,G=S[1][1]-B+C;f.setRect(this.clipRect,z,B,U,G),this.bgRect.call(f.setRect,z,B,U,G).call(r.fill,D.bgcolor),this.xaxis._offset=z,this.xaxis._length=U,this.yaxis._offset=B,this.yaxis._length=G},E.updateFx=function(O,D){var S=this,C=S.graphDiv,z=S.bgRect,B=O.dragmode,U=O.clickmode;if(!S.isStatic){var G;"select"===B?G=function(q,W){(q.range={})[S.id]=[Z([W.xmin,W.ymin]),Z([W.xmax,W.ymax])]}:"lasso"===B&&(G=function(q,W,te){(q.lassoPoints={})[S.id]=te.filtered.map(Z)});var X={element:S.bgRect.node(),gd:C,plotinfo:{id:S.id,xaxis:S.xaxis,yaxis:S.yaxis,fillRangeItems:G},xaxes:[S.xaxis],yaxes:[S.yaxis],subplot:S.id,clickFn:function(q){2===q&&d(C)}};"pan"===B?(z.node().onmousedown=null,z.call(b(S,D)),z.on("dblclick.zoom",function(){var q=S.viewInitial,W={};for(var te in q)W[S.id+"."+te]=q[te];n.call("_guiRelayout",C,W),C.emit("plotly_doubleclick",null)}),C._context._scrollZoom.geo||z.on("wheel.zoom",null)):"select"!==B&&"lasso"!==B||(z.on(".zoom",null),X.prepFn=function(q,W,te){m(q,W,te,X,B)},h.init(X)),z.on("mousemove",function(){var q=S.projection.invert(t.getPositionFromD3Event());if(!q)return h.unhover(C,p.event);S.xaxis.p2c=function(){return q[0]},S.yaxis.p2c=function(){return q[1]},s.hover(C,p.event,S.id)}),z.on("mouseout",function(){C._dragging||h.unhover(C,p.event)}),z.on("click",function(){"select"!==B&&"lasso"!==B&&(U.indexOf("select")>-1&&o(p.event,C,[S.xaxis],[S.yaxis],S.id,X),U.indexOf("event")>-1&&s.click(C,p.event))})}function Z(q){return S.projection.invert([q[0]+S.xaxis._offset,q[1]+S.yaxis._offset])}},E.makeFramework=function(){var O=this,D=O.graphDiv,S=D._fullLayout,C="clip"+S._uid+O.id;O.clipDef=S._clips.append("clipPath").attr("id",C),O.clipRect=O.clipDef.append("rect"),O.framework=p.select(O.container).append("g").attr("class","geo "+O.id).call(f.setClipUrl,C,D),O.project=function(z){var B=O.projection(z);return B?[B[0]-O.xaxis._offset,B[1]-O.yaxis._offset]:[null,null]},O.xaxis={_id:"x",c2p:function(z){return O.project(z)[0]}},O.yaxis={_id:"y",c2p:function(z){return O.project(z)[1]}},O.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(O.mockAxis,S)},E.saveViewInitial=function(O){var S=O.center||{},C=O.projection,z=C.rotation||{};this.viewInitial={fitbounds:O.fitbounds,"projection.scale":C.scale},t.extendFlat(this.viewInitial,O._isScoped?{"center.lon":S.lon,"center.lat":S.lat}:O._isClipped?{"projection.rotation.lon":z.lon,"projection.rotation.lat":z.lat}:{"center.lon":S.lon,"center.lat":S.lat,"projection.rotation.lon":z.lon})},E.render=function(){var O,D=this.projection,S=D.getPath();function C(B){var U=D(B.lonlat);return U?a(U[0],U[1]):null}function z(B){return D.isLonLatOverEdges(B.lonlat)?"none":null}for(O in this.basePaths)this.basePaths[O].attr("d",S);for(O in this.dataPaths)this.dataPaths[O].attr("d",function(B){return S(B.geojson)});for(O in this.dataPoints)this.dataPoints[O].attr("display",z).attr("transform",C)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(x,Q,K){"use strict";var p=x("../../plots/get_data").getSubplotCalcData,v=x("../../lib").counterRegex,u=x("./geo"),y="geo",e=v(y),n={};n.geo={valType:"subplotid",dflt:y,editType:"calc"},Q.exports={attr:y,name:y,idRoot:y,idRegex:e,attrRegex:e,attributes:n,layoutAttributes:x("./layout_attributes"),supplyLayoutDefaults:x("./layout_defaults"),plot:function(t){for(var a=t._fullLayout,r=t.calcdata,f=a._subplots.geo,s=0;s<f.length;s++){var i=f[s],l=p(r,y,i),c=a[i]._subplot;c||(c=u({id:i,graphDiv:t,container:a._geolayer.node(),topojsonURL:t._context.topojsonURL,staticPlot:t._context.staticPlot}),a[i]._subplot=c),c.plot(l,a,t._promises)}},updateFx:function(t){for(var a=t._fullLayout,r=a._subplots.geo,f=0;f<r.length;f++){var s=a[r[f]];s._subplot.updateFx(a,s)}},clean:function(t,a,r,f){for(var s=f._subplots.geo||[],i=0;i<s.length;i++){var l=s[i],c=f[l]._subplot;!a[l]&&c&&(c.framework.remove(),c.clipDef.remove())}}}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(x,Q,K){"use strict";var p=x("../../components/color/attributes"),v=x("../domain").attributes,u=x("./constants"),y=x("../../plot_api/edit_types").overrideAll,e=x("../../lib/sort_object_keys"),n={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:p.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(Q.exports=y({domain:v({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:e(u.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:e(u.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:p.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:u.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:u.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:u.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:u.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:p.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:p.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:p.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:p.background},lonaxis:n,lataxis:n},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../subplot_defaults"),u=x("../get_data").getSubplotData,y=x("./constants"),e=x("./layout_attributes"),n=y.axesNames;function t(a,r,f,s){var i=u(s.fullData,"geo",s.id).map(function(N){return N._expandedIndex}),l=f("resolution"),c=f("scope"),h=y.scopeDefaults[c],m=f("projection.type",h.projType),d=r._isAlbersUsa="albers usa"===m;d&&(c=r.scope="usa");var o=r._isScoped="world"!==c,b=r._isSatellite="satellite"===m,g=r._isConic=-1!==m.indexOf("conic")||"albers"===m,w=r._isClipped=!!y.lonaxisSpan[m];if(!1===a.visible){var _=p.extendDeep({},r._template);_.showcoastlines=!1,_.showcountries=!1,_.showframe=!1,_.showlakes=!1,_.showland=!1,_.showocean=!1,_.showrivers=!1,_.showsubunits=!1,_.lonaxis&&(_.lonaxis.showgrid=!1),_.lataxis&&(_.lataxis.showgrid=!1),r._template=_}for(var A=f("visible"),T=0;T<n.length;T++){var E,k=n[T],O=[30,10][T];if(o)E=h[k+"Range"];else{var D=y[k+"Span"],S=(D[m]||D["*"])/2,C=f("projection.rotation."+k.substr(0,3),h.projRotate[T]);E=[C-S,C+S]}var z=f(k+".range",E);f(k+".tick0"),f(k+".dtick",O),f(k+".showgrid",!!A&&void 0)&&(f(k+".gridcolor"),f(k+".gridwidth")),r[k]._ax={type:"linear",_id:k.slice(0,3),_traceIndices:i,setScale:p.identity,c2l:p.identity,r2l:p.identity,autorange:!0,range:z.slice(),_m:1,_input:{}}}var B=r.lonaxis.range,U=r.lataxis.range,G=B[0],X=B[1];G>0&&X<0&&(X+=360);var Z,q,W,te=(G+X)/2;if(!d){var R=o?h.projRotate:[te,0,0];Z=f("projection.rotation.lon",R[0]),f("projection.rotation.lat",R[1]),f("projection.rotation.roll",R[2]),f("showcoastlines",!o&&A)&&(f("coastlinecolor"),f("coastlinewidth")),f("showocean",!!A&&void 0)&&f("oceancolor")}d?(q=-96.6,W=38.7):(q=o?te:Z,W=(U[0]+U[1])/2),f("center.lon",q),f("center.lat",W),b&&(f("projection.tilt"),f("projection.distance")),g&&f("projection.parallels",h.projParallels||[0,60]),f("projection.scale"),f("showland",!!A&&void 0)&&f("landcolor"),f("showlakes",!!A&&void 0)&&f("lakecolor"),f("showrivers",!!A&&void 0)&&(f("rivercolor"),f("riverwidth")),f("showcountries",o&&"usa"!==c&&A)&&(f("countrycolor"),f("countrywidth")),("usa"===c||"north america"===c&&50===l)&&(f("showsubunits",A),f("subunitcolor"),f("subunitwidth")),o||f("showframe",A)&&(f("framecolor"),f("framewidth")),f("bgcolor"),f("fitbounds")&&(delete r.projection.scale,o?(delete r.center.lon,delete r.center.lat):w?(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon,delete r.projection.rotation.lat,delete r.lonaxis.range,delete r.lataxis.range):(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon))}Q.exports=function(a,r,f){v(a,r,f,{type:"geo",attributes:e,handleDefaults:t,fullData:f,partition:"y"})}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=x("../../registry"),y=Math.PI/180,e=180/Math.PI,n={cursor:"pointer"},t={cursor:"auto"};function a(A,T){return p.behavior.zoom().translate(T.translate()).scale(T.scale())}function r(A,T,E){var k=A.id,O=A.graphDiv,D=O.layout,S=D[k],C=O._fullLayout,z=C[k],B={},U={};function G(X,Z){B[k+"."+X]=v.nestedProperty(S,X).get(),u.call("_storeDirectGUIEdit",D,C._preGUI,B);var q=v.nestedProperty(z,X);q.get()!==Z&&(q.set(Z),v.nestedProperty(S,X).set(Z),U[k+"."+X]=Z)}E(G),G("projection.scale",T.scale()/A.fitScale),G("fitbounds",!1),O.emit("plotly_relayout",U)}function f(A,T){var E=a(0,T);function k(O){var D=T.invert(A.midPt);O("center.lon",D[0]),O("center.lat",D[1])}return E.on("zoomstart",function(){p.select(this).style(n)}).on("zoom",function(){T.scale(p.event.scale).translate(p.event.translate),A.render();var O=T.invert(A.midPt);A.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":T.scale()/A.fitScale,"geo.center.lon":O[0],"geo.center.lat":O[1]})}).on("zoomend",function(){p.select(this).style(t),r(A,T,k)}),E}function s(A,T){var E,k,O,D,S,C,z,B,U,G=a(0,T);function X(q){return T.invert(q)}function Z(q){var W=T.rotate(),te=T.invert(A.midPt);q("projection.rotation.lon",-W[0]),q("center.lon",te[0]),q("center.lat",te[1])}return G.on("zoomstart",function(){p.select(this).style(n),E=p.mouse(this),k=T.rotate(),O=T.translate(),D=k,S=X(E)}).on("zoom",function(){if(C=p.mouse(this),function(te){var R=X(te);if(!R)return!0;var N=T(R);return Math.abs(N[0]-te[0])>2||Math.abs(N[1]-te[1])>2}(E))return G.scale(T.scale()),void G.translate(T.translate());T.scale(p.event.scale),T.translate([O[0],p.event.translate[1]]),S?X(C)&&(B=X(C),T.rotate(z=[D[0]+(B[0]-S[0]),k[1],k[2]]),D=z):S=X(E=C),U=!0,A.render();var q=T.rotate(),W=T.invert(A.midPt);A.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":T.scale()/A.fitScale,"geo.center.lon":W[0],"geo.center.lat":W[1],"geo.projection.rotation.lon":-q[0]})}).on("zoomend",function(){p.select(this).style(t),U&&r(A,T,Z)}),G}function i(A,T){var E,k={r:T.rotate(),k:T.scale()},O=a(0,T),D=function(X){for(var Z=0,q=arguments.length,W=[];++Z<q;)W.push(arguments[Z]);var te=p.dispatch.apply(null,W);return te.of=function(R,N){return function(V){var ee;try{ee=V.sourceEvent=p.event,V.target=X,p.event=V,te[V.type].apply(R,N)}finally{p.event=ee}}},te}(O,"zoomstart","zoom","zoomend"),S=0,C=O.on;function z(X){S++||X({type:"zoomstart"})}function B(X){X({type:"zoom"})}function U(X){--S||X({type:"zoomend"})}function G(X){var Z=T.rotate();X("projection.rotation.lon",-Z[0]),X("projection.rotation.lat",-Z[1])}return O.on("zoomstart",function(){p.select(this).style(n);var X=p.mouse(this),Z=T.rotate(),q=Z,W=T.translate(),te=c(Z);E=l(T,X),C.call(O,"zoom",function(){var R=p.mouse(this);if(T.scale(k.k=p.event.scale),E){if(l(T,R)){T.rotate(Z).translate(W);var N=l(T,R),V=m(E,N),ee=w(h(te,V)),j=k.r=d(ee,E,q);isFinite(j[0])&&isFinite(j[1])&&isFinite(j[2])||(j=q),T.rotate(j),q=j}}else E=l(T,X=R);B(D.of(this,arguments))}),z(D.of(this,arguments))}).on("zoomend",function(){p.select(this).style(t),C.call(O,"zoom",null),U(D.of(this,arguments)),r(A,T,G)}).on("zoom.redraw",function(){A.render();var X=T.rotate();A.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":T.scale()/A.fitScale,"geo.projection.rotation.lon":-X[0],"geo.projection.rotation.lat":-X[1]})}),p.rebind(O,D,"on")}function l(A,T){var k,O,D,S,E=A.invert(T);return E&&isFinite(E[0])&&isFinite(E[1])&&(O=(k=E)[0]*y,D=k[1]*y,[(S=Math.cos(D))*Math.cos(O),S*Math.sin(O),Math.sin(D)])}function c(A){var T=.5*A[0]*y,E=.5*A[1]*y,k=.5*A[2]*y,O=Math.sin(T),D=Math.cos(T),S=Math.sin(E),C=Math.cos(E),z=Math.sin(k),B=Math.cos(k);return[D*C*B+O*S*z,O*C*B-D*S*z,D*S*B+O*C*z,D*C*z-O*S*B]}function h(A,T){var E=A[0],k=A[1],O=A[2],D=A[3],S=T[0],C=T[1],z=T[2],B=T[3];return[E*S-k*C-O*z-D*B,E*C+k*S+O*B-D*z,E*z-k*B+O*S+D*C,E*B+k*z-O*C+D*S]}function m(A,T){if(A&&T){var E=[(S=A)[1]*(C=T)[2]-S[2]*C[1],S[2]*C[0]-S[0]*C[2],S[0]*C[1]-S[1]*C[0]],k=Math.sqrt(_(E,E)),O=.5*Math.acos(Math.max(-1,Math.min(1,_(A,T)))),D=Math.sin(O)/k;return k&&[Math.cos(O),E[2]*D,-E[1]*D,E[0]*D]}var S,C}function d(A,T,E){var k=g(T,2,A[0]);k=g(k,1,A[1]),k=g(k,0,A[2]-E[2]);var O,D,S=T[0],C=T[1],z=T[2],B=k[0],U=k[1],G=k[2],X=Math.atan2(C,S)*e,Z=Math.sqrt(S*S+C*C);Math.abs(U)>Z?(D=(U>0?90:-90)-X,O=0):(D=Math.asin(U/Z)*e-X,O=Math.sqrt(Z*Z-U*U));var q=180-D-2*X,W=(Math.atan2(G,B)-Math.atan2(z,O))*e,te=(Math.atan2(G,B)-Math.atan2(z,-O))*e;return o(E[0],E[1],D,W)<=o(E[0],E[1],q,te)?[D,W,E[2]]:[q,te,E[2]]}function o(A,T,E,k){var O=b(E-A),D=b(k-T);return Math.sqrt(O*O+D*D)}function b(A){return(A%360+540)%360-180}function g(A,T,E){var k=E*y,O=A.slice(),D=0===T?1:0,S=2===T?1:2,C=Math.cos(k),z=Math.sin(k);return O[D]=A[D]*C-A[S]*z,O[S]=A[S]*C+A[D]*z,O}function w(A){return[Math.atan2(2*(A[0]*A[1]+A[2]*A[3]),1-2*(A[1]*A[1]+A[2]*A[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(A[0]*A[2]-A[3]*A[1]))))*e,Math.atan2(2*(A[0]*A[3]+A[1]*A[2]),1-2*(A[2]*A[2]+A[3]*A[3]))*e]}function _(A,T){for(var E=0,k=0,O=A.length;k<O;++k)E+=A[k]*T[k];return E}Q.exports=function(A,T){return(T._isScoped?f:T._isClipped?i:s)(A,A.projection)}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(x,Q,K){"use strict";var p=x("../registry"),v=x("./cartesian/constants").SUBPLOT_PATTERN;K.getSubplotCalcData=function(u,y,e){var n=p.subplotsRegistry[y];if(!n)return[];for(var t=n.attr,a=[],r=0;r<u.length;r++){var f=u[r];f[0].trace[t]===e&&a.push(f)}return a},K.getModuleCalcData=function(u,y){var e,n=[],t=[];if(!(e="string"==typeof y?p.getModule(y).plot:"function"==typeof y?y:y.plot))return[n,u];for(var a=0;a<u.length;a++){var r=u[a],f=r[0].trace;!0===f.visible&&0!==f._length&&(f._module.plot===e?n.push(r):t.push(r))}return[n,t]},K.getSubplotData=function(u,y,e){if(!p.subplotsRegistry[y])return[];var n,t,a,r=p.subplotsRegistry[y].attr,f=[];if("gl2d"===y){var s=e.match(v);t="x"+s[1],a="y"+s[2]}for(var i=0;i<u.length;i++)n=u[i],"gl2d"===y&&p.traceIs(n,"gl2d")?n[r[0]]===t&&n[r[1]]===a&&f.push(n):n[r]===e&&f.push(n);return f}},{"../registry":638,"./cartesian/constants":561}],594:[function(x,Q,K){"use strict";var p=x("mouse-change"),v=x("mouse-wheel"),u=x("mouse-event-offset"),y=x("../cartesian/constants"),e=x("has-passive-events");function n(t,a){this.element=t,this.plot=a,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}Q.exports=function(t){var a=t.mouseContainer,r=t.glplot,f=new n(a,r);function s(){t.xaxis.autorange=!1,t.yaxis.autorange=!1}function i(l,c,h){var m,d,o=t.calcDataBox(),b=r.viewBox,g=f.lastPos[0],w=f.lastPos[1],_=y.MINDRAG*r.pixelRatio,A=y.MINZOOM*r.pixelRatio;function T(C,z,B){var U=Math.min(z,B),G=Math.max(z,B);U!==G?(o[C]=U,o[C+2]=G,f.dataBox=o,t.setRanges(o)):(t.selectBox.selectBox=[0,0,1,1],t.glplot.setDirty())}switch(c*=r.pixelRatio,h=b[3]-b[1]-(h*=r.pixelRatio),t.fullLayout.dragmode){case"zoom":if(l){var E=c/(b[2]-b[0])*(o[2]-o[0])+o[0],k=h/(b[3]-b[1])*(o[3]-o[1])+o[1];f.boxInited||(f.boxStart[0]=E,f.boxStart[1]=k,f.dragStart[0]=c,f.dragStart[1]=h),f.boxEnd[0]=E,f.boxEnd[1]=k,f.boxInited=!0,f.boxEnabled||f.boxStart[0]===f.boxEnd[0]&&f.boxStart[1]===f.boxEnd[1]||(f.boxEnabled=!0);var O=Math.abs(f.dragStart[0]-c)<A,D=Math.abs(f.dragStart[1]-h)<A;if(!function(){for(var C=t.graphDiv._fullLayout._axisConstraintGroups,z=t.xaxis._id,B=t.yaxis._id,U=0;U<C.length;U++)if(-1!==C[U][z]){if(-1!==C[U][B])return!0;break}return!1}()||O&&D)O&&(f.boxEnd[0]=f.boxStart[0]),D&&(f.boxEnd[1]=f.boxStart[1]);else{m=f.boxEnd[0]-f.boxStart[0],d=f.boxEnd[1]-f.boxStart[1];var S=(o[3]-o[1])/(o[2]-o[0]);Math.abs(m*S)>Math.abs(d)?(f.boxEnd[1]=f.boxStart[1]+Math.abs(m)*S*(d>=0?1:-1),f.boxEnd[1]<o[1]?(f.boxEnd[1]=o[1],f.boxEnd[0]=f.boxStart[0]+(o[1]-f.boxStart[1])/Math.abs(S)):f.boxEnd[1]>o[3]&&(f.boxEnd[1]=o[3],f.boxEnd[0]=f.boxStart[0]+(o[3]-f.boxStart[1])/Math.abs(S))):(f.boxEnd[0]=f.boxStart[0]+Math.abs(d)/S*(m>=0?1:-1),f.boxEnd[0]<o[0]?(f.boxEnd[0]=o[0],f.boxEnd[1]=f.boxStart[1]+(o[0]-f.boxStart[0])*Math.abs(S)):f.boxEnd[0]>o[2]&&(f.boxEnd[0]=o[2],f.boxEnd[1]=f.boxStart[1]+(o[2]-f.boxStart[0])*Math.abs(S)))}}else f.boxEnabled?(d=f.boxStart[1]!==f.boxEnd[1],(m=f.boxStart[0]!==f.boxEnd[0])||d?(m&&(T(0,f.boxStart[0],f.boxEnd[0]),t.xaxis.autorange=!1),d&&(T(1,f.boxStart[1],f.boxEnd[1]),t.yaxis.autorange=!1),t.relayoutCallback()):t.glplot.setDirty(),f.boxEnabled=!1,f.boxInited=!1):f.boxInited&&(f.boxInited=!1);break;case"pan":f.boxEnabled=!1,f.boxInited=!1,l?(f.panning||(f.dragStart[0]=c,f.dragStart[1]=h),Math.abs(f.dragStart[0]-c)<_&&(c=f.dragStart[0]),Math.abs(f.dragStart[1]-h)<_&&(h=f.dragStart[1]),d=(w-h)*(o[3]-o[1])/(r.viewBox[3]-r.viewBox[1]),o[0]+=m=(g-c)*(o[2]-o[0])/(r.viewBox[2]-r.viewBox[0]),o[2]+=m,o[1]+=d,o[3]+=d,t.setRanges(o),f.panning=!0,f.lastInputTime=Date.now(),s(),t.cameraChanged(),t.handleAnnotations()):f.panning&&(f.panning=!1,t.relayoutCallback())}f.lastPos[0]=c,f.lastPos[1]=h}return f.mouseListener=p(a,i),a.addEventListener("touchstart",function(l){var c=u(l.changedTouches[0],a);i(0,c[0],c[1]),i(1,c[0],c[1]),l.preventDefault()},!!e&&{passive:!1}),a.addEventListener("touchmove",function(l){l.preventDefault();var c=u(l.changedTouches[0],a);i(1,c[0],c[1]),l.preventDefault()},!!e&&{passive:!1}),a.addEventListener("touchend",function(l){i(0,f.lastPos[0],f.lastPos[1]),l.preventDefault()},!!e&&{passive:!1}),f.wheelListener=v(a,function(l,c){if(!t.scrollZoom)return!1;var h=t.calcDataBox(),m=r.viewBox,d=f.lastPos[0],o=f.lastPos[1],b=Math.exp(5*c/(m[3]-m[1])),g=d/(m[2]-m[0])*(h[2]-h[0])+h[0],w=o/(m[3]-m[1])*(h[3]-h[1])+h[1];return h[0]=(h[0]-g)*b+g,h[2]=(h[2]-g)*b+g,h[1]=(h[1]-w)*b+w,h[3]=(h[3]-w)*b+w,t.setRanges(h),f.lastInputTime=Date.now(),s(),t.cameraChanged(),t.handleAnnotations(),t.relayoutCallback(),!0},!0),f}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(x,Q,K){"use strict";var p=x("../cartesian/axes"),v=x("../../lib/str2rgbarray");function u(n){this.scene=n,this.gl=n.gl,this.pixelRatio=n.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var y=u.prototype,e=["xaxis","yaxis"];y.merge=function(n){var t,a,r,f,s,i,l,c,h,m,d;for(this.titleEnable=!1,this.backgroundColor=v(n.plot_bgcolor),m=0;m<2;++m){var o=(t=e[m]).charAt(0);for(r=(a=n[this.scene[t]._name]).title.text===this.scene.fullLayout._dfltTitle[o]?"":a.title.text,d=0;d<=2;d+=2)this.labelEnable[m+d]=!1,this.labels[m+d]=r,this.labelColor[m+d]=v(a.title.font.color),this.labelFont[m+d]=a.title.font.family,this.labelSize[m+d]=a.title.font.size,this.labelPad[m+d]=this.getLabelPad(t,a),this.tickEnable[m+d]=!1,this.tickColor[m+d]=v((a.tickfont||{}).color),this.tickAngle[m+d]="auto"===a.tickangle?0:Math.PI*-a.tickangle/180,this.tickPad[m+d]=this.getTickPad(a),this.tickMarkLength[m+d]=0,this.tickMarkWidth[m+d]=a.tickwidth||0,this.tickMarkColor[m+d]=v(a.tickcolor),this.borderLineEnable[m+d]=!1,this.borderLineColor[m+d]=v(a.linecolor),this.borderLineWidth[m+d]=a.linewidth||0;l=this.hasSharedAxis(a),s=this.hasAxisInDfltPos(t,a)&&!l,i=this.hasAxisInAltrPos(t,a)&&!l,f=a.mirror||!1,c=l?-1!==String(f).indexOf("all"):!!f,h=l?"allticks"===f:-1!==String(f).indexOf("ticks"),s?this.labelEnable[m]=!0:i&&(this.labelEnable[m+2]=!0),s?this.tickEnable[m]=a.showticklabels:i&&(this.tickEnable[m+2]=a.showticklabels),(s||c)&&(this.borderLineEnable[m]=a.showline),(i||c)&&(this.borderLineEnable[m+2]=a.showline),(s||h)&&(this.tickMarkLength[m]=this.getTickMarkLength(a)),(i||h)&&(this.tickMarkLength[m+2]=this.getTickMarkLength(a)),this.gridLineEnable[m]=a.showgrid,this.gridLineColor[m]=v(a.gridcolor),this.gridLineWidth[m]=a.gridwidth,this.zeroLineEnable[m]=a.zeroline,this.zeroLineColor[m]=v(a.zerolinecolor),this.zeroLineWidth[m]=a.zerolinewidth}},y.hasSharedAxis=function(n){var t=this.scene;return 0!==p.findSubplotsWithAxis(t.fullLayout._subplots.gl2d,n).indexOf(t.id)},y.hasAxisInDfltPos=function(n,t){var a=t.side;return"xaxis"===n?"bottom"===a:"yaxis"===n?"left"===a:void 0},y.hasAxisInAltrPos=function(n,t){var a=t.side;return"xaxis"===n?"top"===a:"yaxis"===n?"right"===a:void 0},y.getLabelPad=function(n,t){var a=t.title.font.size,r=t.showticklabels;return"xaxis"===n?"top"===t.side?a*(1.5+(r?1:0))-10:a*(1.5+(r?.5:0))-10:"yaxis"===n?"right"===t.side?10+a*(1.5+(r?1:.5)):10+a*(1.5+(r?.5:0)):void 0},y.getTickPad=function(n){return"outside"===n.ticks?10+n.ticklen:15},y.getTickMarkLength=function(n){if(!n.ticks)return 0;var t=n.ticklen;return"inside"===n.ticks?-t:t},Q.exports=function(n){return new u(n)}},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(x,Q,K){"use strict";var p=x("../../plot_api/edit_types").overrideAll,v=x("./scene2d"),u=x("../layout_attributes"),y=x("../../constants/xmlns_namespaces"),e=x("../cartesian/constants"),n=x("../cartesian"),t=x("../../components/fx/layout_attributes"),a=x("../get_data").getSubplotData;K.name="gl2d",K.attr=["xaxis","yaxis"],K.idRoot=["x","y"],K.idRegex=e.idRegex,K.attrRegex=e.attrRegex,K.attributes=x("../cartesian/attributes"),K.supplyLayoutDefaults=function(r,f,s){f._has("cartesian")||n.supplyLayoutDefaults(r,f,s)},K.layoutAttrOverrides=p(n.layoutAttributes,"plot","from-root"),K.baseLayoutAttrOverrides=p({plot_bgcolor:u.plot_bgcolor,hoverlabel:t.hoverlabel},"plot","nested"),K.plot=function(r){for(var f=r._fullLayout,s=r._fullData,i=f._subplots.gl2d,l=0;l<i.length;l++){var c=i[l],h=f._plots[c],m=a(s,"gl2d",c),d=h._scene2d;void 0===d&&(d=new v({id:c,graphDiv:r,container:r.querySelector(".gl-container"),staticPlot:r._context.staticPlot,plotGlPixelRatio:r._context.plotGlPixelRatio},f),h._scene2d=d),d.plot(m,r.calcdata,f,r.layout)}},K.clean=function(r,f,s,i){for(var l=i._subplots.gl2d||[],c=0;c<l.length;c++){var h=l[c],m=i._plots[h];m._scene2d&&0===a(r,"gl2d",h).length&&(m._scene2d.destroy(),delete i._plots[h])}n.clean.apply(this,arguments)},K.drawFramework=function(r){r._context.staticPlot||n.drawFramework(r)},K.toSVG=function(r){for(var f=r._fullLayout,s=f._subplots.gl2d,i=0;i<s.length;i++){var l=f._plots[s[i]]._scene2d,c=l.toImage("png");f._glimages.append("svg:image").attr({xmlns:y.svg,"xlink:href":c,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),l.destroy()}},K.updateFx=function(r){for(var f=r._fullLayout,s=f._subplots.gl2d,i=0;i<s.length;i++)f._plots[s[i]]._scene2d.updateFx(f.dragmode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(x,Q,K){"use strict";var p,v,u=x("../../registry"),y=x("../../plots/cartesian/axes"),e=x("../../components/fx"),n=x("../../../stackgl_modules").gl_plot2d,t=x("../../../stackgl_modules").gl_spikes2d,a=x("../../../stackgl_modules").gl_select_box,r=x("webgl-context"),f=x("./convert"),s=x("./camera"),i=x("../../lib/show_no_webgl_msg"),l=x("../cartesian/constraints"),c=l.enforce,h=l.clean,m=x("../cartesian/autorange").doAutoRange,d=x("../../components/dragelement/helpers"),o=d.drawMode,b=d.selectMode,g=["xaxis","yaxis"],w=x("../cartesian/constants").SUBPLOT_PATTERN;function _(T,E){this.container=T.container,this.graphDiv=T.graphDiv,this.pixelRatio=T.plotGlPixelRatio||window.devicePixelRatio,this.id=T.id,this.staticPlot=!!T.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(E),this.makeFramework(),this.stopped||(this.glplotOptions=f(this),this.glplotOptions.merge(E),this.glplot=n(this.glplotOptions),this.camera=s(this),this.traces={},this.spikes=t(this.glplot),this.selectBox=a(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}Q.exports=_;var A=_.prototype;A.makeFramework=function(){if(this.staticPlot){if(!(v||(p=document.createElement("canvas"),v=r({canvas:p,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=p,this.gl=v}else{var T=this.container.querySelector(".gl-canvas-focus"),E=r({canvas:T,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!E)return i(this),void(this.stopped=!0);this.canvas=T,this.gl=E}var k=this.canvas;k.style.width="100%",k.style.height="100%",k.style.position="absolute",k.style.top="0px",k.style.left="0px",k.style["pointer-events"]="none",this.updateSize(k);var O=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",O.style["z-index"]=20,O.style["pointer-events"]="none";var D=this.mouseContainer=document.createElement("div");D.style.position="absolute",D.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var S=this.container;S.appendChild(O),S.appendChild(D);var C=this;D.addEventListener("mouseout",function(){C.isMouseOver=!1,C.unhover()}),D.addEventListener("mouseover",function(){C.isMouseOver=!0})},A.toImage=function(T){T||(T="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(p),this.updateSize(this.canvas);var E=this.glplot.gl,k=E.drawingBufferWidth,O=E.drawingBufferHeight;E.clearColor(1,1,1,0),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),E.bindFramebuffer(E.FRAMEBUFFER,null);var D=new Uint8Array(k*O*4);E.readPixels(0,0,k,O,E.RGBA,E.UNSIGNED_BYTE,D);for(var S=0,C=O-1;S<C;++S,--C)for(var z=0;z<k;++z)for(var B=0;B<4;++B){var U=D[4*(k*S+z)+B];D[4*(k*S+z)+B]=D[4*(k*C+z)+B],D[4*(k*C+z)+B]=U}var G=document.createElement("canvas");G.width=k,G.height=O;var X,Z=G.getContext("2d"),q=Z.createImageData(k,O);switch(q.data.set(D),Z.putImageData(q,0,0),T){case"jpeg":X=G.toDataURL("image/jpeg");break;case"webp":X=G.toDataURL("image/webp");break;default:X=G.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(p),X},A.updateSize=function(T){T||(T=this.canvas);var E=this.pixelRatio,k=this.fullLayout,D=k.height,S=0|Math.ceil(E*k.width),C=0|Math.ceil(E*D);return T.width===S&&T.height===C||(T.width=S,T.height=C),T},A.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var T=[y.calcTicks(this.xaxis),y.calcTicks(this.yaxis)],E=0;E<2;++E)for(var k=0;k<T[E].length;++k)T[E][k].text=T[E][k].text+"";return T},A.updateRefs=function(T){this.fullLayout=T;var E=this.id.match(w),O="yaxis"+E[2];this.xaxis=this.fullLayout["xaxis"+E[1]],this.yaxis=this.fullLayout[O]},A.relayoutCallback=function(){var T=this.graphDiv,E=this.xaxis,k=this.yaxis,O=T.layout,D={},S=D[E._name+".range"]=E.range.slice(),C=D[k._name+".range"]=k.range.slice();D[E._name+".autorange"]=E.autorange,D[k._name+".autorange"]=k.autorange,u.call("_storeDirectGUIEdit",T.layout,T._fullLayout._preGUI,D);var z=O[E._name];z.range=S,z.autorange=E.autorange;var B=O[k._name];B.range=C,B.autorange=k.autorange,D.lastInputTime=this.camera.lastInputTime,T.emit("plotly_relayout",D)},A.cameraChanged=function(){var T=this.camera;this.glplot.setDataBox(this.calcDataBox());var E=this.computeTickMarks();(function(k,O){for(var D=0;D<2;++D){var S=k[D],C=O[D];if(S.length!==C.length)return!0;for(var z=0;z<S.length;++z)if(S[z].x!==C[z].x)return!0}return!1})(E,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=E,this.glplotOptions.dataBox=T.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},A.handleAnnotations=function(){for(var T=this.graphDiv,E=this.fullLayout.annotations,k=0;k<E.length;k++){var O=E[k];O.xref===this.xaxis._id&&O.yref===this.yaxis._id&&u.getComponentMethod("annotations","drawOne")(T,k)}},A.destroy=function(){if(this.glplot){var T=this.traces;T&&Object.keys(T).map(function(E){T[E].dispose(),delete T[E]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},A.plot=function(T,E,k){var O=this.glplot;this.updateRefs(k),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(T,E),this.updateFx(k.dragmode);var D=k.width,S=k.height;this.updateSize(this.canvas);var C=this.glplotOptions;C.merge(k),C.screenBox=[0,0,D,S];var z={_fullLayout:{_axisConstraintGroups:k._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:k._size}};h(z,this.xaxis),h(z,this.yaxis);var B,U,G=k._size,X=this.xaxis.domain,Z=this.yaxis.domain;for(C.viewBox=[G.l+X[0]*G.w,G.b+Z[0]*G.h,D-G.r-(1-X[1])*G.w,S-G.t-(1-Z[1])*G.h],this.mouseContainer.style.width=G.w*(X[1]-X[0])+"px",this.mouseContainer.style.height=G.h*(Z[1]-Z[0])+"px",this.mouseContainer.height=G.h*(Z[1]-Z[0]),this.mouseContainer.style.left=G.l+X[0]*G.w+"px",this.mouseContainer.style.top=G.t+(1-Z[1])*G.h+"px",U=0;U<2;++U)(B=this[g[U]])._length=C.viewBox[U+2]-C.viewBox[U],m(this.graphDiv,B),B.setScale();c(z),C.ticks=this.computeTickMarks(),C.dataBox=this.calcDataBox(),C.merge(k),O.update(C),this.glplot.draw()},A.calcDataBox=function(){var T=this.xaxis,E=this.yaxis,k=T.range,O=E.range,D=T.r2l,S=E.r2l;return[D(k[0]),S(O[0]),D(k[1]),S(O[1])]},A.setRanges=function(T){var E=this.xaxis,k=this.yaxis,O=E.l2r,D=k.l2r;E.range=[O(T[0]),O(T[2])],k.range=[D(T[1]),D(T[3])]},A.updateTraces=function(T,E){var k,O,D,S=Object.keys(this.traces);this.fullData=T;e:for(k=0;k<S.length;k++){var C=S[k],z=this.traces[C];for(O=0;O<T.length;O++)if((D=T[O]).uid===C&&D.type===z.type)continue e;z.dispose(),delete this.traces[C]}for(k=0;k<T.length;k++){var B=E[k],U=this.traces[(D=T[k]).uid];U?U.update(D,B):(U=D._module.plot(this,D,B),this.traces[D.uid]=U)}this.glplot.objects.sort(function(G,X){return G._trace.index-X._trace.index})},A.updateFx=function(T){b(T)||o(T)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===T?"move":"zoom"===T?"crosshair":null},A.emitPointAction=function(T,E){for(var k,O=T.trace.uid,D=T.pointIndex,S=0;S<this.fullData.length;S++)this.fullData[S].uid===O&&(k=this.fullData[S]);var C={x:T.traceCoord[0],y:T.traceCoord[1],curveNumber:k.index,pointNumber:D,data:k._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(C,k,D),this.graphDiv.emit(E,{points:[C]})},A.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var T=this.glplot,E=this.camera,k=E.mouseListener,O=1===this.lastButtonState&&0===k.buttons,D=this.fullLayout;this.lastButtonState=k.buttons,this.cameraChanged();var S,C=k.x*T.pixelRatio,z=this.canvas.height-T.pixelRatio*k.y;if(E.boxEnabled&&"zoom"===D.dragmode){this.selectBox.enabled=!0;for(var B=this.selectBox.selectBox=[Math.min(E.boxStart[0],E.boxEnd[0]),Math.min(E.boxStart[1],E.boxEnd[1]),Math.max(E.boxStart[0],E.boxEnd[0]),Math.max(E.boxStart[1],E.boxEnd[1])],U=0;U<2;U++)E.boxStart[U]===E.boxEnd[U]&&(B[U]=T.dataBox[U],B[U+2]=T.dataBox[U+2]);T.setDirty()}else if(!E.panning&&this.isMouseOver){this.selectBox.enabled=!1;var G=D._size,q=(S=T.pick(C/T.pixelRatio+G.l+this.xaxis.domain[0]*G.w,z/T.pixelRatio-(G.t+(1-this.yaxis.domain[1])*G.h)))&&S.object._trace.handlePick(S);if(q&&O&&this.emitPointAction(q,"plotly_click"),S&&"skip"!==S.object._trace.hoverinfo&&D.hovermode&&q&&(!this.lastPickResult||this.lastPickResult.traceUid!==q.trace.uid||this.lastPickResult.dataCoord[0]!==q.dataCoord[0]||this.lastPickResult.dataCoord[1]!==q.dataCoord[1])){var W=q;this.lastPickResult={traceUid:q.trace?q.trace.uid:null,dataCoord:q.dataCoord.slice()},this.spikes.update({center:S.dataCoord}),W.screenCoord=[((T.viewBox[2]-T.viewBox[0])*(S.dataCoord[0]-T.dataBox[0])/(T.dataBox[2]-T.dataBox[0])+T.viewBox[0])/T.pixelRatio,(this.canvas.height-(T.viewBox[3]-T.viewBox[1])*(S.dataCoord[1]-T.dataBox[1])/(T.dataBox[3]-T.dataBox[1])-T.viewBox[1])/T.pixelRatio],this.emitPointAction(q,"plotly_hover");var te=this.fullData[W.trace.index]||{},R=W.pointIndex,N=e.castHoverinfo(te,D,R);if(N&&"all"!==N){var V=N.split("+");-1===V.indexOf("x")&&(W.traceCoord[0]=void 0),-1===V.indexOf("y")&&(W.traceCoord[1]=void 0),-1===V.indexOf("z")&&(W.traceCoord[2]=void 0),-1===V.indexOf("text")&&(W.textLabel=void 0),-1===V.indexOf("name")&&(W.name=void 0)}e.loneHover({x:W.screenCoord[0],y:W.screenCoord[1],xLabel:this.hoverFormatter("xaxis",W.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",W.traceCoord[1]),zLabel:W.traceCoord[2],text:W.textLabel,name:W.name,color:e.castHoverOption(te,R,"bgcolor")||W.color,borderColor:e.castHoverOption(te,R,"bordercolor"),fontFamily:e.castHoverOption(te,R,"font.family"),fontSize:e.castHoverOption(te,R,"font.size"),fontColor:e.castHoverOption(te,R,"font.color"),nameLength:e.castHoverOption(te,R,"namelength"),textAlign:e.castHoverOption(te,R,"align")},{container:this.svgContainer,gd:this.graphDiv})}}S||this.unhover(),T.draw()}},A.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))},A.hoverFormatter=function(T,E){if(void 0!==E){var k=this[T];return y.tickText(k,k.c2l(E),"hover").text}}},{"../../../stackgl_modules":1119,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(x,Q,K){"use strict";var p=x("../../plot_api/edit_types").overrideAll,v=x("../../components/fx/layout_attributes"),u=x("./scene"),y=x("../get_data").getSubplotData,e=x("../../lib"),n=x("../../constants/xmlns_namespaces");K.name="gl3d",K.attr="scene",K.idRoot="scene",K.idRegex=K.attrRegex=e.counterRegex("scene"),K.attributes=x("./layout/attributes"),K.layoutAttributes=x("./layout/layout_attributes"),K.baseLayoutAttrOverrides=p({hoverlabel:v.hoverlabel},"plot","nested"),K.supplyLayoutDefaults=x("./layout/defaults"),K.plot=function(t){for(var a=t._fullLayout,r=t._fullData,f=a._subplots.gl3d,s=0;s<f.length;s++){var i=f[s],l=y(r,"gl3d",i),c=a[i],h=c.camera,m=c._scene;m||(m=new u({id:i,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio,camera:h},a),c._scene=m),m.viewInitial||(m.viewInitial={up:{x:h.up.x,y:h.up.y,z:h.up.z},eye:{x:h.eye.x,y:h.eye.y,z:h.eye.z},center:{x:h.center.x,y:h.center.y,z:h.center.z}}),m.plot(l,a,t.layout)}},K.clean=function(t,a,r,f){for(var s=f._subplots.gl3d||[],i=0;i<s.length;i++){var l=s[i];!a[l]&&f[l]._scene&&(f[l]._scene.destroy(),f._infolayer&&f._infolayer.selectAll(".annotation-"+l).remove())}},K.toSVG=function(t){for(var a=t._fullLayout,r=a._subplots.gl3d,f=a._size,s=0;s<r.length;s++){var i=a[r[s]],l=i.domain,c=i._scene,h=c.toImage("png");a._glimages.append("svg:image").attr({xmlns:n.svg,"xlink:href":h,x:f.l+f.w*l.x[0],y:f.t+f.h*(1-l.y[1]),width:f.w*(l.x[1]-l.x[0]),height:f.h*(l.y[1]-l.y[0]),preserveAspectRatio:"none"}),c.destroy()}},K.cleanId=function(t){if(t.match(/^scene[0-9]*$/)){var a=t.substr(5);return"1"===a&&(a=""),"scene"+a}},K.updateFx=function(t){for(var a=t._fullLayout,r=a._subplots.gl3d,f=0;f<r.length;f++)a[r[f]]._scene.updateFx(a.dragmode,a.hovermode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(x,Q,K){"use strict";Q.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(x,Q,K){"use strict";var p=x("../../../components/color"),v=x("../../cartesian/layout_attributes"),u=x("../../../lib/extend").extendFlat,y=x("../../../plot_api/edit_types").overrideAll;Q.exports=y({visible:v.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:p.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:v.color,categoryorder:v.categoryorder,categoryarray:v.categoryarray,title:{text:v.title.text,font:v.title.font},type:u({},v.type,{values:["-","linear","log","date","category"]}),autotypenumbers:v.autotypenumbers,autorange:v.autorange,rangemode:v.rangemode,range:u({},v.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:v.tickmode,nticks:v.nticks,tick0:v.tick0,dtick:v.dtick,tickvals:v.tickvals,ticktext:v.ticktext,ticks:v.ticks,mirror:v.mirror,ticklen:v.ticklen,tickwidth:v.tickwidth,tickcolor:v.tickcolor,showticklabels:v.showticklabels,tickfont:v.tickfont,tickangle:v.tickangle,tickprefix:v.tickprefix,showtickprefix:v.showtickprefix,ticksuffix:v.ticksuffix,showticksuffix:v.showticksuffix,showexponent:v.showexponent,exponentformat:v.exponentformat,minexponent:v.minexponent,separatethousands:v.separatethousands,tickformat:v.tickformat,tickformatstops:v.tickformatstops,hoverformat:v.hoverformat,showline:v.showline,linecolor:v.linecolor,linewidth:v.linewidth,showgrid:v.showgrid,gridcolor:u({},v.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:v.gridwidth,zeroline:v.zeroline,zerolinecolor:v.zerolinecolor,zerolinewidth:v.zerolinewidth,_deprecated:{title:v._deprecated.title,titlefont:v._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(x,Q,K){"use strict";var p=x("tinycolor2").mix,v=x("../../../lib"),u=x("../../../plot_api/plot_template"),y=x("./axis_attributes"),e=x("../../cartesian/type_defaults"),n=x("../../cartesian/axis_defaults"),t=["xaxis","yaxis","zaxis"];Q.exports=function(a,r,f){var s,i;function l(m,d){return v.coerce(s,i,y,m,d)}for(var c=0;c<t.length;c++){var h=t[c];s=a[h]||{},(i=u.newContainer(r,h))._id=h[0]+f.scene,i._name=h,e(s,i,l,f),n(s,i,l,{font:f.font,letter:h[0],data:f.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:f.bgColor,calendar:f.calendar},f.fullLayout),l("gridcolor",p(i.color,f.bgColor,13600/187).toRgbString()),l("title.text",h[0]),i.setScale=v.noop,l("showspikes")&&(l("spikesides"),l("spikethickness"),l("spikecolor",i.color)),l("showaxeslabels"),l("showbackground")&&l("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(x,Q,K){"use strict";var p=x("../../../lib/str2rgbarray"),v=x("../../../lib"),u=["xaxis","yaxis","zaxis"];function y(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}y.prototype.merge=function(e,n){for(var t=0;t<3;++t){var a=n[u[t]];a.visible?(this.labels[t]=e._meta?v.templateString(a.title.text,e._meta):a.title.text,"font"in a.title&&(a.title.font.color&&(this.labelColor[t]=p(a.title.font.color)),a.title.font.family&&(this.labelFont[t]=a.title.font.family),a.title.font.size&&(this.labelSize[t]=a.title.font.size)),"showline"in a&&(this.lineEnable[t]=a.showline),"linecolor"in a&&(this.lineColor[t]=p(a.linecolor)),"linewidth"in a&&(this.lineWidth[t]=a.linewidth),"showgrid"in a&&(this.gridEnable[t]=a.showgrid),"gridcolor"in a&&(this.gridColor[t]=p(a.gridcolor)),"gridwidth"in a&&(this.gridWidth[t]=a.gridwidth),"log"===a.type?this.zeroEnable[t]=!1:"zeroline"in a&&(this.zeroEnable[t]=a.zeroline),"zerolinecolor"in a&&(this.zeroLineColor[t]=p(a.zerolinecolor)),"zerolinewidth"in a&&(this.zeroLineWidth[t]=a.zerolinewidth),this.lineTickEnable[t]=!(!("ticks"in a)||!a.ticks),"ticklen"in a&&(this.lineTickLength[t]=this._defaultLineTickLength[t]=a.ticklen),"tickcolor"in a&&(this.lineTickColor[t]=p(a.tickcolor)),"tickwidth"in a&&(this.lineTickWidth[t]=a.tickwidth),"tickangle"in a&&(this.tickAngle[t]="auto"===a.tickangle?-3600:Math.PI*-a.tickangle/180),"showticklabels"in a&&(this.tickEnable[t]=a.showticklabels),"tickfont"in a&&(a.tickfont.color&&(this.tickColor[t]=p(a.tickfont.color)),a.tickfont.family&&(this.tickFont[t]=a.tickfont.family),a.tickfont.size&&(this.tickSize[t]=a.tickfont.size)),"mirror"in a?-1!==["ticks","all","allticks"].indexOf(a.mirror)?(this.lineTickMirror[t]=!0,this.lineMirror[t]=!0):!0===a.mirror?(this.lineTickMirror[t]=!1,this.lineMirror[t]=!0):(this.lineTickMirror[t]=!1,this.lineMirror[t]=!1):this.lineMirror[t]=!1,"showbackground"in a&&!1!==a.showbackground?(this.backgroundEnable[t]=!0,this.backgroundColor[t]=p(a.backgroundcolor)):this.backgroundEnable[t]=!1):(this.tickEnable[t]=!1,this.labelEnable[t]=!1,this.lineEnable[t]=!1,this.lineTickEnable[t]=!1,this.gridEnable[t]=!1,this.zeroEnable[t]=!1,this.backgroundEnable[t]=!1)}},Q.exports=function(e,n){var t=new y;return t.merge(e,n),t}},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(x,Q,K){"use strict";var p=x("../../../lib"),v=x("../../../components/color"),u=x("../../../registry"),y=x("../../subplot_defaults"),e=x("./axis_defaults"),n=x("./layout_attributes"),t=x("../../get_data").getSubplotData;function a(r,f,s,i){for(var l=s("bgcolor"),c=v.combine(l,i.paper_bgcolor),h=["up","center","eye"],m=0;m<h.length;m++)s("camera."+h[m]+".x"),s("camera."+h[m]+".y"),s("camera."+h[m]+".z");s("camera.projection.type");var d=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),o=s("aspectmode",d?"manual":"auto");d||(r.aspectratio=f.aspectratio={x:1,y:1,z:1},"manual"===o&&(f.aspectmode="auto"),r.aspectmode=f.aspectmode);var b=t(i.fullData,"gl3d",i.id);e(r,f,{font:i.font,scene:i.id,data:b,bgColor:c,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),u.getComponentMethod("annotations3d","handleDefaults")(r,f,i);var g=i.getDfltFromLayout("dragmode");if(!1!==g&&!g)if(g="orbit",r.camera&&r.camera.up){var w=r.camera.up.x,_=r.camera.up.y,A=r.camera.up.z;0!==A&&(w&&_&&A?A/Math.sqrt(w*w+_*_+A*A)>.999&&(g="turntable"):g="turntable")}else g="turntable";s("dragmode",g),s("hovermode",i.getDfltFromLayout("hovermode"))}Q.exports=function(r,f,s){var i=f._basePlotModules.length>1;y(r,f,s,{type:"gl3d",attributes:n,handleDefaults:a,fullLayout:f,font:f.font,fullData:s,getDfltFromLayout:function(l){if(!i)return p.validate(r[l],n[l])?r[l]:void 0},autotypenumbersDflt:f.autotypenumbers,paper_bgcolor:f.paper_bgcolor,calendar:f.calendar})}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(x,Q,K){"use strict";var p=x("./axis_attributes"),v=x("../../domain").attributes,u=x("../../../lib/extend").extendFlat,y=x("../../../lib").counterRegex;function e(n,t,a){return{x:{valType:"number",dflt:n,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:a,editType:"camera"},editType:"camera"}}Q.exports={_arrayAttrRegexps:[y("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:u(e(0,0,1),{}),center:u(e(0,0,0),{}),eye:u(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:v({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:p,yaxis:p,zaxis:p,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(x,Q,K){"use strict";var p=x("../../../lib/str2rgbarray"),v=["xaxis","yaxis","zaxis"];function u(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}u.prototype.merge=function(y){for(var e=0;e<3;++e){var n=y[v[e]];n.visible?(this.enabled[e]=n.showspikes,this.colors[e]=p(n.spikecolor),this.drawSides[e]=n.spikesides,this.lineWidth[e]=n.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},Q.exports=function(y){var e=new u;return e.merge(y),e}},{"../../../lib/str2rgbarray":528}],606:[function(x,Q,K){"use strict";Q.exports=function(e){for(var n=e.axesOptions,t=e.glplot.axesPixels,a=e.fullSceneLayout,r=[[],[],[]],f=0;f<3;++f){var s=a[u[f]];if(s._length=(t[f].hi-t[f].lo)*t[f].pixelsPerDataUnit/e.dataScale[f],Math.abs(s._length)===1/0||isNaN(s._length))r[f]=[];else{s._input_range=s.range.slice(),s.range[0]=t[f].lo/e.dataScale[f],s.range[1]=t[f].hi/e.dataScale[f],s._m=1/(e.dataScale[f]*t[f].pixelsPerDataUnit),s.range[0]===s.range[1]&&(s.range[0]-=1,s.range[1]+=1);var i=s.tickmode;if("auto"===s.tickmode){s.tickmode="linear";var l=s.nticks||v.constrain(s._length/40,4,9);p.autoTicks(s,Math.abs(s.range[1]-s.range[0])/l)}for(var c=p.calcTicks(s,{msUTC:!0}),h=0;h<c.length;++h)c[h].x=c[h].x*e.dataScale[f],"date"===s.type&&(c[h].text=c[h].text.replace(/\<br\>/g," "));r[f]=c,s.tickmode=i}}for(n.ticks=r,f=0;f<3;++f)for(y[f]=.5*(e.glplot.bounds[0][f]+e.glplot.bounds[1][f]),h=0;h<2;++h)n.bounds[h][f]=e.glplot.bounds[h][f];e.contourLevels=function(m){for(var d=new Array(3),o=0;o<3;++o){for(var b=m[o],g=new Array(b.length),w=0;w<b.length;++w)g[w]=b[w].x;d[o]=g}return d}(r)};var p=x("../../cartesian/axes"),v=x("../../../lib"),u=["xaxis","yaxis","zaxis"],y=[0,0,0]},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(x,Q,K){"use strict";function p(v,u){var y,e,n=[0,0,0,0];for(y=0;y<4;++y)for(e=0;e<4;++e)n[e]+=v[4*y+e]*u[y];return n}Q.exports=function(v,u){return p(v.projection,p(v.view,p(v.model,[u[0],u[1],u[2],1])))}},{}],608:[function(x,Q,K){"use strict";var p,v,u=x("../../../stackgl_modules").gl_plot3d,y=u.createCamera,e=u.createScene,n=x("webgl-context"),t=x("has-passive-events"),a=x("../../registry"),r=x("../../lib"),f=r.preserveDrawingBuffer(),s=x("../../plots/cartesian/axes"),i=x("../../components/fx"),l=x("../../lib/str2rgbarray"),c=x("../../lib/show_no_webgl_msg"),h=x("./project"),m=x("./layout/convert"),d=x("./layout/spikes"),o=x("./layout/tick_marks");function b(T,E){var k=document.createElement("div"),O=T.container;this.graphDiv=T.graphDiv;var D=document.createElementNS("http://www.w3.org/2000/svg","svg");D.style.position="absolute",D.style.top=D.style.left="0px",D.style.width=D.style.height="100%",D.style["z-index"]=20,D.style["pointer-events"]="none",k.appendChild(D),this.svgContainer=D,k.id=T.id,k.style.position="absolute",k.style.top=k.style.left="0px",k.style.width=k.style.height="100%",O.appendChild(k),this.fullLayout=E,this.id=T.id||"scene",this.fullSceneLayout=E[this.id],this.plotArgs=[[],{},{}],this.axesOptions=m(E,E[this.id]),this.spikeOptions=d(E[this.id]),this.container=k,this.staticMode=!!T.staticPlot,this.pixelRatio=this.pixelRatio||T.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=a.getComponentMethod("annotations3d","convert"),this.drawAnnotations=a.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var g=b.prototype;g.prepareOptions=function(){var T={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:f,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(v||(p=document.createElement("canvas"),v=n({canvas:p,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");T.gl=v,T.canvas=p}return T};var w=!0;g.tryCreatePlot=function(){var T=this.prepareOptions(),E=!0;try{this.glplot=e(T)}catch(k){if(this.staticMode||!w||f)E=!1;else{r.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{f=T.glOptions.preserveDrawingBuffer=!0,this.glplot=e(T)}catch(O){f=T.glOptions.preserveDrawingBuffer=!1,E=!1}}}return w=!1,E},g.initializeGLCamera=function(){var T=this.fullSceneLayout.camera;this.camera=y(this.container,{center:[T.center.x,T.center.y,T.center.z],eye:[T.eye.x,T.eye.y,T.eye.z],up:[T.up.x,T.up.y,T.up.z],_ortho:"orthographic"===T.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},g.initializeGLPlot=function(){var T=this;if(T.initializeGLCamera(),!T.tryCreatePlot())return c(T);T.traces={},T.make4thDimension();var E=T.graphDiv,k=E.layout,O=function(){var S={};return T.isCameraChanged(k)&&(S[T.id+".camera"]=T.getCamera()),T.isAspectChanged(k)&&(S[T.id+".aspectratio"]=T.glplot.getAspectratio(),"manual"!==k[T.id].aspectmode&&(T.fullSceneLayout.aspectmode=k[T.id].aspectmode=S[T.id+".aspectmode"]="manual")),S},D=function(S){if(!1!==S.fullSceneLayout.dragmode){var C=O();S.saveLayout(k),S.graphDiv.emit("plotly_relayout",C)}};return T.glplot.canvas&&(T.glplot.canvas.addEventListener("mouseup",function(){D(T)}),T.glplot.canvas.addEventListener("wheel",function(S){if(E._context._scrollZoom.gl3d){if(T.camera._ortho){var C=S.deltaX>S.deltaY?1.1:1/1.1,z=T.glplot.getAspectratio();T.glplot.setAspectratio({x:C*z.x,y:C*z.y,z:C*z.z})}D(T)}},!!t&&{passive:!1}),T.glplot.canvas.addEventListener("mousemove",function(){if(!1!==T.fullSceneLayout.dragmode&&0!==T.camera.mouseListener.buttons){var S=O();T.graphDiv.emit("plotly_relayouting",S)}}),T.staticMode||T.glplot.canvas.addEventListener("webglcontextlost",function(S){E&&E.emit&&E.emit("plotly_webglcontextlost",{event:S,layer:T.id})},!1)),T.glplot.oncontextloss=function(){T.recoverContext()},T.glplot.onrender=function(){T.render()},!0},g.render=function(){var T,E=this,k=E.graphDiv,O=E.svgContainer,D=E.container.getBoundingClientRect();k._fullLayout._calcInverseTransform(k);var z=D.width*k._fullLayout._invScaleX,B=D.height*k._fullLayout._invScaleY;O.setAttributeNS(null,"viewBox","0 0 "+z+" "+B),O.setAttributeNS(null,"width",z),O.setAttributeNS(null,"height",B),o(E),E.glplot.axes.update(E.axesOptions);for(var U=Object.keys(E.traces),G=null,X=E.glplot.selection,Z=0;Z<U.length;++Z)"skip"!==(T=E.traces[U[Z]]).data.hoverinfo&&T.handlePick(X)&&(G=T),T.setContourLevels&&T.setContourLevels();function q(ie,ue,le){var de=E.fullSceneLayout[ie+"axis"];return"log"!==de.type&&(ue=de.d2l(ue)),s.hoverLabelText(de,ue,le)}if(null!==G){var te,W=h(E.glplot.cameraParams,X.dataCoordinate),R=k._fullData[(T=G.data).index],N=X.index,V={xLabel:q("x",X.traceCoordinate[0],T.xhoverformat),yLabel:q("y",X.traceCoordinate[1],T.yhoverformat),zLabel:q("z",X.traceCoordinate[2],T.zhoverformat)},ee=i.castHoverinfo(R,E.fullLayout,N),j=(ee||"").split("+"),J=ee&&"all"===ee;R.hovertemplate||J||(-1===j.indexOf("x")&&(V.xLabel=void 0),-1===j.indexOf("y")&&(V.yLabel=void 0),-1===j.indexOf("z")&&(V.zLabel=void 0),-1===j.indexOf("text")&&(X.textLabel=void 0),-1===j.indexOf("name")&&(G.name=void 0));var $=[];"cone"===T.type||"streamtube"===T.type?(V.uLabel=q("x",X.traceCoordinate[3],T.uhoverformat),(J||-1!==j.indexOf("u"))&&$.push("u: "+V.uLabel),V.vLabel=q("y",X.traceCoordinate[4],T.vhoverformat),(J||-1!==j.indexOf("v"))&&$.push("v: "+V.vLabel),V.wLabel=q("z",X.traceCoordinate[5],T.whoverformat),(J||-1!==j.indexOf("w"))&&$.push("w: "+V.wLabel),V.normLabel=X.traceCoordinate[6].toPrecision(3),(J||-1!==j.indexOf("norm"))&&$.push("norm: "+V.normLabel),"streamtube"===T.type&&(V.divergenceLabel=X.traceCoordinate[7].toPrecision(3),(J||-1!==j.indexOf("divergence"))&&$.push("divergence: "+V.divergenceLabel)),X.textLabel&&$.push(X.textLabel),te=$.join("<br>")):"isosurface"===T.type||"volume"===T.type?(V.valueLabel=s.hoverLabelText(E._mockAxis,E._mockAxis.d2l(X.traceCoordinate[3]),T.valuehoverformat),$.push("value: "+V.valueLabel),X.textLabel&&$.push(X.textLabel),te=$.join("<br>")):te=X.textLabel;var re={x:X.traceCoordinate[0],y:X.traceCoordinate[1],z:X.traceCoordinate[2],data:R._input,fullData:R,curveNumber:R.index,pointNumber:N};i.appendArrayPointValue(re,R,N),T._module.eventData&&(re=R._module.eventData(re,X,R,{},N));var ne={points:[re]};if(E.fullSceneLayout.hovermode){var se=[];i.loneHover({trace:R,x:(.5+.5*W[0]/W[3])*z,y:(.5-.5*W[1]/W[3])*B,xLabel:V.xLabel,yLabel:V.yLabel,zLabel:V.zLabel,text:te,name:G.name,color:i.castHoverOption(R,N,"bgcolor")||G.color,borderColor:i.castHoverOption(R,N,"bordercolor"),fontFamily:i.castHoverOption(R,N,"font.family"),fontSize:i.castHoverOption(R,N,"font.size"),fontColor:i.castHoverOption(R,N,"font.color"),nameLength:i.castHoverOption(R,N,"namelength"),textAlign:i.castHoverOption(R,N,"align"),hovertemplate:r.castOption(R,N,"hovertemplate"),hovertemplateLabels:r.extendFlat({},re,V),eventData:[re]},{container:O,gd:k,inOut_bbox:se}),re.bbox=se[0]}k.emit(X.buttons&&X.distance<5?"plotly_click":"plotly_hover",ne),this.oldEventData=ne}else i.loneUnhover(O),this.oldEventData&&k.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;E.drawAnnotations(E)},g.recoverContext=function(){var T=this;T.glplot.dispose();var E=function(){T.glplot.gl.isContextLost()?requestAnimationFrame(E):T.initializeGLPlot()?T.plot.apply(T,T.plotArgs):r.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(E)};var _=["xaxis","yaxis","zaxis"];function A(T,E,k){for(var O=T.fullSceneLayout,D=0;D<3;D++){var S=_[D],C=S.charAt(0),z=O[S],B=E[C],U=E[C+"calendar"],G=E["_"+C+"length"];if(r.isArrayOrTypedArray(B))for(var X,Z=0;Z<(G||B.length);Z++)if(r.isArrayOrTypedArray(B[Z]))for(var q=0;q<B[Z].length;++q)X=z.d2l(B[Z][q],0,U),!isNaN(X)&&isFinite(X)&&(k[0][D]=Math.min(k[0][D],X),k[1][D]=Math.max(k[1][D],X));else X=z.d2l(B[Z],0,U),!isNaN(X)&&isFinite(X)&&(k[0][D]=Math.min(k[0][D],X),k[1][D]=Math.max(k[1][D],X));else k[0][D]=Math.min(k[0][D],0),k[1][D]=Math.max(k[1][D],G-1)}}g.plot=function(T,E,k){if(this.plotArgs=[T,E,k],!this.glplot.contextLost){var O,D,S,C,z,B,U=E[this.id],G=k[this.id];this.fullLayout=E,this.fullSceneLayout=U,this.axesOptions.merge(E,U),this.spikeOptions.merge(U),this.setViewport(U),this.updateFx(U.dragmode,U.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(l(U.bgcolor)),this.setConvert(z),T?Array.isArray(T)||(T=[T]):T=[];var X=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(S=0;S<T.length;++S)!0===(O=T[S]).visible&&0!==O._length&&A(this,O,X);!function(Ae,we){for(var Se=Ae.fullSceneLayout,Pe=Se.annotations||[],ze=0;ze<3;ze++)for(var He=_[ze],tt=He.charAt(0),Oe=Se[He],Be=0;Be<Pe.length;Be++){var Je=Pe[Be];if(Je.visible){var Ye=Oe.r2l(Je[tt]);!isNaN(Ye)&&isFinite(Ye)&&(we[0][ze]=Math.min(we[0][ze],Ye),we[1][ze]=Math.max(we[1][ze],Ye))}}}(this,X);var Z=[1,1,1];for(C=0;C<3;++C)Z[C]=X[1][C]===X[0][C]?1:1/(X[1][C]-X[0][C]);for(this.dataScale=Z,this.convertAnnotations(this),S=0;S<T.length;++S)!0===(O=T[S]).visible&&0!==O._length&&((D=this.traces[O.uid])?D.data.type===O.type?D.update(O):(D.dispose(),D=O._module.plot(this,O),this.traces[O.uid]=D):(D=O._module.plot(this,O),this.traces[O.uid]=D),D.name=O.name);var q=Object.keys(this.traces);e:for(S=0;S<q.length;++S){for(C=0;C<T.length;++C)if(T[C].uid===q[S]&&!0===T[C].visible&&0!==T[C]._length)continue e;(D=this.traces[q[S]]).dispose(),delete this.traces[q[S]]}this.glplot.objects.sort(function(Ae,we){return Ae._trace.data.index-we._trace.data.index});var W,te=[[0,0,0],[0,0,0]],R=[],N={};for(S=0;S<3;++S){if((B=(z=U[_[S]]).type)in N?(N[B].acc*=Z[S],N[B].count+=1):N[B]={acc:Z[S],count:1},z.autorange){te[0][S]=1/0,te[1][S]=-1/0;var V=this.glplot.objects,ee=this.fullSceneLayout.annotations||[],j=z._name.charAt(0);for(C=0;C<V.length;C++){var J=V[C],$=J.bounds,re=J._trace.data._pad||0;te[0][S]="ErrorBars"===J.constructor.name&&z._lowerLogErrorBound?Math.min(te[0][S],z._lowerLogErrorBound):Math.min(te[0][S],$[0][S]/Z[S]-re),te[1][S]=Math.max(te[1][S],$[1][S]/Z[S]+re)}for(C=0;C<ee.length;C++){var ne=ee[C];if(ne.visible){var se=z.r2l(ne[j]);te[0][S]=Math.min(te[0][S],se),te[1][S]=Math.max(te[1][S],se)}}if("rangemode"in z&&"tozero"===z.rangemode&&(te[0][S]=Math.min(te[0][S],0),te[1][S]=Math.max(te[1][S],0)),te[0][S]>te[1][S])te[0][S]=-1,te[1][S]=1;else{var ie=te[1][S]-te[0][S];te[0][S]-=ie/32,te[1][S]+=ie/32}if("reversed"===z.autorange){var ue=te[0][S];te[0][S]=te[1][S],te[1][S]=ue}}else{var le=z.range;te[0][S]=z.r2l(le[0]),te[1][S]=z.r2l(le[1])}te[0][S]===te[1][S]&&(te[0][S]-=1,te[1][S]+=1),R[S]=te[1][S]-te[0][S],this.glplot.setBounds(S,{min:te[0][S]*Z[S],max:te[1][S]*Z[S]})}var de=U.aspectmode;if("cube"===de)W=[1,1,1];else if("manual"===de){var ve=U.aspectratio;W=[ve.x,ve.y,ve.z]}else{if("auto"!==de&&"data"!==de)throw new Error("scene.js aspectRatio was not one of the enumerated types");var _e=[1,1,1];for(S=0;S<3;++S){var be=N[B=(z=U[_[S]]).type];_e[S]=Math.pow(be.acc,1/be.count)/Z[S]}W="data"===de||Math.max.apply(null,_e)/Math.min.apply(null,_e)<=4?_e:[1,1,1]}U.aspectratio.x=G.aspectratio.x=W[0],U.aspectratio.y=G.aspectratio.y=W[1],U.aspectratio.z=G.aspectratio.z=W[2],this.glplot.setAspectratio(U.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:U.aspectratio.x,y:U.aspectratio.y,z:U.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=U.aspectmode);var Te=U.domain||null,he=E._size||null;if(Te&&he){var me=this.container.style;me.position="absolute",me.left=he.l+Te.x[0]*he.w+"px",me.top=he.t+(1-Te.y[1])*he.h+"px",me.width=he.w*(Te.x[1]-Te.x[0])+"px",me.height=he.h*(Te.y[1]-Te.y[0])+"px"}this.glplot.redraw()}},g.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},g.getCamera=function(){var T;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(T=this.camera).up[0],y:T.up[1],z:T.up[2]},center:{x:T.center[0],y:T.center[1],z:T.center[2]},eye:{x:T.eye[0],y:T.eye[1],z:T.eye[2]},projection:{type:!0===T._ortho?"orthographic":"perspective"}}},g.setViewport=function(T){var E,k=T.camera;this.camera.lookAt.apply(this,[[(E=k).eye.x,E.eye.y,E.eye.z],[E.center.x,E.center.y,E.center.z],[E.up.x,E.up.y,E.up.z]]),this.glplot.setAspectratio(T.aspectratio),"orthographic"===k.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},g.isCameraChanged=function(T){var E=this.getCamera(),k=r.nestedProperty(T,this.id+".camera").get();var z,B,U,G,X,Z,D=!1;if(void 0===k)D=!0;else{for(var S=0;S<3;S++)for(var C=0;C<3;C++)if(z=E,G=C,X=void 0,Z=void 0,Z=["x","y","z"],!(B=k)[(X=["up","center","eye"])[U=S]]||z[X[U]][Z[G]]!==B[X[U]][Z[G]]){D=!0;break}(!k.projection||E.projection&&E.projection.type!==k.projection.type)&&(D=!0)}return D},g.isAspectChanged=function(T){var E=this.glplot.getAspectratio(),k=r.nestedProperty(T,this.id+".aspectratio").get();return void 0===k||k.x!==E.x||k.y!==E.y||k.z!==E.z},g.saveLayout=function(T){var E,k,O,D,S,C,z=this.fullLayout,B=this.isCameraChanged(T),U=this.isAspectChanged(T),G=B||U;if(G){var X={};B&&(E=this.getCamera(),O=(k=r.nestedProperty(T,this.id+".camera")).get(),X[this.id+".camera"]=O),U&&(D=this.glplot.getAspectratio(),C=(S=r.nestedProperty(T,this.id+".aspectratio")).get(),X[this.id+".aspectratio"]=C),a.call("_storeDirectGUIEdit",T,z._preGUI,X),B&&(k.set(E),r.nestedProperty(z,this.id+".camera").set(E)),U&&(S.set(D),r.nestedProperty(z,this.id+".aspectratio").set(D),this.glplot.redraw())}return G},g.updateFx=function(T,E){var k=this.camera;if(k)if("orbit"===T)k.mode="orbit",k.keyBindingMode="rotate";else if("turntable"===T){k.up=[0,0,1],k.mode="turntable",k.keyBindingMode="rotate";var O=this.graphDiv,D=O._fullLayout,S=this.fullSceneLayout.camera,C=S.up.x,z=S.up.y,B=S.up.z;if(B/Math.sqrt(C*C+z*z+B*B)<.999){var U=this.id+".camera.up",G={x:0,y:0,z:1},X={};X[U]=G;var Z=O.layout;a.call("_storeDirectGUIEdit",Z,D._preGUI,X),S.up=G,r.nestedProperty(Z,U).set(G)}}else k.keyBindingMode=T;this.fullSceneLayout.hovermode=E},g.toImage=function(T){T||(T="png"),this.staticMode&&this.container.appendChild(p),this.glplot.redraw();var E=this.glplot.gl,k=E.drawingBufferWidth,O=E.drawingBufferHeight;E.bindFramebuffer(E.FRAMEBUFFER,null);var D=new Uint8Array(k*O*4);E.readPixels(0,0,k,O,E.RGBA,E.UNSIGNED_BYTE,D),function(U,G,X){for(var Z=0,q=X-1;Z<q;++Z,--q)for(var W=0;W<G;++W)for(var te=0;te<4;++te){var R=4*(G*Z+W)+te,N=4*(G*q+W)+te,V=U[R];U[R]=U[N],U[N]=V}}(D,k,O),function(U,G,X){for(var Z=0;Z<X;++Z)for(var q=0;q<G;++q){var W=4*(G*Z+q),te=U[W+3];if(te>0)for(var R=255/te,N=0;N<3;++N)U[W+N]=Math.min(R*U[W+N],255)}}(D,k,O);var S=document.createElement("canvas");S.width=k,S.height=O;var C,z=S.getContext("2d"),B=z.createImageData(k,O);switch(B.data.set(D),z.putImageData(B,0,0),T){case"jpeg":C=S.toDataURL("image/jpeg");break;case"webp":C=S.toDataURL("image/webp");break;default:C=S.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(p),C},g.setConvert=function(){for(var T=0;T<3;T++){var E=this.fullSceneLayout[_[T]];s.setConvert(E,this.fullLayout),E.setScale=r.noop}},g.make4thDimension=function(){var T=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},s.setConvert(this._mockAxis,T)},Q.exports=b},{"../../../stackgl_modules":1119,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(x,Q,K){"use strict";Q.exports=function(p,v,u,y){y=y||p.length;for(var e=new Array(y),n=0;n<y;n++)e[n]=[p[n],v[n],u[n]];return e}},{}],610:[function(x,Q,K){"use strict";var p=x("./font_attributes"),v=x("./animation_attributes"),u=x("../components/color/attributes"),y=x("../components/shapes/draw_newshape/attributes"),e=x("./pad_attributes"),n=x("../lib/extend").extendFlat,t=p({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=u.defaultLine,Q.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:p({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:n(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:u.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:u.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:u.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:y.newshape,activeshape:y.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:n({},v.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:p({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(x,Q,K){"use strict";var p=x("../../lib/sort_object_keys"),v='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',u=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',v].join(" "),y=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:v,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:u,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:u,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:y,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:y,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},n=p(e);Q.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:e,styleValuesNonMapbox:n,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",n.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},{"../../lib/sort_object_keys":526}],612:[function(x,Q,K){"use strict";var p=x("../../lib");Q.exports=function(v,u){var y=v.split(" "),e=y[0],n=y[1],t=p.isArrayOrTypedArray(u)?p.mean(u):u,a=.5+t/100,r=1.5+t/100,f=["",""],s=[0,0];switch(e){case"top":f[0]="top",s[1]=-r;break;case"bottom":f[0]="bottom",s[1]=r}switch(n){case"left":f[1]="right",s[0]=-a;break;case"right":f[1]="left",s[0]=a}return{anchor:f[0]&&f[1]?f.join("-"):f[0]?f[0]:f[1]?f[1]:"center",offset:s}}},{"../../lib":503}],613:[function(x,Q,K){"use strict";var p=x("mapbox-gl/dist/mapbox-gl-unminified"),v=x("../../lib"),u=v.strTranslate,y=v.strScale,e=x("../../plots/get_data").getSubplotCalcData,n=x("../../constants/xmlns_namespaces"),t=x("@plotly/d3"),a=x("../../components/drawing"),r=x("../../lib/svg_text_utils"),f=x("./mapbox"),s=K.constants=x("./constants");function i(l){return"string"==typeof l&&(-1!==s.styleValuesMapbox.indexOf(l)||0===l.indexOf("mapbox://"))}K.name="mapbox",K.attr="subplot",K.idRoot="mapbox",K.idRegex=K.attrRegex=v.counterRegex("mapbox"),K.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},K.layoutAttributes=x("./layout_attributes"),K.supplyLayoutDefaults=x("./layout_defaults"),K.plot=function(l){var c=l._fullLayout,h=l.calcdata,m=c._subplots.mapbox;if(p.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var d=function(A,T){var E=A._fullLayout;if(""===A._context.mapboxAccessToken)return"";for(var k=[],O=[],D=!1,S=!1,C=0;C<T.length;C++){var z=E[T[C]],B=z.accesstoken;i(z.style)&&(B?v.pushUnique(k,B):(i(z._input.style)&&(v.error("Uses Mapbox map style, but did not set an access token."),D=!0),S=!0)),B&&v.pushUnique(O,B)}if(S){var U=D?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw v.error(U),new Error(U)}return k.length?(k.length>1&&v.warn(s.multipleTokensErrorMsg),k[0]):(O.length&&v.log(["Listed mapbox access token(s)",O.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(l,m);p.accessToken=d;for(var o=0;o<m.length;o++){var b=m[o],g=e(h,"mapbox",b),w=c[b],_=w._subplot;_||(_=new f(l,b),c[b]._subplot=_),_.viewInitial||(_.viewInitial={center:v.extendFlat({},w.center),zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),_.plot(g,c,l._promises)}},K.clean=function(l,c,h,m){for(var d=m._subplots.mapbox||[],o=0;o<d.length;o++){var b=d[o];!c[b]&&m[b]._subplot&&m[b]._subplot.destroy()}},K.toSVG=function(l){for(var c=l._fullLayout,h=c._subplots.mapbox,m=c._size,d=0;d<h.length;d++){var o=c[h[d]],b=o.domain,g=o._subplot.toImage("png");c._glimages.append("svg:image").attr({xmlns:n.svg,"xlink:href":g,x:m.l+m.w*b.x[0],y:m.t+m.h*(1-b.y[1]),width:m.w*(b.x[1]-b.x[0]),height:m.h*(b.y[1]-b.y[0]),preserveAspectRatio:"none"});var w=t.select(o._subplot.div);if(null!==w.select(".mapboxgl-ctrl-logo").node().offsetParent){var _=c._glimages.append("g");_.attr("transform",u(m.l+m.w*b.x[0]+10,m.t+m.h*(1-b.y[0])-31)),_.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),_.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),_.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),_.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var A=w.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),T=c._glimages.append("g"),E=T.append("text");E.text(A).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":A});var k=a.bBox(E.node()),O=m.w*(b.x[1]-b.x[0]);if(k.width>O/2){var D=A.split("|").join("<br>");E.text(D).attr("data-unformatted",D).call(r.convertToTspans,l),k=a.bBox(E.node())}E.attr("transform",u(-3,8-k.height)),T.insert("rect",".static-attribution").attr({x:-k.width-6,y:-k.height-3,width:k.width+6,height:k.height+3,fill:"rgba(255, 255, 255, 0.75)"});var S=1;k.width+6>O&&(S=O/(k.width+6));var C=[m.l+m.w*b.x[1],m.t+m.h*(1-b.y[0])];T.attr("transform",u(C[0],C[1])+y(S))}},K.updateFx=function(l){for(var c=l._fullLayout,h=c._subplots.mapbox,m=0;m<h.length;m++)c[h[m]]._subplot.updateFx(c)}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../lib/svg_text_utils").sanitizeHTML,u=x("./convert_text_opts"),y=x("./constants");function e(r,f){this.subplot=r,this.uid=r.uid+"-"+f,this.index=f,this.idSource="source-"+this.uid,this.idLayer=y.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var n=e.prototype;function t(r){if(!r.visible)return!1;var f=r.source;if(Array.isArray(f)&&f.length>0){for(var s=0;s<f.length;s++)if("string"!=typeof f[s]||0===f[s].length)return!1;return!0}return p.isPlainObject(f)||"string"==typeof f&&f.length>0}function a(r){var f={},s={};switch(r.type){case"circle":p.extendFlat(s,{"circle-radius":r.circle.radius,"circle-color":r.color,"circle-opacity":r.opacity});break;case"line":p.extendFlat(s,{"line-width":r.line.width,"line-color":r.color,"line-opacity":r.opacity,"line-dasharray":r.line.dash});break;case"fill":p.extendFlat(s,{"fill-color":r.color,"fill-outline-color":r.fill.outlinecolor,"fill-opacity":r.opacity});break;case"symbol":var i=r.symbol,l=u(i.textposition,i.iconsize);p.extendFlat(f,{"icon-image":i.icon+"-15","icon-size":i.iconsize/10,"text-field":i.text,"text-size":i.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":i.placement}),p.extendFlat(s,{"icon-color":r.color,"text-color":i.textfont.color,"text-opacity":r.opacity});break;case"raster":p.extendFlat(s,{"raster-fade-duration":0,"raster-opacity":r.opacity})}return{layout:f,paint:s}}n.update=function(r){this.visible?this.needsNewImage(r)?this.updateImage(r):this.needsNewSource(r)?(this.removeLayer(),this.updateSource(r),this.updateLayer(r)):this.needsNewLayer(r)?this.updateLayer(r):this.updateStyle(r):(this.updateSource(r),this.updateLayer(r)),this.visible=t(r)},n.needsNewImage=function(r){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===r.sourcetype&&(this.source!==r.source||JSON.stringify(this.coordinates)!==JSON.stringify(r.coordinates))},n.needsNewSource=function(r){return this.sourceType!==r.sourcetype||JSON.stringify(this.source)!==JSON.stringify(r.source)||this.layerType!==r.type},n.needsNewLayer=function(r){return this.layerType!==r.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},n.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},n.updateImage=function(r){this.subplot.map.getSource(this.idSource).updateImage({url:r.source,coordinates:r.coordinates});var f=this.findFollowingMapboxLayerId(this.lookupBelow());null!==f&&this.subplot.map.moveLayer(this.idLayer,f)},n.updateSource=function(r){var i,l,c,h,m,f=this.subplot.map;if(f.getSource(this.idSource)&&f.removeSource(this.idSource),this.sourceType=r.sourcetype,this.source=r.source,t(r)){var s=(h=(i=r).source,m={type:c=i.sourcetype},"geojson"===c?l="data":"vector"===c?l="string"==typeof h?"url":"tiles":"raster"===c?(l="tiles",m.tileSize=256):"image"===c&&(l="url",m.coordinates=i.coordinates),m[l]=h,i.sourceattribution&&(m.attribution=v(i.sourceattribution)),m);f.addSource(this.idSource,s)}},n.findFollowingMapboxLayerId=function(r){if("traces"===r)for(var f=this.subplot.getMapLayers(),s=0;s<f.length;s++){var i=f[s].id;if("string"==typeof i&&0===i.indexOf(y.traceLayerPrefix)){r=i;break}}return r},n.updateLayer=function(r){var f=this.subplot,s=a(r),i=this.lookupBelow(),l=this.findFollowingMapboxLayerId(i);this.removeLayer(),t(r)&&f.addLayer({id:this.idLayer,source:this.idSource,"source-layer":r.sourcelayer||"",type:r.type,minzoom:r.minzoom,maxzoom:r.maxzoom,layout:s.layout,paint:s.paint},l),this.layerType=r.type,this.below=i},n.updateStyle=function(r){if(t(r)){var f=a(r);this.subplot.setOptions(this.idLayer,"setLayoutProperty",f.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",f.paint)}},n.removeLayer=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer)},n.dispose=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer),r.getSource(this.idSource)&&r.removeSource(this.idSource)},Q.exports=function(r,f,s){var i=new e(r,f);return i.update(s),i}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/color").defaultLine,u=x("../domain").attributes,y=x("../font_attributes"),e=x("../../traces/scatter/attributes").textposition,n=x("../../plot_api/edit_types").overrideAll,t=x("../../plot_api/plot_template").templatedArray,a=x("./constants"),r=y({});r.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(Q.exports=n({_arrayAttrRegexps:[p.counterRegex("mapbox",".layers",!0)],domain:u({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:a.styleValuesMapbox.concat(a.styleValuesNonMapbox),dflt:a.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:t("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:v},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:v}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:r,textposition:p.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":925,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../subplot_defaults"),u=x("../array_container_defaults"),y=x("./layout_attributes");function e(t,a,r,f){r("accesstoken",f.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch"),u(t,a,{name:"layers",handleItemDefaults:n}),a._input=t}function n(t,a){function r(c,h){return p.coerce(t,a,y.layers,c,h)}if(r("visible")){var f,s=r("sourcetype"),i="raster"===s||"image"===s;r("source"),r("sourceattribution"),"vector"===s&&r("sourcelayer"),"image"===s&&r("coordinates"),i&&(f="raster");var l=r("type",f);i&&"raster"!==l&&(l=a.type="raster",p.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),"circle"===l&&r("circle.radius"),"line"===l&&(r("line.width"),r("line.dash")),"fill"===l&&r("fill.outlinecolor"),"symbol"===l&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),p.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}Q.exports=function(t,a,r){v(t,a,r,{type:"mapbox",attributes:y,handleDefaults:e,partition:"y",accessToken:a._mapboxAccessToken})}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(x,Q,K){"use strict";var p=x("mapbox-gl/dist/mapbox-gl-unminified"),v=x("../../lib"),u=x("../../lib/geo_location_utils"),y=x("../../registry"),e=x("../cartesian/axes"),n=x("../../components/dragelement"),t=x("../../components/fx"),a=x("../../components/dragelement/helpers"),r=a.rectMode,f=a.drawMode,s=a.selectMode,i=x("../cartesian/select").prepSelect,l=x("../cartesian/select").clearSelect,c=x("../cartesian/select").clearSelectionsCache,h=x("../cartesian/select").selectOnClick,m=x("./constants"),d=x("./layers");function o(T,E){this.id=E,this.gd=T;var k=T._fullLayout,O=T._context;this.container=k._glcontainer.node(),this.isStatic=O.staticPlot,this.uid=k._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(k),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var b=o.prototype;b.plot=function(T,E,k){var O,D=this;D.map&&E[D.id].accesstoken!==D.accessToken&&(D.map.remove(),D.map=null,D.styleObj=null,D.traceHash={},D.layerList=[]),O=new Promise(D.map?function(C,z){D.updateMap(T,E,C,z)}:function(C,z){D.createMap(T,E,C,z)}),k.push(O)},b.createMap=function(T,E,k,O){var D=this,S=E[D.id],C=D.styleObj=w(S.style);D.accessToken=S.accesstoken;var z=D.map=new p.Map({container:D.div,style:C.style,center:A(S.center),zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,interactive:!D.isStatic,preserveDrawingBuffer:D.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new p.AttributionControl({compact:!0}));z._canvas.style.left="0px",z._canvas.style.top="0px",D.rejectOnError(O),D.isStatic||D.initFx(T,E);var B=[];B.push(new Promise(function(U){z.once("load",U)})),B=B.concat(u.fetchTraceGeoData(T)),Promise.all(B).then(function(){D.fillBelowLookup(T,E),D.updateData(T),D.updateLayout(E),D.resolveOnRender(k)}).catch(O)},b.updateMap=function(T,E,k,O){var D=this,S=D.map,C=E[this.id];D.rejectOnError(O);var z=[],B=w(C.style);JSON.stringify(D.styleObj)!==JSON.stringify(B)&&(D.styleObj=B,S.setStyle(B.style),D.traceHash={},z.push(new Promise(function(U){S.once("styledata",U)}))),z=z.concat(u.fetchTraceGeoData(T)),Promise.all(z).then(function(){D.fillBelowLookup(T,E),D.updateData(T),D.updateLayout(E),D.resolveOnRender(k)}).catch(O)},b.fillBelowLookup=function(T,E){var k,O,D=E[this.id].layers,S=this.belowLookup={},C=!1;for(k=0;k<T.length;k++){var z=T[k][0].trace,B=z._module;"string"==typeof z.below?O=z.below:B.getBelow&&(O=B.getBelow(z,this)),""===O&&(C=!0),S["trace-"+z.uid]=O||""}for(k=0;k<D.length;k++){var U=D[k];S["layout-"+k]=O="string"==typeof U.below?U.below:C?"traces":""}var G,X,Z={};for(G in S)Z[O=S[G]]?Z[O].push(G):Z[O]=[G];for(O in Z){var q=Z[O];if(q.length>1)for(k=0;k<q.length;k++)0===(G=q[k]).indexOf("trace-")?(X=G.split("trace-")[1],this.traceHash[X]&&(this.traceHash[X].below=null)):0===G.indexOf("layout-")&&(X=G.split("layout-")[1],this.layerList[X]&&(this.layerList[X].below=null))}};var g={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function w(T){var E={};return v.isPlainObject(T)?(E.id=T.id,E.style=T):"string"==typeof T?(E.id=T,E.style=-1!==m.styleValuesMapbox.indexOf(T)?_(T):m.stylesNonMapbox[T]?m.stylesNonMapbox[T]:T):(E.id=m.styleValueDflt,E.style=_(m.styleValueDflt)),E.transition={duration:0,delay:0},E}function _(T){return m.styleUrlPrefix+T+"-"+m.styleUrlSuffix}function A(T){return[T.lon,T.lat]}b.updateData=function(T){var E,k,O,D,S=this.traceHash,C=T.slice().sort(function(X,Z){return g[X[0].trace.type]-g[Z[0].trace.type]});for(O=0;O<C.length;O++){var z=C[O],B=!1;(E=S[(k=z[0].trace).uid])&&(E.type===k.type?(E.update(z),B=!0):E.dispose()),!B&&k._module&&(S[k.uid]=k._module.plot(this,z))}var U=Object.keys(S);e:for(O=0;O<U.length;O++){var G=U[O];for(D=0;D<T.length;D++)if(G===(k=T[D][0].trace).uid)continue e;(E=S[G]).dispose(),delete S[G]}},b.updateLayout=function(T){var E=this.map,k=T[this.id];this.dragging||this.wheeling||(E.setCenter(A(k.center)),E.setZoom(k.zoom),E.setBearing(k.bearing),E.setPitch(k.pitch)),this.updateLayers(T),this.updateFramework(T),this.updateFx(T),this.map.resize(),this.gd._context._scrollZoom.mapbox?E.scrollZoom.enable():E.scrollZoom.disable()},b.resolveOnRender=function(T){var E=this.map;E.on("render",function k(){E.loaded()&&(E.off("render",k),setTimeout(T,10))})},b.rejectOnError=function(T){var E=this.map;function k(){T(new Error(m.mapOnErrorMsg))}E.once("error",k),E.once("style.error",k),E.once("source.error",k),E.once("tile.error",k),E.once("layer.error",k)},b.createFramework=function(T){var E=this,k=E.div=document.createElement("div");k.id=E.uid,k.style.position="absolute",E.container.appendChild(k),E.xaxis={_id:"x",c2p:function(O){return E.project(O).x}},E.yaxis={_id:"y",c2p:function(O){return E.project(O).y}},E.updateFramework(T),E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(E.mockAxis,T)},b.initFx=function(T,E){var k=this,O=k.gd,D=k.map;function S(){t.loneUnhover(E._hoverlayer)}function C(){var z=k.getView();O.emit("plotly_relayouting",k.getViewEditsWithDerived(z))}D.on("moveend",function(z){if(k.map){var B=O._fullLayout;if(z.originalEvent||k.wheeling){var U=B[k.id];y.call("_storeDirectGUIEdit",O.layout,B._preGUI,k.getViewEdits(U));var G=k.getView();U._input.center=U.center=G.center,U._input.zoom=U.zoom=G.zoom,U._input.bearing=U.bearing=G.bearing,U._input.pitch=U.pitch=G.pitch,O.emit("plotly_relayout",k.getViewEditsWithDerived(G))}z.originalEvent&&"mouseup"===z.originalEvent.type?k.dragging=!1:k.wheeling&&(k.wheeling=!1),B._rehover&&B._rehover()}}),D.on("wheel",function(){k.wheeling=!0}),D.on("mousemove",function(z){var B=k.div.getBoundingClientRect(),U=[z.originalEvent.offsetX,z.originalEvent.offsetY];z.target.getBoundingClientRect=function(){return B},k.xaxis.p2c=function(){return D.unproject(U).lng},k.yaxis.p2c=function(){return D.unproject(U).lat},O._fullLayout._rehover=function(){O._fullLayout._hoversubplot===k.id&&O._fullLayout[k.id]&&t.hover(O,z,k.id)},t.hover(O,z,k.id),O._fullLayout._hoversubplot=k.id}),D.on("dragstart",function(){k.dragging=!0,S()}),D.on("zoomstart",S),D.on("mouseout",function(){O._fullLayout._hoversubplot=null}),D.on("drag",C),D.on("zoom",C),D.on("dblclick",function(){var z=O._fullLayout[k.id];y.call("_storeDirectGUIEdit",O.layout,O._fullLayout._preGUI,k.getViewEdits(z));var B=k.viewInitial;D.setCenter(A(B.center)),D.setZoom(B.zoom),D.setBearing(B.bearing),D.setPitch(B.pitch);var U=k.getView();z._input.center=z.center=U.center,z._input.zoom=z.zoom=U.zoom,z._input.bearing=z.bearing=U.bearing,z._input.pitch=z.pitch=U.pitch,O.emit("plotly_doubleclick",null),O.emit("plotly_relayout",k.getViewEditsWithDerived(U))}),k.clearSelect=function(){c(k.dragOptions),l(k.dragOptions.gd)},k.onClickInPanFn=function(z){return function(B){var U=O._fullLayout.clickmode;U.indexOf("select")>-1&&h(B.originalEvent,O,[k.xaxis],[k.yaxis],k.id,z),U.indexOf("event")>-1&&t.click(O,B.originalEvent)}}},b.updateFx=function(T){var E=this,k=E.map,O=E.gd;if(!E.isStatic){var D,S=T.dragmode;D=r(S)?function(B,U){(B.range={})[E.id]=[z([U.xmin,U.ymin]),z([U.xmax,U.ymax])]}:function(B,U,G){(B.lassoPoints={})[E.id]=G.filtered.map(z)},E.dragOptions=v.extendDeep(E.dragOptions||{},{dragmode:T.dragmode,element:E.div,gd:O,plotinfo:{id:E.id,domain:T[E.id].domain,xaxis:E.xaxis,yaxis:E.yaxis,fillRangeItems:D},xaxes:[E.xaxis],yaxes:[E.yaxis],subplot:E.id}),k.off("click",E.onClickInPanHandler),s(S)||f(S)?(k.dragPan.disable(),k.on("zoomstart",E.clearSelect),E.dragOptions.prepFn=function(B,U,G){i(B,U,G,E.dragOptions,S)},n.init(E.dragOptions)):(k.dragPan.enable(),k.off("zoomstart",E.clearSelect),E.div.onmousedown=null,E.onClickInPanHandler=E.onClickInPanFn(E.dragOptions),k.on("click",E.onClickInPanHandler))}function z(B){var U=E.map.unproject(B);return[U.lng,U.lat]}},b.updateFramework=function(T){var E=T[this.id].domain,k=T._size,O=this.div.style;O.width=k.w*(E.x[1]-E.x[0])+"px",O.height=k.h*(E.y[1]-E.y[0])+"px",O.left=k.l+E.x[0]*k.w+"px",O.top=k.t+(1-E.y[1])*k.h+"px",this.xaxis._offset=k.l+E.x[0]*k.w,this.xaxis._length=k.w*(E.x[1]-E.x[0]),this.yaxis._offset=k.t+(1-E.y[1])*k.h,this.yaxis._length=k.h*(E.y[1]-E.y[0])},b.updateLayers=function(T){var E,k=T[this.id].layers,O=this.layerList;if(k.length!==O.length){for(E=0;E<O.length;E++)O[E].dispose();for(O=this.layerList=[],E=0;E<k.length;E++)O.push(d(this,E,k[E]))}else for(E=0;E<k.length;E++)O[E].update(k[E])},b.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},b.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},b.setOptions=function(T,E,k){for(var O in k)this.map[E](T,O,k[O])},b.getMapLayers=function(){return this.map.getStyle().layers},b.addLayer=function(T,E){var k=this.map;if("string"==typeof E){if(""===E)return void k.addLayer(T,E);for(var O=this.getMapLayers(),D=0;D<O.length;D++)if(E===O[D].id)return void k.addLayer(T,E);v.warn(["Trying to add layer with *below* value",E,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}k.addLayer(T)},b.project=function(T){return this.map.project(new p.LngLat(T[0],T[1]))},b.getView=function(){var T=this.map,E=T.getCenter(),k={lon:E.lng,lat:E.lat},O=T.getCanvas(),D=O.width,S=O.height;return{center:k,zoom:T.getZoom(),bearing:T.getBearing(),pitch:T.getPitch(),_derived:{coordinates:[T.unproject([0,0]).toArray(),T.unproject([D,0]).toArray(),T.unproject([D,S]).toArray(),T.unproject([0,S]).toArray()]}}},b.getViewEdits=function(T){for(var E=this.id,k=["center","zoom","bearing","pitch"],O={},D=0;D<k.length;D++){var S=k[D];O[E+"."+S]=T[S]}return O},b.getViewEditsWithDerived=function(T){var E=this.id,k=this.getViewEdits(T);return k[E+"._derived"]=T._derived,k},Q.exports=o},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(x,Q,K){"use strict";Q.exports=function(p){var v=p.editType;return{t:{valType:"number",dflt:0,editType:v},r:{valType:"number",dflt:0,editType:v},b:{valType:"number",dflt:0,editType:v},l:{valType:"number",dflt:0,editType:v},editType:v}}},{}],619:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("d3-time-format").timeFormatLocale,u=x("d3-format").formatLocale,y=x("fast-isnumeric"),e=x("../registry"),n=x("../plot_api/plot_schema"),t=x("../plot_api/plot_template"),a=x("../lib"),r=x("../components/color"),f=x("../constants/numerical").BADNUM,s=x("./cartesian/axis_ids"),i=x("./cartesian/handle_outline").clearSelect,l=x("./animation_attributes"),c=x("./frame_attributes"),h=x("../plots/get_data").getModuleCalcData,m=a.relinkPrivateKeys,d=a._,o=Q.exports={};a.extendFlat(o,e),o.attributes=x("./attributes"),o.attributes.type.values=o.allTypes,o.fontAttrs=x("./font_attributes"),o.layoutAttributes=x("./layout_attributes"),o.fontWeight="normal";var b=o.transformsRegistry,g=x("./command");o.executeAPICommand=g.executeAPICommand,o.computeAPICommandBindings=g.computeAPICommandBindings,o.manageCommandObserver=g.manageCommandObserver,o.hasSimpleAPICommandBindings=g.hasSimpleAPICommandBindings,o.redrawText=function(G){return G=a.getGraphDiv(G),new Promise(function(X){setTimeout(function(){G._fullLayout&&(e.getComponentMethod("annotations","draw")(G),e.getComponentMethod("legend","draw")(G),e.getComponentMethod("colorbar","draw")(G),X(o.previousPromises(G)))},300)})},o.resize=function(G){var X;G=a.getGraphDiv(G);var Z=new Promise(function(q,W){G&&!a.isHidden(G)||W(new Error("Resize must be passed a displayed plot div element.")),G._redrawTimer&&clearTimeout(G._redrawTimer),G._resolveResize&&(X=G._resolveResize),G._resolveResize=q,G._redrawTimer=setTimeout(function(){if(!G.layout||G.layout.width&&G.layout.height||a.isHidden(G))q(G);else{delete G.layout.width,delete G.layout.height;var te=G.changed;G.autoplay=!0,e.call("relayout",G,{autosize:!0}).then(function(){G.changed=te,G._resolveResize===q&&(delete G._resolveResize,q(G))})}},100)});return X&&X(Z),Z},o.previousPromises=function(G){if((G._promises||[]).length)return Promise.all(G._promises).then(function(){G._promises=[]})},o.addLinks=function(G){if(G._context.showLink||G._context.showSources){var X=G._fullLayout,Z=a.ensureSingle(X._paper,"text","js-plot-link-container",function(V){V.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var ee=p.select(this);ee.append("tspan").classed("js-link-to-tool",!0),ee.append("tspan").classed("js-link-spacer",!0),ee.append("tspan").classed("js-sourcelinks",!0)})}),q=Z.node(),W={y:X._paper.attr("height")-9};document.body.contains(q)&&q.getComputedTextLength()>=X.width-20?(W["text-anchor"]="start",W.x=5):(W["text-anchor"]="end",W.x=X._paper.attr("width")-7),Z.attr(W);var te=Z.select(".js-link-to-tool"),R=Z.select(".js-link-spacer"),N=Z.select(".js-sourcelinks");G._context.showSources&&G._context.showSources(G),G._context.showLink&&function(V,ee){ee.text("");var j=ee.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(V._context.linkText+" "+String.fromCharCode(187));if(V._context.sendData)j.on("click",function(){o.sendDataToCloud(V)});else{var J=window.location.pathname.split("/"),$=window.location.search;j.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+J[2].split(".")[0]+"/"+J[1]+$})}}(G,te),R.text(te.text()&&N.text()?" - ":"")}},o.sendDataToCloud=function(G){var X=(window.PLOTLYENV||{}).BASE_URL||G._context.plotlyServerURL;if(X){G.emit("plotly_beforeexport");var Z=p.select(G).append("div").attr("id","hiddenform").style("display","none"),q=Z.append("form").attr({action:X+"/external",method:"post",target:"_blank"});return q.append("input").attr({type:"text",name:"data"}).node().value=o.graphJson(G,!1,"keepdata"),q.node().submit(),Z.remove(),G.emit("plotly_afterexport"),!1}};var w=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],_=["year","month","dayMonth","dayMonthYear"];function A(G,X){var Z=G._context.locale;Z||(Z="en-US");var q=!1,W={};function te(J){for(var $=!0,re=0;re<X.length;re++){var ne=X[re];W[ne]||(J[ne]?W[ne]=J[ne]:$=!1)}$&&(q=!0)}for(var R=0;R<2;R++){for(var N=G._context.locales,V=0;V<2;V++){var ee=(N[Z]||{}).format;if(ee&&(te(ee),q))break;N=e.localeRegistry}var j=Z.split("-")[0];if(q||j===Z)break;Z=j}return q||te(e.localeRegistry.en.format),W}function T(G,X){var Z={_fullLayout:X},q="x"===G._id.charAt(0),W=G._mainAxis._anchorAxis,te="",R="",N="";if(W&&(N=W._mainAxis._id,te=q?G._id+N:N+G._id),!te||!X._plots[te]){te="";for(var V=G._counterAxes,ee=0;ee<V.length;ee++){var j=V[ee],J=q?G._id+j:j+G._id;R||(R=J);var $=s.getFromId(Z,j);if(N&&$.overlaying===N){te=J;break}}}return te||R}function E(G){var X=G.transforms;if(Array.isArray(X)&&X.length)for(var Z=0;Z<X.length;Z++){var q=X[Z],W=q._module||b[q.type];if(W&&W.makesData)return!0}return!1}function k(G,X,Z,q){for(var W=G.transforms,te=[G],R=0;R<W.length;R++){var N=W[R],V=b[N.type];V&&V.transform&&(te=V.transform(te,{transform:N,fullTrace:G,fullData:X,layout:Z,fullLayout:q,transformIndex:R}))}return te}function O(G){return"string"==typeof G&&"px"===G.substr(G.length-2)&&parseFloat(G)}function D(G){var X=G.margin;if(!G._size){var Z=G._size={l:Math.round(X.l),r:Math.round(X.r),t:Math.round(X.t),b:Math.round(X.b),p:Math.round(X.pad)};Z.w=Math.round(G.width)-Z.l-Z.r,Z.h=Math.round(G.height)-Z.t-Z.b}G._pushmargin||(G._pushmargin={}),G._pushmarginIds||(G._pushmarginIds={})}o.supplyDefaults=function(G,X){var Be,Je,Z=X&&X.skipUpdateCalc,q=G._fullLayout||{};if(q._skipDefaults)delete q._skipDefaults;else{var W,te=G._fullLayout={},R=G.layout||{},N=G._fullData||[],V=G._fullData=[],ee=G.data||[],j=G.calcdata||[],J=G._context||{};G._transitionData||o.createTransitionData(G),te._dfltTitle={plot:d(G,"Click to enter Plot title"),x:d(G,"Click to enter X axis title"),y:d(G,"Click to enter Y axis title"),colorbar:d(G,"Click to enter Colorscale title"),annotation:d(G,"new text")},te._traceWord=d(G,"trace");var $=A(G,w);if(te._mapboxAccessToken=J.mapboxAccessToken,q._initialAutoSizeIsDone){var re=q.width,ne=q.height;o.supplyLayoutGlobalDefaults(R,te,$),R.width||(te.width=re),R.height||(te.height=ne),o.sanitizeMargins(te)}else{o.supplyLayoutGlobalDefaults(R,te,$);var se=!R.width||!R.height,ie=te.autosize;se&&(ie||J.autosizable)?o.plotAutoSize(G,R,te):se&&o.sanitizeMargins(te),!ie&&se&&(R.width=te.width,R.height=te.height)}te._d3locale=((Be=$).decimal=(Je=te.separators).charAt(0),Be.thousands=Je.charAt(1),{numberFormat:function(Ye){try{Ye=u(Be).format(a.adjustFormat(Ye))}catch(nt){return a.warnBadFormat(Ye),a.noFormat}return Ye},timeFormat:v(Be).utcFormat}),te._extraFormat=A(G,_),te._initialAutoSizeIsDone=!0,te._dataLength=ee.length,te._modules=[],te._visibleModules=[],te._basePlotModules=[];var le=te._subplots=function(){var Be,Je,Ye=e.collectableSubplotTypes,nt={};if(!Ye){Ye=[];var ft=e.subplotsRegistry;for(var dt in ft){var Rt=ft[dt].attr;if(Rt&&(Ye.push(dt),Array.isArray(Rt)))for(Je=0;Je<Rt.length;Je++)a.pushUnique(Ye,Rt[Je])}}for(Be=0;Be<Ye.length;Be++)nt[Ye[Be]]=[];return nt}(),de=te._splomAxes={x:{},y:{}},ve=te._splomSubplots={};te._splomGridDflt={},te._scatterStackOpts={},te._firstScatter={},te._alignmentOpts={},te._colorAxes={},te._requestRangeslider={},te._traceUids=function(Be,Je){var Ye,nt,ft=Je.length,dt=[];for(Ye=0;Ye<Be.length;Ye++){var Rt=Be[Ye]._fullInput;Rt!==nt&&dt.push(Rt),nt=Rt}var Et=dt.length,at=new Array(ft),rt={};function St(Ue,Ze){at[Ze]=Ue,rt[Ue]=1}function Xt(Ue,Ze){if(Ue&&"string"==typeof Ue&&!rt[Ue])return St(Ue,Ze),!0}for(Ye=0;Ye<ft;Ye++){var lr=Je[Ye].uid;"number"==typeof lr&&(lr=String(lr)),Xt(lr,Ye)||Ye<Et&&Xt(dt[Ye].uid,Ye)||St(a.randstr(rt),Ye)}return at}(N,ee),te._globalTransforms=(G._context||{}).globalTransforms,o.supplyDataDefaults(ee,V,R,te);var _e=Object.keys(de.x),be=Object.keys(de.y);if(_e.length>1&&be.length>1){for(e.getComponentMethod("grid","sizeDefaults")(R,te),W=0;W<_e.length;W++)a.pushUnique(le.xaxis,_e[W]);for(W=0;W<be.length;W++)a.pushUnique(le.yaxis,be[W]);for(var Te in ve)a.pushUnique(le.cartesian,Te)}if(te._has=o._hasPlotType.bind(te),N.length===V.length)for(W=0;W<V.length;W++)m(V[W],N[W]);o.supplyLayoutModuleDefaults(R,te,V,G._transitionData);var he=te._visibleModules,me=[];for(W=0;W<he.length;W++){var Ae=he[W].crossTraceDefaults;Ae&&a.pushUnique(me,Ae)}for(W=0;W<me.length;W++)me[W](V,te);te._hasOnlyLargeSploms=1===te._basePlotModules.length&&"splom"===te._basePlotModules[0].name&&_e.length>15&&be.length>15&&0===te.shapes.length&&0===te.images.length,o.linkSubplots(V,te,N,q),o.cleanPlot(V,te,N,q);var we=!(!q._has||!q._has("gl2d")),Se=!(!te._has||!te._has("gl2d")),Pe=!(!q._has||!q._has("cartesian"))||we,ze=!(!te._has||!te._has("cartesian"))||Se;Pe&&!ze?q._bgLayer.remove():ze&&!Pe&&(te._shouldCreateBgLayer=!0),q._zoomlayer&&!G._dragging&&i({_fullLayout:q}),function(Be,Je){var Ye,nt=[];Je.meta&&(Ye=Je._meta={meta:Je.meta,layout:{meta:Je.meta}});for(var ft=0;ft<Be.length;ft++){var dt=Be[ft];dt.meta?nt[dt.index]=dt._meta={meta:dt.meta}:Je.meta&&(dt._meta={meta:Je.meta}),Je.meta&&(dt._meta.layout={meta:Je.meta})}nt.length&&(Ye||(Ye=Je._meta={}),Ye.data=nt)}(V,te),m(te,q),e.getComponentMethod("colorscale","crossTraceDefaults")(V,te),te._preGUI||(te._preGUI={}),te._tracePreGUI||(te._tracePreGUI={});var He,tt=te._tracePreGUI,Oe={};for(He in tt)Oe[He]="old";for(W=0;W<V.length;W++)Oe[He=V[W]._fullInput.uid]||(tt[He]={}),Oe[He]="new";for(He in Oe)"old"===Oe[He]&&delete tt[He];D(te),e.getComponentMethod("rangeslider","makeData")(te),Z||j.length!==V.length||o.supplyDefaultsUpdateCalc(j,V)}},o.supplyDefaultsUpdateCalc=function(G,X){for(var Z=0;Z<X.length;Z++){var q=X[Z],W=(G[Z]||[])[0];if(W&&W.trace){var te=W.trace;if(te._hasCalcTransform){var R,N,V,ee=te._arrayAttrs;for(R=0;R<ee.length;R++)V=a.nestedProperty(te,N=ee[R]).get().slice(),a.nestedProperty(q,N).set(V)}W.trace=q}}},o.createTransitionData=function(G){G._transitionData||(G._transitionData={}),G._transitionData._frames||(G._transitionData._frames=[]),G._transitionData._frameHash||(G._transitionData._frameHash={}),G._transitionData._counter||(G._transitionData._counter=0),G._transitionData._interruptCallbacks||(G._transitionData._interruptCallbacks=[])},o._hasPlotType=function(G){var X,Z=this._basePlotModules||[];for(X=0;X<Z.length;X++)if(Z[X].name===G)return!0;var q=this._modules||[];for(X=0;X<q.length;X++){var W=q[X].name;if(W===G)return!0;var te=e.modules[W];if(te&&te.categories[G])return!0}return!1},o.cleanPlot=function(G,X,Z,q){var W,te,R=q._basePlotModules||[];for(W=0;W<R.length;W++){var N=R[W];N.clean&&N.clean(G,X,Z,q)}var V=q._has&&q._has("gl"),ee=X._has&&X._has("gl");V&&!ee&&void 0!==q._glcontainer&&(q._glcontainer.selectAll(".gl-canvas").remove(),q._glcontainer.selectAll(".no-webgl").remove(),q._glcanvas=null);var j=!!q._infolayer;e:for(W=0;W<Z.length;W++){var J=Z[W].uid;for(te=0;te<G.length;te++)if(J===G[te].uid)continue e;j&&q._infolayer.select(".cb"+J).remove()}},o.linkSubplots=function(G,X,Z,q){var W,te,R=q._plots||{},N=X._plots={},V=X._subplots,ee={_fullData:G,_fullLayout:X},j=V.cartesian.concat(V.gl2d||[]);for(W=0;W<j.length;W++){var J,$=j[W],re=R[$],ne=s.getFromId(ee,$,"x"),se=s.getFromId(ee,$,"y");for(re?J=N[$]=re:(J=N[$]={}).id=$,ne._counterAxes.push(se._id),se._counterAxes.push(ne._id),ne._subplotsWith.push($),se._subplotsWith.push($),J.xaxis=ne,J.yaxis=se,J._hasClipOnAxisFalse=!1,te=0;te<G.length;te++){var ie=G[te];if(ie.xaxis===J.xaxis._id&&ie.yaxis===J.yaxis._id&&!1===ie.cliponaxis){J._hasClipOnAxisFalse=!0;break}}}var ue,le=s.list(ee,null,!0);for(W=0;W<le.length;W++){var de=null;(ue=le[W]).overlaying&&(de=s.getFromId(ee,ue.overlaying))&&de.overlaying&&(ue.overlaying=!1,de=null),ue._mainAxis=de||ue,de&&(ue.domain=de.domain.slice()),ue._anchorAxis="free"===ue.anchor?null:s.getFromId(ee,ue.anchor)}for(W=0;W<le.length;W++)if((ue=le[W])._counterAxes.sort(s.idSort),ue._subplotsWith.sort(a.subplotSort),ue._mainSubplot=T(ue,X),ue._counterAxes.length&&(ue.spikemode&&-1!==ue.spikemode.indexOf("across")||ue.automargin&&ue.mirror&&"free"!==ue.anchor||e.getComponentMethod("rangeslider","isVisible")(ue))){var ve=1,_e=0;for(te=0;te<ue._counterAxes.length;te++){var be=s.getFromId(ee,ue._counterAxes[te]);ve=Math.min(ve,be.domain[0]),_e=Math.max(_e,be.domain[1])}ve<_e&&(ue._counterDomainMin=ve,ue._counterDomainMax=_e)}},o.clearExpandedTraceDefaultColors=function(G){var X,Z,q;for(Z=[],(X=G._module._colorAttrs)||(G._module._colorAttrs=X=[],n.crawl(G._module.attributes,function(W,te,R,N){Z[N]=te,Z.length=N+1,"color"===W.valType&&void 0===W.dflt&&X.push(Z.join("."))})),q=0;q<X.length;q++)a.nestedProperty(G,"_input."+X[q]).get()||a.nestedProperty(G,X[q]).set(null)},o.supplyDataDefaults=function(G,X,Z,q){var W,te,R,N=q._modules,V=q._visibleModules,ee=q._basePlotModules,j=0,J=0;function $(Te){X.push(Te);var he=Te._module;he&&(a.pushUnique(N,he),!0===Te.visible&&a.pushUnique(V,he),a.pushUnique(ee,Te._module.basePlotModule),j++,!1!==Te._input.visible&&J++)}q._transformModules=[];var re={},ne=[],ie=t.traceTemplater((Z.template||{}).data||{});for(W=0;W<G.length;W++){if((te=ie.newTrace(R=G[W])).uid=q._traceUids[W],o.supplyTraceDefaults(R,te,J,q,W),te.index=W,te._input=R,te._expandedIndex=j,te.transforms&&te.transforms.length)for(var ue=!1!==R.visible&&!1===te.visible,le=k(te,X,Z,q),de=0;de<le.length;de++){var ve=le[de],_e={_template:te._template,type:te.type,uid:te.uid+de};ue&&!1===ve.visible&&delete ve.visible,o.supplyTraceDefaults(ve,_e,j,q,W),m(_e,ve),_e.index=W,_e._input=R,_e._fullInput=te,_e._expandedIndex=j,_e._expandedInput=ve,$(_e)}else te._fullInput=te,te._expandedInput=te,$(te);e.traceIs(te,"carpetAxis")&&(re[te.carpet]=te),e.traceIs(te,"carpetDependent")&&ne.push(W)}for(W=0;W<ne.length;W++)if((te=X[ne[W]]).visible){var be=re[te.carpet];te._carpet=be,be&&be.visible?(te.xaxis=be.xaxis,te.yaxis=be.yaxis):te.visible=!1}},o.supplyAnimationDefaults=function(G){var X;G=G||{};var Z={};function q(W,te){return a.coerce(G||{},Z,l,W,te)}if(q("mode"),q("direction"),q("fromcurrent"),Array.isArray(G.frame))for(Z.frame=[],X=0;X<G.frame.length;X++)Z.frame[X]=o.supplyAnimationFrameDefaults(G.frame[X]||{});else Z.frame=o.supplyAnimationFrameDefaults(G.frame||{});if(Array.isArray(G.transition))for(Z.transition=[],X=0;X<G.transition.length;X++)Z.transition[X]=o.supplyAnimationTransitionDefaults(G.transition[X]||{});else Z.transition=o.supplyAnimationTransitionDefaults(G.transition||{});return Z},o.supplyAnimationFrameDefaults=function(G){var X={};function Z(q,W){return a.coerce(G||{},X,l.frame,q,W)}return Z("duration"),Z("redraw"),X},o.supplyAnimationTransitionDefaults=function(G){var X={};function Z(q,W){return a.coerce(G||{},X,l.transition,q,W)}return Z("duration"),Z("easing"),X},o.supplyFrameDefaults=function(G){var X={};function Z(q,W){return a.coerce(G,X,c,q,W)}return Z("group"),Z("name"),Z("traces"),Z("baseframe"),Z("data"),Z("layout"),X},o.supplyTraceDefaults=function(G,X,Z,q,W){var te,R=q.colorway||r.defaults,N=R[Z%R.length];function V(le,de){return a.coerce(G,X,o.attributes,le,de)}var ee=V("visible");V("type"),V("name",q._traceWord+" "+W),V("uirevision",q.uirevision);var j=o.getModule(X);if(X._module=j,j){var J=j.basePlotModule,$=J.attr,re=J.attributes;if($&&re){var ne=q._subplots,se="";if(ee||"gl2d"!==J.name){if(Array.isArray($))for(te=0;te<$.length;te++){var ie=$[te],ue=a.coerce(G,X,re,ie);ne[ie]&&a.pushUnique(ne[ie],ue),se+=ue}else se=a.coerce(G,X,re,$);ne[J.name]&&a.pushUnique(ne[J.name],se)}}}return ee&&(V("customdata"),V("ids"),V("meta"),e.traceIs(X,"showLegend")?(a.coerce(G,X,j.attributes.showlegend?j.attributes:o.attributes,"showlegend"),V("legendgroup"),V("legendgrouptitle.text")&&a.coerceFont(V,"legendgrouptitle.font",a.extendFlat({},q.font,{size:Math.round(1.1*q.font.size)})),V("legendrank"),X._dfltShowLegend=!0):X._dfltShowLegend=!1,j&&j.supplyDefaults(G,X,N,q),e.traceIs(X,"noOpacity")||V("opacity"),e.traceIs(X,"notLegendIsolatable")&&(X.visible=!!X.visible),e.traceIs(X,"noHover")||(X.hovertemplate||a.coerceHoverinfo(G,X,q),"parcats"!==X.type&&e.getComponentMethod("fx","supplyDefaults")(G,X,N,q)),j&&j.selectPoints&&V("selectedpoints"),o.supplyTransformDefaults(G,X,q)),X},o.hasMakesDataTransform=E,o.supplyTransformDefaults=function(G,X,Z){if(X._length||E(G)){var q=Z._globalTransforms||[],W=Z._transformModules||[];if(Array.isArray(G.transforms)||0!==q.length)for(var R=q.concat(G.transforms||[]),N=X.transforms=[],V=0;V<R.length;V++){var ee,j=R[V],J=j.type,$=b[J],re=!(j._module&&j._module===$),ne=$&&"function"==typeof $.transform;$||a.warn("Unrecognized transform type "+J+"."),$&&$.supplyDefaults&&(re||ne)?((ee=$.supplyDefaults(j,X,Z,G)).type=J,ee._module=$,a.pushUnique(W,$)):ee=a.extendFlat({},j),N.push(ee)}}},o.supplyLayoutGlobalDefaults=function(G,X,Z){function q(N,V){return a.coerce(G,X,o.layoutAttributes,N,V)}var W=G.template;a.isPlainObject(W)&&(X.template=W,X._template=W.layout,X._dataTemplate=W.data),q("autotypenumbers");var te=a.coerceFont(q,"font");q("title.text",X._dfltTitle.plot),a.coerceFont(q,"title.font",{family:te.family,size:Math.round(1.4*te.size),color:te.color}),q("title.xref"),q("title.yref"),q("title.x"),q("title.y"),q("title.xanchor"),q("title.yanchor"),q("title.pad.t"),q("title.pad.r"),q("title.pad.b"),q("title.pad.l"),q("uniformtext.mode")&&q("uniformtext.minsize"),q("autosize",!(G.width&&G.height)),q("width"),q("height"),q("margin.l"),q("margin.r"),q("margin.t"),q("margin.b"),q("margin.pad"),q("margin.autoexpand"),G.width&&G.height&&o.sanitizeMargins(X),e.getComponentMethod("grid","sizeDefaults")(G,X),q("paper_bgcolor"),q("separators",Z.decimal+Z.thousands),q("hidesources"),q("colorway"),q("datarevision");var R=q("uirevision");q("editrevision",R),q("selectionrevision",R),e.getComponentMethod("modebar","supplyLayoutDefaults")(G,X),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(G,X,q),q("meta"),a.isPlainObject(G.transition)&&(q("transition.duration"),q("transition.easing"),q("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(G,X,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(G,X,q)},o.plotAutoSize=function(G,X,Z){var q,W,te=G._context||{},R=te.frameMargins,N=a.isPlotDiv(G);if(N&&G.emit("plotly_autosize"),te.fillFrame)q=window.innerWidth,W=window.innerHeight,document.body.style.overflow="hidden";else{var V=N?window.getComputedStyle(G):{};if(q=O(V.width)||O(V.maxWidth)||Z.width,W=O(V.height)||O(V.maxHeight)||Z.height,y(R)&&R>0){var ee=1-2*R;q=Math.round(ee*q),W=Math.round(ee*W)}}var j=o.layoutAttributes.width.min,J=o.layoutAttributes.height.min;q<j&&(q=j),W<J&&(W=J);var $=!X.width&&Math.abs(Z.width-q)>1,re=!X.height&&Math.abs(Z.height-W)>1;(re||$)&&($&&(Z.width=q),re&&(Z.height=W)),G._initialAutoSize||(G._initialAutoSize={width:q,height:W}),o.sanitizeMargins(Z)},o.supplyLayoutModuleDefaults=function(G,X,Z,q){var W,te,R,N=e.componentsRegistry,V=X._basePlotModules,ee=e.subplotsRegistry.cartesian;for(W in N)(R=N[W]).includeBasePlot&&R.includeBasePlot(G,X);for(var j in V.length||V.push(ee),X._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(G,X),ee.finalizeSubplots(G,X)),X._subplots)X._subplots[j].sort(a.subplotSort);for(te=0;te<V.length;te++)(R=V[te]).supplyLayoutDefaults&&R.supplyLayoutDefaults(G,X,Z);var J=X._modules;for(te=0;te<J.length;te++)(R=J[te]).supplyLayoutDefaults&&R.supplyLayoutDefaults(G,X,Z);var $=X._transformModules;for(te=0;te<$.length;te++)(R=$[te]).supplyLayoutDefaults&&R.supplyLayoutDefaults(G,X,Z,q);for(W in N)(R=N[W]).supplyLayoutDefaults&&R.supplyLayoutDefaults(G,X,Z)},o.purge=function(G){var X=G._fullLayout||{};void 0!==X._glcontainer&&(X._glcontainer.selectAll(".gl-canvas").remove(),X._glcontainer.remove(),X._glcanvas=null),X._modeBar&&X._modeBar.destroy(),G._transitionData&&(G._transitionData._interruptCallbacks&&(G._transitionData._interruptCallbacks.length=0),G._transitionData._animationRaf&&window.cancelAnimationFrame(G._transitionData._animationRaf)),a.clearThrottle(),a.clearResponsive(G),delete G.data,delete G.layout,delete G._fullData,delete G._fullLayout,delete G.calcdata,delete G.empty,delete G.fid,delete G.undoqueue,delete G.undonum,delete G.autoplay,delete G.changed,delete G._promises,delete G._redrawTimer,delete G._hmlumcount,delete G._hmpixcount,delete G._transitionData,delete G._transitioning,delete G._initialAutoSize,delete G._transitioningWithDuration,delete G._dragging,delete G._dragged,delete G._dragdata,delete G._hoverdata,delete G._snapshotInProgress,delete G._editing,delete G._mouseDownTime,delete G._legendMouseDownTime,G.removeAllListeners&&G.removeAllListeners()},o.style=function(G){var X,Z=G._fullLayout._visibleModules,q=[];for(X=0;X<Z.length;X++){var W=Z[X];W.style&&a.pushUnique(q,W.style)}for(X=0;X<q.length;X++)q[X](G)},o.sanitizeMargins=function(G){if(G&&G.margin){var X,Z=G.width,q=G.height,W=G.margin,R=q-(W.t+W.b);Z-(W.l+W.r)<0&&(X=(Z-1)/(W.l+W.r),W.l=Math.floor(X*W.l),W.r=Math.floor(X*W.r)),R<0&&(X=(q-1)/(W.t+W.b),W.t=Math.floor(X*W.t),W.b=Math.floor(X*W.b))}},o.clearAutoMarginIds=function(G){G._fullLayout._pushmarginIds={}},o.allowAutoMargin=function(G,X){G._fullLayout._pushmarginIds[X]=1},o.autoMargin=function(G,X,Z){var q=G._fullLayout,W=q.width,te=q.height,R=q.margin,N=a.constrain(W-R.l-R.r,2,64),V=a.constrain(te-R.t-R.b,2,64),ee=Math.max(0,W-N),j=Math.max(0,te-V),J=q._pushmargin,$=q._pushmarginIds;if(!1!==R.autoexpand){if(Z){var re=Z.pad;if(void 0===re&&(re=Math.min(12,R.l,R.r,R.t,R.b)),ee){var ne=(Z.l+Z.r)/ee;ne>1&&(Z.l/=ne,Z.r/=ne)}if(j){var se=(Z.t+Z.b)/j;se>1&&(Z.t/=se,Z.b/=se)}J[X]={l:{val:void 0!==Z.xl?Z.xl:Z.x,size:Z.l+re},r:{val:void 0!==Z.xr?Z.xr:Z.x,size:Z.r+re},b:{val:void 0!==Z.yb?Z.yb:Z.y,size:Z.b+re},t:{val:void 0!==Z.yt?Z.yt:Z.y,size:Z.t+re}},$[X]=1}else delete J[X],delete $[X];if(!q._replotting)return o.doAutoMargin(G)}},o.doAutoMargin=function(G){var X=G._fullLayout,Z=X.width,q=X.height;X._size||(X._size={}),D(X);var W=X._size,te=X.margin,R=a.extendFlat({},W),N=te.l,V=te.r,ee=te.t,j=te.b,J=X._pushmargin,$=X._pushmarginIds;if(!1!==X.margin.autoexpand){for(var re in J)$[re]||delete J[re];for(var ne in J.base={l:{val:0,size:N},r:{val:1,size:V},t:{val:1,size:ee},b:{val:0,size:j}},J){var se=J[ne].l||{},ie=J[ne].b||{},ue=se.val,le=se.size,de=ie.val,ve=ie.size;for(var _e in J){if(y(le)&&J[_e].r){var be=J[_e].r.val,Te=J[_e].r.size;if(be>ue){var he=(le*be+(Te-Z)*ue)/(be-ue),me=(Te*(1-ue)+(le-Z)*(1-be))/(be-ue);he+me>N+V&&(N=he,V=me)}}if(y(ve)&&J[_e].t){var Ae=J[_e].t.val,we=J[_e].t.size;if(Ae>de){var Se=(ve*Ae+(we-q)*de)/(Ae-de),Pe=(we*(1-de)+(ve-q)*(1-Ae))/(Ae-de);Se+Pe>j+ee&&(j=Se,ee=Pe)}}}}}var ft,ze=a.constrain(Z-te.l-te.r,2,64),He=a.constrain(q-te.t-te.b,2,64),tt=Math.max(0,Z-ze),Oe=Math.max(0,q-He);if(tt){var Be=(N+V)/tt;Be>1&&(N/=Be,V/=Be)}if(Oe){var Je=(j+ee)/Oe;Je>1&&(j/=Je,ee/=Je)}if(W.l=Math.round(N),W.r=Math.round(V),W.t=Math.round(ee),W.b=Math.round(j),W.p=Math.round(te.pad),W.w=Math.round(Z)-W.l-W.r,W.h=Math.round(q)-W.t-W.b,!X._replotting&&o.didMarginChange(R,W)){"_redrawFromAutoMarginCount"in X?X._redrawFromAutoMarginCount++:X._redrawFromAutoMarginCount=1;var Ye=3*(1+Object.keys($).length);if(X._redrawFromAutoMarginCount<Ye)return e.call("_doPlot",G);X._size=R,a.warn("Too many auto-margin redraws.")}ft=s.list(G,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(dt){for(var Rt=0;Rt<ft.length;Rt++){var Et=ft[Rt][dt];Et&&Et()}})};var S=["l","r","t","b","p","w","h"];function C(G,X,Z){var q=!1,te=a.syncOrAsync([o.previousPromises,function(){if(G._transitionData)return G._transitioning=!1,function(R){var N=Promise.resolve();if(!R)return N;for(;R.length;)N=N.then(R.shift());return N}(G._transitionData._interruptCallbacks)},Z.prepareFn,o.rehover,function(){return G.emit("plotly_transitioning",[]),new Promise(function(R){G._transitioning=!0,X.duration>0&&(G._transitioningWithDuration=!0),G._transitionData._interruptCallbacks.push(function(){q=!0}),Z.redraw&&G._transitionData._interruptCallbacks.push(function(){return e.call("redraw",G)}),G._transitionData._interruptCallbacks.push(function(){G.emit("plotly_transitioninterrupted",[])});var N=0,V=0;function ee(){return N++,function(){var j;V++,q||V!==N||(j=R,!G._transitionData||(function(J){if(J)for(;J.length;)J.shift()}(G._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(Z.redraw)return e.call("redraw",G)}).then(function(){G._transitioning=!1,G._transitioningWithDuration=!1,G.emit("plotly_transitioned",[])}).then(j)))}}Z.runFn(ee),setTimeout(ee())})}],G);return te&&te.then||(te=Promise.resolve()),te.then(function(){return G})}o.didMarginChange=function(G,X){for(var Z=0;Z<S.length;Z++){var q=S[Z],W=G[q],te=X[q];if(!y(W)||Math.abs(te-W)>1)return!0}return!1},o.graphJson=function(G,X,Z,q,W,te){(W&&X&&!G._fullData||W&&!X&&!G._fullLayout)&&o.supplyDefaults(G);var N=W?G._fullLayout:G.layout,V=(G._transitionData||{})._frames;function ee($,re){if("function"==typeof $)return re?"_function_":null;if(a.isPlainObject($)){var ne,se={};return Object.keys($).sort().forEach(function(ie){if(-1===["_","["].indexOf(ie.charAt(0)))if("function"!=typeof $[ie]){if("keepdata"===Z){if("src"===ie.substr(ie.length-3))return}else if("keepstream"===Z){if("string"==typeof(ne=$[ie+"src"])&&ne.indexOf(":")>0&&!a.isPlainObject($.stream))return}else if("keepall"!==Z&&"string"==typeof(ne=$[ie+"src"])&&ne.indexOf(":")>0)return;se[ie]=ee($[ie],re)}else re&&(se[ie]="_function")}),se}return Array.isArray($)?$.map(function(ie){return ee(ie,re)}):a.isTypedArray($)?a.simpleMap($,a.identity):a.isJSDate($)?a.ms2DateTimeLocal(+$):$}var j={data:((W?G._fullData:G.data)||[]).map(function($){var re=ee($);return X&&delete re.fit,re})};if(!X&&(j.layout=ee(N),W)){var J=N._size;j.layout.computed={margin:{b:J.b,l:J.l,r:J.r,t:J.t}}}return V&&(j.frames=ee(V)),te&&(j.config=ee(G._context,!0)),"object"===q?j:JSON.stringify(j)},o.modifyFrames=function(G,X){var Z,q,W,te=G._transitionData._frames,R=G._transitionData._frameHash;for(Z=0;Z<X.length;Z++)switch((q=X[Z]).type){case"replace":var N=(te[q.index]||{}).name,V=(W=q.value).name;te[q.index]=R[V]=W,V!==N&&(delete R[N],R[V]=W);break;case"insert":R[(W=q.value).name]=W,te.splice(q.index,0,W);break;case"delete":delete R[(W=te[q.index]).name],te.splice(q.index,1)}return Promise.resolve()},o.computeFrame=function(G,X){var Z,q,W,te,R=G._transitionData._frameHash;if(!X)throw new Error("computeFrame must be given a string frame name");var N=R[X.toString()];if(!N)return!1;for(var V=[N],ee=[N.name];N.baseframe&&(N=R[N.baseframe.toString()])&&-1===ee.indexOf(N.name);)V.push(N),ee.push(N.name);for(var j={};N=V.pop();)if(N.layout&&(j.layout=o.extendLayout(j.layout,N.layout)),N.data){if(j.data||(j.data=[]),!(q=N.traces))for(q=[],Z=0;Z<N.data.length;Z++)q[Z]=Z;for(j.traces||(j.traces=[]),Z=0;Z<N.data.length;Z++)null!=(W=q[Z])&&(-1===(te=j.traces.indexOf(W))&&(j.traces[te=j.data.length]=W),j.data[te]=o.extendTrace(j.data[te],N.data[Z]))}return j},o.recomputeFrameHash=function(G){for(var X=G._transitionData._frameHash={},Z=G._transitionData._frames,q=0;q<Z.length;q++){var W=Z[q];W&&W.name&&(X[W.name]=W)}},o.extendObjectWithContainers=function(G,X,Z){var q,W,te,R,N,V,ee,j=a.extendDeepNoArrays({},X||{}),J=a.expandObjectPaths(j),$={};if(Z&&Z.length)for(te=0;te<Z.length;te++)void 0===(W=(q=a.nestedProperty(J,Z[te])).get())?a.nestedProperty($,Z[te]).set(null):(q.set(null),a.nestedProperty($,Z[te]).set(W));if(G=a.extendDeepNoArrays(G||{},J),Z&&Z.length)for(te=0;te<Z.length;te++)if(V=a.nestedProperty($,Z[te]).get()){for(ee=(N=a.nestedProperty(G,Z[te])).get(),Array.isArray(ee)||N.set(ee=[]),R=0;R<V.length;R++){var re=V[R];ee[R]=null===re?null:o.extendObjectWithContainers(ee[R],re)}N.set(ee)}return G},o.dataArrayContainers=["transforms","dimensions"],o.layoutArrayContainers=e.layoutArrayContainers,o.extendTrace=function(G,X){return o.extendObjectWithContainers(G,X,o.dataArrayContainers)},o.extendLayout=function(G,X){return o.extendObjectWithContainers(G,X,o.layoutArrayContainers)},o.transition=function(G,X,Z,q,W,te){var R={redraw:W.redraw},N={},V=[];return R.prepareFn=function(){for(var ee=Array.isArray(X)?X.length:0,j=q.slice(0,ee),J=0;J<j.length;J++){var $=j[J],re=G._fullData[$]._module;if(re){if(re.animatable){var ne=re.basePlotModule.name;N[ne]||(N[ne]=[]),N[ne].push($)}G.data[j[J]]=o.extendTrace(G.data[j[J]],X[J])}}var se=a.expandObjectPaths(a.extendDeepNoArrays({},Z)),ie=/^[xy]axis[0-9]*$/;for(var ue in se)ie.test(ue)&&delete se[ue].range;o.extendLayout(G.layout,se),delete G.calcdata,o.supplyDefaults(G),o.doCalcdata(G);var le=a.expandObjectPaths(Z);if(le){var de=G._fullLayout._plots;for(var ve in de){var _e=de[ve],be=_e.xaxis,Te=_e.yaxis,he=be.range.slice(),me=Te.range.slice(),Ae=null,we=null,Se=null,Pe=null;Array.isArray(le[be._name+".range"])?Ae=le[be._name+".range"].slice():Array.isArray((le[be._name]||{}).range)&&(Ae=le[be._name].range.slice()),Array.isArray(le[Te._name+".range"])?we=le[Te._name+".range"].slice():Array.isArray((le[Te._name]||{}).range)&&(we=le[Te._name].range.slice()),he&&Ae&&(be.r2l(he[0])!==be.r2l(Ae[0])||be.r2l(he[1])!==be.r2l(Ae[1]))&&(Se={xr0:he,xr1:Ae}),me&&we&&(Te.r2l(me[0])!==Te.r2l(we[0])||Te.r2l(me[1])!==Te.r2l(we[1]))&&(Pe={yr0:me,yr1:we}),(Se||Pe)&&V.push(a.extendFlat({plotinfo:_e},Se,Pe))}}return Promise.resolve()},R.runFn=function(ee){var j,J,$=G._fullLayout._basePlotModules,re=V.length;if(Z)for(J=0;J<$.length;J++)$[J].transitionAxes&&$[J].transitionAxes(G,V,te,ee);for(var ne in re?((j=a.extendFlat({},te)).duration=0,delete N.cartesian):j=te,N){var se=N[ne];G._fullData[se[0]]._module.basePlotModule.plot(G,se,j,ee)}},C(G,te,R)},o.transitionFromReact=function(G,X,Z,q){var W=G._fullLayout,te=W.transition,R={},N=[];return R.prepareFn=function(){var V=W._plots;for(var ee in R.redraw=!1,"some"===X.anim&&(R.redraw=!0),"some"===Z.anim&&(R.redraw=!0),V){var j=V[ee],J=j.xaxis,$=j.yaxis,re=q[J._name].range.slice(),ne=q[$._name].range.slice(),se=J.range.slice(),ie=$.range.slice();J.setScale(),$.setScale();var ue=null,le=null;J.r2l(re[0])===J.r2l(se[0])&&J.r2l(re[1])===J.r2l(se[1])||(ue={xr0:re,xr1:se}),$.r2l(ne[0])===$.r2l(ie[0])&&$.r2l(ne[1])===$.r2l(ie[1])||(le={yr0:ne,yr1:ie}),(ue||le)&&N.push(a.extendFlat({plotinfo:j},ue,le))}return Promise.resolve()},R.runFn=function(V){for(var ee,j,J,$=G._fullData,re=G._fullLayout._basePlotModules,ne=[],se=0;se<$.length;se++)ne.push(se);function ie(){if(G._fullLayout)for(var le=0;le<re.length;le++)re[le].transitionAxes&&re[le].transitionAxes(G,N,ee,V)}function ue(){if(G._fullLayout)for(var le=0;le<re.length;le++)re[le].plot(G,J,j,V)}N.length&&X.anim?"traces first"===te.ordering?(ee=a.extendFlat({},te,{duration:0}),J=ne,j=te,setTimeout(ie,te.duration),ue()):(ee=te,J=null,j=a.extendFlat({},te,{duration:0}),setTimeout(ue,ee.duration),ie()):N.length?(ee=te,ie()):X.anim&&(J=ne,j=te,ue())},C(G,te,R)},o.doCalcdata=function(G,X){var Z,q,W,te,R=s.list(G),N=G._fullData,V=G._fullLayout,ee=new Array(N.length),j=(G.calcdata||[]).slice();for(G.calcdata=ee,V._numBoxes=0,V._numViolins=0,V._violinScaleGroupStats={},G._hmpixcount=0,G._hmlumcount=0,V._piecolormap={},V._sunburstcolormap={},V._treemapcolormap={},V._iciclecolormap={},V._funnelareacolormap={},W=0;W<N.length;W++)Array.isArray(X)&&-1===X.indexOf(W)&&(ee[W]=j[W]);for(W=0;W<N.length;W++)(Z=N[W])._arrayAttrs=n.findArrayAttributes(Z),Z._extremes={};var J=V._subplots.polar||[];for(W=0;W<J.length;W++)R.push(V[J[W]].radialaxis,V[J[W]].angularaxis);for(var $ in V._colorAxes){var re=V[$];!1!==re.cauto&&(delete re.cmin,delete re.cmax)}var ne=!1;function se(le){if(q=(Z=N[le])._module,!0===Z.visible&&Z.transforms){if(q&&q.calc){var de=q.calc(G,Z);de[0]&&de[0].t&&de[0].t._scene&&delete de[0].t._scene.dirty}for(te=0;te<Z.transforms.length;te++){var ve=Z.transforms[te];(q=b[ve.type])&&q.calcTransform&&(Z._hasCalcTransform=!0,ne=!0,q.calcTransform(G,Z,ve))}}}function ie(le,de){if(!!(q=(Z=N[le])._module).isContainer===de){var ve=[];if(!0===Z.visible&&0!==Z._length){delete Z._indexToPoints;var _e=Z.transforms||[];for(te=_e.length-1;te>=0;te--)if(_e[te].enabled){Z._indexToPoints=_e[te]._indexToPoints;break}q&&q.calc&&(ve=q.calc(G,Z))}Array.isArray(ve)&&ve[0]||(ve=[{x:f,y:f}]),ve[0].t||(ve[0].t={}),ve[0].trace=Z,ee[le]=ve}}for(B(R,N,V),W=0;W<N.length;W++)ie(W,!0);for(W=0;W<N.length;W++)se(W);for(ne&&B(R,N,V),W=0;W<N.length;W++)ie(W,!0);for(W=0;W<N.length;W++)ie(W,!1);U(G);var ue=function(le,de){var ve,_e,be,Te,he,me=[];function Ae(it,ke,De){var Re=ke._id.charAt(0);if("histogram2dcontour"===it){var Ie=ke._counterAxes[0],Ke=s.getFromId(de,Ie),ut="x"===Re||"x"===Ie&&"category"===Ke.type,xt="y"===Re||"y"===Ie&&"category"===Ke.type;return function(gt,Pt){return 0===gt||0===Pt||ut&&gt===De[Pt].length-1||xt&&Pt===De.length-1?-1:("y"===Re?Pt:gt)-1}}return function(gt,Pt){return"y"===Re?Pt:gt}}var we={min:function(it){return a.aggNums(Math.min,null,it)},max:function(it){return a.aggNums(Math.max,null,it)},sum:function(it){return a.aggNums(function(ke,De){return ke+De},null,it)},total:function(it){return a.aggNums(function(ke,De){return ke+De},null,it)},mean:function(it){return a.mean(it)},median:function(it){return a.median(it)}};for(ve=0;ve<le.length;ve++){var Se=le[ve];if("category"===Se.type){var Pe=Se.categoryorder.match(z);if(Pe){var ze=Pe[1],He=Pe[2],tt=Se._id.charAt(0),Oe="x"===tt,Be=[];for(_e=0;_e<Se._categories.length;_e++)Be.push([Se._categories[_e],[]]);for(_e=0;_e<Se._traceIndices.length;_e++){var Je=Se._traceIndices[_e],Ye=de._fullData[Je];if(!0===Ye.visible){var nt=Ye.type;e.traceIs(Ye,"histogram")&&(delete Ye._xautoBinFinished,delete Ye._yautoBinFinished);var ft="splom"===nt,dt="scattergl"===nt,Rt=de.calcdata[Je];for(be=0;be<Rt.length;be++){var Et,at,rt=Rt[be];if(ft){var St=Ye._axesDim[Se._id];if(!Oe){var Xt=Ye._diag[St][0];Xt&&(Se=de._fullLayout[s.id2name(Xt)])}var lr=rt.trace.dimensions[St].values;for(Te=0;Te<lr.length;Te++)for(Et=Se._categoriesMap[lr[Te]],he=0;he<rt.trace.dimensions.length;he++)he!==St&&Be[Et][1].push(rt.trace.dimensions[he].values[Te])}else if(dt){for(Te=0;Te<rt.t.x.length;Te++)Oe?(Et=rt.t.x[Te],at=rt.t.y[Te]):(Et=rt.t.y[Te],at=rt.t.x[Te]),Be[Et][1].push(at);rt.t&&rt.t._scene&&delete rt.t._scene.dirty}else if(rt.hasOwnProperty("z")){var Ze=Ae(Ye.type,Se,at=rt.z);for(Te=0;Te<at.length;Te++)for(he=0;he<at[Te].length;he++)(Et=Ze(he,Te))+1&&Be[Et][1].push(at[Te][he])}else for(void 0===(Et=rt.p)&&(Et=rt[tt]),void 0===(at=rt.s)&&(at=rt.v),void 0===at&&(at=Oe?rt.y:rt.x),Array.isArray(at)||(at=void 0===at?[]:[at]),Te=0;Te<at.length;Te++)Be[Et][1].push(at[Te])}}}Se._categoriesValue=Be;var Ne=[];for(_e=0;_e<Be.length;_e++)Ne.push([Be[_e][0],we[ze](Be[_e][1])]);Ne.sort(function(it,ke){return it[1]-ke[1]}),Se._categoriesAggregatedValue=Ne,Se._initialCategories=Ne.map(function(it){return it[0]}),"descending"===He&&Se._initialCategories.reverse(),me=me.concat(Se.sortByInitialCategories())}}}return me}(R,G);if(ue.length){for(V._numBoxes=0,V._numViolins=0,W=0;W<ue.length;W++)ie(ue[W],!0);for(W=0;W<ue.length;W++)ie(ue[W],!1);U(G)}e.getComponentMethod("fx","calc")(G),e.getComponentMethod("errorbars","calc")(G)};var z=/(total|sum|min|max|mean|median) (ascending|descending)/;function B(G,X,Z){var q={};function W(V){V.clearCalc(),"multicategory"===V.type&&V.setupMultiCategory(X),q[V._id]=1}a.simpleMap(G,W);for(var te=Z._axisMatchGroups||[],R=0;R<te.length;R++)for(var N in te[R])q[N]||W(Z[s.id2name(N)])}function U(G){var X,Z,q,W=G._fullLayout,te=W._visibleModules,R={};for(Z=0;Z<te.length;Z++){var N=te[Z],V=N.crossTraceCalc;if(V){var ee=N.basePlotModule.name;R[ee]?a.pushUnique(R[ee],V):R[ee]=[V]}}for(q in R){var j=R[q],J=W._subplots[q];if(Array.isArray(J))for(X=0;X<J.length;X++){var $=J[X],re="cartesian"===q?W._plots[$]:W[$];for(Z=0;Z<j.length;Z++)j[Z](G,re,$)}else for(Z=0;Z<j.length;Z++)j[Z](G)}}o.rehover=function(G){G._fullLayout._rehover&&G._fullLayout._rehover()},o.redrag=function(G){G._fullLayout._redrag&&G._fullLayout._redrag()},o.generalUpdatePerTraceModule=function(G,X,Z,q){var W,te=X.traceHash,R={};for(W=0;W<Z.length;W++){var N=Z[W],V=N[0].trace;V.visible&&(R[V.type]=R[V.type]||[],R[V.type].push(N))}for(var ee in te)if(!R[ee]){var j=te[ee][0];j[0].trace.visible=!1,R[ee]=[j]}for(var J in R){var $=R[J];$[0][0].trace._module.plot(G,X,a.filterVisible($),q)}X.traceHash=R},o.plotBasePlot=function(G,X,Z,q,W){var te=e.getModule(G),R=h(X.calcdata,te)[0];te.plot(X,R,q,W)},o.cleanBasePlot=function(G,X,Z,q,W){var te=W._has&&W._has(G),R=Z._has&&Z._has(G);te&&!R&&W["_"+G+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(x,Q,K){"use strict";Q.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../lib/polygon").tester,u=p.findIndexOfMin,y=p.isAngleInsideSector,e=p.angleDelta,n=p.angleDist;function t(s,i,l,c){var h,m,d=c[0],o=c[1],b=r(Math.sin(i)-Math.sin(s)),g=r(Math.cos(i)-Math.cos(s)),w=Math.tan(l),_=r(1/w),A=b/g,T=o-A*d;return _?b&&g?m=w*(h=T/(w-A)):g?(h=o*_,m=o):(h=d,m=d*w):b&&g?(h=0,m=T):g?(h=0,m=o):h=m=NaN,[h,m]}function a(s,i,l,c){return p.isFullCircle([i,l])?function(h,m){var d,o=m.length,b=new Array(o+1);for(d=0;d<o;d++){var g=m[d];b[d]=[h*Math.cos(g),h*Math.sin(g)]}return b[d]=b[0].slice(),b}(s,c):function(h,m,d,o){var b,g,w=o.length,_=[];function A(B){return[h*Math.cos(B),h*Math.sin(B)]}function T(B,U,G){return t(B,U,G,A(B))}function E(B){return p.mod(B,w)}function k(B){return y(B,[m,d])}var O=u(o,function(B){return k(B)?n(B,m):1/0}),D=T(o[O],o[E(O-1)],m);for(_.push(D),b=O,g=0;g<w;b++,g++){var S=o[E(b)];if(!k(S))break;_.push(A(S))}var C=u(o,function(B){return k(B)?n(B,d):1/0}),z=T(o[C],o[E(C+1)],d);return _.push(z),_.push([0,0]),_.push(_[0].slice()),_}(s,i,l,c)}function r(s){return Math.abs(s)>1e-10?s:0}function f(s,i,l){i=i||0,l=l||0;for(var c=s.length,h=new Array(c),m=0;m<c;m++){var d=s[m];h[m]=[i+d[0],l-d[1]]}return h}Q.exports={isPtInsidePolygon:function(s,i,l,c,h){if(!y(i,c))return!1;var m,d;l[0]<l[1]?(m=l[0],d=l[1]):(m=l[1],d=l[0]);var o=v(a(m,c[0],c[1],h)),b=v(a(d,c[0],c[1],h)),g=[s*Math.cos(i),s*Math.sin(i)];return b.contains(g)&&!o.contains(g)},findPolygonOffset:function(s,i,l,c){for(var h=1/0,m=1/0,d=a(s,i,l,c),o=0;o<d.length;o++){var b=d[o];h=Math.min(h,b[0]),m=Math.min(m,-b[1])}return[h,m]},findEnclosingVertexAngles:function(s,i){var l=u(i,function(h){var m=e(h,s);return m>0?m:1/0}),c=p.mod(l+1,i.length);return[i[l],i[c]]},findIntersectionXY:t,findXYatLength:function(s,i,l,c){var h=-i*l,m=i*i+1,d=2*(i*h-l),b=Math.sqrt(d*d-4*m*(h*h+l*l-s*s)),g=(-d+b)/(2*m),w=(-d-b)/(2*m);return[[g,i*g+h+c],[w,i*w+h+c]]},clampTiny:r,pathPolygon:function(s,i,l,c,h,m){return"M"+f(a(s,i,l,c),h,m).join("L")},pathPolygonAnnulus:function(s,i,l,c,h,m,d){var o,b;s<i?(o=s,b=i):(o=i,b=s);var g=f(a(o,l,c,h),m,d);return"M"+f(a(b,l,c,h),m,d).reverse().join("L")+"M"+g.join("L")}}},{"../../lib":503,"../../lib/polygon":515}],622:[function(x,Q,K){"use strict";var p=x("../get_data").getSubplotCalcData,v=x("../../lib").counterRegex,u=x("./polar"),y=x("./constants"),e=y.attr,n=y.name,t=v(n),a={};a[e]={valType:"subplotid",dflt:n,editType:"calc"},Q.exports={attr:e,name:n,idRoot:n,idRegex:t,attrRegex:t,attributes:a,layoutAttributes:x("./layout_attributes"),supplyLayoutDefaults:x("./layout_defaults"),plot:function(r){for(var f=r._fullLayout,s=r.calcdata,i=f._subplots[n],l=0;l<i.length;l++){var c=i[l],h=p(s,n,c),m=f[c]._subplot;m||(m=u(r,c),f[c]._subplot=m),m.plot(h,f,r._promises)}},clean:function(r,f,s,i){for(var l=i._subplots[n]||[],c=i._has&&i._has("gl"),h=f._has&&f._has("gl"),m=c&&!h,d=0;d<l.length;d++){var o=l[d],b=i[o]._subplot;if(!f[o]&&b)for(var g in b.framework.remove(),b.layers["radial-axis-title"].remove(),b.clipPaths)b.clipPaths[g].remove();m&&b._scene&&(b._scene.destroy(),b._scene=null)}},toSVG:x("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(x,Q,K){"use strict";var p=x("../../components/color/attributes"),v=x("../cartesian/layout_attributes"),u=x("../domain").attributes,y=x("../../lib").extendFlat,e=x("../../plot_api/edit_types").overrideAll,n=e({color:v.color,showline:y({},v.showline,{dflt:!0}),linecolor:v.linecolor,linewidth:v.linewidth,showgrid:y({},v.showgrid,{dflt:!0}),gridcolor:v.gridcolor,gridwidth:v.gridwidth},"plot","from-root"),t=e({tickmode:v.tickmode,nticks:v.nticks,tick0:v.tick0,dtick:v.dtick,tickvals:v.tickvals,ticktext:v.ticktext,ticks:v.ticks,ticklen:v.ticklen,tickwidth:v.tickwidth,tickcolor:v.tickcolor,showticklabels:v.showticklabels,showtickprefix:v.showtickprefix,tickprefix:v.tickprefix,showticksuffix:v.showticksuffix,ticksuffix:v.ticksuffix,showexponent:v.showexponent,exponentformat:v.exponentformat,minexponent:v.minexponent,separatethousands:v.separatethousands,tickfont:v.tickfont,tickangle:v.tickangle,tickformat:v.tickformat,tickformatstops:v.tickformatstops,layer:v.layer},"plot","from-root"),a={visible:y({},v.visible,{dflt:!0}),type:y({},v.type,{values:["-","linear","log","date","category"]}),autotypenumbers:v.autotypenumbers,autorange:y({},v.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:y({},v.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:v.categoryorder,categoryarray:v.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:y({},v.title.text,{editType:"plot",dflt:""}),font:y({},v.title.font,{editType:"plot"}),editType:"plot"},hoverformat:v.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:v._deprecated.title,titlefont:v._deprecated.titlefont}};y(a,n,t);var r={visible:y({},v.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:v.autotypenumbers,categoryorder:v.categoryorder,categoryarray:v.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:v.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};y(r,n,t),Q.exports={domain:u({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:p.background},radialaxis:a,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/color"),u=x("../../plot_api/plot_template"),y=x("../subplot_defaults"),e=x("../get_data").getSubplotData,n=x("../cartesian/tick_value_defaults"),t=x("../cartesian/tick_mark_defaults"),a=x("../cartesian/tick_label_defaults"),r=x("../cartesian/prefix_suffix_defaults"),f=x("../cartesian/category_order_defaults"),s=x("../cartesian/line_grid_defaults"),i=x("../cartesian/axis_autotype"),l=x("./layout_attributes"),c=x("./set_convert"),h=x("./constants"),m=h.axisNames;function d(b,g,w,_){var A=w("bgcolor");_.bgColor=v.combine(A,_.paper_bgcolor);var T=w("sector");w("hole");var E,k=e(_.fullData,h.name,_.id),O=_.layoutOut;function D(ee,j){return w(E+"."+ee,j)}for(var S=0;S<m.length;S++){p.isPlainObject(b[E=m[S]])||(b[E]={});var C=b[E],z=u.newContainer(g,E);z._id=z._name=E,z._attr=_.id+"."+E,z._traceIndices=k.map(function(ee){return ee._expandedIndex});var B=h.axisName2dataArray[E],U=o(C,z,D,k,B,_);f(C,z,D,{axData:k,dataAttr:B});var G=D("visible");switch(c(z,g,O),D("uirevision",g.uirevision),z._m=1,E){case"radialaxis":var X=D("autorange",!z.isValidRange(C.range));C.autorange=X,!X||"linear"!==U&&"-"!==U||D("rangemode"),"reversed"===X&&(z._m=-1),D("range"),z.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===U){p.log("Polar plots do not support date angular axes yet.");for(var Z=0;Z<k.length;Z++)k[Z].visible=!1;U=C.type=z.type="linear"}D("linear"===U?"thetaunit":"period");var q=D("direction");D("rotation",{counterclockwise:0,clockwise:90}[q])}if(r(C,z,D,z.type,{tickSuffixDflt:"degrees"===z.thetaunit?"\xb0":void 0}),G){var W,te,R,N,V=_.font||{};te=(W=D("color"))===C.color?W:V.color,R=V.size,N=V.family,n(C,z,D,z.type),a(C,z,D,z.type,{font:{color:te,size:R,family:N}}),t(C,z,D,{outerTicks:!0}),s(C,z,D,{dfltColor:W,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[E]}),D("layer"),"radialaxis"===E&&(D("side"),D("angle",T[0]),D("title.text"),p.coerceFont(D,"title.font",{color:te,size:p.bigFont(R),family:N}))}"category"!==U&&D("hoverformat"),z._input=C}"category"===g.angularaxis.type&&w("gridshape")}function o(b,g,w,_,A,T){var E=w("autotypenumbers",T.autotypenumbersDflt);if("-"===w("type")){for(var k,O=0;O<_.length;O++)if(_[O].visible){k=_[O];break}k&&k[A]&&(g.type=i(k[A],"gregorian",{noMultiCategory:!0,autotypenumbers:E})),"-"===g.type?g.type="linear":b.type=g.type}return g.type}Q.exports=function(b,g,w){y(b,g,w,{type:h.name,attributes:l,handleDefaults:d,font:g.font,autotypenumbersDflt:g.autotypenumbers,paper_bgcolor:g.paper_bgcolor,fullData:w,layoutOut:g})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("tinycolor2"),u=x("../../registry"),y=x("../../lib"),e=y.strRotate,n=y.strTranslate,t=x("../../components/color"),a=x("../../components/drawing"),r=x("../plots"),f=x("../../plots/cartesian/axes"),s=x("../cartesian/set_convert"),i=x("./set_convert"),l=x("../cartesian/autorange").doAutoRange,c=x("../cartesian/dragbox"),h=x("../../components/dragelement"),m=x("../../components/fx"),d=x("../../components/titles"),o=x("../cartesian/select").prepSelect,b=x("../cartesian/select").selectOnClick,g=x("../cartesian/select").clearSelect,w=x("../../lib/setcursor"),_=x("../../lib/clear_gl_canvases"),A=x("../../plot_api/subroutines").redrawReglTraces,T=x("../../constants/alignment").MID_SHIFT,E=x("./constants"),k=x("./helpers"),O=x("../smith/helpers"),D=O.smith,S=O.reactanceArc,C=O.resistanceArc,z=O.smithTransform,B=y._,U=y.mod,G=y.deg2rad,X=y.rad2deg;function Z(N,V,ee){this.isSmith=ee||!1,this.id=V,this.gd=N,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var j=N._fullLayout;this.clipIds.forTraces="clip"+j._uid+V+"-for-traces",this.clipPaths.forTraces=j._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=j["_"+(ee?"smith":"polar")+"layer"].append("g").attr("class",V),this.getHole=function($){return this.isSmith?0:$.hole},this.getSector=function($){return this.isSmith?[0,360]:$.sector},this.getRadial=function($){return this.isSmith?$.realaxis:$.radialaxis},this.getAngular=function($){return this.isSmith?$.imaginaryaxis:$.angularaxis},ee||(this.radialTickLayout=null,this.angularTickLayout=null)}var q=Z.prototype;function W(N){var V=N.ticks+String(N.ticklen)+String(N.showticklabels);return"side"in N&&(V+=N.side),V}function te(N,V){return V[y.findIndexOfMin(V,function(ee){return y.angleDist(N,ee)})]}function R(N,V,ee){return V?(N.attr("display",null),N.attr(ee)):N&&N.attr("display","none"),N}Q.exports=function(N,V,ee){return new Z(N,V,ee)},q.plot=function(N,V){for(var ee=V[this.id],j=!1,J=0;J<N.length;J++)if(!1===N[J][0].trace.cliponaxis){j=!0;break}this._hasClipOnAxisFalse=j,this.updateLayers(V,ee),this.updateLayout(V,ee),r.generalUpdatePerTraceModule(this.gd,this,N,ee),this.updateFx(V,ee),this.isSmith&&(delete ee.realaxis.range,delete ee.imaginaryaxis.range)},q.updateLayers=function(N,V){var ee=this.isSmith,j=this.layers,J=this.getRadial(V),$=this.getAngular(V),re=E.layerNames,ne=re.indexOf("frontplot"),se=re.slice(0,ne),ie="below traces"===$.layer,ue="below traces"===J.layer;ie&&se.push("angular-line"),ue&&se.push("radial-line"),ie&&se.push("angular-axis"),ue&&se.push("radial-axis"),se.push("frontplot"),ie||se.push("angular-line"),ue||se.push("radial-line"),ie||se.push("angular-axis"),ue||se.push("radial-axis");var le=(ee?"smith":"polar")+"sublayer",de=this.framework.selectAll("."+le).data(se,String);de.enter().append("g").attr("class",function(ve){return le+" "+ve}).each(function(ve){var _e=j[ve]=p.select(this);switch(ve){case"frontplot":ee||_e.append("g").classed("barlayer",!0),_e.append("g").classed("scatterlayer",!0);break;case"backplot":_e.append("g").classed("maplayer",!0);break;case"plotbg":j.bg=_e.append("path");break;case"radial-grid":case"angular-grid":_e.style("fill","none");break;case"radial-line":_e.append("line").style("fill","none");break;case"angular-line":_e.append("path").style("fill","none")}}),de.order()},q.updateLayout=function(N,V){var ee=this.layers,j=N._size,J=this.getRadial(V),$=this.getAngular(V),re=V.domain.x,ne=V.domain.y;this.xOffset=j.l+j.w*re[0],this.yOffset=j.t+j.h*(1-ne[1]);var se=this.xLength=j.w*(re[1]-re[0]),ie=this.yLength=j.h*(ne[1]-ne[0]),ue=this.getSector(V);this.sectorInRad=ue.map(G);var le,de,ve,_e,be,dt,rt,St,Xt,lr,Ue,Ze,Ne,it,ke,Te=this.sectorBBox=(Xt=(dt=ue)[1]-(St=dt[0]),Ue=(lr=U(St,360))+Xt,Ze=Math.cos(G(lr)),Ne=Math.sin(G(lr)),it=Math.cos(G(Ue)),ke=Math.sin(G(Ue)),rt=lr<=90&&Ue>=90||lr>90&&Ue>=450?1:Ne<=0&&ke<=0?0:Math.max(Ne,ke),[lr<=180&&Ue>=180||lr>180&&Ue>=540?-1:Ze>=0&&it>=0?0:Math.min(Ze,it),lr<=270&&Ue>=270||lr>270&&Ue>=630?-1:Ne>=0&&ke>=0?0:Math.min(Ne,ke),Ue>=360?1:Ze<=0&&it<=0?0:Math.max(Ze,it),rt]),he=Te[2]-Te[0],Ae=ie/se,we=Math.abs((Te[3]-Te[1])/he);Ae>we?(le=se,be=(ie-(de=se*we))/j.h/2,ve=[re[0],re[1]],_e=[ne[0]+be,ne[1]-be]):(de=ie,be=(se-(le=ie/we))/j.w/2,ve=[re[0]+be,re[1]-be],_e=[ne[0],ne[1]]),this.xLength2=le,this.yLength2=de,this.xDomain2=ve,this.yDomain2=_e;var Se,Pe=this.xOffset2=j.l+j.w*ve[0],ze=this.yOffset2=j.t+j.h*(1-_e[1]),He=this.radius=le/he,tt=this.innerRadius=this.getHole(V)*He,Oe=this.cx=Pe-He*Te[0],Be=this.cy=ze+He*Te[3],Je=this.cxx=Oe-Pe,Ye=this.cyy=Be-ze,nt=J.side;"counterclockwise"===nt?(Se=nt,nt="top"):"clockwise"===nt&&(Se=nt,nt="bottom"),this.radialAxis=this.mockAxis(N,V,J,{_id:"x",side:nt,_trueSide:Se,domain:[tt/j.w,He/j.w]}),this.angularAxis=this.mockAxis(N,V,$,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(N,V),this.updateAngularAxis(N,V),this.updateRadialAxis(N,V),this.updateRadialAxisTitle(N,V),this.xaxis=this.mockCartesianAxis(N,V,{_id:"x",domain:ve}),this.yaxis=this.mockCartesianAxis(N,V,{_id:"y",domain:_e});var ft=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",ft).attr("transform",n(Je,Ye)),ee.frontplot.attr("transform",n(Pe,ze)).call(a.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),ee.bg.attr("d",ft).attr("transform",n(Oe,Be)).call(t.fill,V.bgcolor)},q.mockAxis=function(N,V,ee,j){var J=y.extendFlat({},ee,j);return i(J,V,N),J},q.mockCartesianAxis=function(N,V,ee){var j=this,J=j.isSmith,$=ee._id,re=y.extendFlat({type:"linear"},ee);s(re,N);var ne={x:[0,2],y:[1,3]};return re.setRange=function(){var se=j.sectorBBox,ie=ne[$],ue=j.radialAxis._rl,le=(ue[1]-ue[0])/(1-j.getHole(V));re.range=[se[ie[0]]*le,se[ie[1]]*le]},re.isPtWithinRange="x"!==$||J?function(){return!0}:function(se){return j.isPtInside(se)},re.setRange(),re.setScale(),re},q.doAutoRange=function(N,V){var ee=this.gd,j=this.radialAxis,J=this.getRadial(V);l(ee,j);var $=j.range;J.range=$.slice(),J._input.range=$.slice(),j._rl=[j.r2l($[0],null,"gregorian"),j.r2l($[1],null,"gregorian")]},q.updateRadialAxis=function(N,V){var ee=this,j=ee.gd,J=ee.layers,$=ee.radius,re=ee.innerRadius,ne=ee.cx,se=ee.cy,ie=ee.getRadial(V),ue=U(ee.getSector(V)[0],360),le=ee.radialAxis,de=re<$,ve=ee.isSmith;ve||(ee.fillViewInitialKey("radialaxis.angle",ie.angle),ee.fillViewInitialKey("radialaxis.range",le.range.slice()),le.setGeometry()),"auto"===le.tickangle&&ue>90&&ue<=270&&(le.tickangle=180);var _e=ve?function(He){var tt=z(ee,D([He.x,0]));return n(tt[0]-ne,tt[1]-se)}:function(He){return n(le.l2p(He.x)+re,0)},be=ve?function(He){return C(ee,He.x,-1/0,1/0)}:function(He){return ee.pathArc(le.r2p(He.x)+re)},Te=W(ie);if(ee.radialTickLayout!==Te&&(J["radial-axis"].selectAll(".xtick").remove(),ee.radialTickLayout=Te),de){le.setScale();var he=0,me=ve?(le.tickvals||[]).filter(function(He){return He>=0}).map(function(He){return f.tickText(le,He,!0,!1)}):f.calcTicks(le),Ae=ve?me:f.clipEnds(le,me),we=f.getTickSigns(le)[2];ve&&(("top"===le.ticks&&"bottom"===le.side||"bottom"===le.ticks&&"top"===le.side)&&(we=-we),"top"===le.ticks&&"top"===le.side&&(he=-le.ticklen),"bottom"===le.ticks&&"bottom"===le.side&&(he=le.ticklen)),f.drawTicks(j,le,{vals:me,layer:J["radial-axis"],path:f.makeTickPath(le,0,we),transFn:_e,crisp:!1}),f.drawGrid(j,le,{vals:Ae,layer:J["radial-grid"],path:be,transFn:y.noop,crisp:!1}),f.drawLabels(j,le,{vals:me,layer:J["radial-axis"],transFn:_e,labelFns:f.makeLabelFns(le,he)})}var Se=ee.radialAxisAngle=ee.vangles?X(te(G(ie.angle),ee.vangles)):ie.angle,Pe=n(ne,se),ze=Pe+e(-Se);R(J["radial-axis"],de&&(ie.showticklabels||ie.ticks),{transform:ze}),R(J["radial-grid"],de&&ie.showgrid,{transform:ve?"":Pe}),R(J["radial-line"].select("line"),de&&ie.showline,{x1:ve?-$:re,y1:0,x2:$,y2:0,transform:ze}).attr("stroke-width",ie.linewidth).call(t.stroke,ie.linecolor)},q.updateRadialAxisTitle=function(N,V,ee){if(!this.isSmith){var j=this.gd,J=this.radius,$=this.cx,re=this.cy,ne=this.getRadial(V),se=this.id+"title",ie=0;if(ne.title){var ue=a.bBox(this.layers["radial-axis"].node()).height,le=ne.title.font.size,de=ne.side;ie="top"===de?le:"counterclockwise"===de?-(ue+.4*le):ue+.8*le}var ve=void 0!==ee?ee:this.radialAxisAngle,_e=G(ve),be=Math.cos(_e),Te=Math.sin(_e),he=$+J/2*be+ie*Te,me=re-J/2*Te+ie*be;this.layers["radial-axis-title"]=d.draw(j,se,{propContainer:ne,propName:this.id+".radialaxis.title",placeholder:B(j,"Click to enter radial axis title"),attributes:{x:he,y:me,"text-anchor":"middle"},transform:{rotate:-ve}})}},q.updateAngularAxis=function(N,V){var ee=this,j=ee.gd,J=ee.layers,$=ee.radius,re=ee.innerRadius,ne=ee.cx,se=ee.cy,ie=ee.getAngular(V),ue=ee.angularAxis,le=ee.isSmith;le||(ee.fillViewInitialKey("angularaxis.rotation",ie.rotation),ue.setGeometry(),ue.setScale());var de=le?function(He){var tt=z(ee,D([0,He.x]));return Math.atan2(tt[0]-ne,tt[1]-se)-Math.PI/2}:function(He){return ue.t2g(He.x)};"linear"===ue.type&&"radians"===ue.thetaunit&&(ue.tick0=X(ue.tick0),ue.dtick=X(ue.dtick));var ve=function(He){return n(ne+$*Math.cos(He),se-$*Math.sin(He))},_e=le?function(He){var tt=z(ee,D([0,He.x]));return n(tt[0],tt[1])}:function(He){return ve(de(He))},be=le?function(He){var tt=z(ee,D([0,He.x])),Oe=Math.atan2(tt[0]-ne,tt[1]-se)-Math.PI/2;return n(tt[0],tt[1])+e(-X(Oe))}:function(He){var tt=de(He);return ve(tt)+e(-X(tt))},Te=le?function(He){return S(ee,He.x,0,1/0)}:function(He){var tt=de(He),Oe=Math.cos(tt),Be=Math.sin(tt);return"M"+[ne+re*Oe,se-re*Be]+"L"+[ne+$*Oe,se-$*Be]},he=f.makeLabelFns(ue,0).labelStandoff,me={xFn:function(He){var tt=de(He);return Math.cos(tt)*he},yFn:function(He){var tt=de(He),Oe=Math.sin(tt)>0?.2:1;return-Math.sin(tt)*(he+He.fontSize*Oe)+Math.abs(Math.cos(tt))*(He.fontSize*T)},anchorFn:function(He){var tt=de(He),Oe=Math.cos(tt);return Math.abs(Oe)<.1?"middle":Oe>0?"start":"end"},heightFn:function(He,tt,Oe){var Be=de(He);return-.5*(1+Math.sin(Be))*Oe}},Ae=W(ie);ee.angularTickLayout!==Ae&&(J["angular-axis"].selectAll("."+ue._id+"tick").remove(),ee.angularTickLayout=Ae);var we,Se=le?[1/0].concat(ue.tickvals||[]).map(function(He){return f.tickText(ue,He,!0,!1)}):f.calcTicks(ue);if(le&&(Se[0].text="\u221e",Se[0].fontSize*=1.75),"linear"===V.gridshape?(we=Se.map(de),y.angleDelta(we[0],we[1])<0&&(we=we.slice().reverse())):we=null,ee.vangles=we,"category"===ue.type&&(Se=Se.filter(function(He){return y.isAngleInsideSector(de(He),ee.sectorInRad)})),ue.visible){var Pe="inside"===ue.ticks?-1:1;f.drawTicks(j,ue,{vals:Se,layer:J["angular-axis"],path:"M"+Pe*((ue.linewidth||1)/2)+",0h"+Pe*ue.ticklen,transFn:be,crisp:!1}),f.drawGrid(j,ue,{vals:Se,layer:J["angular-grid"],path:Te,transFn:y.noop,crisp:!1}),f.drawLabels(j,ue,{vals:Se,layer:J["angular-axis"],repositionOnUpdate:!0,transFn:_e,labelFns:me})}R(J["angular-line"].select("path"),ie.showline,{d:ee.pathSubplot(),transform:n(ne,se)}).attr("stroke-width",ie.linewidth).call(t.stroke,ie.linecolor)},q.updateFx=function(N,V){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(N),this.updateRadialDrag(N,V,0),this.updateRadialDrag(N,V,1)),this.updateHoverAndMainDrag(N))},q.updateHoverAndMainDrag=function(N){var V,ee,j=this,J=j.isSmith,$=j.gd,ne=N._zoomlayer,se=E.MINZOOM,ie=E.OFFEDGE,ue=j.radius,le=j.innerRadius,de=j.cx,ve=j.cy,_e=j.cxx,be=j.cyy,Te=j.sectorInRad,he=j.vangles,me=j.radialAxis,Ae=k.clampTiny,we=k.findXYatLength,Se=k.findEnclosingVertexAngles,Pe=E.cornerHalfWidth,ze=E.cornerLen/2,He=c.makeDragger(j.layers,"path","maindrag","crosshair");p.select(He).attr("d",j.pathSubplot()).attr("transform",n(de,ve)),He.onmousemove=function(ut){m.hover($,ut,j.id),$._fullLayout._lasthover=He,$._fullLayout._hoversubplot=j.id},He.onmouseout=function(ut){$._dragging||h.unhover($,ut)};var tt,Oe,Be,Je,Ye,nt,ft,dt,Rt,Et={element:He,gd:$,subplot:j.id,plotinfo:{id:j.id,xaxis:j.xaxis,yaxis:j.yaxis},xaxes:[j.xaxis],yaxes:[j.yaxis]};function at(ut,xt){return Math.sqrt(ut*ut+xt*xt)}function rt(ut,xt){return at(ut-_e,xt-be)}function St(ut,xt){return Math.atan2(be-xt,ut-_e)}function Xt(ut,xt){return[ut*Math.cos(xt),ut*Math.sin(-xt)]}function lr(ut,xt){if(0===ut)return j.pathSector(2*Pe);var gt=ze/ut,Pt=xt-gt,ct=xt+gt,zt=Math.max(0,Math.min(ut,ue)),Ft=zt-Pe,Qe=zt+Pe;return"M"+Xt(Ft,Pt)+"A"+[Ft,Ft]+" 0,0,0 "+Xt(Ft,ct)+"L"+Xt(Qe,ct)+"A"+[Qe,Qe]+" 0,0,1 "+Xt(Qe,Pt)+"Z"}function Ue(ut,xt,gt){if(0===ut)return j.pathSector(2*Pe);var Pt,ct,zt=Xt(ut,xt),Ft=Xt(ut,gt),Qe=Ae((zt[0]+Ft[0])/2),yt=Ae((zt[1]+Ft[1])/2);if(Qe&&yt){var Nt=yt/Qe,Yt=-1/Nt,rr=we(Pe,Nt,Qe,yt);Pt=we(ze,Yt,rr[0][0],rr[0][1]),ct=we(ze,Yt,rr[1][0],rr[1][1])}else{var Fe,ht;yt?(Fe=ze,ht=Pe):(Fe=Pe,ht=ze),Pt=[[Qe-Fe,yt-ht],[Qe+Fe,yt-ht]],ct=[[Qe-Fe,yt+ht],[Qe+Fe,yt+ht]]}return"M"+Pt.join("L")+"L"+ct.reverse().join("L")+"Z"}function Ze(ut,xt){return xt=Math.max(Math.min(xt,ue),le),ut<ie?ut=0:ue-ut<ie?ut=ue:xt<ie?xt=0:ue-xt<ie&&(xt=ue),Math.abs(xt-ut)>se?(ut<xt?(Be=ut,Je=xt):(Be=xt,Je=ut),!0):(Be=null,Je=null,!1)}function Ne(ut,xt){xt=xt||"M0,0Z",dt.attr("d",ut=ut||Ye),Rt.attr("d",xt),c.transitionZoombox(dt,Rt,nt,ft),nt=!0;var gt={};Ie(gt),$.emit("plotly_relayouting",gt)}function it(ut,xt){var gt,Pt,ct=tt+(ut*=V),zt=Oe+(xt*=ee),Ft=rt(tt,Oe),Qe=Math.min(rt(ct,zt),ue),yt=St(tt,Oe);Ze(Ft,Qe)&&(gt=Ye+j.pathSector(Je),Be&&(gt+=j.pathSector(Be)),Pt=lr(Be,yt)+lr(Je,yt)),Ne(gt,Pt)}function ke(ut,xt,gt,Pt){var ct=k.findIntersectionXY(gt,Pt,gt,[ut-_e,be-xt]);return at(ct[0],ct[1])}function De(ut,xt){var gt,Pt,ct=tt+ut,zt=Oe+xt,Ft=St(tt,Oe),Qe=St(ct,zt),yt=Se(Ft,he),Nt=Se(Qe,he);Ze(ke(tt,Oe,yt[0],yt[1]),Math.min(ke(ct,zt,Nt[0],Nt[1]),ue))&&(gt=Ye+j.pathSector(Je),Be&&(gt+=j.pathSector(Be)),Pt=[Ue(Be,yt[0],yt[1]),Ue(Je,yt[0],yt[1])].join(" ")),Ne(gt,Pt)}function Re(){if(c.removeZoombox($),null!==Be&&null!==Je){var ut={};Ie(ut),c.showDoubleClickNotifier($),u.call("_guiRelayout",$,ut)}}function Ie(ut){var xt=me._rl,gt=(xt[1]-xt[0])/(1-le/ue)/ue;ut[j.id+".radialaxis.range"]=[xt[0]+(Be-le)*gt,xt[0]+(Je-le)*gt]}function Ke(ut,xt){var gt=$._fullLayout.clickmode;if(c.removeZoombox($),2===ut){var Pt={};for(var ct in j.viewInitial)Pt[j.id+"."+ct]=j.viewInitial[ct];$.emit("plotly_doubleclick",null),u.call("_guiRelayout",$,Pt)}gt.indexOf("select")>-1&&1===ut&&b(xt,$,[j.xaxis],[j.yaxis],j.id,Et),gt.indexOf("event")>-1&&m.click($,xt,j.id)}Et.prepFn=function(ut,xt,gt){var Pt=$._fullLayout.dragmode,ct=He.getBoundingClientRect();$._fullLayout._calcInverseTransform($),V=$._fullLayout._invScaleX,ee=$._fullLayout._invScaleY;var Ft=y.apply3DTransform($._fullLayout._invTransform)(xt-ct.left,gt-ct.top);if(tt=Ft[0],Oe=Ft[1],he){var Qe=k.findPolygonOffset(ue,Te[0],Te[1],he);tt+=_e+Qe[0],Oe+=be+Qe[1]}switch(Pt){case"zoom":Et.clickFn=Ke,J||(Et.moveFn=he?De:it,Et.doneFn=Re,Be=null,Je=null,Ye=j.pathSubplot(),nt=!1,ft=v($._fullLayout[j.id].bgcolor).getLuminance(),(dt=c.makeZoombox(ne,ft,de,ve,Ye)).attr("fill-rule","evenodd"),Rt=c.makeCorners(ne,de,ve),g($));break;case"select":case"lasso":o(ut,xt,gt,Et,Pt)}},h.init(Et)},q.updateRadialDrag=function(N,V,ee){var j=this,J=j.gd,$=j.layers,re=j.radius,ne=j.innerRadius,se=j.cx,ie=j.cy,ue=j.radialAxis,le=E.radialDragBoxSize,de=le/2;if(ue.visible){var ve,_e,be,Te=G(j.radialAxisAngle),he=ue._rl,me=he[0],Ae=he[1],we=he[ee],Se=.75*(he[1]-he[0])/(1-j.getHole(V))/re;ee?(ve=se+(re+de)*Math.cos(Te),_e=ie-(re+de)*Math.sin(Te),be="radialdrag"):(ve=se+(ne-de)*Math.cos(Te),_e=ie-(ne-de)*Math.sin(Te),be="radialdrag-inner");var Pe,ze,He,tt=c.makeRectDragger($,be,"crosshair",-de,-de,le,le),Oe={element:tt,gd:J};R(p.select(tt),ue.visible&&ne<re,{transform:n(ve,_e)}),Oe.prepFn=function(){Pe=null,ze=null,He=null,Oe.moveFn=Be,Oe.doneFn=Je,g(J)},Oe.clampFn=function(ft,dt){return Math.sqrt(ft*ft+dt*dt)<E.MINDRAG&&(ft=0,dt=0),[ft,dt]},h.init(Oe)}function Be(ft,dt){if(Pe)Pe(ft,dt);else{var Rt=[ft,-dt],Et=[Math.cos(Te),Math.sin(Te)],at=Math.abs(y.dot(Rt,Et)/Math.sqrt(y.dot(Rt,Rt)));isNaN(at)||(Pe=at<.5?Ye:nt)}var St,rt={};St=rt,null!==ze?St[j.id+".radialaxis.angle"]=ze:null!==He&&(St[j.id+".radialaxis.range["+ee+"]"]=He),J.emit("plotly_relayouting",rt)}function Je(){null!==ze?u.call("_guiRelayout",J,j.id+".radialaxis.angle",ze):null!==He&&u.call("_guiRelayout",J,j.id+".radialaxis.range["+ee+"]",He)}function Ye(ft,dt){if(0!==ee){ze=Math.atan2(ie-(_e+dt),ve+ft-se),j.vangles&&(ze=te(ze,j.vangles)),ze=X(ze);var at=n(se,ie)+e(-ze);$["radial-axis"].attr("transform",at),$["radial-line"].select("line").attr("transform",at);var rt=j.gd._fullLayout;j.updateRadialAxisTitle(rt,rt[j.id],ze)}}function nt(ft,dt){var Rt=y.dot([ft,-dt],[Math.cos(Te),Math.sin(Te)]);if(He=we-Se*Rt,Se>0==(ee?He>me:He<Ae)){var Et=J._fullLayout,at=Et[j.id];ue.range[ee]=He,ue._rl[ee]=He,j.updateRadialAxis(Et,at),j.xaxis.setRange(),j.xaxis.setScale(),j.yaxis.setRange(),j.yaxis.setScale();var rt=!1;for(var St in j.traceHash){var Xt=j.traceHash[St],lr=y.filterVisible(Xt);Xt[0][0].trace._module.plot(J,j,lr,at),u.traceIs(St,"gl")&&lr.length&&(rt=!0)}rt&&(_(J),A(J))}else He=null}},q.updateAngularDrag=function(N){var V=this,ee=V.gd,j=V.layers,J=V.radius,$=V.angularAxis,re=V.cx,ne=V.cy,se=V.cxx,ie=V.cyy,ue=E.angularDragBoxSize,le=c.makeDragger(j,"path","angulardrag","move"),de={element:le,gd:ee};function ve(Oe,Be){return Math.atan2(ie+ue-Be,Oe-se-ue)}p.select(le).attr("d",V.pathAnnulus(J,J+ue)).attr("transform",n(re,ne)).call(w,"move");var _e,be,Te,he,me,Ae,we=j.frontplot.select(".scatterlayer").selectAll(".trace"),Se=we.selectAll(".point"),Pe=we.selectAll(".textpoint");function ze(Oe,Be){var Je=V.gd._fullLayout,Ye=Je[V.id],nt=ve(_e+Oe*N._invScaleX,be+Be*N._invScaleY),ft=X(nt-Ae);if(he=Te+ft,j.frontplot.attr("transform",n(V.xOffset2,V.yOffset2)+e([-ft,se,ie])),V.vangles){me=V.radialAxisAngle+ft;var dt=n(re,ne)+e(-ft),Rt=n(re,ne)+e(-me);j.bg.attr("transform",dt),j["radial-grid"].attr("transform",dt),j["radial-axis"].attr("transform",Rt),j["radial-line"].select("line").attr("transform",Rt),V.updateRadialAxisTitle(Je,Ye,me)}else V.clipPaths.forTraces.select("path").attr("transform",n(se,ie)+e(ft));Se.each(function(){var lr=p.select(this),Ue=a.getTranslate(lr);lr.attr("transform",n(Ue.x,Ue.y)+e([ft]))}),Pe.each(function(){var lr=p.select(this),Ue=lr.select("text"),Ze=a.getTranslate(lr);lr.attr("transform",e([ft,Ue.attr("x"),Ue.attr("y")])+n(Ze.x,Ze.y))}),$.rotation=y.modHalf(he,360),V.updateAngularAxis(Je,Ye),V._hasClipOnAxisFalse&&!y.isFullCircle(V.sectorInRad)&&we.call(a.hideOutsideRangePoints,V);var Et=!1;for(var at in V.traceHash)if(u.traceIs(at,"gl")){var rt=V.traceHash[at],St=y.filterVisible(rt);rt[0][0].trace._module.plot(ee,V,St,Ye),St.length&&(Et=!0)}Et&&(_(ee),A(ee));var Xt={};He(Xt),ee.emit("plotly_relayouting",Xt)}function He(Oe){Oe[V.id+".angularaxis.rotation"]=he,V.vangles&&(Oe[V.id+".radialaxis.angle"]=me)}function tt(){Pe.select("text").attr("transform",null);var Oe={};He(Oe),u.call("_guiRelayout",ee,Oe)}de.prepFn=function(Oe,Be,Je){Te=N[V.id].angularaxis.rotation;var nt=le.getBoundingClientRect();_e=Be-nt.left,be=Je-nt.top,ee._fullLayout._calcInverseTransform(ee);var ft=y.apply3DTransform(N._invTransform)(_e,be);Ae=ve(_e=ft[0],be=ft[1]),de.moveFn=ze,de.doneFn=tt,g(ee)},V.vangles&&!y.isFullCircle(V.sectorInRad)&&(de.prepFn=y.noop,w(p.select(le),null)),h.init(de)},q.isPtInside=function(N){if(this.isSmith)return!0;var V=this.sectorInRad,ee=this.vangles,j=this.angularAxis.c2g(N.theta),J=this.radialAxis,$=J.c2l(N.r);return(ee?k.isPtInsidePolygon:y.isPtInsideSector)($,j,J._rl,V,ee)},q.pathArc=function(N){var V=this.sectorInRad,ee=this.vangles;return(ee?k.pathPolygon:y.pathArc)(N,V[0],V[1],ee)},q.pathSector=function(N){var V=this.sectorInRad,ee=this.vangles;return(ee?k.pathPolygon:y.pathSector)(N,V[0],V[1],ee)},q.pathAnnulus=function(N,V){var ee=this.sectorInRad,j=this.vangles;return(j?k.pathPolygonAnnulus:y.pathAnnulus)(N,V,ee[0],ee[1],j)},q.pathSubplot=function(){var N=this.innerRadius,V=this.radius;return N?this.pathAnnulus(N,V):this.pathSector(V)},q.fillViewInitialKey=function(N,V){N in this.viewInitial||(this.viewInitial[N]=V)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../cartesian/set_convert"),u=p.deg2rad,y=p.rad2deg;Q.exports=function(e,n,t){switch(v(e,t),e._id){case"x":case"radialaxis":f=n._subplot,(a=e).setGeometry=function(){var s=a._rl[0],i=a._rl[1],l=f.innerRadius,c=(f.radius-l)/(i-s),h=l/c,m=s>i?function(d){return d<=0}:function(d){return d>=0};a.c2g=function(d){var o=a.c2l(d)-s;return(m(o)?o:0)+h},a.g2c=function(d){return a.l2c(d+s-h)},a.g2p=function(d){return d*c},a.c2p=function(d){return a.g2p(a.c2g(d))}};break;case"angularaxis":!function(a,r){var f=a.type;if("linear"===f){var s=a.d2c,i=a.c2d;a.d2c=function(l,c){return h=s(l),"degrees"===c?u(h):h;var h},a.c2d=function(l,c){return i((h=l,"degrees"===c?y(h):h));var h}}a.makeCalcdata=function(l,c){var h,m,d=l[c],o=l._length,b=function(T){return a.d2c(T,l.thetaunit)};if(d){if(p.isTypedArray(d)&&"linear"===f){if(o===d.length)return d;if(d.subarray)return d.subarray(0,o)}for(h=new Array(o),m=0;m<o;m++)h[m]=b(d[m])}else{var g=c+"0",w="d"+c,_=g in l?b(l[g]):0,A=l[w]?b(l[w]):(a.period||2*Math.PI)/o;for(h=new Array(o),m=0;m<o;m++)h[m]=_+m*A}return h},a.setGeometry=function(){var l,c,h,m,d=r.sector,o=d.map(u),b={clockwise:-1,counterclockwise:1}[a.direction],g=u(a.rotation),w=function(E){return b*E+g},_=function(E){return(E-g)/b};switch(f){case"linear":c=l=p.identity,m=u,h=y,a.range=p.isFullCircle(o)?[d[0],d[0]+360]:o.map(_).map(y);break;case"category":var A=a._categories.length,T=a.period?Math.max(a.period,A):A;0===T&&(T=1),c=m=function(E){return 2*E*Math.PI/T},l=h=function(E){return E*T/Math.PI/2},a.range=[0,T]}a.c2g=function(E){return w(c(E))},a.g2c=function(E){return l(_(E))},a.t2g=function(E){return w(m(E))},a.g2t=function(E){return h(_(E))}}}(e,n)}var a,f}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(x,Q,K){"use strict";Q.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(x,Q,K){"use strict";function p(e){return e<0?-1:e>0?1:0}function v(e){var n=e[0],t=e[1];if(!isFinite(n)||!isFinite(t))return[1,0];var a=(n+1)*(n+1)+t*t;return[(n*n+t*t-1)/a,2*t/a]}function u(e,n){return[n[0]*e.radius+e.cx,-n[1]*e.radius+e.cy]}function y(e,n){return n*e.radius}Q.exports={smith:v,reactanceArc:function(e,n,t,a){var r=u(e,v([t,n])),f=r[0],s=r[1],i=u(e,v([a,n])),l=i[0],c=i[1];if(0===n)return["M"+f+","+s,"L"+l+","+c].join(" ");var h=y(e,1/Math.abs(n));return["M"+f+","+s,"A"+h+","+h+" 0 0,"+(n<0?1:0)+" "+l+","+c].join(" ")},resistanceArc:function(e,n,t,a){var r=y(e,1/(n+1)),f=u(e,v([n,t])),s=f[0],i=f[1],l=u(e,v([n,a])),c=l[0],h=l[1];if(p(t)!==p(a)){var m=u(e,v([n,0]));return["M"+s+","+i,"A"+r+","+r+" 0 0,"+(0<t?0:1)+" "+m[0]+","+m[1],"A"+r+","+r+" 0 0,"+(a<0?0:1)+c+","+h].join(" ")}return["M"+s+","+i,"A"+r+","+r+" 0 0,"+(a<t?0:1)+" "+c+","+h].join(" ")},smithTransform:u}},{}],629:[function(x,Q,K){"use strict";var p=x("../get_data").getSubplotCalcData,v=x("../../lib").counterRegex,u=x("../polar/polar"),y=x("./constants"),e=y.attr,n=y.name,t=v(n),a={};a[e]={valType:"subplotid",dflt:n,editType:"calc"},Q.exports={attr:e,name:n,idRoot:n,idRegex:t,attrRegex:t,attributes:a,layoutAttributes:x("./layout_attributes"),supplyLayoutDefaults:x("./layout_defaults"),plot:function(r){for(var f=r._fullLayout,s=r.calcdata,i=f._subplots[n],l=0;l<i.length;l++){var c=i[l],h=p(s,n,c),m=f[c]._subplot;m||(m=u(r,c,!0),f[c]._subplot=m),m.plot(h,f,r._promises)}},clean:function(r,f,s,i){for(var l=i._subplots[n]||[],c=0;c<l.length;c++){var h=l[c],m=i[h]._subplot;if(!f[h]&&m)for(var d in m.framework.remove(),m.clipPaths)m.clipPaths[d].remove()}},toSVG:x("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(x,Q,K){"use strict";var p=x("../../components/color/attributes"),v=x("../cartesian/layout_attributes"),u=x("../domain").attributes,y=x("../../lib").extendFlat,e=x("../../plot_api/edit_types").overrideAll,n=e({color:v.color,showline:y({},v.showline,{dflt:!0}),linecolor:v.linecolor,linewidth:v.linewidth,showgrid:y({},v.showgrid,{dflt:!0}),gridcolor:v.gridcolor,gridwidth:v.gridwidth},"plot","from-root"),t=e({ticklen:v.ticklen,tickwidth:y({},v.tickwidth,{dflt:2}),tickcolor:v.tickcolor,showticklabels:v.showticklabels,showtickprefix:v.showtickprefix,tickprefix:v.tickprefix,showticksuffix:v.showticksuffix,ticksuffix:v.ticksuffix,tickfont:v.tickfont,tickformat:v.tickformat,hoverformat:v.hoverformat,layer:v.layer},"plot","from-root"),a=y({visible:y({},v.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:y({},v.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},n,t),r=y({visible:y({},v.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:v.ticks,editType:"calc"},n,t);Q.exports={domain:u({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:p.background},realaxis:a,imaginaryaxis:r,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(x,Q,K){"use strict";var p,v,u,y=x("../../lib"),e=x("../../components/color"),n=x("../../plot_api/plot_template"),t=x("../subplot_defaults"),a=x("../get_data").getSubplotData,r=x("../cartesian/prefix_suffix_defaults"),f=x("../cartesian/tick_label_defaults"),s=x("../cartesian/line_grid_defaults"),i=x("../cartesian/set_convert"),l=x("./layout_attributes"),c=x("./constants"),h=c.axisNames,m=(p=function(o){return o.slice().reverse().map(function(b){return-b}).concat([0]).concat(o)},v=String,u={},function(o){var b=v?v(o):o;if(b in u)return u[b];var g=p(o);return u[b]=g,g});function d(o,b,g,w){var _=g("bgcolor");w.bgColor=e.combine(_,w.paper_bgcolor);var A,T=a(w.fullData,c.name,w.id),E=w.layoutOut;function k(q,W){return g(A+"."+q,W)}for(var O=0;O<h.length;O++){y.isPlainObject(o[A=h[O]])||(o[A]={});var D=o[A],S=n.newContainer(b,A);S._id=S._name=A,S._attr=w.id+"."+A,S._traceIndices=T.map(function(q){return q._expandedIndex});var C=k("visible");if(S.type="linear",i(S,E),r(D,S,k,S.type),C){var z,B,U,G,X="realaxis"===A;X&&k("side"),X?k("tickvals"):k("tickvals",m(b.realaxis.tickvals||l.realaxis.tickvals.dflt));var Z=w.font||{};C&&(B=(z=k("color"))===D.color?z:Z.color,U=Z.size,G=Z.family),f(D,S,k,S.type,{noAng:!X,noExp:!0,font:{color:B,size:U,family:G}}),y.coerce2(o,b,l,A+".ticklen"),y.coerce2(o,b,l,A+".tickwidth"),y.coerce2(o,b,l,A+".tickcolor",b.color),k("ticks")||(delete b[A].ticklen,delete b[A].tickwidth,delete b[A].tickcolor),s(D,S,k,{dfltColor:z,bgColor:w.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[A]}),k("layer")}k("hoverformat"),delete S.type,S._input=D}}Q.exports=function(o,b,g){t(o,b,g,{noUirevision:!0,type:c.name,attributes:l,handleDefaults:d,font:b.font,paper_bgcolor:b.paper_bgcolor,fullData:g,layoutOut:b})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(x,Q,K){"use strict";var p=x("../lib"),v=x("../plot_api/plot_template"),u=x("./domain").defaults;Q.exports=function(y,e,n,t){var a,r,s=t.attributes,i=t.handleDefaults,l=t.partition||"x",c=e._subplots[t.type],h=c.length,m=h&&c[0].replace(/\d+$/,"");function d(w,_){return p.coerce(a,r,s,w,_)}for(var o=0;o<h;o++){var b=c[o];a=y[b]?y[b]:y[b]={},r=v.newContainer(e,b,m),t.noUirevision||d("uirevision",e.uirevision);var g={};g[l]=[o/h,(o+1)/h],u(r,e,d,g),t.id=b,i(a,r,d,t)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(x,Q,K){"use strict";function v(u){var y=u.description?" "+u.description:"",e=u.keys||[];if(e.length>0){for(var n=[],t=0;t<e.length;t++)n[t]="`"+e[t]+"`";y+="Finally, the template string has access to ",y=1===e.length?"variable "+n[0]:"variables "+n.slice(0,-1).join(", ")+" and "+n.slice(-1)+"."}return y}x("../constants/docs"),K.hovertemplateAttrs=function(u,y){u=u||{},v(y=y||{});var e={valType:"string",dflt:"",editType:u.editType||"none"};return!1!==u.arrayOk&&(e.arrayOk=!0),e},K.texttemplateAttrs=function(u,y){u=u||{},v(y=y||{});var e={valType:"string",dflt:"",editType:u.editType||"calc"};return!1!==u.arrayOk&&(e.arrayOk=!0),e}},{"../constants/docs":474}],634:[function(x,Q,K){"use strict";var p=x("./ternary"),v=x("../../plots/get_data").getSubplotCalcData,u=x("../../lib").counterRegex;K.name="ternary";var y=K.attr="subplot";K.idRoot="ternary",K.idRegex=K.attrRegex=u("ternary"),(K.attributes={})[y]={valType:"subplotid",dflt:"ternary",editType:"calc"},K.layoutAttributes=x("./layout_attributes"),K.supplyLayoutDefaults=x("./layout_defaults"),K.plot=function(e){for(var n=e._fullLayout,t=e.calcdata,a=n._subplots.ternary,r=0;r<a.length;r++){var f=a[r],s=v(t,"ternary",f),i=n[f]._subplot;i||(i=new p({id:f,graphDiv:e,container:n._ternarylayer.node()},n),n[f]._subplot=i),i.plot(s,n,e._promises)}},K.clean=function(e,n,t,a){for(var r=a._subplots.ternary||[],f=0;f<r.length;f++){var s=r[f],i=a[s]._subplot;!n[s]&&i&&(i.plotContainer.remove(),i.clipDef.remove(),i.clipDefRelative.remove(),i.layers["a-title"].remove(),i.layers["b-title"].remove(),i.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(x,Q,K){"use strict";var p=x("../../components/color/attributes"),v=x("../domain").attributes,u=x("../cartesian/layout_attributes"),y=x("../../plot_api/edit_types").overrideAll,e=x("../../lib/extend").extendFlat,n={title:{text:u.title.text,font:u.title.font},color:u.color,tickmode:u.tickmode,nticks:e({},u.nticks,{dflt:6,min:1}),tick0:u.tick0,dtick:u.dtick,tickvals:u.tickvals,ticktext:u.ticktext,ticks:u.ticks,ticklen:u.ticklen,tickwidth:u.tickwidth,tickcolor:u.tickcolor,showticklabels:u.showticklabels,showtickprefix:u.showtickprefix,tickprefix:u.tickprefix,showticksuffix:u.showticksuffix,ticksuffix:u.ticksuffix,showexponent:u.showexponent,exponentformat:u.exponentformat,minexponent:u.minexponent,separatethousands:u.separatethousands,tickfont:u.tickfont,tickangle:u.tickangle,tickformat:u.tickformat,tickformatstops:u.tickformatstops,hoverformat:u.hoverformat,showline:e({},u.showline,{dflt:!0}),linecolor:u.linecolor,linewidth:u.linewidth,showgrid:e({},u.showgrid,{dflt:!0}),gridcolor:u.gridcolor,gridwidth:u.gridwidth,layer:u.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:u._deprecated.title,titlefont:u._deprecated.titlefont}},t=Q.exports=y({domain:v({name:"ternary"}),bgcolor:{valType:"color",dflt:p.background},sum:{valType:"number",dflt:1,min:0},aaxis:n,baxis:n,caxis:n},"plot","from-root");t.uirevision={valType:"any",editType:"none"},t.aaxis.uirevision=t.baxis.uirevision=t.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(x,Q,K){"use strict";var p=x("../../components/color"),v=x("../../plot_api/plot_template"),u=x("../../lib"),y=x("../subplot_defaults"),e=x("../cartesian/tick_label_defaults"),n=x("../cartesian/prefix_suffix_defaults"),t=x("../cartesian/tick_mark_defaults"),a=x("../cartesian/tick_value_defaults"),r=x("../cartesian/line_grid_defaults"),f=x("./layout_attributes"),s=["aaxis","baxis","caxis"];function i(c,h,m,d){var o,b,g,w=m("bgcolor"),_=m("sum");d.bgColor=p.combine(w,d.paper_bgcolor);for(var A=0;A<s.length;A++)b=c[o=s[A]]||{},(g=v.newContainer(h,o))._name=o,l(b,g,d,h);var T=h.aaxis,E=h.baxis,k=h.caxis;T.min+E.min+k.min>=_&&(T.min=0,E.min=0,k.min=0,c.aaxis&&delete c.aaxis.min,c.baxis&&delete c.baxis.min,c.caxis&&delete c.caxis.min)}function l(c,h,m,d){var o=f[h._name];function b(E,k){return u.coerce(c,h,o,E,k)}b("uirevision",d.uirevision),h.type="linear";var g=b("color"),w=g!==o.color.dflt?g:m.font.color,_=h._name.charAt(0).toUpperCase(),A="Component "+_,T=b("title.text",A);h._hovertitle=T===A?T:_,u.coerceFont(b,"title.font",{family:m.font.family,size:u.bigFont(m.font.size),color:w}),b("min"),a(c,h,b,"linear"),n(c,h,b,"linear"),e(c,h,b,"linear"),t(c,h,b,{outerTicks:!0}),b("showticklabels")&&(u.coerceFont(b,"tickfont",{family:m.font.family,size:m.font.size,color:w}),b("tickangle"),b("tickformat")),r(c,h,b,{dfltColor:g,bgColor:m.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:o}),b("hoverformat"),b("layer")}Q.exports=function(c,h,m){y(c,h,m,{type:"ternary",attributes:f,handleDefaults:i,font:h.font,paper_bgcolor:h.paper_bgcolor})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("tinycolor2"),u=x("../../registry"),y=x("../../lib"),e=y.strTranslate,n=y._,t=x("../../components/color"),a=x("../../components/drawing"),r=x("../cartesian/set_convert"),f=x("../../lib/extend").extendFlat,s=x("../plots"),i=x("../cartesian/axes"),l=x("../../components/dragelement"),c=x("../../components/fx"),h=x("../../components/dragelement/helpers"),m=h.freeMode,d=h.rectMode,o=x("../../components/titles"),b=x("../cartesian/select").prepSelect,g=x("../cartesian/select").selectOnClick,w=x("../cartesian/select").clearSelect,_=x("../cartesian/select").clearSelectionsCache,A=x("../cartesian/constants");function T(U,G){this.id=U.id,this.graphDiv=U.graphDiv,this.init(G),this.makeFramework(G),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}Q.exports=T;var E=T.prototype;E.init=function(U){this.container=U._ternarylayer,this.defs=U._defs,this.layoutId=U._uid,this.traceHash={},this.layers={}},E.plot=function(U,G){var X=G[this.id],Z=G._size;this._hasClipOnAxisFalse=!1;for(var q=0;q<U.length;q++)if(!1===U[q][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(X),this.adjustLayout(X,Z),s.generalUpdatePerTraceModule(this.graphDiv,this,U,X),this.layers.plotbg.select("path").call(t.fill,X.bgcolor)},E.makeFramework=function(U){var G=this.graphDiv,X=U[this.id],Z=this.clipId="clip"+this.layoutId+this.id,q=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=y.ensureSingleById(U._clips,"clipPath",Z,function(W){W.append("path").attr("d","M0,0Z")}),this.clipDefRelative=y.ensureSingleById(U._clips,"clipPath",q,function(W){W.append("path").attr("d","M0,0Z")}),this.plotContainer=y.ensureSingle(this.container,"g",this.id),this.updateLayers(X),a.setClipUrl(this.layers.backplot,Z,G),a.setClipUrl(this.layers.grids,Z,G)},E.updateLayers=function(U){var G=this.layers,X=["draglayer","plotbg","backplot","grids"];"below traces"===U.aaxis.layer&&X.push("aaxis","aline"),"below traces"===U.baxis.layer&&X.push("baxis","bline"),"below traces"===U.caxis.layer&&X.push("caxis","cline"),X.push("frontplot"),"above traces"===U.aaxis.layer&&X.push("aaxis","aline"),"above traces"===U.baxis.layer&&X.push("baxis","bline"),"above traces"===U.caxis.layer&&X.push("caxis","cline");var Z=this.plotContainer.selectAll("g.toplevel").data(X,String),q=["agrid","bgrid","cgrid"];Z.enter().append("g").attr("class",function(W){return"toplevel "+W}).each(function(W){var te=p.select(this);G[W]=te,"frontplot"===W?te.append("g").classed("scatterlayer",!0):"backplot"===W?te.append("g").classed("maplayer",!0):"plotbg"===W?te.append("path").attr("d","M0,0Z"):"aline"===W||"bline"===W||"cline"===W?te.append("path"):"grids"===W&&q.forEach(function(R){G[R]=te.append("g").classed("grid "+R,!0)})}),Z.order()};var k=Math.sqrt(4/3);E.adjustLayout=function(U,G){var X,Z,q,W,te,R,N=this,V=U.domain,ee=(V.x[0]+V.x[1])/2,j=(V.y[0]+V.y[1])/2,J=V.x[1]-V.x[0],$=V.y[1]-V.y[0],re=J*G.w,ne=$*G.h,se=U.sum,ie=U.aaxis.min,ue=U.baxis.min,le=U.caxis.min;re>k*ne?q=(W=ne)*k:W=(q=re)/k,te=J*q/re,R=$*W/ne,Z=G.t+G.h*(1-j)-W/2,N.x0=X=G.l+G.w*ee-q/2,N.y0=Z,N.w=q,N.h=W,N.sum=se,N.xaxis={type:"linear",range:[ie+2*le-se,se-ie-2*ue],domain:[ee-te/2,ee+te/2],_id:"x"},r(N.xaxis,N.graphDiv._fullLayout),N.xaxis.setScale(),N.xaxis.isPtWithinRange=function(Pe){return Pe.a>=N.aaxis.range[0]&&Pe.a<=N.aaxis.range[1]&&Pe.b>=N.baxis.range[1]&&Pe.b<=N.baxis.range[0]&&Pe.c>=N.caxis.range[1]&&Pe.c<=N.caxis.range[0]},N.yaxis={type:"linear",range:[ie,se-ue-le],domain:[j-R/2,j+R/2],_id:"y"},r(N.yaxis,N.graphDiv._fullLayout),N.yaxis.setScale(),N.yaxis.isPtWithinRange=function(){return!0};var de=N.yaxis.domain[0],ve=N.aaxis=f({},U.aaxis,{range:[ie,se-ue-le],side:"left",tickangle:(+U.aaxis.tickangle||0)-30,domain:[de,de+R*k],anchor:"free",position:0,_id:"y",_length:q});r(ve,N.graphDiv._fullLayout),ve.setScale();var _e=N.baxis=f({},U.baxis,{range:[se-ie-le,ue],side:"bottom",domain:N.xaxis.domain,anchor:"free",position:0,_id:"x",_length:q});r(_e,N.graphDiv._fullLayout),_e.setScale();var be=N.caxis=f({},U.caxis,{range:[se-ie-ue,le],side:"right",tickangle:(+U.caxis.tickangle||0)+30,domain:[de,de+R*k],anchor:"free",position:0,_id:"y",_length:q});r(be,N.graphDiv._fullLayout),be.setScale();var Te="M"+X+","+(Z+W)+"h"+q+"l-"+q/2+",-"+W+"Z";N.clipDef.select("path").attr("d",Te),N.layers.plotbg.select("path").attr("d",Te);var he="M0,"+W+"h"+q+"l-"+q/2+",-"+W+"Z";N.clipDefRelative.select("path").attr("d",he);var me=e(X,Z);N.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",me),N.clipDefRelative.select("path").attr("transform",null);var Ae=e(X-_e._offset,Z+W);N.layers.baxis.attr("transform",Ae),N.layers.bgrid.attr("transform",Ae);var we=e(X+q/2,Z)+"rotate(30)"+e(0,-ve._offset);N.layers.aaxis.attr("transform",we),N.layers.agrid.attr("transform",we);var Se=e(X+q/2,Z)+"rotate(-30)"+e(0,-be._offset);N.layers.caxis.attr("transform",Se),N.layers.cgrid.attr("transform",Se),N.drawAxes(!0),N.layers.aline.select("path").attr("d",ve.showline?"M"+X+","+(Z+W)+"l"+q/2+",-"+W:"M0,0").call(t.stroke,ve.linecolor||"#000").style("stroke-width",(ve.linewidth||0)+"px"),N.layers.bline.select("path").attr("d",_e.showline?"M"+X+","+(Z+W)+"h"+q:"M0,0").call(t.stroke,_e.linecolor||"#000").style("stroke-width",(_e.linewidth||0)+"px"),N.layers.cline.select("path").attr("d",be.showline?"M"+(X+q/2)+","+Z+"l"+q/2+","+W:"M0,0").call(t.stroke,be.linecolor||"#000").style("stroke-width",(be.linewidth||0)+"px"),N.graphDiv._context.staticPlot||N.initInteractions(),a.setClipUrl(N.layers.frontplot,N._hasClipOnAxisFalse?null:N.clipId,N.graphDiv)},E.drawAxes=function(U){var G=this.graphDiv,X=this.id.substr(7)+"title",Z=this.layers,q=this.aaxis,W=this.baxis,te=this.caxis;if(this.drawAx(q),this.drawAx(W),this.drawAx(te),U){var R=Math.max(q.showticklabels?q.tickfont.size/2:0,(te.showticklabels?.75*te.tickfont.size:0)+("outside"===te.ticks?.87*te.ticklen:0)),N=(W.showticklabels?W.tickfont.size:0)+("outside"===W.ticks?W.ticklen:0)+3;Z["a-title"]=o.draw(G,"a"+X,{propContainer:q,propName:this.id+".aaxis.title",placeholder:n(G,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-q.title.font.size/3-R,"text-anchor":"middle"}}),Z["b-title"]=o.draw(G,"b"+X,{propContainer:W,propName:this.id+".baxis.title",placeholder:n(G,"Click to enter Component B title"),attributes:{x:this.x0-N,y:this.y0+this.h+.83*W.title.font.size+N,"text-anchor":"middle"}}),Z["c-title"]=o.draw(G,"c"+X,{propContainer:te,propName:this.id+".caxis.title",placeholder:n(G,"Click to enter Component C title"),attributes:{x:this.x0+this.w+N,y:this.y0+this.h+.83*te.title.font.size+N,"text-anchor":"middle"}})}},E.drawAx=function(U){var G,X=this.graphDiv,Z=U._name,q=Z.charAt(0),W=U._id,te=this.layers[Z],R=q+"tickLayout",N=(G=U).ticks+String(G.ticklen)+String(G.showticklabels);this[R]!==N&&(te.selectAll("."+W+"tick").remove(),this[R]=N),U.setScale();var V=i.calcTicks(U),ee=i.clipEnds(U,V),j=i.makeTransTickFn(U),J=i.getTickSigns(U)[2],$=y.deg2rad(30),re=J*(U.linewidth||1)/2,ne=J*U.ticklen,se=this.w,ie=this.h,ue="b"===q?"M0,"+re+"l"+Math.sin($)*ne+","+Math.cos($)*ne:"M"+re+",0l"+Math.cos($)*ne+","+-Math.sin($)*ne,le={a:"M0,0l"+ie+",-"+se/2,b:"M0,0l-"+se/2+",-"+ie,c:"M0,0l-"+ie+","+se/2}[q];i.drawTicks(X,U,{vals:"inside"===U.ticks?ee:V,layer:te,path:ue,transFn:j,crisp:!1}),i.drawGrid(X,U,{vals:ee,layer:this.layers[q+"grid"],path:le,transFn:j,crisp:!1}),i.drawLabels(X,U,{vals:V,layer:te,transFn:j,labelFns:i.makeLabelFns(U,0,30)})};var O=A.MINZOOM/2+.87,D="m-0.87,.5h"+O+"v3h-"+(O+5.2)+"l"+(O/2+2.6)+",-"+(.87*O+4.5)+"l2.6,1.5l-"+O/2+","+.87*O+"Z",S="m0.87,.5h-"+O+"v3h"+(O+5.2)+"l-"+(O/2+2.6)+",-"+(.87*O+4.5)+"l-2.6,1.5l"+O/2+","+.87*O+"Z",C="m0,1l"+O/2+","+.87*O+"l2.6,-1.5l-"+(O/2+2.6)+",-"+(.87*O+4.5)+"l-"+(O/2+2.6)+","+(.87*O+4.5)+"l2.6,1.5l"+O/2+",-"+.87*O+"Z",z=!0;function B(U){p.select(U).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}E.clearSelect=function(){_(this.dragOptions),w(this.dragOptions.gd)},E.initInteractions=function(){var U,G,X,Z,q,W,te,R,N,V,ee,j,J=this,$=J.layers.plotbg.select("path").node(),re=J.graphDiv,ne=re._fullLayout._zoomlayer;function se(he){var me={};return me[J.id+".aaxis.min"]=he.a,me[J.id+".baxis.min"]=he.b,me[J.id+".caxis.min"]=he.c,me}function ie(he,me){var Ae=re._fullLayout.clickmode;B(re),2===he&&(re.emit("plotly_doubleclick",null),u.call("_guiRelayout",re,se({a:0,b:0,c:0}))),Ae.indexOf("select")>-1&&1===he&&g(me,re,[J.xaxis],[J.yaxis],J.id,J.dragOptions),Ae.indexOf("event")>-1&&c.click(re,me,J.id)}function ue(he,me){return 1-me/J.h}function le(he,me){return 1-(he+(J.h-me)/Math.sqrt(3))/J.w}function de(he,me){return(he-(J.h-me)/Math.sqrt(3))/J.w}function ve(he,me){var Ae=X+he*U,we=Z+me*G,Se=Math.max(0,Math.min(1,ue(0,Z),ue(0,we))),Pe=Math.max(0,Math.min(1,le(X,Z),le(Ae,we))),ze=Math.max(0,Math.min(1,de(X,Z),de(Ae,we))),He=(Se/2+ze)*J.w,tt=(1-Se/2-Pe)*J.w,Oe=(He+tt)/2,Be=tt-He,Je=(1-Se)*J.h,Ye=Je-Be/k;Be<A.MINZOOM?(te=q,ee.attr("d",N),j.attr("d","M0,0Z")):(te={a:q.a+Se*W,b:q.b+Pe*W,c:q.c+ze*W},ee.attr("d",N+"M"+He+","+Je+"H"+tt+"L"+Oe+","+Ye+"L"+He+","+Je+"Z"),j.attr("d","M"+X+","+Z+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+He+","+Je+D+"M"+tt+","+Je+S+"M"+Oe+","+Ye+C)),V||(ee.transition().style("fill",R>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),j.transition().style("opacity",1).duration(200),V=!0),re.emit("plotly_relayouting",se(te))}function _e(){B(re),te!==q&&(u.call("_guiRelayout",re,se(te)),z&&re.data&&re._context.showTips&&(y.notifier(n(re,"Double-click to zoom back out"),"long"),z=!1))}function be(he,me){var Ae=he/J.xaxis._m,we=me/J.yaxis._m,Se=[(te={a:q.a-we,b:q.b+(Ae+we)/2,c:q.c-(Ae-we)/2}).a,te.b,te.c].sort(y.sorterAsc),Pe=Se.indexOf(te.a),ze=Se.indexOf(te.b),He=Se.indexOf(te.c);Se[0]<0&&(Se[1]+Se[0]/2<0?(Se[2]+=Se[0]+Se[1],Se[0]=Se[1]=0):(Se[2]+=Se[0]/2,Se[1]+=Se[0]/2,Se[0]=0),me=(q.a-(te={a:Se[Pe],b:Se[ze],c:Se[He]}).a)*J.yaxis._m,he=(q.c-te.c-q.b+te.b)*J.xaxis._m);var tt=e(J.x0+he,J.y0+me);J.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",tt);var Oe=e(-he,-me);J.clipDefRelative.select("path").attr("transform",Oe),J.aaxis.range=[te.a,J.sum-te.b-te.c],J.baxis.range=[J.sum-te.a-te.c,te.b],J.caxis.range=[J.sum-te.a-te.b,te.c],J.drawAxes(!1),J._hasClipOnAxisFalse&&J.plotContainer.select(".scatterlayer").selectAll(".trace").call(a.hideOutsideRangePoints,J),re.emit("plotly_relayouting",se(te))}function Te(){u.call("_guiRelayout",re,se(te))}this.dragOptions={element:$,gd:re,plotinfo:{id:J.id,domain:re._fullLayout[J.id].domain,xaxis:J.xaxis,yaxis:J.yaxis},subplot:J.id,prepFn:function(he,me,Ae){J.dragOptions.xaxes=[J.xaxis],J.dragOptions.yaxes=[J.yaxis],U=re._fullLayout._invScaleX,G=re._fullLayout._invScaleY;var we=J.dragOptions.dragmode=re._fullLayout.dragmode;J.dragOptions.minDrag=m(we)?1:void 0,"zoom"===we?(J.dragOptions.moveFn=ve,J.dragOptions.clickFn=ie,J.dragOptions.doneFn=_e,function(Se,Pe,ze){var He=$.getBoundingClientRect();X=Pe-He.left,Z=ze-He.top,re._fullLayout._calcInverseTransform(re);var Oe=y.apply3DTransform(re._fullLayout._invTransform)(X,Z);X=Oe[0],Z=Oe[1],te=q={a:J.aaxis.range[0],b:J.baxis.range[1],c:J.caxis.range[1]},W=J.aaxis.range[1]-q.a,R=v(J.graphDiv._fullLayout[J.id].bgcolor).getLuminance(),N="M0,"+J.h+"L"+J.w/2+", 0L"+J.w+","+J.h+"Z",V=!1,ee=ne.append("path").attr("class","zoombox").attr("transform",e(J.x0,J.y0)).style({fill:R>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",N),j=ne.append("path").attr("class","zoombox-corners").attr("transform",e(J.x0,J.y0)).style({fill:t.background,stroke:t.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),J.clearSelect(re)}(0,me,Ae)):"pan"===we?(J.dragOptions.moveFn=be,J.dragOptions.clickFn=ie,J.dragOptions.doneFn=Te,te=q={a:J.aaxis.range[0],b:J.baxis.range[1],c:J.caxis.range[1]},J.clearSelect(re)):(d(we)||m(we))&&b(he,me,Ae,J.dragOptions,we)}},$.onmousemove=function(he){c.hover(re,he,J.id),re._fullLayout._lasthover=$,re._fullLayout._hoversubplot=J.id},$.onmouseout=function(he){re._dragging||l.unhover(re,he)},l.init(this.dragOptions)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(x,Q,K){"use strict";var p=x("./lib/loggers"),v=x("./lib/noop"),u=x("./lib/push_unique"),y=x("./lib/is_plain_object"),e=x("./lib/dom").addStyleRule,n=x("./lib/extend"),t=x("./plots/attributes"),a=x("./plots/layout_attributes"),r=n.extendFlat,f=n.extendDeepAll;function s(g){var w=g.name,_=g.categories,A=g.meta;if(K.modules[w])p.log("Type "+w+" already registered");else{K.subplotsRegistry[g.basePlotModule.name]||function(z){var B=z.name;if(K.subplotsRegistry[B])p.log("Plot type "+B+" already registered.");else for(var U in h(z),K.subplotsRegistry[B]=z,K.componentsRegistry)o(U,z.name)}(g.basePlotModule);for(var T={},E=0;E<_.length;E++)T[_[E]]=!0,K.allCategories[_[E]]=!0;for(var k in K.modules[w]={_module:g,categories:T},A&&Object.keys(A).length&&(K.modules[w].meta=A),K.allTypes.push(w),K.componentsRegistry)m(k,w);g.layoutAttributes&&r(K.traceLayoutAttributes,g.layoutAttributes);var O=g.basePlotModule,D=O.name;if("mapbox"===D){var S=O.constants.styleRules;for(var C in S)e(".js-plotly-plot .plotly .mapboxgl-"+C,S[C])}"geo"!==D&&"mapbox"!==D||void 0===typeof window||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function i(g){if("string"!=typeof g.name)throw new Error("Component module *name* must be a string.");var w=g.name;for(var _ in K.componentsRegistry[w]=g,g.layoutAttributes&&(g.layoutAttributes._isLinkedToArray&&u(K.layoutArrayContainers,w),h(g)),K.modules)m(w,_);for(var A in K.subplotsRegistry)o(w,A);for(var T in K.transformsRegistry)d(w,T);g.schema&&g.schema.layout&&f(a,g.schema.layout)}function l(g){if("string"!=typeof g.name)throw new Error("Transform module *name* must be a string.");var w="Transform module "+g.name,_="function"==typeof g.transform,A="function"==typeof g.calcTransform;if(!_&&!A)throw new Error(w+" is missing a *transform* or *calcTransform* method.");for(var T in _&&A&&p.log([w+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),y(g.attributes)||p.log(w+" registered without an *attributes* object."),"function"!=typeof g.supplyDefaults&&p.log(w+" registered without a *supplyDefaults* method."),K.transformsRegistry[g.name]=g,K.componentsRegistry)d(T,g.name)}function c(g){var w=g.name,_=w.split("-")[0],A=g.dictionary,T=g.format,E=A&&Object.keys(A).length,k=T&&Object.keys(T).length,O=K.localeRegistry,D=O[w];if(D||(O[w]=D={}),_!==w){var S=O[_];S||(O[_]=S={}),E&&S.dictionary===D.dictionary&&(S.dictionary=A),k&&S.format===D.format&&(S.format=T)}E&&(D.dictionary=A),k&&(D.format=T)}function h(g){if(g.layoutAttributes){var w=g.layoutAttributes._arrayAttrRegexps;if(w)for(var _=0;_<w.length;_++)u(K.layoutArrayRegexes,w[_])}}function m(g,w){var _=K.componentsRegistry[g].schema;if(_&&_.traces){var A=_.traces[w];A&&f(K.modules[w]._module.attributes,A)}}function d(g,w){var _=K.componentsRegistry[g].schema;if(_&&_.transforms){var A=_.transforms[w];A&&f(K.transformsRegistry[w].attributes,A)}}function o(g,w){var _=K.componentsRegistry[g].schema;if(_&&_.subplots){var A=K.subplotsRegistry[w],T=A.layoutAttributes,E="subplot"===A.attr?A.name:A.attr;Array.isArray(E)&&(E=E[0]);var k=_.subplots[E];T&&k&&f(T,k)}}function b(g){return"object"==typeof g&&(g=g.type),g}K.modules={},K.allCategories={},K.allTypes=[],K.subplotsRegistry={},K.transformsRegistry={},K.componentsRegistry={},K.layoutArrayContainers=[],K.layoutArrayRegexes=[],K.traceLayoutAttributes={},K.localeRegistry={},K.apiMethodRegistry={},K.collectableSubplotTypes=null,K.register=function(g){if(K.collectableSubplotTypes=null,!g)throw new Error("No argument passed to Plotly.register.");g&&!Array.isArray(g)&&(g=[g]);for(var w=0;w<g.length;w++){var _=g[w];if(!_)throw new Error("Invalid module was attempted to be registered!");switch(_.moduleType){case"trace":s(_);break;case"transform":l(_);break;case"component":i(_);break;case"locale":c(_);break;case"apiMethod":K.apiMethodRegistry[_.name]=_.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},K.getModule=function(g){var w=K.modules[b(g)];return!!w&&w._module},K.traceIs=function(g,w){if("various"===(g=b(g)))return!1;var _=K.modules[g];return _||(g&&p.log("Unrecognized trace type "+g+"."),_=K.modules[t.type.dflt]),!!_.categories[w]},K.getTransformIndices=function(g,w){for(var _=[],A=g.transforms||[],T=0;T<A.length;T++)A[T].type===w&&_.push(T);return _},K.hasTransform=function(g,w){for(var _=g.transforms||[],A=0;A<_.length;A++)if(_[A].type===w)return!0;return!1},K.getComponentMethod=function(g,w){var _=K.componentsRegistry[g];return _&&_[w]||v},K.call=function(){var g=arguments[0],w=[].slice.call(arguments,1);return K.apiMethodRegistry[g].apply(null,w)}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(x,Q,K){"use strict";var p=x("../registry"),v=x("../lib"),u=v.extendFlat,y=v.extendDeep;function e(n){var t;switch(n){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}Q.exports=function(n,t){var a,s=n.layout,i=y([],n.data),l=y({},s,e(t.tileClass)),c=n._context||{};if(t.width&&(l.width=t.width),t.height&&(l.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){l.annotations=[];var h=Object.keys(l);for(a=0;a<h.length;a++)["xaxis","yaxis","zaxis"].indexOf(h[a].slice(0,5))>-1&&(l[h[a]].title={text:""});for(a=0;a<i.length;a++){var m=i[a];m.showscale=!1,m.marker&&(m.marker.showscale=!1),p.traceIs(m,"pie-like")&&(m.textposition="none")}}if(Array.isArray(t.annotations))for(a=0;a<t.annotations.length;a++)l.annotations.push(t.annotations[a]);var d=Object.keys(l).filter(function(_){return _.match(/^scene\d*$/)});if(d.length){var o={};for("thumbnail"===t.tileClass&&(o={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),a=0;a<d.length;a++){var b=l[d[a]];b.xaxis||(b.xaxis={}),b.yaxis||(b.yaxis={}),b.zaxis||(b.zaxis={}),u(b.xaxis,o),u(b.yaxis,o),u(b.zaxis,o),b._scene=null}}var g=document.createElement("div");t.tileClass&&(g.className=t.tileClass);var w={gd:g,td:g,layout:l,data:i,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:c.mapboxAccessToken}};return"transparent"!==t.setBackground&&(w.config.setBackground=t.setBackground||"opaque"),w.gd.defaultLayout=e(t.tileClass),w}},{"../lib":503,"../registry":638}],640:[function(x,Q,K){"use strict";var p=x("../lib"),v=x("../plot_api/to_image"),u=x("./filesaver"),y=x("./helpers");Q.exports=function(e,n){var t;return p.isPlainObject(e)||(t=p.getGraphDiv(e)),(n=n||{}).format=n.format||"png",n.width=n.width||null,n.height=n.height||null,n.imageDataOnly=!0,new Promise(function(a,r){t&&t._snapshotInProgress&&r(new Error("Snapshotting already in progress.")),p.isIE()&&"svg"!==n.format&&r(new Error(y.MSG_IE_BAD_FORMAT)),t&&(t._snapshotInProgress=!0);var f=v(e,n),s=n.filename||e.fn||"newplot";s+="."+n.format.replace("-","."),f.then(function(i){return t&&(t._snapshotInProgress=!1),u(i,s,n.format)}).then(function(i){a(i)}).catch(function(i){t&&(t._snapshotInProgress=!1),r(i)})})}},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(x,Q,K){"use strict";var p=x("../lib"),v=x("./helpers");Q.exports=function(u,y,e){var n=document.createElement("a"),t="download"in n;return new Promise(function(a,r){var f,s;return p.isIE()?(f=v.createBlob(u,"svg"),window.navigator.msSaveBlob(f,y),f=null,a(y)):t?(f=v.createBlob(u,e),s=v.createObjectURL(f),n.href=s,n.download=y,document.body.appendChild(n),n.click(),document.body.removeChild(n),v.revokeObjectURL(s),f=null,a(y)):p.isSafari()?(v.octetStream(("svg"===e?",":";base64,")+encodeURIComponent(u)),a(y)):void r(new Error("download error"))})}},{"../lib":503,"./helpers":642}],642:[function(x,Q,K){"use strict";var p=x("../registry");K.getDelay=function(u){return u._has&&(u._has("gl3d")||u._has("gl2d")||u._has("mapbox"))?500:0},K.getRedrawFunc=function(u){return function(){p.getComponentMethod("colorbar","draw")(u)}},K.encodeSVG=function(u){return"data:image/svg+xml,"+encodeURIComponent(u)},K.encodeJSON=function(u){return"data:application/json,"+encodeURIComponent(u)};var v=window.URL||window.webkitURL;K.createObjectURL=function(u){return v.createObjectURL(u)},K.revokeObjectURL=function(u){return v.revokeObjectURL(u)},K.createBlob=function(u,y){if("svg"===y)return new window.Blob([u],{type:"image/svg+xml;charset=utf-8"});if("full-json"===y)return new window.Blob([u],{type:"application/json;charset=utf-8"});var e=function(n){for(var t=n.length,a=new ArrayBuffer(t),r=new Uint8Array(a),f=0;f<t;f++)r[f]=n.charCodeAt(f);return a}(window.atob(u));return new window.Blob([e],{type:"image/"+y})},K.octetStream=function(u){document.location.href="data:application/octet-stream"+u},K.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,K.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(x,Q,K){"use strict";var p=x("./helpers"),v={getDelay:p.getDelay,getRedrawFunc:p.getRedrawFunc,clone:x("./cloneplot"),toSVG:x("./tosvg"),svgToImg:x("./svgtoimg"),toImage:x("./toimage"),downloadImage:x("./download")};Q.exports=v},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(x,Q,K){"use strict";var p=x("../lib"),v=x("events").EventEmitter,u=x("./helpers");Q.exports=function(y){var e=y.emitter||new v,n=new Promise(function(t,a){var r=window.Image,f=y.svg,s=y.format||"png";if(p.isIE()&&"svg"!==s){var i=new Error(u.MSG_IE_BAD_FORMAT);return a(i),y.promise?n:e.emit("error",i)}var l,c,h=y.canvas,m=y.scale||1,b=m*(y.width||300),g=m*(y.height||150),w=h.getContext("2d"),_=new r;"svg"===s||p.isSafari()?c=u.encodeSVG(f):(l=u.createBlob(f,"svg"),c=u.createObjectURL(l)),h.width=b,h.height=g,_.onload=function(){var A;switch(l=null,u.revokeObjectURL(c),"svg"!==s&&w.drawImage(_,0,0,b,g),s){case"jpeg":A=h.toDataURL("image/jpeg");break;case"png":A=h.toDataURL("image/png");break;case"webp":A=h.toDataURL("image/webp");break;case"svg":A=c;break;default:var T="Image format is not jpeg, png, svg or webp.";if(a(new Error(T)),!y.promise)return e.emit("error",T)}t(A),y.promise||e.emit("success",A)},_.onerror=function(A){if(l=null,u.revokeObjectURL(c),a(A),!y.promise)return e.emit("error",A)},_.src=c});return y.promise?n:e}},{"../lib":503,"./helpers":642,events:84}],645:[function(x,Q,K){"use strict";var p=x("events").EventEmitter,v=x("../registry"),u=x("../lib"),y=x("./helpers"),e=x("./cloneplot"),n=x("./tosvg"),t=x("./svgtoimg");Q.exports=function(a,r){var f=new p,s=e(a,{format:"png"}),i=s.gd;i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i);var l=y.getRedrawFunc(i);return v.call("_doPlot",i,s.data,s.layout,s.config).then(l).then(function(){var c=y.getDelay(i._fullLayout);setTimeout(function(){var h=n(i),m=document.createElement("canvas");m.id=u.randstr(),(f=t({format:r.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:m,emitter:f,svg:h})).clean=function(){i&&document.body.removeChild(i)}},c)}).catch(function(c){f.emit("error",c)}),f}},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../lib"),u=x("../components/drawing"),y=x("../components/color"),e=x("../constants/xmlns_namespaces"),n=/"/g,t=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");Q.exports=function(a,r,f){var s,i,l=a._fullLayout,c=l._paper,h=l._toppaper,m=l.width,d=l.height;c.insert("rect",":first-child").call(u.setRect,0,0,m,d).call(y.fill,l.paper_bgcolor);var o=l._basePlotModules||[];for(s=0;s<o.length;s++){var b=o[s];b.toSVG&&b.toSVG(a)}if(h){var g=h.node().childNodes,w=Array.prototype.slice.call(g);for(s=0;s<w.length;s++){var _=w[s];_.childNodes.length&&c.node().appendChild(_)}}l._draggers&&l._draggers.remove(),c.node().style.background="",c.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var E=p.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){E.style({visibility:null,display:null});var k=this.style.fontFamily;k&&-1!==k.indexOf('"')&&E.style("font-family",k.replace(n,"TOBESTRIPPED"))}else E.remove()});var A=[];if(l._gradientUrlQueryParts)for(i in l._gradientUrlQueryParts)A.push(i);if(l._patternUrlQueryParts)for(i in l._patternUrlQueryParts)A.push(i);A.length&&c.selectAll(A.join(",")).each(function(){var E=p.select(this),k=this.style.fill;k&&-1!==k.indexOf("url(")&&E.style("fill",k.replace(n,"TOBESTRIPPED"));var O=this.style.stroke;O&&-1!==O.indexOf("url(")&&E.style("stroke",O.replace(n,"TOBESTRIPPED"))}),"pdf"!==r&&"eps"!==r||c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(e.xmlns,"xmlns",e.svg),c.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),"svg"===r&&f&&(c.attr("width",f*m),c.attr("height",f*d),c.attr("viewBox","0 0 "+m+" "+d));var E,k,O,T=(new window.XMLSerializer).serializeToString(c.node());return E=T,k=p.select("body").append("div").style({display:"none"}).html(""),O=E.replace(/(&[^;]*;)/gi,function(D){return"&lt;"===D?"&#60;":"&rt;"===D?"&#62;":-1!==D.indexOf("<")||-1!==D.indexOf(">")?"":k.html(D).text()}),k.remove(),T=(T=(T=O).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),v.isIE()&&(T=(T=(T=T.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),T}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(x,Q,K){"use strict";var p=x("../../lib");Q.exports=function(v,u){for(var y=0;y<v.length;y++)v[y].i=y;p.mergeArray(u.text,v,"tx"),p.mergeArray(u.hovertext,v,"htx");var e=u.marker;if(e){p.mergeArray(e.opacity,v,"mo",!0),p.mergeArray(e.color,v,"mc");var n=e.line;n&&(p.mergeArray(n.color,v,"mlc"),p.mergeArrayCastPositive(n.width,v,"mlw"))}}},{"../../lib":503}],648:[function(x,Q,K){"use strict";var p=x("../scatter/attributes"),v=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,u=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../../plots/template_attributes").texttemplateAttrs,e=x("../../components/colorscale/attributes"),n=x("../../plots/font_attributes"),t=x("./constants"),a=x("../../components/drawing/attributes").pattern,r=x("../../lib/extend").extendFlat,f=n({editType:"calc",arrayOk:!0,colorEditType:"style"}),s=r({},p.marker.line.width,{dflt:0}),i=r({width:s,editType:"calc"},e("marker.line")),l=r({line:i,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:a});Q.exports={x:p.x,x0:p.x0,dx:p.dx,y:p.y,y0:p.y0,dy:p.dy,xperiod:p.xperiod,yperiod:p.yperiod,xperiod0:p.xperiod0,yperiod0:p.yperiod0,xperiodalignment:p.xperiodalignment,yperiodalignment:p.yperiodalignment,xhoverformat:v("x"),yhoverformat:v("y"),text:p.text,texttemplate:y({editType:"plot"},{keys:t.eventDataKeys}),hovertext:p.hovertext,hovertemplate:u({},{keys:t.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:r({},f,{}),insidetextfont:r({},f,{}),outsidetextfont:r({},f,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:r({},p.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:l,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:p.selected.marker.opacity,color:p.selected.marker.color,editType:"style"},textfont:p.selected.textfont,editType:"style"},unselected:{marker:{opacity:p.unselected.marker.opacity,color:p.unselected.marker.color,editType:"style"},textfont:p.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":925,"./constants":650}],649:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes"),v=x("../../plots/cartesian/align_period"),u=x("../../components/colorscale/helpers").hasColorscale,y=x("../../components/colorscale/calc"),e=x("./arrays_to_calcdata"),n=x("../scatter/calc_selection");Q.exports=function(t,a){var r,f,s,i,l,c,h=p.getFromId(t,a.xaxis||"x"),m=p.getFromId(t,a.yaxis||"y"),d={msUTC:!(!a.base&&0!==a.base)};"h"===a.orientation?(r=h.makeCalcdata(a,"x",d),s=m.makeCalcdata(a,"y"),i=v(a,m,"y",s),l=!!a.yperiodalignment,c="y"):(r=m.makeCalcdata(a,"y",d),s=h.makeCalcdata(a,"x"),i=v(a,h,"x",s),l=!!a.xperiodalignment,c="x"),f=i.vals;for(var o=Math.min(f.length,r.length),b=new Array(o),g=0;g<o;g++)b[g]={p:f[g],s:r[g]},l&&(b[g].orig_p=s[g],b[g][c+"End"]=i.ends[g],b[g][c+"Start"]=i.starts[g]),a.ids&&(b[g].id=String(a.ids[g]));return u(a,"marker")&&y(t,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),u(a,"marker.line")&&y(t,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(b,a),n(b,a),b}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":927,"./arrays_to_calcdata":647}],650:[function(x,Q,K){"use strict";Q.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib").isArrayOrTypedArray,u=x("../../constants/numerical").BADNUM,y=x("../../registry"),e=x("../../plots/cartesian/axes"),n=x("../../plots/cartesian/constraints").getAxisGroup,t=x("./sieve.js");function a(o,b,g,w,_){if(w.length){var A,T,E,k;switch(function(O,D){var S,C;for(S=0;S<D.length;S++){var z,B=D[S],U=B[0].trace,G="funnel"===U.type?U._base:U.base,X="h"===U.orientation?U.xcalendar:U.ycalendar,Z="category"===O.type||"multicategory"===O.type?function(){return null}:O.d2c;if(v(G)){for(C=0;C<Math.min(G.length,B.length);C++)z=Z(G[C],0,X),p(z)?(B[C].b=+z,B[C].hasB=1):B[C].b=0;for(;C<B.length;C++)B[C].b=0}else{z=Z(G,0,X);var q=p(z);for(z=q?z:0,C=0;C<B.length;C++)B[C].b=z,q&&(B[C].hasB=1)}}}(g,w),_.mode){case"overlay":r(b,g,w,_);break;case"group":for(A=[],T=[],E=0;E<w.length;E++)void 0===(k=w[E])[0].trace.offset?T.push(k):A.push(k);T.length&&(O=o,S=g,B=new t(T,{posAxis:D=b,sepNegVal:!1,overlapNoMerge:!(z=_).norm}),function(U,G,X,Z){for(var q=U._fullLayout,R=X.minDiff,N=X.traces,V=N.length,ee=X.positions.length!==X.distinctPositions.length,j=R*(1-Z.gap),J=n(q,G._id)+N[0][0].trace.orientation,$=q._alignmentOpts[J]||{},re=0;re<V;re++){var ne,se,ie=N[re],ue=ie[0].trace,de=Object.keys(($[ue.alignmentgroup]||{}).offsetGroups||{}).length,ve=(ne=de?j/de:ee?j/V:j)*(1-(Z.groupgap||0));se=de?((2*ue._offsetIndex+1-de)*ne-ve)/2:ee?((2*re+1-V)*ne-ve)/2:-ve/2;var _e=ie[0].t;_e.barwidth=ve,_e.poffset=se,_e.bargroupwidth=j,_e.bardelta=R}X.binWidth=N[0][0].t.barwidth/100,s(X),i(G,X),l(G,X,ee)}(O,D,B,z),function(U,G){for(var X=U.traces,Z=0;Z<X.length;Z++){var q=X[Z];if(void 0===q[0].trace.base)for(var W=new t([q],{posAxis:G,sepNegVal:!0,overlapNoMerge:!0}),te=0;te<q.length;te++){var R=q[te];if(R.p!==u){var N=W.put(R.p,R.b+R.s);N&&(R.b=N)}}}}(B,D),z.norm?(h(B),m(S,B,z)):c(S,B)),A.length&&r(b,g,A,_);break;case"stack":case"relative":for(A=[],T=[],E=0;E<w.length;E++)void 0===(k=w[E])[0].trace.base?T.push(k):A.push(k);T.length&&function(O,D,S,C,z){var B=new t(C,{posAxis:D,sepNegVal:"relative"===z.mode,overlapNoMerge:!(z.norm||"stack"===z.mode||"relative"===z.mode)});f(D,B,z),function(q,W,te){var R,N,V,ee,j,J,$=d(q),re=W.traces;for(ee=0;ee<re.length;ee++)if("funnel"===(N=(R=re[ee])[0].trace).type)for(j=0;j<R.length;j++)(J=R[j]).s!==u&&W.put(J.p,-.5*J.s);for(ee=0;ee<re.length;ee++){V="funnel"===(N=(R=re[ee])[0].trace).type;var ne=[];for(j=0;j<R.length;j++)if((J=R[j]).s!==u){var se,ie=W.put(J.p,se=V?J.s:J.s+J.b),ue=ie+se;J.b=ie,J[$]=ue,te.norm||(ne.push(ue),J.hasB&&ne.push(ie))}te.norm||(N._extremes[q._id]=e.findExtremes(q,ne,{tozero:!0,padded:!0}))}}(S,B,z);for(var U=0;U<C.length;U++)for(var G=C[U],X=0;X<G.length;X++){var Z=G[X];Z.s!==u&&Z.b+Z.s===B.get(Z.p,Z.s)&&(Z._outmost=!0)}z.norm&&m(S,B,z)}(0,b,g,T,_),A.length&&r(b,g,A,_)}!function(O,D){var S,C,z,B=d(D),U={},G=1/0,X=-1/0;for(S=0;S<O.length;S++)for(z=O[S],C=0;C<z.length;C++){var Z=z[C].p;p(Z)&&(G=Math.min(G,Z),X=Math.max(X,Z))}var q=1e4/(X-G),W=U.round=function(J){return String(Math.round(q*(J-G)))};for(S=0;S<O.length;S++){(z=O[S])[0].t.extents=U;var te=z[0].t.poffset,R=Array.isArray(te);for(C=0;C<z.length;C++){var N=z[C],V=N[B]-N.w/2;if(p(V)){var ee=N[B]+N.w/2,j=W(N.p);U[j]=U[j]?[Math.min(V,U[j][0]),Math.max(ee,U[j][1])]:[V,ee]}N.p0=N.p+(R?te[C]:te),N.p1=N.p0+N.w,N.s0=N.b,N.s1=N.s0+N.s}}}(w,b)}var O,D,S,z,B}function r(o,b,g,w){for(var _=0;_<g.length;_++){var T=new t([g[_]],{posAxis:o,sepNegVal:!1,overlapNoMerge:!w.norm});f(o,T,w),w.norm?(h(T),m(b,T,w)):c(b,T)}}function f(o,b,g){for(var w=b.minDiff,_=b.traces,A=w*(1-g.gap),T=A*(1-(g.groupgap||0)),E=-T/2,k=0;k<_.length;k++){var O=_[k][0].t;O.barwidth=T,O.poffset=E,O.bargroupwidth=A,O.bardelta=w}b.binWidth=_[0][0].t.barwidth/100,s(b),i(o,b),l(o,b)}function s(o){var b,g,w=o.traces;for(b=0;b<w.length;b++){var _,A=w[b],T=A[0],E=T.trace,k=T.t,O=E._offset||E.offset,D=k.poffset;if(v(O)){for(_=Array.prototype.slice.call(O,0,A.length),g=0;g<_.length;g++)p(_[g])||(_[g]=D);for(g=_.length;g<A.length;g++)_.push(D);k.poffset=_}else void 0!==O&&(k.poffset=O);var S=E._width||E.width,C=k.barwidth;if(v(S)){var z=Array.prototype.slice.call(S,0,A.length);for(g=0;g<z.length;g++)p(z[g])||(z[g]=C);for(g=z.length;g<A.length;g++)z.push(C);if(k.barwidth=z,void 0===O){for(_=[],g=0;g<A.length;g++)_.push(D+(C-z[g])/2);k.poffset=_}}else void 0!==S&&(k.barwidth=S,void 0===O&&(k.poffset=D+(C-S)/2))}}function i(o,b){for(var g=b.traces,w=d(o),_=0;_<g.length;_++)for(var A=g[_],T=A[0].t,E=T.poffset,k=Array.isArray(E),O=T.barwidth,D=Array.isArray(O),S=0;S<A.length;S++){var C=A[S],z=C.w=D?O[S]:O;C[w]=C.p+(k?E[S]:E)+z/2}}function l(o,b,g){var w=b.traces,_=b.minDiff/2;e.minDtick(o,b.minDiff,b.distinctPositions[0],g);for(var A=0;A<w.length;A++){var T,E,k,O,D=w[A],S=D[0],C=S.trace,z=[];for(O=0;O<D.length;O++)E=(T=D[O]).p-_,z.push(E,k=T.p+_);if(C.width||C.offset){var B=S.t,U=B.poffset,G=B.barwidth,X=Array.isArray(U),Z=Array.isArray(G);for(O=0;O<D.length;O++)k=(E=(T=D[O]).p+(X?U[O]:U))+(Z?G[O]:G),z.push(E,k)}C._extremes[o._id]=e.findExtremes(o,z,{padded:!1})}}function c(o,b){for(var g=b.traces,w=d(o),_=0;_<g.length;_++){for(var A=g[_],T=A[0].trace,E=[],k=!1,O=0;O<A.length;O++){var D=A[O],S=D.b,C=S+D.s;D[w]=C,E.push(C),D.hasB&&E.push(S),D.hasB&&D.b||(k=!0)}T._extremes[o._id]=e.findExtremes(o,E,{tozero:k,padded:!0})}}function h(o){for(var b=o.traces,g=0;g<b.length;g++)for(var w=b[g],_=0;_<w.length;_++){var A=w[_];A.s!==u&&o.put(A.p,A.b+A.s)}}function m(o,b,g){var w=b.traces,_=d(o),A="fraction"===g.norm?1:100,T=A/1e9,E=o.l2c(o.c2l(0)),k="stack"===g.mode?A:E;function O(te){return p(o.c2l(te))&&(te<E-T||te>k+T||!p(E))}for(var D=0;D<w.length;D++){for(var S=w[D],C=S[0].trace,z=[],B=!1,U=!1,G=0;G<S.length;G++){var X=S[G];if(X.s!==u){var Z=Math.abs(A/b.get(X.p,X.s));X.b*=Z,X.s*=Z;var q=X.b,W=q+X.s;X[_]=W,z.push(W),U=U||O(W),X.hasB&&(z.push(q),U=U||O(q)),X.hasB&&X.b||(B=!0)}}C._extremes[o._id]=e.findExtremes(o,z,{tozero:B,padded:U})}}function d(o){return o._id.charAt(0)}Q.exports={crossTraceCalc:function(o,b){for(var g=b.xaxis,w=b.yaxis,_=o._fullLayout,A=o._fullData,T=o.calcdata,E=[],k=[],O=0;O<A.length;O++){var D=A[O];if(!0===D.visible&&y.traceIs(D,"bar")&&D.xaxis===g._id&&D.yaxis===w._id&&("h"===D.orientation?E.push(T[O]):k.push(T[O]),D._computePh))for(var S=o.calcdata[O],C=0;C<S.length;C++)"function"==typeof S[C].ph0&&(S[C].ph0=S[C].ph0()),"function"==typeof S[C].ph1&&(S[C].ph1=S[C].ph1())}var z={xCat:"category"===g.type||"multicategory"===g.type,yCat:"category"===w.type||"multicategory"===w.type,mode:_.barmode,norm:_.barnorm,gap:_.bargap,groupgap:_.bargroupgap};a(o,g,w,k,z),a(o,w,g,E,z)},setGroupPositions:a}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/color"),u=x("../../registry"),y=x("../scatter/xy_defaults"),e=x("../scatter/period_defaults"),n=x("./style_defaults"),t=x("../../plots/cartesian/constraints").getAxisGroup,a=x("./attributes"),r=p.coerceFont;function f(i,l,c,h){var m=l.orientation,o=t(c,l[{v:"x",h:"y"}[m]+"axis"])+m,b=c._alignmentOpts||{},g=h("alignmentgroup"),w=b[o];w||(w=b[o]={});var _=w[g];_?_.traces.push(l):_=w[g]={traces:[l],alignmentIndex:Object.keys(w).length,offsetGroups:{}};var A=h("offsetgroup"),T=_.offsetGroups,E=T[A];A&&(E||(E=T[A]={offsetIndex:Object.keys(T).length}),l._offsetIndex=E.offsetIndex)}function s(i,l,c,h,m,d){var o=!1!==(d=d||{}).moduleHasSelected,b=!1!==d.moduleHasUnselected,g=!1!==d.moduleHasConstrain,w=!1!==d.moduleHasCliponaxis,_=!1!==d.moduleHasTextangle,A=!1!==d.moduleHasInsideanchor,T=!!d.hasPathbar,E=Array.isArray(m)||"auto"===m,k=E||"inside"===m,O=E||"outside"===m;if(k||O){var D=r(h,"textfont",c.font),S=p.extendFlat({},D),C=!(i.textfont&&i.textfont.color);if(C&&delete S.color,r(h,"insidetextfont",S),T){var z=p.extendFlat({},D);C&&delete z.color,r(h,"pathbar.textfont",z)}O&&r(h,"outsidetextfont",D),o&&h("selected.textfont.color"),b&&h("unselected.textfont.color"),g&&h("constraintext"),w&&h("cliponaxis"),_&&h("textangle"),h("texttemplate")}k&&A&&h("insidetextanchor")}Q.exports={supplyDefaults:function(i,l,c,h){function m(g,w){return p.coerce(i,l,a,g,w)}if(y(i,l,h,m)){e(i,l,h,m),m("xhoverformat"),m("yhoverformat"),m("orientation",l.x&&!l.y?"h":"v"),m("base"),m("offset"),m("width"),m("text"),m("hovertext"),m("hovertemplate");var d=m("textposition");s(i,0,h,m,d,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n(i,l,m,c,h);var o=(l.marker.line||{}).color,b=u.getComponentMethod("errorbars","supplyDefaults");b(i,l,o||v.defaultLine,{axis:"y"}),b(i,l,o||v.defaultLine,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(l,m)}else l.visible=!1},crossTraceDefaults:function(i,l){var c;function h(d){return p.coerce(c._input,c,a,d)}if("group"===l.barmode)for(var m=0;m<i.length;m++)"bar"===(c=i[m]).type&&f(0,c,l,h)},handleGroupingDefaults:f,handleText:s}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":945,"../scatter/xy_defaults":952,"./attributes":648,"./style_defaults":663}],653:[function(x,Q,K){"use strict";Q.exports=function(p,v,u){return p.x="xVal"in v?v.xVal:v.x,p.y="yVal"in v?v.yVal:v.y,v.xa&&(p.xaxis=v.xa),v.ya&&(p.yaxis=v.ya),"h"===u.orientation?(p.label=p.y,p.value=p.x):(p.label=p.x,p.value=p.y),p}},{}],654:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("tinycolor2"),u=x("../../lib").isArrayOrTypedArray;K.coerceString=function(y,e,n){if("string"==typeof e){if(e||!y.noBlank)return e}else if(("number"==typeof e||!0===e)&&!y.strict)return String(e);return void 0!==n?n:y.dflt},K.coerceNumber=function(y,e,n){if(p(e)){e=+e;var t=y.min,a=y.max;if(!(void 0!==t&&e<t||void 0!==a&&e>a))return e}return void 0!==n?n:y.dflt},K.coerceColor=function(y,e,n){return v(e).isValid()?e:void 0!==n?n:y.dflt},K.coerceEnumerated=function(y,e,n){return y.coerceNumber&&(e=+e),-1!==y.values.indexOf(e)?e:void 0!==n?n:y.dflt},K.getValue=function(y,e){var n;return Array.isArray(y)?e<y.length&&(n=y[e]):n=y,n},K.getLineWidth=function(y,e){return 0<e.mlw?e.mlw:u(y.marker.line.width)?0:y.marker.line.width}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(x,Q,K){"use strict";var p=x("../../components/fx"),v=x("../../registry"),u=x("../../components/color"),y=x("../../lib").fillText,e=x("./helpers").getLineWidth,n=x("../../plots/cartesian/axes").hoverLabelText,t=x("../../constants/numerical").BADNUM;function a(f,s,i,l,c){var h,m,d,o,b,g,w,_=f.cd,A=_[0].trace,T=_[0].t,E="closest"===l,k="waterfall"===A.type,O=f.maxHoverDistance,D=f.maxSpikeDistance;"h"===A.orientation?(h=i,m=s,d="y",o="x",b=R,g=W):(h=s,m=i,d="x",o="y",g=R,b=W);var S=A[d+"period"],C=E||S;function z(ne){return U(ne,-1)}function B(ne){return U(ne,1)}function U(ne,se){return ne[d]+se*ne.w/2}function G(ne){return ne[d+"End"]-ne[d+"Start"]}var X=E?z:S?function(ne){return ne.p-G(ne)/2}:function(ne){return Math.min(z(ne),ne.p-T.bardelta/2)},Z=E?B:S?function(ne){return ne.p+G(ne)/2}:function(ne){return Math.max(B(ne),ne.p+T.bardelta/2)};function q(ne,se,ie){return c.finiteRange&&(ie=0),p.inbox(ne-h,se-h,ie+Math.min(1,Math.abs(se-ne)/w)-1)}function W(ne){return q(X(ne),Z(ne),O)}function te(ne){var se=ne[o];if(k){var ie=Math.abs(ne.rawS)||0;m>0?se+=ie:m<0&&(se-=ie)}return se}function R(ne){var se=m,ie=ne.b,ue=te(ne);return p.inbox(ie-se,ue-se,O+(ue-se)/(ue-ie)-1)}var N=f[d+"a"],V=f[o+"a"];w=Math.abs(N.r2c(N.range[1])-N.r2c(N.range[0]));var ne,se,ie,ue,ee=p.getDistanceFunction(l,b,g,function(ne){return(b(ne)+g(ne))/2});if(p.getClosest(_,ee,f),!1!==f.index&&_[f.index].p!==t){C||(X=function(ne){return Math.min(z(ne),ne.p-T.bargroupwidth/2)},Z=function(ne){return Math.max(B(ne),ne.p+T.bargroupwidth/2)});var j=_[f.index],J=A.base?j.b+j.s:j.s;f[o+"0"]=f[o+"1"]=V.c2p(j[o],!0),f[o+"LabelVal"]=J;var $=T.extents[T.extents.round(j.p)];return f[d+"0"]=N.c2p(E?X(j):$[0],!0),f[d+"1"]=N.c2p(E?Z(j):$[1],!0),f[d+"LabelVal"]=void 0!==j.orig_p?j.orig_p:j.p,f.labelLabel=n(N,f[d+"LabelVal"],A[d+"hoverformat"]),f.valueLabel=n(V,f[o+"LabelVal"],A[o+"hoverformat"]),f.baseLabel=n(V,j.b,A[o+"hoverformat"]),f.spikeDistance=(se=m,ie=(ne=j).b,ue=te(ne),(p.inbox(ie-se,ue-se,D+(ue-se)/(ue-ie)-1)+function(ne){return q(z(ne),B(ne),D)}(j))/2),f[d+"Spike"]=N.c2p(j.p,!0),y(j,A,f),f.hovertemplate=A.hovertemplate,f}}function r(f,s){var i=s.mcc||f.marker.color,l=s.mlcc||f.marker.line.color,c=e(f,s);return u.opacity(i)?i:u.opacity(l)&&c?l:void 0}Q.exports={hoverPoints:function(f,s,i,l,c){var h=a(f,s,i,l,c);if(h){var m=h.cd,d=m[0].trace,o=m[h.index];return h.color=r(d,o),v.getComponentMethod("errorbars","hoverInfo")(o,d,h),[h]}},hoverOnBars:a,getTraceColor:r}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults").supplyDefaults,crossTraceDefaults:x("./defaults").crossTraceDefaults,supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc"),crossTraceCalc:x("./cross_trace_calc").crossTraceCalc,colorbar:x("../scatter/marker_colorbar"),arraysToCalcdata:x("./arrays_to_calcdata"),plot:x("./plot").plot,style:x("./style").style,styleOnSelect:x("./style").styleOnSelect,hoverPoints:x("./hover").hoverPoints,eventData:x("./event_data"),selectPoints:x("./select"),moduleType:"trace",name:"bar",basePlotModule:x("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":943,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(x,Q,K){"use strict";Q.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../plots/cartesian/axes"),u=x("../../lib"),y=x("./layout_attributes");Q.exports=function(e,n,t){function a(d,o){return u.coerce(e,n,y,d,o)}for(var r=!1,f=!1,s=!1,i={},l=a("barmode"),c=0;c<t.length;c++){var h=t[c];if(p.traceIs(h,"bar")&&h.visible){if(r=!0,"group"===l){var m=h.xaxis+h.yaxis;i[m]&&(s=!0),i[m]=!0}h.visible&&"histogram"===h.type&&"category"!==v.getFromId({_fullLayout:n},h["v"===h.orientation?"xaxis":"yaxis"]).type&&(f=!0)}}r?("overlay"!==l&&a("barnorm"),a("bargap",f&&!s?0:.2),a("bargroupgap")):delete n.barmode}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("fast-isnumeric"),u=x("../../lib"),y=x("../../lib/svg_text_utils"),e=x("../../components/color"),n=x("../../components/drawing"),t=x("../../registry"),a=x("../../plots/cartesian/axes").tickText,r=x("./uniform_text"),f=r.recordMinTextSize,s=r.clearMinTextSize,i=x("./style"),l=x("./helpers"),c=x("./constants"),h=x("./attributes"),m=h.text,d=h.textposition,o=x("../../components/fx/helpers").appendArrayPointValue,b=c.TEXTPAD;function g(D){return D.id}function _(D,S){return D<S?1:-1}function A(D,S,C,z){var B;return!S.uniformtext.mode&&T(C)?(z&&(B=z()),D.transition().duration(C.duration).ease(C.easing).each("end",function(){B&&B()}).each("interrupt",function(){B&&B()})):D}function T(D){return D&&D.duration>0}function E(D){return"auto"===D?0:D}function k(D,S){var C=Math.PI/180*S,z=Math.abs(Math.sin(C)),B=Math.abs(Math.cos(C));return{x:D.width*B+D.height*z,y:D.width*z+D.height*B}}function O(D,S,C,z,B,U){var G=!!U.isHorizontal,X=!!U.constrained,Z=U.angle||0,q=U.anchor||"end",W="end"===q,te="start"===q,R=((U.leftToRight||0)+1)/2,N=1-R,V=B.width,ee=B.height,j=Math.abs(S-D),J=Math.abs(z-C),$=j>2*b&&J>2*b?b:0;j-=2*$,J-=2*$;var re=E(Z);"auto"!==Z||V<=j&&ee<=J||!(V>j||ee>J)||(V>J||ee>j)&&V<ee==j<J||(re+=90);var ne=k(B,re),se=1;X&&(se=Math.min(1,j/ne.x,J/ne.y));var ie=B.left*N+B.right*R,ue=(B.top+B.bottom)/2,le=(D+b)*N+(S-b)*R,de=(C+z)/2,ve=0,_e=0;if(te||W){var be=(G?ne.x:ne.y)/2,Te=G?_(D,S):_(C,z);G?te?(le=D+Te*$,ve=-Te*be):(le=S-Te*$,ve=Te*be):te?(de=C+Te*$,_e=-Te*be):(de=z-Te*$,_e=Te*be)}return{textX:ie,textY:ue,targetX:le,targetY:de,anchorX:ve,anchorY:_e,scale:se,rotate:re}}Q.exports={plot:function(D,S,C,z,B,U){var G=S.xaxis,X=S.yaxis,Z=D._fullLayout;B||(B={mode:Z.barmode,norm:Z.barmode,gap:Z.bargap,groupgap:Z.bargroupgap},s("bar",Z));var q=u.makeTraceGroups(z,C,"trace bars").each(function(W){var te=p.select(this),R=W[0].trace,ee="bar"===R.type||"funnel"===R.type,j=0;"waterfall"===R.type&&R.connector.visible&&"between"===R.connector.mode&&(j=R.connector.line.width/2);var J="h"===R.orientation,$=T(B),re=u.ensureSingle(te,"g","points"),ne=function(D){if(D.ids)return g}(R),se=re.selectAll("g.point").data(u.identity,ne);se.enter().append("g").classed("point",!0),se.exit().remove(),se.each(function(ue,le){var de,ve,Oe,Be,Je,Ye,nt,ft,dt,Rt,_e=p.select(this),be=(Be=G,Je=X,ft=[],Rt=(Ye=J)?Je:Be,(nt=[])[0]=(dt=Ye?Be:Je).c2p((Oe=ue).s0,!0),ft[0]=Rt.c2p(Oe.p0,!0),nt[1]=dt.c2p(Oe.s1,!0),ft[1]=Rt.c2p(Oe.p1,!0),Ye?[nt,ft]:[ft,nt]),Te=be[0][0],he=be[0][1],me=be[1][0],Ae=be[1][1],we=0==(J?he-Te:Ae-me);if(we&&ee&&l.getLineWidth(R,ue)&&(we=!1),we||(we=!(v(Te)&&v(he)&&v(me)&&v(Ae))),ue.isBlank=we,we&&(J?he=Te:Ae=me),j&&!we&&(J?(Te-=_(Te,he)*j,he+=_(Te,he)*j):(me-=_(me,Ae)*j,Ae+=_(me,Ae)*j)),"waterfall"===R.type){if(!we){var Se=R[ue.dir].marker;de=Se.line.width,ve=Se.color}}else de=l.getLineWidth(R,ue),ve=ue.mc||R.marker.color;function Pe(Oe){var Be=p.round(de/2%1,2);return 0===B.gap&&0===B.groupgap?p.round(Math.round(Oe)-Be,2):Oe}if(!D._context.staticPlot){var ze=e.opacity(ve)<1||de>.01?Pe:function(Oe,Be,Je){return Je&&Oe===Be?Oe:Math.abs(Oe-Be)>=2?Pe(Oe):Oe>Be?Math.ceil(Oe):Math.floor(Oe)};Te=ze(Te,he,J),he=ze(he,Te,J),me=ze(me,Ae,!J),Ae=ze(Ae,me,!J)}var He=A(u.ensureSingle(_e,"path"),Z,B,U);if(He.style("vector-effect","non-scaling-stroke").attr("d",isNaN((he-Te)*(Ae-me))||we&&D._context.staticPlot?"M0,0Z":"M"+Te+","+me+"V"+Ae+"H"+he+"V"+me+"Z").call(n.setClipUrl,S.layerClipId,D),!Z.uniformtext.mode&&$){var tt=n.makePointStyleFns(R);n.singlePointStyle(ue,He,R,tt,D)}(function(Oe,Be,Je,Ye,nt,ft,dt,Rt,Et,at,rt){var St,Xt=Be.xaxis,lr=Be.yaxis,Ue=Oe._fullLayout;function Ze($t,nr,dr){return u.ensureSingle($t,"text").text(nr).attr({class:"bartext bartext-"+St,"text-anchor":"middle","data-notex":1}).call(n.font,dr).call(y.convertToTspans,Oe)}var nr,dr,Tr,wr,mr,_r,Ne=Ye[0].trace,it="h"===Ne.orientation,ke=(dr=nt,Tr=Xt,wr=lr,mr=(_r=(nr=Ye)[0].trace).texttemplate?function(Sr,Gr,Er,Zr,an){var gn=Gr[0].trace,Vn=u.castOption(gn,Er,"texttemplate");if(!Vn)return"";var Gn,Ln,ln,qr,Pr="waterfall"===gn.type,un="funnel"===gn.type;function dn(Bt){return a(qr,qr.c2l(Bt),!0).text}"h"===gn.orientation?(Gn="y",Ln=an,ln="x",qr=Zr):(Gn="x",Ln=Zr,ln="y",qr=an);var cn=Gr[Er],fn={};fn.label=cn.p,fn.labelLabel=fn[Gn+"Label"]=a(Ln,Ln.c2l(cn.p),!0).text;var Nn=u.castOption(gn,cn.i,"text");(0===Nn||Nn)&&(fn.text=Nn),fn.value=cn.s,fn.valueLabel=fn[ln+"Label"]=dn(cn.s);var Fn={};o(Fn,gn,cn.i),Pr&&(fn.delta=+cn.rawS||cn.s,fn.deltaLabel=dn(fn.delta),fn.final=cn.v,fn.finalLabel=dn(fn.final),fn.initial=fn.final-fn.delta,fn.initialLabel=dn(fn.initial)),un&&(fn.value=cn.s,fn.valueLabel=dn(fn.value),fn.percentInitial=cn.begR,fn.percentInitialLabel=u.formatPercent(cn.begR),fn.percentPrevious=cn.difR,fn.percentPreviousLabel=u.formatPercent(cn.difR),fn.percentTotal=cn.sumR,fn.percenTotalLabel=u.formatPercent(cn.sumR));var ar=u.castOption(gn,cn.i,"customdata");return ar&&(fn.customdata=ar),u.texttemplateString(Vn,fn,Sr._d3locale,Fn,fn,gn._meta||{})}(Ue,nr,dr,Tr,wr):_r.textinfo?function(Sr,Gr,Er,Zr){var an=Sr[0].trace,gn="h"===an.orientation,Vn="waterfall"===an.type,Gn="funnel"===an.type;function Ln(Qt){return a(gn?Er:Zr,+Qt,!0).text}var ln,Pr=Sr[Gr],un=an.textinfo.split("+"),dn=[],cn=function(Qt){return-1!==un.indexOf(Qt)};if(cn("label")&&dn.push(a(gn?Zr:Er,Sr[Gr].p,!0).text),cn("text")&&(0===(ln=u.castOption(an,Pr.i,"text"))||ln)&&dn.push(ln),Vn){var Bn=+Pr.rawS||Pr.s,Nn=Pr.v,Fn=Nn-Bn;cn("initial")&&dn.push(Ln(Fn)),cn("delta")&&dn.push(Ln(Bn)),cn("final")&&dn.push(Ln(Nn))}if(Gn){cn("value")&&dn.push(Ln(Pr.s));var ar=0;cn("percent initial")&&ar++,cn("percent previous")&&ar++,cn("percent total")&&ar++;var Bt=ar>1;cn("percent initial")&&(ln=u.formatPercent(Pr.begR),Bt&&(ln+=" of initial"),dn.push(ln)),cn("percent previous")&&(ln=u.formatPercent(Pr.difR),Bt&&(ln+=" of previous"),dn.push(ln)),cn("percent total")&&(ln=u.formatPercent(Pr.sumR),Bt&&(ln+=" of total"),dn.push(ln))}return dn.join("<br>")}(nr,dr,Tr,wr):l.getValue(_r.text,dr),l.coerceString(m,mr));St=function($t,nr){var dr=l.getValue($t.textposition,nr);return l.coerceEnumerated(d,dr)}(Ne,nt);var Re=Ye[nt],Ie=!("stack"===at.mode||"relative"===at.mode)||Re._outmost;if(ke&&"none"!==St&&(!Re.isBlank&&ft!==dt&&Rt!==Et||"auto"!==St&&"inside"!==St)){var Ke=Ue.font,ut=i.getBarColor(Ye[nt],Ne),xt=i.getInsideTextFont(Ne,nt,Ke,ut),gt=i.getOutsideTextFont(Ne,nt,Ke),Pt=Je.datum();it?"log"===Xt.type&&Pt.s0<=0&&(ft=Xt.range[0]<Xt.range[1]?0:Xt._length):"log"===lr.type&&Pt.s0<=0&&(Rt=lr.range[0]<lr.range[1]?lr._length:0);var ct,zt,Ft,Qe,yt,Nt=Math.abs(dt-ft)-2*b,Yt=Math.abs(Et-Rt)-2*b;if("outside"===St&&(Ie||Re.hasB||(St="inside")),"auto"===St&&(Ie?(St="inside",ct=Ze(Je,ke,yt=u.ensureUniformFontSize(Oe,xt)),Qe=(zt=n.bBox(ct.node())).height,(Ft=zt.width)>0&&Qe>0&&(Ft<=Nt&&Qe<=Yt||Ft<=Yt&&Qe<=Nt||(it?Nt>=Ft*(Yt/Qe):Yt>=Qe*(Nt/Ft)))?St="inside":(St="outside",ct.remove(),ct=null)):St="inside"),!ct){var kt=(ct=Ze(Je,ke,yt=u.ensureUniformFontSize(Oe,"outside"===St?gt:xt))).attr("transform");if(ct.attr("transform",""),Ft=(zt=n.bBox(ct.node())).width,Qe=zt.height,ct.attr("transform",kt),Ft<=0||Qe<=0)return void ct.remove()}var Gt,fr=Ne.textangle;(Gt="outside"===St?function($t,nr,dr,Tr,wr,mr){var _r,Sr=!!mr.isHorizontal,Gr=!!mr.constrained,Er=mr.angle||0,Zr=wr.width,an=wr.height,gn=Math.abs(nr-$t),Vn=Math.abs(Tr-dr);_r=Sr?Vn>2*b?b:0:gn>2*b?b:0;var Gn=1;Gr&&(Gn=Sr?Math.min(1,Vn/an):Math.min(1,gn/Zr));var Ln=E(Er),ln=k(wr,Ln),qr=(Sr?ln.x:ln.y)/2,Pr=(wr.left+wr.right)/2,un=(wr.top+wr.bottom)/2,dn=($t+nr)/2,cn=(dr+Tr)/2,fn=0,Bn=0,Nn=Sr?_(nr,$t):_(dr,Tr);return Sr?(dn=nr-Nn*_r,fn=Nn*qr):(cn=Tr+Nn*_r,Bn=-Nn*qr),{textX:Pr,textY:un,targetX:dn,targetY:cn,anchorX:fn,anchorY:Bn,scale:Gn,rotate:Ln}}(ft,dt,Rt,Et,zt,{isHorizontal:it,constrained:"both"===Ne.constraintext||"outside"===Ne.constraintext,angle:fr}):O(ft,dt,Rt,Et,zt,{isHorizontal:it,constrained:"both"===Ne.constraintext||"inside"===Ne.constraintext,angle:fr,anchor:Ne.insidetextanchor})).fontSize=yt.size,f(Ne.type,Gt,Ue),Re.transform=Gt,A(ct,Ue,at,rt).attr("transform",u.getTextTransform(Gt))}else Je.select("text").remove()})(D,S,_e,W,le,Te,he,me,Ae,B,U),S.layerClipId&&n.hideOutsideRangePoint(ue,_e.select("text"),G,X,R.xcalendar,R.ycalendar)}),n.setClipUrl(te,!1===R.cliponaxis?null:S.layerClipId,D)});t.getComponentMethod("errorbars","plot")(D,q,S,B)},toMoveInsideBar:O}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(x,Q,K){"use strict";function p(v,u,y,e,n){var t=u.c2p(e?v.s0:v.p0,!0),a=u.c2p(e?v.s1:v.p1,!0),r=y.c2p(e?v.p0:v.s0,!0),f=y.c2p(e?v.p1:v.s1,!0);return n?[(t+a)/2,(r+f)/2]:e?[a,(r+f)/2]:[(t+a)/2,f]}Q.exports=function(v,u){var y,e=v.cd,n=v.xaxis,t=v.yaxis,a=e[0].trace,r="funnel"===a.type,f="h"===a.orientation,s=[];if(!1===u)for(y=0;y<e.length;y++)e[y].selected=0;else for(y=0;y<e.length;y++){var i=e[y],l="ct"in i?i.ct:p(i,n,t,f,r);u.contains(l,!1,y,v)?(s.push({pointNumber:y,x:n.c2d(i.x),y:t.c2d(i.y)}),i.selected=1):i.selected=0}return s}},{}],661:[function(x,Q,K){"use strict";Q.exports=u;var p=x("../../lib").distinctVals,v=x("../../constants/numerical").BADNUM;function u(y,e){this.traces=y,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var n=1/0,t=[],a=0;a<y.length;a++){for(var r=y[a],f=0;f<r.length;f++){var s=r[f];s.p!==v&&t.push(s.p)}r[0]&&r[0].width1&&(n=Math.min(r[0].width1,n))}this.positions=t;var i=p(t);this.distinctPositions=i.vals,this.minDiff=1===i.vals.length&&n!==1/0?n:Math.min(i.minDiff,n);var l=(e.posAxis||{}).type;"category"!==l&&"multicategory"!==l||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}u.prototype.put=function(y,e){var n=this.getLabel(y,e),t=this.bins[n]||0;return this.bins[n]=t+e,t},u.prototype.get=function(y,e){var n=this.getLabel(y,e);return this.bins[n]||0},u.prototype.getLabel=function(y,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?y:Math.round(y/this.binWidth))}},{"../../constants/numerical":479,"../../lib":503}],662:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/color"),u=x("../../components/drawing"),y=x("../../lib"),e=x("../../registry"),n=x("./uniform_text").resizeText,t=x("./attributes"),a=t.textfont,r=t.insidetextfont,f=t.outsidetextfont,s=x("./helpers");function i(g,w,_){u.pointStyle(g.selectAll("path"),w,_),l(g,w,_)}function l(g,w,_){g.selectAll("text").each(function(A){var T=p.select(this),E=y.ensureUniformFontSize(_,c(T,A,w,_));u.font(T,E)})}function c(g,w,_,A){var T=A._fullLayout.font,E=_.textfont;if(g.classed("bartext-inside")){var k=b(w,_);E=m(_,w.i,T,k)}else g.classed("bartext-outside")&&(E=d(_,w.i,T));return E}function h(g,w,_){return o(a,g.textfont,w,_)}function m(g,w,_,A){var T=h(g,w,_);return(void 0===g._input.textfont||void 0===g._input.textfont.color||Array.isArray(g.textfont.color)&&void 0===g.textfont.color[w])&&(T={color:v.contrast(A),family:T.family,size:T.size}),o(r,g.insidetextfont,w,T)}function d(g,w,_){var A=h(g,w,_);return o(f,g.outsidetextfont,w,A)}function o(g,w,_,A){var T=s.getValue((w=w||{}).family,_),E=s.getValue(w.size,_),k=s.getValue(w.color,_);return{family:s.coerceString(g.family,T,A.family),size:s.coerceNumber(g.size,E,A.size),color:s.coerceColor(g.color,k,A.color)}}function b(g,w){return"waterfall"===w.type?w[g.dir].marker.color:g.mcc||g.mc||w.marker.color}Q.exports={style:function(g){var w=p.select(g).selectAll("g.barlayer").selectAll("g.trace");n(g,w,"bar");var _=w.size(),A=g._fullLayout;w.style("opacity",function(T){return T[0].trace.opacity}).each(function(T){("stack"===A.barmode&&_>1||0===A.bargap&&0===A.bargroupgap&&!T[0].trace.marker.line.width)&&p.select(this).attr("shape-rendering","crispEdges")}),w.selectAll("g.points").each(function(T){i(p.select(this),T[0].trace,g)}),e.getComponentMethod("errorbars","style")(w)},styleTextPoints:l,styleOnSelect:function(g,w,_){var T,E,k,O,D,S,A=w[0].trace;A.selectedpoints?(E=A,k=g,u.selectedPointStyle((T=_).selectAll("path"),E),O=T.selectAll("text"),D=E,S=k,O.each(function(C){var z,B=p.select(this);if(C.selected){z=y.ensureUniformFontSize(S,c(B,C,D,S));var U=D.selected.textfont&&D.selected.textfont.color;U&&(z.color=U),u.font(B,z)}else u.selectedTextStyle(B,D)})):(i(_,A,g),e.getComponentMethod("errorbars","style")(_))},getInsideTextFont:m,getOutsideTextFont:d,getBarColor:b,resizeText:n}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(x,Q,K){"use strict";var p=x("../../components/color"),v=x("../../components/colorscale/helpers").hasColorscale,u=x("../../components/colorscale/defaults"),y=x("../../lib").coercePattern;Q.exports=function(e,n,t,a,r){var f=t("marker.color",a),s=v(e,"marker");s&&u(e,n,r,t,{prefix:"marker.",cLetter:"c"}),t("marker.line.color",p.defaultLine),v(e,"marker.line")&&u(e,n,r,t,{prefix:"marker.line.",cLetter:"c"}),t("marker.line.width"),t("marker.opacity"),y(t,"marker.pattern",f,s),t("selected.marker.color"),t("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib");function u(y){return"_"+y+"Text_minsize"}Q.exports={recordMinTextSize:function(y,e,n){if(n.uniformtext.mode){var t=u(y),a=n.uniformtext.minsize,r=e.scale*e.fontSize;e.hide=r<a,n[t]=n[t]||1/0,e.hide||(n[t]=Math.min(n[t],Math.max(r,a)))}},clearMinTextSize:function(y,e){e[u(y)]=void 0},resizeText:function(y,e,n){var t=y._fullLayout,a=t["_"+n+"Text_minsize"];if(a){var r,f="hide"===t.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":r="g.slice";break;case"treemap":case"icicle":r="g.slice, g.pathbar";break;default:r="g.points > g.point"}e.selectAll(r).each(function(s){var i=s.transform;i&&(i.scale=f&&i.hide?0:a/i.fontSize,p.select(this).select("text").attr("transform",v.getTextTransform(i)))})}}}},{"../../lib":503,"@plotly/d3":58}],665:[function(x,Q,K){"use strict";var p=x("../../plots/template_attributes").hovertemplateAttrs,v=x("../../lib/extend").extendFlat,u=x("../scatterpolar/attributes"),y=x("../bar/attributes");Q.exports={r:u.r,theta:u.theta,r0:u.r0,dr:u.dr,theta0:u.theta0,dtheta:u.dtheta,thetaunit:u.thetaunit,base:v({},y.base,{}),offset:v({},y.offset,{}),width:v({},y.width,{}),text:v({},y.text,{}),hovertext:v({},y.hovertext,{}),marker:y.marker,hoverinfo:u.hoverinfo,hovertemplate:p(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":999}],666:[function(x,Q,K){"use strict";var p=x("../../components/colorscale/helpers").hasColorscale,v=x("../../components/colorscale/calc"),u=x("../bar/arrays_to_calcdata"),y=x("../bar/cross_trace_calc").setGroupPositions,e=x("../scatter/calc_selection"),n=x("../../registry").traceIs,t=x("../../lib").extendFlat;Q.exports={calc:function(a,r){for(var f=a._fullLayout,s=r.subplot,l=f[s].angularaxis,c=f[s].radialaxis.makeCalcdata(r,"r"),h=l.makeCalcdata(r,"theta"),m=r._length,d=new Array(m),o=c,b=h,g=0;g<m;g++)d[g]={p:b[g],s:o[g]};function w(_){var A=r[_];void 0!==A&&(r["_"+_]=Array.isArray(A)?l.makeCalcdata(r,_):l.d2c(A,r.thetaunit))}return"linear"===l.type&&(w("width"),w("offset")),p(r,"marker")&&v(a,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),p(r,"marker.line")&&v(a,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),u(d,r),e(d,r),d},crossTraceCalc:function(a,r,f){for(var s=a.calcdata,i=[],l=0;l<s.length;l++){var c=s[l],h=c[0].trace;!0===h.visible&&n(h,"bar")&&h.subplot===f&&i.push(c)}var m=t({},r.radialaxis,{_id:"x"});y(a,r.angularaxis,m,i,{mode:r.barmode,norm:r.barnorm,gap:r.bargap,groupgap:r.bargroupgap})}}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":927}],667:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../scatterpolar/defaults").handleRThetaDefaults,u=x("../bar/style_defaults"),y=x("./attributes");Q.exports=function(e,n,t,a){function r(f,s){return p.coerce(e,n,y,f,s)}v(e,n,a,r)?(r("thetaunit"),r("base"),r("offset"),r("width"),r("text"),r("hovertext"),r("hovertemplate"),u(e,n,r,t,a),p.coerceSelectionMarkerOpacity(n,r)):n.visible=!1}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1001,"./attributes":665}],668:[function(x,Q,K){"use strict";var p=x("../../components/fx"),v=x("../../lib"),u=x("../bar/hover").getTraceColor,y=v.fillText,e=x("../scatterpolar/hover").makeHoverPointText,n=x("../../plots/polar/helpers").isPtInsidePolygon;Q.exports=function(t,a,r){var f=t.cd,s=f[0].trace,i=t.subplot,l=i.radialAxis,h=i.vangles,m=h?n:v.isPtInsideSector,d=t.maxHoverDistance,o=i.angularAxis._period||2*Math.PI,b=Math.abs(l.g2p(Math.sqrt(a*a+r*r))),g=Math.atan2(r,a);if(l.range[0]>l.range[1]&&(g+=Math.PI),p.getClosest(f,function(A){return m(b,g,[A.rp0,A.rp1],[A.thetag0,A.thetag1],h)?d+Math.min(1,Math.abs(A.thetag1-A.thetag0)/o)-1+(A.rp1-b)/(A.rp1-A.rp0)-1:1/0},t),!1!==t.index){var w=f[t.index];t.x0=t.x1=w.ct[0],t.y0=t.y1=w.ct[1];var _=v.extendFlat({},w,{r:w.s,theta:w.p});return y(w,s,t),e(_,s,i,t),t.hovertemplate=s.hovertemplate,t.color=u(s,w),t.xLabelVal=t.yLabelVal=void 0,w.s<0&&(t.idealAlign="left"),[t]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1003}],669:[function(x,Q,K){"use strict";Q.exports={moduleType:"trace",name:"barpolar",basePlotModule:x("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("../scatterpolar/format_labels"),style:x("../bar/style").style,styleOnSelect:x("../bar/style").styleOnSelect,hoverPoints:x("./hover"),selectPoints:x("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":943,"../scatterpolar/format_labels":1002,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(x,Q,K){"use strict";Q.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./layout_attributes");Q.exports=function(u,y,e){var n,t={};function a(s,i){return p.coerce(u[n]||{},y[n],v,s,i)}for(var r=0;r<e.length;r++){var f=e[r];"barpolar"===f.type&&!0===f.visible&&(t[n=f.subplot]||(a("barmode"),a("bargap"),t[n]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("fast-isnumeric"),u=x("../../lib"),y=x("../../components/drawing"),e=x("../../plots/polar/helpers");Q.exports=function(n,t,a){var h,m,d,r=t.xaxis,f=t.yaxis,s=t.radialAxis,i=t.angularAxis,l=(m=(h=t).cxx,d=h.cyy,h.vangles?function(o,b,g,w){var _,A;u.angleDelta(g,w)>0?(_=g,A=w):(_=w,A=g);var T=[e.findEnclosingVertexAngles(_,h.vangles)[0],(_+A)/2,e.findEnclosingVertexAngles(A,h.vangles)[1]];return e.pathPolygonAnnulus(o,b,_,A,T,m,d)}:function(o,b,g,w){return u.pathAnnulus(o,b,g,w,m,d)}),c=t.layers.frontplot.select("g.barlayer");u.makeTraceGroups(c,a,"trace bars").each(function(){var h=p.select(this),m=u.ensureSingle(h,"g","points").selectAll("g.point").data(u.identity);m.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),m.exit().remove(),m.each(function(d){var o,b=p.select(this),g=d.rp0=s.c2p(d.s0),w=d.rp1=s.c2p(d.s1),_=d.thetag0=i.c2g(d.p0),A=d.thetag1=i.c2g(d.p1);if(v(g)&&v(w)&&v(_)&&v(A)&&g!==w&&_!==A){var T=s.c2g(d.s1),E=(_+A)/2;d.ct=[r.c2p(T*Math.cos(E)),f.c2p(T*Math.sin(E))],o=l(g,w,_,A)}else o="M0,0Z";u.ensureSingle(b,"path").attr("d",o)}),y.setClipUrl(h,t._hasClipOnAxisFalse?t.clipIds.forTraces:null,n)})}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(x,Q,K){"use strict";var p=x("../scatter/attributes"),v=x("../bar/attributes"),u=x("../../components/color/attributes"),y=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=x("../../plots/template_attributes").hovertemplateAttrs,n=x("../../lib/extend").extendFlat,t=p.marker,a=t.line;Q.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:p.xperiod,yperiod:p.yperiod,xperiod0:p.xperiod0,yperiod0:p.yperiod0,xperiodalignment:p.xperiodalignment,yperiodalignment:p.yperiodalignment,xhoverformat:y("x"),yhoverformat:y("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:n({},t.symbol,{arrayOk:!1,editType:"plot"}),opacity:n({},t.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:n({},t.size,{arrayOk:!1,editType:"calc"}),color:n({},t.color,{arrayOk:!1,editType:"style"}),line:{color:n({},a.color,{arrayOk:!1,dflt:u.defaultLine,editType:"style"}),width:n({},a.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:p.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:v.offsetgroup,alignmentgroup:v.alignmentgroup,selected:{marker:p.selected.marker,editType:"style"},unselected:{marker:p.unselected.marker,editType:"style"},text:n({},p.text,{}),hovertext:n({},p.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":925}],674:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../plots/cartesian/axes"),u=x("../../plots/cartesian/align_period"),y=x("../../lib"),e=x("../../constants/numerical").BADNUM,n=y._;Q.exports=function(m,d){var o,b,g,w,_,A,T,E=m._fullLayout,k=v.getFromId(m,d.xaxis||"x"),O=v.getFromId(m,d.yaxis||"y"),D=[],S="violin"===d.type?"_numViolins":"_numBoxes";"h"===d.orientation?(g=k,w="x",_=O,A="y",T=!!d.yperiodalignment):(g=O,w="y",_=k,A="x",T=!!d.xperiodalignment);var C,z,B,U,G,X,Z=function(Je,Ye,nt,ft){var dt,Rt=Ye+"0"in Je;if(Ye in Je||Rt&&"d"+Ye in Je){var at=nt.makeCalcdata(Je,Ye);return[u(Je,nt,Ye,at).vals,at]}dt=Rt?Je[Ye+"0"]:"name"in Je&&("category"===nt.type||p(Je.name)&&-1!==["linear","log"].indexOf(nt.type)||y.isDateTime(Je.name)&&"date"===nt.type)?Je.name:ft;for(var rt="multicategory"===nt.type?nt.r2c_just_indices(dt):nt.d2c(dt,0,Je[Ye+"calendar"]),St=Je._length,Xt=new Array(St),lr=0;lr<St;lr++)Xt[lr]=rt;return[Xt]}(d,A,_,E[S]),q=Z[0],W=Z[1],te=y.distinctVals(q,_),R=te.vals,N=te.minDiff/2,V="all"===(d.boxpoints||d.points)?y.identity:function(Je){return Je.v<C.lf||Je.v>C.uf};if(d._hasPreCompStats){var ee=d[w],j=function(Je){return g.d2c((d[Je]||[])[o])},J=1/0,$=-1/0;for(o=0;o<d._length;o++){var re=q[o];if(p(re)){if((C={}).pos=C[A]=re,T&&W&&(C.orig_p=W[o]),C.q1=j("q1"),C.med=j("median"),C.q3=j("q3"),z=[],ee&&y.isArrayOrTypedArray(ee[o]))for(b=0;b<ee[o].length;b++)(X=g.d2c(ee[o][b]))!==e&&(a(G={v:X,i:[o,b]},d,[o,b]),z.push(G));if(C.pts=z.sort(r),U=(B=C[w]=z.map(f)).length,C.med!==e&&C.q1!==e&&C.q3!==e&&C.med>=C.q1&&C.q3>=C.med){var ne=j("lowerfence");C.lf=ne!==e&&ne<=C.q1?ne:s(C,B,U);var se=j("upperfence");C.uf=se!==e&&se>=C.q3?se:i(C,B,U);var ie=j("mean");C.mean=ie!==e?ie:U?y.mean(B,U):(C.q1+C.q3)/2;var ue=j("sd");C.sd=ie!==e&&ue>=0?ue:U?y.stdev(B,U,C.mean):C.q3-C.q1,C.lo=l(C),C.uo=c(C);var le=j("notchspan");le=le!==e&&le>0?le:h(C,U),C.ln=C.med-le,C.un=C.med+le;var de=C.lf,ve=C.uf;d.boxpoints&&B.length&&(de=Math.min(de,B[0]),ve=Math.max(ve,B[U-1])),d.notched&&(de=Math.min(de,C.ln),ve=Math.max(ve,C.un)),C.min=de,C.max=ve}else{var _e;y.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+C.q1,"median = "+C.med,"q3 = "+C.q3].join("\n")),C.med=_e=C.med!==e?C.med:C.q1!==e?C.q3!==e?(C.q1+C.q3)/2:C.q1:C.q3!==e?C.q3:0,C.q1=C.q3=_e,C.lf=C.uf=_e,C.mean=C.sd=_e,C.ln=C.un=_e,C.min=C.max=_e}J=Math.min(J,C.min),$=Math.max($,C.max),C.pts2=z.filter(V),D.push(C)}}d._extremes[g._id]=v.findExtremes(g,[J,$],{padded:!0})}else{var be=g.makeCalcdata(d,w),Te=function(Je,Ye){for(var nt=Je.length,ft=new Array(nt+1),dt=0;dt<nt;dt++)ft[dt]=Je[dt]-Ye;return ft[nt]=Je[nt-1]+Ye,ft}(R,N),he=R.length,me=function(Je){for(var Ye=new Array(Je),nt=0;nt<Je;nt++)Ye[nt]=[];return Ye}(he);for(o=0;o<d._length;o++)if(p(X=be[o])){var Ae=y.findBin(q[o],Te);Ae>=0&&Ae<he&&(a(G={v:X,i:o},d,o),me[Ae].push(G))}var we=1/0,Se=-1/0,Pe=d.quartilemethod,ze="exclusive"===Pe,He="inclusive"===Pe;for(o=0;o<he;o++)if(me[o].length>0){var tt,Oe;(C={}).pos=C[A]=R[o],z=C.pts=me[o].sort(r),U=(B=C[w]=z.map(f)).length,C.min=B[0],C.max=B[U-1],C.mean=y.mean(B,U),C.sd=y.stdev(B,U,C.mean),C.med=y.interp(B,.5),U%2&&(ze||He)?(ze?(tt=B.slice(0,U/2),Oe=B.slice(U/2+1)):He&&(tt=B.slice(0,U/2+1),Oe=B.slice(U/2)),C.q1=y.interp(tt,.5),C.q3=y.interp(Oe,.5)):(C.q1=y.interp(B,.25),C.q3=y.interp(B,.75)),C.lf=s(C,B,U),C.uf=i(C,B,U),C.lo=l(C),C.uo=c(C);var Be=h(C,U);C.ln=C.med-Be,C.un=C.med+Be,we=Math.min(we,C.ln),Se=Math.max(Se,C.un),C.pts2=z.filter(V),D.push(C)}d._extremes[g._id]=v.findExtremes(g,d.notched?be.concat([we,Se]):be,{padded:!0})}return function(Je,Ye){if(y.isArrayOrTypedArray(Ye.selectedpoints))for(var nt=0;nt<Je.length;nt++){for(var ft=Je[nt].pts||[],dt={},Rt=0;Rt<ft.length;Rt++)dt[ft[Rt].i]=Rt;y.tagSelected(ft,Ye,dt)}}(D,d),D.length>0?(D[0].t={num:E[S],dPos:N,posLetter:A,valLetter:w,labels:{med:n(m,"median:"),min:n(m,"min:"),q1:n(m,"q1:"),q3:n(m,"q3:"),max:n(m,"max:"),mean:n(m,"sd"===d.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:n(m,"lower fence:"),uf:n(m,"upper fence:")}},E[S]++,D):[{t:{empty:!0}}]};var t={text:"tx",hovertext:"htx"};function a(m,d,o){for(var b in t)y.isArrayOrTypedArray(d[b])&&(Array.isArray(o)?y.isArrayOrTypedArray(d[b][o[0]])&&(m[t[b]]=d[b][o[0]][o[1]]):m[t[b]]=d[b][o])}function r(m,d){return m.v-d.v}function f(m){return m.v}function s(m,d,o){return 0===o?m.q1:Math.min(m.q1,d[Math.min(y.findBin(2.5*m.q1-1.5*m.q3,d,!0)+1,o-1)])}function i(m,d,o){return 0===o?m.q3:Math.max(m.q3,d[Math.max(y.findBin(2.5*m.q3-1.5*m.q1,d),0)])}function l(m){return 4*m.q1-3*m.q3}function c(m){return 4*m.q3-3*m.q1}function h(m,d){return 0===d?0:1.57*(m.q3-m.q1)/Math.sqrt(d)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes"),v=x("../../lib"),u=x("../../plots/cartesian/constraints").getAxisGroup,y=["v","h"];function e(n,t,a,r){var f,s,i,l=t.calcdata,c=t._fullLayout,h=r._id,m=h.charAt(0),d=[],o=0;for(f=0;f<a.length;f++)for(i=l[a[f]],s=0;s<i.length;s++)d.push(r.c2l(i[s].pos,!0)),o+=(i[s].pts2||[]).length;if(d.length){var b=v.distinctVals(d);"category"!==r.type&&"multicategory"!==r.type||(b.minDiff=1);var g=b.minDiff/2;p.minDtick(r,b.minDiff,b.vals[0],!0);var w=c["violin"===n?"_numViolins":"_numBoxes"],_="group"===c[n+"mode"]&&w>1,A=1-c[n+"gap"],T=1-c[n+"groupgap"];for(f=0;f<a.length;f++){var E,k,O,D,S,C,z=(i=l[a[f]])[0].trace,B=i[0].t,U=z.width,G=z.side;if(U)E=k=D=U/2,O=0;else if(E=g,_){var X=u(c,r._id)+z.orientation,q=Object.keys(((c._alignmentOpts[X]||{})[z.alignmentgroup]||{}).offsetGroups||{}).length,W=q||w;k=E*A*T/W,O=2*E*(((q?z._offsetIndex:B.num)+.5)/W-.5)*A,D=E*A/W}else k=E*A*T,O=0,D=E;B.dPos=E,B.bPos=O,B.bdPos=k,B.wHover=D;var te,R,N,V,ee,j,J=O+k,$=Boolean(U);if("positive"===G?(S=E*(U?1:.5),te=J,C=te=O):"negative"===G?(S=te=O,C=E*(U?1:.5),R=J):(S=C=E,te=R=J),(z.boxpoints||z.points)&&o>0){var re=z.pointpos,ne=z.jitter,se=z.marker.size/2,ie=0;re+ne>=0&&((ie=J*(re+ne))>S?($=!0,ee=se,N=ie):ie>te&&(ee=se,N=S)),ie<=S&&(N=S);var ue=0;re-ne<=0&&((ue=-J*(re-ne))>C?($=!0,j=se,V=ue):ue>R&&(j=se,V=C)),ue<=C&&(V=C)}else N=S,V=C;var le=new Array(i.length);for(s=0;s<i.length;s++)le[s]=i[s].pos;z._extremes[h]=p.findExtremes(r,le,{padded:$,vpadminus:V,vpadplus:N,vpadLinearized:!0,ppadminus:{x:j,y:ee}[m],ppadplus:{x:ee,y:j}[m]})}}}Q.exports={crossTraceCalc:function(n,t){for(var a=n.calcdata,r=t.xaxis,f=t.yaxis,s=0;s<y.length;s++){for(var i=y[s],l="h"===i?f:r,c=[],h=0;h<a.length;h++){var m=a[h],o=m[0].trace;!0!==o.visible||"box"!==o.type&&"candlestick"!==o.type||m[0].t.empty||(o.orientation||"v")!==i||o.xaxis!==r._id||o.yaxis!==f._id||c.push(h)}e("box",n,c,l)}},setPositionOffset:e}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../registry"),u=x("../../components/color"),y=x("../scatter/period_defaults"),e=x("../bar/defaults").handleGroupingDefaults,n=x("../../plots/cartesian/axis_autotype"),t=x("./attributes");function a(f,s,i,l){function c(G){var X=0;return G&&G.length&&(X+=1,p.isArrayOrTypedArray(G[0])&&G[0].length&&(X+=1)),X}function h(G){return p.validate(f[G],t[G])}var m,d=i("y"),o=i("x");if("box"===s.type){var b=i("q1"),g=i("median"),w=i("q3");s._hasPreCompStats=b&&b.length&&g&&g.length&&w&&w.length,m=Math.min(p.minRowLength(b),p.minRowLength(g),p.minRowLength(w))}var _,A,T=c(d),E=c(o),k=T&&p.minRowLength(d),O=E&&p.minRowLength(o),D=l.calendar,S={autotypenumbers:l.autotypenumbers};if(s._hasPreCompStats)switch(String(E)+String(T)){case"00":var C=h("x0")||h("dx");_=!h("y0")&&!h("dy")||C?"v":"h",A=m;break;case"10":_="v",A=Math.min(m,O);break;case"20":_="h",A=Math.min(m,o.length);break;case"01":_="h",A=Math.min(m,k);break;case"02":_="v",A=Math.min(m,d.length);break;case"12":_="v",A=Math.min(m,O,d.length);break;case"21":_="h",A=Math.min(m,o.length,k);break;case"11":A=0;break;case"22":var z,B=!1;for(z=0;z<o.length;z++)if("category"===n(o[z],D,S)){B=!0;break}if(B)_="v",A=Math.min(m,O,d.length);else{for(z=0;z<d.length;z++)if("category"===n(d[z],D,S)){B=!0;break}B?(_="h",A=Math.min(m,o.length,k)):(_="v",A=Math.min(m,O,d.length))}}else T>0?(_="v",A=E>0?Math.min(O,k):Math.min(k)):E>0?(_="h",A=Math.min(O)):A=0;if(A){s._length=A;var U=i("orientation",_);s._hasPreCompStats?"v"===U&&0===E?(i("x0",0),i("dx",1)):"h"===U&&0===T&&(i("y0",0),i("dy",1)):"v"===U&&0===E?i("x0"):"h"===U&&0===T&&i("y0"),v.getComponentMethod("calendars","handleTraceDefaults")(f,s,["x","y"],l)}else s.visible=!1}function r(f,s,i,l){var c=l.prefix,h=p.coerce2(f,s,t,"marker.outliercolor"),m=i("marker.line.outliercolor"),d="outliers";s._hasPreCompStats?d="all":(h||m)&&(d="suspectedoutliers");var o=i(c+"points",d);o?(i("jitter","all"===o?.3:0),i("pointpos","all"===o?-1.5:0),i("marker.symbol"),i("marker.opacity"),i("marker.size"),i("marker.color",s.line.color),i("marker.line.color"),i("marker.line.width"),"suspectedoutliers"===o&&(i("marker.line.outliercolor",s.marker.color),i("marker.line.outlierwidth")),i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size"),i("text"),i("hovertext")):delete s.marker;var b=i("hoveron");"all"!==b&&-1===b.indexOf("points")||i("hovertemplate"),p.coerceSelectionMarkerOpacity(s,i)}Q.exports={supplyDefaults:function(f,s,i,l){function c(w,_){return p.coerce(f,s,t,w,_)}if(a(f,s,c,l),!1!==s.visible){y(f,s,l,c),c("xhoverformat"),c("yhoverformat");var h=s._hasPreCompStats;h&&(c("lowerfence"),c("upperfence")),c("line.color",(f.marker||{}).color||i),c("line.width"),c("fillcolor",u.addOpacity(s.line.color,.5));var m=!1;if(h){var d=c("mean"),o=c("sd");d&&d.length&&(m=!0,o&&o.length&&(m="sd"))}c("boxmean",m),c("whiskerwidth"),c("width"),c("quartilemethod");var b=!1;if(h){var g=c("notchspan");g&&g.length&&(b=!0)}else p.validate(f.notchwidth,t.notchwidth)&&(b=!0);c("notched",b)&&c("notchwidth"),r(f,s,c,{prefix:"box"})}},crossTraceDefaults:function(f,s){var l;function c(d){return p.coerce(l._input,l,t,d)}for(var h=0;h<f.length;h++){var m=(l=f[h]).type;"box"!==m&&"violin"!==m||"group"===s[m+"mode"]&&e(l._input,l,s,c)}},handleSampleDefaults:a,handlePointsDefaults:r}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":945,"./attributes":673}],677:[function(x,Q,K){"use strict";Q.exports=function(p,v){return v.hoverOnBox&&(p.hoverOnBox=v.hoverOnBox),"xVal"in v&&(p.x=v.xVal),"yVal"in v&&(p.y=v.yVal),v.xa&&(p.xaxis=v.xa),v.ya&&(p.yaxis=v.ya),p}},{}],678:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes"),v=x("../../lib"),u=x("../../components/fx"),y=x("../../components/color"),e=v.fillText;function n(a,r,f,s){var i,l,c,h,m,d,o,b,g,w,_,A,T,E,k=a.cd,O=a.xa,D=a.ya,S=k[0].trace,C=k[0].t,z="violin"===S.type,B=[],U=C.bdPos,G=C.wHover,X=function(ie){return c.c2l(ie.pos)+C.bPos-c.c2l(d)};z&&"both"!==S.side?("positive"===S.side&&(g=function(ie){var ue=X(ie);return u.inbox(ue,ue+G,w)},A=U,T=0),"negative"===S.side&&(g=function(ie){var ue=X(ie);return u.inbox(ue-G,ue,w)},A=0,T=U)):(g=function(ie){var ue=X(ie);return u.inbox(ue-G,ue+G,w)},A=T=U),E=z?function(ie){return u.inbox(ie.span[0]-m,ie.span[1]-m,w)}:function(ie){return u.inbox(ie.min-m,ie.max-m,w)},"h"===S.orientation?(m=r,d=f,o=E,b=g,i="y",c=D,l="x",h=O):(m=f,d=r,o=g,b=E,i="x",c=O,l="y",h=D);var Z=Math.min(1,U/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function q(ie){return(o(ie)+b(ie))/2}w=a.maxHoverDistance-Z,_=a.maxSpikeDistance-Z;var W=u.getDistanceFunction(s,o,b,q);if(u.getClosest(k,W,a),!1===a.index)return[];var te=k[a.index],R=S.line.color,N=(S.marker||{}).color;a.color=y.opacity(R)&&S.line.width?R:y.opacity(N)&&S.boxpoints?N:S.fillcolor,a[i+"0"]=c.c2p(te.pos+C.bPos-T,!0),a[i+"1"]=c.c2p(te.pos+C.bPos+A,!0),a[i+"LabelVal"]=void 0!==te.orig_p?te.orig_p:te.pos;var V=i+"Spike";a.spikeDistance=q(te)*_/w,a[V]=c.c2p(te.pos,!0);var ee={},j=["med","q1","q3","min","max"];(S.boxmean||(S.meanline||{}).visible)&&j.push("mean"),(S.boxpoints||S.points)&&j.push("lf","uf");for(var J=0;J<j.length;J++){var $=j[J];if($ in te&&!(te[$]in ee)){ee[te[$]]=!0;var re=te[$],ne=h.c2p(re,!0),se=v.extendFlat({},a);se.attr=$,se[l+"0"]=se[l+"1"]=ne,se[l+"LabelVal"]=re,se[l+"Label"]=(C.labels?C.labels[$]+" ":"")+p.hoverLabelText(h,re,S[l+"hoverformat"]),se.hoverOnBox=!0,"mean"===$&&"sd"in te&&"sd"===S.boxmean&&(se[l+"err"]=te.sd),a.name="",a.spikeDistance=void 0,a[V]=void 0,se.hovertemplate=!1,B.push(se)}}return B}function t(a,r,f){for(var s,i,l,c=a.cd,h=a.xa,m=a.ya,d=c[0].trace,o=h.c2p(r),b=m.c2p(f),g=u.quadrature(function(z){var B=Math.max(3,z.mrc||0);return Math.max(Math.abs(h.c2p(z.x)-o)-B,1-3/B)},function(z){var B=Math.max(3,z.mrc||0);return Math.max(Math.abs(m.c2p(z.y)-b)-B,1-3/B)}),w=!1,_=0;_<c.length;_++){i=c[_];for(var A=0;A<(i.pts||[]).length;A++){var T=g(l=i.pts[A]);T<=a.distance&&(a.distance=T,w=[_,A])}}if(!w)return!1;l=(i=c[w[0]]).pts[w[1]];var E=h.c2p(l.x,!0),k=m.c2p(l.y,!0),O=l.mrc||1;s=v.extendFlat({},a,{index:l.i,color:(d.marker||{}).color,name:d.name,x0:E-O,x1:E+O,y0:k-O,y1:k+O,spikeDistance:a.distance,hovertemplate:d.hovertemplate});var D,S=i.orig_p,C=void 0!==S?S:i.pos;return"h"===d.orientation?(D=m,s.xLabelVal=l.x,s.yLabelVal=C):(D=h,s.xLabelVal=C,s.yLabelVal=l.y),s[D._id.charAt(0)+"Spike"]=D.c2p(i.pos,!0),e(l,d,s),s}Q.exports={hoverPoints:function(a,r,f,s){var i,l=a.cd[0].trace.hoveron,c=[];return-1!==l.indexOf("boxes")&&(c=c.concat(n(a,r,f,s))),-1!==l.indexOf("points")&&(i=t(a,r,f)),"closest"===s?i?[i]:c:(i&&c.push(i),c)},hoverOnBoxes:n,hoverOnPoints:t}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults").supplyDefaults,crossTraceDefaults:x("./defaults").crossTraceDefaults,supplyLayoutDefaults:x("./layout_defaults").supplyLayoutDefaults,calc:x("./calc"),crossTraceCalc:x("./cross_trace_calc").crossTraceCalc,plot:x("./plot").plot,style:x("./style").style,styleOnSelect:x("./style").styleOnSelect,hoverPoints:x("./hover").hoverPoints,eventData:x("./event_data"),selectPoints:x("./select"),moduleType:"trace",name:"box",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(x,Q,K){"use strict";Q.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../lib"),u=x("./layout_attributes");function y(e,n,t,a,r){for(var f=r+"Layout",s=!1,i=0;i<t.length;i++)if(p.traceIs(t[i],f)){s=!0;break}s&&(a(r+"mode"),a(r+"gap"),a(r+"groupgap"))}Q.exports={supplyLayoutDefaults:function(e,n,t){y(0,0,t,function(a,r){return v.coerce(e,n,u,a,r)},"box")},_supply:y}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=x("../../components/drawing");function y(t,a,r,f){var s,i,l="h"===r.orientation,c=a.val,h=a.pos,m=!!h.rangebreaks,d=f.bPos,o=f.wdPos||0,b=f.bPosPxOffset||0,g=r.whiskerwidth||0,w=r.notched||!1,_=w?1-2*r.notchwidth:1;Array.isArray(f.bdPos)?(s=f.bdPos[0],i=f.bdPos[1]):(s=f.bdPos,i=f.bdPos);var A=t.selectAll("path.box").data("violin"!==r.type||r.box.visible?v.identity:[]);A.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),A.exit().remove(),A.each(function(T){if(T.empty)return"M0,0Z";var E=h.c2l(T.pos+d,!0),k=h.l2p(E-s)+b,O=h.l2p(E+i)+b,D=m?(k+O)/2:h.l2p(E)+b,S=r.whiskerwidth,C=m?k*S+(1-S)*D:h.l2p(E-o)+b,z=m?O*S+(1-S)*D:h.l2p(E+o)+b,B=h.l2p(E-s*_)+b,U=h.l2p(E+i*_)+b,G=c.c2p(T.q1,!0),X=c.c2p(T.q3,!0),Z=v.constrain(c.c2p(T.med,!0),Math.min(G,X)+1,Math.max(G,X)-1),q=void 0===T.lf||!1===r.boxpoints,W=c.c2p(q?T.min:T.lf,!0),te=c.c2p(q?T.max:T.uf,!0),R=c.c2p(T.ln,!0),N=c.c2p(T.un,!0);l?p.select(this).attr("d","M"+Z+","+B+"V"+U+"M"+G+","+k+"V"+O+(w?"H"+R+"L"+Z+","+U+"L"+N+","+O:"")+"H"+X+"V"+k+(w?"H"+N+"L"+Z+","+B+"L"+R+","+k:"")+"ZM"+G+","+D+"H"+W+"M"+X+","+D+"H"+te+(0===g?"":"M"+W+","+C+"V"+z+"M"+te+","+C+"V"+z)):p.select(this).attr("d","M"+B+","+Z+"H"+U+"M"+k+","+G+"H"+O+(w?"V"+R+"L"+U+","+Z+"L"+O+","+N:"")+"V"+X+"H"+k+(w?"V"+N+"L"+B+","+Z+"L"+k+","+R:"")+"ZM"+D+","+G+"V"+W+"M"+D+","+X+"V"+te+(0===g?"":"M"+C+","+W+"H"+z+"M"+C+","+te+"H"+z))})}function e(t,a,r,f){var s=a.x,i=a.y,l=f.bdPos,c=f.bPos,h=r.boxpoints||r.points;v.seedPseudoRandom();var m=t.selectAll("g.points").data(h?function(o){return o.forEach(function(b){b.t=f,b.trace=r}),o}:[]);m.enter().append("g").attr("class","points"),m.exit().remove();var d=m.selectAll("path").data(function(o){var b,g,w=o.pts2,_=Math.max((o.max-o.min)/10,o.q3-o.q1),A=1e-9*_,T=.01*_,E=[],k=0;if(r.jitter){if(0===_)for(k=1,E=new Array(w.length),b=0;b<w.length;b++)E[b]=1;else for(b=0;b<w.length;b++){var O=Math.max(0,b-5),D=w[O].v,S=Math.min(w.length-1,b+5),C=w[S].v;"all"!==h&&(w[b].v<o.lf?C=Math.min(C,o.lf):D=Math.max(D,o.uf));var z=Math.sqrt(T*(S-O)/(C-D+A))||0;z=v.constrain(Math.abs(z),0,1),E.push(z),k=Math.max(z,k)}g=2*r.jitter/(k||1)}for(b=0;b<w.length;b++){var B=w[b],U=B.v,G=r.jitter?g*E[b]*(v.pseudoRandom()-.5):0,X=o.pos+c+l*(r.pointpos+G);"h"===r.orientation?(B.y=X,B.x=U):(B.x=X,B.y=U),"suspectedoutliers"===h&&U<o.uo&&U>o.lo&&(B.so=!0)}return w});d.enter().append("path").classed("point",!0),d.exit().remove(),d.call(u.translatePoints,s,i)}function n(t,a,r,f){var s,i,l=a.val,c=a.pos,h=!!c.rangebreaks,m=f.bPos,d=f.bPosPxOffset||0,o=r.boxmean||(r.meanline||{}).visible;Array.isArray(f.bdPos)?(s=f.bdPos[0],i=f.bdPos[1]):(s=f.bdPos,i=f.bdPos);var b=t.selectAll("path.mean").data("box"===r.type&&r.boxmean||"violin"===r.type&&r.box.visible&&r.meanline.visible?v.identity:[]);b.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),b.exit().remove(),b.each(function(g){var w=c.c2l(g.pos+m,!0),_=c.l2p(w-s)+d,A=c.l2p(w+i)+d,T=h?(_+A)/2:c.l2p(w)+d,E=l.c2p(g.mean,!0),k=l.c2p(g.mean-g.sd,!0),O=l.c2p(g.mean+g.sd,!0);"h"===r.orientation?p.select(this).attr("d","M"+E+","+_+"V"+A+("sd"===o?"m0,0L"+k+","+T+"L"+E+","+_+"L"+O+","+T+"Z":"")):p.select(this).attr("d","M"+_+","+E+"H"+A+("sd"===o?"m0,0L"+T+","+k+"L"+_+","+E+"L"+T+","+O+"Z":""))})}Q.exports={plot:function(t,a,r,f){var s=a.xaxis,i=a.yaxis;v.makeTraceGroups(f,r,"trace boxes").each(function(l){var c,h,m=p.select(this),d=l[0],o=d.t,b=d.trace;o.wdPos=o.bdPos*b.whiskerwidth,!0!==b.visible||o.empty?m.remove():("h"===b.orientation?(c=i,h=s):(c=s,h=i),y(m,{pos:c,val:h},b,o),e(m,{x:s,y:i},b,o),n(m,{pos:c,val:h},b,o))})},plotBoxAndWhiskers:y,plotPoints:e,plotBoxMean:n}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(x,Q,K){"use strict";Q.exports=function(p,v){var u,y,e=p.cd,n=p.xaxis,t=p.yaxis,a=[];if(!1===v)for(u=0;u<e.length;u++)for(y=0;y<(e[u].pts||[]).length;y++)e[u].pts[y].selected=0;else for(u=0;u<e.length;u++)for(y=0;y<(e[u].pts||[]).length;y++){var r=e[u].pts[y],f=n.c2p(r.x),s=t.c2p(r.y);v.contains([f,s],null,r.i,p)?(a.push({pointNumber:r.i,x:n.c2d(r.x),y:t.c2d(r.y)}),r.selected=1):r.selected=0}return a}},{}],684:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/color"),u=x("../../components/drawing");Q.exports={style:function(y,e,n){var t=n||p.select(y).selectAll("g.trace.boxes");t.style("opacity",function(a){return a[0].trace.opacity}),t.each(function(a){var r=p.select(this),f=a[0].trace,s=f.line.width;function i(h,m,d,o){h.style("stroke-width",m+"px").call(v.stroke,d).call(v.fill,o)}var l=r.selectAll("path.box");if("candlestick"===f.type)l.each(function(h){if(!h.empty){var m=p.select(this),d=f[h.dir];i(m,d.line.width,d.line.color,d.fillcolor),m.style("opacity",f.selectedpoints&&!h.selected?.3:1)}});else{i(l,s,f.line.color,f.fillcolor),r.selectAll("path.mean").style({"stroke-width":s,"stroke-dasharray":2*s+"px,"+s+"px"}).call(v.stroke,f.line.color);var c=r.selectAll("path.point");u.pointStyle(c,f,y)}})},styleOnSelect:function(y,e,n){var t=e[0].trace,a=n.selectAll("path.point");t.selectedpoints?u.selectedPointStyle(a,t):u.pointStyle(a,t,y)}}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(x,Q,K){"use strict";var p=x("../../lib").extendFlat,v=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,u=x("../ohlc/attributes"),y=x("../box/attributes");function e(n){return{line:{color:p({},y.line.color,{dflt:n}),width:y.line.width,editType:"style"},fillcolor:y.fillcolor,editType:"style"}}Q.exports={xperiod:u.xperiod,xperiod0:u.xperiod0,xperiodalignment:u.xperiodalignment,xhoverformat:v("x"),yhoverformat:v("y"),x:u.x,open:u.open,high:u.high,low:u.low,close:u.close,line:{width:p({},y.line.width,{}),editType:"style"},increasing:e(u.increasing.line.color.dflt),decreasing:e(u.decreasing.line.color.dflt),text:u.text,hovertext:u.hovertext,whiskerwidth:p({},y.whiskerwidth,{dflt:0}),hoverlabel:u.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":871}],686:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/cartesian/axes"),u=x("../../plots/cartesian/align_period"),y=x("../ohlc/calc").calcCommon;function e(n,t,a,r){return{min:a,q1:Math.min(n,r),med:r,q3:Math.max(n,r),max:t}}Q.exports=function(n,t){var a=n._fullLayout,r=v.getFromId(n,t.xaxis),f=v.getFromId(n,t.yaxis),s=r.makeCalcdata(t,"x"),i=u(t,r,"x",s).vals,l=y(n,t,s,i,f,e);return l.length?(p.extendFlat(l[0].t,{num:a._numBoxes,dPos:p.distinctVals(i).minDiff/2,posLetter:"x",valLetter:"y"}),a._numBoxes++,l):[{t:{empty:!0}}]}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":872}],687:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/color"),u=x("../ohlc/ohlc_defaults"),y=x("../scatter/period_defaults"),e=x("./attributes");function n(t,a,r,f){var s=r(f+".line.color");r(f+".line.width",a.line.width),r(f+".fillcolor",v.addOpacity(s,.5))}Q.exports=function(t,a,r,f){function s(i,l){return p.coerce(t,a,e,i,l)}u(t,a,s,f)?(y(t,a,f,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),n(0,a,s,"increasing"),n(0,a,s,"decreasing"),s("text"),s("hovertext"),s("whiskerwidth"),f._requestRangeslider[a.xaxis]=!0):a.visible=!1}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":876,"../scatter/period_defaults":945,"./attributes":685}],688:[function(x,Q,K){"use strict";Q.exports={moduleType:"trace",name:"candlestick",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:x("./attributes"),layoutAttributes:x("../box/layout_attributes"),supplyLayoutDefaults:x("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:x("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("../box/plot").plot,layerName:"boxlayer",style:x("../box/style").style,hoverPoints:x("../ohlc/hover").hoverPoints,selectPoints:x("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":874,"../ohlc/select":878,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(x,Q,K){"use strict";var p=x("./axis_defaults"),v=x("../../plot_api/plot_template");Q.exports=function(u,y,e,n,t){var a,r,f,s;n("a")||(n("da"),n("a0")),n("b")||(n("db"),n("b0")),a=u,r=y,f=e,s=t,["aaxis","baxis"].forEach(function(i){var l=i.charAt(0),c=a[i]||{},h=v.newContainer(r,i);p(c,h,{tickfont:"x",id:l+"axis",letter:l,font:r.font,name:i,data:a[l],calendar:r.calendar,dfltColor:s,bgColor:f.paper_bgcolor,autotypenumbersDflt:f.autotypenumbers,fullLayout:f}),h._categories=h._categories||[],a[i]||"-"===c.type||(a[i]={type:c.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(x,Q,K){"use strict";var p=x("../../lib").isArrayOrTypedArray;Q.exports=function(v){return function u(y,e){if(!p(y)||e>=10)return null;for(var n=1/0,t=-1/0,a=y.length,r=0;r<a;r++){var f=y[r];if(p(f)){var s=u(f,e+1);s&&(n=Math.min(s[0],n),t=Math.max(s[1],t))}else n=Math.min(f,n),t=Math.max(f,t)}return[n,t]}(v,0)}},{"../../lib":503}],691:[function(x,Q,K){"use strict";var p=x("../../plots/font_attributes"),v=x("./axis_attributes"),u=x("../../components/color/attributes"),y=p({editType:"calc"});y.family.dflt='"Open Sans", verdana, arial, sans-serif',y.size.dflt=12,y.color.dflt=u.defaultLine,Q.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:v,baxis:v,font:y,color:{valType:"color",dflt:u.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(x,Q,K){"use strict";var p=x("../../lib").isArrayOrTypedArray;Q.exports=function(v,u,y,e){var n,t,a,r,f,s,i,l,c,h,m,d,o,b=p(y)?"a":"b",g=("a"===b?v.aaxis:v.baxis).smoothing,w="a"===b?v.a2i:v.b2j,_="a"===b?y:e,A="a"===b?e:y,T="a"===b?u.a.length:u.b.length,E="a"===b?u.b.length:u.a.length,k=Math.floor("a"===b?v.b2j(A):v.a2i(A)),O="a"===b?function(te){return v.evalxy([],te,k)}:function(te){return v.evalxy([],k,te)};g&&(a=Math.max(0,Math.min(E-2,k)),r=k-a,t="a"===b?function(te,R){return v.dxydi([],te,a,R,r)}:function(te,R){return v.dxydj([],a,te,r,R)});var D=w(_[0]),S=w(_[1]),C=D<S?1:-1,z=1e-8*(S-D),B=C>0?Math.floor:Math.ceil,U=C>0?Math.ceil:Math.floor,G=C>0?Math.min:Math.max,X=C>0?Math.max:Math.min,Z=B(D+z),q=U(S-z),W=[[i=O(D)]];for(n=Z;n*C<q*C;n+=C)f=[],m=X(D,n),o=(d=G(S,n+C))-m,s=Math.max(0,Math.min(T-2,Math.floor(.5*(m+d)))),l=O(d),g&&(c=t(s,m-s),h=t(s,d-s),f.push([i[0]+c[0]/3*o,i[1]+c[1]/3*o]),f.push([l[0]-h[0]/3*o,l[1]-h[1]/3*o])),f.push(l),W.push(f),i=l;return W}},{"../../lib":503}],693:[function(x,Q,K){"use strict";var p=x("../../plots/font_attributes"),v=x("../../components/color/attributes"),u=x("../../plots/cartesian/layout_attributes"),y=x("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=x("../../plot_api/edit_types").overrideAll;Q.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:p({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:u.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:p({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:y("tick label")},tickformatstops:e(u.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:v.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:v.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:p({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(x,Q,K){"use strict";var p=x("./attributes"),v=x("../../components/color").addOpacity,u=x("../../registry"),y=x("../../lib"),e=x("../../plots/cartesian/tick_value_defaults"),n=x("../../plots/cartesian/tick_label_defaults"),t=x("../../plots/cartesian/prefix_suffix_defaults"),a=x("../../plots/cartesian/category_order_defaults"),r=x("../../plots/cartesian/set_convert"),f=x("../../plots/cartesian/axis_autotype");Q.exports=function(s,i,l){var c=l.letter,h=l.font||{},m=p[c+"axis"];function d(S,C){return y.coerce(s,i,m,S,C)}function o(S,C){return y.coerce2(s,i,m,S,C)}l.name&&(i._name=l.name,i._id=l.name),d("autotypenumbers",l.autotypenumbersDflt);var b=d("type");"-"===b&&(l.data&&function(S,C){if("-"===S.type){var z=S._id.charAt(0);S.type=f(C,S[z+"calendar"],{autotypenumbers:S.autotypenumbers})}}(i,l.data),"-"===i.type?i.type="linear":b=s.type=i.type),d("smoothing"),d("cheatertype"),d("showticklabels"),d("labelprefix",c+" = "),d("labelsuffix"),d("showtickprefix"),d("showticksuffix"),d("separatethousands"),d("tickformat"),d("exponentformat"),d("minexponent"),d("showexponent"),d("categoryorder"),d("tickmode"),d("tickvals"),d("ticktext"),d("tick0"),d("dtick"),"array"===i.tickmode&&(d("arraytick0"),d("arraydtick")),d("labelpadding"),i._hovertitle=c,"date"===b&&u.getComponentMethod("calendars","handleDefaults")(s,i,"calendar",l.calendar),r(i,l.fullLayout),i.c2p=y.identity;var g=d("color",l.dfltColor),w=g===s.color?g:h.color;d("title.text")&&(y.coerceFont(d,"title.font",{family:h.family,size:y.bigFont(h.size),color:w}),d("title.offset")),d("tickangle"),d("autorange",!i.isValidRange(s.range))&&d("rangemode"),d("range"),i.cleanRange(),d("fixedrange"),e(s,i,d,b),t(s,i,d,b,l),n(s,i,d,b,l),a(s,i,d,{data:l.data,dataAttr:c});var _=o("gridcolor",v(g,.3)),A=o("gridwidth"),T=d("showgrid");T||(delete i.gridcolor,delete i.gridwidth);var E=o("startlinecolor",g),k=o("startlinewidth",A);d("startline",i.showgrid||!!E||!!k)||(delete i.startlinecolor,delete i.startlinewidth);var O=o("endlinecolor",g),D=o("endlinewidth",A);return d("endline",i.showgrid||!!O||!!D)||(delete i.endlinecolor,delete i.endlinewidth),T?(d("minorgridcount"),d("minorgridwidth",A),d("minorgridcolor",v(_,.06)),i.minorgridcount||(delete i.minorgridwidth,delete i.minorgridcolor)):(delete i.gridcolor,delete i.gridWidth),"none"===i.showticklabels&&(delete i.tickfont,delete i.tickangle,delete i.showexponent,delete i.exponentformat,delete i.minexponent,delete i.tickformat,delete i.showticksuffix,delete i.showtickprefix),i.showticksuffix||delete i.ticksuffix,i.showtickprefix||delete i.tickprefix,d("tickmode"),i}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes"),v=x("../../lib").isArray1D,u=x("./cheater_basis"),y=x("./array_minmax"),e=x("./calc_gridlines"),n=x("./calc_labels"),t=x("./calc_clippath"),a=x("../heatmap/clean_2d_array"),r=x("./smooth_fill_2d_array"),f=x("../heatmap/convert_column_xyz"),s=x("./set_convert");Q.exports=function(i,l){var c=p.getFromId(i,l.xaxis),h=p.getFromId(i,l.yaxis),m=l.aaxis,d=l.baxis,o=l.x,b=l.y,g=[];o&&v(o)&&g.push("x"),b&&v(b)&&g.push("y"),g.length&&f(l,m,d,"a","b",g);var w=l._a=l._a||l.a,_=l._b=l._b||l.b;o=l._x||l.x,b=l._y||l.y;var A={};l._cheater&&(o=u("index"===m.cheatertype?w.length:w,"index"===d.cheatertype?_.length:_,l.cheaterslope)),l._x=o=a(o),l._y=b=a(b),r(o,w,_),r(b,w,_),s(l),l.setScale();var k=y(o),O=y(b),D=.5*(k[1]-k[0]),S=.5*(k[1]+k[0]),C=.5*(O[1]-O[0]),z=.5*(O[1]+O[0]);return O=[z-1.3*C,z+1.3*C],l._extremes[c._id]=p.findExtremes(c,k=[S-1.3*D,S+1.3*D],{padded:!0}),l._extremes[h._id]=p.findExtremes(h,O,{padded:!0}),e(l,"a","b"),e(l,"b","a"),n(l,m),n(l,d),A.clipsegments=t(l._xctrl,l._yctrl,m,d),A.x=o,A.y=b,A.a=w,A.b=_,[A]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(x,Q,K){"use strict";Q.exports=function(p,v,u,y){var e,n,t,a=[],r=!!u.smoothing,f=!!y.smoothing,s=p[0].length-1,i=p.length-1;for(e=0,n=[],t=[];e<=s;e++)n[e]=p[0][e],t[e]=v[0][e];for(a.push({x:n,y:t,bicubic:r}),e=0,n=[],t=[];e<=i;e++)n[e]=p[e][s],t[e]=v[e][s];for(a.push({x:n,y:t,bicubic:f}),e=s,n=[],t=[];e>=0;e--)n[s-e]=p[i][e],t[s-e]=v[i][e];for(a.push({x:n,y:t,bicubic:r}),e=i,n=[],t=[];e>=0;e--)n[i-e]=p[e][0],t[i-e]=v[e][0];return a.push({x:n,y:t,bicubic:f}),a}},{}],697:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes"),v=x("../../lib/extend").extendFlat;Q.exports=function(u,y,e){var n,t,a,r,f,s,i,l,c,h,m,d,o,b,g=u["_"+y],w=u[y+"axis"],_=w._gridlines=[],A=w._minorgridlines=[],T=w._boundarylines=[],E=u["_"+e],k=u[e+"axis"];"array"===w.tickmode&&(w.tickvals=g.slice());var O=u._xctrl,D=u._yctrl,S=O[0].length,C=O.length,z=u._a.length,B=u._b.length;p.prepTicks(w),"array"===w.tickmode&&delete w.tickvals;var U=w.smoothing?3:1;function G(Z){var q,W,te,R,N,V,ee,j,J,$,re,ne,se=[],ie=[],ue={};if("b"===y)for(W=u.b2j(Z),te=Math.floor(Math.max(0,Math.min(B-2,W))),R=W-te,ue.length=B,ue.crossLength=z,ue.xy=function(le){return u.evalxy([],le,W)},ue.dxy=function(le,de){return u.dxydi([],le,te,de,R)},q=0;q<z;q++)V=Math.min(z-2,q),ee=q-V,j=u.evalxy([],q,W),k.smoothing&&q>0&&(J=u.dxydi([],q-1,te,0,R),se.push(N[0]+J[0]/3),ie.push(N[1]+J[1]/3),$=u.dxydi([],q-1,te,1,R),se.push(j[0]-$[0]/3),ie.push(j[1]-$[1]/3)),se.push(j[0]),ie.push(j[1]),N=j;else for(q=u.a2i(Z),V=Math.floor(Math.max(0,Math.min(z-2,q))),ee=q-V,ue.length=z,ue.crossLength=B,ue.xy=function(le){return u.evalxy([],q,le)},ue.dxy=function(le,de){return u.dxydj([],V,le,ee,de)},W=0;W<B;W++)te=Math.min(B-2,W),R=W-te,j=u.evalxy([],q,W),k.smoothing&&W>0&&(re=u.dxydj([],V,W-1,ee,0),se.push(N[0]+re[0]/3),ie.push(N[1]+re[1]/3),ne=u.dxydj([],V,W-1,ee,1),se.push(j[0]-ne[0]/3),ie.push(j[1]-ne[1]/3)),se.push(j[0]),ie.push(j[1]),N=j;return ue.axisLetter=y,ue.axis=w,ue.crossAxis=k,ue.value=Z,ue.constvar=e,ue.index=l,ue.x=se,ue.y=ie,ue.smoothing=k.smoothing,ue}function X(Z){var q,W,te,R,N,V=[],ee=[],j={};if(j.length=g.length,j.crossLength=E.length,"b"===y)for(te=Math.max(0,Math.min(B-2,Z)),N=Math.min(1,Math.max(0,Z-te)),j.xy=function(J){return u.evalxy([],J,Z)},j.dxy=function(J,$){return u.dxydi([],J,te,$,N)},q=0;q<S;q++)V[q]=O[Z*U][q],ee[q]=D[Z*U][q];else for(W=Math.max(0,Math.min(z-2,Z)),R=Math.min(1,Math.max(0,Z-W)),j.xy=function(J){return u.evalxy([],Z,J)},j.dxy=function(J,$){return u.dxydj([],W,J,R,$)},q=0;q<C;q++)V[q]=O[q][Z*U],ee[q]=D[q][Z*U];return j.axisLetter=y,j.axis=w,j.crossAxis=k,j.value=g[Z],j.constvar=e,j.index=Z,j.x=V,j.y=ee,j.smoothing=k.smoothing,j}if("array"===w.tickmode){for(r=5e-15,s=(f=[Math.floor((g.length-1-w.arraytick0)/w.arraydtick*(1+r)),Math.ceil(-w.arraytick0/w.arraydtick/(1+r))].sort(function(Z,q){return Z-q}))[0]-1,i=f[1]+1,l=s;l<i;l++)(t=w.arraytick0+w.arraydtick*l)<0||t>g.length-1||_.push(v(X(t),{color:w.gridcolor,width:w.gridwidth}));for(l=s;l<i;l++)if(a=w.arraytick0+w.arraydtick*l,m=Math.min(a+w.arraydtick,g.length-1),!(a<0||a>g.length-1||m<0||m>g.length-1))for(d=g[a],o=g[m],n=0;n<w.minorgridcount;n++)(b=m-a)<=0||(h=d+(o-d)*(n+1)/(w.minorgridcount+1)*(w.arraydtick/b))<g[0]||h>g[g.length-1]||A.push(v(G(h),{color:w.minorgridcolor,width:w.minorgridwidth}));w.startline&&T.push(v(X(0),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&T.push(v(X(g.length-1),{color:w.endlinecolor,width:w.endlinewidth}))}else{for(r=5e-15,s=(f=[Math.floor((g[g.length-1]-w.tick0)/w.dtick*(1+r)),Math.ceil((g[0]-w.tick0)/w.dtick/(1+r))].sort(function(Z,q){return Z-q}))[0],i=f[1],l=s;l<=i;l++)_.push(v(G(c=w.tick0+w.dtick*l),{color:w.gridcolor,width:w.gridwidth}));for(l=s-1;l<i+1;l++)for(c=w.tick0+w.dtick*l,n=0;n<w.minorgridcount;n++)(h=c+w.dtick*(n+1)/(w.minorgridcount+1))<g[0]||h>g[g.length-1]||A.push(v(G(h),{color:w.minorgridcolor,width:w.minorgridwidth}));w.startline&&T.push(v(G(g[0]),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&T.push(v(G(g[g.length-1]),{color:w.endlinecolor,width:w.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes"),v=x("../../lib/extend").extendFlat;Q.exports=function(u,y){var e,n,t,a=y._labels=[],r=y._gridlines;for(e=0;e<r.length;e++)t=r[e],-1!==["start","both"].indexOf(y.showticklabels)&&(n=p.tickText(y,t.value),v(n,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:t.xy(0),dxy:t.dxy(0,0),axis:t.axis,length:t.crossAxis.length,font:t.axis.tickfont,isFirst:0===e,isLast:e===r.length-1}),a.push(n)),-1!==["end","both"].indexOf(y.showticklabels)&&(n=p.tickText(y,t.value),v(n,{endAnchor:!1,xy:t.xy(t.crossLength-1),dxy:t.dxy(t.crossLength-2,1),axis:t.axis,length:t.crossAxis.length,font:t.axis.tickfont,isFirst:0===e,isLast:e===r.length-1}),a.push(n))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(x,Q,K){"use strict";Q.exports=function(p,v,u,y){var e=p[0]-v[0],n=p[1]-v[1],t=u[0]-v[0],a=u[1]-v[1],r=Math.pow(e*e+n*n,.25),f=Math.pow(t*t+a*a,.25),s=(f*f*e-r*r*t)*y,i=(f*f*n-r*r*a)*y,l=f*(r+f)*3,c=r*(r+f)*3;return[[v[0]+(l&&s/l),v[1]+(l&&i/l)],[v[0]-(c&&s/c),v[1]-(c&&i/c)]]}},{}],700:[function(x,Q,K){"use strict";var p=x("../../lib").isArrayOrTypedArray;Q.exports=function(v,u,y){var e,n,t,a,r,f,s=[],i=p(v)?v.length:v,l=p(u)?u.length:u,c=p(v)?v:null,h=p(u)?u:null;c&&(t=(c.length-1)/(c[c.length-1]-c[0])/(i-1)),h&&(a=(h.length-1)/(h[h.length-1]-h[0])/(l-1));var m=1/0,d=-1/0;for(n=0;n<l;n++)for(s[n]=[],r=h?(h[n]-h[0])*a:n/(l-1),e=0;e<i;e++)f=(c?(c[e]-c[0])*t:e/(i-1))-r*y,m=Math.min(f,m),d=Math.max(f,d),s[n][e]=f;var o=1/(d-m),b=-m*o;for(n=0;n<l;n++)for(e=0;e<i;e++)s[n][e]=o*s[n][e]+b;return s}},{"../../lib":503}],701:[function(x,Q,K){"use strict";var p=x("./catmull_rom"),v=x("../../lib").ensureArray;function u(y,e,n){return[(2*(-.5*n[0]+1.5*e[0])+y[0])/3,(2*(-.5*n[1]+1.5*e[1])+y[1])/3]}Q.exports=function(y,e,n,t,a,r){var f,s,i,l,c,h,m,d,o,b,g=n[0].length,w=n.length,_=a?3*g-2:g,A=r?3*w-2:w;for(y=v(y,A),e=v(e,A),i=0;i<A;i++)y[i]=v(y[i],_),e[i]=v(e[i],_);for(s=0,l=0;s<w;s++,l+=r?3:1)for(c=y[l],h=e[l],m=n[s],d=t[s],f=0,i=0;f<g;f++,i+=a?3:1)c[i]=m[f],h[i]=d[f];if(a)for(s=0,l=0;s<w;s++,l+=r?3:1){for(f=1,i=3;f<g-1;f++,i+=3)o=p([n[s][f-1],t[s][f-1]],[n[s][f],t[s][f]],[n[s][f+1],t[s][f+1]],a),y[l][i-1]=o[0][0],e[l][i-1]=o[0][1],y[l][i+1]=o[1][0],e[l][i+1]=o[1][1];b=u([y[l][0],e[l][0]],[y[l][2],e[l][2]],[y[l][3],e[l][3]]),y[l][1]=b[0],e[l][1]=b[1],b=u([y[l][_-1],e[l][_-1]],[y[l][_-3],e[l][_-3]],[y[l][_-4],e[l][_-4]]),y[l][_-2]=b[0],e[l][_-2]=b[1]}if(r)for(i=0;i<_;i++){for(l=3;l<A-3;l+=3)o=p([y[l-3][i],e[l-3][i]],[y[l][i],e[l][i]],[y[l+3][i],e[l+3][i]],r),y[l-1][i]=o[0][0],e[l-1][i]=o[0][1],y[l+1][i]=o[1][0],e[l+1][i]=o[1][1];b=u([y[0][i],e[0][i]],[y[2][i],e[2][i]],[y[3][i],e[3][i]]),y[1][i]=b[0],e[1][i]=b[1],b=u([y[A-1][i],e[A-1][i]],[y[A-3][i],e[A-3][i]],[y[A-4][i],e[A-4][i]]),y[A-2][i]=b[0],e[A-2][i]=b[1]}if(a&&r)for(l=1;l<A;l+=(l+1)%3==0?2:1){for(i=3;i<_-3;i+=3)o=p([y[l][i-3],e[l][i-3]],[y[l][i],e[l][i]],[y[l][i+3],e[l][i+3]],a),y[l][i-1]=.5*(y[l][i-1]+o[0][0]),e[l][i-1]=.5*(e[l][i-1]+o[0][1]),y[l][i+1]=.5*(y[l][i+1]+o[1][0]),e[l][i+1]=.5*(e[l][i+1]+o[1][1]);b=u([y[l][0],e[l][0]],[y[l][2],e[l][2]],[y[l][3],e[l][3]]),y[l][1]=.5*(y[l][1]+b[0]),e[l][1]=.5*(e[l][1]+b[1]),b=u([y[l][_-1],e[l][_-1]],[y[l][_-3],e[l][_-3]],[y[l][_-4],e[l][_-4]]),y[l][_-2]=.5*(y[l][_-2]+b[0]),e[l][_-2]=.5*(e[l][_-2]+b[1])}return[y,e]}},{"../../lib":503,"./catmull_rom":699}],702:[function(x,Q,K){"use strict";Q.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(x,Q,K){"use strict";Q.exports=function(p,v,u){return v&&u?function(y,e,n,t,a){var r,l,c;y||(y=[]),e*=3,n*=3;var h=t*t,m=1-t,d=m*m,o=m*t*2,b=-3*d,g=3*(d-o),w=3*(o-h),_=3*h,A=a*a,T=A*a,E=1-a,k=E*E,O=k*E;for(c=0;c<p.length;c++)r=b*(l=p[c])[n][e]+g*l[n][e+1]+w*l[n][e+2]+_*l[n][e+3],y[c]=O*r+3*(k*a*(b*l[n+1][e]+g*l[n+1][e+1]+w*l[n+1][e+2]+_*l[n+1][e+3])+E*A*(b*l[n+2][e]+g*l[n+2][e+1]+w*l[n+2][e+2]+_*l[n+2][e+3]))+T*(b*l[n+3][e]+g*l[n+3][e+1]+w*l[n+3][e+2]+_*l[n+3][e+3]);return y}:v?function(y,e,n,t,a){var r,s,i;y||(y=[]),e*=3;var l=t*t,c=1-t,h=c*c,m=c*t*2,d=-3*h,o=3*(h-m),b=3*(m-l),g=3*l,w=1-a;for(s=0;s<p.length;s++)r=d*(i=p[s])[n][e]+o*i[n][e+1]+b*i[n][e+2]+g*i[n][e+3],y[s]=w*r+a*(d*i[n+1][e]+o*i[n+1][e+1]+b*i[n+1][e+2]+g*i[n+1][e+3]);return y}:u?function(y,e,n,t,a){var r,l,c;y||(y=[]),n*=3;var h=a*a,m=h*a,d=1-a,o=d*d,b=o*d;for(l=0;l<p.length;l++)r=(c=p[l])[n][e+1]-c[n][e],y[l]=b*r+3*(o*a*(c[n+1][e+1]-c[n+1][e])+d*h*(c[n+2][e+1]-c[n+2][e]))+m*(c[n+3][e+1]-c[n+3][e]);return y}:function(y,e,n,t,a){var r,s,i;y||(y=[]);var l=1-a;for(s=0;s<p.length;s++)r=(i=p[s])[n][e+1]-i[n][e],y[s]=l*r+a*(i[n+1][e+1]-i[n+1][e]);return y}}},{}],704:[function(x,Q,K){"use strict";Q.exports=function(p,v,u){return v&&u?function(y,e,n,t,a){var r,l,c;y||(y=[]),e*=3,n*=3;var h=t*t,m=h*t,d=1-t,o=d*d,b=o*d,g=a*a,w=1-a,_=w*w,A=w*a*2,T=-3*_,E=3*(_-A),k=3*(A-g),O=3*g;for(c=0;c<p.length;c++)r=T*(l=p[c])[n][e]+E*l[n+1][e]+k*l[n+2][e]+O*l[n+3][e],y[c]=b*r+3*(o*t*(T*l[n][e+1]+E*l[n+1][e+1]+k*l[n+2][e+1]+O*l[n+3][e+1])+d*h*(T*l[n][e+2]+E*l[n+1][e+2]+k*l[n+2][e+2]+O*l[n+3][e+2]))+m*(T*l[n][e+3]+E*l[n+1][e+3]+k*l[n+2][e+3]+O*l[n+3][e+3]);return y}:v?function(y,e,n,t,a){var r,l,c;y||(y=[]),e*=3;var h=a*a,m=h*a,d=1-a,o=d*d,b=o*d;for(l=0;l<p.length;l++)r=(c=p[l])[n+1][e]-c[n][e],y[l]=b*r+3*(o*a*(c[n+1][e+1]-c[n][e+1])+d*h*(c[n+1][e+2]-c[n][e+2]))+m*(c[n+1][e+3]-c[n][e+3]);return y}:u?function(y,e,n,t,a){var r,s,i;y||(y=[]),n*=3;var l=1-t,c=a*a,h=1-a,m=h*h,d=h*a*2,o=-3*m,b=3*(m-d),g=3*(d-c),w=3*c;for(s=0;s<p.length;s++)r=o*(i=p[s])[n][e]+b*i[n+1][e]+g*i[n+2][e]+w*i[n+3][e],y[s]=l*r+t*(o*i[n][e+1]+b*i[n+1][e+1]+g*i[n+2][e+1]+w*i[n+3][e+1]);return y}:function(y,e,n,t,a){var r,s,i;y||(y=[]);var l=1-t;for(s=0;s<p.length;s++)r=(i=p[s])[n+1][e]-i[n][e],y[s]=l*r+t*(i[n+1][e+1]-i[n][e+1]);return y}}},{}],705:[function(x,Q,K){"use strict";Q.exports=function(p,v,u,y,e){var n=v-2,t=u-2;return y&&e?function(a,r,f){var s,h,m;a||(a=[]);var d=Math.max(0,Math.min(Math.floor(r),n)),o=Math.max(0,Math.min(Math.floor(f),t)),b=Math.max(0,Math.min(1,r-d)),g=Math.max(0,Math.min(1,f-o));d*=3,o*=3;var w=b*b,_=w*b,A=1-b,T=A*A,E=T*A,k=g*g,O=k*g,D=1-g,S=D*D,C=S*D;for(m=0;m<p.length;m++)s=E*(h=p[m])[o][d]+3*(T*b*h[o][d+1]+A*w*h[o][d+2])+_*h[o][d+3],a[m]=C*s+3*(S*g*(E*h[o+1][d]+3*(T*b*h[o+1][d+1]+A*w*h[o+1][d+2])+_*h[o+1][d+3])+D*k*(E*h[o+2][d]+3*(T*b*h[o+2][d+1]+A*w*h[o+2][d+2])+_*h[o+2][d+3]))+O*(E*h[o+3][d]+3*(T*b*h[o+3][d+1]+A*w*h[o+3][d+2])+_*h[o+3][d+3]);return a}:y?function(a,r,f){a||(a=[]);var s,h,m,d=Math.max(0,Math.min(Math.floor(r),n)),o=Math.max(0,Math.min(Math.floor(f),t)),b=Math.max(0,Math.min(1,r-d)),g=Math.max(0,Math.min(1,f-o));d*=3;var w=b*b,_=w*b,A=1-b,T=A*A,E=T*A,k=1-g;for(h=0;h<p.length;h++)s=k*(m=p[h])[o][d]+g*m[o+1][d],a[h]=E*s+3*(T*b*(k*m[o][d+1]+g*m[o+1][d+1])+A*w*(k*m[o][d+2]+g*m[o+1][d+1]))+_*(k*m[o][d+3]+g*m[o+1][d+1]);return a}:e?function(a,r,f){a||(a=[]);var s,h,m,d=Math.max(0,Math.min(Math.floor(r),n)),o=Math.max(0,Math.min(Math.floor(f),t)),b=Math.max(0,Math.min(1,r-d)),g=Math.max(0,Math.min(1,f-o));o*=3;var w=g*g,_=w*g,A=1-g,T=A*A,E=T*A,k=1-b;for(h=0;h<p.length;h++)s=k*(m=p[h])[o][d]+b*m[o][d+1],a[h]=E*s+3*(T*g*(k*m[o+1][d]+b*m[o+1][d+1])+A*w*(k*m[o+2][d]+b*m[o+2][d+1]))+_*(k*m[o+3][d]+b*m[o+3][d+1]);return a}:function(a,r,f){a||(a=[]);var s,l,c,h=Math.max(0,Math.min(Math.floor(r),n)),m=Math.max(0,Math.min(Math.floor(f),t)),d=Math.max(0,Math.min(1,r-h)),o=Math.max(0,Math.min(1,f-m)),b=1-o,g=1-d;for(l=0;l<p.length;l++)s=g*(c=p[l])[m][h]+d*c[m][h+1],a[l]=b*s+o*(g*c[m+1][h]+d*c[m+1][h+1]);return a}}},{}],706:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./xy_defaults"),u=x("./ab_defaults"),y=x("./attributes"),e=x("../../components/color/attributes");Q.exports=function(n,t,a,r){function f(i,l){return p.coerce(n,t,y,i,l)}t._clipPathId="clip"+t.uid+"carpet";var s=f("color",e.defaultLine);p.coerceFont(f,"font"),f("carpet"),u(n,t,r,f,s),t.a&&t.b?(t.a.length<3&&(t.aaxis.smoothing=0),t.b.length<3&&(t.baxis.smoothing=0),v(n,t,f)||(t.visible=!1),t._cheater&&f("cheaterslope")):t.visible=!1}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),plot:x("./plot"),calc:x("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(x,Q,K){"use strict";Q.exports=function(p,v){for(var u,y=p._fullData.length,e=0;e<y;e++){var n=p._fullData[e];if(n.index!==v.index&&"carpet"===n.type&&(u||(u=n),n.carpet===v.carpet))return n}return u}},{}],709:[function(x,Q,K){"use strict";Q.exports=function(p,v,u){if(0===p.length)return"";var y,e=[],n=u?3:1;for(y=0;y<p.length;y+=n)e.push(p[y]+","+v[y]),u&&y<p.length-n&&(e.push("C"),e.push([p[y+1]+","+v[y+1],p[y+2]+","+v[y+2]+" "].join(" ")));return e.join(u?"":"L")}},{}],710:[function(x,Q,K){"use strict";var p=x("../../lib").isArrayOrTypedArray;Q.exports=function(v,u,y){var e;for(p(v)?v.length>u.length&&(v=v.slice(0,u.length)):v=[],e=0;e<u.length;e++)v[e]=y(u[e]);return v}},{"../../lib":503}],711:[function(x,Q,K){"use strict";Q.exports=function(p,v,u,y,e,n){var t=e[0]*p.dpdx(v),a=e[1]*p.dpdy(u),r=1,f=1;if(n){var s=Math.sqrt(e[0]*e[0]+e[1]*e[1]),i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);f=Math.max(0,(e[0]*n[0]+e[1]*n[1])/s/i)}var c=180*Math.atan2(a,t)/Math.PI;return c<-90?(c+=180,r=-r):c>90&&(c-=180,r=-r),{angle:c,flip:r,p:p.c2p(y,v,u),offsetMultplier:f}}},{}],712:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/drawing"),u=x("./map_1d_array"),y=x("./makepath"),e=x("./orient_text"),n=x("../../lib/svg_text_utils"),t=x("../../lib"),a=t.strRotate,r=t.strTranslate,f=x("../../constants/alignment");function s(m,d,o,b,g,w){var _="const-"+g+"-lines",A=o.selectAll("."+_).data(w);A.enter().append("path").classed(_,!0).style("vector-effect","non-scaling-stroke"),A.each(function(T){var E=T,O=E.y,D=u([],E.x,m.c2p),S=u([],O,d.c2p),C="M"+y(D,S,E.smoothing);p.select(this).attr("d",C).style("stroke-width",E.width).style("stroke",E.color).style("fill","none")}),A.exit().remove()}function i(m,d,o,b,g,w,_,A){var T=w.selectAll("text."+A).data(_);T.enter().append("text").classed(A,!0);var E=0,k={};return T.each(function(O,D){var S;if("auto"===O.axis.tickangle)S=e(b,d,o,O.xy,O.dxy);else{var C=(O.axis.tickangle+180)*Math.PI/180;S=e(b,d,o,O.xy,[Math.cos(C),Math.sin(C)])}D||(k={angle:S.angle,flip:S.flip});var z=(O.endAnchor?-1:1)*S.flip,B=p.select(this).attr({"text-anchor":z>0?"start":"end","data-notex":1}).call(v.font,O.font).text(O.text).call(n.convertToTspans,m),U=v.bBox(this);B.attr("transform",r(S.p[0],S.p[1])+a(S.angle)+r(O.axis.labelpadding*z,.3*U.height)),E=Math.max(E,U.width+O.axis.labelpadding)}),T.exit().remove(),k.maxExtent=E,k}Q.exports=function(m,d,o,b){var g=d.xaxis,w=d.yaxis,_=m._fullLayout._clips;t.makeTraceGroups(b,o,"trace").each(function(A){var T=p.select(this),E=A[0],k=E.trace,O=k.aaxis,D=k.baxis,S=t.ensureSingle(T,"g","minorlayer"),C=t.ensureSingle(T,"g","majorlayer"),z=t.ensureSingle(T,"g","boundarylayer"),B=t.ensureSingle(T,"g","labellayer");T.style("opacity",k.opacity),s(g,w,C,0,"a",O._gridlines),s(g,w,C,0,"b",D._gridlines),s(g,w,S,0,"a",O._minorgridlines),s(g,w,S,0,"b",D._minorgridlines),s(g,w,z,0,"a-boundary",O._boundarylines),s(g,w,z,0,"b-boundary",D._boundarylines);var X,Z,q,te,R,N,V,ee,j,J,$,re,ne,se,ie,U=i(m,g,w,k,0,B,O._labels,"a-label"),G=i(m,g,w,k,0,B,D._labels,"b-label");X=m,Z=B,q=k,te=g,R=w,N=U,V=G,re=t.aggNums(Math.min,null,q.a),ne=t.aggNums(Math.max,null,q.a),se=t.aggNums(Math.min,null,q.b),ie=t.aggNums(Math.max,null,q.b),J=q.ab2xy(ee=.5*(re+ne),j=se,!0),$=q.dxyda_rough(ee,j),void 0===N.angle&&t.extendFlat(N,e(q,te,R,J,q.dxydb_rough(ee,j))),h(X,Z,q,0,J,$,q.aaxis,te,R,N,"a-title"),J=q.ab2xy(ee=re,j=.5*(se+ie),!0),$=q.dxydb_rough(ee,j),void 0===V.angle&&t.extendFlat(V,e(q,te,R,J,q.dxyda_rough(ee,j))),h(X,Z,q,0,J,$,q.baxis,te,R,V,"b-title"),function(X,Z,q,W,te){var R,N,V,ee,j=q.select("#"+X._clipPathId);j.size()||(j=q.append("clipPath").classed("carpetclip",!0));var J=t.ensureSingle(j,"path","carpetboundary"),$=Z.clipsegments,re=[];for(ee=0;ee<$.length;ee++)N=u([],(R=$[ee]).x,W.c2p),V=u([],R.y,te.c2p),re.push(y(N,V,R.bicubic));var ne="M"+re.join("L")+"Z";j.attr("id",X._clipPathId),J.attr("d",ne)}(k,E,_,g,w)})};var l=f.LINE_SPACING,c=(1-f.MID_SHIFT)/l+1;function h(m,d,o,b,g,w,_,A,T,E,k){var O=[];_.title.text&&O.push(_.title.text);var D=d.selectAll("text."+k).data(O),S=E.maxExtent;D.enter().append("text").classed(k,!0),D.each(function(){var C=e(o,A,T,g,w);-1===["start","both"].indexOf(_.showticklabels)&&(S=0);var z=_.title.font.size;S+=z+_.title.offset;var B=(E.angle+(E.flip<0?180:0)-C.angle+450)%360,U=B>90&&B<270,G=p.select(this);G.text(_.title.text).call(n.convertToTspans,m),U&&(S=(-n.lineCount(G)+c)*l*z-S),G.attr("transform",r(C.p[0],C.p[1])+a(C.angle)+r(0,S)).attr("text-anchor","middle").call(v.font,_.title.font)}),D.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(x,Q,K){"use strict";var p=x("./constants"),v=x("../../lib/search").findBin,u=x("./compute_control_points"),y=x("./create_spline_evaluator"),e=x("./create_i_derivative_evaluator"),n=x("./create_j_derivative_evaluator");Q.exports=function(t){var a=t._a,r=t._b,f=a.length,s=r.length,i=t.aaxis,l=t.baxis,c=a[0],h=a[f-1],m=r[0],d=r[s-1],o=a[a.length-1]-a[0],b=r[r.length-1]-r[0],g=o*p.RELATIVE_CULL_TOLERANCE,w=b*p.RELATIVE_CULL_TOLERANCE;c-=g,h+=g,m-=w,d+=w,t.isVisible=function(_,A){return _>c&&_<h&&A>m&&A<d},t.isOccluded=function(_,A){return _<c||_>h||A<m||A>d},t.setScale=function(){var T=u(t._xctrl,t._yctrl,t._x,t._y,i.smoothing,l.smoothing);t._xctrl=T[0],t._yctrl=T[1],t.evalxy=y([t._xctrl,t._yctrl],f,s,i.smoothing,l.smoothing),t.dxydi=e([t._xctrl,t._yctrl],i.smoothing,l.smoothing),t.dxydj=n([t._xctrl,t._yctrl],i.smoothing,l.smoothing)},t.i2a=function(_){var A=Math.max(0,Math.floor(_[0]),f-2),T=_[0]-A;return(1-T)*a[A]+T*a[A+1]},t.j2b=function(_){var A=Math.max(0,Math.floor(_[1]),f-2),T=_[1]-A;return(1-T)*r[A]+T*r[A+1]},t.ij2ab=function(_){return[t.i2a(_[0]),t.j2b(_[1])]},t.a2i=function(_){var A=Math.max(0,Math.min(v(_,a),f-2)),T=a[A];return Math.max(0,Math.min(f-1,A+(_-T)/(a[A+1]-T)))},t.b2j=function(_){var A=Math.max(0,Math.min(v(_,r),s-2)),T=r[A];return Math.max(0,Math.min(s-1,A+(_-T)/(r[A+1]-T)))},t.ab2ij=function(_){return[t.a2i(_[0]),t.b2j(_[1])]},t.i2c=function(_,A){return t.evalxy([],_,A)},t.ab2xy=function(_,A,T){if(!T&&(_<a[0]||_>a[f-1]|A<r[0]||A>r[s-1]))return[!1,!1];var E=t.a2i(_),k=t.b2j(A),O=t.evalxy([],E,k);if(T){var D,S,C,z,B=0,U=0,G=[];_<a[0]?(D=0,S=0,B=(_-a[0])/(a[1]-a[0])):_>a[f-1]?(D=f-2,S=1,B=(_-a[f-1])/(a[f-1]-a[f-2])):S=E-(D=Math.max(0,Math.min(f-2,Math.floor(E)))),A<r[0]?(C=0,z=0,U=(A-r[0])/(r[1]-r[0])):A>r[s-1]?(C=s-2,z=1,U=(A-r[s-1])/(r[s-1]-r[s-2])):z=k-(C=Math.max(0,Math.min(s-2,Math.floor(k)))),B&&(t.dxydi(G,D,C,S,z),O[0]+=G[0]*B,O[1]+=G[1]*B),U&&(t.dxydj(G,D,C,S,z),O[0]+=G[0]*U,O[1]+=G[1]*U)}return O},t.c2p=function(_,A,T){return[A.c2p(_[0]),T.c2p(_[1])]},t.p2x=function(_,A,T){return[A.p2c(_[0]),T.p2c(_[1])]},t.dadi=function(_){var A=Math.max(0,Math.min(a.length-2,_));return a[A+1]-a[A]},t.dbdj=function(_){var A=Math.max(0,Math.min(r.length-2,_));return r[A+1]-r[A]},t.dxyda=function(_,A,T,E){var k=t.dxydi(null,_,A,T,E),O=t.dadi(_,T);return[k[0]/O,k[1]/O]},t.dxydb=function(_,A,T,E){var k=t.dxydj(null,_,A,T,E),O=t.dbdj(A,E);return[k[0]/O,k[1]/O]},t.dxyda_rough=function(_,A,T){var E=o*(T||.1),k=t.ab2xy(_+E,A,!0),O=t.ab2xy(_-E,A,!0);return[.5*(k[0]-O[0])/E,.5*(k[1]-O[1])/E]},t.dxydb_rough=function(_,A,T){var E=b*(T||.1),k=t.ab2xy(_,A+E,!0),O=t.ab2xy(_,A-E,!0);return[.5*(k[0]-O[0])/E,.5*(k[1]-O[1])/E]},t.dpdx=function(_){return _._m},t.dpdy=function(_){return _._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(x,Q,K){"use strict";var p=x("../../lib");Q.exports=function(v,u,y){var e,n,t,a=[],r=[],f=v[0].length,s=v.length;var l,c,h,m,d,o,b,g,w,_,Z,q,W,te,R,T=0;for(e=0;e<f;e++)for(n=0;n<s;n++)void 0===v[n][e]&&(a.push(e),r.push(n),v[n][e]=(q=n,W=void 0,te=void 0,R=void 0,te=0,R=0,(Z=e)>0&&void 0!==(W=v[q][Z-1])&&(R++,te+=W),Z<f-1&&void 0!==(W=v[q][Z+1])&&(R++,te+=W),q>0&&void 0!==(W=v[q-1][Z])&&(R++,te+=W),q<s-1&&void 0!==(W=v[q+1][Z])&&(R++,te+=W),te/Math.max(1,R))),T=Math.max(T,Math.abs(v[n][e]));if(!a.length)return v;var E=0,k=0,O=a.length;do{for(E=0,t=0;t<O;t++){n=r[t];var S,C,z,B,U,G=0,X=0;0===(e=a[t])?(C=u[B=Math.min(f-1,2)],X+=(S=v[n][1])+(S-v[n][B])*(u[0]-(z=u[1]))/(z-C),G++):e===f-1&&(C=u[B=Math.max(0,f-3)],X+=(S=v[n][f-2])+(S-v[n][B])*(u[f-1]-(z=u[f-2]))/(z-C),G++),(0===e||e===f-1)&&n>0&&n<s-1&&(X+=((c=y[n]-y[n-1])*v[n+1][e]+(l=y[n+1]-y[n])*v[n-1][e])/(c+l),G++),0===n?(C=y[U=Math.min(s-1,2)],X+=(S=v[1][e])+(S-v[U][e])*(y[0]-(z=y[1]))/(z-C),G++):n===s-1&&(C=y[U=Math.max(0,s-3)],X+=(S=v[s-2][e])+(S-v[U][e])*(y[s-1]-(z=y[s-2]))/(z-C),G++),(0===n||n===s-1)&&e>0&&e<f-1&&(X+=((c=u[e]-u[e-1])*v[n][e+1]+(l=u[e+1]-u[e])*v[n][e-1])/(c+l),G++),G?X/=G:(g=(d=y[n+1]-y[n])*(o=y[n]-y[n-1])*(d+o),X=((b=(h=u[e+1]-u[e])*(m=u[e]-u[e-1])*(h+m))*(o*v[n+1][e]+d*v[n-1][e])+g*(m*v[n][e+1]+h*v[n][e-1]))/(g*(m+h)+b*(o+d))),E+=(_=(w=X-v[n][e])/T)*_,v[n][e]+=w*(1+(G?0:.85))}E=Math.sqrt(E)}while(k++<100&&E>1e-5);return p.log("Smoother converged to",E,"after",k,"iterations"),v}},{"../../lib":503}],715:[function(x,Q,K){"use strict";var p=x("../../lib").isArray1D;Q.exports=function(v,u,y){var e=y("x"),n=e&&e.length,t=y("y"),a=t&&t.length;if(!n&&!a)return!1;if(u._cheater=!e,n&&!p(e)||a&&!p(t))u._length=null;else{var r=n?e.length:1/0;a&&(r=Math.min(r,t.length)),u.a&&u.a.length&&(r=Math.min(r,u.a.length)),u.b&&u.b.length&&(r=Math.min(r,u.b.length)),u._length=r}return!0}},{"../../lib":503}],716:[function(x,Q,K){"use strict";var p=x("../../plots/template_attributes").hovertemplateAttrs,v=x("../scattergeo/attributes"),u=x("../../components/colorscale/attributes"),y=x("../../plots/attributes"),e=x("../../components/color/attributes").defaultLine,n=x("../../lib/extend").extendFlat,t=v.marker.line;Q.exports=n({locations:{valType:"data_array",editType:"calc"},locationmode:v.locationmode,z:{valType:"data_array",editType:"calc"},geojson:n({},v.geojson,{}),featureidkey:v.featureidkey,text:n({},v.text,{}),hovertext:n({},v.hovertext,{}),marker:{line:{color:n({},t.color,{dflt:e}),width:n({},t.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:v.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:v.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:n({},y.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:p(),showlegend:n({},y.showlegend,{dflt:!1})},u("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":967}],717:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../constants/numerical").BADNUM,u=x("../../components/colorscale/calc"),y=x("../scatter/arrays_to_calcdata"),e=x("../scatter/calc_selection");function n(t){return t&&"string"==typeof t}Q.exports=function(t,a){var r,f=a._length,s=new Array(f);r=a.geojson?function(m){return n(m)||p(m)}:n;for(var i=0;i<f;i++){var l=s[i]={},c=a.locations[i],h=a.z[i];r(c)&&p(h)?(l.loc=c,l.z=h):(l.loc=null,l.z=v),l.index=i}return y(s,a),u(t,a,{vals:a.z,containerStr:"",cLetter:"z"}),e(s,a),s}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":924,"../scatter/calc_selection":927,"fast-isnumeric":190}],718:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/colorscale/defaults"),u=x("./attributes");Q.exports=function(y,e,n,t){function a(l,c){return p.coerce(y,e,u,l,c)}var r=a("locations"),f=a("z");if(r&&r.length&&p.isArrayOrTypedArray(f)&&f.length){e._length=Math.min(r.length,f.length);var s,i=a("geojson");("string"==typeof i&&""!==i||p.isPlainObject(i))&&(s="geojson-id"),"geojson-id"===a("locationmode",s)&&a("featureidkey"),a("text"),a("hovertext"),a("hovertemplate"),a("marker.line.width")&&a("marker.line.color"),a("marker.opacity"),v(y,e,t,a,{prefix:"",cLetter:"z"}),p.coerceSelectionMarkerOpacity(e,a)}else e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(x,Q,K){"use strict";Q.exports=function(p,v,u,y,e){p.location=v.location,p.z=v.z;var n=y[e];return n.fIn&&n.fIn.properties&&(p.properties=n.fIn.properties),p.ct=n.ct,p}},{}],720:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes"),v=x("./attributes"),u=x("../../lib").fillText;Q.exports=function(y,e,n){var t,a,r,f,s=y.cd,i=s[0].trace,l=y.subplot,c=[e,n],h=[e+360,n];for(a=0;a<s.length;a++)if(f=!1,(t=s[a])._polygons){for(r=0;r<t._polygons.length;r++)t._polygons[r].contains(c)&&(f=!f),t._polygons[r].contains(h)&&(f=!f);if(f)break}if(f&&t)return y.x0=y.x1=y.xa.c2p(t.ct),y.y0=y.y1=y.ya.c2p(t.ct),y.index=t.index,y.location=t.loc,y.z=t.z,y.zLabel=p.tickText(l.mockAxis,l.mockAxis.c2l(t.z),"hover").text,y.hovertemplate=t.hovertemplate,function(m,d,o){if(!d.hovertemplate){var b=o.hi||d.hoverinfo,g=String(o.loc),w="all"===b?v.hoverinfo.flags:b.split("+"),_=-1!==w.indexOf("name"),A=-1!==w.indexOf("location"),T=-1!==w.indexOf("z"),E=-1!==w.indexOf("text"),k=[];!_&&A?m.nameOverride=g:(_&&(m.nameOverride=d.name),A&&k.push(g)),T&&k.push(m.zLabel),E&&u(o,d,k),m.extraText=k.join("<br>")}}(y,i,t),[y]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../heatmap/colorbar"),calc:x("./calc"),calcGeoJSON:x("./plot").calcGeoJSON,plot:x("./plot").plot,style:x("./style").style,styleOnSelect:x("./style").styleOnSelect,hoverPoints:x("./hover"),eventData:x("./event_data"),selectPoints:x("./select"),moduleType:"trace",name:"choropleth",basePlotModule:x("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=x("../../lib/geo_location_utils"),y=x("../../lib/topojson_utils").getTopojsonFeatures,e=x("../../plots/cartesian/autorange").findExtremes,n=x("./style").style;Q.exports={calcGeoJSON:function(t,a){for(var r=t[0].trace,f=a[r.geo],s=f._subplot,i=r.locationmode,l=r._length,c="geojson-id"===i?u.extractTraceFeature(t):y(r,s.topojson),h=[],m=[],d=0;d<l;d++){var o=t[d],b="geojson-id"===i?o.fOut:u.locationToFeature(i,o.loc,c);if(b){o.geojson=b,o.ct=b.properties.ct,o._polygons=u.feature2polygons(b);var g=u.computeBbox(b);h.push(g[0],g[2]),m.push(g[1],g[3])}else o.geojson=null}if("geojson"===f.fitbounds&&"geojson-id"===i){var w=u.computeBbox(u.getTraceGeojson(r));h=[w[0],w[2]],m=[w[1],w[3]]}var _={padded:!0};r._extremes.lon=e(f.lonaxis._ax,h,_),r._extremes.lat=e(f.lataxis._ax,m,_)},plot:function(t,a,r){var f=a.layers.backplot.select(".choroplethlayer");v.makeTraceGroups(f,r,"trace choropleth").each(function(s){var i=p.select(this).selectAll("path.choroplethlocation").data(v.identity);i.enter().append("path").classed("choroplethlocation",!0),i.exit().remove(),n(t,s)})}}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(x,Q,K){"use strict";Q.exports=function(p,v){var u,y,e,n,t,a=p.cd,r=p.xaxis,f=p.yaxis,s=[];if(!1===v)for(u=0;u<a.length;u++)a[u].selected=0;else for(u=0;u<a.length;u++)(e=(y=a[u]).ct)&&(n=r.c2p(e),t=f.c2p(e),v.contains([n,t],null,u,p)?(s.push({pointNumber:u,lon:e[0],lat:e[1]}),y.selected=1):y.selected=0);return s}},{}],724:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/color"),u=x("../../components/drawing"),y=x("../../components/colorscale");function e(n,t){var a=t[0].trace,r=t[0].node3.selectAll(".choroplethlocation"),f=a.marker||{},s=f.line||{},i=y.makeColorScaleFuncFromTrace(a);r.each(function(l){p.select(this).attr("fill",i(l.z)).call(v.stroke,l.mlc||s.color).call(u.dashLine,"",l.mlw||s.width||0).style("opacity",f.opacity)}),u.selectedPointStyle(r,a,n)}Q.exports={style:function(n,t){t&&e(n,t)},styleOnSelect:function(n,t){var r=t[0].trace;r.selectedpoints?u.selectedPointStyle(t[0].node3.selectAll(".choroplethlocation"),r,n):e(n,t)}}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(x,Q,K){"use strict";var p=x("../choropleth/attributes"),v=x("../../components/colorscale/attributes"),u=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../../plots/attributes"),e=x("../../lib/extend").extendFlat;Q.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},p.featureidkey,{}),below:{valType:"string",editType:"plot"},text:p.text,hovertext:p.hovertext,marker:{line:{color:e({},p.marker.line.color,{editType:"plot"}),width:e({},p.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},p.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},p.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},p.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:p.hoverinfo,hovertemplate:u({},{keys:["properties"]}),showlegend:e({},y.showlegend,{dflt:!1})},v("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib"),u=x("../../components/colorscale"),y=x("../../components/drawing"),e=x("../../lib/geojson_utils").makeBlank,n=x("../../lib/geo_location_utils");function t(a){var r,f=a[0].trace,s=f._opts;if(f.selectedpoints){for(var i=y.makeSelectedPointStyleFns(f),l=0;l<a.length;l++){var c=a[l];c.fOut&&(c.fOut.properties.mo2=i.selectedOpacityFn(c))}r={type:"identity",property:"mo2"}}else r=v.isArrayOrTypedArray(f.marker.opacity)?{type:"identity",property:"mo"}:f.marker.opacity;return v.extendFlat(s.fill.paint,{"fill-opacity":r}),v.extendFlat(s.line.paint,{"line-opacity":r}),s}Q.exports={convert:function(a){var r=a[0].trace,f=!0===r.visible&&0!==r._length,s={layout:{visibility:"none"},paint:{}},i={layout:{visibility:"none"},paint:{}},l=r._opts={fill:s,line:i,geojson:e()};if(!f)return l;var c=n.extractTraceFeature(a);if(!c)return l;var h,m,d,o=u.makeColorScaleFuncFromTrace(r),b=r.marker,g=b.line||{};v.isArrayOrTypedArray(b.opacity)&&(h=function(k){var O=k.mo;return p(O)?+v.constrain(O,0,1):0}),v.isArrayOrTypedArray(g.color)&&(m=function(k){return k.mlc}),v.isArrayOrTypedArray(g.width)&&(d=function(k){return k.mlw});for(var w=0;w<a.length;w++){var _=a[w],A=_.fOut;if(A){var T=A.properties;T.fc=o(_.z),h&&(T.mo=h(_)),m&&(T.mlc=m(_)),d&&(T.mlw=d(_)),_.ct=T.ct,_._polygons=n.feature2polygons(A)}}var E=h?{type:"identity",property:"mo"}:b.opacity;return v.extendFlat(s.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":E}),v.extendFlat(i.paint,{"line-color":m?{type:"identity",property:"mlc"}:g.color,"line-width":d?{type:"identity",property:"mlw"}:g.width,"line-opacity":E}),s.layout.visibility="visible",i.layout.visibility="visible",l.geojson={type:"FeatureCollection",features:c},t(a),l},convertOnSelect:t}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/colorscale/defaults"),u=x("./attributes");Q.exports=function(y,e,n,t){function a(i,l){return p.coerce(y,e,u,i,l)}var r=a("locations"),f=a("z"),s=a("geojson");p.isArrayOrTypedArray(r)&&r.length&&p.isArrayOrTypedArray(f)&&f.length&&("string"==typeof s&&""!==s||p.isPlainObject(s))?(a("featureidkey"),e._length=Math.min(r.length,f.length),a("below"),a("text"),a("hovertext"),a("hovertemplate"),a("marker.line.width")&&a("marker.line.color"),a("marker.opacity"),v(y,e,t,a,{prefix:"",cLetter:"z"}),p.coerceSelectionMarkerOpacity(e,a)):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../heatmap/colorbar"),calc:x("../choropleth/calc"),plot:x("./plot"),hoverPoints:x("../choropleth/hover"),eventData:x("../choropleth/event_data"),selectPoints:x("../choropleth/select"),styleOnSelect:function(p,v){v&&v[0].trace._glTrace.updateOnSelect(v)},getBelow:function(p,v){for(var u=v.getMapLayers(),y=u.length-2;y>=0;y--){var e=u[y].id;if("string"==typeof e&&0===e.indexOf("water"))for(var n=y+1;n<u.length;n++)if("string"==typeof(e=u[n].id)&&-1===e.indexOf("plotly-"))return e}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:x("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(x,Q,K){"use strict";var p=x("./convert").convert,v=x("./convert").convertOnSelect,u=x("../../plots/mapbox/constants").traceLayerPrefix;function y(n,t){this.type="choroplethmapbox",this.subplot=n,this.uid=t,this.sourceId="source-"+t,this.layerList=[["fill",u+t+"-fill"],["line",u+t+"-line"]],this.below=null}var e=y.prototype;e.update=function(n){this._update(p(n))},e.updateOnSelect=function(n){this._update(v(n))},e._update=function(n){var t=this.subplot,a=this.layerList,r=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(n.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(n,r),this.below=r);for(var f=0;f<a.length;f++){var s=a[f],l=s[1],c=n[s[0]];t.setOptions(l,"setLayoutProperty",c.layout),"visible"===c.layout.visibility&&t.setOptions(l,"setPaintProperty",c.paint)}},e._addLayers=function(n,t){for(var a=this.subplot,r=this.layerList,f=this.sourceId,s=0;s<r.length;s++){var i=r[s],l=i[0],c=n[l];a.addLayer({type:l,id:i[1],source:f,layout:c.layout,paint:c.paint},t)}},e._removeLayers=function(){for(var n=this.subplot.map,t=this.layerList,a=t.length-1;a>=0;a--)n.removeLayer(t[a][1])},e.dispose=function(){var n=this.subplot.map;this._removeLayers(),n.removeSource(this.sourceId)},Q.exports=function(n,t){var a=t[0].trace,r=new y(n,a.uid),f=r.sourceId,s=p(t),i=r.below=n.belowLookup["trace-"+a.uid];return n.map.addSource(f,{type:"geojson",data:s.geojson}),r._addLayers(s,i),t[0].trace._glTrace=r,r}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(x,Q,K){"use strict";var p=x("../../components/colorscale/attributes"),v=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,u=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../mesh3d/attributes"),e=x("../../plots/attributes"),n=x("../../lib/extend").extendFlat,t={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:u({editType:"calc"},{keys:["norm"]}),uhoverformat:v("u",1),vhoverformat:v("v",1),whoverformat:v("w",1),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),showlegend:n({},e.showlegend,{dflt:!1})};n(t,p("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(a){t[a]=y[a]}),t.hoverinfo=n({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),t.transforms=void 0,Q.exports=t},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":866}],731:[function(x,Q,K){"use strict";var p=x("../../components/colorscale/calc");Q.exports=function(v,u){for(var y=u.u,e=u.v,n=u.w,t=Math.min(u.x.length,u.y.length,u.z.length,y.length,e.length,n.length),a=-1/0,r=1/0,f=0;f<t;f++){var s=y[f],i=e[f],l=n[f],c=Math.sqrt(s*s+i*i+l*l);a=Math.max(a,c),r=Math.min(r,c)}u._len=t,u._normMax=a,p(v,u,{vals:[r,a],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(x,Q,K){"use strict";var p=x("../../../stackgl_modules").gl_cone3d,v=x("../../../stackgl_modules").gl_cone3d.createConeMesh,u=x("../../lib").simpleMap,y=x("../../lib/gl_format_color").parseColorScale,e=x("../../components/colorscale").extractOpts,n=x("../../plots/gl3d/zip3");function t(l,c){this.scene=l,this.uid=c,this.mesh=null,this.data=null}var a=t.prototype;a.handlePick=function(l){if(l.object===this.mesh){var c=l.index=l.data.index,o=this.data.u[c],b=this.data.v[c],g=this.data.w[c];l.traceCoordinate=[this.data.x[c],this.data.y[c],this.data.z[c],o,b,g,Math.sqrt(o*o+b*b+g*g)];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&void 0!==w[c]?l.textLabel=w[c]:w&&(l.textLabel=w),!0}};var r={xaxis:0,yaxis:1,zaxis:2},f={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function i(l,c){var h=l.fullSceneLayout,m=l.dataScale,d={};function o(_,A){var T=h[A],E=m[r[A]];return u(_,function(k){return T.d2l(k)*E})}d.vectors=n(o(c.u,"xaxis"),o(c.v,"yaxis"),o(c.w,"zaxis"),c._len),d.positions=n(o(c.x,"xaxis"),o(c.y,"yaxis"),o(c.z,"zaxis"),c._len);var b=e(c);d.colormap=y(c),d.vertexIntensityBounds=[b.min/c._normMax,b.max/c._normMax],d.coneOffset=f[c.anchor],d.coneSize="scaled"===c.sizemode?c.sizeref||.5:c.sizeref&&c._normMax?c.sizeref/c._normMax:.5;var g=p(d),w=c.lightposition;return g.lightPosition=[w.x,w.y,w.z],g.ambient=c.lighting.ambient,g.diffuse=c.lighting.diffuse,g.specular=c.lighting.specular,g.roughness=c.lighting.roughness,g.fresnel=c.lighting.fresnel,g.opacity=c.opacity,c._pad=s[c.anchor]*g.vectorScale*g.coneScale*c._normMax,g}a.update=function(l){this.data=l;var c=i(this.scene,l);this.mesh.update(c)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(l,c){var h=l.glplot.gl,m=i(l,c),d=v(h,m),o=new t(l,c.uid);return o.mesh=d,o.data=c,d._trace=o,l.glplot.add(d),o}},{"../../../stackgl_modules":1119,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/colorscale/defaults"),u=x("./attributes");Q.exports=function(y,e,n,t){function a(h,m){return p.coerce(y,e,u,h,m)}var r=a("u"),f=a("v"),s=a("w"),i=a("x"),l=a("y"),c=a("z");r&&r.length&&f&&f.length&&s&&s.length&&i&&i.length&&l&&l.length&&c&&c.length?(a("sizeref"),a("sizemode"),a("anchor"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),v(y,e,t,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(x,Q,K){"use strict";Q.exports={moduleType:"trace",name:"cone",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:x("./calc"),plot:x("./convert"),eventData:function(p,v){return p.norm=v.traceCoordinate[6],p},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(x,Q,K){"use strict";var p=x("../heatmap/attributes"),v=x("../scatter/attributes"),u=x("../../plots/cartesian/axis_format_attributes"),y=u.axisHoverFormat,e=u.descriptionOnlyNumbers,n=x("../../components/colorscale/attributes"),t=x("../../components/drawing/attributes").dash,a=x("../../plots/font_attributes"),r=x("../../lib/extend").extendFlat,f=x("../../constants/filter_ops"),s=f.COMPARISON_OPS2,i=f.INTERVAL_OPS,l=v.line;Q.exports=r({z:p.z,x:p.x,x0:p.x0,dx:p.dx,y:p.y,y0:p.y0,dy:p.dy,xperiod:p.xperiod,yperiod:p.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:p.xperiodalignment,yperiodalignment:p.yperiodalignment,text:p.text,hovertext:p.hovertext,transpose:p.transpose,xtype:p.xtype,ytype:p.ytype,xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:p.hovertemplate,hoverongaps:p.hoverongaps,connectgaps:r({},p.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:a({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(s).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r({},l.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:t,smoothing:r({},l.smoothing,{}),editType:"plot"}},n("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":925}],736:[function(x,Q,K){"use strict";var p=x("../../components/colorscale"),v=x("../heatmap/calc"),u=x("./set_contours"),y=x("./end_plus");Q.exports=function(e,n){var t=v(e,n),a=t[0].z;u(n,a);var r,f=n.contours,s=p.extractOpts(n);if("heatmap"===f.coloring&&s.auto&&!1===n.autocontour){var i=f.start,l=y(f),c=f.size||1,h=Math.floor((l-i)/c)+1;isFinite(c)||(c=1,h=1);var m=i-c/2;r=[m,m+h*c]}else r=a;return p.calc(e,n,{vals:r,cLetter:"z"}),t}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(x,Q,K){"use strict";Q.exports=function(p,v){var u,y=p[0],e=y.z;switch(v.type){case"levels":var n=Math.min(e[0][0],e[0][1]);for(u=0;u<p.length;u++){var t=p[u];t.prefixBoundary=!t.edgepaths.length&&(n>t.level||t.starts.length&&n===t.level)}break;case"constraint":if(y.prefixBoundary=!1,y.edgepaths.length)return;var a=y.x.length,r=y.y.length,f=-1/0,s=1/0;for(u=0;u<r;u++)s=Math.min(s,e[u][0]),s=Math.min(s,e[u][a-1]),f=Math.max(f,e[u][0]),f=Math.max(f,e[u][a-1]);for(u=1;u<a-1;u++)s=Math.min(s,e[0][u]),s=Math.min(s,e[r-1][u]),f=Math.max(f,e[0][u]),f=Math.max(f,e[r-1][u]);var i,l,c=v.value;switch(v._operation){case">":c>f&&(y.prefixBoundary=!0);break;case"<":(c<s||y.starts.length&&c===s)&&(y.prefixBoundary=!0);break;case"[]":i=Math.min(c[0],c[1]),((l=Math.max(c[0],c[1]))<s||i>f||y.starts.length&&l===s)&&(y.prefixBoundary=!0);break;case"][":i=Math.min(c[0],c[1]),l=Math.max(c[0],c[1]),i<s&&l>f&&(y.prefixBoundary=!0)}}}},{}],738:[function(x,Q,K){"use strict";var p=x("../../components/colorscale"),v=x("./make_color_map"),u=x("./end_plus");Q.exports={min:"zmin",max:"zmax",calc:function(y,e,n){var t=e.contours,a=e.line,r=t.size||1,f=t.coloring,s=v(e,{isColorbar:!0});if("heatmap"===f){var i=p.extractOpts(e);n._fillgradient=i.reversescale?p.flipScale(i.colorscale):i.colorscale,n._zrange=[i.min,i.max]}else"fill"===f&&(n._fillcolor=s);n._line={color:"lines"===f?s:a.color,width:!1!==t.showlines?a.width:0,dash:a.dash},n._levels={start:t.start,end:u(t),size:r}}}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(x,Q,K){"use strict";Q.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("./label_defaults"),u=x("../../components/color"),y=u.addOpacity,e=u.opacity,n=x("../../constants/filter_ops"),t=n.CONSTRAINT_REDUCTION,a=n.COMPARISON_OPS2;Q.exports=function(r,f,s,i,l,c){var h,m,d,g,w,_,o=f.contours,b=s("contours.operation");o._operation=t[b],g=s,-1===a.indexOf((w=o).operation)?(g("contours.value",[0,1]),Array.isArray(w.value)?w.value.length>2?w.value=w.value.slice(2):0===w.length?w.value=[0,1]:w.length<2?(_=parseFloat(w.value[0]),w.value=[_,_+1]):w.value=[parseFloat(w.value[0]),parseFloat(w.value[1])]:p(w.value)&&(_=parseFloat(w.value),w.value=[_,_+1])):(g("contours.value",0),p(w.value)||(w.value=Array.isArray(w.value)?parseFloat(w.value[0]):0)),"="===b?h=o.showlines=!0:(h=s("contours.showlines"),d=s("fillcolor",y((r.line||{}).color||l,.5))),h&&(m=s("line.color",d&&e(d)?y(f.fillcolor,1):l),s("line.width",2),s("line.dash")),s("line.smoothing"),v(s,i,m,c)}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(x,Q,K){"use strict";var p=x("../../constants/filter_ops"),v=x("fast-isnumeric");function u(n,t){var a,r=Array.isArray(t);function f(s){return v(s)?+s:null}return-1!==p.COMPARISON_OPS2.indexOf(n)?a=f(r?t[0]:t):-1!==p.INTERVAL_OPS.indexOf(n)?a=r?[f(t[0]),f(t[1])]:[f(t),f(t)]:-1!==p.SET_OPS.indexOf(n)&&(a=r?t.map(f):[f(t)]),a}function y(n){return function(t){t=u(n,t);var a=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]);return{start:a,end:r,size:r-a}}}function e(n){return function(t){return{start:t=u(n,t),end:1/0,size:1/0}}}Q.exports={"[]":y("[]"),"][":y("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(x,Q,K){"use strict";Q.exports=function(p,v,u,y){var e=y("contours.start"),n=y("contours.end"),t=!1===e||!1===n,a=u("contours.size");!(t?v.autocontour=!0:u("autocontour",!1))&&a||u("ncontours")}},{}],743:[function(x,Q,K){"use strict";var p=x("../../lib");function v(u){return p.extendFlat({},u,{edgepaths:p.extendDeep([],u.edgepaths),paths:p.extendDeep([],u.paths),starts:p.extendDeep([],u.starts)})}Q.exports=function(u,y){var e,n,t,a=function(s){return s.reverse()},r=function(s){return s};switch(y){case"=":case"<":return u;case">":for(1!==u.length&&p.warn("Contour data invalid for the specified inequality operation."),n=u[0],e=0;e<n.edgepaths.length;e++)n.edgepaths[e]=a(n.edgepaths[e]);for(e=0;e<n.paths.length;e++)n.paths[e]=a(n.paths[e]);for(e=0;e<n.starts.length;e++)n.starts[e]=a(n.starts[e]);return u;case"][":var f=a;a=r,r=f;case"[]":for(2!==u.length&&p.warn("Contour data invalid for the specified inequality range operation."),n=v(u[0]),t=v(u[1]),e=0;e<n.edgepaths.length;e++)n.edgepaths[e]=a(n.edgepaths[e]);for(e=0;e<n.paths.length;e++)n.paths[e]=a(n.paths[e]);for(e=0;e<n.starts.length;e++)n.starts[e]=a(n.starts[e]);for(;t.edgepaths.length;)n.edgepaths.push(r(t.edgepaths.shift()));for(;t.paths.length;)n.paths.push(r(t.paths.shift()));for(;t.starts.length;)n.starts.push(r(t.starts.shift()));return[n]}}},{"../../lib":503}],744:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../heatmap/xyz_defaults"),u=x("../scatter/period_defaults"),y=x("./constraint_defaults"),e=x("./contours_defaults"),n=x("./style_defaults"),t=x("./attributes");Q.exports=function(a,r,f,s){function i(c,h){return p.coerce(a,r,t,c,h)}if(v(a,r,i,s)){u(a,r,s,i),i("xhoverformat"),i("yhoverformat"),i("text"),i("hovertext"),i("hovertemplate"),i("hoverongaps");var l="constraint"===i("contours.type");i("connectgaps",p.isArray1D(r.z)),l?y(a,r,i,s,f):(e(a,r,i,function(c){return p.coerce2(a,r,t,c)}),n(a,r,i,s))}else r.visible=!1}},{"../../lib":503,"../heatmap/xyz_defaults":806,"../scatter/period_defaults":945,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./constraint_mapping"),u=x("./end_plus");Q.exports=function(y,e,n){for(var t="constraint"===y.type?v[y._operation](y.value):y,a=t.size,r=[],f=u(t),s=n.trace._carpetTrace,i=s?{xaxis:s.aaxis,yaxis:s.baxis,x:n.a,y:n.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:n.x,y:n.y},l=t.start;l<f;l+=a)if(r.push(p.extendFlat({level:l,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},i)),r.length>1e3){p.warn("Too many contours, clipping at 1000",y);break}return r}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(x,Q,K){"use strict";Q.exports=function(p){return p.end+p.size/1e6}},{}],747:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./constants");function u(n,t,a,r){return Math.abs(n[0]-t[0])<a&&Math.abs(n[1]-t[1])<r}function y(n,t,a,r,f){var s,J,re,ne,se,i=t.join(","),l=n.crossings[i],c=(re=t,ne=0,se=0,(J=l)>20&&a?208===J||1114===J?ne=0===re[0]?1:-1:se=0===re[1]?1:-1:-1!==v.BOTTOMSTART.indexOf(J)?se=1:-1!==v.LEFTSTART.indexOf(J)?ne=1:-1!==v.TOPSTART.indexOf(J)?se=-1:ne=-1,[ne,se]),h=[e(n,t,[-c[0],-c[1]])],m=n.z.length,d=n.z[0].length,o=t.slice(),b=c.slice();for(s=0;s<1e4;s++){if(l>20?n.crossings[i]=v.SADDLEREMAINDER[l=v.CHOOSESADDLE[l][(c[0]||c[1])<0?0:1]]:delete n.crossings[i],!(c=v.NEWDELTA[l])){p.log("Found bad marching index:",l,t,n.level);break}if(h.push(e(n,t,c)),t[0]+=c[0],t[1]+=c[1],i=t.join(","),u(h[h.length-1],h[h.length-2],r,f)&&h.pop(),t[0]===o[0]&&t[1]===o[1]&&c[0]===b[0]&&c[1]===b[1]||a&&(c[0]&&(t[0]<0||t[0]>d-2)||c[1]&&(t[1]<0||t[1]>m-2)))break;l=n.crossings[i]}1e4===s&&p.log("Infinite loop in contour?");var w,_,A,T,E,k,O,D,S,C,z,B,U,G,X,Z=u(h[0],h[h.length-1],r,f),q=0,W=.2*n.smoothing,te=[],R=0;for(s=1;s<h.length;s++)void 0,void 0,G=(B=h[s])[2]-(U=h[s-1])[2],X=B[3]-U[3],q+=O=Math.sqrt(G*G+X*X),te.push(O);var N=q/te.length*W;function V(J){return h[J%h.length]}for(s=h.length-2;s>=R;s--)if((w=te[s])<N){for(A=0,_=s-1;_>=R&&w+te[_]<N;_--)w+=te[_];if(Z&&s===h.length-2)for(A=0;A<_&&w+te[A]<N;A++)w+=te[A];E=s-_+A+1,k=Math.floor((s+_+A+2)/2),T=Z||s!==h.length-2?Z||-1!==_?E%2?V(k):[(V(k)[0]+V(k+1)[0])/2,(V(k)[1]+V(k+1)[1])/2]:h[0]:h[h.length-1],h.splice(_+1,s-_+1,T),s=_+1,A&&(R=A),Z&&(s===h.length-2?h[A]=h[h.length-1]:0===s&&(h[h.length-1]=h[0]))}for(h.splice(0,R),s=0;s<h.length;s++)h[s].length=2;if(!(h.length<2))if(Z)h.pop(),n.paths.push(h);else{a||p.log("Unclosed interior contour?",n.level,o.join(","),h.join("L"));var ee=!1;for(D=0;D<n.edgepaths.length;D++)if(C=n.edgepaths[D],!ee&&u(C[0],h[h.length-1],r,f)){h.pop(),ee=!0;var j=!1;for(S=0;S<n.edgepaths.length;S++)if(u((z=n.edgepaths[S])[z.length-1],h[0],r,f)){j=!0,h.shift(),n.edgepaths.splice(D,1),S===D?n.paths.push(h.concat(z)):(S>D&&S--,n.edgepaths[S]=z.concat(h,C));break}j||(n.edgepaths[D]=h.concat(C))}for(D=0;D<n.edgepaths.length&&!ee;D++)u((C=n.edgepaths[D])[C.length-1],h[0],r,f)&&(h.shift(),n.edgepaths[D]=C.concat(h),ee=!0);ee||n.edgepaths.push(h)}}function e(n,t,a){var r=t[0]+Math.max(a[0],0),f=t[1]+Math.max(a[1],0),s=n.z[f][r],i=n.xaxis,l=n.yaxis;if(a[1]){var c=(n.level-s)/(n.z[f][r+1]-s),h=(1!==c?(1-c)*i.c2l(n.x[r]):0)+(0!==c?c*i.c2l(n.x[r+1]):0);return[i.c2p(i.l2c(h),!0),l.c2p(n.y[f],!0),r+c,f]}var m=(n.level-s)/(n.z[f+1][r]-s),d=(1!==m?(1-m)*l.c2l(n.y[f]):0)+(0!==m?m*l.c2l(n.y[f+1]):0);return[i.c2p(n.x[r],!0),l.c2p(l.l2c(d),!0),r,f+m]}Q.exports=function(n,t,a){var r,f,s,i;for(t=t||.01,a=a||.01,f=0;f<n.length;f++){for(s=n[f],i=0;i<s.starts.length;i++)y(s,s.starts[i],"edge",t,a);for(r=0;Object.keys(s.crossings).length&&r<1e4;)r++,y(s,Object.keys(s.crossings)[0].split(",").map(Number),void 0,t,a);1e4===r&&p.log("Infinite loop in contour?")}}},{"../../lib":503,"./constants":739}],748:[function(x,Q,K){"use strict";var p=x("../../components/color"),v=x("../heatmap/hover");Q.exports=function(u,y,e,n,t){t||(t={}),t.isContour=!0;var a=v(u,y,e,n,t);return a&&a.forEach(function(r){var f=r.trace;"constraint"===f.contours.type&&(f.fillcolor&&p.opacity(f.fillcolor)?r.color=p.addOpacity(f.fillcolor,1):f.contours.showlines&&p.opacity(f.line.color)&&(r.color=p.addOpacity(f.line.color,1)))}),a}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot").plot,style:x("./style"),colorbar:x("./colorbar"),hoverPoints:x("./hover"),moduleType:"trace",name:"contour",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(x,Q,K){"use strict";var p=x("../../lib");Q.exports=function(v,u,y,e){if(e||(e={}),v("contours.showlabels")){var n=u.font;p.coerceFont(v,"contours.labelfont",{family:n.family,size:n.size,color:y}),v("contours.labelformat")}!1!==e.hasHover&&v("zhoverformat")}},{"../../lib":503}],751:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/colorscale"),u=x("./end_plus");Q.exports=function(y){var e=y.contours,n=e.start,t=u(e),a=e.size||1,r=Math.floor((t-n)/a)+1,f="lines"===e.coloring?0:1,s=v.extractOpts(y);isFinite(a)||(a=1,r=1);var i,l,c=s.reversescale?v.flipScale(s.colorscale):s.colorscale,h=c.length,m=new Array(h),d=new Array(h);if("heatmap"===e.coloring){var o=s.min,b=s.max;for(l=0;l<h;l++)m[l]=(i=c[l])[0]*(b-o)+o,d[l]=i[1];var g=p.extent([o,b,e.start,e.start+a*(r-1)]),w=g[o<b?0:1],_=g[o<b?1:0];w!==o&&(m.splice(0,0,w),d.splice(0,0,d[0])),_!==b&&(m.push(_),d.push(d[d.length-1]))}else for(l=0;l<h;l++)m[l]=((i=c[l])[0]*(r+f-1)-f/2)*a+n,d[l]=i[1];return v.makeColorScaleFunc({domain:m,range:d},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(x,Q,K){"use strict";var p=x("./constants");function v(u,y){var e=(y[0][0]>u?0:1)+(y[0][1]>u?0:2)+(y[1][1]>u?0:4)+(y[1][0]>u?0:8);return 5===e||10===e?u>(y[0][0]+y[0][1]+y[1][0]+y[1][1])/4?5===e?713:1114:5===e?104:208:15===e?0:e}Q.exports=function(u){var y,e,n,t,a,r,f,s,i,l=u[0].z,c=l.length,h=l[0].length,m=2===c||2===h;for(e=0;e<c-1;e++)for(t=[],0===e&&(t=t.concat(p.BOTTOMSTART)),e===c-2&&(t=t.concat(p.TOPSTART)),y=0;y<h-1;y++)for(n=t.slice(),0===y&&(n=n.concat(p.LEFTSTART)),y===h-2&&(n=n.concat(p.RIGHTSTART)),a=y+","+e,r=[[l[e][y],l[e][y+1]],[l[e+1][y],l[e+1][y+1]]],i=0;i<u.length;i++)(f=v((s=u[i]).level,r))&&(s.crossings[a]=f,-1!==n.indexOf(f)&&(s.starts.push([y,e]),m&&-1!==n.indexOf(f,n.indexOf(f)+1)&&s.starts.push([y,e])))}},{"./constants":739}],753:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=x("../../components/drawing"),y=x("../../components/colorscale"),e=x("../../lib/svg_text_utils"),n=x("../../plots/cartesian/axes"),t=x("../../plots/cartesian/set_convert"),a=x("../heatmap/plot"),r=x("./make_crossings"),f=x("./find_all_paths"),s=x("./empty_pathinfo"),i=x("./convert_to_constraints"),l=x("./close_boundaries"),c=x("./constants"),h=c.LABELOPTIMIZER;function m(b,g){var w,_,A,T,E,k,D="",S=0,C=b.edgepaths.map(function(Z,q){return q}),z=!0;function B(Z){return Math.abs(Z[1]-g[2][1])<.01}function G(Z){return Math.abs(Z[0]-g[2][0])<.01}for(;C.length;){for(k=u.smoothopen(b.edgepaths[S],b.smoothing),D+=z?k:k.replace(/^M/,"L"),C.splice(C.indexOf(S),1),w=b.edgepaths[S][b.edgepaths[S].length-1],T=-1,A=0;A<4;A++){if(!w){v.log("Missing end?",S,b);break}for(Math.abs(w[1]-g[0][1])<.01&&!G(w)?_=g[1]:Math.abs(w[0]-g[0][0])<.01?_=g[0]:B(w)?_=g[3]:G(w)&&(_=g[2]),E=0;E<b.edgepaths.length;E++){var X=b.edgepaths[E][0];Math.abs(w[0]-_[0])<.01?Math.abs(w[0]-X[0])<.01&&(X[1]-w[1])*(_[1]-X[1])>=0&&(_=X,T=E):Math.abs(w[1]-_[1])<.01?Math.abs(w[1]-X[1])<.01&&(X[0]-w[0])*(_[0]-X[0])>=0&&(_=X,T=E):v.log("endpt to newendpt is not vert. or horz.",w,_,X)}if(w=_,T>=0)break;D+="L"+_}if(T===b.edgepaths.length){v.log("unclosed perimeter path");break}(z=-1===C.indexOf(S=T))&&(S=C[0],D+="Z")}for(S=0;S<b.paths.length;S++)D+=u.smoothclosed(b.paths[S],b.smoothing);return D}function d(b,g,w,_){var A=g.width/2,T=g.height/2,E=b.x,k=b.y,O=b.theta,D=Math.cos(O)*A,S=Math.sin(O)*A,C=(E>_.center?_.right-E:E-_.left)/(D+Math.abs(Math.sin(O)*T)),z=(k>_.middle?_.bottom-k:k-_.top)/(Math.abs(S)+Math.cos(O)*T);if(C<1||z<1)return 1/0;var B=h.EDGECOST*(1/(C-1)+1/(z-1));B+=h.ANGLECOST*O*O;for(var U=E-D,G=k-S,X=E+D,Z=k+S,q=0;q<w.length;q++){var W=w[q],te=Math.cos(W.theta)*W.width/2,R=Math.sin(W.theta)*W.width/2,N=2*v.segmentDistance(U,G,X,Z,W.x-te,W.y-R,W.x+te,W.y+R)/(g.height+W.height),V=W.level===g.level,ee=V?h.SAMELEVELDISTANCE:1;if(N<=ee)return 1/0;B+=h.NEIGHBORCOST*(V?h.SAMELEVELFACTOR:1)/(N-ee)}return B}function o(b){var g,w,_=b.trace._emptypoints,A=[],T=b.z.length,E=b.z[0].length,k=[];for(g=0;g<E;g++)k.push(1);for(g=0;g<T;g++)A.push(k.slice());for(g=0;g<_.length;g++)A[(w=_[g])[0]][w[1]]=0;return b.zmask=A,A}K.plot=function(b,g,w,_){var A=g.xaxis,T=g.yaxis;v.makeTraceGroups(_,w,"contour").each(function(E){var k=p.select(this),O=E[0],S=O.x,C=O.y,z=O.trace.contours,B=s(z,g,O),U=v.ensureSingle(k,"g","heatmapcoloring"),G=[];"heatmap"===z.coloring&&(G=[E]),a(b,g,G,U),r(B),f(B);var V,ee,j,X=A.c2p(S[0],!0),Z=A.c2p(S[S.length-1],!0),q=T.c2p(C[0],!0),W=T.c2p(C[C.length-1],!0),te=[[X,W],[Z,W],[Z,q],[X,q]],R=B;"constraint"===z.type&&(R=i(B,z._operation)),V=te,ee=z,(j=v.ensureSingle(k,"g","contourbg").selectAll("path").data("fill"===ee.coloring?[0]:[])).enter().append("path"),j.exit().remove(),j.attr("d","M"+V.join("L")+"Z").style("stroke","none"),function(N,V,ee,j){var J="fill"===j.coloring||"constraint"===j.type&&"="!==j._operation,$="M"+ee.join("L")+"Z";J&&l(V,j);var re=v.ensureSingle(N,"g","contourfill").selectAll("path").data(J?V:[]);re.enter().append("path"),re.exit().remove(),re.each(function(ne){var se=(ne.prefixBoundary?$:"")+m(ne,ee);se?p.select(this).attr("d",se).style("stroke","none"):p.select(this).remove()})}(k,R,te,z),function(N,V,ee,j,J){var $=v.ensureSingle(N,"g","contourlines"),re=!1!==J.showlines,ne=J.showlabels,se=re&&ne,ie=K.createLines($,re||ne,V),ue=K.createLineClip($,se,ee,j.trace.uid),le=N.selectAll("g.contourlabels").data(ne?[0]:[]);if(le.exit().remove(),le.enter().append("g").classed("contourlabels",!0),ne){var de=[],ve=[];v.clearLocationCache();var _e=K.labelFormatter(ee,j),be=u.tester.append("text").attr("data-notex",1).call(u.font,J.labelfont),Te=V[0].xaxis,he=V[0].yaxis,me=Te._length,Ae=he._length,we=Te.range,Se=he.range,Pe=v.aggNums(Math.min,null,j.x),ze=v.aggNums(Math.max,null,j.x),He=v.aggNums(Math.min,null,j.y),tt=v.aggNums(Math.max,null,j.y),Oe=Math.max(Te.c2p(Pe,!0),0),Be=Math.min(Te.c2p(ze,!0),me),Je=Math.max(he.c2p(tt,!0),0),Ye=Math.min(he.c2p(He,!0),Ae),nt={};we[0]<we[1]?(nt.left=Oe,nt.right=Be):(nt.left=Be,nt.right=Oe),Se[0]<Se[1]?(nt.top=Je,nt.bottom=Ye):(nt.top=Ye,nt.bottom=Je),nt.middle=(nt.top+nt.bottom)/2,nt.center=(nt.left+nt.right)/2,de.push([[nt.left,nt.top],[nt.right,nt.top],[nt.right,nt.bottom],[nt.left,nt.bottom]]);var ft=Math.sqrt(me*me+Ae*Ae),dt=c.LABELDISTANCE*ft/Math.max(1,V.length/c.LABELINCREASE);ie.each(function(Rt){var Et=K.calcTextOpts(Rt.level,_e,be,ee);p.select(this).selectAll("path").each(function(){var at=v.getVisibleSegment(this,nt,Et.height/2);if(at&&!(at.len<(Et.width+Et.height)*c.LABELMIN))for(var rt=Math.min(Math.ceil(at.len/dt),c.LABELMAX),St=0;St<rt;St++){var Xt=K.findBestTextLocation(this,at,Et,ve,nt);if(!Xt)break;K.addLabelData(Xt,Et,ve,de)}})}),be.remove(),K.drawLabels(le,ve,ee,ue,se?de:null)}ne&&!re&&ie.remove()}(k,B,b,O,z),function(N,V,ee,j,J){var $=j.trace,ne="clip"+$.uid,se=ee._fullLayout._clips.selectAll("#"+ne).data($.connectgaps?[]:[0]);if(se.enter().append("clipPath").classed("contourclip",!0).attr("id",ne),se.exit().remove(),!1===$.connectgaps){var ie={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:V.xaxis,yaxis:V.yaxis,x:j.x,y:j.y,z:o(j),smoothing:0};r([ie]),f([ie]),l([ie],{type:"levels"}),v.ensureSingle(se,"path","").attr("d",(ie.prefixBoundary?"M"+J.join("L")+"Z":"")+m(ie,J))}else ne=null;u.setClipUrl(N,ne,ee)}(k,g,b,O,te)})},K.createLines=function(b,g,w){var _=w[0].smoothing,A=b.selectAll("g.contourlevel").data(g?w:[]);if(A.exit().remove(),A.enter().append("g").classed("contourlevel",!0),g){var T=A.selectAll("path.openline").data(function(k){return k.pedgepaths||k.edgepaths});T.exit().remove(),T.enter().append("path").classed("openline",!0),T.attr("d",function(k){return u.smoothopen(k,_)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var E=A.selectAll("path.closedline").data(function(k){return k.ppaths||k.paths});E.exit().remove(),E.enter().append("path").classed("closedline",!0),E.attr("d",function(k){return u.smoothclosed(k,_)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return A},K.createLineClip=function(b,g,w,_){var A=g?"clipline"+_:null,T=w._fullLayout._clips.selectAll("#"+A).data(g?[0]:[]);return T.exit().remove(),T.enter().append("clipPath").classed("contourlineclip",!0).attr("id",A),u.setClipUrl(b,A,w),T},K.labelFormatter=function(b,g){var w=b._fullLayout,_=g.trace,A=_.contours,T={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(A.labelformat)T.tickformat=A.labelformat,t(T,w);else{var E=y.extractOpts(_);if(E&&E.colorbar&&E.colorbar._axis)T=E.colorbar._axis;else{if("constraint"===A.type){var k=A.value;T.range=Array.isArray(k)?[k[0],k[k.length-1]]:[k,k]}else T.range=[A.start,A.end],T.nticks=(A.end-A.start)/A.size;T.range[0]===T.range[1]&&(T.range[1]+=T.range[0]||1),T.nticks||(T.nticks=1e3),t(T,w),n.prepTicks(T),T._tmin=null,T._tmax=null}}return function(O){return n.tickText(T,O).text}},K.calcTextOpts=function(b,g,w,_){var A=g(b);w.text(A).call(e.convertToTspans,_);var T=w.node(),E=u.bBox(T,!0);return{text:A,width:E.width,height:E.height,fontSize:+T.style["font-size"].replace("px",""),level:b,dy:(E.top+E.bottom)/2}},K.findBestTextLocation=function(b,g,w,_,A){var T,E,k,O,D,S=w.width;g.isClosed?(T=g.min+(E=g.len/h.INITIALSEARCHPOINTS)/2,k=g.max):(T=g.min+(E=(g.len-S)/(h.INITIALSEARCHPOINTS+1))+S/2,k=g.max-(E+S)/2);for(var C=1/0,z=0;z<h.ITERATIONS;z++){for(var B=T;B<k;B+=E){var U=v.getTextLocation(b,g.total,B,S),G=d(U,w,_,A);G<C&&(C=G,D=U,O=B)}if(C>2*h.MAXCOST)break;z&&(E/=2),k=(T=O-E/2)+1.5*E}if(C<=h.MAXCOST)return D},K.addLabelData=function(b,g,w,_){var A=g.fontSize,T=g.width+A/3,E=Math.max(0,g.height-A/3),k=b.x,O=b.y,D=b.theta,S=Math.sin(D),C=Math.cos(D),z=function(U,G){return[k+U*C-G*S,O+U*S+G*C]},B=[z(-T/2,-E/2),z(-T/2,E/2),z(T/2,E/2),z(T/2,-E/2)];w.push({text:g.text,x:k,y:O,dy:g.dy,theta:D,level:g.level,width:T,height:E}),_.push(B)},K.drawLabels=function(b,g,w,_,A){var T=b.selectAll("text").data(g,function(O){return O.text+","+O.x+","+O.y+","+O.theta});if(T.exit().remove(),T.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(O){var D=O.x+Math.sin(O.theta)*O.dy,S=O.y-Math.cos(O.theta)*O.dy;p.select(this).text(O.text).attr({x:D,y:S,transform:"rotate("+180*O.theta/Math.PI+" "+D+" "+S+")"}).call(e.convertToTspans,w)}),A){for(var E="",k=0;k<A.length;k++)E+="M"+A[k].join("L")+"Z";v.ensureSingle(_,"path","").attr("d",E)}}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":803,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes"),v=x("../../lib");function u(y,e,n){var t={type:"linear",range:[y,e]};return p.autoTicks(t,(e-y)/(n||15)),t}Q.exports=function(y,e){var n=y.contours;if(y.autocontour){var t=y.zmin,a=y.zmax;(y.zauto||void 0===t)&&(t=v.aggNums(Math.min,null,e)),(y.zauto||void 0===a)&&(a=v.aggNums(Math.max,null,e));var r=u(t,a,y.ncontours);n.size=r.dtick,n.start=p.tickFirst(r),r.range.reverse(),n.end=p.tickFirst(r),n.start===t&&(n.start+=n.size),n.end===a&&(n.end-=n.size),n.start>n.end&&(n.start=n.end=(n.start+n.end)/2),y._input.contours||(y._input.contours={}),v.extendFlat(y._input.contours,{start:n.start,end:n.end,size:n.size}),y._input.autocontour=!0}else if("constraint"!==n.type){var f,s=n.start,i=n.end,l=y._input.contours;s>i&&(n.start=l.start=i,i=n.end=l.end=s,s=n.start),!(n.size>0)&&(f=s===i?1:u(s,i,y.ncontours).dtick,l.size=n.size=f)}}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/drawing"),u=x("../heatmap/style"),y=x("./make_color_map");Q.exports=function(e){var n=p.select(e).selectAll("g.contour");n.style("opacity",function(t){return t[0].trace.opacity}),n.each(function(t){var a=p.select(this),r=t[0].trace,f=r.contours,s=r.line,i=f.size||1,l=f.start,c="constraint"===f.type,h=!c&&"lines"===f.coloring,m=!c&&"fill"===f.coloring,d=h||m?y(r):null;a.selectAll("g.contourlevel").each(function(g){p.select(this).selectAll("path").call(v.lineGroupStyle,s.width,h?d(g.level):s.color,s.dash)});var o=f.labelfont;if(a.selectAll("g.contourlabels text").each(function(g){v.font(p.select(this),{family:o.family,size:o.size,color:o.color||(h?d(g.level):s.color)})}),c)a.selectAll("g.contourfill path").style("fill",r.fillcolor);else if(m){var b;a.selectAll("g.contourfill path").style("fill",function(g){return void 0===b&&(b=g.level),d(g.level+.5*i)}),void 0===b&&(b=l),a.selectAll("g.contourbg path").style("fill",d(b-.5*i))}}),u(e)}},{"../../components/drawing":388,"../heatmap/style":804,"./make_color_map":751,"@plotly/d3":58}],756:[function(x,Q,K){"use strict";var p=x("../../components/colorscale/defaults"),v=x("./label_defaults");Q.exports=function(u,y,e,n,t){var a,r=e("contours.coloring"),f="";"fill"===r&&(a=e("contours.showlines")),!1!==a&&("lines"!==r&&(f=e("line.color","#000")),e("line.width",.5),e("line.dash")),"none"!==r&&(!0!==u.showlegend&&(y.showlegend=!1),y._dfltShowLegend=!1,p(u,y,n,e,{prefix:"",cLetter:"z"})),e("line.smoothing"),v(e,n,f,t)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(x,Q,K){"use strict";var p=x("../heatmap/attributes"),v=x("../contour/attributes"),u=x("../../components/colorscale/attributes"),y=x("../../lib/extend").extendFlat,e=v.contours;Q.exports=y({carpet:{valType:"string",editType:"calc"},z:p.z,a:p.x,a0:p.x0,da:p.dx,b:p.y,b0:p.y0,db:p.dy,text:p.text,hovertext:p.hovertext,transpose:p.transpose,atype:p.xtype,btype:p.ytype,fillcolor:v.fillcolor,autocontour:v.autocontour,ncontours:v.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:v.line.color,width:v.line.width,dash:v.line.dash,smoothing:v.line.smoothing,editType:"plot"},transforms:void 0},u("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(x,Q,K){"use strict";var p=x("../../components/colorscale/calc"),v=x("../../lib"),u=x("../heatmap/convert_column_xyz"),y=x("../heatmap/clean_2d_array"),e=x("../heatmap/interp2d"),n=x("../heatmap/find_empties"),t=x("../heatmap/make_bound_array"),a=x("./defaults"),r=x("../carpet/lookup_carpetid"),f=x("../contour/set_contours");Q.exports=function(s,i){var l=i._carpetTrace=r(s,i);if(l&&l.visible&&"legendonly"!==l.visible){if(!i.a||!i.b){var c=s.data[l.index],h=s.data[i.index];h.a||(h.a=c.a),h.b||(h.b=c.b),a(h,i,i._defaultColor,s._fullLayout)}var m=function(d,o){var b,g,w,_,A,T,E,k=o._carpetTrace,O=k.aaxis,D=k.baxis;O._minDtick=0,D._minDtick=0,v.isArray1D(o.z)&&u(o,O,D,"a","b",["z"]),b=o._a=o._a||o.a,_=o._b=o._b||o.b,b=b?O.makeCalcdata(o,"_a"):[],_=_?D.makeCalcdata(o,"_b"):[],g=o.a0||0,w=o.da||1,A=o.b0||0,T=o.db||1,E=o._z=y(o._z||o.z,o.transpose),o._emptypoints=n(E),e(E,o._emptypoints);var S=v.maxRowLength(E),G={a:t(o,"scaled"===o.xtype?"":b,g,w,S,O),b:t(o,"scaled"===o.ytype?"":_,A,T,E.length,D),z:E};return"levels"===o.contours.type&&"none"!==o.contours.coloring&&p(d,o,{vals:E,containerStr:"",cLetter:"z"}),[G]}(s,i);return f(i,i._z),m}}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":802,"./defaults":759}],759:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../heatmap/xyz_defaults"),u=x("./attributes"),y=x("../contour/constraint_defaults"),e=x("../contour/contours_defaults"),n=x("../contour/style_defaults");Q.exports=function(t,a,r,f){function s(i,l){return p.coerce(t,a,u,i,l)}if(s("carpet"),t.a&&t.b){if(!v(t,a,s,f,"a","b"))return void(a.visible=!1);s("text"),"constraint"===s("contours.type")?y(t,a,s,f,r,{hasHover:!1}):(e(t,a,s,function(i){return p.coerce2(t,a,u,i)}),n(t,a,s,f,{hasHover:!1}))}else a._defaultColor=r,a._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":806,"./attributes":757}],760:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../contour/colorbar"),calc:x("./calc"),plot:x("./plot"),style:x("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../carpet/map_1d_array"),u=x("../carpet/makepath"),y=x("../../components/drawing"),e=x("../../lib"),n=x("../contour/make_crossings"),t=x("../contour/find_all_paths"),a=x("../contour/plot"),r=x("../contour/constants"),f=x("../contour/convert_to_constraints"),s=x("../contour/empty_pathinfo"),i=x("../contour/close_boundaries"),l=x("../carpet/lookup_carpetid"),c=x("../carpet/axis_aligned_line");function h(o,b,g){var w=o.getPointAtLength(b),_=o.getPointAtLength(g),A=_.x-w.x,T=_.y-w.y,E=Math.sqrt(A*A+T*T);return[A/E,T/E]}function m(o){var b=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return[o[0]/b,o[1]/b]}function d(o,b){var g=Math.abs(o[0]*b[0]+o[1]*b[1]);return Math.sqrt(1-g*g)/g}Q.exports=function(o,b,g,w){var _=b.xaxis,A=b.yaxis;e.makeTraceGroups(w,g,"contour").each(function(T){var E=p.select(this),k=T[0],O=k.trace,D=O._carpetTrace=l(o,O),S=o.calcdata[D.index][0];if(D.visible&&"legendonly"!==D.visible){var C=k.a,z=k.b,B=O.contours,U=s(B,b,k),G="constraint"===B.type,X=B._operation,Z=G?"="===X?"lines":"fill":B.coloring,q=[[C[0],z[z.length-1]],[C[C.length-1],z[z.length-1]],[C[C.length-1],z[0]],[C[0],z[0]]];n(U),t(U,1e-8*(C[C.length-1]-C[0]),1e-8*(z[z.length-1]-z[0]));var R,N,V,ee,j=U;"constraint"===B.type&&(j=f(U,X)),function(ne,se){var ie,ue,le,de,ve,_e,be,Te,he;for(ie=0;ie<ne.length;ie++){for(ve=(de=ne[ie]).pedgepaths=[],_e=de.ppaths=[],ue=0;ue<de.edgepaths.length;ue++){for(he=de.edgepaths[ue],be=[],le=0;le<he.length;le++)be[le]=se(he[le]);ve.push(be)}for(ue=0;ue<de.paths.length;ue++){for(he=de.paths[ue],Te=[],le=0;le<he.length;le++)Te[le]=se(he[le]);_e.push(Te)}}}(U,re);var J=[];for(ee=S.clipsegments.length-1;ee>=0;ee--)N=v([],(R=S.clipsegments[ee]).x,_.c2p),V=v([],R.y,A.c2p),N.reverse(),V.reverse(),J.push(u(N,V,R.bicubic));var $="M"+J.join("L")+"Z";(function(ne,se,ie,ue,le,de){var ve,_e,be,Te,he=e.ensureSingle(ne,"g","contourbg").selectAll("path").data("fill"!==de||le?[]:[0]);he.enter().append("path"),he.exit().remove();var me=[];for(Te=0;Te<se.length;Te++)_e=v([],(ve=se[Te]).x,ie.c2p),be=v([],ve.y,ue.c2p),me.push(u(_e,be,ve.bicubic));he.attr("d","M"+me.join("L")+"Z").style("stroke","none")})(E,S.clipsegments,_,A,G,Z),function(ne,se,ie,ue,le,de,ve,_e,be,Te,he){var me="fill"===Te;me&&i(le,ne.contours);var Ae=e.ensureSingle(se,"g","contourfill").selectAll("path").data(me?le:[]);Ae.enter().append("path"),Ae.exit().remove(),Ae.each(function(we){var Se=(we.prefixBoundary?he:"")+function(Pe,ze,He,tt,Oe,Be,Je,Ye){var nt,ft,dt,Rt,Et,at,rt,St="",Xt=ze.edgepaths.map(function(ut,xt){return xt}),lr=!0,Ue=1e-4*Math.abs(He[0][0]-He[2][0]),Ze=1e-4*Math.abs(He[0][1]-He[2][1]);function Ne(ut){return Math.abs(ut[1]-He[0][1])<Ze}function it(ut){return Math.abs(ut[1]-He[2][1])<Ze}function ke(ut){return Math.abs(ut[0]-He[0][0])<Ue}function De(ut){return Math.abs(ut[0]-He[2][0])<Ue}function Re(ut,xt){var gt,Pt,ct,zt,Ft="";for(Ne(ut)&&!De(ut)||it(ut)&&!ke(ut)?(zt=Oe.aaxis,ct=c(Oe,Be,[ut[0],xt[0]],.5*(ut[1]+xt[1]))):(zt=Oe.baxis,ct=c(Oe,Be,.5*(ut[0]+xt[0]),[ut[1],xt[1]])),gt=1;gt<ct.length;gt++)for(Ft+=zt.smoothing?"C":"L",Pt=0;Pt<ct[gt].length;Pt++){var Qe=ct[gt][Pt];Ft+=[Je.c2p(Qe[0]),Ye.c2p(Qe[1])]+" "}return Ft}for(nt=0,ft=null;Xt.length;){for(ft&&(St+=Re(ft,ze.edgepaths[nt][0])),rt=y.smoothopen(ze.edgepaths[nt].map(tt),ze.smoothing),St+=lr?rt:rt.replace(/^M/,"L"),Xt.splice(Xt.indexOf(nt),1),ft=ze.edgepaths[nt][ze.edgepaths[nt].length-1],Et=-1,Rt=0;Rt<4;Rt++){if(!ft){e.log("Missing end?",nt,ze);break}for(Ne(ft)&&!De(ft)?dt=He[1]:ke(ft)?dt=He[0]:it(ft)?dt=He[3]:De(ft)&&(dt=He[2]),at=0;at<ze.edgepaths.length;at++){var Ke=ze.edgepaths[at][0];Math.abs(ft[0]-dt[0])<Ue?Math.abs(ft[0]-Ke[0])<Ue&&(Ke[1]-ft[1])*(dt[1]-Ke[1])>=0&&(dt=Ke,Et=at):Math.abs(ft[1]-dt[1])<Ze?Math.abs(ft[1]-Ke[1])<Ze&&(Ke[0]-ft[0])*(dt[0]-Ke[0])>=0&&(dt=Ke,Et=at):e.log("endpt to newendpt is not vert. or horz.",ft,dt,Ke)}if(Et>=0)break;St+=Re(ft,dt),ft=dt}if(Et===ze.edgepaths.length){e.log("unclosed perimeter path");break}(lr=-1===Xt.indexOf(nt=Et))&&(nt=Xt[0],St+=Re(ft,dt)+"Z",ft=null)}for(nt=0;nt<ze.paths.length;nt++)St+=y.smoothclosed(ze.paths[nt].map(tt),ze.smoothing);return St}(0,we,de,ve,_e,be,ie,ue);Se?p.select(this).attr("d",Se).style("stroke","none"):p.select(this).remove()})}(O,E,_,A,j,q,re,D,S,Z,$),function(ne,se,ie,ue,le,de,ve){var _e=e.ensureSingle(ne,"g","contourlines"),be=!1!==le.showlines,Te=le.showlabels,he=be&&Te,me=a.createLines(_e,be||Te,se),Ae=a.createLineClip(_e,he,ie,ue.trace.uid),we=ne.selectAll("g.contourlabels").data(Te?[0]:[]);if(we.exit().remove(),we.enter().append("g").classed("contourlabels",!0),Te){var ze=de.xaxis._length,He=de.yaxis._length,tt=[[[0,0],[ze,0],[ze,He],[0,He]]],Oe=[];e.clearLocationCache();var Be=a.labelFormatter(ie,ue),Je=y.tester.append("text").attr("data-notex",1).call(y.font,le.labelfont),Ye={left:0,right:ze,center:ze/2,top:0,bottom:He,middle:He/2},nt=Math.sqrt(ze*ze+He*He),ft=r.LABELDISTANCE*nt/Math.max(1,se.length/r.LABELINCREASE);me.each(function(dt){var Rt=a.calcTextOpts(dt.level,Be,Je,ie);p.select(this).selectAll("path").each(function(Et){var at=e.getVisibleSegment(this,Ye,Rt.height/2);if(at&&(function(lr,Ue,Ze,Ne,it,ke){for(var De,Re=0;Re<Ze.pedgepaths.length;Re++)Ue===Ze.pedgepaths[Re]&&(De=Ze.edgepaths[Re]);if(De){var Ie=it.a[0],Ke=it.a[it.a.length-1],ut=it.b[0],xt=it.b[it.b.length-1],Pt=h(lr,0,1),ct=h(lr,Ne.total,Ne.total-1),zt=gt(De[0],Pt),Ft=Ne.total-gt(De[De.length-1],ct);Ne.min<zt&&(Ne.min=zt),Ne.max>Ft&&(Ne.max=Ft),Ne.len=Ne.max-Ne.min}function gt(Qe,yt){var Nt,Yt=0;return(Math.abs(Qe[0]-Ie)<.1||Math.abs(Qe[0]-Ke)<.1)&&(Nt=m(it.dxydb_rough(Qe[0],Qe[1],.1)),Yt=Math.max(Yt,ke*d(yt,Nt)/2)),(Math.abs(Qe[1]-ut)<.1||Math.abs(Qe[1]-xt)<.1)&&(Nt=m(it.dxyda_rough(Qe[0],Qe[1],.1)),Yt=Math.max(Yt,ke*d(yt,Nt)/2)),Yt}}(this,Et,dt,at,ve,Rt.height),!(at.len<(Rt.width+Rt.height)*r.LABELMIN)))for(var rt=Math.min(Math.ceil(at.len/ft),r.LABELMAX),St=0;St<rt;St++){var Xt=a.findBestTextLocation(this,at,Rt,Oe,Ye);if(!Xt)break;a.addLabelData(Xt,Rt,Oe,tt)}})}),Je.remove(),a.drawLabels(we,Oe,ie,Ae,he?tt:null)}Te&&!be&&me.remove()}(E,U,o,k,B,b,D),y.setClipUrl(E,D._clipPathId,o)}function re(ne){var se=D.ab2xy(ne[0],ne[1],!0);return[_.c2p(se[0]),A.c2p(se[1])]}})}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(x,Q,K){"use strict";var p=x("../../components/colorscale/attributes"),v=x("../../plots/template_attributes").hovertemplateAttrs,u=x("../../plots/attributes"),y=x("../scattermapbox/attributes"),e=x("../../lib/extend").extendFlat;Q.exports=e({lon:y.lon,lat:y.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:y.text,hovertext:y.hovertext,hoverinfo:e({},u.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:v(),showlegend:e({},u.showlegend,{dflt:!1})},p("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":990}],763:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib").isArrayOrTypedArray,u=x("../../constants/numerical").BADNUM,y=x("../../components/colorscale/calc"),e=x("../../lib")._;Q.exports=function(n,t){for(var a=t._length,r=new Array(a),f=t.z,s=v(f)&&f.length,i=0;i<a;i++){var l=r[i]={},c=t.lon[i],h=t.lat[i];if(l.lonlat=p(c)&&p(h)?[+c,+h]:[u,u],s){var m=f[i];l.z=p(m)?m:u}}return y(n,t,{vals:s?f:[0,1],containerStr:"",cLetter:"z"}),a&&(r[0].t={labels:{lat:e(n,"lat:")+" ",lon:e(n,"lon:")+" "}}),r}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib"),u=x("../../components/color"),y=x("../../components/colorscale"),e=x("../../constants/numerical").BADNUM,n=x("../../lib/geojson_utils").makeBlank;Q.exports=function(t){var a=t[0].trace,r=!0===a.visible&&0!==a._length,f=a._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:n()};if(!r)return f;var s,i=[],l=a.z,c=a.radius,h=v.isArrayOrTypedArray(l)&&l.length,m=v.isArrayOrTypedArray(c);for(s=0;s<t.length;s++){var d=t[s],o=d.lonlat;if(o[0]!==e){var b={};if(h){var g=d.z;b.z=g!==e?g:0}m&&(b.r=p(c[s])&&c[s]>0?+c[s]:0),i.push({type:"Feature",geometry:{type:"Point",coordinates:o},properties:b})}}var w=y.extractOpts(a),_=w.reversescale?y.flipScale(w.colorscale):w.colorscale,A=_[0][1],T=["interpolate",["linear"],["heatmap-density"],0,u.opacity(A)<1?A:u.addOpacity(A,0)];for(s=1;s<_.length;s++)T.push(_[s][0],_[s][1]);return v.extendFlat(f.heatmap.paint,{"heatmap-weight":h?["interpolate",["linear"],["get","z"],w.min,0,w.max,1]:1/(w.max-w.min),"heatmap-color":T,"heatmap-radius":m?{type:"identity",property:"r"}:a.radius,"heatmap-opacity":a.opacity}),f.geojson={type:"FeatureCollection",features:i},f.heatmap.layout.visibility="visible",f}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/colorscale/defaults"),u=x("./attributes");Q.exports=function(y,e,n,t){function a(i,l){return p.coerce(y,e,u,i,l)}var r=a("lon")||[],f=a("lat")||[],s=Math.min(r.length,f.length);s?(e._length=s,a("z"),a("radius"),a("below"),a("text"),a("hovertext"),a("hovertemplate"),v(y,e,t,a,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(x,Q,K){"use strict";Q.exports=function(p,v){return p.lon=v.lon,p.lat=v.lat,p.z=v.z,p}},{}],767:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes"),v=x("../scattermapbox/hover").hoverPoints,u=x("../scattermapbox/hover").getExtraText;Q.exports=function(y,e,n){var t=v(y,e,n);if(t){var a=t[0],r=a.cd,f=r[0].trace,s=r[a.index];if(delete a.color,"z"in s){var i=a.subplot.mockAxis;a.z=s.z,a.zLabel=p.tickText(i,i.c2l(s.z),"hover").text}return a.extraText=u(f,s,r[0].t.labels),[a]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":995}],768:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../heatmap/colorbar"),formatLabels:x("../scattermapbox/format_labels"),calc:x("./calc"),plot:x("./plot"),hoverPoints:x("./hover"),eventData:x("./event_data"),getBelow:function(p,v){for(var u=v.getMapLayers(),y=0;y<u.length;y++){var e=u[y],n=e.id;if("symbol"===e.type&&"string"==typeof n&&-1===n.indexOf("plotly-"))return n}},moduleType:"trace",name:"densitymapbox",basePlotModule:x("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":994,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(x,Q,K){"use strict";var p=x("./convert"),v=x("../../plots/mapbox/constants").traceLayerPrefix;function u(e,n){this.type="densitymapbox",this.subplot=e,this.uid=n,this.sourceId="source-"+n,this.layerList=[["heatmap",v+n+"-heatmap"]],this.below=null}var y=u.prototype;y.update=function(e){var n=this.subplot,t=this.layerList,a=p(e),r=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(a.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(a,r),this.below=r);for(var f=0;f<t.length;f++){var s=t[f],l=s[1],c=a[s[0]];n.setOptions(l,"setLayoutProperty",c.layout),"visible"===c.layout.visibility&&n.setOptions(l,"setPaintProperty",c.paint)}},y._addLayers=function(e,n){for(var t=this.subplot,a=this.layerList,r=this.sourceId,f=0;f<a.length;f++){var s=a[f],i=s[0],l=e[i];t.addLayer({type:i,id:s[1],source:r,layout:l.layout,paint:l.paint},n)}},y._removeLayers=function(){for(var e=this.subplot.map,n=this.layerList,t=n.length-1;t>=0;t--)e.removeLayer(n[t][1])},y.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},Q.exports=function(e,n){var t=n[0].trace,a=new u(e,t.uid),r=a.sourceId,f=p(n),s=a.below=e.belowLookup["trace-"+t.uid];return e.map.addSource(r,{type:"geojson",data:f.geojson}),a._addLayers(f,s),a}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(x,Q,K){"use strict";var p=x("../../lib");Q.exports=function(v,u){for(var y=0;y<v.length;y++)v[y].i=y;p.mergeArray(u.text,v,"tx"),p.mergeArray(u.hovertext,v,"htx");var e=u.marker;if(e){p.mergeArray(e.opacity,v,"mo"),p.mergeArray(e.color,v,"mc");var n=e.line;n&&(p.mergeArray(n.color,v,"mlc"),p.mergeArrayCastPositive(n.width,v,"mlw"))}}},{"../../lib":503}],771:[function(x,Q,K){"use strict";var p,v=x("../bar/attributes"),u=x("../scatter/attributes").line,y=x("../../plots/attributes"),e=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=x("../../plots/template_attributes").hovertemplateAttrs,t=x("../../plots/template_attributes").texttemplateAttrs,a=x("./constants"),r=x("../../lib/extend").extendFlat,f=x("../../components/color");Q.exports={x:v.x,x0:v.x0,dx:v.dx,y:v.y,y0:v.y0,dy:v.dy,xperiod:v.xperiod,yperiod:v.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:v.xperiodalignment,yperiodalignment:v.yperiodalignment,xhoverformat:e("x"),yhoverformat:e("y"),hovertext:v.hovertext,hovertemplate:n({},{keys:a.eventDataKeys}),hoverinfo:r({},y.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:t({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:v.text,textposition:v.textposition,insidetextanchor:r({},v.insidetextanchor,{dflt:"middle"}),textangle:r({},v.textangle,{dflt:0}),textfont:v.textfont,insidetextfont:v.insidetextfont,outsidetextfont:v.outsidetextfont,constraintext:v.constraintext,cliponaxis:v.cliponaxis,orientation:r({},v.orientation,{}),offset:r({},v.offset,{arrayOk:!1}),width:r({},v.width,{arrayOk:!1}),marker:(p=r({},v.marker),delete p.pattern,p),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:r({},u.color,{dflt:f.defaultLine}),width:r({},u.width,{dflt:0,editType:"plot"}),dash:u.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:v.offsetgroup,alignmentgroup:v.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":925,"./constants":773}],772:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes"),v=x("../../plots/cartesian/align_period"),u=x("./arrays_to_calcdata"),y=x("../scatter/calc_selection"),e=x("../../constants/numerical").BADNUM;function n(t){return t===e?0:t}Q.exports=function(t,a){var r,f,s,i,l,c,h,m,d=p.getFromId(t,a.xaxis||"x"),o=p.getFromId(t,a.yaxis||"y");"h"===a.orientation?(r=d.makeCalcdata(a,"x"),s=o.makeCalcdata(a,"y"),i=v(a,o,"y",s),l=!!a.yperiodalignment,c="y"):(r=o.makeCalcdata(a,"y"),s=d.makeCalcdata(a,"x"),i=v(a,d,"x",s),l=!!a.xperiodalignment,c="x"),f=i.vals;var b,g=Math.min(f.length,r.length),w=new Array(g);for(a._base=[],h=0;h<g;h++){r[h]<0&&(r[h]=e);var _=!1;r[h]!==e&&h+1<g&&r[h+1]!==e&&(_=!0),m=w[h]={p:f[h],s:r[h],cNext:_},a._base[h]=-.5*m.s,l&&(w[h].orig_p=s[h],w[h][c+"End"]=i.ends[h],w[h][c+"Start"]=i.starts[h]),a.ids&&(m.id=String(a.ids[h])),0===h&&(w[0].vTotal=0),w[0].vTotal+=n(m.s),m.begR=n(m.s)/n(w[0].s)}for(h=0;h<g;h++)(m=w[h]).s!==e&&(m.sumR=m.s/w[0].vTotal,m.difR=void 0!==b?m.s/b:1,b=m.s);return u(w,a),y(w,a),w}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":927,"./arrays_to_calcdata":770}],773:[function(x,Q,K){"use strict";Q.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(x,Q,K){"use strict";var p=x("../bar/cross_trace_calc").setGroupPositions;Q.exports=function(v,u){var y,e,n=v._fullLayout,t=v._fullData,a=v.calcdata,r=u.xaxis,f=u.yaxis,s=[],i=[],l=[];for(e=0;e<t.length;e++){var c=t[e];!0===c.visible&&c.xaxis===r._id&&c.yaxis===f._id&&"funnel"===c.type&&(y=a[e],"h"===c.orientation?l.push(y):i.push(y),s.push(y))}var m={mode:n.funnelmode,norm:n.funnelnorm,gap:n.funnelgap,groupgap:n.funnelgroupgap};for(p(v,r,f,i,m),p(v,f,r,l,m),e=0;e<s.length;e++){y=s[e];for(var d=0;d<y.length;d++)d+1<y.length&&(y[d].nextP0=y[d+1].p0,y[d].nextS0=y[d+1].s0,y[d].nextP1=y[d+1].p1,y[d].nextS1=y[d+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../bar/defaults").handleGroupingDefaults,u=x("../bar/defaults").handleText,y=x("../scatter/xy_defaults"),e=x("../scatter/period_defaults"),n=x("./attributes"),t=x("../../components/color");Q.exports={supplyDefaults:function(a,r,f,s){function i(m,d){return p.coerce(a,r,n,m,d)}if(y(a,r,s,i)){e(a,r,s,i),i("xhoverformat"),i("yhoverformat"),i("orientation",r.y&&!r.x?"v":"h"),i("offset"),i("width");var l=i("text");i("hovertext"),i("hovertemplate");var c=i("textposition");u(a,r,s,i,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===r.textposition||r.texttemplate||i("textinfo",Array.isArray(l)?"text+value":"value");var h=i("marker.color",f);i("marker.line.color",t.defaultLine),i("marker.line.width"),i("connector.visible")&&(i("connector.fillcolor",(d=p.isArrayOrTypedArray(m=h)?"#000":m,t.addOpacity(d,.5*t.opacity(d)))),i("connector.line.width")&&(i("connector.line.color"),i("connector.line.dash")))}else r.visible=!1;var m,d},crossTraceDefaults:function(a,r){var f,s;function i(c){return p.coerce(s._input,s,n,c)}if("group"===r.funnelmode)for(var l=0;l<a.length;l++)f=(s=a[l])._input,v(f,s,r,i)}}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":945,"../scatter/xy_defaults":952,"./attributes":771}],776:[function(x,Q,K){"use strict";Q.exports=function(p,v){return p.x="xVal"in v?v.xVal:v.x,p.y="yVal"in v?v.yVal:v.y,"percentInitial"in v&&(p.percentInitial=v.percentInitial),"percentPrevious"in v&&(p.percentPrevious=v.percentPrevious),"percentTotal"in v&&(p.percentTotal=v.percentTotal),v.xa&&(p.xaxis=v.xa),v.ya&&(p.yaxis=v.ya),p}},{}],777:[function(x,Q,K){"use strict";var p=x("../../components/color").opacity,v=x("../bar/hover").hoverOnBars,u=x("../../lib").formatPercent;Q.exports=function(y,e,n,t,a){var g,w,_,A,T,r=v(y,e,n,t,a);if(r){var f=r.cd,s=f[0].trace,l=f[r.index];r[("h"===s.orientation?"x":"y")+"LabelVal"]=l.s,r.percentInitial=l.begR,r.percentInitialLabel=u(l.begR,1),r.percentPrevious=l.difR,r.percentPreviousLabel=u(l.difR,1),r.percentTotal=l.sumR,r.percentTotalLabel=u(l.sumR,1);var c=l.hi||s.hoverinfo,h=[];if(c&&"none"!==c&&"skip"!==c){var m="all"===c,d=c.split("+"),o=function(b){return m||-1!==d.indexOf(b)};o("percent initial")&&h.push(r.percentInitialLabel+" of initial"),o("percent previous")&&h.push(r.percentPreviousLabel+" of previous"),o("percent total")&&h.push(r.percentTotalLabel+" of total")}return r.extraText=h.join("<br>"),r.color=(w=s.marker,A=(g=l).mlc||w.line.color,T=g.mlw||w.line.width,p(_=g.mc||w.color)?_:p(A)&&T?A:void 0),[r]}}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults").supplyDefaults,crossTraceDefaults:x("./defaults").crossTraceDefaults,supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc"),crossTraceCalc:x("./cross_trace_calc"),plot:x("./plot"),style:x("./style").style,hoverPoints:x("./hover"),eventData:x("./event_data"),selectPoints:x("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:x("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(x,Q,K){"use strict";Q.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./layout_attributes");Q.exports=function(u,y,e){var n=!1;function t(f,s){return p.coerce(u,y,v,f,s)}for(var a=0;a<e.length;a++){var r=e[a];if(r.visible&&"funnel"===r.type){n=!0;break}}n&&(t("funnelmode"),t("funnelgap",.2),t("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=x("../../components/drawing"),y=x("../../constants/numerical").BADNUM,e=x("../bar/plot"),n=x("../bar/uniform_text").clearMinTextSize;function t(a,r,f,s){var i=[],l=[],c=s?r:f,h=s?f:r;return i[0]=c.c2p(a.s0,!0),l[0]=h.c2p(a.p0,!0),i[1]=c.c2p(a.s1,!0),l[1]=h.c2p(a.p1,!0),i[2]=c.c2p(a.nextS0,!0),l[2]=h.c2p(a.nextP0,!0),i[3]=c.c2p(a.nextS1,!0),l[3]=h.c2p(a.nextP1,!0),s?[i,l]:[l,i]}Q.exports=function(a,r,f,s){var l,c,d,o,i=a._fullLayout;n("funnel",i),l=a,d=(c=r).xaxis,o=c.yaxis,v.makeTraceGroups(s,f,"trace bars").each(function(b){var g=p.select(this),w=b[0].trace,_=v.ensureSingle(g,"g","regions");if(w.connector&&w.connector.visible){var A="h"===w.orientation,T=_.selectAll("g.region").data(v.identity);T.enter().append("g").classed("region",!0),T.exit().remove();var E=T.size();T.each(function(k,O){if(O===E-1||k.cNext){var D=t(k,d,o,A),S=D[0],C=D[1],z="";S[0]!==y&&C[0]!==y&&S[1]!==y&&C[1]!==y&&S[2]!==y&&C[2]!==y&&S[3]!==y&&C[3]!==y&&(z+=A?"M"+S[0]+","+C[1]+"L"+S[2]+","+C[2]+"H"+S[3]+"L"+S[1]+","+C[1]+"Z":"M"+S[1]+","+C[1]+"L"+S[2]+","+C[3]+"V"+C[2]+"L"+S[1]+","+C[0]+"Z"),""===z&&(z="M0,0Z"),v.ensureSingle(p.select(this),"path").attr("d",z).call(u.setClipUrl,c.layerClipId,l)}})}else _.remove()}),function(l,c,h,m){var d=c.xaxis,o=c.yaxis;v.makeTraceGroups(m,h,"trace bars").each(function(b){var g=p.select(this),w=b[0].trace,_=v.ensureSingle(g,"g","lines");if(w.connector&&w.connector.visible&&w.connector.line.width){var A="h"===w.orientation,T=_.selectAll("g.line").data(v.identity);T.enter().append("g").classed("line",!0),T.exit().remove();var E=T.size();T.each(function(k,O){if(O===E-1||k.cNext){var D=t(k,d,o,A),S=D[0],C=D[1],z="";void 0!==S[3]&&void 0!==C[3]&&(A?(z+="M"+S[0]+","+C[1]+"L"+S[2]+","+C[2],z+="M"+S[1]+","+C[1]+"L"+S[3]+","+C[2]):(z+="M"+S[1]+","+C[1]+"L"+S[2]+","+C[3],z+="M"+S[1]+","+C[0]+"L"+S[2]+","+C[2])),""===z&&(z="M0,0Z"),v.ensureSingle(p.select(this),"path").attr("d",z).call(u.setClipUrl,c.layerClipId,l)}})}else _.remove()})}(a,r,f,s),e.plot(a,r,f,s,{mode:i.funnelmode,norm:i.funnelmode,gap:i.funnelgap,groupgap:i.funnelgroupgap})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/drawing"),u=x("../../components/color"),y=x("../../constants/interactions").DESELECTDIM,e=x("../bar/style"),n=x("../bar/uniform_text").resizeText,t=e.styleTextPoints;Q.exports={style:function(a,r,f){var s=f||p.select(a).selectAll("g.funnellayer").selectAll("g.trace");n(a,s,"funnel"),s.style("opacity",function(i){return i[0].trace.opacity}),s.each(function(i){var l=p.select(this),c=i[0].trace;l.selectAll(".point > path").each(function(h){if(!h.isBlank){var m=c.marker;p.select(this).call(u.fill,h.mc||m.color).call(u.stroke,h.mlc||m.line.color).call(v.dashLine,m.line.dash,h.mlw||m.line.width).style("opacity",c.selectedpoints&&!h.selected?y:1)}}),t(l,c,a),l.selectAll(".regions").each(function(){p.select(this).selectAll("path").style("stroke-width",0).call(u.fill,c.connector.fillcolor)}),l.selectAll(".lines").each(function(){var h=c.connector.line;v.lineGroupStyle(p.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(x,Q,K){"use strict";var p=x("../pie/attributes"),v=x("../../plots/attributes"),u=x("../../plots/domain").attributes,y=x("../../plots/template_attributes").hovertemplateAttrs,e=x("../../plots/template_attributes").texttemplateAttrs,n=x("../../lib/extend").extendFlat;Q.exports={labels:p.labels,label0:p.label0,dlabel:p.dlabel,values:p.values,marker:{colors:p.marker.colors,line:{color:n({},p.marker.line.color,{dflt:null}),width:n({},p.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:p.text,hovertext:p.hovertext,scalegroup:n({},p.scalegroup,{}),textinfo:n({},p.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:n({},v.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:y({},{keys:["label","color","value","text","percent"]}),textposition:n({},p.textposition,{values:["inside","none"],dflt:"inside"}),textfont:p.textfont,insidetextfont:p.insidetextfont,title:{text:p.title.text,font:p.title.font,position:n({},p.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:u({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":899}],784:[function(x,Q,K){"use strict";var p=x("../../plots/plots");K.name="funnelarea",K.plot=function(v,u,y,e){p.plotBasePlot(K.name,v,u,y,e)},K.clean=function(v,u,y,e){p.cleanBasePlot(K.name,v,u,y,e)}},{"../../plots/plots":619}],785:[function(x,Q,K){"use strict";var p=x("../pie/calc");Q.exports={calc:function(v,u){return p.calc(v,u)},crossTraceCalc:function(v){p.crossTraceCalc(v,{type:"funnelarea"})}}},{"../pie/calc":901}],786:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./attributes"),u=x("../../plots/domain").defaults,y=x("../bar/defaults").handleText,e=x("../pie/defaults").handleLabelsAndValues;Q.exports=function(n,t,a,r){function f(b,g){return p.coerce(n,t,v,b,g)}var s=f("labels"),i=f("values"),l=e(s,i),c=l.len;if(t._hasLabels=l.hasLabels,t._hasValues=l.hasValues,!t._hasLabels&&t._hasValues&&(f("label0"),f("dlabel")),c){t._length=c,f("marker.line.width")&&f("marker.line.color",r.paper_bgcolor),f("marker.colors"),f("scalegroup");var h,m=f("text"),d=f("texttemplate");if(d||(h=f("textinfo",Array.isArray(m)?"text+percent":"percent")),f("hovertext"),f("hovertemplate"),d||h&&"none"!==h){var o=f("textposition");y(n,t,r,f,o,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}u(t,r,f),f("title.text")&&(f("title.position"),p.coerceFont(f,"title.font",r.font)),f("aspectratio"),f("baseratio")}else t.visible=!1}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":902,"./attributes":783}],787:[function(x,Q,K){"use strict";Q.exports={moduleType:"trace",name:"funnelarea",basePlotModule:x("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot"),style:x("./style"),styleOne:x("../pie/style_one"),meta:{}}},{"../pie/style_one":910,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(x,Q,K){"use strict";var p=x("../pie/layout_attributes").hiddenlabels;Q.exports={hiddenlabels:p,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":906}],789:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./layout_attributes");Q.exports=function(u,y){function e(n,t){return p.coerce(u,y,v,n,t)}e("hiddenlabels"),e("funnelareacolorway",y.colorway),e("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/drawing"),u=x("../../lib"),y=u.strScale,e=u.strTranslate,n=x("../../lib/svg_text_utils"),t=x("../bar/plot").toMoveInsideBar,a=x("../bar/uniform_text"),r=a.recordMinTextSize,f=a.clearMinTextSize,s=x("../pie/helpers"),i=x("../pie/plot"),l=i.attachFxHandlers,c=i.determineInsideTextFont,h=i.layoutAreas,m=i.prerenderTitles,d=i.positionTitleOutside,o=i.formatSliceLabel;function b(g,w){return"l"+(w[0]-g[0])+","+(w[1]-g[1])}Q.exports=function(g,w){var _=g._fullLayout;f("funnelarea",_),m(w,g),h(w,_._size),u.makeTraceGroups(_._funnelarealayer,w,"trace").each(function(A){var T=p.select(this),E=A[0],k=E.trace;(function(O){if(O.length){var D=O[0],S=D.trace,C=S.aspectratio,z=S.baseratio;z>.999&&(z=.999);var B,W,te,U=Math.pow(z,2),G=D.vTotal,X=G,Z=G*U/(1-U)/G,R=[];for(R.push(q()),W=O.length-1;W>-1;W--)(te=O[W]).hidden||(Z+=te.v/X,R.push(q()));var V=1/0,ee=-1/0;for(W=0;W<R.length;W++)B=R[W],V=Math.min(V,B[1]),ee=Math.max(ee,B[1]);for(W=0;W<R.length;W++)R[W][1]-=(ee+V)/2;var J=D.r,$=(ee-V)/2,re=J/R[R.length-1][0],ne=J/$*C;for(D.r=ne*$,W=0;W<R.length;W++)R[W][0]*=re,R[W][1]*=ne;var ve,_e,se=[-(B=R[0])[0],B[1]],ie=[B[0],B[1]],ue=0;for(W=O.length-1;W>-1;W--)if(!(te=O[W]).hidden){var le=R[ue+=1][0],de=R[ue][1];te.TL=[-le,de],te.TR=[le,de],te.BL=se,te.BR=ie,te.pxmid=[.5*((ve=te.TR)[0]+(_e=te.BR)[0]),.5*(ve[1]+_e[1])],se=te.TL,ie=te.TR}}function q(){var be,Te={x:be=Math.sqrt(Z),y:-be};return[Te.x,Te.y]}})(A),T.each(function(){var O=p.select(this).selectAll("g.slice").data(A);O.enter().append("g").classed("slice",!0),O.exit().remove(),O.each(function(S,C){if(S.hidden)p.select(this).selectAll("path,g").remove();else{S.pointNumber=S.i,S.curveNumber=k.index;var z=E.cx,B=E.cy,U=p.select(this),G=U.selectAll("path.surface").data([S]);G.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),U.call(l,g,A);var X="M"+(z+S.TR[0])+","+(B+S.TR[1])+b(S.TR,S.BR)+b(S.BR,S.BL)+b(S.BL,S.TL)+"Z";G.attr("d",X),o(g,S,E);var Z=s.castOption(k.textposition,S.pts),q=U.selectAll("g.slicetext").data(S.text&&"none"!==Z?[0]:[]);q.enter().append("g").classed("slicetext",!0),q.exit().remove(),q.each(function(){var W=u.ensureSingle(p.select(this),"text","",function($){$.attr("data-notex",1)}),te=u.ensureUniformFontSize(g,c(k,S,_.font));W.text(S.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(v.font,te).call(n.convertToTspans,g);var R,N,V,ee=v.bBox(W.node()),j=Math.min(S.BL[1],S.BR[1])+B,J=Math.max(S.TL[1],S.TR[1])+B;N=Math.max(S.TL[0],S.BL[0])+z,V=Math.min(S.TR[0],S.BR[0])+z,(R=t(N,V,j,J,ee,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=te.size,r(k.type,R,_),A[C].transform=R,W.attr("transform",u.getTextTransform(R))})}});var D=p.select(this).selectAll("g.titletext").data(k.title.text?[0]:[]);D.enter().append("g").classed("titletext",!0),D.exit().remove(),D.each(function(){var S=u.ensureSingle(p.select(this),"text","",function(B){B.attr("data-notex",1)}),C=k.title.text;k._meta&&(C=u.templateString(C,k._meta)),S.text(C).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(v.font,k.title.font).call(n.convertToTspans,g);var z=d(E,_._size);S.attr("transform",e(z.x,z.y)+y(Math.min(1,z.scale))+e(z.tx,z.ty))})})})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":904,"../pie/plot":908,"@plotly/d3":58}],791:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../pie/style_one"),u=x("../bar/uniform_text").resizeText;Q.exports=function(y){var e=y._fullLayout._funnelarealayer.selectAll(".trace");u(y,e,"funnelarea"),e.each(function(n){var t=n[0].trace,a=p.select(this);a.style({opacity:t.opacity}),a.selectAll("path.surface").each(function(r){p.select(this).call(v,r,t)})})}},{"../bar/uniform_text":664,"../pie/style_one":910,"@plotly/d3":58}],792:[function(x,Q,K){"use strict";var p=x("../scatter/attributes"),v=x("../../plots/attributes"),u=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=x("../../plots/template_attributes").hovertemplateAttrs,e=x("../../components/colorscale/attributes"),n=x("../../lib/extend").extendFlat;Q.exports=n({z:{valType:"data_array",editType:"calc"},x:n({},p.x,{impliedEdits:{xtype:"array"}}),x0:n({},p.x0,{impliedEdits:{xtype:"scaled"}}),dx:n({},p.dx,{impliedEdits:{xtype:"scaled"}}),y:n({},p.y,{impliedEdits:{ytype:"array"}}),y0:n({},p.y0,{impliedEdits:{ytype:"scaled"}}),dy:n({},p.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:n({},p.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:n({},p.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:n({},p.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:n({},p.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:n({},p.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:n({},p.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:u("x"),yhoverformat:u("y"),zhoverformat:u("z",1),hovertemplate:y(),showlegend:n({},v.showlegend,{dflt:!1})},{transforms:void 0},e("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":925}],793:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../lib"),u=x("../../plots/cartesian/axes"),y=x("../../plots/cartesian/align_period"),e=x("../histogram2d/calc"),n=x("../../components/colorscale/calc"),t=x("./convert_column_xyz"),a=x("./clean_2d_array"),r=x("./interp2d"),f=x("./find_empties"),s=x("./make_bound_array"),i=x("../../constants/numerical").BADNUM;function l(c){for(var h=[],m=c.length,d=0;d<m;d++){var o=c[d];o!==i&&h.push(o)}return h}Q.exports=function(c,h){var m,d,o,b,g,w,_,A,T,E,k,O=u.getFromId(c,h.xaxis||"x"),D=u.getFromId(c,h.yaxis||"y"),S=p.traceIs(h,"contour"),C=p.traceIs(h,"histogram"),z=p.traceIs(h,"gl2d"),B=S?"best":h.zsmooth;if(O._minDtick=0,D._minDtick=0,C)b=(k=e(c,h)).orig_x,m=k.x,d=k.x0,o=k.dx,A=k.orig_y,g=k.y,w=k.y0,_=k.dy,T=k.z;else{var U=h.z;v.isArray1D(U)?(t(h,O,D,"x","y",["z"]),m=h._x,g=h._y,U=h._z):(b=h.x?O.makeCalcdata(h,"x"):[],A=h.y?D.makeCalcdata(h,"y"):[],m=y(h,O,"x",b).vals,g=y(h,D,"y",A).vals,h._x=m,h._y=g),d=h.x0,o=h.dx,w=h.y0,_=h.dy,T=a(U,h,O,D)}function G($){B=h._input.zsmooth=h.zsmooth=!1,v.warn('cannot use zsmooth: "fast": '+$)}if((O.rangebreaks||D.rangebreaks)&&(T=function($,re,ne){for(var se=[],ie=-1,ue=0;ue<ne.length;ue++)if(re[ue]!==i){se[++ie]=[];for(var le=0;le<ne[ue].length;le++)$[le]!==i&&se[ie].push(ne[ue][le])}return se}(m,g,T),C||(m=l(m),g=l(g),h._x=m,h._y=g)),C||!S&&!h.connectgaps||(h._emptypoints=f(T),r(T,h._emptypoints)),"fast"===B)if("log"===O.type||"log"===D.type)G("log axis found");else if(!C){if(m.length){var X=(m[m.length-1]-m[0])/(m.length-1),Z=Math.abs(X/100);for(E=0;E<m.length-1;E++)if(Math.abs(m[E+1]-m[E]-X)>Z){G("x scale is not linear");break}}if(g.length&&"fast"===B){var q=(g[g.length-1]-g[0])/(g.length-1),W=Math.abs(q/100);for(E=0;E<g.length-1;E++)if(Math.abs(g[E+1]-g[E]-q)>W){G("y scale is not linear");break}}}var te=v.maxRowLength(T),R="scaled"===h.xtype?"":m,N=s(h,R,d,o,te,O),V="scaled"===h.ytype?"":g,ee=s(h,V,w,_,T.length,D);z||(h._extremes[O._id]=u.findExtremes(O,N),h._extremes[D._id]=u.findExtremes(D,ee));var j={x:N,y:ee,z:T,text:h._text||h.text,hovertext:h._hovertext||h.hovertext};if(h.xperiodalignment&&b&&(j.orig_x=b),h.yperiodalignment&&A&&(j.orig_y=A),R&&R.length===N.length-1&&(j.xCenter=R),V&&V.length===ee.length-1&&(j.yCenter=V),C&&(j.xRanges=k.xRanges,j.yRanges=k.yRanges,j.pts=k.pts),S||n(c,h,{vals:T,cLetter:"z"}),S&&h.contours&&"heatmap"===h.contours.coloring){var J={type:"contour"===h.type?"heatmap":"histogram2d",xcalendar:h.xcalendar,ycalendar:h.ycalendar};j.xfill=s(J,R,d,o,te,O),j.yfill=s(J,V,w,_,T.length,D)}return[j]}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":825,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":802}],794:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib"),u=x("../../constants/numerical").BADNUM;Q.exports=function(y,e,n,t){var a,r,f,s,i,l;function c(g){if(p(g))return+g}if(e&&e.transpose){for(a=0,i=0;i<y.length;i++)a=Math.max(a,y[i].length);if(0===a)return!1;f=function(g){return g.length},s=function(g,w,_){return(g[_]||[])[w]}}else a=y.length,f=function(g,w){return g[w].length},s=function(g,w,_){return(g[w]||[])[_]};function m(g){if(e&&"carpet"!==e.type&&"contourcarpet"!==e.type&&g&&"category"===g.type&&e["_"+g._id.charAt(0)].length){var w=g._id.charAt(0),_={},A=e["_"+w+"CategoryMap"]||e[w];for(i=0;i<A.length;i++)_[A[i]]=i;return function(T){var E=_[g._categories[T]];return E+1?E:u}}return v.identity}var d=m(n),o=m(t);t&&"category"===t.type&&(a=t._categories.length);var g,w,_,b=new Array(a);for(i=0;i<a;i++)for(r=n&&"category"===n.type?n._categories.length:f(y,i),b[i]=new Array(r),l=0;l<r;l++)b[i][l]=c((g=y,w=o(i),_=d(l),w===u||_===u?u:s(g,w,_)));return b}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(x,Q,K){"use strict";Q.exports={min:"zmin",max:"zmax"}},{}],796:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../constants/numerical").BADNUM,u=x("../../plots/cartesian/align_period");Q.exports=function(y,e,n,t,a,r){var f=y._length,s=e.makeCalcdata(y,t),i=n.makeCalcdata(y,a);s=u(y,e,t,s).vals,i=u(y,n,a,i).vals;var l,c,h,m,d=y.text,o=void 0!==d&&p.isArray1D(d),b=y.hovertext,g=void 0!==b&&p.isArray1D(b),w=p.distinctVals(s),_=w.vals,A=p.distinctVals(i),T=A.vals,E=[],k=T.length,O=_.length;for(l=0;l<r.length;l++)E[l]=p.init2dArray(k,O);o&&(h=p.init2dArray(k,O)),g&&(m=p.init2dArray(k,O));var D=p.init2dArray(k,O);for(l=0;l<f;l++)if(s[l]!==v&&i[l]!==v){var S=p.findBin(s[l]+w.minDiff/2,_),C=p.findBin(i[l]+A.minDiff/2,T);for(c=0;c<r.length;c++)E[c][C][S]=y[r[c]][l],D[C][S]=l;o&&(h[C][S]=d[l]),g&&(m[C][S]=b[l])}for(y["_"+t]=_,y["_"+a]=T,c=0;c<r.length;c++)y["_"+r[c]]=E[c];o&&(y._text=h),g&&(y._hovertext=m),e&&"category"===e.type&&(y["_"+t+"CategoryMap"]=_.map(function(B){return e._categories[B]})),n&&"category"===n.type&&(y["_"+a+"CategoryMap"]=T.map(function(B){return n._categories[B]})),y._after2before=D}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./xyz_defaults"),u=x("../scatter/period_defaults"),y=x("./style_defaults"),e=x("../../components/colorscale/defaults"),n=x("./attributes");Q.exports=function(t,a,r,f){function s(i,l){return p.coerce(t,a,n,i,l)}v(t,a,s,f)?(u(t,a,f,s),s("xhoverformat"),s("yhoverformat"),s("text"),s("hovertext"),s("hovertemplate"),y(t,a,s,f),s("hoverongaps"),s("connectgaps",p.isArray1D(a.z)&&!1!==a.zsmooth),e(t,a,f,s,{prefix:"",cLetter:"z"})):a.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":945,"./attributes":792,"./style_defaults":805,"./xyz_defaults":806}],798:[function(x,Q,K){"use strict";var p=x("../../lib").maxRowLength;Q.exports=function(v){var u,y,e,n,t,a,r,f,s=[],i={},l=[],c=v[0],h=[],m=[0,0,0],d=p(v);for(y=0;y<v.length;y++)for(u=h,h=c,c=v[y+1]||[],e=0;e<d;e++)void 0===h[e]&&((a=(void 0!==h[e-1]?1:0)+(void 0!==h[e+1]?1:0)+(void 0!==u[e]?1:0)+(void 0!==c[e]?1:0))?(0===y&&a++,0===e&&a++,y===v.length-1&&a++,e===h.length-1&&a++,a<4&&(i[[y,e]]=[y,e,a]),s.push([y,e,a])):l.push([y,e]));for(;l.length;){for(r={},f=!1,t=l.length-1;t>=0;t--)(a=((i[[(y=(n=l[t])[0])-1,e=n[1]]]||m)[2]+(i[[y+1,e]]||m)[2]+(i[[y,e-1]]||m)[2]+(i[[y,e+1]]||m)[2])/20)&&(r[n]=[y,e,a],l.splice(t,1),f=!0);if(!f)throw"findEmpties iterated with no new neighbors";for(n in r)i[n]=r[n],s.push(r[n])}return s.sort(function(o,b){return b[2]-o[2]})}},{"../../lib":503}],799:[function(x,Q,K){"use strict";var p=x("../../components/fx"),v=x("../../lib"),u=x("../../plots/cartesian/axes"),y=x("../../components/colorscale").extractOpts;Q.exports=function(e,n,t,a,r){r||(r={});var f,s,i,l,c=r.isContour,h=e.cd[0],m=h.trace,d=e.xa,o=e.ya,b=h.x,g=h.y,w=h.z,_=h.xCenter,A=h.yCenter,T=h.zmask,E=m.zhoverformat,k=b,O=g;if(!1!==e.index){try{i=Math.round(e.index[1]),l=Math.round(e.index[0])}catch(R){return void v.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(i<0||i>=w[0].length||l<0||l>w.length)return}else{if(p.inbox(n-b[0],n-b[b.length-1],0)>0||p.inbox(t-g[0],t-g[g.length-1],0)>0)return;if(c){var D;for(k=[2*b[0]-b[1]],D=1;D<b.length;D++)k.push((b[D]+b[D-1])/2);for(k.push([2*b[b.length-1]-b[b.length-2]]),O=[2*g[0]-g[1]],D=1;D<g.length;D++)O.push((g[D]+g[D-1])/2);O.push([2*g[g.length-1]-g[g.length-2]])}i=Math.max(0,Math.min(k.length-2,v.findBin(n,k))),l=Math.max(0,Math.min(O.length-2,v.findBin(t,O)))}var S,C,z=d.c2p(b[i]),B=d.c2p(b[i+1]),U=o.c2p(g[l]),G=o.c2p(g[l+1]);c?(B=z,f=(S=h.orig_x||b)[i],G=U,s=(C=h.orig_y||g)[l]):(S=h.orig_x||_||b,C=h.orig_y||A||g,f=_?S[i]:(S[i]+S[i+1])/2,s=A?C[l]:(C[l]+C[l+1])/2,d&&"category"===d.type&&(f=b[i]),o&&"category"===o.type&&(s=g[l]),m.zsmooth&&(z=B=d.c2p(f),U=G=o.c2p(s)));var X=w[l][i];if(T&&!T[l][i]&&(X=void 0),void 0!==X||m.hoverongaps){var Z;Array.isArray(h.hovertext)&&Array.isArray(h.hovertext[l])?Z=h.hovertext[l][i]:Array.isArray(h.text)&&Array.isArray(h.text[l])&&(Z=h.text[l][i]);var q=y(m),te=u.tickText({type:"linear",range:[q.min,q.max],hoverformat:E,_separators:d._separators,_numFormat:d._numFormat},X,"hover").text;return[v.extendFlat(e,{index:m._after2before?m._after2before[l][i]:[l,i],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:z,x1:B,y0:U,y1:G,xLabelVal:f,yLabelVal:s,zLabelVal:X,zLabel:te,text:Z})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),colorbar:x("./colorbar"),style:x("./style"),hoverPoints:x("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":803,"./style":804}],801:[function(x,Q,K){"use strict";var p=x("../../lib"),v=[[-1,0],[1,0],[0,-1],[0,1]];function u(e){return.5-.25*Math.min(1,.5*e)}function y(e,n,t){var a,r,f,s,i,l,c,h,m,d,o,b,g,w=0;for(s=0;s<n.length;s++){for(o=e[r=(a=n[s])[0]][f=a[1]],d=0,m=0,i=0;i<4;i++)(c=e[r+(l=v[i])[0]])&&void 0!==(h=c[f+l[1]])&&(0===d?b=g=h:(b=Math.min(b,h),g=Math.max(g,h)),m++,d+=h);if(0===m)throw"iterateInterp2d order is wrong: no defined neighbors";e[r][f]=d/m,void 0===o?m<4&&(w=1):(e[r][f]=(1+t)*e[r][f]-t*o,g>b&&(w=Math.max(w,Math.abs(e[r][f]-o)/(g-b))))}return w}Q.exports=function(e,n){var t,a=1;for(y(e,n),t=0;t<n.length&&!(n[t][2]<4);t++);for(n=n.slice(t),t=0;t<100&&a>.01;t++)a=y(e,n,u(a));return a>.01&&p.log("interp2d didn't converge quickly",a),e}},{"../../lib":503}],802:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../lib").isArrayOrTypedArray;Q.exports=function(u,y,e,n,t,a){var r,f,s,i=[],l=p.traceIs(u,"contour"),c=p.traceIs(u,"histogram"),h=p.traceIs(u,"gl2d");if(v(y)&&y.length>1&&!c&&"category"!==a.type){var m=y.length;if(!(m<=t))return y.slice(0,l?t:t+1);if(l||h)i=y.slice(0,t);else if(1===t)i=[y[0]-.5,y[0]+.5];else{for(i=[1.5*y[0]-.5*y[1]],s=1;s<m;s++)i.push(.5*(y[s-1]+y[s]));i.push(1.5*y[m-1]-.5*y[m-2])}if(m<t){var d=i[i.length-1],o=d-i[i.length-2];for(s=m;s<t;s++)i.push(d+=o)}}else{var b=u[a._id.charAt(0)+"calendar"];for(r=c?a.r2c(e,0,b):v(y)&&1===y.length?y[0]:void 0===e?0:("log"===a.type?a.d2c:a.r2c)(e,0,b),f=n||1,s=l||h?0:-.5;s<t;s++)i.push(r+f*s)}return i}},{"../../lib":503,"../../registry":638}],803:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("tinycolor2"),u=x("../../registry"),y=x("../../lib"),e=x("../../components/colorscale").makeColorScaleFuncFromTrace,n=x("../../constants/xmlns_namespaces");function t(f,s){var i=s.length-2,l=y.constrain(y.findBin(f,s),0,i),c=s[l],m=y.constrain(l+(f-c)/(s[l+1]-c)-.5,0,i),d=Math.round(m),o=Math.abs(m-d);return m&&m!==i&&o?{bin0:d,frac:o,bin1:Math.round(d+o/(m-d))}:{bin0:d,bin1:d,frac:0}}function a(f,s){var i=s.length-1,l=y.constrain(y.findBin(f,s),0,i),c=s[l],h=(f-c)/(s[l+1]-c)||0;return h<=0?{bin0:l,bin1:l,frac:0}:h<.5?{bin0:l,bin1:l+1,frac:h}:{bin0:l+1,bin1:l,frac:1-h}}function r(f,s,i){f[s]=i[0],f[s+1]=i[1],f[s+2]=i[2],f[s+3]=Math.round(255*i[3])}Q.exports=function(f,s,i,l){var c=s.xaxis,h=s.yaxis;y.makeTraceGroups(l,i,"hm").each(function(m){var d,o,b,g,w,_,A=p.select(this),T=m[0],E=T.trace,k=T.z,O=T.x,D=T.y,S=T.xCenter,C=T.yCenter,z=u.traceIs(E,"contour"),B=z?"best":E.zsmooth,U=k.length,G=y.maxRowLength(k),X=!1,Z=!1;for(_=0;void 0===d&&_<O.length-1;)d=c.c2p(O[_]),_++;for(_=O.length-1;void 0===o&&_>0;)o=c.c2p(O[_]),_--;for(o<d&&(b=o,o=d,d=b,X=!0),_=0;void 0===g&&_<D.length-1;)g=h.c2p(D[_]),_++;for(_=D.length-1;void 0===w&&_>0;)w=h.c2p(D[_]),_--;if(w<g&&(b=g,g=w,w=b,Z=!0),z&&(S=O,C=D,O=T.xfill,D=T.yfill),"fast"!==B){var q="best"===B?0:.5;d=Math.max(-q*c._length,d),o=Math.min((1+q)*c._length,o),g=Math.max(-q*h._length,g),w=Math.min((1+q)*h._length,w)}var W=Math.round(o-d),te=Math.round(w-g);if(W<=0||te<=0)A.selectAll("image").data([]).exit().remove();else{var R,N;"fast"===B?(R=G,N=U):(R=W,N=te);var V=document.createElement("canvas");V.width=R,V.height=N;var ee,j,J=V.getContext("2d"),$=e(E,{noNumericCheck:!0,returnArray:!0});"fast"===B?(ee=X?function(Ne){return G-1-Ne}:y.identity,j=Z?function(Ne){return U-1-Ne}:y.identity):(ee=function(Ne){return y.constrain(Math.round(c.c2p(O[Ne])-d),0,W)},j=function(Ne){return y.constrain(Math.round(h.c2p(D[Ne])-g),0,te)});var re,ne,se,ie,ue,le=j(0),de=[le,le],ve=X?0:1,_e=Z?0:1,be=0,Te=0,he=0,me=0;if(B){var Ae,we=0;try{Ae=new Uint8Array(W*te*4)}catch(Ne){Ae=new Array(W*te*4)}if("best"===B){var Se,Pe,ze,He=S||O,tt=C||D,Oe=new Array(He.length),Be=new Array(tt.length),Je=new Array(W),Ye=S?a:t,nt=C?a:t;for(_=0;_<He.length;_++)Oe[_]=Math.round(c.c2p(He[_])-d);for(_=0;_<tt.length;_++)Be[_]=Math.round(h.c2p(tt[_])-g);for(_=0;_<W;_++)Je[_]=Ye(_,Oe);for(ne=0;ne<te;ne++)for(Pe=k[(Se=nt(ne,Be)).bin0],ze=k[Se.bin1],_=0;_<W;_++,we+=4)r(Ae,we,ue=Ze(Pe,ze,Je[_],Se))}else for(ne=0;ne<U;ne++)for(ie=k[ne],de=j(ne),_=0;_<W;_++)ue=Ue(ie[_],1),r(Ae,we=4*(de*W+ee(_)),ue);var ft=J.createImageData(W,te);try{ft.data.set(Ae)}catch(Ne){var dt=ft.data,Rt=dt.length;for(ne=0;ne<Rt;ne++)dt[ne]=Ae[ne]}J.putImageData(ft,0,0)}else{var Et=E.xgap,at=E.ygap,rt=Math.floor(Et/2),St=Math.floor(at/2);for(ne=0;ne<U;ne++)if(ie=k[ne],de.reverse(),de[_e]=j(ne+1),de[0]!==de[1]&&void 0!==de[0]&&void 0!==de[1])for(re=[se=ee(0),se],_=0;_<G;_++)re.reverse(),re[ve]=ee(_+1),re[0]!==re[1]&&void 0!==re[0]&&void 0!==re[1]&&(ue=Ue(ie[_],(re[1]-re[0])*(de[1]-de[0])),J.fillStyle="rgba("+ue.join(",")+")",J.fillRect(re[0]+rt,de[0]+St,re[1]-re[0]-Et,de[1]-de[0]-at))}Te=Math.round(Te/be),he=Math.round(he/be),me=Math.round(me/be);var Xt=v("rgb("+Te+","+he+","+me+")");f._hmpixcount=(f._hmpixcount||0)+be,f._hmlumcount=(f._hmlumcount||0)+be*Xt.getLuminance();var lr=A.selectAll("image").data(m);lr.enter().append("svg:image").attr({xmlns:n.svg,preserveAspectRatio:"none"}),lr.attr({height:te,width:W,x:d,y:g,"xlink:href":V.toDataURL("image/png")})}function Ue(Ne,it){if(void 0!==Ne){var ke=$(Ne);return ke[0]=Math.round(ke[0]),ke[1]=Math.round(ke[1]),ke[2]=Math.round(ke[2]),be+=it,Te+=ke[0]*it,he+=ke[1]*it,me+=ke[2]*it,ke}return[0,0,0,0]}function Ze(Ne,it,ke,De){var Re=Ne[ke.bin0];if(void 0===Re)return Ue(void 0,1);var Ke=Ne[ke.bin1],ut=it[ke.bin0],xt=it[ke.bin1];return Ue(Re+ke.frac*(Ke-Re||0)+De.frac*((ut-Re||0)+ke.frac*(void 0===Ke?void 0===xt?0:void 0===ut?2*(xt-Re):2*(2*xt-ut-Re)/3:void 0===xt?void 0===ut?0:2*(2*Re-Ke-ut)/3:void 0===ut?2*(2*xt-Ke-Re)/3:xt+Re-Ke-ut)))}})}},{"../../components/colorscale":378,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"@plotly/d3":58,tinycolor2:312}],804:[function(x,Q,K){"use strict";var p=x("@plotly/d3");Q.exports=function(v){p.select(v).selectAll(".hm image").style("opacity",function(u){return u.trace.opacity})}},{"@plotly/d3":58}],805:[function(x,Q,K){"use strict";Q.exports=function(p,v,u){!1===u("zsmooth")&&(u("xgap"),u("ygap")),u("zhoverformat")}},{}],806:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib"),u=x("../../registry");function y(e,n){var t=n(e);return"scaled"===(t?n(e+"type","array"):"scaled")&&(n(e+"0"),n("d"+e)),t}Q.exports=function(e,n,t,a,r,f){var s,i,l=t("z");if(r=r||"x",f=f||"y",void 0===l||!l.length)return 0;if(v.isArray1D(e.z)){s=t(r),i=t(f);var c=v.minRowLength(s),h=v.minRowLength(i);if(0===c||0===h)return 0;n._length=Math.min(c,h,l.length)}else{if(s=y(r,t),i=y(f,t),!function(m){for(var d,o=!0,b=!1,g=!1,w=0;w<m.length;w++){if(!v.isArrayOrTypedArray(d=m[w])){o=!1;break}d.length>0&&(b=!0);for(var _=0;_<d.length;_++)if(p(d[_])){g=!0;break}}return o&&b&&g}(l))return 0;t("transpose"),n._length=null}return"heatmapgl"===e.type||u.getComponentMethod("calendars","handleTraceDefaults")(e,n,[r,f],a),!0}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],807:[function(x,Q,K){"use strict";for(var p=x("../heatmap/attributes"),v=x("../../components/colorscale/attributes"),u=x("../../lib/extend").extendFlat,y=x("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],n={},t=0;t<e.length;t++){var a=e[t];n[a]=p[a]}n.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},u(n,v("",{cLetter:"z",autoColorDflt:!1})),Q.exports=y(n,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],808:[function(x,Q,K){"use strict";var p=x("../../../stackgl_modules").gl_heatmap2d,v=x("../../plots/cartesian/axes"),u=x("../../lib/str2rgbarray");function y(n,t){this.scene=n,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=p(n.glplot,this.options),this.heatmap._trace=this}var e=y.prototype;e.handlePick=function(n){var t=this.options,a=t.shape,r=n.pointId,f=r%a[0],s=Math.floor(r/a[0]);return{trace:this,dataCoord:n.dataCoord,traceCoord:[t.x[f],t.y[s],t.z[r]],textLabel:this.textLabels[r],name:this.name,pointIndex:[s,f],hoverinfo:this.hoverinfo}},e.update=function(n,t){var a=t[0];this.index=n.index,this.name=n.name,this.hoverinfo=n.hoverinfo;var r=a.z;this.options.z=[].concat.apply([],r),this.options.shape=[r[0].length,r.length],this.options.x=a.x,this.options.y=a.y,this.options.zsmooth=n.zsmooth;var i=function(d){for(var o=d.colorscale,b=d.zmin,g=d.zmax,w=o.length,_=new Array(w),A=new Array(4*w),T=0;T<w;T++){var E=o[T],k=u(E[1]);_[T]=b+E[0]*(g-b);for(var O=0;O<4;O++)A[4*T+O]=k[O]}return{colorLevels:_,colorValues:A}}(n);this.options.colorLevels=i.colorLevels,this.options.colorValues=i.colorValues,this.textLabels=[].concat.apply([],n.text),this.heatmap.update(this.options);var l,c,h=this.scene.xaxis,m=this.scene.yaxis;!1===n.zsmooth&&(l={ppad:a.x[1]-a.x[0]},c={ppad:a.y[1]-a.y[0]}),n._extremes[h._id]=v.findExtremes(h,a.x,l),n._extremes[m._id]=v.findExtremes(m,a.y,c)},e.dispose=function(){this.heatmap.dispose()},Q.exports=function(n,t,a){var r=new y(n,t.uid);return r.update(t,a),r}},{"../../../stackgl_modules":1119,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],809:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../heatmap/xyz_defaults"),u=x("../../components/colorscale/defaults"),y=x("./attributes");Q.exports=function(e,n,t,a){function r(f,s){return p.coerce(e,n,y,f,s)}v(e,n,r,a)?(r("text"),r("zsmooth"),u(e,n,a,r,{prefix:"",cLetter:"z"})):n.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":806,"./attributes":807}],810:[function(x,Q,K){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../heatmap/colorbar"),calc:x("../heatmap/calc"),plot:x("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:x("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":807,"./convert":808,"./defaults":809}],811:[function(x,Q,K){"use strict";var p=x("../bar/attributes"),v=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,u=x("../../plots/template_attributes").hovertemplateAttrs,y=x("./bin_attributes"),e=x("./constants"),n=x("../../lib/extend").extendFlat;Q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:v("x"),yhoverformat:v("y"),text:n({},p.text,{}),hovertext:n({},p.hovertext,{}),orientation:p.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:y("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:y("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:u({},{keys:e.eventDataKeys}),marker:p.marker,offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup,selected:p.selected,unselected:p.unselected,_deprecated:{bardir:p._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":813,"./constants":817}],812:[function(x,Q,K){"use strict";Q.exports=function(p,v){for(var u=p.length,y=0,e=0;e<u;e++)v[e]?(p[e]/=v[e],y+=p[e]):p[e]=null;return y}},{}],813:[function(x,Q,K){"use strict";Q.exports=function(p,v){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],814:[function(x,Q,K){"use strict";var p=x("fast-isnumeric");Q.exports={count:function(v,u,y){return y[v]++,1},sum:function(v,u,y,e){var n=e[u];return p(n)?(n=Number(n),y[v]+=n,n):0},avg:function(v,u,y,e,n){var t=e[u];return p(t)&&(t=Number(t),y[v]+=t,n[v]++),0},min:function(v,u,y,e){var n=e[u];if(p(n)){if(n=Number(n),!p(y[v]))return y[v]=n,n;if(y[v]>n){var t=n-y[v];return y[v]=n,t}}return 0},max:function(v,u,y,e){var n=e[u];if(p(n)){if(n=Number(n),!p(y[v]))return y[v]=n,n;if(y[v]<n){var t=n-y[v];return y[v]=n,t}}return 0}}},{"fast-isnumeric":190}],815:[function(x,Q,K){"use strict";var p=x("../../constants/numerical"),v=p.ONEAVGYEAR,u=p.ONEAVGMONTH,y=p.ONEDAY,e=p.ONEHOUR,n=p.ONEMIN,t=p.ONESEC,a=x("../../plots/cartesian/axes").tickIncrement;function r(l,c,h,m){if(l*c<=0)return 1/0;for(var d=Math.abs(c-l),o="date"===h.type,b=f(d,o),g=0;g<10;g++){var w=f(80*b,o);if(b===w||!s(w,l,c,o,h,m))break;b=w}return b}function f(l,c){return c&&l>t?l>y?l>1.1*v?v:l>1.1*u?u:y:l>e?e:l>n?n:t:Math.pow(10,Math.floor(Math.log(l)/Math.LN10))}function s(l,c,h,m,d,o){if(m&&l>y){var b=i(c,d,o),g=i(h,d,o),w=l===v?0:1;return b[w]!==g[w]}return Math.floor(h/l)-Math.floor(c/l)>.1}function i(l,c,h){var m=c.c2d(l,v,h).split("-");return""===m[0]&&(m.unshift(),m[0]="-"+m[0]),m}Q.exports=function(l,c,h,m,d){var o,b,g=-1.1*c,w=-.1*c,_=l-w,A=h[0],T=h[1],E=Math.min(r(A+w,A+_,m,d),r(T+w,T+_,m,d)),k=Math.min(r(A+g,A+w,m,d),r(T+g,T+w,m,d));if(E>k&&k<Math.abs(T-A)/4e3?(o=E,b=!1):(o=Math.min(E,k),b=!0),"date"===m.type&&o>y){var O=o===v?1:6,D=o===v?"M12":"M1";return function(S,C){var z=m.c2d(S,v,d),B=z.indexOf("-",O);B>0&&(z=z.substr(0,B));var U=m.d2c(z,0,d);if(U<S){var G=a(U,D,!1,d);(U+G)/2<S+l&&(U=G)}return C&&b?a(U,D,!0,d):U}}return function(S,C){var z=o*Math.round(S/o);return z+o/10<S&&z+.9*o<S+l&&(z+=o),C&&b&&(z-=o),z}}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],816:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib"),u=x("../../registry"),y=x("../../plots/cartesian/axes"),e=x("../bar/arrays_to_calcdata"),n=x("./bin_functions"),t=x("./norm_functions"),a=x("./average"),r=x("./bin_label_vals");function f(s,i,l,c,h){var m,d,o,b,g,w,_,A=c+"bins",T=s._fullLayout,k=T._histogramBinOpts[i["_"+c+"bingroup"]],O="overlay"===T.barmode,D=function(le){return l.r2c(le,0,b)},S=function(le){return l.c2r(le,0,b)},C="date"===l.type?function(le){return le||0===le?v.cleanDate(le,null,b):null}:function(le){return p(le)?Number(le):null};function z(le,de,ve){de[le+"Found"]?(de[le]=C(de[le]),null===de[le]&&(de[le]=ve[le])):(w[le]=de[le]=ve[le],v.nestedProperty(d[0],A+"."+le).set(ve[le]))}if(i["_"+c+"autoBinFinished"])delete i["_"+c+"autoBinFinished"];else{d=k.traces;var B=[],U=!0,G=!1,X=!1;for(m=0;m<d.length;m++)if((o=d[m]).visible){var Z=k.dirs[m];g=o["_"+Z+"pos0"]=l.makeCalcdata(o,Z),B=v.concat(B,g),delete o["_"+c+"autoBinFinished"],!0===i.visible&&(U?U=!1:(delete o._autoBin,o["_"+c+"autoBinFinished"]=1),u.traceIs(o,"2dMap")&&(G=!0),"histogram2dcontour"===o.type&&(X=!0))}var q=y.autoBin(B,l,k.nbins,G,b=d[0][c+"calendar"],k.sizeFound&&k.size),W=d[0]._autoBin={};if(w=W[k.dirs[0]]={},X&&(k.size||(q.start=S(y.tickIncrement(D(q.start),q.size,!0,b))),void 0===k.end&&(q.end=S(y.tickIncrement(D(q.end),q.size,!1,b)))),O&&!u.traceIs(i,"2dMap")&&0===q._dataSpan&&"category"!==l.type&&"multicategory"!==l.type){if(h)return[q,g,!0];q=function(le,de,ve,_e,be){var Te,he,me,Ae=le._fullLayout,we=function(dt,Rt){for(var Et=Rt.xaxis,at=Rt.yaxis,rt=Rt.orientation,St=[],Xt=dt._fullData,lr=0;lr<Xt.length;lr++){var Ue=Xt[lr];"histogram"===Ue.type&&!0===Ue.visible&&Ue.orientation===rt&&Ue.xaxis===Et&&Ue.yaxis===at&&St.push(Ue)}return St}(le,de),Se=!1,Pe=1/0,ze=[de];for(Te=0;Te<we.length;Te++)if((he=we[Te])===de)Se=!0;else if(Se){var He=f(le,he,ve,_e,!0),tt=He[0],Oe=He[2];he["_"+_e+"autoBinFinished"]=1,he["_"+_e+"pos0"]=He[1],Oe?ze.push(he):Pe=Math.min(Pe,tt.size)}else me=Ae._histogramBinOpts[he["_"+_e+"bingroup"]],Pe=Math.min(Pe,me.size||he[be].size);var Be=new Array(ze.length);for(Te=0;Te<ze.length;Te++)for(var Je=ze[Te]["_"+_e+"pos0"],Ye=0;Ye<Je.length;Ye++)if(void 0!==Je[Ye]){Be[Te]=Je[Ye];break}for(isFinite(Pe)||(Pe=v.distinctVals(Be).minDiff),Te=0;Te<ze.length;Te++){var nt=(he=ze[Te])[_e+"calendar"],ft={start:ve.c2r(Be[Te]-Pe/2,0,nt),end:ve.c2r(Be[Te]+Pe/2,0,nt),size:Pe};he._input[be]=he[be]=ft,(me=Ae._histogramBinOpts[he["_"+_e+"bingroup"]])&&v.extendFlat(me,ft)}return de[be]}(s,i,l,c,A)}(_=o.cumulative||{}).enabled&&"include"!==_.currentbin&&("decreasing"===_.direction?q.start=S(y.tickIncrement(D(q.start),q.size,!0,b)):q.end=S(y.tickIncrement(D(q.end),q.size,!1,b))),k.size=q.size,k.sizeFound||(w.size=q.size,v.nestedProperty(d[0],A+".size").set(q.size)),z("start",k,q),z("end",k,q)}g=i["_"+c+"pos0"],delete i["_"+c+"pos0"];var te=i._input[A]||{},R=v.extendFlat({},k),N=k.start,V=l.r2l(te.start),ee=void 0!==V;if((k.startFound||ee)&&V!==l.r2l(N)){var j=ee?V:v.aggNums(Math.min,null,g),J={type:"category"===l.type||"multicategory"===l.type?"linear":l.type,r2l:l.r2l,dtick:k.size,tick0:N,calendar:b,range:[j,y.tickIncrement(j,k.size,!1,b)].map(l.l2r)},$=y.tickFirst(J);$>l.r2l(j)&&($=y.tickIncrement($,k.size,!0,b)),R.start=l.l2r($),ee||v.nestedProperty(i,A+".start").set(R.start)}var re=k.end,ne=l.r2l(te.end),se=void 0!==ne;if((k.endFound||se)&&ne!==l.r2l(re)){var ie=se?ne:v.aggNums(Math.max,null,g);R.end=l.l2r(ie),se||v.nestedProperty(i,A+".start").set(R.end)}var ue="autobin"+c;return!1===i._input[ue]&&(i._input[A]=v.extendFlat({},i[A]||{}),delete i._input[ue],delete i[ue]),[R,g]}Q.exports={calc:function(s,i){var l,c,h,m,d=[],o=[],b=y.getFromId(s,"h"===i.orientation?i.yaxis:i.xaxis),g="h"===i.orientation?"y":"x",w={x:"y",y:"x"}[g],_=i[g+"calendar"],A=i.cumulative,T=f(s,i,b,g),E=T[0],k=T[1],O="string"==typeof E.size,D=[],S=O?D:E,C=[],z=[],B=[],U=0,G=i.histnorm,X=i.histfunc,Z=-1!==G.indexOf("density");A.enabled&&Z&&(G=G.replace(/ ?density$/,""),Z=!1);var q,W="max"===X||"min"===X?null:0,te=n.count,R=t[G],N=!1,V=function(Te){return b.r2c(Te,0,_)};for(v.isArrayOrTypedArray(i[w])&&"count"!==X&&(q=i[w],N="avg"===X,te=n[X]),l=V(E.start),h=V(E.end)+(l-y.tickIncrement(l,E.size,!1,_))/1e6;l<h&&d.length<1e6&&(c=y.tickIncrement(l,E.size,!1,_),d.push((l+c)/2),o.push(W),B.push([]),D.push(l),Z&&C.push(1/(c-l)),N&&z.push(0),!(c<=l));)l=c;D.push(l),O||"date"!==b.type||(S={start:V(S.start),end:V(S.end),size:S.size}),s._fullLayout._roundFnOpts||(s._fullLayout._roundFnOpts={});var ee=i["_"+g+"bingroup"],j={leftGap:1/0,rightGap:1/0};ee&&(s._fullLayout._roundFnOpts[ee]||(s._fullLayout._roundFnOpts[ee]=j),j=s._fullLayout._roundFnOpts[ee]);var J,$=o.length,re=!0,ne=j.leftGap,se=j.rightGap,ie={};for(l=0;l<k.length;l++){var ue=k[l];(m=v.findBin(ue,S))>=0&&m<$&&(U+=te(m,l,o,q,z),re&&B[m].length&&ue!==k[B[m][0]]&&(re=!1),B[m].push(l),ie[l]=m,ne=Math.min(ne,ue-D[m]),se=Math.min(se,D[m+1]-ue))}j.leftGap=ne,j.rightGap=se,re||(J=function(Te,he){return function(){var me=s._fullLayout._roundFnOpts[ee];return r(me.leftGap,me.rightGap,D,b,_)(Te,he)}}),N&&(U=a(o,z)),R&&R(o,U,C),A.enabled&&function(Te,he,me){var Ae,we,Se;function Pe(He){Se=Te[He],Te[He]/=2}function ze(He){Te[He]=Se+(we=Te[He])/2,Se+=we}if("half"===me)if("increasing"===he)for(Pe(0),Ae=1;Ae<Te.length;Ae++)ze(Ae);else for(Pe(Te.length-1),Ae=Te.length-2;Ae>=0;Ae--)ze(Ae);else if("increasing"===he){for(Ae=1;Ae<Te.length;Ae++)Te[Ae]+=Te[Ae-1];"exclude"===me&&(Te.unshift(0),Te.pop())}else{for(Ae=Te.length-2;Ae>=0;Ae--)Te[Ae]+=Te[Ae+1];"exclude"===me&&(Te.push(0),Te.shift())}}(o,A.direction,A.currentbin);var le=Math.min(d.length,o.length),de=[],ve=0,_e=le-1;for(l=0;l<le;l++)if(o[l]){ve=l;break}for(l=le-1;l>=ve;l--)if(o[l]){_e=l;break}for(l=ve;l<=_e;l++)if(p(d[l])&&p(o[l])){var be={p:d[l],s:o[l],b:0};A.enabled||(be.pts=B[l],re?be.ph0=be.ph1=B[l].length?k[B[l][0]]:d[l]:(i._computePh=!0,be.ph0=J(D[l]),be.ph1=J(D[l+1],!0))),de.push(be)}return 1===de.length&&(de[0].width1=y.tickIncrement(de[0].p,E.size,!1,_)-de[0].p),e(de,i),v.isArrayOrTypedArray(i.selectedpoints)&&v.tagSelected(de,i,ie),de},calcAllAutoBins:f}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":812,"./bin_functions":814,"./bin_label_vals":815,"./norm_functions":823,"fast-isnumeric":190}],817:[function(x,Q,K){"use strict";Q.exports={eventDataKeys:["binNumber"]}},{}],818:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/cartesian/axis_ids"),u=x("../../registry").traceIs,y=x("../bar/defaults").handleGroupingDefaults,e=p.nestedProperty,n=x("../../plots/cartesian/constraints").getAxisGroup,t=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],a=["x","y"];Q.exports=function(r,f){var s,i,l,c,h,m,d,o=f._histogramBinOpts={},b=[],g={},w=[];function _(q,W){return p.coerce(s._input,s,s._module.attributes,q,W)}function A(q){return"v"===q.orientation?"x":"y"}function T(q,W,te){var R=q.uid+"__"+te;W||(W=R);var N=v.getFromTrace({_fullLayout:f},q,te).type,V=q[te+"calendar"]||"",ee=o[W],j=!0;ee&&(N===ee.axType&&V===ee.calendar?(j=!1,ee.traces.push(q),ee.dirs.push(te)):(W=R,N!==ee.axType&&p.warn(["Attempted to group the bins of trace",q.index,"set on a","type:"+N,"axis","with bins on","type:"+ee.axType,"axis."].join(" ")),V!==ee.calendar&&p.warn(["Attempted to group the bins of trace",q.index,"set with a",V,"calendar","with bins",ee.calendar?"on a "+ee.calendar+" calendar":"w/o a set calendar"].join(" ")))),j&&(o[W]={traces:[q],dirs:[te],axType:N,calendar:q[te+"calendar"]||""}),q["_"+te+"bingroup"]=W}for(h=0;h<r.length;h++)u(s=r[h],"histogram")&&(b.push(s),delete s._xautoBinFinished,delete s._yautoBinFinished,u(s,"2dMap")||y(s._input,s,f,_));var E=f._alignmentOpts||{};for(h=0;h<b.length;h++){if(l="",!u(s=b[h],"2dMap")){if(c=A(s),"group"===f.barmode&&s.alignmentgroup){var O=n(f,s[c+"axis"])+s.orientation;(E[O]||{})[s.alignmentgroup]&&(l=O)}l||"overlay"===f.barmode||(l=n(f,s.xaxis)+n(f,s.yaxis)+A(s))}l?(g[l]||(g[l]=[]),g[l].push(s)):w.push(s)}for(l in g)if(1!==(i=g[l]).length){var D=!1;for(i.length&&(s=i[0],D=_("bingroup")),l=D||l,h=0;h<i.length;h++){var S=(s=i[h])._input.bingroup;S&&S!==l&&p.warn(["Trace",s.index,"must match","within bingroup",l+".","Ignoring its bingroup:",S,"setting."].join(" ")),s.bingroup=l,T(s,l,A(s))}}else w.push(i[0]);for(h=0;h<w.length;h++){s=w[h];var C=_("bingroup");if(u(s,"2dMap"))for(d=0;d<2;d++){var z=_((c=a[d])+"bingroup",C?C+"__"+c:null);T(s,z,c)}else T(s,C,A(s))}for(l in o){var B=o[l];for(i=B.traces,m=0;m<t.length;m++){var U,G,X=t[m],Z=X.name;if("nbins"!==Z||!B.sizeFound){for(h=0;h<i.length;h++){if(void 0!==e((s=i[h])._input,U=X.aStr[c=B.dirs[h]]).get()){B[Z]=_(U),B[Z+"Found"]=!0;break}(G=(s._autoBin||{})[c]||{})[Z]&&e(s,U).set(G[Z])}if("start"===Z||"end"===Z)for(;h<i.length;h++)(s=i[h])["_"+c+"bingroup"]&&_(U,(G=(s._autoBin||{})[c]||{})[Z]);"nbins"!==Z||B.sizeFound||B.nbinsFound||(s=i[0],B[Z]=_(U))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],819:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../lib"),u=x("../../components/color"),y=x("../bar/style_defaults"),e=x("./attributes");Q.exports=function(n,t,a,r){function f(b,g){return v.coerce(n,t,e,b,g)}var s=f("x"),i=f("y");f("cumulative.enabled")&&(f("cumulative.direction"),f("cumulative.currentbin")),f("text"),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat");var l=f("orientation",i&&!s?"h":"v"),c="v"===l?"x":"y",h="v"===l?"y":"x",m=s&&i?Math.min(v.minRowLength(s)&&v.minRowLength(i)):v.minRowLength(t[c]||[]);if(m){t._length=m,p.getComponentMethod("calendars","handleTraceDefaults")(n,t,["x","y"],r),t[h]&&f("histfunc"),f("histnorm"),f("autobin"+c),y(n,t,f,a,r),v.coerceSelectionMarkerOpacity(t,f);var d=(t.marker.line||{}).color,o=p.getComponentMethod("errorbars","supplyDefaults");o(n,t,d||u.defaultLine,{axis:"y"}),o(n,t,d||u.defaultLine,{axis:"x",inherit:"y"})}else t.visible=!1}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/style_defaults":663,"./attributes":811}],820:[function(x,Q,K){"use strict";Q.exports=function(p,v,u,y,e){if(p.x="xVal"in v?v.xVal:v.x,p.y="yVal"in v?v.yVal:v.y,"zLabelVal"in v&&(p.z=v.zLabelVal),v.xa&&(p.xaxis=v.xa),v.ya&&(p.yaxis=v.ya),!(u.cumulative||{}).enabled){var n,t=Array.isArray(e)?y[0].pts[e[0]][e[1]]:y[e].pts;if(p.pointNumbers=t,p.binNumber=p.pointNumber,delete p.pointNumber,delete p.pointIndex,u._indexToPoints){n=[];for(var a=0;a<t.length;a++)n=n.concat(u._indexToPoints[t[a]])}else n=t;p.pointIndices=n}return p}},{}],821:[function(x,Q,K){"use strict";var p=x("../bar/hover").hoverPoints,v=x("../../plots/cartesian/axes").hoverLabelText;Q.exports=function(u,y,e,n,t){var a=p(u,y,e,n,t);if(a){var r=(u=a[0]).cd[u.index],f=u.cd[0].trace;if(!f.cumulative.enabled){var s="h"===f.orientation?"y":"x";u[s+"Label"]=v(u[s+"a"],[r.ph0,r.ph1],f[s+"hoverformat"])}return a}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],822:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),layoutAttributes:x("../bar/layout_attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("./cross_trace_defaults"),supplyLayoutDefaults:x("../bar/layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("../bar/cross_trace_calc").crossTraceCalc,plot:x("../bar/plot").plot,layerName:"barlayer",style:x("../bar/style").style,styleOnSelect:x("../bar/style").styleOnSelect,colorbar:x("../scatter/marker_colorbar"),hoverPoints:x("./hover"),selectPoints:x("../bar/select"),eventData:x("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:x("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":943,"./attributes":811,"./calc":816,"./cross_trace_defaults":818,"./defaults":819,"./event_data":820,"./hover":821}],823:[function(x,Q,K){"use strict";Q.exports={percent:function(p,v){for(var u=p.length,y=100/v,e=0;e<u;e++)p[e]*=y},probability:function(p,v){for(var u=p.length,y=0;y<u;y++)p[y]/=v},density:function(p,v,u,y){var e=p.length;y=y||1;for(var n=0;n<e;n++)p[n]*=u[n]*y},"probability density":function(p,v,u,y){var e=p.length;y&&(v/=y);for(var n=0;n<e;n++)p[n]*=u[n]/v}}},{}],824:[function(x,Q,K){"use strict";var p=x("../histogram/attributes"),v=x("../histogram/bin_attributes"),u=x("../heatmap/attributes"),y=x("../../plots/attributes"),e=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=x("../../plots/template_attributes").hovertemplateAttrs,t=x("../../components/colorscale/attributes"),a=x("../../lib/extend").extendFlat;Q.exports=a({x:p.x,y:p.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:p.histnorm,histfunc:p.histfunc,nbinsx:p.nbinsx,xbins:v("x"),nbinsy:p.nbinsy,ybins:v("y"),autobinx:p.autobinx,autobiny:p.autobiny,bingroup:a({},p.bingroup,{}),xbingroup:a({},p.bingroup,{}),ybingroup:a({},p.bingroup,{}),xgap:u.xgap,ygap:u.ygap,zsmooth:u.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:n({},{keys:"z"}),showlegend:a({},y.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":811,"../histogram/bin_attributes":813}],825:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/cartesian/axes"),u=x("../histogram/bin_functions"),y=x("../histogram/norm_functions"),e=x("../histogram/average"),n=x("../histogram/bin_label_vals"),t=x("../histogram/calc").calcAllAutoBins;function a(s,i,l,c){var h,m=new Array(s);if(c)for(h=0;h<s;h++)m[h]=1/(i[h+1]-i[h]);else{var d=1/l;for(h=0;h<s;h++)m[h]=d}return m}function r(s,i){return{start:s(i.start),end:s(i.end),size:i.size}}function f(s,i,l,c,h,m){var d,o=s.length-1,b=new Array(o),g=n(l,c,s,h,m);for(d=0;d<o;d++){var w=(i||[])[d];b[d]=void 0===w?[g(s[d]),g(s[d+1],!0)]:[w,w]}return b}Q.exports=function(s,i){var l,c,h,m,d=v.getFromId(s,i.xaxis),o=v.getFromId(s,i.yaxis),b=i.xcalendar,g=i.ycalendar,w=function(at){return d.r2c(at,0,b)},_=function(at){return o.r2c(at,0,g)},A=t(s,i,d,"x"),T=A[0],E=A[1],k=t(s,i,o,"y"),O=k[0],D=k[1],S=i._length;E.length>S&&E.splice(S,E.length-S),D.length>S&&D.splice(S,D.length-S);var C=[],z=[],B=[],U="string"==typeof T.size,G="string"==typeof O.size,X=[],Z=[],q=U?X:T,W=G?Z:O,te=0,R=[],N=[],V=i.histnorm,ee=i.histfunc,j=-1!==V.indexOf("density"),J="max"===ee||"min"===ee?null:0,$=u.count,re=y[V],ne=!1,se=[],ie=[],ue="z"in i?i.z:"marker"in i&&Array.isArray(i.marker.color)?i.marker.color:"";ue&&"count"!==ee&&(ne="avg"===ee,$=u[ee]);var le=T.size,de=w(T.start),ve=w(T.end)+(de-v.tickIncrement(de,le,!1,b))/1e6;for(l=de;l<ve;l=v.tickIncrement(l,le,!1,b))z.push(J),X.push(l),ne&&B.push(0);X.push(l);var be=z.length,Te=(l-de)/be,he=d.c2r(de+Te/2,0,b),me=O.size,Ae=_(O.start),we=_(O.end)+(Ae-v.tickIncrement(Ae,me,!1,g))/1e6;for(l=Ae;l<we;l=v.tickIncrement(l,me,!1,g)){C.push(z.slice()),Z.push(l);var Se=new Array(be);for(c=0;c<be;c++)Se[c]=[];N.push(Se),ne&&R.push(B.slice())}Z.push(l);var Pe=C.length,ze=(l-Ae)/Pe,He=o.c2r(Ae+ze/2,0,g);j&&(se=a(z.length,q,Te,U),ie=a(C.length,W,ze,G)),U||"date"!==d.type||(q=r(w,q)),G||"date"!==o.type||(W=r(_,W));var tt=!0,Oe=!0,Be=new Array(be),Je=new Array(Pe),Ye=1/0,nt=1/0,ft=1/0,dt=1/0;for(l=0;l<S;l++){var Rt=E[l],Et=D[l];h=p.findBin(Rt,q),m=p.findBin(Et,W),h>=0&&h<be&&m>=0&&m<Pe&&(te+=$(h,l,C[m],ue,R[m]),N[m][h].push(l),tt&&(void 0===Be[h]?Be[h]=Rt:Be[h]!==Rt&&(tt=!1)),Oe&&(void 0===Je[m]?Je[m]=Et:Je[m]!==Et&&(Oe=!1)),Ye=Math.min(Ye,Rt-X[h]),nt=Math.min(nt,X[h+1]-Rt),ft=Math.min(ft,Et-Z[m]),dt=Math.min(dt,Z[m+1]-Et))}if(ne)for(m=0;m<Pe;m++)te+=e(C[m],R[m]);if(re)for(m=0;m<Pe;m++)re(C[m],te,se,ie[m]);return{x:E,xRanges:f(X,tt&&Be,Ye,nt,d,b),x0:he,dx:Te,y:D,yRanges:f(Z,Oe&&Je,ft,dt,o,g),y0:He,dy:ze,z:C,pts:N}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":812,"../histogram/bin_functions":814,"../histogram/bin_label_vals":815,"../histogram/calc":816,"../histogram/norm_functions":823}],826:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./sample_defaults"),u=x("../heatmap/style_defaults"),y=x("../../components/colorscale/defaults"),e=x("./attributes");Q.exports=function(n,t,a,r){function f(s,i){return p.coerce(n,t,e,s,i)}v(n,t,f,r),!1!==t.visible&&(u(n,t,f,r),y(n,t,r,f,{prefix:"",cLetter:"z"}),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/style_defaults":805,"./attributes":824,"./sample_defaults":829}],827:[function(x,Q,K){"use strict";var p=x("../heatmap/hover"),v=x("../../plots/cartesian/axes").hoverLabelText;Q.exports=function(u,y,e,n,t){var a=p(u,y,e,n,t);if(a){var r=(u=a[0]).index,i=u.cd[0],l=i.trace,c=i.xRanges[r[1]],h=i.yRanges[r[0]];return u.xLabel=v(u.xa,[c[0],c[1]],l.xhoverformat),u.yLabel=v(u.ya,[h[0],h[1]],l.yhoverformat),a}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],828:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("../histogram/cross_trace_defaults"),calc:x("../heatmap/calc"),plot:x("../heatmap/plot"),layerName:"heatmaplayer",colorbar:x("../heatmap/colorbar"),style:x("../heatmap/style"),hoverPoints:x("./hover"),eventData:x("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":803,"../heatmap/style":804,"../histogram/cross_trace_defaults":818,"../histogram/event_data":820,"./attributes":824,"./defaults":826,"./hover":827}],829:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../lib");Q.exports=function(u,y,e,n){var t=e("x"),a=e("y"),r=v.minRowLength(t),f=v.minRowLength(a);r&&f?(y._length=Math.min(r,f),p.getComponentMethod("calendars","handleTraceDefaults")(u,y,["x","y"],n),(e("z")||e("marker.color"))&&e("histfunc"),e("histnorm"),e("autobinx"),e("autobiny")):y.visible=!1}},{"../../lib":503,"../../registry":638}],830:[function(x,Q,K){"use strict";var p=x("../histogram2d/attributes"),v=x("../contour/attributes"),u=x("../../components/colorscale/attributes"),y=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=x("../../lib/extend").extendFlat;Q.exports=e({x:p.x,y:p.y,z:p.z,marker:p.marker,histnorm:p.histnorm,histfunc:p.histfunc,nbinsx:p.nbinsx,xbins:p.xbins,nbinsy:p.nbinsy,ybins:p.ybins,autobinx:p.autobinx,autobiny:p.autobiny,bingroup:p.bingroup,xbingroup:p.xbingroup,ybingroup:p.ybingroup,autocontour:v.autocontour,ncontours:v.ncontours,contours:v.contours,line:{color:v.line.color,width:e({},v.line.width,{dflt:.5}),dash:v.line.dash,smoothing:v.line.smoothing,editType:"plot"},xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:p.hovertemplate},u("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":824}],831:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../histogram2d/sample_defaults"),u=x("../contour/contours_defaults"),y=x("../contour/style_defaults"),e=x("./attributes");Q.exports=function(n,t,a,r){function f(s,i){return p.coerce(n,t,e,s,i)}v(n,t,f,r),!1!==t.visible&&(u(n,t,f,function(s){return p.coerce2(n,t,e,s)}),y(n,t,f,r),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../histogram2d/sample_defaults":829,"./attributes":830}],832:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("../histogram/cross_trace_defaults"),calc:x("../contour/calc"),plot:x("../contour/plot").plot,layerName:"contourlayer",style:x("../contour/style"),colorbar:x("../contour/colorbar"),hoverPoints:x("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":818,"./attributes":830,"./defaults":831}],833:[function(x,Q,K){"use strict";var p=x("../../plots/template_attributes").hovertemplateAttrs,v=x("../../plots/template_attributes").texttemplateAttrs,u=x("../../components/colorscale/attributes"),y=x("../../plots/domain").attributes,e=x("../pie/attributes"),n=x("../sunburst/attributes"),t=x("../treemap/attributes"),a=x("../treemap/constants"),r=x("../../lib/extend").extendFlat;Q.exports={labels:n.labels,parents:n.parents,values:n.values,branchvalues:n.branchvalues,count:n.count,level:n.level,maxdepth:n.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:t.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:r({colors:n.marker.colors,line:n.marker.line,editType:"calc"},u("marker",{colorAttr:"colors",anim:!1})),leaf:n.leaf,pathbar:t.pathbar,text:e.text,textinfo:n.textinfo,texttemplate:v({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:n.hoverinfo,hovertemplate:p({},{keys:a.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:t.outsidetextfont,textposition:t.textposition,sort:e.sort,root:n.root,domain:y({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":899,"../sunburst/attributes":1044,"../treemap/attributes":1070,"../treemap/constants":1073}],834:[function(x,Q,K){"use strict";var p=x("../../plots/plots");K.name="icicle",K.plot=function(v,u,y,e){p.plotBasePlot(K.name,v,u,y,e)},K.clean=function(v,u,y,e){p.cleanBasePlot(K.name,v,u,y,e)}},{"../../plots/plots":619}],835:[function(x,Q,K){"use strict";var p=x("../sunburst/calc");K.calc=function(v,u){return p.calc(v,u)},K.crossTraceCalc=function(v){return p._runCrossTraceCalc("icicle",v)}},{"../sunburst/calc":1046}],836:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./attributes"),u=x("../../components/color"),y=x("../../plots/domain").defaults,e=x("../bar/defaults").handleText,n=x("../bar/constants").TEXTPAD,t=x("../../components/colorscale"),a=t.hasColorscale,r=t.handleDefaults;Q.exports=function(f,s,i,l){function c(w,_){return p.coerce(f,s,v,w,_)}var h=c("labels"),m=c("parents");if(h&&h.length&&m&&m.length){var d=c("values");c(d&&d.length?"branchvalues":"count"),c("level"),c("maxdepth"),c("tiling.orientation"),c("tiling.flip"),c("tiling.pad");var o=c("text");c("texttemplate"),s.texttemplate||c("textinfo",Array.isArray(o)?"text+label":"label"),c("hovertext"),c("hovertemplate");var b=c("pathbar.visible");e(f,s,l,c,"auto",{hasPathbar:b,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition"),c("marker.line.width")&&c("marker.line.color",l.paper_bgcolor),c("marker.colors");var g=s._hasColorscale=a(f,"marker","colors")||(f.marker||{}).coloraxis;g&&r(f,s,l,c,{prefix:"marker.",cLetter:"c"}),c("leaf.opacity",g?1:.7),s._hovered={marker:{line:{width:2,color:u.contrast(l.paper_bgcolor)}}},b&&(c("pathbar.thickness",s.pathbar.textfont.size+2*n),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),y(s,l,c),s._length=null}else s.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":833}],837:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=x("../../components/drawing"),y=x("../../lib/svg_text_utils"),e=x("./partition"),n=x("./style").styleOne,t=x("../treemap/constants"),a=x("../sunburst/helpers"),r=x("../sunburst/fx"),f=x("../sunburst/plot").formatSliceLabel;Q.exports=function(s,i,l,c,h){var m=h.width,d=h.height,o=h.viewX,b=h.viewY,g=h.pathSlice,w=h.toMoveInsideSlice,_=h.strTransform,A=h.hasTransition,T=h.handleSlicesExit,E=h.makeUpdateSliceInterpolator,k=h.makeUpdateTextInterpolator,O=h.prevEntry,D=s._fullLayout,S=i[0].trace,C=-1!==S.textposition.indexOf("left"),z=-1!==S.textposition.indexOf("right"),B=-1!==S.textposition.indexOf("bottom"),U=e(l,[m,d],{flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1,orientation:S.tiling.orientation,pad:{inner:S.tiling.pad},maxDepth:S._maxDepth}).descendants(),G=1/0,X=-1/0;U.forEach(function(R){var N=R.depth;N>=S._maxDepth?(R.x0=R.x1=(R.x0+R.x1)/2,R.y0=R.y1=(R.y0+R.y1)/2):(G=Math.min(G,N),X=Math.max(X,N))}),c=c.data(U,a.getPtId),S._maxVisibleLayers=isFinite(X)?X-G+1:0,c.enter().append("g").classed("slice",!0),T(c,!1,{},[m,d],g),c.order();var Z=null;if(A&&O){var q=a.getPtId(O);c.each(function(R){null===Z&&a.getPtId(R)===q&&(Z={x0:R.x0,x1:R.x1,y0:R.y0,y1:R.y1})})}var W=function(){return Z||{x0:0,x1:m,y0:0,y1:d}},te=c;return A&&(te=te.transition().each("end",function(){var R=p.select(this);a.setSliceCursor(R,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),te.each(function(R){R._x0=o(R.x0),R._x1=o(R.x1),R._y0=b(R.y0),R._y1=b(R.y1),R._hoverX=o(R.x1-S.tiling.pad),R._hoverY=b(B?R.y1-S.tiling.pad/2:R.y0+S.tiling.pad/2);var N=p.select(this),V=v.ensureSingle(N,"path","surface",function($){$.style("pointer-events","all")});A?V.transition().attrTween("d",function($){var re=E($,!1,W(),[m,d],{orientation:S.tiling.orientation,flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1});return function(ne){return g(re(ne))}}):V.attr("d",g),N.call(r,l,s,i,{styleOne:n,eventDataKeys:t.eventDataKeys,transitionTime:t.CLICK_TRANSITION_TIME,transitionEasing:t.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,s,{isTransitioning:s._transitioning}),V.call(n,R,S,{hovered:!1}),R._text=R.x0===R.x1||R.y0===R.y1?"":f(R,l,S,i,D)||"";var ee=v.ensureSingle(N,"g","slicetext"),j=v.ensureSingle(ee,"text","",function($){$.attr("data-notex",1)}),J=v.ensureUniformFontSize(s,a.determineTextFont(S,R,D.font));j.text(R._text||" ").classed("slicetext",!0).attr("text-anchor",z?"end":C?"start":"middle").call(u.font,J).call(y.convertToTspans,s),R.textBB=u.bBox(j.node()),R.transform=w(R,{fontSize:J.size}),R.transform.fontSize=J.size,A?j.transition().attrTween("transform",function($){var re=k($,!1,W(),[m,d]);return function(ne){return _(re(ne))}}):j.attr("transform",_(R))}),Z}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1049,"../sunburst/helpers":1050,"../sunburst/plot":1054,"../treemap/constants":1073,"./partition":841,"./style":843,"@plotly/d3":58}],838:[function(x,Q,K){"use strict";Q.exports={moduleType:"trace",name:"icicle",basePlotModule:x("./base_plot"),categories:[],animatable:!0,attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot"),style:x("./style").style,colorbar:x("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":943,"./attributes":833,"./base_plot":834,"./calc":835,"./defaults":836,"./layout_attributes":839,"./layout_defaults":840,"./plot":842,"./style":843}],839:[function(x,Q,K){"use strict";Q.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],840:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./layout_attributes");Q.exports=function(u,y){function e(n,t){return p.coerce(u,y,v,n,t)}e("iciclecolorway",y.colorway),e("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":839}],841:[function(x,Q,K){"use strict";var p=x("d3-hierarchy"),v=x("../treemap/flip_tree");Q.exports=function(u,y,e){var n=e.flipX,t=e.flipY,a="h"===e.orientation,r=e.maxDepth,f=y[0],s=y[1];r&&(f=(u.height+1)*y[0]/Math.min(u.height+1,r),s=(u.height+1)*y[1]/Math.min(u.height+1,r));var i=p.partition().padding(e.pad.inner).size(a?[y[1],f]:[y[0],s])(u);return(a||n||t)&&v(i,y,{swapXY:a,flipX:n,flipY:t}),i}},{"../treemap/flip_tree":1078,"d3-hierarchy":115}],842:[function(x,Q,K){"use strict";var p=x("../treemap/draw"),v=x("./draw_descendants");Q.exports=function(u,y,e,n){return p(u,y,e,n,{type:"icicle",drawDescendants:v})}},{"../treemap/draw":1075,"./draw_descendants":837}],843:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/color"),u=x("../../lib"),y=x("../bar/uniform_text").resizeText;function e(n,t,a){var r=t.data.data,f=!t.children,s=r.i,i=u.castOption(a,s,"marker.line.color")||v.defaultLine,l=u.castOption(a,s,"marker.line.width")||0;n.style("stroke-width",l).call(v.fill,r.color).call(v.stroke,i).style("opacity",f?a.leaf.opacity:null)}Q.exports={style:function(n){var t=n._fullLayout._iciclelayer.selectAll(".trace");y(n,t,"icicle"),t.each(function(a){var r=p.select(this),f=a[0].trace;r.style("opacity",f.opacity),r.selectAll("path.surface").each(function(s){p.select(this).call(e,s,f)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],844:[function(x,Q,K){"use strict";for(var p=x("../../plots/attributes"),v=x("../../plots/template_attributes").hovertemplateAttrs,u=x("../../lib/extend").extendFlat,y=x("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],n=[],t=[],a=0;a<e.length;a++){var r=y[e[a]];n.push("For the `"+e[a]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),t.push("For the `"+e[a]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}Q.exports=u({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:u({},p.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:v({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":846}],845:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./constants"),u=x("fast-isnumeric"),y=x("../../plots/cartesian/axes"),e=x("../../lib").maxRowLength,n=x("./helpers").getImageSize;function t(r,f,s,i){return function(l){return p.constrain((l-r)*f,s,i)}}function a(r,f){return function(s){return p.constrain(s,r,f)}}Q.exports=function(r,f){var s,i;if(f._hasZ)s=f.z.length,i=e(f.z);else if(f._hasSource){var l=n(f.source);s=l.height,i=l.width}var c,h=y.getFromId(r,f.xaxis||"x"),m=y.getFromId(r,f.yaxis||"y"),d=h.d2c(f.x0)-f.dx/2,o=m.d2c(f.y0)-f.dy/2,b=[d,d+i*f.dx],g=[o,o+s*f.dy];if(h&&"log"===h.type)for(c=0;c<i;c++)b.push(d+c*f.dx);if(m&&"log"===m.type)for(c=0;c<s;c++)g.push(o+c*f.dy);return f._extremes[h._id]=y.findExtremes(h,b),f._extremes[m._id]=y.findExtremes(m,g),f._scaler=function(w){var _=v.colormodel[w.colormodel],A=(_.colormodel||w.colormodel).length;w._sArray=[];for(var T=0;T<A;T++)w._sArray.push(_.min[T]!==w.zmin[T]||_.max[T]!==w.zmax[T]?t(w.zmin[T],(_.max[T]-_.min[T])/(w.zmax[T]-w.zmin[T]),_.min[T],_.max[T]):a(_.min[T],_.max[T]));return function(E){for(var k=E.slice(0,A),O=0;O<A;O++){var D=k[O];if(!u(D))return!1;k[O]=w._sArray[O](D)}return k}}(f),[{x0:d,y0:o,z:f.z,w:i,h:s}]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":846,"./helpers":849,"fast-isnumeric":190}],846:[function(x,Q,K){"use strict";Q.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(p){return p.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(p){return p.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(p){return p.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(p){var v=p.slice(0,3);return v[1]=v[1]+"%",v[2]=v[2]+"%",v},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(p){var v=p.slice(0,4);return v[1]=v[1]+"%",v[2]=v[2]+"%",v},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],847:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./attributes"),u=x("./constants"),y=x("../../snapshot/helpers").IMAGE_URL_PREFIX;Q.exports=function(e,n){function t(f,s){return p.coerce(e,n,v,f,s)}t("source"),n.source&&!n.source.match(y)&&delete n.source,n._hasSource=!!n.source;var a,r=t("z");n._hasZ=!(void 0===r||!r.length||!r[0]||!r[0].length),n._hasZ||n._hasSource?(t("x0"),t("y0"),t("dx"),t("dy"),n._hasZ?(t("colormodel","rgb"),t("zmin",(a=u.colormodel[n.colormodel]).zminDflt||a.min),t("zmax",a.zmaxDflt||a.max)):n._hasSource&&(n.colormodel="rgba256",n.zmin=(a=u.colormodel[n.colormodel]).zminDflt,n.zmax=a.zmaxDflt),t("zsmooth"),t("text"),t("hovertext"),t("hovertemplate"),n._length=null):n.visible=!1}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":844,"./constants":846}],848:[function(x,Q,K){"use strict";Q.exports=function(p,v){return"xVal"in v&&(p.x=v.xVal),"yVal"in v&&(p.y=v.yVal),v.xa&&(p.xaxis=v.xa),v.ya&&(p.yaxis=v.ya),p.color=v.color,p.colormodel=v.trace.colormodel,p.z||(p.z=v.color),p}},{}],849:[function(x,Q,K){"use strict";var p=x("probe-image-size/sync"),v=x("../../snapshot/helpers").IMAGE_URL_PREFIX,u=x("buffer/").Buffer;K.getImageSize=function(y){var e=y.replace(v,""),n=new u(e,"base64");return p(n)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],850:[function(x,Q,K){"use strict";var p=x("../../components/fx"),v=x("../../lib"),u=x("./constants");Q.exports=function(y,e,n){var t=y.cd[0],a=t.trace,r=y.xa,f=y.ya;if(!(p.inbox(e-t.x0,e-(t.x0+t.w*a.dx),0)>0||p.inbox(n-t.y0,n-(t.y0+t.h*a.dy),0)>0)){var s,i=Math.floor((e-t.x0)/a.dx),l=Math.floor(Math.abs(n-t.y0)/a.dy);if(a._hasZ?s=t.z[l][i]:a._hasSource&&(s=a._canvas.el.getContext("2d").getImageData(i,l,1,1).data),s){var c,h=t.hi||a.hoverinfo;if(h){var m=h.split("+");-1!==m.indexOf("all")&&(m=["color"]),-1!==m.indexOf("color")&&(c=!0)}var d,o=u.colormodel[a.colormodel],b=o.colormodel||a.colormodel,g=b.length,w=a._scaler(s),_=o.suffix,A=[];(a.hovertemplate||c)&&(A.push("["+[w[0]+_[0],w[1]+_[1],w[2]+_[2]].join(", ")),4===g&&A.push(", "+w[3]+_[3]),A.push("]"),A=A.join(""),y.extraText=b.toUpperCase()+": "+A),Array.isArray(a.hovertext)&&Array.isArray(a.hovertext[l])?d=a.hovertext[l][i]:Array.isArray(a.text)&&Array.isArray(a.text[l])&&(d=a.text[l][i]);var T=f.c2p(t.y0+(l+.5)*a.dy),E=t.x0+(i+.5)*a.dx,k=t.y0+(l+.5)*a.dy,O="["+s.slice(0,a.colormodel.length).join(", ")+"]";return[v.extendFlat(y,{index:[l,i],x0:r.c2p(t.x0+i*a.dx),x1:r.c2p(t.x0+(i+1)*a.dx),y0:T,y1:T,color:w,xVal:E,xLabelVal:E,yVal:k,yLabelVal:k,zLabelVal:O,text:d,hovertemplateLabels:{zLabel:O,colorLabel:A,"color[0]Label":w[0]+_[0],"color[1]Label":w[1]+_[1],"color[2]Label":w[2]+_[2],"color[3]Label":w[3]+_[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":846}],851:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),style:x("./style"),hoverPoints:x("./hover"),eventData:x("./event_data"),moduleType:"trace",name:"image",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":844,"./calc":845,"./defaults":847,"./event_data":848,"./hover":850,"./plot":852,"./style":853}],852:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=v.strTranslate,y=x("../../constants/xmlns_namespaces"),e=x("./constants"),n=v.isIOS()||v.isSafari()||v.isIE();Q.exports=function(t,a,r,f){var s=a.xaxis,i=a.yaxis,l=!(n||t._context._exportedPlot);v.makeTraceGroups(f,r,"im").each(function(c){var h=p.select(this),m=c[0],d=m.trace,o=("fast"===d.zsmooth||!1===d.zsmooth&&l)&&!d._hasZ&&d._hasSource&&"linear"===s.type&&"linear"===i.type;d._realImage=o;var b,g,w,_,A,T,E=m.z,k=m.x0,O=m.y0,D=m.w,S=m.h,C=d.dx,z=d.dy;for(T=0;void 0===b&&T<D;)b=s.c2p(k+T*C),T++;for(T=D;void 0===g&&T>0;)g=s.c2p(k+T*C),T--;for(T=0;void 0===_&&T<S;)_=i.c2p(O+T*z),T++;for(T=S;void 0===A&&T>0;)A=i.c2p(O+T*z),T--;g<b&&(w=g,g=b,b=w),A<_&&(w=_,_=A,A=w),!o&&(b=Math.max(-.5*s._length,b),g=Math.min(1.5*s._length,g),_=Math.max(-.5*i._length,_),A=Math.min(1.5*i._length,A));var B=Math.round(g-b),U=Math.round(A-_);if(B<=0||U<=0)h.selectAll("image").data([]).exit().remove();else{var G=h.selectAll("image").data([c]);G.enter().append("svg:image").attr({xmlns:y.svg,preserveAspectRatio:"none"}),G.exit().remove();var X=!1===d.zsmooth?e.pixelatedStyle:"";if(o){var Z=v.simpleMap(s.range,s.r2l),q=v.simpleMap(i.range,i.r2l),W=Z[1]<Z[0],te=q[1]>q[0];if(W||te){var R=b+B/2,N=_+U/2;X+="transform:"+u(R+"px",N+"px")+"scale("+(W?-1:1)+","+(te?-1:1)+")"+u(-R+"px",-N+"px")+";"}}G.attr("style",X);var V=new Promise(function(j){if(d._hasZ)j();else if(d._hasSource)if(d._canvas&&d._canvas.el.width===D&&d._canvas.el.height===S&&d._canvas.source===d.source)j();else{var J=document.createElement("canvas");J.width=D,J.height=S;var $=J.getContext("2d");d._image=d._image||new Image;var re=d._image;re.onload=function(){$.drawImage(re,0,0),d._canvas={el:J,source:d.source},j()},re.setAttribute("src",d.source)}}).then(function(){var j;if(d._hasZ)j=ee(function($,re){return E[re][$]}).toDataURL("image/png");else if(d._hasSource)if(o)j=d.source;else{var J=d._canvas.el.getContext("2d").getImageData(0,0,D,S).data;j=ee(function($,re){var ne=4*(re*D+$);return[J[ne],J[ne+1],J[ne+2],J[ne+3]]}).toDataURL("image/png")}G.attr({"xlink:href":j,height:U,width:B,x:b,y:_})});t._promises.push(V)}function ee(j){var J=document.createElement("canvas");J.width=B,J.height=U;var $,re=J.getContext("2d"),ne=function(he){return v.constrain(Math.round(s.c2p(k+he*C)-b),0,B)},se=function(he){return v.constrain(Math.round(i.c2p(O+he*z)-_),0,U)},ie=e.colormodel[d.colormodel],ue=ie.colormodel||d.colormodel,le=ie.fmt;for(T=0;T<m.w;T++){var de=ne(T),ve=ne(T+1);if(ve!==de&&!isNaN(ve)&&!isNaN(de))for(var _e=0;_e<m.h;_e++){var be=se(_e),Te=se(_e+1);Te===be||isNaN(Te)||isNaN(be)||!j(T,_e)||($=d._scaler(j(T,_e)),re.fillStyle=$?ue+"("+le($).join(",")+")":"rgba(0,0,0,0)",re.fillRect(de,be,ve-de,Te-be))}}return J}})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":846,"@plotly/d3":58}],853:[function(x,Q,K){"use strict";var p=x("@plotly/d3");Q.exports=function(v){p.select(v).selectAll(".im image").style("opacity",function(u){return u[0].trace.opacity})}},{"@plotly/d3":58}],854:[function(x,Q,K){"use strict";var p=x("../../lib/extend").extendFlat,v=x("../../lib/extend").extendDeep,u=x("../../plot_api/edit_types").overrideAll,y=x("../../plots/font_attributes"),e=x("../../components/color/attributes"),n=x("../../plots/domain").attributes,t=x("../../plots/cartesian/layout_attributes"),a=x("../../plot_api/plot_template").templatedArray,r=x("../../constants/delta.js"),f=x("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,s=y({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},l={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},c=a("step",v({},i,{range:l}));Q.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:n({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:p({},s,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:f("value")},font:p({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:f("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:p({},s,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:v({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:u({range:l,visible:p({},t.visible,{dflt:!0}),tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:p({},t.ticks,{dflt:"outside"}),ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,tickfont:y({}),tickangle:t.tickangle,tickformat:t.tickformat,tickformatstops:t.tickformatstops,tickprefix:t.tickprefix,showtickprefix:t.showtickprefix,ticksuffix:t.ticksuffix,showticksuffix:t.showticksuffix,separatethousands:t.separatethousands,exponentformat:t.exponentformat,minexponent:t.minexponent,showexponent:t.showexponent,editType:"plot"},"plot"),steps:c,threshold:{line:{color:p({},i.line.color,{}),width:p({},i.line.width,{dflt:1}),editType:"plot"},thickness:p({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],855:[function(x,Q,K){"use strict";var p=x("../../plots/plots");K.name="indicator",K.plot=function(v,u,y,e){p.plotBasePlot(K.name,v,u,y,e)},K.clean=function(v,u,y,e){p.cleanBasePlot(K.name,v,u,y,e)}},{"../../plots/plots":619}],856:[function(x,Q,K){"use strict";Q.exports={calc:function(p,v){var u=[],y=v.value;"number"!=typeof v._lastValue&&(v._lastValue=v.value);var e=v._lastValue,n=e;return v._hasDelta&&"number"==typeof v.delta.reference&&(n=v.delta.reference),u[0]={y,lastY:e,delta:y-n,relativeDelta:(y-n)/n},u}}},{}],857:[function(x,Q,K){"use strict";Q.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],858:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./attributes"),u=x("../../plots/domain").defaults,y=x("../../plot_api/plot_template"),e=x("../../plots/array_container_defaults"),n=x("./constants.js"),t=x("../../plots/cartesian/tick_value_defaults"),a=x("../../plots/cartesian/tick_mark_defaults"),r=x("../../plots/cartesian/tick_label_defaults"),f=x("../../plots/cartesian/prefix_suffix_defaults");function s(i,l){function c(h,m){return p.coerce(i,l,v.gauge.steps,h,m)}c("color"),c("line.color"),c("line.width"),c("range"),c("thickness")}Q.exports={supplyDefaults:function(i,l,c,h){function m(D,S){return p.coerce(i,l,v,D,S)}u(l,h,m),m("mode"),l._hasNumber=-1!==l.mode.indexOf("number"),l._hasDelta=-1!==l.mode.indexOf("delta"),l._hasGauge=-1!==l.mode.indexOf("gauge");var d=m("value");l._range=[0,"number"==typeof d?1.5*d:1];var o,b,g,w,_,A,T=new Array(2);function E(D,S){return p.coerce(g,w,v.gauge,D,S)}function k(D,S){return p.coerce(_,A,v.gauge.axis,D,S)}if(l._hasNumber&&(m("number.valueformat"),m("number.font.color",h.font.color),m("number.font.family",h.font.family),m("number.font.size"),void 0===l.number.font.size&&(l.number.font.size=n.defaultNumberFontSize,T[0]=!0),m("number.prefix"),m("number.suffix"),o=l.number.font.size),l._hasDelta&&(m("delta.font.color",h.font.color),m("delta.font.family",h.font.family),m("delta.font.size"),void 0===l.delta.font.size&&(l.delta.font.size=(l._hasNumber?.5:1)*(o||n.defaultNumberFontSize),T[1]=!0),m("delta.reference",l.value),m("delta.relative"),m("delta.valueformat",l.delta.relative?"2%":""),m("delta.increasing.symbol"),m("delta.increasing.color"),m("delta.decreasing.symbol"),m("delta.decreasing.color"),m("delta.position"),b=l.delta.font.size),l._scaleNumbers=(!l._hasNumber||T[0])&&(!l._hasDelta||T[1])||!1,m("title.font.color",h.font.color),m("title.font.family",h.font.family),m("title.font.size",.25*(o||b||n.defaultNumberFontSize)),m("title.text"),l._hasGauge){(g=i.gauge)||(g={}),w=y.newContainer(l,"gauge"),E("shape"),(l._isBullet="bullet"===l.gauge.shape)||m("title.align","center"),(l._isAngular="angular"===l.gauge.shape)||m("align","center"),E("bgcolor",h.paper_bgcolor),E("borderwidth"),E("bordercolor"),E("bar.color"),E("bar.line.color"),E("bar.line.width"),E("bar.thickness",n.valueThickness*("bullet"===l.gauge.shape?.5:1)),e(g,w,{name:"steps",handleItemDefaults:s}),E("threshold.value"),E("threshold.thickness"),E("threshold.line.width"),E("threshold.line.color"),_={},g&&(_=g.axis||{}),A=y.newContainer(w,"axis"),k("visible"),l._range=k("range",l._range);var O={outerTicks:!0};t(_,A,k,"linear"),f(_,A,k,"linear",O),r(_,A,k,"linear",O),a(_,A,k,O)}else m("title.align","center"),m("align","center"),l._isAngular=l._isBullet=!1;l._length=null}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":854,"./constants.js":857}],859:[function(x,Q,K){"use strict";Q.exports={moduleType:"trace",name:"indicator",basePlotModule:x("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:x("./attributes"),supplyDefaults:x("./defaults").supplyDefaults,calc:x("./calc").calc,plot:x("./plot"),meta:{}}},{"./attributes":854,"./base_plot":855,"./calc":856,"./defaults":858,"./plot":860}],860:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("d3-interpolate").interpolate,u=x("d3-interpolate").interpolateNumber,y=x("../../lib"),e=y.strScale,n=y.strTranslate,t=y.rad2deg,a=x("../../constants/alignment").MID_SHIFT,r=x("../../components/drawing"),f=x("./constants"),s=x("../../lib/svg_text_utils"),i=x("../../plots/cartesian/axes"),l=x("../../plots/cartesian/axis_defaults"),c=x("../../plots/cartesian/position_defaults"),h=x("../../plots/cartesian/layout_attributes"),m=x("../../components/color"),d={left:"start",center:"middle",right:"end"},o={left:0,center:.5,right:1},b=/[yzafpn\xb5mkMGTPEZY]/;function g(k){return k&&k.duration>0}function w(k){k.each(function(O){m.stroke(p.select(this),O.line.color)}).each(function(O){m.fill(p.select(this),O.color)}).style("stroke-width",function(O){return O.line.width})}function _(k,O,D){var S=k._fullLayout,C=y.extendFlat({type:"linear",ticks:"outside",range:D,showline:!0},O),z={type:"linear",_id:"x"+O._id},B={letter:"x",font:S.font,noHover:!0,noTickson:!0};function U(G,X){return y.coerce(C,z,h,G,X)}return l(C,z,U,B,S),c(C,z,U,B),z}function A(k,O,D){return[Math.min(O/k.width,D/k.height),k,O+"x"+D]}function T(k,O,D,S){var C=document.createElementNS("http://www.w3.org/2000/svg","text"),z=p.select(C);return z.text(k).attr("x",0).attr("y",0).attr("text-anchor",D).attr("data-unformatted",k).call(s.convertToTspans,S).call(r.font,O),r.bBox(z.node())}function E(k,O,D,S,C,z){var B="_cache"+O;k[B]&&k[B].key===C||(k[B]={key:C,value:D});var U=y.aggNums(z,null,[k[B].value,S],2);return k[B].value=U,U}Q.exports=function(k,O,D,S){var C,z=k._fullLayout;g(D)&&S&&(C=S()),y.makeTraceGroups(z._indicatorlayer,O,"trace").each(function(B){var U,G,X,Z,q,W=B[0].trace,te=p.select(this),R=W._hasGauge,N=W._isAngular,V=W._isBullet,ee=W.domain,j={w:z._size.w*(ee.x[1]-ee.x[0]),h:z._size.h*(ee.y[1]-ee.y[0]),l:z._size.l+z._size.w*ee.x[0],r:z._size.r+z._size.w*(1-ee.x[1]),t:z._size.t+z._size.h*(1-ee.y[1]),b:z._size.b+z._size.h*ee.y[0]},J=j.l+j.w/2,$=j.t+j.h/2,re=Math.min(j.w/2,j.h),ne=f.innerRadius*re,se=W.align||"center";if(G=$,R){if(N&&(U=J,G=$+re/2,X=function(Te){return he=Te,[(me=.9*ne)/Math.sqrt(he.width/2*(he.width/2)+he.height*he.height),he,me];var he,me}),V){var ie=f.bulletPadding,ue=1-f.bulletNumberDomainSize+ie;U=j.l+(ue+(1-ue)*o[se])*j.w,X=function(Te){return A(Te,(f.bulletNumberDomainSize-ie)*j.w,j.h)}}}else U=j.l+o[se]*j.w,X=function(Te){return A(Te,j.w,j.h)};(function(Te,he,me,Ae){var we,Se,Pe,ze=me[0].trace,He=Ae.numbersX,tt=Ae.numbersY,Oe=ze.align||"center",Be=d[Oe],Je=Ae.transitionOpts,Ye=Ae.onComplete,nt=y.ensureSingle(he,"g","numbers"),ft=[];ze._hasNumber&&ft.push("number"),ze._hasDelta&&(ft.push("delta"),"left"===ze.delta.position&&ft.reverse());var dt=nt.selectAll("text").data(ft);function Rt(Ze,Ne,it,ke){if(!Ze.match("s")||it>=0==ke>=0||Ne(it).slice(-1).match(b)||Ne(ke).slice(-1).match(b))return Ne;var De=Ze.slice().replace("s","f").replace(/\d+/,function(Ie){return parseInt(Ie)-1}),Re=_(Te,{tickformat:De});return function(Ie){return Math.abs(Ie)<1?i.tickText(Re,Ie).text:Ne(Ie)}}dt.enter().append("text"),dt.attr("text-anchor",function(){return Be}).attr("class",function(Ze){return Ze}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),dt.exit().remove();var Et,at=ze.mode+ze.align;if(ze._hasDelta&&(Et=function(){var Ze=_(Te,{tickformat:ze.delta.valueformat},ze._range);Ze.setScale(),i.prepTicks(Ze);var Ne=function(Ke){return i.tickText(Ze,Ke).text},it=function(Ke){return ze.delta.relative?Ke.relativeDelta:Ke.delta},ke=function(Ke,ut){return 0===Ke||"number"!=typeof Ke||isNaN(Ke)?"-":(Ke>0?ze.delta.increasing.symbol:ze.delta.decreasing.symbol)+ut(Ke)},De=function(Ke){return Ke.delta>=0?ze.delta.increasing.color:ze.delta.decreasing.color};void 0===ze._deltaLastValue&&(ze._deltaLastValue=it(me[0]));var Re=nt.select("text.delta");function Ie(){Re.text(ke(it(me[0]),Ne)).call(m.fill,De(me[0])).call(s.convertToTspans,Te)}return Re.call(r.font,ze.delta.font).call(m.fill,De({delta:ze._deltaLastValue})),g(Je)?Re.transition().duration(Je.duration).ease(Je.easing).tween("text",function(){var Ke=p.select(this),ut=it(me[0]),xt=ze._deltaLastValue,gt=Rt(ze.delta.valueformat,Ne,xt,ut),Pt=u(xt,ut);return ze._deltaLastValue=ut,function(ct){Ke.text(ke(Pt(ct),gt)),Ke.call(m.fill,De({delta:Pt(ct)}))}}).each("end",function(){Ie(),Ye&&Ye()}).each("interrupt",function(){Ie(),Ye&&Ye()}):Ie(),Se=T(ke(it(me[0]),Ne),ze.delta.font,Be,Te),Re}(),at+=ze.delta.position+ze.delta.font.size+ze.delta.font.family+ze.delta.valueformat,at+=ze.delta.increasing.symbol+ze.delta.decreasing.symbol,Pe=Se),ze._hasNumber&&(function(){var Ze=_(Te,{tickformat:ze.number.valueformat},ze._range);Ze.setScale(),i.prepTicks(Ze);var Ne=function(Ie){return i.tickText(Ze,Ie).text},it=ze.number.suffix,ke=ze.number.prefix,De=nt.select("text.number");function Re(){var Ie="number"==typeof me[0].y?ke+Ne(me[0].y)+it:"-";De.text(Ie).call(r.font,ze.number.font).call(s.convertToTspans,Te)}g(Je)?De.transition().duration(Je.duration).ease(Je.easing).each("end",function(){Re(),Ye&&Ye()}).each("interrupt",function(){Re(),Ye&&Ye()}).attrTween("text",function(){var Ie=p.select(this),Ke=u(me[0].lastY,me[0].y);ze._lastValue=me[0].y;var ut=Rt(ze.number.valueformat,Ne,me[0].lastY,me[0].y);return function(xt){Ie.text(ke+ut(Ke(xt))+it)}}):Re(),we=T(ke+Ne(me[0].y)+it,ze.number.font,Be,Te)}(),at+=ze.number.font.size+ze.number.font.family+ze.number.valueformat+ze.number.suffix+ze.number.prefix,Pe=we),ze._hasDelta&&ze._hasNumber){var rt,St,Xt=[(we.left+we.right)/2,(we.top+we.bottom)/2],lr=[(Se.left+Se.right)/2,(Se.top+Se.bottom)/2],Ue=.75*ze.delta.font.size;"left"===ze.delta.position&&(rt=E(ze,"deltaPos",0,-1*(we.width*o[ze.align]+Se.width*(1-o[ze.align])+Ue),at,Math.min),St=Xt[1]-lr[1],Pe={width:we.width+Se.width+Ue,height:Math.max(we.height,Se.height),left:Se.left+rt,right:we.right,top:Math.min(we.top,Se.top+St),bottom:Math.max(we.bottom,Se.bottom+St)}),"right"===ze.delta.position&&(rt=E(ze,"deltaPos",0,we.width*(1-o[ze.align])+Se.width*o[ze.align]+Ue,at,Math.max),St=Xt[1]-lr[1],Pe={width:we.width+Se.width+Ue,height:Math.max(we.height,Se.height),left:we.left,right:Se.right+rt,top:Math.min(we.top,Se.top+St),bottom:Math.max(we.bottom,Se.bottom+St)}),"bottom"===ze.delta.position&&(rt=null,St=Se.height,Pe={width:Math.max(we.width,Se.width),height:we.height+Se.height,left:Math.min(we.left,Se.left),right:Math.max(we.right,Se.right),top:we.bottom-we.height,bottom:we.bottom+Se.height}),"top"===ze.delta.position&&(rt=null,St=we.top,Pe={width:Math.max(we.width,Se.width),height:we.height+Se.height,left:Math.min(we.left,Se.left),right:Math.max(we.right,Se.right),top:we.bottom-we.height-Se.height,bottom:we.bottom}),Et.attr({dx:rt,dy:St})}(ze._hasNumber||ze._hasDelta)&&nt.attr("transform",function(){var Ne,Ze=Ae.numbersScaler(Pe),it=E(ze,"numbersScale",1,Ze[0],at+=Ze[2],Math.min);ze._scaleNumbers||(it=1),ze._numbersTop=it*Pe.top+(Ne=ze._isAngular?tt-it*Pe.bottom:tt-it*(Pe.top+Pe.bottom)/2);var ke=Pe[Oe];"center"===Oe&&(ke=(Pe.left+Pe.right)/2);var De=He-it*ke;return De=E(ze,"numbersTranslate",0,De,at,Math.max),n(De,Ne)+e(it)})})(k,te,B,{numbersX:U,numbersY:G,numbersScaler:X,transitionOpts:D,onComplete:C}),R&&(Z={range:W.gauge.axis.range,color:W.gauge.bgcolor,line:{color:W.gauge.bordercolor,width:0},thickness:1},q={range:W.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:W.gauge.bordercolor,width:W.gauge.borderwidth},thickness:1});var le=te.selectAll("g.angular").data(N?B:[]);le.exit().remove();var de=te.selectAll("g.angularaxis").data(N?B:[]);de.exit().remove(),N&&function(Te,he,me,Ae){var we,Se,Pe,ze,He=me[0].trace,tt=Ae.size,Oe=Ae.radius,Be=Ae.innerRadius,Je=Ae.gaugeBg,Ye=Ae.gaugeOutline,nt=[tt.l+tt.w/2,tt.t+tt.h/2+Oe/2],ft=Ae.gauge,dt=Ae.layer,Rt=Ae.transitionOpts,Et=Ae.onComplete,at=Math.PI/2;function rt(Ft){var Qe=He.gauge.axis.range[0],yt=(Ft-Qe)/(He.gauge.axis.range[1]-Qe)*Math.PI-at;return yt<-at?-at:yt>at?at:yt}function St(Ft){return p.svg.arc().innerRadius((Be+Oe)/2-Ft/2*(Oe-Be)).outerRadius((Be+Oe)/2+Ft/2*(Oe-Be)).startAngle(-at)}function Xt(Ft){Ft.attr("d",function(Qe){return St(Qe.thickness).startAngle(rt(Qe.range[0])).endAngle(rt(Qe.range[1]))()})}ft.enter().append("g").classed("angular",!0),ft.attr("transform",n(nt[0],nt[1])),dt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),dt.selectAll("g.xangularaxistick,path,text").remove(),(we=_(Te,He.gauge.axis)).type="linear",we.range=He.gauge.axis.range,we._id="xangularaxis",we.ticklabeloverflow="allow",we.setScale();var lr=function(Ft){return(we.range[0]-Ft.x)/(we.range[1]-we.range[0])*Math.PI+Math.PI},Ue={},Ze=i.makeLabelFns(we,0).labelStandoff;Ue.xFn=function(Ft){var Qe=lr(Ft);return Math.cos(Qe)*Ze},Ue.yFn=function(Ft){var Qe=lr(Ft),yt=Math.sin(Qe)>0?.2:1;return-Math.sin(Qe)*(Ze+Ft.fontSize*yt)+Math.abs(Math.cos(Qe))*(Ft.fontSize*a)},Ue.anchorFn=function(Ft){var Qe=lr(Ft),yt=Math.cos(Qe);return Math.abs(yt)<.1?"middle":yt>0?"start":"end"},Ue.heightFn=function(Ft,Qe,yt){var Nt=lr(Ft);return-.5*(1+Math.sin(Nt))*yt};var Ne=function(Ft){return n(nt[0]+Oe*Math.cos(Ft),nt[1]-Oe*Math.sin(Ft))};Pe=function(Ft){return Ne(lr(Ft))},Se=i.calcTicks(we),ze=i.getTickSigns(we)[2],we.visible&&(i.drawTicks(Te,we,{vals:Se,layer:dt,path:"M"+(ze="inside"===we.ticks?-1:1)*((we.linewidth||1)/2)+",0h"+ze*we.ticklen,transFn:function(Ft){var Qe=lr(Ft);return Ne(Qe)+"rotate("+-t(Qe)+")"}}),i.drawLabels(Te,we,{vals:Se,layer:dt,transFn:Pe,labelFns:Ue}));var ke=[Je].concat(He.gauge.steps),De=ft.selectAll("g.bg-arc").data(ke);De.enter().append("g").classed("bg-arc",!0).append("path"),De.select("path").call(Xt).call(w),De.exit().remove();var Re=St(He.gauge.bar.thickness),Ie=ft.selectAll("g.value-arc").data([He.gauge.bar]);Ie.enter().append("g").classed("value-arc",!0).append("path");var ut,xt,gt,Ke=Ie.select("path");g(Rt)?(Ke.transition().duration(Rt.duration).ease(Rt.easing).each("end",function(){Et&&Et()}).each("interrupt",function(){Et&&Et()}).attrTween("d",(ut=Re,xt=rt(me[0].lastY),gt=rt(me[0].y),function(){var Ft=v(xt,gt);return function(Qe){return ut.endAngle(Ft(Qe))()}})),He._lastValue=me[0].y):Ke.attr("d","number"==typeof me[0].y?Re.endAngle(rt(me[0].y)):"M0,0Z"),Ke.call(w),Ie.exit().remove(),ke=[];var Pt=He.gauge.threshold.value;(Pt||0===Pt)&&ke.push({range:[Pt,Pt],color:He.gauge.threshold.color,line:{color:He.gauge.threshold.line.color,width:He.gauge.threshold.line.width},thickness:He.gauge.threshold.thickness});var ct=ft.selectAll("g.threshold-arc").data(ke);ct.enter().append("g").classed("threshold-arc",!0).append("path"),ct.select("path").call(Xt).call(w),ct.exit().remove();var zt=ft.selectAll("g.gauge-outline").data([Ye]);zt.enter().append("g").classed("gauge-outline",!0).append("path"),zt.select("path").call(Xt).call(w),zt.exit().remove()}(k,0,B,{radius:re,innerRadius:ne,gauge:le,layer:de,size:j,gaugeBg:Z,gaugeOutline:q,transitionOpts:D,onComplete:C});var ve=te.selectAll("g.bullet").data(V?B:[]);ve.exit().remove();var _e=te.selectAll("g.bulletaxis").data(V?B:[]);_e.exit().remove(),V&&function(Te,he,me,Ae){var we,Se,Pe,ze,He,tt=me[0].trace,Oe=Ae.gauge,Be=Ae.layer,Je=Ae.gaugeBg,Ye=Ae.gaugeOutline,nt=Ae.size,ft=tt.domain,dt=Ae.transitionOpts,Rt=Ae.onComplete;Oe.enter().append("g").classed("bullet",!0),Oe.attr("transform",n(nt.l,nt.t)),Be.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Be.selectAll("g.xbulletaxistick,path,text").remove();var Et=nt.h,at=tt.gauge.bar.thickness*Et,rt=ft.x[0],St=ft.x[0]+(ft.x[1]-ft.x[0])*(tt._hasNumber||tt._hasDelta?1-f.bulletNumberDomainSize:1);function Xt(De){De.attr("width",function(Re){return Math.max(0,we.c2p(Re.range[1])-we.c2p(Re.range[0]))}).attr("x",function(Re){return we.c2p(Re.range[0])}).attr("y",function(Re){return.5*(1-Re.thickness)*Et}).attr("height",function(Re){return Re.thickness*Et})}(we=_(Te,tt.gauge.axis))._id="xbulletaxis",we.domain=[rt,St],we.setScale(),Se=i.calcTicks(we),Pe=i.makeTransTickFn(we),ze=i.getTickSigns(we)[2],He=nt.t+nt.h,we.visible&&(i.drawTicks(Te,we,{vals:"inside"===we.ticks?i.clipEnds(we,Se):Se,layer:Be,path:i.makeTickPath(we,He,ze),transFn:Pe}),i.drawLabels(Te,we,{vals:Se,layer:Be,transFn:Pe,labelFns:i.makeLabelFns(we,He)}));var lr=[Je].concat(tt.gauge.steps),Ue=Oe.selectAll("g.bg-bullet").data(lr);Ue.enter().append("g").classed("bg-bullet",!0).append("rect"),Ue.select("rect").call(Xt).call(w),Ue.exit().remove();var Ze=Oe.selectAll("g.value-bullet").data([tt.gauge.bar]);Ze.enter().append("g").classed("value-bullet",!0).append("rect"),Ze.select("rect").attr("height",at).attr("y",(Et-at)/2).call(w),g(dt)?Ze.select("rect").transition().duration(dt.duration).ease(dt.easing).each("end",function(){Rt&&Rt()}).each("interrupt",function(){Rt&&Rt()}).attr("width",Math.max(0,we.c2p(Math.min(tt.gauge.axis.range[1],me[0].y)))):Ze.select("rect").attr("width","number"==typeof me[0].y?Math.max(0,we.c2p(Math.min(tt.gauge.axis.range[1],me[0].y))):0),Ze.exit().remove();var Ne=me.filter(function(){return tt.gauge.threshold.value||0===tt.gauge.threshold.value}),it=Oe.selectAll("g.threshold-bullet").data(Ne);it.enter().append("g").classed("threshold-bullet",!0).append("line"),it.select("line").attr("x1",we.c2p(tt.gauge.threshold.value)).attr("x2",we.c2p(tt.gauge.threshold.value)).attr("y1",(1-tt.gauge.threshold.thickness)/2*Et).attr("y2",(1-(1-tt.gauge.threshold.thickness)/2)*Et).call(m.stroke,tt.gauge.threshold.line.color).style("stroke-width",tt.gauge.threshold.line.width),it.exit().remove();var ke=Oe.selectAll("g.gauge-outline").data([Ye]);ke.enter().append("g").classed("gauge-outline",!0).append("rect"),ke.select("rect").call(Xt).call(w),ke.exit().remove()}(k,0,B,{gauge:ve,layer:_e,size:j,gaugeBg:Z,gaugeOutline:q,transitionOpts:D,onComplete:C});var be=te.selectAll("text.title").data(B);be.exit().remove(),be.enter().append("text").classed("title",!0),be.attr("text-anchor",function(){return V?d.right:d[W.title.align]}).text(W.title.text).call(r.font,W.title.font).call(s.convertToTspans,k),be.attr("transform",function(){var Te,he=j.l+j.w*o[W.title.align],me=f.titlePadding,Ae=r.bBox(be.node());return R?(N&&(Te=W.gauge.axis.visible?r.bBox(de.node()).top-me-Ae.bottom:j.t+j.h/2-re/2-Ae.bottom-me),V&&(Te=G-(Ae.top+Ae.bottom)/2,he=j.l-f.bulletPadding*j.w)):Te=W._numbersTop-me-Ae.bottom,n(he,Te)})})}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":857,"@plotly/d3":58,"d3-interpolate":116}],861:[function(x,Q,K){"use strict";var p=x("../../components/colorscale/attributes"),v=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,u=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../mesh3d/attributes"),e=x("../../plots/attributes"),n=x("../../lib/extend").extendFlat,t=x("../../plot_api/edit_types").overrideAll,a=Q.exports=t(n({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:u(),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),valuehoverformat:v("value",1),showlegend:n({},e.showlegend,{dflt:!1})},p("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:y.opacity,lightposition:y.lightposition,lighting:y.lighting,flatshading:y.flatshading,contour:y.contour,hoverinfo:n({},e.hoverinfo)}),"calc","nested");a.flatshading.dflt=!0,a.lighting.facenormalsepsilon.dflt=0,a.x.editType=a.y.editType=a.z.editType=a.value.editType="calc+clearAxisTypes",a.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":866}],862:[function(x,Q,K){"use strict";var p=x("../../components/colorscale/calc"),v=x("../streamtube/calc").processGrid,u=x("../streamtube/calc").filter;Q.exports=function(y,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=u(e.x,e._len),e._y=u(e.y,e._len),e._z=u(e.z,e._len),e._value=u(e.value,e._len);var n=v(e);e._gridFill=n.fill,e._Xs=n.Xs,e._Ys=n.Ys,e._Zs=n.Zs,e._len=n.len;for(var t=1/0,a=-1/0,r=0;r<e._len;r++){var f=e._value[r];t=Math.min(t,f),a=Math.max(a,f)}e._minValues=t,e._maxValues=a,e._vMin=null==e.isomin?t:e.isomin,e._vMax=void 0===e.isomax||null===e.isomin?a:e.isomax,p(y,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1040}],863:[function(x,Q,K){"use strict";var p=x("../../../stackgl_modules").gl_mesh3d,v=x("../../lib/gl_format_color").parseColorScale,u=x("../../lib/str2rgbarray"),y=x("../../components/colorscale").extractOpts,e=x("../../plots/gl3d/zip3"),n=function(s,i){for(var l=i.length-1;l>0;l--){var c=Math.min(i[l],i[l-1]),h=Math.max(i[l],i[l-1]);if(h>c&&c<s&&s<=h)return{id:l,distRatio:(h-s)/(h-c)}}return{id:0,distRatio:0}};function t(s,i,l){this.scene=s,this.uid=l,this.mesh=i,this.name="",this.data=null,this.showContour=!1}var a=t.prototype;a.handlePick=function(s){if(s.object===this.mesh){var i=s.data.index,c=this.data._meshY[i],h=this.data._meshZ[i],m=this.data._Ys.length,d=this.data._Zs.length,o=n(this.data._meshX[i],this.data._Xs).id,b=n(c,this.data._Ys).id,g=n(h,this.data._Zs).id,w=s.index=g+d*b+d*m*o;s.traceCoordinate=[this.data._meshX[w],this.data._meshY[w],this.data._meshZ[w],this.data._value[w]];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&void 0!==_[w]?s.textLabel=_[w]:_&&(s.textLabel=_),!0}},a.update=function(s){var i=this.scene,l=i.fullSceneLayout;function c(d,o,b,g){return o.map(function(w){return d.d2l(w,0,g)*b})}this.data=f(s);var h={positions:e(c(l.xaxis,s._meshX,i.dataScale[0],s.xcalendar),c(l.yaxis,s._meshY,i.dataScale[1],s.ycalendar),c(l.zaxis,s._meshZ,i.dataScale[2],s.zcalendar)),cells:e(s._meshI,s._meshJ,s._meshK),lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,contourEnable:s.contour.show,contourColor:u(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},m=y(s);h.vertexIntensity=s._meshIntensity,h.vertexIntensityBounds=[m.min,m.max],h.colormap=v(s),this.mesh.update(h)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function f(s){s._meshI=[],s._meshJ=[],s._meshK=[];var i,l,c,h,m,d,o,b=s.surface.show,g=s.spaceframe.show,w=s.surface.fill,_=s.spaceframe.fill,A=!1,T=!1,E=0,k=s._Xs,O=s._Ys,D=s._Zs,S=k.length,C=O.length,z=D.length,B=r.indexOf(s._gridFill.replace(/-/g,"").replace(/\+/g,"")),U=function(Oe,Be,Je){switch(B){case 5:return Je+z*Be+z*C*Oe;case 4:return Je+z*Oe+z*S*Be;case 3:return Be+C*Je+C*z*Oe;case 2:return Be+C*Oe+C*S*Je;case 1:return Oe+S*Je+S*z*Be;default:return Oe+S*Be+S*C*Je}},G=s._minValues,X=s._maxValues,Z=s._vMin,q=s._vMax;function W(Oe,Be,Je){for(var Ye=d.length,nt=l;nt<Ye;nt++)if(Oe===c[nt]&&Be===h[nt]&&Je===m[nt])return nt;return-1}function te(){l=i}function R(){c=[],h=[],m=[],d=[],i=0,te()}function N(Oe,Be,Je,Ye){return c.push(Oe),h.push(Be),m.push(Je),d.push(Ye),++i-1}function V(Oe,Be,Je){for(var Ye=[],nt=0;nt<Oe.length;nt++)Ye[nt]=Oe[nt]*(1-Je)+Je*Be[nt];return Ye}function ee(Oe){o=Oe}function j(Oe,Be){return"all"===Oe||null===Oe||Oe.indexOf(Be)>-1}function J(Oe,Be){return null===Oe?Be:Oe}function $(Oe,Be,Je){te();var nt,ft,it,ke,De,Re,Ie,Ke,ut,xt,gt,Pt,ct,zt,Ft,dt=[Be],Rt=[Je];if(o>=1)dt=[Be],Rt=[Je];else if(o>0){var Et=(ke=Je,xt=V(Ke=function(Qe,yt,Nt){for(var Yt=[],rr=0;rr<Qe.length;rr++)Yt[rr]=(Qe[rr]+yt[rr]+Nt[rr])/3;return Yt}(De=(it=Be)[0],Re=it[1],Ie=it[2]),De,ut=Math.sqrt(1-o)),{xyzv:[[De,Re,gt=V(Ke,Re,ut)],[gt,xt,De],[Re,Ie,Pt=V(Ke,Ie,ut)],[Pt,gt,Re],[Ie,De,xt],[xt,Pt,Ie]],abc:[[ct=ke[0],zt=ke[1],-1],[-1,-1,ct],[zt,Ft=ke[2],-1],[-1,-1,zt],[Ft,ct,-1],[-1,-1,Ft]]});dt=Et.xyzv,Rt=Et.abc}for(var at=0;at<dt.length;at++){Be=dt[at],Je=Rt[at];for(var rt=[],St=0;St<3;St++){var Xt=Be[St][0],lr=Be[St][1],Ue=Be[St][2],Ze=Be[St][3],Ne=Je[St]>-1?Je[St]:W(Xt,lr,Ue);rt[St]=Ne>-1?Ne:N(Xt,lr,Ue,J(Oe,Ze))}nt=rt[1],ft=rt[2],s._meshI.push(rt[0]),s._meshJ.push(nt),s._meshK.push(ft),++E}}function re(Oe,Be,Je,Ye){var nt=Oe[3];nt<Je&&(nt=Je),nt>Ye&&(nt=Ye);for(var ft=(Oe[3]-nt)/(Oe[3]-Be[3]+1e-9),dt=[],Rt=0;Rt<4;Rt++)dt[Rt]=(1-ft)*Oe[Rt]+ft*Be[Rt];return dt}function ne(Oe,Be,Je){return Oe>=Be&&Oe<=Je}function se(Oe){var Be=.001*(q-Z);return Oe>=Z-Be&&Oe<=q+Be}function ie(Oe){for(var Be=[],Je=0;Je<4;Je++){var Ye=Oe[Je];Be.push([s._x[Ye],s._y[Ye],s._z[Ye],s._value[Ye]])}return Be}function ue(Oe,Be,Je,Ye,nt,ft){ft||(ft=1),Je=[-1,-1,-1];var dt=!1,Rt=[ne(Be[0][3],Ye,nt),ne(Be[1][3],Ye,nt),ne(Be[2][3],Ye,nt)];if(!Rt[0]&&!Rt[1]&&!Rt[2])return!1;var Et=function(rt,St,Xt){return se(St[0][3])&&se(St[1][3])&&se(St[2][3])?($(rt,St,Xt),!0):ft<3&&ue(rt,St,Xt,Z,q,++ft)};if(Rt[0]&&Rt[1]&&Rt[2])return Et(Oe,Be,Je)||dt;var at=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(rt){if(Rt[rt[0]]&&Rt[rt[1]]&&!Rt[rt[2]]){var St=Be[rt[0]],Xt=Be[rt[1]],lr=Be[rt[2]],Ue=re(lr,St,Ye,nt),Ze=re(lr,Xt,Ye,nt);dt=Et(Oe,[Ze,Ue,St],[-1,-1,Je[rt[0]]])||dt,dt=Et(Oe,[St,Xt,Ze],[Je[rt[0]],Je[rt[1]],-1])||dt,at=!0}}),at||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(rt){if(Rt[rt[0]]&&!Rt[rt[1]]&&!Rt[rt[2]]){var St=Be[rt[0]],lr=Be[rt[2]],Ue=re(Be[rt[1]],St,Ye,nt),Ze=re(lr,St,Ye,nt);dt=Et(Oe,[Ze,Ue,St],[-1,-1,Je[rt[0]]])||dt,at=!0}}),dt}function le(Oe,Be,Je,Ye){var Et,at,rt,St,nt=!1,ft=ie(Be),dt=[ne(ft[0][3],Je,Ye),ne(ft[1][3],Je,Ye),ne(ft[2][3],Je,Ye),ne(ft[3][3],Je,Ye)];if(!(dt[0]||dt[1]||dt[2]||dt[3]))return nt;if(dt[0]&&dt[1]&&dt[2]&&dt[3])return T&&(Et=Oe,at=ft,rt=Be,(St=function(Xt,lr,Ue){$(Et,[at[Xt],at[lr],at[Ue]],[rt[Xt],rt[lr],rt[Ue]])})(0,1,2),St(3,0,1),St(2,3,0),nt=void St(1,2,3)||nt),nt;var Rt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Et){if(dt[Et[0]]&&dt[Et[1]]&&dt[Et[2]]&&!dt[Et[3]]){var at=ft[Et[0]],rt=ft[Et[1]],St=ft[Et[2]],Xt=ft[Et[3]];if(T)nt=$(Oe,[at,rt,St],[Be[Et[0]],Be[Et[1]],Be[Et[2]]])||nt;else{var lr=re(Xt,at,Je,Ye),Ue=re(Xt,rt,Je,Ye),Ze=re(Xt,St,Je,Ye);nt=$(null,[lr,Ue,Ze],[-1,-1,-1])||nt}Rt=!0}}),Rt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Et){if(dt[Et[0]]&&dt[Et[1]]&&!dt[Et[2]]&&!dt[Et[3]]){var at=ft[Et[0]],rt=ft[Et[1]],St=ft[Et[2]],Xt=ft[Et[3]],lr=re(St,at,Je,Ye),Ue=re(St,rt,Je,Ye),Ze=re(Xt,rt,Je,Ye),Ne=re(Xt,at,Je,Ye);T?(nt=$(Oe,[at,Ne,lr],[Be[Et[0]],-1,-1])||nt,nt=$(Oe,[rt,Ue,Ze],[Be[Et[1]],-1,-1])||nt):(null,ke=[lr,Ue,Ze,Ne],De=[-1,-1,-1,-1],(Re=function(Ie,Ke,ut){$(null,[ke[Ie],ke[Ke],ke[ut]],[De[Ie],De[Ke],De[ut]])})(0,1,2),nt=void Re(2,3,0)||nt),Rt=!0}var ke,De,Re}),Rt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Et){if(dt[Et[0]]&&!dt[Et[1]]&&!dt[Et[2]]&&!dt[Et[3]]){var at=ft[Et[0]],St=ft[Et[2]],Xt=ft[Et[3]],lr=re(ft[Et[1]],at,Je,Ye),Ue=re(St,at,Je,Ye),Ze=re(Xt,at,Je,Ye);T?(nt=$(Oe,[at,lr,Ue],[Be[Et[0]],-1,-1])||nt,nt=$(Oe,[at,Ue,Ze],[Be[Et[0]],-1,-1])||nt,nt=$(Oe,[at,Ze,lr],[Be[Et[0]],-1,-1])||nt):nt=$(null,[lr,Ue,Ze],[-1,-1,-1])||nt,Rt=!0}})),nt}function de(Oe,Be,Je,Ye,nt,ft,dt,Rt,Et,at,rt){var St=!1;return A&&(j(Oe,"A")&&(St=le(null,[Be,Je,Ye,ft],at,rt)||St),j(Oe,"B")&&(St=le(null,[Je,Ye,nt,Et],at,rt)||St),j(Oe,"C")&&(St=le(null,[Je,ft,dt,Et],at,rt)||St),j(Oe,"D")&&(St=le(null,[Ye,ft,Rt,Et],at,rt)||St),j(Oe,"E")&&(St=le(null,[Je,Ye,ft,Et],at,rt)||St)),T&&(St=le(Oe,[Je,Ye,ft,Et],at,rt)||St),St}function ve(Oe,Be,Je,Ye,nt,ft,dt,Rt){return[!0===Rt[0]||ue(Oe,ie([Be,Je,Ye]),[Be,Je,Ye],ft,dt),!0===Rt[1]||ue(Oe,ie([Ye,nt,Be]),[Ye,nt,Be],ft,dt)]}function _e(Oe,Be,Je,Ye,nt,ft,dt,Rt,Et){return Rt?ve(Oe,Be,Je,nt,Ye,ft,dt,Et):ve(Oe,Je,nt,Ye,Be,ft,dt,Et)}function be(Oe,Be,Je,Ye,nt,ft,dt){var Rt,Et,at,rt,St=!1,Xt=function(){St=ue(Oe,[Rt,Et,at],[-1,-1,-1],nt,ft)||St,St=ue(Oe,[at,rt,Rt],[-1,-1,-1],nt,ft)||St},lr=dt[0],Ue=dt[1],Ze=dt[2];return lr&&(Rt=V(ie([U(Be,Je-0,Ye-0)])[0],ie([U(Be-1,Je-0,Ye-0)])[0],lr),Et=V(ie([U(Be,Je-0,Ye-1)])[0],ie([U(Be-1,Je-0,Ye-1)])[0],lr),at=V(ie([U(Be,Je-1,Ye-1)])[0],ie([U(Be-1,Je-1,Ye-1)])[0],lr),rt=V(ie([U(Be,Je-1,Ye-0)])[0],ie([U(Be-1,Je-1,Ye-0)])[0],lr),Xt()),Ue&&(Rt=V(ie([U(Be-0,Je,Ye-0)])[0],ie([U(Be-0,Je-1,Ye-0)])[0],Ue),Et=V(ie([U(Be-0,Je,Ye-1)])[0],ie([U(Be-0,Je-1,Ye-1)])[0],Ue),at=V(ie([U(Be-1,Je,Ye-1)])[0],ie([U(Be-1,Je-1,Ye-1)])[0],Ue),rt=V(ie([U(Be-1,Je,Ye-0)])[0],ie([U(Be-1,Je-1,Ye-0)])[0],Ue),Xt()),Ze&&(Rt=V(ie([U(Be-0,Je-0,Ye)])[0],ie([U(Be-0,Je-0,Ye-1)])[0],Ze),Et=V(ie([U(Be-0,Je-1,Ye)])[0],ie([U(Be-0,Je-1,Ye-1)])[0],Ze),at=V(ie([U(Be-1,Je-1,Ye)])[0],ie([U(Be-1,Je-1,Ye-1)])[0],Ze),rt=V(ie([U(Be-1,Je-0,Ye)])[0],ie([U(Be-1,Je-0,Ye-1)])[0],Ze),Xt()),St}function Te(Oe,Be,Je,Ye,nt,ft,dt,Rt,Et,at,rt,St){var Xt=Oe;return St?(A&&"even"===Oe&&(Xt=null),de(Xt,Be,Je,Ye,nt,ft,dt,Rt,Et,at,rt)):(A&&"odd"===Oe&&(Xt=null),de(Xt,Et,Rt,dt,ft,nt,Ye,Je,Be,at,rt))}function he(Oe,Be,Je,Ye,nt){for(var ft=[],dt=0,Rt=0;Rt<Be.length;Rt++)for(var Et=Be[Rt],at=1;at<z;at++)for(var rt=1;rt<C;rt++)ft.push(_e(Oe,U(Et,rt-1,at-1),U(Et,rt-1,at),U(Et,rt,at-1),U(Et,rt,at),Je,Ye,(Et+rt+at)%2,nt&&nt[dt]?nt[dt]:[])),dt++;return ft}function me(Oe,Be,Je,Ye,nt){for(var ft=[],dt=0,Rt=0;Rt<Be.length;Rt++)for(var Et=Be[Rt],at=1;at<S;at++)for(var rt=1;rt<z;rt++)ft.push(_e(Oe,U(at-1,Et,rt-1),U(at,Et,rt-1),U(at-1,Et,rt),U(at,Et,rt),Je,Ye,(at+Et+rt)%2,nt&&nt[dt]?nt[dt]:[])),dt++;return ft}function Ae(Oe,Be,Je,Ye,nt){for(var ft=[],dt=0,Rt=0;Rt<Be.length;Rt++)for(var Et=Be[Rt],at=1;at<C;at++)for(var rt=1;rt<S;rt++)ft.push(_e(Oe,U(rt-1,at-1,Et),U(rt-1,at,Et),U(rt,at-1,Et),U(rt,at,Et),Je,Ye,(rt+at+Et)%2,nt&&nt[dt]?nt[dt]:[])),dt++;return ft}function we(Oe,Be,Je){for(var Ye=1;Ye<z;Ye++)for(var nt=1;nt<C;nt++)for(var ft=1;ft<S;ft++)Te(Oe,U(ft-1,nt-1,Ye-1),U(ft-1,nt-1,Ye),U(ft-1,nt,Ye-1),U(ft-1,nt,Ye),U(ft,nt-1,Ye-1),U(ft,nt-1,Ye),U(ft,nt,Ye-1),U(ft,nt,Ye),Be,Je,(ft+nt+Ye)%2)}function Se(Oe,Be,Je){A=!0,we(Oe,Be,Je),A=!1}function Pe(Oe,Be,Je,Ye,nt,ft){for(var dt=[],Et=0;Et<Be.length;Et++)for(var at=Be[Et],rt=1;rt<z;rt++)for(var St=1;St<C;St++)dt.push(be(Oe,at,St,rt,Je,Ye,nt[Et]));return dt}function ze(Oe,Be,Je,Ye,nt,ft){for(var dt=[],Et=0;Et<Be.length;Et++)for(var at=Be[Et],rt=1;rt<S;rt++)for(var St=1;St<z;St++)dt.push(be(Oe,rt,at,St,Je,Ye,nt[Et]));return dt}function He(Oe,Be,Je,Ye,nt,ft){for(var dt=[],Et=0;Et<Be.length;Et++)for(var at=Be[Et],rt=1;rt<C;rt++)for(var St=1;St<S;St++)dt.push(be(Oe,St,rt,at,Je,Ye,nt[Et]));return dt}function tt(Oe,Be){for(var Je=[],Ye=Oe;Ye<Be;Ye++)Je.push(Ye);return Je}return function(){if(R(),function(){for(var Rt=0;Rt<S;Rt++)for(var Et=0;Et<C;Et++)for(var at=0;at<z;at++){var rt=U(Rt,Et,at);N(s._x[rt],s._y[rt],s._z[rt],s._value[rt])}}(),g&&_&&(ee(_),T=!0,we(null,Z,q),T=!1),b&&w){ee(w);for(var Oe=s.surface.pattern,Be=s.surface.count,Je=0;Je<Be;Je++){var Ye=1===Be?.5:Je/(Be-1),nt=(1-Ye)*Z+Ye*q,ft=Math.abs(nt-G)>Math.abs(nt-X)?[G,nt]:[nt,X];Se(Oe,ft[0],ft[1])}}var dt=[[Math.min(Z,X),Math.max(Z,X)],[Math.min(G,q),Math.max(G,q)]];["x","y","z"].forEach(function(Rt){for(var Et=[],at=0;at<dt.length;at++){var rt=0,St=dt[at][0],Xt=dt[at][1],lr=s.slices[Rt];if(lr.show&&lr.fill){ee(lr.fill);var Ue=[],Ze=[],Ne=[];if(lr.locations.length)for(var it=0;it<lr.locations.length;it++){var ke=n(lr.locations[it],"x"===Rt?k:"y"===Rt?O:D);0===ke.distRatio?Ue.push(ke.id):ke.id>0&&(Ze.push(ke.id),Ne.push("x"===Rt?[ke.distRatio,0,0]:"y"===Rt?[0,ke.distRatio,0]:[0,0,ke.distRatio]))}else Ue=tt(1,"x"===Rt?S-1:"y"===Rt?C-1:z-1);Ze.length>0&&(Et[rt]="x"===Rt?Pe(null,Ze,St,Xt,Ne):"y"===Rt?ze(null,Ze,St,Xt,Ne):He(null,Ze,St,Xt,Ne),rt++),Ue.length>0&&(Et[rt]="x"===Rt?he(null,Ue,St,Xt,Et[rt]):"y"===Rt?me(null,Ue,St,Xt,Et[rt]):Ae(null,Ue,St,Xt,Et[rt]),rt++)}var De=s.caps[Rt];De.show&&De.fill&&(ee(De.fill),Et[rt]="x"===Rt?he(null,[0,S-1],St,Xt,Et[rt]):"y"===Rt?me(null,[0,C-1],St,Xt,Et[rt]):Ae(null,[0,z-1],St,Xt,Et[rt]),rt++)}}),0===E&&R(),s._meshX=c,s._meshY=h,s._meshZ=m,s._meshIntensity=d,s._Xs=k,s._Ys=O,s._Zs=D}(),s}Q.exports={findNearestOnAxis:n,generateIsoMeshes:f,createIsosurfaceTrace:function(s,i){var c=p({gl:s.glplot.gl}),h=new t(s,c,i.uid);return c._trace=h,h.update(i),s.glplot.add(c),h}}},{"../../../stackgl_modules":1119,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],864:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../registry"),u=x("./attributes"),y=x("../../components/colorscale/defaults");function e(n,t,a,r,f){var s=f("isomin"),i=f("isomax");null!=i&&null!=s&&s>i&&(t.isomin=null,t.isomax=null);var l=f("x"),c=f("y"),h=f("z"),m=f("value");l&&l.length&&c&&c.length&&h&&h.length&&m&&m.length?(v.getComponentMethod("calendars","handleTraceDefaults")(n,t,["x","y","z"],r),f("valuehoverformat"),["x","y","z"].forEach(function(d){f(d+"hoverformat");var o="caps."+d;f(o+".show")&&f(o+".fill");var b="slices."+d;f(b+".show")&&(f(b+".fill"),f(b+".locations"))}),f("spaceframe.show")&&f("spaceframe.fill"),f("surface.show")&&(f("surface.count"),f("surface.fill"),f("surface.pattern")),f("contour.show")&&(f("contour.color"),f("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(d){f(d)}),y(n,t,r,f,{prefix:"",cLetter:"c"}),t._length=null):t.visible=!1}Q.exports={supplyDefaults:function(n,t,a,r){e(n,t,0,r,function(f,s){return p.coerce(n,t,u,f,s)})},supplyIsoDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":861}],865:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults").supplyDefaults,calc:x("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:x("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":861,"./calc":862,"./convert":863,"./defaults":864}],866:[function(x,Q,K){"use strict";var p=x("../../components/colorscale/attributes"),v=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,u=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../surface/attributes"),e=x("../../plots/attributes"),n=x("../../lib/extend").extendFlat;Q.exports=n({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:u({editType:"calc"}),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},p("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:y.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:n({},y.contours.x.show,{}),color:y.contours.x.color,width:y.contours.x.width,editType:"calc"},lightposition:{x:n({},y.lightposition.x,{dflt:1e5}),y:n({},y.lightposition.y,{dflt:1e5}),z:n({},y.lightposition.z,{dflt:0}),editType:"calc"},lighting:n({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},y.lighting),hoverinfo:n({},e.hoverinfo,{editType:"calc"}),showlegend:n({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1056}],867:[function(x,Q,K){"use strict";var p=x("../../components/colorscale/calc");Q.exports=function(v,u){u.intensity&&p(v,u,{vals:u.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],868:[function(x,Q,K){"use strict";var p=x("../../../stackgl_modules").gl_mesh3d,v=x("../../../stackgl_modules").delaunay_triangulate,u=x("../../../stackgl_modules").alpha_shape,y=x("../../../stackgl_modules").convex_hull,e=x("../../lib/gl_format_color").parseColorScale,n=x("../../lib/str2rgbarray"),t=x("../../components/colorscale").extractOpts,a=x("../../plots/gl3d/zip3");function r(h,m,d){this.scene=h,this.uid=d,this.mesh=m,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var f=r.prototype;function s(h){for(var m=[],d=h.length,o=0;o<d;o++)m[o]=n(h[o]);return m}function i(h,m,d,o){for(var b=[],g=m.length,w=0;w<g;w++)b[w]=h.d2l(m[w],0,o)*d;return b}function l(h){for(var m=[],d=h.length,o=0;o<d;o++)m[o]=Math.round(h[o]);return m}function c(h,m){for(var d=h.length,o=0;o<d;o++)if(h[o]<=-.5||h[o]>=m-.5)return!1;return!0}f.handlePick=function(h){if(h.object===this.mesh){var m=h.index=h.data.index;h.traceCoordinate=h.data._cellCenter?h.data.dataCoordinate:[this.data.x[m],this.data.y[m],this.data.z[m]];var d=this.data.hovertext||this.data.text;return Array.isArray(d)&&void 0!==d[m]?h.textLabel=d[m]:d&&(h.textLabel=d),!0}},f.update=function(h){var m=this.scene,d=m.fullSceneLayout;this.data=h;var o,b=h.x.length,g=a(i(d.xaxis,h.x,m.dataScale[0],h.xcalendar),i(d.yaxis,h.y,m.dataScale[1],h.ycalendar),i(d.zaxis,h.z,m.dataScale[2],h.zcalendar));if(h.i&&h.j&&h.k){if(h.i.length!==h.j.length||h.j.length!==h.k.length||!c(h.i,b)||!c(h.j,b)||!c(h.k,b))return;o=a(l(h.i),l(h.j),l(h.k))}else o=0===h.alphahull?y(g):h.alphahull>0?u(h.alphahull,g):function(T,E){for(var k=["x","y","z"].indexOf(T),O=[],D=E.length,S=0;S<D;S++)O[S]=[E[S][(k+1)%3],E[S][(k+2)%3]];return v(O)}(h.delaunayaxis,g);var w={positions:g,cells:o,lightPosition:[h.lightposition.x,h.lightposition.y,h.lightposition.z],ambient:h.lighting.ambient,diffuse:h.lighting.diffuse,specular:h.lighting.specular,roughness:h.lighting.roughness,fresnel:h.lighting.fresnel,vertexNormalsEpsilon:h.lighting.vertexnormalsepsilon,faceNormalsEpsilon:h.lighting.facenormalsepsilon,opacity:h.opacity,contourEnable:h.contour.show,contourColor:n(h.contour.color).slice(0,3),contourWidth:h.contour.width,useFacetNormals:h.flatshading};if(h.intensity){var _=t(h);this.color="#fff";var A=h.intensitymode;w[A+"Intensity"]=h.intensity,w[A+"IntensityBounds"]=[_.min,_.max],w.colormap=e(h)}else h.vertexcolor?(this.color=h.vertexcolor[0],w.vertexColors=s(h.vertexcolor)):h.facecolor?(this.color=h.facecolor[0],w.cellColors=s(h.facecolor)):(this.color=h.color,w.meshColor=n(h.color));this.mesh.update(w)},f.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(h,m){var o=p({gl:h.glplot.gl}),b=new r(h,o,m.uid);return o._trace=b,b.update(m),h.glplot.add(o),b}},{"../../../stackgl_modules":1119,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],869:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../lib"),u=x("../../components/colorscale/defaults"),y=x("./attributes");Q.exports=function(e,n,t,a){function r(s,i){return v.coerce(e,n,y,s,i)}function f(s){var i=s.map(function(l){var c=r(l);return c&&v.isArrayOrTypedArray(c)?c:null});return i.every(function(l){return l&&l.length===i[0].length})&&i}f(["x","y","z"])?(f(["i","j","k"]),(!n.i||n.j&&n.k)&&(!n.j||n.k&&n.i)&&(!n.k||n.i&&n.j)?(p.getComponentMethod("calendars","handleTraceDefaults")(e,n,["x","y","z"],a),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(s){r(s)}),r("contour.show")&&(r("contour.color"),r("contour.width")),"intensity"in e?(r("intensity"),r("intensitymode"),u(e,n,a,r,{prefix:"",cLetter:"c"})):(n.showscale=!1,"facecolor"in e?r("facecolor"):"vertexcolor"in e?r("vertexcolor"):r("color",t)),r("text"),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),n._length=null):n.visible=!1):n.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":866}],870:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:x("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":866,"./calc":867,"./convert":868,"./defaults":869}],871:[function(x,Q,K){"use strict";var p=x("../../lib").extendFlat,v=x("../scatter/attributes"),u=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=x("../../components/drawing/attributes").dash,e=x("../../components/fx/attributes"),n=x("../../constants/delta.js"),t=n.INCREASING.COLOR,a=n.DECREASING.COLOR,r=v.line;function f(s){return{line:{color:p({},r.color,{dflt:s}),width:r.width,dash:y,editType:"style"},editType:"style"}}Q.exports={xperiod:v.xperiod,xperiod0:v.xperiod0,xperiodalignment:v.xperiodalignment,xhoverformat:u("x"),yhoverformat:u("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:p({},r.width,{}),dash:p({},y,{}),editType:"style"},increasing:f(t),decreasing:f(a),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:p({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":925}],872:[function(x,Q,K){"use strict";var p=x("../../lib"),v=p._,u=x("../../plots/cartesian/axes"),y=x("../../plots/cartesian/align_period"),e=x("../../constants/numerical").BADNUM;function n(a,r,f,s){return{o:a,h:r,l:f,c:s}}function t(a,r,f,s,i,l){for(var c=i.makeCalcdata(r,"open"),h=i.makeCalcdata(r,"high"),m=i.makeCalcdata(r,"low"),d=i.makeCalcdata(r,"close"),o=Array.isArray(r.text),b=Array.isArray(r.hovertext),g=!0,w=null,_=!!r.xperiodalignment,A=[],T=0;T<s.length;T++){var E=s[T],k=c[T],O=h[T],D=m[T],S=d[T];if(E!==e&&k!==e&&O!==e&&D!==e&&S!==e){S===k?null!==w&&S!==w&&(g=S>w):g=S>k,w=S;var C=l(k,O,D,S);C.pos=E,C.yc=(k+S)/2,C.i=T,C.dir=g?"increasing":"decreasing",C.x=C.pos,C.y=[D,O],_&&(C.orig_p=f[T]),o&&(C.tx=r.text[T]),b&&(C.htx=r.hovertext[T]),A.push(C)}else A.push({pos:E,empty:!0})}return r._extremes[i._id]=u.findExtremes(i,p.concat(m,h),{padded:!0}),A.length&&(A[0].t={labels:{open:v(a,"open:")+" ",high:v(a,"high:")+" ",low:v(a,"low:")+" ",close:v(a,"close:")+" "}}),A}Q.exports={calc:function(a,r){var f=u.getFromId(a,r.xaxis),s=u.getFromId(a,r.yaxis),i=function(d,o,b){var g=b._minDiff;if(!g){var w,_=d._fullData,A=[];for(g=1/0,w=0;w<_.length;w++){var T=_[w];if("ohlc"===T.type&&!0===T.visible&&T.xaxis===o._id){A.push(T);var E=o.makeCalcdata(T,"x");T._origX=E;var k=y(b,o,"x",E).vals;T._xcalc=k;var O=p.distinctVals(k).minDiff;O&&isFinite(O)&&(g=Math.min(g,O))}}for(g===1/0&&(g=1),w=0;w<A.length;w++)A[w]._minDiff=g}return g*b.tickwidth}(a,f,r),l=r._minDiff;r._minDiff=null;var c=r._origX;r._origX=null;var h=r._xcalc;r._xcalc=null;var m=t(a,r,c,h,s,n);return r._extremes[f._id]=u.findExtremes(f,h,{vpad:l/2}),m.length?(p.extendFlat(m[0].t,{wHover:l/2,tickLen:i}),m):[{t:{empty:!0}}]},calcCommon:t}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],873:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./ohlc_defaults"),u=x("../scatter/period_defaults"),y=x("./attributes");function e(n,t,a,r){a(r+".line.color"),a(r+".line.width",t.line.width),a(r+".line.dash",t.line.dash)}Q.exports=function(n,t,a,r){function f(s,i){return p.coerce(n,t,y,s,i)}v(n,t,f,r)?(u(n,t,r,f,{x:!0}),f("xhoverformat"),f("yhoverformat"),f("line.width"),f("line.dash"),e(0,t,f,"increasing"),e(0,t,f,"decreasing"),f("text"),f("hovertext"),f("tickwidth"),r._requestRangeslider[t.xaxis]=!0):t.visible=!1}},{"../../lib":503,"../scatter/period_defaults":945,"./attributes":871,"./ohlc_defaults":876}],874:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes"),v=x("../../lib"),u=x("../../components/fx"),y=x("../../components/color"),e=x("../../lib").fillText,n=x("../../constants/delta.js"),t={increasing:n.INCREASING.SYMBOL,decreasing:n.DECREASING.SYMBOL};function a(s,i,l,c){var h,m,d=s.cd,o=s.xa,b=d[0].trace,g=d[0].t,w=b.type,_="ohlc"===w?"l":"min",A="ohlc"===w?"h":"max",T=g.bPos||0,E=g.bdPos||g.tickLen,k=g.wHover,O=Math.min(1,E/Math.abs(o.r2c(o.range[1])-o.r2c(o.range[0])));function D(X){var Z=X.pos+T-i;return u.inbox(Z-k,Z+k,h)}function S(X){var Z=X[_],q=X[A];return Z===q||u.inbox(Z-l,q-l,h)}function C(X){return(D(X)+S(X))/2}h=s.maxHoverDistance-O,m=s.maxSpikeDistance-O;var z=u.getDistanceFunction(c,D,S,C);if(u.getClosest(d,z,s),!1===s.index)return null;var B=d[s.index];if(B.empty)return null;var U=b[B.dir],G=U.line.color;return s.color=y.opacity(G)&&U.line.width?G:U.fillcolor,s.x0=o.c2p(B.pos+T-E,!0),s.x1=o.c2p(B.pos+T+E,!0),s.xLabelVal=void 0!==B.orig_p?B.orig_p:B.pos,s.spikeDistance=C(B)*m/h,s.xSpike=o.c2p(B.pos,!0),s}function r(s,i,l,c){var h=s.cd,m=s.ya,d=h[0].trace,o=h[0].t,b=[],g=a(s,i,l,c);if(!g)return[];var w=h[g.index].hi||d.hoverinfo,_=w.split("+");if("all"!==w&&-1===_.indexOf("y"))return[];for(var A=["high","open","close","low"],T={},E=0;E<A.length;E++){var k,O=A[E],D=d[O][g.index],S=m.c2p(D,!0);D in T?(k=T[D]).yLabel+="<br>"+o.labels[O]+p.hoverLabelText(m,D,d.yhoverformat):((k=v.extendFlat({},g)).y0=k.y1=S,k.yLabelVal=D,k.yLabel=o.labels[O]+p.hoverLabelText(m,D,d.yhoverformat),k.name="",b.push(k),T[D]=k)}return b}function f(s,i,l,c){var h=s.cd,m=s.ya,d=h[0].trace,o=h[0].t,b=a(s,i,l,c);if(!b)return[];var g=h[b.index],w=b.index=g.i,_=g.dir;function A(C){return o.labels[C]+p.hoverLabelText(m,d[C][w],d.yhoverformat)}var T=g.hi||d.hoverinfo,E=T.split("+"),k="all"===T,O=k||-1!==E.indexOf("y"),D=k||-1!==E.indexOf("text"),S=O?[A("open"),A("high"),A("low"),A("close")+"  "+t[_]]:[];return D&&e(g,d,S),b.extraText=S.join("<br>"),b.y0=b.y1=m.c2p(g.yc,!0),[b]}Q.exports={hoverPoints:function(s,i,l,c){return s.cd[0].trace.hoverlabel.split?r(s,i,l,c):f(s,i,l,c)},hoverSplit:r,hoverOnPoints:f}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],875:[function(x,Q,K){"use strict";Q.exports={moduleType:"trace",name:"ohlc",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc").calc,plot:x("./plot"),style:x("./style"),hoverPoints:x("./hover").hoverPoints,selectPoints:x("./select")}},{"../../plots/cartesian":568,"./attributes":871,"./calc":872,"./defaults":873,"./hover":874,"./plot":877,"./select":878,"./style":879}],876:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../lib");Q.exports=function(u,y,e,n){var t=e("x"),a=e("open"),r=e("high"),f=e("low"),s=e("close");if(e("hoverlabel.split"),p.getComponentMethod("calendars","handleTraceDefaults")(u,y,["x"],n),a&&r&&f&&s){var i=Math.min(a.length,r.length,f.length,s.length);return t&&(i=Math.min(i,v.minRowLength(t))),y._length=i,i}}},{"../../lib":503,"../../registry":638}],877:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib");Q.exports=function(u,y,e,n){var t=y.yaxis,a=y.xaxis,r=!!a.rangebreaks;v.makeTraceGroups(n,e,"trace ohlc").each(function(f){var s=p.select(this),i=f[0],l=i.t;if(!0!==i.trace.visible||l.empty)s.remove();else{var c=l.tickLen,h=s.selectAll("path").data(v.identity);h.enter().append("path"),h.exit().remove(),h.attr("d",function(m){if(m.empty)return"M0,0Z";var d=a.c2p(m.pos-c,!0),o=a.c2p(m.pos+c,!0),b=r?(d+o)/2:a.c2p(m.pos,!0);return"M"+d+","+t.c2p(m.o,!0)+"H"+b+"M"+b+","+t.c2p(m.h,!0)+"V"+t.c2p(m.l,!0)+"M"+o+","+t.c2p(m.c,!0)+"H"+b})}})}},{"../../lib":503,"@plotly/d3":58}],878:[function(x,Q,K){"use strict";Q.exports=function(p,v){var u,y=p.cd,e=p.xaxis,n=p.yaxis,t=[],a=y[0].t.bPos||0;if(!1===v)for(u=0;u<y.length;u++)y[u].selected=0;else for(u=0;u<y.length;u++){var r=y[u];v.contains([e.c2p(r.pos+a),n.c2p(r.yc)],null,r.i,p)?(t.push({pointNumber:r.i,x:e.c2d(r.pos),y:n.c2d(r.yc)}),r.selected=1):r.selected=0}return t}},{}],879:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/drawing"),u=x("../../components/color");Q.exports=function(y,e,n){var t=n||p.select(y).selectAll("g.ohlclayer").selectAll("g.trace");t.style("opacity",function(a){return a[0].trace.opacity}),t.each(function(a){var r=a[0].trace;p.select(this).selectAll("path").each(function(f){if(!f.empty){var s=r[f.dir].line;p.select(this).style("fill","none").call(u.stroke,s.color).call(v.dashLine,s.dash,s.width).style("opacity",r.selectedpoints&&!f.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],880:[function(x,Q,K){"use strict";var p=x("../../lib/extend").extendFlat,v=x("../../plots/attributes"),u=x("../../plots/font_attributes"),y=x("../../components/colorscale/attributes"),e=x("../../plots/template_attributes").hovertemplateAttrs,n=x("../../plots/domain").attributes,t=p({editType:"calc"},y("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});Q.exports={domain:n({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:p({},v.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:u({editType:"calc"}),tickfont:u({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:t,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],881:[function(x,Q,K){"use strict";var p=x("../../plots/get_data").getModuleCalcData,v=x("./plot");K.name="parcats",K.plot=function(u,y,e,n){var t=p(u.calcdata,"parcats");t.length&&v(u,t[0],e,n)},K.clean=function(u,y,e,n){var t=n._has&&n._has("parcats"),a=y._has&&y._has("parcats");t&&!a&&n._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":886}],882:[function(x,Q,K){"use strict";var p=x("../../lib/gup").wrap,v=x("../../components/colorscale/helpers").hasColorscale,u=x("../../components/colorscale/calc"),y=x("../../lib/filter_unique.js"),e=x("../../components/drawing"),n=x("../../lib"),t=x("fast-isnumeric");function a(s,i,l){s.valueInds.push(i),s.count+=l}function r(s,i,l){return{categoryInds:s,color:i,rawColor:l,valueInds:[],count:0}}function f(s,i,l){s.valueInds.push(i),s.count+=l}Q.exports=function(s,i){var l=n.filterVisible(i.dimensions);if(0===l.length)return[];var c,h,m,d=l.map(function(W){var te;if("trace"===W.categoryorder)te=null;else if("array"===W.categoryorder)te=W.categoryarray;else{te=y(W.values);for(var R=!0,N=0;N<te.length;N++)if(!t(te[N])){R=!1;break}te.sort(R?n.sorterAsc:void 0),"category descending"===W.categoryorder&&(te=te.reverse())}return function(V,ee){ee=null==ee?[]:ee.map(function(ue){return ue});var j={},J={},$=[];ee.forEach(function(ue,le){j[ue]=0,J[ue]=le});for(var re=0;re<V.length;re++){var ne,se=V[re];void 0===j[se]?(j[se]=1,ne=ee.push(se)-1,J[se]=ne):(j[se]++,ne=J[se]),$.push(ne)}var ie=ee.map(function(ue){return j[ue]});return{uniqueValues:ee,uniqueCounts:ie,inds:$}}(W.values,te)});c=n.isArrayOrTypedArray(i.counts)?i.counts:[i.counts],function(W){var te;if(function(R){for(var N=new Array(R.length),V=0;V<R.length;V++){if(R[V]<0||R[V]>=R.length||void 0!==N[R[V]])return!1;N[R[V]]=!0}return!0}(W.map(function(R){return R.displayindex})))for(te=0;te<W.length;te++)W[te]._displayindex=W[te].displayindex;else for(te=0;te<W.length;te++)W[te]._displayindex=te}(l),l.forEach(function(W,te){!function(R,N){R._categoryarray=N.uniqueValues,R._ticktext=null==R.ticktext?[]:R.ticktext.slice();for(var V=R._ticktext.length;V<N.uniqueValues.length;V++)R._ticktext.push(N.uniqueValues[V])}(W,d[te])});var o,b=i.line;b?(v(i,"line")&&u(s,i,{vals:i.line.color,containerStr:"line",cLetter:"c"}),o=e.tryColorscale(b)):o=n.identity;var g,w,_,A,T,E=l[0].values.length,k={},O=d.map(function(W){return W.inds});for(m=0,g=0;g<E;g++){var D=[];for(w=0;w<O.length;w++)D.push(O[w][g]);m+=h=c[g%c.length];var S=(_=g,A=void 0,T=void 0,n.isArrayOrTypedArray(b.color)?T=A=b.color[_%b.color.length]:A=b.color,{color:o(A),rawColor:T}),C=D+"-"+S.rawColor;void 0===k[C]&&(k[C]=r(D,S.color,S.rawColor)),f(k[C],g,h)}var z,W,te,R,N,B=l.map(function(W,te){return{dimensionInd:te,containerInd:W._index,displayInd:W._displayindex,dimensionLabel:W.label,count:m,categories:[],dragX:null}});for(g=0;g<E;g++)for(h=c[g%c.length],w=0;w<B.length;w++){var U=B[w].containerInd,G=d[w].inds[g],X=B[w].categories;void 0===X[G]&&(X[G]={dimensionInd:w,categoryInd:z=G,categoryValue:i.dimensions[U]._categoryarray[G],displayInd:z,categoryLabel:i.dimensions[U]._ticktext[G],valueInds:[],count:0,dragY:null}),a(X[G],g,h)}return p((te=k,R=m,N=(W=B).map(function(V){return V.categories.length}).reduce(function(V,ee){return Math.max(V,ee)}),{dimensions:W,paths:te,trace:void 0,maxCats:N,count:R}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],883:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/colorscale/helpers").hasColorscale,u=x("../../components/colorscale/defaults"),y=x("../../plots/domain").defaults,e=x("../../plots/array_container_defaults"),n=x("./attributes"),t=x("../parcoords/merge_length");function a(r,f){function s(o,b){return p.coerce(r,f,n.dimensions,o,b)}var i=s("values"),l=s("visible");if(i&&i.length||(l=f.visible=!1),l){s("label"),s("displayindex",f._index);var c,h=r.categoryarray,m=Array.isArray(h)&&h.length>0;m&&(c="array");var d=s("categoryorder",c);"array"===d?(s("categoryarray"),s("ticktext")):(delete r.categoryarray,delete r.ticktext),m||"array"!==d||(f.categoryorder="trace")}}Q.exports=function(r,f,s,i){function l(o,b){return p.coerce(r,f,n,o,b)}var c=e(r,f,{name:"dimensions",handleItemDefaults:a}),h=function(o,b,g,w,_){_("line.shape"),_("line.hovertemplate");var A=_("line.color",w.colorway[0]);if(v(o,"line")&&p.isArrayOrTypedArray(A)){if(A.length)return _("line.colorscale"),u(o,b,w,_,{prefix:"line.",cLetter:"c"}),A.length;b.line.color=g}return 1/0}(r,f,s,i,l);y(f,i,l),Array.isArray(c)&&c.length||(f.visible=!1),t(f,c,"values",h),l("hoveron"),l("hovertemplate"),l("arrangement"),l("bundlecolors"),l("sortpaths"),l("counts");var m={family:i.font.family,size:Math.round(i.font.size),color:i.font.color};p.coerceFont(l,"labelfont",m);var d={family:i.font.family,size:Math.round(i.font.size/1.2),color:i.font.color};p.coerceFont(l,"tickfont",d)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":896,"./attributes":880}],884:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:x("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":880,"./base_plot":881,"./calc":882,"./defaults":883,"./plot":886}],885:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("d3-interpolate").interpolateNumber,u=x("../../plot_api/plot_api"),y=x("../../components/fx"),e=x("../../lib"),n=e.strTranslate,t=x("../../components/drawing"),a=x("tinycolor2"),r=x("../../lib/svg_text_utils");function f(R,N,V,ee){var j=R.map(X.bind(0,N,V)),J=ee.selectAll("g.parcatslayer").data([null]);J.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var $=J.selectAll("g.trace.parcats").data(j,s),re=$.enter().append("g").attr("class","trace parcats");$.attr("transform",function(be){return n(be.x,be.y)}),re.append("g").attr("class","paths");var ne=$.select("g.paths").selectAll("path.path").data(function(be){return be.paths},s);ne.attr("fill",function(be){return be.model.color});var se=ne.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(be){return be.model.color}).attr("fill-opacity",0);b(se),ne.attr("d",function(be){return be.svgD}),se.empty()||ne.sort(l),ne.exit().remove(),ne.on("mouseover",c).on("mouseout",h).on("click",o),re.append("g").attr("class","dimensions");var ie=$.select("g.dimensions").selectAll("g.dimension").data(function(be){return be.dimensions},s);ie.enter().append("g").attr("class","dimension"),ie.attr("transform",function(be){return n(be.x,0)}),ie.exit().remove();var ue=ie.selectAll("g.category").data(function(be){return be.categories},s),le=ue.enter().append("g").attr("class","category");ue.attr("transform",function(be){return n(0,be.y)}),le.append("rect").attr("class","catrect").attr("pointer-events","none"),ue.select("rect.catrect").attr("fill","none").attr("width",function(be){return be.width}).attr("height",function(be){return be.height}),w(le);var de=ue.selectAll("rect.bandrect").data(function(be){return be.bands},s);de.each(function(){e.raiseToTop(this)}),de.attr("fill",function(be){return be.color});var ve=de.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(be){return be.color}).attr("fill-opacity",0);de.attr("fill",function(be){return be.color}).attr("width",function(be){return be.width}).attr("height",function(be){return be.height}).attr("y",function(be){return be.y}).attr("cursor",function(be){return"fixed"===be.parcatsViewModel.arrangement?"default":"perpendicular"===be.parcatsViewModel.arrangement?"ns-resize":"move"}),_(ve),de.exit().remove(),le.append("text").attr("class","catlabel").attr("pointer-events","none");var _e=N._fullLayout.paper_bgcolor;ue.select("text.catlabel").attr("text-anchor",function(be){return i(be)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r.makeTextShadow(_e)).style("fill","rgb(0, 0, 0)").attr("x",function(be){return i(be)?be.width+5:-5}).attr("y",function(be){return be.height/2}).text(function(be){return be.model.categoryLabel}).each(function(be){t.font(p.select(this),be.parcatsViewModel.categorylabelfont),r.convertToTspans(p.select(this),N)}),le.append("text").attr("class","dimlabel"),ue.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(be){return"fixed"===be.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(be){return be.width/2}).attr("y",-5).text(function(be,Te){return 0===Te?be.parcatsViewModel.model.dimensions[be.model.dimensionInd].dimensionLabel:null}).each(function(be){t.font(p.select(this),be.parcatsViewModel.labelfont)}),ue.selectAll("rect.bandrect").on("mouseover",O).on("mouseout",D),ue.exit().remove(),ie.call(p.behavior.drag().origin(function(be){return{x:be.x,y:0}}).on("dragstart",S).on("drag",C).on("dragend",z)),$.each(function(be){be.traceSelection=p.select(this),be.pathSelection=p.select(this).selectAll("g.paths").selectAll("path.path"),be.dimensionSelection=p.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),$.exit().remove()}function s(R){return R.key}function i(R){return R.model.dimensionInd===R.parcatsViewModel.dimensions[R.parcatsViewModel.dimensions.length-1].model.dimensionInd}function l(R,N){return R.model.rawColor>N.model.rawColor?1:R.model.rawColor<N.model.rawColor?-1:0}function c(R){if(!R.parcatsViewModel.dragDimension&&-1===R.parcatsViewModel.hoverinfoItems.indexOf("skip")){e.raiseToTop(this),g(p.select(this));var N=m(R),V=d(R);if(R.parcatsViewModel.graphDiv.emit("plotly_hover",{points:N,event:p.event,constraints:V}),-1===R.parcatsViewModel.hoverinfoItems.indexOf("none")){var ee,j,J,$=p.mouse(this)[0],re=R.parcatsViewModel.graphDiv,ne=R.parcatsViewModel.trace,se=re._fullLayout,ie=se._paperdiv.node().getBoundingClientRect(),ue=R.parcatsViewModel.graphDiv.getBoundingClientRect();for(J=0;J<R.leftXs.length-1;J++)if(R.leftXs[J]+R.dimWidths[J]-2<=$&&$<=R.leftXs[J+1]+2){var le=R.parcatsViewModel.dimensions[J];ee=(le.x+le.width+R.parcatsViewModel.dimensions[J+1].x)/2,j=(R.topYs[J]+R.topYs[J+1]+R.height)/2;break}var ve=R.parcatsViewModel.x+ee,_e=R.parcatsViewModel.y+j,be=a.mostReadable(R.model.color,["black","white"]),Te=R.model.count,he=Te/R.parcatsViewModel.model.count,me={countLabel:Te,probabilityLabel:he.toFixed(3)},Ae=[];-1!==R.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ae.push(["Count:",me.countLabel].join(" ")),-1!==R.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Ae.push(["P:",me.probabilityLabel].join(" "));var we=Ae.join("<br>"),Se=p.mouse(re)[0];y.loneHover({trace:ne,x:ve-ie.left+ue.left,y:_e-ie.top+ue.top,text:we,color:R.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:be,idealAlign:Se<ve?"right":"left",hovertemplate:(ne.line||{}).hovertemplate,hovertemplateLabels:me,eventData:[{data:ne._input,fullData:ne,count:Te,probability:he}]},{container:se._hoverlayer.node(),outerContainer:se._paper.node(),gd:re})}}}function h(R){if(!R.parcatsViewModel.dragDimension&&(b(p.select(this)),y.loneUnhover(R.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),R.parcatsViewModel.pathSelection.sort(l),-1===R.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var N=m(R),V=d(R);R.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:N,event:p.event,constraints:V})}}function m(R){for(var N=[],V=B(R.parcatsViewModel),ee=0;ee<R.model.valueInds.length;ee++)N.push({curveNumber:V,pointNumber:R.model.valueInds[ee]});return N}function d(R){for(var N={},V=R.parcatsViewModel.model.dimensions,ee=0;ee<V.length;ee++){var j=V[ee];N[j.containerInd]=j.categories[R.model.categoryInds[ee]].categoryValue}return void 0!==R.model.rawColor&&(N.color=R.model.rawColor),N}function o(R){if(-1===R.parcatsViewModel.hoverinfoItems.indexOf("skip")){var N=m(R),V=d(R);R.parcatsViewModel.graphDiv.emit("plotly_click",{points:N,event:p.event,constraints:V})}}function b(R){R.attr("fill",function(N){return N.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function g(R){R.attr("fill-opacity",.8).attr("stroke",function(N){return a.mostReadable(N.model.color,["black","white"])}).attr("stroke-width",.3)}function w(R){R.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function _(R){R.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function A(R){var V=R.categoryViewModel.model.dimensionInd,ee=R.categoryViewModel.model.categoryInd;return R.parcatsViewModel.pathSelection.filter(function(j){return j.model.categoryInds[V]===ee&&j.model.color===R.color})}function T(R,N,V){var ee=p.select(R).datum(),j=ee.categoryViewModel.model,J=ee.parcatsViewModel.graphDiv,$=p.select(R.parentNode).selectAll("rect.bandrect"),re=[];$.each(function(se){A(se).each(function(ie){Array.prototype.push.apply(re,m(ie))})});var ne={};ne[j.dimensionInd]=j.categoryValue,J.emit(N,{points:re,event:V,constraints:ne})}function E(R,N,V){var ee=p.select(R).datum(),j=ee.categoryViewModel.model,J=ee.parcatsViewModel.graphDiv,$=A(ee),re=[];$.each(function(se){Array.prototype.push.apply(re,m(se))});var ne={};ne[j.dimensionInd]=j.categoryValue,void 0!==ee.rawColor&&(ne.color=ee.rawColor),J.emit(N,{points:re,event:V,constraints:ne})}function k(R,N,V){R._fullLayout._calcInverseTransform(R);var ee,j,J=R._fullLayout._invScaleX,$=R._fullLayout._invScaleY,re=p.select(V.parentNode).select("rect.catrect"),ne=re.node().getBoundingClientRect(),se=re.datum(),ie=se.parcatsViewModel,le=ie.trace,de=ne.top+ne.height/2;ie.dimensions.length>1&&ie.model.dimensions[se.model.dimensionInd].displayInd===ie.dimensions.length-1?(ee=ne.left,j="left"):(ee=ne.left+ne.width,j="right");var ve=se.model.count,_e=se.model.categoryLabel,be=ve/se.parcatsViewModel.model.count,Te={countLabel:ve,categoryLabel:_e,probabilityLabel:be.toFixed(3)},he=[];-1!==se.parcatsViewModel.hoverinfoItems.indexOf("count")&&he.push(["Count:",Te.countLabel].join(" ")),-1!==se.parcatsViewModel.hoverinfoItems.indexOf("probability")&&he.push(["P("+Te.categoryLabel+"):",Te.probabilityLabel].join(" "));var me=he.join("<br>");return{trace:le,x:J*(ee-N.left),y:$*(de-N.top),text:me,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:j,hovertemplate:le.hovertemplate,hovertemplateLabels:Te,eventData:[{data:le._input,fullData:le,count:ve,category:_e,probability:be}]}}function O(R){if(!R.parcatsViewModel.dragDimension&&-1===R.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(p.mouse(this)[1]<-1)return;var N,V=R.parcatsViewModel.graphDiv,ee=V._fullLayout,j=ee._paperdiv.node().getBoundingClientRect(),J=R.parcatsViewModel.hoveron;"color"===J?(g(ne=A(re=p.select(this).datum())),ne.each(function(){e.raiseToTop(this)}),p.select(this.parentNode).selectAll("rect.bandrect").filter(function(se){return se.color===re.color}).each(function(){e.raiseToTop(this),p.select(this).attr("stroke","black").attr("stroke-width",1.5)}),E(this,"plotly_hover",p.event)):(function($){p.select($.parentNode).selectAll("rect.bandrect").each(function(re){var ne=A(re);g(ne),ne.each(function(){e.raiseToTop(this)})}),p.select($.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),T(this,"plotly_hover",p.event)),-1===R.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===J?N=k(V,j,this):"color"===J?N=function($,re,ne){$._fullLayout._calcInverseTransform($);var se,ie,ue=$._fullLayout._invScaleX,le=$._fullLayout._invScaleY,de=ne.getBoundingClientRect(),ve=p.select(ne).datum(),_e=ve.categoryViewModel,be=_e.parcatsViewModel,he=be.trace,me=de.y+de.height/2;be.dimensions.length>1&&be.model.dimensions[_e.model.dimensionInd].displayInd===be.dimensions.length-1?(se=de.left,ie="left"):(se=de.left+de.width,ie="right");var Ae=_e.model.categoryLabel,we=ve.parcatsViewModel.model.count,Se=0;ve.categoryViewModel.bands.forEach(function(ft){ft.color===ve.color&&(Se+=ft.count)});var Pe=_e.model.count,ze=0;be.pathSelection.each(function(ft){ft.model.color===ve.color&&(ze+=ft.model.count)});var He=Se/we,tt=Se/ze,Oe=Se/Pe,Be={countLabel:we,categoryLabel:Ae,probabilityLabel:He.toFixed(3)},Je=[];-1!==_e.parcatsViewModel.hoverinfoItems.indexOf("count")&&Je.push(["Count:",Be.countLabel].join(" ")),-1!==_e.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(Je.push("P(color \u2229 "+Ae+"): "+Be.probabilityLabel),Je.push("P("+Ae+" | color): "+tt.toFixed(3)),Je.push("P(color | "+Ae+"): "+Oe.toFixed(3)));var Ye=Je.join("<br>"),nt=a.mostReadable(ve.color,["black","white"]);return{trace:he,x:ue*(se-re.left),y:le*(me-re.top),text:Ye,color:ve.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:nt,fontSize:10,idealAlign:ie,hovertemplate:he.hovertemplate,hovertemplateLabels:Be,eventData:[{data:he._input,fullData:he,category:Ae,count:we,probability:He,categorycount:Pe,colorcount:ze,bandcolorcount:Se}]}}(V,j,this):"dimension"===J&&(N=function($,re,ne){var se=[];return p.select(ne.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){se.push(k($,re,this))}),se}(V,j,this)),N&&y.loneHover(N,{container:ee._hoverlayer.node(),outerContainer:ee._paper.node(),gd:V}))}var re,ne}function D(R){var N=R.parcatsViewModel;!N.dragDimension&&(b(N.pathSelection),w(N.dimensionSelection.selectAll("g.category")),_(N.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),y.loneUnhover(N.graphDiv._fullLayout._hoverlayer.node()),N.pathSelection.sort(l),-1===N.hoverinfoItems.indexOf("skip"))&&("color"===R.parcatsViewModel.hoveron?E(this,"plotly_unhover",p.event):T(this,"plotly_unhover",p.event))}function S(R){"fixed"!==R.parcatsViewModel.arrangement&&(R.dragDimensionDisplayInd=R.model.displayInd,R.initialDragDimensionDisplayInds=R.parcatsViewModel.model.dimensions.map(function(N){return N.displayInd}),R.dragHasMoved=!1,R.dragCategoryDisplayInd=null,p.select(this).selectAll("g.category").select("rect.catrect").each(function(N){var V=p.mouse(this)[0],ee=p.mouse(this)[1];-2<=V&&V<=N.width+2&&-2<=ee&&ee<=N.height+2&&(R.dragCategoryDisplayInd=N.model.displayInd,R.initialDragCategoryDisplayInds=R.model.categories.map(function(j){return j.displayInd}),N.model.dragY=N.y,e.raiseToTop(this.parentNode),p.select(this.parentNode).selectAll("rect.bandrect").each(function(j){j.y<ee&&ee<=j.y+j.height&&(R.potentialClickBand=this)}))}),R.parcatsViewModel.dragDimension=R,y.loneUnhover(R.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function C(R){if("fixed"!==R.parcatsViewModel.arrangement&&(R.dragHasMoved=!0,null!==R.dragDimensionDisplayInd)){var N=R.dragDimensionDisplayInd,V=N-1,ee=N+1,j=R.parcatsViewModel.dimensions[N];if(null!==R.dragCategoryDisplayInd){var J=j.categories[R.dragCategoryDisplayInd];J.model.dragY+=p.event.dy;var $=J.model.dragY,re=J.model.displayInd,ne=j.categories,se=ne[re-1],ie=ne[re+1];void 0!==se&&$<se.y+se.height/2&&(J.model.displayInd=se.model.displayInd,se.model.displayInd=re),void 0!==ie&&$+J.height>ie.y+ie.height/2&&(J.model.displayInd=ie.model.displayInd,ie.model.displayInd=re),R.dragCategoryDisplayInd=J.model.displayInd}if(null===R.dragCategoryDisplayInd||"freeform"===R.parcatsViewModel.arrangement){j.model.dragX=p.event.x;var ue=R.parcatsViewModel.dimensions[V],le=R.parcatsViewModel.dimensions[ee];void 0!==ue&&j.model.dragX<ue.x+ue.width&&(j.model.displayInd=ue.model.displayInd,ue.model.displayInd=N),void 0!==le&&j.model.dragX+j.width>le.x&&(j.model.displayInd=le.model.displayInd,le.model.displayInd=R.dragDimensionDisplayInd),R.dragDimensionDisplayInd=j.model.displayInd}W(R.parcatsViewModel),q(R.parcatsViewModel),G(R.parcatsViewModel),U(R.parcatsViewModel)}}function z(R){if("fixed"!==R.parcatsViewModel.arrangement&&null!==R.dragDimensionDisplayInd){p.select(this).selectAll("text").attr("font-weight","normal");var N={},V=B(R.parcatsViewModel),ee=R.parcatsViewModel.model.dimensions.map(function(ie){return ie.displayInd}),j=R.initialDragDimensionDisplayInds.some(function(ie,ue){return ie!==ee[ue]});j&&ee.forEach(function(ie,ue){N["dimensions["+R.parcatsViewModel.model.dimensions[ue].containerInd+"].displayindex"]=ie});var J=!1;if(null!==R.dragCategoryDisplayInd){var $=R.model.categories.map(function(ie){return ie.displayInd});if(J=R.initialDragCategoryDisplayInds.some(function(ie,ue){return ie!==$[ue]})){var re=R.model.categories.slice().sort(function(ie,ue){return ie.displayInd-ue.displayInd}),ne=re.map(function(ie){return ie.categoryValue}),se=re.map(function(ie){return ie.categoryLabel});N["dimensions["+R.model.containerInd+"].categoryarray"]=[ne],N["dimensions["+R.model.containerInd+"].ticktext"]=[se],N["dimensions["+R.model.containerInd+"].categoryorder"]="array"}}-1===R.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!R.dragHasMoved&&R.potentialClickBand&&("color"===R.parcatsViewModel.hoveron?E(R.potentialClickBand,"plotly_click",p.event.sourceEvent):T(R.potentialClickBand,"plotly_click",p.event.sourceEvent)),R.model.dragX=null,null!==R.dragCategoryDisplayInd&&(R.parcatsViewModel.dimensions[R.dragDimensionDisplayInd].categories[R.dragCategoryDisplayInd].model.dragY=null,R.dragCategoryDisplayInd=null),R.dragDimensionDisplayInd=null,R.parcatsViewModel.dragDimension=null,R.dragHasMoved=null,R.potentialClickBand=null,W(R.parcatsViewModel),q(R.parcatsViewModel),p.transition().duration(300).ease("cubic-in-out").each(function(){G(R.parcatsViewModel,!0),U(R.parcatsViewModel,!0)}).each("end",function(){(j||J)&&u.restyle(R.parcatsViewModel.graphDiv,N,[V])})}}function B(R){for(var N,V=R.graphDiv._fullData,ee=0;ee<V.length;ee++)if(R.key===V[ee].uid){N=ee;break}return N}function U(R,N){var V;void 0===N&&(N=!1),R.pathSelection.data(function(ee){return ee.paths},s),(V=R.pathSelection,N?V.transition():V).attr("d",function(ee){return ee.svgD})}function G(R,N){function V($){return N?$.transition():$}void 0===N&&(N=!1),R.dimensionSelection.data(function($){return $.dimensions},s);var ee=R.dimensionSelection.selectAll("g.category").data(function($){return $.categories},s);V(R.dimensionSelection).attr("transform",function($){return n($.x,0)}),V(ee).attr("transform",function($){return n(0,$.y)}),ee.select(".dimlabel").text(function($,re){return 0===re?$.parcatsViewModel.model.dimensions[$.model.dimensionInd].dimensionLabel:null}),ee.select(".catlabel").attr("text-anchor",function($){return i($)?"start":"end"}).attr("x",function($){return i($)?$.width+5:-5}).each(function($){var re,ne;i($)?(re=$.width+5,ne="start"):(re=-5,ne="end"),p.select(this).selectAll("tspan").attr("x",re).attr("text-anchor",ne)});var j=ee.selectAll("rect.bandrect").data(function($){return $.bands},s),J=j.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function($){return $.color}).attr("fill-opacity",0);j.attr("fill",function($){return $.color}).attr("width",function($){return $.width}).attr("height",function($){return $.height}).attr("y",function($){return $.y}),_(J),j.each(function(){e.raiseToTop(this)}),j.exit().remove()}function X(R,N,V){var ee,j=V[0],J=N.margin||{l:80,r:80,t:100,b:80},$=j.trace,re=$.domain,ne=N.width,se=N.height,ie=Math.floor(ne*(re.x[1]-re.x[0])),ue=Math.floor(se*(re.y[1]-re.y[0])),le=re.x[0]*ne+J.l,de=N.height-re.y[1]*N.height+J.t,ve=$.line.shape;ee="all"===$.hoverinfo?["count","probability"]:($.hoverinfo||"").split("+");var _e={trace:$,key:$.uid,model:j,x:le,y:de,width:ie,height:ue,hoveron:$.hoveron,hoverinfoItems:ee,arrangement:$.arrangement,bundlecolors:$.bundlecolors,sortpaths:$.sortpaths,labelfont:$.labelfont,categorylabelfont:$.tickfont,pathShape:ve,dragDimension:null,margin:J,paths:[],dimensions:[],graphDiv:R,traceSelection:null,pathSelection:null,dimensionSelection:null};return j.dimensions&&(W(_e),q(_e)),_e}function Z(R,N,V,ee,j){var J,$,re=[],ne=[];for($=0;$<V.length-1;$++)J=v(V[$]+R[$],R[$+1]),re.push(J(j)),ne.push(J(1-j));var se="M "+R[0]+","+N[0];for(se+="l"+V[0]+",0 ",$=1;$<V.length;$++)se+="C"+re[$-1]+","+N[$-1]+" "+ne[$-1]+","+N[$]+" "+R[$]+","+N[$],se+="l"+V[$]+",0 ";for(se+="l0,"+ee+" ",se+="l -"+V[V.length-1]+",0 ",$=V.length-2;$>=0;$--)se+="C"+ne[$]+","+(N[$+1]+ee)+" "+re[$]+","+(N[$]+ee)+" "+(R[$]+V[$])+","+(N[$]+ee),se+="l-"+V[$]+",0 ";return se+"Z"}function q(R){var N=R.dimensions,V=R.model,ee=N.map(function(Je){return Je.categories.map(function(Ye){return Ye.y})}),j=R.model.dimensions.map(function(Je){return Je.categories.map(function(Ye){return Ye.displayInd})}),J=R.model.dimensions.map(function(Je){return Je.displayInd}),$=R.dimensions.map(function(Je){return Je.model.dimensionInd}),re=N.map(function(Je){return Je.x}),ne=N.map(function(Je){return Je.width}),se=[];for(var ie in V.paths)V.paths.hasOwnProperty(ie)&&se.push(V.paths[ie]);function ue(Je){var Ye=Je.categoryInds.map(function(nt,ft){return j[ft][nt]});return $.map(function(nt){return Ye[nt]})}se.sort(function(Je,Ye){var nt=ue(Je),ft=ue(Ye);return"backward"===R.sortpaths&&(nt.reverse(),ft.reverse()),nt.push(Je.valueInds[0]),ft.push(Ye.valueInds[0]),R.bundlecolors&&(nt.unshift(Je.rawColor),ft.unshift(Ye.rawColor)),nt<ft?-1:nt>ft?1:0});for(var le=new Array(se.length),de=N[0].model.count,ve=N[0].categories.map(function(Je){return Je.height}).reduce(function(Je,Ye){return Je+Ye}),_e=0;_e<se.length;_e++){var be,Te=se[_e];be=de>0?ve*(Te.count/de):0;for(var he,me=new Array(ee.length),Ae=0;Ae<Te.categoryInds.length;Ae++){var Se=j[Ae][Te.categoryInds[Ae]],Pe=J[Ae];me[Pe]=ee[Pe][Se],ee[Pe][Se]+=be;var ze=R.dimensions[Pe].categories[Se],He=ze.bands.length,tt=ze.bands[He-1];if(void 0===tt||Te.rawColor!==tt.rawColor){var Oe=void 0===tt?0:tt.y+tt.height;ze.bands.push({key:Oe,color:Te.color,rawColor:Te.rawColor,height:be,width:ze.width,count:Te.count,y:Oe,categoryViewModel:ze,parcatsViewModel:R})}else{var Be=ze.bands[He-1];Be.height+=be,Be.count+=Te.count}}he=Z(re,me,ne,be,"hspline"===R.pathShape?.5:0),le[_e]={key:Te.valueInds[0],model:Te,height:be,leftXs:re,topYs:me,dimWidths:ne,svgD:he,parcatsViewModel:R}}R.paths=le}function W(R){var N=R.model.dimensions.map(function($){return{displayInd:$.displayInd,dimensionInd:$.dimensionInd}});N.sort(function($,re){return $.displayInd-re.displayInd});var V=[];for(var ee in N)V.push(te(R,R.model.dimensions[N[ee].dimensionInd]));R.dimensions=V}function te(R,N){var V,ee=R.model.dimensions.length;V=40+(ee>1?(R.width-80-16)/(ee-1):0)*N.displayInd;var J,$,re,se,ie=[],ue=R.model.maxCats,le=N.categories.length,de=N.count,ve=R.height-8*(ue-1),_e=8*(ue-le)/2,be=N.categories.map(function(Te){return{displayInd:Te.displayInd,categoryInd:Te.categoryInd}});for(be.sort(function(Te,he){return Te.displayInd-he.displayInd}),se=0;se<le;se++)re={key:($=N.categories[be[se].categoryInd]).valueInds[0],model:$,width:16,height:J=de>0?$.count/de*ve:0,y:null!==$.dragY?$.dragY:_e,bands:[],parcatsViewModel:R},_e=_e+J+8,ie.push(re);return{key:N.dimensionInd,x:null!==N.dragX?N.dragX:V,y:0,width:16,model:N,categories:ie,parcatsViewModel:R,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}Q.exports=function(R,N,V,ee){f(V,R,ee,N)}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],886:[function(x,Q,K){"use strict";var p=x("./parcats");Q.exports=function(v,u,y,e){var n=v._fullLayout,a=n._size;p(v,n._paper,u,{width:a.w,height:a.h,margin:{t:a.t,r:a.r,b:a.b,l:a.l}},y,e)}},{"./parcats":885}],887:[function(x,Q,K){"use strict";var p=x("../../components/colorscale/attributes"),v=x("../../plots/cartesian/layout_attributes"),u=x("../../plots/font_attributes"),y=x("../../plots/domain").attributes,e=x("../../lib/extend").extendFlat,n=x("../../plot_api/plot_template").templatedArray;Q.exports={domain:y({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:u({editType:"plot"}),tickfont:u({editType:"plot"}),rangefont:u({editType:"plot"}),dimensions:n("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},v.tickvals,{editType:"plot"}),ticktext:e({},v.ticktext,{editType:"plot"}),tickformat:e({},v.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},p("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],888:[function(x,Q,K){"use strict";var p=x("./constants"),v=x("@plotly/d3"),u=x("../../lib/gup").keyFun,y=x("../../lib/gup").repeat,e=x("../../lib").sorterAsc,n=x("../../lib").strTranslate,t=p.bar.snapRatio;function a(k,O){return k*(1-t)+O*t}var r=p.bar.snapClose;function f(k,O){return k*(1-r)+O*r}function s(k,O,D,S){if(function(te,R){for(var N=0;N<R.length;N++)if(te>=R[N][0]&&te<=R[N][1])return!0;return!1}(D,S))return D;var C=k?-1:1,z=0,B=O.length-1;if(C<0){var U=z;z=B,B=U}for(var G=O[z],X=G,Z=z;C*Z<C*B;Z+=C){var q=Z+C,W=O[q];if(C*D<C*f(G,W))return a(G,X);if(C*D<C*W||q===B)return a(W,G);X=G,G=W}}function i(k){k.attr("x",-p.bar.captureWidth/2).attr("width",p.bar.captureWidth)}function l(k){k.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function c(k){if(!k.brush.filterSpecified)return"0,"+k.height;for(var O,D,S,C=h(k.brush.filter.getConsolidated(),k.height),z=[0],B=C.length?C[0][0]:null,U=0;U<C.length;U++)D=(O=C[U])[1]-O[0],z.push(B),z.push(D),(S=U+1)<C.length&&(B=C[S][0]-O[1]);return z.push(k.height),z}function h(k,O){return k.map(function(D){return D.map(function(S){return Math.max(0,S*O)}).sort(e)})}function m(){v.select(document.body).style("cursor",null)}function d(k){k.attr("stroke-dasharray",c)}function o(k,O){var D=v.select(k).selectAll(".highlight, .highlight-shadow");d(O?D.transition().duration(p.bar.snapDuration).each("end",O):D)}function b(k,O){var D,S=k.brush,C=NaN,z={};if(S.filterSpecified){var B=k.height,U=S.filter.getConsolidated(),G=h(U,B),X=NaN,Z=NaN,q=NaN;for(D=0;D<=G.length;D++){var W=G[D];if(W&&W[0]<=O&&O<=W[1]){X=D;break}if(Z=D?D-1:NaN,W&&W[0]>O){q=D;break}}if(C=X,isNaN(C)&&(C=isNaN(Z)||isNaN(q)?isNaN(Z)?q:Z:O-G[Z][1]<G[q][0]-O?Z:q),!isNaN(C)){var te=G[C],R=function(j,J){var $=p.bar.handleHeight;if(!(J>j[1]+$||J<j[0]-$))return J>=.9*j[1]+.1*j[0]?"n":J<=.9*j[0]+.1*j[1]?"s":"ns"}(te,O);R&&(z.interval=U[C],z.intervalPix=te,z.region=R)}}if(k.ordinal&&!z.region){var N=k.unitTickvals,V=k.unitToPaddedPx.invert(O);for(D=0;D<N.length;D++){var ee=[.25*N[Math.max(D-1,0)]+.75*N[D],.25*N[Math.min(D+1,N.length-1)]+.75*N[D]];if(V>=ee[0]&&V<=ee[1]){z.clickableOrdinalRange=ee;break}}}return z}function g(k,O){v.event.sourceEvent.stopPropagation();var D=O.height-v.mouse(k)[1]-2*p.verticalPadding,S=O.brush.svgBrush;S.wasDragged=!0,S._dragging=!0,S.newExtent=S.grabbingBar?[D-S.grabPoint,D+S.barLength-S.grabPoint].map(O.unitToPaddedPx.invert):[S.startExtent,O.unitToPaddedPx.invert(D)].sort(e),O.brush.filterSpecified=!0,S.extent=S.stayingIntervals.concat([S.newExtent]),S.brushCallback(O),o(k.parentNode)}function w(k,O){var D=b(O,O.height-v.mouse(k)[1]-2*p.verticalPadding),S="crosshair";D.clickableOrdinalRange?S="pointer":D.region&&(S=D.region+"-resize"),v.select(document.body).style("cursor",S)}function _(k){k.on("mousemove",function(O){v.event.preventDefault(),O.parent.inBrushDrag||w(this,O)}).on("mouseleave",function(O){O.parent.inBrushDrag||m()}).call(v.behavior.drag().on("dragstart",function(O){!function(D,S){v.event.sourceEvent.stopPropagation();var C=S.height-v.mouse(D)[1]-2*p.verticalPadding,z=S.unitToPaddedPx.invert(C),B=S.brush,U=b(S,C),G=U.interval,X=B.svgBrush;if(X.wasDragged=!1,X.grabbingBar="ns"===U.region,X.grabbingBar){var Z=G.map(S.unitToPaddedPx);X.grabPoint=C-Z[0]-p.verticalPadding,X.barLength=Z[1]-Z[0]}X.clickableOrdinalRange=U.clickableOrdinalRange,X.stayingIntervals=S.multiselect&&B.filterSpecified?B.filter.getConsolidated():[],G&&(X.stayingIntervals=X.stayingIntervals.filter(function(q){return q[0]!==G[0]&&q[1]!==G[1]})),X.startExtent=U.region?G["s"===U.region?1:0]:z,S.parent.inBrushDrag=!0,X.brushStartCallback()}(this,O)}).on("drag",function(O){g(this,O)}).on("dragend",function(O){!function(D,S){var C=S.brush,z=C.filter,B=C.svgBrush;B._dragging||(w(D,S),g(D,S),S.brush.svgBrush.wasDragged=!1),B._dragging=!1,v.event.sourceEvent.stopPropagation();var U=B.grabbingBar;if(B.grabbingBar=!1,B.grabLocation=void 0,S.parent.inBrushDrag=!1,m(),!B.wasDragged)return B.wasDragged=void 0,B.clickableOrdinalRange?C.filterSpecified&&S.multiselect?B.extent.push(B.clickableOrdinalRange):(B.extent=[B.clickableOrdinalRange],C.filterSpecified=!0):U?(B.extent=B.stayingIntervals,0===B.extent.length&&T(C)):T(C),B.brushCallback(S),o(D.parentNode),void B.brushEndCallback(C.filterSpecified?z.getConsolidated():[]);var G=function(){z.set(z.getConsolidated())};if(S.ordinal){var X=S.unitTickvals;X[X.length-1]<X[0]&&X.reverse(),B.newExtent=[s(0,X,B.newExtent[0],B.stayingIntervals),s(1,X,B.newExtent[1],B.stayingIntervals)];var Z=B.newExtent[1]>B.newExtent[0];B.extent=B.stayingIntervals.concat(Z?[B.newExtent]:[]),B.extent.length||T(C),B.brushCallback(S),Z?o(D.parentNode,G):(G(),o(D.parentNode))}else G();B.brushEndCallback(C.filterSpecified?z.getConsolidated():[])}(this,O)}))}function A(k,O){return k[0]-O[0]}function T(k){k.filterSpecified=!1,k.svgBrush.extent=[[-1/0,1/0]]}function E(k){for(var O,D=k.slice(),S=[],C=D.shift();C;){for(O=C.slice();(C=D.shift())&&C[0]<=O[1];)O[1]=Math.max(O[1],C[1]);S.push(O)}return 1===S.length&&S[0][0]>S[0][1]&&(S=[]),S}Q.exports={makeBrush:function(k,O,D,S,C,z){var B,G,X,Z,U=(Z=[],{set:function(q){1===(Z=q.map(function(W){return W.slice().sort(e)}).sort(A)).length&&Z[0][0]===-1/0&&Z[0][1]===1/0&&(Z=[[0,-1]]),G=E(Z),X=Z.reduce(function(W,te){return[Math.min(W[0],te[0]),Math.max(W[1],te[1])]},[1/0,-1/0])},get:function(){return Z.slice()},getConsolidated:function(){return G},getBounds:function(){return X}});return U.set(D),{filter:U,filterSpecified:O,svgBrush:{extent:[],brushStartCallback:S,brushCallback:(B=C,function(G){var q,X=G.brush,Z=(q=X,q.svgBrush.extent.map(function(W){return W.slice()})).slice();X.filter.set(Z),B()}),brushEndCallback:z}}},ensureAxisBrush:function(k,O){var D=k.selectAll("."+p.cn.axisBrush).data(y,u);D.enter().append("g").classed(p.cn.axisBrush,!0),function(S,C){var z=S.selectAll(".background").data(y);z.enter().append("rect").classed("background",!0).call(i).call(l).style("pointer-events","auto").attr("transform",n(0,p.verticalPadding)),z.call(_).attr("height",function(G){return G.height-p.verticalPadding});var B=S.selectAll(".highlight-shadow").data(y);B.enter().append("line").classed("highlight-shadow",!0).attr("x",-p.bar.width/2).attr("stroke-width",p.bar.width+p.bar.strokeWidth).attr("stroke",C).attr("opacity",p.bar.strokeOpacity).attr("stroke-linecap","butt"),B.attr("y1",function(G){return G.height}).call(d);var U=S.selectAll(".highlight").data(y);U.enter().append("line").classed("highlight",!0).attr("x",-p.bar.width/2).attr("stroke-width",p.bar.width-p.bar.strokeWidth).attr("stroke",p.bar.fillColor).attr("opacity",p.bar.fillOpacity).attr("stroke-linecap","butt"),U.attr("y1",function(G){return G.height}).call(d)}(D,O)},cleanRanges:function(k,O){if(Array.isArray(k[0])?(k=k.map(function(S){return S.sort(e)}),k=O.multiselect?E(k.sort(A)):[k[0]]):k=[k.sort(e)],O.tickvals){var D=O.tickvals.slice().sort(e);if(!(k=k.map(function(S){var C=[s(0,D,S[0],[]),s(1,D,S[1],[])];if(C[1]>C[0])return C}).filter(function(S){return S})).length)return}return k.length>1?k:k[0]}}},{"../../lib":503,"../../lib/gup":500,"./constants":891,"@plotly/d3":58}],889:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../plots/get_data").getModuleCalcData,u=x("./plot"),y=x("../../constants/xmlns_namespaces");K.name="parcoords",K.plot=function(e){var n=v(e.calcdata,"parcoords")[0];n.length&&u(e,n)},K.clean=function(e,n,t,a){var r=a._has&&a._has("parcoords"),f=n._has&&n._has("parcoords");r&&!f&&(a._paperdiv.selectAll(".parcoords").remove(),a._glimages.selectAll("*").remove())},K.toSVG=function(e){var n=e._fullLayout._glimages,t=p.select(e).selectAll(".svg-container");t.filter(function(a,r){return r===t.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var a=this.toDataURL("image/png");n.append("svg:image").attr({xmlns:y.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){p.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":898,"@plotly/d3":58}],890:[function(x,Q,K){"use strict";var p=x("../../lib").isArrayOrTypedArray,v=x("../../components/colorscale"),u=x("../../lib/gup").wrap;Q.exports=function(y,e){var n,t;return v.hasColorscale(e,"line")&&p(e.line.color)?(n=e.line.color,t=v.extractOpts(e.line).colorscale,v.calc(y,e,{vals:n,containerStr:"line",cLetter:"c"})):(n=function(a){for(var r=new Array(a),f=0;f<a;f++)r[f]=.5;return r}(e._length),t=[[0,e.line.color],[1,e.line.color]]),u({lineColor:n,cscale:t})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],891:[function(x,Q,K){"use strict";Q.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],892:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/colorscale/helpers").hasColorscale,u=x("../../components/colorscale/defaults"),y=x("../../plots/domain").defaults,e=x("../../plots/array_container_defaults"),n=x("../../plots/cartesian/axes"),t=x("./attributes"),a=x("./axisbrush"),r=x("./constants").maxDimensionCount,f=x("./merge_length");function s(i,l,c,h){function m(w,_){return p.coerce(i,l,t.dimensions,w,_)}var d=m("values"),o=m("visible");if(d&&d.length||(o=l.visible=!1),o){m("label"),m("tickvals"),m("ticktext"),m("tickformat");var b=m("range");l._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:b},n.setConvert(l._ax,h.layout),m("multiselect");var g=m("constraintrange");g&&(l.constraintrange=a.cleanRanges(g,l))}}Q.exports=function(i,l,c,h){function m(w,_){return p.coerce(i,l,t,w,_)}var d=i.dimensions;Array.isArray(d)&&d.length>r&&(p.log("parcoords traces support up to "+r+" dimensions at the moment"),d.splice(r));var o=e(i,l,{name:"dimensions",layout:h,handleItemDefaults:s}),b=function(w,_,A,T,E){var k=E("line.color",A);if(v(w,"line")&&p.isArrayOrTypedArray(k)){if(k.length)return E("line.colorscale"),u(w,_,T,E,{prefix:"line.",cLetter:"c"}),k.length;_.line.color=A}return 1/0}(i,l,c,h,m);y(l,h,m),Array.isArray(o)&&o.length||(l.visible=!1),f(l,o,"values",b);var g={family:h.font.family,size:Math.round(h.font.size/1.2),color:h.font.color};p.coerceFont(m,"labelfont",g),p.coerceFont(m,"tickfont",g),p.coerceFont(m,"rangefont",g),m("labelangle"),m("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":887,"./axisbrush":888,"./constants":891,"./merge_length":896}],893:[function(x,Q,K){"use strict";var p=x("../../lib").isTypedArray;K.convertTypedArray=function(v){return p(v)?Array.prototype.slice.call(v):v},K.isOrdinal=function(v){return!!v.tickvals},K.isVisible=function(v){return v.visible||!("visible"in v)}},{"../../lib":503}],894:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:x("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":887,"./base_plot":889,"./calc":890,"./defaults":892,"./plot":898}],895:[function(x,Q,K){"use strict";var p=x("glslify"),v=p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),u=p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),y=x("./constants").maxDimensionCount,e=x("../../lib"),n=new Uint8Array(4),t=new Uint8Array(4),a={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function r(o,b,g,w,_){var A=o._gl;A.enable(A.SCISSOR_TEST),A.scissor(b,g,w,_),o.clear({color:[0,0,0,0],depth:1})}function f(o,b,g,w,_,A){var T=A.key;g.drawCompleted||(o.read({x:0,y:0,width:1,height:1,data:n}),g.drawCompleted=!0),function E(k){var O=Math.min(w,_-k*w);0===k&&(window.cancelAnimationFrame(g.currentRafs[T]),delete g.currentRafs[T],r(o,A.scissorX,A.scissorY,A.scissorWidth,A.viewBoxSize[1])),g.clearOnly||(A.count=2*O,A.offset=2*k*w,b(A),k*w+O<_&&(g.currentRafs[T]=window.requestAnimationFrame(function(){E(k+1)})),g.drawCompleted=!1)}(0)}function s(o,b){for(var g=new Array(256),w=0;w<256;w++)g[w]=o(w/255).concat(b);return g}function i(o,b){return(o>>>8*b)%256/255}function l(o,b,g){for(var w=new Array(8*b),_=0,A=0;A<b;A++)for(var T=0;T<2;T++)for(var E=0;E<4;E++){var k=4*o+E,O=g[64*A+k];63===k&&0===T&&(O*=-1),w[_++]=O}return w}function c(o){var b="0"+o;return b.substr(b.length-2)}function h(o){return o<y?"p"+c(o+1)+"_"+c(o+4):"colors"}function m(o,b,g,w,_,A,T,E,k,O,D,S,C,z){for(var B=[[],[]],U=0;U<64;U++)B[0][U]=U===_?1:0,B[1][U]=U===A?1:0;var G=o.lines.canvasOverdrag*z,X=o.domain,Z=o.canvasWidth*z,q=o.canvasHeight*z,W=o.pad.l*z,te=o.pad.b*z,R=o.layoutHeight*z,N=o.layoutWidth*z,V=o.deselectedLines.color;return e.extendFlat({key:D,resolution:[Z,q],viewBoxPos:[(T*=z)+G,E*=z],viewBoxSize:[k*=z,O*=z],i0:_,i1:A,dim0A:B[0].slice(0,16),dim0B:B[0].slice(16,32),dim0C:B[0].slice(32,48),dim0D:B[0].slice(48,64),dim1A:B[1].slice(0,16),dim1B:B[1].slice(16,32),dim1C:B[1].slice(32,48),dim1D:B[1].slice(48,64),drwLayer:S,contextColor:[V[0]/255,V[1]/255,V[2]/255,V[3]<1?V[3]:Math.max(1/255,Math.pow(1/o.lines.color.length,1/3))],scissorX:(w===b?0:T+G)+(W-G)+N*X.x[0],scissorWidth:(w===g?Z-T+G:k+.5)+(w===b?T+G:0),scissorY:E+te+R*X.y[0],scissorHeight:O,viewportX:W-G+N*X.x[0],viewportY:te+R*X.y[0],viewportWidth:Z,viewportHeight:q},C)}function d(o){var b=Math.max(0,Math.floor(2047*o[0]),0),g=Math.min(2047,Math.ceil(2047*o[1]),2047);return[Math.min(b,g),Math.max(b,g)]}Q.exports=function(o,b){var g,_,A,T,E=b.context,k=b.pick,O=b.regl,D=O._gl,S=D.getParameter(D.ALIASED_LINE_WIDTH_RANGE),C=Math.max(S[0],Math.min(S[1],b.viewModel.plotGlPixelRatio)),z={currentRafs:{},drawCompleted:!0,clearOnly:!1},B=function(q){for(var W={},te=0;te<=y;te+=4)W[h(te)]=q.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return W}(O),U=O.texture(a),G=[];Z(b);var X=O({profile:!1,blend:{enable:E,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!E,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:O.prop("scissorX"),y:O.prop("scissorY"),width:O.prop("scissorWidth"),height:O.prop("scissorHeight")}},viewport:{x:O.prop("viewportX"),y:O.prop("viewportY"),width:O.prop("viewportWidth"),height:O.prop("viewportHeight")},dither:!1,vert:v,frag:u,primitive:"lines",lineWidth:C,attributes:B,uniforms:{resolution:O.prop("resolution"),viewBoxPos:O.prop("viewBoxPos"),viewBoxSize:O.prop("viewBoxSize"),dim0A:O.prop("dim0A"),dim1A:O.prop("dim1A"),dim0B:O.prop("dim0B"),dim1B:O.prop("dim1B"),dim0C:O.prop("dim0C"),dim1C:O.prop("dim1C"),dim0D:O.prop("dim0D"),dim1D:O.prop("dim1D"),loA:O.prop("loA"),hiA:O.prop("hiA"),loB:O.prop("loB"),hiB:O.prop("hiB"),loC:O.prop("loC"),hiC:O.prop("hiC"),loD:O.prop("loD"),hiD:O.prop("hiD"),palette:U,contextColor:O.prop("contextColor"),maskTexture:O.prop("maskTexture"),drwLayer:O.prop("drwLayer"),maskHeight:O.prop("maskHeight")},offset:O.prop("offset"),count:O.prop("count")});function Z(q){g=q.model,_=q.viewModel.dimensions.slice(),A=_[0]?_[0].values.length:0;var W=g.lines,te=k?W.color.map(function(N,V){return V/W.color.length}):W.color,R=function(N,V,ee){for(var J=new Array(N*(y+4)),$=0,re=0;re<N;re++){for(var ne=0;ne<y;ne++)J[$++]=ne<V.length?V[ne].paddedUnitValues[re]:.5;J[$++]=i(re,2),J[$++]=i(re,1),J[$++]=i(re,0),J[$++]=Math.max(1e-6,Math.min(.999999,ee[re]))}return J}(A,_,te);(function(N,V,ee){for(var j=0;j<=y;j+=4)N[h(j)](l(j/4,V,ee))})(B,A,R),E||k||(U=O.texture(e.extendFlat({data:s(g.unitToColor,255)},a)))}return{render:function(q,W,te){var R,N,V,ee=q.length,j=1/0,J=-1/0;for(R=0;R<ee;R++)q[R].dim0.canvasX<j&&(j=q[R].dim0.canvasX,N=R),q[R].dim1.canvasX>J&&(J=q[R].dim1.canvasX,V=R);0===ee&&r(O,0,0,g.canvasWidth,g.canvasHeight);var $=function(be){var Te,he,me,Ae=[[],[]];for(me=0;me<64;me++){var we=!be&&me<_.length?_[me].brush.filter.getBounds():[-1/0,1/0];Ae[0][me]=we[0],Ae[1][me]=we[1]}var Se=new Array(16384);for(Te=0;Te<16384;Te++)Se[Te]=255;if(!be)for(Te=0;Te<_.length;Te++){var Pe=Te%8,ze=(Te-Pe)/8,He=Math.pow(2,Pe),tt=_[Te].brush.filter.get();if(!(tt.length<2)){var Oe=d(tt[0])[1];for(he=1;he<tt.length;he++){var Be=d(tt[he]);for(me=Oe+1;me<Be[0];me++)Se[8*me+ze]&=~He;Oe=Math.max(Oe,Be[1])}}}var Je={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Se};return T?T(Je):T=O.texture(Je),{maskTexture:T,maskHeight:2048,loA:Ae[0].slice(0,16),loB:Ae[0].slice(16,32),loC:Ae[0].slice(32,48),loD:Ae[0].slice(48,64),hiA:Ae[1].slice(0,16),hiB:Ae[1].slice(16,32),hiC:Ae[1].slice(32,48),hiD:Ae[1].slice(48,64)}}(E);for(R=0;R<ee;R++){var re=q[R],ne=re.dim0.crossfilterDimensionIndex,se=re.dim1.crossfilterDimensionIndex,ie=re.canvasX,ue=re.canvasY,le=ie+re.panelSizeX,de=re.plotGlPixelRatio;if(W||!G[ne]||G[ne][0]!==ie||G[ne][1]!==le){G[ne]=[ie,le];var ve=m(g,N,V,R,ne,se,ie,ue,re.panelSizeX,re.panelSizeY,re.dim0.crossfilterDimensionIndex,E?0:k?2:1,$,de);z.clearOnly=te,f(O,X,z,W?g.lines.blockLineCount:A,A,ve)}}},readPixel:function(q,W){return O.read({x:q,y:W,width:1,height:1,data:t}),t},readPixels:function(q,W,te,R){var N=new Uint8Array(4*te*R);return O.read({x:q,y:W,width:te,height:R,data:N}),N},destroy:function(){for(var q in o.style["pointer-events"]="none",U.destroy(),T&&T.destroy(),B)B[q].destroy()},update:Z}}},{"../../lib":503,"./constants":891,glslify:227}],896:[function(x,Q,K){"use strict";Q.exports=function(p,v,u,y){var e,n;for(y||(y=1/0),e=0;e<v.length;e++)(n=v[e]).visible&&(y=Math.min(y,n[u].length));for(y===1/0&&(y=0),p._length=y,e=0;e<v.length;e++)(n=v[e]).visible&&(n._length=y);return y}},{}],897:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=v.numberFormat,y=x("color-rgba"),e=x("../../plots/cartesian/axes"),n=v.strRotate,t=v.strTranslate,a=x("../../lib/svg_text_utils"),r=x("../../components/drawing"),f=x("../../components/colorscale"),s=x("../../lib/gup"),i=s.keyFun,l=s.repeat,c=s.unwrap,h=x("./helpers"),m=x("./constants"),d=x("./axisbrush"),o=x("./lines");function b(G,X,Z){return v.aggNums(G,null,X,Z)}function g(G,X){return _(b(Math.min,G,X),b(Math.max,G,X))}function w(G){var X=G.range;return X?_(X[0],X[1]):g(G.values,G._length)}function _(G,X){return!isNaN(G)&&isFinite(G)||(G=0),!isNaN(X)&&isFinite(X)||(X=0),G===X&&(0===G?(G-=1,X+=1):(G*=.9,X*=1.1)),[G,X]}function A(G,X,Z,q,W){var te,R,N=w(Z);return q?p.scale.ordinal().domain(q.map((te=u(Z.tickformat),R=W,R?function(V,ee){var j=R[ee];return null==j?te(V):j}:te))).range(q.map(function(V){return G-X+(V-N[0])/(N[1]-N[0])*(2*X-G)})):p.scale.linear().domain(N).range([G-X,X])}function T(G){if(G.tickvals){var X=w(G);return p.scale.ordinal().domain(G.tickvals).range(G.tickvals.map(function(Z){return(Z-X[0])/(X[1]-X[0])}))}}function E(G){var X=G.map(function(W){return W[0]}),Z=G.map(function(W){var te=y(W[1]);return p.rgb("rgb("+te[0]+","+te[1]+","+te[2]+")")}),q="rgb".split("").map(function(W){return p.scale.linear().clamp(!0).domain(X).range(Z.map((te=W,function(R){return R[te]})));var te});return function(W){return q.map(function(te){return te(W)})}}function k(G){return G.dimensions.some(function(X){return X.brush.filterSpecified})}function O(G,X,Z){var q=c(X),W=q.trace,te=h.convertTypedArray(q.lineColor),R=W.line,N={color:y(m.deselectedLineColor)},V=f.extractOpts(R),ee=V.reversescale?f.flipScale(q.cscale):q.cscale,j=W.domain,J=W.dimensions,$=G.width,re=W.labelangle,ne=W.labelside,se=W.labelfont,ie=W.tickfont,ue=W.rangefont,le=v.extendDeepNoArrays({},R,{color:te.map(p.scale.linear().domain(w({values:te,range:[V.min,V.max],_length:W._length}))),blockLineCount:m.blockLineCount,canvasOverdrag:m.overdrag*m.canvasPixelRatio}),de=Math.floor($*(j.x[1]-j.x[0])),ve=Math.floor(G.height*(j.y[1]-j.y[0])),_e=G.margin||{l:80,r:80,t:100,b:80},be=de,Te=ve;return{key:Z,colCount:J.filter(h.isVisible).length,dimensions:J,tickDistance:m.tickDistance,unitToColor:E(ee),lines:le,deselectedLines:N,labelAngle:re,labelSide:ne,labelFont:se,tickFont:ie,rangeFont:ue,layoutWidth:$,layoutHeight:G.height,domain:j,translateX:j.x[0]*$,translateY:G.height-j.y[1]*G.height,pad:_e,canvasWidth:be*m.canvasPixelRatio+2*le.canvasOverdrag,canvasHeight:Te*m.canvasPixelRatio,width:be,height:Te,canvasPixelRatio:m.canvasPixelRatio}}function D(G,X,Z){var $,re,q=Z.width,W=Z.height,te=Z.dimensions,R=Z.canvasPixelRatio,N=function($){return q*$/Math.max(1,Z.colCount-1)},V=m.verticalPadding/W,ee=($=W,re=m.verticalPadding,p.scale.linear().range([re,$-re])),j={key:Z.key,xScale:N,model:Z,inBrushDrag:!1},J={};return j.dimensions=te.filter(h.isVisible).map(function($,re){var Se,Pe,ne=(Se=$,Pe=V,p.scale.linear().domain(w(Se)).range([Pe,1-Pe])),se=J[$.label];J[$.label]=(se||0)+1;var ie=$.label+(se?"__"+se:""),ue=$.constraintrange,le=ue&&ue.length;le&&!Array.isArray(ue[0])&&(ue=[ue]);var de=le?ue.map(function(Se){return Se.map(ne)}):[[-1/0,1/0]],ve=$.values;ve.length>$._length&&(ve=ve.slice(0,$._length));var _e,be=$.tickvals;function Te(Se,Pe){return{val:Se,text:_e[Pe]}}function he(Se,Pe){return Se.val-Pe.val}if(Array.isArray(be)&&be.length){_e=$.ticktext,Array.isArray(_e)&&_e.length?_e.length>be.length?_e=_e.slice(0,be.length):be.length>_e.length&&(be=be.slice(0,_e.length)):_e=be.map(u($.tickformat));for(var me=1;me<be.length;me++)if(be[me]<be[me-1]){for(var Ae=be.map(Te).sort(he),we=0;we<be.length;we++)be[we]=Ae[we].val,_e[we]=Ae[we].text;break}}else be=void 0;return ve=h.convertTypedArray(ve),{key:ie,label:$.label,tickFormat:$.tickformat,tickvals:be,ticktext:_e,ordinal:h.isOrdinal($),multiselect:$.multiselect,xIndex:re,crossfilterDimensionIndex:re,visibleIndex:$._index,height:W,values:ve,paddedUnitValues:ve.map(ne),unitTickvals:be&&be.map(ne),xScale:N,x:N(re),canvasX:N(re)*R,unitToPaddedPx:ee,domainScale:A(W,m.verticalPadding,$,be,_e),ordinalScale:T($),parent:j,model:Z,brush:d.makeBrush(G,le,de,function(){G.linePickActive(!1)},function(){var Se=j;Se.focusLayer&&Se.focusLayer.render(Se.panels,!0);var Pe=k(Se);!G.contextShown()&&Pe?(Se.contextLayer&&Se.contextLayer.render(Se.panels,!0),G.contextShown(!0)):G.contextShown()&&!Pe&&(Se.contextLayer&&Se.contextLayer.render(Se.panels,!0,!0),G.contextShown(!1))},function(Se){if(j.focusLayer.render(j.panels,!0),j.pickLayer&&j.pickLayer.render(j.panels,!0),G.linePickActive(!0),X&&X.filterChanged){var Pe=ne.invert,ze=Se.map(function(He){return He.map(Pe).sort(v.sorterAsc)}).sort(function(He,tt){return He[0]-tt[0]});X.filterChanged(j.key,$._index,ze)}})}}),j}function S(G){G.classed(m.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function C(G,X){var q=G*Math.PI/180;return{dir:"top"===X?1:-1,dx:Math.sin(q),dy:Math.cos(q),degrees:G}}function z(G,X,Z){for(var q=X.panels||(X.panels=[]),W=G.data(),te=0;te<W.length-1;te++){var R=q[te]||(q[te]={}),N=W[te],V=W[te+1];R.dim0=N,R.dim1=V,R.canvasX=N.canvasX,R.panelSizeX=V.canvasX-N.canvasX,R.panelSizeY=X.model.canvasHeight,R.y=0,R.canvasY=0,R.plotGlPixelRatio=Z}}function B(G,X){return e.tickText(G._ax,X,!1).text}function U(G,X){if(G.ordinal)return"";var Z=G.domainScale.domain();return B(G.model.dimensions[G.visibleIndex],Z[X?Z.length-1:0])}Q.exports=function(G,X,Z,q){var W=G._fullLayout,te=W._toppaper,R=W._glcontainer,N=G._context.plotGlPixelRatio,V=G._fullLayout.paper_bgcolor;!function(we){for(var Se=0;Se<we.length;Se++)for(var Pe=0;Pe<we[Se].length;Pe++)for(var ze=we[Se][Pe].trace,He=ze.dimensions,tt=0;tt<He.length;tt++){var Oe=He[tt].values,Be=He[tt]._ax;Be&&(Be.range=Be.range?_(Be.range[0],Be.range[1]):g(Oe,ze._length),Be.dtick||(Be.dtick=.01*(Math.abs(Be.range[1]-Be.range[0])||1)),Be.tickformat=He[tt].tickformat,e.calcTicks(Be),Be.cleanRange())}}(X);var ee,j,J=(ee=!0,j=!1,{linePickActive:function(we){return arguments.length?ee=!!we:ee},contextShown:function(we){return arguments.length?j=!!we:j}}),$=X.filter(function(we){return c(we).trace.visible}).map(O.bind(0,Z)).map(D.bind(0,J,q));R.each(function(we,Se){return v.extendFlat(we,$[Se])});var re=R.selectAll(".gl-canvas").each(function(we){we.viewModel=$[0],we.viewModel.plotGlPixelRatio=N,we.viewModel.paperColor=V,we.model=we.viewModel?we.viewModel.model:null}),ne=null;re.filter(function(we){return we.pick}).style("pointer-events","auto").on("mousemove",function(we){if(J.linePickActive()&&we.lineLayer&&q&&q.hover){var Se=p.event,Pe=this.width,ze=this.height,He=p.mouse(this),tt=He[0],Oe=He[1];if(tt<0||Oe<0||tt>=Pe||Oe>=ze)return;var Be=we.lineLayer.readPixel(tt,ze-1-Oe),Je=0!==Be[3],Ye=Je?Be[2]+256*(Be[1]+256*Be[0]):null,nt={x:tt,y:Oe,clientX:Se.clientX,clientY:Se.clientY,dataIndex:we.model.key,curveNumber:Ye};Ye!==ne&&(Je?q.hover(nt):q.unhover&&q.unhover(nt),ne=Ye)}}),re.style("opacity",function(we){return we.pick?0:1}),te.style("background","rgba(255, 255, 255, 0)");var se=te.selectAll("."+m.cn.parcoords).data($,i);se.exit().remove(),se.enter().append("g").classed(m.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),se.attr("transform",function(we){return t(we.model.translateX,we.model.translateY)});var ie=se.selectAll("."+m.cn.parcoordsControlView).data(l,i);ie.enter().append("g").classed(m.cn.parcoordsControlView,!0),ie.attr("transform",function(we){return t(we.model.pad.l,we.model.pad.t)});var ue=ie.selectAll("."+m.cn.yAxis).data(function(we){return we.dimensions},i);ue.enter().append("g").classed(m.cn.yAxis,!0),ie.each(function(we){z(ue,we,N)}),re.each(function(we){we.viewModel&&(!we.lineLayer||q?we.lineLayer=o(this,we):we.lineLayer.update(we),(we.key||0===we.key)&&(we.viewModel[we.key]=we.lineLayer),we.lineLayer.render(we.viewModel.panels,!we.context||q))}),ue.attr("transform",function(we){return t(we.xScale(we.xIndex),0)}),ue.call(p.behavior.drag().origin(function(we){return we}).on("drag",function(we){var Se=we.parent;J.linePickActive(!1),we.x=Math.max(-m.overdrag,Math.min(we.model.width+m.overdrag,p.event.x)),we.canvasX=we.x*we.model.canvasPixelRatio,ue.sort(function(Pe,ze){return Pe.x-ze.x}).each(function(Pe,ze){Pe.xIndex=ze,Pe.x=we===Pe?Pe.x:Pe.xScale(Pe.xIndex),Pe.canvasX=Pe.x*Pe.model.canvasPixelRatio}),z(ue,Se,N),ue.filter(function(Pe){return 0!==Math.abs(we.xIndex-Pe.xIndex)}).attr("transform",function(Pe){return t(Pe.xScale(Pe.xIndex),0)}),p.select(this).attr("transform",t(we.x,0)),ue.each(function(Pe,ze,He){He===we.parent.key&&(Se.dimensions[ze]=Pe)}),Se.contextLayer&&Se.contextLayer.render(Se.panels,!1,!k(Se)),Se.focusLayer.render&&Se.focusLayer.render(Se.panels)}).on("dragend",function(we){var Se=we.parent;we.x=we.xScale(we.xIndex),we.canvasX=we.x*we.model.canvasPixelRatio,z(ue,Se,N),p.select(this).attr("transform",function(Pe){return t(Pe.x,0)}),Se.contextLayer&&Se.contextLayer.render(Se.panels,!1,!k(Se)),Se.focusLayer&&Se.focusLayer.render(Se.panels),Se.pickLayer&&Se.pickLayer.render(Se.panels,!0),J.linePickActive(!0),q&&q.axesMoved&&q.axesMoved(Se.key,Se.dimensions.map(function(Pe){return Pe.crossfilterDimensionIndex}))})),ue.exit().remove();var le=ue.selectAll("."+m.cn.axisOverlays).data(l,i);le.enter().append("g").classed(m.cn.axisOverlays,!0),le.selectAll("."+m.cn.axis).remove();var de=le.selectAll("."+m.cn.axis).data(l,i);de.enter().append("g").classed(m.cn.axis,!0),de.each(function(we){var Se=we.model.height/we.model.tickDistance,Pe=we.domainScale,ze=Pe.domain();p.select(this).call(p.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Se,we.tickFormat).tickValues(we.ordinal?ze:null).tickFormat(function(He){return h.isOrdinal(we)?He:B(we.model.dimensions[we.visibleIndex],He)}).scale(Pe)),r.font(de.selectAll("text"),we.model.tickFont)}),de.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),de.selectAll("text").style("text-shadow",a.makeTextShadow(V)).style("cursor","default");var ve=le.selectAll("."+m.cn.axisHeading).data(l,i);ve.enter().append("g").classed(m.cn.axisHeading,!0);var _e=ve.selectAll("."+m.cn.axisTitle).data(l,i);_e.enter().append("text").classed(m.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),_e.text(function(we){return we.label}).each(function(we){var Se=p.select(this);r.font(Se,we.model.labelFont),a.convertToTspans(Se,G)}).attr("transform",function(we){var Se=C(we.model.labelAngle,we.model.labelSide),Pe=m.axisTitleOffset;return(Se.dir>0?"":t(0,2*Pe+we.model.height))+n(Se.degrees)+t(-Pe*Se.dx,-Pe*Se.dy)}).attr("text-anchor",function(we){var Se=C(we.model.labelAngle,we.model.labelSide);return 2*Math.abs(Se.dx)>Math.abs(Se.dy)?Se.dir*Se.dx<0?"start":"end":"middle"});var be=le.selectAll("."+m.cn.axisExtent).data(l,i);be.enter().append("g").classed(m.cn.axisExtent,!0);var Te=be.selectAll("."+m.cn.axisExtentTop).data(l,i);Te.enter().append("g").classed(m.cn.axisExtentTop,!0),Te.attr("transform",t(0,-m.axisExtentOffset));var he=Te.selectAll("."+m.cn.axisExtentTopText).data(l,i);he.enter().append("text").classed(m.cn.axisExtentTopText,!0).call(S),he.text(function(we){return U(we,!0)}).each(function(we){r.font(p.select(this),we.model.rangeFont)});var me=be.selectAll("."+m.cn.axisExtentBottom).data(l,i);me.enter().append("g").classed(m.cn.axisExtentBottom,!0),me.attr("transform",function(we){return t(0,we.model.height+m.axisExtentOffset)});var Ae=me.selectAll("."+m.cn.axisExtentBottomText).data(l,i);Ae.enter().append("text").classed(m.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(S),Ae.text(function(we){return U(we,!1)}).each(function(we){r.font(p.select(this),we.model.rangeFont)}),d.ensureAxisBrush(le,V)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":888,"./constants":891,"./helpers":893,"./lines":895,"@plotly/d3":58,"color-rgba":91}],898:[function(x,Q,K){"use strict";var p=x("./parcoords"),v=x("../../lib/prepare_regl"),u=x("./helpers").isVisible;function y(e,n,t){var a=n.indexOf(t),r=e.indexOf(a);return-1===r&&(r+=n.length),r}Q.exports=function(e,n){var t=e._fullLayout;if(v(e)){var a={},r={},f={},s={},i=t._size;n.forEach(function(l,c){var h=l[0].trace;f[c]=h.index;var m=s[c]=h._fullInput.index;a[c]=e.data[m].dimensions,r[c]=e.data[m].dimensions.slice()}),p(e,n,{width:i.w,height:i.h,margin:{t:i.t,r:i.r,b:i.b,l:i.l}},{filterChanged:function(l,c,h){var m=r[l][c],d=h.map(function(A){return A.slice()}),o="dimensions["+c+"].constraintrange",b=t._tracePreGUI[e._fullData[f[l]]._fullInput.uid];void 0===b[o]&&(b[o]=m.constraintrange||null);var w=e._fullData[f[l]].dimensions[c];d.length?(1===d.length&&(d=d[0]),m.constraintrange=d,w.constraintrange=d.slice(),d=[d]):(delete m.constraintrange,delete w.constraintrange,d=null);var _={};_[o]=d,e.emit("plotly_restyle",[_,[s[l]]])},hover:function(l){e.emit("plotly_hover",l)},unhover:function(l){e.emit("plotly_unhover",l)},axesMoved:function(l,c){var m,d,h=(m=c,d=r[l].filter(u),function(o,b){return y(m,d,o)-y(m,d,b)});a[l].sort(h),r[l].filter(function(m){return!u(m)}).sort(function(m){return r[l].indexOf(m)}).forEach(function(m){a[l].splice(a[l].indexOf(m),1),a[l].splice(r[l].indexOf(m),0,m)}),e.emit("plotly_restyle",[{dimensions:[a[l]]},[s[l]]])}})}}},{"../../lib/prepare_regl":516,"./helpers":893,"./parcoords":897}],899:[function(x,Q,K){"use strict";var p=x("../../plots/attributes"),v=x("../../plots/domain").attributes,u=x("../../plots/font_attributes"),y=x("../../components/color/attributes"),e=x("../../plots/template_attributes").hovertemplateAttrs,n=x("../../plots/template_attributes").texttemplateAttrs,t=x("../../lib/extend").extendFlat,a=u({editType:"plot",arrayOk:!0,colorEditType:"plot"});Q.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:y.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:t({},p.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:n({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:t({},a,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:t({},a,{}),outsidetextfont:t({},a,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:t({},a,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:v({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:t({},a,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],900:[function(x,Q,K){"use strict";var p=x("../../plots/plots");K.name="pie",K.plot=function(v,u,y,e){p.plotBasePlot(K.name,v,u,y,e)},K.clean=function(v,u,y,e){p.cleanBasePlot(K.name,v,u,y,e)}},{"../../plots/plots":619}],901:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("tinycolor2"),u=x("../../components/color"),y={};function e(t){return function(a,r){return!!a&&!!(a=v(a)).isValid()&&(a=u.addOpacity(a,a.getAlpha()),t[r]||(t[r]=a),a)}}function n(t,a){var r,f=JSON.stringify(t),s=a[f];if(!s){for(s=t.slice(),r=0;r<t.length;r++)s.push(v(t[r]).lighten(20).toHexString());for(r=0;r<t.length;r++)s.push(v(t[r]).darken(20).toHexString());a[f]=s}return s}Q.exports={calc:function(t,a){var r,f,s=[],i=t._fullLayout,l=i.hiddenlabels||[],c=a.labels,h=a.marker.colors||[],m=a.values,d=a._length,o=a._hasValues&&d;if(a.dlabel)for(c=new Array(d),r=0;r<d;r++)c[r]=String(a.label0+r*a.dlabel);var b={},g=e(i["_"+a.type+"colormap"]),w=0,_=!1;for(r=0;r<d;r++){var A,T,E;if(o){if(!p(A=m[r])||(A=+A)<0)continue}else A=1;void 0!==(T=c[r])&&""!==T||(T=r);var k=b[T=String(T)];void 0===k?(b[T]=s.length,(E=-1!==l.indexOf(T))||(w+=A),s.push({v:A,label:T,color:g(h[r],T),i:r,pts:[r],hidden:E})):(_=!0,(f=s[k]).v+=A,f.pts.push(r),f.hidden||(w+=A),!1===f.color&&h[r]&&(f.color=g(h[r],T)))}return("funnelarea"===a.type?_:a.sort)&&s.sort(function(O,D){return D.v-O.v}),s[0]&&(s[0].vTotal=w),s},crossTraceCalc:function(t,a){var r=(a||{}).type;r||(r="pie");var f=t._fullLayout,s=t.calcdata,i=f[r+"colorway"],l=f["_"+r+"colormap"];f["extend"+r+"colors"]&&(i=n(i,y));for(var c=0,h=0;h<s.length;h++){var m=s[h];if(m[0].trace.type===r)for(var d=0;d<m.length;d++){var o=m[d];!1===o.color&&(l[o.label]?o.color=l[o.label]:(l[o.label]=o.color=i[c%i.length],c++))}}},makePullColorFn:e,generateExtendedColors:n}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],902:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib"),u=x("./attributes"),y=x("../../plots/domain").defaults,e=x("../bar/defaults").handleText;function n(t,a){var r=Array.isArray(t),f=v.isArrayOrTypedArray(a),s=Math.min(r?t.length:1/0,f?a.length:1/0);if(isFinite(s)||(s=0),s&&f){for(var i,l=0;l<s;l++){var c=a[l];if(p(c)&&c>0){i=!0;break}}i||(s=0)}return{hasLabels:r,hasValues:f,len:s}}Q.exports={handleLabelsAndValues:n,supplyDefaults:function(t,a,r,f){function s(g,w){return v.coerce(t,a,u,g,w)}var i=n(s("labels"),s("values")),l=i.len;if(a._hasLabels=i.hasLabels,a._hasValues=i.hasValues,!a._hasLabels&&a._hasValues&&(s("label0"),s("dlabel")),l){a._length=l,s("marker.line.width")&&s("marker.line.color"),s("marker.colors"),s("scalegroup");var c,h=s("text"),m=s("texttemplate");if(m||(c=s("textinfo",Array.isArray(h)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),m||c&&"none"!==c){var d=s("textposition");e(t,a,f,s,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(d)||"auto"===d||"outside"===d)&&s("automargin"),("inside"===d||"auto"===d||Array.isArray(d))&&s("insidetextorientation")}y(a,f,s);var o=s("hole");if(s("title.text")){var b=s("title.position",o?"middle center":"top center");o||"middle center"!==b||(a.title.position="top center"),v.coerceFont(s,"title.font",f.font)}s("sort"),s("direction"),s("rotation"),s("pull")}else a.visible=!1}}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":899,"fast-isnumeric":190}],903:[function(x,Q,K){"use strict";var p=x("../../components/fx/helpers").appendArrayMultiPointValues;Q.exports=function(v,u){var y={curveNumber:u.index,pointNumbers:v.pts,data:u._input,fullData:u,label:v.label,color:v.color,value:v.v,percent:v.percent,text:v.text,bbox:v.bbox,v:v.v};return 1===v.pts.length&&(y.pointNumber=y.i=v.pts[0]),p(y,u,v.pts),"funnelarea"===u.type&&(delete y.v,delete y.i),y}},{"../../components/fx/helpers":402}],904:[function(x,Q,K){"use strict";var p=x("../../lib");function v(u){return-1!==u.indexOf("e")?u.replace(/[.]?0+e/,"e"):-1!==u.indexOf(".")?u.replace(/[.]?0+$/,""):u}K.formatPiePercent=function(u,y){var e=v((100*u).toPrecision(3));return p.numSeparate(e,y)+"%"},K.formatPieValue=function(u,y){var e=v(u.toPrecision(10));return p.numSeparate(e,y)},K.getFirstFilled=function(u,y){if(Array.isArray(u))for(var e=0;e<y.length;e++){var n=u[y[e]];if(n||0===n||""===n)return n}},K.castOption=function(u,y){return Array.isArray(u)?K.getFirstFilled(u,y):u||void 0},K.getRotationAngle=function(u){return("auto"===u?0:u)*Math.PI/180}},{"../../lib":503}],905:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults").supplyDefaults,supplyLayoutDefaults:x("./layout_defaults"),layoutAttributes:x("./layout_attributes"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot").plot,style:x("./style"),styleOne:x("./style_one"),moduleType:"trace",name:"pie",basePlotModule:x("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":899,"./base_plot":900,"./calc":901,"./defaults":902,"./layout_attributes":906,"./layout_defaults":907,"./plot":908,"./style":909,"./style_one":910}],906:[function(x,Q,K){"use strict";Q.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],907:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./layout_attributes");Q.exports=function(u,y){function e(n,t){return p.coerce(u,y,v,n,t)}e("hiddenlabels"),e("piecolorway",y.colorway),e("extendpiecolors")}},{"../../lib":503,"./layout_attributes":906}],908:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../plots/plots"),u=x("../../components/fx"),y=x("../../components/color"),e=x("../../components/drawing"),n=x("../../lib"),t=n.strScale,a=n.strTranslate,r=x("../../lib/svg_text_utils"),f=x("../bar/uniform_text"),s=f.recordMinTextSize,i=f.clearMinTextSize,l=x("../bar/constants").TEXTPAD,c=x("./helpers"),h=x("./event_data"),m=x("../../lib").isValidTextValue;function d(X,Z,q){var W=q[0],te=W.cx,R=W.cy,N=W.trace,V="funnelarea"===N.type;"_hasHoverLabel"in N||(N._hasHoverLabel=!1),"_hasHoverEvent"in N||(N._hasHoverEvent=!1),X.on("mouseover",function(ee){var j=Z._fullLayout,J=Z._fullData[N.index];if(!Z._dragging&&!1!==j.hovermode){var $=J.hoverinfo;if(Array.isArray($)&&($=u.castHoverinfo({hoverinfo:[c.castOption($,ee.pts)],_module:N._module},j,0)),"all"===$&&($="label+text+value+percent+name"),J.hovertemplate||"none"!==$&&"skip"!==$&&$){var re=ee.rInscribed||0,ne=te+ee.pxmid[0]*(1-re),se=R+ee.pxmid[1]*(1-re),ie=j.separators,ue=[];if($&&-1!==$.indexOf("label")&&ue.push(ee.label),ee.text=c.castOption(J.hovertext||J.text,ee.pts),$&&-1!==$.indexOf("text")){var le=ee.text;n.isValidTextValue(le)&&ue.push(le)}ee.value=ee.v,ee.valueLabel=c.formatPieValue(ee.v,ie),$&&-1!==$.indexOf("value")&&ue.push(ee.valueLabel),ee.percent=ee.v/W.vTotal,ee.percentLabel=c.formatPiePercent(ee.percent,ie),$&&-1!==$.indexOf("percent")&&ue.push(ee.percentLabel);var de=J.hoverlabel,ve=de.font,_e=[];u.loneHover({trace:N,x0:ne-re*W.r,x1:ne+re*W.r,y:se,_x0:V?te+ee.TL[0]:ne-re*W.r,_x1:V?te+ee.TR[0]:ne+re*W.r,_y0:V?R+ee.TL[1]:se-re*W.r,_y1:V?R+ee.BL[1]:se+re*W.r,text:ue.join("<br>"),name:J.hovertemplate||-1!==$.indexOf("name")?J.name:void 0,idealAlign:ee.pxmid[0]<0?"left":"right",color:c.castOption(de.bgcolor,ee.pts)||ee.color,borderColor:c.castOption(de.bordercolor,ee.pts),fontFamily:c.castOption(ve.family,ee.pts),fontSize:c.castOption(ve.size,ee.pts),fontColor:c.castOption(ve.color,ee.pts),nameLength:c.castOption(de.namelength,ee.pts),textAlign:c.castOption(de.align,ee.pts),hovertemplate:c.castOption(J.hovertemplate,ee.pts),hovertemplateLabels:ee,eventData:[h(ee,J)]},{container:j._hoverlayer.node(),outerContainer:j._paper.node(),gd:Z,inOut_bbox:_e}),ee.bbox=_e[0],N._hasHoverLabel=!0}N._hasHoverEvent=!0,Z.emit("plotly_hover",{points:[h(ee,J)],event:p.event})}}),X.on("mouseout",function(ee){var j=Z._fullLayout,J=Z._fullData[N.index],$=p.select(this).datum();N._hasHoverEvent&&(ee.originalEvent=p.event,Z.emit("plotly_unhover",{points:[h($,J)],event:p.event}),N._hasHoverEvent=!1),N._hasHoverLabel&&(u.loneUnhover(j._hoverlayer.node()),N._hasHoverLabel=!1)}),X.on("click",function(ee){Z._dragging||!1===Z._fullLayout.hovermode||(Z._hoverdata=[h(ee,Z._fullData[N.index])],u.click(Z,p.event))})}function o(X,Z,q){var W=c.castOption(X.insidetextfont.color,Z.pts);!W&&X._input.textfont&&(W=c.castOption(X._input.textfont.color,Z.pts));var te=c.castOption(X.insidetextfont.family,Z.pts)||c.castOption(X.textfont.family,Z.pts)||q.family,R=c.castOption(X.insidetextfont.size,Z.pts)||c.castOption(X.textfont.size,Z.pts)||q.size;return{color:W||y.contrast(Z.color),family:te,size:R}}function b(X,Z){for(var q,W,te=0;te<X.length;te++)if((W=(q=X[te][0]).trace).title.text){var R=W.title.text;W._meta&&(R=n.templateString(R,W._meta));var N=e.tester.append("text").attr("data-notex",1).text(R).call(e.font,W.title.font).call(r.convertToTspans,Z),V=e.bBox(N.node(),!0);q.titleBox={width:V.width,height:V.height},N.remove()}}function g(X,Z,q){var W=q.r||Z.rpx1,te=Z.rInscribed;if(Z.startangle===Z.stopangle)return{rCenter:1-te,scale:0,rotate:0,textPosAngle:0};var R,N=Z.ring,V=1===N&&Math.abs(Z.startangle-Z.stopangle)===2*Math.PI,ee=Z.halfangle,j=Z.midangle,J=q.trace.insidetextorientation,$="horizontal"===J,re="tangential"===J,ne="radial"===J,se="auto"===J,ie=[];if(!se){var ue,le=function(he,me){if(tt=(Pe=Z).stopangle,(He=Pe.startangle)>(ze=he)&&ze>tt||He<ze&&ze<tt){var Ae=Math.abs(he-Z.startangle),we=Math.abs(he-Z.stopangle),Se=Ae<we?Ae:we;(R="tan"===me?_(X,W,N,Se,0):w(X,W,N,Se,Math.PI/2)).textPosAngle=he,ie.push(R)}var Pe,ze,He,tt};if($||re){for(ue=4;ue>=-4;ue-=2)le(Math.PI*ue,"tan");for(ue=4;ue>=-4;ue-=2)le(Math.PI*(ue+1),"tan")}if($||ne){for(ue=4;ue>=-4;ue-=2)le(Math.PI*(ue+1.5),"rad");for(ue=4;ue>=-4;ue-=2)le(Math.PI*(ue+.5),"rad")}}if(V||se||$){var de=Math.sqrt(X.width*X.width+X.height*X.height);if((R={scale:te*W*2/de,rCenter:1-te,rotate:0}).textPosAngle=(Z.startangle+Z.stopangle)/2,R.scale>=1)return R;ie.push(R)}(se||ne)&&((R=w(X,W,N,ee,j)).textPosAngle=(Z.startangle+Z.stopangle)/2,ie.push(R)),(se||re)&&((R=_(X,W,N,ee,j)).textPosAngle=(Z.startangle+Z.stopangle)/2,ie.push(R));for(var ve=0,_e=0,be=0;be<ie.length;be++){var Te=ie[be].scale;if(_e<Te&&(_e=Te,ve=be),!se&&_e>=1)break}return ie[ve]}function w(X,Z,q,W,te){Z=Math.max(0,Z-2*l);var R=X.width/X.height,N=E(R,W,Z,q);return{scale:2*N/X.height,rCenter:A(R,N/Z),rotate:T(te)}}function _(X,Z,q,W,te){Z=Math.max(0,Z-2*l);var R=X.height/X.width,N=E(R,W,Z,q);return{scale:2*N/X.width,rCenter:A(R,N/Z),rotate:T(te+Math.PI/2)}}function A(X,Z){return Math.cos(Z)-X*Z}function T(X){return(180/Math.PI*X+720)%180-90}function E(X,Z,q,W){var te=X+1/(2*Math.tan(Z));return q*Math.min(1/(Math.sqrt(te*te+.5)+te),W/(Math.sqrt(X*X+W/2)+X))}function k(X,Z){return X.v!==Z.vTotal||Z.trace.hole?Math.min(1/(1+1/Math.sin(X.halfangle)),X.ring/2):1}function O(X,Z){var q=Z.pxmid[0],W=Z.pxmid[1],te=X.width/2,R=X.height/2;return q<0&&(te*=-1),W<0&&(R*=-1),{scale:1,rCenter:1,rotate:0,x:te+Math.abs(R)*(te>0?1:-1)/2,y:R/(1+q*q/(W*W)),outside:!0}}function D(X,Z){var q,W,te,R=X.trace,N={x:X.cx,y:X.cy},V={tx:0,ty:0};V.ty+=R.title.font.size,te=C(R),-1!==R.title.position.indexOf("top")?(N.y-=(1+te)*X.r,V.ty-=X.titleBox.height):-1!==R.title.position.indexOf("bottom")&&(N.y+=(1+te)*X.r);var j,J=X.r/(void 0===(j=X.trace.aspectratio)?1:j),$=Z.w*(R.domain.x[1]-R.domain.x[0])/2;return-1!==R.title.position.indexOf("left")?($+=J,N.x-=(1+te)*J,V.tx+=X.titleBox.width/2):-1!==R.title.position.indexOf("center")?$*=2:-1!==R.title.position.indexOf("right")&&($+=J,N.x+=(1+te)*J,V.tx-=X.titleBox.width/2),q=$/X.titleBox.width,W=S(X,Z)/X.titleBox.height,{x:N.x,y:N.y,scale:Math.min(q,W),tx:V.tx,ty:V.ty}}function S(X,Z){var q=X.trace;return Math.min(X.titleBox.height,Z.h*(q.domain.y[1]-q.domain.y[0])/2)}function C(X){var Z,q=X.pull;if(!q)return 0;if(Array.isArray(q))for(q=0,Z=0;Z<X.pull.length;Z++)X.pull[Z]>q&&(q=X.pull[Z]);return q}function z(X,Z){for(var q=[],W=0;W<X.length;W++){var te=X[W][0],R=te.trace,N=R.domain,V=Z.w*(N.x[1]-N.x[0]),ee=Z.h*(N.y[1]-N.y[0]);R.title.text&&"middle center"!==R.title.position&&(ee-=S(te,Z));var J=ee/2;"funnelarea"!==R.type||R.scalegroup||(J/=R.aspectratio),te.r=Math.min(V/2,J)/(1+C(R)),te.cx=Z.l+Z.w*(R.domain.x[1]+R.domain.x[0])/2,te.cy=Z.t+Z.h*(1-R.domain.y[0])-ee/2,R.title.text&&-1!==R.title.position.indexOf("bottom")&&(te.cy-=S(te,Z)),R.scalegroup&&-1===q.indexOf(R.scalegroup)&&q.push(R.scalegroup)}!function($,re){for(var ne,se,ie,ue=0;ue<re.length;ue++){var le=1/0,de=re[ue];for(se=0;se<$.length;se++)if((ie=(ne=$[se][0]).trace).scalegroup===de){var ve;if("pie"===ie.type)ve=ne.r*ne.r;else if("funnelarea"===ie.type){var _e,be;ie.aspectratio>1?be=(_e=ne.r)/ie.aspectratio:_e=(be=ne.r)*ie.aspectratio,ve=(_e*=(1+ie.baseratio)/2)*be}le=Math.min(le,ve/ne.vTotal)}for(se=0;se<$.length;se++)if((ie=(ne=$[se][0]).trace).scalegroup===de){var Te=le*ne.vTotal;"funnelarea"===ie.type&&(Te/=(1+ie.baseratio)/2,Te/=ie.aspectratio),ne.r=Math.sqrt(Te)}}}(X,q)}function B(X,Z){return[X*Math.sin(Z),-X*Math.cos(Z)]}function U(X,Z,q){var ve,W=X._fullLayout,te=q.trace,R=te.texttemplate,N=te.textinfo;if(!R&&N&&"none"!==N){var V,ee=N.split("+"),j=function(ve){return-1!==ee.indexOf(ve)},J=j("label"),$=j("text"),re=j("value"),ne=j("percent"),se=W.separators;if(V=J?[Z.label]:[],$){var ie=c.getFirstFilled(te.text,Z.pts);m(ie)&&V.push(ie)}re&&V.push(c.formatPieValue(Z.v,se)),ne&&V.push(c.formatPiePercent(Z.v/q.vTotal,se)),Z.text=V.join("<br>")}if(R){var ue=n.castOption(te,Z.i,"texttemplate");if(ue){var le={label:(ve=Z).label,value:ve.v,valueLabel:c.formatPieValue(ve.v,W.separators),percent:ve.v/q.vTotal,percentLabel:c.formatPiePercent(ve.v/q.vTotal,W.separators),color:ve.color,text:ve.text,customdata:n.castOption(te,ve.i,"customdata")},de=c.getFirstFilled(te.text,Z.pts);(m(de)||""===de)&&(le.text=de),Z.text=n.texttemplateString(ue,le,X._fullLayout._d3locale,le,te._meta||{})}else Z.text=""}}function G(X,Z){var q=X.rotate*Math.PI/180,W=Math.cos(q),te=Math.sin(q),R=(Z.left+Z.right)/2,N=(Z.top+Z.bottom)/2;X.textX=R*W-N*te,X.textY=R*te+N*W,X.noCenter=!0}Q.exports={plot:function(X,Z){var q=X._fullLayout,W=q._size;i("pie",q),b(Z,X),z(Z,W);var te=n.makeTraceGroups(q._pielayer,Z,"trace").each(function(R){var N=p.select(this),V=R[0],ee=V.trace;(function(j){var J,$,re,ne=j[0],se=ne.r,ie=ne.trace,ue=c.getRotationAngle(ie.rotation),le=2*Math.PI/ne.vTotal,de="px0",ve="px1";if("counterclockwise"===ie.direction){for(J=0;J<j.length&&j[J].hidden;J++);if(J===j.length)return;ue+=le*j[J].v,le*=-1,de="px1",ve="px0"}for(re=B(se,ue),J=0;J<j.length;J++)($=j[J]).hidden||($[de]=re,$.startangle=ue,$.pxmid=B(se,ue+=le*$.v/2),$.midangle=ue,re=B(se,ue+=le*$.v/2),$.stopangle=ue,$[ve]=re,$.largeArc=$.v>ne.vTotal/2?1:0,$.halfangle=Math.PI*Math.min($.v/ne.vTotal,.5),$.ring=1-ie.hole,$.rInscribed=k($,ne))})(R),N.attr("stroke-linejoin","round"),N.each(function(){var j=p.select(this).selectAll("g.slice").data(R);j.enter().append("g").classed("slice",!0),j.exit().remove();var J=[[[],[]],[[],[]]],$=!1;j.each(function(ve,_e){if(ve.hidden)p.select(this).selectAll("path,g").remove();else{ve.pointNumber=ve.i,ve.curveNumber=ee.index,J[ve.pxmid[1]<0?0:1][ve.pxmid[0]<0?0:1].push(ve);var be=V.cx,Te=V.cy,he=p.select(this),me=he.selectAll("path.surface").data([ve]);if(me.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),he.call(d,X,R),ee.pull){var Ae=+c.castOption(ee.pull,ve.pts)||0;Ae>0&&(be+=Ae*ve.pxmid[0],Te+=Ae*ve.pxmid[1])}ve.cxFinal=be,ve.cyFinal=Te;var we=ee.hole;if(ve.v===V.vTotal){var Se="M"+(be+ve.px0[0])+","+(Te+ve.px0[1])+Oe(ve.px0,ve.pxmid,!0,1)+Oe(ve.pxmid,ve.px0,!0,1)+"Z";me.attr("d",we?"M"+(be+we*ve.px0[0])+","+(Te+we*ve.px0[1])+Oe(ve.px0,ve.pxmid,!1,we)+Oe(ve.pxmid,ve.px0,!1,we)+"Z"+Se:Se)}else{var Pe=Oe(ve.px0,ve.px1,!0,1);if(we){var ze=1-we;me.attr("d","M"+(be+we*ve.px1[0])+","+(Te+we*ve.px1[1])+Oe(ve.px1,ve.px0,!1,we)+"l"+ze*ve.px0[0]+","+ze*ve.px0[1]+Pe+"Z")}else me.attr("d","M"+be+","+Te+"l"+ve.px0[0]+","+ve.px0[1]+Pe+"Z")}U(X,ve,V);var He=c.castOption(ee.textposition,ve.pts),tt=he.selectAll("g.slicetext").data(ve.text&&"none"!==He?[0]:[]);tt.enter().append("g").classed("slicetext",!0),tt.exit().remove(),tt.each(function(){var at,rt,St,Be=n.ensureSingle(p.select(this),"text","",function(at){at.attr("data-notex",1)}),Je=n.ensureUniformFontSize(X,"outside"===He?(St=q.font,{color:c.castOption((at=ee).outsidetextfont.color,(rt=ve).pts)||c.castOption(at.textfont.color,rt.pts)||St.color,family:c.castOption(at.outsidetextfont.family,rt.pts)||c.castOption(at.textfont.family,rt.pts)||St.family,size:c.castOption(at.outsidetextfont.size,rt.pts)||c.castOption(at.textfont.size,rt.pts)||St.size}):o(ee,ve,q.font));Be.text(ve.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,Je).call(r.convertToTspans,X);var Ye,nt=e.bBox(Be.node());if("outside"===He)Ye=O(nt,ve);else if(Ye=g(nt,ve,V),"auto"===He&&Ye.scale<1){var ft=n.ensureUniformFontSize(X,ee.outsidetextfont);Be.call(e.font,ft),Ye=O(nt=e.bBox(Be.node()),ve)}var dt=Ye.textPosAngle,Rt=void 0===dt?ve.pxmid:B(V.r,dt);if(Ye.targetX=be+Rt[0]*Ye.rCenter+(Ye.x||0),Ye.targetY=Te+Rt[1]*Ye.rCenter+(Ye.y||0),G(Ye,nt),Ye.outside){var Et=Ye.targetY;ve.yLabelMin=Et-nt.height/2,ve.yLabelMid=Et,ve.yLabelMax=Et+nt.height/2,ve.labelExtraX=0,ve.labelExtraY=0,$=!0}Ye.fontSize=Je.size,s(ee.type,Ye,q),R[_e].transform=Ye,Be.attr("transform",n.getTextTransform(Ye))})}function Oe(Be,Je,Ye,nt){return"a"+nt*V.r+","+nt*V.r+" 0 "+ve.largeArc+(Ye?" 1 ":" 0 ")+nt*(Je[0]-Be[0])+","+nt*(Je[1]-Be[1])}});var _e,re=p.select(this).selectAll("g.titletext").data(ee.title.text?[0]:[]);if(re.enter().append("g").classed("titletext",!0),re.exit().remove(),re.each(function(){var ve,Te,he,_e=n.ensureSingle(p.select(this),"text","",function(Te){Te.attr("data-notex",1)}),be=ee.title.text;ee._meta&&(be=n.templateString(be,ee._meta)),_e.text(be).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ee.title.font).call(r.convertToTspans,X),ve="middle center"===ee.title.position?(Te=V,he=Math.sqrt(Te.titleBox.width*Te.titleBox.width+Te.titleBox.height*Te.titleBox.height),{x:Te.cx,y:Te.cy,scale:Te.trace.hole*Te.r*2/he,tx:0,ty:-Te.titleBox.height/2+Te.trace.title.font.size}):D(V,W),_e.attr("transform",a(ve.x,ve.y)+t(Math.min(1,ve.scale))+a(ve.tx,ve.ty))}),$&&function(ve,_e){var be,Te,he,me,Ae,we,Se,Pe,ze,He,tt,Oe,Be;function Je(dt,Rt){return dt.pxmid[1]-Rt.pxmid[1]}function Ye(dt,Rt){return Rt.pxmid[1]-dt.pxmid[1]}function nt(dt,Rt){Rt||(Rt={});var Et,at,rt,St,Xt=Rt.labelExtraY+(Te?Rt.yLabelMax:Rt.yLabelMin),lr=Te?dt.yLabelMin:dt.yLabelMax,Ue=Te?dt.yLabelMax:dt.yLabelMin,Ze=dt.cyFinal+Ae(dt.px0[1],dt.px1[1]),Ne=Xt-lr;if(Ne*Se>0&&(dt.labelExtraY=Ne),Array.isArray(_e.pull))for(at=0;at<He.length;at++)(rt=He[at])===dt||(c.castOption(_e.pull,dt.pts)||0)>=(c.castOption(_e.pull,rt.pts)||0)||((dt.pxmid[1]-rt.pxmid[1])*Se>0?(Ne=rt.cyFinal+Ae(rt.px0[1],rt.px1[1])-lr-dt.labelExtraY)*Se>0&&(dt.labelExtraY+=Ne):(Ue+dt.labelExtraY-Ze)*Se>0&&(Et=3*we*Math.abs(at-He.indexOf(dt)),(St=rt.cxFinal+me(rt.px0[0],rt.px1[0])+Et-(dt.cxFinal+dt.pxmid[0])-dt.labelExtraX)*we>0&&(dt.labelExtraX+=St)))}for(Te=0;Te<2;Te++)for(he=Te?Je:Ye,Ae=Te?Math.max:Math.min,Se=Te?1:-1,be=0;be<2;be++){for(me=be?Math.max:Math.min,we=be?1:-1,(Pe=ve[Te][be]).sort(he),He=(ze=ve[1-Te][be]).concat(Pe),Oe=[],tt=0;tt<Pe.length;tt++)void 0!==Pe[tt].yLabelMid&&Oe.push(Pe[tt]);for(Be=!1,tt=0;Te&&tt<ze.length;tt++)if(void 0!==ze[tt].yLabelMid){Be=ze[tt];break}for(tt=0;tt<Oe.length;tt++){var ft=tt&&Oe[tt-1];Be&&!tt&&(ft=Be),nt(Oe[tt],ft)}}}(J,ee),_e=ee,j.each(function(be){var Te=p.select(this);if(be.labelExtraX||be.labelExtraY){var he=Te.select("g.slicetext text");be.transform.targetX+=be.labelExtraX,be.transform.targetY+=be.labelExtraY,he.attr("transform",n.getTextTransform(be.transform));var me=be.cxFinal+be.pxmid[0],Ae="M"+me+","+(be.cyFinal+be.pxmid[1]),we=(be.yLabelMax-be.yLabelMin)*(be.pxmid[0]<0?-1:1)/4;if(be.labelExtraX){var Se=be.labelExtraX*be.pxmid[1]/be.pxmid[0],Pe=be.yLabelMid+be.labelExtraY-(be.cyFinal+be.pxmid[1]);Math.abs(Se)>Math.abs(Pe)?Ae+="l"+Pe*be.pxmid[0]/be.pxmid[1]+","+Pe+"H"+(me+be.labelExtraX+we):Ae+="l"+be.labelExtraX+","+Se+"v"+(Pe-Se)+"h"+we}else Ae+="V"+(be.yLabelMid+be.labelExtraY)+"h"+we;n.ensureSingle(Te,"path","textline").call(y.stroke,_e.outsidetextfont.color).attr({"stroke-width":Math.min(2,_e.outsidetextfont.size/8),d:Ae,fill:"none"})}else Te.select("path.textline").remove()}),$&&ee.automargin){var ne=e.bBox(N.node()),se=ee.domain,le=(W.w*(se.x[1]-se.x[0])*.5-V.r)/W.w,de=(W.h*(se.y[1]-se.y[0])*.5-V.r)/W.h;v.autoMargin(X,"pie."+ee.uid+".automargin",{xl:se.x[0]-le,xr:se.x[1]+le,yb:se.y[0]-de,yt:se.y[1]+de,l:Math.max(V.cx-V.r-ne.left,0),r:Math.max(ne.right-(V.cx+V.r),0),b:Math.max(ne.bottom-(V.cy+V.r),0),t:Math.max(V.cy-V.r-ne.top,0),pad:5})}})});setTimeout(function(){te.selectAll("tspan").each(function(){var R=p.select(this);R.attr("dy")&&R.attr("dy",R.attr("dy"))})},0)},formatSliceLabel:U,transformInsideText:g,determineInsideTextFont:o,positionTitleOutside:D,prerenderTitles:b,layoutAreas:z,attachFxHandlers:d,computeTransform:G}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":903,"./helpers":904,"@plotly/d3":58}],909:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("./style_one"),u=x("../bar/uniform_text").resizeText;Q.exports=function(y){var e=y._fullLayout._pielayer.selectAll(".trace");u(y,e,"pie"),e.each(function(n){var t=n[0].trace,a=p.select(this);a.style({opacity:t.opacity}),a.selectAll("path.surface").each(function(r){p.select(this).call(v,r,t)})})}},{"../bar/uniform_text":664,"./style_one":910,"@plotly/d3":58}],910:[function(x,Q,K){"use strict";var p=x("../../components/color"),v=x("./helpers").castOption;Q.exports=function(u,y,e){var n=e.marker.line,t=v(n.color,y.pts)||p.defaultLine,a=v(n.width,y.pts)||0;u.style("stroke-width",a).call(p.fill,y.color).call(p.stroke,t)}},{"../../components/color":366,"./helpers":904}],911:[function(x,Q,K){"use strict";var p=x("../scatter/attributes");Q.exports={x:p.x,y:p.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:p.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":925}],912:[function(x,Q,K){"use strict";var p=x("../../../stackgl_modules").gl_pointcloud2d,v=x("../../lib/str2rgbarray"),u=x("../../plots/cartesian/autorange").findExtremes,y=x("../scatter/get_trace_color");function e(t,a){this.scene=t,this.uid=a,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=p(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var n=e.prototype;n.handlePick=function(t){var a=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*a],this.pickXYData[2*a+1]]:[this.pickXData[a],this.pickYData[a]],textLabel:Array.isArray(this.textLabels)?this.textLabels[a]:this.textLabels,color:this.color,name:this.name,pointIndex:a,hoverinfo:this.hoverinfo}},n.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=y(t,{})},n.updateFast=function(t){var a,r,f,s,i,l,c=this.xData=this.pickXData=t.x,h=this.yData=this.pickYData=t.y,m=this.pickXYData=t.xy,o=t.indices,b=this.bounds;if(m){if(f=m,a=m.length>>>1,t.xbounds&&t.ybounds)b[0]=t.xbounds[0],b[2]=t.xbounds[1],b[1]=t.ybounds[0],b[3]=t.ybounds[1];else for(l=0;l<a;l++)i=f[2*l+1],(s=f[2*l])<b[0]&&(b[0]=s),s>b[2]&&(b[2]=s),i<b[1]&&(b[1]=i),i>b[3]&&(b[3]=i);if(o)r=o;else for(r=new Int32Array(a),l=0;l<a;l++)r[l]=l}else for(a=c.length,f=new Float32Array(2*a),r=new Int32Array(a),l=0;l<a;l++)s=c[l],i=h[l],r[l]=l,f[2*l]=s,f[2*l+1]=i,s<b[0]&&(b[0]=s),s>b[2]&&(b[2]=s),i<b[1]&&(b[1]=i),i>b[3]&&(b[3]=i);this.idToIndex=r,this.pointcloudOptions.idToIndex=r,this.pointcloudOptions.positions=f;var g=v(t.marker.color),w=v(t.marker.border.color),_=t.opacity*t.marker.opacity;g[3]*=_,this.pointcloudOptions.color=g;var A=t.marker.blend;null===A&&(A=c.length<100||h.length<100),this.pointcloudOptions.blend=A,w[3]*=_,this.pointcloudOptions.borderColor=w;var T=t.marker.sizemin,E=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=T,this.pointcloudOptions.sizeMax=E,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var k=this.scene.xaxis,O=this.scene.yaxis,D=E/2||.5;t._extremes[k._id]=u(k,[b[0],b[2]],{ppad:D}),t._extremes[O._id]=u(O,[b[1],b[3]],{ppad:D})},n.dispose=function(){this.pointcloud.dispose()},Q.exports=function(t,a){var r=new e(t,a.uid);return r.update(a),r}},{"../../../stackgl_modules":1119,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":935}],913:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./attributes");Q.exports=function(u,y,e){function n(t,a){return p.coerce(u,y,v,t,a)}n("x"),n("y"),n("xbounds"),n("ybounds"),u.xy&&u.xy instanceof Float32Array&&(y.xy=u.xy),u.indices&&u.indices instanceof Int32Array&&(y.indices=u.indices),n("text"),n("marker.color",e),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",e),n("marker.border.arearatio"),y._length=null}},{"../../lib":503,"./attributes":911}],914:[function(x,Q,K){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("../scatter3d/calc"),plot:x("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:x("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":954,"./attributes":911,"./convert":912,"./defaults":913}],915:[function(x,Q,K){"use strict";var p=x("../../plots/font_attributes"),v=x("../../plots/attributes"),u=x("../../components/color/attributes"),y=x("../../components/fx/attributes"),e=x("../../plots/domain").attributes,n=x("../../plots/template_attributes").hovertemplateAttrs,t=x("../../components/colorscale/attributes"),a=x("../../plot_api/plot_template").templatedArray,r=x("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,f=x("../../lib/extend").extendFlat,s=x("../../plot_api/edit_types").overrideAll;(Q.exports=s({hoverinfo:f({},v.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:y.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:p({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:u.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:y.hoverlabel,hovertemplate:n({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:u.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:y.hoverlabel,hovertemplate:n({},{keys:["value","label"]}),colorscales:a("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:f(t().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],916:[function(x,Q,K){"use strict";var p=x("../../plot_api/edit_types").overrideAll,v=x("../../plots/get_data").getModuleCalcData,u=x("./plot"),y=x("../../components/fx/layout_attributes"),e=x("../../lib/setcursor"),n=x("../../components/dragelement"),t=x("../../plots/cartesian/select").prepSelect,a=x("../../lib"),r=x("../../registry");function f(s,i){var l=s._fullData[i],c=s._fullLayout,h=c.dragmode,d=l._bgRect;if("pan"!==h&&"zoom"!==h){e(d,"pan"===c.dragmode?"move":"crosshair");var o={_id:"x",c2p:a.identity,_offset:l._sankey.translateX,_length:l._sankey.width},b={_id:"y",c2p:a.identity,_offset:l._sankey.translateY,_length:l._sankey.height},g={gd:s,element:d.node(),plotinfo:{id:i,xaxis:o,yaxis:b,fillRangeItems:a.noop},subplot:i,xaxes:[o],yaxes:[b],doneFnCompleted:function(w){var _,A=s._fullData[i],T=A.node.groups.slice(),E=[];function k(C){for(var z=A._sankey.graph.nodes,B=0;B<z.length;B++)if(z[B].pointNumber===C)return z[B]}for(var O=0;O<w.length;O++){var D=k(w[O].pointNumber);if(D)if(D.group){for(var S=0;S<D.childrenNodes.length;S++)E.push(D.childrenNodes[S].pointNumber);T[D.pointNumber-A.node._count]=!1}else E.push(D.pointNumber)}_=T.filter(Boolean).concat([E]),r.call("_guiRestyle",s,{"node.groups":[_]},i)},prepFn:function(w,_,A){t(w,_,A,g,h)}};n.init(g)}}K.name="sankey",K.baseLayoutAttrOverrides=p({hoverlabel:y.hoverlabel},"plot","nested"),K.plot=function(s){var i=v(s.calcdata,"sankey")[0];u(s,i),K.updateFx(s)},K.clean=function(s,i,l,c){var h=c._has&&c._has("sankey"),m=i._has&&i._has("sankey");h&&!m&&(c._paperdiv.selectAll(".sankey").remove(),c._paperdiv.selectAll(".bgsankey").remove())},K.updateFx=function(s){for(var i=0;i<s._fullData.length;i++)f(s,i)}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":921}],917:[function(x,Q,K){"use strict";var p=x("strongly-connected-components"),v=x("../../lib"),u=x("../../lib/gup").wrap,y=v.isArrayOrTypedArray,e=v.isIndex,n=x("../../components/colorscale");Q.exports=function(a,r){var f=function(a){var r,f=a.node,s=a.link,i=[],l=y(s.color),c=y(s.customdata),h={},m={},d=s.colorscales.length;for(r=0;r<d;r++){var o=s.colorscales[r],b=n.extractScale(o,{cLetter:"c"}),g=n.makeColorScaleFunc(b);m[o.label]=g}var w=0;for(r=0;r<s.value.length;r++)s.source[r]>w&&(w=s.source[r]),s.target[r]>w&&(w=s.target[r]);var _,A=w+1;a.node._count=A;var T=a.node.groups,E={};for(r=0;r<T.length;r++){var k=T[r];for(_=0;_<k.length;_++){var O=k[_],D=A+r;E.hasOwnProperty(O)?v.warn("Node "+O+" is already part of a group."):E[O]=D}}var S={source:[],target:[]};for(r=0;r<s.value.length;r++){var C=s.value[r],z=s.source[r],B=s.target[r];if(C>0&&e(z,A)&&e(B,A)&&(!E.hasOwnProperty(z)||!E.hasOwnProperty(B)||E[z]!==E[B])){E.hasOwnProperty(B)&&(B=E[B]),E.hasOwnProperty(z)&&(z=E[z]),h[z=+z]=h[B=+B]=!0;var U="";s.label&&s.label[r]&&(U=s.label[r]);var G=null;U&&m.hasOwnProperty(U)&&(G=m[U]),i.push({pointNumber:r,label:U,color:l?s.color[r]:s.color,customdata:c?s.customdata[r]:s.customdata,concentrationscale:G,source:z,target:B,value:+C}),S.source.push(z),S.target.push(B)}}var X=A+T.length,Z=y(f.color),q=y(f.customdata),W=[];for(r=0;r<X;r++)h[r]&&W.push({group:r>A-1,childrenNodes:[],pointNumber:r,label:f.label[r],color:Z?f.color[r]:f.color,customdata:q?f.customdata[r]:f.customdata});var R=!1;return function(N,V,ee){for(var j=v.init2dArray(N,0),J=0;J<Math.min(V.length,ee.length);J++)if(v.isIndex(V[J],N)&&v.isIndex(ee[J],N)){if(V[J]===ee[J])return!0;j[V[J]].push(ee[J])}return p(j).components.some(function($){return $.length>1})}(X,S.source,S.target)&&(R=!0),{circular:R,links:i,nodes:W,groups:T,groupLookup:E}}(r);return u({circular:f.circular,_nodes:f.nodes,_links:f.links,_groups:f.groups,_groupLookup:f.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],918:[function(x,Q,K){"use strict";Q.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],919:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./attributes"),u=x("../../components/color"),y=x("tinycolor2"),e=x("../../plots/domain").defaults,n=x("../../components/fx/hoverlabel_defaults"),t=x("../../plot_api/plot_template"),a=x("../../plots/array_container_defaults");function r(f,s){function i(l,c){return p.coerce(f,s,v.link.colorscales,l,c)}i("label"),i("cmin"),i("cmax"),i("colorscale")}Q.exports=function(f,s,i,l){function c(E,k){return p.coerce(f,s,v,E,k)}var h=p.extendDeep(l.hoverlabel,f.hoverlabel),m=f.node,d=t.newContainer(s,"node");function o(E,k){return p.coerce(m,d,v.node,E,k)}o("label"),o("groups"),o("x"),o("y"),o("pad"),o("thickness"),o("line.color"),o("line.width"),o("hoverinfo",f.hoverinfo),n(m,d,o,h),o("hovertemplate");var b=l.colorway;o("color",d.label.map(function(E,k){return u.addOpacity(b[k%b.length],.8)})),o("customdata");var g=f.link||{},w=t.newContainer(s,"link");function _(E,k){return p.coerce(g,w,v.link,E,k)}_("label"),_("source"),_("target"),_("value"),_("line.color"),_("line.width"),_("hoverinfo",f.hoverinfo),n(g,w,_,h),_("hovertemplate");var A,T=y(l.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";_("color",p.repeat(T,w.value.length)),_("customdata"),a(g,w,{name:"colorscales",handleItemDefaults:r}),e(s,l,c),c("orientation"),c("valueformat"),c("valuesuffix"),d.x.length&&d.y.length&&(A="freeform"),c("arrangement",A),p.coerceFont(c,"textfont",p.extendFlat({},l.font)),s._length=null}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":915,tinycolor2:312}],920:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),moduleType:"trace",name:"sankey",basePlotModule:x("./base_plot"),selectPoints:x("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":915,"./base_plot":916,"./calc":917,"./defaults":919,"./plot":921,"./select.js":923}],921:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=v.numberFormat,y=x("./render"),e=x("../../components/fx"),n=x("../../components/color"),t=x("./constants").cn,a=v._;function r(g){return""!==g}function f(g,w){return g.filter(function(_){return _.key===w.traceId})}function s(g,w){p.select(g).select("path").style("fill-opacity",w),p.select(g).select("rect").style("fill-opacity",w)}function i(g){p.select(g).select("text.name").style("fill","black")}function l(g){return function(w){return-1!==g.node.sourceLinks.indexOf(w.link)||-1!==g.node.targetLinks.indexOf(w.link)}}function c(g){return function(w){return-1!==w.node.sourceLinks.indexOf(g.link)||-1!==w.node.targetLinks.indexOf(g.link)}}function h(g,w,_){w&&_&&f(_,w).selectAll("."+t.sankeyLink).filter(l(w)).call(d.bind(0,w,_,!1))}function m(g,w,_){w&&_&&f(_,w).selectAll("."+t.sankeyLink).filter(l(w)).call(o.bind(0,w,_,!1))}function d(g,w,_,A){var T=A.datum().link.label;A.style("fill-opacity",function(E){if(!E.link.concentrationscale)return.4}),T&&f(w,g).selectAll("."+t.sankeyLink).filter(function(E){return E.link.label===T}).style("fill-opacity",function(E){if(!E.link.concentrationscale)return.4}),_&&f(w,g).selectAll("."+t.sankeyNode).filter(c(g)).call(h)}function o(g,w,_,A){var T=A.datum().link.label;A.style("fill-opacity",function(E){return E.tinyColorAlpha}),T&&f(w,g).selectAll("."+t.sankeyLink).filter(function(E){return E.link.label===T}).style("fill-opacity",function(E){return E.tinyColorAlpha}),_&&f(w,g).selectAll(t.sankeyNode).filter(c(g)).call(m)}function b(g,w){var A=v.nestedProperty(g.hoverlabel||{},w).get();return!Array.isArray(A)&&A}Q.exports=function(g,w){for(var _=g._fullLayout,A=_._paper,T=_._size,E=0;E<g._fullData.length;E++)if(g._fullData[E].visible&&g._fullData[E].type===t.sankey&&!g._fullData[E]._viewInitial){var k=g._fullData[E].node;g._fullData[E]._viewInitial={node:{groups:k.groups.slice(),x:k.x.slice(),y:k.y.slice()}}}var O=a(g,"source:")+" ",D=a(g,"target:")+" ",S=a(g,"concentration:")+" ",C=a(g,"incoming flow count:")+" ",z=a(g,"outgoing flow count:")+" ";y(g,A,w,{width:T.w,height:T.h,margin:{t:T.t,r:T.r,b:T.b,l:T.l}},{linkEvents:{hover:function(B,U,G){!1!==g._fullLayout.hovermode&&(p.select(B).call(d.bind(0,U,G,!0)),"skip"!==U.link.trace.link.hoverinfo&&(U.link.fullData=U.link.trace,g.emit("plotly_hover",{event:p.event,points:[U.link]})))},follow:function(B,U){if(!1!==g._fullLayout.hovermode){var G=U.link.trace.link;if("none"!==G.hoverinfo&&"skip"!==G.hoverinfo){for(var X=[],Z=0,q=0;q<U.flow.links.length;q++){var W=U.flow.links[q];if("closest"!==g._fullLayout.hovermode||U.link.pointNumber===W.pointNumber){U.link.pointNumber===W.pointNumber&&(Z=q),W.fullData=W.trace,G=U.link.trace.link;var te=N(W),R={valueLabel:u(U.valueFormat)(W.value)+U.valueSuffix};X.push({x:te[0],y:te[1],name:R.valueLabel,text:[W.label||"",O+W.source.label,D+W.target.label,W.concentrationscale?S+u("%0.2f")(W.flow.labelConcentration):""].filter(r).join("<br>"),color:b(G,"bgcolor")||n.addOpacity(W.color,1),borderColor:b(G,"bordercolor"),fontFamily:b(G,"font.family"),fontSize:b(G,"font.size"),fontColor:b(G,"font.color"),nameLength:b(G,"namelength"),textAlign:b(G,"align"),idealAlign:p.event.x<te[0]?"right":"left",hovertemplate:G.hovertemplate,hovertemplateLabels:R,eventData:[W]})}}e.loneHover(X,{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:g,anchorIndex:Z}).each(function(){U.link.concentrationscale||s(this,.65),i(this)})}}function N(V){var ee,j;V.circular?(ee=(V.circularPathData.leftInnerExtent+V.circularPathData.rightInnerExtent)/2,j=V.circularPathData.verticalFullExtent):(ee=(V.source.x1+V.target.x0)/2,j=(V.y0+V.y1)/2);var J=[ee,j];return"v"===V.trace.orientation&&J.reverse(),J[0]+=U.parent.translateX,J[1]+=U.parent.translateY,J}},unhover:function(B,U,G){!1!==g._fullLayout.hovermode&&(p.select(B).call(o.bind(0,U,G,!0)),"skip"!==U.link.trace.link.hoverinfo&&(U.link.fullData=U.link.trace,g.emit("plotly_unhover",{event:p.event,points:[U.link]})),e.loneUnhover(_._hoverlayer.node()))},select:function(B,U){var G=U.link;G.originalEvent=p.event,g._hoverdata=[G],e.click(g,{target:!0})}},nodeEvents:{hover:function(B,U,G){!1!==g._fullLayout.hovermode&&(p.select(B).call(h,U,G),"skip"!==U.node.trace.node.hoverinfo&&(U.node.fullData=U.node.trace,g.emit("plotly_hover",{event:p.event,points:[U.node]})))},follow:function(B,U){if(!1!==g._fullLayout.hovermode){var G=U.node.trace.node;if("none"!==G.hoverinfo&&"skip"!==G.hoverinfo){var X=p.select(B).select("."+t.nodeRect),Z=g._fullLayout._paperdiv.node().getBoundingClientRect(),q=X.node().getBoundingClientRect(),W=q.left-2-Z.left,te=q.right+2-Z.left,R=q.top+q.height/4-Z.top,N={valueLabel:u(U.valueFormat)(U.node.value)+U.valueSuffix};U.node.fullData=U.node.trace,g._fullLayout._calcInverseTransform(g);var V=g._fullLayout._invScaleX,j=e.loneHover({x0:V*W,x1:V*te,y:g._fullLayout._invScaleY*R,name:u(U.valueFormat)(U.node.value)+U.valueSuffix,text:[U.node.label,C+U.node.targetLinks.length,z+U.node.sourceLinks.length].filter(r).join("<br>"),color:b(G,"bgcolor")||U.tinyColorHue,borderColor:b(G,"bordercolor"),fontFamily:b(G,"font.family"),fontSize:b(G,"font.size"),fontColor:b(G,"font.color"),nameLength:b(G,"namelength"),textAlign:b(G,"align"),idealAlign:"left",hovertemplate:G.hovertemplate,hovertemplateLabels:N,eventData:[U.node]},{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:g});s(j,.85),i(j)}}},unhover:function(B,U,G){!1!==g._fullLayout.hovermode&&(p.select(B).call(m,U,G),"skip"!==U.node.trace.node.hoverinfo&&(U.node.fullData=U.node.trace,g.emit("plotly_unhover",{event:p.event,points:[U.node]})),e.loneUnhover(_._hoverlayer.node()))},select:function(B,U,G){var X=U.node;X.originalEvent=p.event,g._hoverdata=[X],p.select(B).call(m,U,G),e.click(g,{target:!0})}}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":918,"./render":922,"@plotly/d3":58}],922:[function(x,Q,K){"use strict";var p=x("d3-force"),v=x("d3-interpolate").interpolateNumber,u=x("@plotly/d3"),y=x("@plotly/d3-sankey"),e=x("@plotly/d3-sankey-circular"),n=x("./constants"),t=x("tinycolor2"),a=x("../../components/color"),r=x("../../components/drawing"),f=x("../../lib"),s=f.strTranslate,i=f.strRotate,l=x("../../lib/gup"),c=l.keyFun,h=l.repeat,m=l.unwrap,d=x("../../lib/svg_text_utils"),o=x("../../registry"),b=x("../../constants/alignment"),g=b.CAP_SHIFT,w=b.LINE_SPACING;function _(q,W,te){var R,N=m(W),V=N.trace,ee=V.domain,j="h"===V.orientation,J=V.node.pad,$=V.node.thickness,re=q.width*(ee.x[1]-ee.x[0]),ne=q.height*(ee.y[1]-ee.y[0]),se=N._nodes,ie=N._links,ue=N.circular;(R=ue?e.sankeyCircular().circularLinkGap(0):y.sankey()).iterations(n.sankeyIterations).size(j?[re,ne]:[ne,re]).nodeWidth($).nodePadding(J).nodeId(function(Se){return Se.pointNumber}).nodes(se).links(ie);var le,de,ve,_e=R();for(var be in R.nodePadding()<J&&f.warn("node.pad was reduced to ",R.nodePadding()," to fit within the figure."),N._groupLookup){var Te,he=parseInt(N._groupLookup[be]);for(le=0;le<_e.nodes.length;le++)if(_e.nodes[le].pointNumber===he){Te=_e.nodes[le];break}if(Te){var me={pointNumber:parseInt(be),x0:Te.x0,x1:Te.x1,y0:Te.y0,y1:Te.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};_e.nodes.unshift(me),Te.childrenNodes.unshift(me)}}if(function(){for(le=0;le<_e.nodes.length;le++){var Se,Pe,ze=_e.nodes[le],He={};for(de=0;de<ze.targetLinks.length;de++)Se=(Pe=ze.targetLinks[de]).source.pointNumber+":"+Pe.target.pointNumber,He.hasOwnProperty(Se)||(He[Se]=[]),He[Se].push(Pe);var tt=Object.keys(He);for(de=0;de<tt.length;de++){var Oe=He[Se=tt[de]],Be=0,Je={};for(ve=0;ve<Oe.length;ve++)Je[(Pe=Oe[ve]).label]||(Je[Pe.label]=0),Je[Pe.label]+=Pe.value,Be+=Pe.value;for(ve=0;ve<Oe.length;ve++)(Pe=Oe[ve]).flow={value:Be,labelConcentration:Je[Pe.label]/Be,concentration:Pe.value/Be,links:Oe},Pe.concentrationscale&&(Pe.color=t(Pe.concentrationscale(Pe.flow.labelConcentration)))}var Ye=0;for(de=0;de<ze.sourceLinks.length;de++)Ye+=ze.sourceLinks[de].value;for(de=0;de<ze.sourceLinks.length;de++)(Pe=ze.sourceLinks[de]).concentrationOut=Pe.value/Ye;var nt=0;for(de=0;de<ze.targetLinks.length;de++)nt+=ze.targetLinks[de].value;for(de=0;de<ze.targetLinks.length;de++)(Pe=ze.targetLinks[de]).concenrationIn=Pe.value/nt}}(),V.node.x.length&&V.node.y.length){for(le=0;le<Math.min(V.node.x.length,V.node.y.length,_e.nodes.length);le++)if(V.node.x[le]&&V.node.y[le]){var Ae=[V.node.x[le]*re,V.node.y[le]*ne];_e.nodes[le].x0=Ae[0]-$/2,_e.nodes[le].x1=Ae[0]+$/2;var we=_e.nodes[le].y1-_e.nodes[le].y0;_e.nodes[le].y0=Ae[1]-we/2,_e.nodes[le].y1=Ae[1]+we/2}"snap"===V.arrangement&&function(Se){var Pe,ze,He=Se.map(function(Ye,nt){return{x0:Ye.x0,index:nt}}).sort(function(Ye,nt){return Ye.x0-nt.x0}),tt=[],Oe=-1,Be=-1/0;for(le=0;le<He.length;le++){var Je=Se[He[le].index];Je.x0>Be+$&&(Oe+=1,Pe=Je.x0),Be=Je.x0,tt[Oe]||(tt[Oe]=[]),tt[Oe].push(Je),Je.x0+=ze=Pe-Je.x0,Je.x1+=ze}return tt}(se=_e.nodes).forEach(function(Pe){var ze,He,tt,Oe=0,Be=Pe.length;for(Pe.sort(function(Je,Ye){return Je.y0-Ye.y0}),tt=0;tt<Be;++tt)(ze=Pe[tt]).y0>=Oe||(He=Oe-ze.y0)>1e-6&&(ze.y0+=He,ze.y1+=He),Oe=ze.y1+J}),R.update(_e)}return{circular:ue,key:te,trace:V,guid:f.randstr(),horizontal:j,width:re,height:ne,nodePad:V.node.pad,nodeLineColor:V.node.line.color,nodeLineWidth:V.node.line.width,linkLineColor:V.link.line.color,linkLineWidth:V.link.line.width,valueFormat:V.valueformat,valueSuffix:V.valuesuffix,textFont:V.textfont,translateX:ee.x[0]*q.width+q.margin.l,translateY:q.height-ee.y[1]*q.height+q.margin.t,dragParallel:j?ne:re,dragPerpendicular:j?re:ne,arrangement:V.arrangement,sankey:R,graph:_e,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function A(q,W,te){var R=t(W.color),N=W.source.label+"|"+W.target.label+"__"+te;return W.trace=q.trace,W.curveNumber=q.trace.index,{circular:q.circular,key:N,traceId:q.key,pointNumber:W.pointNumber,link:W,tinyColorHue:a.tinyRGB(R),tinyColorAlpha:R.getAlpha(),linkPath:T,linkLineColor:q.linkLineColor,linkLineWidth:q.linkLineWidth,valueFormat:q.valueFormat,valueSuffix:q.valueSuffix,sankey:q.sankey,parent:q,interactionState:q.interactionState,flow:W.flow}}function T(){return function(q){if(q.link.circular)return te=(W=q.link).width/2,R=W.circularPathData,"top"===W.circularLinkType?"M "+R.targetX+" "+(R.targetY+te)+" L"+R.rightInnerExtent+" "+(R.targetY+te)+"A"+(R.rightLargeArcRadius+te)+" "+(R.rightSmallArcRadius+te)+" 0 0 1 "+(R.rightFullExtent-te)+" "+(R.targetY-R.rightSmallArcRadius)+"L"+(R.rightFullExtent-te)+" "+R.verticalRightInnerExtent+"A"+(R.rightLargeArcRadius+te)+" "+(R.rightLargeArcRadius+te)+" 0 0 1 "+R.rightInnerExtent+" "+(R.verticalFullExtent-te)+"L"+R.leftInnerExtent+" "+(R.verticalFullExtent-te)+"A"+(R.leftLargeArcRadius+te)+" "+(R.leftLargeArcRadius+te)+" 0 0 1 "+(R.leftFullExtent+te)+" "+R.verticalLeftInnerExtent+"L"+(R.leftFullExtent+te)+" "+(R.sourceY-R.leftSmallArcRadius)+"A"+(R.leftLargeArcRadius+te)+" "+(R.leftSmallArcRadius+te)+" 0 0 1 "+R.leftInnerExtent+" "+(R.sourceY+te)+"L"+R.sourceX+" "+(R.sourceY+te)+"L"+R.sourceX+" "+(R.sourceY-te)+"L"+R.leftInnerExtent+" "+(R.sourceY-te)+"A"+(R.leftLargeArcRadius-te)+" "+(R.leftSmallArcRadius-te)+" 0 0 0 "+(R.leftFullExtent-te)+" "+(R.sourceY-R.leftSmallArcRadius)+"L"+(R.leftFullExtent-te)+" "+R.verticalLeftInnerExtent+"A"+(R.leftLargeArcRadius-te)+" "+(R.leftLargeArcRadius-te)+" 0 0 0 "+R.leftInnerExtent+" "+(R.verticalFullExtent+te)+"L"+R.rightInnerExtent+" "+(R.verticalFullExtent+te)+"A"+(R.rightLargeArcRadius-te)+" "+(R.rightLargeArcRadius-te)+" 0 0 0 "+(R.rightFullExtent+te)+" "+R.verticalRightInnerExtent+"L"+(R.rightFullExtent+te)+" "+(R.targetY-R.rightSmallArcRadius)+"A"+(R.rightLargeArcRadius-te)+" "+(R.rightSmallArcRadius-te)+" 0 0 0 "+R.rightInnerExtent+" "+(R.targetY-te)+"L"+R.targetX+" "+(R.targetY-te)+"Z":"M "+R.targetX+" "+(R.targetY-te)+" L"+R.rightInnerExtent+" "+(R.targetY-te)+"A"+(R.rightLargeArcRadius+te)+" "+(R.rightSmallArcRadius+te)+" 0 0 0 "+(R.rightFullExtent-te)+" "+(R.targetY+R.rightSmallArcRadius)+"L"+(R.rightFullExtent-te)+" "+R.verticalRightInnerExtent+"A"+(R.rightLargeArcRadius+te)+" "+(R.rightLargeArcRadius+te)+" 0 0 0 "+R.rightInnerExtent+" "+(R.verticalFullExtent+te)+"L"+R.leftInnerExtent+" "+(R.verticalFullExtent+te)+"A"+(R.leftLargeArcRadius+te)+" "+(R.leftLargeArcRadius+te)+" 0 0 0 "+(R.leftFullExtent+te)+" "+R.verticalLeftInnerExtent+"L"+(R.leftFullExtent+te)+" "+(R.sourceY+R.leftSmallArcRadius)+"A"+(R.leftLargeArcRadius+te)+" "+(R.leftSmallArcRadius+te)+" 0 0 0 "+R.leftInnerExtent+" "+(R.sourceY-te)+"L"+R.sourceX+" "+(R.sourceY-te)+"L"+R.sourceX+" "+(R.sourceY+te)+"L"+R.leftInnerExtent+" "+(R.sourceY+te)+"A"+(R.leftLargeArcRadius-te)+" "+(R.leftSmallArcRadius-te)+" 0 0 1 "+(R.leftFullExtent-te)+" "+(R.sourceY+R.leftSmallArcRadius)+"L"+(R.leftFullExtent-te)+" "+R.verticalLeftInnerExtent+"A"+(R.leftLargeArcRadius-te)+" "+(R.leftLargeArcRadius-te)+" 0 0 1 "+R.leftInnerExtent+" "+(R.verticalFullExtent-te)+"L"+R.rightInnerExtent+" "+(R.verticalFullExtent-te)+"A"+(R.rightLargeArcRadius-te)+" "+(R.rightLargeArcRadius-te)+" 0 0 1 "+(R.rightFullExtent+te)+" "+R.verticalRightInnerExtent+"L"+(R.rightFullExtent+te)+" "+(R.targetY+R.rightSmallArcRadius)+"A"+(R.rightLargeArcRadius-te)+" "+(R.rightSmallArcRadius-te)+" 0 0 1 "+R.rightInnerExtent+" "+(R.targetY+te)+"L"+R.targetX+" "+(R.targetY+te)+"Z";var W,te,R,N=q.link.source.x1,V=q.link.target.x0,ee=v(N,V),j=ee(.5),J=ee(.5),$=q.link.y0-q.link.width/2,re=q.link.y0+q.link.width/2,ne=q.link.y1-q.link.width/2,se=q.link.y1+q.link.width/2;return"M"+N+","+$+"C"+j+","+$+" "+J+","+ne+" "+V+","+ne+"L"+V+","+se+"C"+J+","+se+" "+j+","+re+" "+N+","+re+"Z"}}function E(q,W){var te=t(W.color),R=n.nodePadAcross,N=q.nodePad/2;W.dx=W.x1-W.x0,W.dy=W.y1-W.y0;var V=W.dx,ee=Math.max(.5,W.dy),j="node_"+W.pointNumber;return W.group&&(j=f.randstr()),W.trace=q.trace,W.curveNumber=q.trace.index,{index:W.pointNumber,key:j,partOfGroup:W.partOfGroup||!1,group:W.group,traceId:q.key,trace:q.trace,node:W,nodePad:q.nodePad,nodeLineColor:q.nodeLineColor,nodeLineWidth:q.nodeLineWidth,textFont:q.textFont,size:q.horizontal?q.height:q.width,visibleWidth:Math.ceil(V),visibleHeight:ee,zoneX:-R,zoneY:-N,zoneWidth:V+2*R,zoneHeight:ee+2*N,labelY:q.horizontal?W.dy/2+1:W.dx/2+1,left:1===W.originalLayer,sizeAcross:q.width,forceLayouts:q.forceLayouts,horizontal:q.horizontal,darkBackground:te.getBrightness()<=128,tinyColorHue:a.tinyRGB(te),tinyColorAlpha:te.getAlpha(),valueFormat:q.valueFormat,valueSuffix:q.valueSuffix,sankey:q.sankey,graph:q.graph,arrangement:q.arrangement,uniqueNodeLabelPathId:[q.guid,q.key,j].join("_"),interactionState:q.interactionState,figure:q}}function k(q){q.attr("transform",function(W){return s(W.node.x0.toFixed(3),W.node.y0.toFixed(3))})}function O(q){q.call(k)}function D(q,W){q.call(O),W.attr("d",T())}function S(q){q.attr("width",function(W){return W.node.x1-W.node.x0}).attr("height",function(W){return W.visibleHeight})}function C(q){return q.link.width>1||q.linkLineWidth>0}function z(q){return s(q.translateX,q.translateY)+(q.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function B(q,W,te){q.on(".basic",null).on("mouseover.basic",function(R){R.interactionState.dragInProgress||R.partOfGroup||(te.hover(this,R,W),R.interactionState.hovered=[this,R])}).on("mousemove.basic",function(R){R.interactionState.dragInProgress||R.partOfGroup||(te.follow(this,R),R.interactionState.hovered=[this,R])}).on("mouseout.basic",function(R){R.interactionState.dragInProgress||R.partOfGroup||(te.unhover(this,R,W),R.interactionState.hovered=!1)}).on("click.basic",function(R){R.interactionState.hovered&&(te.unhover(this,R,W),R.interactionState.hovered=!1),R.interactionState.dragInProgress||R.partOfGroup||te.select(this,R,W)})}function U(q,W,te,R){var N=u.behavior.drag().origin(function(V){return{x:V.node.x0+V.visibleWidth/2,y:V.node.y0+V.visibleHeight/2}}).on("dragstart",function(V){if("fixed"!==V.arrangement&&(f.ensureSingle(R._fullLayout._infolayer,"g","dragcover",function(j){R._fullLayout._dragCover=j}),f.raiseToTop(this),V.interactionState.dragInProgress=V.node,X(V.node),V.interactionState.hovered&&(te.nodeEvents.unhover.apply(0,V.interactionState.hovered),V.interactionState.hovered=!1),"snap"===V.arrangement)){var ee=V.traceId+"|"+V.key;V.forceLayouts[ee]?V.forceLayouts[ee].alpha(1):function(j,J,$,re){!function(se){for(var ie=0;ie<se.length;ie++)se[ie].y=(se[ie].y0+se[ie].y1)/2,se[ie].x=(se[ie].x0+se[ie].x1)/2}($.graph.nodes);var ie,ue,le,ne=$.graph.nodes.filter(function(se){return se.originalX===$.node.originalX}).filter(function(se){return!se.partOfGroup});$.forceLayouts[J]=p.forceSimulation(ne).alphaDecay(0).force("collide",p.forceCollide().radius(function(se){return se.dy/2+$.nodePad/2}).strength(1).iterations(n.forceIterations)).force("constrain",(ie=J,ue=ne,le=$,function(){for(var de=0,ve=0;ve<ue.length;ve++){var _e=ue[ve];_e===le.interactionState.dragInProgress?(_e.x=_e.lastDraggedX,_e.y=_e.lastDraggedY):(_e.vx=(_e.originalX-_e.x)/n.forceTicksPerFrame,_e.y=Math.min(le.size-_e.dy/2,Math.max(_e.dy/2,_e.y))),de=Math.max(de,Math.abs(_e.vx),Math.abs(_e.vy))}!le.interactionState.dragInProgress&&de<.1&&le.forceLayouts[ie].alpha()>0&&le.forceLayouts[ie].alpha(0)})).stop()}(0,ee,V),j=q,J=W,$=V,re=ee,ne=R,window.requestAnimationFrame(function se(){var ie;for(ie=0;ie<n.forceTicksPerFrame;ie++)$.forceLayouts[re].tick();if(function(le){for(var de=0;de<le.length;de++)le[de].y0=le[de].y-le[de].dy/2,le[de].y1=le[de].y0+le[de].dy,le[de].x0=le[de].x-le[de].dx/2,le[de].x1=le[de].x0+le[de].dx}($.graph.nodes),$.sankey.update($.graph),D(j.filter(Z($)),J),$.forceLayouts[re].alpha()>0)window.requestAnimationFrame(se);else{var ue=$.node.originalX;$.node.x0=ue-$.visibleWidth/2,$.node.x1=ue+$.visibleWidth/2,G($,ne)}})}var j,J,$,re,ne}).on("drag",function(V){if("fixed"!==V.arrangement){var ee=u.event.x,j=u.event.y;"snap"===V.arrangement?(V.node.x0=ee-V.visibleWidth/2,V.node.x1=ee+V.visibleWidth/2,V.node.y0=j-V.visibleHeight/2,V.node.y1=j+V.visibleHeight/2):("freeform"===V.arrangement&&(V.node.x0=ee-V.visibleWidth/2,V.node.x1=ee+V.visibleWidth/2),j=Math.max(0,Math.min(V.size-V.visibleHeight/2,j)),V.node.y0=j-V.visibleHeight/2,V.node.y1=j+V.visibleHeight/2),X(V.node),"snap"!==V.arrangement&&(V.sankey.update(V.graph),D(q.filter(Z(V)),W))}}).on("dragend",function(V){if("fixed"!==V.arrangement){V.interactionState.dragInProgress=!1;for(var ee=0;ee<V.node.childrenNodes.length;ee++)V.node.childrenNodes[ee].x=V.node.x,V.node.childrenNodes[ee].y=V.node.y;"snap"!==V.arrangement&&G(V,R)}});q.on(".drag",null).call(N)}function G(q,W){for(var te=[],R=[],N=0;N<q.graph.nodes.length;N++){var ee=(q.graph.nodes[N].y0+q.graph.nodes[N].y1)/2;te.push((q.graph.nodes[N].x0+q.graph.nodes[N].x1)/2/q.figure.width),R.push(ee/q.figure.height)}o.call("_guiRestyle",W,{"node.x":[te],"node.y":[R]},q.trace.index).then(function(){W._fullLayout._dragCover&&W._fullLayout._dragCover.remove()})}function X(q){q.lastDraggedX=q.x0+q.dx/2,q.lastDraggedY=q.y0+q.dy/2}function Z(q){return function(W){return W.node.originalX===q.node.originalX}}Q.exports=function(q,W,te,R,N){var V=!1;f.ensureSingle(q._fullLayout._infolayer,"g","first-render",function(){V=!0});var ee=q._fullLayout._dragCover,j=te.filter(function(le){return m(le).trace.visible}).map(_.bind(null,R)),J=W.selectAll("."+n.cn.sankey).data(j,c);J.exit().remove(),J.enter().append("g").classed(n.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",z),J.each(function(le,de){q._fullData[de]._sankey=le;var ve="bgsankey-"+le.trace.uid+"-"+de;f.ensureSingle(q._fullLayout._draggers,"rect",ve),q._fullData[de]._bgRect=u.select("."+ve),q._fullData[de]._bgRect.style("pointer-events","all").attr("width",le.width).attr("height",le.height).attr("x",le.translateX).attr("y",le.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),J.transition().ease(n.ease).duration(n.duration).attr("transform",z);var $=J.selectAll("."+n.cn.sankeyLinks).data(h,c);$.enter().append("g").classed(n.cn.sankeyLinks,!0).style("fill","none");var re=$.selectAll("."+n.cn.sankeyLink).data(function(le){return le.graph.links.filter(function(de){return de.value}).map(A.bind(null,le))},c);re.enter().append("path").classed(n.cn.sankeyLink,!0).call(B,J,N.linkEvents),re.style("stroke",function(le){return C(le)?a.tinyRGB(t(le.linkLineColor)):le.tinyColorHue}).style("stroke-opacity",function(le){return C(le)?a.opacity(le.linkLineColor):le.tinyColorAlpha}).style("fill",function(le){return le.tinyColorHue}).style("fill-opacity",function(le){return le.tinyColorAlpha}).style("stroke-width",function(le){return C(le)?le.linkLineWidth:1}).attr("d",T()),re.style("opacity",function(){return q._context.staticPlot||V||ee?1:0}).transition().ease(n.ease).duration(n.duration).style("opacity",1),re.exit().transition().ease(n.ease).duration(n.duration).style("opacity",0).remove();var ne=J.selectAll("."+n.cn.sankeyNodeSet).data(h,c);ne.enter().append("g").classed(n.cn.sankeyNodeSet,!0),ne.style("cursor",function(le){switch(le.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var se=ne.selectAll("."+n.cn.sankeyNode).data(function(le){var de=le.graph.nodes;return function(ve){var _e,be=[];for(_e=0;_e<ve.length;_e++)ve[_e].originalX=(ve[_e].x0+ve[_e].x1)/2,ve[_e].originalY=(ve[_e].y0+ve[_e].y1)/2,-1===be.indexOf(ve[_e].originalX)&&be.push(ve[_e].originalX);for(be.sort(function(Te,he){return Te-he}),_e=0;_e<ve.length;_e++)ve[_e].originalLayerIndex=be.indexOf(ve[_e].originalX),ve[_e].originalLayer=ve[_e].originalLayerIndex/(be.length-1)}(de),de.map(E.bind(null,le))},c);se.enter().append("g").classed(n.cn.sankeyNode,!0).call(k).style("opacity",function(le){return!q._context.staticPlot&&!V||le.partOfGroup?0:1}),se.call(B,J,N.nodeEvents).call(U,re,N,q),se.transition().ease(n.ease).duration(n.duration).call(k).style("opacity",function(le){return le.partOfGroup?0:1}),se.exit().transition().ease(n.ease).duration(n.duration).style("opacity",0).remove();var ie=se.selectAll("."+n.cn.nodeRect).data(h);ie.enter().append("rect").classed(n.cn.nodeRect,!0).call(S),ie.style("stroke-width",function(le){return le.nodeLineWidth}).style("stroke",function(le){return a.tinyRGB(t(le.nodeLineColor))}).style("stroke-opacity",function(le){return a.opacity(le.nodeLineColor)}).style("fill",function(le){return le.tinyColorHue}).style("fill-opacity",function(le){return le.tinyColorAlpha}),ie.transition().ease(n.ease).duration(n.duration).call(S);var ue=se.selectAll("."+n.cn.nodeLabel).data(h);ue.enter().append("text").classed(n.cn.nodeLabel,!0).style("cursor","default"),ue.attr("data-notex",1).text(function(le){return le.node.label}).each(function(le){var de=u.select(this);r.font(de,le.textFont),d.convertToTspans(de,q)}).style("text-shadow",d.makeTextShadow(q._fullLayout.paper_bgcolor)).attr("text-anchor",function(le){return le.horizontal&&le.left?"end":"start"}).attr("transform",function(le){var de=u.select(this),ve=d.lineCount(de),be=le.nodeLineWidth/2+3,Te=((le.horizontal?le.visibleHeight:le.visibleWidth)-le.textFont.size*((ve-1)*w-g))/2;le.horizontal&&(le.left?be=-be:be+=le.visibleWidth);var he=le.horizontal?"":"scale(-1,1)"+i(90);return s(le.horizontal?be:Te,le.horizontal?Te:be)+he}),ue.transition().ease(n.ease).duration(n.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":918,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],923:[function(x,Q,K){"use strict";Q.exports=function(p,v){for(var u=[],y=p.cd[0].trace,e=y._sankey.graph.nodes,n=0;n<e.length;n++){var t=e[n];if(!t.partOfGroup){var a=[(t.x0+t.x1)/2,(t.y0+t.y1)/2];"v"===y.orientation&&a.reverse(),v&&v.contains(a,!1,n,p)&&u.push({pointNumber:t.pointNumber})}}return u}},{}],924:[function(x,Q,K){"use strict";var p=x("../../lib");Q.exports=function(v,u){for(var y=0;y<v.length;y++)v[y].i=y;p.mergeArray(u.text,v,"tx"),p.mergeArray(u.texttemplate,v,"txt"),p.mergeArray(u.hovertext,v,"htx"),p.mergeArray(u.customdata,v,"data"),p.mergeArray(u.textposition,v,"tp"),u.textfont&&(p.mergeArrayCastPositive(u.textfont.size,v,"ts"),p.mergeArray(u.textfont.color,v,"tc"),p.mergeArray(u.textfont.family,v,"tf"));var e=u.marker;if(e){p.mergeArrayCastPositive(e.size,v,"ms"),p.mergeArrayCastPositive(e.opacity,v,"mo"),p.mergeArray(e.symbol,v,"mx"),p.mergeArray(e.color,v,"mc");var n=e.line;e.line&&(p.mergeArray(n.color,v,"mlc"),p.mergeArrayCastPositive(n.width,v,"mlw"));var t=e.gradient;t&&"none"!==t.type&&(p.mergeArray(t.type,v,"mgt"),p.mergeArray(t.color,v,"mgc"))}}},{"../../lib":503}],925:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,v=x("../../plots/template_attributes").texttemplateAttrs,u=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../../components/colorscale/attributes"),e=x("../../plots/font_attributes"),n=x("../../components/drawing/attributes").dash,t=x("../../components/drawing"),a=x("./constants"),r=x("../../lib/extend").extendFlat;Q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:p("x"),yhoverformat:p("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:v({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:u({},{keys:a.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},n,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:r({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},y("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},y("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":929}],926:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib"),u=x("../../plots/cartesian/axes"),y=x("../../plots/cartesian/align_period"),e=x("../../constants/numerical").BADNUM,n=x("./subtypes"),t=x("./colorscale_calc"),a=x("./arrays_to_calcdata"),r=x("./calc_selection");function f(h,m,d,o,b,g,w){var _=m._length,A=h._fullLayout,T=d._id,E=o._id,k=A._firstScatter[l(m)]===m.uid,O=(c(m,A,d,o)||{}).orientation,D=m.fill;d._minDtick=0,o._minDtick=0;var S={padded:!0},C={padded:!0};w&&(S.ppad=C.ppad=w);var z=_<2||b[0]!==b[_-1]||g[0]!==g[_-1];z&&("tozerox"===D||"tonextx"===D&&(k||"h"===O))?S.tozero=!0:(m.error_y||{}).visible||"tonexty"!==D&&"tozeroy"!==D&&(n.hasMarkers(m)||n.hasText(m))||(S.padded=!1,S.ppad=0),z&&("tozeroy"===D||"tonexty"===D&&(k||"v"===O))?C.tozero=!0:"tonextx"!==D&&"tozerox"!==D||(C.padded=!1),T&&(m._extremes[T]=u.findExtremes(d,b,S)),E&&(m._extremes[E]=u.findExtremes(o,g,C))}function s(h,m){if(n.hasMarkers(h)){var d,o=h.marker,b=1.6*(h.marker.sizeref||1);if(d="area"===h.marker.sizemode?function(T){return Math.max(Math.sqrt((T||0)/b),3)}:function(T){return Math.max((T||0)/b,3)},v.isArrayOrTypedArray(o.size)){var g={type:"linear"};u.setConvert(g);for(var w=g.makeCalcdata(h.marker,"size"),_=new Array(m),A=0;A<m;A++)_[A]=d(w[A]);return _}return d(o.size)}}function i(h,m){var d=l(m),o=h._firstScatter;o[d]||(o[d]=m.uid)}function l(h){var m=h.stackgroup;return h.xaxis+h.yaxis+h.type+(m?"-"+m:"")}function c(h,m,d,o){var b=h.stackgroup;if(b){var g=m._scatterStackOpts[d._id+o._id][b],w="v"===g.orientation?o:d;return"linear"===w.type||"log"===w.type?g:void 0}}Q.exports={calc:function(h,m){var d,o,b,g,w,_,A=h._fullLayout,T=u.getFromId(h,m.xaxis||"x"),E=u.getFromId(h,m.yaxis||"y"),k=T.makeCalcdata(m,"x"),O=E.makeCalcdata(m,"y"),D=y(m,T,"x",k),S=y(m,E,"y",O),C=D.vals,z=S.vals,B=m._length,U=new Array(B),G=m.ids,X=c(m,A,T,E),Z=!1;i(A,m);var q,W="x",te="y";X?(v.pushUnique(X.traceIndices,m._expandedIndex),(d="v"===X.orientation)?(te="s",q="x"):(W="s",q="y"),w="interpolate"===X.stackgaps):f(h,m,T,E,C,z,s(m,B));var R=!!m.xperiodalignment,N=!!m.yperiodalignment;for(o=0;o<B;o++){var V=U[o]={},ee=p(C[o]),j=p(z[o]);ee&&j?(V[W]=C[o],V[te]=z[o],R&&(V.orig_x=k[o],V.xEnd=D.ends[o],V.xStart=D.starts[o]),N&&(V.orig_y=O[o],V.yEnd=S.ends[o],V.yStart=S.starts[o])):X&&(d?ee:j)?(V[q]=d?C[o]:z[o],V.gap=!0,w?(V.s=e,Z=!0):V.s=0):V[W]=V[te]=e,G&&(V.id=String(G[o]))}if(a(U,m),t(h,m),r(U,m),X){for(o=0;o<U.length;)U[o][q]===e?U.splice(o,1):o++;if(v.sort(U,function(ne,se){return ne[q]-se[q]||ne.i-se.i}),Z){for(o=0;o<U.length-1&&U[o].gap;)o++;for((_=U[o].s)||(_=U[o].s=0),b=0;b<o;b++)U[b].s=_;for(g=U.length-1;g>o&&U[g].gap;)g--;for(_=U[g].s,b=U.length-1;b>g;b--)U[b].s=_;for(;o<g;)if(U[++o].gap){for(b=o+1;U[b].gap;)b++;for(var J=U[o-1][q],$=U[o-1].s,re=(U[b].s-$)/(U[b][q]-J);o<b;)U[o].s=$+(U[o][q]-J)*re,o++}}}return U},calcMarkerSize:s,calcAxisExpansion:f,setFirstScatter:i,getStackOpts:c}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":924,"./calc_selection":927,"./colorscale_calc":928,"./subtypes":950,"fast-isnumeric":190}],927:[function(x,Q,K){"use strict";var p=x("../../lib");Q.exports=function(v,u){p.isArrayOrTypedArray(u.selectedpoints)&&p.tagSelected(v,u)}},{"../../lib":503}],928:[function(x,Q,K){"use strict";var p=x("../../components/colorscale/helpers").hasColorscale,v=x("../../components/colorscale/calc"),u=x("./subtypes");Q.exports=function(y,e){u.hasLines(e)&&p(e,"line")&&v(y,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),u.hasMarkers(e)&&(p(e,"marker")&&v(y,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),p(e,"marker.line")&&v(y,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":950}],929:[function(x,Q,K){"use strict";Q.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],930:[function(x,Q,K){"use strict";var p=x("./calc");function v(u,y,e,n,t,a,r){t[n]=!0;var i,l,h,m,d,f={i:null,gap:!0,s:0};if(f[r]=e,u.splice(y,0,f),y&&e===u[y-1][r]){var s=u[y-1];f.s=s.s,f.i=s.i,f.gap=s.gap}else a&&(f.s=(h=r,m=(i=u)[(l=y)-1],(d=i[l+1])?m?m.s+(d.s-m.s)*(e-m[h])/(d[h]-m[h]):d.s:m.s));y||(u[0].t=u[1].t,u[0].trace=u[1].trace,delete u[1].t,delete u[1].trace)}Q.exports=function(u,y){var e=y.xaxis,n=y.yaxis,a=u._fullLayout._scatterStackOpts[e._id+n._id];if(a){var r,f,s,i,l,c,h,m,d,o,b,g,w,_,A,T=u.calcdata;for(var E in a){var k=(o=a[E]).traceIndices;if(k.length){for(b="interpolate"===o.stackgaps,g=o.groupnorm,"v"===o.orientation?(w="x",_="y"):(w="y",_="x"),A=new Array(k.length),r=0;r<A.length;r++)A[r]=!1;c=T[k[0]];var O=new Array(c.length);for(r=0;r<c.length;r++)O[r]=c[r][w];for(r=1;r<k.length;r++){for(l=T[k[r]],f=s=0;f<l.length;f++){for(h=l[f][w];h>O[s]&&s<O.length;s++)v(l,f,O[s],r,A,b,w),f++;if(h!==O[s]){for(i=0;i<r;i++)v(T[k[i]],s,h,i,A,b,w);O.splice(s,0,h)}s++}for(;s<O.length;s++)v(l,f,O[s],r,A,b,w),f++}var D=O.length;for(f=0;f<c.length;f++){for(m=c[f][_]=c[f].s,r=1;r<k.length;r++)(l=T[k[r]])[0].trace._rawLength=l[0].trace._length,l[0].trace._length=D,l[f][_]=m+=l[f].s;if(g)for(d=("fraction"===g?m:m/100)||1,r=0;r<k.length;r++){var S=T[k[r]][f];S[_]/=d,S.sNorm=S.s/d}}for(r=0;r<k.length;r++){var C=(l=T[k[r]])[0].trace,z=p.calcMarkerSize(C,C._rawLength),B=Array.isArray(z);if(z&&A[r]||B){var U=z;for(z=new Array(D),f=0;f<D;f++)z[f]=l[f].gap?0:B?U[l[f].i]:U}var G=new Array(D),X=new Array(D);for(f=0;f<D;f++)G[f]=l[f].x,X[f]=l[f].y;p.calcAxisExpansion(u,C,e,n,G,X,z),l[0].t.orientation=o.orientation}}}}}},{"./calc":926}],931:[function(x,Q,K){"use strict";Q.exports=function(p){for(var v=0;v<p.length;v++){var u=p[v];if("scatter"===u.type){var y=u.fill;if("none"!==y&&"toself"!==y&&(u.opacity=void 0,"tonexty"===y||"tonextx"===y))for(var e=v-1;e>=0;e--){var n=p[e];if("scatter"===n.type&&n.xaxis===u.xaxis&&n.yaxis===u.yaxis){n.opacity=void 0;break}}}}}},{}],932:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../registry"),u=x("./attributes"),y=x("./constants"),e=x("./subtypes"),n=x("./xy_defaults"),t=x("./period_defaults"),a=x("./stack_defaults"),r=x("./marker_defaults"),f=x("./line_defaults"),s=x("./line_shape_defaults"),i=x("./text_defaults"),l=x("./fillcolor_defaults");Q.exports=function(c,h,m,d){function o(k,O){return p.coerce(c,h,u,k,O)}var b=n(c,h,d,o);if(b||(h.visible=!1),h.visible){t(c,h,d,o),o("xhoverformat"),o("yhoverformat");var g=a(c,h,d,o),w=!g&&b<y.PTS_LINESONLY?"lines+markers":"lines";o("text"),o("hovertext"),o("mode",w),e.hasLines(h)&&(f(c,h,m,d,o),s(c,h,o),o("connectgaps"),o("line.simplify")),e.hasMarkers(h)&&r(c,h,m,d,o,{gradient:!0}),e.hasText(h)&&(o("texttemplate"),i(c,h,d,o));var _=[];(e.hasMarkers(h)||e.hasText(h))&&(o("cliponaxis"),o("marker.maxdisplayed"),_.push("points")),o("fill",g?g.fillDflt:"none"),"none"!==h.fill&&(l(c,h,m,o),e.hasLines(h)||s(c,h,o));var A=(h.line||{}).color,T=(h.marker||{}).color;"tonext"!==h.fill&&"toself"!==h.fill||_.push("fills"),o("hoveron",_.join("+")||"points"),"fills"!==h.hoveron&&o("hovertemplate");var E=v.getComponentMethod("errorbars","supplyDefaults");E(c,h,A||T||m,{axis:"y"}),E(c,h,A||T||m,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(h,o)}}},{"../../lib":503,"../../registry":638,"./attributes":925,"./constants":929,"./fillcolor_defaults":933,"./line_defaults":938,"./line_shape_defaults":940,"./marker_defaults":944,"./period_defaults":945,"./stack_defaults":948,"./subtypes":950,"./text_defaults":951,"./xy_defaults":952}],933:[function(x,Q,K){"use strict";var p=x("../../components/color"),v=x("../../lib").isArrayOrTypedArray;Q.exports=function(u,y,e,n){var t=!1;if(y.marker){var a=y.marker.color,r=(y.marker.line||{}).color;a&&!v(a)?t=a:r&&!v(r)&&(t=r)}n("fillcolor",p.addOpacity((y.line||{}).color||t||e,.5))}},{"../../components/color":366,"../../lib":503}],934:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes");Q.exports=function(v,u,y){var e={},n={_fullLayout:y},t=p.getFromTrace(n,u,"x"),a=p.getFromTrace(n,u,"y");return e.xLabel=p.tickText(t,t.c2l(v.x),!0).text,e.yLabel=p.tickText(a,a.c2l(v.y),!0).text,e}},{"../../plots/cartesian/axes":554}],935:[function(x,Q,K){"use strict";var p=x("../../components/color"),v=x("./subtypes");Q.exports=function(u,y){var e,n;if("lines"===u.mode)return(e=u.line.color)&&p.opacity(e)?e:u.fillcolor;if("none"===u.mode)return u.fill?u.fillcolor:"";var t=y.mcc||(u.marker||{}).color,a=y.mlcc||((u.marker||{}).line||{}).color;return(n=t&&p.opacity(t)?t:a&&p.opacity(a)&&(y.mlw||((u.marker||{}).line||{}).width)?a:"")?p.opacity(n)<.3?p.addOpacity(n,.3):n:(e=(u.line||{}).color)&&p.opacity(e)&&v.hasLines(u)&&u.line.width?e:u.fillcolor}},{"../../components/color":366,"./subtypes":950}],936:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/fx"),u=x("../../registry"),y=x("./get_trace_color"),e=x("../../components/color"),n=p.fillText;Q.exports=function(t,a,r,f){var s=t.cd,i=s[0].trace,l=t.xa,c=t.ya,h=l.c2p(a),m=c.c2p(r),d=[h,m],o=i.hoveron||"",b=-1!==i.mode.indexOf("markers")?3:.5,g=!!i.xperiodalignment,w=!!i.yperiodalignment;if(-1!==o.indexOf("points")){var _=function(ie){var ue=Math.max(b,ie.mrc||0),le=l.c2p(ie.x)-h,de=c.c2p(ie.y)-m;return Math.max(Math.sqrt(le*le+de*de)-ue,1-b/ue)},A=v.getDistanceFunction(f,function(ie){if(g){var ue=l.c2p(ie.xStart),le=l.c2p(ie.xEnd);return h>=Math.min(ue,le)&&h<=Math.max(ue,le)?0:1/0}var de=Math.max(3,ie.mrc||0),ve=1-1/de,_e=Math.abs(l.c2p(ie.x)-h);return _e<de?ve*_e/de:_e-de+ve},function(ie){if(w){var ue=c.c2p(ie.yStart),le=c.c2p(ie.yEnd);return m>=Math.min(ue,le)&&m<=Math.max(ue,le)?0:1/0}var de=Math.max(3,ie.mrc||0),ve=1-1/de,_e=Math.abs(c.c2p(ie.y)-m);return _e<de?ve*_e/de:_e-de+ve},_);if(v.getClosest(s,A,t),!1!==t.index){var T=s[t.index],E=l.c2p(T.x,!0),k=c.c2p(T.y,!0),O=T.mrc||1;t.index=T.i;var D=s[0].t.orientation,S=D&&(T.sNorm||T.s),C="h"===D?S:void 0!==T.orig_x?T.orig_x:T.x,z="v"===D?S:void 0!==T.orig_y?T.orig_y:T.y;return p.extendFlat(t,{color:y(i,T),x0:E-O,x1:E+O,xLabelVal:C,y0:k-O,y1:k+O,yLabelVal:z,spikeDistance:_(T),hovertemplate:i.hovertemplate}),n(T,i,t),u.getComponentMethod("errorbars","hoverInfo")(T,i,t),[t]}}if(-1!==o.indexOf("fills")&&i._polygons){var B,U,G,X,Z,q,te,R,N=i._polygons,V=[],ee=!1,j=1/0,J=-1/0,$=1/0,re=-1/0;for(B=0;B<N.length;B++)(G=N[B]).contains(d)&&(ee=!ee,V.push(G),$=Math.min($,G.ymin),re=Math.max(re,G.ymax));if(ee){var ne=(($=Math.max($,0))+(re=Math.min(re,c._length)))/2;for(B=0;B<V.length;B++)for(X=V[B].pts,U=1;U<X.length;U++)(te=X[U-1][1])>ne!=(R=X[U][1])>=ne&&(q=X[U-1][0],R-te&&(Z=q+(X[U][0]-q)*(ne-te)/(R-te),j=Math.min(j,Z),J=Math.max(J,Z)));j=Math.max(j,0),J=Math.min(J,l._length);var se=e.defaultLine;return e.opacity(i.fillcolor)?se=i.fillcolor:e.opacity((i.line||{}).color)&&(se=i.line.color),p.extendFlat(t,{distance:t.maxHoverDistance,x0:j,x1:J,y0:ne,y1:ne,color:se,hovertemplate:!1}),delete t.index,t.text=i.text&&!Array.isArray(i.text)?String(i.text):i.name,[t]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":935}],937:[function(x,Q,K){"use strict";var p=x("./subtypes");Q.exports={hasLines:p.hasLines,hasMarkers:p.hasMarkers,hasText:p.hasText,isBubble:p.isBubble,attributes:x("./attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("./cross_trace_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./cross_trace_calc"),arraysToCalcdata:x("./arrays_to_calcdata"),plot:x("./plot"),colorbar:x("./marker_colorbar"),formatLabels:x("./format_labels"),style:x("./style").style,styleOnSelect:x("./style").styleOnSelect,hoverPoints:x("./hover"),selectPoints:x("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":924,"./attributes":925,"./calc":926,"./cross_trace_calc":930,"./cross_trace_defaults":931,"./defaults":932,"./format_labels":934,"./hover":936,"./marker_colorbar":943,"./plot":946,"./select":947,"./style":949,"./subtypes":950}],938:[function(x,Q,K){"use strict";var p=x("../../lib").isArrayOrTypedArray,v=x("../../components/colorscale/helpers").hasColorscale,u=x("../../components/colorscale/defaults");Q.exports=function(y,e,n,t,a,r){var f=(y.marker||{}).color;a("line.color",n),v(y,"line")?u(y,e,t,a,{prefix:"line.",cLetter:"c"}):a("line.color",!p(f)&&f||n),a("line.width"),(r||{}).noDash||a("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],939:[function(x,Q,K){"use strict";var p=x("../../constants/numerical"),v=p.BADNUM,u=p.LOG_CLIP,y=u+.5,e=u-.5,n=x("../../lib"),t=n.segmentsIntersect,a=n.constrain,r=x("./constants");Q.exports=function(f,s){var i,l,c,h,m,d,o,b,g,w,_,A,T,E,k,O,D,S,C=s.xaxis,z=s.yaxis,B="log"===C.type,U="log"===z.type,G=C._length,X=z._length,Z=s.connectGaps,q=s.baseTolerance,W=s.shape,te="linear"===W,R=s.fill&&"none"!==s.fill,N=[],V=r.minTolerance,ee=f.length,j=new Array(ee),J=0;function $(Ye){var nt=f[Ye];if(!nt)return!1;var ft=s.linearized?C.l2p(nt.x):C.c2p(nt.x),dt=s.linearized?z.l2p(nt.y):z.c2p(nt.y);if(ft===v){if(B&&(ft=C.c2p(nt.x,!0)),ft===v)return!1;U&&dt===v&&(ft*=Math.abs(C._m*X*(C._m>0?y:e)/(z._m*G*(z._m>0?y:e)))),ft*=1e3}if(dt===v){if(U&&(dt=z.c2p(nt.y,!0)),dt===v)return!1;dt*=1e3}return[ft,dt]}function re(Ye,nt,ft,dt){var Rt=ft-Ye,Et=dt-nt,at=.5-Ye,rt=.5-nt,St=Rt*Rt+Et*Et,Xt=Rt*at+Et*rt;if(Xt>0&&Xt<St){var lr=at*Et-rt*Rt;if(lr*lr<St)return!0}}function ne(Ye,nt){var ft=Ye[0]/G,dt=Ye[1]/X,Rt=Math.max(0,-ft,ft-1,-dt,dt-1);return Rt&&void 0!==D&&re(ft,dt,D,S)&&(Rt=0),Rt&&nt&&re(ft,dt,nt[0]/G,nt[1]/X)&&(Rt=0),(1+r.toleranceGrowth*Rt)*q}function se(Ye,nt){var ft=Ye[0]-nt[0],dt=Ye[1]-nt[1];return Math.sqrt(ft*ft+dt*dt)}var ie,ue,le,de,ve,_e,be,Te=r.maxScreensAway,he=-G*Te,me=G*(1+Te),Ae=-X*Te,we=X*(1+Te),Se=[[he,Ae,me,Ae],[me,Ae,me,we],[me,we,he,we],[he,we,he,Ae]];function Pe(Ye){if(Ye[0]<he||Ye[0]>me||Ye[1]<Ae||Ye[1]>we)return[a(Ye[0],he,me),a(Ye[1],Ae,we)]}function ze(Ye,nt){return Ye[0]===nt[0]&&(Ye[0]===he||Ye[0]===me)||Ye[1]===nt[1]&&(Ye[1]===Ae||Ye[1]===we)||void 0}function He(Ye,nt,ft){return function(dt,Rt){var Et=Pe(dt),at=Pe(Rt),rt=[];if(Et&&at&&ze(Et,at))return rt;Et&&rt.push(Et),at&&rt.push(at);var St=2*n.constrain((dt[Ye]+Rt[Ye])/2,nt,ft)-((Et||dt)[Ye]+(at||Rt)[Ye]);return St&&((Et&&at?St>0==Et[Ye]>at[Ye]?Et:at:Et||at)[Ye]+=St),rt}}function tt(Ye){var nt=Ye[0],ft=Ye[1],dt=nt===j[J-1][0],Rt=ft===j[J-1][1];if(!dt||!Rt)if(J>1){var Et=nt===j[J-2][0],at=ft===j[J-2][1];dt&&(nt===he||nt===me)&&Et?at?J--:j[J-1]=Ye:Rt&&(ft===Ae||ft===we)&&at?Et?J--:j[J-1]=Ye:j[J++]=Ye}else j[J++]=Ye}function Oe(Ye){j[J-1][0]!==Ye[0]&&j[J-1][1]!==Ye[1]&&tt([le,de]),tt(Ye),ve=null,le=de=0}function Be(Ye){if(D=Ye[0]/G,S=Ye[1]/X,ue=Ye[1]<Ae?Ae:Ye[1]>we?we:0,(ie=Ye[0]<he?he:Ye[0]>me?me:0)||ue){if(J)if(ve){var nt=be(ve,Ye);nt.length>1&&(Oe(nt[0]),j[J++]=nt[1])}else _e=be(j[J-1],Ye)[0],j[J++]=_e;else j[J++]=[ie||Ye[0],ue||Ye[1]];var ft=j[J-1];ie&&ue&&(ft[0]!==ie||ft[1]!==ue)?(ve&&(le!==ie&&de!==ue?tt(le&&de?(Et=(Rt=Ye)[0]-(dt=ve)[0],at=(Rt[1]-dt[1])/Et,(dt[1]*Rt[0]-Rt[1]*dt[0])/Et>0?[at>0?he:me,we]:[at>0?me:he,Ae]):[le||ie,de||ue]):le&&de&&tt([le,de])),tt([ie,ue])):le-ie&&de-ue&&tt([ie||le,ue||de]),ve=Ye,le=ie,de=ue}else ve&&Oe(be(ve,Ye)[0]),j[J++]=Ye;var dt,Rt,Et,at}for("linear"===W||"spline"===W?be=function(Ye,nt){for(var ft=[],dt=0,Rt=0;Rt<4;Rt++){var Et=Se[Rt],at=t(Ye[0],Ye[1],nt[0],nt[1],Et[0],Et[1],Et[2],Et[3]);at&&(!dt||Math.abs(at.x-ft[0][0])>1||Math.abs(at.y-ft[0][1])>1)&&(at=[at.x,at.y],dt&&se(at,Ye)<se(ft[0],Ye)?ft.unshift(at):ft.push(at),dt++)}return ft}:"hv"===W||"vh"===W?be=function(Ye,nt){var ft=[],dt=Pe(Ye),Rt=Pe(nt);return dt&&Rt&&ze(dt,Rt)||(dt&&ft.push(dt),Rt&&ft.push(Rt)),ft}:"hvh"===W?be=He(0,he,me):"vhv"===W&&(be=He(1,Ae,we)),i=0;i<ee;i++)if(l=$(i)){for(J=0,ve=null,Be(l),i++;i<ee;i++){if(!(h=$(i))){if(Z)continue;break}if(te&&s.simplify){var Je=$(i+1);if(w=se(h,l),R&&(0===J||J===ee-1)||!(w<ne(h,Je)*V)){for(b=[(h[0]-l[0])/w,(h[1]-l[1])/w],m=l,_=w,A=E=k=0,o=!1,c=h,i++;i<f.length;i++){if(d=Je,Je=$(i+1),!d){if(Z)continue;break}if(O=(g=[d[0]-l[0],d[1]-l[1]])[0]*b[1]-g[1]*b[0],E=Math.min(E,O),(k=Math.max(k,O))-E>ne(d,Je))break;c=d,(T=g[0]*b[0]+g[1]*b[1])>_?(_=T,h=d,o=!1):T<A&&(A=T,m=d,o=!0)}if(o?(Be(h),c!==m&&Be(m)):(m!==l&&Be(m),c!==h&&Be(h)),Be(c),i>=f.length||!d)break;Be(d),l=d}}else Be(h)}ve&&tt([le||ve[0],de||ve[1]]),N.push(j.slice(0,J))}return N}},{"../../constants/numerical":479,"../../lib":503,"./constants":929}],940:[function(x,Q,K){"use strict";Q.exports=function(p,v,u){"spline"===u("line.shape")&&u("line.smoothing")}},{}],941:[function(x,Q,K){"use strict";var p={tonextx:1,tonexty:1,tonext:1};Q.exports=function(v,u,y){var e,n,t,a,r,f={},s=!1,i=-1,l=0,c=-1;for(n=0;n<y.length;n++)(t=(e=y[n][0].trace).stackgroup||"")?t in f?r=f[t]:(r=f[t]=l,l++):e.fill in p&&c>=0?r=c:(r=c=l,l++),r<i&&(s=!0),e._groupIndex=i=r;var h=y.slice();s&&h.sort(function(d,o){var b=d[0].trace,g=o[0].trace;return b._groupIndex-g._groupIndex||b.index-g.index});var m={};for(n=0;n<h.length;n++)t=(e=h[n][0].trace).stackgroup||"",!0===e.visible?(e._nexttrace=null,e.fill in p&&(e._prevtrace=(a=m[t])||null,a&&(a._nexttrace=e)),e._ownfill=e.fill&&("tozero"===e.fill.substr(0,6)||"toself"===e.fill||"to"===e.fill.substr(0,2)&&!e._prevtrace),m[t]=e):e._prevtrace=e._nexttrace=e._ownfill=null;return h}},{}],942:[function(x,Q,K){"use strict";var p=x("fast-isnumeric");Q.exports=function(v,u){u||(u=2);var y=v.marker,e=y.sizeref||1,n=y.sizemin||0,t="area"===y.sizemode?function(a){return Math.sqrt(a/e)}:function(a){return a/e};return function(a){var r=t(a/u);return p(r)&&r>0?Math.max(r,n):0}}},{"fast-isnumeric":190}],943:[function(x,Q,K){"use strict";Q.exports={container:"marker",min:"cmin",max:"cmax"}},{}],944:[function(x,Q,K){"use strict";var p=x("../../components/color"),v=x("../../components/colorscale/helpers").hasColorscale,u=x("../../components/colorscale/defaults"),y=x("./subtypes");Q.exports=function(e,n,t,a,r,f){var s=y.isBubble(e),i=(e.line||{}).color;f=f||{},i&&(t=i),r("marker.symbol"),r("marker.opacity",s?.7:1),r("marker.size"),r("marker.color",t),v(e,"marker")&&u(e,n,a,r,{prefix:"marker.",cLetter:"c"}),f.noSelect||(r("selected.marker.color"),r("unselected.marker.color"),r("selected.marker.size"),r("unselected.marker.size")),f.noLine||(r("marker.line.color",i&&!Array.isArray(i)&&n.marker.color!==i?i:s?p.background:p.defaultLine),v(e,"marker.line")&&u(e,n,a,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width",s?1:0)),s&&(r("marker.sizeref"),r("marker.sizemin"),r("marker.sizemode")),f.gradient&&"none"!==r("marker.gradient.type")&&r("marker.gradient.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":950}],945:[function(x,Q,K){"use strict";var p=x("../../lib").dateTick0,v=x("../../constants/numerical").ONEWEEK;function u(y,e){return p(e,y%v==0?1:0)}Q.exports=function(y,e,n,t,a){if(a||(a={x:!0,y:!0}),a.x){var r=t("xperiod");r&&(t("xperiod0",u(r,e.xcalendar)),t("xperiodalignment"))}if(a.y){var f=t("yperiod");f&&(t("yperiod0",u(f,e.ycalendar)),t("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],946:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../registry"),u=x("../../lib"),y=u.ensureSingle,e=u.identity,n=x("../../components/drawing"),t=x("./subtypes"),a=x("./line_points"),r=x("./link_traces"),f=x("../../lib/polygon").tester;function s(i,l,c,h,m,d,o){var b;!function(me,Ae,we,Se,Pe){var ze=we.xaxis,He=we.yaxis,tt=p.extent(u.simpleMap(ze.range,ze.r2c)),Oe=p.extent(u.simpleMap(He.range,He.r2c)),Be=Se[0].trace;if(t.hasMarkers(Be)){var Je=Be.marker.maxdisplayed;if(0!==Je){var Ye=Se.filter(function(Rt){return Rt.x>=tt[0]&&Rt.x<=tt[1]&&Rt.y>=Oe[0]&&Rt.y<=Oe[1]}),nt=Math.ceil(Ye.length/Je),ft=0;Pe.forEach(function(Rt,Et){var at=Rt[0].trace;t.hasMarkers(at)&&at.marker.maxdisplayed>0&&Et<Ae&&ft++});var dt=Math.round(ft*nt/3+Math.floor(ft/3)*nt/7.1);Se.forEach(function(Rt){delete Rt.vis}),Ye.forEach(function(Rt,Et){0===Math.round((Et+dt)%nt)&&(Rt.vis=!0)})}}}(0,l,c,h,m);var g=!!o&&o.duration>0;function w(me){return g?me.transition():me}var _=c.xaxis,A=c.yaxis,T=h[0].trace,E=T.line,k=p.select(d),O=y(k,"g","errorbars"),D=y(k,"g","lines"),S=y(k,"g","points"),C=y(k,"g","text");if(v.getComponentMethod("errorbars","plot")(i,O,c,o),!0===T.visible){var z,B;w(k).style("opacity",T.opacity);var U=T.fill.charAt(T.fill.length-1);"x"!==U&&"y"!==U&&(U=""),h[0][c.isRangePlot?"nodeRangePlot3":"node3"]=k;var G,X,Z="",q=[],W=T._prevtrace;W&&(Z=W._prevRevpath||"",B=W._nextFill,q=W._polygons);var te,R,N,V,ee,j,J,$="",re="",ne=[],se=u.noop;if(z=T._ownFill,t.hasLines(T)||"none"!==T.fill){for(B&&B.datum(h),-1!==["hv","vh","hvh","vhv"].indexOf(E.shape)?(te=n.steps(E.shape),R=n.steps(E.shape.split("").reverse().join(""))):te=R="spline"===E.shape?function(me){var Ae=me[me.length-1];return me.length>1&&me[0][0]===Ae[0]&&me[0][1]===Ae[1]?n.smoothclosed(me.slice(1),E.smoothing):n.smoothopen(me,E.smoothing)}:function(me){return"M"+me.join("L")},N=function(me){return R(me.reverse())},ne=a(h,{xaxis:_,yaxis:A,connectGaps:T.connectgaps,baseTolerance:Math.max(E.width||1,3)/4,shape:E.shape,simplify:E.simplify,fill:T.fill}),J=T._polygons=new Array(ne.length),b=0;b<ne.length;b++)T._polygons[b]=f(ne[b]);ne.length&&(V=ne[0][0],j=(ee=ne[ne.length-1])[ee.length-1]),se=function(me){return function(Ae){if(G=te(Ae),X=N(Ae),$?U?($+="L"+G.substr(1),re=X+"L"+re.substr(1)):($+="Z"+G,re=X+"Z"+re):($=G,re=X),t.hasLines(T)&&Ae.length>1){var we=p.select(this);if(we.datum(h),me)w(we.style("opacity",0).attr("d",G).call(n.lineGroupStyle)).style("opacity",1);else{var Se=w(we);Se.attr("d",G),n.singleLineStyle(h,Se)}}}}}var ie=D.selectAll(".js-line").data(ne);w(ie.exit()).style("opacity",0).remove(),ie.each(se(!1)),ie.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(n.lineGroupStyle).each(se(!0)),n.setClipUrl(ie,c.layerClipId,i),ne.length?(z?(z.datum(h),V&&j&&(U?("y"===U?V[1]=j[1]=A.c2p(0,!0):"x"===U&&(V[0]=j[0]=_.c2p(0,!0)),w(z).attr("d","M"+j+"L"+V+"L"+$.substr(1)).call(n.singleFillStyle)):w(z).attr("d",$+"Z").call(n.singleFillStyle))):B&&("tonext"===T.fill.substr(0,6)&&$&&Z?("tonext"===T.fill?w(B).attr("d",$+"Z"+Z+"Z").call(n.singleFillStyle):w(B).attr("d",$+"L"+Z.substr(1)+"Z").call(n.singleFillStyle),T._polygons=T._polygons.concat(q)):(le(B),T._polygons=null)),T._prevRevpath=re,T._prevPolygons=J):(z?le(z):B&&le(B),T._polygons=T._prevRevpath=T._prevPolygons=null),S.datum(h),C.datum(h),function(me,Ae,we){var Se,Pe=we[0].trace,ze=t.hasMarkers(Pe),He=t.hasText(Pe),tt=function(me){if(me.ids)return be}(Pe),Oe=he,Be=he;if(ze||He){var Je=e,Ye=Pe.stackgroup,nt=Ye&&"infer zero"===i._fullLayout._scatterStackOpts[_._id+A._id][Ye].stackgaps;Pe.marker.maxdisplayed||Pe._needsCull?Je=nt?ve:de:Ye&&!nt&&(Je=_e),ze&&(Oe=Je),He&&(Be=Je)}var ft,dt=(Se=me.selectAll("path.point").data(Oe,tt)).enter().append("path").classed("point",!0);g&&dt.call(n.pointStyle,Pe,i).call(n.translatePoints,_,A).style("opacity",0).transition().style("opacity",1),Se.order(),ze&&(ft=n.makePointStyleFns(Pe)),Se.each(function(Rt){var Et=p.select(this),at=w(Et);n.translatePoint(Rt,at,_,A)?(n.singlePointStyle(Rt,at,Pe,ft,i),c.layerClipId&&n.hideOutsideRangePoint(Rt,at,_,A,Pe.xcalendar,Pe.ycalendar),Pe.customdata&&Et.classed("plotly-customdata",null!=Rt.data)):at.remove()}),g?Se.exit().transition().style("opacity",0).remove():Se.exit().remove(),(Se=Ae.selectAll("g").data(Be,tt)).enter().append("g").classed("textpoint",!0).append("text"),Se.order(),Se.each(function(Rt){var Et=p.select(this),at=w(Et.select("text"));n.translatePoint(Rt,at,_,A)?c.layerClipId&&n.hideOutsideRangePoint(Rt,Et,_,A,Pe.xcalendar,Pe.ycalendar):Et.remove()}),Se.selectAll("text").call(n.textPointStyle,Pe,i).each(function(Rt){var Et=_.c2p(Rt.x),at=A.c2p(Rt.y);p.select(this).selectAll("tspan.line").each(function(){w(p.select(this)).attr({x:Et,y:at})})}),Se.exit().remove()}(S,C,h);var ue=!1===T.cliponaxis?null:c.layerClipId;n.setClipUrl(S,ue,i),n.setClipUrl(C,ue,i)}function le(me){w(me).attr("d","M0,0Z")}function de(me){return me.filter(function(Ae){return!Ae.gap&&Ae.vis})}function ve(me){return me.filter(function(Ae){return Ae.vis})}function _e(me){return me.filter(function(Ae){return!Ae.gap})}function be(me){return me.id}function he(){return!1}}Q.exports=function(i,l,c,h,m,d){var o,b,A,E,g=!m,w=!!m&&m.duration>0,_=r(i,l,c);(o=h.selectAll("g.trace").data(_,function(A){return A[0].trace.uid})).enter().append("g").attr("class",function(A){return"trace scatter trace"+A[0].trace.uid}).style("stroke-miterlimit",2),o.order(),A=i,E=l,o.each(function(k){var O=y(p.select(this),"g","fills");n.setClipUrl(O,E.layerClipId,A);var D=k[0].trace,S=[];D._ownfill&&S.push("_ownFill"),D._nexttrace&&S.push("_nextFill");var C=O.selectAll("g").data(S,e);C.enter().append("g"),C.exit().each(function(z){D[z]=null}).remove(),C.order().each(function(z){D[z]=y(p.select(this),"path","js-fill")})}),w?(d&&(b=d()),p.transition().duration(m.duration).ease(m.easing).each("end",function(){b&&b()}).each("interrupt",function(){b&&b()}).each(function(){h.selectAll("g.trace").each(function(A,T){s(i,T,l,A,_,this,m)})})):o.each(function(A,T){s(i,T,l,A,_,this,m)}),g&&o.exit().remove(),h.selectAll("path:not([d])").remove()}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":939,"./link_traces":941,"./subtypes":950,"@plotly/d3":58}],947:[function(x,Q,K){"use strict";var p=x("./subtypes");Q.exports=function(v,u){var y,e,n,t,a=v.cd,r=v.xaxis,f=v.yaxis,s=[],i=a[0].trace;if(!p.hasMarkers(i)&&!p.hasText(i))return[];if(!1===u)for(y=0;y<a.length;y++)a[y].selected=0;else for(y=0;y<a.length;y++)n=r.c2p((e=a[y]).x),t=f.c2p(e.y),null!==e.i&&u.contains([n,t],!1,y,v)?(s.push({pointNumber:e.i,x:r.c2d(e.x),y:f.c2d(e.y)}),e.selected=1):e.selected=0;return s}},{"./subtypes":950}],948:[function(x,Q,K){"use strict";var p=["orientation","groupnorm","stackgaps"];Q.exports=function(v,u,y,e){var n=y._scatterStackOpts,t=e("stackgroup");if(t){var a=u.xaxis+u.yaxis,r=n[a];r||(r=n[a]={});var f=r[t],s=!1;f?f.traces.push(u):(f=r[t]={traceIndices:[],traces:[u]},s=!0);for(var i={orientation:u.x&&!u.y?"h":"v"},l=0;l<p.length;l++){var c=p[l],h=c+"Found";if(!f[h]){var m=void 0!==v[c],d="orientation"===c;if((m||s)&&(f[c]=e(c,i[c]),d&&(f.fillDflt="h"===f[c]?"tonextx":"tonexty"),m&&(f[h]=!0,!s&&(delete f.traces[0][c],d))))for(var o=0;o<f.traces.length-1;o++){var b=f.traces[o];b._input.fill!==b.fill&&(b.fill=f.fillDflt)}}}return f}}},{}],949:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/drawing"),u=x("../../registry");function y(n,t,a){v.pointStyle(n.selectAll("path.point"),t,a)}function e(n,t,a){v.textPointStyle(n.selectAll("text"),t,a)}Q.exports={style:function(n){var t=p.select(n).selectAll("g.trace.scatter");t.style("opacity",function(a){return a[0].trace.opacity}),t.selectAll("g.points").each(function(a){y(p.select(this),a.trace||a[0].trace,n)}),t.selectAll("g.text").each(function(a){e(p.select(this),a.trace||a[0].trace,n)}),t.selectAll("g.trace path.js-line").call(v.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(v.fillGroupStyle),u.getComponentMethod("errorbars","style")(t)},stylePoints:y,styleText:e,styleOnSelect:function(n,t,a){var r=t[0].trace;r.selectedpoints?(v.selectedPointStyle(a.selectAll("path.point"),r),v.selectedTextStyle(a.selectAll("text"),r)):(y(a,r,n),e(a,r,n))}}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],950:[function(x,Q,K){"use strict";var p=x("../../lib");Q.exports={hasLines:function(v){return v.visible&&v.mode&&-1!==v.mode.indexOf("lines")},hasMarkers:function(v){return v.visible&&(v.mode&&-1!==v.mode.indexOf("markers")||"splom"===v.type)},hasText:function(v){return v.visible&&v.mode&&-1!==v.mode.indexOf("text")},isBubble:function(v){return p.isPlainObject(v.marker)&&p.isArrayOrTypedArray(v.marker.size)}}},{"../../lib":503}],951:[function(x,Q,K){"use strict";var p=x("../../lib");Q.exports=function(v,u,y,e,n){n=n||{},e("textposition"),p.coerceFont(e,"textfont",y.font),n.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":503}],952:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../registry");Q.exports=function(u,y,e,n){var t,a=n("x"),r=n("y");if(v.getComponentMethod("calendars","handleTraceDefaults")(u,y,["x","y"],e),a){var f=p.minRowLength(a);r?t=Math.min(f,p.minRowLength(r)):(t=f,n("y0"),n("dy"))}else{if(!r)return 0;t=p.minRowLength(r),n("x0"),n("dx")}return y._length=t,t}},{"../../lib":503,"../../registry":638}],953:[function(x,Q,K){"use strict";var p=x("../scatter/attributes"),v=x("../../components/colorscale/attributes"),u=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=x("../../plots/template_attributes").hovertemplateAttrs,e=x("../../plots/template_attributes").texttemplateAttrs,n=x("../../plots/attributes"),t=x("../../constants/gl3d_dashes"),a=x("../../constants/gl3d_markers"),r=x("../../lib/extend").extendFlat,f=x("../../plot_api/edit_types").overrideAll,s=x("../../lib/sort_object_keys"),l=p.marker,c=l.line,h=r({width:p.line.width,dash:{valType:"enumerated",values:s(t),dflt:"solid"}},v("line")),m=Q.exports=f({x:p.x,y:p.y,z:{valType:"data_array"},text:r({},p.text,{}),texttemplate:e({},{}),hovertext:r({},p.hovertext,{}),hovertemplate:y(),xhoverformat:u("x"),yhoverformat:u("y"),zhoverformat:u("z"),mode:r({},p.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:p.connectgaps,line:h,marker:r({symbol:{valType:"enumerated",values:s(a),dflt:"circle",arrayOk:!0},size:r({},l.size,{dflt:8}),sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,opacity:r({},l.opacity,{arrayOk:!1}),colorbar:l.colorbar,line:r({width:r({},c.width,{arrayOk:!1})},v("marker.line"))},v("marker")),textposition:r({},p.textposition,{dflt:"top center"}),textfont:{color:p.textfont.color,size:p.textfont.size,family:r({},p.textfont.family,{arrayOk:!1})},opacity:n.opacity,hoverinfo:r({},n.hoverinfo)},"calc","nested");m.x.editType=m.y.editType=m.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":925}],954:[function(x,Q,K){"use strict";var p=x("../scatter/arrays_to_calcdata"),v=x("../scatter/colorscale_calc");Q.exports=function(u,y){var e=[{x:!1,y:!1,trace:y,t:{}}];return p(e,y),v(u,y),e}},{"../scatter/arrays_to_calcdata":924,"../scatter/colorscale_calc":928}],955:[function(x,Q,K){"use strict";var p=x("../../registry");function v(u,y,e,n){if(!y||!y.visible)return null;for(var t=p.getComponentMethod("errorbars","makeComputeError")(y),a=new Array(u.length),r=0;r<u.length;r++){var f=t(+u[r],r);if("log"===n.type){var s=n.c2l(u[r]),i=u[r]-f[0],l=u[r]+f[1];if(a[r]=[(n.c2l(i,!0)-s)*e,(n.c2l(l,!0)-s)*e],i>0){var c=n.c2l(i);n._lowerLogErrorBound||(n._lowerLogErrorBound=c),n._lowerErrorBound=Math.min(n._lowerLogErrorBound,c)}}else a[r]=[-f[0]*e,f[1]*e]}return a}Q.exports=function(u,y,e){var n=[v(u.x,u.error_x,y[0],e.xaxis),v(u.y,u.error_y,y[1],e.yaxis),v(u.z,u.error_z,y[2],e.zaxis)],t=function(l){for(var c=0;c<l.length;c++)if(l[c])return l[c].length;return 0}(n);if(0===t)return null;for(var a=new Array(t),r=0;r<t;r++){for(var f=[[0,0,0],[0,0,0]],s=0;s<3;s++)if(n[s])for(var i=0;i<2;i++)f[i][s]=n[s][r][i];a[r]=f}return a}},{"../../registry":638}],956:[function(x,Q,K){"use strict";var p=x("../../../stackgl_modules").gl_line3d,v=x("../../../stackgl_modules").gl_scatter3d,u=x("../../../stackgl_modules").gl_error3d,y=x("../../../stackgl_modules").gl_mesh3d,e=x("../../../stackgl_modules").delaunay_triangulate,n=x("../../lib"),t=x("../../lib/str2rgbarray"),a=x("../../lib/gl_format_color").formatColor,r=x("../scatter/make_bubble_size_func"),f=x("../../constants/gl3d_dashes"),s=x("../../constants/gl3d_markers"),i=x("../../plots/cartesian/axes"),l=x("../../components/fx/helpers").appendArrayPointValue,c=x("./calc_errors");function h(E,k){this.scene=E,this.uid=k,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var m=h.prototype;function d(E){return null==E?0:E.indexOf("left")>-1?-1:E.indexOf("right")>-1?1:0}function o(E){return null==E?0:E.indexOf("top")>-1?-1:E.indexOf("bottom")>-1?1:0}function b(E,k){return k(4*E)}function g(E){return s[E]}function w(E,k,O,D,S){var C=null;if(n.isArrayOrTypedArray(E)){C=[];for(var z=0;z<k;z++)C[z]=void 0===E[z]?D:O(E[z],S)}else C=O(E,n.identity);return C}function A(E){if(n.isArrayOrTypedArray(E)){var k=E[0];return n.isArrayOrTypedArray(k)&&(E=k),"rgb("+E.slice(0,3).map(function(O){return Math.round(255*O)})+")"}return null}function T(E){return n.isArrayOrTypedArray(E)?4===E.length&&"number"==typeof E[0]?A(E):E.map(A):null}m.handlePick=function(E){if(E.object&&(E.object===this.linePlot||E.object===this.delaunayMesh||E.object===this.textMarkers||E.object===this.scatterPlot)){var k=E.index=E.data.index;return E.object.highlight&&E.object.highlight(null),this.scatterPlot&&(E.object=this.scatterPlot,this.scatterPlot.highlight(E.data)),E.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[k]||0===this.textLabels[k])&&(E.textLabel=this.textLabels[k]):E.textLabel=this.textLabels),E.traceCoordinate=[this.data.x[k],this.data.y[k],this.data.z[k]],!0}},m.update=function(E){var k,O,D,S,C=this.scene.glplot.gl,z=f.solid;this.data=E;var B=function(E,k){var O,D,S,C,z,B,U=[],G=E.fullSceneLayout,X=E.dataScale,Z=G.xaxis,q=G.yaxis,W=G.zaxis,te=k.marker,R=k.line,N=k.x||[],V=k.y||[],ee=k.z||[],j=N.length,J=k.xcalendar,$=k.ycalendar,re=k.zcalendar;for(z=0;z<j;z++)O=Z.d2l(N[z],0,J)*X[0],D=q.d2l(V[z],0,$)*X[1],S=W.d2l(ee[z],0,re)*X[2],U[z]=[O,D,S];if(Array.isArray(k.text))B=k.text;else if(void 0!==k.text)for(B=new Array(j),z=0;z<j;z++)B[z]=k.text;function ne(Se,Pe){var ze=G[Se];return i.tickText(ze,ze.d2l(Pe),!0).text}var se=k.texttemplate;if(se){var ie=E.fullLayout._d3locale,ue=Array.isArray(se),le=ue?Math.min(se.length,j):j,de=ue?function(Se){return se[Se]}:function(){return se};for(B=new Array(le),z=0;z<le;z++){var ve={x:N[z],y:V[z],z:ee[z]},_e={xLabel:ne("xaxis",N[z]),yLabel:ne("yaxis",V[z]),zLabel:ne("zaxis",ee[z])},be={};l(be,k,z);var Te=k._meta||{};B[z]=n.texttemplateString(de(z),_e,ie,be,ve,Te)}}if(C={position:U,mode:k.mode,text:B},"line"in k&&(C.lineColor=a(R,1,j),C.lineWidth=R.width,C.lineDashes=R.dash),"marker"in k){var he=r(k);C.scatterColor=a(te,1,j),C.scatterSize=w(te.size,j,b,20,he),C.scatterMarker=w(te.symbol,j,g,"\u25cf"),C.scatterLineWidth=te.line.width,C.scatterLineColor=a(te.line,1,j),C.scatterAngle=0}"textposition"in k&&(C.textOffset=function(Se){var Pe=[0,0];if(Array.isArray(Se))for(var ze=0;ze<Se.length;ze++)Pe[ze]=[0,0],Se[ze]&&(Pe[ze][0]=d(Se[ze]),Pe[ze][1]=o(Se[ze]));else Pe[0]=d(Se),Pe[1]=o(Se);return Pe}(k.textposition),C.textColor=a(k.textfont,1,j),C.textSize=w(k.textfont.size,j,n.identity,12),C.textFont=k.textfont.family,C.textAngle=0);var me=["x","y","z"];for(C.project=[!1,!1,!1],C.projectScale=[1,1,1],C.projectOpacity=[1,1,1],z=0;z<3;++z){var Ae=k.projection[me[z]];(C.project[z]=Ae.show)&&(C.projectOpacity[z]=Ae.opacity,C.projectScale[z]=Ae.scale)}C.errorBounds=c(k,X,G);var we=function(Se){for(var Pe=[0,0,0],ze=[[0,0,0],[0,0,0],[0,0,0]],He=[1,1,1],tt=0;tt<3;tt++){var Oe=Se[tt];Oe&&!1!==Oe.copy_zstyle&&!1!==Se[2].visible&&(Oe=Se[2]),Oe&&Oe.visible&&(Pe[tt]=Oe.width/2,ze[tt]=t(Oe.color),He[tt]=Oe.thickness)}return{capSize:Pe,color:ze,lineWidth:He}}([k.error_x,k.error_y,k.error_z]);return C.errorColor=we.color,C.errorLineWidth=we.lineWidth,C.errorCapSize=we.capSize,C.delaunayAxis=k.surfaceaxis,C.delaunayColor=t(k.surfacecolor),C}(this.scene,E);"mode"in B&&(this.mode=B.mode),"lineDashes"in B&&B.lineDashes in f&&(z=f[B.lineDashes]),this.color=T(B.scatterColor)||T(B.lineColor),this.dataPoints=B.position,k={gl:this.scene.glplot.gl,position:B.position,color:B.lineColor,lineWidth:B.lineWidth||1,dashes:z[0],dashScale:z[1],opacity:E.opacity,connectGaps:E.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(k):(this.linePlot=p(k),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var U=E.opacity;if(E.marker&&E.marker.opacity&&(U*=E.marker.opacity),O={gl:this.scene.glplot.gl,position:B.position,color:B.scatterColor,size:B.scatterSize,glyph:B.scatterMarker,opacity:U,orthographic:!0,lineWidth:B.scatterLineWidth,lineColor:B.scatterLineColor,project:B.project,projectScale:B.projectScale,projectOpacity:B.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(O):(this.scatterPlot=v(O),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),S={gl:this.scene.glplot.gl,position:B.position,glyph:B.text,color:B.textColor,size:B.textSize,angle:B.textAngle,alignment:B.textOffset,font:B.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:E.opacity},this.textLabels=E.hovertext||E.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(S):(this.textMarkers=v(S),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),D={gl:this.scene.glplot.gl,position:B.position,color:B.errorColor,error:B.errorBounds,lineWidth:B.errorLineWidth,capSize:B.errorCapSize,opacity:E.opacity},this.errorBars?B.errorBounds?this.errorBars.update(D):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):B.errorBounds&&(this.errorBars=u(D),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),B.delaunayAxis>=0){var G=function(X,Z,q){var W,te=(q+1)%3,R=(q+2)%3,N=[],V=[];for(W=0;W<X.length;++W){var ee=X[W];!isNaN(ee[te])&&isFinite(ee[te])&&!isNaN(ee[R])&&isFinite(ee[R])&&(N.push([ee[te],ee[R]]),V.push(W))}var j=e(N);for(W=0;W<j.length;++W)for(var J=j[W],$=0;$<J.length;++$)J[$]=V[J[$]];return{positions:X,cells:j,meshColor:Z}}(B.position,B.delaunayColor,B.delaunayAxis);G.opacity=E.opacity,this.delaunayMesh?this.delaunayMesh.update(G):(G.gl=C,this.delaunayMesh=y(G),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},m.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},Q.exports=function(E,k){var O=new h(E,k.uid);return O.update(k),O}},{"../../../stackgl_modules":1119,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":942,"./calc_errors":955}],957:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../lib"),u=x("../scatter/subtypes"),y=x("../scatter/marker_defaults"),e=x("../scatter/line_defaults"),n=x("../scatter/text_defaults"),t=x("./attributes");Q.exports=function(a,r,f,s){function i(b,g){return v.coerce(a,r,t,b,g)}if(b=a,g=r,_=s,A=0,T=(w=i)("x"),E=w("y"),k=w("z"),p.getComponentMethod("calendars","handleTraceDefaults")(b,g,["x","y","z"],_),T&&E&&k&&(A=Math.min(T.length,E.length,k.length),g._length=g._xlength=g._ylength=g._zlength=A),A){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),i("mode"),u.hasLines(r)&&(i("connectgaps"),e(a,r,f,s,i)),u.hasMarkers(r)&&y(a,r,f,s,i,{noSelect:!0}),u.hasText(r)&&(i("texttemplate"),n(a,r,s,i,{noSelect:!0}));var l=(r.line||{}).color,c=(r.marker||{}).color;i("surfaceaxis")>=0&&i("surfacecolor",l||c);for(var h=["x","y","z"],m=0;m<3;++m){var d="projection."+h[m];i(d+".show")&&(i(d+".opacity"),i(d+".scale"))}var o=p.getComponentMethod("errorbars","supplyDefaults");o(a,r,l||c||f,{axis:"z"}),o(a,r,l||c||f,{axis:"y",inherit:"z"}),o(a,r,l||c||f,{axis:"x",inherit:"z"})}else r.visible=!1;var b,g,w,_,A,T,E,k}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":938,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"./attributes":953}],958:[function(x,Q,K){"use strict";Q.exports={plot:x("./convert"),attributes:x("./attributes"),markerSymbols:x("../../constants/gl3d_markers"),supplyDefaults:x("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:x("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":953,"./calc":954,"./convert":956,"./defaults":957}],959:[function(x,Q,K){"use strict";var p=x("../scatter/attributes"),v=x("../../plots/attributes"),u=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../../plots/template_attributes").texttemplateAttrs,e=x("../../components/colorscale/attributes"),n=x("../../lib/extend").extendFlat,t=p.marker,a=p.line,r=t.line;Q.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:n({},p.mode,{dflt:"markers"}),text:n({},p.text,{}),texttemplate:y({editType:"plot"},{keys:["a","b","text"]}),hovertext:n({},p.hovertext,{}),line:{color:a.color,width:a.width,dash:a.dash,shape:n({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:p.connectgaps,fill:n({},p.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:p.fillcolor,marker:n({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:n({width:r.width,editType:"calc"},e("marker.line")),gradient:t.gradient,editType:"calc"},e("marker")),textfont:p.textfont,textposition:p.textposition,selected:p.selected,unselected:p.unselected,hoverinfo:n({},v.hoverinfo,{flags:["a","b","text","name"]}),hoveron:p.hoveron,hovertemplate:u()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":925}],960:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../scatter/colorscale_calc"),u=x("../scatter/arrays_to_calcdata"),y=x("../scatter/calc_selection"),e=x("../scatter/calc").calcMarkerSize,n=x("../carpet/lookup_carpetid");Q.exports=function(t,a){var r=a._carpetTrace=n(t,a);if(r&&r.visible&&"legendonly"!==r.visible){var f;a.xaxis=r.xaxis,a.yaxis=r.yaxis;var s,i,l=a._length,c=new Array(l),h=!1;for(f=0;f<l;f++)if(i=a.b[f],p(s=a.a[f])&&p(i)){var m=r.ab2xy(+s,+i,!0),d=r.isVisible(+s,+i);d||(h=!0),c[f]={x:m[0],y:m[1],a:s,b:i,vis:d}}else c[f]={x:!1,y:!1};return a._needsCull=h,c[0].carpet=r,c[0].trace=a,e(a,l),v(t,a),u(c,a),y(c,a),c}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":924,"../scatter/calc":926,"../scatter/calc_selection":927,"../scatter/colorscale_calc":928,"fast-isnumeric":190}],961:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../scatter/constants"),u=x("../scatter/subtypes"),y=x("../scatter/marker_defaults"),e=x("../scatter/line_defaults"),n=x("../scatter/line_shape_defaults"),t=x("../scatter/text_defaults"),a=x("../scatter/fillcolor_defaults"),r=x("./attributes");Q.exports=function(f,s,i,l){function c(b,g){return p.coerce(f,s,r,b,g)}c("carpet"),s.xaxis="x",s.yaxis="y";var h=c("a"),m=c("b"),d=Math.min(h.length,m.length);if(d){s._length=d,c("text"),c("texttemplate"),c("hovertext"),c("mode",d<v.PTS_LINESONLY?"lines+markers":"lines"),u.hasLines(s)&&(e(f,s,i,l,c),n(f,s,c),c("connectgaps")),u.hasMarkers(s)&&y(f,s,i,l,c,{gradient:!0}),u.hasText(s)&&t(f,s,l,c);var o=[];(u.hasMarkers(s)||u.hasText(s))&&(c("marker.maxdisplayed"),o.push("points")),c("fill"),"none"!==s.fill&&(a(f,s,i,c),u.hasLines(s)||n(f,s,c)),"tonext"!==s.fill&&"toself"!==s.fill||o.push("fills"),"fills"!==c("hoveron",o.join("+")||"points")&&c("hovertemplate"),p.coerceSelectionMarkerOpacity(s,c)}else s.visible=!1}},{"../../lib":503,"../scatter/constants":929,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/line_shape_defaults":940,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"./attributes":959}],962:[function(x,Q,K){"use strict";Q.exports=function(p,v,u,y,e){var n=y[e];return p.a=n.a,p.b=n.b,p.y=n.y,p}},{}],963:[function(x,Q,K){"use strict";Q.exports=function(p,v){var u={},y=v._carpet,e=y.ab2ij([p.a,p.b]),n=Math.floor(e[0]),t=e[0]-n,a=Math.floor(e[1]),f=y.evalxy([],n,a,t,e[1]-a);return u.yLabel=f[1].toFixed(3),u}},{}],964:[function(x,Q,K){"use strict";var p=x("../scatter/hover"),v=x("../../lib").fillText;Q.exports=function(u,y,e,n){var t=p(u,y,e,n);if(t&&!1!==t[0].index){var a=t[0];if(void 0===a.index){var f=u.xa._length,s=f*(1-a.y0/u.ya._length)/2,i=f-s;return a.x0=Math.max(Math.min(a.x0,i),s),a.x1=Math.max(Math.min(a.x1,i),s),t}var l=a.cd[a.index];a.a=l.a,a.b=l.b,a.xLabelVal=void 0,a.yLabelVal=void 0;var c=a.trace,h=c._carpet,m=c._module.formatLabels(l,c);a.yLabel=m.yLabel,delete a.text;var d=[];if(!c.hovertemplate){var o=(l.hi||c.hoverinfo).split("+");-1!==o.indexOf("all")&&(o=["a","b","text"]),-1!==o.indexOf("a")&&b(h.aaxis,l.a),-1!==o.indexOf("b")&&b(h.baxis,l.b),d.push("y: "+a.yLabel),-1!==o.indexOf("text")&&v(l,c,d),a.extraText=d.join("<br>")}return t}function b(g,w){var _;_=g.labelprefix&&g.labelprefix.length>0?g.labelprefix.replace(/ = $/,""):g._hovertitle,d.push(_+": "+w.toFixed(3)+g.labelsuffix)}}},{"../../lib":503,"../scatter/hover":936}],965:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),plot:x("./plot"),style:x("../scatter/style").style,styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover"),selectPoints:x("../scatter/select"),eventData:x("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:x("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":943,"../scatter/select":947,"../scatter/style":949,"./attributes":959,"./calc":960,"./defaults":961,"./event_data":962,"./format_labels":963,"./hover":964,"./plot":966}],966:[function(x,Q,K){"use strict";var p=x("../scatter/plot"),v=x("../../plots/cartesian/axes"),u=x("../../components/drawing");Q.exports=function(y,e,n,t){var a,f,s=n[0][0].carpet,i={xaxis:v.getFromId(y,s.xaxis||"x"),yaxis:v.getFromId(y,s.yaxis||"y"),plot:e.plot};for(p(y,i,n,t),a=0;a<n.length;a++)f=t.selectAll("g.trace"+n[a][0].trace.uid+" .js-line"),u.setClipUrl(f,n[a][0].carpet._clipPathId,y)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":946}],967:[function(x,Q,K){"use strict";var p=x("../../plots/template_attributes").hovertemplateAttrs,v=x("../../plots/template_attributes").texttemplateAttrs,u=x("../scatter/attributes"),y=x("../../plots/attributes"),e=x("../../components/colorscale/attributes"),n=x("../../components/drawing/attributes").dash,t=x("../../lib/extend").extendFlat,a=x("../../plot_api/edit_types").overrideAll,r=u.marker,f=u.line,s=r.line;Q.exports=a({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:t({},u.mode,{dflt:"markers"}),text:t({},u.text,{}),texttemplate:v({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:t({},u.hovertext,{}),textfont:u.textfont,textposition:u.textposition,line:{color:f.color,width:f.width,dash:n},connectgaps:u.connectgaps,marker:t({symbol:r.symbol,opacity:r.opacity,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:t({width:s.width},e("marker.line")),gradient:r.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:u.fillcolor,selected:u.selected,unselected:u.unselected,hoverinfo:t({},y.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:p()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":925}],968:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../constants/numerical").BADNUM,u=x("../scatter/colorscale_calc"),y=x("../scatter/arrays_to_calcdata"),e=x("../scatter/calc_selection"),n=x("../../lib")._;function t(a){return a&&"string"==typeof a}Q.exports=function(a,r){var f,s=Array.isArray(r.locations),i=s?r.locations.length:r._length,l=new Array(i);f=r.geojson?function(b){return t(b)||p(b)}:t;for(var c=0;c<i;c++){var h=l[c]={};if(s){var m=r.locations[c];h.loc=f(m)?m:null}else{var d=r.lon[c],o=r.lat[c];h.lonlat=p(d)&&p(o)?[+d,+o]:[v,v]}}return y(l,r),u(a,r),e(l,r),i&&(l[0].t={labels:{lat:n(a,"lat:")+" ",lon:n(a,"lon:")+" "}}),l}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":924,"../scatter/calc_selection":927,"../scatter/colorscale_calc":928,"fast-isnumeric":190}],969:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../scatter/subtypes"),u=x("../scatter/marker_defaults"),y=x("../scatter/line_defaults"),e=x("../scatter/text_defaults"),n=x("../scatter/fillcolor_defaults"),t=x("./attributes");Q.exports=function(a,r,f,s){function i(b,g){return p.coerce(a,r,t,b,g)}var l,c=i("locations");if(c&&c.length){var h,m=i("geojson");("string"==typeof m&&""!==m||p.isPlainObject(m))&&(h="geojson-id"),"geojson-id"===i("locationmode",h)&&i("featureidkey"),l=c.length}else{var d=i("lon")||[],o=i("lat")||[];l=Math.min(d.length,o.length)}l?(r._length=l,i("text"),i("hovertext"),i("hovertemplate"),i("mode"),v.hasLines(r)&&(y(a,r,f,s,i),i("connectgaps")),v.hasMarkers(r)&&u(a,r,f,s,i,{gradient:!0}),v.hasText(r)&&(i("texttemplate"),e(a,r,s,i)),i("fill"),"none"!==r.fill&&n(a,r,f,i),p.coerceSelectionMarkerOpacity(r,i)):r.visible=!1}},{"../../lib":503,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"./attributes":967}],970:[function(x,Q,K){"use strict";Q.exports=function(p,v,u,y,e){p.lon=v.lon,p.lat=v.lat,p.location=v.loc?v.loc:null;var n=y[e];return n.fIn&&n.fIn.properties&&(p.properties=n.fIn.properties),p}},{}],971:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes");Q.exports=function(v,u,y){var e={},n=y[u.geo]._subplot.mockAxis,t=v.lonlat;return e.lonLabel=p.tickText(n,n.c2l(t[0]),!0).text,e.latLabel=p.tickText(n,n.c2l(t[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],972:[function(x,Q,K){"use strict";var p=x("../../components/fx"),v=x("../../constants/numerical").BADNUM,u=x("../scatter/get_trace_color"),y=x("../../lib").fillText,e=x("./attributes");Q.exports=function(n,t,a){var r=n.cd,f=r[0].trace,s=n.xa,i=n.ya,l=n.subplot,c=l.projection.isLonLatOverEdges,h=l.project;if(p.getClosest(r,function(_){var A=_.lonlat;if(A[0]===v||c(A))return 1/0;var T=h(A),E=h([t,a]),k=Math.abs(T[0]-E[0]),O=Math.abs(T[1]-E[1]),D=Math.max(3,_.mrc||0);return Math.max(Math.sqrt(k*k+O*O)-D,1-3/D)},n),!1!==n.index){var m=r[n.index],d=m.lonlat,o=[s.c2p(d),i.c2p(d)],b=m.mrc||1;n.x0=o[0]-b,n.x1=o[0]+b,n.y0=o[1]-b,n.y1=o[1]+b,n.loc=m.loc,n.lon=d[0],n.lat=d[1];var g={};g[f.geo]={_subplot:l};var w=f._module.formatLabels(m,f,g);return n.lonLabel=w.lonLabel,n.latLabel=w.latLabel,n.color=u(f,m),n.extraText=function(_,A,T,E){if(!_.hovertemplate){var k=A.hi||_.hoverinfo,O="all"===k?e.hoverinfo.flags:k.split("+"),D=-1!==O.indexOf("location")&&Array.isArray(_.locations),S=-1!==O.indexOf("lon"),C=-1!==O.indexOf("lat"),z=-1!==O.indexOf("text"),B=[];return D?B.push(A.loc):S&&C?B.push("("+U(T.latLabel)+", "+U(T.lonLabel)+")"):S?B.push(E.lon+U(T.lonLabel)):C&&B.push(E.lat+U(T.latLabel)),z&&y(A,_,B),B.join("<br>")}function U(G){return G+"\xb0"}}(f,m,n,r[0].t.labels),n.hovertemplate=f.hovertemplate,[n]}}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":935,"./attributes":967}],973:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),calcGeoJSON:x("./plot").calcGeoJSON,plot:x("./plot").plot,style:x("./style"),styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover"),eventData:x("./event_data"),selectPoints:x("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:x("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":943,"../scatter/style":949,"./attributes":967,"./calc":968,"./defaults":969,"./event_data":970,"./format_labels":971,"./hover":972,"./plot":974,"./select":975,"./style":976}],974:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=x("../../lib/topojson_utils").getTopojsonFeatures,y=x("../../lib/geojson_utils"),e=x("../../lib/geo_location_utils"),n=x("../../plots/cartesian/autorange").findExtremes,t=x("../../constants/numerical").BADNUM,a=x("../scatter/calc").calcMarkerSize,r=x("../scatter/subtypes"),f=x("./style");Q.exports={calcGeoJSON:function(s,i){var l,c,h=s[0].trace,m=i[h.geo],d=m._subplot,o=h._length;if(Array.isArray(h.locations)){var b=h.locationmode,g="geojson-id"===b?e.extractTraceFeature(s):u(h,d.topojson);for(l=0;l<o;l++){c=s[l];var w="geojson-id"===b?c.fOut:e.locationToFeature(b,c.loc,g);c.lonlat=w?w.properties.ct:[t,t]}}var _,A,T={padded:!0};if("geojson"===m.fitbounds&&"geojson-id"===h.locationmode){var E=e.computeBbox(e.getTraceGeojson(h));_=[E[0],E[2]],A=[E[1],E[3]]}else{for(_=new Array(o),A=new Array(o),l=0;l<o;l++)_[l]=(c=s[l]).lonlat[0],A[l]=c.lonlat[1];T.ppad=a(h,o)}h._extremes.lon=n(m.lonaxis._ax,_,T),h._extremes.lat=n(m.lataxis._ax,A,T)},plot:function(s,i,l){var c=i.layers.frontplot.select(".scatterlayer"),h=v.makeTraceGroups(c,l,"trace scattergeo");function m(d,o){d.lonlat[0]===t&&p.select(o).remove()}h.selectAll("*").remove(),h.each(function(d){var o=p.select(this),b=d[0].trace;if(r.hasLines(b)||"none"!==b.fill){var g=y.calcTraceToLineCoords(d),w="none"!==b.fill?y.makePolygon(g):y.makeLine(g);o.selectAll("path.js-line").data([{geojson:w,trace:b}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}r.hasMarkers(b)&&o.selectAll("path.point").data(v.identity).enter().append("path").classed("point",!0).each(function(_){m(_,this)}),r.hasText(b)&&o.selectAll("g").data(v.identity).enter().append("g").append("text").each(function(_){m(_,this)}),f(s,d)})}}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":926,"../scatter/subtypes":950,"./style":976,"@plotly/d3":58}],975:[function(x,Q,K){"use strict";var p=x("../scatter/subtypes"),v=x("../../constants/numerical").BADNUM;Q.exports=function(u,y){var e,n,t,a,r,f=u.cd,s=u.xaxis,i=u.yaxis,l=[],c=f[0].trace;if(!p.hasMarkers(c)&&!p.hasText(c))return[];if(!1===y)for(r=0;r<f.length;r++)f[r].selected=0;else for(r=0;r<f.length;r++)(n=(e=f[r]).lonlat)[0]!==v&&(t=s.c2p(n),a=i.c2p(n),y.contains([t,a],null,r,u)?(l.push({pointNumber:r,lon:n[0],lat:n[1]}),e.selected=1):e.selected=0);return l}},{"../../constants/numerical":479,"../scatter/subtypes":950}],976:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/drawing"),u=x("../../components/color"),y=x("../scatter/style"),e=y.stylePoints,n=y.styleText;Q.exports=function(t,a){var r,f,s,i;a&&(r=t,s=(f=a)[0].trace,(i=f[0].node3).style("opacity",f[0].trace.opacity),e(i,s,r),n(i,s,r),i.selectAll("path.js-line").style("fill","none").each(function(l){var c=p.select(this),h=l.trace,m=h.line||{};c.call(u.stroke,m.color).call(v.dashLine,m.dash||"",m.width||0),"none"!==h.fill&&c.call(u.fill,h.fillcolor)}))}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":949,"@plotly/d3":58}],977:[function(x,Q,K){"use strict";var p=x("../../plots/attributes"),v=x("../scatter/attributes"),u=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=x("../../components/colorscale/attributes"),e=x("../../lib/sort_object_keys"),n=x("../../lib/extend").extendFlat,t=x("../../plot_api/edit_types").overrideAll,a=x("./constants").DASHES,r=v.line,f=v.marker,s=f.line,i=Q.exports=t({x:v.x,x0:v.x0,dx:v.dx,y:v.y,y0:v.y0,dy:v.dy,xperiod:v.xperiod,yperiod:v.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:v.xperiodalignment,yperiodalignment:v.yperiodalignment,xhoverformat:u("x"),yhoverformat:u("y"),text:v.text,hovertext:v.hovertext,textposition:v.textposition,textfont:v.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(a),dflt:"solid"}},marker:n({},y("marker"),{symbol:f.symbol,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:f.opacity,colorbar:f.colorbar,line:n({},y("marker.line"),{width:s.width})}),connectgaps:v.connectgaps,fill:n({},v.fill,{dflt:"none"}),fillcolor:v.fillcolor,selected:{marker:v.selected.marker,textfont:v.selected.textfont},unselected:{marker:v.unselected.marker,textfont:v.unselected.textfont},opacity:p.opacity},"calc","nested");i.x.editType=i.y.editType=i.x0.editType=i.y0.editType="calc+clearAxisTypes",i.hovertemplate=v.hovertemplate,i.texttemplate=v.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":925,"./constants":979}],978:[function(x,Q,K){"use strict";var p=x("@plotly/point-cluster"),v=x("../../lib"),u=x("../../plots/cartesian/axis_ids"),y=x("../../plots/cartesian/autorange").findExtremes,e=x("../../plots/cartesian/align_period"),n=x("../scatter/calc"),t=n.calcMarkerSize,a=n.calcAxisExpansion,r=n.setFirstScatter,f=x("../scatter/colorscale_calc"),s=x("./convert"),i=x("./scene_update"),l=x("../../constants/numerical").BADNUM,c=x("./constants").TOO_MANY_POINTS;function h(m,d,o){var b=m._extremes[d._id],g=y(d,o._bnds,{padded:!0});b.min=b.min.concat(g.min),b.max=b.max.concat(g.max)}Q.exports=function(m,d){var o,b=m._fullLayout,g=u.getFromId(m,d.xaxis),w=u.getFromId(m,d.yaxis),_=b._plots[d.xaxis+d.yaxis],A=d._length,T=A>=c,E=2*A,k={},O=g.makeCalcdata(d,"x"),D=w.makeCalcdata(d,"y"),S=e(d,g,"x",O),C=e(d,w,"y",D),z=S.vals,B=C.vals;d._x=z,d._y=B,d.xperiodalignment&&(d._origX=O,d._xStarts=S.starts,d._xEnds=S.ends),d.yperiodalignment&&(d._origY=D,d._yStarts=C.starts,d._yEnds=C.ends);var U=new Array(E),G=new Array(A);for(o=0;o<A;o++)U[2*o]=z[o]===l?NaN:z[o],U[2*o+1]=B[o]===l?NaN:B[o],G[o]=o;if("log"===g.type)for(o=0;o<E;o+=2)U[o]=g.c2l(U[o]);if("log"===w.type)for(o=1;o<E;o+=2)U[o]=w.c2l(U[o]);T&&"log"!==g.type&&"log"!==w.type?k.tree=p(U):k.ids=G,f(m,d);var X,Z=function(W,te,R,N,V,ee){var j=s.style(W,R);if(j.marker&&(j.marker.positions=N),j.line&&N.length>1&&v.extendFlat(j.line,s.linePositions(W,R,N)),j.errorX||j.errorY){var J=s.errorBarPositions(W,R,N,V,ee);j.errorX&&v.extendFlat(j.errorX,J.x),j.errorY&&v.extendFlat(j.errorY,J.y)}return j.text&&(v.extendFlat(j.text,{positions:N},s.textPosition(W,R,j.text,j.marker)),v.extendFlat(j.textSel,{positions:N},s.textPosition(W,R,j.text,j.markerSel)),v.extendFlat(j.textUnsel,{positions:N},s.textPosition(W,R,j.text,j.markerUnsel))),j}(m,0,d,U,z,B),q=i(m,_);return r(b,d),T?Z.marker&&(X=Z.marker.sizeAvg||Math.max(Z.marker.size,3)):X=t(d,A),a(m,d,g,w,z,B,X),Z.errorX&&h(d,g,Z.errorX),Z.errorY&&h(d,w,Z.errorY),Z.fill&&!q.fill2d&&(q.fill2d=!0),Z.marker&&!q.scatter2d&&(q.scatter2d=!0),Z.line&&!q.line2d&&(q.line2d=!0),!Z.errorX&&!Z.errorY||q.error2d||(q.error2d=!0),Z.text&&!q.glText&&(q.glText=!0),Z.marker&&(Z.marker.snap=A),q.lineOptions.push(Z.line),q.errorXOptions.push(Z.errorX),q.errorYOptions.push(Z.errorY),q.fillOptions.push(Z.fill),q.markerOptions.push(Z.marker),q.markerSelectedOptions.push(Z.markerSel),q.markerUnselectedOptions.push(Z.markerUnsel),q.textOptions.push(Z.text),q.textSelectedOptions.push(Z.textSel),q.textUnselectedOptions.push(Z.textUnsel),q.selectBatch.push([]),q.unselectBatch.push([]),k._scene=q,k.index=q.count,k.x=z,k.y=B,k.positions=U,q.count++,[{x:!1,y:!1,t:k,trace:d}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":926,"../scatter/colorscale_calc":928,"./constants":979,"./convert":980,"./scene_update":988,"@plotly/point-cluster":59}],979:[function(x,Q,K){"use strict";Q.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],980:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("svg-path-sdf"),u=x("color-normalize"),y=x("../../registry"),e=x("../../lib"),n=x("../../components/drawing"),t=x("../../plots/cartesian/axis_ids"),a=x("../../lib/gl_format_color").formatColor,r=x("../scatter/subtypes"),f=x("../scatter/make_bubble_size_func"),s=x("./helpers"),i=x("./constants"),l=x("../../constants/interactions").DESELECTDIM,c={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},h=x("../../components/fx/helpers").appendArrayPointValue;function m(O,D){var S,C=O._fullLayout,z=D._length,B=D.textfont,U=D.textposition,G=Array.isArray(U)?U:[U],X=B.color,Z=B.size,q=B.family,W={},te=O._context.plotGlPixelRatio,R=D.texttemplate;if(R){W.text=[];var N=C._d3locale,V=Array.isArray(R),ee=V?Math.min(R.length,z):z,j=V?function(ue){return R[ue]}:function(){return R};for(S=0;S<ee;S++){var J={i:S},$=D._module.formatLabels(J,D,C),re={};h(re,D,S);var ne=D._meta||{};W.text.push(e.texttemplateString(j(S),$,N,re,J,ne))}}else W.text=Array.isArray(D.text)&&D.text.length<z?D.text.slice():D.text;if(Array.isArray(W.text))for(S=W.text.length;S<z;S++)W.text[S]="";for(W.opacity=D.opacity,W.font={},W.align=[],W.baseline=[],S=0;S<G.length;S++){var se=G[S].split(/\s+/);switch(se[1]){case"left":W.align.push("right");break;case"right":W.align.push("left");break;default:W.align.push(se[1])}switch(se[0]){case"top":W.baseline.push("bottom");break;case"bottom":W.baseline.push("top");break;default:W.baseline.push(se[0])}}if(Array.isArray(X))for(W.color=new Array(z),S=0;S<z;S++)W.color[S]=X[S];else W.color=X;if(e.isArrayOrTypedArray(Z)||Array.isArray(q))for(W.font=new Array(z),S=0;S<z;S++){var ie=W.font[S]={};ie.size=(e.isTypedArray(Z)?Z[S]:Array.isArray(Z)?p(Z[S])?Z[S]:0:Z)*te,ie.family=Array.isArray(q)?q[S]:q}else W.font={size:Z*te,family:q};return W}function d(O){var D,S,C=O._length,z=O.marker,B={},U=e.isArrayOrTypedArray(z.symbol),G=e.isArrayOrTypedArray(z.color),X=e.isArrayOrTypedArray(z.line.color),Z=e.isArrayOrTypedArray(z.opacity),q=e.isArrayOrTypedArray(z.size),W=e.isArrayOrTypedArray(z.line.width);if(U||(S=s.isOpenSymbol(z.symbol)),U||G||X||Z){B.colors=new Array(C),B.borderColors=new Array(C);var te=a(z,z.opacity,C),R=a(z.line,z.opacity,C);if(!Array.isArray(R[0])){var N=R;for(R=Array(C),D=0;D<C;D++)R[D]=N}if(!Array.isArray(te[0])){var V=te;for(te=Array(C),D=0;D<C;D++)te[D]=V}for(B.colors=te,B.borderColors=R,D=0;D<C;D++)U&&(S=s.isOpenSymbol(z.symbol[D])),S&&(R[D]=te[D].slice(),te[D]=te[D].slice(),te[D][3]=0);B.opacity=O.opacity}else S?(B.color=u(z.color,"uint8"),B.color[3]=0,B.borderColor=u(z.color,"uint8")):(B.color=u(z.color,"uint8"),B.borderColor=u(z.line.color,"uint8")),B.opacity=O.opacity*z.opacity;if(U)for(B.markers=new Array(C),D=0;D<C;D++)B.markers[D]=k(z.symbol[D]);else B.marker=k(z.symbol);var j,J=f(O,1);if(q||W){var $,re=B.sizes=new Array(C),ne=B.borderSizes=new Array(C),se=0;if(q){for(D=0;D<C;D++)re[D]=J(z.size[D]),se+=re[D];$=se/C}else for(j=J(z.size),D=0;D<C;D++)re[D]=j;if(W)for(D=0;D<C;D++)ne[D]=z.line.width[D];else for(j=z.line.width,D=0;D<C;D++)ne[D]=j;B.sizeAvg=$}else B.size=J(z&&z.size||10),B.borderSizes=J(z.line.width);return B}function o(O,D){var C={};return D&&(D.marker&&D.marker.symbol?C=d(e.extendFlat({},O.marker,D.marker)):D.marker&&(D.marker.size&&(C.size=D.marker.size),D.marker.color&&(C.colors=D.marker.color),void 0!==D.marker.opacity&&(C.opacity=D.marker.opacity))),C}function b(O,D,S){var C={};if(!S)return C;if(S.textfont){var z={opacity:1,text:D.text,texttemplate:D.texttemplate,textposition:D.textposition,textfont:e.extendFlat({},D.textfont)};S.textfont&&e.extendFlat(z.textfont,S.textfont),C=m(O,z)}return C}function g(O,D,S){var C={capSize:2*D.width*S,lineWidth:D.thickness*S,color:D.color};return D.copy_ystyle&&(C=O.error_y),C}var w=i.SYMBOL_SDF_SIZE,_=i.SYMBOL_SIZE,A=i.SYMBOL_STROKE,T={},E=n.symbolFuncs[0](.05*_);function k(O){if("circle"===O)return null;var D,S,C=n.symbolNumber(O),z=n.symbolFuncs[C%100],B=!!n.symbolNoDot[C%100],U=!!n.symbolNoFill[C%100],G=s.isDotSymbol(O);return T[O]?T[O]:(D=G&&!B?z(1.1*_)+E:z(_),S=v(D,{w,h:w,viewBox:[-_,-_,_,_],stroke:U?A:-A}),T[O]=S,S||null)}Q.exports={style:function(O,D){var S,C={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},z=O._context.plotGlPixelRatio;if(!0!==D.visible)return C;if(r.hasText(D)&&(C.text=m(O,D),C.textSel=b(O,D,D.selected),C.textUnsel=b(O,D,D.unselected)),r.hasMarkers(D)&&(C.marker=d(D),C.markerSel=o(D,D.selected),C.markerUnsel=o(D,D.unselected),!D.unselected&&e.isArrayOrTypedArray(D.marker.opacity))){var B=D.marker.opacity;for(C.markerUnsel.opacity=new Array(B.length),S=0;S<B.length;S++)C.markerUnsel.opacity[S]=l*B[S]}if(r.hasLines(D)){C.line={overlay:!0,thickness:D.line.width*z,color:D.line.color,opacity:D.opacity};var U=(i.DASHES[D.line.dash]||[1]).slice();for(S=0;S<U.length;++S)U[S]*=D.line.width*z;C.line.dashes=U}return D.error_x&&D.error_x.visible&&(C.errorX=g(D,D.error_x,z)),D.error_y&&D.error_y.visible&&(C.errorY=g(D,D.error_y,z)),D.fill&&"none"!==D.fill&&(C.fill={closed:!0,fill:D.fillcolor,thickness:0}),C},markerStyle:d,markerSelection:o,linePositions:function(O,D,S){var C,z,B=S.length,U=B/2;if(r.hasLines(D)&&U)if("hv"===D.line.shape){for(C=[],z=0;z<U-1;z++)isNaN(S[2*z])||isNaN(S[2*z+1])?C.push(NaN,NaN,NaN,NaN):(C.push(S[2*z],S[2*z+1]),isNaN(S[2*z+2])||isNaN(S[2*z+3])?C.push(NaN,NaN):C.push(S[2*z+2],S[2*z+1]));C.push(S[B-2],S[B-1])}else if("hvh"===D.line.shape){for(C=[],z=0;z<U-1;z++)if(isNaN(S[2*z])||isNaN(S[2*z+1])||isNaN(S[2*z+2])||isNaN(S[2*z+3]))isNaN(S[2*z])||isNaN(S[2*z+1])?C.push(NaN,NaN):C.push(S[2*z],S[2*z+1]),C.push(NaN,NaN);else{var G=(S[2*z]+S[2*z+2])/2;C.push(S[2*z],S[2*z+1],G,S[2*z+1],G,S[2*z+3])}C.push(S[B-2],S[B-1])}else if("vhv"===D.line.shape){for(C=[],z=0;z<U-1;z++)if(isNaN(S[2*z])||isNaN(S[2*z+1])||isNaN(S[2*z+2])||isNaN(S[2*z+3]))isNaN(S[2*z])||isNaN(S[2*z+1])?C.push(NaN,NaN):C.push(S[2*z],S[2*z+1]),C.push(NaN,NaN);else{var X=(S[2*z+1]+S[2*z+3])/2;C.push(S[2*z],S[2*z+1],S[2*z],X,S[2*z+2],X)}C.push(S[B-2],S[B-1])}else if("vh"===D.line.shape){for(C=[],z=0;z<U-1;z++)isNaN(S[2*z])||isNaN(S[2*z+1])?C.push(NaN,NaN,NaN,NaN):(C.push(S[2*z],S[2*z+1]),isNaN(S[2*z+2])||isNaN(S[2*z+3])?C.push(NaN,NaN):C.push(S[2*z],S[2*z+3]));C.push(S[B-2],S[B-1])}else C=S;var Z=!1;for(z=0;z<C.length;z++)if(isNaN(C[z])){Z=!0;break}var q=Z||C.length>i.TOO_MANY_POINTS||r.hasMarkers(D)?"rect":"round";if(Z&&D.connectgaps){var W=C[0],te=C[1];for(z=0;z<C.length;z+=2)isNaN(C[z])||isNaN(C[z+1])?(C[z]=W,C[z+1]=te):(W=C[z],te=C[z+1])}return{join:q,positions:C}},errorBarPositions:function(O,D,S,C,z){var B=y.getComponentMethod("errorbars","makeComputeError"),U=t.getFromId(O,D.xaxis),G=t.getFromId(O,D.yaxis),X=S.length/2,Z={};function q(W,te){var R=te._id.charAt(0),N=D["error_"+R];if(N&&N.visible&&("linear"===te.type||"log"===te.type)){for(var V=B(N),ee={x:0,y:1}[R],j={x:[0,1,2,3],y:[2,3,0,1]}[R],J=new Float64Array(4*X),$=1/0,re=-1/0,ne=0,se=0;ne<X;ne++,se+=4){var ie=W[ne];if(p(ie)){var ue=S[2*ne+ee],le=V(ie,ne),de=le[0],ve=le[1];if(p(de)&&p(ve)){var be=ie+ve;J[se+j[0]]=ue-te.c2l(ie-de),J[se+j[1]]=te.c2l(be)-ue,J[se+j[2]]=0,J[se+j[3]]=0,$=Math.min($,ie-de),re=Math.max(re,ie+ve)}}}Z[R]={positions:S,errors:J,_bnds:[$,re]}}}return q(C,U),q(z,G),Z},textPosition:function(O,D,S,C){var z,B=D._length,U={};if(r.hasMarkers(D)){var G=S.font,X=S.align,Z=S.baseline;for(U.offset=new Array(B),z=0;z<B;z++){var q=C.sizes?C.sizes[z]:C.size,W=Array.isArray(G)?G[z].size:G.size,te=Array.isArray(X)?X.length>1?X[z]:X[0]:X,R=Array.isArray(Z)?Z.length>1?Z[z]:Z[0]:Z,V=c[R],ee=q?q/.8+1:0;U.offset[z]=[c[te]*ee/W,(-V*ee-.5*V)/W]}}return U}}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":942,"../scatter/subtypes":950,"./constants":979,"./helpers":984,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],981:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../registry"),u=x("./helpers"),y=x("./attributes"),e=x("../scatter/constants"),n=x("../scatter/subtypes"),t=x("../scatter/xy_defaults"),a=x("../scatter/period_defaults"),r=x("../scatter/marker_defaults"),f=x("../scatter/line_defaults"),s=x("../scatter/fillcolor_defaults"),i=x("../scatter/text_defaults");Q.exports=function(l,c,h,m){function d(E,k){return p.coerce(l,c,y,E,k)}var o=!!l.marker&&u.isOpenSymbol(l.marker.symbol),b=n.isBubble(l),g=t(l,c,m,d);if(g){a(l,c,m,d),d("xhoverformat"),d("yhoverformat");var w=g<e.PTS_LINESONLY?"lines+markers":"lines";d("text"),d("hovertext"),d("hovertemplate"),d("mode",w),n.hasLines(c)&&(d("connectgaps"),f(l,c,h,m,d),d("line.shape")),n.hasMarkers(c)&&(r(l,c,h,m,d),d("marker.line.width",o||b?1:0)),n.hasText(c)&&(d("texttemplate"),i(l,c,m,d));var _=(c.line||{}).color,A=(c.marker||{}).color;d("fill"),"none"!==c.fill&&s(l,c,h,d);var T=v.getComponentMethod("errorbars","supplyDefaults");T(l,c,_||A||h,{axis:"y"}),T(l,c,_||A||h,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(c,d)}else c.visible=!1}},{"../../lib":503,"../../registry":638,"../scatter/constants":929,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/marker_defaults":944,"../scatter/period_defaults":945,"../scatter/subtypes":950,"../scatter/text_defaults":951,"../scatter/xy_defaults":952,"./attributes":977,"./helpers":984}],982:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/color"),u=x("../../constants/interactions").DESELECTDIM;Q.exports={styleTextSelection:function(y){var e,n,t=y[0],a=t.trace,r=t.t,f=r._scene,s=r.index,i=f.selectBatch[s],l=f.unselectBatch[s],c=f.textOptions[s],h=f.textSelectedOptions[s]||{},m=f.textUnselectedOptions[s]||{},d=p.extendFlat({},c);if(i.length||l.length){var o=h.color,b=m.color,g=c.color,w=Array.isArray(g);for(d.color=new Array(a._length),e=0;e<i.length;e++)d.color[n=i[e]]=o||(w?g[n]:g);for(e=0;e<l.length;e++){n=l[e];var _=w?g[n]:g;d.color[n]=b||(o?_:v.addOpacity(_,u))}}f.glText[s].update(d)}}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],983:[function(x,Q,K){"use strict";var p=x("../scatter/format_labels");Q.exports=function(v,u,y){var e=v.i;return"x"in v||(v.x=u._x[e]),"y"in v||(v.y=u._y[e]),p(v,u,y)}},{"../scatter/format_labels":934}],984:[function(x,Q,K){"use strict";var p=x("./constants");K.isOpenSymbol=function(v){return"string"==typeof v?p.OPEN_RE.test(v):v%200>100},K.isDotSymbol=function(v){return"string"==typeof v?p.DOT_RE.test(v):v>200}},{"./constants":979}],985:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../lib"),u=x("../scatter/get_trace_color");function y(e,n,t,a){var r=e.xa,f=e.ya,s=e.distance,i=e.dxy,l=e.index,c={pointNumber:l,x:n[l],y:t[l]};c.tx=Array.isArray(a.text)?a.text[l]:a.text,c.htx=Array.isArray(a.hovertext)?a.hovertext[l]:a.hovertext,c.data=Array.isArray(a.customdata)?a.customdata[l]:a.customdata,c.tp=Array.isArray(a.textposition)?a.textposition[l]:a.textposition;var h=a.textfont;h&&(c.ts=v.isArrayOrTypedArray(h.size)?h.size[l]:h.size,c.tc=Array.isArray(h.color)?h.color[l]:h.color,c.tf=Array.isArray(h.family)?h.family[l]:h.family);var m=a.marker;m&&(c.ms=v.isArrayOrTypedArray(m.size)?m.size[l]:m.size,c.mo=v.isArrayOrTypedArray(m.opacity)?m.opacity[l]:m.opacity,c.mx=v.isArrayOrTypedArray(m.symbol)?m.symbol[l]:m.symbol,c.mc=v.isArrayOrTypedArray(m.color)?m.color[l]:m.color);var d=m&&m.line;d&&(c.mlc=Array.isArray(d.color)?d.color[l]:d.color,c.mlw=v.isArrayOrTypedArray(d.width)?d.width[l]:d.width);var o=m&&m.gradient;o&&"none"!==o.type&&(c.mgt=Array.isArray(o.type)?o.type[l]:o.type,c.mgc=Array.isArray(o.color)?o.color[l]:o.color);var b=r.c2p(c.x,!0),g=f.c2p(c.y,!0),w=c.mrc||1,_=a.hoverlabel;_&&(c.hbg=Array.isArray(_.bgcolor)?_.bgcolor[l]:_.bgcolor,c.hbc=Array.isArray(_.bordercolor)?_.bordercolor[l]:_.bordercolor,c.hts=v.isArrayOrTypedArray(_.font.size)?_.font.size[l]:_.font.size,c.htc=Array.isArray(_.font.color)?_.font.color[l]:_.font.color,c.htf=Array.isArray(_.font.family)?_.font.family[l]:_.font.family,c.hnl=v.isArrayOrTypedArray(_.namelength)?_.namelength[l]:_.namelength);var A=a.hoverinfo;A&&(c.hi=Array.isArray(A)?A[l]:A);var T=a.hovertemplate;T&&(c.ht=Array.isArray(T)?T[l]:T);var E={};E[e.index]=c;var k=a._origX,O=a._origY,D=v.extendFlat({},e,{color:u(a,c),x0:b-w,x1:b+w,xLabelVal:k?k[l]:c.x,y0:g-w,y1:g+w,yLabelVal:O?O[l]:c.y,cd:E,distance:s,spikeDistance:i,hovertemplate:c.ht});return c.htx?D.text=c.htx:c.tx?D.text=c.tx:a.text&&(D.text=a.text),v.fillText(c,a,D),p.getComponentMethod("errorbars","hoverInfo")(c,a,D),D}Q.exports={hoverPoints:function(e,n,t,a){var r,f,s,i,l,c,h,m,d,o,b=e.cd,g=b[0].t,w=b[0].trace,_=e.xa,A=e.ya,T=g.x,E=g.y,k=_.c2p(n),O=A.c2p(t),D=e.distance;if(g.tree){var S=_.p2c(k-D),C=_.p2c(k+D),z=A.p2c(O-D),B=A.p2c(O+D);r="x"===a?g.tree.range(Math.min(S,C),Math.min(A._rl[0],A._rl[1]),Math.max(S,C),Math.max(A._rl[0],A._rl[1])):g.tree.range(Math.min(S,C),Math.min(z,B),Math.max(S,C),Math.max(z,B))}else r=g.ids;var U=D;if("x"===a){var G=!!w.xperiodalignment,X=!!w.yperiodalignment;for(c=0;c<r.length;c++){if(i=T[f=r[c]],h=Math.abs(_.c2p(i)-k),G){var Z=_.c2p(w._xStarts[f]),q=_.c2p(w._xEnds[f]);h=k>=Math.min(Z,q)&&k<=Math.max(Z,q)?0:1/0}if(h<U){if(U=h,m=A.c2p(l=E[f])-O,X){var W=A.c2p(w._yStarts[f]),te=A.c2p(w._yEnds[f]);m=O>=Math.min(W,te)&&O<=Math.max(W,te)?0:1/0}o=Math.sqrt(h*h+m*m),s=r[c]}}}else for(c=r.length-1;c>-1;c--)i=T[f=r[c]],l=E[f],h=_.c2p(i)-k,m=A.c2p(l)-O,(d=Math.sqrt(h*h+m*m))<U&&(U=o=d,s=f);return e.index=s,e.distance=U,e.dxy=o,void 0===s?[e]:[y(e,T,E,w)]},calcHover:y}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":935}],986:[function(x,Q,K){"use strict";var p=x("./hover");Q.exports={moduleType:"trace",name:"scattergl",basePlotModule:x("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("../scatter/cross_trace_defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),plot:x("./plot"),hoverPoints:p.hoverPoints,selectPoints:x("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":931,"../scatter/marker_colorbar":943,"./attributes":977,"./calc":978,"./defaults":981,"./format_labels":983,"./hover":985,"./plot":987,"./select":989}],987:[function(x,Q,K){"use strict";var p=x("regl-scatter2d"),v=x("regl-line2d"),u=x("regl-error2d"),y=x("gl-text"),e=x("../../lib"),n=x("../../components/dragelement/helpers").selectMode,t=x("../../lib/prepare_regl"),a=x("../scatter/subtypes"),r=x("../scatter/link_traces"),f=x("./edit_style").styleTextSelection;function s(i,l,c,h){var m=i._size,A=m.w*h,T=m.h*h;return[m.l*h+l.domain[0]*A,m.b*h+c.domain[0]*T,i.width*h-m.r*h-(1-l.domain[1])*A,i.height*h-m.t*h-(1-c.domain[1])*T]}Q.exports=function(i,l,c){if(c.length){var h,m,d=i._fullLayout,o=l._scene,b=l.xaxis,g=l.yaxis;if(o)if(t(i,["ANGLE_instanced_arrays","OES_element_index_uint"])){var w=o.count,_=d._glcanvas.data()[0].regl;if(r(i,l,c),o.dirty){if(!0===o.error2d&&(o.error2d=u(_)),!0===o.line2d&&(o.line2d=v(_)),!0===o.scatter2d&&(o.scatter2d=p(_)),!0===o.fill2d&&(o.fill2d=v(_)),!0===o.glText)for(o.glText=new Array(w),h=0;h<w;h++)o.glText[h]=new y(_);if(o.glText){if(w>o.glText.length){var A=w-o.glText.length;for(h=0;h<A;h++)o.glText.push(new y(_))}else w<o.glText.length&&o.glText.splice(w,o.glText.length-w).forEach(function(j){j.destroy()});for(h=0;h<w;h++)o.glText[h].update(o.textOptions[h])}if(o.line2d&&(o.line2d.update(o.lineOptions),o.lineOptions=o.lineOptions.map(function(j){if(j&&j.positions){for(var J=j.positions,$=0;$<J.length&&(isNaN(J[$])||isNaN(J[$+1]));)$+=2;for(var re=J.length-2;re>$&&(isNaN(J[re])||isNaN(J[re+1]));)re-=2;j.positions=J.slice($,re+2)}return j}),o.line2d.update(o.lineOptions)),o.error2d){var E=(o.errorXOptions||[]).concat(o.errorYOptions||[]);o.error2d.update(E)}o.scatter2d&&o.scatter2d.update(o.markerOptions),o.fillOrder=e.repeat(null,w),o.fill2d&&(o.fillOptions=o.fillOptions.map(function(j,J){var $=c[J];if(j&&$&&$[0]&&$[0].trace){var re,ne,se=$[0],ie=se.trace,ue=se.t,le=o.lineOptions[J],de=[];ie._ownfill&&de.push(J),ie._nexttrace&&de.push(J+1),de.length&&(o.fillOrder[J]=de);var ve,_e,be=[],Te=le&&le.positions||ue.positions;if("tozeroy"===ie.fill){for(ve=0;ve<Te.length&&isNaN(Te[ve+1]);)ve+=2;for(_e=Te.length-2;_e>ve&&isNaN(Te[_e+1]);)_e-=2;0!==Te[ve+1]&&(be=[Te[ve],0]),be=be.concat(Te.slice(ve,_e+2)),0!==Te[_e+1]&&(be=be.concat([Te[_e],0]))}else if("tozerox"===ie.fill){for(ve=0;ve<Te.length&&isNaN(Te[ve]);)ve+=2;for(_e=Te.length-2;_e>ve&&isNaN(Te[_e]);)_e-=2;0!==Te[ve]&&(be=[0,Te[ve+1]]),be=be.concat(Te.slice(ve,_e+2)),0!==Te[_e]&&(be=be.concat([0,Te[_e+1]]))}else if("toself"===ie.fill||"tonext"===ie.fill){for(be=[],re=0,j.splitNull=!0,ne=0;ne<Te.length;ne+=2)(isNaN(Te[ne])||isNaN(Te[ne+1]))&&((be=be.concat(Te.slice(re,ne))).push(Te[re],Te[re+1]),be.push(null,null),re=ne+2);be=be.concat(Te.slice(re)),re&&be.push(Te[re],Te[re+1])}else{var he=ie._nexttrace;if(he){var me=o.lineOptions[J+1];if(me){var Ae=me.positions;if("tonexty"===ie.fill){for(be=Te.slice(),J=Math.floor(Ae.length/2);J--;){var we=Ae[2*J],Se=Ae[2*J+1];isNaN(we)||isNaN(Se)||be.push(we,Se)}j.fill=he.fillcolor}}}}if(ie._prevtrace&&"tonext"===ie._prevtrace.fill){var Pe=o.lineOptions[J-1].positions,ze=be.length/2,He=[re=ze];for(ne=0;ne<Pe.length;ne+=2)(isNaN(Pe[ne])||isNaN(Pe[ne+1]))&&(He.push(ne/2+ze+1),re=ne+2);be=be.concat(Pe),j.hole=He}return j.fillmode=ie.fill,j.opacity=ie.opacity,j.positions=be,j}}),o.fill2d.update(o.fillOptions))}var O=n(d.dragmode),D=d.clickmode.indexOf("select")>-1;for(h=0;h<w;h++){var S=c[h][0],C=S.trace,z=S.t,B=z.index,U=C._length,G=z.x,X=z.y;if(C.selectedpoints||O||D){if(O||(O=!0),C.selectedpoints){var Z=o.selectBatch[B]=e.selIndices2selPoints(C),q={};for(m=0;m<Z.length;m++)q[Z[m]]=1;var W=[];for(m=0;m<U;m++)q[m]||W.push(m);o.unselectBatch[B]=W}var te=z.xpx=new Array(U),R=z.ypx=new Array(U);for(m=0;m<U;m++)te[m]=b.c2p(G[m]),R[m]=g.c2p(X[m])}else z.xpx=z.ypx=null}if(O){if(o.select2d||(o.select2d=p(d._glcanvas.data()[1].regl)),o.scatter2d){var N=new Array(w);for(h=0;h<w;h++)N[h]=o.selectBatch[h].length||o.unselectBatch[h].length?o.markerUnselectedOptions[h]:{};o.scatter2d.update(N)}o.select2d&&(o.select2d.update(o.markerOptions),o.select2d.update(o.markerSelectedOptions)),o.glText&&c.forEach(function(j){a.hasText(((j||[])[0]||{}).trace||{})&&f(j)})}else o.scatter2d&&o.scatter2d.update(o.markerOptions);var V={viewport:s(d,b,g,i._context.plotGlPixelRatio),range:[(b._rl||b.range)[0],(g._rl||g.range)[0],(b._rl||b.range)[1],(g._rl||g.range)[1]]},ee=e.repeat(V,o.count);o.fill2d&&o.fill2d.update(ee),o.line2d&&o.line2d.update(ee),o.error2d&&o.error2d.update(ee.concat(ee)),o.scatter2d&&o.scatter2d.update(ee),o.select2d&&o.select2d.update(ee),o.glText&&o.glText.forEach(function(j){j.update(V)})}else o.init()}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":941,"../scatter/subtypes":950,"./edit_style":982,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],988:[function(x,Q,K){"use strict";var p=x("../../lib");Q.exports=function(v,u){var y=u._scene,e={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},n={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return u._scene||((y=u._scene={}).init=function(){p.extendFlat(y,n,e)},y.init(),y.update=function(t){var a=p.repeat(t,y.count);if(y.fill2d&&y.fill2d.update(a),y.scatter2d&&y.scatter2d.update(a),y.line2d&&y.line2d.update(a),y.error2d&&y.error2d.update(a.concat(a)),y.select2d&&y.select2d.update(a),y.glText)for(var r=0;r<y.count;r++)y.glText[r].update(t)},y.draw=function(){for(var t=y.count,a=y.fill2d,r=y.error2d,f=y.line2d,s=y.scatter2d,i=y.glText,l=y.select2d,c=y.selectBatch,h=y.unselectBatch,m=0;m<t;m++){if(a&&y.fillOrder[m]&&a.draw(y.fillOrder[m]),f&&y.lineOptions[m]&&f.draw(m),r&&(y.errorXOptions[m]&&r.draw(m),y.errorYOptions[m]&&r.draw(m+t)),s&&y.markerOptions[m])if(h[m].length){var d=p.repeat([],y.count);d[m]=h[m],s.draw(d)}else c[m].length||s.draw(m);i[m]&&y.textOptions[m]&&i[m].render()}l&&l.draw(c),y.dirty=!1},y.destroy=function(){y.fill2d&&y.fill2d.destroy&&y.fill2d.destroy(),y.scatter2d&&y.scatter2d.destroy&&y.scatter2d.destroy(),y.error2d&&y.error2d.destroy&&y.error2d.destroy(),y.line2d&&y.line2d.destroy&&y.line2d.destroy(),y.select2d&&y.select2d.destroy&&y.select2d.destroy(),y.glText&&y.glText.forEach(function(t){t.destroy&&t.destroy()}),y.lineOptions=null,y.fillOptions=null,y.markerOptions=null,y.markerSelectedOptions=null,y.markerUnselectedOptions=null,y.errorXOptions=null,y.errorYOptions=null,y.textOptions=null,y.textSelectedOptions=null,y.textUnselectedOptions=null,y.selectBatch=null,y.unselectBatch=null,u._scene=null}),y.dirty||p.extendFlat(y,e),y}},{"../../lib":503}],989:[function(x,Q,K){"use strict";var p=x("../scatter/subtypes"),v=x("./edit_style").styleTextSelection;Q.exports=function(u,y){var e=u.cd,n=u.xaxis,t=u.yaxis,a=[],r=e[0].trace,f=e[0].t,s=r._length,i=f.x,l=f.y,c=f._scene,h=f.index;if(!c)return a;var m=p.hasText(r),d=p.hasMarkers(r);if(!0!==r.visible||!d&&!m)return a;var b=[],g=[];if(!1!==y&&!y.degenerate)for(var w=0;w<s;w++)y.contains([f.xpx[w],f.ypx[w]],!1,w,u)?(b.push(w),a.push({pointNumber:w,x:n.c2d(i[w]),y:t.c2d(l[w])})):g.push(w);if(d){var _=c.scatter2d;if(b.length||g.length){if(!c.selectBatch[h].length&&!c.unselectBatch[h].length){var A=new Array(c.count);A[h]=c.markerUnselectedOptions[h],_.update.apply(_,A)}}else{var T=new Array(c.count);T[h]=c.markerOptions[h],_.update.apply(_,T)}}return c.selectBatch[h]=b,c.unselectBatch[h]=g,m&&v(e),a}},{"../scatter/subtypes":950,"./edit_style":982}],990:[function(x,Q,K){"use strict";var p=x("../../plots/template_attributes").hovertemplateAttrs,v=x("../../plots/template_attributes").texttemplateAttrs,u=x("../scattergeo/attributes"),y=x("../scatter/attributes"),e=x("../../plots/mapbox/layout_attributes"),n=x("../../plots/attributes"),t=x("../../components/colorscale/attributes"),a=x("../../lib/extend").extendFlat,r=x("../../plot_api/edit_types").overrideAll,f=u.line,s=u.marker;Q.exports=r({lon:u.lon,lat:u.lat,mode:a({},y.mode,{dflt:"markers"}),text:a({},y.text,{}),texttemplate:v({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:a({},y.hovertext,{}),line:{color:f.color,width:f.width},connectgaps:y.connectgaps,marker:a({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:s.opacity,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode},t("marker")),fill:u.fill,fillcolor:y.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:y.selected.marker},unselected:{marker:y.unselected.marker},hoverinfo:a({},n.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:p()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":925,"../scattergeo/attributes":967}],991:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../lib"),u=x("../../constants/numerical").BADNUM,y=x("../../lib/geojson_utils"),e=x("../../components/colorscale"),n=x("../../components/drawing"),t=x("../scatter/make_bubble_size_func"),a=x("../scatter/subtypes"),r=x("../../plots/mapbox/convert_text_opts"),f=x("../../components/fx/helpers").appendArrayPointValue,s=x("../../lib/svg_text_utils").NEWLINES,i=x("../../lib/svg_text_utils").BR_TAG_ALL;function l(){return{geojson:y.makeBlank(),layout:{visibility:"none"},paint:{}}}function c(d,o){return v.isArrayOrTypedArray(d)?o?function(b){return p(d[b])?+d[b]:0}:function(b){return d[b]}:d?function(){return d}:h}function h(){return""}function m(d){return d[0]===u}Q.exports=function(d,o){var b,g=o[0].trace,w=!0===g.visible&&0!==g._length,_="none"!==g.fill,A=a.hasLines(g),T=a.hasMarkers(g),E=a.hasText(g),k=T&&"circle"===g.marker.symbol,O=T&&"circle"!==g.marker.symbol,D=l(),S=l(),C=l(),z=l(),B={fill:D,line:S,circle:C,symbol:z};if(!w)return B;if((_||A)&&(b=y.calcTraceToLineCoords(o)),_&&(D.geojson=y.makePolygon(b),D.layout.visibility="visible",v.extendFlat(D.paint,{"fill-color":g.fillcolor})),A&&(S.geojson=y.makeLine(b),S.layout.visibility="visible",v.extendFlat(S.paint,{"line-width":g.line.width,"line-color":g.line.color,"line-opacity":g.opacity})),k){var U=function(Z){var q,W,te,R,N=Z[0].trace,V=N.marker,ee=N.selectedpoints,j=v.isArrayOrTypedArray(V.color),J=v.isArrayOrTypedArray(V.size),$=v.isArrayOrTypedArray(V.opacity);function re(_e){return N.opacity*_e}j&&(W=e.hasColorscale(N,"marker")?e.makeColorScaleFuncFromTrace(V):v.identity),J&&(te=t(N)),$&&(R=function(_e){return re(p(_e)?+v.constrain(_e,0,1):0)});var ne,ve,se=[];for(q=0;q<Z.length;q++){var ie=Z[q],ue=ie.lonlat;if(!m(ue)){var le={};W&&(le.mcc=ie.mcc=W(ie.mc)),te&&(le.mrc=ie.mrc=te(ie.ms)),R&&(le.mo=R(ie.mo)),ee&&(le.selected=ie.selected||0),se.push({type:"Feature",geometry:{type:"Point",coordinates:ue},properties:le})}}if(ee)for(ne=n.makeSelectedPointStyleFns(N),q=0;q<se.length;q++){var de=se[q].properties;ne.selectedOpacityFn&&(de.mo=re(ne.selectedOpacityFn(de))),ne.selectedColorFn&&(de.mcc=ne.selectedColorFn(de)),ne.selectedSizeFn&&(de.mrc=ne.selectedSizeFn(de))}return{geojson:{type:"FeatureCollection",features:se},mcc:j||ne&&ne.selectedColorFn?{type:"identity",property:"mcc"}:V.color,mrc:J||ne&&ne.selectedSizeFn?{type:"identity",property:"mrc"}:(ve=V.size,ve/2),mo:$||ne&&ne.selectedOpacityFn?{type:"identity",property:"mo"}:re(V.opacity)}}(o);C.geojson=U.geojson,C.layout.visibility="visible",v.extendFlat(C.paint,{"circle-color":U.mcc,"circle-radius":U.mrc,"circle-opacity":U.mo})}if((O||E)&&(z.geojson=function(Z,q){for(var W=q._fullLayout,te=Z[0].trace,R=te.marker||{},N=R.symbol,V=R.angle,ee="circle"!==N?c(N):h,j="auto"!==V?c(V,!0):h,J=a.hasText(te)?c(te.text):h,$=[],re=0;re<Z.length;re++){var ne=Z[re];if(!m(ne.lonlat)){var se,ie=te.texttemplate;if(ie){var ue=Array.isArray(ie)?ie[re]||"":ie,le=te._module.formatLabels(ne,te,W),de={};f(de,te,ne.i),se=v.texttemplateString(ue,le,W._d3locale,de,ne,te._meta||{})}else se=J(re);se&&(se=se.replace(s,"").replace(i,"\n")),$.push({type:"Feature",geometry:{type:"Point",coordinates:ne.lonlat},properties:{symbol:ee(re),angle:j(re),text:se}})}}return{type:"FeatureCollection",features:$}}(o,d),v.extendFlat(z.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),O&&(v.extendFlat(z.layout,{"icon-size":g.marker.size/10}),"angle"in g.marker&&"auto"!==g.marker.angle&&v.extendFlat(z.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),z.layout["icon-allow-overlap"]=g.marker.allowoverlap,v.extendFlat(z.paint,{"icon-opacity":g.opacity*g.marker.opacity,"icon-color":g.marker.color})),E)){var X=r(g.textposition,(g.marker||{}).size);v.extendFlat(z.layout,{"text-size":g.textfont.size,"text-anchor":X.anchor,"text-offset":X.offset}),v.extendFlat(z.paint,{"text-color":g.textfont.color,"text-opacity":g.opacity})}return B}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":942,"../scatter/subtypes":950,"fast-isnumeric":190}],992:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../scatter/subtypes"),u=x("../scatter/marker_defaults"),y=x("../scatter/line_defaults"),e=x("../scatter/text_defaults"),n=x("../scatter/fillcolor_defaults"),t=x("./attributes");Q.exports=function(a,r,f,s){function i(c,h){return p.coerce(a,r,t,c,h)}if(h=r,d=(m=i)("lon")||[],o=m("lat")||[],b=Math.min(d.length,o.length),h._length=b,b){if(i("text"),i("texttemplate"),i("hovertext"),i("hovertemplate"),i("mode"),i("below"),v.hasLines(r)&&(y(a,r,f,s,i,{noDash:!0}),i("connectgaps")),v.hasMarkers(r)){u(a,r,f,s,i,{noLine:!0}),i("marker.allowoverlap"),i("marker.angle");var l=r.marker;"circle"!==l.symbol&&(p.isArrayOrTypedArray(l.size)&&(l.size=l.size[0]),p.isArrayOrTypedArray(l.color)&&(l.color=l.color[0]))}v.hasText(r)&&e(a,r,s,i,{noSelect:!0}),i("fill"),"none"!==r.fill&&n(a,r,f,i),p.coerceSelectionMarkerOpacity(r,i)}else r.visible=!1;var h,m,d,o,b}},{"../../lib":503,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"./attributes":990}],993:[function(x,Q,K){"use strict";Q.exports=function(p,v){return p.lon=v.lon,p.lat=v.lat,p}},{}],994:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes");Q.exports=function(v,u,y){var e={},n=y[u.subplot]._subplot.mockAxis,t=v.lonlat;return e.lonLabel=p.tickText(n,n.c2l(t[0]),!0).text,e.latLabel=p.tickText(n,n.c2l(t[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],995:[function(x,Q,K){"use strict";var p=x("../../components/fx"),v=x("../../lib"),u=x("../scatter/get_trace_color"),y=v.fillText,e=x("../../constants/numerical").BADNUM;function n(t,a,r){if(!t.hovertemplate){var f=(a.hi||t.hoverinfo).split("+"),s=-1!==f.indexOf("all"),i=-1!==f.indexOf("lon"),l=-1!==f.indexOf("lat"),c=a.lonlat,h=[];return s||i&&l?h.push("("+m(c[1])+", "+m(c[0])+")"):i?h.push(r.lon+m(c[0])):l&&h.push(r.lat+m(c[1])),(s||-1!==f.indexOf("text"))&&y(a,t,h),h.join("<br>")}function m(d){return d+"\xb0"}}Q.exports={hoverPoints:function(t,a,r){var f=t.cd,s=f[0].trace,i=t.xa,l=t.ya,c=t.subplot,h=360*(a>=0?Math.floor((a+180)/360):Math.ceil((a-180)/360)),m=a-h;if(p.getClosest(f,function(E){var k=E.lonlat;if(k[0]===e)return 1/0;var O=v.modHalf(k[0],360),D=k[1],S=c.project([O,D]),C=S.x-i.c2p([m,D]),z=S.y-l.c2p([O,r]),B=Math.max(3,E.mrc||0);return Math.max(Math.sqrt(C*C+z*z)-B,1-3/B)},t),!1!==t.index){var d=f[t.index],o=d.lonlat,b=[v.modHalf(o[0],360)+h,o[1]],g=i.c2p(b),w=l.c2p(b),_=d.mrc||1;t.x0=g-_,t.x1=g+_,t.y0=w-_,t.y1=w+_;var A={};A[s.subplot]={_subplot:c};var T=s._module.formatLabels(d,s,A);return t.lonLabel=T.lonLabel,t.latLabel=T.latLabel,t.color=u(s,d),t.extraText=n(s,d,f[0].t.labels),t.hovertemplate=s.hovertemplate,[t]}},getExtraText:n}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":935}],996:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("../scattergeo/calc"),plot:x("./plot"),hoverPoints:x("./hover").hoverPoints,eventData:x("./event_data"),selectPoints:x("./select"),styleOnSelect:function(p,v){v&&v[0].trace._glTrace.update(v)},moduleType:"trace",name:"scattermapbox",basePlotModule:x("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":943,"../scattergeo/calc":968,"./attributes":990,"./defaults":992,"./event_data":993,"./format_labels":994,"./hover":995,"./plot":997,"./select":998}],997:[function(x,Q,K){"use strict";var p=x("./convert"),v=x("../../plots/mapbox/constants").traceLayerPrefix,u=["fill","line","circle","symbol"];function y(n,t){this.type="scattermapbox",this.subplot=n,this.uid=t,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol"},this.layerIds={fill:v+t+"-fill",line:v+t+"-line",circle:v+t+"-circle",symbol:v+t+"-symbol"},this.below=null}var e=y.prototype;e.addSource=function(n,t){this.subplot.map.addSource(this.sourceIds[n],{type:"geojson",data:t.geojson})},e.setSourceData=function(n,t){this.subplot.map.getSource(this.sourceIds[n]).setData(t.geojson)},e.addLayer=function(n,t,a){this.subplot.addLayer({type:n,id:this.layerIds[n],source:this.sourceIds[n],layout:t.layout,paint:t.paint},a)},e.update=function(n){var t,a,r,f=this.subplot,s=f.map,i=p(f.gd,n),l=f.belowLookup["trace-"+this.uid];if(l!==this.below){for(t=u.length-1;t>=0;t--)s.removeLayer(this.layerIds[a=u[t]]);for(t=0;t<u.length;t++)r=i[a=u[t]],this.addLayer(a,r,l);this.below=l}for(t=0;t<u.length;t++)r=i[a=u[t]],f.setOptions(this.layerIds[a],"setLayoutProperty",r.layout),"visible"===r.layout.visibility&&(this.setSourceData(a,r),f.setOptions(this.layerIds[a],"setPaintProperty",r.paint));n[0].trace._glTrace=this},e.dispose=function(){for(var n=this.subplot.map,t=u.length-1;t>=0;t--){var a=u[t];n.removeLayer(this.layerIds[a]),n.removeSource(this.sourceIds[a])}},Q.exports=function(n,t){for(var a=t[0].trace,r=new y(n,a.uid),f=p(n.gd,t),s=r.below=n.belowLookup["trace-"+a.uid],i=0;i<u.length;i++){var l=u[i],c=f[l];r.addSource(l,c),r.addLayer(l,c,s)}return t[0].trace._glTrace=r,r}},{"../../plots/mapbox/constants":611,"./convert":991}],998:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../scatter/subtypes"),u=x("../../constants/numerical").BADNUM;Q.exports=function(y,e){var n,t=y.cd,a=y.xaxis,r=y.yaxis,f=[];if(!v.hasMarkers(t[0].trace))return[];if(!1===e)for(n=0;n<t.length;n++)t[n].selected=0;else for(n=0;n<t.length;n++){var i=t[n],l=i.lonlat;if(l[0]!==u){var c=[p.modHalf(l[0],360),l[1]],h=[a.c2p(c),r.c2p(c)];e.contains(h,null,n,y)?(f.push({pointNumber:n,lon:l[0],lat:l[1]}),i.selected=1):i.selected=0}}return f}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":950}],999:[function(x,Q,K){"use strict";var p=x("../../plots/template_attributes").hovertemplateAttrs,v=x("../../plots/template_attributes").texttemplateAttrs,u=x("../../lib/extend").extendFlat,y=x("../scatter/attributes"),e=x("../../plots/attributes"),n=y.line;Q.exports={mode:y.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:y.text,texttemplate:v({editType:"plot"},{keys:["r","theta","text"]}),hovertext:y.hovertext,line:{color:n.color,width:n.width,dash:n.dash,shape:u({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:y.connectgaps,marker:y.marker,cliponaxis:u({},y.cliponaxis,{dflt:!1}),textposition:y.textposition,textfont:y.textfont,fill:u({},y.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:y.fillcolor,hoverinfo:u({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:y.hoveron,hovertemplate:p(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":925}],1e3:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../constants/numerical").BADNUM,u=x("../../plots/cartesian/axes"),y=x("../scatter/colorscale_calc"),e=x("../scatter/arrays_to_calcdata"),n=x("../scatter/calc_selection"),t=x("../scatter/calc").calcMarkerSize;Q.exports=function(a,r){for(var f=a._fullLayout,s=r.subplot,i=f[s].radialaxis,l=f[s].angularaxis,c=i.makeCalcdata(r,"r"),h=l.makeCalcdata(r,"theta"),m=r._length,d=new Array(m),o=0;o<m;o++){var b=c[o],g=h[o],w=d[o]={};p(b)&&p(g)?(w.r=b,w.theta=g):w.r=v}var _=t(r,m);return r._extremes.x=u.findExtremes(i,c,{ppad:_}),y(a,r),e(d,r),n(d,r),d}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":924,"../scatter/calc":926,"../scatter/calc_selection":927,"../scatter/colorscale_calc":928,"fast-isnumeric":190}],1001:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../scatter/subtypes"),u=x("../scatter/marker_defaults"),y=x("../scatter/line_defaults"),e=x("../scatter/line_shape_defaults"),n=x("../scatter/text_defaults"),t=x("../scatter/fillcolor_defaults"),a=x("../scatter/constants").PTS_LINESONLY,r=x("./attributes");function f(s,i,l,c){var h,m=c("r"),d=c("theta");if(m)d?h=Math.min(m.length,d.length):(h=m.length,c("theta0"),c("dtheta"));else{if(!d)return 0;h=i.theta.length,c("r0"),c("dr")}return i._length=h,h}Q.exports={handleRThetaDefaults:f,supplyDefaults:function(s,i,l,c){function h(o,b){return p.coerce(s,i,r,o,b)}var m=f(0,i,0,h);if(m){h("thetaunit"),h("mode",m<a?"lines+markers":"lines"),h("text"),h("hovertext"),"fills"!==i.hoveron&&h("hovertemplate"),v.hasLines(i)&&(y(s,i,l,c,h),e(s,i,h),h("connectgaps")),v.hasMarkers(i)&&u(s,i,l,c,h,{gradient:!0}),v.hasText(i)&&(h("texttemplate"),n(s,i,c,h));var d=[];(v.hasMarkers(i)||v.hasText(i))&&(h("cliponaxis"),h("marker.maxdisplayed"),d.push("points")),h("fill"),"none"!==i.fill&&(t(s,i,l,h),v.hasLines(i)||e(s,i,h)),"tonext"!==i.fill&&"toself"!==i.fill||d.push("fills"),h("hoveron",d.join("+")||"points"),p.coerceSelectionMarkerOpacity(i,h)}else i.visible=!1}}},{"../../lib":503,"../scatter/constants":929,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/line_shape_defaults":940,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"./attributes":999}],1002:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/cartesian/axes");Q.exports=function(u,y,e){var n,t,a={},r=e[y.subplot]._subplot;r?(n=r.radialAxis,t=r.angularAxis):(n=(r=e[y.subplot]).radialaxis,t=r.angularaxis);var f=n.c2l(u.r);a.rLabel=v.tickText(n,f,!0).text;var s="degrees"===t.thetaunit?p.rad2deg(u.theta):u.theta;return a.thetaLabel=v.tickText(t,s,!0).text,a}},{"../../lib":503,"../../plots/cartesian/axes":554}],1003:[function(x,Q,K){"use strict";var p=x("../scatter/hover");function v(u,y,e,n){var t=e.radialAxis,a=e.angularAxis;t._hovertitle="r",a._hovertitle="\u03b8";var r={};r[y.subplot]={_subplot:e};var f=y._module.formatLabels(u,y,r);n.rLabel=f.rLabel,n.thetaLabel=f.thetaLabel;var i=[];function l(h,m){i.push(h._hovertitle+": "+m)}if(!y.hovertemplate){var c=(u.hi||y.hoverinfo).split("+");-1!==c.indexOf("all")&&(c=["r","theta","text"]),-1!==c.indexOf("r")&&l(t,n.rLabel),-1!==c.indexOf("theta")&&l(a,n.thetaLabel),-1!==c.indexOf("text")&&n.text&&(i.push(n.text),delete n.text),n.extraText=i.join("<br>")}}Q.exports={hoverPoints:function(u,y,e,n){var t=p(u,y,e,n);if(t&&!1!==t[0].index){var a=t[0];if(void 0===a.index)return t;var r=u.subplot,f=a.cd[a.index],s=a.trace;if(r.isPtInside(f))return a.xLabelVal=void 0,a.yLabelVal=void 0,v(f,s,r,a),a.hovertemplate=s.hovertemplate,t}},makeHoverPointText:v}},{"../scatter/hover":936}],1004:[function(x,Q,K){"use strict";Q.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:x("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:x("./attributes"),supplyDefaults:x("./defaults").supplyDefaults,colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),plot:x("./plot"),style:x("../scatter/style").style,styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover").hoverPoints,selectPoints:x("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":943,"../scatter/select":947,"../scatter/style":949,"./attributes":999,"./calc":1e3,"./defaults":1001,"./format_labels":1002,"./hover":1003,"./plot":1005}],1005:[function(x,Q,K){"use strict";var p=x("../scatter/plot"),v=x("../../constants/numerical").BADNUM;Q.exports=function(u,y,e){for(var n=y.layers.frontplot.select("g.scatterlayer"),t={xaxis:y.xaxis,yaxis:y.yaxis,plot:y.framework,layerClipId:y._hasClipOnAxisFalse?y.clipIds.forTraces:null},a=y.radialAxis,r=y.angularAxis,f=0;f<e.length;f++)for(var s=e[f],i=0;i<s.length;i++){var l=s[i],c=l.r;if(c===v)l.x=l.y=v;else{var h=a.c2g(c),m=r.c2g(l.theta);l.x=h*Math.cos(m),l.y=h*Math.sin(m)}}p(u,t,e,n)}},{"../../constants/numerical":479,"../scatter/plot":946}],1006:[function(x,Q,K){"use strict";var p=x("../scatterpolar/attributes"),v=x("../scattergl/attributes"),u=x("../../plots/template_attributes").texttemplateAttrs;Q.exports={mode:p.mode,r:p.r,theta:p.theta,r0:p.r0,dr:p.dr,theta0:p.theta0,dtheta:p.dtheta,thetaunit:p.thetaunit,text:p.text,texttemplate:u({editType:"plot"},{keys:["r","theta","text"]}),hovertext:p.hovertext,hovertemplate:p.hovertemplate,line:v.line,connectgaps:v.connectgaps,marker:v.marker,fill:v.fill,fillcolor:v.fillcolor,textposition:v.textposition,textfont:v.textfont,hoverinfo:p.hoverinfo,selected:p.selected,unselected:p.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":977,"../scatterpolar/attributes":999}],1007:[function(x,Q,K){"use strict";var p=x("../scatter/colorscale_calc"),v=x("../scatter/calc").calcMarkerSize,u=x("../scattergl/convert"),y=x("../../plots/cartesian/axes"),e=x("../scattergl/constants").TOO_MANY_POINTS;Q.exports=function(n,t){var a=n._fullLayout,r=t.subplot,f=a[r].radialaxis,s=a[r].angularaxis,i=t._r=f.makeCalcdata(t,"r"),l=t._theta=s.makeCalcdata(t,"theta"),c=t._length,h={};c<i.length&&(i=i.slice(0,c)),c<l.length&&(l=l.slice(0,c)),h.r=i,h.theta=l,p(n,t);var m,d=h.opts=u.style(n,t);return c<e?m=v(t,c):d.marker&&(m=2*(d.marker.sizeAvg||Math.max(d.marker.size,3))),t._extremes.x=y.findExtremes(f,i,{ppad:m}),[{x:!1,y:!1,t:h,trace:t}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":926,"../scatter/colorscale_calc":928,"../scattergl/constants":979,"../scattergl/convert":980}],1008:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../scatter/subtypes"),u=x("../scatterpolar/defaults").handleRThetaDefaults,y=x("../scatter/marker_defaults"),e=x("../scatter/line_defaults"),n=x("../scatter/text_defaults"),t=x("../scatter/fillcolor_defaults"),a=x("../scatter/constants").PTS_LINESONLY,r=x("./attributes");Q.exports=function(f,s,i,l){function c(m,d){return p.coerce(f,s,r,m,d)}var h=u(f,s,l,c);h?(c("thetaunit"),c("mode",h<a?"lines+markers":"lines"),c("text"),c("hovertext"),"fills"!==s.hoveron&&c("hovertemplate"),v.hasLines(s)&&(e(f,s,i,l,c),c("connectgaps")),v.hasMarkers(s)&&y(f,s,i,l,c),v.hasText(s)&&(c("texttemplate"),n(f,s,l,c)),c("fill"),"none"!==s.fill&&t(f,s,i,c),p.coerceSelectionMarkerOpacity(s,c)):s.visible=!1}},{"../../lib":503,"../scatter/constants":929,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"../scatterpolar/defaults":1001,"./attributes":1006}],1009:[function(x,Q,K){"use strict";var p=x("../scatterpolar/format_labels");Q.exports=function(v,u,y){var e=v.i;return"r"in v||(v.r=u._r[e]),"theta"in v||(v.theta=u._theta[e]),p(v,u,y)}},{"../scatterpolar/format_labels":1002}],1010:[function(x,Q,K){"use strict";var p=x("../scattergl/hover"),v=x("../scatterpolar/hover").makeHoverPointText;Q.exports={hoverPoints:function(u,y,e,n){var t=u.cd[0].t,a=t.r,r=t.theta,f=p.hoverPoints(u,y,e,n);if(f&&!1!==f[0].index){var s=f[0];if(void 0===s.index)return f;var i=u.subplot,l=s.cd[s.index],c=s.trace;if(l.r=a[s.index],l.theta=r[s.index],i.isPtInside(l))return s.xLabelVal=void 0,s.yLabelVal=void 0,v(l,c,i,s),f}}}},{"../scattergl/hover":985,"../scatterpolar/hover":1003}],1011:[function(x,Q,K){"use strict";Q.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:x("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),plot:x("./plot"),hoverPoints:x("./hover").hoverPoints,selectPoints:x("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":943,"../scattergl/select":989,"./attributes":1006,"./calc":1007,"./defaults":1008,"./format_labels":1009,"./hover":1010,"./plot":1012}],1012:[function(x,Q,K){"use strict";var p=x("@plotly/point-cluster"),v=x("fast-isnumeric"),u=x("../scattergl/plot"),y=x("../scattergl/scene_update"),e=x("../scattergl/convert"),n=x("../../lib"),t=x("../scattergl/constants").TOO_MANY_POINTS;Q.exports=function(a,r,f){if(f.length){var s=r.radialAxis,i=r.angularAxis,l=y(a,r);return f.forEach(function(c){if(c&&c[0]&&c[0].trace){var h,m=c[0],d=m.trace,o=m.t,b=d._length,g=o.r,w=o.theta,_=o.opts,A=g.slice(),T=w.slice();for(h=0;h<g.length;h++)r.isPtInside({r:g[h],theta:w[h]})||(A[h]=NaN,T[h]=NaN);var E=new Array(2*b),k=Array(b),O=Array(b);for(h=0;h<b;h++){var D,S,C=A[h];if(v(C)){var z=s.c2g(C),B=i.c2g(T[h],d.thetaunit);D=z*Math.cos(B),S=z*Math.sin(B)}else D=S=NaN;k[h]=E[2*h]=D,O[h]=E[2*h+1]=S}o.tree=p(E),_.marker&&b>=t&&(_.marker.cluster=o.tree),_.marker&&(_.markerSel.positions=_.markerUnsel.positions=_.marker.positions=E),_.line&&E.length>1&&n.extendFlat(_.line,e.linePositions(a,d,E)),_.text&&(n.extendFlat(_.text,{positions:E},e.textPosition(a,d,_.text,_.marker)),n.extendFlat(_.textSel,{positions:E},e.textPosition(a,d,_.text,_.markerSel)),n.extendFlat(_.textUnsel,{positions:E},e.textPosition(a,d,_.text,_.markerUnsel))),_.fill&&!l.fill2d&&(l.fill2d=!0),_.marker&&!l.scatter2d&&(l.scatter2d=!0),_.line&&!l.line2d&&(l.line2d=!0),_.text&&!l.glText&&(l.glText=!0),l.lineOptions.push(_.line),l.fillOptions.push(_.fill),l.markerOptions.push(_.marker),l.markerSelectedOptions.push(_.markerSel),l.markerUnselectedOptions.push(_.markerUnsel),l.textOptions.push(_.text),l.textSelectedOptions.push(_.textSel),l.textUnselectedOptions.push(_.textUnsel),l.selectBatch.push([]),l.unselectBatch.push([]),o.x=k,o.y=O,o.rawx=k,o.rawy=O,o.r=g,o.theta=w,o.positions=E,o._scene=l,o.index=l.count,l.count++}}),u(a,r,f)}}},{"../../lib":503,"../scattergl/constants":979,"../scattergl/convert":980,"../scattergl/plot":987,"../scattergl/scene_update":988,"@plotly/point-cluster":59,"fast-isnumeric":190}],1013:[function(x,Q,K){"use strict";var p=x("../../plots/template_attributes").hovertemplateAttrs,v=x("../../plots/template_attributes").texttemplateAttrs,u=x("../../lib/extend").extendFlat,y=x("../scatter/attributes"),e=x("../../plots/attributes"),n=y.line;Q.exports={mode:y.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:y.text,texttemplate:v({editType:"plot"},{keys:["real","imag","text"]}),hovertext:y.hovertext,line:{color:n.color,width:n.width,dash:n.dash,shape:u({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:y.connectgaps,marker:y.marker,cliponaxis:u({},y.cliponaxis,{dflt:!1}),textposition:y.textposition,textfont:y.textfont,fill:u({},y.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:y.fillcolor,hoverinfo:u({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:y.hoveron,hovertemplate:p(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":925}],1014:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../../constants/numerical").BADNUM,u=x("../scatter/colorscale_calc"),y=x("../scatter/arrays_to_calcdata"),e=x("../scatter/calc_selection"),n=x("../scatter/calc").calcMarkerSize;Q.exports=function(t,a){for(var r=t._fullLayout,f=a.subplot,i=r[f].imaginaryaxis,l=r[f].realaxis.makeCalcdata(a,"real"),c=i.makeCalcdata(a,"imag"),h=a._length,m=new Array(h),d=0;d<h;d++){var o=l[d],b=c[d],g=m[d]={};p(o)&&p(b)?(g.real=o,g.imag=b):g.real=v}return n(a,h),u(t,a),y(m,a),e(m,a),m}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":924,"../scatter/calc":926,"../scatter/calc_selection":927,"../scatter/colorscale_calc":928,"fast-isnumeric":190}],1015:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../scatter/subtypes"),u=x("../scatter/marker_defaults"),y=x("../scatter/line_defaults"),e=x("../scatter/line_shape_defaults"),n=x("../scatter/text_defaults"),t=x("../scatter/fillcolor_defaults"),a=x("../scatter/constants").PTS_LINESONLY,r=x("./attributes");Q.exports=function(f,s,i,l){function c(d,o){return p.coerce(f,s,r,d,o)}var o,g,w,_,A,h=(o=s,_=(g=c)("real"),A=g("imag"),_&&A&&(w=Math.min(_.length,A.length)),o._length=w,w);if(h){c("mode",h<a?"lines+markers":"lines"),c("text"),c("hovertext"),"fills"!==s.hoveron&&c("hovertemplate"),v.hasLines(s)&&(y(f,s,i,l,c),e(f,s,c),c("connectgaps")),v.hasMarkers(s)&&u(f,s,i,l,c,{gradient:!0}),v.hasText(s)&&(c("texttemplate"),n(f,s,l,c));var m=[];(v.hasMarkers(s)||v.hasText(s))&&(c("cliponaxis"),c("marker.maxdisplayed"),m.push("points")),c("fill"),"none"!==s.fill&&(t(f,s,i,c),v.hasLines(s)||e(f,s,c)),"tonext"!==s.fill&&"toself"!==s.fill||m.push("fills"),c("hoveron",m.join("+")||"points"),p.coerceSelectionMarkerOpacity(s,c)}else s.visible=!1}},{"../../lib":503,"../scatter/constants":929,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/line_shape_defaults":940,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"./attributes":1013}],1016:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes");Q.exports=function(v,u,y){var e={},n=y[u.subplot]._subplot;return e.realLabel=p.tickText(n.radialAxis,v.real,!0).text,e.imagLabel=p.tickText(n.angularAxis,v.imag,!0).text,e}},{"../../plots/cartesian/axes":554}],1017:[function(x,Q,K){"use strict";var p=x("../scatter/hover");function v(u,y,e,n){var t=e.radialAxis,a=e.angularAxis;t._hovertitle="real",a._hovertitle="imag";var r={};r[y.subplot]={_subplot:e};var f=y._module.formatLabels(u,y,r);n.realLabel=f.realLabel,n.imagLabel=f.imagLabel;var i=[];function l(h,m){i.push(h._hovertitle+": "+m)}if(!y.hovertemplate){var c=(u.hi||y.hoverinfo).split("+");-1!==c.indexOf("all")&&(c=["real","imag","text"]),-1!==c.indexOf("real")&&l(t,n.realLabel),-1!==c.indexOf("imag")&&l(a,n.imagLabel),-1!==c.indexOf("text")&&n.text&&(i.push(n.text),delete n.text),n.extraText=i.join("<br>")}}Q.exports={hoverPoints:function(u,y,e,n){var t=p(u,y,e,n);if(t&&!1!==t[0].index){var a=t[0];if(void 0===a.index)return t;var r=u.subplot,f=a.cd[a.index],s=a.trace;if(r.isPtInside(f))return a.xLabelVal=void 0,a.yLabelVal=void 0,v(f,s,r,a),a.hovertemplate=s.hovertemplate,t}},makeHoverPointText:v}},{"../scatter/hover":936}],1018:[function(x,Q,K){"use strict";Q.exports={moduleType:"trace",name:"scattersmith",basePlotModule:x("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),plot:x("./plot"),style:x("../scatter/style").style,styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover").hoverPoints,selectPoints:x("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":943,"../scatter/select":947,"../scatter/style":949,"./attributes":1013,"./calc":1014,"./defaults":1015,"./format_labels":1016,"./hover":1017,"./plot":1019}],1019:[function(x,Q,K){"use strict";var p=x("../scatter/plot"),v=x("../../constants/numerical").BADNUM,u=x("../../plots/smith/helpers").smith;Q.exports=function(y,e,n){for(var t=e.layers.frontplot.select("g.scatterlayer"),a={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},r=0;r<n.length;r++)for(var f=n[r],s=0;s<f.length;s++){var i=f[s],l=i.real;if(l===v)i.x=i.y=v;else{var c=u([l,i.imag]);i.x=c[0],i.y=c[1]}}p(y,a,n,t)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":946}],1020:[function(x,Q,K){"use strict";var p=x("../../plots/template_attributes").hovertemplateAttrs,v=x("../../plots/template_attributes").texttemplateAttrs,u=x("../scatter/attributes"),y=x("../../plots/attributes"),e=x("../../components/colorscale/attributes"),n=x("../../components/drawing/attributes").dash,t=x("../../lib/extend").extendFlat,a=u.marker,r=u.line,f=a.line;Q.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:t({},u.mode,{dflt:"markers"}),text:t({},u.text,{}),texttemplate:v({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:t({},u.hovertext,{}),line:{color:r.color,width:r.width,dash:n,shape:t({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:u.connectgaps,cliponaxis:u.cliponaxis,fill:t({},u.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:u.fillcolor,marker:t({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:t({width:f.width,editType:"calc"},e("marker.line")),gradient:a.gradient,editType:"calc"},e("marker")),textfont:u.textfont,textposition:u.textposition,selected:u.selected,unselected:u.unselected,hoverinfo:t({},y.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:u.hoveron,hovertemplate:p()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":925}],1021:[function(x,Q,K){"use strict";var p=x("fast-isnumeric"),v=x("../scatter/colorscale_calc"),u=x("../scatter/arrays_to_calcdata"),y=x("../scatter/calc_selection"),e=x("../scatter/calc").calcMarkerSize,n=["a","b","c"],t={a:["b","c"],b:["a","c"],c:["a","b"]};Q.exports=function(a,r){var f,s,i,l,c,h,m=a._fullLayout[r.subplot].sum,d=r.sum||m,o={a:r.a,b:r.b,c:r.c};for(f=0;f<n.length;f++)if(!o[i=n[f]]){for(c=o[t[i][0]],h=o[t[i][1]],l=new Array(c.length),s=0;s<c.length;s++)l[s]=d-c[s]-h[s];o[i]=l}var b,g,w,_,E=r._length,k=new Array(E);for(f=0;f<E;f++)g=o.b[f],w=o.c[f],p(b=o.a[f])&&p(g)&&p(w)?(1!=(_=m/((b=+b)+(g=+g)+(w=+w)))&&(b*=_,g*=_,w*=_),k[f]={x:w-g,y:b,a:b,b:g,c:w}):k[f]={x:!1,y:!1};return e(r,E),v(a,r),u(k,r),y(k,r),k}},{"../scatter/arrays_to_calcdata":924,"../scatter/calc":926,"../scatter/calc_selection":927,"../scatter/colorscale_calc":928,"fast-isnumeric":190}],1022:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../scatter/constants"),u=x("../scatter/subtypes"),y=x("../scatter/marker_defaults"),e=x("../scatter/line_defaults"),n=x("../scatter/line_shape_defaults"),t=x("../scatter/text_defaults"),a=x("../scatter/fillcolor_defaults"),r=x("./attributes");Q.exports=function(f,s,i,l){function c(g,w){return p.coerce(f,s,r,g,w)}var h,m=c("a"),d=c("b"),o=c("c");if(m?(h=m.length,d?(h=Math.min(h,d.length),o&&(h=Math.min(h,o.length))):h=o?Math.min(h,o.length):0):d&&o&&(h=Math.min(d.length,o.length)),h){s._length=h,c("sum"),c("text"),c("hovertext"),"fills"!==s.hoveron&&c("hovertemplate"),c("mode",h<v.PTS_LINESONLY?"lines+markers":"lines"),u.hasLines(s)&&(e(f,s,i,l,c),n(f,s,c),c("connectgaps")),u.hasMarkers(s)&&y(f,s,i,l,c,{gradient:!0}),u.hasText(s)&&(c("texttemplate"),t(f,s,l,c));var b=[];(u.hasMarkers(s)||u.hasText(s))&&(c("cliponaxis"),c("marker.maxdisplayed"),b.push("points")),c("fill"),"none"!==s.fill&&(a(f,s,i,c),u.hasLines(s)||n(f,s,c)),"tonext"!==s.fill&&"toself"!==s.fill||b.push("fills"),c("hoveron",b.join("+")||"points"),p.coerceSelectionMarkerOpacity(s,c)}else s.visible=!1}},{"../../lib":503,"../scatter/constants":929,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/line_shape_defaults":940,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"./attributes":1020}],1023:[function(x,Q,K){"use strict";Q.exports=function(p,v,u,y,e){if(v.xa&&(p.xaxis=v.xa),v.ya&&(p.yaxis=v.ya),y[e]){var n=y[e];p.a=n.a,p.b=n.b,p.c=n.c}else p.a=v.a,p.b=v.b,p.c=v.c;return p}},{}],1024:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes");Q.exports=function(v,u,y){var e={},n=y[u.subplot]._subplot;return e.aLabel=p.tickText(n.aaxis,v.a,!0).text,e.bLabel=p.tickText(n.baxis,v.b,!0).text,e.cLabel=p.tickText(n.caxis,v.c,!0).text,e}},{"../../plots/cartesian/axes":554}],1025:[function(x,Q,K){"use strict";var p=x("../scatter/hover");Q.exports=function(v,u,y,e){var n=p(v,u,y,e);if(n&&!1!==n[0].index){var t=n[0];if(void 0===t.index){var r=v.xa._length,f=r*(1-t.y0/v.ya._length)/2,s=r-f;return t.x0=Math.max(Math.min(t.x0,s),f),t.x1=Math.max(Math.min(t.x1,s),f),n}var i=t.cd[t.index],l=t.trace,c=t.subplot;t.a=i.a,t.b=i.b,t.c=i.c,t.xLabelVal=void 0,t.yLabelVal=void 0;var h={};h[l.subplot]={_subplot:c};var m=l._module.formatLabels(i,l,h);t.aLabel=m.aLabel,t.bLabel=m.bLabel,t.cLabel=m.cLabel;var o=[];if(!l.hovertemplate){var b=(i.hi||l.hoverinfo).split("+");-1!==b.indexOf("all")&&(b=["a","b","c"]),-1!==b.indexOf("a")&&g(c.aaxis,t.aLabel),-1!==b.indexOf("b")&&g(c.baxis,t.bLabel),-1!==b.indexOf("c")&&g(c.caxis,t.cLabel)}return t.extraText=o.join("<br>"),t.hovertemplate=l.hovertemplate,n}function g(w,_){o.push(w._hovertitle+": "+_)}}},{"../scatter/hover":936}],1026:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),formatLabels:x("./format_labels"),calc:x("./calc"),plot:x("./plot"),style:x("../scatter/style").style,styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover"),selectPoints:x("../scatter/select"),eventData:x("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:x("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":943,"../scatter/select":947,"../scatter/style":949,"./attributes":1020,"./calc":1021,"./defaults":1022,"./event_data":1023,"./format_labels":1024,"./hover":1025,"./plot":1027}],1027:[function(x,Q,K){"use strict";var p=x("../scatter/plot");Q.exports=function(v,u,y){var e=u.plotContainer;e.select(".scatterlayer").selectAll("*").remove();var n={xaxis:u.xaxis,yaxis:u.yaxis,plot:e,layerClipId:u._hasClipOnAxisFalse?u.clipIdRelative:null},t=u.layers.frontplot.select("g.scatterlayer");p(v,n,y,t)}},{"../scatter/plot":946}],1028:[function(x,Q,K){"use strict";var p=x("../scatter/attributes"),v=x("../../components/colorscale/attributes"),u=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=x("../../plots/template_attributes").hovertemplateAttrs,e=x("../scattergl/attributes"),n=x("../../plots/cartesian/constants").idRegex,t=x("../../plot_api/plot_template").templatedArray,a=x("../../lib/extend").extendFlat,r=p.marker,f=r.line,s=a(v("marker.line",{editTypeOverride:"calc"}),{width:a({},f.width,{editType:"calc"}),editType:"calc"}),i=a(v("marker"),{symbol:r.symbol,size:a({},r.size,{editType:"markerSize"}),sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:s,editType:"calc"});function l(c){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:n[c],editType:"plot"}}}i.color.editType=i.cmin.editType=i.cmax.editType="style",Q.exports={dimensions:t("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:a({},e.text,{}),hovertext:a({},e.hovertext,{}),hovertemplate:y(),xhoverformat:u("x"),yhoverformat:u("y"),marker:i,xaxes:l("x"),yaxes:l("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":925,"../scattergl/attributes":977}],1029:[function(x,Q,K){"use strict";var p=x("regl-line2d"),v=x("../../registry"),u=x("../../lib/prepare_regl"),y=x("../../plots/get_data").getModuleCalcData,e=x("../../plots/cartesian"),n=x("../../plots/cartesian/axis_ids").getFromId,t=x("../../plots/cartesian/axes").shouldShowZeroLine;function a(f,s,i){for(var c=s._visibleDims,h=i.viewOpts.ranges=new Array(i.matrixOptions.data.length),m=0;m<c.length;m++){var d=c[m],o=h[m]=new Array(4),b=n(f,s._diag[d][0]);b&&(o[0]=b.r2l(b.range[0]),o[2]=b.r2l(b.range[1]));var g=n(f,s._diag[d][1]);g&&(o[1]=g.r2l(g.range[0]),o[3]=g.r2l(g.range[1]))}i.selectBatch.length||i.unselectBatch.length?i.matrix.update({ranges:h},{ranges:h}):i.matrix.update({ranges:h})}function r(f){var s=f._fullLayout,i=s._glcanvas.data()[0].regl,l=s._splomGrid;l||(l=s._splomGrid=p(i)),l.update(function(c){var h,m=c._context.plotGlPixelRatio,d=c._fullLayout,o=d._size,b=[0,0,d.width*m,d.height*m],g={};function w(Z,q,W,te,R,N){W*=m,te*=m,R*=m,N*=m;var V=q[Z+"color"],ee=q[Z+"width"],j=String(V+ee);j in g?g[j].data.push(NaN,NaN,W,te,R,N):g[j]={data:[W,te,R,N],join:"rect",thickness:ee*m,color:V,viewport:b,range:b,overlay:!1}}for(h in d._splomSubplots){var _,A,T=d._plots[h],E=T.xaxis,k=T.yaxis,O=E._gridVals,D=k._gridVals,S=E._offset,C=E._length,z=k._length,B=o.b+k.domain[0]*o.h,U=-k._m,G=-U*k.r2l(k.range[0],k.calendar);if(E.showgrid)for(h=0;h<O.length;h++)_=S+E.l2p(O[h].x),w("grid",E,_,B,_,B+z);if(k.showgrid)for(h=0;h<D.length;h++)w("grid",k,S,A=B+G+U*D[h].x,S+C,A);t(c,E,k)&&(_=S+E.l2p(0),w("zeroline",E,_,B,_,B+z)),t(c,k,E)&&w("zeroline",k,S,A=B+G+0,S+C,A)}var X=[];for(h in g)X.push(g[h]);return X}(f))}Q.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(f){var s=f._fullLayout,i=v.getModule("splom"),l=y(f.calcdata,i)[0];u(f,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(s._hasOnlyLargeSploms&&r(f),i.plot(f,{},l))},drag:function(f){var s=f.calcdata,i=f._fullLayout;i._hasOnlyLargeSploms&&r(f);for(var l=0;l<s.length;l++){var c=s[l][0].trace,h=i._splomScenes[c.uid];"splom"===c.type&&h&&h.matrix&&a(f,c,h)}},updateGrid:r,clean:function(f,s,i,l){var c,h={};if(l._splomScenes){for(c=0;c<f.length;c++){var m=f[c];"splom"===m.type&&(h[m.uid]=1)}for(c=0;c<i.length;c++){var d=i[c];if(!h[d.uid]){var o=l._splomScenes[d.uid];o&&o.destroy&&o.destroy(),l._splomScenes[d.uid]=null,delete l._splomScenes[d.uid]}}}0===Object.keys(l._splomScenes||{}).length&&delete l._splomScenes,l._splomGrid&&!s._hasOnlyLargeSploms&&l._hasOnlyLargeSploms&&(l._splomGrid.destroy(),l._splomGrid=null,delete l._splomGrid),e.clean(f,s,i,l)},updateFx:e.updateFx,toSVG:e.toSVG}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1030:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/cartesian/axis_ids"),u=x("../scatter/calc").calcMarkerSize,y=x("../scatter/calc").calcAxisExpansion,e=x("../scatter/colorscale_calc"),n=x("../scattergl/convert").markerSelection,t=x("../scattergl/convert").markerStyle,a=x("./scene_update"),r=x("../../constants/numerical").BADNUM,f=x("../scattergl/constants").TOO_MANY_POINTS;Q.exports=function(s,i){var l,c,h,m,d,o,b=i.dimensions,g=i._length,w={},_=w.cdata=[],A=w.data=[],T=i._visibleDims=[];function E(O,D){for(var S=O.makeCalcdata({v:D.values,vcalendar:i.calendar},"v"),C=0;C<S.length;C++)S[C]=S[C]===r?NaN:S[C];_.push(S),A.push("log"===O.type?p.simpleMap(S,O.c2l):S)}for(l=0;l<b.length;l++)if((h=b[l]).visible){if(m=v.getFromId(s,i._diag[l][0]),d=v.getFromId(s,i._diag[l][1]),m&&d&&m.type!==d.type){p.log("Skipping splom dimension "+l+" with conflicting axis types");continue}m?(E(m,h),d&&"category"===d.type&&(d._categories=m._categories.slice())):E(d,h),T.push(l)}for(e(s,i),p.extendFlat(w,t(i)),o=_.length*g>f?w.sizeAvg||Math.max(w.size,3):u(i,g),c=0;c<T.length;c++)h=b[l=T[c]],m=v.getFromId(s,i._diag[l][0])||{},d=v.getFromId(s,i._diag[l][1])||{},y(s,i,m,d,_[c],_[c],o);var k=a(s,i);return k.matrix||(k.matrix=!0),k.matrixOptions=w,k.selectedOptions=n(i,i.selected),k.unselectedOptions=n(i,i.unselected),[{x:!1,y:!1,t:{},trace:i}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":926,"../scatter/colorscale_calc":928,"../scattergl/constants":979,"../scattergl/convert":980,"./scene_update":1037}],1031:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/array_container_defaults"),u=x("./attributes"),y=x("../scatter/subtypes"),e=x("../scatter/marker_defaults"),n=x("../parcoords/merge_length"),t=x("../scattergl/helpers").isOpenSymbol;function a(r,f){function s(l,c){return p.coerce(r,f,u.dimensions,l,c)}s("label");var i=s("values");i&&i.length?s("visible"):f.visible=!1,s("axis.type"),s("axis.matches")}Q.exports=function(r,f,s,i){function l(g,w){return p.coerce(r,f,u,g,w)}var c=v(r,f,{name:"dimensions",handleItemDefaults:a}),h=l("diagonal.visible"),m=l("showupperhalf"),d=l("showlowerhalf");if(n(f,c,"values")&&(h||m||d)){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),e(r,f,s,i,l);var o=t(f.marker.symbol),b=y.isBubble(f);l("marker.line.width",o||b?1:0),function(g,w,_,A){var T,E,k=w.dimensions,O=k.length,D=w.showupperhalf,S=w.showlowerhalf,C=w.diagonal.visible,z=new Array(O),B=new Array(O);for(T=0;T<O;T++){var U=T?T+1:"";z[T]="x"+U,B[T]="y"+U}var G=A("xaxes",z),X=A("yaxes",B),Z=w._diag=new Array(O);w._xaxes={},w._yaxes={};var q=[],W=[];function te(ne,se,ie,ue){if(ne){var le=ne.charAt(0),de=_._splomAxes[le];if(w["_"+le+"axes"][ne]=1,ue.push(ne),!(ne in de)){var ve=de[ne]={};ie&&(ve.label=ie.label||"",ie.visible&&ie.axis&&(ie.axis.type&&(ve.type=ie.axis.type),ie.axis.matches&&(ve.matches=se)))}}}var R=!C&&!S,N=!C&&!D;for(w._axesDim={},T=0;T<O;T++){var V=k[T],ee=0===T,j=T===O-1,J=ee&&R||j&&N?void 0:G[T],$=ee&&N||j&&R?void 0:X[T];te(J,$,V,q),te($,J,V,W),Z[T]=[J,$],w._axesDim[J]=T,w._axesDim[$]=T}for(T=0;T<q.length;T++)for(E=0;E<W.length;E++){var re=q[T]+W[E];T>E&&D||T<E&&S?_._splomSubplots[re]=1:T!==E||!C&&S&&D||(_._splomSubplots[re]=1)}(!S||!C&&D&&S)&&(_._splomGridDflt.xside="bottom",_._splomGridDflt.yside="left")}(0,f,i,l),p.coerceSelectionMarkerOpacity(f,l)}else f.visible=!1}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":896,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scattergl/helpers":984,"./attributes":1028}],1032:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../scatter/colorscale_calc"),u=x("../scattergl/convert").markerStyle;Q.exports=function(y,e){var n=e.trace,t=y._fullLayout._splomScenes[n.uid];if(t){v(y,n),p.extendFlat(t.matrixOptions,u(n));var a=p.extendFlat({},t.matrixOptions,t.viewOpts);t.matrix.update(a,null)}}},{"../../lib":503,"../scatter/colorscale_calc":928,"../scattergl/convert":980}],1033:[function(x,Q,K){"use strict";K.getDimIndex=function(p,v){for(var u=v._id,y={x:0,y:1}[u.charAt(0)],e=p._visibleDims,n=0;n<e.length;n++)if(p._diag[e[n]][y]===u)return n;return!1}},{}],1034:[function(x,Q,K){"use strict";var p=x("./helpers"),v=x("../scattergl/hover").calcHover;Q.exports={hoverPoints:function(u,y,e){var n=u.cd[0].trace,t=u.scene.matrixOptions.cdata,a=u.xa,r=u.ya,f=a.c2p(y),s=r.c2p(e),i=u.distance,l=p.getDimIndex(n,a),c=p.getDimIndex(n,r);if(!1===l||!1===c)return[u];for(var h,m,d=t[l],o=t[c],b=i,g=0;g<d.length;g++){var _=o[g],A=a.c2p(d[g])-f,T=r.c2p(_)-s,E=Math.sqrt(A*A+T*T);E<b&&(b=m=E,h=g)}return u.index=h,u.distance=b,u.dxy=m,void 0===h?[u]:[v(u,d,o,n)]}}},{"../scattergl/hover":985,"./helpers":1033}],1035:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../components/grid");Q.exports={moduleType:"trace",name:"splom",basePlotModule:x("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:x("../scatter/marker_colorbar"),calc:x("./calc"),plot:x("./plot"),hoverPoints:x("./hover").hoverPoints,selectPoints:x("./select"),editStyle:x("./edit_style"),meta:{}},p.register(v)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":943,"./attributes":1028,"./base_plot":1029,"./calc":1030,"./defaults":1031,"./edit_style":1032,"./hover":1034,"./plot":1036,"./select":1038}],1036:[function(x,Q,K){"use strict";var p=x("regl-splom"),v=x("../../lib"),u=x("../../plots/cartesian/axis_ids"),y=x("../../components/dragelement/helpers").selectMode;function e(n,t){var a,r,f,s,i,l=n._fullLayout,c=l._size,h=t.trace,m=t.t,d=l._splomScenes[h.uid],o=d.matrixOptions,b=o.cdata,g=l._glcanvas.data()[0].regl,w=l.dragmode;if(0!==b.length){o.lower=h.showupperhalf,o.upper=h.showlowerhalf,o.diagonal=h.diagonal.visible;var _=h._visibleDims,A=b.length,T=d.viewOpts={};for(T.ranges=new Array(A),T.domains=new Array(A),i=0;i<_.length;i++){f=_[i];var E=T.ranges[i]=new Array(4),k=T.domains[i]=new Array(4);(a=u.getFromId(n,h._diag[f][0]))&&(E[0]=a._rl[0],E[2]=a._rl[1],k[0]=a.domain[0],k[2]=a.domain[1]),(r=u.getFromId(n,h._diag[f][1]))&&(E[1]=r._rl[0],E[3]=r._rl[1],k[1]=r.domain[0],k[3]=r.domain[1])}var O=n._context.plotGlPixelRatio,D=c.l*O,S=c.b*O;T.viewport=[D,S,c.w*O+D,c.h*O+S],!0===d.matrix&&(d.matrix=p(g));var B=l.clickmode.indexOf("select")>-1,U=!0;if(y(w)||h.selectedpoints||B){var G=h._length;if(h.selectedpoints){d.selectBatch=h.selectedpoints;var X=h.selectedpoints,Z={};for(f=0;f<X.length;f++)Z[X[f]]=!0;var q=[];for(f=0;f<G;f++)Z[f]||q.push(f);d.unselectBatch=q}var W=m.xpx=new Array(A),te=m.ypx=new Array(A);for(i=0;i<_.length;i++){if(a=u.getFromId(n,h._diag[f=_[i]][0]))for(W[i]=new Array(G),s=0;s<G;s++)W[i][s]=a.c2p(b[i][s]);if(r=u.getFromId(n,h._diag[f][1]))for(te[i]=new Array(G),s=0;s<G;s++)te[i][s]=r.c2p(b[i][s])}if(d.selectBatch.length||d.unselectBatch.length){var R=v.extendFlat({},o,d.unselectedOptions,T),N=v.extendFlat({},o,d.selectedOptions,T);d.matrix.update(R,N),U=!1}}else m.xpx=m.ypx=null;if(U){var V=v.extendFlat({},o,T);d.matrix.update(V,null)}}}Q.exports=function(n,t,a){if(a.length)for(var r=0;r<a.length;r++)e(n,a[r][0])}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1037:[function(x,Q,K){"use strict";var p=x("../../lib");Q.exports=function(v,u){var y=v._fullLayout,e=u.uid,n=y._splomScenes;n||(n=y._splomScenes={});var t={dirty:!0,selectBatch:[],unselectBatch:[]},a=n[u.uid];return a||((a=n[e]=p.extendFlat({},t,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){a.matrix&&a.matrix.draw&&(a.selectBatch.length||a.unselectBatch.length?a.matrix.draw(a.unselectBatch,a.selectBatch):a.matrix.draw()),a.dirty=!1},a.destroy=function(){a.matrix&&a.matrix.destroy&&a.matrix.destroy(),a.matrixOptions=null,a.selectBatch=null,a.unselectBatch=null,a=null}),a.dirty||p.extendFlat(a,t),a}},{"../../lib":503}],1038:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../scatter/subtypes"),u=x("./helpers");Q.exports=function(y,e){var n=y.cd,t=n[0].trace,a=n[0].t,r=y.scene,f=r.matrixOptions.cdata,s=y.xaxis,i=y.yaxis,l=[];if(!r)return l;var c=!v.hasMarkers(t)&&!v.hasText(t);if(!0!==t.visible||c)return l;var h=u.getDimIndex(t,s),m=u.getDimIndex(t,i);if(!1===h||!1===m)return l;var d=a.xpx[h],o=a.ypx[m],b=f[h],g=f[m],w=[],_=[];if(!1!==e&&!e.degenerate)for(var A=0;A<b.length;A++)e.contains([d[A],o[A]],null,A,y)?(w.push(A),l.push({pointNumber:A,x:b[A],y:g[A]})):_.push(A);var T=r.matrixOptions;return w.length||_.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,p.extendFlat({},T,r.selectedOptions,r.viewOpts)):r.matrix.update(T,null),r.selectBatch=w,r.unselectBatch=_,l}},{"../../lib":503,"../scatter/subtypes":950,"./helpers":1033}],1039:[function(x,Q,K){"use strict";var p=x("../../components/colorscale/attributes"),v=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,u=x("../../plots/template_attributes").hovertemplateAttrs,y=x("../mesh3d/attributes"),e=x("../../plots/attributes"),n=x("../../lib/extend").extendFlat,t={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:u({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:v("u",1),vhoverformat:v("v",1),whoverformat:v("w",1),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),showlegend:n({},e.showlegend,{dflt:!1})};n(t,p("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(a){t[a]=y[a]}),t.hoverinfo=n({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),t.transforms=void 0,Q.exports=t},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":866}],1040:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/colorscale/calc");function u(n){var t,a,r,f,s,i,l,c,h,m,d,o,b=n._x,g=n._y,w=n._z,_=n._len,A=-1/0,T=1/0,E=-1/0,k=1/0,O=-1/0,D=1/0,S="";for(_&&(l=b[0],h=g[0],d=w[0]),_>1&&(c=b[_-1],m=g[_-1],o=w[_-1]),t=0;t<_;t++)A=Math.max(A,b[t]),T=Math.min(T,b[t]),E=Math.max(E,g[t]),k=Math.min(k,g[t]),O=Math.max(O,w[t]),D=Math.min(D,w[t]),f||b[t]===l||(f=!0,S+="x"),s||g[t]===h||(s=!0,S+="y"),i||w[t]===d||(i=!0,S+="z");f||(S+="x"),s||(S+="y"),i||(S+="z");var C=y(n._x),z=y(n._y),B=y(n._z);S=(S=(S=S.replace("x",(l>c?"-":"+")+"x")).replace("y",(h>m?"-":"+")+"y")).replace("z",(d>o?"-":"+")+"z");var U=function(){_=0,C=[],z=[],B=[]};(!_||_<C.length*z.length*B.length)&&U();var G=function(le){return"x"===le?b:"y"===le?g:w},X=function(le){return"x"===le?C:"y"===le?z:B},Z=function(le){return le[_-1]<le[0]?-1:1},q=G(S[1]),W=G(S[3]),te=G(S[5]),R=X(S[1]).length,N=X(S[3]).length,V=X(S[5]).length,ee=!1,j=function(le,de,ve){return R*(N*le+de)+ve},J=Z(G(S[1])),$=Z(G(S[3])),re=Z(G(S[5]));for(t=0;t<V-1;t++){for(a=0;a<N-1;a++){for(r=0;r<R-1;r++){var ne=j(t,a,r),se=j(t,a,r+1),ie=j(t,a+1,r),ue=j(t+1,a,r);if(q[ne]*J<q[se]*J&&W[ne]*$<W[ie]*$&&te[ne]*re<te[ue]*re||(ee=!0),ee)break}if(ee)break}if(ee)break}return ee&&(p.warn("Encountered arbitrary coordinates! Unable to input data grid."),U()),{xMin:T,yMin:k,zMin:D,xMax:A,yMax:E,zMax:O,Xs:C,Ys:z,Zs:B,len:_,fill:S}}function y(n){return p.distinctVals(n).vals}function e(n,t){if(void 0===t&&(t=n.length),p.isTypedArray(n))return n.subarray(0,t);for(var a=[],r=0;r<t;r++)a[r]=+n[r];return a}Q.exports={calc:function(n,t){t._len=Math.min(t.u.length,t.v.length,t.w.length,t.x.length,t.y.length,t.z.length),t._u=e(t.u,t._len),t._v=e(t.v,t._len),t._w=e(t.w,t._len),t._x=e(t.x,t._len),t._y=e(t.y,t._len),t._z=e(t.z,t._len);var a=u(t);t._gridFill=a.fill,t._Xs=a.Xs,t._Ys=a.Ys,t._Zs=a.Zs,t._len=a.len;var r,f,s,i=0;t.starts&&(r=e(t.starts.x||[]),f=e(t.starts.y||[]),s=e(t.starts.z||[]),i=Math.min(r.length,f.length,s.length)),t._startsX=r||[],t._startsY=f||[],t._startsZ=s||[];var l,c=0,h=1/0;for(l=0;l<t._len;l++){var m=t._u[l],d=t._v[l],o=t._w[l],b=Math.sqrt(m*m+d*d+o*o);c=Math.max(c,b),h=Math.min(h,b)}for(v(n,t,{vals:[h,c],containerStr:"",cLetter:"c"}),l=0;l<i;l++){var g=r[l];a.xMax=Math.max(a.xMax,g),a.xMin=Math.min(a.xMin,g);var w=f[l];a.yMax=Math.max(a.yMax,w),a.yMin=Math.min(a.yMin,w);var _=s[l];a.zMax=Math.max(a.zMax,_),a.zMin=Math.min(a.zMin,_)}t._slen=i,t._normMax=c,t._xbnds=[a.xMin,a.xMax],t._ybnds=[a.yMin,a.yMax],t._zbnds=[a.zMin,a.zMax]},filter:e,processGrid:u}},{"../../components/colorscale/calc":374,"../../lib":503}],1041:[function(x,Q,K){"use strict";var p=x("../../../stackgl_modules").gl_streamtube3d,v=p.createTubeMesh,u=x("../../lib"),y=x("../../lib/gl_format_color").parseColorScale,e=x("../../components/colorscale").extractOpts,n=x("../../plots/gl3d/zip3"),t={xaxis:0,yaxis:1,zaxis:2};function a(l,c){this.scene=l,this.uid=c,this.mesh=null,this.data=null}var r=a.prototype;function f(l){var c=l.length;return c>2?l.slice(1,c-1):2===c?[(l[0]+l[1])/2]:l}function s(l){var c=l.length;return 1===c?[.5,.5]:[l[1]-l[0],l[c-1]-l[c-2]]}function i(l,c){var h=l.fullSceneLayout,m=l.dataScale,d=c._len,o={};function b(R,N){var V=h[N],ee=m[t[N]];return u.simpleMap(R,function(j){return V.d2l(j)*ee})}if(o.vectors=n(b(c._u,"xaxis"),b(c._v,"yaxis"),b(c._w,"zaxis"),d),!d)return{positions:[],cells:[]};var g=b(c._Xs,"xaxis"),w=b(c._Ys,"yaxis"),_=b(c._Zs,"zaxis");if(o.meshgrid=[g,w,_],o.gridFill=c._gridFill,c._slen)o.startingPositions=n(b(c._startsX,"xaxis"),b(c._startsY,"yaxis"),b(c._startsZ,"zaxis"));else{for(var A=w[0],T=f(g),E=f(_),k=new Array(T.length*E.length),O=0,D=0;D<T.length;D++)for(var S=0;S<E.length;S++)k[O++]=[T[D],A,E[S]];o.startingPositions=k}o.colormap=y(c),o.tubeSize=c.sizeref,o.maxLength=c.maxdisplayed;var C=b(c._xbnds,"xaxis"),z=b(c._ybnds,"yaxis"),B=b(c._zbnds,"zaxis"),U=s(g),G=s(w),X=s(_),q=p(o,[[C[0]-U[0],z[0]-G[0],B[0]-X[0]],[C[1]+U[1],z[1]+G[1],B[1]+X[1]]]),W=e(c);q.vertexIntensityBounds=[W.min/c._normMax,W.max/c._normMax];var te=c.lightposition;return q.lightPosition=[te.x,te.y,te.z],q.ambient=c.lighting.ambient,q.diffuse=c.lighting.diffuse,q.specular=c.lighting.specular,q.roughness=c.lighting.roughness,q.fresnel=c.lighting.fresnel,q.opacity=c.opacity,c._pad=q.tubeScale*c.sizeref*2,q}r.handlePick=function(l){var c=this.scene.fullSceneLayout,h=this.scene.dataScale;function m(b,g){var _=h[t[g]];return c[g].l2c(b)/_}if(l.object===this.mesh){var d=l.data.position,o=l.data.velocity;return l.traceCoordinate=[m(d[0],"xaxis"),m(d[1],"yaxis"),m(d[2],"zaxis"),m(o[0],"xaxis"),m(o[1],"yaxis"),m(o[2],"zaxis"),l.data.intensity*this.data._normMax,l.data.divergence],l.textLabel=this.data.hovertext||this.data.text,!0}},r.update=function(l){this.data=l;var c=i(this.scene,l);this.mesh.update(c)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(l,c){var h=l.glplot.gl,m=i(l,c),d=v(h,m),o=new a(l,c.uid);return o.mesh=d,o.data=c,d._trace=o,l.glplot.add(d),o}},{"../../../stackgl_modules":1119,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1042:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/colorscale/defaults"),u=x("./attributes");Q.exports=function(y,e,n,t){function a(h,m){return p.coerce(y,e,u,h,m)}var r=a("u"),f=a("v"),s=a("w"),i=a("x"),l=a("y"),c=a("z");r&&r.length&&f&&f.length&&s&&s.length&&i&&i.length&&l&&l.length&&c&&c.length?(a("starts.x"),a("starts.y"),a("starts.z"),a("maxdisplayed"),a("sizeref"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),v(y,e,t,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1039}],1043:[function(x,Q,K){"use strict";Q.exports={moduleType:"trace",name:"streamtube",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:x("./attributes"),supplyDefaults:x("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:x("./calc").calc,plot:x("./convert"),eventData:function(p,v){return p.tubex=p.x,p.tubey=p.y,p.tubez=p.z,p.tubeu=v.traceCoordinate[3],p.tubev=v.traceCoordinate[4],p.tubew=v.traceCoordinate[5],p.norm=v.traceCoordinate[6],p.divergence=v.traceCoordinate[7],delete p.x,delete p.y,delete p.z,p},meta:{}}},{"../../plots/gl3d":598,"./attributes":1039,"./calc":1040,"./convert":1041,"./defaults":1042}],1044:[function(x,Q,K){"use strict";var p=x("../../plots/attributes"),v=x("../../plots/template_attributes").hovertemplateAttrs,u=x("../../plots/template_attributes").texttemplateAttrs,y=x("../../components/colorscale/attributes"),e=x("../../plots/domain").attributes,n=x("../pie/attributes"),t=x("./constants"),a=x("../../lib/extend").extendFlat;Q.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:a({colors:{valType:"data_array",editType:"calc"},line:{color:a({},n.marker.line.color,{dflt:null}),width:a({},n.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},y("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:n.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:u({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:n.hovertext,hoverinfo:a({},p.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:v({},{keys:t.eventDataKeys}),textfont:n.textfont,insidetextorientation:n.insidetextorientation,insidetextfont:n.insidetextfont,outsidetextfont:a({},n.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:n.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":899,"./constants":1047}],1045:[function(x,Q,K){"use strict";var p=x("../../plots/plots");K.name="sunburst",K.plot=function(v,u,y,e){p.plotBasePlot(K.name,v,u,y,e)},K.clean=function(v,u,y,e){p.cleanBasePlot(K.name,v,u,y,e)}},{"../../plots/plots":619}],1046:[function(x,Q,K){"use strict";var p=x("d3-hierarchy"),v=x("fast-isnumeric"),u=x("../../lib"),y=x("../../components/colorscale").makeColorScaleFuncFromTrace,e=x("../pie/calc").makePullColorFn,n=x("../pie/calc").generateExtendedColors,t=x("../../components/colorscale").calc,a=x("../../constants/numerical").ALMOST_EQUAL,r={},f={},s={};K.calc=function(i,l){var c,h,m,d,o,b,g=i._fullLayout,w=l.ids,_=u.isArrayOrTypedArray(w),A=l.labels,T=l.parents,E=l.values,k=u.isArrayOrTypedArray(E),O=[],D={},S={},C=function($){return $||"number"==typeof $},z=function($){return!k||v(E[$])&&E[$]>=0};_?(c=Math.min(w.length,T.length),h=function($){return C(w[$])&&z($)},m=function($){return String(w[$])}):(c=Math.min(A.length,T.length),h=function($){return C(A[$])&&z($)},m=function($){return String(A[$])}),k&&(c=Math.min(c,E.length));for(var B=0;B<c;B++)if(h(B)){var U=m(B),G=C(T[B])?String(T[B]):"",X={i:B,id:U,pid:G,label:C(A[B])?String(A[B]):""};k&&(X.v=+E[B]),O.push(X),o=U,D[d=G]?D[d].push(o):D[d]=[o],S[o]=1}if(D[""]){if(D[""].length>1){for(var Z=u.randstr(),q=0;q<O.length;q++)""===O[q].pid&&(O[q].pid=Z);O.unshift({hasMultipleRoots:!0,id:Z,pid:"",label:""})}}else{var W,te=[];for(W in D)S[W]||te.push(W);if(1!==te.length)return u.warn(["Multiple implied roots, cannot build",l.type,"hierarchy of",l.name+".","These roots include:",te.join(", ")].join(" "));O.unshift({hasImpliedRoot:!0,id:W=te[0],pid:"",label:W})}try{b=p.stratify().id(function($){return $.id}).parentId(function($){return $.pid})(O)}catch($){return u.warn(["Failed to build",l.type,"hierarchy of",l.name+".","Error:",$.message].join(" "))}var R=p.hierarchy(b),N=!1;if(k)switch(l.branchvalues){case"remainder":R.sum(function($){return $.data.v});break;case"total":R.each(function($){var re=$.data.data,ne=re.v;if($.children){var se=$.children.reduce(function(ie,ue){return ie+ue.data.data.v},0);if((re.hasImpliedRoot||re.hasMultipleRoots)&&(ne=se),ne<se*a)return N=!0,u.warn(["Total value for node",$.data.data.id,"of",l.name,"is smaller than the sum of its children.","\nparent value =",ne,"\nchildren sum =",se].join(" "))}$.value=ne})}else!function $(re,ne,se){var ie=0,ue=re.children;if(ue){for(var le=ue.length,de=0;de<le;de++)ie+=$(ue[de],ne,se);se.branches&&ie++}else se.leaves&&ie++;return re.value=re.data.data.value=ie,ne._values||(ne._values=[]),ne._values[re.data.data.i]=ie,ie}(R,l,{branches:-1!==l.count.indexOf("branches"),leaves:-1!==l.count.indexOf("leaves")});if(!N){var V,ee;l.sort&&R.sort(function($,re){return re.value-$.value});var j=l.marker.colors||[];return l._hasColorscale?(!!j.length||(j=k?l.values:l._values),t(i,l,{vals:j,containerStr:"marker",cLetter:"c"}),ee=y(l.marker)):V=e(g["_"+l.type+"colormap"]),R.each(function($){var re=$.data.data;re.color=l._hasColorscale?ee(j[re.i]):V(j[re.i],re.id)}),O[0].hierarchy=R,O}},K._runCrossTraceCalc=function(i,l){var c=l._fullLayout,h=l.calcdata,m=c[i+"colorway"],d=c["_"+i+"colormap"];c["extend"+i+"colors"]&&(m=n(m,"icicle"===i?s:"treemap"===i?f:r));var o,b=0;function g(A){var T=A.data.data,E=T.id;!1===T.color&&(d[E]?T.color=d[E]:A.parent?A.parent.parent?T.color=A.parent.data.data.color:(d[E]=T.color=m[b%m.length],b++):T.color=o)}for(var w=0;w<h.length;w++){var _=h[w][0];_.trace.type===i&&_.hierarchy&&(o=_.trace.root.color,_.hierarchy.each(g))}},K.crossTraceCalc=function(i){return K._runCrossTraceCalc("sunburst",i)}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":901,"d3-hierarchy":115,"fast-isnumeric":190}],1047:[function(x,Q,K){"use strict";Q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1048:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./attributes"),u=x("../../plots/domain").defaults,y=x("../bar/defaults").handleText,e=x("../../components/colorscale"),n=e.hasColorscale,t=e.handleDefaults;Q.exports=function(a,r,f,s){function i(o,b){return p.coerce(a,r,v,o,b)}var l=i("labels"),c=i("parents");if(l&&l.length&&c&&c.length){var h=i("values");i(h&&h.length?"branchvalues":"count"),i("level"),i("maxdepth"),i("marker.line.width")&&i("marker.line.color",s.paper_bgcolor),i("marker.colors");var m=r._hasColorscale=n(a,"marker","colors")||(a.marker||{}).coloraxis;m&&t(a,r,s,i,{prefix:"marker.",cLetter:"c"}),i("leaf.opacity",m?1:.7);var d=i("text");i("texttemplate"),r.texttemplate||i("textinfo",Array.isArray(d)?"text+label":"label"),i("hovertext"),i("hovertemplate"),y(a,r,s,i,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),i("insidetextorientation"),i("sort"),i("rotation"),i("root.color"),u(r,s,i),r._length=null}else r.visible=!1}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1044}],1049:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../registry"),u=x("../../components/fx/helpers").appendArrayPointValue,y=x("../../components/fx"),e=x("../../lib"),n=x("../../lib/events"),t=x("./helpers"),a=x("../pie/helpers").formatPieValue;function r(f,s,i){for(var l=f.data.data,c={curveNumber:s.index,pointNumber:l.i,data:s._input,fullData:s},h=0;h<i.length;h++){var m=i[h];m in f&&(c[m]=f[m])}return"parentString"in f&&!t.isHierarchyRoot(f)&&(c.parent=f.parentString),u(c,s,l.i),c}Q.exports=function(f,s,i,l,c){var h=l[0],m=h.trace,d=h.hierarchy,o="sunburst"===m.type,b="treemap"===m.type||"icicle"===m.type;"_hasHoverLabel"in m||(m._hasHoverLabel=!1),"_hasHoverEvent"in m||(m._hasHoverEvent=!1),f.on("mouseover",function(g){var w=i._fullLayout;if(!i._dragging&&!1!==w.hovermode){var _,A=i._fullData[m.index],T=g.data.data,E=T.i,k=t.isHierarchyRoot(g),O=t.getParent(d,g),D=t.getValue(g),S=function(J){return e.castOption(A,E,J)},C=S("hovertemplate"),z=y.castHoverinfo(A,w,E),B=w.separators;if(C||z&&"none"!==z&&"skip"!==z){var U,G;o&&(U=h.cx+g.pxmid[0]*(1-g.rInscribed),G=h.cy+g.pxmid[1]*(1-g.rInscribed)),b&&(U=g._hoverX,G=g._hoverY);var X,Z={},q=[],W=[],te=function(J){return-1!==q.indexOf(J)};z&&(q="all"===z?A._module.attributes.hoverinfo.flags:z.split("+")),Z.label=T.label,te("label")&&Z.label&&W.push(Z.label),T.hasOwnProperty("v")&&(Z.value=T.v,Z.valueLabel=a(Z.value,B),te("value")&&W.push(Z.valueLabel)),Z.currentPath=g.currentPath=t.getPath(g.data),te("current path")&&!k&&W.push(Z.currentPath);var R=[],N=function(){-1===R.indexOf(X)&&(W.push(X),R.push(X))};Z.percentParent=g.percentParent=D/t.getValue(O),Z.parent=g.parentString=t.getPtLabel(O),te("percent parent")&&(X=t.formatPercent(Z.percentParent,B)+" of "+Z.parent,N()),Z.percentEntry=g.percentEntry=D/t.getValue(s),Z.entry=g.entry=t.getPtLabel(s),!te("percent entry")||k||g.onPathbar||(X=t.formatPercent(Z.percentEntry,B)+" of "+Z.entry,N()),Z.percentRoot=g.percentRoot=D/t.getValue(d),Z.root=g.root=t.getPtLabel(d),te("percent root")&&!k&&(X=t.formatPercent(Z.percentRoot,B)+" of "+Z.root,N()),Z.text=S("hovertext")||S("text"),te("text")&&e.isValidTextValue(X=Z.text)&&W.push(X),_=[r(g,A,c.eventDataKeys)];var V={trace:A,y:G,_x0:g._x0,_x1:g._x1,_y0:g._y0,_y1:g._y1,text:W.join("<br>"),name:C||te("name")?A.name:void 0,color:S("hoverlabel.bgcolor")||T.color,borderColor:S("hoverlabel.bordercolor"),fontFamily:S("hoverlabel.font.family"),fontSize:S("hoverlabel.font.size"),fontColor:S("hoverlabel.font.color"),nameLength:S("hoverlabel.namelength"),textAlign:S("hoverlabel.align"),hovertemplate:C,hovertemplateLabels:Z,eventData:_};o&&(V.x0=U-g.rInscribed*g.rpx1,V.x1=U+g.rInscribed*g.rpx1,V.idealAlign=g.pxmid[0]<0?"left":"right"),b&&(V.x=U,V.idealAlign=U<0?"left":"right");var ee=[];y.loneHover(V,{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:i,inOut_bbox:ee}),_[0].bbox=ee[0],m._hasHoverLabel=!0}if(b){var j=f.select("path.surface");c.styleOne(j,g,A,{hovered:!0})}m._hasHoverEvent=!0,i.emit("plotly_hover",{points:_||[r(g,A,c.eventDataKeys)],event:p.event})}}),f.on("mouseout",function(g){var w=i._fullLayout,_=i._fullData[m.index],A=p.select(this).datum();if(m._hasHoverEvent&&(g.originalEvent=p.event,i.emit("plotly_unhover",{points:[r(A,_,c.eventDataKeys)],event:p.event}),m._hasHoverEvent=!1),m._hasHoverLabel&&(y.loneUnhover(w._hoverlayer.node()),m._hasHoverLabel=!1),b){var T=f.select("path.surface");c.styleOne(T,A,_,{hovered:!1})}}),f.on("click",function(g){var w=i._fullLayout,_=i._fullData[m.index],A=o&&(t.isHierarchyRoot(g)||t.isLeaf(g)),T=t.getPtId(g),E=t.isEntry(g)?t.findEntryWithChild(d,T):t.findEntryWithLevel(d,T),k=t.getPtId(E),O={points:[r(g,_,c.eventDataKeys)],event:p.event};A||(O.nextLevel=k);var D=n.triggerHandler(i,"plotly_"+m.type+"click",O);if(!1!==D&&w.hovermode&&(i._hoverdata=[r(g,_,c.eventDataKeys)],y.click(i,p.event)),!A&&!1!==D&&!i._dragging&&!i._transitioning){v.call("_storeDirectGUIEdit",_,w._tracePreGUI[_.uid],{level:_.level});var S={data:[{level:k}],traces:[m.index]},C={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};y.loneUnhover(w._hoverlayer.node()),v.call("animate",i,S,C)}})}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":904,"./helpers":1050,"@plotly/d3":58}],1050:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/color"),u=x("../../lib/setcursor"),y=x("../pie/helpers");function e(n){return n.data.data.pid}K.findEntryWithLevel=function(n,t){var a;return t&&n.eachAfter(function(r){if(K.getPtId(r)===t)return a=r.copy()}),a||n},K.findEntryWithChild=function(n,t){var a;return n.eachAfter(function(r){for(var f=r.children||[],s=0;s<f.length;s++)if(K.getPtId(f[s])===t)return a=r.copy()}),a||n},K.isEntry=function(n){return!n.parent},K.isLeaf=function(n){return!n.children},K.getPtId=function(n){return n.data.data.id},K.getPtLabel=function(n){return n.data.data.label},K.getValue=function(n){return n.value},K.isHierarchyRoot=function(n){return""===e(n)},K.setSliceCursor=function(n,t,a){var r=a.isTransitioning;if(!r){var f=n.datum();r=a.hideOnRoot&&K.isHierarchyRoot(f)||a.hideOnLeaves&&K.isLeaf(f)}u(n,r?null:"pointer")},K.getInsideTextFontKey=function(n,t,a,r,f){var i=a.data.data.i;return p.castOption(t,i,((f||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+n)||p.castOption(t,i,"textfont."+n)||r.size},K.getOutsideTextFontKey=function(n,t,a,r){var f=a.data.data.i;return p.castOption(t,f,"outsidetextfont."+n)||p.castOption(t,f,"textfont."+n)||r.size},K.isOutsideText=function(n,t){return!n._hasColorscale&&K.isHierarchyRoot(t)},K.determineTextFont=function(n,t,a,r){return K.isOutsideText(n,t)?{color:K.getOutsideTextFontKey("color",f=n,s=t,i=a),family:K.getOutsideTextFontKey("family",f,s,i),size:K.getOutsideTextFontKey("size",f,s,i)}:function(f,s,i,l){var h=s.data.data,m=h.i,d=p.castOption(f,m,((l||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!d&&f._input.textfont&&(d=p.castOption(f._input,m,"textfont.color")),{color:d||v.contrast(h.color),family:K.getInsideTextFontKey("family",f,s,i,l),size:K.getInsideTextFontKey("size",f,s,i,l)}}(n,t,a,r);var f,s,i},K.hasTransition=function(n){return!!(n&&n.duration>0)},K.getMaxDepth=function(n){return n.maxdepth>=0?n.maxdepth:1/0},K.isHeader=function(n,t){return!(K.isLeaf(n)||n.depth===t._maxDepth-1)},K.getParent=function(n,t){return K.findEntryWithLevel(n,e(t))},K.listPath=function(n,t){var a=n.parent;if(!a)return[];var r=t?[a.data[t]]:[a];return K.listPath(a,t).concat(r)},K.getPath=function(n){return K.listPath(n,"label").join("/")+"/"},K.formatValue=y.formatPieValue,K.formatPercent=function(n,t){var a=p.formatPercent(n,0);return"0%"===a&&(a=y.formatPiePercent(n,t)),a}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":904}],1051:[function(x,Q,K){"use strict";Q.exports={moduleType:"trace",name:"sunburst",basePlotModule:x("./base_plot"),categories:[],animatable:!0,attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot").plot,style:x("./style").style,colorbar:x("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":943,"./attributes":1044,"./base_plot":1045,"./calc":1046,"./defaults":1048,"./layout_attributes":1052,"./layout_defaults":1053,"./plot":1054,"./style":1055}],1052:[function(x,Q,K){"use strict";Q.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1053:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./layout_attributes");Q.exports=function(u,y){function e(n,t){return p.coerce(u,y,v,n,t)}e("sunburstcolorway",y.colorway),e("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1052}],1054:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("d3-hierarchy"),u=x("d3-interpolate").interpolate,y=x("../../components/drawing"),e=x("../../lib"),n=x("../../lib/svg_text_utils"),t=x("../bar/uniform_text"),a=t.recordMinTextSize,r=t.clearMinTextSize,f=x("../pie/plot"),s=x("../pie/helpers").getRotationAngle,i=f.computeTransform,l=f.transformInsideText,c=x("./style").styleOne,h=x("../bar/style").resizeText,m=x("./fx"),d=x("./constants"),o=x("./helpers");function b(w,_,A,T){var E=w._fullLayout,k=!E.uniformtext.mode&&o.hasTransition(T),O=p.select(A).selectAll("g.slice"),D=_[0],S=D.trace,z=o.findEntryWithLevel(D.hierarchy,S.level),B=o.getMaxDepth(S),U=E._size,G=S.domain,Z=U.h*(G.y[1]-G.y[0]),q=.5*Math.min(U.w*(G.x[1]-G.x[0]),Z),W=D.cx=U.l+U.w*(G.x[1]+G.x[0])/2,te=D.cy=U.t+U.h*(1-G.y[0])-Z/2;if(!z)return O.remove();var R=null,N={};k&&O.each(function(Te){N[o.getPtId(Te)]={rpx0:Te.rpx0,rpx1:Te.rpx1,x0:Te.x0,x1:Te.x1,transform:Te.transform},!R&&o.isEntry(Te)&&(R=Te)});var Te,V=(Te=z,v.partition().size([2*Math.PI,Te.height+1])(Te)).descendants(),ee=z.height+1,j=0,J=B;D.hasMultipleRoots&&o.isHierarchyRoot(z)&&(V=V.slice(1),ee-=1,j=1,J+=1),V=V.filter(function(Te){return Te.y1<=J});var $=s(S.rotation);$&&V.forEach(function(Te){Te.x0+=$,Te.x1+=$});var re=Math.min(ee,B),ne=function(Te){return(Te-j)/re*q},se=function(Te,he){return[Te*Math.cos(he),-Te*Math.sin(he)]},ie=function(Te){return e.pathAnnulus(Te.rpx0,Te.rpx1,Te.x0,Te.x1,W,te)},ue=function(Te){return W+g(Te)[0]*(Te.transform.rCenter||0)+(Te.transform.x||0)},le=function(Te){return te+g(Te)[1]*(Te.transform.rCenter||0)+(Te.transform.y||0)};(O=O.data(V,o.getPtId)).enter().append("g").classed("slice",!0),k?O.exit().transition().each(function(){var Te=p.select(this);Te.select("path.surface").transition().attrTween("d",function(he){var me=function(Ae){var we,Se=o.getPtId(Ae),Pe=N[Se],ze=N[o.getPtId(z)];if(ze){var He=(Ae.x1>ze.x1?2*Math.PI:0)+$;we=Ae.rpx1<ze.rpx1?{x0:Ae.x0,x1:Ae.x1,rpx0:0,rpx1:0}:{x0:He,x1:He,rpx0:Ae.rpx0,rpx1:Ae.rpx1}}else{var tt,Oe=o.getPtId(Ae.parent);O.each(function(ft){if(o.getPtId(ft)===Oe)return tt=ft});var Be,Je=tt.children;Je.forEach(function(ft,dt){if(o.getPtId(ft)===Se)return Be=dt});var Ye=Je.length,nt=u(tt.x0,tt.x1);we={rpx0:q,rpx1:q,x0:nt(Be/Ye),x1:nt((Be+1)/Ye)}}return u(Pe,we)}(he);return function(Ae){return ie(me(Ae))}}),Te.select("g.slicetext").attr("opacity",0)}).remove():O.exit().remove(),O.order();var de=null;if(k&&R){var ve=o.getPtId(R);O.each(function(Te){null===de&&o.getPtId(Te)===ve&&(de=Te.x1)})}var _e=O;function be(Te){var he=Te.parent,me=N[o.getPtId(he)],Ae={};if(me){var we=he.children,Se=we.indexOf(Te),Pe=we.length,ze=u(me.x0,me.x1);Ae.x0=ze(Se/Pe),Ae.x1=ze(Se/Pe)}else Ae.x0=Ae.x1=0;return Ae}k&&(_e=_e.transition().each("end",function(){var Te=p.select(this);o.setSliceCursor(Te,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),_e.each(function(Te){var He,he=p.select(this),me=e.ensureSingle(he,"path","surface",function(He){He.style("pointer-events","all")});Te.rpx0=ne(Te.y0),Te.rpx1=ne(Te.y1),Te.xmid=(Te.x0+Te.x1)/2,Te.pxmid=se(Te.rpx1,Te.xmid),Te.midangle=-(Te.xmid-Math.PI/2),Te.startangle=-(Te.x0-Math.PI/2),Te.stopangle=-(Te.x1-Math.PI/2),Te.halfangle=.5*Math.min(e.angleDelta(Te.x0,Te.x1)||Math.PI,Math.PI),Te.ring=1-Te.rpx0/Te.rpx1,Te.rInscribed=0===(He=Te).rpx0&&e.isFullCircle([He.x0,He.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(He.halfangle)),He.ring/2)),k?me.transition().attrTween("d",function(He){var tt=function(Oe){var Be,Je=N[o.getPtId(Oe)],Ye={x0:Oe.x0,x1:Oe.x1,rpx0:Oe.rpx0,rpx1:Oe.rpx1};if(Je)Be=Je;else if(R)if(Oe.parent)if(de){var nt=(Oe.x1>de?2*Math.PI:0)+$;Be={x0:nt,x1:nt}}else e.extendFlat(Be={rpx0:q,rpx1:q},be(Oe));else Be={rpx0:0,rpx1:0};else Be={x0:$,x1:$};return u(Be,Ye)}(He);return function(Oe){return ie(tt(Oe))}}):me.attr("d",ie),he.call(m,z,w,_,{eventDataKeys:d.eventDataKeys,transitionTime:d.CLICK_TRANSITION_TIME,transitionEasing:d.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:w._transitioning}),me.call(c,Te,S);var Ae=e.ensureSingle(he,"g","slicetext"),we=e.ensureSingle(Ae,"text","",function(He){He.attr("data-notex",1)}),Se=e.ensureUniformFontSize(w,o.determineTextFont(S,Te,E.font));we.text(K.formatSliceLabel(Te,z,S,_,E)).classed("slicetext",!0).attr("text-anchor","middle").call(y.font,Se).call(n.convertToTspans,w);var Pe=y.bBox(we.node());Te.transform=l(Pe,Te,D),Te.transform.targetX=ue(Te),Te.transform.targetY=le(Te);var ze=function(He,tt){var Oe=He.transform;return i(Oe,tt),Oe.fontSize=Se.size,a(S.type,Oe,E),e.getTextTransform(Oe)};k?we.transition().attrTween("transform",function(He){var tt=function(Oe){var Be,Je=N[o.getPtId(Oe)],Ye=Oe.transform;if(Je)Be=Je;else if(Be={rpx1:Oe.rpx1,transform:{textPosAngle:Ye.textPosAngle,scale:0,rotate:Ye.rotate,rCenter:Ye.rCenter,x:Ye.x,y:Ye.y}},R)if(Oe.parent)if(de){var nt=Oe.x1>de?2*Math.PI:0;Be.x0=Be.x1=nt}else e.extendFlat(Be,be(Oe));else Be.x0=Be.x1=$;else Be.x0=Be.x1=$;var ft=u(Be.transform.textPosAngle,Oe.transform.textPosAngle),dt=u(Be.rpx1,Oe.rpx1),Rt=u(Be.x0,Oe.x0),Et=u(Be.x1,Oe.x1),at=u(Be.transform.scale,Ye.scale),rt=u(Be.transform.rotate,Ye.rotate),St=0===Ye.rCenter?3:0===Be.transform.rCenter?1/3:1,Xt=u(Be.transform.rCenter,Ye.rCenter);return function(lr){var Ue=dt(lr),Ze=Rt(lr),Ne=Et(lr),it=Xt(Math.pow(lr,St)),ke={pxmid:se(Ue,(Ze+Ne)/2),rpx1:Ue,transform:{textPosAngle:ft(lr),rCenter:it,x:Ye.x,y:Ye.y}};return a(S.type,Ye,E),{transform:{targetX:ue(ke),targetY:le(ke),scale:at(lr),rotate:rt(lr),rCenter:it}}}}(He);return function(Oe){return ze(tt(Oe),Pe)}}):we.attr("transform",ze(Te,Pe))})}function g(w){return A=w.transform.textPosAngle,[(_=w.rpx1)*Math.sin(A),-_*Math.cos(A)];var _,A}K.plot=function(w,_,A,T){var E,k,O=w._fullLayout,D=O._sunburstlayer,S=!A,C=!O.uniformtext.mode&&o.hasTransition(A);r("sunburst",O),(E=D.selectAll("g.trace.sunburst").data(_,function(z){return z[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),E.order(),C?(T&&(k=T()),p.transition().duration(A.duration).ease(A.easing).each("end",function(){k&&k()}).each("interrupt",function(){k&&k()}).each(function(){D.selectAll("g.trace").each(function(z){b(w,z,this,A)})})):(E.each(function(z){b(w,z,this,A)}),O.uniformtext.mode&&h(w,O._sunburstlayer.selectAll(".trace"),"sunburst")),S&&E.exit().remove()},K.formatSliceLabel=function(w,_,A,T,E){var k=A.texttemplate,O=A.textinfo;if(!(k||O&&"none"!==O))return"";var D=E.separators,C=w.data.data,z=T[0].hierarchy,B=o.isHierarchyRoot(w),U=o.getParent(z,w),G=o.getValue(w);if(!k){var X,Z=O.split("+"),q=function($){return-1!==Z.indexOf($)},W=[];if(q("label")&&C.label&&W.push(C.label),C.hasOwnProperty("v")&&q("value")&&W.push(o.formatValue(C.v,D)),!B){q("current path")&&W.push(o.getPath(w.data));var te=0;q("percent parent")&&te++,q("percent entry")&&te++,q("percent root")&&te++;var R=te>1;if(te){var N,V=function($){X=o.formatPercent(N,D),R&&(X+=" of "+$),W.push(X)};q("percent parent")&&!B&&(N=G/o.getValue(U),V("parent")),q("percent entry")&&(N=G/o.getValue(_),V("entry")),q("percent root")&&(N=G/o.getValue(z),V("root"))}}return q("text")&&(X=e.castOption(A,C.i,"text"),e.isValidTextValue(X)&&W.push(X)),W.join("<br>")}var ee=e.castOption(A,C.i,"texttemplate");if(!ee)return"";var j={};C.label&&(j.label=C.label),C.hasOwnProperty("v")&&(j.value=C.v,j.valueLabel=o.formatValue(C.v,D)),j.currentPath=o.getPath(w.data),B||(j.percentParent=G/o.getValue(U),j.percentParentLabel=o.formatPercent(j.percentParent,D),j.parent=o.getPtLabel(U)),j.percentEntry=G/o.getValue(_),j.percentEntryLabel=o.formatPercent(j.percentEntry,D),j.entry=o.getPtLabel(_),j.percentRoot=G/o.getValue(z),j.percentRootLabel=o.formatPercent(j.percentRoot,D),j.root=o.getPtLabel(z),C.hasOwnProperty("color")&&(j.color=C.color);var J=e.castOption(A,C.i,"text");return(e.isValidTextValue(J)||""===J)&&(j.text=J),j.customdata=e.castOption(A,C.i,"customdata"),e.texttemplateString(ee,j,E._d3locale,j,A._meta||{})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":904,"../pie/plot":908,"./constants":1047,"./fx":1049,"./helpers":1050,"./style":1055,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1055:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/color"),u=x("../../lib"),y=x("../bar/uniform_text").resizeText;function e(n,t,a){var r=t.data.data,f=!t.children,s=r.i,i=u.castOption(a,s,"marker.line.color")||v.defaultLine,l=u.castOption(a,s,"marker.line.width")||0;n.style("stroke-width",l).call(v.fill,r.color).call(v.stroke,i).style("opacity",f?a.leaf.opacity:null)}Q.exports={style:function(n){var t=n._fullLayout._sunburstlayer.selectAll(".trace");y(n,t,"sunburst"),t.each(function(a){var r=p.select(this),f=a[0].trace;r.style("opacity",f.opacity),r.selectAll("path.surface").each(function(s){p.select(this).call(e,s,f)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1056:[function(x,Q,K){"use strict";var p=x("../../components/color"),v=x("../../components/colorscale/attributes"),u=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=x("../../plots/template_attributes").hovertemplateAttrs,e=x("../../plots/attributes"),n=x("../../lib/extend").extendFlat,t=x("../../plot_api/edit_types").overrideAll;function a(f){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:p.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:p.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var r=Q.exports=t(n({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:y(),xhoverformat:u("x"),yhoverformat:u("y"),zhoverformat:u("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},v("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:a(),y:a(),z:a()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:n({},v.zauto,{}),zmin:n({},v.zmin,{}),zmax:n({},v.zmax,{})},hoverinfo:n({},e.hoverinfo),showlegend:n({},e.showlegend,{dflt:!1})}),"calc","nested");r.x.editType=r.y.editType=r.z.editType="calc+clearAxisTypes",r.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1057:[function(x,Q,K){"use strict";var p=x("../../components/colorscale/calc");Q.exports=function(v,u){p(v,u,u.surfacecolor?{vals:u.surfacecolor,containerStr:"",cLetter:"c"}:{vals:u.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1058:[function(x,Q,K){"use strict";var p=x("../../../stackgl_modules").gl_surface3d,v=x("../../../stackgl_modules").ndarray,u=x("../../../stackgl_modules").ndarray_linear_interpolate.d2,y=x("../heatmap/interp2d"),e=x("../heatmap/find_empties"),n=x("../../lib").isArrayOrTypedArray,t=x("../../lib/gl_format_color").parseColorScale,a=x("../../lib/str2rgbarray"),r=x("../../components/colorscale").extractOpts;function f(A,T,E){this.scene=A,this.uid=E,this.surface=T,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var s=f.prototype;s.getXat=function(A,T,E,k){var O=n(this.data.x)?n(this.data.x[0])?this.data.x[T][A]:this.data.x[A]:A;return void 0===E?O:k.d2l(O,0,E)},s.getYat=function(A,T,E,k){var O=n(this.data.y)?n(this.data.y[0])?this.data.y[T][A]:this.data.y[T]:T;return void 0===E?O:k.d2l(O,0,E)},s.getZat=function(A,T,E,k){var O=this.data.z[T][A];return null===O&&this.data.connectgaps&&this.data._interpolatedZ&&(O=this.data._interpolatedZ[T][A]),void 0===E?O:k.d2l(O,0,E)},s.handlePick=function(A){if(A.object===this.surface){var E=(A.data.index[1]-1)/this.dataScaleY-1,k=Math.max(Math.min(Math.round((A.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),O=Math.max(Math.min(Math.round(E),this.data._ylength-1),0);A.index=[k,O],A.traceCoordinate=[this.getXat(k,O),this.getYat(k,O),this.getZat(k,O)],A.dataCoordinate=[this.getXat(k,O,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(k,O,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(k,O,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var D=0;D<3;D++)null!=A.dataCoordinate[D]&&(A.dataCoordinate[D]*=this.scene.dataScale[D]);var C=this.data.hovertext||this.data.text;return A.textLabel=Array.isArray(C)&&C[O]&&void 0!==C[O][k]?C[O][k]:C||"",A.data.dataCoordinate=A.dataCoordinate.slice(),this.surface.highlight(A.data),this.scene.glplot.spikes.position=A.dataCoordinate,!0}};var i=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function l(A,T){if(A<T)return 0;for(var E=0;0===Math.floor(A%T);)A/=T,E++;return E}function c(A){for(var T=[],E=0;E<i.length;E++)T.push(l(A,i[E]));return T}function h(A){for(var T=c(A),E=A,k=0;k<i.length;k++)if(T[k]>0){E=i[k];break}return E}function m(A,T){if(!(A<1||T<1)){for(var E=c(A),k=c(T),O=1,D=0;D<i.length;D++)O*=Math.pow(i[D],Math.max(E[D],k[D]));return O}}s.calcXnums=function(A){var T,E=[];for(T=1;T<A;T++){var k=this.getXat(T-1,0),O=this.getXat(T,0);E[T-1]=O!==k&&null!=k&&null!=O?Math.abs(O-k):0}var D=0;for(T=1;T<A;T++)D+=E[T-1];for(T=1;T<A;T++)E[T-1]=0===E[T-1]?1:Math.round(D/E[T-1]);return E},s.calcYnums=function(A){var T,E=[];for(T=1;T<A;T++){var k=this.getYat(0,T-1),O=this.getYat(0,T);E[T-1]=O!==k&&null!=k&&null!=O?Math.abs(O-k):0}var D=0;for(T=1;T<A;T++)D+=E[T-1];for(T=1;T<A;T++)E[T-1]=0===E[T-1]?1:Math.round(D/E[T-1]);return E};var d=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],o=d[9],b=d[13];function g(A,T,E){var k=E[8]+E[2]*T[0]+E[5]*T[1];return A[0]=(E[6]+E[0]*T[0]+E[3]*T[1])/k,A[1]=(E[7]+E[1]*T[0]+E[4]*T[1])/k,A}function w(A,T,E){return function(k,O,D,S){for(var C=[0,0],z=k.shape[0],B=k.shape[1],U=0;U<z;U++)for(var G=0;G<B;G++)D(C,[U,G],S),k.set(U,G,u(O,C[0],C[1]))}(A,T,g,E),A}function _(A,T){for(var E=!1,k=0;k<A.length;k++)if(T===A[k]){E=!0;break}!1===E&&A.push(T)}s.estimateScale=function(A,T){for(var E=1+function(O){if(0!==O.length){for(var D=1,S=0;S<O.length;S++)D=m(D,O[S]);return D}}(0===T?this.calcXnums(A):this.calcYnums(A));E<o;)E*=2;for(;E>b;)E--,E/=h(E),++E<o&&(E=b);var k=Math.round(E/A);return k>1?k:1},s.refineCoords=function(A){for(var T=this.dataScaleX,E=this.dataScaleY,k=A[0].shape[0],O=A[0].shape[1],D=0|Math.floor(A[0].shape[0]*T+1),S=0|Math.floor(A[0].shape[1]*E+1),C=1+k+1,z=1+O+1,B=v(new Float32Array(C*z),[C,z]),U=[1/T,0,0,0,1/E,0,0,0,1],G=0;G<A.length;++G){this.surface.padField(B,A[G]);var X=v(new Float32Array(D*S),[D,S]);w(X,B,U),A[G]=X}},s.setContourLevels=function(){var A,T,k=[[],[],[]],O=[!1,!1,!1],D=!1;for(A=0;A<3;++A)if(this.showContour[A]&&(D=!0,this.contourSize[A]>0&&null!==this.contourStart[A]&&null!==this.contourEnd[A]&&this.contourEnd[A]>this.contourStart[A]))for(O[A]=!0,T=this.contourStart[A];T<this.contourEnd[A];T+=this.contourSize[A])_(k[A],T*this.scene.dataScale[A]);if(D){var S=[[],[],[]];for(A=0;A<3;++A)this.showContour[A]&&(S[A]=O[A]?k[A]:this.scene.contourLevels[A]);this.surface.update({levels:S})}},s.update=function(A){var T,E,k,O,D=this.scene,S=D.fullSceneLayout,C=this.surface,z=t(A),B=D.dataScale,U=A.z[0].length,G=A._ylength,X=D.contourLevels;this.data=A;var Z=[];for(T=0;T<3;T++)for(Z[T]=[],E=0;E<U;E++)Z[T][E]=[];for(E=0;E<U;E++)for(k=0;k<G;k++)Z[0][E][k]=this.getXat(E,k,A.xcalendar,S.xaxis),Z[1][E][k]=this.getYat(E,k,A.ycalendar,S.yaxis),Z[2][E][k]=this.getZat(E,k,A.zcalendar,S.zaxis);if(A.connectgaps)for(A._emptypoints=e(Z[2]),y(Z[2],A._emptypoints),A._interpolatedZ=[],E=0;E<U;E++)for(A._interpolatedZ[E]=[],k=0;k<G;k++)A._interpolatedZ[E][k]=Z[2][E][k];for(T=0;T<3;T++)for(E=0;E<U;E++)for(k=0;k<G;k++)null==(O=Z[T][E][k])?Z[T][E][k]=NaN:O=Z[T][E][k]*=B[T];for(T=0;T<3;T++)for(E=0;E<U;E++)for(k=0;k<G;k++)null!=(O=Z[T][E][k])&&(this.minValues[T]>O&&(this.minValues[T]=O),this.maxValues[T]<O&&(this.maxValues[T]=O));for(T=0;T<3;T++)this.objectOffset[T]=.5*(this.minValues[T]+this.maxValues[T]);for(T=0;T<3;T++)for(E=0;E<U;E++)for(k=0;k<G;k++)null!=(O=Z[T][E][k])&&(Z[T][E][k]-=this.objectOffset[T]);var q=[v(new Float32Array(U*G),[U,G]),v(new Float32Array(U*G),[U,G]),v(new Float32Array(U*G),[U,G])];for(T=0;T<3;T++)for(E=0;E<U;E++)for(k=0;k<G;k++)q[T].set(E,k,Z[T][E][k]);Z=[];var W={colormap:z,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!A.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:A.opacityscale,opacity:A.opacity},te=r(A);if(W.intensityBounds=[te.min,te.max],A.surfacecolor){var R=v(new Float32Array(U*G),[U,G]);for(E=0;E<U;E++)for(k=0;k<G;k++)R.set(E,k,A.surfacecolor[k][E]);q.push(R)}else W.intensityBounds[0]*=B[2],W.intensityBounds[1]*=B[2];(b<q[0].shape[0]||b<q[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(q[0].shape[0],0),this.dataScaleY=this.estimateScale(q[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(q)),A.surfacecolor&&(W.intensity=q.pop());var j,J,$,N=[!0,!0,!0],V=["x","y","z"];for(T=0;T<3;++T){var ee=A.contours[V[T]];N[T]=ee.highlight,W.showContour[T]=ee.show||ee.highlight,W.showContour[T]&&(W.contourProject[T]=[ee.project.x,ee.project.y,ee.project.z],ee.show?(this.showContour[T]=!0,W.levels[T]=X[T],C.highlightColor[T]=W.contourColor[T]=a(ee.color),C.highlightTint[T]=W.contourTint[T]=ee.usecolormap?0:1,W.contourWidth[T]=ee.width,this.contourStart[T]=ee.start,this.contourEnd[T]=ee.end,this.contourSize[T]=ee.size):(this.showContour[T]=!1,this.contourStart[T]=null,this.contourEnd[T]=null,this.contourSize[T]=0),ee.highlight&&(W.dynamicColor[T]=a(ee.highlightcolor),W.dynamicWidth[T]=ee.highlightwidth))}(J=(j=z)[0].rgb)[0]===($=j[j.length-1].rgb)[0]&&J[1]===$[1]&&J[2]===$[2]&&J[3]===$[3]&&(W.vertexColor=!0),W.objectOffset=this.objectOffset,W.coords=q,C.update(W),C.visible=A.visible,C.enableDynamic=N,C.enableHighlight=N,C.snapToData=!0,"lighting"in A&&(C.ambientLight=A.lighting.ambient,C.diffuseLight=A.lighting.diffuse,C.specularLight=A.lighting.specular,C.roughness=A.lighting.roughness,C.fresnel=A.lighting.fresnel),"lightposition"in A&&(C.lightPosition=[A.lightposition.x,A.lightposition.y,A.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},Q.exports=function(A,T){var k=p({gl:A.glplot.gl}),O=new f(A,k,T.uid);return k._trace=O,O.update(T),A.glplot.add(k),O}},{"../../../stackgl_modules":1119,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1059:[function(x,Q,K){"use strict";var p=x("../../registry"),v=x("../../lib"),u=x("../../components/colorscale/defaults"),y=x("./attributes");function e(t,a,r,f){var s=f("opacityscale");"max"===s?a.opacityscale=[[0,.1],[1,1]]:"min"===s?a.opacityscale=[[0,1],[1,.1]]:"extremes"===s?a.opacityscale=function(i,l){for(var c=[],h=0;h<32;h++){var m=h/31,d=.1+.9*(1-Math.pow(Math.sin(1*m*Math.PI),2));c.push([m,Math.max(0,Math.min(1,d))])}return c}():function(i){var l=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||0!=+i[0][0]||1!=+i[i.length-1][0])return!1;for(var c=0;c<i.length;c++){var h=i[c];if(2!==h.length||+h[0]<l)return!1;l=+h[0]}return!0}(s)||(a.opacityscale=void 0)}function n(t,a,r){a in t&&!(r in t)&&(t[r]=t[a])}Q.exports={supplyDefaults:function(t,a,r,f){var s,i;function l(_,A){return v.coerce(t,a,y,_,A)}var c=l("x"),h=l("y"),m=l("z");if(!m||!m.length||c&&c.length<1||h&&h.length<1)a.visible=!1;else{a._xlength=Array.isArray(c)&&v.isArrayOrTypedArray(c[0])?m.length:m[0].length,a._ylength=m.length,p.getComponentMethod("calendars","handleTraceDefaults")(t,a,["x","y","z"],f),l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(_){l(_)});var d=l("surfacecolor"),o=["x","y","z"];for(s=0;s<3;++s){var b="contours."+o[s],g=l(b+".show"),w=l(b+".highlight");if(g||w)for(i=0;i<3;++i)l(b+".project."+o[i]);g&&(l(b+".color"),l(b+".width"),l(b+".usecolormap")),w&&(l(b+".highlightcolor"),l(b+".highlightwidth")),l(b+".start"),l(b+".end"),l(b+".size")}d||(n(t,"zmin","cmin"),n(t,"zmax","cmax"),n(t,"zauto","cauto")),u(t,a,f,l,{prefix:"",cLetter:"c"}),e(0,a,0,l),a._length=null}},opacityscaleDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1056}],1060:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:x("./calc"),plot:x("./convert"),moduleType:"trace",name:"surface",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1056,"./calc":1057,"./convert":1058,"./defaults":1059}],1061:[function(x,Q,K){"use strict";var p=x("../../components/annotations/attributes"),v=x("../../lib/extend").extendFlat,u=x("../../plot_api/edit_types").overrideAll,y=x("../../plots/font_attributes"),e=x("../../plots/domain").attributes,n=x("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(Q.exports=u({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:n("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:v({},p.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:v({},y({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:n("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:v({},p.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:v({},y({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1062:[function(x,Q,K){"use strict";var p=x("../../plots/get_data").getModuleCalcData,v=x("./plot");K.name="table",K.plot=function(u){var y=p(u.calcdata,"table")[0];y.length&&v(u,y)},K.clean=function(u,y,e,n){var t=n._has&&n._has("table"),a=y._has&&y._has("table");t&&!a&&n._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1069}],1063:[function(x,Q,K){"use strict";var p=x("../../lib/gup").wrap;Q.exports=function(){return p({})}},{"../../lib/gup":500}],1064:[function(x,Q,K){"use strict";Q.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1065:[function(x,Q,K){"use strict";var p=x("./constants"),v=x("../../lib/extend").extendFlat,u=x("fast-isnumeric");function y(s){if(Array.isArray(s)){for(var i=0,l=0;l<s.length;l++)i=Math.max(i,y(s[l]));return i}return s}function e(s,i){return s+i}function n(s){var i,l=s.slice(),c=1/0,h=0;for(i=0;i<l.length;i++)Array.isArray(l[i])||(l[i]=[l[i]]),c=Math.min(c,l[i].length),h=Math.max(h,l[i].length);if(c!==h)for(i=0;i<l.length;i++){var m=h-l[i].length;m&&(l[i]=l[i].concat(t(m)))}return l}function t(s){for(var i=new Array(s),l=0;l<s;l++)i[l]="";return i}function a(s){return s.calcdata.columns.reduce(function(i,l){return l.xIndex<s.xIndex?i+l.columnWidth:i},0)}function r(s,i){return Object.keys(s).map(function(l){return v({},s[l],{auxiliaryBlocks:i})})}function f(s,i){for(var l,c={},h=0,m=0,d={firstRowIndex:null,lastRowIndex:null,rows:[]},o=0,b=0,g=0;g<s.length;g++)d.rows.push({rowIndex:g,rowHeight:l=s[g]}),((m+=l)>=i||g===s.length-1)&&(c[h]=d,d.key=b++,d.firstRowIndex=o,d.lastRowIndex=g,d={firstRowIndex:null,lastRowIndex:null,rows:[]},h+=m,o=g+1,m=0);return c}Q.exports=function(s,i){var l=n(i.cells.values),c=function(B){return B.slice(i.header.values.length,B.length)},h=n(i.header.values);h.length&&!h[0].length&&(h[0]=[""],h=n(h));var m=h.concat(c(l).map(function(){return t((h[0]||[""]).length)})),d=i.domain,o=Math.floor(s._fullLayout._size.w*(d.x[1]-d.x[0])),b=Math.floor(s._fullLayout._size.h*(d.y[1]-d.y[0])),g=i.header.values.length?m[0].map(function(){return i.header.height}):[p.emptyHeaderHeight],w=l.length?l[0].map(function(){return i.cells.height}):[],_=g.reduce(e,0),A=f(w,b-_+p.uplift),T=r(f(g,_),[]),E=r(A,T),k={},O=i._fullInput.columnorder.concat(c(l.map(function(B,U){return U}))),D=m.map(function(B,U){var G=Array.isArray(i.columnwidth)?i.columnwidth[Math.min(U,i.columnwidth.length-1)]:i.columnwidth;return u(G)?Number(G):1}),S=D.reduce(e,0);D=D.map(function(B){return B/S*o});var C=Math.max(y(i.header.line.width),y(i.cells.line.width)),z={key:i.uid+s._context.staticPlot,translateX:d.x[0]*s._fullLayout._size.w,translateY:s._fullLayout._size.h*(1-d.y[1]),size:s._fullLayout._size,width:o,maxLineWidth:C,height:b,columnOrder:O,groupHeight:b,rowBlocks:E,headerRowBlocks:T,scrollY:0,cells:v({},i.cells,{values:l}),headerCells:v({},i.header,{values:m}),gdColumns:m.map(function(B){return B[0]}),gdColumnsOriginalOrder:m.map(function(B){return B[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:m.map(function(B,U){return k[B]=(k[B]||0)+1,{key:B+"__"+k[B],label:B,specIndex:U,xIndex:O[U],xScale:a,x:void 0,calcdata:void 0,columnWidth:D[U]}})};return z.columns.forEach(function(B){B.calcdata=z,B.x=a(B)}),z}},{"../../lib/extend":493,"./constants":1064,"fast-isnumeric":190}],1066:[function(x,Q,K){"use strict";var p=x("../../lib/extend").extendFlat;K.splitToPanels=function(v){var u=[0,0],y=p({},v,{key:"header",type:"header",page:0,prevPages:u,currentRepaint:[null,null],dragHandle:!0,values:v.calcdata.headerCells.values[v.specIndex],rowBlocks:v.calcdata.headerRowBlocks,calcdata:p({},v.calcdata,{cells:v.calcdata.headerCells})});return[p({},v,{key:"cells1",type:"cells",page:0,prevPages:u,currentRepaint:[null,null],dragHandle:!1,values:v.calcdata.cells.values[v.specIndex],rowBlocks:v.calcdata.rowBlocks}),p({},v,{key:"cells2",type:"cells",page:1,prevPages:u,currentRepaint:[null,null],dragHandle:!1,values:v.calcdata.cells.values[v.specIndex],rowBlocks:v.calcdata.rowBlocks}),y]},K.splitToCells=function(v){var y,e,n,u=[n=(e=(y=v).rowBlocks[y.page])?e.rows[0].rowIndex:0,e?n+e.rows.length:0];return(v.values||[]).slice(u[0],u[1]).map(function(y,e){return{keyWithinBlock:e+("string"==typeof y&&y.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:u[0]+e,column:v,calcdata:v.calcdata,page:v.page,rowBlocks:v.rowBlocks,value:y}})}},{"../../lib/extend":493}],1067:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./attributes"),u=x("../../plots/domain").defaults;Q.exports=function(y,e,n,t){function a(r,f){return p.coerce(y,e,v,r,f)}u(e,t,a),a("columnwidth"),a("header.values"),a("header.format"),a("header.align"),a("header.prefix"),a("header.suffix"),a("header.height"),a("header.line.width"),a("header.line.color"),a("header.fill.color"),p.coerceFont(a,"header.font",p.extendFlat({},t.font)),function(r,f){for(var i=r.header.values.length,l=(r.columnorder||[]).slice(0,i),c=l.slice().sort(function(d,o){return d-o}),h=l.map(function(d){return c.indexOf(d)}),m=h.length;m<i;m++)h.push(m);f("columnorder",h)}(e,a),a("cells.values"),a("cells.format"),a("cells.align"),a("cells.prefix"),a("cells.suffix"),a("cells.height"),a("cells.line.width"),a("cells.line.color"),a("cells.fill.color"),p.coerceFont(a,"cells.font",p.extendFlat({},t.font)),e._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1061}],1068:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("./calc"),plot:x("./plot"),moduleType:"trace",name:"table",basePlotModule:x("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1061,"./base_plot":1062,"./calc":1063,"./defaults":1067,"./plot":1069}],1069:[function(x,Q,K){"use strict";var p=x("./constants"),v=x("@plotly/d3"),u=x("../../lib").numberFormat,y=x("../../lib/gup"),e=x("../../components/drawing"),n=x("../../lib/svg_text_utils"),t=x("../../lib").raiseToTop,a=x("../../lib").strTranslate,r=x("../../lib").cancelTransition,f=x("./data_preparation_helper"),s=x("./data_split_helpers"),i=x("../../components/color");function l(q){return Math.ceil(q.calcdata.maxLineWidth/2)}function c(q,W){return"clip"+q._fullLayout._uid+"_scrollAreaBottomClip_"+W.key}function h(q,W){return"clip"+q._fullLayout._uid+"_columnBoundaryClippath_"+W.calcdata.key+"_"+W.specIndex}function m(q){return[].concat.apply([],q.map(function(W){return W})).map(function(W){return W.__data__})}function d(q,W,te){var R=q.selectAll("."+p.cn.scrollbarKit).data(y.repeat,y.keyFun);R.enter().append("g").classed(p.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),R.each(function(J){var ne,$=J.scrollbarState;$.totalHeight=U(ne=J.rowBlocks,ne.length-1)+(ne.length?G(ne[ne.length-1],1/0):1),$.scrollableAreaHeight=J.groupHeight-E(J),$.currentlyVisibleHeight=Math.min($.totalHeight,$.scrollableAreaHeight),$.ratio=$.currentlyVisibleHeight/$.totalHeight,$.barLength=Math.max($.ratio*$.currentlyVisibleHeight,p.goldenRatio*p.scrollbarWidth),$.barWiggleRoom=$.currentlyVisibleHeight-$.barLength,$.wiggleRoom=Math.max(0,$.totalHeight-$.scrollableAreaHeight),$.topY=0===$.barWiggleRoom?0:J.scrollY/$.wiggleRoom*$.barWiggleRoom,$.bottomY=$.topY+$.barLength,$.dragMultiplier=$.wiggleRoom/$.barWiggleRoom}).attr("transform",function(J){return a(J.width+p.scrollbarWidth/2+p.scrollbarOffset,E(J))});var N=R.selectAll("."+p.cn.scrollbar).data(y.repeat,y.keyFun);N.enter().append("g").classed(p.cn.scrollbar,!0);var V=N.selectAll("."+p.cn.scrollbarSlider).data(y.repeat,y.keyFun);V.enter().append("g").classed(p.cn.scrollbarSlider,!0),V.attr("transform",function(J){return a(0,J.scrollbarState.topY||0)});var ee=V.selectAll("."+p.cn.scrollbarGlyph).data(y.repeat,y.keyFun);ee.enter().append("line").classed(p.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",p.scrollbarWidth).attr("stroke-linecap","round").attr("y1",p.scrollbarWidth/2),ee.attr("y2",function(J){return J.scrollbarState.barLength-p.scrollbarWidth/2}).attr("stroke-opacity",function(J){return J.columnDragInProgress||!J.scrollbarState.barWiggleRoom||te?0:.4}),ee.transition().delay(0).duration(0),ee.transition().delay(p.scrollbarHideDelay).duration(p.scrollbarHideDuration).attr("stroke-opacity",0);var j=N.selectAll("."+p.cn.scrollbarCaptureZone).data(y.repeat,y.keyFun);j.enter().append("line").classed(p.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",p.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(J){var $=v.event.y,re=this.getBoundingClientRect(),ne=J.scrollbarState,se=$-re.top,ie=v.scale.linear().domain([0,ne.scrollableAreaHeight]).range([0,ne.totalHeight]).clamp(!0);ne.topY<=se&&se<=ne.bottomY||O(W,q,null,ie(se-ne.barLength/2))(J)}).call(v.behavior.drag().origin(function(J){return v.event.stopPropagation(),J.scrollbarState.scrollbarScrollInProgress=!0,J}).on("drag",O(W,q)).on("dragend",function(){})),j.attr("y2",function(J){return J.scrollbarState.scrollableAreaHeight}),W._context.staticPlot&&(ee.remove(),j.remove())}function o(q,W,te,R){var j,N=function(ee){var j=ee.selectAll("."+p.cn.columnCell).data(s.splitToCells,function(J){return J.keyWithinBlock});return j.enter().append("g").classed(p.cn.columnCell,!0),j.exit().remove(),j}(((j=te.selectAll("."+p.cn.columnCells).data(y.repeat,y.keyFun)).enter().append("g").classed(p.cn.columnCells,!0),j.exit().remove(),j));N.each(function(j,J){var $=j.calcdata.cells.font,re=j.column.specIndex,ne={size:w($.size,re,J),color:w($.color,re,J),family:w($.family,re,J)};j.rowNumber=j.key,j.align=w(j.calcdata.cells.align,re,J),j.cellBorderWidth=w(j.calcdata.cells.line.width,re,J),j.font=ne}),function(ee){ee.attr("width",function(j){return j.column.columnWidth}).attr("stroke-width",function(j){return j.cellBorderWidth}).each(function(j){var J=v.select(this);i.stroke(J,w(j.calcdata.cells.line.color,j.column.specIndex,j.rowNumber)),i.fill(J,w(j.calcdata.cells.fill.color,j.column.specIndex,j.rowNumber))})}(function(ee){var j=ee.selectAll("."+p.cn.cellRect).data(y.repeat,function(J){return J.keyWithinBlock});return j.enter().append("rect").classed(p.cn.cellRect,!0),j}(N));var V=function(ee){var j=ee.selectAll("."+p.cn.cellText).data(y.repeat,function(J){return J.keyWithinBlock});return j.enter().append("text").classed(p.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){v.event.stopPropagation()}),j}(function(ee){var j=ee.selectAll("."+p.cn.cellTextHolder).data(y.repeat,function(J){return J.keyWithinBlock});return j.enter().append("g").classed(p.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),j}(N));(function(ee){ee.each(function(j){e.font(v.select(this),j.font)})})(V),b(V,W,R,q),B(N)}function b(q,W,te,R){q.text(function(N){var V=N.column.specIndex,ee=N.rowNumber,j=N.value,J="string"==typeof j,$=J&&j.match(/<br>/i),re=!J||$;N.mayHaveMarkup=J&&j.match(/[<&>]/);var ne,se="string"==typeof(ne=j)&&ne.match(p.latexCheck);N.latex=se;var ie,ue,le=se?"":w(N.calcdata.cells.prefix,V,ee)||"",de=se?"":w(N.calcdata.cells.suffix,V,ee)||"",ve=se?null:w(N.calcdata.cells.format,V,ee)||null,_e=le+(ve?u(ve)(N.value):N.value)+de;if(N.wrappingNeeded=!N.wrapped&&!re&&!se&&(ie=g(_e)),N.cellHeightMayIncrease=$||se||N.mayHaveMarkup||(void 0===ie?g(_e):ie),N.needsConvertToTspans=N.mayHaveMarkup||N.wrappingNeeded||N.latex,N.wrappingNeeded){var be=(" "===p.wrapSplitCharacter?_e.replace(/<a href=/gi,"<a_href="):_e).split(p.wrapSplitCharacter),Te=" "===p.wrapSplitCharacter?be.map(function(he){return he.replace(/<a_href=/gi,"<a href=")}):be;N.fragments=Te.map(function(he){return{text:he,width:null}}),N.fragments.push({fragment:p.wrapSpacer,width:null}),ue=Te.join(p.lineBreaker)+p.lineBreaker+p.wrapSpacer}else delete N.fragments,ue=_e;return ue}).attr("dy",function(N){return N.needsConvertToTspans?0:"0.75em"}).each(function(N){var V=v.select(this);N.needsConvertToTspans?n.convertToTspans(V,R,(N.wrappingNeeded?S:C)(te,this,W,R,N)):v.select(this.parentNode).attr("transform",function(j){return a(z(j),p.cellPad)}).attr("text-anchor",function(j){return{left:"start",center:"middle",right:"end"}[j.align]})})}function g(q){return-1!==q.indexOf(p.wrapSplitCharacter)}function w(q,W,te){if(Array.isArray(q)){var R=q[Math.min(W,q.length-1)];return Array.isArray(R)?R[Math.min(te,R.length-1)]:R}return q}function _(q,W,te){q.transition().ease(p.releaseTransitionEase).duration(p.releaseTransitionDuration).attr("transform",a(W.x,te))}function A(q){return"cells"===q.type}function T(q){return"header"===q.type}function E(q){return(q.rowBlocks.length?q.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(W,te){return W+G(te,1/0)},0)}function k(q,W,te){var R=m(W)[0];if(void 0!==R){var N=R.rowBlocks,V=R.calcdata,ee=U(N,N.length),j=R.calcdata.groupHeight-E(R),J=V.scrollY=Math.max(0,Math.min(ee-j,V.scrollY)),$=function(re,ne,se){for(var ie=[],ue=0,le=0;le<re.length;le++){for(var de=re[le],ve=de.rows,_e=0,be=0;be<ve.length;be++)_e+=ve[be].rowHeight;de.allRowsHeight=_e,ne<ue+_e&&ne+se>ue&&ie.push(le),ue+=_e}return ie}(N,J,j);1===$.length&&($[0]===N.length-1?$.unshift($[0]-1):$.push($[0]+1)),$[0]%2&&$.reverse(),W.each(function(re,ne){re.page=$[ne],re.scrollY=J}),W.attr("transform",function(re){var ne=U(re.rowBlocks,re.page)-re.scrollY;return a(0,ne)}),q&&(D(q,te,W,$,R.prevPages,R,0),D(q,te,W,$,R.prevPages,R,1),d(te,q))}}function O(q,W,te,R){return function(N){var V=N.calcdata?N.calcdata:N,ee=W.filter(function(re){return V.key===re.key}),J=V.scrollY;V.scrollY=void 0===R?V.scrollY+(te||V.scrollbarState.dragMultiplier)*v.event.dy:R;var $=ee.selectAll("."+p.cn.yColumn).selectAll("."+p.cn.columnBlock).filter(A);return k(q,$,ee),V.scrollY===J}}function D(q,W,te,R,N,V,ee){R[ee]!==N[ee]&&(clearTimeout(V.currentRepaint[ee]),V.currentRepaint[ee]=setTimeout(function(){var j=te.filter(function(J,$){return $===ee&&R[$]!==N[$]});o(q,W,j,te),N[ee]=R[ee]}))}function S(q,W,te,R){return function(){var N=v.select(W.parentNode);N.each(function(V){var ee=V.fragments;N.selectAll("tspan.line").each(function(ue,le){ee[le].width=this.getComputedTextLength()});var j,J,$=ee[ee.length-1].width,re=ee.slice(0,-1),ne=[],se=0,ie=V.column.columnWidth-2*p.cellPad;for(V.value="";re.length;)se+(J=(j=re.shift()).width+$)>ie&&(V.value+=ne.join(p.wrapSpacer)+p.lineBreaker,ne=[],se=0),ne.push(j.text),se+=J;se&&(V.value+=ne.join(p.wrapSpacer)),V.wrapped=!0}),N.selectAll("tspan.line").remove(),b(N.select("."+p.cn.cellText),te,q,R),v.select(W.parentNode.parentNode).call(B)}}function C(q,W,te,R,N){return function(){if(!N.settledY){var V=v.select(W.parentNode),ee=Z(N),j=N.key-ee.firstRowIndex,J=ee.rows[j].rowHeight,$=N.cellHeightMayIncrease?W.parentNode.getBoundingClientRect().height+2*p.cellPad:J,re=Math.max($,J);re-ee.rows[j].rowHeight&&(ee.rows[j].rowHeight=re,q.selectAll("."+p.cn.columnCell).call(B),k(null,q.filter(A),0),d(te,R,!0)),V.attr("transform",function(){var ne=this.parentNode.getBoundingClientRect(),se=v.select(this.parentNode).select("."+p.cn.cellRect).node().getBoundingClientRect(),ie=this.transform.baseVal.consolidate(),ue=se.top-ne.top+(ie?ie.matrix.f:p.cellPad);return a(z(N,v.select(this.parentNode).select("."+p.cn.cellTextHolder).node().getBoundingClientRect().width),ue)}),N.settledY=!0}}}function z(q,W){switch(q.align){case"left":return p.cellPad;case"right":return q.column.columnWidth-(W||0)-p.cellPad;case"center":return(q.column.columnWidth-(W||0))/2;default:return p.cellPad}}function B(q){q.attr("transform",function(W){var te=W.rowBlocks[0].auxiliaryBlocks.reduce(function(N,V){return N+G(V,1/0)},0),R=G(Z(W),W.key);return a(0,R+te)}).selectAll("."+p.cn.cellRect).attr("height",function(W){return(te=Z(W),R=W.key,te.rows[R-te.firstRowIndex]).rowHeight;var te,R})}function U(q,W){for(var te=0,R=W-1;R>=0;R--)te+=X(q[R]);return te}function G(q,W){for(var te=0,R=0;R<q.rows.length&&q.rows[R].rowIndex<W;R++)te+=q.rows[R].rowHeight;return te}function X(q){var W=q.allRowsHeight;if(void 0!==W)return W;for(var te=0,R=0;R<q.rows.length;R++)te+=q.rows[R].rowHeight;return q.allRowsHeight=te,te}function Z(q){return q.rowBlocks[q.page]}Q.exports=function(q,W){var te=!q._context.staticPlot,R=q._fullLayout._paper.selectAll("."+p.cn.table).data(W.map(function(de){var ve=y.unwrap(de).trace;return f(q,ve)}),y.keyFun);R.exit().remove(),R.enter().append("g").classed(p.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),R.attr("width",function(de){return de.width+de.size.l+de.size.r}).attr("height",function(de){return de.height+de.size.t+de.size.b}).attr("transform",function(de){return a(de.translateX,de.translateY)});var N=R.selectAll("."+p.cn.tableControlView).data(y.repeat,y.keyFun),V=N.enter().append("g").classed(p.cn.tableControlView,!0).style("box-sizing","content-box");if(te){var ee="onwheel"in document?"wheel":"mousewheel";V.on("mousemove",function(de){N.filter(function(ve){return de===ve}).call(d,q)}).on(ee,function(de){de.scrollbarState.wheeling||(de.scrollbarState.wheeling=!0,O(q,N,null,de.scrollY+v.event.deltaY)(de)||(v.event.stopPropagation(),v.event.preventDefault()),de.scrollbarState.wheeling=!1)}).call(d,q,!0)}N.attr("transform",function(de){return a(de.size.l,de.size.t)});var j=N.selectAll("."+p.cn.scrollBackground).data(y.repeat,y.keyFun);j.enter().append("rect").classed(p.cn.scrollBackground,!0).attr("fill","none"),j.attr("width",function(de){return de.width}).attr("height",function(de){return de.height}),N.each(function(de){e.setClipUrl(v.select(this),c(q,de),q)});var J=N.selectAll("."+p.cn.yColumn).data(function(de){return de.columns},y.keyFun);J.enter().append("g").classed(p.cn.yColumn,!0),J.exit().remove(),J.attr("transform",function(de){return a(de.x,0)}),te&&J.call(v.behavior.drag().origin(function(de){return _(v.select(this),de,-p.uplift),t(this),de.calcdata.columnDragInProgress=!0,d(N.filter(function(ve){return de.calcdata.key===ve.key}),q),de}).on("drag",function(de){var ve=v.select(this),_e=function(be){return(de===be?v.event.x:be.x)+be.columnWidth/2};de.x=Math.max(-p.overdrag,Math.min(de.calcdata.width+p.overdrag-de.columnWidth,v.event.x)),m(J).filter(function(be){return be.calcdata.key===de.calcdata.key}).sort(function(be,Te){return _e(be)-_e(Te)}).forEach(function(be,Te){be.xIndex=Te,be.x=de===be?be.x:be.xScale(be)}),J.filter(function(be){return de!==be}).transition().ease(p.transitionEase).duration(p.transitionDuration).attr("transform",function(be){return a(be.x,0)}),ve.call(r).attr("transform",a(de.x,-p.uplift))}).on("dragend",function(de){var be,Te,he,me,ve=v.select(this),_e=de.calcdata;de.x=de.xScale(de),de.calcdata.columnDragInProgress=!1,_(ve,de,0),be=q,Te=_e,he=_e.columns.map(function(be){return be.xIndex}),me=Te.gdColumnsOriginalOrder,Te.gdColumns.sort(function(Ae,we){return he[me.indexOf(Ae)]-he[me.indexOf(we)]}),Te.columnorder=he,be.emit("plotly_restyle")})),J.each(function(de){e.setClipUrl(v.select(this),h(q,de),q)});var $=J.selectAll("."+p.cn.columnBlock).data(s.splitToPanels,y.keyFun);$.enter().append("g").classed(p.cn.columnBlock,!0).attr("id",function(de){return de.key}),$.style("cursor",function(de){return de.dragHandle?"ew-resize":de.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var re=$.filter(T),ne=$.filter(A);te&&ne.call(v.behavior.drag().origin(function(de){return v.event.stopPropagation(),de}).on("drag",O(q,N,-1)).on("dragend",function(){})),o(q,N,re,$),o(q,N,ne,$);var se=N.selectAll("."+p.cn.scrollAreaClip).data(y.repeat,y.keyFun);se.enter().append("clipPath").classed(p.cn.scrollAreaClip,!0).attr("id",function(de){return c(q,de)});var ie=se.selectAll("."+p.cn.scrollAreaClipRect).data(y.repeat,y.keyFun);ie.enter().append("rect").classed(p.cn.scrollAreaClipRect,!0).attr("x",-p.overdrag).attr("y",-p.uplift).attr("fill","none"),ie.attr("width",function(de){return de.width+2*p.overdrag}).attr("height",function(de){return de.height+p.uplift}),J.selectAll("."+p.cn.columnBoundary).data(y.repeat,y.keyFun).enter().append("g").classed(p.cn.columnBoundary,!0);var ue=J.selectAll("."+p.cn.columnBoundaryClippath).data(y.repeat,y.keyFun);ue.enter().append("clipPath").classed(p.cn.columnBoundaryClippath,!0),ue.attr("id",function(de){return h(q,de)});var le=ue.selectAll("."+p.cn.columnBoundaryRect).data(y.repeat,y.keyFun);le.enter().append("rect").classed(p.cn.columnBoundaryRect,!0).attr("fill","none"),le.attr("width",function(de){return de.columnWidth+2*l(de)}).attr("height",function(de){return de.calcdata.height+2*l(de)+p.uplift}).attr("x",function(de){return-l(de)}).attr("y",function(de){return-l(de)}),k(null,ne,N)}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1064,"./data_preparation_helper":1065,"./data_split_helpers":1066,"@plotly/d3":58}],1070:[function(x,Q,K){"use strict";var p=x("../../plots/template_attributes").hovertemplateAttrs,v=x("../../plots/template_attributes").texttemplateAttrs,u=x("../../components/colorscale/attributes"),y=x("../../plots/domain").attributes,e=x("../pie/attributes"),n=x("../sunburst/attributes"),t=x("./constants"),a=x("../../lib/extend").extendFlat;Q.exports={labels:n.labels,parents:n.parents,values:n.values,branchvalues:n.branchvalues,count:n.count,level:n.level,maxdepth:n.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:a({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:n.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:n.marker.line,editType:"calc"},u("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:a({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:n.textinfo,texttemplate:v({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:n.hoverinfo,hovertemplate:p({},{keys:t.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:a({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:n.root,domain:y({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":899,"../sunburst/attributes":1044,"./constants":1073}],1071:[function(x,Q,K){"use strict";var p=x("../../plots/plots");K.name="treemap",K.plot=function(v,u,y,e){p.plotBasePlot(K.name,v,u,y,e)},K.clean=function(v,u,y,e){p.cleanBasePlot(K.name,v,u,y,e)}},{"../../plots/plots":619}],1072:[function(x,Q,K){"use strict";var p=x("../sunburst/calc");K.calc=function(v,u){return p.calc(v,u)},K.crossTraceCalc=function(v){return p._runCrossTraceCalc("treemap",v)}},{"../sunburst/calc":1046}],1073:[function(x,Q,K){"use strict";Q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1074:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./attributes"),u=x("../../components/color"),y=x("../../plots/domain").defaults,e=x("../bar/defaults").handleText,n=x("../bar/constants").TEXTPAD,t=x("../../components/colorscale"),a=t.hasColorscale,r=t.handleDefaults;Q.exports=function(f,s,i,l){function c(A,T){return p.coerce(f,s,v,A,T)}var h=c("labels"),m=c("parents");if(h&&h.length&&m&&m.length){var d=c("values");c(d&&d.length?"branchvalues":"count"),c("level"),c("maxdepth"),"squarify"===c("tiling.packing")&&c("tiling.squarifyratio"),c("tiling.flip"),c("tiling.pad");var o=c("text");c("texttemplate"),s.texttemplate||c("textinfo",Array.isArray(o)?"text+label":"label"),c("hovertext"),c("hovertemplate");var b=c("pathbar.visible");e(f,s,l,c,"auto",{hasPathbar:b,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition");var g=-1!==s.textposition.indexOf("bottom");c("marker.line.width")&&c("marker.line.color",l.paper_bgcolor);var w=c("marker.colors");(s._hasColorscale=a(f,"marker","colors")||(f.marker||{}).coloraxis)?r(f,s,l,c,{prefix:"marker.",cLetter:"c"}):c("marker.depthfade",!(w||[]).length);var _=2*s.textfont.size;c("marker.pad.t",g?_/4:_),c("marker.pad.l",_/4),c("marker.pad.r",_/4),c("marker.pad.b",g?_:_/4),s._hovered={marker:{line:{width:2,color:u.contrast(l.paper_bgcolor)}}},b&&(c("pathbar.thickness",s.pathbar.textfont.size+2*n),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),y(s,l,c),s._length=null}else s.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1070}],1075:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../sunburst/helpers"),u=x("../bar/uniform_text").clearMinTextSize,y=x("../bar/style").resizeText,e=x("./plot_one");Q.exports=function(n,t,a,r,f){var s,i,l=f.type,c=f.drawDescendants,h=n._fullLayout,m=h["_"+l+"layer"],d=!a;u(l,h),(s=m.selectAll("g.trace."+l).data(t,function(o){return o[0].trace.uid})).enter().append("g").classed("trace",!0).classed(l,!0),s.order(),!h.uniformtext.mode&&v.hasTransition(a)?(r&&(i=r()),p.transition().duration(a.duration).ease(a.easing).each("end",function(){i&&i()}).each("interrupt",function(){i&&i()}).each(function(){m.selectAll("g.trace").each(function(o){e(n,o,this,a,c)})})):(s.each(function(o){e(n,o,this,a,c)}),h.uniformtext.mode&&y(n,m.selectAll(".trace"),l)),d&&s.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1050,"./plot_one":1084,"@plotly/d3":58}],1076:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=x("../../components/drawing"),y=x("../../lib/svg_text_utils"),e=x("./partition"),n=x("./style").styleOne,t=x("./constants"),a=x("../sunburst/helpers"),r=x("../sunburst/fx");Q.exports=function(f,s,i,l,c){var h=c.barDifY,m=c.width,d=c.height,o=c.viewX,b=c.viewY,g=c.pathSlice,w=c.toMoveInsideSlice,_=c.strTransform,A=c.hasTransition,T=c.handleSlicesExit,E=c.makeUpdateSliceInterpolator,k=c.makeUpdateTextInterpolator,O={},D=f._fullLayout,S=s[0],C=S.trace,z=S.hierarchy,B=m/C._entryDepth,U=a.listPath(i.data,"id"),G=e(z.copy(),[m,d],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(G=G.filter(function(Z){var q=U.indexOf(Z.data.id);return-1!==q&&(Z.x0=B*q,Z.x1=B*(q+1),Z.y0=h,Z.y1=h+d,Z.onPathbar=!0,!0)})).reverse(),(l=l.data(G,a.getPtId)).enter().append("g").classed("pathbar",!0),T(l,!0,O,[m,d],g),l.order();var X=l;A&&(X=X.transition().each("end",function(){var Z=p.select(this);a.setSliceCursor(Z,f,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),X.each(function(Z){Z._x0=o(Z.x0),Z._x1=o(Z.x1),Z._y0=b(Z.y0),Z._y1=b(Z.y1),Z._hoverX=o(Z.x1-Math.min(m,d)/2),Z._hoverY=b(Z.y1-d/2);var q=p.select(this),W=v.ensureSingle(q,"path","surface",function(V){V.style("pointer-events","all")});A?W.transition().attrTween("d",function(V){var ee=E(V,!0,O,[m,d]);return function(j){return g(ee(j))}}):W.attr("d",g),q.call(r,i,f,s,{styleOne:n,eventDataKeys:t.eventDataKeys,transitionTime:t.CLICK_TRANSITION_TIME,transitionEasing:t.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,f,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:f._transitioning}),W.call(n,Z,C,{hovered:!1}),Z._text=(a.getPtLabel(Z)||"").split("<br>").join(" ")||"";var te=v.ensureSingle(q,"g","slicetext"),R=v.ensureSingle(te,"text","",function(V){V.attr("data-notex",1)}),N=v.ensureUniformFontSize(f,a.determineTextFont(C,Z,D.font,{onPathbar:!0}));R.text(Z._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(u.font,N).call(y.convertToTspans,f),Z.textBB=u.bBox(R.node()),Z.transform=w(Z,{fontSize:N.size,onPathbar:!0}),Z.transform.fontSize=N.size,A?R.transition().attrTween("transform",function(V){var ee=k(V,!0,O,[m,d]);return function(j){return _(ee(j))}}):R.attr("transform",_(Z))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1049,"../sunburst/helpers":1050,"./constants":1073,"./partition":1082,"./style":1085,"@plotly/d3":58}],1077:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=x("../../components/drawing"),y=x("../../lib/svg_text_utils"),e=x("./partition"),n=x("./style").styleOne,t=x("./constants"),a=x("../sunburst/helpers"),r=x("../sunburst/fx"),f=x("../sunburst/plot").formatSliceLabel;Q.exports=function(s,i,l,c,h){var m=h.width,d=h.height,o=h.viewX,b=h.viewY,g=h.pathSlice,w=h.toMoveInsideSlice,_=h.strTransform,A=h.hasTransition,T=h.handleSlicesExit,E=h.makeUpdateSliceInterpolator,k=h.makeUpdateTextInterpolator,O=h.prevEntry,D=s._fullLayout,S=i[0].trace,C=-1!==S.textposition.indexOf("left"),z=-1!==S.textposition.indexOf("right"),B=-1!==S.textposition.indexOf("bottom"),U=!B&&!S.marker.pad.t||B&&!S.marker.pad.b,G=e(l,[m,d],{packing:S.tiling.packing,squarifyratio:S.tiling.squarifyratio,flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1,pad:{inner:S.tiling.pad,top:S.marker.pad.t,left:S.marker.pad.l,right:S.marker.pad.r,bottom:S.marker.pad.b}}).descendants(),X=1/0,Z=-1/0;G.forEach(function(N){var V=N.depth;V>=S._maxDepth?(N.x0=N.x1=(N.x0+N.x1)/2,N.y0=N.y1=(N.y0+N.y1)/2):(X=Math.min(X,V),Z=Math.max(Z,V))}),c=c.data(G,a.getPtId),S._maxVisibleLayers=isFinite(Z)?Z-X+1:0,c.enter().append("g").classed("slice",!0),T(c,!1,{},[m,d],g),c.order();var q=null;if(A&&O){var W=a.getPtId(O);c.each(function(N){null===q&&a.getPtId(N)===W&&(q={x0:N.x0,x1:N.x1,y0:N.y0,y1:N.y1})})}var te=function(){return q||{x0:0,x1:m,y0:0,y1:d}},R=c;return A&&(R=R.transition().each("end",function(){var N=p.select(this);a.setSliceCursor(N,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),R.each(function(N){var V=a.isHeader(N,S);N._x0=o(N.x0),N._x1=o(N.x1),N._y0=b(N.y0),N._y1=b(N.y1),N._hoverX=o(N.x1-S.marker.pad.r),N._hoverY=b(B?N.y1-S.marker.pad.b/2:N.y0+S.marker.pad.t/2);var ee=p.select(this),j=v.ensureSingle(ee,"path","surface",function(ne){ne.style("pointer-events","all")});A?j.transition().attrTween("d",function(ne){var se=E(ne,!1,te(),[m,d]);return function(ie){return g(se(ie))}}):j.attr("d",g),ee.call(r,l,s,i,{styleOne:n,eventDataKeys:t.eventDataKeys,transitionTime:t.CLICK_TRANSITION_TIME,transitionEasing:t.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,s,{isTransitioning:s._transitioning}),j.call(n,N,S,{hovered:!1}),N._text=N.x0===N.x1||N.y0===N.y1?"":V?U?"":a.getPtLabel(N)||"":f(N,l,S,i,D)||"";var J=v.ensureSingle(ee,"g","slicetext"),$=v.ensureSingle(J,"text","",function(ne){ne.attr("data-notex",1)}),re=v.ensureUniformFontSize(s,a.determineTextFont(S,N,D.font));$.text(N._text||" ").classed("slicetext",!0).attr("text-anchor",z?"end":C||V?"start":"middle").call(u.font,re).call(y.convertToTspans,s),N.textBB=u.bBox($.node()),N.transform=w(N,{fontSize:re.size,isHeader:V}),N.transform.fontSize=re.size,A?$.transition().attrTween("transform",function(ne){var se=k(ne,!1,te(),[m,d]);return function(ie){return _(se(ie))}}):$.attr("transform",_(N))}),q}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1049,"../sunburst/helpers":1050,"../sunburst/plot":1054,"./constants":1073,"./partition":1082,"./style":1085,"@plotly/d3":58}],1078:[function(x,Q,K){"use strict";Q.exports=function p(v,u,y){var e;y.swapXY&&(e=v.x0,v.x0=v.y0,v.y0=e,e=v.x1,v.x1=v.y1,v.y1=e),y.flipX&&(e=v.x0,v.x0=u[0]-v.x1,v.x1=u[0]-e),y.flipY&&(e=v.y0,v.y0=u[1]-v.y1,v.y1=u[1]-e);var n=v.children;if(n)for(var t=0;t<n.length;t++)p(n[t],u,y)}},{}],1079:[function(x,Q,K){"use strict";Q.exports={moduleType:"trace",name:"treemap",basePlotModule:x("./base_plot"),categories:[],animatable:!0,attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc").calc,crossTraceCalc:x("./calc").crossTraceCalc,plot:x("./plot"),style:x("./style").style,colorbar:x("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":943,"./attributes":1070,"./base_plot":1071,"./calc":1072,"./defaults":1074,"./layout_attributes":1080,"./layout_defaults":1081,"./plot":1083,"./style":1085}],1080:[function(x,Q,K){"use strict";Q.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1081:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./layout_attributes");Q.exports=function(u,y){function e(n,t){return p.coerce(u,y,v,n,t)}e("treemapcolorway",y.colorway),e("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1080}],1082:[function(x,Q,K){"use strict";var p=x("d3-hierarchy"),v=x("./flip_tree");Q.exports=function(u,y,e){var n,t=e.flipX,a=e.flipY,r="dice-slice"===e.packing,f=e.pad[a?"bottom":"top"],s=e.pad[t?"right":"left"],i=e.pad[t?"left":"right"],l=e.pad[a?"top":"bottom"];r&&(n=s,s=f,f=n,n=i,i=l,l=n);var c=p.treemap().tile(function(h,m){switch(h){case"squarify":return p.treemapSquarify.ratio(m);case"binary":return p.treemapBinary;case"dice":return p.treemapDice;case"slice":return p.treemapSlice;default:return p.treemapSliceDice}}(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(s).paddingRight(i).paddingTop(f).paddingBottom(l).size(r?[y[1],y[0]]:y)(u);return(r||t||a)&&v(c,y,{swapXY:r,flipX:t,flipY:a}),c}},{"./flip_tree":1078,"d3-hierarchy":115}],1083:[function(x,Q,K){"use strict";var p=x("./draw"),v=x("./draw_descendants");Q.exports=function(u,y,e,n){return p(u,y,e,n,{type:"treemap",drawDescendants:v})}},{"./draw":1075,"./draw_descendants":1077}],1084:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("d3-interpolate").interpolate,u=x("../sunburst/helpers"),y=x("../../lib"),e=x("../bar/constants").TEXTPAD,n=x("../bar/plot").toMoveInsideBar,t=x("../bar/uniform_text").recordMinTextSize,a=x("./constants"),r=x("./draw_ancestors");function f(s){return u.isHierarchyRoot(s)?"":u.getPtId(s)}Q.exports=function(s,i,l,c,h){var m=s._fullLayout,d=i[0],o=d.trace,b="icicle"===o.type,g=d.hierarchy,w=u.findEntryWithLevel(g,o.level),_=p.select(l),A=_.selectAll("g.pathbar"),T=_.selectAll("g.slice");if(!w)return A.remove(),void T.remove();var E=u.isHierarchyRoot(w),k=!m.uniformtext.mode&&u.hasTransition(c),O=u.getMaxDepth(o),D=m._size,S=o.domain,C=D.w*(S.x[1]-S.x[0]),z=D.h*(S.y[1]-S.y[0]),B=C,U=o.pathbar.thickness,G=o.marker.line.width+a.gapWithPathbar,X=o.pathbar.visible?o.pathbar.side.indexOf("bottom")>-1?z+G:-(U+G):0,Z={x0:B,x1:B,y0:X,y1:X+U},q=function(Se,Pe,ze){var He=o.tiling.pad,tt=function(Ye){return Ye-He<=Pe.x0},Oe=function(Ye){return Ye+He>=Pe.x1},Be=function(Ye){return Ye-He<=Pe.y0},Je=function(Ye){return Ye+He>=Pe.y1};return Se.x0===Pe.x0&&Se.x1===Pe.x1&&Se.y0===Pe.y0&&Se.y1===Pe.y1?{x0:Se.x0,x1:Se.x1,y0:Se.y0,y1:Se.y1}:{x0:tt(Se.x0-He)?0:Oe(Se.x0-He)?ze[0]:Se.x0,x1:tt(Se.x1+He)?0:Oe(Se.x1+He)?ze[0]:Se.x1,y0:Be(Se.y0-He)?0:Je(Se.y0-He)?ze[1]:Se.y0,y1:Be(Se.y1+He)?0:Je(Se.y1+He)?ze[1]:Se.y1}},W=null,te={},R={},N=null,V=function(Se,Pe){return Pe?te[f(Se)]:R[f(Se)]};d.hasMultipleRoots&&E&&O++,o._maxDepth=O,o._backgroundColor=m.paper_bgcolor,o._entryDepth=w.data.depth,o._atRootLevel=E;var j=-C/2+D.l+D.w*(S.x[1]+S.x[0])/2,J=-z/2+D.t+D.h*(1-(S.y[1]+S.y[0])/2),$=function(Se){return j+Se},re=function(Se){return J+Se},ne=re(0),se=$(0),ie=function(Se){return se+Se},ue=function(Se){return ne+Se};function le(Se,Pe){return Se+","+Pe}var de=ie(0),ve=function(Se){Se.x=Math.max(de,Se.x)},_e=o.pathbar.edgeshape,be=function(Se,Pe){var ze=Se.x0,He=Se.x1,tt=Se.y0,Oe=Se.y1,Be=Se.textBB,Je=function(St){return-1!==o.textposition.indexOf(St)},Ye=Je("bottom"),nt=Je("top")||Pe.isHeader&&!Ye?"start":Ye?"end":"middle",ft=Je("right"),dt=Je("left")||Pe.onPathbar?-1:ft?1:0,Rt=o[b?"tiling":"marker"].pad;if(Pe.isHeader){if((ze+=(b?Rt:Rt.l)-e)>=(He-=(b?Rt:Rt.r)-e)){var Et=(ze+He)/2;ze=Et,He=Et}var at;Ye?tt<(at=Oe-(b?Rt:Rt.b))&&at<Oe&&(tt=at):tt<(at=tt+(b?Rt:Rt.t))&&at<Oe&&(Oe=at)}var rt=n(ze,He,tt,Oe,Be,{isHorizontal:!1,constrained:!0,angle:0,anchor:nt,leftToRight:dt});return rt.fontSize=Pe.fontSize,rt.targetX=$(rt.targetX),rt.targetY=re(rt.targetY),isNaN(rt.targetX)||isNaN(rt.targetY)?{}:(ze!==He&&tt!==Oe&&t(o.type,rt,m),{scale:rt.scale,rotate:rt.rotate,textX:rt.textX,textY:rt.textY,anchorX:rt.anchorX,anchorY:rt.anchorY,targetX:rt.targetX,targetY:rt.targetY})},Te=function(Se,Pe){for(var ze,He=0,tt=Se;!ze&&He<O;)He++,(tt=tt.parent)?ze=V(tt,Pe):He=O;return ze||{}},he=function(Se,Pe,ze,He,tt){var Oe,Be=V(Se,Pe);if(Be)Oe=Be;else if(Pe)Oe=Z;else if(W)if(Se.parent){var Je=N||ze;Je&&!Pe?Oe=q(Se,Je,He):y.extendFlat(Oe={},Te(Se,Pe))}else Oe=y.extendFlat({},Se),b&&("h"===tt.orientation?tt.flipX?Oe.x0=Se.x1:Oe.x1=0:tt.flipY?Oe.y0=Se.y1:Oe.y1=0);else Oe={};return v(Oe,{x0:Se.x0,x1:Se.x1,y0:Se.y0,y1:Se.y1})},me=function(Se,Pe,ze,He){var tt=V(Se,Pe),Oe={},Be=function(Se,Pe,ze,He){return Pe?te[f(g)]||Z:Se.data.depth-w.data.depth<O?q(Se,R[o.level]||ze,He):{}}(Se,Pe,ze,He);y.extendFlat(Oe,{transform:be({x0:Be.x0,x1:Be.x1,y0:Be.y0,y1:Be.y1,textBB:Se.textBB,_text:Se._text},{isHeader:u.isHeader(Se,o)})}),tt?Oe=tt:Se.parent&&y.extendFlat(Oe,Te(Se,Pe));var Je=Se.transform;return Se.x0!==Se.x1&&Se.y0!==Se.y1&&t(o.type,Je,m),v(Oe,{transform:{scale:Je.scale,rotate:Je.rotate,textX:Je.textX,textY:Je.textY,anchorX:Je.anchorX,anchorY:Je.anchorY,targetX:Je.targetX,targetY:Je.targetY}})},Ae=function(Se,Pe,ze,He,tt){var Oe=He[0],Be=He[1];k?Se.exit().transition().each(function(){var Je=p.select(this);Je.select("path.surface").transition().attrTween("d",function(Ye){var nt=function(ft,dt,Rt,Et){var at,rt=V(ft,dt);if(dt)at=Z;else{var St=V(w,dt);at=St?q(ft,St,Et):{}}return v(rt,at)}(Ye,Pe,0,[Oe,Be]);return function(ft){return tt(nt(ft))}}),Je.select("g.slicetext").attr("opacity",0)}).remove():Se.exit().remove()},we=function(Se){var Pe=Se.transform;return Se.x0!==Se.x1&&Se.y0!==Se.y1&&t(o.type,Pe,m),y.getTextTransform({textX:Pe.textX,textY:Pe.textY,anchorX:Pe.anchorX,anchorY:Pe.anchorY,targetX:Pe.targetX,targetY:Pe.targetY,scale:Pe.scale,rotate:Pe.rotate})};k&&(A.each(function(Se){te[f(Se)]={x0:Se.x0,x1:Se.x1,y0:Se.y0,y1:Se.y1},Se.transform&&(te[f(Se)].transform={textX:Se.transform.textX,textY:Se.transform.textY,anchorX:Se.transform.anchorX,anchorY:Se.transform.anchorY,targetX:Se.transform.targetX,targetY:Se.transform.targetY,scale:Se.transform.scale,rotate:Se.transform.rotate})}),T.each(function(Se){R[f(Se)]={x0:Se.x0,x1:Se.x1,y0:Se.y0,y1:Se.y1},Se.transform&&(R[f(Se)].transform={textX:Se.transform.textX,textY:Se.transform.textY,anchorX:Se.transform.anchorX,anchorY:Se.transform.anchorY,targetX:Se.transform.targetX,targetY:Se.transform.targetY,scale:Se.transform.scale,rotate:Se.transform.rotate}),!W&&u.isEntry(Se)&&(W=Se)})),N=h(s,i,w,T,{width:C,height:z,viewX:$,viewY:re,pathSlice:function(Se){var Pe=$(Se.x0),ze=$(Se.x1),He=re(Se.y0),tt=re(Se.y1);return ze-Pe&&tt-He?"M"+le(Pe,He+0)+"L"+le(ze-0,He)+"L"+le(ze,tt-0)+"L"+le(Pe+0,tt)+"Z":""},toMoveInsideSlice:be,prevEntry:W,makeUpdateSliceInterpolator:he,makeUpdateTextInterpolator:me,handleSlicesExit:Ae,hasTransition:k,strTransform:we}),o.pathbar.visible?r(s,i,w,A,{barDifY:X,width:B,height:U,viewX:ie,viewY:ue,pathSlice:function(Se){var Pe=ie(Math.max(Math.min(Se.x0,Se.x0),0)),ze=ie(Math.min(Math.max(Se.x1,Se.x1),B)),He=ue(Se.y0),tt=ue(Se.y1),Oe=U/2,Be={},Je={};Be.x=Pe,Je.x=ze,Be.y=Je.y=(He+tt)/2;var Ye={x:Pe,y:He},nt={x:ze,y:He},ft={x:ze,y:tt},dt={x:Pe,y:tt};return">"===_e?(Ye.x-=Oe,nt.x-=Oe,ft.x-=Oe,dt.x-=Oe):"/"===_e?(ft.x-=Oe,dt.x-=Oe,Be.x-=Oe/2,Je.x-=Oe/2):"\\"===_e?(Ye.x-=Oe,nt.x-=Oe,Be.x-=Oe/2,Je.x-=Oe/2):"<"===_e&&(Be.x-=Oe,Je.x-=Oe),ve(Ye),ve(dt),ve(Be),ve(nt),ve(ft),ve(Je),"M"+le(Ye.x,Ye.y)+"L"+le(nt.x,nt.y)+"L"+le(Je.x,Je.y)+"L"+le(ft.x,ft.y)+"L"+le(dt.x,dt.y)+"L"+le(Be.x,Be.y)+"Z"},toMoveInsideSlice:be,makeUpdateSliceInterpolator:he,makeUpdateTextInterpolator:me,handleSlicesExit:Ae,hasTransition:k,strTransform:we}):A.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1050,"./constants":1073,"./draw_ancestors":1076,"@plotly/d3":58,"d3-interpolate":116}],1085:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/color"),u=x("../../lib"),y=x("../sunburst/helpers"),e=x("../bar/uniform_text").resizeText;function n(t,a,r,f){var s,i,l=(f||{}).hovered,c=a.data.data,h=c.i,m=c.color,d=y.isHierarchyRoot(a),o=1;if(l)s=r._hovered.marker.line.color,i=r._hovered.marker.line.width;else if(d&&m===r.root.color)o=100,s="rgba(0,0,0,0)",i=0;else if(s=u.castOption(r,h,"marker.line.color")||v.defaultLine,i=u.castOption(r,h,"marker.line.width")||0,!r._hasColorscale&&!a.onPathbar){var b=r.marker.depthfade;if(b){var g,w=v.combine(v.addOpacity(r._backgroundColor,.75),m);if(!0===b){var _=y.getMaxDepth(r);g=isFinite(_)?y.isLeaf(a)?0:r._maxVisibleLayers-(a.data.depth-r._entryDepth):a.data.height+1}else g=a.data.depth-r._entryDepth,r._atRootLevel||g++;if(g>0)for(var A=0;A<g;A++)m=v.combine(v.addOpacity(w,.5*A/g),m)}}t.style("stroke-width",i).call(v.fill,m).call(v.stroke,s).style("opacity",o)}Q.exports={style:function(t){var a=t._fullLayout._treemaplayer.selectAll(".trace");e(t,a,"treemap"),a.each(function(r){var f=p.select(this),s=r[0].trace;f.style("opacity",s.opacity),f.selectAll("path.surface").each(function(i){p.select(this).call(n,i,s,{hovered:!1})})})},styleOne:n}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1050,"@plotly/d3":58}],1086:[function(x,Q,K){"use strict";var p=x("../box/attributes"),v=x("../../lib/extend").extendFlat,u=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat;Q.exports={y:p.y,x:p.x,x0:p.x0,y0:p.y0,xhoverformat:u("x"),yhoverformat:u("y"),name:v({},p.name,{}),orientation:v({},p.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:p.fillcolor,points:v({},p.boxpoints,{}),jitter:v({},p.jitter,{}),pointpos:v({},p.pointpos,{}),width:v({},p.width,{}),marker:p.marker,text:p.text,hovertext:p.hovertext,hovertemplate:p.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup,selected:p.selected,unselected:p.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1087:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/cartesian/axes"),u=x("../box/calc"),y=x("./helpers"),e=x("../../constants/numerical").BADNUM;function n(a,r,f){var s=r.max-r.min;if(!s)return a.bandwidth?a.bandwidth:0;if(a.bandwidth)return Math.max(a.bandwidth,s/1e4);var c,i=f.length,l=p.stdev(f,i-1,r.mean);return Math.max((c=i,1.059*Math.min(l,(r.q3-r.q1)/1.349)*Math.pow(c,-.2)),s/100)}function t(a,r,f,s){var i,l=a.spanmode,c=a.span||[],m=[r.min-2*s,r.max+2*s];function d(b){var g=c[b],w="multicategory"===f.type?f.r2c(g):f.d2c(g,0,a[r.valLetter+"calendar"]);return w===e?m[b]:w}var o={type:"linear",range:i="soft"===l?m:"hard"===l?[r.min,r.max]:[d(0),d(1)]};return v.setConvert(o),o.cleanRange(),i}Q.exports=function(a,r){var f=u(a,r);if(f[0].t.empty)return f;for(var s=a._fullLayout,i=v.getFromId(a,r["h"===r.orientation?"xaxis":"yaxis"]),l=1/0,c=-1/0,h=0,m=0,d=0;d<f.length;d++){var o=f[d],b=o.pts.map(y.extractVal),g=o.bandwidth=n(r,o,b),w=o.span=t(r,o,i,g);if(o.min===o.max&&0===g)w=o.span=[o.min,o.max],o.density=[{v:1,t:w[0]}],o.bandwidth=g,h=Math.max(h,1);else{var _=w[1]-w[0],A=Math.ceil(_/(g/3)),T=_/A;if(!isFinite(T)||!isFinite(A))return p.error("Something went wrong with computing the violin span"),f[0].t.empty=!0,f;var E=y.makeKDE(o,r,b);o.density=new Array(A);for(var k=0,O=w[0];O<w[1]+T/2;k++,O+=T){var D=E(O);o.density[k]={v:D,t:O},h=Math.max(h,D)}}m=Math.max(m,b.length),l=Math.min(l,w[0]),c=Math.max(c,w[1])}var S=v.findExtremes(i,[l,c],{padded:!0});if(r._extremes[i._id]=S,r.width)f[0].t.maxKDE=h;else{var C=s._violinScaleGroupStats,z=r.scalegroup,B=C[z];B?(B.maxKDE=Math.max(B.maxKDE,h),B.maxCount=Math.max(B.maxCount,m)):C[z]={maxKDE:h,maxCount:m}}return f[0].t.labels.kde=p._(a,"kde:"),f}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1090}],1088:[function(x,Q,K){"use strict";var p=x("../box/cross_trace_calc").setPositionOffset,v=["v","h"];Q.exports=function(u,y){for(var e=u.calcdata,n=y.xaxis,t=y.yaxis,a=0;a<v.length;a++){for(var r=v[a],f="h"===r?t:n,s=[],i=0;i<e.length;i++){var l=e[i],h=l[0].trace;!0!==h.visible||"violin"!==h.type||l[0].t.empty||h.orientation!==r||h.xaxis!==n._id||h.yaxis!==t._id||s.push(i)}p("violin",u,s,f)}}},{"../box/cross_trace_calc":675}],1089:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../components/color"),u=x("../box/defaults"),y=x("./attributes");Q.exports=function(e,n,t,a){function r(_,A){return p.coerce(e,n,y,_,A)}function f(_,A){return p.coerce2(e,n,y,_,A)}if(u.handleSampleDefaults(e,n,r,a),!1!==n.visible){r("bandwidth"),r("side"),r("width")||(r("scalegroup",n.name),r("scalemode"));var s,i=r("span");Array.isArray(i)&&(s="manual"),r("spanmode",s);var l=r("line.color",(e.marker||{}).color||t),c=r("line.width"),h=r("fillcolor",v.addOpacity(n.line.color,.5));u.handlePointsDefaults(e,n,r,{prefix:""});var m=f("box.width"),d=f("box.fillcolor",h),o=f("box.line.color",l),b=f("box.line.width",c);r("box.visible",Boolean(m||d||o||b))||(n.box={visible:!1});var g=f("meanline.color",l),w=f("meanline.width",c);r("meanline.visible",Boolean(g||w))||(n.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1086}],1090:[function(x,Q,K){"use strict";var p=x("../../lib"),v=function(u){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*u*u)};K.makeKDE=function(u,y,e){var n=e.length,t=v,a=u.bandwidth,r=1/(n*a);return function(f){for(var s=0,i=0;i<n;i++)s+=t((f-e[i])/a);return r*s}},K.getPositionOnKdePath=function(u,y,e){var n,t;"h"===y.orientation?(n="y",t="x"):(n="x",t="y");var a=p.findPointOnPath(u.path,e,t,{pathLength:u.pathLength}),r=u.posCenterPx,f=a[n];return[f,"both"===y.side?2*r-f:r]},K.getKdeValue=function(u,y,e){var n=u.pts.map(K.extractVal);return K.makeKDE(u,y,n)(e)/u.posDensityScale},K.extractVal=function(u){return u.v}},{"../../lib":503}],1091:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../../plots/cartesian/axes"),u=x("../box/hover"),y=x("./helpers");Q.exports=function(e,n,t,a,r){r||(r={});var f,s,i=r.hoverLayer,l=e.cd,c=l[0].trace,h=c.hoveron,m=-1!==h.indexOf("violins"),d=-1!==h.indexOf("kde"),o=[];if(m||d){var b=u.hoverOnBoxes(e,n,t,a);if(d&&b.length>0){var g,w,_,A,T,E=e.xa,k=e.ya;"h"===c.orientation?(T=n,g="y",_=k,w="x",A=E):(T=t,g="x",_=E,w="y",A=k);var O=l[e.index];if(T>=O.span[0]&&T<=O.span[1]){var D=p.extendFlat({},e),S=A.c2p(T,!0),C=y.getKdeValue(O,c,T),z=y.getPositionOnKdePath(O,c,S),B=_._offset,U=_._length;D[g+"0"]=z[0],D[g+"1"]=z[1],D[w+"0"]=D[w+"1"]=S,D[w+"Label"]=w+": "+v.hoverLabelText(A,T,c[w+"hoverformat"])+", "+l[0].t.labels.kde+" "+C.toFixed(3),D.spikeDistance=b[0].spikeDistance;var G=g+"Spike";D[G]=b[0][G],b[0].spikeDistance=void 0,b[0][G]=void 0,D.hovertemplate=!1,o.push(D),(s={stroke:e.color})[g+"1"]=p.constrain(B+z[0],B,B+U),s[g+"2"]=p.constrain(B+z[1],B,B+U),s[w+"1"]=s[w+"2"]=A._offset+S}}m&&(o=o.concat(b))}-1!==h.indexOf("points")&&(f=u.hoverOnPoints(e,n,t));var X=i.selectAll(".violinline-"+c.uid).data(s?[0]:[]);return X.enter().append("line").classed("violinline-"+c.uid,!0).attr("stroke-width",1.5),X.exit().remove(),X.attr(s),"closest"===a?f?[f]:o:(f&&o.push(f),o)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1090}],1092:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults"),crossTraceDefaults:x("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc"),crossTraceCalc:x("./cross_trace_calc"),plot:x("./plot"),style:x("./style"),styleOnSelect:x("../scatter/style").styleOnSelect,hoverPoints:x("./hover"),selectPoints:x("../box/select"),moduleType:"trace",name:"violin",basePlotModule:x("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":949,"./attributes":1086,"./calc":1087,"./cross_trace_calc":1088,"./defaults":1089,"./hover":1091,"./layout_attributes":1093,"./layout_defaults":1094,"./plot":1095,"./style":1096}],1093:[function(x,Q,K){"use strict";var p=x("../box/layout_attributes"),v=x("../../lib").extendFlat;Q.exports={violinmode:v({},p.boxmode,{}),violingap:v({},p.boxgap,{}),violingroupgap:v({},p.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1094:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./layout_attributes"),u=x("../box/layout_defaults");Q.exports=function(y,e,n){u._supply(y,e,n,function(t,a){return p.coerce(y,e,v,t,a)},"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1093}],1095:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=x("../../components/drawing"),y=x("../box/plot"),e=x("../scatter/line_points"),n=x("./helpers");Q.exports=function(t,a,r,f){var s=t._fullLayout,i=a.xaxis,l=a.yaxis;function c(h){var m=e(h,{xaxis:i,yaxis:l,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return u.smoothopen(m[0],1)}v.makeTraceGroups(f,r,"trace violins").each(function(h){var m=p.select(this),d=h[0],o=d.t,b=d.trace;if(!0!==b.visible||o.empty)m.remove();else{var g=o.bPos,w=o.bdPos,_=a[o.valLetter+"axis"],A=a[o.posLetter+"axis"],T="both"===b.side,E=T||"positive"===b.side,k=T||"negative"===b.side,O=m.selectAll("path.violin").data(v.identity);O.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),O.exit().remove(),O.each(function(X){var Z,q,W,te,R,N,V,ee,j=p.select(this),J=X.density,$=J.length,re=A.c2l(X.pos+g,!0),ne=A.l2p(re);if(b.width)Z=o.maxKDE/w;else{var se=s._violinScaleGroupStats[b.scalegroup];Z="count"===b.scalemode?se.maxKDE/w*(se.maxCount/X.pts.length):se.maxKDE/w}if(E){for(V=new Array($),R=0;R<$;R++)(ee=V[R]={})[o.posLetter]=re+J[R].v/Z,ee[o.valLetter]=_.c2l(J[R].t,!0);q=c(V)}if(k){for(V=new Array($),N=0,R=$-1;N<$;N++,R--)(ee=V[N]={})[o.posLetter]=re-J[R].v/Z,ee[o.valLetter]=_.c2l(J[R].t,!0);W=c(V)}if(T)te=q+"L"+W.substr(1)+"Z";else{var ie=[ne,_.c2p(J[0].t)],ue=[ne,_.c2p(J[$-1].t)];"h"===b.orientation&&(ie.reverse(),ue.reverse()),te=E?"M"+ie+"L"+q.substr(1)+"L"+ue:"M"+ue+"L"+W.substr(1)+"L"+ie}j.attr("d",te),X.posCenterPx=ne,X.posDensityScale=Z*w,X.path=j.node(),X.pathLength=X.path.getTotalLength()/(T?2:1)});var D,S,C,z=b.box,B=z.width,U=(z.line||{}).width;T?(D=w*B,S=0):E?(D=[0,w*B/2],S=U*{x:1,y:-1}[o.posLetter]):(D=[w*B/2,0],S=U*{x:-1,y:1}[o.posLetter]),y.plotBoxAndWhiskers(m,{pos:A,val:_},b,{bPos:g,bdPos:D,bPosPxOffset:S}),y.plotBoxMean(m,{pos:A,val:_},b,{bPos:g,bdPos:D,bPosPxOffset:S}),!b.box.visible&&b.meanline.visible&&(C=v.identity);var G=m.selectAll("path.meanline").data(C||[]);G.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),G.exit().remove(),G.each(function(X){var Z=_.c2p(X.mean,!0),q=n.getPositionOnKdePath(X,b,Z);p.select(this).attr("d","h"===b.orientation?"M"+Z+","+q[0]+"V"+q[1]:"M"+q[0]+","+Z+"H"+q[1])}),y.plotPoints(m,{x:i,y:l},b,o)}})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":939,"./helpers":1090,"@plotly/d3":58}],1096:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/color"),u=x("../scatter/style").stylePoints;Q.exports=function(y){var e=p.select(y).selectAll("g.trace.violins");e.style("opacity",function(n){return n[0].trace.opacity}),e.each(function(n){var t=n[0].trace,a=p.select(this),r=t.box||{},f=r.line||{},s=t.meanline||{},i=s.width;a.selectAll("path.violin").style("stroke-width",t.line.width+"px").call(v.stroke,t.line.color).call(v.fill,t.fillcolor),a.selectAll("path.box").style("stroke-width",f.width+"px").call(v.stroke,f.color).call(v.fill,r.fillcolor);var l={"stroke-width":i+"px","stroke-dasharray":2*i+"px,"+i+"px"};a.selectAll("path.mean").style(l).call(v.stroke,s.color),a.selectAll("path.meanline").style(l).call(v.stroke,s.color),u(a,t,y)})}},{"../../components/color":366,"../scatter/style":949,"@plotly/d3":58}],1097:[function(x,Q,K){"use strict";var p=x("../../components/colorscale/attributes"),v=x("../isosurface/attributes"),u=x("../surface/attributes"),y=x("../../plots/attributes"),e=x("../../lib/extend").extendFlat,n=x("../../plot_api/edit_types").overrideAll,t=Q.exports=n(e({x:v.x,y:v.y,z:v.z,value:v.value,isomin:v.isomin,isomax:v.isomax,surface:v.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:v.slices,caps:v.caps,text:v.text,hovertext:v.hovertext,xhoverformat:v.xhoverformat,yhoverformat:v.yhoverformat,zhoverformat:v.zhoverformat,valuehoverformat:v.valuehoverformat,hovertemplate:v.hovertemplate},p("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:v.colorbar,opacity:v.opacity,opacityscale:u.opacityscale,lightposition:v.lightposition,lighting:v.lighting,flatshading:v.flatshading,contour:v.contour,hoverinfo:e({},y.hoverinfo),showlegend:e({},y.showlegend,{dflt:!1})}),"calc","nested");t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":861,"../surface/attributes":1056}],1098:[function(x,Q,K){"use strict";var p=x("../../../stackgl_modules").gl_mesh3d,v=x("../../lib/gl_format_color").parseColorScale,u=x("../../lib/str2rgbarray"),y=x("../../components/colorscale").extractOpts,e=x("../../plots/gl3d/zip3"),n=x("../isosurface/convert").findNearestOnAxis,t=x("../isosurface/convert").generateIsoMeshes;function a(f,s,i){this.scene=f,this.uid=i,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var r=a.prototype;r.handlePick=function(f){if(f.object===this.mesh){var s=f.data.index,l=this.data._meshY[s],c=this.data._meshZ[s],h=this.data._Ys.length,m=this.data._Zs.length,d=n(this.data._meshX[s],this.data._Xs).id,o=n(l,this.data._Ys).id,b=n(c,this.data._Zs).id,g=f.index=b+m*o+m*h*d;f.traceCoordinate=[this.data._meshX[g],this.data._meshY[g],this.data._meshZ[g],this.data._value[g]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&void 0!==w[g]?f.textLabel=w[g]:w&&(f.textLabel=w),!0}},r.update=function(f){var s=this.scene,i=s.fullSceneLayout;function l(m,d,o,b){return d.map(function(g){return m.d2l(g,0,b)*o})}this.data=t(f);var c={positions:e(l(i.xaxis,f._meshX,s.dataScale[0],f.xcalendar),l(i.yaxis,f._meshY,s.dataScale[1],f.ycalendar),l(i.zaxis,f._meshZ,s.dataScale[2],f.zcalendar)),cells:e(f._meshI,f._meshJ,f._meshK),lightPosition:[f.lightposition.x,f.lightposition.y,f.lightposition.z],ambient:f.lighting.ambient,diffuse:f.lighting.diffuse,specular:f.lighting.specular,roughness:f.lighting.roughness,fresnel:f.lighting.fresnel,vertexNormalsEpsilon:f.lighting.vertexnormalsepsilon,faceNormalsEpsilon:f.lighting.facenormalsepsilon,opacity:f.opacity,opacityscale:f.opacityscale,contourEnable:f.contour.show,contourColor:u(f.contour.color).slice(0,3),contourWidth:f.contour.width,useFacetNormals:f.flatshading},h=y(f);c.vertexIntensity=f._meshIntensity,c.vertexIntensityBounds=[h.min,h.max],c.colormap=v(f),this.mesh.update(c)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},Q.exports=function(f,s){var l=p({gl:f.glplot.gl}),c=new a(f,l,s.uid);return l._trace=c,c.update(s),f.glplot.add(l),c}},{"../../../stackgl_modules":1119,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":863}],1099:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./attributes"),u=x("../isosurface/defaults").supplyIsoDefaults,y=x("../surface/defaults").opacityscaleDefaults;Q.exports=function(e,n,t,a){function r(f,s){return p.coerce(e,n,v,f,s)}u(e,n,t,a,r),y(e,n,a,r)}},{"../../lib":503,"../isosurface/defaults":864,"../surface/defaults":1059,"./attributes":1097}],1100:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),supplyDefaults:x("./defaults"),calc:x("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:x("./convert"),moduleType:"trace",name:"volume",basePlotModule:x("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":862,"./attributes":1097,"./convert":1098,"./defaults":1099}],1101:[function(x,Q,K){"use strict";var p=x("../bar/attributes"),v=x("../scatter/attributes").line,u=x("../../plots/attributes"),y=x("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=x("../../plots/template_attributes").hovertemplateAttrs,n=x("../../plots/template_attributes").texttemplateAttrs,t=x("./constants"),a=x("../../lib/extend").extendFlat,r=x("../../components/color");function f(s){return{marker:{color:a({},p.marker.color,{arrayOk:!1,editType:"style"}),line:{color:a({},p.marker.line.color,{arrayOk:!1,editType:"style"}),width:a({},p.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}Q.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:p.x,x0:p.x0,dx:p.dx,y:p.y,y0:p.y0,dy:p.dy,xperiod:p.xperiod,yperiod:p.yperiod,xperiod0:p.xperiod0,yperiod0:p.yperiod0,xperiodalignment:p.xperiodalignment,yperiodalignment:p.yperiodalignment,xhoverformat:y("x"),yhoverformat:y("y"),hovertext:p.hovertext,hovertemplate:e({},{keys:t.eventDataKeys}),hoverinfo:a({},u.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:n({editType:"plot"},{keys:t.eventDataKeys.concat(["label"])}),text:p.text,textposition:p.textposition,insidetextanchor:p.insidetextanchor,textangle:p.textangle,textfont:p.textfont,insidetextfont:p.insidetextfont,outsidetextfont:p.outsidetextfont,constraintext:p.constraintext,cliponaxis:p.cliponaxis,orientation:p.orientation,offset:p.offset,width:p.width,increasing:f(),decreasing:f(),totals:f(),connector:{line:{color:a({},v.color,{dflt:r.defaultLine}),width:a({},v.width,{editType:"plot"}),dash:v.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":925,"./constants":1103}],1102:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes"),v=x("../../plots/cartesian/align_period"),u=x("../../lib").mergeArray,y=x("../scatter/calc_selection"),e=x("../../constants/numerical").BADNUM;function n(a){return"a"===a||"absolute"===a}function t(a){return"t"===a||"total"===a}Q.exports=function(a,r){var f,s,i,l,c,h,m=p.getFromId(a,r.xaxis||"x"),d=p.getFromId(a,r.yaxis||"y");"h"===r.orientation?(f=m.makeCalcdata(r,"x"),i=d.makeCalcdata(r,"y"),l=v(r,d,"y",i),c=!!r.yperiodalignment,h="y"):(f=d.makeCalcdata(r,"y"),i=m.makeCalcdata(r,"x"),l=v(r,m,"x",i),c=!!r.xperiodalignment,h="x"),s=l.vals;for(var o,b=Math.min(s.length,f.length),g=new Array(b),w=0,_=!1,A=0;A<b;A++){var T=f[A]||0,E=!1;(f[A]!==e||t(r.measure[A])||n(r.measure[A]))&&A+1<b&&(f[A+1]!==e||t(r.measure[A+1])||n(r.measure[A+1]))&&(E=!0);var k=g[A]={i:A,p:s[A],s:T,rawS:T,cNext:E};n(r.measure[A])?(w=k.s,k.isSum=!0,k.dir="totals",k.s=w):t(r.measure[A])?(k.isSum=!0,k.dir="totals",k.s=w):(k.isSum=!1,k.dir=k.rawS<0?"decreasing":"increasing",k.s=w+(o=k.s),w+=o),"totals"===k.dir&&(_=!0),c&&(g[A].orig_p=i[A],g[A][h+"End"]=l.ends[A],g[A][h+"Start"]=l.starts[A]),r.ids&&(k.id=String(r.ids[A])),k.v=(r.base||0)+w}return g.length&&(g[0].hasTotals=_),u(r.text,g,"tx"),u(r.hovertext,g,"htx"),y(g,r),g}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":927}],1103:[function(x,Q,K){"use strict";Q.exports={eventDataKeys:["initial","delta","final"]}},{}],1104:[function(x,Q,K){"use strict";var p=x("../bar/cross_trace_calc").setGroupPositions;Q.exports=function(v,u){var y,e,n=v._fullLayout,t=v._fullData,a=v.calcdata,r=u.xaxis,f=u.yaxis,s=[],i=[],l=[];for(e=0;e<t.length;e++){var c=t[e];!0===c.visible&&c.xaxis===r._id&&c.yaxis===f._id&&"waterfall"===c.type&&(y=a[e],"h"===c.orientation?l.push(y):i.push(y),s.push(y))}var h={mode:n.waterfallmode,norm:n.waterfallnorm,gap:n.waterfallgap,groupgap:n.waterfallgroupgap};for(p(v,r,f,i,h),p(v,f,r,l,h),e=0;e<s.length;e++){y=s[e];for(var m=0;m<y.length;m++){var d=y[m];!1===d.isSum&&(d.s0+=0===m?0:y[m-1].s),m+1<y.length&&(y[m].nextP0=y[m+1].p0,y[m].nextS0=y[m+1].s0)}}}},{"../bar/cross_trace_calc":651}],1105:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("../bar/defaults").handleGroupingDefaults,u=x("../bar/defaults").handleText,y=x("../scatter/xy_defaults"),e=x("../scatter/period_defaults"),n=x("./attributes"),t=x("../../components/color"),a=x("../../constants/delta.js"),r=a.INCREASING.COLOR,f=a.DECREASING.COLOR;function s(i,l,c){i(l+".marker.color",c),i(l+".marker.line.color",t.defaultLine),i(l+".marker.line.width")}Q.exports={supplyDefaults:function(i,l,c,h){function m(o,b){return p.coerce(i,l,n,o,b)}if(y(i,l,h,m)){e(i,l,h,m),m("xhoverformat"),m("yhoverformat"),m("measure"),m("orientation",l.x&&!l.y?"h":"v"),m("base"),m("offset"),m("width"),m("text"),m("hovertext"),m("hovertemplate");var d=m("textposition");u(i,l,h,m,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==l.textposition&&(m("texttemplate"),l.texttemplate||m("textinfo")),s(m,"increasing",r),s(m,"decreasing",f),s(m,"totals","#4499FF"),m("connector.visible")&&(m("connector.mode"),m("connector.line.width")&&(m("connector.line.color"),m("connector.line.dash")))}else l.visible=!1},crossTraceDefaults:function(i,l){var c,h;function m(o){return p.coerce(h._input,h,n,o)}if("group"===l.waterfallmode)for(var d=0;d<i.length;d++)c=(h=i[d])._input,v(c,h,l,m)}}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":945,"../scatter/xy_defaults":952,"./attributes":1101}],1106:[function(x,Q,K){"use strict";Q.exports=function(p,v){return p.x="xVal"in v?v.xVal:v.x,p.y="yVal"in v?v.yVal:v.y,"initial"in v&&(p.initial=v.initial),"delta"in v&&(p.delta=v.delta),"final"in v&&(p.final=v.final),v.xa&&(p.xaxis=v.xa),v.ya&&(p.yaxis=v.ya),p}},{}],1107:[function(x,Q,K){"use strict";var p=x("../../plots/cartesian/axes").hoverLabelText,v=x("../../components/color").opacity,u=x("../bar/hover").hoverOnBars,y=x("../../constants/delta.js"),e=y.INCREASING.SYMBOL,n=y.DECREASING.SYMBOL;Q.exports=function(t,a,r,f,s){var S,C,z,B,i=u(t,a,r,f,s);if(i){var l=i.cd,c=l[0].trace,h="h"===c.orientation,m=h?"x":"y",d=h?t.xa:t.ya,o=l[i.index],b=o.isSum?o.b+o.s:o.rawS;if(!o.isSum){i.initial=o.b+o.s-b,i.delta=b,i.final=i.initial+i.delta;var g=k(Math.abs(i.delta));i.deltaLabel=b<0?"("+g+")":g,i.finalLabel=k(i.final),i.initialLabel=k(i.initial)}var w=o.hi||c.hoverinfo,_=[];if(w&&"none"!==w&&"skip"!==w){var A="all"===w,T=w.split("+"),E=function(O){return A||-1!==T.indexOf(O)};o.isSum||(!E("final")||E(h?"x":"y")||_.push(i.finalLabel),E("delta")&&_.push(b<0?i.deltaLabel+" "+n:i.deltaLabel+" "+e),E("initial")&&_.push("Initial: "+i.initialLabel))}return _.length&&(i.extraText=_.join("<br>")),i.color=(z=(S=c[o.dir].marker).line.color,B=S.line.width,v(C=S.color)?C:v(z)&&B?z:void 0),[i]}function k(O){return p(d,O,c[m+"hoverformat"])}}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1108:[function(x,Q,K){"use strict";Q.exports={attributes:x("./attributes"),layoutAttributes:x("./layout_attributes"),supplyDefaults:x("./defaults").supplyDefaults,crossTraceDefaults:x("./defaults").crossTraceDefaults,supplyLayoutDefaults:x("./layout_defaults"),calc:x("./calc"),crossTraceCalc:x("./cross_trace_calc"),plot:x("./plot"),style:x("./style").style,hoverPoints:x("./hover"),eventData:x("./event_data"),selectPoints:x("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:x("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1101,"./calc":1102,"./cross_trace_calc":1104,"./defaults":1105,"./event_data":1106,"./hover":1107,"./layout_attributes":1109,"./layout_defaults":1110,"./plot":1111,"./style":1112}],1109:[function(x,Q,K){"use strict";Q.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1110:[function(x,Q,K){"use strict";var p=x("../../lib"),v=x("./layout_attributes");Q.exports=function(u,y,e){var n=!1;function t(f,s){return p.coerce(u,y,v,f,s)}for(var a=0;a<e.length;a++){var r=e[a];if(r.visible&&"waterfall"===r.type){n=!0;break}}n&&(t("waterfallmode"),t("waterfallgap",.2),t("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1109}],1111:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../lib"),u=x("../../components/drawing"),y=x("../../constants/numerical").BADNUM,e=x("../bar/plot"),n=x("../bar/uniform_text").clearMinTextSize;Q.exports=function(t,a,r,f){var i,l,m,d,s=t._fullLayout;n("waterfall",s),e.plot(t,a,r,f,{mode:s.waterfallmode,norm:s.waterfallmode,gap:s.waterfallgap,groupgap:s.waterfallgroupgap}),i=t,m=(l=a).xaxis,d=l.yaxis,v.makeTraceGroups(f,r,"trace bars").each(function(o){var b=p.select(this),g=o[0].trace,w=v.ensureSingle(b,"g","lines");if(g.connector&&g.connector.visible){var _="h"===g.orientation,A=g.connector.mode,T=w.selectAll("g.line").data(v.identity);T.enter().append("g").classed("line",!0),T.exit().remove();var E=T.size();T.each(function(k,O){if(O===E-1||k.cNext){var D=(U=m,G=d,q=[],te=(X=_)?G:U,(Z=[])[0]=(W=X?U:G).c2p((B=k).s0,!0),q[0]=te.c2p(B.p0,!0),Z[1]=W.c2p(B.s1,!0),q[1]=te.c2p(B.p1,!0),Z[2]=W.c2p(B.nextS0,!0),q[2]=te.c2p(B.nextP0,!0),X?[Z,q]:[q,Z]),S=D[0],C=D[1],z="";S[0]!==y&&C[0]!==y&&S[1]!==y&&C[1]!==y&&("spanning"===A&&!k.isSum&&O>0&&(z+=_?"M"+S[0]+","+C[1]+"V"+C[0]:"M"+S[1]+","+C[0]+"H"+S[0]),"between"!==A&&(k.isSum||O<E-1)&&(z+=_?"M"+S[1]+","+C[0]+"V"+C[1]:"M"+S[0]+","+C[1]+"H"+S[1]),S[2]!==y&&C[2]!==y&&(z+=_?"M"+S[1]+","+C[1]+"V"+C[2]:"M"+S[1]+","+C[1]+"H"+S[2])),""===z&&(z="M0,0Z"),v.ensureSingle(p.select(this),"path").attr("d",z).call(u.setClipUrl,l.layerClipId,i)}var B,U,G,X,Z,q,W,te})}else w.remove()})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1112:[function(x,Q,K){"use strict";var p=x("@plotly/d3"),v=x("../../components/drawing"),u=x("../../components/color"),y=x("../../constants/interactions").DESELECTDIM,e=x("../bar/style"),n=x("../bar/uniform_text").resizeText,t=e.styleTextPoints;Q.exports={style:function(a,r,f){var s=f||p.select(a).selectAll("g.waterfalllayer").selectAll("g.trace");n(a,s,"waterfall"),s.style("opacity",function(i){return i[0].trace.opacity}),s.each(function(i){var l=p.select(this),c=i[0].trace;l.selectAll(".point > path").each(function(h){if(!h.isBlank){var m=c[h.dir].marker;p.select(this).call(u.fill,m.color).call(u.stroke,m.line.color).call(v.dashLine,m.line.dash,m.line.width).style("opacity",c.selectedpoints&&!h.selected?y:1)}}),t(l,c,a),l.selectAll(".lines").each(function(){var h=c.connector.line;v.lineGroupStyle(p.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1113:[function(x,Q,K){"use strict";var p=x("../plots/cartesian/axes"),v=x("../lib"),u=x("../plot_api/plot_schema"),y=x("./helpers").pointsAccessorFunction,e=x("../constants/numerical").BADNUM;K.moduleType="transform",K.name="aggregate";var n=K.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},t=n.aggregations;function a(i,l,c,h){if(h.enabled){for(var m=h.target,d=v.nestedProperty(l,m),o=d.get(),b=function(_,A){var E=A.d2c,k=A.c2d;switch(_.func){case"count":return r;case"first":return f;case"last":return s;case"sum":return function(O,D){for(var S=0,C=0;C<D.length;C++){var z=E(O[D[C]]);z!==e&&(S+=z)}return k(S)};case"avg":return function(O,D){for(var S=0,C=0,z=0;z<D.length;z++){var B=E(O[D[z]]);B!==e&&(S+=B,C++)}return C?k(S/C):e};case"min":return function(O,D){for(var S=1/0,C=0;C<D.length;C++){var z=E(O[D[C]]);z!==e&&(S=Math.min(S,z))}return S===1/0?e:k(S)};case"max":return function(O,D){for(var S=-1/0,C=0;C<D.length;C++){var z=E(O[D[C]]);z!==e&&(S=Math.max(S,z))}return S===-1/0?e:k(S)};case"range":return function(O,D){for(var S=1/0,C=-1/0,z=0;z<D.length;z++){var B=E(O[D[z]]);B!==e&&(S=Math.min(S,B),C=Math.max(C,B))}return C===-1/0||S===1/0?e:k(C-S)};case"change":return function(O,D){var S=E(O[D[0]]),C=E(O[D[D.length-1]]);return S===e||C===e?e:k(C-S)};case"median":return function(O,D){for(var S=[],C=0;C<D.length;C++){var z=E(O[D[C]]);z!==e&&S.push(z)}if(!S.length)return e;S.sort(v.sorterAsc);var B=(S.length-1)/2;return k((S[Math.floor(B)]+S[Math.ceil(B)])/2)};case"mode":return function(O,D){for(var S={},C=0,z=e,B=0;B<D.length;B++){var U=E(O[D[B]]);if(U!==e){var G=S[U]=(S[U]||0)+1;G>C&&(C=G,z=U)}}return C?k(z):e};case"rms":return function(O,D){for(var S=0,C=0,z=0;z<D.length;z++){var B=E(O[D[z]]);B!==e&&(S+=B*B,C++)}return C?k(Math.sqrt(S/C)):e};case"stddev":return function(O,D){var S,C=0,z=0,B=1,U=e;for(S=0;S<D.length&&U===e;S++)U=E(O[D[S]]);if(U===e)return e;for(;S<D.length;S++){var G=E(O[D[S]]);if(G!==e){var X=G-U;C+=X,z+=X*X,B++}}var Z="sample"===_.funcmode?B-1:B;return Z?Math.sqrt((z-C*C/B)/Z):0}}}(h,p.getDataConversions(i,l,m,o)),g=new Array(c.length),w=0;w<c.length;w++)g[w]=b(o,c[w]);d.set(g),"count"===h.func&&v.pushUnique(l._arrayAttrs,m)}}function r(i,l){return l.length}function f(i,l){return i[l[0]]}function s(i,l){return i[l[l.length-1]]}K.supplyDefaults=function(i,l){var c,h={};function m(k,O){return v.coerce(i,h,n,k,O)}if(!m("enabled"))return h;var d=u.findArrayAttributes(l),o={};for(c=0;c<d.length;c++)o[d[c]]=1;var b=m("groups");if(!Array.isArray(b)){if(!o[b])return h.enabled=!1,h;o[b]=0}var g,w=i.aggregations||[],_=h.aggregations=new Array(w.length);function A(k,O){return v.coerce(w[c],g,t,k,O)}for(c=0;c<w.length;c++){g={_index:c};var T=A("target"),E=A("func");A("enabled")&&T&&(o[T]||"count"===E&&void 0===o[T])?("stddev"===E&&A("funcmode"),o[T]=0,_[c]=g):_[c]={enabled:!1,_index:c}}for(c=0;c<d.length;c++)o[d[c]]&&_.push({target:d[c],func:t.func.dflt,enabled:!0,_index:-1});return h},K.calcTransform=function(i,l,c){if(c.enabled){var h=c.groups,m=v.getTargetArray(l,{target:h});if(m){var d,o,b,w={},_={},A=[],T=y(l.transforms,c),E=m.length;for(l._length&&(E=Math.min(E,l._length)),d=0;d<E;d++)void 0===(b=w[o=m[d]])?(w[o]=A.length,A.push([d]),_[w[o]]=T(d)):(A[b].push(d),_[w[o]]=(_[w[o]]||[]).concat(T(d)));c._indexToPoints=_;var k=c.aggregations;for(d=0;d<k.length;d++)a(i,l,A,k[d]);"string"==typeof h&&a(i,l,A,{target:h,func:"first",enabled:!0}),l._length=A.length}}}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1116}],1114:[function(x,Q,K){"use strict";var p=x("../lib"),v=x("../registry"),u=x("../plots/cartesian/axes"),y=x("./helpers").pointsAccessorFunction,e=x("../constants/filter_ops"),n=e.COMPARISON_OPS,t=e.INTERVAL_OPS,a=e.SET_OPS;K.moduleType="transform",K.name="filter",K.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(n).concat(t).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},K.supplyDefaults=function(r){var f={};function s(c,h){return p.coerce(r,f,K.attributes,c,h)}if(s("enabled")){var i=s("target");if(p.isArrayOrTypedArray(i)&&0===i.length)return f.enabled=!1,f;s("preservegaps"),s("operation"),s("value");var l=v.getComponentMethod("calendars","handleDefaults");l(r,f,"valuecalendar",null),l(r,f,"targetcalendar",null)}return f},K.calcTransform=function(r,f,s){if(s.enabled){var i=p.getTargetArray(f,s);if(i){var l=s.target,c=i.length;f._length&&(c=Math.min(c,f._length));var h=s.targetcalendar,m=f._arrayAttrs,d=s.preservegaps;if("string"==typeof l){var o=p.nestedProperty(f,l+"calendar").get();o&&(h=o)}var b,g,w=function(D,S,C){var z=D.operation,B=D.value,U=Array.isArray(B);function G(W){return-1!==W.indexOf(z)}var X,Z=function(W){return S(W,0,D.valuecalendar)},q=function(W){return S(W,0,C)};switch(G(n)?X=Z(U?B[0]:B):G(t)?X=U?[Z(B[0]),Z(B[1])]:[Z(B),Z(B)]:G(a)&&(X=U?B.map(Z):[Z(B)]),z){case"=":return function(W){return q(W)===X};case"!=":return function(W){return q(W)!==X};case"<":return function(W){return q(W)<X};case"<=":return function(W){return q(W)<=X};case">":return function(W){return q(W)>X};case">=":return function(W){return q(W)>=X};case"[]":return function(W){var te=q(W);return te>=X[0]&&te<=X[1]};case"()":return function(W){var te=q(W);return te>X[0]&&te<X[1]};case"[)":return function(W){var te=q(W);return te>=X[0]&&te<X[1]};case"(]":return function(W){var te=q(W);return te>X[0]&&te<=X[1]};case"][":return function(W){var te=q(W);return te<=X[0]||te>=X[1]};case")(":return function(W){var te=q(W);return te<X[0]||te>X[1]};case"](":return function(W){var te=q(W);return te<=X[0]||te>X[1]};case")[":return function(W){var te=q(W);return te<X[0]||te>=X[1]};case"{}":return function(W){return-1!==X.indexOf(q(W))};case"}{":return function(W){return-1===X.indexOf(q(W))}}}(s,u.getDataToCoordFunc(r,f,l,i),h),_={},A={},T=0;d?(b=function(D){_[D.astr]=p.extendDeep([],D.get()),D.set(new Array(c))},g=function(D,S){var C=_[D.astr][S];D.get()[S]=C}):(b=function(D){_[D.astr]=p.extendDeep([],D.get()),D.set([])},g=function(D,S){var C=_[D.astr][S];D.get().push(C)}),O(b);for(var E=y(f.transforms,s),k=0;k<c;k++)w(i[k])?(O(g,k),A[T++]=E(k)):d&&T++;s._indexToPoints=A,f._length=T}}function O(D,S){for(var C=0;C<m.length;C++)D(p.nestedProperty(f,m[C]),S)}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1116}],1115:[function(x,Q,K){"use strict";var p=x("../lib"),v=x("../plot_api/plot_schema"),u=x("../plots/plots"),y=x("./helpers").pointsAccessorFunction;function e(n,t){var a,r,f,s,i,l,c,h,m,d,o=t.transform,b=t.transformIndex,g=n.transforms[b].groups,w=y(n.transforms,o);if(!p.isArrayOrTypedArray(g)||0===g.length)return[n];var _=p.filterUnique(g),A=new Array(_.length),T=g.length,E=v.findArrayAttributes(n),k=o.styles||[],O={};for(a=0;a<k.length;a++)O[k[a].target]=k[a].value;o.styles&&(d=p.keyedContainer(o,"styles","target","value.name"));var D={},S={};for(a=0;a<_.length;a++){D[l=_[a]]=a,S[l]=0,(c=A[a]=p.extendDeepNoArrays({},n))._group=l,c.transforms[b]._indexToPoints={};var C=null;for(d&&(C=d.get(l)),c.name=C||""===C?C:p.templateString(o.nameformat,{trace:n.name,group:l}),h=c.transforms,c.transforms=[],r=0;r<h.length;r++)c.transforms[r]=p.extendDeepNoArrays({},h[r]);for(r=0;r<E.length;r++)p.nestedProperty(c,E[r]).set([])}for(f=0;f<E.length;f++){for(s=E[f],r=0,m=[];r<_.length;r++)m[r]=p.nestedProperty(A[r],s).get();for(i=p.nestedProperty(n,s).get(),r=0;r<T;r++)m[D[g[r]]].push(i[r])}for(r=0;r<T;r++)(c=A[D[g[r]]]).transforms[b]._indexToPoints[S[g[r]]]=w(r),S[g[r]]++;for(a=0;a<_.length;a++)l=_[a],u.clearExpandedTraceDefaultColors(c=A[a]),c=p.extendDeepNoArrays(c,O[l]||{});return A}K.moduleType="transform",K.name="groupby",K.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},K.supplyDefaults=function(n,t,a){var r,f={};function s(m,d){return p.coerce(n,f,K.attributes,m,d)}if(!s("enabled"))return f;s("groups"),s("nameformat",a._dataLength>1?"%{group} (%{trace})":"%{group}");var i=n.styles,l=f.styles=[];if(i)for(r=0;r<i.length;r++){var c=l[r]={};p.coerce(i[r],l[r],K.attributes.styles,"target");var h=p.coerce(i[r],l[r],K.attributes.styles,"value");p.isPlainObject(h)?c.value=p.extendDeep({},h):h&&delete c.value}return f},K.transform=function(n,t){var a,r,f,s=[];for(r=0;r<n.length;r++)for(a=e(n[r],t),f=0;f<a.length;f++)s.push(a[f]);return s}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1116}],1116:[function(x,Q,K){"use strict";K.pointsAccessorFunction=function(p,v){for(var u,y,e=0;e<p.length&&(u=p[e])!==v;e++)u._indexToPoints&&!1!==u.enabled&&(y=u._indexToPoints);return y?function(n){return y[n]}:function(n){return[n]}}},{}],1117:[function(x,Q,K){"use strict";var p=x("../lib"),v=x("../plots/cartesian/axes"),u=x("./helpers").pointsAccessorFunction,y=x("../constants/numerical").BADNUM;K.moduleType="transform",K.name="sort",K.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},K.supplyDefaults=function(e){var n={};function t(a,r){return p.coerce(e,n,K.attributes,a,r)}return t("enabled")&&(t("target"),t("order")),n},K.calcTransform=function(e,n,t){if(t.enabled){var a=p.getTargetArray(n,t);if(a){var r=t.target,f=a.length;n._length&&(f=Math.min(f,n._length));var s,i,l=n._arrayAttrs,c=function(g,w,_,A){var T,E=new Array(A),k=new Array(A);for(T=0;T<A;T++)E[T]={v:w[T],i:T};for(E.sort(function(O,D){switch(O.order){case"ascending":return function(S,C){var z=D(S.v),B=D(C.v);return z===y?1:B===y?-1:z-B};case"descending":return function(S,C){var z=D(S.v),B=D(C.v);return z===y?1:B===y?-1:B-z}}}(g,_)),T=0;T<A;T++)k[T]=E[T].i;return k}(t,a,v.getDataToCoordFunc(e,n,r,a),f),h=u(n.transforms,t),m={};for(s=0;s<l.length;s++){var d=p.nestedProperty(n,l[s]),o=d.get(),b=new Array(f);for(i=0;i<f;i++)b[i]=o[c[i]];d.set(b)}for(i=0;i<f;i++)m[i]=h(c[i]);t._indexToPoints=m,n._length=f}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1116}],1118:[function(x,Q,K){"use strict";K.version="2.6.0"},{}],1119:[function(x,Q,K){(function(p){(function(){!function(v){"object"==typeof K&&void 0!==Q?Q.exports=v():("undefined"!=typeof window?window:void 0!==p?p:"undefined"!=typeof self?self:this).stackgl=v()}(function(){return function v(u,y,e){function n(r,f){if(!y[r]){if(!u[r]){var s="function"==typeof x&&x;if(!f&&s)return s(r,!0);if(t)return t(r,!0);var i=new Error("Cannot find module '"+r+"'");throw i.code="MODULE_NOT_FOUND",i}var l=y[r]={exports:{}};u[r][0].call(l.exports,function(c){return n(u[r][1][c]||c)},l,l.exports,v,u,y,e)}return y[r].exports}for(var t="function"==typeof x&&x,a=0;a<e.length;a++)n(e[a]);return n}({1:[function(v,u,y){"use strict";y.byteLength=function(l){var c=s(l),m=c[1];return 3*(c[0]+m)/4-m},y.toByteArray=function(l){var c,h,T,m=s(l),d=m[0],o=m[1],b=new t(3*(d+(T=o))/4-T),g=0,w=o>0?d-4:d;for(h=0;h<w;h+=4)c=n[l.charCodeAt(h)]<<18|n[l.charCodeAt(h+1)]<<12|n[l.charCodeAt(h+2)]<<6|n[l.charCodeAt(h+3)],b[g++]=c>>16&255,b[g++]=c>>8&255,b[g++]=255&c;return 2===o&&(c=n[l.charCodeAt(h)]<<2|n[l.charCodeAt(h+1)]>>4,b[g++]=255&c),1===o&&(c=n[l.charCodeAt(h)]<<10|n[l.charCodeAt(h+1)]<<4|n[l.charCodeAt(h+2)]>>2,b[g++]=c>>8&255,b[g++]=255&c),b},y.fromByteArray=function(l){for(var c,h=l.length,m=h%3,d=[],o=0,b=h-m;o<b;o+=16383)d.push(i(l,o,o+16383>b?b:o+16383));return 1===m?d.push(e[(c=l[h-1])>>2]+e[c<<4&63]+"=="):2===m&&d.push(e[(c=(l[h-2]<<8)+l[h-1])>>10]+e[c>>4&63]+e[c<<2&63]+"="),d.join("")};for(var e=[],n=[],t="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,f=a.length;r<f;++r)e[r]=a[r],n[a.charCodeAt(r)]=r;function s(l){var c=l.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=l.indexOf("=");return-1===h&&(h=c),[h,h===c?0:4-h%4]}function i(l,c,h){for(var d,o=[],b=c;b<h;b+=3)o.push(e[(d=(l[b]<<16&16711680)+(l[b+1]<<8&65280)+(255&l[b+2]))>>18&63]+e[d>>12&63]+e[d>>6&63]+e[63&d]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],2:[function(v,u,y){},{}],3:[function(v,u,y){(function(e){(function(){"use strict";var n=v("base64-js"),t=v("ieee754");function a(j){if(j>2147483647)throw new RangeError('The value "'+j+'" is invalid for option "size"');var J=new Uint8Array(j);return J.__proto__=r.prototype,J}function r(j,J,$){if("number"==typeof j){if("string"==typeof J)throw new TypeError('The "string" argument must be of type string. Received type number');return i(j)}return f(j,J,$)}function f(j,J,$){if("string"==typeof j)return function(se,ie){if("string"==typeof ie&&""!==ie||(ie="utf8"),!r.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);var ue=0|h(se,ie),le=a(ue),de=le.write(se,ie);return de!==ue&&(le=le.slice(0,de)),le}(j,J);if(ArrayBuffer.isView(j))return l(j);if(null==j)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(V(j,ArrayBuffer)||j&&V(j.buffer,ArrayBuffer))return function(se,ie,ue){if(ie<0||se.byteLength<ie)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<ie+(ue||0))throw new RangeError('"length" is outside of buffer bounds');var le;return(le=void 0===ie&&void 0===ue?new Uint8Array(se):void 0===ue?new Uint8Array(se,ie):new Uint8Array(se,ie,ue)).__proto__=r.prototype,le}(j,J,$);if("number"==typeof j)throw new TypeError('The "value" argument must not be of type number. Received type number');var re=j.valueOf&&j.valueOf();if(null!=re&&re!==j)return r.from(re,J,$);var ne=function(se){if(r.isBuffer(se)){var ie=0|c(se.length),ue=a(ie);return 0===ue.length||se.copy(ue,0,0,ie),ue}return void 0!==se.length?"number"!=typeof se.length||ee(se.length)?a(0):l(se):"Buffer"===se.type&&Array.isArray(se.data)?l(se.data):void 0}(j);if(ne)return ne;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof j[Symbol.toPrimitive])return r.from(j[Symbol.toPrimitive]("string"),J,$);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}function s(j){if("number"!=typeof j)throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function i(j){return s(j),a(j<0?0:0|c(j))}function l(j){for(var J=j.length<0?0:0|c(j.length),$=a(J),re=0;re<J;re+=1)$[re]=255&j[re];return $}function c(j){if(j>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|j}function h(j,J){if(r.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||V(j,ArrayBuffer))return j.byteLength;if("string"!=typeof j)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var $=j.length,re=arguments.length>2&&!0===arguments[2];if(!re&&0===$)return 0;for(var ne=!1;;)switch(J){case"ascii":case"latin1":case"binary":return $;case"utf8":case"utf-8":return te(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*$;case"hex":return $>>>1;case"base64":return R(j).length;default:if(ne)return re?-1:te(j).length;J=(""+J).toLowerCase(),ne=!0}}function m(j,J,$){var re=!1;if((void 0===J||J<0)&&(J=0),J>this.length||((void 0===$||$>this.length)&&($=this.length),$<=0)||($>>>=0)<=(J>>>=0))return"";for(j||(j="utf8");;)switch(j){case"hex":return C(this,J,$);case"utf8":case"utf-8":return O(this,J,$);case"ascii":return D(this,J,$);case"latin1":case"binary":return S(this,J,$);case"base64":return k(this,J,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,J,$);default:if(re)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),re=!0}}function d(j,J,$){var re=j[J];j[J]=j[$],j[$]=re}function o(j,J,$,re,ne){if(0===j.length)return-1;if("string"==typeof $?(re=$,$=0):$>2147483647?$=2147483647:$<-2147483648&&($=-2147483648),ee($=+$)&&($=ne?0:j.length-1),$<0&&($=j.length+$),$>=j.length){if(ne)return-1;$=j.length-1}else if($<0){if(!ne)return-1;$=0}if("string"==typeof J&&(J=r.from(J,re)),r.isBuffer(J))return 0===J.length?-1:b(j,J,$,re,ne);if("number"==typeof J)return J&=255,"function"==typeof Uint8Array.prototype.indexOf?ne?Uint8Array.prototype.indexOf.call(j,J,$):Uint8Array.prototype.lastIndexOf.call(j,J,$):b(j,[J],$,re,ne);throw new TypeError("val must be string, number or Buffer")}function b(j,J,$,re,ne){var se,ie=1,ue=j.length,le=J.length;if(void 0!==re&&("ucs2"===(re=String(re).toLowerCase())||"ucs-2"===re||"utf16le"===re||"utf-16le"===re)){if(j.length<2||J.length<2)return-1;ie=2,ue/=2,le/=2,$/=2}function de(Te,he){return 1===ie?Te[he]:Te.readUInt16BE(he*ie)}if(ne){var ve=-1;for(se=$;se<ue;se++)if(de(j,se)===de(J,-1===ve?0:se-ve)){if(-1===ve&&(ve=se),se-ve+1===le)return ve*ie}else-1!==ve&&(se-=se-ve),ve=-1}else for($+le>ue&&($=ue-le),se=$;se>=0;se--){for(var _e=!0,be=0;be<le;be++)if(de(j,se+be)!==de(J,be)){_e=!1;break}if(_e)return se}return-1}function g(j,J,$,re){$=Number($)||0;var ne=j.length-$;re?(re=Number(re))>ne&&(re=ne):re=ne;var se=J.length;re>se/2&&(re=se/2);for(var ie=0;ie<re;++ie){var ue=parseInt(J.substr(2*ie,2),16);if(ee(ue))return ie;j[$+ie]=ue}return ie}function w(j,J,$,re){return N(te(J,j.length-$),j,$,re)}function _(j,J,$,re){return N(function(ne){for(var se=[],ie=0;ie<ne.length;++ie)se.push(255&ne.charCodeAt(ie));return se}(J),j,$,re)}function A(j,J,$,re){return _(j,J,$,re)}function T(j,J,$,re){return N(R(J),j,$,re)}function E(j,J,$,re){return N(function(ne,se){for(var ie,ue,de=[],ve=0;ve<ne.length&&!((se-=2)<0);++ve)ue=(ie=ne.charCodeAt(ve))>>8,de.push(ie%256),de.push(ue);return de}(J,j.length-$),j,$,re)}function k(j,J,$){return n.fromByteArray(0===J&&$===j.length?j:j.slice(J,$))}function O(j,J,$){$=Math.min(j.length,$);for(var re=[],ne=J;ne<$;){var se,ie,ue,le,de=j[ne],ve=null,_e=de>239?4:de>223?3:de>191?2:1;if(ne+_e<=$)switch(_e){case 1:de<128&&(ve=de);break;case 2:128==(192&(se=j[ne+1]))&&(le=(31&de)<<6|63&se)>127&&(ve=le);break;case 3:ie=j[ne+2],128==(192&(se=j[ne+1]))&&128==(192&ie)&&(le=(15&de)<<12|(63&se)<<6|63&ie)>2047&&(le<55296||le>57343)&&(ve=le);break;case 4:ie=j[ne+2],ue=j[ne+3],128==(192&(se=j[ne+1]))&&128==(192&ie)&&128==(192&ue)&&(le=(15&de)<<18|(63&se)<<12|(63&ie)<<6|63&ue)>65535&&le<1114112&&(ve=le)}null===ve?(ve=65533,_e=1):ve>65535&&(re.push((ve-=65536)>>>10&1023|55296),ve=56320|1023&ve),re.push(ve),ne+=_e}return function(be){var Te=be.length;if(Te<=4096)return String.fromCharCode.apply(String,be);for(var he="",me=0;me<Te;)he+=String.fromCharCode.apply(String,be.slice(me,me+=4096));return he}(re)}function D(j,J,$){var re="";$=Math.min(j.length,$);for(var ne=J;ne<$;++ne)re+=String.fromCharCode(127&j[ne]);return re}function S(j,J,$){var re="";$=Math.min(j.length,$);for(var ne=J;ne<$;++ne)re+=String.fromCharCode(j[ne]);return re}function C(j,J,$){var re=j.length;(!J||J<0)&&(J=0),(!$||$<0||$>re)&&($=re);for(var ne="",se=J;se<$;++se)ne+=W(j[se]);return ne}function z(j,J,$){for(var re=j.slice(J,$),ne="",se=0;se<re.length;se+=2)ne+=String.fromCharCode(re[se]+256*re[se+1]);return ne}function B(j,J,$){if(j%1!=0||j<0)throw new RangeError("offset is not uint");if(j+J>$)throw new RangeError("Trying to access beyond buffer length")}function U(j,J,$,re,ne,se){if(!r.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>ne||J<se)throw new RangeError('"value" argument is out of bounds');if($+re>j.length)throw new RangeError("Index out of range")}function G(j,J,$,re,ne,se){if($+re>j.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("Index out of range")}function X(j,J,$,re,ne){return J=+J,$>>>=0,ne||G(j,0,$,4),t.write(j,J,$,re,23,4),$+4}function Z(j,J,$,re,ne){return J=+J,$>>>=0,ne||G(j,0,$,8),t.write(j,J,$,re,52,8),$+8}y.Buffer=r,y.SlowBuffer=function(j){return+j!=j&&(j=0),r.alloc(+j)},y.INSPECT_MAX_BYTES=50,y.kMaxLength=2147483647,(r.TYPED_ARRAY_SUPPORT=function(){try{var j=new Uint8Array(1);return j.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===j.foo()}catch(J){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(j,J,$){return f(j,J,$)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(j,J,$){return ne=J,se=$,s(re=j),re<=0?a(re):void 0!==ne?"string"==typeof se?a(re).fill(ne,se):a(re).fill(ne):a(re);var re,ne,se},r.allocUnsafe=function(j){return i(j)},r.allocUnsafeSlow=function(j){return i(j)},r.isBuffer=function(j){return null!=j&&!0===j._isBuffer&&j!==r.prototype},r.compare=function(j,J){if(V(j,Uint8Array)&&(j=r.from(j,j.offset,j.byteLength)),V(J,Uint8Array)&&(J=r.from(J,J.offset,J.byteLength)),!r.isBuffer(j)||!r.isBuffer(J))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===J)return 0;for(var $=j.length,re=J.length,ne=0,se=Math.min($,re);ne<se;++ne)if(j[ne]!==J[ne]){$=j[ne],re=J[ne];break}return $<re?-1:re<$?1:0},r.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(j,J){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(0===j.length)return r.alloc(0);var $;if(void 0===J)for(J=0,$=0;$<j.length;++$)J+=j[$].length;var re=r.allocUnsafe(J),ne=0;for($=0;$<j.length;++$){var se=j[$];if(V(se,Uint8Array)&&(se=r.from(se)),!r.isBuffer(se))throw new TypeError('"list" argument must be an Array of Buffers');se.copy(re,ne),ne+=se.length}return re},r.byteLength=h,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var j=this.length;if(j%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var J=0;J<j;J+=2)d(this,J,J+1);return this},r.prototype.swap32=function(){var j=this.length;if(j%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var J=0;J<j;J+=4)d(this,J,J+3),d(this,J+1,J+2);return this},r.prototype.swap64=function(){var j=this.length;if(j%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var J=0;J<j;J+=8)d(this,J,J+7),d(this,J+1,J+6),d(this,J+2,J+5),d(this,J+3,J+4);return this},r.prototype.toLocaleString=r.prototype.toString=function(){var j=this.length;return 0===j?"":0===arguments.length?O(this,0,j):m.apply(this,arguments)},r.prototype.equals=function(j){if(!r.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j||0===r.compare(this,j)},r.prototype.inspect=function(){var j="",J=y.INSPECT_MAX_BYTES;return j=this.toString("hex",0,J).replace(/(.{2})/g,"$1 ").trim(),this.length>J&&(j+=" ... "),"<Buffer "+j+">"},r.prototype.compare=function(j,J,$,re,ne){if(V(j,Uint8Array)&&(j=r.from(j,j.offset,j.byteLength)),!r.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(void 0===J&&(J=0),void 0===$&&($=j?j.length:0),void 0===re&&(re=0),void 0===ne&&(ne=this.length),J<0||$>j.length||re<0||ne>this.length)throw new RangeError("out of range index");if(re>=ne&&J>=$)return 0;if(re>=ne)return-1;if(J>=$)return 1;if(this===j)return 0;for(var se=(ne>>>=0)-(re>>>=0),ie=($>>>=0)-(J>>>=0),ue=Math.min(se,ie),le=this.slice(re,ne),de=j.slice(J,$),ve=0;ve<ue;++ve)if(le[ve]!==de[ve]){se=le[ve],ie=de[ve];break}return se<ie?-1:ie<se?1:0},r.prototype.includes=function(j,J,$){return-1!==this.indexOf(j,J,$)},r.prototype.indexOf=function(j,J,$){return o(this,j,J,$,!0)},r.prototype.lastIndexOf=function(j,J,$){return o(this,j,J,$,!1)},r.prototype.write=function(j,J,$,re){if(void 0===J)re="utf8",$=this.length,J=0;else if(void 0===$&&"string"==typeof J)re=J,$=this.length,J=0;else{if(!isFinite(J))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");J>>>=0,isFinite($)?($>>>=0,void 0===re&&(re="utf8")):(re=$,$=void 0)}var ne=this.length-J;if((void 0===$||$>ne)&&($=ne),j.length>0&&($<0||J<0)||J>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");for(var se=!1;;)switch(re){case"hex":return g(this,j,J,$);case"utf8":case"utf-8":return w(this,j,J,$);case"ascii":return _(this,j,J,$);case"latin1":case"binary":return A(this,j,J,$);case"base64":return T(this,j,J,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,j,J,$);default:if(se)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),se=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(j,J){var $=this.length;(j=~~j)<0?(j+=$)<0&&(j=0):j>$&&(j=$),(J=void 0===J?$:~~J)<0?(J+=$)<0&&(J=0):J>$&&(J=$),J<j&&(J=j);var re=this.subarray(j,J);return re.__proto__=r.prototype,re},r.prototype.readUIntLE=function(j,J,$){j>>>=0,J>>>=0,$||B(j,J,this.length);for(var re=this[j],ne=1,se=0;++se<J&&(ne*=256);)re+=this[j+se]*ne;return re},r.prototype.readUIntBE=function(j,J,$){j>>>=0,J>>>=0,$||B(j,J,this.length);for(var re=this[j+--J],ne=1;J>0&&(ne*=256);)re+=this[j+--J]*ne;return re},r.prototype.readUInt8=function(j,J){return j>>>=0,J||B(j,1,this.length),this[j]},r.prototype.readUInt16LE=function(j,J){return j>>>=0,J||B(j,2,this.length),this[j]|this[j+1]<<8},r.prototype.readUInt16BE=function(j,J){return j>>>=0,J||B(j,2,this.length),this[j]<<8|this[j+1]},r.prototype.readUInt32LE=function(j,J){return j>>>=0,J||B(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+16777216*this[j+3]},r.prototype.readUInt32BE=function(j,J){return j>>>=0,J||B(j,4,this.length),16777216*this[j]+(this[j+1]<<16|this[j+2]<<8|this[j+3])},r.prototype.readIntLE=function(j,J,$){j>>>=0,J>>>=0,$||B(j,J,this.length);for(var re=this[j],ne=1,se=0;++se<J&&(ne*=256);)re+=this[j+se]*ne;return re>=(ne*=128)&&(re-=Math.pow(2,8*J)),re},r.prototype.readIntBE=function(j,J,$){j>>>=0,J>>>=0,$||B(j,J,this.length);for(var re=J,ne=1,se=this[j+--re];re>0&&(ne*=256);)se+=this[j+--re]*ne;return se>=(ne*=128)&&(se-=Math.pow(2,8*J)),se},r.prototype.readInt8=function(j,J){return j>>>=0,J||B(j,1,this.length),128&this[j]?-1*(255-this[j]+1):this[j]},r.prototype.readInt16LE=function(j,J){j>>>=0,J||B(j,2,this.length);var $=this[j]|this[j+1]<<8;return 32768&$?4294901760|$:$},r.prototype.readInt16BE=function(j,J){j>>>=0,J||B(j,2,this.length);var $=this[j+1]|this[j]<<8;return 32768&$?4294901760|$:$},r.prototype.readInt32LE=function(j,J){return j>>>=0,J||B(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},r.prototype.readInt32BE=function(j,J){return j>>>=0,J||B(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},r.prototype.readFloatLE=function(j,J){return j>>>=0,J||B(j,4,this.length),t.read(this,j,!0,23,4)},r.prototype.readFloatBE=function(j,J){return j>>>=0,J||B(j,4,this.length),t.read(this,j,!1,23,4)},r.prototype.readDoubleLE=function(j,J){return j>>>=0,J||B(j,8,this.length),t.read(this,j,!0,52,8)},r.prototype.readDoubleBE=function(j,J){return j>>>=0,J||B(j,8,this.length),t.read(this,j,!1,52,8)},r.prototype.writeUIntLE=function(j,J,$,re){j=+j,J>>>=0,$>>>=0,re||U(this,j,J,$,Math.pow(2,8*$)-1,0);var ne=1,se=0;for(this[J]=255&j;++se<$&&(ne*=256);)this[J+se]=j/ne&255;return J+$},r.prototype.writeUIntBE=function(j,J,$,re){j=+j,J>>>=0,$>>>=0,re||U(this,j,J,$,Math.pow(2,8*$)-1,0);var ne=$-1,se=1;for(this[J+ne]=255&j;--ne>=0&&(se*=256);)this[J+ne]=j/se&255;return J+$},r.prototype.writeUInt8=function(j,J,$){return j=+j,J>>>=0,$||U(this,j,J,1,255,0),this[J]=255&j,J+1},r.prototype.writeUInt16LE=function(j,J,$){return j=+j,J>>>=0,$||U(this,j,J,2,65535,0),this[J]=255&j,this[J+1]=j>>>8,J+2},r.prototype.writeUInt16BE=function(j,J,$){return j=+j,J>>>=0,$||U(this,j,J,2,65535,0),this[J]=j>>>8,this[J+1]=255&j,J+2},r.prototype.writeUInt32LE=function(j,J,$){return j=+j,J>>>=0,$||U(this,j,J,4,4294967295,0),this[J+3]=j>>>24,this[J+2]=j>>>16,this[J+1]=j>>>8,this[J]=255&j,J+4},r.prototype.writeUInt32BE=function(j,J,$){return j=+j,J>>>=0,$||U(this,j,J,4,4294967295,0),this[J]=j>>>24,this[J+1]=j>>>16,this[J+2]=j>>>8,this[J+3]=255&j,J+4},r.prototype.writeIntLE=function(j,J,$,re){if(j=+j,J>>>=0,!re){var ne=Math.pow(2,8*$-1);U(this,j,J,$,ne-1,-ne)}var se=0,ie=1,ue=0;for(this[J]=255&j;++se<$&&(ie*=256);)j<0&&0===ue&&0!==this[J+se-1]&&(ue=1),this[J+se]=(j/ie>>0)-ue&255;return J+$},r.prototype.writeIntBE=function(j,J,$,re){if(j=+j,J>>>=0,!re){var ne=Math.pow(2,8*$-1);U(this,j,J,$,ne-1,-ne)}var se=$-1,ie=1,ue=0;for(this[J+se]=255&j;--se>=0&&(ie*=256);)j<0&&0===ue&&0!==this[J+se+1]&&(ue=1),this[J+se]=(j/ie>>0)-ue&255;return J+$},r.prototype.writeInt8=function(j,J,$){return j=+j,J>>>=0,$||U(this,j,J,1,127,-128),j<0&&(j=255+j+1),this[J]=255&j,J+1},r.prototype.writeInt16LE=function(j,J,$){return j=+j,J>>>=0,$||U(this,j,J,2,32767,-32768),this[J]=255&j,this[J+1]=j>>>8,J+2},r.prototype.writeInt16BE=function(j,J,$){return j=+j,J>>>=0,$||U(this,j,J,2,32767,-32768),this[J]=j>>>8,this[J+1]=255&j,J+2},r.prototype.writeInt32LE=function(j,J,$){return j=+j,J>>>=0,$||U(this,j,J,4,2147483647,-2147483648),this[J]=255&j,this[J+1]=j>>>8,this[J+2]=j>>>16,this[J+3]=j>>>24,J+4},r.prototype.writeInt32BE=function(j,J,$){return j=+j,J>>>=0,$||U(this,j,J,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[J]=j>>>24,this[J+1]=j>>>16,this[J+2]=j>>>8,this[J+3]=255&j,J+4},r.prototype.writeFloatLE=function(j,J,$){return X(this,j,J,!0,$)},r.prototype.writeFloatBE=function(j,J,$){return X(this,j,J,!1,$)},r.prototype.writeDoubleLE=function(j,J,$){return Z(this,j,J,!0,$)},r.prototype.writeDoubleBE=function(j,J,$){return Z(this,j,J,!1,$)},r.prototype.copy=function(j,J,$,re){if(!r.isBuffer(j))throw new TypeError("argument should be a Buffer");if($||($=0),re||0===re||(re=this.length),J>=j.length&&(J=j.length),J||(J=0),re>0&&re<$&&(re=$),re===$||0===j.length||0===this.length)return 0;if(J<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),j.length-J<re-$&&(re=j.length-J+$);var ne=re-$;if(this===j&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(J,$,re);else if(this===j&&$<J&&J<re)for(var se=ne-1;se>=0;--se)j[se+J]=this[se+$];else Uint8Array.prototype.set.call(j,this.subarray($,re),J);return ne},r.prototype.fill=function(j,J,$,re){if("string"==typeof j){if("string"==typeof J?(re=J,J=0,$=this.length):"string"==typeof $&&(re=$,$=this.length),void 0!==re&&"string"!=typeof re)throw new TypeError("encoding must be a string");if("string"==typeof re&&!r.isEncoding(re))throw new TypeError("Unknown encoding: "+re);if(1===j.length){var ne=j.charCodeAt(0);("utf8"===re&&ne<128||"latin1"===re)&&(j=ne)}}else"number"==typeof j&&(j&=255);if(J<0||this.length<J||this.length<$)throw new RangeError("Out of range index");if($<=J)return this;var se;if(J>>>=0,$=void 0===$?this.length:$>>>0,j||(j=0),"number"==typeof j)for(se=J;se<$;++se)this[se]=j;else{var ie=r.isBuffer(j)?j:r.from(j,re),ue=ie.length;if(0===ue)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(se=0;se<$-J;++se)this[se+J]=ie[se%ue]}return this};var q=/[^+/0-9A-Za-z-_]/g;function W(j){return j<16?"0"+j.toString(16):j.toString(16)}function te(j,J){var $;J=J||1/0;for(var re=j.length,ne=null,se=[],ie=0;ie<re;++ie){if(($=j.charCodeAt(ie))>55295&&$<57344){if(!ne){if($>56319){(J-=3)>-1&&se.push(239,191,189);continue}if(ie+1===re){(J-=3)>-1&&se.push(239,191,189);continue}ne=$;continue}if($<56320){(J-=3)>-1&&se.push(239,191,189),ne=$;continue}$=65536+(ne-55296<<10|$-56320)}else ne&&(J-=3)>-1&&se.push(239,191,189);if(ne=null,$<128){if((J-=1)<0)break;se.push($)}else if($<2048){if((J-=2)<0)break;se.push($>>6|192,63&$|128)}else if($<65536){if((J-=3)<0)break;se.push($>>12|224,$>>6&63|128,63&$|128)}else{if(!($<1114112))throw new Error("Invalid code point");if((J-=4)<0)break;se.push($>>18|240,$>>12&63|128,$>>6&63|128,63&$|128)}}return se}function R(j){return n.toByteArray(function(J){if((J=(J=J.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;J.length%4!=0;)J+="=";return J}(j))}function N(j,J,$,re){for(var ne=0;ne<re&&!(ne+$>=J.length||ne>=j.length);++ne)J[ne+$]=j[ne];return ne}function V(j,J){return j instanceof J||null!=j&&null!=j.constructor&&null!=j.constructor.name&&j.constructor.name===J.name}function ee(j){return j!=j}}).call(this)}).call(this,v("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(v,u,y){y.read=function(e,n,t,a,r){var f,s,i=8*r-a-1,l=(1<<i)-1,c=l>>1,h=-7,m=t?r-1:0,d=t?-1:1,o=e[n+m];for(m+=d,f=o&(1<<-h)-1,o>>=-h,h+=i;h>0;f=256*f+e[n+m],m+=d,h-=8);for(s=f&(1<<-h)-1,f>>=-h,h+=a;h>0;s=256*s+e[n+m],m+=d,h-=8);if(0===f)f=1-c;else{if(f===l)return s?NaN:1/0*(o?-1:1);s+=Math.pow(2,a),f-=c}return(o?-1:1)*s*Math.pow(2,f-a)},y.write=function(e,n,t,a,r,f){var s,i,l,c=8*f-r-1,h=(1<<c)-1,m=h>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,o=a?0:f-1,b=a?1:-1,g=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(i=isNaN(n)?1:0,s=h):(s=Math.floor(Math.log(n)/Math.LN2),n*(l=Math.pow(2,-s))<1&&(s--,l*=2),(n+=s+m>=1?d/l:d*Math.pow(2,1-m))*l>=2&&(s++,l/=2),s+m>=h?(i=0,s=h):s+m>=1?(i=(n*l-1)*Math.pow(2,r),s+=m):(i=n*Math.pow(2,m-1)*Math.pow(2,r),s=0));r>=8;e[t+o]=255&i,o+=b,i/=256,r-=8);for(s=s<<r|i,c+=r;c>0;e[t+o]=255&s,o+=b,s/=256,c-=8);e[t+o-b]|=128*g}},{}],5:[function(v,u,y){var e,n,t=u.exports={};function a(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function f(b){if(e===setTimeout)return setTimeout(b,0);if((e===a||!e)&&setTimeout)return e=setTimeout,setTimeout(b,0);try{return e(b,0)}catch(g){try{return e.call(null,b,0)}catch(w){return e.call(this,b,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:a}catch(b){e=a}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(b){n=r}}();var s,i=[],l=!1,c=-1;function h(){l&&s&&(l=!1,s.length?i=s.concat(i):c=-1,i.length&&m())}function m(){if(!l){var b=f(h);l=!0;for(var g=i.length;g;){for(s=i,i=[];++c<g;)s&&s[c].run();c=-1,g=i.length}s=null,l=!1,function(w){if(n===clearTimeout)return clearTimeout(w);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(w);try{n(w)}catch(_){try{return n.call(null,w)}catch(A){return n.call(this,w)}}}(b)}}function d(b,g){this.fun=b,this.array=g}function o(){}t.nextTick=function(b){var g=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)g[w-1]=arguments[w];i.push(new d(b,g)),1!==i.length||l||f(m)},d.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=o,t.addListener=o,t.once=o,t.off=o,t.removeListener=o,t.removeAllListeners=o,t.emit=o,t.prependListener=o,t.prependOnceListener=o,t.listeners=function(b){return[]},t.binding=function(b){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(b){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],6:[function(v,u,y){u.exports={alpha_shape:v("alpha-shape"),convex_hull:v("convex-hull"),delaunay_triangulate:v("delaunay-triangulate"),gl_cone3d:v("gl-cone3d"),gl_error3d:v("gl-error3d"),gl_heatmap2d:v("gl-heatmap2d"),gl_line3d:v("gl-line3d"),gl_mesh3d:v("gl-mesh3d"),gl_plot2d:v("gl-plot2d"),gl_plot3d:v("gl-plot3d"),gl_pointcloud2d:v("gl-pointcloud2d"),gl_scatter3d:v("gl-scatter3d"),gl_select_box:v("gl-select-box"),gl_spikes2d:v("gl-spikes2d"),gl_streamtube3d:v("gl-streamtube3d"),gl_surface3d:v("gl-surface3d"),ndarray:v("ndarray"),ndarray_linear_interpolate:v("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(v,u,y){"use strict";u.exports=function(f){var s=(f=f||{}).eye||[0,0,1],i=f.center||[0,0,0],l=f.up||[0,1,0],c=f.distanceLimits||[0,1/0],h=f.mode||"turntable",m=e(),d=n(),o=t();return m.setDistanceLimits(c[0],c[1]),m.lookAt(0,s,i,l),d.setDistanceLimits(c[0],c[1]),d.lookAt(0,s,i,l),o.setDistanceLimits(c[0],c[1]),o.lookAt(0,s,i,l),new a({turntable:m,orbit:d,matrix:o},h)};var e=v("turntable-camera-controller"),n=v("orbit-camera-controller"),t=v("matrix-camera-controller");function a(f,s){this._controllerNames=Object.keys(f),this._controllerList=this._controllerNames.map(function(i){return f[i]}),this._mode=s,this._active=f[s],this._active||(this._mode="turntable",this._active=f.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var r=a.prototype;r.flush=function(f){for(var s=this._controllerList,i=0;i<s.length;++i)s[i].flush(f)},r.idle=function(f){for(var s=this._controllerList,i=0;i<s.length;++i)s[i].idle(f)},r.lookAt=function(f,s,i,l){for(var c=this._controllerList,h=0;h<c.length;++h)c[h].lookAt(f,s,i,l)},r.rotate=function(f,s,i,l){for(var c=this._controllerList,h=0;h<c.length;++h)c[h].rotate(f,s,i,l)},r.pan=function(f,s,i,l){for(var c=this._controllerList,h=0;h<c.length;++h)c[h].pan(f,s,i,l)},r.translate=function(f,s,i,l){for(var c=this._controllerList,h=0;h<c.length;++h)c[h].translate(f,s,i,l)},r.setMatrix=function(f,s){for(var i=this._controllerList,l=0;l<i.length;++l)i[l].setMatrix(f,s)},r.setDistanceLimits=function(f,s){for(var i=this._controllerList,l=0;l<i.length;++l)i[l].setDistanceLimits(f,s)},r.setDistance=function(f,s){for(var i=this._controllerList,l=0;l<i.length;++l)i[l].setDistance(f,s)},r.recalcMatrix=function(f){this._active.recalcMatrix(f)},r.getDistance=function(f){return this._active.getDistance(f)},r.getDistanceLimits=function(f){return this._active.getDistanceLimits(f)},r.lastT=function(){return this._active.lastT()},r.setMode=function(f){if(f!==this._mode){var s=this._controllerNames.indexOf(f);if(!(s<0)){var i=this._active,l=this._controllerList[s],c=Math.max(i.lastT(),l.lastT());i.recalcMatrix(c),l.setMatrix(c,i.computedMatrix),this._active=l,this._mode=f,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},r.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(v,u,y){"use strict";var e="undefined"==typeof WeakMap?v("weak-map"):WeakMap,n=v("gl-buffer"),t=v("gl-vao"),a=new e;u.exports=function(r){var f=a.get(r),s=f&&(f._triangleBuffer.handle||f._triangleBuffer.buffer);if(!s||!r.isBuffer(s)){var i=n(r,new Float32Array([-1,-1,-1,4,4,-1]));(f=t(r,[{buffer:i,type:r.FLOAT,size:2}]))._triangleBuffer=i,a.set(r,f)}f.bind(),r.drawArrays(r.TRIANGLES,0,3),f.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(v,u,y){var e=v("pad-left");u.exports=function(n,t,a){t="number"==typeof t?t:1,a=a||": ";var r=n.split(/\r?\n/),f=String(r.length+t-1).length;return r.map(function(s,i){var l=i+t,c=String(l).length;return e(l,f-c)+a+s}).join("\n")}},{"pad-left":264}],10:[function(v,u,y){"use strict";u.exports=function(t){var a=t.length;if(0===a)return[];if(1===a)return[0];for(var r=t[0].length,f=[t[0]],s=[0],i=1;i<a;++i)if(f.push(t[i]),n(f,r)){if(s.push(i),s.length===r+1)return s}else f.pop();return s};var e=v("robust-orientation");function n(t,a){for(var r=new Array(a+1),f=0;f<t.length;++f)r[f]=t[f];for(f=0;f<=t.length;++f){for(var s=t.length;s<=a;++s){for(var i=new Array(a),l=0;l<a;++l)i[l]=Math.pow(s+1-f,l);r[s]=i}if(e.apply(void 0,r))return!0}return!1}},{"robust-orientation":284}],11:[function(v,u,y){"use strict";u.exports=function(t,a){return e(a).filter(function(r){for(var f=new Array(r.length),s=0;s<r.length;++s)f[s]=a[r[s]];return n(f)*t<1})};var e=v("delaunay-triangulate"),n=v("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(v,u,y){u.exports=function(t,a){return n(e(t,a))};var e=v("alpha-complex"),n=v("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(v,u,y){u.exports=function(e){return atob(e)}},{}],14:[function(v,u,y){"use strict";u.exports=function(t,a){for(var r=a.length,f=new Array(r+1),s=0;s<r;++s){for(var i=new Array(r+1),l=0;l<=r;++l)i[l]=t[l][s];f[s]=i}for(f[r]=new Array(r+1),s=0;s<=r;++s)f[r][s]=1;var c=new Array(r+1);for(s=0;s<r;++s)c[s]=a[s];c[r]=1;var h=e(f,c),m=n(h[r+1]);0===m&&(m=1);var d=new Array(r+1);for(s=0;s<=r;++s)d[s]=n(h[s])/m;return d};var e=v("robust-linear-solve");function n(t){for(var a=0,r=0;r<t.length;++r)a+=t[r];return a}},{"robust-linear-solve":283}],15:[function(v,u,y){"use strict";var e=v("./lib/rationalize");u.exports=function(n,t){return e(n[0].mul(t[1]).add(t[0].mul(n[1])),n[1].mul(t[1]))}},{"./lib/rationalize":25}],16:[function(v,u,y){"use strict";u.exports=function(e,n){return e[0].mul(n[1]).cmp(n[0].mul(e[1]))}},{}],17:[function(v,u,y){"use strict";var e=v("./lib/rationalize");u.exports=function(n,t){return e(n[0].mul(t[1]),n[1].mul(t[0]))}},{"./lib/rationalize":25}],18:[function(v,u,y){"use strict";var e=v("./is-rat"),n=v("./lib/is-bn"),t=v("./lib/num-to-bn"),a=v("./lib/str-to-bn"),r=v("./lib/rationalize"),f=v("./div");u.exports=function s(i,l){if(e(i))return l?f(i,s(l)):[i[0].clone(),i[1].clone()];var c,h,m=0;if(n(i))c=i.clone();else if("string"==typeof i)c=a(i);else{if(0===i)return[t(0),t(1)];if(i===Math.floor(i))c=t(i);else{for(;i!==Math.floor(i);)i*=Math.pow(2,256),m-=256;c=t(i)}}if(e(l))c.mul(l[1]),h=l[0].clone();else if(n(l))h=l.clone();else if("string"==typeof l)h=a(l);else if(l)if(l===Math.floor(l))h=t(l);else{for(;l!==Math.floor(l);)l*=Math.pow(2,256),m+=256;h=t(l)}else h=t(1);return m>0?c=c.ushln(m):m<0&&(h=h.ushln(-m)),r(c,h)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(v,u,y){"use strict";var e=v("./lib/is-bn");u.exports=function(n){return Array.isArray(n)&&2===n.length&&e(n[0])&&e(n[1])}},{"./lib/is-bn":23}],20:[function(v,u,y){"use strict";var e=v("bn.js");u.exports=function(n){return n.cmp(new e(0))}},{"bn.js":33}],21:[function(v,u,y){"use strict";var e=v("./bn-sign");u.exports=function(n){var t=n.length,a=n.words,r=0;if(1===t)r=a[0];else if(2===t)r=a[0]+67108864*a[1];else for(var f=0;f<t;f++)r+=a[f]*Math.pow(67108864,f);return e(n)*r}},{"./bn-sign":20}],22:[function(v,u,y){"use strict";var e=v("double-bits"),n=v("bit-twiddle").countTrailingZeros;u.exports=function(t){var a=n(e.lo(t));if(a<32)return a;var r=n(e.hi(t));return r>20?52:r+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(v,u,y){"use strict";v("bn.js"),u.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":33}],24:[function(v,u,y){"use strict";var e=v("bn.js"),n=v("double-bits");u.exports=function(t){var a=n.exponent(t);return a<52?new e(t):new e(t*Math.pow(2,52-a)).ushln(a-52)}},{"bn.js":33,"double-bits":64}],25:[function(v,u,y){"use strict";var e=v("./num-to-bn"),n=v("./bn-sign");u.exports=function(t,a){var r=n(t),f=n(a);if(0===r)return[e(0),e(1)];if(0===f)return[e(0),e(0)];f<0&&(t=t.neg(),a=a.neg());var s=t.gcd(a);return s.cmpn(1)?[t.div(s),a.div(s)]:[t,a]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(v,u,y){"use strict";var e=v("bn.js");u.exports=function(n){return new e(n)}},{"bn.js":33}],27:[function(v,u,y){"use strict";var e=v("./lib/rationalize");u.exports=function(n,t){return e(n[0].mul(t[0]),n[1].mul(t[1]))}},{"./lib/rationalize":25}],28:[function(v,u,y){"use strict";var e=v("./lib/bn-sign");u.exports=function(n){return e(n[0])*e(n[1])}},{"./lib/bn-sign":20}],29:[function(v,u,y){"use strict";var e=v("./lib/rationalize");u.exports=function(n,t){return e(n[0].mul(t[1]).sub(n[1].mul(t[0])),n[1].mul(t[1]))}},{"./lib/rationalize":25}],30:[function(v,u,y){"use strict";var e=v("./lib/bn-to-num"),n=v("./lib/ctz");u.exports=function(t){var a=t[0],r=t[1];if(0===a.cmpn(0))return 0;var f=a.abs().divmod(r.abs()),i=e(f.div),l=f.mod,c=a.negative!==r.negative?-1:1;if(0===l.cmpn(0))return c*i;if(i){var h=n(i)+4,m=e(l.ushln(h).divRound(r));return c*(i+m*Math.pow(2,-h))}var d=r.bitLength()-l.bitLength()+53;return m=e(l.ushln(d).divRound(r)),d<1023?c*m*Math.pow(2,-d):c*(m*=Math.pow(2,-1023))*Math.pow(2,1023-d)}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(v,u,y){"use strict";function e(s,i,l,c,h){for(var m=h+1;c<=h;){var d=c+h>>>1,o=s[d];(void 0!==l?l(o,i):o-i)>=0?(m=d,h=d-1):c=d+1}return m}function n(s,i,l,c,h){for(var m=h+1;c<=h;){var d=c+h>>>1,o=s[d];(void 0!==l?l(o,i):o-i)>0?(m=d,h=d-1):c=d+1}return m}function t(s,i,l,c,h){for(var m=c-1;c<=h;){var d=c+h>>>1,o=s[d];(void 0!==l?l(o,i):o-i)<0?(m=d,c=d+1):h=d-1}return m}function a(s,i,l,c,h){for(var m=c-1;c<=h;){var d=c+h>>>1,o=s[d];(void 0!==l?l(o,i):o-i)<=0?(m=d,c=d+1):h=d-1}return m}function r(s,i,l,c,h){for(;c<=h;){var m=c+h>>>1,d=s[m],o=void 0!==l?l(d,i):d-i;if(0===o)return m;o<=0?c=m+1:h=m-1}return-1}function f(s,i,l,c,h,m){return"function"==typeof l?m(s,i,l,void 0===c?0:0|c,void 0===h?s.length-1:0|h):m(s,i,void 0,void 0===l?0:0|l,void 0===c?s.length-1:0|c)}u.exports={ge:function(s,i,l,c,h){return f(s,i,l,c,h,e)},gt:function(s,i,l,c,h){return f(s,i,l,c,h,n)},lt:function(s,i,l,c,h){return f(s,i,l,c,h,t)},le:function(s,i,l,c,h){return f(s,i,l,c,h,a)},eq:function(s,i,l,c,h){return f(s,i,l,c,h,r)}}},{}],32:[function(v,u,y){"use strict";function e(t){var a=32;return(t&=-t)&&a--,65535&t&&(a-=16),16711935&t&&(a-=8),252645135&t&&(a-=4),858993459&t&&(a-=2),1431655765&t&&(a-=1),a}y.INT_BITS=32,y.INT_MAX=2147483647,y.INT_MIN=-1<<31,y.sign=function(t){return(t>0)-(t<0)},y.abs=function(t){var a=t>>31;return(t^a)-a},y.min=function(t,a){return a^(t^a)&-(t<a)},y.max=function(t,a){return t^(t^a)&-(t<a)},y.isPow2=function(t){return!(t&t-1||!t)},y.log2=function(t){var a,r;return a=(t>65535)<<4,a|=r=((t>>>=a)>255)<<3,a|=r=((t>>>=r)>15)<<2,(a|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1},y.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},y.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},y.countTrailingZeros=e,y.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,1+((t|=t>>>8)|t>>>16)},y.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},y.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=new Array(256);(function(t){for(var a=0;a<256;++a){var r=a,f=a,s=7;for(r>>>=1;r;r>>>=1)f<<=1,f|=1&r,--s;t[a]=f<<s&255}})(n),y.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},y.interleave2=function(t,a){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))<<1},y.deinterleave2=function(t,a){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>a&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},y.interleave3=function(t,a,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},y.deinterleave3=function(t,a){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>a&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},y.nextCombination=function(t){var a=t|t-1;return a+1|(~a&-~a)-1>>>e(t)+1}},{}],33:[function(v,u,y){!function(e,n){"use strict";function t(S,C){if(!S)throw new Error(C||"Assertion failed")}function a(S,C){S.super_=C;var z=function(){};z.prototype=C.prototype,S.prototype=new z,S.prototype.constructor=S}function r(S,C,z){if(r.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,null!==S&&("le"!==C&&"be"!==C||(z=C,C=10),this._init(S||0,C||10,z||"be"))}var f;"object"==typeof e?e.exports=r:n.BN=r,r.BN=r,r.wordSize=26;try{f="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:v("buffer").Buffer}catch(S){}function s(S,C){var z=S.charCodeAt(C);return z>=65&&z<=70?z-55:z>=97&&z<=102?z-87:z-48&15}function i(S,C,z){var B=s(S,z);return z-1>=C&&(B|=s(S,z-1)<<4),B}function l(S,C,z,B){for(var U=0,G=Math.min(S.length,z),X=C;X<G;X++){var Z=S.charCodeAt(X)-48;U*=B,U+=Z>=49?Z-49+10:Z>=17?Z-17+10:Z}return U}r.isBN=function(S){return S instanceof r||null!==S&&"object"==typeof S&&S.constructor.wordSize===r.wordSize&&Array.isArray(S.words)},r.max=function(S,C){return S.cmp(C)>0?S:C},r.min=function(S,C){return S.cmp(C)<0?S:C},r.prototype._init=function(S,C,z){if("number"==typeof S)return this._initNumber(S,C,z);if("object"==typeof S)return this._initArray(S,C,z);"hex"===C&&(C=16),t(C===(0|C)&&C>=2&&C<=36);var B=0;"-"===(S=S.toString().replace(/\s+/g,""))[0]&&(B++,this.negative=1),B<S.length&&(16===C?this._parseHex(S,B,z):(this._parseBase(S,C,B),"le"===z&&this._initArray(this.toArray(),C,z)))},r.prototype._initNumber=function(S,C,z){S<0&&(this.negative=1,S=-S),S<67108864?(this.words=[67108863&S],this.length=1):S<4503599627370496?(this.words=[67108863&S,S/67108864&67108863],this.length=2):(t(S<9007199254740992),this.words=[67108863&S,S/67108864&67108863,1],this.length=3),"le"===z&&this._initArray(this.toArray(),C,z)},r.prototype._initArray=function(S,C,z){if(t("number"==typeof S.length),S.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(S.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var U,G,X=0;if("be"===z)for(B=S.length-1,U=0;B>=0;B-=3)this.words[U]|=(G=S[B]|S[B-1]<<8|S[B-2]<<16)<<X&67108863,this.words[U+1]=G>>>26-X&67108863,(X+=24)>=26&&(X-=26,U++);else if("le"===z)for(B=0,U=0;B<S.length;B+=3)this.words[U]|=(G=S[B]|S[B+1]<<8|S[B+2]<<16)<<X&67108863,this.words[U+1]=G>>>26-X&67108863,(X+=24)>=26&&(X-=26,U++);return this.strip()},r.prototype._parseHex=function(S,C,z){this.length=Math.ceil((S.length-C)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var U,G=0,X=0;if("be"===z)for(B=S.length-1;B>=C;B-=2)U=i(S,C,B)<<G,this.words[X]|=67108863&U,G>=18?(G-=18,this.words[X+=1]|=U>>>26):G+=8;else for(B=(S.length-C)%2==0?C+1:C;B<S.length;B+=2)U=i(S,C,B)<<G,this.words[X]|=67108863&U,G>=18?(G-=18,this.words[X+=1]|=U>>>26):G+=8;this.strip()},r.prototype._parseBase=function(S,C,z){this.words=[0],this.length=1;for(var B=0,U=1;U<=67108863;U*=C)B++;B--,U=U/C|0;for(var G=S.length-z,X=G%B,Z=Math.min(G,G-X)+z,q=0,W=z;W<Z;W+=B)q=l(S,W,W+B,C),this.imuln(U),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q);if(0!==X){var te=1;for(q=l(S,W,S.length,C),W=0;W<X;W++)te*=C;this.imuln(te),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q)}this.strip()},r.prototype.copy=function(S){S.words=new Array(this.length);for(var C=0;C<this.length;C++)S.words[C]=this.words[C];S.length=this.length,S.negative=this.negative,S.red=this.red},r.prototype.clone=function(){var S=new r(null);return this.copy(S),S},r.prototype._expand=function(S){for(;this.length<S;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(S,C,z){z.negative=C.negative^S.negative;var B=S.length+C.length|0;z.length=B,B=B-1|0;var U=0|S.words[0],G=0|C.words[0],X=U*G,q=X/67108864|0;z.words[0]=67108863&X;for(var W=1;W<B;W++){for(var te=q>>>26,R=67108863&q,N=Math.min(W,C.length-1),V=Math.max(0,W-S.length+1);V<=N;V++)te+=(X=(U=0|S.words[W-V|0])*(G=0|C.words[V])+R)/67108864|0,R=67108863&X;z.words[W]=0|R,q=0|te}return 0!==q?z.words[W]=0|q:z.length--,z.strip()}r.prototype.toString=function(S,C){var z;if(C=0|C||1,16===(S=S||10)||"hex"===S){z="";for(var B=0,U=0,G=0;G<this.length;G++){var X=this.words[G],Z=(16777215&(X<<B|U)).toString(16);z=0!=(U=X>>>24-B&16777215)||G!==this.length-1?c[6-Z.length]+Z+z:Z+z,(B+=2)>=26&&(B-=26,G--)}for(0!==U&&(z=U.toString(16)+z);z.length%C!=0;)z="0"+z;return 0!==this.negative&&(z="-"+z),z}if(S===(0|S)&&S>=2&&S<=36){var q=h[S],W=m[S];z="";var te=this.clone();for(te.negative=0;!te.isZero();){var R=te.modn(W).toString(S);z=(te=te.idivn(W)).isZero()?R+z:c[q-R.length]+R+z}for(this.isZero()&&(z="0"+z);z.length%C!=0;)z="0"+z;return 0!==this.negative&&(z="-"+z),z}t(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var S=this.words[0];return 2===this.length?S+=67108864*this.words[1]:3===this.length&&1===this.words[2]?S+=4503599627370496+67108864*this.words[1]:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-S:S},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(S,C){return t(void 0!==f),this.toArrayLike(f,S,C)},r.prototype.toArray=function(S,C){return this.toArrayLike(Array,S,C)},r.prototype.toArrayLike=function(S,C,z){var B=this.byteLength(),U=z||Math.max(1,B);t(B<=U,"byte array longer than desired length"),t(U>0,"Requested array length <= 0"),this.strip();var G,X,Z="le"===C,q=new S(U),W=this.clone();if(Z){for(X=0;!W.isZero();X++)G=W.andln(255),W.iushrn(8),q[X]=G;for(;X<U;X++)q[X]=0}else{for(X=0;X<U-B;X++)q[X]=0;for(X=0;!W.isZero();X++)G=W.andln(255),W.iushrn(8),q[U-X-1]=G}return q},r.prototype._countBits=Math.clz32?function(S){return 32-Math.clz32(S)}:function(S){var C=S,z=0;return C>=4096&&(z+=13,C>>>=13),C>=64&&(z+=7,C>>>=7),C>=8&&(z+=4,C>>>=4),C>=2&&(z+=2,C>>>=2),z+C},r.prototype._zeroBits=function(S){if(0===S)return 26;var C=S,z=0;return 0==(8191&C)&&(z+=13,C>>>=13),0==(127&C)&&(z+=7,C>>>=7),0==(15&C)&&(z+=4,C>>>=4),0==(3&C)&&(z+=2,C>>>=2),0==(1&C)&&z++,z},r.prototype.bitLength=function(){var C=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+C},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var S=0,C=0;C<this.length;C++){var z=this._zeroBits(this.words[C]);if(S+=z,26!==z)break}return S},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(S){return 0!==this.negative?this.abs().inotn(S).iaddn(1):this.clone()},r.prototype.fromTwos=function(S){return this.testn(S-1)?this.notn(S).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(S){for(;this.length<S.length;)this.words[this.length++]=0;for(var C=0;C<S.length;C++)this.words[C]=this.words[C]|S.words[C];return this.strip()},r.prototype.ior=function(S){return t(0==(this.negative|S.negative)),this.iuor(S)},r.prototype.or=function(S){return this.length>S.length?this.clone().ior(S):S.clone().ior(this)},r.prototype.uor=function(S){return this.length>S.length?this.clone().iuor(S):S.clone().iuor(this)},r.prototype.iuand=function(S){var C;C=this.length>S.length?S:this;for(var z=0;z<C.length;z++)this.words[z]=this.words[z]&S.words[z];return this.length=C.length,this.strip()},r.prototype.iand=function(S){return t(0==(this.negative|S.negative)),this.iuand(S)},r.prototype.and=function(S){return this.length>S.length?this.clone().iand(S):S.clone().iand(this)},r.prototype.uand=function(S){return this.length>S.length?this.clone().iuand(S):S.clone().iuand(this)},r.prototype.iuxor=function(S){var C,z;this.length>S.length?(C=this,z=S):(C=S,z=this);for(var B=0;B<z.length;B++)this.words[B]=C.words[B]^z.words[B];if(this!==C)for(;B<C.length;B++)this.words[B]=C.words[B];return this.length=C.length,this.strip()},r.prototype.ixor=function(S){return t(0==(this.negative|S.negative)),this.iuxor(S)},r.prototype.xor=function(S){return this.length>S.length?this.clone().ixor(S):S.clone().ixor(this)},r.prototype.uxor=function(S){return this.length>S.length?this.clone().iuxor(S):S.clone().iuxor(this)},r.prototype.inotn=function(S){t("number"==typeof S&&S>=0);var C=0|Math.ceil(S/26),z=S%26;this._expand(C),z>0&&C--;for(var B=0;B<C;B++)this.words[B]=67108863&~this.words[B];return z>0&&(this.words[B]=~this.words[B]&67108863>>26-z),this.strip()},r.prototype.notn=function(S){return this.clone().inotn(S)},r.prototype.setn=function(S,C){t("number"==typeof S&&S>=0);var z=S/26|0,B=S%26;return this._expand(z+1),this.words[z]=C?this.words[z]|1<<B:this.words[z]&~(1<<B),this.strip()},r.prototype.iadd=function(S){var C,z,B;if(0!==this.negative&&0===S.negative)return this.negative=0,C=this.isub(S),this.negative^=1,this._normSign();if(0===this.negative&&0!==S.negative)return S.negative=0,C=this.isub(S),S.negative=1,C._normSign();this.length>S.length?(z=this,B=S):(z=S,B=this);for(var U=0,G=0;G<B.length;G++)this.words[G]=67108863&(C=(0|z.words[G])+(0|B.words[G])+U),U=C>>>26;for(;0!==U&&G<z.length;G++)this.words[G]=67108863&(C=(0|z.words[G])+U),U=C>>>26;if(this.length=z.length,0!==U)this.words[this.length]=U,this.length++;else if(z!==this)for(;G<z.length;G++)this.words[G]=z.words[G];return this},r.prototype.add=function(S){var C;return 0!==S.negative&&0===this.negative?(S.negative=0,C=this.sub(S),S.negative^=1,C):0===S.negative&&0!==this.negative?(this.negative=0,C=S.sub(this),this.negative=1,C):this.length>S.length?this.clone().iadd(S):S.clone().iadd(this)},r.prototype.isub=function(S){if(0!==S.negative){S.negative=0;var C=this.iadd(S);return S.negative=1,C._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(S),this.negative=1,this._normSign();var z,B,U=this.cmp(S);if(0===U)return this.negative=0,this.length=1,this.words[0]=0,this;U>0?(z=this,B=S):(z=S,B=this);for(var G=0,X=0;X<B.length;X++)G=(C=(0|z.words[X])-(0|B.words[X])+G)>>26,this.words[X]=67108863&C;for(;0!==G&&X<z.length;X++)G=(C=(0|z.words[X])+G)>>26,this.words[X]=67108863&C;if(0===G&&X<z.length&&z!==this)for(;X<z.length;X++)this.words[X]=z.words[X];return this.length=Math.max(this.length,X),z!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(S){return this.clone().isub(S)};var o=function(S,C,z){var B,U,G,X=S.words,Z=C.words,q=z.words,W=0,te=0|X[0],R=8191&te,N=te>>>13,V=0|X[1],ee=8191&V,j=V>>>13,J=0|X[2],$=8191&J,re=J>>>13,ne=0|X[3],se=8191&ne,ie=ne>>>13,ue=0|X[4],le=8191&ue,de=ue>>>13,ve=0|X[5],_e=8191&ve,be=ve>>>13,Te=0|X[6],he=8191&Te,me=Te>>>13,Ae=0|X[7],we=8191&Ae,Se=Ae>>>13,Pe=0|X[8],ze=8191&Pe,He=Pe>>>13,tt=0|X[9],Oe=8191&tt,Be=tt>>>13,Je=0|Z[0],Ye=8191&Je,nt=Je>>>13,ft=0|Z[1],dt=8191&ft,Rt=ft>>>13,Et=0|Z[2],at=8191&Et,rt=Et>>>13,St=0|Z[3],Xt=8191&St,lr=St>>>13,Ue=0|Z[4],Ze=8191&Ue,Ne=Ue>>>13,it=0|Z[5],ke=8191&it,De=it>>>13,Re=0|Z[6],Ie=8191&Re,Ke=Re>>>13,ut=0|Z[7],xt=8191&ut,gt=ut>>>13,Pt=0|Z[8],ct=8191&Pt,zt=Pt>>>13,Ft=0|Z[9],Qe=8191&Ft,yt=Ft>>>13;z.negative=S.negative^C.negative,z.length=19;var Nt=(W+(B=Math.imul(R,Ye))|0)+((8191&(U=(U=Math.imul(R,nt))+Math.imul(N,Ye)|0))<<13)|0;W=((G=Math.imul(N,nt))+(U>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,B=Math.imul(ee,Ye),U=(U=Math.imul(ee,nt))+Math.imul(j,Ye)|0,G=Math.imul(j,nt);var Yt=(W+(B=B+Math.imul(R,dt)|0)|0)+((8191&(U=(U=U+Math.imul(R,Rt)|0)+Math.imul(N,dt)|0))<<13)|0;W=((G=G+Math.imul(N,Rt)|0)+(U>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,B=Math.imul($,Ye),U=(U=Math.imul($,nt))+Math.imul(re,Ye)|0,G=Math.imul(re,nt),B=B+Math.imul(ee,dt)|0,U=(U=U+Math.imul(ee,Rt)|0)+Math.imul(j,dt)|0,G=G+Math.imul(j,Rt)|0;var rr=(W+(B=B+Math.imul(R,at)|0)|0)+((8191&(U=(U=U+Math.imul(R,rt)|0)+Math.imul(N,at)|0))<<13)|0;W=((G=G+Math.imul(N,rt)|0)+(U>>>13)|0)+(rr>>>26)|0,rr&=67108863,B=Math.imul(se,Ye),U=(U=Math.imul(se,nt))+Math.imul(ie,Ye)|0,G=Math.imul(ie,nt),B=B+Math.imul($,dt)|0,U=(U=U+Math.imul($,Rt)|0)+Math.imul(re,dt)|0,G=G+Math.imul(re,Rt)|0,B=B+Math.imul(ee,at)|0,U=(U=U+Math.imul(ee,rt)|0)+Math.imul(j,at)|0,G=G+Math.imul(j,rt)|0;var Fe=(W+(B=B+Math.imul(R,Xt)|0)|0)+((8191&(U=(U=U+Math.imul(R,lr)|0)+Math.imul(N,Xt)|0))<<13)|0;W=((G=G+Math.imul(N,lr)|0)+(U>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,B=Math.imul(le,Ye),U=(U=Math.imul(le,nt))+Math.imul(de,Ye)|0,G=Math.imul(de,nt),B=B+Math.imul(se,dt)|0,U=(U=U+Math.imul(se,Rt)|0)+Math.imul(ie,dt)|0,G=G+Math.imul(ie,Rt)|0,B=B+Math.imul($,at)|0,U=(U=U+Math.imul($,rt)|0)+Math.imul(re,at)|0,G=G+Math.imul(re,rt)|0,B=B+Math.imul(ee,Xt)|0,U=(U=U+Math.imul(ee,lr)|0)+Math.imul(j,Xt)|0,G=G+Math.imul(j,lr)|0;var ht=(W+(B=B+Math.imul(R,Ze)|0)|0)+((8191&(U=(U=U+Math.imul(R,Ne)|0)+Math.imul(N,Ze)|0))<<13)|0;W=((G=G+Math.imul(N,Ne)|0)+(U>>>13)|0)+(ht>>>26)|0,ht&=67108863,B=Math.imul(_e,Ye),U=(U=Math.imul(_e,nt))+Math.imul(be,Ye)|0,G=Math.imul(be,nt),B=B+Math.imul(le,dt)|0,U=(U=U+Math.imul(le,Rt)|0)+Math.imul(de,dt)|0,G=G+Math.imul(de,Rt)|0,B=B+Math.imul(se,at)|0,U=(U=U+Math.imul(se,rt)|0)+Math.imul(ie,at)|0,G=G+Math.imul(ie,rt)|0,B=B+Math.imul($,Xt)|0,U=(U=U+Math.imul($,lr)|0)+Math.imul(re,Xt)|0,G=G+Math.imul(re,lr)|0,B=B+Math.imul(ee,Ze)|0,U=(U=U+Math.imul(ee,Ne)|0)+Math.imul(j,Ze)|0,G=G+Math.imul(j,Ne)|0;var kt=(W+(B=B+Math.imul(R,ke)|0)|0)+((8191&(U=(U=U+Math.imul(R,De)|0)+Math.imul(N,ke)|0))<<13)|0;W=((G=G+Math.imul(N,De)|0)+(U>>>13)|0)+(kt>>>26)|0,kt&=67108863,B=Math.imul(he,Ye),U=(U=Math.imul(he,nt))+Math.imul(me,Ye)|0,G=Math.imul(me,nt),B=B+Math.imul(_e,dt)|0,U=(U=U+Math.imul(_e,Rt)|0)+Math.imul(be,dt)|0,G=G+Math.imul(be,Rt)|0,B=B+Math.imul(le,at)|0,U=(U=U+Math.imul(le,rt)|0)+Math.imul(de,at)|0,G=G+Math.imul(de,rt)|0,B=B+Math.imul(se,Xt)|0,U=(U=U+Math.imul(se,lr)|0)+Math.imul(ie,Xt)|0,G=G+Math.imul(ie,lr)|0,B=B+Math.imul($,Ze)|0,U=(U=U+Math.imul($,Ne)|0)+Math.imul(re,Ze)|0,G=G+Math.imul(re,Ne)|0,B=B+Math.imul(ee,ke)|0,U=(U=U+Math.imul(ee,De)|0)+Math.imul(j,ke)|0,G=G+Math.imul(j,De)|0;var Gt=(W+(B=B+Math.imul(R,Ie)|0)|0)+((8191&(U=(U=U+Math.imul(R,Ke)|0)+Math.imul(N,Ie)|0))<<13)|0;W=((G=G+Math.imul(N,Ke)|0)+(U>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,B=Math.imul(we,Ye),U=(U=Math.imul(we,nt))+Math.imul(Se,Ye)|0,G=Math.imul(Se,nt),B=B+Math.imul(he,dt)|0,U=(U=U+Math.imul(he,Rt)|0)+Math.imul(me,dt)|0,G=G+Math.imul(me,Rt)|0,B=B+Math.imul(_e,at)|0,U=(U=U+Math.imul(_e,rt)|0)+Math.imul(be,at)|0,G=G+Math.imul(be,rt)|0,B=B+Math.imul(le,Xt)|0,U=(U=U+Math.imul(le,lr)|0)+Math.imul(de,Xt)|0,G=G+Math.imul(de,lr)|0,B=B+Math.imul(se,Ze)|0,U=(U=U+Math.imul(se,Ne)|0)+Math.imul(ie,Ze)|0,G=G+Math.imul(ie,Ne)|0,B=B+Math.imul($,ke)|0,U=(U=U+Math.imul($,De)|0)+Math.imul(re,ke)|0,G=G+Math.imul(re,De)|0,B=B+Math.imul(ee,Ie)|0,U=(U=U+Math.imul(ee,Ke)|0)+Math.imul(j,Ie)|0,G=G+Math.imul(j,Ke)|0;var Zt=(W+(B=B+Math.imul(R,xt)|0)|0)+((8191&(U=(U=U+Math.imul(R,gt)|0)+Math.imul(N,xt)|0))<<13)|0;W=((G=G+Math.imul(N,gt)|0)+(U>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,B=Math.imul(ze,Ye),U=(U=Math.imul(ze,nt))+Math.imul(He,Ye)|0,G=Math.imul(He,nt),B=B+Math.imul(we,dt)|0,U=(U=U+Math.imul(we,Rt)|0)+Math.imul(Se,dt)|0,G=G+Math.imul(Se,Rt)|0,B=B+Math.imul(he,at)|0,U=(U=U+Math.imul(he,rt)|0)+Math.imul(me,at)|0,G=G+Math.imul(me,rt)|0,B=B+Math.imul(_e,Xt)|0,U=(U=U+Math.imul(_e,lr)|0)+Math.imul(be,Xt)|0,G=G+Math.imul(be,lr)|0,B=B+Math.imul(le,Ze)|0,U=(U=U+Math.imul(le,Ne)|0)+Math.imul(de,Ze)|0,G=G+Math.imul(de,Ne)|0,B=B+Math.imul(se,ke)|0,U=(U=U+Math.imul(se,De)|0)+Math.imul(ie,ke)|0,G=G+Math.imul(ie,De)|0,B=B+Math.imul($,Ie)|0,U=(U=U+Math.imul($,Ke)|0)+Math.imul(re,Ie)|0,G=G+Math.imul(re,Ke)|0,B=B+Math.imul(ee,xt)|0,U=(U=U+Math.imul(ee,gt)|0)+Math.imul(j,xt)|0,G=G+Math.imul(j,gt)|0;var fr=(W+(B=B+Math.imul(R,ct)|0)|0)+((8191&(U=(U=U+Math.imul(R,zt)|0)+Math.imul(N,ct)|0))<<13)|0;W=((G=G+Math.imul(N,zt)|0)+(U>>>13)|0)+(fr>>>26)|0,fr&=67108863,B=Math.imul(Oe,Ye),U=(U=Math.imul(Oe,nt))+Math.imul(Be,Ye)|0,G=Math.imul(Be,nt),B=B+Math.imul(ze,dt)|0,U=(U=U+Math.imul(ze,Rt)|0)+Math.imul(He,dt)|0,G=G+Math.imul(He,Rt)|0,B=B+Math.imul(we,at)|0,U=(U=U+Math.imul(we,rt)|0)+Math.imul(Se,at)|0,G=G+Math.imul(Se,rt)|0,B=B+Math.imul(he,Xt)|0,U=(U=U+Math.imul(he,lr)|0)+Math.imul(me,Xt)|0,G=G+Math.imul(me,lr)|0,B=B+Math.imul(_e,Ze)|0,U=(U=U+Math.imul(_e,Ne)|0)+Math.imul(be,Ze)|0,G=G+Math.imul(be,Ne)|0,B=B+Math.imul(le,ke)|0,U=(U=U+Math.imul(le,De)|0)+Math.imul(de,ke)|0,G=G+Math.imul(de,De)|0,B=B+Math.imul(se,Ie)|0,U=(U=U+Math.imul(se,Ke)|0)+Math.imul(ie,Ie)|0,G=G+Math.imul(ie,Ke)|0,B=B+Math.imul($,xt)|0,U=(U=U+Math.imul($,gt)|0)+Math.imul(re,xt)|0,G=G+Math.imul(re,gt)|0,B=B+Math.imul(ee,ct)|0,U=(U=U+Math.imul(ee,zt)|0)+Math.imul(j,ct)|0,G=G+Math.imul(j,zt)|0;var $t=(W+(B=B+Math.imul(R,Qe)|0)|0)+((8191&(U=(U=U+Math.imul(R,yt)|0)+Math.imul(N,Qe)|0))<<13)|0;W=((G=G+Math.imul(N,yt)|0)+(U>>>13)|0)+($t>>>26)|0,$t&=67108863,B=Math.imul(Oe,dt),U=(U=Math.imul(Oe,Rt))+Math.imul(Be,dt)|0,G=Math.imul(Be,Rt),B=B+Math.imul(ze,at)|0,U=(U=U+Math.imul(ze,rt)|0)+Math.imul(He,at)|0,G=G+Math.imul(He,rt)|0,B=B+Math.imul(we,Xt)|0,U=(U=U+Math.imul(we,lr)|0)+Math.imul(Se,Xt)|0,G=G+Math.imul(Se,lr)|0,B=B+Math.imul(he,Ze)|0,U=(U=U+Math.imul(he,Ne)|0)+Math.imul(me,Ze)|0,G=G+Math.imul(me,Ne)|0,B=B+Math.imul(_e,ke)|0,U=(U=U+Math.imul(_e,De)|0)+Math.imul(be,ke)|0,G=G+Math.imul(be,De)|0,B=B+Math.imul(le,Ie)|0,U=(U=U+Math.imul(le,Ke)|0)+Math.imul(de,Ie)|0,G=G+Math.imul(de,Ke)|0,B=B+Math.imul(se,xt)|0,U=(U=U+Math.imul(se,gt)|0)+Math.imul(ie,xt)|0,G=G+Math.imul(ie,gt)|0,B=B+Math.imul($,ct)|0,U=(U=U+Math.imul($,zt)|0)+Math.imul(re,ct)|0,G=G+Math.imul(re,zt)|0;var nr=(W+(B=B+Math.imul(ee,Qe)|0)|0)+((8191&(U=(U=U+Math.imul(ee,yt)|0)+Math.imul(j,Qe)|0))<<13)|0;W=((G=G+Math.imul(j,yt)|0)+(U>>>13)|0)+(nr>>>26)|0,nr&=67108863,B=Math.imul(Oe,at),U=(U=Math.imul(Oe,rt))+Math.imul(Be,at)|0,G=Math.imul(Be,rt),B=B+Math.imul(ze,Xt)|0,U=(U=U+Math.imul(ze,lr)|0)+Math.imul(He,Xt)|0,G=G+Math.imul(He,lr)|0,B=B+Math.imul(we,Ze)|0,U=(U=U+Math.imul(we,Ne)|0)+Math.imul(Se,Ze)|0,G=G+Math.imul(Se,Ne)|0,B=B+Math.imul(he,ke)|0,U=(U=U+Math.imul(he,De)|0)+Math.imul(me,ke)|0,G=G+Math.imul(me,De)|0,B=B+Math.imul(_e,Ie)|0,U=(U=U+Math.imul(_e,Ke)|0)+Math.imul(be,Ie)|0,G=G+Math.imul(be,Ke)|0,B=B+Math.imul(le,xt)|0,U=(U=U+Math.imul(le,gt)|0)+Math.imul(de,xt)|0,G=G+Math.imul(de,gt)|0,B=B+Math.imul(se,ct)|0,U=(U=U+Math.imul(se,zt)|0)+Math.imul(ie,ct)|0,G=G+Math.imul(ie,zt)|0;var dr=(W+(B=B+Math.imul($,Qe)|0)|0)+((8191&(U=(U=U+Math.imul($,yt)|0)+Math.imul(re,Qe)|0))<<13)|0;W=((G=G+Math.imul(re,yt)|0)+(U>>>13)|0)+(dr>>>26)|0,dr&=67108863,B=Math.imul(Oe,Xt),U=(U=Math.imul(Oe,lr))+Math.imul(Be,Xt)|0,G=Math.imul(Be,lr),B=B+Math.imul(ze,Ze)|0,U=(U=U+Math.imul(ze,Ne)|0)+Math.imul(He,Ze)|0,G=G+Math.imul(He,Ne)|0,B=B+Math.imul(we,ke)|0,U=(U=U+Math.imul(we,De)|0)+Math.imul(Se,ke)|0,G=G+Math.imul(Se,De)|0,B=B+Math.imul(he,Ie)|0,U=(U=U+Math.imul(he,Ke)|0)+Math.imul(me,Ie)|0,G=G+Math.imul(me,Ke)|0,B=B+Math.imul(_e,xt)|0,U=(U=U+Math.imul(_e,gt)|0)+Math.imul(be,xt)|0,G=G+Math.imul(be,gt)|0,B=B+Math.imul(le,ct)|0,U=(U=U+Math.imul(le,zt)|0)+Math.imul(de,ct)|0,G=G+Math.imul(de,zt)|0;var Tr=(W+(B=B+Math.imul(se,Qe)|0)|0)+((8191&(U=(U=U+Math.imul(se,yt)|0)+Math.imul(ie,Qe)|0))<<13)|0;W=((G=G+Math.imul(ie,yt)|0)+(U>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,B=Math.imul(Oe,Ze),U=(U=Math.imul(Oe,Ne))+Math.imul(Be,Ze)|0,G=Math.imul(Be,Ne),B=B+Math.imul(ze,ke)|0,U=(U=U+Math.imul(ze,De)|0)+Math.imul(He,ke)|0,G=G+Math.imul(He,De)|0,B=B+Math.imul(we,Ie)|0,U=(U=U+Math.imul(we,Ke)|0)+Math.imul(Se,Ie)|0,G=G+Math.imul(Se,Ke)|0,B=B+Math.imul(he,xt)|0,U=(U=U+Math.imul(he,gt)|0)+Math.imul(me,xt)|0,G=G+Math.imul(me,gt)|0,B=B+Math.imul(_e,ct)|0,U=(U=U+Math.imul(_e,zt)|0)+Math.imul(be,ct)|0,G=G+Math.imul(be,zt)|0;var wr=(W+(B=B+Math.imul(le,Qe)|0)|0)+((8191&(U=(U=U+Math.imul(le,yt)|0)+Math.imul(de,Qe)|0))<<13)|0;W=((G=G+Math.imul(de,yt)|0)+(U>>>13)|0)+(wr>>>26)|0,wr&=67108863,B=Math.imul(Oe,ke),U=(U=Math.imul(Oe,De))+Math.imul(Be,ke)|0,G=Math.imul(Be,De),B=B+Math.imul(ze,Ie)|0,U=(U=U+Math.imul(ze,Ke)|0)+Math.imul(He,Ie)|0,G=G+Math.imul(He,Ke)|0,B=B+Math.imul(we,xt)|0,U=(U=U+Math.imul(we,gt)|0)+Math.imul(Se,xt)|0,G=G+Math.imul(Se,gt)|0,B=B+Math.imul(he,ct)|0,U=(U=U+Math.imul(he,zt)|0)+Math.imul(me,ct)|0,G=G+Math.imul(me,zt)|0;var mr=(W+(B=B+Math.imul(_e,Qe)|0)|0)+((8191&(U=(U=U+Math.imul(_e,yt)|0)+Math.imul(be,Qe)|0))<<13)|0;W=((G=G+Math.imul(be,yt)|0)+(U>>>13)|0)+(mr>>>26)|0,mr&=67108863,B=Math.imul(Oe,Ie),U=(U=Math.imul(Oe,Ke))+Math.imul(Be,Ie)|0,G=Math.imul(Be,Ke),B=B+Math.imul(ze,xt)|0,U=(U=U+Math.imul(ze,gt)|0)+Math.imul(He,xt)|0,G=G+Math.imul(He,gt)|0,B=B+Math.imul(we,ct)|0,U=(U=U+Math.imul(we,zt)|0)+Math.imul(Se,ct)|0,G=G+Math.imul(Se,zt)|0;var _r=(W+(B=B+Math.imul(he,Qe)|0)|0)+((8191&(U=(U=U+Math.imul(he,yt)|0)+Math.imul(me,Qe)|0))<<13)|0;W=((G=G+Math.imul(me,yt)|0)+(U>>>13)|0)+(_r>>>26)|0,_r&=67108863,B=Math.imul(Oe,xt),U=(U=Math.imul(Oe,gt))+Math.imul(Be,xt)|0,G=Math.imul(Be,gt),B=B+Math.imul(ze,ct)|0,U=(U=U+Math.imul(ze,zt)|0)+Math.imul(He,ct)|0,G=G+Math.imul(He,zt)|0;var Sr=(W+(B=B+Math.imul(we,Qe)|0)|0)+((8191&(U=(U=U+Math.imul(we,yt)|0)+Math.imul(Se,Qe)|0))<<13)|0;W=((G=G+Math.imul(Se,yt)|0)+(U>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,B=Math.imul(Oe,ct),U=(U=Math.imul(Oe,zt))+Math.imul(Be,ct)|0,G=Math.imul(Be,zt);var Gr=(W+(B=B+Math.imul(ze,Qe)|0)|0)+((8191&(U=(U=U+Math.imul(ze,yt)|0)+Math.imul(He,Qe)|0))<<13)|0;W=((G=G+Math.imul(He,yt)|0)+(U>>>13)|0)+(Gr>>>26)|0,Gr&=67108863;var Er=(W+(B=Math.imul(Oe,Qe))|0)+((8191&(U=(U=Math.imul(Oe,yt))+Math.imul(Be,Qe)|0))<<13)|0;return W=((G=Math.imul(Be,yt))+(U>>>13)|0)+(Er>>>26)|0,Er&=67108863,q[0]=Nt,q[1]=Yt,q[2]=rr,q[3]=Fe,q[4]=ht,q[5]=kt,q[6]=Gt,q[7]=Zt,q[8]=fr,q[9]=$t,q[10]=nr,q[11]=dr,q[12]=Tr,q[13]=wr,q[14]=mr,q[15]=_r,q[16]=Sr,q[17]=Gr,q[18]=Er,0!==W&&(q[19]=W,z.length++),z};function b(S,C,z){return(new g).mulp(S,C,z)}function g(S,C){this.x=S,this.y=C}Math.imul||(o=d),r.prototype.mulTo=function(S,C){var z=this.length+S.length;return 10===this.length&&10===S.length?o(this,S,C):z<63?d(this,S,C):z<1024?function(B,U,G){G.negative=U.negative^B.negative,G.length=B.length+U.length;for(var X=0,Z=0,q=0;q<G.length-1;q++){var W=Z;Z=0;for(var te=67108863&X,R=Math.min(q,U.length-1),N=Math.max(0,q-B.length+1);N<=R;N++){var ee=(0|B.words[q-N])*(0|U.words[N]),j=67108863&ee;te=67108863&(j=j+te|0),Z+=(W=(W=W+(ee/67108864|0)|0)+(j>>>26)|0)>>>26,W&=67108863}G.words[q]=te,X=W,W=Z}return 0!==X?G.words[q]=X:G.length--,G.strip()}(this,S,C):b(this,S,C)},g.prototype.makeRBT=function(S){for(var C=new Array(S),z=r.prototype._countBits(S)-1,B=0;B<S;B++)C[B]=this.revBin(B,z,S);return C},g.prototype.revBin=function(S,C,z){if(0===S||S===z-1)return S;for(var B=0,U=0;U<C;U++)B|=(1&S)<<C-U-1,S>>=1;return B},g.prototype.permute=function(S,C,z,B,U,G){for(var X=0;X<G;X++)B[X]=C[S[X]],U[X]=z[S[X]]},g.prototype.transform=function(S,C,z,B,U,G){this.permute(G,S,C,z,B,U);for(var X=1;X<U;X<<=1)for(var Z=X<<1,q=Math.cos(2*Math.PI/Z),W=Math.sin(2*Math.PI/Z),te=0;te<U;te+=Z)for(var R=q,N=W,V=0;V<X;V++){var ee=z[te+V],j=B[te+V],J=z[te+V+X],$=B[te+V+X],re=R*J-N*$;$=R*$+N*J,z[te+V]=ee+(J=re),B[te+V]=j+$,z[te+V+X]=ee-J,B[te+V+X]=j-$,V!==Z&&(re=q*R-W*N,N=q*N+W*R,R=re)}},g.prototype.guessLen13b=function(S,C){var z=1|Math.max(C,S),B=1&z,U=0;for(z=z/2|0;z;z>>>=1)U++;return 1<<U+1+B},g.prototype.conjugate=function(S,C,z){if(!(z<=1))for(var B=0;B<z/2;B++){var U=S[B];S[B]=S[z-B-1],S[z-B-1]=U,U=C[B],C[B]=-C[z-B-1],C[z-B-1]=-U}},g.prototype.normalize13b=function(S,C){for(var z=0,B=0;B<C/2;B++){var U=8192*Math.round(S[2*B+1]/C)+Math.round(S[2*B]/C)+z;S[B]=67108863&U,z=U<67108864?0:U/67108864|0}return S},g.prototype.convert13b=function(S,C,z,B){for(var U=0,G=0;G<C;G++)z[2*G]=8191&(U+=0|S[G]),z[2*G+1]=8191&(U>>>=13),U>>>=13;for(G=2*C;G<B;++G)z[G]=0;t(0===U),t(0==(-8192&U))},g.prototype.stub=function(S){for(var C=new Array(S),z=0;z<S;z++)C[z]=0;return C},g.prototype.mulp=function(S,C,z){var B=2*this.guessLen13b(S.length,C.length),U=this.makeRBT(B),G=this.stub(B),X=new Array(B),Z=new Array(B),q=new Array(B),W=new Array(B),te=new Array(B),R=new Array(B),N=z.words;N.length=B,this.convert13b(S.words,S.length,X,B),this.convert13b(C.words,C.length,W,B),this.transform(X,G,Z,q,B,U),this.transform(W,G,te,R,B,U);for(var V=0;V<B;V++){var ee=Z[V]*te[V]-q[V]*R[V];q[V]=Z[V]*R[V]+q[V]*te[V],Z[V]=ee}return this.conjugate(Z,q,B),this.transform(Z,q,N,G,B,U),this.conjugate(N,G,B),this.normalize13b(N,B),z.negative=S.negative^C.negative,z.length=S.length+C.length,z.strip()},r.prototype.mul=function(S){var C=new r(null);return C.words=new Array(this.length+S.length),this.mulTo(S,C)},r.prototype.mulf=function(S){var C=new r(null);return C.words=new Array(this.length+S.length),b(this,S,C)},r.prototype.imul=function(S){return this.clone().mulTo(S,this)},r.prototype.imuln=function(S){t("number"==typeof S),t(S<67108864);for(var C=0,z=0;z<this.length;z++){var B=(0|this.words[z])*S,U=(67108863&B)+(67108863&C);C>>=26,C+=B/67108864|0,C+=U>>>26,this.words[z]=67108863&U}return 0!==C&&(this.words[z]=C,this.length++),this},r.prototype.muln=function(S){return this.clone().imuln(S)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(S){var C=function(G){for(var X=new Array(G.bitLength()),Z=0;Z<X.length;Z++){var W=Z%26;X[Z]=(G.words[Z/26|0]&1<<W)>>>W}return X}(S);if(0===C.length)return new r(1);for(var z=this,B=0;B<C.length&&0===C[B];B++,z=z.sqr());if(++B<C.length)for(var U=z.sqr();B<C.length;B++,U=U.sqr())0!==C[B]&&(z=z.mul(U));return z},r.prototype.iushln=function(S){t("number"==typeof S&&S>=0);var C,z=S%26,B=(S-z)/26,U=67108863>>>26-z<<26-z;if(0!==z){var G=0;for(C=0;C<this.length;C++){var X=this.words[C]&U;this.words[C]=(0|this.words[C])-X<<z|G,G=X>>>26-z}G&&(this.words[C]=G,this.length++)}if(0!==B){for(C=this.length-1;C>=0;C--)this.words[C+B]=this.words[C];for(C=0;C<B;C++)this.words[C]=0;this.length+=B}return this.strip()},r.prototype.ishln=function(S){return t(0===this.negative),this.iushln(S)},r.prototype.iushrn=function(S,C,z){var B;t("number"==typeof S&&S>=0),B=C?(C-C%26)/26:0;var U=S%26,G=Math.min((S-U)/26,this.length),X=67108863^67108863>>>U<<U,Z=z;if(B-=G,B=Math.max(0,B),Z){for(var q=0;q<G;q++)Z.words[q]=this.words[q];Z.length=G}if(0!==G)if(this.length>G)for(this.length-=G,q=0;q<this.length;q++)this.words[q]=this.words[q+G];else this.words[0]=0,this.length=1;var W=0;for(q=this.length-1;q>=0&&(0!==W||q>=B);q--){var te=0|this.words[q];this.words[q]=W<<26-U|te>>>U,W=te&X}return Z&&0!==W&&(Z.words[Z.length++]=W),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(S,C,z){return t(0===this.negative),this.iushrn(S,C,z)},r.prototype.shln=function(S){return this.clone().ishln(S)},r.prototype.ushln=function(S){return this.clone().iushln(S)},r.prototype.shrn=function(S){return this.clone().ishrn(S)},r.prototype.ushrn=function(S){return this.clone().iushrn(S)},r.prototype.testn=function(S){t("number"==typeof S&&S>=0);var C=S%26,z=(S-C)/26;return!(this.length<=z||!(this.words[z]&1<<C))},r.prototype.imaskn=function(S){t("number"==typeof S&&S>=0);var C=S%26,z=(S-C)/26;return t(0===this.negative,"imaskn works only with positive numbers"),this.length<=z?this:(0!==C&&z++,this.length=Math.min(z,this.length),0!==C&&(this.words[this.length-1]&=67108863^67108863>>>C<<C),this.strip())},r.prototype.maskn=function(S){return this.clone().imaskn(S)},r.prototype.iaddn=function(S){return t("number"==typeof S),t(S<67108864),S<0?this.isubn(-S):0!==this.negative?1===this.length&&(0|this.words[0])<S?(this.words[0]=S-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(S),this.negative=1,this):this._iaddn(S)},r.prototype._iaddn=function(S){this.words[0]+=S;for(var C=0;C<this.length&&this.words[C]>=67108864;C++)this.words[C]-=67108864,C===this.length-1?this.words[C+1]=1:this.words[C+1]++;return this.length=Math.max(this.length,C+1),this},r.prototype.isubn=function(S){if(t("number"==typeof S),t(S<67108864),S<0)return this.iaddn(-S);if(0!==this.negative)return this.negative=0,this.iaddn(S),this.negative=1,this;if(this.words[0]-=S,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var C=0;C<this.length&&this.words[C]<0;C++)this.words[C]+=67108864,this.words[C+1]-=1;return this.strip()},r.prototype.addn=function(S){return this.clone().iaddn(S)},r.prototype.subn=function(S){return this.clone().isubn(S)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(S,C,z){var B,U;this._expand(S.length+z);var X=0;for(B=0;B<S.length;B++){U=(0|this.words[B+z])+X;var Z=(0|S.words[B])*C;X=((U-=67108863&Z)>>26)-(Z/67108864|0),this.words[B+z]=67108863&U}for(;B<this.length-z;B++)X=(U=(0|this.words[B+z])+X)>>26,this.words[B+z]=67108863&U;if(0===X)return this.strip();for(t(-1===X),X=0,B=0;B<this.length;B++)X=(U=-(0|this.words[B])+X)>>26,this.words[B]=67108863&U;return this.negative=1,this.strip()},r.prototype._wordDiv=function(S,C){var z,B=this.clone(),U=S,G=0|U.words[U.length-1];0!=(z=26-this._countBits(G))&&(U=U.ushln(z),B.iushln(z),G=0|U.words[U.length-1]);var X,Z=B.length-U.length;if("mod"!==C){(X=new r(null)).length=Z+1,X.words=new Array(X.length);for(var q=0;q<X.length;q++)X.words[q]=0}var W=B.clone()._ishlnsubmul(U,1,Z);0===W.negative&&(B=W,X&&(X.words[Z]=1));for(var te=Z-1;te>=0;te--){var R=67108864*(0|B.words[U.length+te])+(0|B.words[U.length+te-1]);for(R=Math.min(R/G|0,67108863),B._ishlnsubmul(U,R,te);0!==B.negative;)R--,B.negative=0,B._ishlnsubmul(U,1,te),B.isZero()||(B.negative^=1);X&&(X.words[te]=R)}return X&&X.strip(),B.strip(),"div"!==C&&0!==z&&B.iushrn(z),{div:X||null,mod:B}},r.prototype.divmod=function(S,C,z){return t(!S.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===S.negative?(G=this.neg().divmod(S,C),"mod"!==C&&(B=G.div.neg()),"div"!==C&&(U=G.mod.neg(),z&&0!==U.negative&&U.iadd(S)),{div:B,mod:U}):0===this.negative&&0!==S.negative?(G=this.divmod(S.neg(),C),"mod"!==C&&(B=G.div.neg()),{div:B,mod:G.mod}):0!=(this.negative&S.negative)?(G=this.neg().divmod(S.neg(),C),"div"!==C&&(U=G.mod.neg(),z&&0!==U.negative&&U.isub(S)),{div:G.div,mod:U}):S.length>this.length||this.cmp(S)<0?{div:new r(0),mod:this}:1===S.length?"div"===C?{div:this.divn(S.words[0]),mod:null}:"mod"===C?{div:null,mod:new r(this.modn(S.words[0]))}:{div:this.divn(S.words[0]),mod:new r(this.modn(S.words[0]))}:this._wordDiv(S,C);var B,U,G},r.prototype.div=function(S){return this.divmod(S,"div",!1).div},r.prototype.mod=function(S){return this.divmod(S,"mod",!1).mod},r.prototype.umod=function(S){return this.divmod(S,"mod",!0).mod},r.prototype.divRound=function(S){var C=this.divmod(S);if(C.mod.isZero())return C.div;var z=0!==C.div.negative?C.mod.isub(S):C.mod,B=S.ushrn(1),U=S.andln(1),G=z.cmp(B);return G<0||1===U&&0===G?C.div:0!==C.div.negative?C.div.isubn(1):C.div.iaddn(1)},r.prototype.modn=function(S){t(S<=67108863);for(var C=(1<<26)%S,z=0,B=this.length-1;B>=0;B--)z=(C*z+(0|this.words[B]))%S;return z},r.prototype.idivn=function(S){t(S<=67108863);for(var C=0,z=this.length-1;z>=0;z--){var B=(0|this.words[z])+67108864*C;this.words[z]=B/S|0,C=B%S}return this.strip()},r.prototype.divn=function(S){return this.clone().idivn(S)},r.prototype.egcd=function(S){t(0===S.negative),t(!S.isZero());var C=this,z=S.clone();C=0!==C.negative?C.umod(S):C.clone();for(var B=new r(1),U=new r(0),G=new r(0),X=new r(1),Z=0;C.isEven()&&z.isEven();)C.iushrn(1),z.iushrn(1),++Z;for(var q=z.clone(),W=C.clone();!C.isZero();){for(var te=0,R=1;0==(C.words[0]&R)&&te<26;++te,R<<=1);if(te>0)for(C.iushrn(te);te-- >0;)(B.isOdd()||U.isOdd())&&(B.iadd(q),U.isub(W)),B.iushrn(1),U.iushrn(1);for(var N=0,V=1;0==(z.words[0]&V)&&N<26;++N,V<<=1);if(N>0)for(z.iushrn(N);N-- >0;)(G.isOdd()||X.isOdd())&&(G.iadd(q),X.isub(W)),G.iushrn(1),X.iushrn(1);C.cmp(z)>=0?(C.isub(z),B.isub(G),U.isub(X)):(z.isub(C),G.isub(B),X.isub(U))}return{a:G,b:X,gcd:z.iushln(Z)}},r.prototype._invmp=function(S){t(0===S.negative),t(!S.isZero());var C=this,z=S.clone();C=0!==C.negative?C.umod(S):C.clone();for(var B,U=new r(1),G=new r(0),X=z.clone();C.cmpn(1)>0&&z.cmpn(1)>0;){for(var Z=0,q=1;0==(C.words[0]&q)&&Z<26;++Z,q<<=1);if(Z>0)for(C.iushrn(Z);Z-- >0;)U.isOdd()&&U.iadd(X),U.iushrn(1);for(var W=0,te=1;0==(z.words[0]&te)&&W<26;++W,te<<=1);if(W>0)for(z.iushrn(W);W-- >0;)G.isOdd()&&G.iadd(X),G.iushrn(1);C.cmp(z)>=0?(C.isub(z),U.isub(G)):(z.isub(C),G.isub(U))}return(B=0===C.cmpn(1)?U:G).cmpn(0)<0&&B.iadd(S),B},r.prototype.gcd=function(S){if(this.isZero())return S.abs();if(S.isZero())return this.abs();var C=this.clone(),z=S.clone();C.negative=0,z.negative=0;for(var B=0;C.isEven()&&z.isEven();B++)C.iushrn(1),z.iushrn(1);for(;;){for(;C.isEven();)C.iushrn(1);for(;z.isEven();)z.iushrn(1);var U=C.cmp(z);if(U<0){var G=C;C=z,z=G}else if(0===U||0===z.cmpn(1))break;C.isub(z)}return z.iushln(B)},r.prototype.invm=function(S){return this.egcd(S).a.umod(S)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(S){return this.words[0]&S},r.prototype.bincn=function(S){t("number"==typeof S);var C=S%26,z=(S-C)/26,B=1<<C;if(this.length<=z)return this._expand(z+1),this.words[z]|=B,this;for(var U=B,G=z;0!==U&&G<this.length;G++){var X=0|this.words[G];U=(X+=U)>>>26,this.words[G]=X&=67108863}return 0!==U&&(this.words[G]=U,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(S){var C,z=S<0;if(0!==this.negative&&!z)return-1;if(0===this.negative&&z)return 1;if(this.strip(),this.length>1)C=1;else{z&&(S=-S),t(S<=67108863,"Number is too big");var B=0|this.words[0];C=B===S?0:B<S?-1:1}return 0!==this.negative?0|-C:C},r.prototype.cmp=function(S){if(0!==this.negative&&0===S.negative)return-1;if(0===this.negative&&0!==S.negative)return 1;var C=this.ucmp(S);return 0!==this.negative?0|-C:C},r.prototype.ucmp=function(S){if(this.length>S.length)return 1;if(this.length<S.length)return-1;for(var C=0,z=this.length-1;z>=0;z--){var B=0|this.words[z],U=0|S.words[z];if(B!==U){B<U?C=-1:B>U&&(C=1);break}}return C},r.prototype.gtn=function(S){return 1===this.cmpn(S)},r.prototype.gt=function(S){return 1===this.cmp(S)},r.prototype.gten=function(S){return this.cmpn(S)>=0},r.prototype.gte=function(S){return this.cmp(S)>=0},r.prototype.ltn=function(S){return-1===this.cmpn(S)},r.prototype.lt=function(S){return-1===this.cmp(S)},r.prototype.lten=function(S){return this.cmpn(S)<=0},r.prototype.lte=function(S){return this.cmp(S)<=0},r.prototype.eqn=function(S){return 0===this.cmpn(S)},r.prototype.eq=function(S){return 0===this.cmp(S)},r.red=function(S){return new O(S)},r.prototype.toRed=function(S){return t(!this.red,"Already a number in reduction context"),t(0===this.negative,"red works only with positives"),S.convertTo(this)._forceRed(S)},r.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(S){return this.red=S,this},r.prototype.forceRed=function(S){return t(!this.red,"Already a number in reduction context"),this._forceRed(S)},r.prototype.redAdd=function(S){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,S)},r.prototype.redIAdd=function(S){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,S)},r.prototype.redSub=function(S){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,S)},r.prototype.redISub=function(S){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,S)},r.prototype.redShl=function(S){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,S)},r.prototype.redMul=function(S){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.mul(this,S)},r.prototype.redIMul=function(S){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.imul(this,S)},r.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(S){return t(this.red&&!S.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,S)};var w={k256:null,p224:null,p192:null,p25519:null};function _(S,C){this.name=S,this.p=new r(C,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function T(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function O(S){if("string"==typeof S){var C=r._prime(S);this.m=C.p,this.prime=C}else t(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}function D(S){O.call(this,S),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var S=new r(null);return S.words=new Array(Math.ceil(this.n/13)),S},_.prototype.ireduce=function(S){var C,z=S;do{this.split(z,this.tmp),C=(z=(z=this.imulK(z)).iadd(this.tmp)).bitLength()}while(C>this.n);var B=C<this.n?-1:z.ucmp(this.p);return 0===B?(z.words[0]=0,z.length=1):B>0?z.isub(this.p):void 0!==z.strip?z.strip():z._strip(),z},_.prototype.split=function(S,C){S.iushrn(this.n,0,C)},_.prototype.imulK=function(S){return S.imul(this.k)},a(A,_),A.prototype.split=function(S,C){for(var z=Math.min(S.length,9),B=0;B<z;B++)C.words[B]=S.words[B];if(C.length=z,S.length<=9)return S.words[0]=0,void(S.length=1);var U=S.words[9];for(C.words[C.length++]=4194303&U,B=10;B<S.length;B++){var G=0|S.words[B];S.words[B-10]=(4194303&G)<<4|U>>>22,U=G}S.words[B-10]=U>>>=22,S.length-=0===U&&S.length>10?10:9},A.prototype.imulK=function(S){S.words[S.length]=0,S.words[S.length+1]=0,S.length+=2;for(var C=0,z=0;z<S.length;z++){var B=0|S.words[z];S.words[z]=67108863&(C+=977*B),C=64*B+(C/67108864|0)}return 0===S.words[S.length-1]&&(S.length--,0===S.words[S.length-1]&&S.length--),S},a(T,_),a(E,_),a(k,_),k.prototype.imulK=function(S){for(var C=0,z=0;z<S.length;z++){var B=19*(0|S.words[z])+C,U=67108863&B;B>>>=26,S.words[z]=U,C=B}return 0!==C&&(S.words[S.length++]=C),S},r._prime=function(S){if(w[S])return w[S];var C;if("k256"===S)C=new A;else if("p224"===S)C=new T;else if("p192"===S)C=new E;else{if("p25519"!==S)throw new Error("Unknown prime "+S);C=new k}return w[S]=C,C},O.prototype._verify1=function(S){t(0===S.negative,"red works only with positives"),t(S.red,"red works only with red numbers")},O.prototype._verify2=function(S,C){t(0==(S.negative|C.negative),"red works only with positives"),t(S.red&&S.red===C.red,"red works only with red numbers")},O.prototype.imod=function(S){return this.prime?this.prime.ireduce(S)._forceRed(this):S.umod(this.m)._forceRed(this)},O.prototype.neg=function(S){return S.isZero()?S.clone():this.m.sub(S)._forceRed(this)},O.prototype.add=function(S,C){this._verify2(S,C);var z=S.add(C);return z.cmp(this.m)>=0&&z.isub(this.m),z._forceRed(this)},O.prototype.iadd=function(S,C){this._verify2(S,C);var z=S.iadd(C);return z.cmp(this.m)>=0&&z.isub(this.m),z},O.prototype.sub=function(S,C){this._verify2(S,C);var z=S.sub(C);return z.cmpn(0)<0&&z.iadd(this.m),z._forceRed(this)},O.prototype.isub=function(S,C){this._verify2(S,C);var z=S.isub(C);return z.cmpn(0)<0&&z.iadd(this.m),z},O.prototype.shl=function(S,C){return this._verify1(S),this.imod(S.ushln(C))},O.prototype.imul=function(S,C){return this._verify2(S,C),this.imod(S.imul(C))},O.prototype.mul=function(S,C){return this._verify2(S,C),this.imod(S.mul(C))},O.prototype.isqr=function(S){return this.imul(S,S.clone())},O.prototype.sqr=function(S){return this.mul(S,S)},O.prototype.sqrt=function(S){if(S.isZero())return S.clone();var C=this.m.andln(3);if(t(C%2==1),3===C){var z=this.m.add(new r(1)).iushrn(2);return this.pow(S,z)}for(var B=this.m.subn(1),U=0;!B.isZero()&&0===B.andln(1);)U++,B.iushrn(1);t(!B.isZero());var G=new r(1).toRed(this),X=G.redNeg(),Z=this.m.subn(1).iushrn(1),q=this.m.bitLength();for(q=new r(2*q*q).toRed(this);0!==this.pow(q,Z).cmp(X);)q.redIAdd(X);for(var W=this.pow(q,B),te=this.pow(S,B.addn(1).iushrn(1)),R=this.pow(S,B),N=U;0!==R.cmp(G);){for(var V=R,ee=0;0!==V.cmp(G);ee++)V=V.redSqr();t(ee<N);var j=this.pow(W,new r(1).iushln(N-ee-1));te=te.redMul(j),W=j.redSqr(),R=R.redMul(W),N=ee}return te},O.prototype.invm=function(S){var C=S._invmp(this.m);return 0!==C.negative?(C.negative=0,this.imod(C).redNeg()):this.imod(C)},O.prototype.pow=function(S,C){if(C.isZero())return new r(1).toRed(this);if(0===C.cmpn(1))return S.clone();var z=new Array(16);z[0]=new r(1).toRed(this),z[1]=S;for(var B=2;B<z.length;B++)z[B]=this.mul(z[B-1],S);var U=z[0],G=0,X=0,Z=C.bitLength()%26;for(0===Z&&(Z=26),B=C.length-1;B>=0;B--){for(var q=C.words[B],W=Z-1;W>=0;W--){var te=q>>W&1;U!==z[0]&&(U=this.sqr(U)),0!==te||0!==G?(G<<=1,G|=te,(4==++X||0===B&&0===W)&&(U=this.mul(U,z[G]),X=0,G=0)):X=0}Z=26}return U},O.prototype.convertTo=function(S){var C=S.umod(this.m);return C===S?C.clone():C},O.prototype.convertFrom=function(S){var C=S.clone();return C.red=null,C},r.mont=function(S){return new D(S)},a(D,O),D.prototype.convertTo=function(S){return this.imod(S.ushln(this.shift))},D.prototype.convertFrom=function(S){var C=this.imod(S.mul(this.rinv));return C.red=null,C},D.prototype.imul=function(S,C){if(S.isZero()||C.isZero())return S.words[0]=0,S.length=1,S;var z=S.imul(C),B=z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=z.isub(B).iushrn(this.shift),G=U;return U.cmp(this.m)>=0?G=U.isub(this.m):U.cmpn(0)<0&&(G=U.iadd(this.m)),G._forceRed(this)},D.prototype.mul=function(S,C){if(S.isZero()||C.isZero())return new r(0)._forceRed(this);var z=S.mul(C),B=z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=z.isub(B).iushrn(this.shift),G=U;return U.cmp(this.m)>=0?G=U.isub(this.m):U.cmpn(0)<0&&(G=U.iadd(this.m)),G._forceRed(this)},D.prototype.invm=function(S){return this.imod(S._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===u||u,this)},{buffer:2}],34:[function(v,u,y){"use strict";u.exports=function(e){var n,t,a,r=e.length,f=0;for(n=0;n<r;++n)f+=e[n].length;var s=new Array(f),i=0;for(n=0;n<r;++n){var l=e[n],c=l.length;for(t=0;t<c;++t){var h=s[i++]=new Array(c-1),m=0;for(a=0;a<c;++a)a!==t&&(h[m++]=l[a]);if(1&t){var d=h[1];h[1]=h[0],h[0]=d}}}return s}},{}],35:[function(v,u,y){"use strict";u.exports=function(h,m,d){switch(arguments.length){case 1:return l(h);case 2:return"function"==typeof m?s(h,h,m,!0):c(h,m);case 3:return s(h,m,d,!1);default:throw new Error("box-intersect: Invalid arguments")}};var e,n=v("typedarray-pool"),t=v("./lib/sweep"),a=v("./lib/intersect");function r(h,m){for(var d=0;d<h;++d)if(!(m[d]<=m[d+h]))return!0;return!1}function f(h,m,d,o){for(var b=0,g=0,w=0,_=h.length;w<_;++w){var A=h[w];if(!r(m,A)){for(var T=0;T<2*m;++T)d[b++]=A[T];o[g++]=w}}return g}function s(h,m,d,o){var b=h.length,g=m.length;if(!(b<=0||g<=0)){var w=h[0].length>>>1;if(!(w<=0)){var _,A=n.mallocDouble(2*w*b),T=n.mallocInt32(b);if((b=f(h,w,A,T))>0){if(1===w&&o)t.init(b),_=t.sweepComplete(w,d,0,b,A,T,0,b,A,T);else{var E=n.mallocDouble(2*w*g),k=n.mallocInt32(g);(g=f(m,w,E,k))>0&&(t.init(b+g),_=1===w?t.sweepBipartite(w,d,0,b,A,T,0,g,E,k):a(w,d,o,b,A,T,g,E,k),n.free(E),n.free(k))}n.free(A),n.free(T)}return _}}}function i(h,m){e.push([h,m])}function l(h){return e=[],s(h,h,i,!0),e}function c(h,m){return e=[],s(h,m,i,!1),e}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(v,u,y){"use strict";function e(n){return n?function(t,a,r,f,s,i,l,c,h,m,d){return s-f>h-c?function(o,b,g,w,_,A,T,E,k,O,D){for(var S=2*o,C=w,z=S*w;C<_;++C,z+=S){var B=A[b+z],U=A[b+z+o],G=T[C];e:for(var X=E,Z=S*E;X<k;++X,Z+=S){var te=D[X];if(!(O[b+Z+o]<B||U<O[b+Z])){for(var R=b+1;R<o;++R)if(A[R+o+z]<O[R+Z]||O[R+o+Z]<A[R+z])continue e;var J=g(G,te);if(void 0!==J)return J}}}}(t,a,r,f,s,i,l,c,h,m,d):function(o,b,g,w,_,A,T,E,k,O,D){for(var S=2*o,C=E,z=S*E;C<k;++C,z+=S){var B=O[b+z],U=O[b+z+o],G=D[C];e:for(var X=w,Z=S*w;X<_;++X,Z+=S){var te=T[X];if(!(U<A[b+Z]||A[b+Z+o]<B)){for(var R=b+1;R<o;++R)if(A[R+o+Z]<O[R+z]||O[R+o+z]<A[R+Z])continue e;var J=g(te,G);if(void 0!==J)return J}}}}(t,a,r,f,s,i,l,c,h,m,d)}:function(t,a,r,f,s,i,l,c,h,m,d,o){return i-s>m-h?f?function(b,g,w,_,A,T,E,k,O,D,S){for(var C=2*b,z=_,B=C*_;z<A;++z,B+=C){var U=T[g+B],G=T[g+B+b],X=E[z];e:for(var Z=k,q=C*k;Z<O;++Z,q+=C){var W=D[g+q],te=S[Z];if(!(W<=U||G<W)){for(var R=g+1;R<b;++R)if(T[R+b+B]<D[R+q]||D[R+b+q]<T[R+B])continue e;var J=w(te,X);if(void 0!==J)return J}}}}(t,a,r,s,i,l,c,h,m,d,o):function(b,g,w,_,A,T,E,k,O,D,S){for(var C=2*b,z=_,B=C*_;z<A;++z,B+=C){var U=T[g+B],G=T[g+B+b],X=E[z];e:for(var Z=k,q=C*k;Z<O;++Z,q+=C){var W=D[g+q],te=S[Z];if(!(W<U||G<W)){for(var R=g+1;R<b;++R)if(T[R+b+B]<D[R+q]||D[R+b+q]<T[R+B])continue e;var J=w(X,te);if(void 0!==J)return J}}}}(t,a,r,s,i,l,c,h,m,d,o):f?function(b,g,w,_,A,T,E,k,O,D,S){for(var C=2*b,z=k,B=C*k;z<O;++z,B+=C){var U=D[g+B],G=S[z];e:for(var X=_,Z=C*_;X<A;++X,Z+=C){var te=E[X];if(!(U<=T[g+Z]||T[g+Z+b]<U)){for(var R=g+1;R<b;++R)if(T[R+b+Z]<D[R+B]||D[R+b+B]<T[R+Z])continue e;var J=w(G,te);if(void 0!==J)return J}}}}(t,a,r,s,i,l,c,h,m,d,o):function(b,g,w,_,A,T,E,k,O,D,S){for(var C=2*b,z=k,B=C*k;z<O;++z,B+=C){var U=D[g+B],G=S[z];e:for(var X=_,Z=C*_;X<A;++X,Z+=C){var te=E[X];if(!(U<T[g+Z]||T[g+Z+b]<U)){for(var R=g+1;R<b;++R)if(T[R+b+Z]<D[R+B]||D[R+b+B]<T[R+Z])continue e;var J=w(te,G);if(void 0!==J)return J}}}}(t,a,r,s,i,l,c,h,m,d,o)}}y.partial=e(!1),y.full=e(!0)},{}],37:[function(v,u,y){"use strict";u.exports=function(T,E,k,O,D,S,C,z,B){!function(Ae,we){var Se=8*n.log2(we+1)*(Ae+1)|0,Pe=n.nextPow2(6*Se);b.length<Pe&&(e.free(b),b=e.mallocInt32(Pe));var ze=n.nextPow2(2*Se);g.length<ze&&(e.free(g),g=e.mallocDouble(ze))}(T,O+C);var U,G=0,X=2*T;for(w(G++,0,0,O,0,C,k?16:0,-1/0,1/0),k||w(G++,0,0,C,0,O,1,-1/0,1/0);G>0;){var Z=6*(G-=1),q=b[Z],W=b[Z+1],te=b[Z+2],R=b[Z+3],N=b[Z+4],V=b[Z+5],ee=2*G,j=g[ee],J=g[ee+1],$=1&V,re=!!(16&V),ne=D,se=S,ie=z,ue=B;if($&&(ne=z,se=B,ie=D,ue=S),!(2&V&&(te=h(T,q,W,te,ne,se,J),W>=te)||4&V&&(W=m(T,q,W,te,ne,se,j))>=te)){var le=te-W,de=N-R;if(re){if(T*le*(le+de)<1<<22){if(void 0!==(U=f.scanComplete(T,q,E,W,te,ne,se,R,N,ie,ue)))return U;continue}}else{if(T*Math.min(le,de)<128){if(void 0!==(U=a(T,q,E,$,W,te,ne,se,R,N,ie,ue)))return U;continue}if(T*le*de<1<<22){if(void 0!==(U=f.scanBipartite(T,q,E,$,W,te,ne,se,R,N,ie,ue)))return U;continue}}var ve=l(T,q,W,te,ne,se,j,J);if(W<ve)if(T*(ve-W)<128){if(void 0!==(U=r(T,q+1,E,W,ve,ne,se,R,N,ie,ue)))return U}else if(q===T-2){if(void 0!==(U=$?f.sweepBipartite(T,E,R,N,ie,ue,W,ve,ne,se):f.sweepBipartite(T,E,W,ve,ne,se,R,N,ie,ue)))return U}else w(G++,q+1,W,ve,R,N,$,-1/0,1/0),w(G++,q+1,R,N,W,ve,1^$,-1/0,1/0);if(ve<te){var _e=s(T,q,R,N,ie,ue),be=ie[X*_e+q],Te=c(T,q,_e,N,ie,ue,be);if(Te<N&&w(G++,q,ve,te,Te,N,(4|$)+(re?16:0),be,J),R<_e&&w(G++,q,ve,te,R,_e,(2|$)+(re?16:0),j,be),_e+1===Te){if(void 0!==(U=re?A(T,q,E,ve,te,ne,se,_e,ie,ue[_e]):_(T,q,E,$,ve,te,ne,se,_e,ie,ue[_e])))return U}else if(_e<Te){var he;if(re){if(ve<(he=d(T,q,ve,te,ne,se,be))){var me=c(T,q,ve,he,ne,se,be);if(q===T-2){if(ve<me&&void 0!==(U=f.sweepComplete(T,E,ve,me,ne,se,_e,Te,ie,ue))||me<he&&void 0!==(U=f.sweepBipartite(T,E,me,he,ne,se,_e,Te,ie,ue)))return U}else ve<me&&w(G++,q+1,ve,me,_e,Te,16,-1/0,1/0),me<he&&(w(G++,q+1,me,he,_e,Te,0,-1/0,1/0),w(G++,q+1,_e,Te,me,he,1,-1/0,1/0))}}else ve<(he=$?o(T,q,ve,te,ne,se,be):d(T,q,ve,te,ne,se,be))&&(q===T-2?U=$?f.sweepBipartite(T,E,_e,Te,ie,ue,ve,he,ne,se):f.sweepBipartite(T,E,ve,he,ne,se,_e,Te,ie,ue):(w(G++,q+1,ve,he,_e,Te,$,-1/0,1/0),w(G++,q+1,_e,Te,ve,he,1^$,-1/0,1/0)))}}}}};var e=v("typedarray-pool"),n=v("bit-twiddle"),t=v("./brute"),a=t.partial,r=t.full,f=v("./sweep"),s=v("./median"),i=v("./partition"),l=i("!(lo>=p0)&&!(p1>=hi)"),c=i("lo===p0"),h=i("lo<p0"),m=i("hi<=p0"),d=i("lo<=p0&&p0<=hi"),o=i("lo<p0&&p0<=hi"),b=e.mallocInt32(1024),g=e.mallocDouble(1024);function w(T,E,k,O,D,S,C,z,B){var U=6*T;b[U]=E,b[U+1]=k,b[U+2]=O,b[U+3]=D,b[U+4]=S,b[U+5]=C;var G=2*T;g[G]=z,g[G+1]=B}function _(T,E,k,O,D,S,C,z,B,U,G){var X=2*T,Z=B*X,q=U[Z+E];e:for(var W=D,te=D*X;W<S;++W,te+=X){var R=C[te+E],N=C[te+E+T];if(!(q<R||N<q||O&&q===R)){for(var V,ee=z[W],j=E+1;j<T;++j)if(R=C[te+j],(N=C[te+j+T])<U[Z+j]||U[Z+j+T]<R)continue e;if(void 0!==(V=O?k(G,ee):k(ee,G)))return V}}}function A(T,E,k,O,D,S,C,z,B,U){var G=2*T,X=z*G,Z=B[X+E];e:for(var q=O,W=O*G;q<D;++q,W+=G){var te=C[q];if(te!==U){var R=S[W+E],N=S[W+E+T];if(!(Z<R||N<Z)){for(var V=E+1;V<T;++V)if(R=S[W+V],(N=S[W+V+T])<B[X+V]||B[X+V+T]<R)continue e;var J=k(te,U);if(void 0!==J)return J}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(v,u,y){"use strict";u.exports=function(t,a,r,f,s,i){if(f<=r+1)return r;for(var l=r,c=f,h=f+r>>>1,m=2*t,d=h,o=s[m*h+a];l<c;){if(c-l<8){n(t,a,l,c,s,i),o=s[m*h+a];break}var b=c-l,g=Math.random()*b+l|0,w=s[m*g+a],_=Math.random()*b+l|0,A=s[m*_+a],T=Math.random()*b+l|0,E=s[m*T+a];w<=A?E>=A?(d=_,o=A):w>=E?(d=g,o=w):(d=T,o=E):A>=E?(d=_,o=A):E>=w?(d=g,o=w):(d=T,o=E);for(var k=m*(c-1),O=m*d,D=0;D<m;++D,++k,++O){var S=s[k];s[k]=s[O],s[O]=S}var C=i[c-1];for(i[c-1]=i[d],i[d]=C,k=m*(c-1),O=m*(d=e(t,a,l,c-1,s,i,o)),D=0;D<m;++D,++k,++O)S=s[k],s[k]=s[O],s[O]=S;if(C=i[c-1],i[c-1]=i[d],i[d]=C,h<d){for(c=d-1;l<c&&s[m*(c-1)+a]===o;)c-=1;c+=1}else{if(!(d<h))break;for(l=d+1;l<c&&s[m*l+a]===o;)l+=1}}return e(t,a,r,h,s,i,s[m*h+a])};var e=v("./partition")("lo<p0");function n(t,a,r,f,s,i){for(var l=2*t,c=l*(r+1)+a,h=r+1;h<f;++h,c+=l)for(var m=s[c],d=h,o=l*(h-1);d>r&&s[o+a]>m;--d,o-=l){for(var b=o,g=o+l,w=0;w<l;++w,++b,++g){var _=s[b];s[b]=s[g],s[g]=_}var A=i[d];i[d]=i[d-1],i[d-1]=A}}},{"./partition":39}],39:[function(v,u,y){"use strict";u.exports=function(n){return e[n]};var e={"lo===p0":function(n,t,a,r,f,s,i){for(var l=2*n,c=l*a,h=c,m=a,d=t,o=a;r>o;++o,c+=l)if(f[c+d]===i)if(m===o)m+=1,h+=l;else{for(var b=0;l>b;++b){var g=f[c+b];f[c+b]=f[h],f[h++]=g}var w=s[o];s[o]=s[m],s[m++]=w}return m},"lo<p0":function(n,t,a,r,f,s,i){for(var l=2*n,c=l*a,h=c,m=a,d=t,o=a;r>o;++o,c+=l)if(f[c+d]<i)if(m===o)m+=1,h+=l;else{for(var b=0;l>b;++b){var g=f[c+b];f[c+b]=f[h],f[h++]=g}var w=s[o];s[o]=s[m],s[m++]=w}return m},"lo<=p0":function(n,t,a,r,f,s,i){for(var l=2*n,c=l*a,h=c,m=a,d=n+t,o=a;r>o;++o,c+=l)if(f[c+d]<=i)if(m===o)m+=1,h+=l;else{for(var b=0;l>b;++b){var g=f[c+b];f[c+b]=f[h],f[h++]=g}var w=s[o];s[o]=s[m],s[m++]=w}return m},"hi<=p0":function(n,t,a,r,f,s,i){for(var l=2*n,c=l*a,h=c,m=a,d=n+t,o=a;r>o;++o,c+=l)if(f[c+d]<=i)if(m===o)m+=1,h+=l;else{for(var b=0;l>b;++b){var g=f[c+b];f[c+b]=f[h],f[h++]=g}var w=s[o];s[o]=s[m],s[m++]=w}return m},"lo<p0&&p0<=hi":function(n,t,a,r,f,s,i){for(var l=2*n,c=l*a,h=c,m=a,d=t,o=n+t,b=a;r>b;++b,c+=l)if(f[c+d]<i&&i<=f[c+o])if(m===b)m+=1,h+=l;else{for(var _=0;l>_;++_){var A=f[c+_];f[c+_]=f[h],f[h++]=A}var T=s[b];s[b]=s[m],s[m++]=T}return m},"lo<=p0&&p0<=hi":function(n,t,a,r,f,s,i){for(var l=2*n,c=l*a,h=c,m=a,d=t,o=n+t,b=a;r>b;++b,c+=l)if(f[c+d]<=i&&i<=f[c+o])if(m===b)m+=1,h+=l;else{for(var _=0;l>_;++_){var A=f[c+_];f[c+_]=f[h],f[h++]=A}var T=s[b];s[b]=s[m],s[m++]=T}return m},"!(lo>=p0)&&!(p1>=hi)":function(n,t,a,r,f,s,i,l){for(var c=2*n,h=c*a,m=h,d=a,o=t,b=n+t,g=a;r>g;++g,h+=c)if(!(f[h+o]>=i||l>=f[h+b]))if(d===g)d+=1,m+=c;else{for(var A=0;c>A;++A){var T=f[h+A];f[h+A]=f[m],f[m++]=T}var E=s[g];s[g]=s[d],s[d++]=E}return d}}},{}],40:[function(v,u,y){"use strict";function e(i,l,c){for(var h=2*(i+1),m=i+1;m<=l;++m){for(var d=c[h++],o=c[h++],b=m,g=h-2;b-- >i;){var w=c[g-2],_=c[g-1];if(w<d||w===d&&_<o)break;c[g]=w,c[g+1]=_,g-=2}c[g]=d,c[g+1]=o}}function n(i,l,c){var h=c[i*=2],m=c[i+1];c[i]=c[l*=2],c[i+1]=c[l+1],c[l]=h,c[l+1]=m}function t(i,l,c){c[i*=2]=c[l*=2],c[i+1]=c[l+1]}function a(i,l,c,h){c*=2;var m=h[i*=2],d=h[i+1];h[i]=h[l*=2],h[i+1]=h[l+1],h[l]=h[c],h[l+1]=h[c+1],h[c]=m,h[c+1]=d}function r(i,l,c,h,m){m[i*=2]=m[l*=2],m[l]=c,m[i+1]=m[l+1],m[l+1]=h}function f(i,l,c){var h=c[i*=2],m=c[l*=2];return!(h<m)&&(h!==m||c[i+1]>c[l+1])}function s(i,l,c,h){var m=h[i*=2];return m<l||m===l&&h[i+1]<c}u.exports=function(i,l){l<=128?e(0,l-1,i):function c(h,m,d){var o=(m-h+1)/6|0,b=h+o,g=m-o,w=h+m>>1,_=w-o,A=w+o,T=b,E=_,k=w,O=A,D=g,S=h+1,C=m-1,z=0;f(T,E,d)&&(z=T,T=E,E=z),f(O,D,d)&&(z=O,O=D,D=z),f(T,k,d)&&(z=T,T=k,k=z),f(E,k,d)&&(z=E,E=k,k=z),f(T,O,d)&&(z=T,T=O,O=z),f(k,O,d)&&(z=k,k=O,O=z),f(E,D,d)&&(z=E,E=D,D=z),f(E,k,d)&&(z=E,E=k,k=z),f(O,D,d)&&(z=O,O=D,D=z);for(var B=d[2*E],U=d[2*E+1],G=d[2*O],X=d[2*O+1],Z=2*T,q=2*k,W=2*D,te=2*b,R=2*w,N=2*g,V=0;V<2;++V){var j=d[q+V],J=d[W+V];d[te+V]=d[Z+V],d[R+V]=j,d[N+V]=J}t(_,h,d),t(A,m,d);for(var $=S;$<=C;++$)if(s($,B,U,d))$!==S&&n($,S,d),++S;else if(!s($,G,X,d))for(;;){if(s(C,G,X,d)){s(C,B,U,d)?(a($,S,C,d),++S,--C):(n($,C,d),--C);break}if(--C<$)break}r(h,S-1,B,U,d),r(m,C+1,G,X,d),S-2-h<=32?e(h,S-2,d):c(h,S-2,d),m-(C+2)<=32?e(C+2,m,d):c(C+2,m,d),C-S<=32?e(S,C,d):c(S,C,d)}(0,l-1,i)}},{}],41:[function(v,u,y){"use strict";u.exports={init:function(d){var o=n.nextPow2(d);a.length<o&&(e.free(a),a=e.mallocInt32(o)),r.length<o&&(e.free(r),r=e.mallocInt32(o)),f.length<o&&(e.free(f),f=e.mallocInt32(o)),s.length<o&&(e.free(s),s=e.mallocInt32(o)),i.length<o&&(e.free(i),i=e.mallocInt32(o)),l.length<o&&(e.free(l),l=e.mallocInt32(o));var b=8*o;c.length<b&&(e.free(c),c=e.mallocDouble(b))},sweepBipartite:function(d,o,b,g,w,_,A,T,E,k){for(var O=0,D=2*d,S=d-1,C=D-1,z=b;z<g;++z){var B=_[z],U=D*z;c[O++]=w[U+S],c[O++]=-(B+1),c[O++]=w[U+C],c[O++]=B}for(z=A;z<T;++z){B=k[z]+(1<<28);var G=D*z;c[O++]=E[G+S],c[O++]=-B,c[O++]=E[G+C],c[O++]=B}var X=O>>>1;t(c,X);var Z=0,q=0;for(z=0;z<X;++z){var W=0|c[2*z+1];if(W>=1<<28)h(f,s,q--,W=W-(1<<28)|0);else if(W>=0)h(a,r,Z--,W);else if(W<=-(1<<28)){W=-W-(1<<28)|0;for(var te=0;te<Z;++te)if(void 0!==(R=o(a[te],W)))return R;m(f,s,q++,W)}else{for(W=-W-1|0,te=0;te<q;++te){var R;if(void 0!==(R=o(W,f[te])))return R}m(a,r,Z++,W)}}},sweepComplete:function(d,o,b,g,w,_,A,T,E,k){for(var O=0,D=2*d,S=d-1,C=D-1,z=b;z<g;++z){var B=_[z]+1<<1,U=D*z;c[O++]=w[U+S],c[O++]=-B,c[O++]=w[U+C],c[O++]=B}for(z=A;z<T;++z){B=k[z]+1<<1;var G=D*z;c[O++]=E[G+S],c[O++]=1|-B,c[O++]=E[G+C],c[O++]=1|B}var X=O>>>1;t(c,X);var Z=0,q=0,W=0;for(z=0;z<X;++z){var te=0|c[2*z+1],R=1&te;if(z<X-1&&te>>1==c[2*z+3]>>1&&(R=2,z+=1),te<0){for(var N=-(te>>1)-1,V=0;V<W;++V)if(void 0!==(ee=o(i[V],N)))return ee;if(0!==R)for(V=0;V<Z;++V)if(void 0!==(ee=o(a[V],N)))return ee;if(1!==R)for(V=0;V<q;++V){var ee;if(void 0!==(ee=o(f[V],N)))return ee}0===R?m(a,r,Z++,N):1===R?m(f,s,q++,N):2===R&&m(i,l,W++,N)}else N=(te>>1)-1,0===R?h(a,r,Z--,N):1===R?h(f,s,q--,N):2===R&&h(i,l,W--,N)}},scanBipartite:function(d,o,b,g,w,_,A,T,E,k,O,D){var S=0,C=2*d,z=o,B=o+d,U=1,G=1;g?G=1<<28:U=1<<28;for(var X=w;X<_;++X){var Z=X+U,q=C*X;c[S++]=A[q+z],c[S++]=-Z,c[S++]=A[q+B],c[S++]=Z}for(X=E;X<k;++X)Z=X+G,c[S++]=O[C*X+z],c[S++]=-Z;var te=S>>>1;t(c,te);var R=0;for(X=0;X<te;++X){var N=0|c[2*X+1];if(N<0){var V=!1;if((Z=-N)>=1<<28?(V=!g,Z-=1<<28):(V=!!g,Z-=1),V)m(a,r,R++,Z);else{var ee=D[Z],j=C*Z,J=O[j+o+1],$=O[j+o+1+d];e:for(var re=0;re<R;++re){var ne=a[re],se=C*ne;if(!($<A[se+o+1]||A[se+o+1+d]<J)){for(var ie=o+2;ie<d;++ie)if(O[j+ie+d]<A[se+ie]||A[se+ie+d]<O[j+ie])continue e;var ue,le=T[ne];if(void 0!==(ue=g?b(ee,le):b(le,ee)))return ue}}}}else h(a,r,R--,N-U)}},scanComplete:function(d,o,b,g,w,_,A,T,E,k,O){for(var D=0,S=2*d,C=o,z=o+d,B=g;B<w;++B){var U=B+(1<<28),G=S*B;c[D++]=_[G+C],c[D++]=-U,c[D++]=_[G+z],c[D++]=U}for(B=T;B<E;++B)U=B+1,c[D++]=k[S*B+C],c[D++]=-U;var Z=D>>>1;t(c,Z);var q=0;for(B=0;B<Z;++B){var W=0|c[2*B+1];if(W<0)if((U=-W)>=1<<28)a[q++]=U-(1<<28);else{var te=O[U-=1],R=S*U,N=k[R+o+1],V=k[R+o+1+d];e:for(var ee=0;ee<q;++ee){var j=a[ee],J=A[j];if(J===te)break;var $=S*j;if(!(V<_[$+o+1]||_[$+o+1+d]<N)){for(var re=o+2;re<d;++re)if(k[R+re+d]<_[$+re]||_[$+re+d]<k[R+re])continue e;var ne=b(J,te);if(void 0!==ne)return ne}}}else{for(U=W-(1<<28),ee=q-1;ee>=0;--ee)if(a[ee]===U){for(re=ee+1;re<q;++re)a[re-1]=a[re];break}--q}}}};var e=v("typedarray-pool"),n=v("bit-twiddle"),t=v("./sort"),a=e.mallocInt32(1024),r=e.mallocInt32(1024),f=e.mallocInt32(1024),s=e.mallocInt32(1024),i=e.mallocInt32(1024),l=e.mallocInt32(1024),c=e.mallocDouble(8192);function h(d,o,b,g){var w=o[g],_=d[b-1];d[w]=_,o[_]=w}function m(d,o,b,g){d[b]=g,o[g]=b}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(v,u,y){"use strict";var e=v("./lib/monotone"),n=v("./lib/triangulation"),t=v("./lib/delaunay"),a=v("./lib/filter");function r(i){return[Math.min(i[0],i[1]),Math.max(i[0],i[1])]}function f(i,l){return i[0]-l[0]||i[1]-l[1]}function s(i,l,c){return l in i?i[l]:c}u.exports=function(i,l,c){Array.isArray(l)?(c=c||{},l=l||[]):(c=l||{},l=[]);var h=!!s(c,"delaunay",!0),m=!!s(c,"interior",!0),d=!!s(c,"exterior",!0),o=!!s(c,"infinity",!1);if(!m&&!d||0===i.length)return[];var b=e(i,l);if(h||m!==d||o){for(var g=n(i.length,l.map(r).sort(f)),w=0;w<b.length;++w){var _=b[w];g.addTriangle(_[0],_[1],_[2])}return h&&t(i,g),d?m?o?a(g,0,o):g.cells():a(g,1,o):a(g,-1)}return b}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(v,u,y){"use strict";var e=v("robust-in-sphere")[4];function n(t,a,r,f,s,i){var l=a.opposite(f,s);if(!(l<0)){if(s<f){var c=f;f=s,s=c,c=i,i=l,l=c}a.isConstraint(f,s)||e(t[f],t[s],t[i],t[l])<0&&r.push(f,s)}}v("binary-search-bounds"),u.exports=function(t,a){for(var r=[],f=t.length,s=a.stars,i=0;i<f;++i)for(var l=s[i],c=1;c<l.length;c+=2)if(!((o=l[c])<i||a.isConstraint(i,o))){for(var h=l[c-1],m=-1,d=1;d<l.length;d+=2)if(l[d-1]===o){m=l[d];break}m<0||e(t[i],t[o],t[h],t[m])<0&&r.push(i,o)}for(;r.length>0;){for(var o=r.pop(),b=(h=-1,m=-1,l=s[i=r.pop()],1);b<l.length;b+=2){var g=l[b-1],w=l[b];g===o?m=w:w===o&&(h=g)}h<0||m<0||e(t[i],t[o],t[h],t[m])>=0||(a.flip(i,o),n(t,a,r,h,i,m),n(t,a,r,i,m,h),n(t,a,r,m,o,h),n(t,a,r,o,h,m))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(v,u,y){"use strict";var e,n=v("binary-search-bounds");function t(r,f,s,i,l,c,h){this.cells=r,this.neighbor=f,this.flags=i,this.constraint=s,this.active=l,this.next=c,this.boundary=h}function a(r,f){return r[0]-f[0]||r[1]-f[1]||r[2]-f[2]}u.exports=function(r,f,s){var i=function(E,k){for(var O=E.cells(),D=O.length,S=0;S<D;++S){var C=(R=O[S])[0],z=R[1],B=R[2];z<B?z<C&&(R[0]=z,R[1]=B,R[2]=C):B<C&&(R[0]=B,R[1]=C,R[2]=z)}O.sort(a);var U=new Array(D);for(S=0;S<U.length;++S)U[S]=0;var G=[],X=[],Z=new Array(3*D),q=new Array(3*D),W=null;k&&(W=[]);var te=new t(O,Z,q,U,G,X,W);for(S=0;S<D;++S)for(var R=O[S],N=0;N<3;++N){var V=Z[3*S+N]=te.locate(z=R[(N+1)%3],C=R[N],E.opposite(z,C)),ee=q[3*S+N]=E.isConstraint(C,z);V<0&&(ee?X.push(S):(G.push(S),U[S]=1),k&&W.push([z,C,-1]))}return te}(r,s);if(0===f)return s?i.cells.concat(i.boundary):i.cells;for(var l=1,c=i.active,h=i.next,m=i.flags,d=i.cells,o=i.constraint,b=i.neighbor;c.length>0||h.length>0;){for(;c.length>0;){var g=c.pop();if(m[g]!==-l){m[g]=l;for(var w=0;w<3;++w){var _=b[3*g+w];_>=0&&0===m[_]&&(o[3*g+w]?h.push(_):(c.push(_),m[_]=l))}}}var A=h;h=c,c=A,h.length=0,l=-l}var T=function(E,k,O){for(var D=0,S=0;S<E.length;++S)k[S]===O&&(E[D++]=E[S]);return E.length=D,E}(d,m,f);return s?T.concat(i.boundary):T},t.prototype.locate=(e=[0,0,0],function(r,f,s){var i=r,l=f,c=s;return f<s?f<r&&(i=f,l=s,c=r):s<r&&(i=s,l=r,c=f),i<0?-1:(e[0]=i,e[1]=l,e[2]=c,n.eq(this.cells,e,a))})},{"binary-search-bounds":31}],45:[function(v,u,y){"use strict";var e=v("binary-search-bounds"),n=v("robust-orientation")[3];function t(h,m,d,o,b){this.a=h,this.b=m,this.idx=d,this.lowerIds=o,this.upperIds=b}function a(h,m,d,o){this.a=h,this.b=m,this.type=d,this.idx=o}function r(h,m){var d=h.a[0]-m.a[0]||h.a[1]-m.a[1]||h.type-m.type;return d||(0!==h.type&&(d=n(h.a,h.b,m.b))?d:h.idx-m.idx)}function f(h,m){return n(h.a,h.b,m)}function s(h,m,d,o,b){for(var g=e.lt(m,o,f),w=e.gt(m,o,f),_=g;_<w;++_){for(var A=m[_],T=A.lowerIds,E=T.length;E>1&&n(d[T[E-2]],d[T[E-1]],o)>0;)h.push([T[E-1],T[E-2],b]),E-=1;T.length=E,T.push(b);var k=A.upperIds;for(E=k.length;E>1&&n(d[k[E-2]],d[k[E-1]],o)<0;)h.push([k[E-2],k[E-1],b]),E-=1;k.length=E,k.push(b)}}function i(h,m){var d;return(d=h.a[0]<m.a[0]?n(h.a,h.b,m.a):n(m.b,m.a,h.a))?d:(d=m.b[0]<h.b[0]?n(h.a,h.b,m.b):n(m.b,m.a,h.b))||h.idx-m.idx}function l(h,m,d){var o=e.le(h,d,i),b=h[o],g=b.upperIds,w=g[g.length-1];b.upperIds=[w],h.splice(o+1,0,new t(d.a,d.b,d.idx,[w],g))}function c(h,m,d){var o=d.a;d.a=d.b,d.b=o;var b=e.eq(h,d,i);h[b-1].upperIds=h[b].upperIds,h.splice(b,1)}u.exports=function(h,m){for(var d=h.length,o=m.length,b=[],g=0;g<d;++g)b.push(new a(h[g],null,0,g));for(g=0;g<o;++g){var w=m[g],_=h[w[0]],A=h[w[1]];_[0]<A[0]?b.push(new a(_,A,2,g),new a(A,_,1,g)):_[0]>A[0]&&b.push(new a(A,_,2,g),new a(_,A,1,g))}b.sort(r);for(var T=b[0].a[0]-(1+Math.abs(b[0].a[0]))*Math.pow(2,-52),E=[new t([T,1],[T,0],-1,[],[],[],[])],k=[],O=(g=0,b.length);g<O;++g){var D=b[g],S=D.type;0===S?s(k,E,h,D.a,D.idx):2===S?l(E,0,D):c(E,0,D)}return k}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(v,u,y){"use strict";var e=v("binary-search-bounds");function n(r,f){this.stars=r,this.edges=f}u.exports=function(r,f){for(var s=new Array(r),i=0;i<r;++i)s[i]=[];return new n(s,f)};var t=n.prototype;function a(r,f,s){for(var i=1,l=r.length;i<l;i+=2)if(r[i-1]===f&&r[i]===s)return r[i-1]=r[l-2],r[i]=r[l-1],void(r.length=l-2)}t.isConstraint=function(){var r=[0,0];function f(s,i){return s[0]-i[0]||s[1]-i[1]}return function(s,i){return r[0]=Math.min(s,i),r[1]=Math.max(s,i),e.eq(this.edges,r,f)>=0}}(),t.removeTriangle=function(r,f,s){var i=this.stars;a(i[r],f,s),a(i[f],s,r),a(i[s],r,f)},t.addTriangle=function(r,f,s){var i=this.stars;i[r].push(f,s),i[f].push(s,r),i[s].push(r,f)},t.opposite=function(r,f){for(var s=this.stars[f],i=1,l=s.length;i<l;i+=2)if(s[i]===r)return s[i-1];return-1},t.flip=function(r,f){var s=this.opposite(r,f),i=this.opposite(f,r);this.removeTriangle(r,f,s),this.removeTriangle(f,r,i),this.addTriangle(r,i,s),this.addTriangle(f,s,i)},t.edges=function(){for(var r=this.stars,f=[],s=0,i=r.length;s<i;++s)for(var l=r[s],c=0,h=l.length;c<h;c+=2)f.push([l[c],l[c+1]]);return f},t.cells=function(){for(var r=this.stars,f=[],s=0,i=r.length;s<i;++s)for(var l=r[s],c=0,h=l.length;c<h;c+=2){var m=l[c],d=l[c+1];s<Math.min(m,d)&&f.push([s,m,d])}return f}},{"binary-search-bounds":31}],47:[function(v,u,y){"use strict";u.exports=function(e){for(var n=1,t=1;t<e.length;++t)for(var a=0;a<t;++a)if(e[t]<e[a])n=-n;else if(e[a]===e[t])return 0;return n}},{}],48:[function(v,u,y){"use strict";var e=v("dup"),n=v("robust-linear-solve");function t(f,s){for(var i=0,l=f.length,c=0;c<l;++c)i+=f[c]*s[c];return i}function a(f){var s=f.length;if(0===s)return[];var i=e([f.length+1,f.length+1],1),l=e([f.length+1],1);i[s][s]=0;for(var c=0;c<s;++c){for(var h=0;h<=c;++h)i[h][c]=i[c][h]=2*t(f[c],f[h]);l[c]=t(f[c],f[c])}var m=n(i,l),d=0,o=m[s+1];for(c=0;c<o.length;++c)d+=o[c];var b=new Array(s);for(c=0;c<s;++c){o=m[c];var g=0;for(h=0;h<o.length;++h)g+=o[h];b[c]=g/d}return b}function r(f){if(0===f.length)return[];for(var s=f[0].length,i=e([s]),l=a(f),c=0;c<f.length;++c)for(var h=0;h<s;++h)i[h]+=f[c][h]*l[c];return i}r.barycenetric=a,u.exports=r},{dup:65,"robust-linear-solve":283}],49:[function(v,u,y){u.exports=function(n){for(var t=e(n),a=0,r=0;r<n.length;++r)for(var f=n[r],s=0;s<t.length;++s)a+=Math.pow(f[s]-t[s],2);return Math.sqrt(a/n.length)};var e=v("circumcenter")},{circumcenter:48}],50:[function(v,u,y){"use strict";u.exports=function(w,_,A){var T,S,z,B;if(A){T=_;for(var E=new Array(_.length),k=0;k<_.length;++k){var O=_[k];E[k]=[O[0],O[1],A[k]]}_=E}for(var D=(z=!!A,void 0,b(_,B=m(S=w,[],h(S)),z),!!B);g(w,_,!!A);)D=!0;if(A&&D)for(T.length=0,A.length=0,k=0;k<_.length;++k)T.push([(O=_[k])[0],O[1]]),A.push(O[2]);return D};var e=v("union-find"),n=v("box-intersect"),t=v("robust-segment-intersect"),a=v("big-rat"),r=v("big-rat/cmp"),f=v("big-rat/to-float"),s=v("rat-vec"),i=v("nextafter"),l=v("./lib/rat-seg-intersect");function c(w){var _=f(w);return[i(_,-1/0),i(_,1/0)]}function h(w){for(var _=new Array(w.length),A=0;A<w.length;++A){var T=w[A];_[A]=[i(T[0],-1/0),i(T[1],-1/0),i(T[0],1/0),i(T[1],1/0)]}return _}function m(w,_,A){for(var T=_.length,E=new e(T),k=[],O=0;O<_.length;++O){var D=_[O],S=c(D[0]),C=c(D[1]);k.push([i(S[0],-1/0),i(C[0],-1/0),i(S[1],1/0),i(C[1],1/0)])}n(k,function(X,Z){E.link(X,Z)});var z=!0,B=new Array(T);for(O=0;O<T;++O)(G=E.find(O))!==O&&(z=!1,w[G]=[Math.min(w[O][0],w[G][0]),Math.min(w[O][1],w[G][1])]);if(z)return null;var U=0;for(O=0;O<T;++O){var G;(G=E.find(O))===O?(B[O]=U,w[U++]=w[O]):B[O]=-1}for(w.length=U,O=0;O<T;++O)B[O]<0&&(B[O]=B[E.find(O)]);return B}function d(w,_){return w[0]-_[0]||w[1]-_[1]}function o(w,_){return w[0]-_[0]||w[1]-_[1]||(w[2]<_[2]?-1:w[2]>_[2]?1:0)}function b(w,_,A){if(0!==w.length){if(_)for(var T=0;T<w.length;++T){var E=_[(O=w[T])[0]],k=_[O[1]];O[0]=Math.min(E,k),O[1]=Math.max(E,k)}else for(T=0;T<w.length;++T){var O;E=(O=w[T])[0],k=O[1],O[0]=Math.min(E,k),O[1]=Math.max(E,k)}w.sort(A?o:d);var D=1;for(T=1;T<w.length;++T){var S=w[T-1],C=w[T];(C[0]!==S[0]||C[1]!==S[1]||A&&C[2]!==S[2])&&(w[D++]=C)}w.length=D}}function g(w,_,A){var S,C,B,T=function(S,C){for(var z=new Array(C.length),B=0;B<C.length;++B){var U=C[B],G=S[U[0]],X=S[U[1]];z[B]=[i(Math.min(G[0],X[0]),-1/0),i(Math.min(G[1],X[1]),-1/0),i(Math.max(G[0],X[0]),1/0),i(Math.max(G[1],X[1]),1/0)]}return z}(w,_),E=(S=w,C=_,B=[],n(T,function(U,G){var X=C[U],Z=C[G];X[0]!==Z[0]&&X[0]!==Z[1]&&X[1]!==Z[0]&&X[1]!==Z[1]&&t(S[X[0]],S[X[1]],S[Z[0]],S[Z[1]])&&B.push([U,G])}),B),O=function(S,C,z,B){var U=[];return n(z,B,function(G,X){var Z=C[G];if(Z[0]!==X&&Z[1]!==X){var q=S[X];t(S[Z[0]],S[Z[1]],q,q)&&U.push([G,X])}}),U}(w,_,T,h(w)),D=m(w,function(S,C,z,B,U){var G,X,Z=S.map(function(de){return[a(de[0]),a(de[1])]});for(G=0;G<z.length;++G){var q=z[G],W=q[1],te=C[X=q[0]],R=C[W],N=l(s(S[te[0]]),s(S[te[1]]),s(S[R[0]]),s(S[R[1]]));if(N){var V=S.length;S.push([f(N[0]),f(N[1])]),Z.push(N),B.push([X,V],[W,V])}}for(B.sort(function(de,ve){if(de[0]!==ve[0])return de[0]-ve[0];var _e=Z[de[1]],be=Z[ve[1]];return r(_e[0],be[0])||r(_e[1],be[1])}),G=B.length-1;G>=0;--G){var ee=C[X=(ue=B[G])[0]],j=ee[0],J=ee[1],$=S[j],re=S[J];if(($[0]-re[0]||$[1]-re[1])<0){var ne=j;j=J,J=ne}ee[0]=j;var se,ie=ee[1]=ue[1];for(U&&(se=ee[2]);G>0&&B[G-1][0]===X;){var ue,le=(ue=B[--G])[1];C.push(U?[ie,le,se]:[ie,le]),ie=le}C.push(U?[ie,J,se]:[ie,J])}return Z}(w,_,E,O,A));return b(_,D,A),!!D||E.length>0||O.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(v,u,y){"use strict";u.exports=function(l,c,h,m){var d=r(c,l),o=r(m,h),b=i(d,o);if(0===a(b))return null;var w=i(o,r(l,h)),_=n(w,b),A=s(d,_);return f(l,A)};var e=v("big-rat/mul"),n=v("big-rat/div"),t=v("big-rat/sub"),a=v("big-rat/sign"),r=v("rat-vec/sub"),f=v("rat-vec/add"),s=v("rat-vec/muls");function i(l,c){return t(e(l[0],c[1]),e(l[1],c[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(v,u,y){u.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(v,u,y){"use strict";var e=v("./colorScale"),n=v("lerp");function t(f){return[f[0]/255,f[1]/255,f[2]/255,f[3]]}function a(f){for(var s,i="#",l=0;l<3;++l)i+=("00"+(s=(s=f[l]).toString(16))).substr(s.length);return i}function r(f){return"rgba("+f.join(",")+")"}u.exports=function(f){var s,i,l,c,h,m,d,o,b,g;if(f||(f={}),o=(f.nshades||72)-1,d=f.format||"hex",(m=f.colormap)||(m="jet"),"string"==typeof m){if(m=m.toLowerCase(),!e[m])throw Error(m+" not a supported colorscale");h=e[m]}else{if(!Array.isArray(m))throw Error("unsupported colormap option",m);h=m.slice()}if(h.length>o+1)throw new Error(m+" map requires nshades to be at least size "+h.length);b=Array.isArray(f.alpha)?2!==f.alpha.length?[1,1]:f.alpha.slice():"number"==typeof f.alpha?[f.alpha,f.alpha]:[1,1],s=h.map(function(E){return Math.round(E.index*o)}),b[0]=Math.min(Math.max(b[0],0),1),b[1]=Math.min(Math.max(b[1],0),1);var w=h.map(function(E,k){var O=h[k].index,D=h[k].rgb.slice();return 4===D.length&&D[3]>=0&&D[3]<=1||(D[3]=b[0]+(b[1]-b[0])*O),D}),_=[];for(g=0;g<s.length-1;++g){c=s[g+1]-s[g],i=w[g],l=w[g+1];for(var A=0;A<c;A++){var T=A/c;_.push([Math.round(n(i[0],l[0],T)),Math.round(n(i[1],l[1],T)),Math.round(n(i[2],l[2],T)),n(i[3],l[3],T)])}}return _.push(h[h.length-1].rgb.concat(b[1])),"hex"===d?_=_.map(a):"rgbaString"===d?_=_.map(r):"float"===d&&(_=_.map(t)),_}},{"./colorScale":52,lerp:240}],54:[function(v,u,y){"use strict";u.exports=function(s,i,l,c){var h=e(i,l,c);if(0===h){var m=n(e(s,i,l)),d=n(e(s,i,c));if(m===d){if(0===m){var o=f(s,i,l);return o===f(s,i,c)?0:o?1:-1}return 0}return 0===d?m>0||f(s,i,c)?-1:1:0===m?d>0||f(s,i,l)?1:-1:n(d-m)}var g=e(s,i,l);return g>0?h>0&&e(s,i,c)>0?1:-1:g<0?h>0||e(s,i,c)>0?1:-1:e(s,i,c)>0||f(s,i,l)?1:-1};var e=v("robust-orientation"),n=v("signum"),t=v("two-sum"),a=v("robust-product"),r=v("robust-sum");function f(s,i,l){var c=t(s[0],-i[0]),h=t(s[1],-i[1]),m=t(l[0],-i[0]),d=t(l[1],-i[1]),o=r(a(c,m),a(h,d));return o[o.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(v,u,y){"use strict";u.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(v,u,y){u.exports=function(t,a){var r=t.length,f=t.length-a.length;if(f)return f;switch(r){case 0:return 0;case 1:return t[0]-a[0];case 2:return t[0]+t[1]-a[0]-a[1]||e(t[0],t[1])-e(a[0],a[1]);case 3:var s=t[0]+t[1],i=a[0]+a[1];if(f=s+t[2]-(i+a[2]))return f;var l=e(t[0],t[1]),c=e(a[0],a[1]);return e(l,t[2])-e(c,a[2])||e(l+t[2],s)-e(c+a[2],i);case 4:var h=t[0],m=t[1],d=t[2],o=t[3],b=a[0],g=a[1],w=a[2],_=a[3];return h+m+d+o-(b+g+w+_)||e(h,m,d,o)-e(b,g,w,_,b)||e(h+m,h+d,h+o,m+d,m+o,d+o)-e(b+g,b+w,b+_,g+w,g+_,w+_)||e(h+m+d,h+m+o,h+d+o,m+d+o)-e(b+g+w,b+g+_,b+w+_,g+w+_);default:for(var A=t.slice().sort(n),T=a.slice().sort(n),E=0;E<r;++E)if(f=A[E]-T[E])return f;return 0}};var e=Math.min;function n(t,a){return t-a}},{}],57:[function(v,u,y){"use strict";var e=v("compare-cell"),n=v("cell-orientation");u.exports=function(t,a){return e(t,a)||n(t)-n(a)}},{"cell-orientation":47,"compare-cell":56}],58:[function(v,u,y){"use strict";var e=v("./lib/ch1d"),n=v("./lib/ch2d"),t=v("./lib/chnd");u.exports=function(a){var r=a.length;if(0===r)return[];if(1===r)return[[0]];var f=a[0].length;return 0===f?[]:1===f?e(a):2===f?n(a):t(a,f)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(v,u,y){"use strict";u.exports=function(e){for(var n=0,t=0,a=1;a<e.length;++a)e[a][0]<e[n][0]&&(n=a),e[a][0]>e[t][0]&&(t=a);return n<t?[[n],[t]]:n>t?[[t],[n]]:[[n]]}},{}],60:[function(v,u,y){"use strict";u.exports=function(n){var t=e(n),a=t.length;if(a<=2)return[];for(var r=new Array(a),f=t[a-1],s=0;s<a;++s){var i=t[s];r[s]=[f,i],f=i}return r};var e=v("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(v,u,y){"use strict";u.exports=function(t,a){try{return e(t,!0)}catch(s){var r=n(t);if(r.length<=a)return[];var f=function(i,l){for(var c=i.length,h=new Array(c),m=0;m<l.length;++m)h[m]=i[l[m]];var d=l.length;for(m=0;m<c;++m)l.indexOf(m)<0&&(h[d++]=i[m]);return h}(t,r);return function(i,l){for(var c=i.length,h=l.length,m=0;m<c;++m)for(var d=i[m],o=0;o<d.length;++o){var b=d[o];if(b<h)d[o]=l[b];else{b-=h;for(var g=0;g<h;++g)b>=l[g]&&(b+=1);d[o]=b}}return i}(e(f,!0),r)}};var e=v("incremental-convex-hull"),n=v("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(v,u,y){"use strict";u.exports=function(e,n,t,a,r,f){var s=r-1,i=r*r,l=s*s,c=(1+2*r)*l,h=r*l,m=i*(3-2*r),d=i*s;if(e.length){f||(f=new Array(e.length));for(var o=e.length-1;o>=0;--o)f[o]=c*e[o]+h*n[o]+m*t[o]+d*a[o];return f}return c*e+h*n+m*t+d*a},u.exports.derivative=function(e,n,t,a,r,f){var s=6*r*r-6*r,i=3*r*r-4*r+1,l=-6*r*r+6*r,c=3*r*r-2*r;if(e.length){f||(f=new Array(e.length));for(var h=e.length-1;h>=0;--h)f[h]=s*e[h]+i*n[h]+l*t[h]+c*a[h];return f}return s*e+i*n+l*t[h]+c*a}},{}],63:[function(v,u,y){"use strict";var e=v("incremental-convex-hull"),n=v("uniq");function t(r,f){this.point=r,this.index=f}function a(r,f){for(var s=r.point,i=f.point,l=s.length,c=0;c<l;++c){var h=i[c]-s[c];if(h)return h}return 0}u.exports=function(r,f){var s=r.length;if(0===s)return[];var i=r[0].length;if(i<1)return[];if(1===i)return function(O,D,S){if(1===O)return S?[[-1,0]]:[];var C=D.map(function(X,Z){return[X[0],Z]});C.sort(function(X,Z){return X[0]-Z[0]});for(var z=new Array(O-1),B=1;B<O;++B)z[B-1]=[C[B-1][1],C[B][1]];return S&&z.push([-1,z[0][1]],[z[O-1][1],-1]),z}(s,r,f);for(var l=new Array(s),c=1,h=0;h<s;++h){for(var m=r[h],d=new Array(i+1),o=0,b=0;b<i;++b){var g=m[b];d[b]=g,o+=g*g}d[i]=o,l[h]=new t(d,h),c=Math.max(o,c)}n(l,a),s=l.length;var w=new Array(s+i+1),_=new Array(s+i+1),A=(i+1)*(i+1)*c,T=new Array(i+1);for(h=0;h<=i;++h)T[h]=0;for(T[i]=A,w[0]=T.slice(),_[0]=-1,h=0;h<=i;++h)(d=T.slice())[h]=1,w[h+1]=d,_[h+1]=-1;for(h=0;h<s;++h){var E=l[h];w[h+i+1]=E.point,_[h+i+1]=E.index}var k=e(w,!1);if(k=k.filter(f?function(O){for(var D=0,S=0;S<=i;++S){var C=_[O[S]];if(C<0&&++D>=2)return!1;O[S]=C}return!0}:function(O){for(var D=0;D<=i;++D){var S=_[O[D]];if(S<0)return!1;O[D]=S}return!0}),1&i)for(h=0;h<k.length;++h)d=(E=k[h])[0],E[0]=E[1],E[1]=d;return k}},{"incremental-convex-hull":233,uniq:310}],64:[function(v,u,y){(function(e){(function(){var n=!1;if("undefined"!=typeof Float64Array){var t=new Float64Array(1),a=new Uint32Array(t.buffer);t[0]=1,n=!0,1072693248===a[1]?(u.exports=function(f){return t[0]=f,[a[0],a[1]]},u.exports.pack=function(f,s){return a[0]=f,a[1]=s,t[0]},u.exports.lo=function(f){return t[0]=f,a[0]},u.exports.hi=function(f){return t[0]=f,a[1]}):1072693248===a[0]?(u.exports=function(f){return t[0]=f,[a[1],a[0]]},u.exports.pack=function(f,s){return a[1]=f,a[0]=s,t[0]},u.exports.lo=function(f){return t[0]=f,a[1]},u.exports.hi=function(f){return t[0]=f,a[0]}):n=!1}if(!n){var r=new e(8);u.exports=function(f){return r.writeDoubleLE(f,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},u.exports.pack=function(f,s){return r.writeUInt32LE(f,0,!0),r.writeUInt32LE(s,4,!0),r.readDoubleLE(0,!0)},u.exports.lo=function(f){return r.writeDoubleLE(f,0,!0),r.readUInt32LE(0,!0)},u.exports.hi=function(f){return r.writeDoubleLE(f,0,!0),r.readUInt32LE(4,!0)}}u.exports.sign=function(f){return u.exports.hi(f)>>>31},u.exports.exponent=function(f){return(u.exports.hi(f)<<1>>>21)-1023},u.exports.fraction=function(f){var s=u.exports.lo(f),i=u.exports.hi(f),l=1048575&i;return 2146435072&i&&(l+=1<<20),[s,l]},u.exports.denormalized=function(f){return!(2146435072&u.exports.hi(f))}}).call(this)}).call(this,v("buffer").Buffer)},{buffer:3}],65:[function(v,u,y){"use strict";u.exports=function(e,n){switch(void 0===n&&(n=0),typeof e){case"number":if(e>0)return function(t,a){var r,f;for(r=new Array(t),f=0;f<t;++f)r[f]=a;return r}(0|e,n);break;case"object":if("number"==typeof e.length)return function t(a,r,f){var s=0|a[f];if(s<=0)return[];var i,l=new Array(s);if(f===a.length-1)for(i=0;i<s;++i)l[i]=r;else for(i=0;i<s;++i)l[i]=t(a,r,f+1);return l}(e,n,0)}return[]}},{}],66:[function(v,u,y){"use strict";u.exports=function(n,t){var a=n.length;if("number"!=typeof t){t=0;for(var r=0;r<a;++r){var f=n[r];t=Math.max(t,f[0],f[1])}t=1+(0|t)}t|=0;var s=new Array(t);for(r=0;r<t;++r)s[r]=[];for(r=0;r<a;++r)s[(f=n[r])[0]].push(f[1]),s[f[1]].push(f[0]);for(var i=0;i<t;++i)e(s[i],function(l,c){return l-c});return s};var e=v("uniq")},{uniq:310}],67:[function(v,u,y){"use strict";u.exports=function(e,n,t){var a=n||0,r=t||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[a*e[12]+e[8],a*e[13]+e[9],a*e[14]+e[10],a*e[15]+e[11]],[r*e[12]-e[8],r*e[13]-e[9],r*e[14]-e[10],r*e[15]-e[11]]]}},{}],68:[function(v,u,y){"use strict";u.exports=function(s,i,l){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return"number"==typeof s?new a(c=f(s),c,0):new a(s,f(s.length),0);case 2:if("number"==typeof i){var c=f(s.length);return new a(s,c,+i)}l=0;case 3:if(s.length!==i.length)throw new Error("state and velocity lengths must match");return new a(s,i,l)}};var e=v("cubic-hermite"),n=v("binary-search-bounds");function t(s,i,l){return Math.min(i,Math.max(s,l))}function a(s,i,l){this.dimension=s.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var c=0;c<this.dimension;++c)this.bounds[0][c]=-1/0,this.bounds[1][c]=1/0;this._state=s.slice().reverse(),this._velocity=i.slice().reverse(),this._time=[l],this._scratch=[s.slice(),s.slice(),s.slice(),s.slice(),s.slice()]}var r=a.prototype;function f(s){for(var i=new Array(s),l=0;l<s;++l)i[l]=0;return i}r.flush=function(s){var i=n.gt(this._time,s)-1;i<=0||(this._time.splice(0,i),this._state.splice(0,i*this.dimension),this._velocity.splice(0,i*this.dimension))},r.curve=function(s){var i=this._time,l=i.length,c=n.le(i,s),h=this._scratch[0],m=this._state,d=this._velocity,o=this.dimension,b=this.bounds;if(c<0)for(var g=o-1,w=0;w<o;++w,--g)h[w]=m[g];else if(c>=l-1){g=m.length-1;var _=s-i[l-1];for(w=0;w<o;++w,--g)h[w]=m[g]+_*d[g]}else{g=o*(c+1)-1;var A=i[c],T=i[c+1]-A||1,E=this._scratch[1],k=this._scratch[2],O=this._scratch[3],D=this._scratch[4],S=!0;for(w=0;w<o;++w,--g)E[w]=m[g],O[w]=d[g]*T,k[w]=m[g+o],D[w]=d[g+o]*T,S=S&&E[w]===k[w]&&O[w]===D[w]&&0===O[w];if(S)for(w=0;w<o;++w)h[w]=E[w];else e(E,O,k,D,(s-A)/T,h)}var C=b[0],z=b[1];for(w=0;w<o;++w)h[w]=t(C[w],z[w],h[w]);return h},r.dcurve=function(s){var i=this._time,l=i.length,c=n.le(i,s),h=this._scratch[0],m=this._state,d=this._velocity,o=this.dimension;if(c>=l-1)for(var b=m.length-1,g=0;g<o;++g,--b)h[g]=d[b];else{b=o*(c+1)-1;var w=i[c],_=i[c+1]-w||1,A=this._scratch[1],T=this._scratch[2],E=this._scratch[3],k=this._scratch[4],O=!0;for(g=0;g<o;++g,--b)A[g]=m[b],E[g]=d[b]*_,T[g]=m[b+o],k[g]=d[b+o]*_,O=O&&A[g]===T[g]&&E[g]===k[g]&&0===E[g];if(O)for(g=0;g<o;++g)h[g]=0;else for(e.derivative(A,E,T,k,(s-w)/_,h),g=0;g<o;++g)h[g]/=_}return h},r.lastT=function(){var s=this._time;return s[s.length-1]},r.stable=function(){for(var s=this._velocity,i=s.length,l=this.dimension-1;l>=0;--l)if(s[--i])return!1;return!0},r.jump=function(s){var i=this.lastT(),l=this.dimension;if(!(s<i||arguments.length!==l+1)){var c=this._state,h=this._velocity,m=c.length-this.dimension,d=this.bounds,o=d[0],b=d[1];this._time.push(i,s);for(var g=0;g<2;++g)for(var w=0;w<l;++w)c.push(c[m++]),h.push(0);for(this._time.push(s),w=l;w>0;--w)c.push(t(o[w-1],b[w-1],arguments[w])),h.push(0)}},r.push=function(s){var i=this.lastT(),l=this.dimension;if(!(s<i||arguments.length!==l+1)){var c=this._state,h=this._velocity,m=c.length-this.dimension,d=s-i,o=this.bounds,b=o[0],g=o[1],w=d>1e-6?1/d:0;this._time.push(s);for(var _=l;_>0;--_){var A=t(b[_-1],g[_-1],arguments[_]);c.push(A),h.push((A-c[m++])*w)}}},r.set=function(s){var i=this.dimension;if(!(s<this.lastT()||arguments.length!==i+1)){var l=this._state,c=this._velocity,h=this.bounds,m=h[0],d=h[1];this._time.push(s);for(var o=i;o>0;--o)l.push(t(m[o-1],d[o-1],arguments[o])),c.push(0)}},r.move=function(s){var i=this.lastT(),l=this.dimension;if(!(s<=i||arguments.length!==l+1)){var c=this._state,h=this._velocity,m=c.length-this.dimension,d=this.bounds,o=d[0],b=d[1],g=s-i,w=g>1e-6?1/g:0;this._time.push(s);for(var _=l;_>0;--_){var A=arguments[_];c.push(t(o[_-1],b[_-1],c[m++]+A)),h.push(A*w)}}},r.idle=function(s){var i=this.lastT();if(!(s<i)){var l=this.dimension,c=this._state,h=this._velocity,m=c.length-l,d=this.bounds,o=d[0],b=d[1],g=s-i;this._time.push(s);for(var w=l-1;w>=0;--w)c.push(t(o[w],b[w],c[m]+g*h[m])),h.push(0),m+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(v,u,y){"use strict";function e(o,b,g,w,_,A){this._color=o,this.key=b,this.value=g,this.left=w,this.right=_,this._count=A}function n(o){return new e(o._color,o.key,o.value,o.left,o.right,o._count)}function t(o,b){return new e(o,b.key,b.value,b.left,b.right,b._count)}function a(o){o._count=1+(o.left?o.left._count:0)+(o.right?o.right._count:0)}function r(o,b){this._compare=o,this.root=b}u.exports=function(o){return new r(o||d,null)};var f=r.prototype;function s(o,b){var g;return b.left&&(g=s(o,b.left))?g:(g=o(b.key,b.value))||(b.right?s(o,b.right):void 0)}function i(o,b,g,w){var _;return b(o,w.key)<=0&&(w.left&&(_=i(o,b,g,w.left))||(_=g(w.key,w.value)))?_:w.right?i(o,b,g,w.right):void 0}function l(o,b,g,w,_){var A,T=g(o,_.key),E=g(b,_.key);return T<=0&&(_.left&&(A=l(o,b,g,w,_.left))||E>0&&(A=w(_.key,_.value)))?A:E>0&&_.right?l(o,b,g,w,_.right):void 0}function c(o,b){this.tree=o,this._stack=b}Object.defineProperty(f,"keys",{get:function(){var o=[];return this.forEach(function(b,g){o.push(b)}),o}}),Object.defineProperty(f,"values",{get:function(){var o=[];return this.forEach(function(b,g){o.push(g)}),o}}),Object.defineProperty(f,"length",{get:function(){return this.root?this.root._count:0}}),f.insert=function(o,b){for(var g=this._compare,w=this.root,_=[],A=[];w;){var T=g(o,w.key);_.push(w),A.push(T),w=T<=0?w.left:w.right}_.push(new e(0,o,b,null,null,1));for(var E=_.length-2;E>=0;--E)w=_[E],_[E]=A[E]<=0?new e(w._color,w.key,w.value,_[E+1],w.right,w._count+1):new e(w._color,w.key,w.value,w.left,_[E+1],w._count+1);for(E=_.length-1;E>1;--E){var k=_[E-1];if(w=_[E],1===k._color||1===w._color)break;var O=_[E-2];if(O.left===k)if(k.left===w){if(!(D=O.right)||0!==D._color){O._color=0,O.left=k.right,k._color=1,k.right=O,_[E-2]=k,_[E-1]=w,a(O),a(k),E>=3&&((S=_[E-3]).left===O?S.left=k:S.right=k);break}k._color=1,O.right=t(1,D),O._color=0,E-=1}else{if(!(D=O.right)||0!==D._color){k.right=w.left,O._color=0,O.left=w.right,w._color=1,w.left=k,w.right=O,_[E-2]=w,_[E-1]=k,a(O),a(k),a(w),E>=3&&((S=_[E-3]).left===O?S.left=w:S.right=w);break}k._color=1,O.right=t(1,D),O._color=0,E-=1}else if(k.right===w){if(!(D=O.left)||0!==D._color){O._color=0,O.right=k.left,k._color=1,k.left=O,_[E-2]=k,_[E-1]=w,a(O),a(k),E>=3&&((S=_[E-3]).right===O?S.right=k:S.left=k);break}k._color=1,O.left=t(1,D),O._color=0,E-=1}else{var D;if(!(D=O.left)||0!==D._color){var S;k.left=w.right,O._color=0,O.right=w.left,w._color=1,w.right=k,w.left=O,_[E-2]=w,_[E-1]=k,a(O),a(k),a(w),E>=3&&((S=_[E-3]).right===O?S.right=w:S.left=w);break}k._color=1,O.left=t(1,D),O._color=0,E-=1}}return _[0]._color=1,new r(g,_[0])},f.forEach=function(o,b,g){if(this.root)switch(arguments.length){case 1:return s(o,this.root);case 2:return i(b,this._compare,o,this.root);case 3:return this._compare(b,g)>=0?void 0:l(b,g,this._compare,o,this.root)}},Object.defineProperty(f,"begin",{get:function(){for(var o=[],b=this.root;b;)o.push(b),b=b.left;return new c(this,o)}}),Object.defineProperty(f,"end",{get:function(){for(var o=[],b=this.root;b;)o.push(b),b=b.right;return new c(this,o)}}),f.at=function(o){if(o<0)return new c(this,[]);for(var b=this.root,g=[];;){if(g.push(b),b.left){if(o<b.left._count){b=b.left;continue}o-=b.left._count}if(!o)return new c(this,g);if(o-=1,!b.right||o>=b.right._count)break;b=b.right}return new c(this,[])},f.ge=function(o){for(var b=this._compare,g=this.root,w=[],_=0;g;){var A=b(o,g.key);w.push(g),A<=0&&(_=w.length),g=A<=0?g.left:g.right}return w.length=_,new c(this,w)},f.gt=function(o){for(var b=this._compare,g=this.root,w=[],_=0;g;){var A=b(o,g.key);w.push(g),A<0&&(_=w.length),g=A<0?g.left:g.right}return w.length=_,new c(this,w)},f.lt=function(o){for(var b=this._compare,g=this.root,w=[],_=0;g;){var A=b(o,g.key);w.push(g),A>0&&(_=w.length),g=A<=0?g.left:g.right}return w.length=_,new c(this,w)},f.le=function(o){for(var b=this._compare,g=this.root,w=[],_=0;g;){var A=b(o,g.key);w.push(g),A>=0&&(_=w.length),g=A<0?g.left:g.right}return w.length=_,new c(this,w)},f.find=function(o){for(var b=this._compare,g=this.root,w=[];g;){var _=b(o,g.key);if(w.push(g),0===_)return new c(this,w);g=_<=0?g.left:g.right}return new c(this,[])},f.remove=function(o){var b=this.find(o);return b?b.remove():this},f.get=function(o){for(var b=this._compare,g=this.root;g;){var w=b(o,g.key);if(0===w)return g.value;g=w<=0?g.left:g.right}};var h=c.prototype;function m(o,b){o.key=b.key,o.value=b.value,o.left=b.left,o.right=b.right,o._color=b._color,o._count=b._count}function d(o,b){return o<b?-1:o>b?1:0}Object.defineProperty(h,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(h,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),h.clone=function(){return new c(this.tree,this._stack.slice())},h.remove=function(){var o=this._stack;if(0===o.length)return this.tree;var b=new Array(o.length),g=o[o.length-1];b[b.length-1]=new e(g._color,g.key,g.value,g.left,g.right,g._count);for(var w=o.length-2;w>=0;--w)b[w]=(g=o[w]).left===o[w+1]?new e(g._color,g.key,g.value,b[w+1],g.right,g._count):new e(g._color,g.key,g.value,g.left,b[w+1],g._count);if((g=b[b.length-1]).left&&g.right){var _=b.length;for(g=g.left;g.right;)b.push(g),g=g.right;var A=b[_-1];for(b.push(new e(g._color,A.key,A.value,g.left,g.right,g._count)),b[_-1].key=g.key,b[_-1].value=g.value,w=b.length-2;w>=_;--w)b[w]=new e((g=b[w])._color,g.key,g.value,g.left,b[w+1],g._count);b[_-1].left=b[_]}if(0===(g=b[b.length-1])._color){var T=b[b.length-2];for(T.left===g?T.left=null:T.right===g&&(T.right=null),b.pop(),w=0;w<b.length;++w)b[w]._count--;return new r(this.tree._compare,b[0])}if(g.left||g.right){for(g.left?m(g,g.left):g.right&&m(g,g.right),g._color=1,w=0;w<b.length-1;++w)b[w]._count--;return new r(this.tree._compare,b[0])}if(1===b.length)return new r(this.tree._compare,null);for(w=0;w<b.length;++w)b[w]._count--;var E=b[b.length-2];return function(k){for(var O,D,S,C,z=k.length-1;z>=0;--z){if(O=k[z],0===z)return void(O._color=1);if((D=k[z-1]).left===O){if((S=D.right).right&&0===S.right._color)return C=(S=D.right=n(S)).right=n(S.right),D.right=S.left,S.left=D,S.right=C,S._color=D._color,O._color=1,D._color=1,C._color=1,a(D),a(S),z>1&&((B=k[z-2]).left===D?B.left=S:B.right=S),void(k[z-1]=S);if(S.left&&0===S.left._color)return C=(S=D.right=n(S)).left=n(S.left),D.right=C.left,S.left=C.right,C.left=D,C.right=S,C._color=D._color,D._color=1,S._color=1,O._color=1,a(D),a(S),a(C),z>1&&((B=k[z-2]).left===D?B.left=C:B.right=C),void(k[z-1]=C);if(1===S._color){if(0===D._color)return D._color=1,void(D.right=t(0,S));D.right=t(0,S);continue}S=n(S),D.right=S.left,S.left=D,S._color=D._color,D._color=0,a(D),a(S),z>1&&((B=k[z-2]).left===D?B.left=S:B.right=S),k[z-1]=S,k[z]=D,z+1<k.length?k[z+1]=O:k.push(O),z+=2}else{if((S=D.left).left&&0===S.left._color)return C=(S=D.left=n(S)).left=n(S.left),D.left=S.right,S.right=D,S.left=C,S._color=D._color,O._color=1,D._color=1,C._color=1,a(D),a(S),z>1&&((B=k[z-2]).right===D?B.right=S:B.left=S),void(k[z-1]=S);if(S.right&&0===S.right._color)return C=(S=D.left=n(S)).right=n(S.right),D.left=C.right,S.right=C.left,C.right=D,C.left=S,C._color=D._color,D._color=1,S._color=1,O._color=1,a(D),a(S),a(C),z>1&&((B=k[z-2]).right===D?B.right=C:B.left=C),void(k[z-1]=C);if(1===S._color){if(0===D._color)return D._color=1,void(D.left=t(0,S));D.left=t(0,S);continue}var B;S=n(S),D.left=S.right,S.right=D,S._color=D._color,D._color=0,a(D),a(S),z>1&&((B=k[z-2]).right===D?B.right=S:B.left=S),k[z-1]=S,k[z]=D,z+1<k.length?k[z+1]=O:k.push(O),z+=2}}}(b),E.left===g?E.left=null:E.right=null,new r(this.tree._compare,b[0])},Object.defineProperty(h,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(h,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(h,"index",{get:function(){var o=0,b=this._stack;if(0===b.length){var g=this.tree.root;return g?g._count:0}b[b.length-1].left&&(o=b[b.length-1].left._count);for(var w=b.length-2;w>=0;--w)b[w+1]===b[w].right&&(++o,b[w].left&&(o+=b[w].left._count));return o},enumerable:!0}),h.next=function(){var o=this._stack;if(0!==o.length){var b=o[o.length-1];if(b.right)for(b=b.right;b;)o.push(b),b=b.left;else for(o.pop();o.length>0&&o[o.length-1].right===b;)b=o[o.length-1],o.pop()}},Object.defineProperty(h,"hasNext",{get:function(){var o=this._stack;if(0===o.length)return!1;if(o[o.length-1].right)return!0;for(var b=o.length-1;b>0;--b)if(o[b-1].left===o[b])return!0;return!1}}),h.update=function(o){var b=this._stack;if(0===b.length)throw new Error("Can't update empty node!");var g=new Array(b.length),w=b[b.length-1];g[g.length-1]=new e(w._color,w.key,o,w.left,w.right,w._count);for(var _=b.length-2;_>=0;--_)g[_]=(w=b[_]).left===b[_+1]?new e(w._color,w.key,w.value,g[_+1],w.right,w._count):new e(w._color,w.key,w.value,w.left,g[_+1],w._count);return new r(this.tree._compare,g[0])},h.prev=function(){var o=this._stack;if(0!==o.length){var b=o[o.length-1];if(b.left)for(b=b.left;b;)o.push(b),b=b.right;else for(o.pop();o.length>0&&o[o.length-1].left===b;)b=o[o.length-1],o.pop()}},Object.defineProperty(h,"hasPrev",{get:function(){var o=this._stack;if(0===o.length)return!1;if(o[o.length-1].left)return!0;for(var b=o.length-1;b>0;--b)if(o[b-1].right===o[b])return!0;return!1}})},{}],70:[function(v,u,y){"use strict";u.exports=function(_,A){var T=new i(_);return T.update(A),T};var e=v("./lib/text.js"),n=v("./lib/lines.js"),t=v("./lib/background.js"),a=v("./lib/cube.js"),r=v("./lib/ticks.js"),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function s(_,A){return _[0]=A[0],_[1]=A[1],_[2]=A[2],_}function i(_){this.gl=_,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=t(_)}var l=i.prototype;function c(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}l.update=function(_){function A(X,Z,q){if(q in _){var W,te=_[q],R=this[q];this[q]=W=(X?Array.isArray(te)&&Array.isArray(te[0]):Array.isArray(te))?[Z(te[0]),Z(te[1]),Z(te[2])]:[Z(te),Z(te),Z(te)];for(var N=0;N<3;++N)if(W[N]!==R[N])return!0}return!1}_=_||{};var T,E=A.bind(this,!1,Number),k=A.bind(this,!1,Boolean),O=A.bind(this,!1,String),D=A.bind(this,!0,function(X){if(Array.isArray(X)){if(3===X.length)return[+X[0],+X[1],+X[2],1];if(4===X.length)return[+X[0],+X[1],+X[2],+X[3]]}return[0,0,0,1]}),S=!1,C=!1;if("bounds"in _)for(var z=_.bounds,B=0;B<2;++B)for(var U=0;U<3;++U)z[B][U]!==this.bounds[B][U]&&(C=!0),this.bounds[B][U]=z[B][U];if("ticks"in _)for(T=_.ticks,S=!0,this.autoTicks=!1,B=0;B<3;++B)this.tickSpacing[B]=0;else E("tickSpacing")&&(this.autoTicks=!0,C=!0);if(this._firstInit&&("ticks"in _||"tickSpacing"in _||(this.autoTicks=!0),C=!0,S=!0,this._firstInit=!1),C&&this.autoTicks&&(T=r.create(this.bounds,this.tickSpacing),S=!0),S){for(B=0;B<3;++B)T[B].sort(function(X,Z){return X.x-Z.x});r.equal(T,this.ticks)?S=!1:this.ticks=T}k("tickEnable"),O("tickFont")&&(S=!0),E("tickSize"),E("tickAngle"),E("tickPad"),D("tickColor");var G=O("labels");O("labelFont")&&(G=!0),k("labelEnable"),E("labelSize"),E("labelPad"),D("labelColor"),k("lineEnable"),k("lineMirror"),E("lineWidth"),D("lineColor"),k("lineTickEnable"),k("lineTickMirror"),E("lineTickLength"),E("lineTickWidth"),D("lineTickColor"),k("gridEnable"),E("gridWidth"),D("gridColor"),k("zeroEnable"),D("zeroLineColor"),E("zeroLineWidth"),k("backgroundEnable"),D("backgroundColor"),this._text?this._text&&(G||S)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&S&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=n(this.gl,this.bounds,this.ticks))};var h=[new c,new c,new c];function m(_,A,T,E,k){for(var O=_.primalOffset,D=_.primalMinor,S=_.mirrorOffset,C=_.mirrorMinor,z=E[A],B=0;B<3;++B)if(A!==B){var U=O,G=S,X=D,Z=C;z&1<<B&&(U=S,G=O,X=C,Z=D),U[B]=T[0][B],G[B]=T[1][B],k[B]>0?(X[B]=-1,Z[B]=0):(X[B]=0,Z[B]=1)}}var d=[0,0,0],o={model:f,view:f,projection:f,_ortho:!1};l.isOpaque=function(){return!0},l.isTransparent=function(){return!1},l.drawTransparent=function(_){};var b=[0,0,0],g=[0,0,0],w=[0,0,0];l.draw=function(_){for(var A=this.gl,T=(_=_||o).model||f,E=_.view||f,k=_.projection||f,O=this.bounds,D=_._ortho||!1,S=a(T,E,k,O,D),C=S.cubeEdges,z=S.axis,Z=(D?2:1)*this.pixelRatio*(k[3]*E[12]+k[7]*E[13]+k[11]*E[14]+k[15]*E[15])/A.drawingBufferHeight,q=0;q<3;++q)this.lastCubeProps.cubeEdges[q]=C[q],this.lastCubeProps.axis[q]=z[q];var W=h;for(q=0;q<3;++q)m(h[q],q,this.bounds,C,z);A=this.gl;var te,se,ie,Te,he,me,Ae,we,Se,Pe,ze,He,R=d;for(q=0;q<3;++q)R[q]=this.backgroundEnable[q]?z[q]:0;for(this._background.draw(T,E,k,O,R,this.backgroundColor),this._lines.bind(T,E,k,this),q=0;q<3;++q){var N=[0,0,0];N[q]=z[q]>0?O[1][q]:O[0][q];for(var V=0;V<2;++V){var ee=(q+1+V)%3,j=(q+1+(1^V))%3;this.gridEnable[ee]&&this._lines.drawGrid(ee,j,this.bounds,N,this.gridColor[ee],this.gridWidth[ee]*this.pixelRatio)}for(V=0;V<2;++V)ee=(q+1+V)%3,this.zeroEnable[j=(q+1+(1^V))%3]&&Math.min(O[0][j],O[1][j])<=0&&Math.max(O[0][j],O[1][j])>=0&&this._lines.drawZero(ee,j,this.bounds,N,this.zeroLineColor[j],this.zeroLineWidth[j]*this.pixelRatio)}for(q=0;q<3;++q){this.lineEnable[q]&&this._lines.drawAxisLine(q,this.bounds,W[q].primalOffset,this.lineColor[q],this.lineWidth[q]*this.pixelRatio),this.lineMirror[q]&&this._lines.drawAxisLine(q,this.bounds,W[q].mirrorOffset,this.lineColor[q],this.lineWidth[q]*this.pixelRatio);var J=s(b,W[q].primalMinor),$=s(g,W[q].mirrorMinor),re=this.lineTickLength;for(V=0;V<3;++V){var ne=Z/T[5*V];J[V]*=re[V]*ne,$[V]*=re[V]*ne}this.lineTickEnable[q]&&this._lines.drawAxisTicks(q,W[q].primalOffset,J,this.lineTickColor[q],this.lineTickWidth[q]*this.pixelRatio),this.lineTickMirror[q]&&this._lines.drawAxisTicks(q,W[q].mirrorOffset,$,this.lineTickColor[q],this.lineTickWidth[q]*this.pixelRatio)}function ue(Te){(ie=[0,0,0])[Te]=1}for(this._lines.unbind(),this._text.bind(T,E,k,this.pixelRatio),q=0;q<3;++q){var de=W[q].primalMinor,ve=W[q].mirrorMinor,_e=s(w,W[q].primalOffset);for(V=0;V<3;++V)this.lineTickEnable[q]&&(_e[V]+=Z*de[V]*Math.max(this.lineTickLength[V],0)/T[5*V]);var be=[0,0,0];if(be[q]=1,this.tickEnable[q]){for(-3600===this.tickAngle[q]?(this.tickAngle[q]=0,this.tickAlign[q]="auto"):this.tickAlign[q]=-1,te[0]="auto"===(te=[this.tickAlign[q],.5,se=1])[0]?0:parseInt(""+te[0]),ie=[0,0,0],Ae=void 0,we=void 0,Se=void 0,Pe=void 0,ze=void 0,He=void 0,Pe=(he=de)[we=((Te=q)+2)%3],ze=(me=ve)[Ae=(Te+1)%3],He=me[we],(Se=he[Ae])>0&&He>0||Se>0&&He<0||Se<0&&He>0||Se<0&&He<0?ue(Ae):(Pe>0&&ze>0||Pe>0&&ze<0||Pe<0&&ze>0||Pe<0&&ze<0)&&ue(we),V=0;V<3;++V)_e[V]+=Z*de[V]*this.tickPad[V]/T[5*V];this._text.drawTicks(q,this.tickSize[q],this.tickAngle[q],_e,this.tickColor[q],be,ie,te)}if(this.labelEnable[q]){for(se=0,ie=[0,0,0],this.labels[q].length>4&&(ue(q),se=1),te[0]="auto"===(te=[this.labelAlign[q],.5,se])[0]?0:parseInt(""+te[0]),V=0;V<3;++V)_e[V]+=Z*de[V]*this.labelPad[V]/T[5*V];_e[q]+=.5*(O[0][q]+O[1][q]),this._text.drawLabel(q,this.labelSize[q],this.labelAngle[q],_e,this.labelColor[q],[0,0,0],ie,te)}}this._text.unbind()},l.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(v,u,y){"use strict";u.exports=function(f){for(var s=[],i=[],l=0,c=0;c<3;++c)for(var h=(c+1)%3,m=(c+2)%3,d=[0,0,0],o=[0,0,0],b=-1;b<=1;b+=2){i.push(l,l+2,l+1,l+1,l+2,l+3),d[c]=b,o[c]=b;for(var g=-1;g<=1;g+=2){d[h]=g;for(var w=-1;w<=1;w+=2)d[m]=w,s.push(d[0],d[1],d[2],o[0],o[1],o[2]),l+=1}var _=h;h=m,m=_}var A=e(f,new Float32Array(s)),T=e(f,new Uint16Array(i),f.ELEMENT_ARRAY_BUFFER),E=n(f,[{buffer:A,type:f.FLOAT,size:3,offset:0,stride:24},{buffer:A,type:f.FLOAT,size:3,offset:12,stride:24}],T),k=t(f);return k.attributes.position.location=0,k.attributes.normal.location=1,new a(f,A,E,k)};var e=v("gl-buffer"),n=v("gl-vao"),t=v("./shaders").bg;function a(f,s,i,l){this.gl=f,this.buffer=s,this.vao=i,this.shader=l}var r=a.prototype;r.draw=function(f,s,i,l,c,h){for(var m=!1,d=0;d<3;++d)m=m||c[d];if(m){var o=this.gl;o.enable(o.POLYGON_OFFSET_FILL),o.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:f,view:s,projection:i,bounds:l,enable:c,colors:h},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),o.disable(o.POLYGON_OFFSET_FILL)}},r.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(v,u,y){"use strict";u.exports=function(g,w,_,A,T){n(r,w,g),n(r,_,r);for(var E=0,k=0;k<2;++k){i[2]=A[k][2];for(var O=0;O<2;++O){i[1]=A[O][1];for(var D=0;D<2;++D)i[0]=A[D][0],c(f[E],i,r),E+=1}}var S=-1;for(k=0;k<8;++k){for(var C=f[k][3],z=0;z<3;++z)s[k][z]=f[k][z]/C;T&&(s[k][2]*=-1),C<0&&(S<0||s[k][2]<s[S][2])&&(S=k)}if(S<0){S=0;for(var B=0;B<3;++B){for(var U=(B+2)%3,G=(B+1)%3,X=-1,Z=-1,q=0;q<2;++q){var W=(R=q<<B)+(q<<U)+(1-q<<G),te=R+(1-q<<U)+(q<<G);a(s[R],s[W],s[te],l)<0||(q?X=1:Z=1)}if(X<0||Z<0)Z>X&&(S|=1<<B);else{for(q=0;q<2;++q){W=(R=q<<B)+(q<<U)+(1-q<<G);var R,N=m([f[R],f[W],f[te=R+(1-q<<U)+(q<<G)],f[R+(1<<U)+(1<<G)]]);q?X=N:Z=N}Z>X&&(S|=1<<B)}}}var V=7^S,ee=-1;for(k=0;k<8;++k)k!==S&&k!==V&&(ee<0||s[ee][1]>s[k][1])&&(ee=k);var j=-1;for(k=0;k<3;++k)($=ee^1<<k)!==S&&$!==V&&(j<0&&(j=$),(G=s[$])[0]<s[j][0]&&(j=$));var J=-1;for(k=0;k<3;++k){var $;($=ee^1<<k)!==S&&$!==V&&$!==j&&(J<0&&(J=$),(G=s[$])[0]>s[J][0]&&(J=$))}var re=d;re[0]=re[1]=re[2]=0,re[e.log2(j^ee)]=ee&j,re[e.log2(ee^J)]=ee&J;var ne=7^J;ne===S||ne===V?re[e.log2(J^(ne=7^j))]=ne&J:re[e.log2(j^ne)]=ne&j;var se=o,ie=S;for(B=0;B<3;++B)se[B]=ie&1<<B?-1:1;return b};var e=v("bit-twiddle"),n=v("gl-mat4/multiply"),t=v("split-polygon"),a=v("robust-orientation"),r=new Array(16),f=new Array(8),s=new Array(8),i=new Array(3),l=[0,0,0];function c(g,w,_){for(var A=0;A<4;++A){g[A]=_[12+A];for(var T=0;T<3;++T)g[A]+=w[T]*_[4*T+A]}}!function(){for(var g=0;g<8;++g)f[g]=[1,1,1,1],s[g]=[1,1,1]}();var h=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function m(g){for(var w=0;w<h.length;++w)if((g=t.positive(g,h[w])).length<3)return 0;var _=g[0],A=_[0]/_[3],T=_[1]/_[3],E=0;for(w=1;w+1<g.length;++w){var k=g[w],O=g[w+1];E+=Math.abs((k[0]/k[3]-A)*(O[1]/O[3]-T)-(k[1]/k[3]-T)*(O[0]/O[3]-A))}return E}var d=[1,1,1],o=[0,0,0],b={cubeEdges:d,axis:o}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(v,u,y){"use strict";u.exports=function(d,o,b){var g=[],w=[0,0,0],_=[0,0,0],A=[0,0,0],T=[0,0,0];g.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var E=0;E<3;++E){for(var k=g.length/3|0,O=0;O<b[E].length;++O){var D=+b[E][O].x;g.push(D,0,1,D,1,1,D,0,-1,D,0,-1,D,1,1,D,1,-1)}var S=g.length/3|0;w[E]=k,_[E]=S-k,k=g.length/3|0;for(var C=0;C<b[E].length;++C)g.push(D=+b[E][C].x,0,1,D,1,1,D,0,-1,D,0,-1,D,1,1,D,1,-1);S=g.length/3|0,A[E]=k,T[E]=S-k}var z=e(d,new Float32Array(g)),B=n(d,[{buffer:z,type:d.FLOAT,size:3,stride:0,offset:0}]),U=t(d);return U.attributes.position.location=0,new h(d,z,B,U,_,w,T,A)};var e=v("gl-buffer"),n=v("gl-vao"),t=v("./shaders").line,a=[0,0,0],r=[0,0,0],f=[0,0,0],s=[0,0,0],i=[1,1];function l(d){return d[0]=d[1]=d[2]=0,d}function c(d,o){return d[0]=o[0],d[1]=o[1],d[2]=o[2],d}function h(d,o,b,g,w,_,A,T){this.gl=d,this.vertBuffer=o,this.vao=b,this.shader=g,this.tickCount=w,this.tickOffset=_,this.gridCount=A,this.gridOffset=T}var m=h.prototype;m.bind=function(d,o,b){this.shader.bind(),this.shader.uniforms.model=d,this.shader.uniforms.view=o,this.shader.uniforms.projection=b,i[0]=this.gl.drawingBufferWidth,i[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=i,this.vao.bind()},m.unbind=function(){this.vao.unbind()},m.drawAxisLine=function(d,o,b,g,w){var _=l(r);this.shader.uniforms.majorAxis=r,_[d]=o[1][d]-o[0][d],this.shader.uniforms.minorAxis=_;var A,T=c(s,b);T[d]+=o[0][d],this.shader.uniforms.offset=T,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=g,(A=l(f))[(d+2)%3]=1,this.shader.uniforms.screenAxis=A,this.vao.draw(this.gl.TRIANGLES,6),(A=l(f))[(d+1)%3]=1,this.shader.uniforms.screenAxis=A,this.vao.draw(this.gl.TRIANGLES,6)},m.drawAxisTicks=function(d,o,b,g,w){if(this.tickCount[d]){var _=l(a);_[d]=1,this.shader.uniforms.majorAxis=_,this.shader.uniforms.offset=o,this.shader.uniforms.minorAxis=b,this.shader.uniforms.color=g,this.shader.uniforms.lineWidth=w;var A=l(f);A[d]=1,this.shader.uniforms.screenAxis=A,this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d])}},m.drawGrid=function(d,o,b,g,w,_){if(this.gridCount[d]){var A=l(r);A[o]=b[1][o]-b[0][o],this.shader.uniforms.minorAxis=A;var T=c(s,g);T[o]+=b[0][o],this.shader.uniforms.offset=T;var E=l(a);E[d]=1,this.shader.uniforms.majorAxis=E;var k=l(f);k[d]=1,this.shader.uniforms.screenAxis=k,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,this.gridCount[d],this.gridOffset[d])}},m.drawZero=function(d,o,b,g,w,_){var A=l(r);this.shader.uniforms.majorAxis=A,A[d]=b[1][d]-b[0][d],this.shader.uniforms.minorAxis=A;var T=c(s,g);T[d]+=b[0][d],this.shader.uniforms.offset=T;var E=l(f);E[o]=1,this.shader.uniforms.screenAxis=E,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,6)},m.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(v,u,y){"use strict";var e=v("glslify"),n=v("gl-shader"),t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);y.line=function(l){return n(l,t,a,null,[{name:"position",type:"vec3"}])};var r=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),f=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);y.text=function(l){return n(l,r,f,null,[{name:"position",type:"vec3"}])};var s=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);y.bg=function(l){return n(l,s,i,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(v,u,y){(function(e){(function(){"use strict";u.exports=function(h,m,d,o,b,g){var w=n(h),_=t(h,[{buffer:w,size:3}]),A=r(h);A.attributes.position.location=0;var T=new i(h,A,w,_);return T.update(m,d,o,b,g),T};var n=v("gl-buffer"),t=v("gl-vao"),a=v("vectorize-text"),r=v("./shaders").text,f=window||e.global||{},s=f.__TEXT_CACHE||{};function i(h,m,d,o){this.gl=h,this.shader=m,this.buffer=d,this.vao=o,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}f.__TEXT_CACHE={};var l=i.prototype,c=[0,0];l.bind=function(h,m,d,o){this.vao.bind(),this.shader.bind();var b=this.shader.uniforms;b.model=h,b.view=m,b.projection=d,b.pixelScale=o,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=c},l.unbind=function(){this.vao.unbind()},l.update=function(h,m,d,o,b){var g=[];function w(S,C,z,B,U,G){var X=s[z];X||(X=s[z]={});var Z=X[C];Z||(Z=X[C]=function(J,$){try{return a(J,$)}catch(re){return console.warn('error vectorizing text:"'+J+'" error:',re),{cells:[],positions:[]}}}(C,{triangles:!0,font:z,textAlign:"center",textBaseline:"middle",lineSpacing:U,styletags:G}));for(var q=(B||12)/12,W=Z.positions,te=Z.cells,R=0,N=te.length;R<N;++R)for(var V=te[R],ee=2;ee>=0;--ee){var j=W[V[ee]];g.push(q*j[0],-q*j[1],S)}}for(var _=[0,0,0],A=[0,0,0],T=[0,0,0],E=[0,0,0],k={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},O=0;O<3;++O){T[O]=g.length/3|0,w(.5*(h[0][O]+h[1][O]),m[O],d[O],12,1.25,k),E[O]=(g.length/3|0)-T[O],_[O]=g.length/3|0;for(var D=0;D<o[O].length;++D)o[O][D].text&&w(o[O][D].x,o[O][D].text,o[O][D].font||b,o[O][D].fontSize||12,1.25,k);A[O]=(g.length/3|0)-_[O]}this.buffer.update(g),this.tickOffset=_,this.tickCount=A,this.labelOffset=T,this.labelCount=E},l.drawTicks=function(h,m,d,o,b,g,w,_){this.tickCount[h]&&(this.shader.uniforms.axis=g,this.shader.uniforms.color=b,this.shader.uniforms.angle=d,this.shader.uniforms.scale=m,this.shader.uniforms.offset=o,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=_,this.vao.draw(this.gl.TRIANGLES,this.tickCount[h],this.tickOffset[h]))},l.drawLabel=function(h,m,d,o,b,g,w,_){this.labelCount[h]&&(this.shader.uniforms.axis=g,this.shader.uniforms.color=b,this.shader.uniforms.angle=d,this.shader.uniforms.scale=m,this.shader.uniforms.offset=o,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=_,this.vao.draw(this.gl.TRIANGLES,this.labelCount[h],this.labelOffset[h]))},l.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,v("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(v,u,y){"use strict";function e(n,t){var a=n+"",r=a.indexOf("."),f=0;r>=0&&(f=a.length-r-1);var s=Math.pow(10,f),i=Math.round(n*t*s),l=i+"";if(l.indexOf("e")>=0)return l;var c=i/s,h=i%s;i<0?(c=0|-Math.ceil(c),h=0|-h):(c=0|Math.floor(c),h|=0);var m=""+c;if(i<0&&(m="-"+m),f){for(var d=""+h;d.length<f;)d="0"+d;return m+"."+d}return m}y.create=function(n,t){for(var a=[],r=0;r<3;++r){for(var f=[],s=0;s*t[r]<=n[1][r];++s)f.push({x:s*t[r],text:e(t[r],s)});for(s=-1;s*t[r]>=n[0][r];--s)f.push({x:s*t[r],text:e(t[r],s)});a.push(f)}return a},y.equal=function(n,t){for(var a=0;a<3;++a){if(n[a].length!==t[a].length)return!1;for(var r=0;r<n[a].length;++r){var f=n[a][r],s=t[a][r];if(f.x!==s.x||f.text!==s.text||f.font!==s.font||f.fontColor!==s.fontColor||f.fontSize!==s.fontSize||f.dx!==s.dx||f.dy!==s.dy)return!1}}return!0}},{}],77:[function(v,u,y){"use strict";u.exports=function(b,g,w,_,A){var T=g.model||s,E=g.view||s,k=g.projection||s,O=g._ortho||!1,D=b.bounds,S=(A=A||t(T,E,k,D,O)).axis;a(i,E,T),a(i,k,i);for(var C=d,z=0;z<3;++z)C[z].lo=1/0,C[z].hi=-1/0,C[z].pixelsPerDataUnit=1/0;var B=e(r(i,i));r(i,i);for(var U=0;U<3;++U){var G=(U+1)%3,X=(U+2)%3,Z=o;e:for(z=0;z<2;++z){var q=[];if(S[U]<0!=!!z){Z[U]=D[z][U];for(var W=0;W<2;++W){Z[G]=D[W^z][G];for(var te=0;te<2;++te)Z[X]=D[te^W^z][X],q.push(Z.slice())}var R=O?5:4;for(W=R;W===R;++W){if(0===q.length)continue e;q=n.positive(q,B[W])}for(W=0;W<q.length;++W){var N=m(o,i,X=q[W],w,_);for(te=0;te<3;++te)C[te].lo=Math.min(C[te].lo,X[te]),C[te].hi=Math.max(C[te].hi,X[te]),te!==U&&(C[te].pixelsPerDataUnit=Math.min(C[te].pixelsPerDataUnit,Math.abs(N[te])))}}}}return C};var e=v("extract-frustum-planes"),n=v("split-polygon"),t=v("./lib/cube.js"),a=v("gl-mat4/multiply"),r=v("gl-mat4/transpose"),f=v("gl-vec4/transformMat4"),s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),i=new Float32Array(16);function l(b,g,w){this.lo=b,this.hi=g,this.pixelsPerDataUnit=w}var c=[0,0,0,1],h=[0,0,0,1];function m(b,g,w,_,A){for(var T=0;T<3;++T){for(var E=c,k=h,O=0;O<3;++O)k[O]=E[O]=w[O];k[3]=E[3]=1,k[T]+=1,f(k,k,g),k[3]<0&&(b[T]=1/0),E[T]-=1,f(E,E,g),E[3]<0&&(b[T]=1/0);var D=(E[0]/E[3]-k[0]/k[3])*_,S=(E[1]/E[3]-k[1]/k[3])*A;b[T]=.25*Math.sqrt(D*D+S*S)}return b}var d=[new l(1/0,-1/0,1/0),new l(1/0,-1/0,1/0),new l(1/0,-1/0,1/0)],o=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(v,u,y){"use strict";var e=v("typedarray-pool"),n=v("ndarray-ops"),t=v("ndarray"),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function r(l,c,h,m,d){this.gl=l,this.type=c,this.handle=h,this.length=m,this.usage=d}var f=r.prototype;function s(l,c,h,m,d,o){var b=d.length*d.BYTES_PER_ELEMENT;if(o<0)return l.bufferData(c,d,m),b;if(b+o>h)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return l.bufferSubData(c,o,d),h}f.bind=function(){this.gl.bindBuffer(this.type,this.handle)},f.unbind=function(){this.gl.bindBuffer(this.type,null)},f.dispose=function(){this.gl.deleteBuffer(this.handle)},f.update=function(l,c){if("number"!=typeof c&&(c=-1),this.bind(),"object"==typeof l&&void 0!==l.shape){var h=l.dtype;if(a.indexOf(h)<0&&(h="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(h=gl.getExtension("OES_element_index_uint")&&"uint16"!==h?"uint32":"uint16"),h===l.dtype&&function(b,g){for(var w=1,_=g.length-1;_>=0;--_){if(g[_]!==w)return!1;w*=b[_]}return!0}(l.shape,l.stride))this.length=s(this.gl,this.type,this.length,this.usage,0===l.offset&&l.data.length===l.shape[0]?l.data:l.data.subarray(l.offset,l.shape[0]),c);else{var m=e.malloc(l.size,h),d=t(m,l.shape);n.assign(d,l),this.length=s(this.gl,this.type,this.length,this.usage,c<0?m:m.subarray(0,l.size),c),e.free(m)}}else if(Array.isArray(l)){var o;o=function(l,c){for(var h=e.malloc(l.length,c),m=l.length,d=0;d<m;++d)h[d]=l[d];return h}(l,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=s(this.gl,this.type,this.length,this.usage,c<0?o:o.subarray(0,l.length),c),e.free(o)}else if("object"==typeof l&&"number"==typeof l.length)this.length=s(this.gl,this.type,this.length,this.usage,l,c);else{if("number"!=typeof l&&void 0!==l)throw new Error("gl-buffer: Invalid data type");if(c>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(l|=0)<=0&&(l=1),this.gl.bufferData(this.type,0|l,this.usage),this.length=l}},u.exports=function(l,c,h,m){if(m=m||l.DYNAMIC_DRAW,(h=h||l.ARRAY_BUFFER)!==l.ARRAY_BUFFER&&h!==l.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(m!==l.DYNAMIC_DRAW&&m!==l.STATIC_DRAW&&m!==l.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var d=l.createBuffer(),o=new r(l,h,d,0,m);return o.update(c),o}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(v,u,y){"use strict";var e=v("gl-vec3");u.exports=function(t,a){var r=t.positions,f=t.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:t.vertexIntensityBounds,vectors:[],cells:[],coneOffset:t.coneOffset,colormap:t.colormap};if(0===t.positions.length)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),s;for(var i=0,l=1/0,c=-1/0,h=1/0,m=-1/0,d=1/0,o=-1/0,b=null,g=null,w=[],_=1/0,A=!1,T=0;T<r.length;T++){var E=r[T];l=Math.min(E[0],l),c=Math.max(E[0],c),h=Math.min(E[1],h),m=Math.max(E[1],m),d=Math.min(E[2],d),o=Math.max(E[2],o);var k=f[T];if(e.length(k)>i&&(i=e.length(k)),T){var O=2*e.distance(b,E)/(e.length(g)+e.length(k));O?(_=Math.min(_,O),A=!1):A=!0}A||(b=E,g=k),w.push(k)}var S=[c,m,o];a&&(a[0]=[l,h,d],a[1]=S),0===i&&(i=1);var C=1/i;isFinite(_)||(_=1),s.vectorScale=_;var z=t.coneSize||.5;t.absoluteConeSize&&(z=t.absoluteConeSize*C),s.coneScale=z,T=0;for(var B=0;T<r.length;T++)for(var U=(E=r[T])[0],G=E[1],X=E[2],Z=w[T],q=e.length(Z)*C,W=0;W<8;W++){s.positions.push([U,G,X,B++]),s.positions.push([U,G,X,B++]),s.positions.push([U,G,X,B++]),s.positions.push([U,G,X,B++]),s.positions.push([U,G,X,B++]),s.positions.push([U,G,X,B++]),s.vectors.push(Z),s.vectors.push(Z),s.vectors.push(Z),s.vectors.push(Z),s.vectors.push(Z),s.vectors.push(Z),s.vertexIntensity.push(q,q,q),s.vertexIntensity.push(q,q,q);var te=s.positions.length;s.cells.push([te-6,te-5,te-4],[te-3,te-2,te-1])}return s};var n=v("./lib/shaders");u.exports.createMesh=v("./create_mesh"),u.exports.createConeMesh=function(t,a){return u.exports.createMesh(t,a,{shaders:n,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(v,u,y){"use strict";var e=v("gl-shader"),n=v("gl-buffer"),t=v("gl-vao"),a=v("gl-texture2d"),r=v("gl-mat4/multiply"),f=v("gl-mat4/invert"),s=v("ndarray"),i=v("colormap"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(o,b,g,w,_,A,T,E,k,O,D){this.gl=o,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=b,this.dirty=!0,this.triShader=g,this.pickShader=w,this.trianglePositions=_,this.triangleVectors=A,this.triangleColors=E,this.triangleUVs=k,this.triangleIds=T,this.triangleVAO=O,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=D,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=l,this._view=l,this._projection=l,this._resolution=[1,1]}var h=c.prototype;function m(o,b){var g=e(o,b.meshShader.vertex,b.meshShader.fragment,null,b.meshShader.attributes);return g.attributes.position.location=0,g.attributes.color.location=2,g.attributes.uv.location=3,g.attributes.vector.location=4,g}function d(o,b){var g=e(o,b.pickShader.vertex,b.pickShader.fragment,null,b.pickShader.attributes);return g.attributes.position.location=0,g.attributes.id.location=1,g.attributes.vector.location=4,g}h.isOpaque=function(){return this.opacity>=1},h.isTransparent=function(){return this.opacity<1},h.pickSlots=1,h.setPickBase=function(o){this.pickId=o},h.update=function(o){o=o||{};var b=this.gl;this.dirty=!0,"lightPosition"in o&&(this.lightPosition=o.lightPosition),"opacity"in o&&(this.opacity=o.opacity),"ambient"in o&&(this.ambientLight=o.ambient),"diffuse"in o&&(this.diffuseLight=o.diffuse),"specular"in o&&(this.specularLight=o.specular),"roughness"in o&&(this.roughness=o.roughness),"fresnel"in o&&(this.fresnel=o.fresnel),void 0!==o.tubeScale&&(this.tubeScale=o.tubeScale),void 0!==o.vectorScale&&(this.vectorScale=o.vectorScale),void 0!==o.coneScale&&(this.coneScale=o.coneScale),void 0!==o.coneOffset&&(this.coneOffset=o.coneOffset),o.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=b.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=b.LINEAR,this.texture.setPixels(function(ee){for(var j=i({colormap:ee,nshades:256,format:"rgba"}),J=new Uint8Array(1024),$=0;$<256;++$){for(var re=j[$],ne=0;ne<3;++ne)J[4*$+ne]=re[ne];J[4*$+3]=255*re[3]}return s(J,[256,256,4],[4,0,1])}(o.colormap)),this.texture.generateMipmap());var g=o.cells,w=o.positions,_=o.vectors;if(w&&g&&_){var A=[],T=[],E=[],k=[],O=[];this.cells=g,this.positions=w,this.vectors=_;var D=o.meshColor||[1,1,1,1],S=o.vertexIntensity,C=1/0,z=-1/0;if(S)if(o.vertexIntensityBounds)C=+o.vertexIntensityBounds[0],z=+o.vertexIntensityBounds[1];else for(var B=0;B<S.length;++B){var U=S[B];C=Math.min(C,U),z=Math.max(z,U)}else for(B=0;B<w.length;++B)U=w[B][2],C=Math.min(C,U),z=Math.max(z,U);for(this.intensity=S||function(ee){for(var j=ee.length,J=new Array(j),$=0;$<j;++$)J[$]=ee[$][2];return J}(w),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],B=0;B<w.length;++B)for(var G=w[B],X=0;X<3;++X)!isNaN(G[X])&&isFinite(G[X])&&(this.bounds[0][X]=Math.min(this.bounds[0][X],G[X]),this.bounds[1][X]=Math.max(this.bounds[1][X],G[X]));var Z=0;e:for(B=0;B<g.length;++B){var q=g[B];switch(q.length){case 3:for(X=0;X<3;++X){G=w[te=q[X]];for(var W=0;W<3;++W)if(isNaN(G[W])||!isFinite(G[W]))continue e}for(X=0;X<3;++X){var te;G=w[te=q[2-X]],A.push(G[0],G[1],G[2],G[3]);var R=_[te];T.push(R[0],R[1],R[2],R[3]||0);var N;E.push(D[0],D[1],D[2],3===D.length?1:D[3]),k.push((N=S?[(S[te]-C)/(z-C),0]:[(G[2]-C)/(z-C),0])[0],N[1]),O.push(B)}Z+=1}}this.triangleCount=Z,this.trianglePositions.update(A),this.triangleVectors.update(T),this.triangleColors.update(E),this.triangleUVs.update(k),this.triangleIds.update(new Uint32Array(O))}},h.drawTransparent=h.draw=function(o){for(var b=this.gl,g=(o=o||{}).model||l,w=o.view||l,_=o.projection||l,A=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],T=0;T<3;++T)A[0][T]=Math.max(A[0][T],this.clipBounds[0][T]),A[1][T]=Math.min(A[1][T],this.clipBounds[1][T]);var E={model:g,view:w,projection:_,inverseModel:l.slice(),clipBounds:A,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=f(E.inverseModel,E.model),b.disable(b.CULL_FACE),this.texture.bind(0);var k=new Array(16);for(r(k,E.view,E.model),r(k,E.projection,k),f(k,k),T=0;T<3;++T)E.eyePosition[T]=k[12+T]/k[15];var O=k[15];for(T=0;T<3;++T)O+=this.lightPosition[T]*k[4*T+3];for(T=0;T<3;++T){for(var D=k[12+T],S=0;S<3;++S)D+=k[4*S+T]*this.lightPosition[S];E.lightPosition[T]=D/O}if(this.triangleCount>0){var C=this.triShader;C.bind(),C.uniforms=E,this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},h.drawPick=function(o){for(var b=this.gl,g=(o=o||{}).model||l,w=o.view||l,_=o.projection||l,A=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],T=0;T<3;++T)A[0][T]=Math.max(A[0][T],this.clipBounds[0][T]),A[1][T]=Math.min(A[1][T],this.clipBounds[1][T]);this._model=[].slice.call(g),this._view=[].slice.call(w),this._projection=[].slice.call(_),this._resolution=[b.drawingBufferWidth,b.drawingBufferHeight];var E={model:g,view:w,projection:_,clipBounds:A,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},k=this.pickShader;k.bind(),k.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},h.pick=function(o){if(!o||o.id!==this.pickId)return null;var b=o.value[0]+256*o.value[1]+65536*o.value[2],g=this.cells[b],w=this.positions[g[1]].slice(0,3),_={position:w,dataCoordinate:w,index:Math.floor(g[1]/48)};return"cone"===this.traceType?_.index=Math.floor(g[1]/48):"streamtube"===this.traceType&&(_.intensity=this.intensity[g[1]],_.velocity=this.vectors[g[1]].slice(0,3),_.divergence=this.vectors[g[1]][3],_.index=b),_},h.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},u.exports=function(o,b,g){var w=g.shaders;1===arguments.length&&(o=(b=o).gl);var _=m(o,w),A=d(o,w),T=a(o,s(new Uint8Array([255,255,255,255]),[1,1,4]));T.generateMipmap(),T.minFilter=o.LINEAR_MIPMAP_LINEAR,T.magFilter=o.LINEAR;var E=n(o),k=n(o),O=n(o),D=n(o),S=n(o),z=new c(o,T,_,A,E,k,S,O,D,t(o,[{buffer:E,type:o.FLOAT,size:4},{buffer:S,type:o.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:O,type:o.FLOAT,size:4},{buffer:D,type:o.FLOAT,size:2},{buffer:k,type:o.FLOAT,size:4}]),g.traceType||"cone");return z.update(b),z}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(v,u,y){var e=v("glslify"),n=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),t=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);y.meshShader={vertex:n,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},y.pickShader={vertex:a,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(v,u,y){u.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(v,u,y){var e=v("./1.0/numbers");u.exports=function(n){return e[n]}},{"./1.0/numbers":82}],84:[function(v,u,y){"use strict";u.exports=function(c){var h=c.gl,m=e(h),d=n(h,[{buffer:m,type:h.FLOAT,size:3,offset:0,stride:40},{buffer:m,type:h.FLOAT,size:4,offset:12,stride:40},{buffer:m,type:h.FLOAT,size:3,offset:28,stride:40}]),o=t(h);o.attributes.position.location=0,o.attributes.color.location=1,o.attributes.offset.location=2;var b=new r(h,m,d,o);return b.update(c),b};var e=v("gl-buffer"),n=v("gl-vao"),t=v("./shaders/index"),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(c,h,m,d){this.gl=c,this.shader=d,this.buffer=h,this.vao=m,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var f=r.prototype;function s(c,h){for(var m=0;m<3;++m)c[0][m]=Math.min(c[0][m],h[m]),c[1][m]=Math.max(c[1][m],h[m])}f.isOpaque=function(){return!this.hasAlpha},f.isTransparent=function(){return this.hasAlpha},f.drawTransparent=f.draw=function(c){var h=this.gl,m=this.shader.uniforms;this.shader.bind();var d=m.view=c.view||a,o=m.projection=c.projection||a;m.model=c.model||a,m.clipBounds=this.clipBounds,m.opacity=this.opacity;var A=(c._ortho?2:1)*this.pixelRatio*(o[3]*d[12]+o[7]*d[13]+o[11]*d[14]+o[15]*d[15])/h.drawingBufferHeight;this.vao.bind();for(var T=0;T<3;++T)h.lineWidth(this.lineWidth[T]*this.pixelRatio),m.capSize=this.capSize[T]*A,this.lineCount[T]&&h.drawArrays(h.LINES,this.lineOffset[T],this.lineCount[T]);this.vao.unbind()};var i=function(){for(var c=new Array(3),h=0;h<3;++h){for(var m=[],d=1;d<=2;++d)for(var o=-1;o<=1;o+=2){var b=[0,0,0];b[(d+h)%3]=o,m.push(b)}c[h]=m}return c}();function l(c,h,m,d){for(var o=i[d],b=0;b<o.length;++b){var g=o[b];c.push(h[0],h[1],h[2],m[0],m[1],m[2],m[3],g[0],g[1],g[2])}return o.length}f.update=function(c){"lineWidth"in(c=c||{})&&(this.lineWidth=c.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in c&&(this.capSize=c.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in c&&(this.opacity=+c.opacity,this.opacity<1&&(this.hasAlpha=!0));var h=c.color||[[0,0,0],[0,0,0],[0,0,0]],m=c.position,d=c.error;if(Array.isArray(h[0])||(h=[h,h,h]),m&&d){var o=[],b=m.length,g=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var w=0;w<3;++w){this.lineOffset[w]=g;e:for(var _=0;_<b;++_){for(var A=m[_],T=0;T<3;++T)if(isNaN(A[T])||!isFinite(A[T]))continue e;var O,E=d[_],k=h[w];Array.isArray(k[0])&&(k=h[_]),3===k.length?k=[k[0],k[1],k[2],1]:4===k.length&&(k=[k[0],k[1],k[2],k[3]],!this.hasAlpha&&k[3]<1&&(this.hasAlpha=!0)),isNaN(E[0][w])||isNaN(E[1][w])||(E[0][w]<0&&((O=A.slice())[w]+=E[0][w],o.push(A[0],A[1],A[2],k[0],k[1],k[2],k[3],0,0,0,O[0],O[1],O[2],k[0],k[1],k[2],k[3],0,0,0),s(this.bounds,O),g+=2+l(o,O,k,w)),E[1][w]>0&&((O=A.slice())[w]+=E[1][w],o.push(A[0],A[1],A[2],k[0],k[1],k[2],k[3],0,0,0,O[0],O[1],O[2],k[0],k[1],k[2],k[3],0,0,0),s(this.bounds,O),g+=2+l(o,O,k,w)))}this.lineCount[w]=g-this.lineOffset[w]}this.buffer.update(o)}},f.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(v,u,y){"use strict";var e=v("glslify"),n=v("gl-shader"),t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);u.exports=function(r){return n(r,t,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(v,u,y){"use strict";var e=v("gl-texture2d");u.exports=function(b,g,w,_){n||(n=b.FRAMEBUFFER_UNSUPPORTED,t=b.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=b.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,r=b.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var A=b.getExtension("WEBGL_draw_buffers");if(!f&&A&&function(C,z){var B=C.getParameter(z.MAX_COLOR_ATTACHMENTS_WEBGL);f=new Array(B+1);for(var U=0;U<=B;++U){for(var G=new Array(B),X=0;X<U;++X)G[X]=C.COLOR_ATTACHMENT0+X;for(X=U;X<B;++X)G[X]=C.NONE;f[U]=G}}(b,A),Array.isArray(g)&&(_=w,w=0|g[1],g=0|g[0]),"number"!=typeof g)throw new Error("gl-fbo: Missing shape parameter");var T=b.getParameter(b.MAX_RENDERBUFFER_SIZE);if(g<0||g>T||w<0||w>T)throw new Error("gl-fbo: Parameters are too large for FBO");var E=1;if("color"in(_=_||{})){if((E=Math.max(0|_.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(E>1){if(!A)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(E>b.getParameter(A.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+E+" draw buffers")}}var k=b.UNSIGNED_BYTE,O=b.getExtension("OES_texture_float");if(_.float&&E>0){if(!O)throw new Error("gl-fbo: Context does not support floating point textures");k=b.FLOAT}else _.preferFloat&&E>0&&O&&(k=b.FLOAT);var D=!0;"depth"in _&&(D=!!_.depth);var S=!1;return"stencil"in _&&(S=!!_.stencil),new m(b,g,w,k,E,D,S,A)};var n,t,a,r,f=null;function s(b){return[b.getParameter(b.FRAMEBUFFER_BINDING),b.getParameter(b.RENDERBUFFER_BINDING),b.getParameter(b.TEXTURE_BINDING_2D)]}function i(b,g){b.bindFramebuffer(b.FRAMEBUFFER,g[0]),b.bindRenderbuffer(b.RENDERBUFFER,g[1]),b.bindTexture(b.TEXTURE_2D,g[2])}function l(b){switch(b){case n:throw new Error("gl-fbo: Framebuffer unsupported");case t:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case r:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function c(b,g,w,_,A,T){if(!_)return null;var E=e(b,g,w,A,_);return E.magFilter=b.NEAREST,E.minFilter=b.NEAREST,E.mipSamples=1,E.bind(),b.framebufferTexture2D(b.FRAMEBUFFER,T,b.TEXTURE_2D,E.handle,0),E}function h(b,g,w,_,A){var T=b.createRenderbuffer();return b.bindRenderbuffer(b.RENDERBUFFER,T),b.renderbufferStorage(b.RENDERBUFFER,_,g,w),b.framebufferRenderbuffer(b.FRAMEBUFFER,A,b.RENDERBUFFER,T),T}function m(b,g,w,_,A,T,E,k){this.gl=b,this._shape=[0|g,0|w],this._destroyed=!1,this._ext=k,this.color=new Array(A);for(var O=0;O<A;++O)this.color[O]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=_,this._useDepth=T,this._useStencil=E;var D=this,S=[0|g,0|w];Object.defineProperties(S,{0:{get:function(){return D._shape[0]},set:function(C){return D.width=C}},1:{get:function(){return D._shape[1]},set:function(C){return D.height=C}}}),this._shapeVector=S,function(C){var z=s(C.gl),B=C.gl,U=C.handle=B.createFramebuffer(),G=C._shape[0],X=C._shape[1],Z=C.color.length,q=C._ext,W=C._useStencil,te=C._useDepth,R=C._colorType;B.bindFramebuffer(B.FRAMEBUFFER,U);for(var N=0;N<Z;++N)C.color[N]=c(B,G,X,R,B.RGBA,B.COLOR_ATTACHMENT0+N);0===Z?(C._color_rb=h(B,G,X,B.RGBA4,B.COLOR_ATTACHMENT0),q&&q.drawBuffersWEBGL(f[0])):Z>1&&q.drawBuffersWEBGL(f[Z]);var V=B.getExtension("WEBGL_depth_texture");V?W?C.depth=c(B,G,X,V.UNSIGNED_INT_24_8_WEBGL,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):te&&(C.depth=c(B,G,X,B.UNSIGNED_SHORT,B.DEPTH_COMPONENT,B.DEPTH_ATTACHMENT)):te&&W?C._depth_rb=h(B,G,X,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):te?C._depth_rb=h(B,G,X,B.DEPTH_COMPONENT16,B.DEPTH_ATTACHMENT):W&&(C._depth_rb=h(B,G,X,B.STENCIL_INDEX,B.STENCIL_ATTACHMENT));var ee=B.checkFramebufferStatus(B.FRAMEBUFFER);if(ee!==B.FRAMEBUFFER_COMPLETE){for(C._destroyed=!0,B.bindFramebuffer(B.FRAMEBUFFER,null),B.deleteFramebuffer(C.handle),C.handle=null,C.depth&&(C.depth.dispose(),C.depth=null),C._depth_rb&&(B.deleteRenderbuffer(C._depth_rb),C._depth_rb=null),N=0;N<C.color.length;++N)C.color[N].dispose(),C.color[N]=null;C._color_rb&&(B.deleteRenderbuffer(C._color_rb),C._color_rb=null),i(B,z),l(ee)}i(B,z)}(this)}var d=m.prototype;function o(b,g,w){if(b._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(b._shape[0]!==g||b._shape[1]!==w){var _=b.gl,A=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(g<0||g>A||w<0||w>A)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");b._shape[0]=g,b._shape[1]=w;for(var T=s(_),E=0;E<b.color.length;++E)b.color[E].shape=b._shape;b._color_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,b._color_rb),_.renderbufferStorage(_.RENDERBUFFER,_.RGBA4,b._shape[0],b._shape[1])),b.depth&&(b.depth.shape=b._shape),b._depth_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,b._depth_rb),b._useDepth&&b._useStencil?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_STENCIL,b._shape[0],b._shape[1]):b._useDepth?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_COMPONENT16,b._shape[0],b._shape[1]):b._useStencil&&_.renderbufferStorage(_.RENDERBUFFER,_.STENCIL_INDEX,b._shape[0],b._shape[1])),_.bindFramebuffer(_.FRAMEBUFFER,b.handle);var k=_.checkFramebufferStatus(_.FRAMEBUFFER);k!==_.FRAMEBUFFER_COMPLETE&&(b.dispose(),i(_,T),l(k)),i(_,T)}}Object.defineProperties(d,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(b){if(Array.isArray(b)||(b=[0|b,0|b]),2!==b.length)throw new Error("gl-fbo: Shape vector must be length 2");var g=0|b[0],w=0|b[1];return o(this,g,w),[g,w]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(b){return o(this,b|=0,this._shape[1]),b},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(b){return o(this,this._shape[0],b|=0),b},enumerable:!1}}),d.bind=function(){if(!this._destroyed){var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,this.handle),b.viewport(0,0,this._shape[0],this._shape[1])}},d.dispose=function(){if(!this._destroyed){this._destroyed=!0;var b=this.gl;b.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(b.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var g=0;g<this.color.length;++g)this.color[g].dispose(),this.color[g]=null;this._color_rb&&(b.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(v,u,y){var e=v("sprintf-js").sprintf,n=v("gl-constants/lookup"),t=v("glsl-shader-name"),a=v("add-line-numbers");u.exports=function(r,f,s){"use strict";var i=t(f)||"of unknown name (see npm glsl-shader-name)",l="unknown type";void 0!==s&&(l=s===n.FRAGMENT_SHADER?"fragment":"vertex");for(var c=e("Error compiling %s shader %s:\n",l,i),h=e("%s%s",c,r),m=r.split("\n"),d={},o=0;o<m.length;o++){var b=m[o];if(""!==b&&"\0"!==b){var g=parseInt(b.split(":")[2]);if(isNaN(g))throw new Error(e("Could not parse error: %s",b));d[g]=b}}var w=a(f).split("\n");for(o=0;o<w.length;o++)if((d[o+3]||d[o+2]||d[o+1])&&(c+=w[o]+"\n",d[o+1])){var A=d[o+1];A=A.substr(A.split(":",3).join(":").length+1).trim(),c+=e("^^^ %s\n\n",A)}return{long:c.trim(),short:h.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(v,u,y){"use strict";u.exports=function(h,m){var d=h.gl,T=new s(h,a(d,f.vertex,f.fragment),a(d,f.pickVertex,f.pickFragment),r(d),r(d),r(d),r(d));return T.update(m),h.addObject(T),T};var e=v("binary-search-bounds"),n=v("iota-array"),t=v("typedarray-pool"),a=v("gl-shader"),r=v("gl-buffer"),f=v("./lib/shaders");function s(h,m,d,o,b,g,w){this.plot=h,this.shader=m,this.pickShader=d,this.positionBuffer=o,this.weightBuffer=b,this.colorBuffer=g,this.idBuffer=w,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var i,h,m,l=s.prototype,c=[0,0,1,0,0,1,1,0,1,1,0,1];l.draw=(i=[1,0,0,0,1,0,0,0,1],function(){var h=this.plot,m=this.shader,d=this.bounds,o=this.numVertices;if(!(o<=0)){var b=h.gl,g=h.dataBox,_=d[3]-d[1],A=g[2]-g[0],T=g[3]-g[1];i[0]=2*(d[2]-d[0])/A,i[4]=2*_/T,i[6]=2*(d[0]-g[0])/A-1,i[7]=2*(d[1]-g[1])/T-1,m.bind();var E=m.uniforms;E.viewTransform=i,E.shape=this.shape;var k=m.attributes;this.positionBuffer.bind(),k.position.pointer(),this.weightBuffer.bind(),k.weight.pointer(b.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),k.color.pointer(b.UNSIGNED_BYTE,!0),b.drawArrays(b.TRIANGLES,0,o)}}),l.drawPick=(h=[1,0,0,0,1,0,0,0,1],m=[0,0,0,0],function(d){var o=this.plot,b=this.pickShader,g=this.bounds,w=this.numVertices;if(!(w<=0)){var _=o.gl,A=o.dataBox,E=g[3]-g[1],k=A[2]-A[0],O=A[3]-A[1];h[0]=2*(g[2]-g[0])/k,h[4]=2*E/O,h[6]=2*(g[0]-A[0])/k-1,h[7]=2*(g[1]-A[1])/O-1;for(var D=0;D<4;++D)m[D]=d>>8*D&255;this.pickOffset=d,b.bind();var S=b.uniforms;S.viewTransform=h,S.pickOffset=m,S.shape=this.shape;var C=b.attributes;return this.positionBuffer.bind(),C.position.pointer(),this.weightBuffer.bind(),C.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),C.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,w),d+this.shape[0]*this.shape[1]}}),l.pick=function(h,m,d){var o=this.pickOffset;if(d<o||d>=o+this.shape[0]*this.shape[1])return null;var g=d-o;return{object:this,pointId:g,dataCoord:[this.xData[g%this.shape[0]],this.yData[g/this.shape[0]|0]]}},l.update=function(h){var m=(h=h||{}).shape||[0,0],d=h.x||n(m[0]),o=h.y||n(m[1]),b=h.z||new Float32Array(m[0]*m[1]),g=!1!==h.zsmooth;this.xData=d,this.yData=o;var w,_,A,T,E=h.colorLevels||[0],k=h.colorValues||[0,0,0,1],O=E.length,D=this.bounds;g?(w=D[0]=d[0],_=D[1]=o[0],A=D[2]=d[d.length-1],T=D[3]=o[o.length-1]):(w=D[0]=d[0]+(d[1]-d[0])/2,_=D[1]=o[0]+(o[1]-o[0])/2,A=D[2]=d[d.length-1]+(d[d.length-1]-d[d.length-2])/2,T=D[3]=o[o.length-1]+(o[o.length-1]-o[o.length-2])/2);var S=1/(A-w),C=1/(T-_),z=m[0],B=m[1];this.shape=[z,B];var U=(g?(z-1)*(B-1):z*B)*(c.length>>>1);this.numVertices=U;for(var G=t.mallocUint8(4*U),X=t.mallocFloat32(2*U),Z=t.mallocUint8(2*U),q=t.mallocUint32(U),W=0,te=g?z-1:z,R=g?B-1:B,N=0;N<R;++N){var V,ee;g?(V=C*(o[N]-_),ee=C*(o[N+1]-_)):(V=N<B-1?C*(o[N]-(o[N+1]-o[N])/2-_):C*(o[N]-(o[N]-o[N-1])/2-_),ee=N<B-1?C*(o[N]+(o[N+1]-o[N])/2-_):C*(o[N]+(o[N]-o[N-1])/2-_));for(var j=0;j<te;++j){var J,$;g?(J=S*(d[j]-w),$=S*(d[j+1]-w)):(J=j<z-1?S*(d[j]-(d[j+1]-d[j])/2-w):S*(d[j]-(d[j]-d[j-1])/2-w),$=j<z-1?S*(d[j]+(d[j+1]-d[j])/2-w):S*(d[j]+(d[j]-d[j-1])/2-w));for(var re=0;re<c.length;re+=2){var ne,se,ie,ue,le=c[re],de=c[re+1],ve=b[g?(N+de)*z+(j+le):N*z+j],_e=e.le(E,ve);if(_e<0)ne=k[0],se=k[1],ie=k[2],ue=k[3];else if(_e===O-1)ne=k[4*O-4],se=k[4*O-3],ie=k[4*O-2],ue=k[4*O-1];else{var be=(ve-E[_e])/(E[_e+1]-E[_e]),Te=1-be,he=4*_e,me=4*(_e+1);ne=Te*k[he]+be*k[me],se=Te*k[he+1]+be*k[me+1],ie=Te*k[he+2]+be*k[me+2],ue=Te*k[he+3]+be*k[me+3]}G[4*W]=255*ne,G[4*W+1]=255*se,G[4*W+2]=255*ie,G[4*W+3]=255*ue,X[2*W]=.5*J+.5*$,X[2*W+1]=.5*V+.5*ee,Z[2*W]=le,Z[2*W+1]=de,q[W]=N*z+j,W+=1}}}this.positionBuffer.update(X),this.weightBuffer.update(Z),this.colorBuffer.update(G),this.idBuffer.update(q),t.free(X),t.free(G),t.free(Z),t.free(q)},l.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(v,u,y){"use strict";var e=v("glslify");u.exports={fragment:e(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(v,u,y){var e=v("glslify"),n=v("gl-shader"),t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),f=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];y.createShader=function(s){return n(s,t,a,null,f)},y.createPickShader=function(s){return n(s,t,r,null,f)}},{"gl-shader":132,glslify:231}],91:[function(v,u,y){"use strict";u.exports=function(w){var _=w.gl||w.scene&&w.scene.gl,A=l(_);A.attributes.position.location=0,A.attributes.nextPosition.location=1,A.attributes.arcLength.location=2,A.attributes.lineWidth.location=3,A.attributes.color.location=4;var T=c(_);T.attributes.position.location=0,T.attributes.nextPosition.location=1,T.attributes.arcLength.location=2,T.attributes.lineWidth.location=3,T.attributes.color.location=4;for(var E=e(_),k=n(_,[{buffer:E,size:3,offset:0,stride:48},{buffer:E,size:3,offset:12,stride:48},{buffer:E,size:1,offset:24,stride:48},{buffer:E,size:1,offset:28,stride:48},{buffer:E,size:4,offset:32,stride:48}]),O=s(new Array(1024),[256,1,4]),D=0;D<1024;++D)O.data[D]=255;var S=t(_,O);S.wrap=_.REPEAT;var C=new b(_,A,T,E,k,S);return C.update(w),C};var e=v("gl-buffer"),n=v("gl-vao"),t=v("gl-texture2d"),a=new Uint8Array(4),r=new Float32Array(a.buffer),f=v("binary-search-bounds"),s=v("ndarray"),i=v("./lib/shaders"),l=i.createShader,c=i.createPickShader,h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function m(w,_){for(var A=0,T=0;T<3;++T){var E=w[T]-_[T];A+=E*E}return Math.sqrt(A)}function d(w){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],A=0;A<3;++A)_[0][A]=Math.max(w[0][A],_[0][A]),_[1][A]=Math.min(w[1][A],_[1][A]);return _}function o(w,_,A,T){this.arcLength=w,this.position=_,this.index=A,this.dataCoordinate=T}function b(w,_,A,T,E,k){this.gl=w,this.shader=_,this.pickShader=A,this.buffer=T,this.vao=E,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=k,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var g=b.prototype;g.isTransparent=function(){return this.hasAlpha},g.isOpaque=function(){return!this.hasAlpha},g.pickSlots=1,g.setPickBase=function(w){this.pickId=w},g.drawTransparent=g.draw=function(w){if(this.vertexCount){var _=this.gl,A=this.shader,T=this.vao;A.bind(),A.uniforms={model:w.model||h,view:w.view||h,projection:w.projection||h,clipBounds:d(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},T.bind(),T.draw(_.TRIANGLE_STRIP,this.vertexCount),T.unbind()}},g.drawPick=function(w){if(this.vertexCount){var _=this.gl,A=this.pickShader,T=this.vao;A.bind(),A.uniforms={model:w.model||h,view:w.view||h,projection:w.projection||h,pickId:this.pickId,clipBounds:d(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},T.bind(),T.draw(_.TRIANGLE_STRIP,this.vertexCount),T.unbind()}},g.update=function(w){var _,A;this.dirty=!0;var T=!!w.connectGaps;"dashScale"in w&&(this.dashScale=w.dashScale),this.hasAlpha=!1,"opacity"in w&&(this.opacity=+w.opacity,this.opacity<1&&(this.hasAlpha=!0));var E=[],k=[],O=[],D=0,S=0,C=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],z=w.position||w.positions;if(z){var B=w.color||w.colors||[0,0,0,1],U=w.lineWidth||1,G=!1;e:for(_=1;_<z.length;++_){var X,Z,q,W=z[_-1],te=z[_];for(k.push(D),O.push(W.slice()),A=0;A<3;++A){if(isNaN(W[A])||isNaN(te[A])||!isFinite(W[A])||!isFinite(te[A])){if(!T&&E.length>0){for(var R=0;R<24;++R)E.push(E[E.length-12]);S+=2,G=!0}continue e}C[0][A]=Math.min(C[0][A],W[A],te[A]),C[1][A]=Math.max(C[1][A],W[A],te[A])}Array.isArray(B[0])?(X=B.length>_-1?B[_-1]:B.length>0?B[B.length-1]:[0,0,0,1],Z=B.length>_?B[_]:B.length>0?B[B.length-1]:[0,0,0,1]):X=Z=B,3===X.length&&(X=[X[0],X[1],X[2],1]),3===Z.length&&(Z=[Z[0],Z[1],Z[2],1]),!this.hasAlpha&&X[3]<1&&(this.hasAlpha=!0),q=Array.isArray(U)?U.length>_-1?U[_-1]:U.length>0?U[U.length-1]:[0,0,0,1]:U;var N=D;if(D+=m(W,te),G){for(A=0;A<2;++A)E.push(W[0],W[1],W[2],te[0],te[1],te[2],N,q,X[0],X[1],X[2],X[3]);S+=2,G=!1}E.push(W[0],W[1],W[2],te[0],te[1],te[2],N,q,X[0],X[1],X[2],X[3],W[0],W[1],W[2],te[0],te[1],te[2],N,-q,X[0],X[1],X[2],X[3],te[0],te[1],te[2],W[0],W[1],W[2],D,-q,Z[0],Z[1],Z[2],Z[3],te[0],te[1],te[2],W[0],W[1],W[2],D,q,Z[0],Z[1],Z[2],Z[3]),S+=4}}if(this.buffer.update(E),k.push(D),O.push(z[z.length-1].slice()),this.bounds=C,this.vertexCount=S,this.points=O,this.arcLength=k,"dashes"in w){var V=w.dashes.slice();for(V.unshift(0),_=1;_<V.length;++_)V[_]=V[_-1]+V[_];var ee=s(new Array(1024),[256,1,4]);for(_=0;_<256;++_){for(A=0;A<4;++A)ee.set(_,0,A,0);1&f.le(V,V[V.length-1]*_/255)?ee.set(_,0,0,0):ee.set(_,0,0,255)}this.texture.setPixels(ee)}},g.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},g.pick=function(w){if(!w||w.id!==this.pickId)return null;var z,B,U,_=(z=w.value[0],B=w.value[1],U=w.value[2],a[0]=0,a[1]=U,a[2]=B,a[3]=z,r[0]),A=f.le(this.arcLength,_);if(A<0)return null;if(A===this.arcLength.length-1)return new o(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),A);for(var T=this.points[A],E=this.points[Math.min(A+1,this.points.length-1)],k=(_-this.arcLength[A])/(this.arcLength[A+1]-this.arcLength[A]),O=1-k,D=[0,0,0],S=0;S<3;++S)D[S]=O*T[S]+k*E[S];var C=Math.min(k<.5?A:A+1,this.points.length-1);return new o(_,D,C,this.points[C])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(v,u,y){u.exports=function(e){var n=new Float32Array(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}},{}],93:[function(v,u,y){u.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(v,u,y){u.exports=function(e){var n=e[0],t=e[1],a=e[2],r=e[3],f=e[4],s=e[5],i=e[6],l=e[7],c=e[8],h=e[9],m=e[10],d=e[11],o=e[12],b=e[13],g=e[14],w=e[15];return(n*s-t*f)*(m*w-d*g)-(n*i-a*f)*(h*w-d*b)+(n*l-r*f)*(h*g-m*b)+(t*i-a*s)*(c*w-d*o)-(t*l-r*s)*(c*g-m*o)+(a*l-r*i)*(c*b-h*o)}},{}],95:[function(v,u,y){u.exports=function(e,n){var t=n[0],a=n[1],r=n[2],f=n[3],s=t+t,i=a+a,l=r+r,c=t*s,h=a*s,m=a*i,d=r*s,o=r*i,b=r*l,g=f*s,w=f*i,_=f*l;return e[0]=1-m-b,e[1]=h+_,e[2]=d-w,e[3]=0,e[4]=h-_,e[5]=1-c-b,e[6]=o+g,e[7]=0,e[8]=d+w,e[9]=o-g,e[10]=1-c-m,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(v,u,y){u.exports=function(e,n,t){var a=n[0],r=n[1],f=n[2],s=n[3],i=a+a,l=r+r,c=f+f,h=a*i,m=a*l,d=a*c,o=r*l,b=r*c,g=f*c,w=s*i,_=s*l,A=s*c;return e[0]=1-(o+g),e[1]=m+A,e[2]=d-_,e[3]=0,e[4]=m-A,e[5]=1-(h+g),e[6]=b+w,e[7]=0,e[8]=d+_,e[9]=b-w,e[10]=1-(h+o),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},{}],97:[function(v,u,y){u.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(v,u,y){u.exports=function(e,n){var t=n[0],a=n[1],r=n[2],f=n[3],s=n[4],i=n[5],l=n[6],c=n[7],h=n[8],m=n[9],d=n[10],o=n[11],b=n[12],g=n[13],w=n[14],_=n[15],A=t*i-a*s,T=t*l-r*s,E=t*c-f*s,k=a*l-r*i,O=a*c-f*i,D=r*c-f*l,S=h*g-m*b,C=h*w-d*b,z=h*_-o*b,B=m*w-d*g,U=m*_-o*g,G=d*_-o*w,X=A*G-T*U+E*B+k*z-O*C+D*S;return X?(e[0]=(i*G-l*U+c*B)*(X=1/X),e[1]=(r*U-a*G-f*B)*X,e[2]=(g*D-w*O+_*k)*X,e[3]=(d*O-m*D-o*k)*X,e[4]=(l*z-s*G-c*C)*X,e[5]=(t*G-r*z+f*C)*X,e[6]=(w*E-b*D-_*T)*X,e[7]=(h*D-d*E+o*T)*X,e[8]=(s*U-i*z+c*S)*X,e[9]=(a*z-t*U-f*S)*X,e[10]=(b*O-g*E+_*A)*X,e[11]=(m*E-h*O-o*A)*X,e[12]=(i*C-s*B-l*S)*X,e[13]=(t*B-a*C+r*S)*X,e[14]=(g*T-b*k-w*A)*X,e[15]=(h*k-m*T+d*A)*X,e):null}},{}],99:[function(v,u,y){var e=v("./identity");u.exports=function(n,t,a,r){var f,s,i,l,c,h,m,d,o,b,g=t[0],w=t[1],_=t[2],A=r[0],T=r[1],E=r[2],k=a[0],O=a[1],D=a[2];return Math.abs(g-k)<1e-6&&Math.abs(w-O)<1e-6&&Math.abs(_-D)<1e-6?e(n):(m=g-k,d=w-O,o=_-D,f=T*(o*=b=1/Math.sqrt(m*m+d*d+o*o))-E*(d*=b),s=E*(m*=b)-A*o,i=A*d-T*m,(b=Math.sqrt(f*f+s*s+i*i))?(f*=b=1/b,s*=b,i*=b):(f=0,s=0,i=0),l=d*i-o*s,c=o*f-m*i,h=m*s-d*f,(b=Math.sqrt(l*l+c*c+h*h))?(l*=b=1/b,c*=b,h*=b):(l=0,c=0,h=0),n[0]=f,n[1]=l,n[2]=m,n[3]=0,n[4]=s,n[5]=c,n[6]=d,n[7]=0,n[8]=i,n[9]=h,n[10]=o,n[11]=0,n[12]=-(f*g+s*w+i*_),n[13]=-(l*g+c*w+h*_),n[14]=-(m*g+d*w+o*_),n[15]=1,n)}},{"./identity":97}],100:[function(v,u,y){u.exports=function(e,n,t){var a=n[0],r=n[1],f=n[2],s=n[3],i=n[4],l=n[5],c=n[6],h=n[7],m=n[8],d=n[9],o=n[10],b=n[11],g=n[12],w=n[13],_=n[14],A=n[15],T=t[0],E=t[1],k=t[2],O=t[3];return e[0]=T*a+E*i+k*m+O*g,e[1]=T*r+E*l+k*d+O*w,e[2]=T*f+E*c+k*o+O*_,e[3]=T*s+E*h+k*b+O*A,e[4]=(T=t[4])*a+(E=t[5])*i+(k=t[6])*m+(O=t[7])*g,e[5]=T*r+E*l+k*d+O*w,e[6]=T*f+E*c+k*o+O*_,e[7]=T*s+E*h+k*b+O*A,e[8]=(T=t[8])*a+(E=t[9])*i+(k=t[10])*m+(O=t[11])*g,e[9]=T*r+E*l+k*d+O*w,e[10]=T*f+E*c+k*o+O*_,e[11]=T*s+E*h+k*b+O*A,e[12]=(T=t[12])*a+(E=t[13])*i+(k=t[14])*m+(O=t[15])*g,e[13]=T*r+E*l+k*d+O*w,e[14]=T*f+E*c+k*o+O*_,e[15]=T*s+E*h+k*b+O*A,e}},{}],101:[function(v,u,y){u.exports=function(e,n,t,a,r,f,s){var i=1/(n-t),l=1/(a-r),c=1/(f-s);return e[0]=-2*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(n+t)*i,e[13]=(r+a)*l,e[14]=(s+f)*c,e[15]=1,e}},{}],102:[function(v,u,y){u.exports=function(e,n,t,a,r){var f=1/Math.tan(n/2),s=1/(a-r);return e[0]=f/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(r+a)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*r*a*s,e[15]=0,e}},{}],103:[function(v,u,y){u.exports=function(e,n,t,a){var r,f,s,i,l,c,h,m,d,o,b,g,w,_,A,T,E,k,O,D,S,C,z,B,U=a[0],G=a[1],X=a[2],Z=Math.sqrt(U*U+G*G+X*X);return Math.abs(Z)<1e-6?null:(U*=Z=1/Z,G*=Z,X*=Z,r=Math.sin(t),f=Math.cos(t),l=n[1],c=n[2],h=n[3],d=n[5],o=n[6],b=n[7],w=n[9],_=n[10],A=n[11],O=U*G*(s=1-f)-X*r,D=G*G*s+f,S=X*G*s+U*r,C=U*X*s+G*r,z=G*X*s-U*r,B=X*X*s+f,e[0]=(i=n[0])*(T=U*U*s+f)+(m=n[4])*(E=G*U*s+X*r)+(g=n[8])*(k=X*U*s-G*r),e[1]=l*T+d*E+w*k,e[2]=c*T+o*E+_*k,e[3]=h*T+b*E+A*k,e[4]=i*O+m*D+g*S,e[5]=l*O+d*D+w*S,e[6]=c*O+o*D+_*S,e[7]=h*O+b*D+A*S,e[8]=i*C+m*z+g*B,e[9]=l*C+d*z+w*B,e[10]=c*C+o*z+_*B,e[11]=h*C+b*z+A*B,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)}},{}],104:[function(v,u,y){u.exports=function(e,n,t){var a=Math.sin(t),r=Math.cos(t),f=n[4],s=n[5],i=n[6],l=n[7],c=n[8],h=n[9],m=n[10],d=n[11];return n!==e&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[4]=f*r+c*a,e[5]=s*r+h*a,e[6]=i*r+m*a,e[7]=l*r+d*a,e[8]=c*r-f*a,e[9]=h*r-s*a,e[10]=m*r-i*a,e[11]=d*r-l*a,e}},{}],105:[function(v,u,y){u.exports=function(e,n,t){var a=Math.sin(t),r=Math.cos(t),f=n[0],s=n[1],i=n[2],l=n[3],c=n[8],h=n[9],m=n[10],d=n[11];return n!==e&&(e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=f*r-c*a,e[1]=s*r-h*a,e[2]=i*r-m*a,e[3]=l*r-d*a,e[8]=f*a+c*r,e[9]=s*a+h*r,e[10]=i*a+m*r,e[11]=l*a+d*r,e}},{}],106:[function(v,u,y){u.exports=function(e,n,t){var a=Math.sin(t),r=Math.cos(t),f=n[0],s=n[1],i=n[2],l=n[3],c=n[4],h=n[5],m=n[6],d=n[7];return n!==e&&(e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=f*r+c*a,e[1]=s*r+h*a,e[2]=i*r+m*a,e[3]=l*r+d*a,e[4]=c*r-f*a,e[5]=h*r-s*a,e[6]=m*r-i*a,e[7]=d*r-l*a,e}},{}],107:[function(v,u,y){u.exports=function(e,n,t){var a=t[0],r=t[1],f=t[2];return e[0]=n[0]*a,e[1]=n[1]*a,e[2]=n[2]*a,e[3]=n[3]*a,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=n[7]*r,e[8]=n[8]*f,e[9]=n[9]*f,e[10]=n[10]*f,e[11]=n[11]*f,e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}},{}],108:[function(v,u,y){u.exports=function(e,n,t){var a,r,f,s,i,l,c,h,m,d,o,b,g=t[0],w=t[1],_=t[2];return n===e?(e[12]=n[0]*g+n[4]*w+n[8]*_+n[12],e[13]=n[1]*g+n[5]*w+n[9]*_+n[13],e[14]=n[2]*g+n[6]*w+n[10]*_+n[14],e[15]=n[3]*g+n[7]*w+n[11]*_+n[15]):(r=n[1],f=n[2],s=n[3],i=n[4],l=n[5],c=n[6],h=n[7],m=n[8],d=n[9],o=n[10],b=n[11],e[0]=a=n[0],e[1]=r,e[2]=f,e[3]=s,e[4]=i,e[5]=l,e[6]=c,e[7]=h,e[8]=m,e[9]=d,e[10]=o,e[11]=b,e[12]=a*g+i*w+m*_+n[12],e[13]=r*g+l*w+d*_+n[13],e[14]=f*g+c*w+o*_+n[14],e[15]=s*g+h*w+b*_+n[15]),e}},{}],109:[function(v,u,y){u.exports=function(e,n){if(e===n){var t=n[1],a=n[2],r=n[3],f=n[6],s=n[7],i=n[11];e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=t,e[6]=n[9],e[7]=n[13],e[8]=a,e[9]=f,e[11]=n[14],e[12]=r,e[13]=s,e[14]=i}else e[0]=n[0],e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=n[1],e[5]=n[5],e[6]=n[9],e[7]=n[13],e[8]=n[2],e[9]=n[6],e[10]=n[10],e[11]=n[14],e[12]=n[3],e[13]=n[7],e[14]=n[11],e[15]=n[15];return e}},{}],110:[function(v,u,y){"use strict";var e=v("barycentric"),n=v("polytope-closest-point/lib/closest_point_2d.js");function t(f,s){for(var i=[0,0,0,0],l=0;l<4;++l)for(var c=0;c<4;++c)i[c]+=f[4*l+c]*s[l];return i}function a(f,s,i,l,c){for(var h=t(l,t(i,t(s,[f[0],f[1],f[2],1]))),m=0;m<3;++m)h[m]/=h[3];return[.5*c[0]*(1+h[0]),.5*c[1]*(1-h[1])]}function r(f,s){for(var i=[0,0,0],l=0;l<f.length;++l)for(var c=f[l],h=s[l],m=0;m<3;++m)i[m]+=h*c[m];return i}u.exports=function(f,s,i,l,c,h){if(1===f.length)return[0,f[0].slice()];for(var m=new Array(f.length),d=0;d<f.length;++d)m[d]=a(f[d],i,l,c,h);var o=0,b=1/0;for(d=0;d<m.length;++d){for(var g=0,w=0;w<2;++w)g+=Math.pow(m[d][w]-s[w],2);g<b&&(b=g,o=d)}var _=function(T,E){if(2===T.length){for(var k=0,O=0,D=0;D<2;++D)k+=Math.pow(E[D]-T[0][D],2),O+=Math.pow(E[D]-T[1][D],2);return(k=Math.sqrt(k))+(O=Math.sqrt(O))<1e-6?[1,0]:[O/(k+O),k/(O+k)]}if(3===T.length){var S=[0,0];return n(T[0],T[1],T[2],E,S),e(T,S)}return[]}(m,s),A=0;for(d=0;d<3;++d){if(_[d]<-.001||_[d]>1.0001)return null;A+=_[d]}return Math.abs(A-1)>.001?null:[o,r(f,_),_]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(v,u,y){var e=v("glslify"),n=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),t=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),f=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),c=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),h=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),m=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);y.meshShader={vertex:n,fragment:t,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},y.wireShader={vertex:a,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},y.pointShader={vertex:f,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},y.pickShader={vertex:i,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},y.pointPickShader={vertex:c,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},y.contourShader={vertex:h,fragment:m,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(v,u,y){"use strict";var e=v("gl-shader"),n=v("gl-buffer"),t=v("gl-vao"),a=v("gl-texture2d"),r=v("normals"),f=v("gl-mat4/multiply"),s=v("gl-mat4/invert"),i=v("ndarray"),l=v("colormap"),c=v("simplicial-complex-contour"),h=v("typedarray-pool"),m=v("./lib/shaders"),d=v("./lib/closest-point"),o=m.meshShader,b=m.wireShader,g=m.pointShader,w=m.pickShader,_=m.pointPickShader,A=m.contourShader,T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function E(G,X,Z,q,W,te,R,N,V,ee,j,J,$,re,ne,se,ie,ue,le,de,ve,_e,be,Te,he,me,Ae){this.gl=G,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=X,this.dirty=!0,this.triShader=Z,this.lineShader=q,this.pointShader=W,this.pickShader=te,this.pointPickShader=R,this.contourShader=N,this.trianglePositions=V,this.triangleColors=j,this.triangleNormals=$,this.triangleUVs=J,this.triangleIds=ee,this.triangleVAO=re,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ne,this.edgeColors=ie,this.edgeUVs=ue,this.edgeIds=se,this.edgeVAO=le,this.edgeCount=0,this.pointPositions=de,this.pointColors=_e,this.pointUVs=be,this.pointSizes=Te,this.pointIds=ve,this.pointVAO=he,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=me,this.contourVAO=Ae,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=T,this._view=T,this._projection=T,this._resolution=[1,1]}var k=E.prototype;function O(G,X){if(!X||!X.length)return 1;for(var Z=0;Z<X.length;++Z){if(X.length<2)return 1;if(X[Z][0]===G)return X[Z][1];if(X[Z][0]>G&&Z>0){var q=(X[Z][0]-G)/(X[Z][0]-X[Z-1][0]);return X[Z][1]*(1-q)+q*X[Z-1][1]}}return 1}function D(G){var X=e(G,o.vertex,o.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.normal.location=4,X}function S(G){var X=e(G,b.vertex,b.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X}function C(G){var X=e(G,g.vertex,g.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.pointSize.location=4,X}function z(G){var X=e(G,w.vertex,w.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X}function B(G){var X=e(G,_.vertex,_.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X.attributes.pointSize.location=4,X}function U(G){var X=e(G,A.vertex,A.fragment);return X.attributes.position.location=0,X}k.isOpaque=function(){return!this.hasAlpha},k.isTransparent=function(){return this.hasAlpha},k.pickSlots=1,k.setPickBase=function(G){this.pickId=G},k.highlight=function(G){if(G&&this.contourEnable){for(var X=c(this.cells,this.intensity,G.intensity),Z=X.cells,q=X.vertexIds,W=X.vertexWeights,te=Z.length,R=h.mallocFloat32(6*te),N=0,V=0;V<te;++V)for(var ee=Z[V],j=0;j<2;++j){var J=ee[0];2===ee.length&&(J=ee[j]);for(var ne=W[J],se=1-ne,ie=this.positions[q[J][0]],ue=this.positions[q[J][1]],le=0;le<3;++le)R[N++]=ne*ie[le]+se*ue[le]}this.contourCount=N/3|0,this.contourPositions.update(R.subarray(0,N)),h.free(R)}else this.contourCount=0},k.update=function(G){G=G||{};var X=this.gl;this.dirty=!0,"contourEnable"in G&&(this.contourEnable=G.contourEnable),"contourColor"in G&&(this.contourColor=G.contourColor),"lineWidth"in G&&(this.lineWidth=G.lineWidth),"lightPosition"in G&&(this.lightPosition=G.lightPosition),this.hasAlpha=!1,"opacity"in G&&(this.opacity=G.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in G&&(this.opacityscale=G.opacityscale,this.hasAlpha=!0),"ambient"in G&&(this.ambientLight=G.ambient),"diffuse"in G&&(this.diffuseLight=G.diffuse),"specular"in G&&(this.specularLight=G.specular),"roughness"in G&&(this.roughness=G.roughness),"fresnel"in G&&(this.fresnel=G.fresnel),G.texture?(this.texture.dispose(),this.texture=a(X,G.texture)):G.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=X.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=X.LINEAR,this.texture.setPixels(function(lr,Ue){for(var Ze=l({colormap:lr,nshades:256,format:"rgba"}),Ne=new Uint8Array(1024),it=0;it<256;++it){for(var ke=Ze[it],De=0;De<3;++De)Ne[4*it+De]=ke[De];Ne[4*it+3]=Ue?255*O(it/255,Ue):255*ke[3]}return i(Ne,[256,256,4],[4,0,1])}(G.colormap,this.opacityscale)),this.texture.generateMipmap());var Z=G.cells,q=G.positions;if(q&&Z){var W=[],te=[],R=[],N=[],V=[],ee=[],j=[],J=[],$=[],re=[],ne=[],se=[],ie=[],ue=[];this.cells=Z,this.positions=q;var le=G.vertexNormals,de=G.cellNormals,ve=void 0===G.vertexNormalsEpsilon?1e-6:G.vertexNormalsEpsilon;G.useFacetNormals&&!de&&(de=r.faceNormals(Z,q,void 0===G.faceNormalsEpsilon?1e-6:G.faceNormalsEpsilon)),de||le||(le=r.vertexNormals(Z,q,ve));var be=G.vertexColors,Te=G.cellColors,he=G.meshColor||[1,1,1,1],me=G.vertexUVs,Ae=G.vertexIntensity,we=G.cellUVs,Se=G.cellIntensity,Pe=1/0,ze=-1/0;if(!me&&!we)if(Ae)if(G.vertexIntensityBounds)Pe=+G.vertexIntensityBounds[0],ze=+G.vertexIntensityBounds[1];else for(var He=0;He<Ae.length;++He){var tt=Ae[He];Pe=Math.min(Pe,tt),ze=Math.max(ze,tt)}else if(Se)if(G.cellIntensityBounds)Pe=+G.cellIntensityBounds[0],ze=+G.cellIntensityBounds[1];else for(He=0;He<Se.length;++He)tt=Se[He],Pe=Math.min(Pe,tt),ze=Math.max(ze,tt);else for(He=0;He<q.length;++He)tt=q[He][2],Pe=Math.min(Pe,tt),ze=Math.max(ze,tt);this.intensity=Ae||Se||function(lr){for(var Ue=lr.length,Ze=new Array(Ue),Ne=0;Ne<Ue;++Ne)Ze[Ne]=lr[Ne][2];return Ze}(q),this.pickVertex=!(Se||Te);var Oe=G.pointSizes,Be=G.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],He=0;He<q.length;++He)for(var Je=q[He],Ye=0;Ye<3;++Ye)!isNaN(Je[Ye])&&isFinite(Je[Ye])&&(this.bounds[0][Ye]=Math.min(this.bounds[0][Ye],Je[Ye]),this.bounds[1][Ye]=Math.max(this.bounds[1][Ye],Je[Ye]));var nt=0,ft=0,dt=0;e:for(He=0;He<Z.length;++He){var Rt=Z[He];switch(Rt.length){case 1:for(Je=q[at=Rt[0]],Ye=0;Ye<3;++Ye)if(isNaN(Je[Ye])||!isFinite(Je[Ye]))continue e;re.push(Je[0],Je[1],Je[2]),rt=be?be[at]:Te?Te[He]:he,this.opacityscale&&Ae?te.push(rt[0],rt[1],rt[2],this.opacity*O((Ae[at]-Pe)/(ze-Pe),this.opacityscale)):3===rt.length?ne.push(rt[0],rt[1],rt[2],this.opacity):(ne.push(rt[0],rt[1],rt[2],rt[3]*this.opacity),rt[3]<1&&(this.hasAlpha=!0)),se.push((St=me?me[at]:Ae?[(Ae[at]-Pe)/(ze-Pe),0]:we?we[He]:Se?[(Se[He]-Pe)/(ze-Pe),0]:[(Je[2]-Pe)/(ze-Pe),0])[0],St[1]),ie.push(Oe?Oe[at]:Be),ue.push(He),dt+=1;break;case 2:for(Ye=0;Ye<2;++Ye){Je=q[at=Rt[Ye]];for(var Et=0;Et<3;++Et)if(isNaN(Je[Et])||!isFinite(Je[Et]))continue e}for(Ye=0;Ye<2;++Ye)Je=q[at=Rt[Ye]],ee.push(Je[0],Je[1],Je[2]),rt=be?be[at]:Te?Te[He]:he,this.opacityscale&&Ae?te.push(rt[0],rt[1],rt[2],this.opacity*O((Ae[at]-Pe)/(ze-Pe),this.opacityscale)):3===rt.length?j.push(rt[0],rt[1],rt[2],this.opacity):(j.push(rt[0],rt[1],rt[2],rt[3]*this.opacity),rt[3]<1&&(this.hasAlpha=!0)),J.push((St=me?me[at]:Ae?[(Ae[at]-Pe)/(ze-Pe),0]:we?we[He]:Se?[(Se[He]-Pe)/(ze-Pe),0]:[(Je[2]-Pe)/(ze-Pe),0])[0],St[1]),$.push(He);ft+=1;break;case 3:for(Ye=0;Ye<3;++Ye)for(Je=q[at=Rt[Ye]],Et=0;Et<3;++Et)if(isNaN(Je[Et])||!isFinite(Je[Et]))continue e;for(Ye=0;Ye<3;++Ye){var at,rt,St,Xt;Je=q[at=Rt[2-Ye]],W.push(Je[0],Je[1],Je[2]),(rt=be?be[at]:Te?Te[He]:he)?this.opacityscale&&Ae?te.push(rt[0],rt[1],rt[2],this.opacity*O((Ae[at]-Pe)/(ze-Pe),this.opacityscale)):3===rt.length?te.push(rt[0],rt[1],rt[2],this.opacity):(te.push(rt[0],rt[1],rt[2],rt[3]*this.opacity),rt[3]<1&&(this.hasAlpha=!0)):te.push(.5,.5,.5,1),N.push((St=me?me[at]:Ae?[(Ae[at]-Pe)/(ze-Pe),0]:we?we[He]:Se?[(Se[He]-Pe)/(ze-Pe),0]:[(Je[2]-Pe)/(ze-Pe),0])[0],St[1]),R.push((Xt=le?le[at]:de[He])[0],Xt[1],Xt[2]),V.push(He)}nt+=1}}this.pointCount=dt,this.edgeCount=ft,this.triangleCount=nt,this.pointPositions.update(re),this.pointColors.update(ne),this.pointUVs.update(se),this.pointSizes.update(ie),this.pointIds.update(new Uint32Array(ue)),this.edgePositions.update(ee),this.edgeColors.update(j),this.edgeUVs.update(J),this.edgeIds.update(new Uint32Array($)),this.trianglePositions.update(W),this.triangleColors.update(te),this.triangleUVs.update(N),this.triangleNormals.update(R),this.triangleIds.update(new Uint32Array(V))}},k.drawTransparent=k.draw=function(G){for(var X=this.gl,Z=(G=G||{}).model||T,q=G.view||T,W=G.projection||T,te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],R=0;R<3;++R)te[0][R]=Math.max(te[0][R],this.clipBounds[0][R]),te[1][R]=Math.min(te[1][R],this.clipBounds[1][R]);var N={model:Z,view:q,projection:W,inverseModel:T.slice(),clipBounds:te,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};N.inverseModel=s(N.inverseModel,N.model),X.disable(X.CULL_FACE),this.texture.bind(0);var V=new Array(16);for(f(V,N.view,N.model),f(V,N.projection,V),s(V,V),R=0;R<3;++R)N.eyePosition[R]=V[12+R]/V[15];var ee,j=V[15];for(R=0;R<3;++R)j+=this.lightPosition[R]*V[4*R+3];for(R=0;R<3;++R){for(var J=V[12+R],$=0;$<3;++$)J+=V[4*$+R]*this.lightPosition[$];N.lightPosition[R]=J/j}this.triangleCount>0&&((ee=this.triShader).bind(),ee.uniforms=N,this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ee=this.lineShader).bind(),ee.uniforms=N,this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ee=this.pointShader).bind(),ee.uniforms=N,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ee=this.contourShader).bind(),ee.uniforms=N,this.contourVAO.bind(),X.drawArrays(X.LINES,0,this.contourCount),this.contourVAO.unbind())},k.drawPick=function(G){for(var X=this.gl,Z=(G=G||{}).model||T,q=G.view||T,W=G.projection||T,te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],R=0;R<3;++R)te[0][R]=Math.max(te[0][R],this.clipBounds[0][R]),te[1][R]=Math.min(te[1][R],this.clipBounds[1][R]);this._model=[].slice.call(Z),this._view=[].slice.call(q),this._projection=[].slice.call(W),this._resolution=[X.drawingBufferWidth,X.drawingBufferHeight];var N,V={model:Z,view:q,projection:W,clipBounds:te,pickId:this.pickId/255};(N=this.pickShader).bind(),N.uniforms=V,this.triangleCount>0&&(this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((N=this.pointPickShader).bind(),N.uniforms=V,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind())},k.pick=function(G){if(!G||G.id!==this.pickId)return null;for(var X=G.value[0]+256*G.value[1]+65536*G.value[2],Z=this.cells[X],q=this.positions,W=new Array(Z.length),te=0;te<Z.length;++te)W[te]=q[Z[te]];var R=G.coord[0],N=G.coord[1];if(!this.pickVertex){var V=this.positions[Z[0]],ee=this.positions[Z[1]],j=this.positions[Z[2]];return{_cellCenter:!0,position:[R,N],index:X,cell:Z,cellId:X,intensity:this.intensity[X],dataCoordinate:[(V[0]+ee[0]+j[0])/3,(V[1]+ee[1]+j[1])/3,(V[2]+ee[2]+j[2])/3]}}var $=d(W,[R*this.pixelRatio,this._resolution[1]-N*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!$)return null;var re=$[2],ne=0;for(te=0;te<Z.length;++te)ne+=re[te]*this.intensity[Z[te]];return{position:$[1],index:Z[$[0]],cell:Z,cellId:X,intensity:ne,dataCoordinate:this.positions[Z[$[0]]]}},k.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},u.exports=function(G,X){if(1===arguments.length&&(G=(X=G).gl),!(G.getExtension("OES_standard_derivatives")||G.getExtension("MOZ_OES_standard_derivatives")||G.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var q=D(G),W=S(G),te=C(G),R=z(G),N=B(G),V=U(G),ee=a(G,i(new Uint8Array([255,255,255,255]),[1,1,4]));ee.generateMipmap(),ee.minFilter=G.LINEAR_MIPMAP_LINEAR,ee.magFilter=G.LINEAR;var j=n(G),J=n(G),$=n(G),re=n(G),ne=n(G),se=t(G,[{buffer:j,type:G.FLOAT,size:3},{buffer:ne,type:G.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:J,type:G.FLOAT,size:4},{buffer:$,type:G.FLOAT,size:2},{buffer:re,type:G.FLOAT,size:3}]),ie=n(G),ue=n(G),le=n(G),de=n(G),ve=t(G,[{buffer:ie,type:G.FLOAT,size:3},{buffer:de,type:G.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ue,type:G.FLOAT,size:4},{buffer:le,type:G.FLOAT,size:2}]),_e=n(G),be=n(G),Te=n(G),he=n(G),me=n(G),Ae=t(G,[{buffer:_e,type:G.FLOAT,size:3},{buffer:me,type:G.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:be,type:G.FLOAT,size:4},{buffer:Te,type:G.FLOAT,size:2},{buffer:he,type:G.FLOAT,size:1}]),we=n(G),Pe=new E(G,ee,q,W,te,R,N,V,j,ne,J,$,re,se,ie,de,ue,le,ve,_e,me,be,Te,he,Ae,we,t(G,[{buffer:we,type:G.FLOAT,size:3}]));return Pe.update(X),Pe}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(v,u,y){"use strict";u.exports=function(i){var l=i.gl;return new a(i,e(l,[0,0,0,1,1,0,1,1]),n(l,t.boxVert,t.lineFrag))};var e=v("gl-buffer"),n=v("gl-shader"),t=v("./shaders");function a(i,l,c){this.plot=i,this.vbo=l,this.shader=c}var r,f,s=a.prototype;s.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},s.drawBox=(r=[0,0],f=[0,0],function(i,l,c,h,m){var o=this.shader,b=this.plot.gl;r[0]=i,r[1]=l,f[0]=c,f[1]=h,o.uniforms.lo=r,o.uniforms.hi=f,o.uniforms.color=m,b.drawArrays(b.TRIANGLE_STRIP,0,4)}),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(v,u,y){"use strict";u.exports=function(d){var o=d.gl;return new r(d,e(o),n(o,a.gridVert,a.gridFrag),n(o,a.tickVert,a.gridFrag))};var e=v("gl-buffer"),n=v("gl-shader"),t=v("binary-search-bounds"),a=v("./shaders");function r(d,o,b,g){this.plot=d,this.vbo=o,this.shader=b,this.tickShader=g,this.ticks=[[],[]]}function f(d,o){return d-o}var s,i,l,c,h,d,o,b,g,w,_,m=r.prototype;m.draw=(s=[0,0],i=[0,0],l=[0,0],function(){for(var d=this.plot,o=this.vbo,b=this.shader,g=this.ticks,w=d.gl,_=d._tickBounds,A=d.dataBox,T=d.viewBox,E=d.gridLineWidth,k=d.gridLineColor,O=d.gridLineEnable,D=d.pixelRatio,S=0;S<2;++S){var C=_[S],B=.5*(A[S+2]+A[S]),U=A[S+2]-A[S];i[S]=2*(_[S+2]-C)/U,s[S]=2*(C-B)/U}b.bind(),o.bind(),b.attributes.dataCoord.pointer(),b.uniforms.dataShift=s,b.uniforms.dataScale=i;var G=0;for(S=0;S<2;++S){l[0]=l[1]=0,l[S]=1,b.uniforms.dataAxis=l,b.uniforms.lineWidth=E[S]/(T[S+2]-T[S])*D,b.uniforms.color=k[S];var X=6*g[S].length;O[S]&&X&&w.drawArrays(w.TRIANGLES,G,X),G+=X}}),m.drawTickMarks=(d=[0,0],o=[0,0],b=[1,0],g=[0,1],w=[0,0],_=[0,0],function(){for(var A=this.plot,T=this.vbo,E=this.tickShader,k=this.ticks,O=A.gl,D=A._tickBounds,S=A.dataBox,C=A.viewBox,z=A.pixelRatio,B=A.screenBox,U=B[2]-B[0],G=B[3]-B[1],X=C[2]-C[0],Z=C[3]-C[1],q=0;q<2;++q){var W=D[q],R=.5*(S[q+2]+S[q]),N=S[q+2]-S[q];o[q]=2*(D[q+2]-W)/N,d[q]=2*(W-R)/N}o[0]*=X/U,d[0]*=X/U,o[1]*=Z/G,d[1]*=Z/G,E.bind(),T.bind(),E.attributes.dataCoord.pointer();var V=E.uniforms;V.dataShift=d,V.dataScale=o;var ee=A.tickMarkLength,j=A.tickMarkWidth,J=A.tickMarkColor,$=6*k[0].length,re=Math.min(t.ge(k[0],(S[0]-D[0])/(D[2]-D[0]),f),k[0].length),ne=Math.min(t.gt(k[0],(S[2]-D[0])/(D[2]-D[0]),f),k[0].length),se=0+6*re,ie=6*Math.max(0,ne-re),ue=Math.min(t.ge(k[1],(S[1]-D[1])/(D[3]-D[1]),f),k[1].length),le=Math.min(t.gt(k[1],(S[3]-D[1])/(D[3]-D[1]),f),k[1].length),de=$+6*ue,ve=6*Math.max(0,le-ue);w[0]=2*(C[0]-ee[1])/U-1,w[1]=(C[3]+C[1])/G-1,_[0]=ee[1]*z/U,_[1]=j[1]*z/G,ve&&(V.color=J[1],V.tickScale=_,V.dataAxis=g,V.screenOffset=w,O.drawArrays(O.TRIANGLES,de,ve)),w[0]=(C[2]+C[0])/U-1,w[1]=2*(C[1]-ee[0])/G-1,_[0]=j[0]*z/U,_[1]=ee[0]*z/G,ie&&(V.color=J[0],V.tickScale=_,V.dataAxis=b,V.screenOffset=w,O.drawArrays(O.TRIANGLES,se,ie)),w[0]=2*(C[2]+ee[3])/U-1,w[1]=(C[3]+C[1])/G-1,_[0]=ee[3]*z/U,_[1]=j[3]*z/G,ve&&(V.color=J[3],V.tickScale=_,V.dataAxis=g,V.screenOffset=w,O.drawArrays(O.TRIANGLES,de,ve)),w[0]=(C[2]+C[0])/U-1,w[1]=2*(C[3]+ee[2])/G-1,_[0]=j[2]*z/U,_[1]=ee[2]*z/G,ie&&(V.color=J[2],V.tickScale=_,V.dataAxis=b,V.screenOffset=w,O.drawArrays(O.TRIANGLES,se,ie))}),m.update=(c=[1,1,-1,-1,1,-1],h=[1,-1,1,1,-1,-1],function(d){for(var o=d.ticks,b=d.bounds,g=new Float32Array(18*(o[0].length+o[1].length)),w=0,_=[[],[]],A=0;A<2;++A)for(var T=_[A],E=o[A],k=b[A],O=b[A+2],D=0;D<E.length;++D){var S=(E[D].x-k)/(O-k);T.push(S);for(var C=0;C<6;++C)g[w++]=S,g[w++]=c[C],g[w++]=h[C]}this.ticks=_,this.vbo.update(g)}),m.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(v,u,y){"use strict";u.exports=function(i){var l=i.gl;return new a(i,e(l,[-1,-1,-1,1,1,-1,1,1]),n(l,t.lineVert,t.lineFrag))};var e=v("gl-buffer"),n=v("gl-shader"),t=v("./shaders");function a(i,l,c){this.plot=i,this.vbo=l,this.shader=c}var r,f,s=a.prototype;s.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},s.drawLine=(r=[0,0],f=[0,0],function(i,l,c,h,m,d){var o=this.plot,b=this.shader,g=o.gl;r[0]=i,r[1]=l,f[0]=c,f[1]=h,b.uniforms.start=r,b.uniforms.end=f,b.uniforms.width=m*o.pixelRatio,b.uniforms.color=d,g.drawArrays(g.TRIANGLE_STRIP,0,4)}),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(v,u,y){"use strict";var e=v("glslify"),n=e(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);u.exports={lineVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:n,textVert:e(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:n,gridVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:n,boxVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(v,u,y){"use strict";u.exports=function(o){var b=o.gl;return new f(o,e(b),n(b,r.textVert,r.textFrag))};var e=v("gl-buffer"),n=v("gl-shader"),t=v("text-cache"),a=v("binary-search-bounds"),r=v("./shaders");function f(o,b,g){this.plot=o,this.vbo=b,this.shader=g,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var s,i,l,c,h,m,o,b,d=f.prototype;d.drawTicks=(s=[0,0],i=[0,0],l=[0,0],function(o){var b=this.plot,g=this.shader,w=this.tickX[o],_=this.tickOffset[o],A=b.gl,T=b.viewBox,E=b.dataBox,k=b.screenBox,O=b.pixelRatio,D=b.tickEnable,S=b.tickPad,C=b.tickColor,z=b.tickAngle,B=b.labelEnable,U=b.labelPad,G=b.labelColor,X=b.labelAngle,Z=this.labelOffset[o],q=this.labelCount[o],W=a.lt(w,E[o]),te=a.le(w,E[o+2]);s[0]=s[1]=0,s[o]=1,i[o]=(T[2+o]+T[o])/(k[2+o]-k[o])-1;var R=2/k[2+(1^o)]-k[1^o];i[1^o]=R*T[1^o]-1,D[o]&&(i[1^o]-=R*O*S[o],W<te&&_[te]>_[W]&&(g.uniforms.dataAxis=s,g.uniforms.screenOffset=i,g.uniforms.color=C[o],g.uniforms.angle=z[o],A.drawArrays(A.TRIANGLES,_[W],_[te]-_[W]))),B[o]&&q&&(i[1^o]-=R*O*U[o],g.uniforms.dataAxis=l,g.uniforms.screenOffset=i,g.uniforms.color=G[o],g.uniforms.angle=X[o],A.drawArrays(A.TRIANGLES,Z,q)),i[1^o]=R*T[2+(1^o)]-1,D[o+2]&&(i[1^o]+=R*O*S[o+2],W<te&&_[te]>_[W]&&(g.uniforms.dataAxis=s,g.uniforms.screenOffset=i,g.uniforms.color=C[o+2],g.uniforms.angle=z[o+2],A.drawArrays(A.TRIANGLES,_[W],_[te]-_[W]))),B[o+2]&&q&&(i[1^o]+=R*O*U[o+2],g.uniforms.dataAxis=l,g.uniforms.screenOffset=i,g.uniforms.color=G[o+2],g.uniforms.angle=X[o+2],A.drawArrays(A.TRIANGLES,Z,q))}),d.drawTitle=(o=[0,0],b=[0,0],function(){var g=this.plot,w=this.shader,_=g.gl,A=g.screenBox,T=g.titleCenter,E=g.titleAngle,k=g.titleColor,O=g.pixelRatio;if(this.titleCount){for(var D=0;D<2;++D)b[D]=2*(T[D]*O-A[D])/(A[2+D]-A[D])-1;w.bind(),w.uniforms.dataAxis=o,w.uniforms.screenOffset=b,w.uniforms.angle=E,w.uniforms.color=k,_.drawArrays(_.TRIANGLES,this.titleOffset,this.titleCount)}}),d.bind=(c=[0,0],h=[0,0],m=[0,0],function(){var o=this.plot,b=this.shader,g=o._tickBounds,w=o.dataBox,_=o.screenBox,A=o.viewBox;b.bind();for(var T=0;T<2;++T){var E=g[T],O=.5*(w[T+2]+w[T]),D=w[T+2]-w[T],C=A[T+2]-A[T],B=_[T+2]-_[T];h[T]=2*(g[T+2]-E)/D*C/B,c[T]=2*(E-O)/D*C/B}m[1]=2*o.pixelRatio/(_[3]-_[1]),m[0]=m[1]*(_[3]-_[1])/(_[2]-_[0]),b.uniforms.dataScale=h,b.uniforms.dataShift=c,b.uniforms.textScale=m,this.vbo.bind(),b.attributes.textCoordinate.pointer()}),d.update=function(o){var b,g,w,_,A,T=[],E=o.ticks,k=o.bounds;for(A=0;A<2;++A){var O=[Math.floor(T.length/3)],D=[-1/0],S=E[A];for(b=0;b<S.length;++b){var C=S[b],z=C.x,U=C.font||"sans-serif";_=C.fontSize||12;for(var G=1/(k[A+2]-k[A]),X=k[A],Z=C.text.split("\n"),q=0;q<Z.length;q++)for(w=t(U,Z[q]).data,g=0;g<w.length;g+=2)T.push(w[g]*_,-w[g+1]*_-q*_*1.2,(z-X)*G);O.push(Math.floor(T.length/3)),D.push(z)}this.tickOffset[A]=O,this.tickX[A]=D}for(A=0;A<2;++A){for(this.labelOffset[A]=Math.floor(T.length/3),w=t(o.labelFont[A],o.labels[A],{textAlign:"center"}).data,_=o.labelSize[A],b=0;b<w.length;b+=2)T.push(w[b]*_,-w[b+1]*_,0);this.labelCount[A]=Math.floor(T.length/3)-this.labelOffset[A]}for(this.titleOffset=Math.floor(T.length/3),w=t(o.titleFont,o.title).data,_=o.titleSize,b=0;b<w.length;b+=2)T.push(w[b]*_,-w[b+1]*_,0);this.titleCount=Math.floor(T.length/3)-this.titleOffset,this.vbo.update(T)},d.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(v,u,y){"use strict";u.exports=function(c){var h=c.gl,d=new f(h,e(h,[h.drawingBufferWidth,h.drawingBufferHeight]));return d.grid=n(d),d.text=t(d),d.line=a(d),d.box=r(d),d.update(c),d};var e=v("gl-select-static"),n=v("./lib/grid"),t=v("./lib/text"),a=v("./lib/line"),r=v("./lib/box");function f(c,h){this.gl=c,this.pickBuffer=h,this.screenBox=[0,0,c.drawingBufferWidth,c.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var s=f.prototype;function i(c){for(var h=c.slice(),m=0;m<h.length;++m)h[m]=h[m].slice();return h}function l(c,h){return c.x-h.x}s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){var c=this.gl,h=this.screenBox,m=this.viewBox,d=this.dataBox,o=this.pixelRatio,b=this.grid,g=this.line,w=this.text,_=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,c.bindFramebuffer(c.FRAMEBUFFER,null),c.enable(c.SCISSOR_TEST),c.disable(c.DEPTH_TEST),c.depthFunc(c.LESS),c.depthMask(!1),c.enable(c.BLEND),c.blendEquation(c.FUNC_ADD,c.FUNC_ADD),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),this.borderColor){c.scissor(h[0],h[1],h[2]-h[0],h[3]-h[1]);var A=this.borderColor;c.clearColor(A[0]*A[3],A[1]*A[3],A[2]*A[3],A[3]),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)}c.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),c.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]);var T=this.backgroundColor;c.clearColor(T[0]*T[3],T[1]*T[3],T[2]*T[3],T[3]),c.clear(c.COLOR_BUFFER_BIT),b.draw();var E=this.zeroLineEnable,k=this.zeroLineColor,O=this.zeroLineWidth;if(E[0]||E[1]){g.bind();for(var D=0;D<2;++D)if(E[D]&&d[D]<=0&&d[D+2]>=0){var S=h[D]-d[D]*(h[D+2]-h[D])/(d[D+2]-d[D]);0===D?g.drawLine(S,h[1],S,h[3],O[D],k[D]):g.drawLine(h[0],S,h[2],S,O[D],k[D])}}for(D=0;D<_.length;++D)_[D].draw();c.viewport(h[0],h[1],h[2]-h[0],h[3]-h[1]),c.scissor(h[0],h[1],h[2]-h[0],h[3]-h[1]),this.grid.drawTickMarks(),g.bind();var C=this.borderLineEnable,z=this.borderLineWidth,B=this.borderLineColor;for(C[1]&&g.drawLine(m[0],m[1]-.5*z[1]*o,m[0],m[3]+.5*z[3]*o,z[1],B[1]),C[0]&&g.drawLine(m[0]-.5*z[0]*o,m[1],m[2]+.5*z[2]*o,m[1],z[0],B[0]),C[3]&&g.drawLine(m[2],m[1]-.5*z[1]*o,m[2],m[3]+.5*z[3]*o,z[3],B[3]),C[2]&&g.drawLine(m[0]-.5*z[0]*o,m[3],m[2]+.5*z[2]*o,m[3],z[2],B[2]),w.bind(),D=0;D<2;++D)w.drawTicks(D);this.titleEnable&&w.drawTitle();var U=this.overlays;for(D=0;D<U.length;++D)U[D].draw();c.disable(c.SCISSOR_TEST),c.disable(c.BLEND),c.depthMask(!0)}},s.drawPick=function(){if(!this.static){var c=this.pickBuffer;this._pickTimeout=null,c.begin();for(var h=1,m=this.objects,d=0;d<m.length;++d)h=m[d].drawPick(h);c.end()}},s.pick=function(c,h){if(!this.static){var m=this.pixelRatio,d=this.pickPixelRatio,o=this.viewBox,b=0|Math.round((c-o[0]/m)*d),g=0|Math.round((h-o[1]/m)*d),w=this.pickBuffer.query(b,g,this.pickRadius);if(!w)return null;for(var _=w.id+(w.value[0]<<8)+(w.value[1]<<16)+(w.value[2]<<24),A=this.objects,T=0;T<A.length;++T){var E=A[T].pick(b,g,_);if(E)return E}return null}},s.setScreenBox=function(c){var h=this.screenBox,m=this.pixelRatio;h[0]=0|Math.round(c[0]*m),h[1]=0|Math.round(c[1]*m),h[2]=0|Math.round(c[2]*m),h[3]=0|Math.round(c[3]*m),this.setDirty()},s.setDataBox=function(c){var h=this.dataBox;(h[0]!==c[0]||h[1]!==c[1]||h[2]!==c[2]||h[3]!==c[3])&&(h[0]=c[0],h[1]=c[1],h[2]=c[2],h[3]=c[3],this.setDirty())},s.setViewBox=function(c){var h=this.pixelRatio,m=this.viewBox;m[0]=0|Math.round(c[0]*h),m[1]=0|Math.round(c[1]*h),m[2]=0|Math.round(c[2]*h),m[3]=0|Math.round(c[3]*h);var d=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((c[2]-c[0])*d),0|Math.round((c[3]-c[1])*d)],this.setDirty()},s.update=function(c){var h=this.gl;this.pixelRatio=(c=c||{}).pixelRatio||1;var m=this.pixelRatio;this.pickPixelRatio=Math.max(m,1),this.setScreenBox(c.screenBox||[0,0,h.drawingBufferWidth/m,h.drawingBufferHeight/m]),this.setViewBox(c.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/m,.125*(this.screenBox[3]-this.screenBox[1])/m,.875*(this.screenBox[2]-this.screenBox[0])/m,.875*(this.screenBox[3]-this.screenBox[1])/m]);var d=this.viewBox,o=(d[2]-d[0])/(d[3]-d[1]);this.setDataBox(c.dataBox||[-10,-10/o,10,10/o]),this.borderColor=!1!==c.borderColor&&(c.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(c.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(c.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(c.gridLineWidth||[1,1]).slice(),this.gridLineColor=i(c.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(c.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(c.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=i(c.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(c.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(c.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=i(c.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(c.titleCenter||[.5*(d[0]+d[2])/m,(d[3]+120)/m]).slice(),this.titleEnable=!("titleEnable"in c)||!!c.titleEnable,this.titleAngle=c.titleAngle||0,this.titleColor=(c.titleColor||[0,0,0,1]).slice(),this.labelPad=(c.labelPad||[15,15,15,15]).slice(),this.labelAngle=(c.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(c.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=i(c.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(c.tickPad||[15,15,15,15]).slice(),this.tickAngle=(c.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(c.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=i(c.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(c.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(c.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=i(c.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var b=c.ticks||[[],[]],g=this._tickBounds;g[0]=g[1]=1/0,g[2]=g[3]=-1/0;for(var w=0;w<2;++w){var _=b[w].slice(0);0!==_.length&&(_.sort(l),g[w]=Math.min(g[w],_[0].x),g[w+2]=Math.max(g[w+2],_[_.length-1].x))}this.grid.update({bounds:g,ticks:b}),this.text.update({bounds:g,ticks:b,labels:c.labels||["x","y"],labelSize:c.labelSize||[12,12],labelFont:c.labelFont||["sans-serif","sans-serif"],title:c.title||"",titleSize:c.titleSize||18,titleFont:c.titleFont||"sans-serif"}),this.static=!!c.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var c=this.objects.length-1;c>=0;--c)this.objects[c].dispose();for(this.objects.length=0,c=this.overlays.length-1;c>=0;--c)this.overlays[c].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(c){this.objects.indexOf(c)<0&&(this.objects.push(c),this.setDirty())},s.removeObject=function(c){for(var h=this.objects,m=0;m<h.length;++m)if(h[m]===c){h.splice(m,1),this.setDirty();break}},s.addOverlay=function(c){this.overlays.indexOf(c)<0&&(this.overlays.push(c),this.setOverlayDirty())},s.removeOverlay=function(c){for(var h=this.overlays,m=0;m<h.length;++m)if(h[m]===c){h.splice(m,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(v,u,y){"use strict";u.exports=function(s,i){s=s||document.body;var l=[.01,1/0];"distanceLimits"in(i=i||{})&&(l[0]=i.distanceLimits[0],l[1]=i.distanceLimits[1]),"zoomMin"in i&&(l[0]=i.zoomMin),"zoomMax"in i&&(l[1]=i.zoomMax);var c=n({center:i.center||[0,0,0],up:i.up||[0,1,0],eye:i.eye||[0,0,10],mode:i.mode||"orbit",distanceLimits:l}),h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,d=s.clientWidth,o=s.clientHeight,b={keyBindingMode:"rotate",enableWheel:!0,view:c,element:s,delay:i.delay||16,rotateSpeed:i.rotateSpeed||1,zoomSpeed:i.zoomSpeed||1,translateSpeed:i.translateSpeed||1,flipX:!!i.flipX,flipY:!!i.flipY,modes:c.modes,_ortho:i._ortho||i.projection&&"orthographic"===i.projection.type||!1,tick:function(){var g=e(),w=this.delay,_=g-2*w;c.idle(g-w),c.recalcMatrix(_),c.flush(g-(100+2*w));for(var A=!0,T=c.computedMatrix,E=0;E<16;++E)A=A&&h[E]===T[E],h[E]=T[E];var k=s.clientWidth===d&&s.clientHeight===o;return d=s.clientWidth,o=s.clientHeight,A?!k:(m=Math.exp(c.computedRadius[0]),!0)},lookAt:function(g,w,_){c.lookAt(c.lastT(),g,w,_)},rotate:function(g,w,_){c.rotate(c.lastT(),g,w,_)},pan:function(g,w,_){c.pan(c.lastT(),g,w,_)},translate:function(g,w,_){c.translate(c.lastT(),g,w,_)}};return Object.defineProperties(b,{matrix:{get:function(){return c.computedMatrix},set:function(g){return c.setMatrix(c.lastT(),g),c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},set:function(g){var w=c.computedUp.slice(),_=c.computedEye.slice(),A=c.computedCenter.slice();if(c.setMode(g),"turntable"===g){var T=e();c._active.lookAt(T,_,A,w),c._active.lookAt(T+500,_,A,[0,0,1]),c._active.flush(T)}return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(g){return c.lookAt(c.lastT(),null,g),c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(g){return c.lookAt(c.lastT(),g),c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},set:function(g){return c.lookAt(c.lastT(),null,null,g),c.computedUp},enumerable:!0},distance:{get:function(){return m},set:function(g){return c.setDistance(c.lastT(),g),g},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(l)},set:function(g){return c.setDistanceLimits(g),g},enumerable:!0}}),s.addEventListener("contextmenu",function(g){return g.preventDefault(),!1}),b._lastX=-1,b._lastY=-1,b._lastMods={shift:!1,control:!1,alt:!1,meta:!1},b.enableMouseListeners=function(){function g(w,_,A,T){var E=b.keyBindingMode;if(!1!==E){var k="rotate"===E,O="pan"===E,D="zoom"===E,S=!!T.control,C=!!T.alt,z=!!T.shift,B=!!(1&w),U=!!(2&w),G=!!(4&w),X=1/s.clientHeight,Z=X*(_-b._lastX),q=X*(A-b._lastY),W=b.flipX?1:-1,te=b.flipY?1:-1,R=Math.PI*b.rotateSpeed,N=e();if(-1!==b._lastX&&-1!==b._lastY&&((k&&B&&!S&&!C&&!z||B&&!S&&!C&&z)&&c.rotate(N,W*R*Z,-te*R*q,0),(O&&B&&!S&&!C&&!z||U||B&&S&&!C&&!z)&&c.pan(N,-b.translateSpeed*Z*m,b.translateSpeed*q*m,0),D&&B&&!S&&!C&&!z||G||B&&!S&&C&&!z)){var V=-b.zoomSpeed*q/window.innerHeight*(N-c.lastT())*100;c.pan(N,0,0,m*(Math.exp(V)-1))}return b._lastX=_,b._lastY=A,b._lastMods=T,!0}}b.mouseListener=t(s,g),s.addEventListener("touchstart",function(w){var _=r(w.changedTouches[0],s);g(0,_[0],_[1],b._lastMods),g(1,_[0],_[1],b._lastMods)},!!f&&{passive:!0}),s.addEventListener("touchmove",function(w){var _=r(w.changedTouches[0],s);g(1,_[0],_[1],b._lastMods),w.preventDefault()},!!f&&{passive:!1}),s.addEventListener("touchend",function(w){g(0,b._lastX,b._lastY,b._lastMods)},!!f&&{passive:!0}),b.wheelListener=a(s,function(w,_){if(!1!==b.keyBindingMode&&b.enableWheel){var A=b.flipX?1:-1,T=b.flipY?1:-1,E=e();if(Math.abs(w)>Math.abs(_))c.rotate(E,0,0,-w*A*Math.PI*b.rotateSpeed/window.innerWidth);else if(!b._ortho){var k=-b.zoomSpeed*T*_/window.innerHeight*(E-c.lastT())/20;c.pan(E,0,0,m*(Math.exp(k)-1))}}},!0)},b.enableMouseListeners(),b};var e=v("right-now"),n=v("3d-view"),t=v("mouse-change"),a=v("mouse-wheel"),r=v("mouse-event-offset"),f=v("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(v,u,y){var e=v("glslify"),n=v("gl-shader"),t=e(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),a=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);u.exports=function(r){return n(r,t,a,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(v,u,y){"use strict";var e=v("./camera.js"),n=v("gl-axes3d"),t=v("gl-axes3d/properties"),a=v("gl-spikes3d"),r=v("gl-select-static"),f=v("gl-fbo"),s=v("a-big-triangle"),i=v("mouse-change"),l=v("gl-mat4/perspective"),c=v("gl-mat4/ortho"),h=v("./lib/shader"),m=v("is-mobile")({tablet:!0,featureDetect:!0});function d(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function o(g){var w=Math.round(Math.log(Math.abs(g))/Math.log(10));if(w<0){var _=Math.round(Math.pow(10,-w));return Math.ceil(g*_)/_}return w>0?(_=Math.round(Math.pow(10,w)),Math.ceil(g/_)*_):Math.ceil(g)}function b(g){return"boolean"!=typeof g||g}u.exports={createScene:function(g){(g=g||{}).camera=g.camera||{};var w=g.canvas;w||(w=document.createElement("canvas"),g.container?g.container.appendChild(w):document.body.appendChild(w));var _=g.gl;if(_||(g.glOptions&&(m=!!g.glOptions.preserveDrawingBuffer),_=function(le,de){var ve=null;try{(ve=le.getContext("webgl",de))||(ve=le.getContext("experimental-webgl",de))}catch(_e){return null}return ve}(w,g.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:m})),!_)throw new Error("webgl not supported");var A=g.bounds||[[-10,-10,-10],[10,10,10]],T=new d,E=f(_,_.drawingBufferWidth,_.drawingBufferHeight,{preferFloat:!m}),k=h(_),O=g.cameraObject&&!0===g.cameraObject._ortho||g.camera.projection&&"orthographic"===g.camera.projection.type||!1,D={eye:g.camera.eye||[2,0,0],center:g.camera.center||[0,0,0],up:g.camera.up||[0,1,0],zoomMin:g.camera.zoomMax||.1,zoomMax:g.camera.zoomMin||100,mode:g.camera.mode||"turntable",_ortho:O},S=g.axes||{},C=n(_,S);C.enable=!S.disable;var B=a(_,g.spikes||{}),U=[],G=[],X=[],Z=[],q=!0,W=!0,N={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},V=(W=!0,[_.drawingBufferWidth,_.drawingBufferHeight]),ee=g.cameraObject||e(w,D),j={gl:_,contextLost:!1,pixelRatio:g.pixelRatio||1,canvas:w,selection:T,camera:ee,axes:C,axesPixels:null,spikes:B,bounds:A,objects:U,shape:V,aspect:g.aspectRatio||[1,1,1],pickRadius:g.pickRadius||10,zNear:g.zNear||.01,zFar:g.zFar||1e3,fovy:g.fovy||Math.PI/4,clearColor:g.clearColor||[0,0,0,0],autoResize:b(g.autoResize),autoBounds:b(g.autoBounds),autoScale:!!g.autoScale,autoCenter:b(g.autoCenter),clipToBounds:b(g.clipToBounds),snapToData:!!g.snapToData,onselect:g.onselect||null,onrender:g.onrender||null,onclick:g.onclick||null,cameraParams:N,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(le){this.aspect[0]=le.x,this.aspect[1]=le.y,this.aspect[2]=le.z,W=!0},setBounds:function(le,de){this.bounds[0][le]=de.min,this.bounds[1][le]=de.max},setClearColor:function(le){this.clearColor=le},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},J=[_.drawingBufferWidth/j.pixelRatio|0,_.drawingBufferHeight/j.pixelRatio|0];function $(){if(!j._stopped&&j.autoResize){var le=w.parentNode,de=1,ve=1;le&&le!==document.body?(de=le.clientWidth,ve=le.clientHeight):(de=window.innerWidth,ve=window.innerHeight);var _e=0|Math.ceil(de*j.pixelRatio),be=0|Math.ceil(ve*j.pixelRatio);if(_e!==w.width||be!==w.height){w.width=_e,w.height=be;var Te=w.style;Te.position=Te.position||"absolute",Te.left="0px",Te.top="0px",Te.width=de+"px",Te.height=ve+"px",q=!0}}}function re(){for(var le=U.length,de=Z.length,ve=0;ve<de;++ve)X[ve]=0;e:for(ve=0;ve<le;++ve){var _e=U[ve],be=_e.pickSlots;if(be){for(var Te=0;Te<de;++Te)if(X[Te]+be<255){G[ve]=Te,_e.setPickBase(X[Te]+1),X[Te]+=be;continue e}var he=r(_,V);G[ve]=de,Z.push(he),X.push(be),_e.setPickBase(1),de+=1}else G[ve]=-1}for(;de>0&&0===X[de-1];)X.pop(),Z.pop().dispose()}function ne(){if(j.contextLost)return!0;_.isContextLost()&&(j.contextLost=!0,j.mouseListener.enabled=!1,j.selection.object=null,j.oncontextloss&&j.oncontextloss())}j.autoResize&&$(),window.addEventListener("resize",$),j.update=function(le){j._stopped||(le=le||{},q=!0,W=!0)},j.add=function(le){j._stopped||(le.axes=C,U.push(le),G.push(-1),q=!0,W=!0,re())},j.remove=function(le){if(!j._stopped){var de=U.indexOf(le);de<0||(U.splice(de,1),G.pop(),q=!0,W=!0,re())}},j.dispose=function(){if(!j._stopped&&(j._stopped=!0,window.removeEventListener("resize",$),w.removeEventListener("webglcontextlost",ne),j.mouseListener.enabled=!1,!j.contextLost)){C.dispose(),B.dispose();for(var le=0;le<U.length;++le)U[le].dispose();for(E.dispose(),le=0;le<Z.length;++le)Z[le].dispose();k.dispose(),_=null,C=null,B=null,U=[]}},j._mouseRotating=!1,j._prevButtons=0,j.enableMouseListeners=function(){j.mouseListener=i(w,function(le,de,ve){if(!j._stopped){var _e=Z.length,be=U.length,Te=T.object;T.distance=1/0,T.mouse[0]=de,T.mouse[1]=ve,T.object=null,T.screen=null,T.dataCoordinate=T.dataPosition=null;var he=!1;if(le&&j._prevButtons)j._mouseRotating=!0;else{j._mouseRotating&&(W=!0),j._mouseRotating=!1;for(var me=0;me<_e;++me){var Ae=Z[me].query(de,J[1]-ve-1,j.pickRadius);if(Ae){if(Ae.distance>T.distance)continue;for(var we=0;we<be;++we){var Se=U[we];if(G[we]===me){var Pe=Se.pick(Ae);Pe&&(T.buttons=le,T.screen=Ae.coord,T.distance=Ae.distance,T.object=Se,T.index=Pe.distance,T.dataPosition=Pe.position,T.dataCoordinate=Pe.dataCoordinate,T.data=Pe,he=!0)}}}}}Te&&Te!==T.object&&(Te.highlight&&Te.highlight(null),q=!0),T.object&&(T.object.highlight&&T.object.highlight(T.data),q=!0),(he=he||T.object!==Te)&&j.onselect&&j.onselect(T),1&le&&!(1&j._prevButtons)&&j.onclick&&j.onclick(T),j._prevButtons=le}})},w.addEventListener("webglcontextlost",ne);var se=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ie=[se[0].slice(),se[1].slice()];function ue(){if(!ne()){$();var le=j.camera.tick();N.view=j.camera.matrix,q=q||le,W=W||le,C.pixelRatio=j.pixelRatio,B.pixelRatio=j.pixelRatio;var de=U.length,ve=se[0],_e=se[1];ve[0]=ve[1]=ve[2]=1/0,_e[0]=_e[1]=_e[2]=-1/0;for(var be=0;be<de;++be){(Be=U[be]).pixelRatio=j.pixelRatio,Be.axes=j.axes,q=q||!!Be.dirty,W=W||!!Be.dirty;var Te=Be.bounds;if(Te)for(var he=Te[0],me=Te[1],Ae=0;Ae<3;++Ae)ve[Ae]=Math.min(ve[Ae],he[Ae]),_e[Ae]=Math.max(_e[Ae],me[Ae])}var we=j.bounds;if(j.autoBounds)for(Ae=0;Ae<3;++Ae){if(_e[Ae]<ve[Ae])ve[Ae]=-1,_e[Ae]=1;else{ve[Ae]===_e[Ae]&&(ve[Ae]-=1,_e[Ae]+=1);var Se=.05*(_e[Ae]-ve[Ae]);ve[Ae]=ve[Ae]-Se,_e[Ae]=_e[Ae]+Se}we[0][Ae]=ve[Ae],we[1][Ae]=_e[Ae]}var Pe=!1;for(Ae=0;Ae<3;++Ae)Pe=Pe||ie[0][Ae]!==we[0][Ae]||ie[1][Ae]!==we[1][Ae],ie[0][Ae]=we[0][Ae],ie[1][Ae]=we[1][Ae];if(W=W||Pe,q=q||Pe){if(Pe){var ze=[0,0,0];for(be=0;be<3;++be)ze[be]=o((we[1][be]-we[0][be])/10);C.update(C.autoTicks?{bounds:we,tickSpacing:ze}:{bounds:we})}var He=_.drawingBufferWidth,tt=_.drawingBufferHeight;for(V[0]=He,V[1]=tt,J[0]=0|Math.max(He/j.pixelRatio,1),J[1]=0|Math.max(tt/j.pixelRatio,1),function(Je,Ye){var nt=Je.bounds,ft=Je.cameraParams,dt=ft.projection,Rt=ft.model,rt=Je.zNear,St=Je.zFar,Xt=Je.fovy,lr=Je.gl.drawingBufferWidth/Je.gl.drawingBufferHeight;Ye?(c(dt,-lr,lr,-1,1,rt,St),ft._ortho=!0):(l(dt,Xt,lr,rt,St),ft._ortho=!1);for(var Ue=0;Ue<16;++Ue)Rt[Ue]=0;Rt[15]=1;var Ze=0;for(Ue=0;Ue<3;++Ue)Ze=Math.max(Ze,nt[1][Ue]-nt[0][Ue]);for(Ue=0;Ue<3;++Ue)Rt[5*Ue]=Je.autoScale?Je.aspect[Ue]/(nt[1][Ue]-nt[0][Ue]):1/Ze,Je.autoCenter&&(Rt[12+Ue]=.5*-Rt[5*Ue]*(nt[0][Ue]+nt[1][Ue]))}(j,O),be=0;be<de;++be)(Be=U[be]).axesBounds=we,j.clipToBounds&&(Be.clipBounds=we);T.object&&(B.position=j.snapToData?T.dataCoordinate:T.dataPosition,B.bounds=we),W&&(W=!1,function(){if(!ne()){_.colorMask(!0,!0,!0,!0),_.depthMask(!0),_.disable(_.BLEND),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL);for(var Je=U.length,Ye=Z.length,nt=0;nt<Ye;++nt){var ft=Z[nt];ft.shape=J,ft.begin();for(var dt=0;dt<Je;++dt)if(G[dt]===nt){var Rt=U[dt];Rt.drawPick&&(Rt.pixelRatio=1,Rt.drawPick(N))}ft.end()}}}()),j.axesPixels=t(j.axes,N,He,tt),j.onrender&&j.onrender(),_.bindFramebuffer(_.FRAMEBUFFER,null),_.viewport(0,0,He,tt),j.clearRGBA(),_.depthMask(!0),_.colorMask(!0,!0,!0,!0),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL),_.disable(_.BLEND),_.disable(_.CULL_FACE);var Oe=!1;for(C.enable&&(Oe=Oe||C.isTransparent(),C.draw(N)),B.axes=C,T.object&&B.draw(N),_.disable(_.CULL_FACE),be=0;be<de;++be)(Be=U[be]).axes=C,Be.pixelRatio=j.pixelRatio,Be.isOpaque&&Be.isOpaque()&&Be.draw(N),Be.isTransparent&&Be.isTransparent()&&(Oe=!0);if(Oe){for(E.shape=V,E.bind(),_.clear(_.DEPTH_BUFFER_BIT),_.colorMask(!1,!1,!1,!1),_.depthMask(!0),_.depthFunc(_.LESS),C.enable&&C.isTransparent()&&C.drawTransparent(N),be=0;be<de;++be)(Be=U[be]).isOpaque&&Be.isOpaque()&&Be.draw(N);for(_.enable(_.BLEND),_.blendEquation(_.FUNC_ADD),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.colorMask(!0,!0,!0,!0),_.depthMask(!1),_.clearColor(0,0,0,0),_.clear(_.COLOR_BUFFER_BIT),C.isTransparent()&&C.drawTransparent(N),be=0;be<de;++be){var Be;(Be=U[be]).isTransparent&&Be.isTransparent()&&Be.drawTransparent(N)}_.bindFramebuffer(_.FRAMEBUFFER,null),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.disable(_.DEPTH_TEST),k.bind(),E.color[0].bind(0),k.uniforms.accumBuffer=0,s(_),_.disable(_.BLEND)}for(q=!1,be=0;be<de;++be)U[be].dirty=!1}}}return j.enableMouseListeners(),function le(){j._stopped||j.contextLost||(ue(),requestAnimationFrame(le))}(),j.redraw=function(){j._stopped||(q=!0,ue())},j},createCamera:e}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(v,u,y){var e=v("glslify");y.pointVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),y.pointFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),y.pickVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),y.pickFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(v,u,y){"use strict";var e=v("gl-shader"),n=v("gl-buffer"),t=v("typedarray-pool"),a=v("./lib/shader");function r(l,c,h,m,d){this.plot=l,this.offsetBuffer=c,this.pickBuffer=h,this.shader=m,this.pickShader=d,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}u.exports=function(l,c){var h=l.gl,g=new r(l,n(h),n(h),e(h,a.pointVertex,a.pointFragment),e(h,a.pickVertex,a.pickFragment));return g.update(c),l.addObject(g),g};var f,s,i=r.prototype;i.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},i.update=function(l){var c;function h(_,A){return _ in l?l[_]:A}l=l||{},this.sizeMin=h("sizeMin",.5),this.sizeMax=h("sizeMax",20),this.color=h("color",[1,0,0,1]).slice(),this.areaRatio=h("areaRatio",1),this.borderColor=h("borderColor",[0,0,0,1]).slice(),this.blend=h("blend",!1);var m=l.positions.length>>>1,d=l.positions instanceof Float32Array,o=l.idToIndex instanceof Int32Array&&l.idToIndex.length>=m,b=l.positions,g=d?b:t.mallocFloat32(b.length),w=o?l.idToIndex:t.mallocInt32(m);if(d||g.set(b),!o)for(g.set(b),c=0;c<m;c++)w[c]=c;this.points=b,this.offsetBuffer.update(g),this.pickBuffer.update(w),d||t.free(g),o||t.free(w),this.pointCount=m,this.pickOffset=0},i.unifiedDraw=(f=[1,0,0,0,1,0,0,0,1],s=[0,0,0,0],function(l){var c=void 0!==l,h=c?this.pickShader:this.shader,m=this.plot.gl,d=this.plot.dataBox;if(0===this.pointCount)return l;var o=d[2]-d[0],b=d[3]-d[1],g=function(T,E){var k,O=0,D=T.length>>>1;for(k=0;k<D;k++){var S=T[2*k],C=T[2*k+1];S>=E[0]&&S<=E[2]&&C>=E[1]&&C<=E[3]&&O++}return O}(this.points,d),w=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(g,.33333)));f[0]=2/o,f[4]=2/b,f[6]=-2*d[0]/o-1,f[7]=-2*d[1]/b-1,this.offsetBuffer.bind(),h.bind(),h.attributes.position.pointer(),h.uniforms.matrix=f,h.uniforms.color=this.color,h.uniforms.borderColor=this.borderColor,h.uniforms.pointCloud=w<5,h.uniforms.pointSize=w,h.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),c&&(s[0]=255&l,s[1]=l>>8&255,s[2]=l>>16&255,s[3]=l>>24&255,this.pickBuffer.bind(),h.attributes.pickId.pointer(m.UNSIGNED_BYTE),h.uniforms.pickOffset=s,this.pickOffset=l);var _=m.getParameter(m.BLEND),A=m.getParameter(m.DITHER);return _&&!this.blend&&m.disable(m.BLEND),A&&m.disable(m.DITHER),m.drawArrays(m.POINTS,0,this.pointCount),_&&!this.blend&&m.enable(m.BLEND),A&&m.enable(m.DITHER),l+this.pointCount}),i.draw=i.unifiedDraw,i.drawPick=i.unifiedDraw,i.pick=function(l,c,h){var m=this.pickOffset;if(h<m||h>=m+this.pointCount)return null;var o=h-m,b=this.points;return{object:this,pointId:o,dataCoord:[b[2*o],b[2*o+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(v,u,y){u.exports=function(e,n,t,a){var r,f,s,i,l,c=n[0],h=n[1],m=n[2],d=n[3],o=t[0],b=t[1],g=t[2],w=t[3];return(f=c*o+h*b+m*g+d*w)<0&&(f=-f,o=-o,b=-b,g=-g,w=-w),1-f>1e-6?(r=Math.acos(f),s=Math.sin(r),i=Math.sin((1-a)*r)/s,l=Math.sin(a*r)/s):(i=1-a,l=a),e[0]=i*c+l*o,e[1]=i*h+l*b,e[2]=i*m+l*g,e[3]=i*d+l*w,e}},{}],125:[function(v,u,y){"use strict";u.exports=function(e){return e||0===e?e.toString():""}},{}],126:[function(v,u,y){"use strict";var e=v("vectorize-text");u.exports=function(t,a,r){var f=n[a];if(f||(f=n[a]={}),t in f)return f[t];var s={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},i=e(t,s);s.triangles=!1;var l,c,h=e(t,s);if(r&&1!==r){for(l=0;l<i.positions.length;++l)for(c=0;c<i.positions[l].length;++c)i.positions[l][c]/=r;for(l=0;l<h.positions.length;++l)for(c=0;c<h.positions[l].length;++c)h.positions[l][c]/=r}var m=[[1/0,1/0],[-1/0,-1/0]],d=h.positions.length;for(l=0;l<d;++l){var o=h.positions[l];for(c=0;c<2;++c)m[0][c]=Math.min(m[0][c],o[c]),m[1][c]=Math.max(m[1][c],o[c])}return f[t]=[i,h,m]};var n={}},{"vectorize-text":311}],127:[function(v,u,y){var e=v("gl-shader"),n=v("glslify"),t=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),r=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),f=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),i=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],l={vertex:t,fragment:f,attributes:i},c={vertex:a,fragment:f,attributes:i},h={vertex:r,fragment:f,attributes:i},m={vertex:t,fragment:s,attributes:i},d={vertex:a,fragment:s,attributes:i},o={vertex:r,fragment:s,attributes:i};function b(g,w){var _=e(g,w),A=_.attributes;return A.position.location=0,A.color.location=1,A.glyph.location=2,A.id.location=3,_}y.createPerspective=function(g){return b(g,l)},y.createOrtho=function(g){return b(g,c)},y.createProject=function(g){return b(g,h)},y.createPickPerspective=function(g){return b(g,m)},y.createPickOrtho=function(g){return b(g,d)},y.createPickProject=function(g){return b(g,o)}},{"gl-shader":132,glslify:231}],128:[function(v,u,y){"use strict";var e=v("is-string-blank"),n=v("gl-buffer"),t=v("gl-vao"),a=v("typedarray-pool"),r=v("gl-mat4/multiply"),f=v("./lib/shaders"),s=v("./lib/glyphs"),i=v("./lib/get-simple-string"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(X,Z){var q=X[0],W=X[1],te=X[2],R=X[3];return X[0]=Z[0]*q+Z[4]*W+Z[8]*te+Z[12]*R,X[1]=Z[1]*q+Z[5]*W+Z[9]*te+Z[13]*R,X[2]=Z[2]*q+Z[6]*W+Z[10]*te+Z[14]*R,X[3]=Z[3]*q+Z[7]*W+Z[11]*te+Z[15]*R,X}function h(X,Z,q,W){return c(W,W),c(W,W),c(W,W)}function m(X,Z){this.index=X,this.dataCoordinate=this.position=Z}function d(X){return!0===X||X>1?1:X}function o(X,Z,q,W,te,R,N,V,ee,j,J,$){this.gl=X,this.pixelRatio=1,this.shader=Z,this.orthoShader=q,this.projectShader=W,this.pointBuffer=te,this.colorBuffer=R,this.glyphBuffer=N,this.idBuffer=V,this.vao=ee,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=j,this.pickOrthoShader=J,this.pickProjectShader=$,this.points=[],this._selectResult=new m(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}u.exports=function(X){var Z=X.gl,q=f.createPerspective(Z),W=f.createOrtho(Z),te=f.createProject(Z),R=f.createPickPerspective(Z),N=f.createPickOrtho(Z),V=f.createPickProject(Z),ee=n(Z),j=n(Z),J=n(Z),$=n(Z),ne=new o(Z,q,W,te,ee,j,J,$,t(Z,[{buffer:ee,size:3,type:Z.FLOAT},{buffer:j,size:4,type:Z.FLOAT},{buffer:J,size:2,type:Z.FLOAT},{buffer:$,size:4,type:Z.UNSIGNED_BYTE,normalized:!0}]),R,N,V);return ne.update(X),ne};var b=o.prototype;b.pickSlots=1,b.setPickBase=function(X){this.pickId=X},b.isTransparent=function(){if(this.hasAlpha)return!0;for(var X=0;X<3;++X)if(this.axesProject[X]&&this.projectHasAlpha)return!0;return!1},b.isOpaque=function(){if(!this.hasAlpha)return!0;for(var X=0;X<3;++X)if(this.axesProject[X]&&!this.projectHasAlpha)return!0;return!1};var g=[0,0],w=[0,0,0],_=[0,0,0],A=[0,0,0,1],T=[0,0,0,1],E=l.slice(),k=[0,0,0],O=[[0,0,0],[0,0,0]];function D(X){return X[0]=X[1]=X[2]=0,X}function S(X,Z){return X[0]=Z[0],X[1]=Z[1],X[2]=Z[2],X[3]=1,X}function C(X,Z,q,W){return X[0]=Z[0],X[1]=Z[1],X[2]=Z[2],X[q]=W,X}var B=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function U(X,Z,q,W,te,R,N){var V=q.gl;if((R===q.projectHasAlpha||N)&&function(X,Z,q,W){var te,R=Z.axesProject,N=Z.gl,V=X.uniforms,ee=q.model||l,j=q.view||l,J=q.projection||l,$=Z.axesBounds,re=function(we){for(var Se=O,Pe=0;Pe<2;++Pe)for(var ze=0;ze<3;++ze)Se[Pe][ze]=Math.max(Math.min(we[Pe][ze],1e8),-1e8);return Se}(Z.clipBounds);te=Z.axes&&Z.axes.lastCubeProps?Z.axes.lastCubeProps.axis:[1,1,1],g[0]=2/N.drawingBufferWidth,g[1]=2/N.drawingBufferHeight,X.bind(),V.view=j,V.projection=J,V.screenSize=g,V.highlightId=Z.highlightId,V.highlightScale=Z.highlightScale,V.clipBounds=re,V.pickGroup=Z.pickId/255,V.pixelRatio=W;for(var ne=0;ne<3;++ne)if(R[ne]){V.scale=Z.projectScale[ne],V.opacity=Z.projectOpacity[ne];for(var se=E,ie=0;ie<16;++ie)se[ie]=0;for(ie=0;ie<4;++ie)se[5*ie]=1;se[5*ne]=0,se[12+ne]=te[ne]<0?$[0][ne]:$[1][ne],r(se,ee,se),V.model=se;var ue=(ne+1)%3,le=(ne+2)%3,de=D(w),ve=D(_);de[ue]=1,ve[le]=1;var _e=h(0,0,0,S(A,de)),be=h(0,0,0,S(T,ve));if(Math.abs(_e[1])>Math.abs(be[1])){var Te=_e;_e=be,be=Te,Te=de,de=ve,ve=Te;var he=ue;ue=le,le=he}_e[0]<0&&(de[ue]=-1),be[1]>0&&(ve[le]=-1);var me=0,Ae=0;for(ie=0;ie<4;++ie)me+=Math.pow(ee[4*ue+ie],2),Ae+=Math.pow(ee[4*le+ie],2);de[ue]/=Math.sqrt(me),ve[le]/=Math.sqrt(Ae),V.axes[0]=de,V.axes[1]=ve,V.fragClipBounds[0]=C(k,re[0],ne,-1e8),V.fragClipBounds[1]=C(k,re[1],ne,1e8),Z.vao.bind(),Z.vao.draw(N.TRIANGLES,Z.vertexCount),Z.lineWidth>0&&(N.lineWidth(Z.lineWidth*W),Z.vao.draw(N.LINES,Z.lineVertexCount,Z.vertexCount)),Z.vao.unbind()}}(Z,q,W,te),R===q.hasAlpha||N){X.bind();var ee=X.uniforms;ee.model=W.model||l,ee.view=W.view||l,ee.projection=W.projection||l,g[0]=2/V.drawingBufferWidth,g[1]=2/V.drawingBufferHeight,ee.screenSize=g,ee.highlightId=q.highlightId,ee.highlightScale=q.highlightScale,ee.fragClipBounds=B,ee.clipBounds=q.axes.bounds,ee.opacity=q.opacity,ee.pickGroup=q.pickId/255,ee.pixelRatio=te,q.vao.bind(),q.vao.draw(V.TRIANGLES,q.vertexCount),q.lineWidth>0&&(V.lineWidth(q.lineWidth*te),q.vao.draw(V.LINES,q.lineVertexCount,q.vertexCount)),q.vao.unbind()}}function G(X,Z,q,W){var te;te=Array.isArray(X)?Z<X.length?X[Z]:void 0:X,te=i(te);var R=!0;e(te)&&(te="\u25bc",R=!1);var N=s(te,q,W);return{mesh:N[0],lines:N[1],bounds:N[2],visible:R}}b.draw=function(X){U(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,X,this.pixelRatio,!1,!1)},b.drawTransparent=function(X){U(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,X,this.pixelRatio,!0,!1)},b.drawPick=function(X){U(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,X,1,!0,!0)},b.pick=function(X){if(!X||X.id!==this.pickId)return null;var Z=X.value[2]+(X.value[1]<<8)+(X.value[0]<<16);if(Z>=this.pointCount||Z<0)return null;var q=this.points[Z],W=this._selectResult;W.index=Z;for(var te=0;te<3;++te)W.position[te]=W.dataCoordinate[te]=q[te];return W},b.highlight=function(X){if(X){var Z=X.index;this.highlightId=[(255&Z)/255,(Z>>8&255)/255,(Z>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},b.update=function(X){if("perspective"in(X=X||{})&&(this.useOrtho=!X.perspective),"orthographic"in X&&(this.useOrtho=!!X.orthographic),"lineWidth"in X&&(this.lineWidth=X.lineWidth),"project"in X)if(Array.isArray(X.project))this.axesProject=X.project;else{var Z=!!X.project;this.axesProject=[Z,Z,Z]}if("projectScale"in X)if(Array.isArray(X.projectScale))this.projectScale=X.projectScale.slice();else{var q=+X.projectScale;this.projectScale=[q,q,q]}if(this.projectHasAlpha=!1,"projectOpacity"in X){this.projectOpacity=Array.isArray(X.projectOpacity)?X.projectOpacity.slice():[q=+X.projectOpacity,q,q];for(var W=0;W<3;++W)this.projectOpacity[W]=d(this.projectOpacity[W]),this.projectOpacity[W]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in X&&(this.opacity=d(X.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var te,R,N=X.position,V=X.font||"normal",ee=X.alignment||[0,0];if(2===ee.length)te=ee[0],R=ee[1];else for(te=[],R=[],W=0;W<ee.length;++W)te[W]=ee[W][0],R[W]=ee[W][1];var j=[1/0,1/0,1/0],J=[-1/0,-1/0,-1/0],$=X.glyph,re=X.color,ne=X.size,se=X.angle,ie=X.lineColor,ue=-1,le=0,de=0,ve=0;if(N.length){ve=N.length;e:for(W=0;W<ve;++W){for(var _e=N[W],be=0;be<3;++be)if(isNaN(_e[be])||!isFinite(_e[be]))continue e;var Te=(nt=G($,W,V,this.pixelRatio)).mesh,he=nt.lines,me=nt.bounds;le+=3*Te.cells.length,de+=2*he.edges.length}}var Ae=le+de,we=a.mallocFloat(3*Ae),Se=a.mallocFloat(4*Ae),Pe=a.mallocFloat(2*Ae),ze=a.mallocUint32(Ae);if(Ae>0){var He=0,tt=le,Oe=[0,0,0,1],Be=[0,0,0,1],Je=Array.isArray(re)&&Array.isArray(re[0]),Ye=Array.isArray(ie)&&Array.isArray(ie[0]);e:for(W=0;W<ve;++W){for(ue+=1,_e=N[W],be=0;be<3;++be){if(isNaN(_e[be])||!isFinite(_e[be]))continue e;J[be]=Math.max(J[be],_e[be]),j[be]=Math.min(j[be],_e[be])}Te=(nt=G($,W,V,this.pixelRatio)).mesh,he=nt.lines,me=nt.bounds;var nt,ft=nt.visible;if(ft)if(Array.isArray(re)){if(3===(dt=Je?W<re.length?re[W]:[0,0,0,0]:re).length){for(be=0;be<3;++be)Oe[be]=dt[be];Oe[3]=1}else if(4===dt.length){for(be=0;be<4;++be)Oe[be]=dt[be];!this.hasAlpha&&dt[3]<1&&(this.hasAlpha=!0)}}else Oe[0]=Oe[1]=Oe[2]=0,Oe[3]=1;else Oe=[1,1,1,0];if(ft)if(Array.isArray(ie)){var dt;if(3===(dt=Ye?W<ie.length?ie[W]:[0,0,0,0]:ie).length){for(be=0;be<3;++be)Be[be]=dt[be];Be[be]=1}else if(4===dt.length){for(be=0;be<4;++be)Be[be]=dt[be];!this.hasAlpha&&dt[3]<1&&(this.hasAlpha=!0)}}else Be[0]=Be[1]=Be[2]=0,Be[3]=1;else Be=[1,1,1,0];var Rt=.5;ft?Array.isArray(ne)?Rt=W<ne.length?+ne[W]:12:ne?Rt=+ne:this.useOrtho&&(Rt=12):Rt=0;var Et=0;Array.isArray(se)?Et=W<se.length?+se[W]:0:se&&(Et=+se);var at=Math.cos(Et),rt=Math.sin(Et);for(_e=N[W],be=0;be<3;++be)J[be]=Math.max(J[be],_e[be]),j[be]=Math.min(j[be],_e[be]);var St=te,Xt=R;St=0,Array.isArray(te)?St=W<te.length?te[W]:0:te&&(St=te),Xt=0,Array.isArray(R)?Xt=W<R.length?R[W]:0:R&&(Xt=R);var lr=[St*=St>0?1-me[0][0]:St<0?1+me[1][0]:1,Xt*=Xt>0?1-me[0][1]:Xt<0?1+me[1][1]:1],Ue=Te.cells||[],Ze=Te.positions||[];for(be=0;be<Ue.length;++be)for(var Ne=Ue[be],it=0;it<3;++it){for(var ke=0;ke<3;++ke)we[3*He+ke]=_e[ke];for(ke=0;ke<4;++ke)Se[4*He+ke]=Oe[ke];ze[He]=ue;var De=Ze[Ne[it]];Pe[2*He]=Rt*(at*De[0]-rt*De[1]+lr[0]),Pe[2*He+1]=Rt*(rt*De[0]+at*De[1]+lr[1]),He+=1}for(Ue=he.edges,Ze=he.positions,be=0;be<Ue.length;++be)for(Ne=Ue[be],it=0;it<2;++it){for(ke=0;ke<3;++ke)we[3*tt+ke]=_e[ke];for(ke=0;ke<4;++ke)Se[4*tt+ke]=Be[ke];ze[tt]=ue,Pe[2*tt]=Rt*(at*(De=Ze[Ne[it]])[0]-rt*De[1]+lr[0]),Pe[2*tt+1]=Rt*(rt*De[0]+at*De[1]+lr[1]),tt+=1}}}this.bounds=[j,J],this.points=N,this.pointCount=N.length,this.vertexCount=le,this.lineVertexCount=de,this.pointBuffer.update(we),this.colorBuffer.update(Se),this.glyphBuffer.update(Pe),this.idBuffer.update(ze),a.free(we),a.free(Se),a.free(Pe),a.free(ze)},b.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(v,u,y){"use strict";var e=v("glslify");y.boxVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),y.boxFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(v,u,y){"use strict";var e=v("gl-shader"),n=v("gl-buffer"),t=v("./lib/shaders");function a(f,s,i){this.plot=f,this.boxBuffer=s,this.boxShader=i,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}u.exports=function(f,s){var i=f.gl,h=new a(f,n(i,[0,0,0,1,1,0,1,1]),e(i,t.boxVertex,t.boxFragment));return h.update(s),f.addOverlay(h),h};var r=a.prototype;r.draw=function(){if(this.enabled){var f=this.plot,s=this.selectBox,i=this.borderWidth,l=this.innerColor,c=this.outerColor,h=this.borderColor,m=f.box,d=f.screenBox,o=f.dataBox,b=f.viewBox,g=f.pixelRatio,w=(s[0]-o[0])*(b[2]-b[0])/(o[2]-o[0])+b[0],_=(s[1]-o[1])*(b[3]-b[1])/(o[3]-o[1])+b[1],A=(s[2]-o[0])*(b[2]-b[0])/(o[2]-o[0])+b[0],T=(s[3]-o[1])*(b[3]-b[1])/(o[3]-o[1])+b[1];if(w=Math.max(w,b[0]),_=Math.max(_,b[1]),A=Math.min(A,b[2]),T=Math.min(T,b[3]),!(A<w||T<_)){m.bind();var E=d[2]-d[0],k=d[3]-d[1];if(this.outerFill&&(m.drawBox(0,0,E,_,c),m.drawBox(0,_,w,T,c),m.drawBox(0,T,E,k,c),m.drawBox(A,_,E,T,c)),this.innerFill&&m.drawBox(w,_,A,T,l),i>0){var O=i*g;m.drawBox(w-O,_-O,A+O,_+O,h),m.drawBox(w-O,T-O,A+O,T+O,h),m.drawBox(w-O,_-O,w+O,T+O,h),m.drawBox(A-O,_-O,A+O,T+O,h)}}}},r.update=function(f){this.innerFill=!!(f=f||{}).innerFill,this.outerFill=!!f.outerFill,this.innerColor=(f.innerColor||[0,0,0,.5]).slice(),this.outerColor=(f.outerColor||[0,0,0,.5]).slice(),this.borderColor=(f.borderColor||[0,0,0,1]).slice(),this.borderWidth=f.borderWidth||0,this.selectBox=(f.selectBox||this.selectBox).slice()},r.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(v,u,y){"use strict";u.exports=function(i,l){var c=l[0],h=l[1];return new f(i,e(i,c,h,{}),n.mallocUint8(c*h*4))};var e=v("gl-fbo"),n=v("typedarray-pool"),t=v("ndarray"),a=v("bit-twiddle").nextPow2;function r(i,l,c,h,m){this.coord=[i,l],this.id=c,this.value=h,this.distance=m}function f(i,l,c){this.gl=i,this.fbo=l,this.buffer=c,this._readTimeout=null;var h=this;this._readCallback=function(){h.gl&&(l.bind(),i.readPixels(0,0,l.shape[0],l.shape[1],i.RGBA,i.UNSIGNED_BYTE,h.buffer),h._readTimeout=null)}}var s=f.prototype;Object.defineProperty(s,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(i){if(this.gl){this.fbo.shape=i;var l=this.fbo.shape[0],c=this.fbo.shape[1];if(c*l*4>this.buffer.length){n.free(this.buffer);for(var h=this.buffer=n.mallocUint8(a(c*l*4)),m=0;m<c*l*4;++m)h[m]=255}return i}}}),s.begin=function(){var i=this.gl;i&&(this.fbo.bind(),i.clearColor(1,1,1,1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT))},s.end=function(){var i=this.gl;i&&(i.bindFramebuffer(i.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},s.query=function(i,l,c){if(!this.gl)return null;var h=this.fbo.shape.slice();i|=0,l|=0,"number"!=typeof c&&(c=1);var m=0|Math.min(Math.max(i-c,0),h[0]),d=0|Math.min(Math.max(i+c,0),h[0]),o=0|Math.min(Math.max(l-c,0),h[1]),b=0|Math.min(Math.max(l+c,0),h[1]);if(d<=m||b<=o)return null;var g=[d-m,b-o],w=t(this.buffer,[g[0],g[1],4],[4,4*h[0],1],4*(m+h[0]*o)),_=function(E,k,O){for(var D=1e8,S=-1,C=-1,z=E.shape[0],B=E.shape[1],U=0;U<z;U++)for(var G=0;G<B;G++){var X=E.get(U,G,0),Z=E.get(U,G,1),q=E.get(U,G,2),W=E.get(U,G,3);if(X<255||Z<255||q<255||W<255){var te=k-U,R=O-G,N=te*te+R*R;N<D&&(D=N,S=U,C=G)}}return[S,C,D]}(w.hi(g[0],g[1],1),c,c),A=_[0],T=_[1];return A<0||Math.pow(this.radius,2)<_[2]?null:new r(A+m|0,T+o|0,w.get(A,T,0),[w.get(A,T,1),w.get(A,T,2),w.get(A,T,3)],Math.sqrt(_[2]))},s.dispose=function(){this.gl&&(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(v,u,y){"use strict";var e=v("./lib/create-uniforms"),n=v("./lib/create-attributes"),t=v("./lib/reflect"),a=v("./lib/shader-cache"),r=v("./lib/runtime-reflect"),f=v("./lib/GLError");function s(c){this.gl=c,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var i=s.prototype;function l(c,h){return c.name<h.name?-1:1}i.bind=function(){var c;this.program||this._relink();var h=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),m=this.gl.lastAttribCount;if(h>m)for(c=m;c<h;c++)this.gl.enableVertexAttribArray(c);else if(m>h)for(c=h;c<m;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=h,this.gl.useProgram(this.program)},i.dispose=function(){for(var c=this.gl.lastAttribCount,h=0;h<c;h++)this.gl.disableVertexAttribArray(h);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},i.update=function(c,h,m,d){if(!h||1===arguments.length){var o=c;c=o.vertex,h=o.fragment,m=o.uniforms,d=o.attributes}var b=this,g=b.gl,w=b._vref;b._vref=a.shader(g,g.VERTEX_SHADER,c),w&&w.dispose(),b.vertShader=b._vref.shader;var _=this._fref;if(b._fref=a.shader(g,g.FRAGMENT_SHADER,h),_&&_.dispose(),b.fragShader=b._fref.shader,!m||!d){var A=g.createProgram();if(g.attachShader(A,b.fragShader),g.attachShader(A,b.vertShader),g.linkProgram(A),!g.getProgramParameter(A,g.LINK_STATUS)){var T=g.getProgramInfoLog(A);throw new f(T,"Error linking program:"+T)}m=m||r.uniforms(g,A),d=d||r.attributes(g,A),g.deleteProgram(A)}(d=d.slice()).sort(l);var E,k=[],O=[],D=[];for(E=0;E<d.length;++E){var S=d[E];if(S.type.indexOf("mat")>=0){for(var C=0|S.type.charAt(S.type.length-1),z=new Array(C),B=0;B<C;++B)z[B]=D.length,O.push(S.name+"["+B+"]"),"number"==typeof S.location?D.push(S.location+B):Array.isArray(S.location)&&S.location.length===C&&"number"==typeof S.location[B]?D.push(0|S.location[B]):D.push(-1);k.push({name:S.name,type:S.type,locations:z})}else k.push({name:S.name,type:S.type,locations:[D.length]}),O.push(S.name),D.push("number"==typeof S.location?0|S.location:-1)}var U=0;for(E=0;E<D.length;++E)if(D[E]<0){for(;D.indexOf(U)>=0;)U+=1;D[E]=U}var G=new Array(m.length);function X(){b.program=a.program(g,b._vref,b._fref,O,D);for(var Z=0;Z<m.length;++Z)G[Z]=g.getUniformLocation(b.program,m[Z].name)}X(),b._relink=X,b.types={uniforms:t(m),attributes:t(d)},b.attributes=n(g,b,k,D),Object.defineProperty(b,"uniforms",e(g,b,m,G))},u.exports=function(c,h,m,d,o){var b=new s(c);return b.update(h,m,d,o),b}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(v,u,y){function e(n,t,a){this.shortMessage=t||"",this.longMessage=a||"",this.rawError=n||"",this.message="gl-shader: "+(t||n||"")+(a?"\n"+a:""),this.stack=(new Error).stack}(e.prototype=new Error).name="GLError",e.prototype.constructor=e,u.exports=e},{}],134:[function(v,u,y){"use strict";u.exports=function(s,i,l,c){for(var h={},m=0,d=l.length;m<d;++m){var o=l[m],b=o.name,g=o.type,w=o.locations;switch(g){case"bool":case"int":case"float":r(s,i,w[0],c,1,h,b);break;default:if(g.indexOf("vec")>=0){if((_=g.charCodeAt(g.length-1)-48)<2||_>4)throw new e("","Invalid data type for attribute "+b+": "+g);r(s,i,w[0],c,_,h,b)}else{if(!(g.indexOf("mat")>=0))throw new e("","Unknown data type for attribute "+b+": "+g);var _;if((_=g.charCodeAt(g.length-1)-48)<2||_>4)throw new e("","Invalid data type for attribute "+b+": "+g);f(s,i,w,c,_,h,b)}}}return h};var e=v("./GLError");function n(s,i,l,c,h,m){this._gl=s,this._wrapper=i,this._index=l,this._locations=c,this._dimension=h,this._constFunc=m}var t=n.prototype;t.pointer=function(s,i,l,c){var h=this._gl,m=this._locations[this._index];h.vertexAttribPointer(m,this._dimension,s||h.FLOAT,!!i,l||0,c||0),h.enableVertexAttribArray(m)},t.set=function(s,i,l,c){return this._constFunc(this._locations[this._index],s,i,l,c)},Object.defineProperty(t,"location",{get:function(){return this._locations[this._index]},set:function(s){return s!==this._locations[this._index]&&(this._locations[this._index]=0|s,this._wrapper.program=null),0|s}});var a=[function(s,i,l){return void 0===l.length?s.vertexAttrib1f(i,l):s.vertexAttrib1fv(i,l)},function(s,i,l,c){return void 0===l.length?s.vertexAttrib2f(i,l,c):s.vertexAttrib2fv(i,l)},function(s,i,l,c,h){return void 0===l.length?s.vertexAttrib3f(i,l,c,h):s.vertexAttrib3fv(i,l)},function(s,i,l,c,h,m){return void 0===l.length?s.vertexAttrib4f(i,l,c,h,m):s.vertexAttrib4fv(i,l)}];function r(s,i,l,c,h,m,d){var o=a[h],b=new n(s,i,l,c,h,o);Object.defineProperty(m,d,{set:function(g){return s.disableVertexAttribArray(c[l]),o(s,c[l],g),g},get:function(){return b},enumerable:!0})}function f(s,i,l,c,h,m,d){for(var o=new Array(h),b=new Array(h),g=0;g<h;++g)r(s,i,l[g],c,h,o,g),b[g]=o[g];Object.defineProperty(o,"location",{set:function(A){if(Array.isArray(A))for(var T=0;T<h;++T)b[T].location=A[T];else for(T=0;T<h;++T)b[T].location=A+T;return A},get:function(){for(var A=new Array(h),T=0;T<h;++T)A[T]=c[l[T]];return A},enumerable:!0}),o.pointer=function(A,T,E,k){A=A||s.FLOAT,T=!!T,E=E||h*h,k=k||0;for(var O=0;O<h;++O){var D=c[l[O]];s.vertexAttribPointer(D,h,A,T,E,k+O*h),s.enableVertexAttribArray(D)}};var w=new Array(h),_=s["vertexAttrib"+h+"fv"];Object.defineProperty(m,d,{set:function(A){for(var T=0;T<h;++T){var E=c[l[T]];if(s.disableVertexAttribArray(E),Array.isArray(A[0]))_.call(s,E,A[T]);else{for(var k=0;k<h;++k)w[k]=A[h*T+k];_.call(s,E,w)}}return A},get:function(){return o},enumerable:!0})}},{"./GLError":133}],135:[function(v,u,y){"use strict";var e=v("./reflect"),n=v("./GLError");function t(r){return function(){return r}}function a(r,f){for(var s=new Array(r),i=0;i<r;++i)s[i]=f;return s}u.exports=function(r,f,s,i){function l(d){return function(o){for(var b=function B(U,G){if("object"!=typeof G)return[[U,G]];var X=[];for(var Z in G){var q=G[Z],W=U;parseInt(Z)+""===Z?W+="["+Z+"]":W+="."+Z,"object"==typeof q?X.push.apply(X,B(W,q)):X.push([W,q])}return X}("",d),g=0;g<b.length;++g){var w=b[g],_=w[0],A=w[1];if(i[A]){var T=o;if("string"==typeof _&&(0===_.indexOf(".")||0===_.indexOf("["))){var E=_;if(0===_.indexOf(".")&&(E=_.slice(1)),E.indexOf("]")===E.length-1){var k=E.indexOf("["),O=E.slice(0,k),D=E.slice(k+1,E.length-1);T=O?o[O][D]:o[D]}else T=o[E]}var S,C=s[A].type;switch(C){case"bool":case"int":case"sampler2D":case"samplerCube":r.uniform1i(i[A],T);break;case"float":r.uniform1f(i[A],T);break;default:var z=C.indexOf("vec");if(!(0<=z&&z<=1&&C.length===4+z)){if(0===C.indexOf("mat")&&4===C.length){if((S=C.charCodeAt(C.length-1)-48)<2||S>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+C);r["uniformMatrix"+S+"fv"](i[A],!1,T);break}throw new n("","Unknown uniform data type for "+name+": "+C)}if((S=C.charCodeAt(C.length-1)-48)<2||S>4)throw new n("","Invalid data type");switch(C.charAt(0)){case"b":case"i":r["uniform"+S+"iv"](i[A],T);break;case"v":r["uniform"+S+"fv"](i[A],T);break;default:throw new n("","Unrecognized data type for vector "+name+": "+C)}}}}}}function c(d,o,b){if("object"==typeof b){var g=h(b);Object.defineProperty(d,o,{get:t(g),set:l(b),enumerable:!0,configurable:!1})}else i[b]?Object.defineProperty(d,o,{get:(w=b,function(_,A,T){return _.getUniform(A.program,T[w])}),set:l(b),enumerable:!0,configurable:!1}):d[o]=function(_){switch(_){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var A=_.indexOf("vec");if(0<=A&&A<=1&&_.length===4+A){if((T=_.charCodeAt(_.length-1)-48)<2||T>4)throw new n("","Invalid data type");return"b"===_.charAt(0)?a(T,!1):a(T,0)}if(0===_.indexOf("mat")&&4===_.length){var T;if((T=_.charCodeAt(_.length-1)-48)<2||T>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+_);return a(T*T,0)}throw new n("","Unknown uniform data type for "+name+": "+_)}}(s[b].type);var w}function h(d){var o;if(Array.isArray(d)){o=new Array(d.length);for(var b=0;b<d.length;++b)c(o,b,d[b])}else for(var g in o={},d)c(o,g,d[g]);return o}var m=e(s,!0);return{get:t(h(m)),set:l(m),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(v,u,y){"use strict";u.exports=function(e,n){for(var t={},a=0;a<e.length;++a)for(var r=e[a].name.split("."),f=t,s=0;s<r.length;++s){var i=r[s].split("[");if(i.length>1){i[0]in f||(f[i[0]]=[]),f=f[i[0]];for(var l=1;l<i.length;++l){var c=parseInt(i[l]);l<i.length-1||s<r.length-1?(c in f||(f[c]=l<i.length-1?[]:{}),f=f[c]):f[c]=n?a:e[a].type}}else s<r.length-1?(i[0]in f||(f[i[0]]={}),f=f[i[0]]):f[i[0]]=n?a:e[a].type}return t}},{}],137:[function(v,u,y){"use strict";y.uniforms=function(a,r){for(var f=a.getProgramParameter(r,a.ACTIVE_UNIFORMS),s=[],i=0;i<f;++i){var l=a.getActiveUniform(r,i);if(l){var c=t(a,l.type);if(l.size>1)for(var h=0;h<l.size;++h)s.push({name:l.name.replace("[0]","["+h+"]"),type:c});else s.push({name:l.name,type:c})}}return s},y.attributes=function(a,r){for(var f=a.getProgramParameter(r,a.ACTIVE_ATTRIBUTES),s=[],i=0;i<f;++i){var l=a.getActiveAttrib(r,i);l&&s.push({name:l.name,type:t(a,l.type)})}return s};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},n=null;function t(a,r){if(!n){var f=Object.keys(e);n={};for(var s=0;s<f.length;++s){var i=f[s];n[a[i]]=e[i]}}return n[r]}},{}],138:[function(v,u,y){"use strict";y.shader=function(l,c,h){return i(l).getShaderReference(c,h)},y.program=function(l,c,h,m,d){return i(l).getProgram(c,h,m,d)};var e=v("./GLError"),n=v("gl-format-compiler-error"),t=new("undefined"==typeof WeakMap?v("weakmap-shim"):WeakMap),a=0;function r(l,c,h,m,d,o,b){this.id=l,this.src=c,this.type=h,this.shader=m,this.count=o,this.programs=[],this.cache=b}function f(l){this.gl=l,this.shaders=[{},{}],this.programs={}}r.prototype.dispose=function(){if(0==--this.count){for(var l=this.cache,c=l.gl,h=this.programs,m=0,d=h.length;m<d;++m){var o=l.programs[h[m]];o&&(delete l.programs[m],c.deleteProgram(o))}c.deleteShader(this.shader),delete l.shaders[this.type===c.FRAGMENT_SHADER|0][this.src]}};var s=f.prototype;function i(l){var c=t.get(l);return c||(c=new f(l),t.set(l,c)),c}s.getShaderReference=function(l,c){var h=this.gl,m=this.shaders[l===h.FRAGMENT_SHADER|0],d=m[c];if(d&&h.isShader(d.shader))d.count+=1;else{var o=function(b,g,w){var _=b.createShader(g);if(b.shaderSource(_,w),b.compileShader(_),!b.getShaderParameter(_,b.COMPILE_STATUS)){var A=b.getShaderInfoLog(_);try{var T=n(A,w,g)}catch(E){throw console.warn("Failed to format compiler error: "+E),new e(A,"Error compiling shader:\n"+A)}throw new e(A,T.short,T.long)}return _}(h,l,c);d=m[c]=new r(a++,c,l,o,[],1,this)}return d},s.getProgram=function(l,c,h,m){var d=[l.id,c.id,h.join(":"),m.join(":")].join("@"),o=this.programs[d];return o&&this.gl.isProgram(o)||(this.programs[d]=o=function(b,g,w,_,A){var T=b.createProgram();b.attachShader(T,g),b.attachShader(T,w);for(var E=0;E<_.length;++E)b.bindAttribLocation(T,A[E],_[E]);if(b.linkProgram(T),!b.getProgramParameter(T,b.LINK_STATUS)){var k=b.getProgramInfoLog(T);throw new e(k,"Error linking program: "+k)}return T}(this.gl,l.shader,c.shader,h,m),l.programs.push(d),c.programs.push(d)),o}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(v,u,y){"use strict";function e(t){this.plot=t,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}u.exports=function(t,a){var r=new e(t);return r.update(a),t.addOverlay(r),r};var n=e.prototype;n.update=function(t){this.enable=((t=t||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(t.width||[1,1,1,1]).slice(),this.color=(t.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()}),this.center=(t.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},n.draw=function(){var t=this.enable,a=this.width,r=this.color,f=this.center,s=this.plot,i=s.line,l=s.dataBox,c=s.viewBox;if(i.bind(),l[0]<=f[0]&&f[0]<=l[2]&&l[1]<=f[1]&&f[1]<=l[3]){var h=c[0]+(f[0]-l[0])/(l[2]-l[0])*(c[2]-c[0]),m=c[1]+(f[1]-l[1])/(l[3]-l[1])*(c[3]-c[1]);t[0]&&i.drawLine(h,m,c[0],m,a[0],r[0]),t[1]&&i.drawLine(h,m,h,c[1],a[1],r[1]),t[2]&&i.drawLine(h,m,c[2],m,a[2],r[2]),t[3]&&i.drawLine(h,m,h,c[3],a[3],r[3])}},n.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(v,u,y){"use strict";var e=v("glslify"),n=v("gl-shader"),t=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),a=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);u.exports=function(r){return n(r,t,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(v,u,y){"use strict";var e=v("gl-buffer"),n=v("gl-vao"),t=v("./shaders/index");u.exports=function(c,h){var m=[];function d(_,A,T,E,k,O){var D=[_,A,T,0,0,0,1];D[E+3]=1,D[E]=k,m.push.apply(m,D),D[6]=-1,m.push.apply(m,D),D[E]=O,m.push.apply(m,D),m.push.apply(m,D),D[6]=1,m.push.apply(m,D),D[E]=k,m.push.apply(m,D)}d(0,0,0,0,0,1),d(0,0,0,1,0,1),d(0,0,0,2,0,1),d(1,0,0,1,-1,1),d(1,0,0,2,-1,1),d(0,1,0,0,-1,1),d(0,1,0,2,-1,1),d(0,0,1,0,-1,1),d(0,0,1,1,-1,1);var o=e(c,m),b=n(c,[{type:c.FLOAT,buffer:o,size:3,offset:0,stride:28},{type:c.FLOAT,buffer:o,size:3,offset:12,stride:28},{type:c.FLOAT,buffer:o,size:1,offset:24,stride:28}]),g=t(c);g.attributes.position.location=0,g.attributes.color.location=1,g.attributes.weight.location=2;var w=new r(c,o,b,g);return w.update(h),w};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(c,h,m,d){this.gl=c,this.buffer=h,this.vao=m,this.shader=d,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var f=r.prototype,s=[0,0,0],i=[0,0,0],l=[0,0];f.isTransparent=function(){return!1},f.drawTransparent=function(c){},f.draw=function(c){var h=this.gl,m=this.vao,d=this.shader;m.bind(),d.bind();var o,b=c.model||a,g=c.view||a,w=c.projection||a;this.axes&&(o=this.axes.lastCubeProps.axis);for(var _=s,A=i,T=0;T<3;++T)o&&o[T]<0?(_[T]=this.bounds[0][T],A[T]=this.bounds[1][T]):(_[T]=this.bounds[1][T],A[T]=this.bounds[0][T]);for(l[0]=h.drawingBufferWidth,l[1]=h.drawingBufferHeight,d.uniforms.model=b,d.uniforms.view=g,d.uniforms.projection=w,d.uniforms.coordinates=[this.position,_,A],d.uniforms.colors=this.colors,d.uniforms.screenShape=l,T=0;T<3;++T)d.uniforms.lineWidth=this.lineWidth[T]*this.pixelRatio,this.enabled[T]&&(m.draw(h.TRIANGLES,6,6*T),this.drawSides[T]&&m.draw(h.TRIANGLES,12,18+12*T));m.unbind()},f.update=function(c){c&&("bounds"in c&&(this.bounds=c.bounds),"position"in c&&(this.position=c.position),"lineWidth"in c&&(this.lineWidth=c.lineWidth),"colors"in c&&(this.colors=c.colors),"enabled"in c&&(this.enabled=c.enabled),"drawSides"in c&&(this.drawSides=c.drawSides))},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(v,u,y){var e=v("glslify"),n=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),t=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);y.meshShader={vertex:n,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},y.pickShader={vertex:a,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(v,u,y){"use strict";var e=v("gl-vec3"),n=v("gl-vec4"),t=["xyz","xzy","yxz","yzx","zxy","zyx"],r=function(c,h){var m,d=c.length;for(m=0;m<d;m++){var o=c[m];if(o===h)return m;if(o>h)return m-1}return m},f=function(c,h,m){return c<h?h:c>m?m:c},s=function(c){var h=1/0;c.sort(function(b,g){return b-g});for(var m=c.length,d=1;d<m;d++){var o=Math.abs(c[d]-c[d-1]);o<h&&(h=o)}return h};u.exports=function(c,h){var m=c.startingPositions,d=c.maxLength||1e3,o=c.tubeSize||1,b=c.absoluteTubeSize,g=c.gridFill||"+x+y+z",w={};-1!==g.indexOf("-x")&&(w.reversedX=!0),-1!==g.indexOf("-y")&&(w.reversedY=!0),-1!==g.indexOf("-z")&&(w.reversedZ=!0),w.filled=t.indexOf(g.replace(/-/g,"").replace(/\+/g,""));var ie,ue,le,de,_=c.getVelocity||function(ie){return function(ue,le,de){var ve=le.vectors,_e=le.meshgrid,be=ue[0],Te=ue[1],he=ue[2],me=_e[0].length,Ae=_e[1].length,we=_e[2].length,Se=r(_e[0],be),Pe=r(_e[1],Te),ze=r(_e[2],he),He=Se+1,tt=Pe+1,Oe=ze+1;if(Se=f(Se,0,me-1),He=f(He,0,me-1),Pe=f(Pe,0,Ae-1),tt=f(tt,0,Ae-1),ze=f(ze,0,we-1),Oe=f(Oe,0,we-1),Se<0||Pe<0||ze<0||He>me-1||tt>Ae-1||Oe>we-1)return e.create();var Be,Je,Ye,nt,ft,dt,Rt=_e[0][Se],at=_e[1][Pe],St=_e[2][ze],Xt=(be-Rt)/(_e[0][He]-Rt),lr=(Te-at)/(_e[1][tt]-at),Ue=(he-St)/(_e[2][Oe]-St);switch(isFinite(Xt)||(Xt=.5),isFinite(lr)||(lr=.5),isFinite(Ue)||(Ue=.5),de.reversedX&&(Se=me-1-Se,He=me-1-He),de.reversedY&&(Pe=Ae-1-Pe,tt=Ae-1-tt),de.reversedZ&&(ze=we-1-ze,Oe=we-1-Oe),de.filled){case 5:ft=ze,dt=Oe,Ye=Pe*we,nt=tt*we,Be=Se*we*Ae,Je=He*we*Ae;break;case 4:ft=ze,dt=Oe,Be=Se*we,Je=He*we,Ye=Pe*we*me,nt=tt*we*me;break;case 3:Ye=Pe,nt=tt,ft=ze*Ae,dt=Oe*Ae,Be=Se*Ae*we,Je=He*Ae*we;break;case 2:Ye=Pe,nt=tt,Be=Se*Ae,Je=He*Ae,ft=ze*Ae*me,dt=Oe*Ae*me;break;case 1:Be=Se,Je=He,ft=ze*me,dt=Oe*me,Ye=Pe*me*we,nt=tt*me*we;break;default:Be=Se,Je=He,Ye=Pe*me,nt=tt*me,ft=ze*me*Ae,dt=Oe*me*Ae}var Ze=ve[Be+Ye+ft],Ne=ve[Be+Ye+dt],it=ve[Be+nt+ft],ke=ve[Be+nt+dt],De=ve[Je+Ye+ft],Re=ve[Je+Ye+dt],Ie=ve[Je+nt+ft],Ke=ve[Je+nt+dt],ut=e.create(),xt=e.create(),gt=e.create(),Pt=e.create();e.lerp(ut,Ze,De,Xt),e.lerp(xt,Ne,Re,Xt),e.lerp(gt,it,Ie,Xt),e.lerp(Pt,ke,Ke,Xt);var ct=e.create(),zt=e.create();e.lerp(ct,ut,gt,lr),e.lerp(zt,xt,Pt,lr);var Ft=e.create();return e.lerp(Ft,ct,zt,Ue),Ft}(ie,c,w)},A=c.getDivergence||function(ie,ue){var le=e.create(),de=1e-4;e.add(le,ie,[de,0,0]);var ve=_(le);e.subtract(ve,ve,ue),e.scale(ve,ve,1/de),e.add(le,ie,[0,de,0]);var _e=_(le);e.subtract(_e,_e,ue),e.scale(_e,_e,1/de),e.add(le,ie,[0,0,de]);var be=_(le);return e.subtract(be,be,ue),e.scale(be,be,1/de),e.add(le,ve,_e),e.add(le,le,be),le},T=[],E=h[0][0],k=h[0][1],O=h[0][2],D=h[1][0],S=h[1][1],C=h[1][2],B=10*e.distance(h[0],h[1])/d,U=B*B,G=1,X=0,Z=m.length;Z>1&&(G=function(ie){for(var ue=[],le=[],de=[],ve={},_e={},be={},Te=ie.length,he=0;he<Te;he++){var me=ie[he],Ae=me[0],we=me[1],Se=me[2];ve[Ae]||(ue.push(Ae),ve[Ae]=!0),_e[we]||(le.push(we),_e[we]=!0),be[Se]||(de.push(Se),be[Se]=!0)}var Pe=s(ue),ze=s(le),He=s(de),tt=Math.min(Pe,ze,He);return isFinite(tt)?tt:1}(m));for(var q=0;q<Z;q++){var W=e.create();e.copy(W,m[q]);var te=[W],R=[],N=_(W),V=W;R.push(N);var ee=[],j=A(W,N),J=e.length(j);isFinite(J)&&J>X&&(X=J),ee.push(J),T.push({points:te,velocities:R,divergences:ee});for(var $=0;$<100*d&&te.length<d&&(ue=void 0,le=void 0,de=void 0,le=(ie=W)[1],de=ie[2],!((ue=ie[0])<E||ue>D||le<k||le>S||de<O||de>C));){$++;var re=e.clone(N),ne=e.squaredLength(re);if(0===ne)break;ne>U&&e.scale(re,re,B/Math.sqrt(ne)),e.add(re,re,W),N=_(re),e.squaredDistance(V,re)-U>-1e-4*U&&(te.push(re),V=re,R.push(N),j=A(re,N),J=e.length(j),isFinite(J)&&J>X&&(X=J),ee.push(J)),W=re}}var se=function(c,h,m,d){for(var o=0,b=0;b<c.length;b++)for(var g=c[b].velocities,w=0;w<g.length;w++)o=Math.max(o,e.length(g[w]));var _=c.map(function(B){return function(U,G,X,Z){for(var q=U.points,W=U.velocities,te=U.divergences,R=[],N=[],V=[],ee=[],j=[],J=[],$=0,re=0,ne=n.create(),se=n.create(),ie=0;ie<q.length;ie++){var ue=q[ie],le=W[ie],de=te[ie];0===G&&(de=.05*X),re=e.length(le)/Z,ne=n.create(),e.copy(ne,le),ne[3]=de;for(var ve=0;ve<8;ve++)j[ve]=[ue[0],ue[1],ue[2],ve];if(ee.length>0)for(ve=0;ve<8;ve++){var _e=(ve+1)%8;R.push(ee[ve],j[ve],j[_e],j[_e],ee[_e],ee[ve]),V.push(se,ne,ne,ne,se,se),J.push($,re,re,re,$,$);var be=R.length;N.push([be-6,be-5,be-4],[be-3,be-2,be-1])}var Te=ee;ee=j,j=Te;var he=se;se=ne,ne=he;var me=$;$=re,re=me}return{positions:R,cells:N,vectors:V,vertexIntensity:J}}(B,m,d,o)}),A=[],T=[],E=[],k=[];for(b=0;b<_.length;b++){var O=_[b],D=A.length;for(A=A.concat(O.positions),E=E.concat(O.vectors),k=k.concat(O.vertexIntensity),w=0;w<O.cells.length;w++){var S=O.cells[w],C=[];T.push(C);for(var z=0;z<S.length;z++)C.push(S[z]+D)}}return{positions:A,cells:T,vectors:E,vertexIntensity:k,colormap:h}}(T,c.colormap,X,G);return b?se.tubeScale=b:(0===X&&(X=1),se.tubeScale=.5*o*G/X),se};var i=v("./lib/shaders"),l=v("gl-cone3d").createMesh;u.exports.createTubeMesh=function(c,h){return l(c,h,{shaders:i,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(v,u,y){var e=v("gl-shader"),n=v("glslify"),t=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),r=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),f=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);y.createShader=function(s){var i=e(s,t,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},y.createPickShader=function(s){var i=e(s,t,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},y.createContourShader=function(s){var i=e(s,r,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i},y.createPickContourShader=function(s){var i=e(s,r,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i}},{"gl-shader":132,glslify:231}],145:[function(v,u,y){"use strict";u.exports=function(N){var V=N.gl,ee=g(V),j=_(V),J=w(V),$=A(V),re=n(V),ne=t(V,[{buffer:re,size:4,stride:40,offset:0},{buffer:re,size:3,stride:40,offset:16},{buffer:re,size:3,stride:40,offset:28}]),se=n(V),ie=t(V,[{buffer:se,size:4,stride:20,offset:0},{buffer:se,size:1,stride:20,offset:16}]),ue=n(V),le=t(V,[{buffer:ue,size:2,type:V.FLOAT}]),de=a(V,1,256,V.RGBA,V.UNSIGNED_BYTE);de.minFilter=V.LINEAR,de.magFilter=V.LINEAR;var ve=new D(V,[0,0],[[0,0,0],[0,0,0]],ee,j,re,ne,de,J,$,se,ie,ue,le,[0,0,0]),_e={levels:[[],[],[]]};for(var be in N)_e[be]=N[be];return _e.colormap=_e.colormap||"jet",ve.update(_e),ve};var e=v("bit-twiddle"),n=v("gl-buffer"),t=v("gl-vao"),a=v("gl-texture2d"),r=v("typedarray-pool"),f=v("colormap"),s=v("ndarray-ops"),i=v("ndarray-pack"),l=v("ndarray"),c=v("surface-nets"),h=v("gl-mat4/multiply"),m=v("gl-mat4/invert"),d=v("binary-search-bounds"),o=v("ndarray-gradient"),b=v("./lib/shaders"),g=b.createShader,w=b.createContourShader,_=b.createPickShader,A=b.createPickContourShader,T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],k=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function O(N,V,ee,j,J){this.position=N,this.index=V,this.uv=ee,this.level=j,this.dataCoordinate=J}function D(N,V,ee,j,J,$,re,ne,se,ie,ue,le,de,ve,_e){this.gl=N,this.shape=V,this.bounds=ee,this.objectOffset=_e,this.intensityBounds=[],this._shader=j,this._pickShader=J,this._coordinateBuffer=$,this._vao=re,this._colorMap=ne,this._contourShader=se,this._contourPickShader=ie,this._contourBuffer=ue,this._contourVAO=le,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new O([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=de,this._dynamicVAO=ve,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[l(r.mallocFloat(1024),[0,0]),l(r.mallocFloat(1024),[0,0]),l(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var N=0;N<3;++N){var V=k[N],ee=(N+2)%3;V[(N+1)%3+0]=1,V[ee+3]=1,V[N+6]=1}}();var S=D.prototype;S.genColormap=function(N,V){var ee=!1,j=i([f({colormap:N,nshades:256,format:"rgba"}).map(function(J,$){var re=V?function(ne,se){if(!se||!se.length)return 1;for(var ie=0;ie<se.length;++ie){if(se.length<2)return 1;if(se[ie][0]===ne)return se[ie][1];if(se[ie][0]>ne&&ie>0){var ue=(se[ie][0]-ne)/(se[ie][0]-se[ie-1][0]);return se[ie][1]*(1-ue)+ue*se[ie-1][1]}}return 1}($/255,V):J[3];return re<1&&(ee=!0),[J[0],J[1],J[2],255*re]})]);return s.divseq(j,255),this.hasAlphaScale=ee,j},S.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},S.isOpaque=function(){return!this.isTransparent()},S.pickSlots=1,S.setPickBase=function(N){this.pickId=N};var C=[0,0,0],z={showSurface:!1,showContour:!1,projections:[T.slice(),T.slice(),T.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function B(N,V){var ee,j,J,$=V.axes&&V.axes.lastCubeProps.axis||C,re=V.showSurface,ne=V.showContour;for(ee=0;ee<3;++ee)for(re=re||V.surfaceProject[ee],j=0;j<3;++j)ne=ne||V.contourProject[ee][j];for(ee=0;ee<3;++ee){var se=z.projections[ee];for(j=0;j<16;++j)se[j]=0;for(j=0;j<4;++j)se[5*j]=1;se[5*ee]=0,se[12+ee]=V.axesBounds[+($[ee]>0)][ee],h(se,N.model,se);var ie=z.clipBounds[ee];for(J=0;J<2;++J)for(j=0;j<3;++j)ie[J][j]=N.clipBounds[J][j];ie[0][ee]=-1e8,ie[1][ee]=1e8}return z.showSurface=re,z.showContour=ne,z}var U={model:T,view:T,projection:T,inverseModel:T.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},G=T.slice(),X=[1,0,0,0,1,0,0,0,1];function Z(N,V){N=N||{};var ee=this.gl;ee.disable(ee.CULL_FACE),this._colorMap.bind(0);var j=U;j.model=N.model||T,j.view=N.view||T,j.projection=N.projection||T,j.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],j.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],j.objectOffset=this.objectOffset,j.contourColor=this.contourColor[0],j.inverseModel=m(j.inverseModel,j.model);for(var J=0;J<2;++J)for(var $=j.clipBounds[J],re=0;re<3;++re)$[re]=Math.min(Math.max(this.clipBounds[J][re],-1e8),1e8);j.kambient=this.ambientLight,j.kdiffuse=this.diffuseLight,j.kspecular=this.specularLight,j.roughness=this.roughness,j.fresnel=this.fresnel,j.opacity=this.opacity,j.height=0,j.permutation=X,j.vertexColor=this.vertexColor;var ne=G;for(h(ne,j.view,j.model),h(ne,j.projection,ne),m(ne,ne),J=0;J<3;++J)j.eyePosition[J]=ne[12+J]/ne[15];var se=ne[15];for(J=0;J<3;++J)se+=this.lightPosition[J]*ne[4*J+3];for(J=0;J<3;++J){var ie=ne[12+J];for(re=0;re<3;++re)ie+=ne[4*re+J]*this.lightPosition[re];j.lightPosition[J]=ie/se}var ue=B(j,this);if(ue.showSurface){for(this._shader.bind(),this._shader.uniforms=j,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ee.TRIANGLES,this._vertexCount),J=0;J<3;++J)this.surfaceProject[J]&&this.vertexCount&&(this._shader.uniforms.model=ue.projections[J],this._shader.uniforms.clipBounds=ue.clipBounds[J],this._vao.draw(ee.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ue.showContour){var le=this._contourShader;j.kambient=1,j.kdiffuse=0,j.kspecular=0,j.opacity=1,le.bind(),le.uniforms=j;var de=this._contourVAO;for(de.bind(),J=0;J<3;++J)for(le.uniforms.permutation=k[J],ee.lineWidth(this.contourWidth[J]*this.pixelRatio),re=0;re<this.contourLevels[J].length;++re)re===this.highlightLevel[J]?(le.uniforms.contourColor=this.highlightColor[J],le.uniforms.contourTint=this.highlightTint[J]):0!==re&&re-1!==this.highlightLevel[J]||(le.uniforms.contourColor=this.contourColor[J],le.uniforms.contourTint=this.contourTint[J]),this._contourCounts[J][re]&&(le.uniforms.height=this.contourLevels[J][re],de.draw(ee.LINES,this._contourCounts[J][re],this._contourOffsets[J][re]));for(J=0;J<3;++J)for(le.uniforms.model=ue.projections[J],le.uniforms.clipBounds=ue.clipBounds[J],re=0;re<3;++re)if(this.contourProject[J][re]){le.uniforms.permutation=k[re],ee.lineWidth(this.contourWidth[re]*this.pixelRatio);for(var ve=0;ve<this.contourLevels[re].length;++ve)ve===this.highlightLevel[re]?(le.uniforms.contourColor=this.highlightColor[re],le.uniforms.contourTint=this.highlightTint[re]):0!==ve&&ve-1!==this.highlightLevel[re]||(le.uniforms.contourColor=this.contourColor[re],le.uniforms.contourTint=this.contourTint[re]),this._contourCounts[re][ve]&&(le.uniforms.height=this.contourLevels[re][ve],de.draw(ee.LINES,this._contourCounts[re][ve],this._contourOffsets[re][ve]))}for(de.unbind(),(de=this._dynamicVAO).bind(),J=0;J<3;++J)if(0!==this._dynamicCounts[J])for(le.uniforms.model=j.model,le.uniforms.clipBounds=j.clipBounds,le.uniforms.permutation=k[J],ee.lineWidth(this.dynamicWidth[J]*this.pixelRatio),le.uniforms.contourColor=this.dynamicColor[J],le.uniforms.contourTint=this.dynamicTint[J],le.uniforms.height=this.dynamicLevel[J],de.draw(ee.LINES,this._dynamicCounts[J],this._dynamicOffsets[J]),re=0;re<3;++re)this.contourProject[re][J]&&(le.uniforms.model=ue.projections[re],le.uniforms.clipBounds=ue.clipBounds[re],de.draw(ee.LINES,this._dynamicCounts[J],this._dynamicOffsets[J]));de.unbind()}}S.draw=function(N){return Z.call(this,N,!1)},S.drawTransparent=function(N){return Z.call(this,N,!0)};var q={model:T,view:T,projection:T,inverseModel:T,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function W(N,V){return Array.isArray(N)?[V(N[0]),V(N[1]),V(N[2])]:[V(N),V(N),V(N)]}function te(N){return Array.isArray(N)?3===N.length?[N[0],N[1],N[2],1]:[N[0],N[1],N[2],N[3]]:[0,0,0,1]}function R(N){if(Array.isArray(N)){if(Array.isArray(N))return[te(N[0]),te(N[1]),te(N[2])];var V=te(N);return[V.slice(),V.slice(),V.slice()]}}S.drawPick=function(N){N=N||{};var V=this.gl;V.disable(V.CULL_FACE);var ee=q;ee.model=N.model||T,ee.view=N.view||T,ee.projection=N.projection||T,ee.shape=this._field[2].shape,ee.pickId=this.pickId/255,ee.lowerBound=this.bounds[0],ee.upperBound=this.bounds[1],ee.objectOffset=this.objectOffset,ee.permutation=X;for(var j=0;j<2;++j)for(var J=ee.clipBounds[j],$=0;$<3;++$)J[$]=Math.min(Math.max(this.clipBounds[j][$],-1e8),1e8);var re=B(ee,this);if(re.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ee,this._vao.bind(),this._vao.draw(V.TRIANGLES,this._vertexCount),j=0;j<3;++j)this.surfaceProject[j]&&(this._pickShader.uniforms.model=re.projections[j],this._pickShader.uniforms.clipBounds=re.clipBounds[j],this._vao.draw(V.TRIANGLES,this._vertexCount));this._vao.unbind()}if(re.showContour){var ne=this._contourPickShader;ne.bind(),ne.uniforms=ee;var se=this._contourVAO;for(se.bind(),$=0;$<3;++$)for(V.lineWidth(this.contourWidth[$]*this.pixelRatio),ne.uniforms.permutation=k[$],j=0;j<this.contourLevels[$].length;++j)this._contourCounts[$][j]&&(ne.uniforms.height=this.contourLevels[$][j],se.draw(V.LINES,this._contourCounts[$][j],this._contourOffsets[$][j]));for(j=0;j<3;++j)for(ne.uniforms.model=re.projections[j],ne.uniforms.clipBounds=re.clipBounds[j],$=0;$<3;++$)if(this.contourProject[j][$]){ne.uniforms.permutation=k[$],V.lineWidth(this.contourWidth[$]*this.pixelRatio);for(var ie=0;ie<this.contourLevels[$].length;++ie)this._contourCounts[$][ie]&&(ne.uniforms.height=this.contourLevels[$][ie],se.draw(V.LINES,this._contourCounts[$][ie],this._contourOffsets[$][ie]))}se.unbind()}},S.pick=function(N){if(!N||N.id!==this.pickId)return null;var V=this._field[2].shape,ee=this._pickResult,j=V[0]*(N.value[0]+(N.value[2]>>4)/16)/255,J=Math.floor(j),$=j-J,re=V[1]*(N.value[1]+(15&N.value[2])/16)/255,ne=Math.floor(re),se=re-ne;J+=1,ne+=1;var ie=ee.position;ie[0]=ie[1]=ie[2]=0;for(var ue=0;ue<2;++ue)for(var le=ue?$:1-$,de=0;de<2;++de)for(var ve=J+ue,_e=ne+de,be=le*(de?se:1-se),Te=0;Te<3;++Te)ie[Te]+=this._field[Te].get(ve,_e)*be;for(var he=this._pickResult.level,me=0;me<3;++me)if(he[me]=d.le(this.contourLevels[me],ie[me]),he[me]<0)this.contourLevels[me].length>0&&(he[me]=0);else if(he[me]<this.contourLevels[me].length-1){var we=this.contourLevels[me][he[me]+1];Math.abs(this.contourLevels[me][he[me]]-ie[me])>Math.abs(we-ie[me])&&(he[me]+=1)}for(ee.index[0]=$<.5?J:J+1,ee.index[1]=se<.5?ne:ne+1,ee.uv[0]=j/V[0],ee.uv[1]=re/V[1],Te=0;Te<3;++Te)ee.dataCoordinate[Te]=this._field[Te].get(ee.index[0],ee.index[1]);return ee},S.padField=function(N,V){var ee=V.shape.slice(),j=N.shape.slice();s.assign(N.lo(1,1).hi(ee[0],ee[1]),V),s.assign(N.lo(1).hi(ee[0],1),V.hi(ee[0],1)),s.assign(N.lo(1,j[1]-1).hi(ee[0],1),V.lo(0,ee[1]-1).hi(ee[0],1)),s.assign(N.lo(0,1).hi(1,ee[1]),V.hi(1)),s.assign(N.lo(j[0]-1,1).hi(1,ee[1]),V.lo(ee[0]-1)),N.set(0,0,V.get(0,0)),N.set(0,j[1]-1,V.get(0,ee[1]-1)),N.set(j[0]-1,0,V.get(ee[0]-1,0)),N.set(j[0]-1,j[1]-1,V.get(ee[0]-1,ee[1]-1))},S.update=function(N){this.objectOffset=(N=N||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in N&&(this.contourWidth=W(N.contourWidth,Number)),"showContour"in N&&(this.showContour=W(N.showContour,Boolean)),"showSurface"in N&&(this.showSurface=!!N.showSurface),"contourTint"in N&&(this.contourTint=W(N.contourTint,Boolean)),"contourColor"in N&&(this.contourColor=R(N.contourColor)),"contourProject"in N&&(this.contourProject=W(N.contourProject,function($t){return W($t,Boolean)})),"surfaceProject"in N&&(this.surfaceProject=N.surfaceProject),"dynamicColor"in N&&(this.dynamicColor=R(N.dynamicColor)),"dynamicTint"in N&&(this.dynamicTint=W(N.dynamicTint,Number)),"dynamicWidth"in N&&(this.dynamicWidth=W(N.dynamicWidth,Number)),"opacity"in N&&(this.opacity=N.opacity),"opacityscale"in N&&(this.opacityscale=N.opacityscale),"colorBounds"in N&&(this.colorBounds=N.colorBounds),"vertexColor"in N&&(this.vertexColor=N.vertexColor?1:0),"colormap"in N&&this._colorMap.setPixels(this.genColormap(N.colormap,this.opacityscale));var V=N.field||N.coords&&N.coords[2]||null,ee=!1;if(V||(V=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in N||"coords"in N){var j=(V.shape[0]+2)*(V.shape[1]+2);j>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(e.nextPow2(j))),this._field[2]=l(this._field[2].data,[V.shape[0]+2,V.shape[1]+2]),this.padField(this._field[2],V),this.shape=V.shape.slice();for(var J=this.shape,$=0;$<2;++$)this._field[2].size>this._field[$].data.length&&(r.freeFloat(this._field[$].data),this._field[$].data=r.mallocFloat(this._field[2].size)),this._field[$]=l(this._field[$].data,[J[0]+2,J[1]+2]);if(N.coords){var re=N.coords;if(!Array.isArray(re)||3!==re.length)throw new Error("gl-surface: invalid coordinates for x/y");for($=0;$<2;++$){var ne=re[$];for(de=0;de<2;++de)if(ne.shape[de]!==J[de])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[$],ne)}}else if(N.ticks){var se=N.ticks;if(!Array.isArray(se)||2!==se.length)throw new Error("gl-surface: invalid ticks");for($=0;$<2;++$){var ie=se[$];if((Array.isArray(ie)||ie.length)&&(ie=l(ie)),ie.shape[0]!==J[$])throw new Error("gl-surface: invalid tick length");var ue=l(ie.data,J);ue.stride[$]=ie.stride[0],ue.stride[1^$]=0,this.padField(this._field[$],ue)}}else{for($=0;$<2;++$){var le=[0,0];le[$]=1,this._field[$]=l(this._field[$].data,[J[0]+2,J[1]+2],le,0)}this._field[0].set(0,0,0);for(var de=0;de<J[0];++de)this._field[0].set(de+1,0,de);for(this._field[0].set(J[0]+1,0,J[0]-1),this._field[1].set(0,0,0),de=0;de<J[1];++de)this._field[1].set(0,de+1,de);this._field[1].set(0,J[1]+1,J[1]-1)}var ve=this._field,_e=l(r.mallocFloat(3*ve[2].size*2),[3,J[0]+2,J[1]+2,2]);for($=0;$<3;++$)o(_e.pick($),ve[$],"mirror");var be=l(r.mallocFloat(3*ve[2].size),[J[0]+2,J[1]+2,3]);for($=0;$<J[0]+2;++$)for(de=0;de<J[1]+2;++de){var Te=_e.get(0,$,de,0),he=_e.get(0,$,de,1),me=_e.get(1,$,de,0),Ae=_e.get(1,$,de,1),we=_e.get(2,$,de,0),Se=_e.get(2,$,de,1),Pe=me*Se-Ae*we,ze=we*he-Se*Te,He=Te*Ae-he*me,tt=Math.sqrt(Pe*Pe+ze*ze+He*He);tt<1e-8?(tt=Math.max(Math.abs(Pe),Math.abs(ze),Math.abs(He)))<1e-8?(He=1,ze=Pe=0,tt=1):tt=1/tt:tt=1/Math.sqrt(tt),be.set($,de,0,Pe*tt),be.set($,de,1,ze*tt),be.set($,de,2,He*tt)}r.free(_e.data);var Oe=[1/0,1/0,1/0],Be=[-1/0,-1/0,-1/0],Je=1/0,Ye=-1/0,ft=r.mallocFloat(e.nextPow2((J[0]-1)*(J[1]-1)*6*10)),dt=0,Rt=0;for($=0;$<J[0]-1;++$)e:for(de=0;de<J[1]-1;++de){for(var Et=0;Et<2;++Et)for(var at=0;at<2;++at)for(var rt=0;rt<3;++rt){var St=this._field[rt].get(1+$+Et,1+de+at);if(isNaN(St)||!isFinite(St))continue e}for(rt=0;rt<6;++rt){var Xt=$+E[rt][0],lr=de+E[rt][1],Ue=this._field[0].get(Xt+1,lr+1),Ze=this._field[1].get(Xt+1,lr+1);St=this._field[2].get(Xt+1,lr+1),Pe=be.get(Xt+1,lr+1,0),ze=be.get(Xt+1,lr+1,1),He=be.get(Xt+1,lr+1,2),N.intensity&&(Ne=N.intensity.get(Xt,lr));var Ne=N.intensity?N.intensity.get(Xt,lr):St+this.objectOffset[2];ft[dt++]=Xt,ft[dt++]=lr,ft[dt++]=Ue,ft[dt++]=Ze,ft[dt++]=St,ft[dt++]=0,ft[dt++]=Ne,ft[dt++]=Pe,ft[dt++]=ze,ft[dt++]=He,Oe[0]=Math.min(Oe[0],Ue+this.objectOffset[0]),Oe[1]=Math.min(Oe[1],Ze+this.objectOffset[1]),Oe[2]=Math.min(Oe[2],St+this.objectOffset[2]),Je=Math.min(Je,Ne),Be[0]=Math.max(Be[0],Ue+this.objectOffset[0]),Be[1]=Math.max(Be[1],Ze+this.objectOffset[1]),Be[2]=Math.max(Be[2],St+this.objectOffset[2]),Ye=Math.max(Ye,Ne),Rt+=1}}for(N.intensityBounds&&(Je=+N.intensityBounds[0],Ye=+N.intensityBounds[1]),$=6;$<dt;$+=10)ft[$]=(ft[$]-Je)/(Ye-Je);this._vertexCount=Rt,this._coordinateBuffer.update(ft.subarray(0,dt)),r.freeFloat(ft),r.free(be.data),this.bounds=[Oe,Be],this.intensity=N.intensity||this._field[2],this.intensityBounds[0]===Je&&this.intensityBounds[1]===Ye||(ee=!0),this.intensityBounds=[Je,Ye]}if("levels"in N){var it=N.levels;for(it=Array.isArray(it[0])?it.slice():[[],[],it],$=0;$<3;++$)it[$]=it[$].slice(),it[$].sort(function($t,nr){return $t-nr});for($=0;$<3;++$)for(de=0;de<it[$].length;++de)it[$][de]-=this.objectOffset[$];e:for($=0;$<3;++$){if(it[$].length!==this.contourLevels[$].length){ee=!0;break}for(de=0;de<it[$].length;++de)if(it[$][de]!==this.contourLevels[$][de]){ee=!0;break e}}this.contourLevels=it}if(ee){ve=this._field,J=this.shape;for(var ke=[],De=0;De<3;++De){var Re=this.contourLevels[De],Ie=[],Ke=[],ut=[0,0,0];for($=0;$<Re.length;++$){var xt=c(this._field[De],Re[$]);Ie.push(ke.length/5|0),Rt=0;e:for(de=0;de<xt.cells.length;++de){var gt=xt.cells[de];for(rt=0;rt<2;++rt){var Pt=xt.positions[gt[rt]],ct=Pt[0],zt=0|Math.floor(ct),Ft=ct-zt,Qe=Pt[1],yt=0|Math.floor(Qe),Nt=Qe-yt,Yt=!1;t:for(var rr=0;rr<3;++rr){ut[rr]=0;var Fe=(De+rr+1)%3;for(Et=0;Et<2;++Et){var ht=Et?Ft:1-Ft;for(Xt=0|Math.min(Math.max(zt+Et,0),J[0]),at=0;at<2;++at){var kt=at?Nt:1-Nt;if(lr=0|Math.min(Math.max(yt+at,0),J[1]),St=rr<2?this._field[Fe].get(Xt,lr):(this.intensity.get(Xt,lr)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(St)||isNaN(St)){Yt=!0;break t}ut[rr]+=ht*kt*St}}}if(Yt){if(rt>0){for(var Zt=0;Zt<5;++Zt)ke.pop();Rt-=1}continue e}ke.push(ut[0],ut[1],Pt[0],Pt[1],ut[2]),Rt+=1}}Ke.push(Rt)}this._contourOffsets[De]=Ie,this._contourCounts[De]=Ke}var fr=r.mallocFloat(ke.length);for($=0;$<ke.length;++$)fr[$]=ke[$];this._contourBuffer.update(fr),r.freeFloat(fr)}},S.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var N=0;N<3;++N)r.freeFloat(this._field[N].data)},S.highlight=function(N){var V,ee;if(!N)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(V=0;V<3;++V)this.highlightLevel[V]=this.enableHighlight[V]?N.level[V]:-1;for(ee=this.snapToData?N.dataCoordinate:N.position,V=0;V<3;++V)ee[V]-=this.objectOffset[V];if(this.enableDynamic[0]&&ee[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ee[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ee[2]!==this.dynamicLevel[2]){for(var j=0,J=this.shape,$=r.mallocFloat(12*J[0]*J[1]),re=0;re<3;++re)if(this.enableDynamic[re]){this.dynamicLevel[re]=ee[re];var ue=this._field[(re+1)%3],le=this._field[(re+2)%3],de=c(this._field[re],ee[re]),ve=de.cells,_e=de.positions;for(this._dynamicOffsets[re]=j,V=0;V<ve.length;++V)for(var be=ve[V],Te=0;Te<2;++Te){var he=_e[be[Te]],me=+he[0],Ae=0|me,we=0|Math.min(Ae+1,J[0]),Se=me-Ae,Pe=1-Se,ze=+he[1],He=0|ze,tt=0|Math.min(He+1,J[1]),Oe=ze-He,Be=1-Oe,Je=Pe*Be,Ye=Pe*Oe,nt=Se*Be,ft=Se*Oe,dt=Je*ue.get(Ae,He)+Ye*ue.get(Ae,tt)+nt*ue.get(we,He)+ft*ue.get(we,tt),Rt=Je*le.get(Ae,He)+Ye*le.get(Ae,tt)+nt*le.get(we,He)+ft*le.get(we,tt);if(isNaN(dt)||isNaN(Rt)){Te&&(j-=1);break}$[2*j+0]=dt,$[2*j+1]=Rt,j+=1}this._dynamicCounts[re]=j-this._dynamicOffsets[re]}else this.dynamicLevel[re]=NaN,this._dynamicCounts[re]=0;this._dynamicBuffer.update($.subarray(0,2*j)),r.freeFloat($)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(v,u,y){"use strict";var e=v("ndarray"),n=v("ndarray-ops"),t=v("typedarray-pool");u.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||s(_),"number"==typeof arguments[1])return b(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return b(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var A=arguments[1],T=i(A)?A:A.raw;if(T)return g(_,T,0|A.width,0|A.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(A.shape&&A.data&&A.stride)return w(_,A)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,r=null,f=null;function s(_){a=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],r=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],f=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}function i(_){return"undefined"!=typeof HTMLCanvasElement&&_ instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&_ instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&_ instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&_ instanceof ImageData}var l=function(_,A){n.muls(_,A,255)};function c(_,A,T){var E=_.gl,k=E.getParameter(E.MAX_TEXTURE_SIZE);if(A<0||A>k||T<0||T>k)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[A,T],_.bind(),E.texImage2D(E.TEXTURE_2D,0,_.format,A,T,0,_.format,_.type,null),_._mipLevels=[0],_}function h(_,A,T,E,k,O){this.gl=_,this.handle=A,this.format=k,this.type=O,this._shape=[T,E],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var D=this,S=[this._wrapS,this._wrapT];Object.defineProperties(S,[{get:function(){return D._wrapS},set:function(z){return D.wrapS=z}},{get:function(){return D._wrapT},set:function(z){return D.wrapT=z}}]),this._wrapVector=S;var C=[this._shape[0],this._shape[1]];Object.defineProperties(C,[{get:function(){return D._shape[0]},set:function(z){return D.width=z}},{get:function(){return D._shape[1]},set:function(z){return D.height=z}}]),this._shapeVector=C}var m=h.prototype;function d(_,A){return 3===_.length?1===A[2]&&A[1]===_[0]*_[2]&&A[0]===_[2]:1===A[0]&&A[1]===_[0]}function o(_){var A=_.createTexture();return _.bindTexture(_.TEXTURE_2D,A),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),A}function b(_,A,T,E,k){var O=_.getParameter(_.MAX_TEXTURE_SIZE);if(A<0||A>O||T<0||T>O)throw new Error("gl-texture2d: Invalid texture shape");if(k===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var D=o(_);return _.texImage2D(_.TEXTURE_2D,0,E,A,T,0,E,k,null),new h(_,D,A,T,E,k)}function g(_,A,T,E,k,O){var D=o(_);return _.texImage2D(_.TEXTURE_2D,0,k,k,O,A),new h(_,D,T,E,k,O)}function w(_,A){var T=A.dtype,E=A.shape.slice(),k=_.getParameter(_.MAX_TEXTURE_SIZE);if(E[0]<0||E[0]>k||E[1]<0||E[1]>k)throw new Error("gl-texture2d: Invalid texture size");var O=d(E,A.stride.slice()),D=0;"float32"===T?D=_.FLOAT:"float64"===T?(D=_.FLOAT,O=!1,T="float32"):"uint8"===T?D=_.UNSIGNED_BYTE:(D=_.UNSIGNED_BYTE,O=!1,T="uint8");var S,C,z=0;if(2===E.length)z=_.LUMINANCE,A=e(A.data,E=[E[0],E[1],1],[A.stride[0],A.stride[1],1],A.offset);else{if(3!==E.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===E[2])z=_.ALPHA;else if(2===E[2])z=_.LUMINANCE_ALPHA;else if(3===E[2])z=_.RGB;else{if(4!==E[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");z=_.RGBA}}D!==_.FLOAT||_.getExtension("OES_texture_float")||(D=_.UNSIGNED_BYTE,O=!1);var B=A.size;if(O)S=0===A.offset&&A.data.length===B?A.data:A.data.subarray(A.offset,A.offset+B);else{var U=[E[2],E[2]*E[0],1];C=t.malloc(B,T);var G=e(C,E,U,0);"float32"!==T&&"float64"!==T||D!==_.UNSIGNED_BYTE?n.assign(G,A):l(G,A),S=C.subarray(0,B)}var X=o(_);return _.texImage2D(_.TEXTURE_2D,0,z,E[0],E[1],0,z,D,S),O||t.free(C),new h(_,X,E[0],E[1],z,D)}Object.defineProperties(m,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var A=this.gl;if(this.type===A.FLOAT&&a.indexOf(_)>=0&&(A.getExtension("OES_texture_float_linear")||(_=A.NEAREST)),r.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var A=this.gl;if(this.type===A.FLOAT&&a.indexOf(_)>=0&&(A.getExtension("OES_texture_float_linear")||(_=A.NEAREST)),r.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var A=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),A!==this._anisoSamples){var T=this.gl.getExtension("EXT_texture_filter_anisotropic");T&&this.gl.texParameterf(this.gl.TEXTURE_2D,T.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),f.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),f.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),2!==_.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var A=0;A<2;++A)if(f.indexOf(_[A])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var T=this.gl;return this.bind(),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,this._wrapS),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(2!==_.length)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return c(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return c(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return c(this,this._shape[0],_|=0),_}}}),m.bind=function(_){var A=this.gl;return void 0!==_&&A.activeTexture(A.TEXTURE0+(0|_)),A.bindTexture(A.TEXTURE_2D,this.handle),void 0!==_?0|_:A.getParameter(A.ACTIVE_TEXTURE)-A.TEXTURE0},m.dispose=function(){this.gl.deleteTexture(this.handle)},m.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),A=0;_>0;++A,_>>>=1)this._mipLevels.indexOf(A)<0&&this._mipLevels.push(A)},m.setPixels=function(_,A,T,E){var k=this.gl;this.bind(),Array.isArray(A)?(E=T,T=0|A[1],A=0|A[0]):(A=A||0,T=T||0),E=E||0;var O=i(_)?_:_.raw;if(O)this._mipLevels.indexOf(E)<0?(k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,this.type,O),this._mipLevels.push(E)):k.texSubImage2D(k.TEXTURE_2D,E,A,T,this.format,this.type,O);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||A+_.shape[1]>this._shape[1]>>>E||T+_.shape[0]>this._shape[0]>>>E||A<0||T<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(D,S,C,z,B,U,G,X){var Z=X.dtype,q=X.shape.slice();if(q.length<2||q.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var W=0,te=0,R=d(q,X.stride.slice());if("float32"===Z?W=D.FLOAT:"float64"===Z?(W=D.FLOAT,R=!1,Z="float32"):"uint8"===Z?W=D.UNSIGNED_BYTE:(W=D.UNSIGNED_BYTE,R=!1,Z="uint8"),2===q.length)te=D.LUMINANCE,X=e(X.data,q=[q[0],q[1],1],[X.stride[0],X.stride[1],1],X.offset);else{if(3!==q.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===q[2])te=D.ALPHA;else if(2===q[2])te=D.LUMINANCE_ALPHA;else if(3===q[2])te=D.RGB;else{if(4!==q[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");te=D.RGBA}}if(te!==D.LUMINANCE&&te!==D.ALPHA||B!==D.LUMINANCE&&B!==D.ALPHA||(te=B),te!==B)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var N=X.size,V=G.indexOf(z)<0;if(V&&G.push(z),W===U&&R)0===X.offset&&X.data.length===N?V?D.texImage2D(D.TEXTURE_2D,z,B,q[0],q[1],0,B,U,X.data):D.texSubImage2D(D.TEXTURE_2D,z,S,C,q[0],q[1],B,U,X.data):V?D.texImage2D(D.TEXTURE_2D,z,B,q[0],q[1],0,B,U,X.data.subarray(X.offset,X.offset+N)):D.texSubImage2D(D.TEXTURE_2D,z,S,C,q[0],q[1],B,U,X.data.subarray(X.offset,X.offset+N));else{var ee;ee=U===D.FLOAT?t.mallocFloat32(N):t.mallocUint8(N);var j=e(ee,q,[q[2],q[2]*q[0],1]);W===D.FLOAT&&U===D.UNSIGNED_BYTE?l(j,X):n.assign(j,X),V?D.texImage2D(D.TEXTURE_2D,z,B,q[0],q[1],0,B,U,ee.subarray(0,N)):D.texSubImage2D(D.TEXTURE_2D,z,S,C,q[0],q[1],B,U,ee.subarray(0,N)),U===D.FLOAT?t.freeFloat32(ee):t.freeUint8(ee)}}(k,A,T,E,this.format,this.type,this._mipLevels,_)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(v,u,y){"use strict";u.exports=function(e,n,t){n?n.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var a=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(t){if(t.length>a)throw new Error("gl-vao: Too many vertex attributes");for(var r=0;r<t.length;++r){var f=t[r];if(f.buffer){var i=f.size||4,l=f.type||e.FLOAT,c=!!f.normalized,h=f.stride||0,m=f.offset||0;f.buffer.bind(),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,i,l,c,h,m)}else{if("number"==typeof f)e.vertexAttrib1f(r,f);else if(1===f.length)e.vertexAttrib1f(r,f[0]);else if(2===f.length)e.vertexAttrib2f(r,f[0],f[1]);else if(3===f.length)e.vertexAttrib3f(r,f[0],f[1],f[2]);else{if(4!==f.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(r,f[0],f[1],f[2],f[3])}e.disableVertexAttribArray(r)}}for(;r<a;++r)e.disableVertexAttribArray(r)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),r=0;r<a;++r)e.disableVertexAttribArray(r)}},{}],148:[function(v,u,y){"use strict";var e=v("./do-bind.js");function n(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}n.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},n.prototype.update=function(t,a,r){this._elements=a,this._attributes=t,this._elementsType=r||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(t,a,r){r=r||0;var f=this.gl;this._elements?f.drawElements(t,a,this._elementsType,r):f.drawArrays(t,r,a)},u.exports=function(t){return new n(t)}},{"./do-bind.js":147}],149:[function(v,u,y){"use strict";var e=v("./do-bind.js");function n(a,r,f,s,i,l){this.location=a,this.dimension=r,this.a=f,this.b=s,this.c=i,this.d=l}function t(a,r,f){this.gl=a,this._ext=r,this.handle=f,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}n.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},t.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},t.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},t.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},t.prototype.update=function(a,r,f){if(this.bind(),e(this.gl,r,a),this.unbind(),this._attribs.length=0,a)for(var s=0;s<a.length;++s){var i=a[s];"number"==typeof i?this._attribs.push(new n(s,1,i)):Array.isArray(i)&&this._attribs.push(new n(s,i.length,i[0],i[1],i[2],i[3]))}this._useElements=!!r,this._elementsType=f||this.gl.UNSIGNED_SHORT},t.prototype.draw=function(a,r,f){f=f||0;var s=this.gl;this._useElements?s.drawElements(a,r,this._elementsType,f):s.drawArrays(a,f,r)},u.exports=function(a,r){return new t(a,r,r.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(v,u,y){"use strict";var e=v("./lib/vao-native.js"),n=v("./lib/vao-emulated.js");function t(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}u.exports=function(a,r,f,s){var i,l=a.createVertexArray?new t(a):a.getExtension("OES_vertex_array_object");return(i=l?e(a,l):n(a)).update(r,f,s),i}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(v,u,y){u.exports=function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e}},{}],152:[function(v,u,y){u.exports=function(a,r){var f=e(a[0],a[1],a[2]),s=e(r[0],r[1],r[2]);n(f,f),n(s,s);var i=t(f,s);return i>1?0:Math.acos(i)};var e=v("./fromValues"),n=v("./normalize"),t=v("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(v,u,y){u.exports=function(e,n){return e[0]=Math.ceil(n[0]),e[1]=Math.ceil(n[1]),e[2]=Math.ceil(n[2]),e}},{}],154:[function(v,u,y){u.exports=function(e){var n=new Float32Array(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}},{}],155:[function(v,u,y){u.exports=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}},{}],156:[function(v,u,y){u.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(v,u,y){u.exports=function(e,n,t){var a=n[0],r=n[1],f=n[2],s=t[0],i=t[1],l=t[2];return e[0]=r*l-f*i,e[1]=f*s-a*l,e[2]=a*i-r*s,e}},{}],158:[function(v,u,y){u.exports=v("./distance")},{"./distance":159}],159:[function(v,u,y){u.exports=function(e,n){var t=n[0]-e[0],a=n[1]-e[1],r=n[2]-e[2];return Math.sqrt(t*t+a*a+r*r)}},{}],160:[function(v,u,y){u.exports=v("./divide")},{"./divide":161}],161:[function(v,u,y){u.exports=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e}},{}],162:[function(v,u,y){u.exports=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}},{}],163:[function(v,u,y){u.exports=1e-6},{}],164:[function(v,u,y){u.exports=function(n,t){var a=n[0],r=n[1],f=n[2],s=t[0],i=t[1],l=t[2];return Math.abs(a-s)<=e*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(r-i)<=e*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(f-l)<=e*Math.max(1,Math.abs(f),Math.abs(l))};var e=v("./epsilon")},{"./epsilon":163}],165:[function(v,u,y){u.exports=function(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}},{}],166:[function(v,u,y){u.exports=function(e,n){return e[0]=Math.floor(n[0]),e[1]=Math.floor(n[1]),e[2]=Math.floor(n[2]),e}},{}],167:[function(v,u,y){u.exports=function(n,t,a,r,f,s){var i,l;for(t||(t=3),a||(a=0),l=r?Math.min(r*t+a,n.length):n.length,i=a;i<l;i+=t)e[0]=n[i],e[1]=n[i+1],e[2]=n[i+2],f(e,e,s),n[i]=e[0],n[i+1]=e[1],n[i+2]=e[2];return n};var e=v("./create")()},{"./create":156}],168:[function(v,u,y){u.exports=function(e,n,t){var a=new Float32Array(3);return a[0]=e,a[1]=n,a[2]=t,a}},{}],169:[function(v,u,y){u.exports={EPSILON:v("./epsilon"),create:v("./create"),clone:v("./clone"),angle:v("./angle"),fromValues:v("./fromValues"),copy:v("./copy"),set:v("./set"),equals:v("./equals"),exactEquals:v("./exactEquals"),add:v("./add"),subtract:v("./subtract"),sub:v("./sub"),multiply:v("./multiply"),mul:v("./mul"),divide:v("./divide"),div:v("./div"),min:v("./min"),max:v("./max"),floor:v("./floor"),ceil:v("./ceil"),round:v("./round"),scale:v("./scale"),scaleAndAdd:v("./scaleAndAdd"),distance:v("./distance"),dist:v("./dist"),squaredDistance:v("./squaredDistance"),sqrDist:v("./sqrDist"),length:v("./length"),len:v("./len"),squaredLength:v("./squaredLength"),sqrLen:v("./sqrLen"),negate:v("./negate"),inverse:v("./inverse"),normalize:v("./normalize"),dot:v("./dot"),cross:v("./cross"),lerp:v("./lerp"),random:v("./random"),transformMat4:v("./transformMat4"),transformMat3:v("./transformMat3"),transformQuat:v("./transformQuat"),rotateX:v("./rotateX"),rotateY:v("./rotateY"),rotateZ:v("./rotateZ"),forEach:v("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(v,u,y){u.exports=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e}},{}],171:[function(v,u,y){u.exports=v("./length")},{"./length":172}],172:[function(v,u,y){u.exports=function(e){var n=e[0],t=e[1],a=e[2];return Math.sqrt(n*n+t*t+a*a)}},{}],173:[function(v,u,y){u.exports=function(e,n,t,a){var r=n[0],f=n[1],s=n[2];return e[0]=r+a*(t[0]-r),e[1]=f+a*(t[1]-f),e[2]=s+a*(t[2]-s),e}},{}],174:[function(v,u,y){u.exports=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e}},{}],175:[function(v,u,y){u.exports=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e}},{}],176:[function(v,u,y){u.exports=v("./multiply")},{"./multiply":177}],177:[function(v,u,y){u.exports=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e}},{}],178:[function(v,u,y){u.exports=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e}},{}],179:[function(v,u,y){u.exports=function(e,n){var t=n[0],a=n[1],r=n[2],f=t*t+a*a+r*r;return f>0&&(f=1/Math.sqrt(f),e[0]=n[0]*f,e[1]=n[1]*f,e[2]=n[2]*f),e}},{}],180:[function(v,u,y){u.exports=function(e,n){n=n||1;var t=2*Math.random()*Math.PI,a=2*Math.random()-1,r=Math.sqrt(1-a*a)*n;return e[0]=Math.cos(t)*r,e[1]=Math.sin(t)*r,e[2]=a*n,e}},{}],181:[function(v,u,y){u.exports=function(e,n,t,a){var r=t[1],f=t[2],s=n[1]-r,i=n[2]-f,l=Math.sin(a),c=Math.cos(a);return e[0]=n[0],e[1]=r+s*c-i*l,e[2]=f+s*l+i*c,e}},{}],182:[function(v,u,y){u.exports=function(e,n,t,a){var r=t[0],f=t[2],s=n[0]-r,i=n[2]-f,l=Math.sin(a),c=Math.cos(a);return e[0]=r+i*l+s*c,e[1]=n[1],e[2]=f+i*c-s*l,e}},{}],183:[function(v,u,y){u.exports=function(e,n,t,a){var r=t[0],f=t[1],s=n[0]-r,i=n[1]-f,l=Math.sin(a),c=Math.cos(a);return e[0]=r+s*c-i*l,e[1]=f+s*l+i*c,e[2]=n[2],e}},{}],184:[function(v,u,y){u.exports=function(e,n){return e[0]=Math.round(n[0]),e[1]=Math.round(n[1]),e[2]=Math.round(n[2]),e}},{}],185:[function(v,u,y){u.exports=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e}},{}],186:[function(v,u,y){u.exports=function(e,n,t,a){return e[0]=n[0]+t[0]*a,e[1]=n[1]+t[1]*a,e[2]=n[2]+t[2]*a,e}},{}],187:[function(v,u,y){u.exports=function(e,n,t,a){return e[0]=n,e[1]=t,e[2]=a,e}},{}],188:[function(v,u,y){u.exports=v("./squaredDistance")},{"./squaredDistance":190}],189:[function(v,u,y){u.exports=v("./squaredLength")},{"./squaredLength":191}],190:[function(v,u,y){u.exports=function(e,n){var t=n[0]-e[0],a=n[1]-e[1],r=n[2]-e[2];return t*t+a*a+r*r}},{}],191:[function(v,u,y){u.exports=function(e){var n=e[0],t=e[1],a=e[2];return n*n+t*t+a*a}},{}],192:[function(v,u,y){u.exports=v("./subtract")},{"./subtract":193}],193:[function(v,u,y){u.exports=function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e}},{}],194:[function(v,u,y){u.exports=function(e,n,t){var a=n[0],r=n[1],f=n[2];return e[0]=a*t[0]+r*t[3]+f*t[6],e[1]=a*t[1]+r*t[4]+f*t[7],e[2]=a*t[2]+r*t[5]+f*t[8],e}},{}],195:[function(v,u,y){u.exports=function(e,n,t){var a=n[0],r=n[1],f=n[2],s=t[3]*a+t[7]*r+t[11]*f+t[15];return e[0]=(t[0]*a+t[4]*r+t[8]*f+t[12])/(s=s||1),e[1]=(t[1]*a+t[5]*r+t[9]*f+t[13])/s,e[2]=(t[2]*a+t[6]*r+t[10]*f+t[14])/s,e}},{}],196:[function(v,u,y){u.exports=function(e,n,t){var a=n[0],r=n[1],f=n[2],s=t[0],i=t[1],l=t[2],c=t[3],h=c*a+i*f-l*r,m=c*r+l*a-s*f,d=c*f+s*r-i*a,o=-s*a-i*r-l*f;return e[0]=h*c+o*-s+m*-l-d*-i,e[1]=m*c+o*-i+d*-s-h*-l,e[2]=d*c+o*-l+h*-i-m*-s,e}},{}],197:[function(v,u,y){u.exports=function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e[3]=n[3]+t[3],e}},{}],198:[function(v,u,y){u.exports=function(e){var n=new Float32Array(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}},{}],199:[function(v,u,y){u.exports=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}},{}],200:[function(v,u,y){u.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(v,u,y){u.exports=function(e,n){var t=n[0]-e[0],a=n[1]-e[1],r=n[2]-e[2],f=n[3]-e[3];return Math.sqrt(t*t+a*a+r*r+f*f)}},{}],202:[function(v,u,y){u.exports=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e[3]=n[3]/t[3],e}},{}],203:[function(v,u,y){u.exports=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]}},{}],204:[function(v,u,y){u.exports=function(e,n,t,a){var r=new Float32Array(4);return r[0]=e,r[1]=n,r[2]=t,r[3]=a,r}},{}],205:[function(v,u,y){u.exports={create:v("./create"),clone:v("./clone"),fromValues:v("./fromValues"),copy:v("./copy"),set:v("./set"),add:v("./add"),subtract:v("./subtract"),multiply:v("./multiply"),divide:v("./divide"),min:v("./min"),max:v("./max"),scale:v("./scale"),scaleAndAdd:v("./scaleAndAdd"),distance:v("./distance"),squaredDistance:v("./squaredDistance"),length:v("./length"),squaredLength:v("./squaredLength"),negate:v("./negate"),inverse:v("./inverse"),normalize:v("./normalize"),dot:v("./dot"),lerp:v("./lerp"),random:v("./random"),transformMat4:v("./transformMat4"),transformQuat:v("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(v,u,y){u.exports=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e[3]=1/n[3],e}},{}],207:[function(v,u,y){u.exports=function(e){var n=e[0],t=e[1],a=e[2],r=e[3];return Math.sqrt(n*n+t*t+a*a+r*r)}},{}],208:[function(v,u,y){u.exports=function(e,n,t,a){var r=n[0],f=n[1],s=n[2],i=n[3];return e[0]=r+a*(t[0]-r),e[1]=f+a*(t[1]-f),e[2]=s+a*(t[2]-s),e[3]=i+a*(t[3]-i),e}},{}],209:[function(v,u,y){u.exports=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e[3]=Math.max(n[3],t[3]),e}},{}],210:[function(v,u,y){u.exports=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e[3]=Math.min(n[3],t[3]),e}},{}],211:[function(v,u,y){u.exports=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e[3]=n[3]*t[3],e}},{}],212:[function(v,u,y){u.exports=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=-n[3],e}},{}],213:[function(v,u,y){u.exports=function(e,n){var t=n[0],a=n[1],r=n[2],f=n[3],s=t*t+a*a+r*r+f*f;return s>0&&(s=1/Math.sqrt(s),e[0]=t*s,e[1]=a*s,e[2]=r*s,e[3]=f*s),e}},{}],214:[function(v,u,y){var e=v("./normalize"),n=v("./scale");u.exports=function(t,a){return a=a||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),e(t,t),n(t,t,a),t}},{"./normalize":213,"./scale":215}],215:[function(v,u,y){u.exports=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e[3]=n[3]*t,e}},{}],216:[function(v,u,y){u.exports=function(e,n,t,a){return e[0]=n[0]+t[0]*a,e[1]=n[1]+t[1]*a,e[2]=n[2]+t[2]*a,e[3]=n[3]+t[3]*a,e}},{}],217:[function(v,u,y){u.exports=function(e,n,t,a,r){return e[0]=n,e[1]=t,e[2]=a,e[3]=r,e}},{}],218:[function(v,u,y){u.exports=function(e,n){var t=n[0]-e[0],a=n[1]-e[1],r=n[2]-e[2],f=n[3]-e[3];return t*t+a*a+r*r+f*f}},{}],219:[function(v,u,y){u.exports=function(e){var n=e[0],t=e[1],a=e[2],r=e[3];return n*n+t*t+a*a+r*r}},{}],220:[function(v,u,y){u.exports=function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e[3]=n[3]-t[3],e}},{}],221:[function(v,u,y){u.exports=function(e,n,t){var a=n[0],r=n[1],f=n[2],s=n[3];return e[0]=t[0]*a+t[4]*r+t[8]*f+t[12]*s,e[1]=t[1]*a+t[5]*r+t[9]*f+t[13]*s,e[2]=t[2]*a+t[6]*r+t[10]*f+t[14]*s,e[3]=t[3]*a+t[7]*r+t[11]*f+t[15]*s,e}},{}],222:[function(v,u,y){u.exports=function(e,n,t){var a=n[0],r=n[1],f=n[2],s=t[0],i=t[1],l=t[2],c=t[3],h=c*a+i*f-l*r,m=c*r+l*a-s*f,d=c*f+s*r-i*a,o=-s*a-i*r-l*f;return e[0]=h*c+o*-s+m*-l-d*-i,e[1]=m*c+o*-i+d*-s-h*-l,e[2]=d*c+o*-l+h*-i-m*-s,e[3]=n[3],e}},{}],223:[function(v,u,y){var e=v("glsl-tokenizer"),n=v("atob-lite");u.exports=function(t){for(var a=Array.isArray(t)?t:e(t),r=0;r<a.length;r++){var f=a[r];if("preprocessor"===f.type){var s=f.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(s&&s[2]){var l=s[2];return(s[1]?n(l):l).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(v,u,y){u.exports=function(s){var i,l,c,h=0,m=0,d=999,o=[],b=[],g=1,w=0,_=0,A=!1,T=!1,E="",k=t,O=e;"300 es"===(s=s||{}).version&&(k=r,O=a);var D={},S={};for(h=0;h<k.length;h++)D[k[h]]=!0;for(h=0;h<O.length;h++)S[O[h]]=!0;return function(N){return b=[],null!==N?function(V){var ee;for(h=0,V.toString&&(V=V.toString()),E+=V.replace(/\r\n/g,"\n"),c=E.length;i=E[h],h<c;){switch(ee=h,d){case 0:h="/"===i&&"*"===l?(o.push(i),C(o.join("")),d=999,h+1):(o.push(i),l=i,h+1);break;case 1:case 2:h="\r"!==i&&"\n"!==i||"\\"===l?(o.push(i),l=i,h+1):(C(o.join("")),d=999,h);break;case 3:h=X();break;case 4:h="."===i||/[eE]/.test(i)?(o.push(i),d=5,l=i,h+1):"x"===i&&1===o.length&&"0"===o[0]?(d=11,o.push(i),l=i,h+1):/[^\d]/.test(i)?(C(o.join("")),d=999,h):(o.push(i),l=i,h+1);break;case 11:h=/[^a-fA-F0-9]/.test(i)?(C(o.join("")),d=999,h):(o.push(i),l=i,h+1);break;case 5:"f"===i&&(o.push(i),l=i,h+=1),h=/[eE]/.test(i)?(o.push(i),l=i,h+1):("-"!==i&&"+"!==i||!/[eE]/.test(l))&&/[^\d]/.test(i)?(C(o.join("")),d=999,h):(o.push(i),l=i,h+1);break;case 9999:h=R();break;case 9:h=/[^\s]/g.test(i)?(C(o.join("")),d=999,h):(o.push(i),l=i,h+1);break;case 999:o=o.length?[]:o,h="/"===l&&"*"===i?(_=m+h-1,d=0,l=i,h+1):"/"===l&&"/"===i?(_=m+h-1,d=1,l=i,h+1):"#"===i?(d=2,_=m+h,h):/\s/.test(i)?(d=9,_=m+h,h):(A=/\d/.test(i),T=/[^\w_]/.test(i),_=m+h,d=A?4:T?3:9999,h)}if(ee!==h)switch(E[ee]){case"\n":w=0,++g;break;default:++w}}return m+=h,E=E.slice(h),b}(N):(o.length&&C(o.join("")),d=10,C("(eof)"),b)};function C(N){N.length&&b.push({type:f[d],data:N,position:_,line:g,column:w})}function X(){if("."===l&&/\d/.test(i))return d=5,h;if("/"===l&&"*"===i)return d=0,h;if("/"===l&&"/"===i)return d=1,h;if("."===i&&o.length){for(;Z(o););return d=5,h}if(";"===i||")"===i||"("===i){if(o.length)for(;Z(o););return C(i),d=999,h+1}var N=2===o.length&&"="!==i;if(/[\w_\d\s]/.test(i)||N){for(;Z(o););return d=999,h}return o.push(i),l=i,h+1}function Z(N){for(var V,ee,j=0;;){if(V=n.indexOf(N.slice(0,N.length+j).join("")),ee=n[V],-1===V){if(j--+N.length>0)continue;ee=N.slice(0,1).join("")}return C(ee),_+=ee.length,(o=o.slice(ee.length)).length}}function R(){if(/[^\d\w_]/.test(i)){var N=o.join("");return d=S[N]?8:D[N]?7:6,C(o.join("")),d=999,h}return o.push(i),l=i,h+1}};var e=v("./lib/literals"),n=v("./lib/operators"),t=v("./lib/builtins"),a=v("./lib/literals-300es"),r=v("./lib/builtins-300es"),f=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(v,u,y){var e=v("./builtins");e=e.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)}),u.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(v,u,y){u.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(v,u,y){var e=v("./literals");u.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(v,u,y){u.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(v,u,y){u.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(v,u,y){var e=v("./index");u.exports=function(n,t){var a=e(t),r=[];return(r=r.concat(a(n))).concat(a(null))}},{"./index":224}],231:[function(v,u,y){u.exports=function(e){"string"==typeof e&&(e=[e]);for(var n=[].slice.call(arguments,1),t=[],a=0;a<e.length-1;a++)t.push(e[a],n[a]||"");return t.push(e[a]),t.join("")}},{}],232:[function(v,u,y){"use strict";var e=v("is-browser");u.exports=e&&function(){var n=!1;try{var t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(a){n=!1}return n}()},{"is-browser":236}],233:[function(v,u,y){"use strict";u.exports=function(l,c){var h=l.length;if(0===h)throw new Error("Must have at least d+1 points");var m=l[0].length;if(h<=m)throw new Error("Must input at least d+1 points");var d=l.slice(0,m+1),o=e.apply(void 0,d);if(0===o)throw new Error("Input not in general position");for(var b=new Array(m+1),g=0;g<=m;++g)b[g]=g;o<0&&(b[0]=1,b[1]=0);var w=new t(b,new Array(m+1),!1),_=w.adjacent,A=new Array(m+2);for(g=0;g<=m;++g){for(var T=b.slice(),E=0;E<=m;++E)E===g&&(T[E]=-1);var k=T[0];T[0]=T[1],T[1]=k;var O=new t(T,new Array(m+1),!0);_[g]=O,A[g]=O}for(A[m+1]=w,g=0;g<=m;++g){T=_[g].vertices;var D=_[g].adjacent;for(E=0;E<=m;++E){var S=T[E];if(S<0)D[E]=w;else for(var C=0;C<=m;++C)_[C].vertices.indexOf(S)<0&&(D[E]=_[C])}}var z=new s(m,d,A),B=!!c;for(g=m+1;g<h;++g)z.insert(l[g],B);return z.boundary()};var e=v("robust-orientation"),n=v("simplicial-complex").compareCells;function t(l,c,h){this.vertices=l,this.adjacent=c,this.boundary=h,this.lastVisited=-1}function a(l,c,h){this.vertices=l,this.cell=c,this.index=h}function r(l,c){return n(l.vertices,c.vertices)}t.prototype.flip=function(){var l=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=l;var c=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=c};var f=[];function s(l,c,h){this.dimension=l,this.vertices=c,this.simplices=h,this.interior=h.filter(function(b){return!b.boundary}),this.tuple=new Array(l+1);for(var m=0;m<=l;++m)this.tuple[m]=this.vertices[m];var d,b,o=f[l];o||(o=f[l]=((d=e[l+1])||(d=e),b=d,function(){return b.apply(this,this.tuple)})),this.orient=o}var i=s.prototype;i.handleBoundaryDegeneracy=function(l,c){var h=this.dimension,m=this.vertices.length-1,d=this.tuple,o=this.vertices,b=[l];for(l.lastVisited=-m;b.length>0;)for(var g=(l=b.pop()).adjacent,w=0;w<=h;++w){var _=g[w];if(_.boundary&&!(_.lastVisited<=-m)){for(var A=_.vertices,T=0;T<=h;++T){var E=A[T];d[T]=E<0?c:o[E]}var k=this.orient();if(k>0)return _;_.lastVisited=-m,0===k&&b.push(_)}}return null},i.walk=function(l,c){var h=this.vertices.length-1,m=this.dimension,d=this.vertices,o=this.tuple,b=c?this.interior.length*Math.random()|0:this.interior.length-1,g=this.interior[b];e:for(;!g.boundary;){for(var w=g.vertices,_=g.adjacent,A=0;A<=m;++A)o[A]=d[w[A]];for(g.lastVisited=h,A=0;A<=m;++A){var T=_[A];if(!(T.lastVisited>=h)){var E=o[A];o[A]=l;var k=this.orient();if(o[A]=E,k<0){g=T;continue e}T.lastVisited=T.boundary?-h:h}}return}return g},i.addPeaks=function(l,c){var h=this.vertices.length-1,m=this.dimension,d=this.vertices,o=this.tuple,b=this.interior,g=this.simplices,w=[c];c.lastVisited=h,c.vertices[c.vertices.indexOf(-1)]=h,c.boundary=!1,b.push(c);for(var _=[];w.length>0;){var A=(c=w.pop()).vertices,T=c.adjacent,E=A.indexOf(h);if(!(E<0))for(var k=0;k<=m;++k)if(k!==E){var O=T[k];if(O.boundary&&!(O.lastVisited>=h)){var D=O.vertices;if(O.lastVisited!==-h){for(var S=0,C=0;C<=m;++C)D[C]<0?(S=C,o[C]=l):o[C]=d[D[C]];if(this.orient()>0){D[S]=h,O.boundary=!1,b.push(O),w.push(O),O.lastVisited=h;continue}O.lastVisited=-h}var z=O.adjacent,B=A.slice(),U=T.slice(),G=new t(B,U,!0);g.push(G);var X=z.indexOf(c);if(!(X<0))for(z[X]=G,U[E]=O,B[k]=-1,U[k]=c,T[k]=G,G.flip(),C=0;C<=m;++C){var Z=B[C];if(!(Z<0||Z===h)){for(var q=new Array(m-1),W=0,te=0;te<=m;++te){var R=B[te];R<0||te===C||(q[W++]=R)}_.push(new a(q,G,C))}}}}}for(_.sort(r),k=0;k+1<_.length;k+=2){var N=_[k],V=_[k+1];N.index<0||V.index<0||(N.cell.adjacent[N.index]=V.cell,V.cell.adjacent[V.index]=N.cell)}},i.insert=function(l,c){var h=this.vertices;h.push(l);var m=this.walk(l,c);if(m){for(var d=this.dimension,o=this.tuple,b=0;b<=d;++b){var g=m.vertices[b];o[b]=g<0?l:h[g]}var w=this.orient(o);w<0||(0!==w||(m=this.handleBoundaryDegeneracy(m,l)))&&this.addPeaks(l,m)}},i.boundary=function(){for(var l=this.dimension,c=[],h=this.simplices,m=h.length,d=0;d<m;++d){var o=h[d];if(o.boundary){for(var b=new Array(l),g=o.vertices,w=0,_=0,A=0;A<=l;++A)g[A]>=0?b[w++]=g[A]:_=1&A;if(_===(1&l)){var T=b[0];b[0]=b[1],b[1]=T}c.push(b)}}return c}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(v,u,y){"use strict";var e=v("binary-search-bounds");function n(w,_,A,T,E){this.mid=w,this.left=_,this.right=A,this.leftPoints=T,this.rightPoints=E,this.count=(_?_.count:0)+(A?A.count:0)+T.length}u.exports=function(w){return new b(w&&0!==w.length?o(w):null)};var t=n.prototype;function a(w,_){w.mid=_.mid,w.left=_.left,w.right=_.right,w.leftPoints=_.leftPoints,w.rightPoints=_.rightPoints,w.count=_.count}function r(w,_){var A=o(_);w.mid=A.mid,w.left=A.left,w.right=A.right,w.leftPoints=A.leftPoints,w.rightPoints=A.rightPoints,w.count=A.count}function f(w,_){var A=w.intervals([]);A.push(_),r(w,A)}function s(w,_){var A=w.intervals([]),T=A.indexOf(_);return T<0?0:(A.splice(T,1),r(w,A),1)}function i(w,_,A){for(var T=0;T<w.length&&w[T][0]<=_;++T){var E=A(w[T]);if(E)return E}}function l(w,_,A){for(var T=w.length-1;T>=0&&w[T][1]>=_;--T){var E=A(w[T]);if(E)return E}}function c(w,_){for(var A=0;A<w.length;++A){var T=_(w[A]);if(T)return T}}function h(w,_){return w-_}function m(w,_){return w[0]-_[0]||w[1]-_[1]}function d(w,_){return w[1]-_[1]||w[0]-_[0]}function o(w){if(0===w.length)return null;for(var _=[],A=0;A<w.length;++A)_.push(w[A][0],w[A][1]);_.sort(h);var T=_[_.length>>1],E=[],k=[],O=[];for(A=0;A<w.length;++A){var D=w[A];D[1]<T?E.push(D):T<D[0]?k.push(D):O.push(D)}var S=O,C=O.slice();return S.sort(m),C.sort(d),new n(T,o(E),o(k),S,C)}function b(w){this.root=w}t.intervals=function(w){return w.push.apply(w,this.leftPoints),this.left&&this.left.intervals(w),this.right&&this.right.intervals(w),w},t.insert=function(w){var _=this.count-this.leftPoints.length;if(this.count+=1,w[1]<this.mid)this.left?4*(this.left.count+1)>3*(_+1)?f(this,w):this.left.insert(w):this.left=o([w]);else if(w[0]>this.mid)this.right?4*(this.right.count+1)>3*(_+1)?f(this,w):this.right.insert(w):this.right=o([w]);else{var A=e.ge(this.leftPoints,w,m),T=e.ge(this.rightPoints,w,d);this.leftPoints.splice(A,0,w),this.rightPoints.splice(T,0,w)}},t.remove=function(w){var _=this.count-this.leftPoints;if(w[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(_-1)?s(this,w):2===(k=this.left.remove(w))?(this.left=null,this.count-=1,1):(1===k&&(this.count-=1),k):0;if(w[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(_-1)?s(this,w):2===(k=this.right.remove(w))?(this.right=null,this.count-=1,1):(1===k&&(this.count-=1),k):0;if(1===this.count)return this.leftPoints[0]===w?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===w){if(this.left&&this.right){for(var A=this,T=this.left;T.right;)A=T,T=T.right;if(A===this)T.right=this.right;else{var E=this.left,k=this.right;A.count-=T.count,A.right=T.left,T.left=E,T.right=k}a(this,T),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else a(this,this.left?this.left:this.right);return 1}for(E=e.ge(this.leftPoints,w,m);E<this.leftPoints.length&&this.leftPoints[E][0]===w[0];++E)if(this.leftPoints[E]===w)for(this.count-=1,this.leftPoints.splice(E,1),k=e.ge(this.rightPoints,w,d);k<this.rightPoints.length&&this.rightPoints[k][1]===w[1];++k)if(this.rightPoints[k]===w)return this.rightPoints.splice(k,1),1;return 0},t.queryPoint=function(w,_){return w<this.mid?this.left&&(A=this.left.queryPoint(w,_))?A:i(this.leftPoints,w,_):w>this.mid?this.right&&(A=this.right.queryPoint(w,_))?A:l(this.rightPoints,w,_):c(this.leftPoints,_);var A},t.queryInterval=function(w,_,A){var T;return w<this.mid&&this.left&&(T=this.left.queryInterval(w,_,A))||_>this.mid&&this.right&&(T=this.right.queryInterval(w,_,A))?T:_<this.mid?i(this.leftPoints,_,A):w>this.mid?l(this.rightPoints,w,A):c(this.leftPoints,A)};var g=b.prototype;g.insert=function(w){this.root?this.root.insert(w):this.root=new n(w[0],null,null,[w],[w])},g.remove=function(w){if(this.root){var _=this.root.remove(w);return 2===_&&(this.root=null),0!==_}return!1},g.queryPoint=function(w,_){if(this.root)return this.root.queryPoint(w,_)},g.queryInterval=function(w,_,A){if(w<=_&&this.root)return this.root.queryInterval(w,_,A)},Object.defineProperty(g,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(g,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(v,u,y){"use strict";u.exports=function(e){for(var n=new Array(e),t=0;t<e;++t)n[t]=t;return n}},{}],236:[function(v,u,y){u.exports=!0},{}],237:[function(v,u,y){function e(n){return!!n.constructor&&"function"==typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)}u.exports=function(n){return null!=n&&(e(n)||"function"==typeof(t=n).readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))||!!n._isBuffer);var t}},{}],238:[function(v,u,y){"use strict";u.exports=t,u.exports.isMobile=t,u.exports.default=t;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function t(a){a||(a={});var r=a.ua;if(r||"undefined"==typeof navigator||(r=navigator.userAgent),r&&r.headers&&"string"==typeof r.headers["user-agent"]&&(r=r.headers["user-agent"]),"string"!=typeof r)return!1;var f=a.tablet?n.test(r):e.test(r);return!f&&a.tablet&&a.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==r.indexOf("Macintosh")&&-1!==r.indexOf("Safari")&&(f=!0),f}},{}],239:[function(v,u,y){"use strict";u.exports=function(e){for(var n,t=e.length,a=0;a<t;a++)if(((n=e.charCodeAt(a))<9||n>13)&&32!==n&&133!==n&&160!==n&&5760!==n&&6158!==n&&(n<8192||n>8205)&&8232!==n&&8233!==n&&8239!==n&&8287!==n&&8288!==n&&12288!==n&&65279!==n)return!1;return!0}},{}],240:[function(v,u,y){u.exports=function(e,n,t){return e*(1-t)+n*t}},{}],241:[function(v,u,y){var e=v("./normalize"),n=v("gl-mat4/create"),t=v("gl-mat4/clone"),a=v("gl-mat4/determinant"),r=v("gl-mat4/invert"),f=v("gl-mat4/transpose"),s={length:v("gl-vec3/length"),normalize:v("gl-vec3/normalize"),dot:v("gl-vec3/dot"),cross:v("gl-vec3/cross")},i=n(),l=n(),c=[0,0,0,0],h=[[0,0,0],[0,0,0],[0,0,0]],m=[0,0,0];function d(o,b,g,w,_){o[0]=b[0]*w+g[0]*_,o[1]=b[1]*w+g[1]*_,o[2]=b[2]*w+g[2]*_}u.exports=function(o,b,g,w,_,A){if(b||(b=[0,0,0]),g||(g=[0,0,0]),w||(w=[0,0,0]),_||(_=[0,0,0,1]),A||(A=[0,0,0,1]),!e(i,o)||(t(l,i),l[3]=0,l[7]=0,l[11]=0,l[15]=1,Math.abs(a(l)<1e-8)))return!1;var T,E,k,O,D,S,C,te,R,z=i[3],B=i[7],U=i[11],G=i[12],X=i[13],Z=i[14],q=i[15];if(0!==z||0!==B||0!==U){if(c[0]=z,c[1]=B,c[2]=U,c[3]=q,!r(l,l))return!1;f(l,l),O=(E=c)[0],(T=_)[0]=(k=l)[0]*O+k[4]*(D=E[1])+k[8]*(S=E[2])+k[12]*(C=E[3]),T[1]=k[1]*O+k[5]*D+k[9]*S+k[13]*C,T[2]=k[2]*O+k[6]*D+k[10]*S+k[14]*C,T[3]=k[3]*O+k[7]*D+k[11]*S+k[15]*C}else _[0]=_[1]=_[2]=0,_[3]=1;if(b[0]=G,b[1]=X,b[2]=Z,(te=h)[0][0]=(R=i)[0],te[0][1]=R[1],te[0][2]=R[2],te[1][0]=R[4],te[1][1]=R[5],te[1][2]=R[6],te[2][0]=R[8],te[2][1]=R[9],te[2][2]=R[10],g[0]=s.length(h[0]),s.normalize(h[0],h[0]),w[0]=s.dot(h[0],h[1]),d(h[1],h[1],h[0],1,-w[0]),g[1]=s.length(h[1]),s.normalize(h[1],h[1]),w[0]/=g[1],w[1]=s.dot(h[0],h[2]),d(h[2],h[2],h[0],1,-w[1]),w[2]=s.dot(h[1],h[2]),d(h[2],h[2],h[1],1,-w[2]),g[2]=s.length(h[2]),s.normalize(h[2],h[2]),w[1]/=g[2],w[2]/=g[2],s.cross(m,h[1],h[2]),s.dot(h[0],m)<0)for(var W=0;W<3;W++)g[W]*=-1,h[W][0]*=-1,h[W][1]*=-1,h[W][2]*=-1;return A[0]=.5*Math.sqrt(Math.max(1+h[0][0]-h[1][1]-h[2][2],0)),A[1]=.5*Math.sqrt(Math.max(1-h[0][0]+h[1][1]-h[2][2],0)),A[2]=.5*Math.sqrt(Math.max(1-h[0][0]-h[1][1]+h[2][2],0)),A[3]=.5*Math.sqrt(Math.max(1+h[0][0]+h[1][1]+h[2][2],0)),h[2][1]>h[1][2]&&(A[0]=-A[0]),h[0][2]>h[2][0]&&(A[1]=-A[1]),h[1][0]>h[0][1]&&(A[2]=-A[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(v,u,y){u.exports=function(e,n){var t=n[15];if(0===t)return!1;for(var a=1/t,r=0;r<16;r++)e[r]=n[r]*a;return!0}},{}],243:[function(v,u,y){var e=v("gl-vec3/lerp"),n=v("mat4-recompose"),t=v("mat4-decompose"),a=v("gl-mat4/determinant"),r=v("quat-slerp"),f=l(),s=l(),i=l();function l(){return{translate:c(),scale:c(1),skew:c(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function c(h){return[h||0,h||0,h||0]}u.exports=function(h,m,d,o){if(0===a(m)||0===a(d))return!1;var b=t(m,f.translate,f.scale,f.skew,f.perspective,f.quaternion),g=t(d,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!(!b||!g||(e(i.translate,f.translate,s.translate,o),e(i.skew,f.skew,s.skew,o),e(i.scale,f.scale,s.scale,o),e(i.perspective,f.perspective,s.perspective,o),r(i.quaternion,f.quaternion,s.quaternion,o),n(h,i.translate,i.scale,i.skew,i.perspective,i.quaternion),0))}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(v,u,y){var e={identity:v("gl-mat4/identity"),translate:v("gl-mat4/translate"),multiply:v("gl-mat4/multiply"),create:v("gl-mat4/create"),scale:v("gl-mat4/scale"),fromRotationTranslation:v("gl-mat4/fromRotationTranslation")},n=(e.create(),e.create());u.exports=function(t,a,r,f,s,i){return e.identity(t),e.fromRotationTranslation(t,i,a),t[3]=s[0],t[7]=s[1],t[11]=s[2],t[15]=s[3],e.identity(n),0!==f[2]&&(n[9]=f[2],e.multiply(t,t,n)),0!==f[1]&&(n[9]=0,n[8]=f[1],e.multiply(t,t,n)),0!==f[0]&&(n[8]=0,n[4]=f[0],e.multiply(t,t,n)),e.scale(t,t,r),t}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(v,u,y){"use strict";var e=v("binary-search-bounds"),n=v("mat4-interpolate"),t=v("gl-mat4/invert"),a=v("gl-mat4/rotateX"),r=v("gl-mat4/rotateY"),f=v("gl-mat4/rotateZ"),s=v("gl-mat4/lookAt"),i=v("gl-mat4/translate"),l=(v("gl-mat4/scale"),v("gl-vec3/normalize")),c=[0,0,0];function h(o){this._components=o.slice(),this._time=[0],this.prevMatrix=o.slice(),this.nextMatrix=o.slice(),this.computedMatrix=o.slice(),this.computedInverse=o.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}u.exports=function(o){return new h((o=o||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var m=h.prototype;m.recalcMatrix=function(o){var b=this._time,g=e.le(b,o),w=this.computedMatrix;if(!(g<0)){var _=this._components;if(g===b.length-1)for(var A=16*g,T=0;T<16;++T)w[T]=_[A++];else{var E=b[g+1]-b[g],k=(A=16*g,this.prevMatrix),O=!0;for(T=0;T<16;++T)k[T]=_[A++];var D=this.nextMatrix;for(T=0;T<16;++T)D[T]=_[A++],O=O&&k[T]===D[T];if(E<1e-6||O)for(T=0;T<16;++T)w[T]=k[T];else n(w,k,D,(o-b[g])/E)}var S=this.computedUp;S[0]=w[1],S[1]=w[5],S[2]=w[9],l(S,S);var C=this.computedInverse;t(C,w);var z=this.computedEye,B=C[15];z[0]=C[12]/B,z[1]=C[13]/B,z[2]=C[14]/B;var U=this.computedCenter,G=Math.exp(this.computedRadius[0]);for(T=0;T<3;++T)U[T]=z[T]-w[2+4*T]*G}},m.idle=function(o){if(!(o<this.lastT())){for(var b=this._components,g=b.length-16,w=0;w<16;++w)b.push(b[g++]);this._time.push(o)}},m.flush=function(o){var b=e.gt(this._time,o)-2;b<0||(this._time.splice(0,b),this._components.splice(0,16*b))},m.lastT=function(){return this._time[this._time.length-1]},m.lookAt=function(o,b,g,w){this.recalcMatrix(o),this.setMatrix(o,s(this.computedMatrix,b=b||this.computedEye,g=g||c,w=w||this.computedUp));for(var _=0,A=0;A<3;++A)_+=Math.pow(g[A]-b[A],2);_=Math.log(Math.sqrt(_)),this.computedRadius[0]=_},m.rotate=function(o,b,g,w){this.recalcMatrix(o);var _=this.computedInverse;b&&r(_,_,b),g&&a(_,_,g),w&&f(_,_,w),this.setMatrix(o,t(this.computedMatrix,_))};var d=[0,0,0];m.pan=function(o,b,g,w){d[0]=-(b||0),d[1]=-(g||0),d[2]=-(w||0),this.recalcMatrix(o);var _=this.computedInverse;i(_,_,d),this.setMatrix(o,t(_,_))},m.translate=function(o,b,g,w){d[0]=b||0,d[1]=g||0,d[2]=w||0,this.recalcMatrix(o);var _=this.computedMatrix;i(_,_,d),this.setMatrix(o,_)},m.setMatrix=function(o,b){if(!(o<this.lastT())){this._time.push(o);for(var g=0;g<16;++g)this._components.push(b[g])}},m.setDistance=function(o,b){this.computedRadius[0]=b},m.setDistanceLimits=function(o,b){var g=this._limits;g[0]=o,g[1]=b},m.getDistanceLimits=function(o){var b=this._limits;return o?(o[0]=b[0],o[1]=b[1],o):b}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(v,u,y){"use strict";u.exports=function(n){var t=n.length;if(t<3){for(var a=new Array(t),r=0;r<t;++r)a[r]=r;return 2===t&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:a}var f=new Array(t);for(r=0;r<t;++r)f[r]=r;f.sort(function(b,g){return n[b][0]-n[g][0]||n[b][1]-n[g][1]});var s=[f[0],f[1]],i=[f[0],f[1]];for(r=2;r<t;++r){for(var l=f[r],c=n[l],h=s.length;h>1&&e(n[s[h-2]],n[s[h-1]],c)<=0;)h-=1,s.pop();for(s.push(l),h=i.length;h>1&&e(n[i[h-2]],n[i[h-1]],c)>=0;)h-=1,i.pop();i.push(l)}a=new Array(i.length+s.length-2);for(var m=0,d=(r=0,s.length);r<d;++r)a[m++]=s[r];for(var o=i.length-2;o>0;--o)a[m++]=i[o];return a};var e=v("robust-orientation")[3]},{"robust-orientation":284}],247:[function(v,u,y){"use strict";u.exports=function(n,t){t||(t=n,n=window);var a=0,r=0,f=0,s={shift:!1,alt:!1,control:!1,meta:!1},i=!1;function l(A){var T=!1;return"altKey"in A&&(T=T||A.altKey!==s.alt,s.alt=!!A.altKey),"shiftKey"in A&&(T=T||A.shiftKey!==s.shift,s.shift=!!A.shiftKey),"ctrlKey"in A&&(T=T||A.ctrlKey!==s.control,s.control=!!A.ctrlKey),"metaKey"in A&&(T=T||A.metaKey!==s.meta,s.meta=!!A.metaKey),T}function c(A,T){var E=e.x(T),k=e.y(T);"buttons"in T&&(A=0|T.buttons),(A!==a||E!==r||k!==f||l(T))&&(a=0|A,r=E||0,f=k||0,t&&t(a,r,f,s))}function h(A){c(0,A)}function m(){(a||r||f||s.shift||s.alt||s.meta||s.control)&&(r=f=0,a=0,s.shift=s.alt=s.control=s.meta=!1,t&&t(0,0,0,s))}function d(A){l(A)&&t&&t(a,r,f,s)}function o(A){0===e.buttons(A)?c(0,A):c(a,A)}function b(A){c(a|e.buttons(A),A)}function g(A){c(a&~e.buttons(A),A)}function w(){i||(i=!0,n.addEventListener("mousemove",o),n.addEventListener("mousedown",b),n.addEventListener("mouseup",g),n.addEventListener("mouseleave",h),n.addEventListener("mouseenter",h),n.addEventListener("mouseout",h),n.addEventListener("mouseover",h),n.addEventListener("blur",m),n.addEventListener("keyup",d),n.addEventListener("keydown",d),n.addEventListener("keypress",d),n!==window&&(window.addEventListener("blur",m),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}w();var _={element:n};return Object.defineProperties(_,{enabled:{get:function(){return i},set:function(A){A?w():!i||(i=!1,n.removeEventListener("mousemove",o),n.removeEventListener("mousedown",b),n.removeEventListener("mouseup",g),n.removeEventListener("mouseleave",h),n.removeEventListener("mouseenter",h),n.removeEventListener("mouseout",h),n.removeEventListener("mouseover",h),n.removeEventListener("blur",m),n.removeEventListener("keyup",d),n.removeEventListener("keydown",d),n.removeEventListener("keypress",d),n!==window&&(window.removeEventListener("blur",m),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return f},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),_};var e=v("mouse-event")},{"mouse-event":249}],248:[function(v,u,y){var e={left:0,top:0};u.exports=function(n,t,a){t=t||n.currentTarget||n.srcElement,Array.isArray(a)||(a=[0,0]);var i,r=n.clientX||0,f=n.clientY||0,s=(i=t)===window||i===document||i===document.body?e:i.getBoundingClientRect();return a[0]=r-s.left,a[1]=f-s.top,a}},{}],249:[function(v,u,y){"use strict";function e(n){return n.target||n.srcElement||window}y.buttons=function(n){if("object"==typeof n){if("buttons"in n)return n.buttons;if("which"in n){if(2===(t=n.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in n){var t;if(1===(t=n.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},y.element=e,y.x=function(n){if("object"==typeof n){if("offsetX"in n)return n.offsetX;var t=e(n).getBoundingClientRect();return n.clientX-t.left}return 0},y.y=function(n){if("object"==typeof n){if("offsetY"in n)return n.offsetY;var t=e(n).getBoundingClientRect();return n.clientY-t.top}return 0}},{}],250:[function(v,u,y){"use strict";var e=v("to-px");u.exports=function(n,t,a){"function"==typeof n&&(a=!!t,t=n,n=window);var r=e("ex",n),f=function(s){a&&s.preventDefault();var i=s.deltaX||0,l=s.deltaY||0,c=s.deltaZ||0,h=1;switch(s.deltaMode){case 1:h=r;break;case 2:h=window.innerHeight}if(l*=h,c*=h,(i*=h)||l||c)return t(i,l,c,s)};return n.addEventListener("wheel",f),f}},{"to-px":304}],251:[function(v,u,y){"use strict";var e=v("typedarray-pool");u.exports=function(t){function a(h){throw new Error("ndarray-extract-contour: "+h)}"object"!=typeof t&&a("Must specify arguments");var r=t.order;Array.isArray(r)||a("Must specify order");var h,m,d,w,f=t.arrayArguments||1;f<1&&a("Must have at least one array argument"),(t.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),"function"!=typeof t.vertex&&a("Must specify vertex creation function"),"function"!=typeof t.cell&&a("Must specify cell creation function"),"function"!=typeof t.phase&&a("Must specify phase function");for(var i=t.getters||[],l=new Array(f),c=0;c<f;++c)l[c]=i.indexOf(c)>=0;return h=t.vertex,m=t.cell,d=t.phase,w=[l,r].join(","),(0,n[w])(h,m,d,e.mallocUint32,e.freeUint32)};var n={"false,0,1":function(t,a,r,f,s){return function(i,l,c,h){var m,d=0|i.shape[0],o=0|i.shape[1],b=i.data,w=0|i.stride[0],_=0|i.stride[1],A=0|i.offset,T=0|-w,E=0,k=0|-_,O=0,D=-w-_|0,S=0,C=0|w,z=_-w*d|0,B=0,U=0,G=0,X=2*d|0,Z=f(X),q=f(X),W=0,te=0,R=-1,N=-1,V=0,ee=0|-d,j=0|d,J=0,$=-d-1|0,re=d-1|0,ne=0,se=0,ie=0;for(B=0;B<d;++B)Z[W++]=r(b[A],l,c,h),A+=C;if(A+=z,o>0){if(U=1,Z[W++]=r(b[A],l,c,h),A+=C,d>0)for(B=1,te=Z[W]=r(m=b[A],l,c,h),J=Z[W+ee],ne=Z[W+$],te===(V=Z[W+R])&&te===J&&te===ne||(t(B,U,m,E=b[A+T],O=b[A+k],S=b[A+D],te,V,J,ne,l,c,h),se=q[W]=G++),W+=1,A+=C,B=2;B<d;++B)te=Z[W]=r(m=b[A],l,c,h),J=Z[W+ee],ne=Z[W+$],te===(V=Z[W+R])&&te===J&&te===ne||(t(B,U,m,E=b[A+T],O=b[A+k],S=b[A+D],te,V,J,ne,l,c,h),se=q[W]=G++,ne!==V&&a(q[W+R],se,S,E,ne,V,l,c,h)),W+=1,A+=C;for(A+=z,W=0,ie=R,R=N,N=ie,ie=ee,ee=j,j=ie,ie=$,$=re,re=ie,U=2;U<o;++U){if(Z[W++]=r(b[A],l,c,h),A+=C,d>0)for(B=1,te=Z[W]=r(m=b[A],l,c,h),J=Z[W+ee],ne=Z[W+$],te===(V=Z[W+R])&&te===J&&te===ne||(t(B,U,m,E=b[A+T],O=b[A+k],S=b[A+D],te,V,J,ne,l,c,h),se=q[W]=G++,ne!==J&&a(q[W+ee],se,O,S,J,ne,l,c,h)),W+=1,A+=C,B=2;B<d;++B)te=Z[W]=r(m=b[A],l,c,h),J=Z[W+ee],ne=Z[W+$],te===(V=Z[W+R])&&te===J&&te===ne||(t(B,U,m,E=b[A+T],O=b[A+k],S=b[A+D],te,V,J,ne,l,c,h),se=q[W]=G++,ne!==J&&a(q[W+ee],se,O,S,J,ne,l,c,h),ne!==V&&a(q[W+R],se,S,E,ne,V,l,c,h)),W+=1,A+=C;1&U&&(W=0),ie=R,R=N,N=ie,ie=ee,ee=j,j=ie,ie=$,$=re,re=ie,A+=z}}s(q),s(Z)}},"false,1,0":function(t,a,r,f,s){return function(i,l,c,h){var m,d=0|i.shape[0],o=0|i.shape[1],b=i.data,w=0|i.stride[0],_=0|i.stride[1],A=0|i.offset,T=0|-w,E=0,k=0|-_,O=0,D=-w-_|0,S=0,C=0|_,z=w-_*o|0,B=0,U=0,G=0,X=2*o|0,Z=f(X),q=f(X),W=0,te=0,R=-1,N=-1,V=0,ee=0|-o,j=0|o,J=0,$=-o-1|0,re=o-1|0,ne=0,se=0,ie=0;for(U=0;U<o;++U)Z[W++]=r(b[A],l,c,h),A+=C;if(A+=z,d>0){if(B=1,Z[W++]=r(b[A],l,c,h),A+=C,o>0)for(U=1,te=Z[W]=r(m=b[A],l,c,h),V=Z[W+R],ne=Z[W+$],te===(J=Z[W+ee])&&te===V&&te===ne||(t(B,U,m,E=b[A+T],O=b[A+k],S=b[A+D],te,J,V,ne,l,c,h),se=q[W]=G++),W+=1,A+=C,U=2;U<o;++U)te=Z[W]=r(m=b[A],l,c,h),V=Z[W+R],ne=Z[W+$],te===(J=Z[W+ee])&&te===V&&te===ne||(t(B,U,m,E=b[A+T],O=b[A+k],S=b[A+D],te,J,V,ne,l,c,h),se=q[W]=G++,ne!==V&&a(q[W+R],se,O,S,V,ne,l,c,h)),W+=1,A+=C;for(A+=z,W=0,ie=ee,ee=j,j=ie,ie=R,R=N,N=ie,ie=$,$=re,re=ie,B=2;B<d;++B){if(Z[W++]=r(b[A],l,c,h),A+=C,o>0)for(U=1,te=Z[W]=r(m=b[A],l,c,h),V=Z[W+R],ne=Z[W+$],te===(J=Z[W+ee])&&te===V&&te===ne||(t(B,U,m,E=b[A+T],O=b[A+k],S=b[A+D],te,J,V,ne,l,c,h),se=q[W]=G++,ne!==J&&a(q[W+ee],se,S,E,ne,J,l,c,h)),W+=1,A+=C,U=2;U<o;++U)te=Z[W]=r(m=b[A],l,c,h),V=Z[W+R],ne=Z[W+$],te===(J=Z[W+ee])&&te===V&&te===ne||(t(B,U,m,E=b[A+T],O=b[A+k],S=b[A+D],te,J,V,ne,l,c,h),se=q[W]=G++,ne!==V&&a(q[W+R],se,O,S,V,ne,l,c,h),ne!==J&&a(q[W+ee],se,S,E,ne,J,l,c,h)),W+=1,A+=C;1&B&&(W=0),ie=ee,ee=j,j=ie,ie=R,R=N,N=ie,ie=$,$=re,re=ie,A+=z}}s(q),s(Z)}}}},{"typedarray-pool":308}],252:[function(v,u,y){"use strict";var e=v("dup"),n={zero:function(d,o,b,g){var w=d[0];g|=0;var _=0,A=b[0];for(_=0;_<w;++_)o[g]=0,g+=A},fdTemplate1:function(d,o,b,g,w,_,A){var T=d[0],E=b[0],k=-1*E,O=E;g|=0,A|=0;var D=0,S=E,C=_[0];for(D=0;D<T;++D)w[A]=.5*(o[g+k]-o[g+O]),g+=S,A+=C},fdTemplate2:function(d,o,b,g,w,_,A,T,E,k){var O=d[0],D=d[1],S=b[0],C=b[1],B=_[1],G=E[1],X=-1*S,Z=S,q=-1*C,W=C;g|=0,A|=0,k|=0;var te=0,R=0,N=C,V=S-D*C,ee=B,j=_[0]-D*B,J=G,$=E[0]-D*G;for(R=0;R<O;++R){for(te=0;te<D;++te)w[A]=.5*(o[g+X]-o[g+Z]),T[k]=.5*(o[g+q]-o[g+W]),g+=N,A+=ee,k+=J;g+=V,A+=j,k+=$}}},t={cdiff:function(d){var o={};return function(b,g,w){var _=b.dtype,A=b.order,T=g.dtype,E=g.order,k=w.dtype,O=w.order,D=[_,A.join(),T,E.join(),k,O.join()].join(),S=o[D];return S||(o[D]=S=d([_,A,T,E,k,O])),S(b.shape.slice(0),b.data,b.stride,0|b.offset,g.data,g.stride,0|g.offset,w.data,w.stride,0|w.offset)}},zero:function(d){var o={};return function(b){var g=b.dtype,w=b.order,_=[g,w.join()].join(),A=o[_];return A||(o[_]=A=d([g,w])),A(b.shape.slice(0),b.data,b.stride,0|b.offset)}},fdTemplate1:function(d){var o={};return function(b,g){var w=b.dtype,_=b.order,A=g.dtype,T=g.order,E=[w,_.join(),A,T.join()].join(),k=o[E];return k||(o[E]=k=d([w,_,A,T])),k(b.shape.slice(0),b.data,b.stride,0|b.offset,g.data,g.stride,0|g.offset)}},fdTemplate2:function(d){var o={};return function(b,g,w){var _=b.dtype,A=b.order,T=g.dtype,E=g.order,k=w.dtype,O=w.order,D=[_,A.join(),T,E.join(),k,O.join()].join(),S=o[D];return S||(o[D]=S=d([_,A,T,E,k,O])),S(b.shape.slice(0),b.data,b.stride,0|b.offset,g.data,g.stride,0|g.offset,w.data,w.stride,0|w.offset)}}};function a(d){return(0,t[d.funcName])(r.bind(void 0,d))}function r(d){return n[d.funcName]}function f(d){return a({funcName:d.funcName})}var s={},i={},l=f({funcName:"cdiff"}),c=f({funcName:"zero"});function h(d){return d in s?s[d]:s[d]=f({funcName:"fdTemplate"+d})}function m(d,o,b,g){return function(w,_){var A=_.shape.slice();return A[0]>2&&A[1]>2&&g(_.pick(-1,-1).lo(1,1).hi(A[0]-2,A[1]-2),w.pick(-1,-1,0).lo(1,1).hi(A[0]-2,A[1]-2),w.pick(-1,-1,1).lo(1,1).hi(A[0]-2,A[1]-2)),A[1]>2&&(b(_.pick(0,-1).lo(1).hi(A[1]-2),w.pick(0,-1,1).lo(1).hi(A[1]-2)),o(w.pick(0,-1,0).lo(1).hi(A[1]-2))),A[1]>2&&(b(_.pick(A[0]-1,-1).lo(1).hi(A[1]-2),w.pick(A[0]-1,-1,1).lo(1).hi(A[1]-2)),o(w.pick(A[0]-1,-1,0).lo(1).hi(A[1]-2))),A[0]>2&&(b(_.pick(-1,0).lo(1).hi(A[0]-2),w.pick(-1,0,0).lo(1).hi(A[0]-2)),o(w.pick(-1,0,1).lo(1).hi(A[0]-2))),A[0]>2&&(b(_.pick(-1,A[1]-1).lo(1).hi(A[0]-2),w.pick(-1,A[1]-1,0).lo(1).hi(A[0]-2)),o(w.pick(-1,A[1]-1,1).lo(1).hi(A[0]-2))),w.set(0,0,0,0),w.set(0,0,1,0),w.set(A[0]-1,0,0,0),w.set(A[0]-1,0,1,0),w.set(0,A[1]-1,0,0),w.set(0,A[1]-1,1,0),w.set(A[0]-1,A[1]-1,0,0),w.set(A[0]-1,A[1]-1,1,0),w}}u.exports=function(d,o,b){return Array.isArray(b)||(b=e(o.dimension,"string"==typeof b?b:"clamp")),0===o.size?d:0===o.dimension?(d.set(0),d):function(g){var w=g.join();if(E=i[w])return E;for(var _=g.length,A=[l,c],T=1;T<=_;++T)A.push(h(T));var E=m.apply(void 0,A);return i[w]=E,E}(b)(d,o)}},{dup:65}],253:[function(v,u,y){"use strict";function e(r,f){var s=Math.floor(f),i=f-s,c=0<=s+1&&s+1<r.shape[0];return(1-i)*(0<=s&&s<r.shape[0]?+r.get(s):0)+i*(c?+r.get(s+1):0)}function n(r,f,s){var i=Math.floor(f),l=f-i,c=0<=i&&i<r.shape[0],h=0<=i+1&&i+1<r.shape[0],m=Math.floor(s),d=s-m,o=0<=m&&m<r.shape[1],b=0<=m+1&&m+1<r.shape[1],g=c&&o?r.get(i,m):0,w=c&&b?r.get(i,m+1):0;return(1-d)*((1-l)*g+l*(h&&o?r.get(i+1,m):0))+d*((1-l)*w+l*(h&&b?r.get(i+1,m+1):0))}function t(r,f,s,i){var l=Math.floor(f),c=f-l,h=0<=l&&l<r.shape[0],m=0<=l+1&&l+1<r.shape[0],d=Math.floor(s),o=s-d,b=0<=d&&d<r.shape[1],g=0<=d+1&&d+1<r.shape[1],w=Math.floor(i),_=i-w,A=0<=w&&w<r.shape[2],T=0<=w+1&&w+1<r.shape[2],E=h&&b&&A?r.get(l,d,w):0,k=h&&g&&A?r.get(l,d+1,w):0,O=m&&b&&A?r.get(l+1,d,w):0,D=m&&g&&A?r.get(l+1,d+1,w):0,S=h&&b&&T?r.get(l,d,w+1):0,C=h&&g&&T?r.get(l,d+1,w+1):0;return(1-_)*((1-o)*((1-c)*E+c*O)+o*((1-c)*k+c*D))+_*((1-o)*((1-c)*S+c*(m&&b&&T?r.get(l+1,d,w+1):0))+o*((1-c)*C+c*(m&&g&&T?r.get(l+1,d+1,w+1):0)))}function a(r){var f,s,i=0|r.shape.length,l=new Array(i),c=new Array(i),h=new Array(i),m=new Array(i);for(f=0;f<i;++f)s=+arguments[f+1],l[f]=Math.floor(s),c[f]=s-l[f],h[f]=0<=l[f]&&l[f]<r.shape[f],m[f]=0<=l[f]+1&&l[f]+1<r.shape[f];var d,o,b,g=0;e:for(f=0;f<1<<i;++f){for(o=1,b=r.offset,d=0;d<i;++d)if(f&1<<d){if(!m[d])continue e;o*=c[d],b+=r.stride[d]*(l[d]+1)}else{if(!h[d])continue e;o*=1-c[d],b+=r.stride[d]*l[d]}g+=o*r.data[b]}return g}u.exports=function(r,f,s,i){switch(r.shape.length){case 0:return 0;case 1:return e(r,f);case 2:return n(r,f,s);case 3:return t(r,f,s,i);default:return a.apply(void 0,arguments)}},u.exports.d1=e,u.exports.d2=n,u.exports.d3=t},{}],254:[function(v,u,y){"use strict";var e={"float64,2,1,0":function(){return function(f,s,i,l,c){var h=f[0],m=f[1],d=f[2],b=i[1],g=i[2];l|=0;var w=0,_=0,A=0,T=g,E=b-d*g,k=i[0]-m*b;for(A=0;A<h;++A){for(_=0;_<m;++_){for(w=0;w<d;++w)s[l]/=c,l+=T;l+=E}l+=k}}},"uint8,2,0,1,float64,2,1,0":function(){return function(f,s,i,l,c,h,m,d){for(var o=f[0],b=f[1],g=f[2],w=i[0],_=i[1],A=i[2],T=h[0],E=h[1],k=h[2],O=l|=0,D=m|=0,S=0|f[0];S>0;){S<64?(o=S,S=0):(o=64,S-=64);for(var C=0|f[1];C>0;){C<64?(b=C,C=0):(b=64,C-=64),l=O+S*w+C*_,m=D+S*T+C*E;var z=0,B=0,U=0,G=A,X=w-g*A,Z=_-o*w,q=k,W=T-g*k,te=E-o*T;for(U=0;U<b;++U){for(B=0;B<o;++B){for(z=0;z<g;++z)s[l]=c[m]*d,l+=G,m+=q;l+=X,m+=W}l+=Z,m+=te}}}}},"float32,1,0,float32,1,0":function(){return function(f,s,i,l,c,h,m){var d=f[0],o=f[1],g=i[1],_=h[1];l|=0,m|=0;var A=0,T=0,E=g,k=i[0]-o*g,O=_,D=h[0]-o*_;for(T=0;T<d;++T){for(A=0;A<o;++A)s[l]=c[m],l+=E,m+=O;l+=k,m+=D}}},"float32,1,0,float32,0,1":function(){return function(f,s,i,l,c,h,m){for(var d=f[0],o=f[1],b=i[0],g=i[1],w=h[0],_=h[1],A=l|=0,T=m|=0,E=0|f[1];E>0;){E<64?(o=E,E=0):(o=64,E-=64);for(var k=0|f[0];k>0;){k<64?(d=k,k=0):(d=64,k-=64),l=A+E*g+k*b,m=T+E*_+k*w;var O=0,D=0,S=g,C=b-o*g,z=_,B=w-o*_;for(D=0;D<d;++D){for(O=0;O<o;++O)s[l]=c[m],l+=S,m+=z;l+=C,m+=B}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(f,s,i,l,c,h,m){for(var d=f[0],o=f[1],b=f[2],g=i[0],w=i[1],_=i[2],A=h[0],T=h[1],E=h[2],k=l|=0,O=m|=0,D=0|f[2];D>0;){D<64?(b=D,D=0):(b=64,D-=64);for(var S=0|f[0];S>0;){S<64?(d=S,S=0):(d=64,S-=64);for(var C=0|f[1];C>0;){C<64?(o=C,C=0):(o=64,C-=64),l=k+D*_+S*g+C*w,m=O+D*E+S*A+C*T;var z=0,B=0,U=0,G=_,X=g-b*_,Z=w-d*g,q=E,W=A-b*E,te=T-d*A;for(U=0;U<o;++U){for(B=0;B<d;++B){for(z=0;z<b;++z)s[l]=c[m],l+=G,m+=q;l+=X,m+=W}l+=Z,m+=te}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(f,s,i,l,c,h,m){var d=f[0],o=f[1],b=f[2],g=i[0],_=i[2],A=h[0],E=h[2];l|=0,m|=0;var k=0,O=0,D=0,S=_,C=g-b*_,z=i[1]-d*g,B=E,U=A-b*E,G=h[1]-d*A;for(D=0;D<o;++D){for(O=0;O<d;++O){for(k=0;k<b;++k)s[l]=c[m],l+=S,m+=B;l+=C,m+=U}l+=z,m+=G}}}},n=function(f,s){var i=s.join(",");return(0,e[i])()},t={mul:function(f){var s={};return function(i,l,c){var h=i.dtype,m=i.order,d=l.dtype,o=l.order,b=c.dtype,g=c.order,w=[h,m.join(),d,o.join(),b,g.join()].join(),_=s[w];return _||(s[w]=_=f([h,m,d,o,b,g])),_(i.shape.slice(0),i.data,i.stride,0|i.offset,l.data,l.stride,0|l.offset,c.data,c.stride,0|c.offset)}},muls:function(f){var s={};return function(i,l,c){var h=i.dtype,m=i.order,d=l.dtype,o=l.order,b=[h,m.join(),d,o.join()].join(),g=s[b];return g||(s[b]=g=f([h,m,d,o])),g(i.shape.slice(0),i.data,i.stride,0|i.offset,l.data,l.stride,0|l.offset,c)}},mulseq:function(f){var s={};return function(i,l){var c=i.dtype,h=i.order,m=[c,h.join()].join(),d=s[m];return d||(s[m]=d=f([c,h])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,l)}},div:function(f){var s={};return function(i,l,c){var h=i.dtype,m=i.order,d=l.dtype,o=l.order,b=c.dtype,g=c.order,w=[h,m.join(),d,o.join(),b,g.join()].join(),_=s[w];return _||(s[w]=_=f([h,m,d,o,b,g])),_(i.shape.slice(0),i.data,i.stride,0|i.offset,l.data,l.stride,0|l.offset,c.data,c.stride,0|c.offset)}},divs:function(f){var s={};return function(i,l,c){var h=i.dtype,m=i.order,d=l.dtype,o=l.order,b=[h,m.join(),d,o.join()].join(),g=s[b];return g||(s[b]=g=f([h,m,d,o])),g(i.shape.slice(0),i.data,i.stride,0|i.offset,l.data,l.stride,0|l.offset,c)}},divseq:function(f){var s={};return function(i,l){var c=i.dtype,h=i.order,m=[c,h.join()].join(),d=s[m];return d||(s[m]=d=f([c,h])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,l)}},assign:function(f){var s={};return function(i,l){var c=i.dtype,h=i.order,m=l.dtype,d=l.order,o=[c,h.join(),m,d.join()].join(),b=s[o];return b||(s[o]=b=f([c,h,m,d])),b(i.shape.slice(0),i.data,i.stride,0|i.offset,l.data,l.stride,0|l.offset)}}};function a(f){return(0,t[(s={funcName:f.funcName}).funcName])(n.bind(void 0,s));var s}var r={mul:"*",div:"/"};(function(){for(var f in r)y[f]=a({funcName:f}),y[f+"s"]=a({funcName:f+"s"}),y[f+"seq"]=a({funcName:f+"seq"})})(),y.assign=a({funcName:"assign"})},{}],255:[function(v,u,y){"use strict";var e=v("ndarray"),n=v("./doConvert.js");u.exports=function(t,a){for(var r=[],f=t,s=1;Array.isArray(f);)r.push(f.length),s*=f.length,f=f[0];return 0===r.length?e():(a||(a=e(new Float64Array(s),r)),n(a,t),a)}},{"./doConvert.js":256,ndarray:259}],256:[function(v,u,y){"use strict";var t,a;u.exports=(t=function(){return function(t,a,r,f,s){var i=t[0],l=t[1],c=t[2],m=r[1],d=r[2],o=[0,0,0];f|=0;var b=0,g=0,w=0,_=d,A=m-c*d,T=r[0]-l*m;for(w=0;w<i;++w){for(g=0;g<l;++g){for(b=0;b<c;++b){var E,k=s;for(E=0;E<o.length-1;++E)k=k[o[E]];a[f]=k[o[o.length-1]],f+=_,++o[2]}f+=A,o[2]-=c,++o[1]}f+=T,o[1]-=l,++o[0]}}}.bind(void 0,{funcName:"convert"}),a={},function(r,f){var s=r.dtype,i=r.order,l=[s,i.join()].join(),c=a[l];return c||(a[l]=c=t([s,i])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,f)})},{}],257:[function(v,u,y){"use strict";var e=v("typedarray-pool");function n(f){switch(f){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var t={"uint32,1,0":function(f,s){return function(i,l,c,h,m,d,o,b,g,w,_){var A,T,E,k,O,D,S,C,z=i*m+h,B=f(b);for(A=i+1;A<=l;++A){for(T=A,E=z+=m,O=0,D=z,k=0;k<b;++k)B[O++]=c[D],D+=g;e:for(;T-- >i;){O=0,D=E-m;t:for(k=0;k<b;++k){if((S=c[D])<(C=B[O]))break e;if(S>C)break t;D+=w,O+=_}for(O=E,D=E-m,k=0;k<b;++k)c[O]=c[D],O+=g,D+=g;E-=m}for(O=E,D=0,k=0;k<b;++k)c[O]=B[D++],O+=g}s(B)}}},a={"uint32,1,0":function(f,s,i){return function l(c,h,m,d,o,b,g,w,_,A,T){var E,k,D,S,C,z,B,U,G,X,Z,q,W,te,R,N,V,ee,j,J,$,re,ne,se,ie=(h-c+1)/6|0,ue=c+ie,le=h-ie,de=c+h>>1,ve=de-ie,_e=de+ie,be=ue,Te=ve,he=de,me=_e,Ae=le,we=c+1,Se=h-1,Pe=!0,ze=0,He=0,tt=0,Oe=w,Be=s(Oe),Je=s(Oe);X=o*be,Z=o*Te,se=d;e:for(G=0;G<w;++G){if((tt=m[z=X+se]-m[B=Z+se])>0){k=be,be=Te,Te=k;break e}if(tt<0)break e;se+=A}X=o*me,Z=o*Ae,se=d;e:for(G=0;G<w;++G){if((tt=m[z=X+se]-m[B=Z+se])>0){k=me,me=Ae,Ae=k;break e}if(tt<0)break e;se+=A}X=o*be,Z=o*he,se=d;e:for(G=0;G<w;++G){if((tt=m[z=X+se]-m[B=Z+se])>0){k=be,be=he,he=k;break e}if(tt<0)break e;se+=A}X=o*Te,Z=o*he,se=d;e:for(G=0;G<w;++G){if((tt=m[z=X+se]-m[B=Z+se])>0){k=Te,Te=he,he=k;break e}if(tt<0)break e;se+=A}X=o*be,Z=o*me,se=d;e:for(G=0;G<w;++G){if((tt=m[z=X+se]-m[B=Z+se])>0){k=be,be=me,me=k;break e}if(tt<0)break e;se+=A}X=o*he,Z=o*me,se=d;e:for(G=0;G<w;++G){if((tt=m[z=X+se]-m[B=Z+se])>0){k=he,he=me,me=k;break e}if(tt<0)break e;se+=A}X=o*Te,Z=o*Ae,se=d;e:for(G=0;G<w;++G){if((tt=m[z=X+se]-m[B=Z+se])>0){k=Te,Te=Ae,Ae=k;break e}if(tt<0)break e;se+=A}X=o*Te,Z=o*he,se=d;e:for(G=0;G<w;++G){if((tt=m[z=X+se]-m[B=Z+se])>0){k=Te,Te=he,he=k;break e}if(tt<0)break e;se+=A}X=o*me,Z=o*Ae,se=d;e:for(G=0;G<w;++G){if((tt=m[z=X+se]-m[B=Z+se])>0){k=me,me=Ae,Ae=k;break e}if(tt<0)break e;se+=A}for(X=o*be,Z=o*Te,q=o*he,W=o*me,te=o*Ae,R=o*ue,N=o*de,V=o*le,ne=0,se=d,G=0;G<w;++G)z=X+se,U=q+se,ee=W+se,j=te+se,J=R+se,$=N+se,re=V+se,Be[ne]=m[B=Z+se],Je[ne]=m[ee],Pe=Pe&&Be[ne]===Je[ne],D=m[U],S=m[j],m[J]=m[z],m[$]=D,m[re]=S,++ne,se+=_;for(X=o*ve,Z=o*c,se=d,G=0;G<w;++G)m[z=X+se]=m[B=Z+se],se+=_;for(X=o*_e,Z=o*h,se=d,G=0;G<w;++G)m[z=X+se]=m[B=Z+se],se+=_;if(Pe)for(C=we;C<=Se;++C){for(z=d+C*o,ne=0,G=0;G<w&&0==(tt=m[z]-Be[ne]);++G)ne+=T,z+=A;if(0!==tt)if(tt<0){if(C!==we)for(X=o*C,Z=o*we,se=d,G=0;G<w;++G)E=m[z=X+se],m[z]=m[B=Z+se],m[B]=E,se+=_;++we}else for(;;){for(z=d+Se*o,ne=0,G=0;G<w&&0==(tt=m[z]-Be[ne]);++G)ne+=T,z+=A;if(!(tt>0)){if(tt<0){for(X=o*C,Z=o*we,q=o*Se,se=d,G=0;G<w;++G)U=q+se,E=m[z=X+se],m[z]=m[B=Z+se],m[B]=m[U],m[U]=E,se+=_;++we,--Se;break}for(X=o*C,Z=o*Se,se=d,G=0;G<w;++G)E=m[z=X+se],m[z]=m[B=Z+se],m[B]=E,se+=_;--Se;break}Se--}}else for(C=we;C<=Se;++C){for(z=d+C*o,ne=0,G=0;G<w&&0==(ze=m[z]-Be[ne]);++G)ne+=T,z+=A;if(ze<0){if(C!==we)for(X=o*C,Z=o*we,se=d,G=0;G<w;++G)E=m[z=X+se],m[z]=m[B=Z+se],m[B]=E,se+=_;++we}else{for(z=d+C*o,ne=0,G=0;G<w&&0==(He=m[z]-Je[ne]);++G)ne+=T,z+=A;if(He>0)for(;;){for(z=d+Se*o,ne=0,G=0;G<w&&0==(tt=m[z]-Je[ne]);++G)ne+=T,z+=A;if(!(tt>0)){for(z=d+Se*o,ne=0,G=0;G<w&&0==(tt=m[z]-Be[ne]);++G)ne+=T,z+=A;if(tt<0){for(X=o*C,Z=o*we,q=o*Se,se=d,G=0;G<w;++G)U=q+se,E=m[z=X+se],m[z]=m[B=Z+se],m[B]=m[U],m[U]=E,se+=_;++we,--Se}else{for(X=o*C,Z=o*Se,se=d,G=0;G<w;++G)E=m[z=X+se],m[z]=m[B=Z+se],m[B]=E,se+=_;--Se}break}if(--Se<C)break}}}for(X=o*c,Z=o*(we-1),ne=0,se=d,G=0;G<w;++G)m[z=X+se]=m[B=Z+se],m[B]=Be[ne],++ne,se+=_;for(X=o*h,Z=o*(Se+1),ne=0,se=d,G=0;G<w;++G)m[z=X+se]=m[B=Z+se],m[B]=Je[ne],++ne,se+=_;if(we-2-c<=32?f(c,we-2,m,d,o,b,g,w,_,A,T):l(c,we-2,m,d,o,b,g,w,_,A,T),h-(Se+2)<=32?f(Se+2,h,m,d,o,b,g,w,_,A,T):l(Se+2,h,m,d,o,b,g,w,_,A,T),Pe)return i(Be),void i(Je);if(we<ue&&Se>le){e:for(;;){for(z=d+we*o,ne=0,se=d,G=0;G<w;++G){if(m[z]!==Be[ne])break e;++ne,z+=_}++we}e:for(;;){for(z=d+Se*o,ne=0,se=d,G=0;G<w;++G){if(m[z]!==Je[ne])break e;++ne,z+=_}--Se}for(C=we;C<=Se;++C){for(z=d+C*o,ne=0,G=0;G<w&&0==(ze=m[z]-Be[ne]);++G)ne+=T,z+=A;if(0===ze){if(C!==we)for(X=o*C,Z=o*we,se=d,G=0;G<w;++G)E=m[z=X+se],m[z]=m[B=Z+se],m[B]=E,se+=_;++we}else{for(z=d+C*o,ne=0,G=0;G<w&&0==(He=m[z]-Je[ne]);++G)ne+=T,z+=A;if(0===He)for(;;){for(z=d+Se*o,ne=0,G=0;G<w&&0==(tt=m[z]-Je[ne]);++G)ne+=T,z+=A;if(0!==tt){for(z=d+Se*o,ne=0,G=0;G<w&&0==(tt=m[z]-Be[ne]);++G)ne+=T,z+=A;if(tt<0){for(X=o*C,Z=o*we,q=o*Se,se=d,G=0;G<w;++G)U=q+se,E=m[z=X+se],m[z]=m[B=Z+se],m[B]=m[U],m[U]=E,se+=_;++we,--Se}else{for(X=o*C,Z=o*Se,se=d,G=0;G<w;++G)E=m[z=X+se],m[z]=m[B=Z+se],m[B]=E,se+=_;--Se}break}if(--Se<C)break}}}}i(Be),i(Je),Se-we<=32?f(we,Se,m,d,o,b,g,w,_,A,T):l(we,Se,m,d,o,b,g,w,_,A,T)}}},r={"uint32,1,0":function(f,s){return function(i){var l=i.data,c=0|i.offset,h=i.shape,m=i.stride,d=0|m[0],o=0|h[0],b=0|m[1],g=0|h[1],w=b,_=b;o<=32?f(0,o-1,l,c,d,b,o,g,w,_,1):s(0,o-1,l,c,d,b,o,g,w,_,1)}}};u.exports=function(f,s){var m,d,o,b,g,i=[s,f].join(","),l=r[i],c=(m=f,o=n(d=s),b=[d,m].join(","),g=t[b],o?g(o[0],o[1]):g());return l(c,function(m,d,o){var b=n(d),g=[d,m].join(","),w=a[g];return m.length>1&&b?w(o,b[0],b[1]):w(o)}(f,s,c))}},{"typedarray-pool":308}],258:[function(v,u,y){"use strict";var e=v("./lib/compile_sort.js"),n={};u.exports=function(t){var a=t.order,r=t.dtype,f=[a,r].join(":"),s=n[f];return s||(n[f]=s=e(a,r)),s(t),t}},{"./lib/compile_sort.js":257}],259:[function(v,u,y){var e=v("is-buffer"),n="undefined"!=typeof Float64Array;function t(i,l){return i[0]-l[0]}function a(){var i,l=this.stride,c=new Array(l.length);for(i=0;i<c.length;++i)c[i]=[Math.abs(l[i]),i];c.sort(t);var h=new Array(c.length);for(i=0;i<h.length;++i)h[i]=c[i][1];return h}var r={T:function(i){function l(h){this.data=h}var c=l.prototype;return c.dtype=i,c.index=function(){return-1},c.size=0,c.dimension=-1,c.shape=c.stride=c.order=[],c.lo=c.hi=c.transpose=c.step=function(){return new l(this.data)},c.get=c.set=function(){},c.pick=function(){return null},function(h){return new l(h)}},0:function(i,l){function c(m,d){this.data=m,this.offset=d}var h=c.prototype;return h.dtype=i,h.index=function(){return this.offset},h.dimension=0,h.size=1,h.shape=h.stride=h.order=[],h.lo=h.hi=h.transpose=h.step=function(){return new c(this.data,this.offset)},h.pick=function(){return l(this.data)},h.valueOf=h.get=function(){return"generic"===i?this.data.get(this.offset):this.data[this.offset]},h.set=function(m){return"generic"===i?this.data.set(this.offset,m):this.data[this.offset]=m},function(m,d,o,b){return new c(m,b)}},1:function(i,l,c){function h(d,o,b,g){this.data=d,this.shape=[o],this.stride=[b],this.offset=0|g}var m=h.prototype;return m.dtype=i,m.dimension=1,Object.defineProperty(m,"size",{get:function(){return this.shape[0]}}),m.order=[0],m.set=function(d,o){return"generic"===i?this.data.set(this.offset+this.stride[0]*d,o):this.data[this.offset+this.stride[0]*d]=o},m.get=function(d){return"generic"===i?this.data.get(this.offset+this.stride[0]*d):this.data[this.offset+this.stride[0]*d]},m.index=function(d){return this.offset+this.stride[0]*d},m.hi=function(d){return new h(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,this.stride[0],this.offset)},m.lo=function(d){var o=this.offset,b=0,g=this.shape[0],w=this.stride[0];return"number"==typeof d&&d>=0&&(o+=w*(b=0|d),g-=b),new h(this.data,g,w,o)},m.step=function(d){var o=this.shape[0],b=this.stride[0],g=this.offset,w=0,_=Math.ceil;return"number"==typeof d&&((w=0|d)<0?(g+=b*(o-1),o=_(-o/w)):o=_(o/w),b*=w),new h(this.data,o,b,g)},m.transpose=function(d){return new h(this.data,this.shape[d=void 0===d?0:0|d],this.stride[d],this.offset)},m.pick=function(d){var o=[],b=[],g=this.offset;return"number"==typeof d&&d>=0?g=g+this.stride[0]*d|0:(o.push(this.shape[0]),b.push(this.stride[0])),(0,l[o.length+1])(this.data,o,b,g)},function(d,o,b,g){return new h(d,o[0],b[0],g)}},2:function(i,l,c){function h(d,o,b,g,w,_){this.data=d,this.shape=[o,b],this.stride=[g,w],this.offset=0|_}var m=h.prototype;return m.dtype=i,m.dimension=2,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(m,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),m.set=function(d,o,b){return"generic"===i?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*o,b):this.data[this.offset+this.stride[0]*d+this.stride[1]*o]=b},m.get=function(d,o){return"generic"===i?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*o):this.data[this.offset+this.stride[0]*d+this.stride[1]*o]},m.index=function(d,o){return this.offset+this.stride[0]*d+this.stride[1]*o},m.hi=function(d,o){return new h(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof o||o<0?this.shape[1]:0|o,this.stride[0],this.stride[1],this.offset)},m.lo=function(d,o){var b=this.offset,g=0,w=this.shape[0],_=this.shape[1],A=this.stride[0],T=this.stride[1];return"number"==typeof d&&d>=0&&(b+=A*(g=0|d),w-=g),"number"==typeof o&&o>=0&&(b+=T*(g=0|o),_-=g),new h(this.data,w,_,A,T,b)},m.step=function(d,o){var b=this.shape[0],g=this.shape[1],w=this.stride[0],_=this.stride[1],A=this.offset,T=0,E=Math.ceil;return"number"==typeof d&&((T=0|d)<0?(A+=w*(b-1),b=E(-b/T)):b=E(b/T),w*=T),"number"==typeof o&&((T=0|o)<0?(A+=_*(g-1),g=E(-g/T)):g=E(g/T),_*=T),new h(this.data,b,g,w,_,A)},m.transpose=function(d,o){var b=this.shape,g=this.stride;return new h(this.data,b[d=void 0===d?0:0|d],b[o=void 0===o?1:0|o],g[d],g[o],this.offset)},m.pick=function(d,o){var b=[],g=[],w=this.offset;return"number"==typeof d&&d>=0?w=w+this.stride[0]*d|0:(b.push(this.shape[0]),g.push(this.stride[0])),"number"==typeof o&&o>=0?w=w+this.stride[1]*o|0:(b.push(this.shape[1]),g.push(this.stride[1])),(0,l[b.length+1])(this.data,b,g,w)},function(d,o,b,g){return new h(d,o[0],o[1],b[0],b[1],g)}},3:function(i,l,c){function h(d,o,b,g,w,_,A,T){this.data=d,this.shape=[o,b,g],this.stride=[w,_,A],this.offset=0|T}var m=h.prototype;return m.dtype=i,m.dimension=3,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(m,"order",{get:function(){var d=Math.abs(this.stride[0]),o=Math.abs(this.stride[1]),b=Math.abs(this.stride[2]);return d>o?o>b?[2,1,0]:d>b?[1,2,0]:[1,0,2]:d>b?[2,0,1]:b>o?[0,1,2]:[0,2,1]}}),m.set=function(d,o,b,g){return"generic"===i?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*b,g):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*b]=g},m.get=function(d,o,b){return"generic"===i?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*b):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*b]},m.index=function(d,o,b){return this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*b},m.hi=function(d,o,b){return new h(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof b||b<0?this.shape[2]:0|b,this.stride[0],this.stride[1],this.stride[2],this.offset)},m.lo=function(d,o,b){var g=this.offset,w=0,_=this.shape[0],A=this.shape[1],T=this.shape[2],E=this.stride[0],k=this.stride[1],O=this.stride[2];return"number"==typeof d&&d>=0&&(g+=E*(w=0|d),_-=w),"number"==typeof o&&o>=0&&(g+=k*(w=0|o),A-=w),"number"==typeof b&&b>=0&&(g+=O*(w=0|b),T-=w),new h(this.data,_,A,T,E,k,O,g)},m.step=function(d,o,b){var g=this.shape[0],w=this.shape[1],_=this.shape[2],A=this.stride[0],T=this.stride[1],E=this.stride[2],k=this.offset,O=0,D=Math.ceil;return"number"==typeof d&&((O=0|d)<0?(k+=A*(g-1),g=D(-g/O)):g=D(g/O),A*=O),"number"==typeof o&&((O=0|o)<0?(k+=T*(w-1),w=D(-w/O)):w=D(w/O),T*=O),"number"==typeof b&&((O=0|b)<0?(k+=E*(_-1),_=D(-_/O)):_=D(_/O),E*=O),new h(this.data,g,w,_,A,T,E,k)},m.transpose=function(d,o,b){var g=this.shape,w=this.stride;return new h(this.data,g[d=void 0===d?0:0|d],g[o=void 0===o?1:0|o],g[b=void 0===b?2:0|b],w[d],w[o],w[b],this.offset)},m.pick=function(d,o,b){var g=[],w=[],_=this.offset;return"number"==typeof d&&d>=0?_=_+this.stride[0]*d|0:(g.push(this.shape[0]),w.push(this.stride[0])),"number"==typeof o&&o>=0?_=_+this.stride[1]*o|0:(g.push(this.shape[1]),w.push(this.stride[1])),"number"==typeof b&&b>=0?_=_+this.stride[2]*b|0:(g.push(this.shape[2]),w.push(this.stride[2])),(0,l[g.length+1])(this.data,g,w,_)},function(d,o,b,g){return new h(d,o[0],o[1],o[2],b[0],b[1],b[2],g)}},4:function(i,l,c){function h(d,o,b,g,w,_,A,T,E,k){this.data=d,this.shape=[o,b,g,w],this.stride=[_,A,T,E],this.offset=0|k}var m=h.prototype;return m.dtype=i,m.dimension=4,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(m,"order",{get:c}),m.set=function(d,o,b,g,w){return"generic"===i?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*b+this.stride[3]*g,w):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*b+this.stride[3]*g]=w},m.get=function(d,o,b,g){return"generic"===i?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*b+this.stride[3]*g):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*b+this.stride[3]*g]},m.index=function(d,o,b,g){return this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*b+this.stride[3]*g},m.hi=function(d,o,b,g){return new h(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof b||b<0?this.shape[2]:0|b,"number"!=typeof g||g<0?this.shape[3]:0|g,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},m.lo=function(d,o,b,g){var w=this.offset,_=0,A=this.shape[0],T=this.shape[1],E=this.shape[2],k=this.shape[3],O=this.stride[0],D=this.stride[1],S=this.stride[2],C=this.stride[3];return"number"==typeof d&&d>=0&&(w+=O*(_=0|d),A-=_),"number"==typeof o&&o>=0&&(w+=D*(_=0|o),T-=_),"number"==typeof b&&b>=0&&(w+=S*(_=0|b),E-=_),"number"==typeof g&&g>=0&&(w+=C*(_=0|g),k-=_),new h(this.data,A,T,E,k,O,D,S,C,w)},m.step=function(d,o,b,g){var w=this.shape[0],_=this.shape[1],A=this.shape[2],T=this.shape[3],E=this.stride[0],k=this.stride[1],O=this.stride[2],D=this.stride[3],S=this.offset,C=0,z=Math.ceil;return"number"==typeof d&&((C=0|d)<0?(S+=E*(w-1),w=z(-w/C)):w=z(w/C),E*=C),"number"==typeof o&&((C=0|o)<0?(S+=k*(_-1),_=z(-_/C)):_=z(_/C),k*=C),"number"==typeof b&&((C=0|b)<0?(S+=O*(A-1),A=z(-A/C)):A=z(A/C),O*=C),"number"==typeof g&&((C=0|g)<0?(S+=D*(T-1),T=z(-T/C)):T=z(T/C),D*=C),new h(this.data,w,_,A,T,E,k,O,D,S)},m.transpose=function(d,o,b,g){var w=this.shape,_=this.stride;return new h(this.data,w[d=void 0===d?0:0|d],w[o=void 0===o?1:0|o],w[b=void 0===b?2:0|b],w[g=void 0===g?3:0|g],_[d],_[o],_[b],_[g],this.offset)},m.pick=function(d,o,b,g){var w=[],_=[],A=this.offset;return"number"==typeof d&&d>=0?A=A+this.stride[0]*d|0:(w.push(this.shape[0]),_.push(this.stride[0])),"number"==typeof o&&o>=0?A=A+this.stride[1]*o|0:(w.push(this.shape[1]),_.push(this.stride[1])),"number"==typeof b&&b>=0?A=A+this.stride[2]*b|0:(w.push(this.shape[2]),_.push(this.stride[2])),"number"==typeof g&&g>=0?A=A+this.stride[3]*g|0:(w.push(this.shape[3]),_.push(this.stride[3])),(0,l[w.length+1])(this.data,w,_,A)},function(d,o,b,g){return new h(d,o[0],o[1],o[2],o[3],b[0],b[1],b[2],b[3],g)}},5:function(i,l,c){function h(d,o,b,g,w,_,A,T,E,k,O,D){this.data=d,this.shape=[o,b,g,w,_],this.stride=[A,T,E,k,O],this.offset=0|D}var m=h.prototype;return m.dtype=i,m.dimension=5,Object.defineProperty(m,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(m,"order",{get:c}),m.set=function(d,o,b,g,w,_){return"generic"===i?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*b+this.stride[3]*g+this.stride[4]*w,_):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*b+this.stride[3]*g+this.stride[4]*w]=_},m.get=function(d,o,b,g,w){return"generic"===i?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*b+this.stride[3]*g+this.stride[4]*w):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*b+this.stride[3]*g+this.stride[4]*w]},m.index=function(d,o,b,g,w){return this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*b+this.stride[3]*g+this.stride[4]*w},m.hi=function(d,o,b,g,w){return new h(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof b||b<0?this.shape[2]:0|b,"number"!=typeof g||g<0?this.shape[3]:0|g,"number"!=typeof w||w<0?this.shape[4]:0|w,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},m.lo=function(d,o,b,g,w){var _=this.offset,A=0,T=this.shape[0],E=this.shape[1],k=this.shape[2],O=this.shape[3],D=this.shape[4],S=this.stride[0],C=this.stride[1],z=this.stride[2],B=this.stride[3],U=this.stride[4];return"number"==typeof d&&d>=0&&(_+=S*(A=0|d),T-=A),"number"==typeof o&&o>=0&&(_+=C*(A=0|o),E-=A),"number"==typeof b&&b>=0&&(_+=z*(A=0|b),k-=A),"number"==typeof g&&g>=0&&(_+=B*(A=0|g),O-=A),"number"==typeof w&&w>=0&&(_+=U*(A=0|w),D-=A),new h(this.data,T,E,k,O,D,S,C,z,B,U,_)},m.step=function(d,o,b,g,w){var _=this.shape[0],A=this.shape[1],T=this.shape[2],E=this.shape[3],k=this.shape[4],O=this.stride[0],D=this.stride[1],S=this.stride[2],C=this.stride[3],z=this.stride[4],B=this.offset,U=0,G=Math.ceil;return"number"==typeof d&&((U=0|d)<0?(B+=O*(_-1),_=G(-_/U)):_=G(_/U),O*=U),"number"==typeof o&&((U=0|o)<0?(B+=D*(A-1),A=G(-A/U)):A=G(A/U),D*=U),"number"==typeof b&&((U=0|b)<0?(B+=S*(T-1),T=G(-T/U)):T=G(T/U),S*=U),"number"==typeof g&&((U=0|g)<0?(B+=C*(E-1),E=G(-E/U)):E=G(E/U),C*=U),"number"==typeof w&&((U=0|w)<0?(B+=z*(k-1),k=G(-k/U)):k=G(k/U),z*=U),new h(this.data,_,A,T,E,k,O,D,S,C,z,B)},m.transpose=function(d,o,b,g,w){var _=this.shape,A=this.stride;return new h(this.data,_[d=void 0===d?0:0|d],_[o=void 0===o?1:0|o],_[b=void 0===b?2:0|b],_[g=void 0===g?3:0|g],_[w=void 0===w?4:0|w],A[d],A[o],A[b],A[g],A[w],this.offset)},m.pick=function(d,o,b,g,w){var _=[],A=[],T=this.offset;return"number"==typeof d&&d>=0?T=T+this.stride[0]*d|0:(_.push(this.shape[0]),A.push(this.stride[0])),"number"==typeof o&&o>=0?T=T+this.stride[1]*o|0:(_.push(this.shape[1]),A.push(this.stride[1])),"number"==typeof b&&b>=0?T=T+this.stride[2]*b|0:(_.push(this.shape[2]),A.push(this.stride[2])),"number"==typeof g&&g>=0?T=T+this.stride[3]*g|0:(_.push(this.shape[3]),A.push(this.stride[3])),"number"==typeof w&&w>=0?T=T+this.stride[4]*w|0:(_.push(this.shape[4]),A.push(this.stride[4])),(0,l[_.length+1])(this.data,_,A,T)},function(d,o,b,g){return new h(d,o[0],o[1],o[2],o[3],o[4],b[0],b[1],b[2],b[3],b[4],g)}}};function f(i,l){var c=-1===l?"T":String(l),h=r[c];return-1===l?h(i):0===l?h(i,s[i][0]):h(i,s[i],a)}var s={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};u.exports=function(i,l,c,h){if(void 0===i)return(0,s.array[0])([]);"number"==typeof i&&(i=[i]),void 0===l&&(l=[i.length]);var m=l.length;if(void 0===c){c=new Array(m);for(var d=m-1,o=1;d>=0;--d)c[d]=o,o*=l[d]}if(void 0===h)for(h=0,d=0;d<m;++d)c[d]<0&&(h-=(l[d]-1)*c[d]);for(var b=function(w){if(e(w))return"buffer";if(n)switch(Object.prototype.toString.call(w)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(w)?"array":"generic"}(i),g=s[b];g.length<=m+1;)g.push(f(b,g.length-1));return(0,g[m+1])(i,l,c,h)}},{"is-buffer":237}],260:[function(v,u,y){"use strict";var e=v("double-bits"),n=Math.pow(2,-1074);u.exports=function(t,a){if(isNaN(t)||isNaN(a))return NaN;if(t===a)return t;if(0===t)return a<0?-n:n;var r=e.hi(t),f=e.lo(t);return a>t==t>0?f===-1>>>0?(r+=1,f=0):f+=1:0===f?(f=-1>>>0,r-=1):f-=1,e.pack(f,r)}},{"double-bits":64}],261:[function(v,u,y){y.vertexNormals=function(e,n,t){for(var a=n.length,r=new Array(a),f=void 0===t?1e-6:t,s=0;s<a;++s)r[s]=[0,0,0];for(s=0;s<e.length;++s)for(var i=e[s],c=i[i.length-1],h=i[0],m=0;m<i.length;++m){for(var d=n[c],o=n[c=h],b=n[h=i[(m+1)%i.length]],g=new Array(3),w=0,_=new Array(3),A=0,T=0;T<3;++T)g[T]=d[T]-o[T],w+=g[T]*g[T],_[T]=b[T]-o[T],A+=_[T]*_[T];if(w*A>f){var E=r[c],k=1/Math.sqrt(w*A);for(T=0;T<3;++T){var O=(T+1)%3,D=(T+2)%3;E[T]+=k*(_[O]*g[D]-_[D]*g[O])}}}for(s=0;s<a;++s){E=r[s];var S=0;for(T=0;T<3;++T)S+=E[T]*E[T];if(S>f)for(k=1/Math.sqrt(S),T=0;T<3;++T)E[T]*=k;else for(T=0;T<3;++T)E[T]=0}return r},y.faceNormals=function(e,n,t){for(var a=e.length,r=new Array(a),f=void 0===t?1e-6:t,s=0;s<a;++s){for(var i=e[s],l=new Array(3),c=0;c<3;++c)l[c]=n[i[c]];var h=new Array(3),m=new Array(3);for(c=0;c<3;++c)h[c]=l[1][c]-l[0][c],m[c]=l[2][c]-l[0][c];var d=new Array(3),o=0;for(c=0;c<3;++c){var b=(c+1)%3,g=(c+2)%3;d[c]=h[b]*m[g]-h[g]*m[b],o+=d[c]*d[c]}for(o=o>f?1/Math.sqrt(o):0,c=0;c<3;++c)d[c]*=o;r[s]=d}return r}},{}],262:[function(v,u,y){"use strict";u.exports=function(e,n,t,a,r,f,s,i,l,c){var h=n+f+c;if(m>0){var m=Math.sqrt(h+1);e[0]=.5*(s-l)/m,e[1]=.5*(i-a)/m,e[2]=.5*(t-f)/m,e[3]=.5*m}else{var d=Math.max(n,f,c);m=Math.sqrt(2*d-h+1),n>=d?(e[0]=.5*m,e[1]=.5*(r+t)/m,e[2]=.5*(i+a)/m,e[3]=.5*(s-l)/m):f>=d?(e[0]=.5*(t+r)/m,e[1]=.5*m,e[2]=.5*(l+s)/m,e[3]=.5*(i-a)/m):(e[0]=.5*(a+i)/m,e[1]=.5*(s+l)/m,e[2]=.5*m,e[3]=.5*(t-r)/m)}return e}},{}],263:[function(v,u,y){"use strict";u.exports=function(h){var m=(h=h||{}).center||[0,0,0],d=h.rotation||[0,0,0,1],o=h.radius||1;m=[].slice.call(m,0,3),i(d=[].slice.call(d,0,4),d);var b=new l(d,m,Math.log(o));return b.setDistanceLimits(h.zoomMin,h.zoomMax),("eye"in h||"up"in h)&&b.lookAt(0,h.eye,h.center,h.up),b};var e=v("filtered-vector"),n=v("gl-mat4/lookAt"),t=v("gl-mat4/fromQuat"),a=v("gl-mat4/invert"),r=v("./lib/quatFromFrame");function f(h,m,d){return Math.sqrt(Math.pow(h,2)+Math.pow(m,2)+Math.pow(d,2))}function s(h,m,d,o){return Math.sqrt(Math.pow(h,2)+Math.pow(m,2)+Math.pow(d,2)+Math.pow(o,2))}function i(h,m){var d=m[0],o=m[1],b=m[2],g=m[3],w=s(d,o,b,g);w>1e-6?(h[0]=d/w,h[1]=o/w,h[2]=b/w,h[3]=g/w):(h[0]=h[1]=h[2]=0,h[3]=1)}function l(h,m,d){this.radius=e([d]),this.center=e(m),this.rotation=e(h),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var c=l.prototype;c.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},c.recalcMatrix=function(h){this.radius.curve(h),this.center.curve(h),this.rotation.curve(h);var m=this.computedRotation;i(m,m);var d=this.computedMatrix;t(d,m);var o=this.computedCenter,b=this.computedEye,g=this.computedUp,w=Math.exp(this.computedRadius[0]);b[0]=o[0]+w*d[2],b[1]=o[1]+w*d[6],b[2]=o[2]+w*d[10],g[0]=d[1],g[1]=d[5],g[2]=d[9];for(var _=0;_<3;++_){for(var A=0,T=0;T<3;++T)A+=d[_+4*T]*b[T];d[12+_]=-A}},c.getMatrix=function(h,m){this.recalcMatrix(h);var d=this.computedMatrix;if(m){for(var o=0;o<16;++o)m[o]=d[o];return m}return d},c.idle=function(h){this.center.idle(h),this.radius.idle(h),this.rotation.idle(h)},c.flush=function(h){this.center.flush(h),this.radius.flush(h),this.rotation.flush(h)},c.pan=function(h,m,d,o){m=m||0,d=d||0,o=o||0,this.recalcMatrix(h);var b=this.computedMatrix,g=b[1],w=b[5],_=b[9],A=f(g,w,_),T=b[0],E=b[4],k=b[8],O=T*(g/=A)+E*(w/=A)+k*(_/=A),D=f(T-=g*O,E-=w*O,k-=_*O),S=b[2],C=b[6],z=b[10],B=S*g+C*w+z*_,U=S*(T/=D)+C*(E/=D)+z*(k/=D),G=f(S-=B*g+U*T,C-=B*w+U*E,z-=B*_+U*k);S/=G,C/=G,z/=G,this.center.move(h,T*m+g*d,E*m+w*d,k*m+_*d);var W=Math.exp(this.computedRadius[0]);W=Math.max(1e-4,W+o),this.radius.set(h,Math.log(W))},c.rotate=function(h,m,d,o){this.recalcMatrix(h);var b=this.computedMatrix,k=b[2],O=b[6],D=b[10],S=(m=m||0)*b[0]+(d=d||0)*b[1],C=m*b[4]+d*b[5],z=m*b[8]+d*b[9],B=-(O*z-D*C),U=-(D*S-k*z),G=-(k*C-O*S),X=Math.sqrt(Math.max(0,1-Math.pow(B,2)-Math.pow(U,2)-Math.pow(G,2))),Z=s(B,U,G,X);Z>1e-6?(B/=Z,U/=Z,G/=Z,X/=Z):(B=U=G=0,X=1);var q=this.computedRotation,W=q[0],te=q[1],R=q[2],N=q[3],V=W*X+N*B+te*G-R*U,ee=te*X+N*U+R*B-W*G,j=R*X+N*G+W*U-te*B,J=N*X-W*B-te*U-R*G;if(o){B=k,U=O,G=D;var $=Math.sin(o)/f(B,U,G);B*=$,U*=$,G*=$,J=J*(X=Math.cos(m))-(V=V*X+J*B+ee*G-j*U)*B-(ee=ee*X+J*U+j*B-V*G)*U-(j=j*X+J*G+V*U-ee*B)*G}var re=s(V,ee,j,J);re>1e-6?(V/=re,ee/=re,j/=re,J/=re):(V=ee=j=0,J=1),this.rotation.set(h,V,ee,j,J)},c.lookAt=function(h,m,d,o){this.recalcMatrix(h);var b=this.computedMatrix;n(b,m=m||this.computedEye,d=d||this.computedCenter,o=o||this.computedUp);var g=this.computedRotation;r(g,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),i(g,g),this.rotation.set(h,g[0],g[1],g[2],g[3]);for(var w=0,_=0;_<3;++_)w+=Math.pow(d[_]-m[_],2);this.radius.set(h,.5*Math.log(Math.max(w,1e-6))),this.center.set(h,d[0],d[1],d[2])},c.translate=function(h,m,d,o){this.center.move(h,m||0,d||0,o||0)},c.setMatrix=function(h,m){var d=this.computedRotation;r(d,m[0],m[1],m[2],m[4],m[5],m[6],m[8],m[9],m[10]),i(d,d),this.rotation.set(h,d[0],d[1],d[2],d[3]);var o=this.computedMatrix;a(o,m);var b=o[15];if(Math.abs(b)>1e-6){var g=o[12]/b,w=o[13]/b,_=o[14]/b;this.recalcMatrix(h);var A=Math.exp(this.computedRadius[0]);this.center.set(h,g-o[2]*A,w-o[6]*A,_-o[10]*A),this.radius.idle(h)}else this.center.idle(h),this.radius.idle(h)},c.setDistance=function(h,m){m>0&&this.radius.set(h,Math.log(m))},c.setDistanceLimits=function(h,m){h=h>0?Math.log(h):-1/0,m=m>0?Math.log(m):1/0,m=Math.max(m,h),this.radius.bounds[0][0]=h,this.radius.bounds[1][0]=m},c.getDistanceLimits=function(h){var m=this.radius.bounds;return h?(h[0]=Math.exp(m[0][0]),h[1]=Math.exp(m[1][0]),h):[Math.exp(m[0][0]),Math.exp(m[1][0])]},c.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},c.fromJSON=function(h){var m=this.lastT(),d=h.center;d&&this.center.set(m,d[0],d[1],d[2]);var o=h.rotation;o&&this.rotation.set(m,o[0],o[1],o[2],o[3]);var b=h.distance;b&&b>0&&this.radius.set(m,Math.log(b)),this.setDistanceLimits(h.zoomMin,h.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(v,u,y){"use strict";var e=v("repeat-string");u.exports=function(n,t,a){return e(a=void 0!==a?a+"":" ",t)+n}},{"repeat-string":277}],265:[function(v,u,y){u.exports=function(e,n){n||(n=[0,""]),e=String(e);var t=parseFloat(e,10);return n[0]=t,n[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}},{}],266:[function(v,u,y){"use strict";u.exports=function(n,t){for(var a=0|t.length,r=n.length,f=[new Array(a),new Array(a)],s=0;s<a;++s)f[0][s]=[],f[1][s]=[];for(s=0;s<r;++s){var i=n[s];f[0][i[0]].push(i),f[1][i[1]].push(i)}var _,l=[];for(s=0;s<a;++s)f[0][s].length+f[1][s].length===0&&l.push([s]);function c(w,_){var A=f[_][w[_]];A.splice(A.indexOf(w),1)}function h(w,_,A){for(var T,E,k,O=0;O<2;++O)if(f[O][_].length>0){T=f[O][_][0],k=O;break}E=T[1^k];for(var D=0;D<2;++D)for(var S=f[D][_],C=0;C<S.length;++C){var z=S[C],B=z[1^D];e(t[w],t[_],t[E],t[B])>0&&(T=z,E=B,k=D)}return A||T&&c(T,k),E}function m(w,_){var A=f[_][w][0],T=[w];c(A,_);for(var E=A[1^_];;){for(;E!==w;)T.push(E),E=h(T[T.length-2],E,!1);if(f[0][w].length+f[1][w].length===0)break;var k=T[T.length-1],O=w,D=T[1],S=h(k,O,!0);if(e(t[k],t[O],t[D],t[S])<0)break;T.push(w),E=h(k,O)}return T}for(s=0;s<a;++s)for(var o=0;o<2;++o){for(var b=[];f[o][s].length>0;){var g=m(s,o);(_=g)[1]===_[_.length-1]?b.push.apply(b,g):(b.length>0&&l.push(b),b=g)}b.length>0&&l.push(b)}return l};var e=v("compare-angle")},{"compare-angle":54}],267:[function(v,u,y){"use strict";u.exports=function(n,t){for(var a=e(n,t.length),r=new Array(t.length),f=new Array(t.length),s=[],i=0;i<t.length;++i){var l=a[i].length;f[i]=l,r[i]=!0,l<=1&&s.push(i)}for(;s.length>0;){var c=s.pop();r[c]=!1;var h=a[c];for(i=0;i<h.length;++i){var m=h[i];0==--f[m]&&s.push(m)}}var d=new Array(t.length),o=[];for(i=0;i<t.length;++i)r[i]?(d[i]=c=o.length,o.push(t[i])):d[i]=-1;var b=[];for(i=0;i<n.length;++i){var g=n[i];r[g[0]]&&r[g[1]]&&b.push([d[g[0]],d[g[1]]])}return[b,o]};var e=v("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(v,u,y){"use strict";u.exports=function(l,c){for(var h=s(l,c),m=(c=h[1]).length,d=e(l=h[0],c.length),o=0;o<m;++o)if(d[o].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var b=n(l,c),g=(b=b.filter(function(ie){for(var ue=ie.length,le=[0],de=0;de<ue;++de){var ve=c[ie[de]],_e=c[ie[(de+1)%ue]],be=a(-ve[0],ve[1]),Te=a(-ve[0],_e[1]),he=a(_e[0],ve[1]),me=a(_e[0],_e[1]);le=r(le,r(r(be,Te),r(he,me)))}return le[le.length-1]>0})).length,w=new Array(g),_=new Array(g);for(o=0;o<g;++o){w[o]=o;var A=new Array(g),T=b[o].map(function(ie){return c[ie]}),E=t([T]),k=0;e:for(var O=0;O<g;++O)if(A[O]=0,o!==O){for(var D=(ne=b[O]).length,S=0;S<D;++S){var C=E(c[ne[S]]);if(0!==C){C<0&&(A[O]=1,k+=1);continue e}}A[O]=1,k+=1}_[o]=[k,o,A]}for(_.sort(function(ie,ue){return ue[0]-ie[0]}),o=0;o<g;++o){var z=(A=_[o])[1],B=A[2];for(O=0;O<g;++O)B[O]&&(w[O]=z)}var U=function(ie){for(var ue=new Array(ie),le=0;le<ie;++le)ue[le]=[];return ue}(g);for(o=0;o<g;++o)U[o].push(w[o]),U[w[o]].push(o);var G={},X=i(m,!1);for(o=0;o<g;++o)for(D=(ne=b[o]).length,O=0;O<D;++O){var Z=ne[O],q=ne[(O+1)%D],W=Math.min(Z,q)+":"+Math.max(Z,q);if(W in G){var te=G[W];U[te].push(o),U[o].push(te),X[Z]=X[q]=!0}else G[W]=o}function R(ie){for(var ue=ie.length,le=0;le<ue;++le)if(!X[ie[le]])return!1;return!0}var N=[],V=i(g,-1);for(o=0;o<g;++o)w[o]!==o||R(b[o])?V[o]=-1:(N.push(o),V[o]=0);for(h=[];N.length>0;){var ee=N.pop(),j=U[ee];f(j,function(ie,ue){return ie-ue});var J,$=j.length,re=V[ee];if(0===re){var ne=b[ee];J=[ne]}for(o=0;o<$;++o){var se=j[o];V[se]>=0||(V[se]=1^re,N.push(se),0===re&&(R(ne=b[se])||(ne.reverse(),J.push(ne))))}0===re&&h.push(J)}return h};var e=v("edges-to-adjacency-list"),n=v("planar-dual"),t=v("point-in-big-polygon"),a=v("two-product"),r=v("robust-sum"),f=v("uniq"),s=v("./lib/trim-leaves");function i(l,c){for(var h=new Array(l),m=0;m<l;++m)h[m]=c;return h}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(v,u,y){u.exports=function(i){for(var l=i.length,c=[],h=[],m=0;m<l;++m)for(var d=i[m],o=d.length,b=o-1,g=0;g<o;b=g++){var w=d[b],_=d[g];w[0]===_[0]?h.push([w,_]):c.push([w,_])}if(0===c.length)return 0===h.length?s:(A=f(h),function(k){return A(k[0],k[1])?0:1});var A,k,O,T=n(c),E=(k=T.slabs,O=T.coordinates,function(D){var S=a.le(O,D[0]);if(S<0)return 1;var C=k[S];if(!C){if(!(S>0&&O[S]===D[0]))return 1;C=k[S-1]}for(var z=1;C;){var B=C.key,U=e(D,B[0],B[1]);if(B[0][0]<B[1][0])if(U<0)C=C.left;else{if(!(U>0))return 0;z=-1,C=C.right}else if(U>0)C=C.left;else{if(!(U<0))return 0;z=1,C=C.right}}return z});return 0===h.length?E:function(k,O){return function(D){return k(D[0],D[1])?0:O(D)}}(f(h),E)};var e=v("robust-orientation")[3],n=v("slab-decomposition"),t=v("interval-tree-1d"),a=v("binary-search-bounds");function r(){return!0}function f(i){for(var l={},c=0;c<i.length;++c){var h=i[c],m=h[0][0],d=h[0][1],o=h[1][1],b=[Math.min(d,o),Math.max(d,o)];m in l?l[m].push(b):l[m]=[b]}var A,g={},w=Object.keys(l);for(c=0;c<w.length;++c)g[w[c]]=t(l[w[c]]);return A=g,function(T,E){var k=A[T];return!!k&&!!k.queryPoint(E,r)}}function s(i){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(v,u,y){"use strict";var e=new Float64Array(4),n=new Float64Array(4),t=new Float64Array(4);u.exports=function(a,r,f,s,i){e.length<s.length&&(e=new Float64Array(s.length),n=new Float64Array(s.length),t=new Float64Array(s.length));for(var l=0;l<s.length;++l)e[l]=a[l]-s[l],n[l]=r[l]-a[l],t[l]=f[l]-a[l];var c=0,h=0,m=0,d=0,o=0,b=0;for(l=0;l<s.length;++l){var g=n[l],w=t[l],_=e[l];c+=g*g,h+=g*w,m+=w*w,d+=_*g,o+=_*w,b+=_*_}var A,T,E,k,O,D=Math.abs(c*m-h*h),S=h*o-m*d,C=h*d-c*o;if(S+C<=D)if(S<0)C<0&&d<0?(C=0,-d>=c?(S=1,A=c+2*d+b):A=d*(S=-d/c)+b):(S=0,o>=0?(C=0,A=b):-o>=m?(C=1,A=m+2*o+b):A=o*(C=-o/m)+b);else if(C<0)C=0,d>=0?(S=0,A=b):-d>=c?(S=1,A=c+2*d+b):A=d*(S=-d/c)+b;else{var z=1/D;A=(S*=z)*(c*S+h*(C*=z)+2*d)+C*(h*S+m*C+2*o)+b}else S<0?(E=m+o)>(T=h+d)?(k=E-T)>=(O=c-2*h+m)?(S=1,C=0,A=c+2*d+b):A=(S=k/O)*(c*S+h*(C=1-S)+2*d)+C*(h*S+m*C+2*o)+b:(S=0,E<=0?(C=1,A=m+2*o+b):o>=0?(C=0,A=b):A=o*(C=-o/m)+b):C<0?(E=c+d)>(T=h+o)?(k=E-T)>=(O=c-2*h+m)?(C=1,S=0,A=m+2*o+b):A=(S=1-(C=k/O))*(c*S+h*C+2*d)+C*(h*S+m*C+2*o)+b:(C=0,E<=0?(S=1,A=c+2*d+b):d>=0?(S=0,A=b):A=d*(S=-d/c)+b):(k=m+o-h-d)<=0?(S=0,C=1,A=m+2*o+b):k>=(O=c-2*h+m)?(S=1,C=0,A=c+2*d+b):A=(S=k/O)*(c*S+h*(C=1-S)+2*d)+C*(h*S+m*C+2*o)+b;var B=1-S-C;for(l=0;l<s.length;++l)i[l]=B*a[l]+S*r[l]+C*f[l];return A<0?0:A}},{}],271:[function(v,u,y){u.exports=v("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(v,u,y){"use strict";var e=v("big-rat/add");u.exports=function(n,t){for(var a=n.length,r=new Array(a),f=0;f<a;++f)r[f]=e(n[f],t[f]);return r}},{"big-rat/add":15}],273:[function(v,u,y){"use strict";u.exports=function(n){for(var t=new Array(n.length),a=0;a<n.length;++a)t[a]=e(n[a]);return t};var e=v("big-rat")},{"big-rat":18}],274:[function(v,u,y){"use strict";var e=v("big-rat"),n=v("big-rat/mul");u.exports=function(t,a){for(var r=e(a),f=t.length,s=new Array(f),i=0;i<f;++i)s[i]=n(t[i],r);return s}},{"big-rat":18,"big-rat/mul":27}],275:[function(v,u,y){"use strict";var e=v("big-rat/sub");u.exports=function(n,t){for(var a=n.length,r=new Array(a),f=0;f<a;++f)r[f]=e(n[f],t[f]);return r}},{"big-rat/sub":29}],276:[function(v,u,y){"use strict";var e=v("compare-cell"),n=v("compare-oriented-cell"),t=v("cell-orientation");u.exports=function(a){a.sort(n);for(var r=a.length,f=0,s=0;s<r;++s){var i=a[s],l=t(i);if(0!==l){if(f>0){var c=a[f-1];if(0===e(i,c)&&t(c)!==l){f-=1;continue}}a[f++]=i}}return a.length=f,a}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(v,u,y){"use strict";var e,n="";u.exports=function(t,a){if("string"!=typeof t)throw new TypeError("expected a string");if(1===a)return t;if(2===a)return t+t;var r=t.length*a;if(e!==t||void 0===e)e=t,n="";else if(n.length>=r)return n.substr(0,r);for(;r>n.length&&a>1;)1&a&&(n+=t),a>>=1,t+=t;return n=(n+=t).substr(0,r)}},{}],278:[function(v,u,y){(function(e){(function(){u.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==p?p:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],279:[function(v,u,y){"use strict";u.exports=function(e){for(var n=e.length,t=e[e.length-1],a=n,r=n-2;r>=0;--r){var f=t,s=e[r];(l=s-((t=f+s)-f))&&(e[--a]=t,t=l)}var i=0;for(r=a;r<n;++r){var l;(l=(s=t)-((t=(f=e[r])+s)-f))&&(e[i++]=l)}return e[i++]=t,e.length=i,e}},{}],280:[function(v,u,y){"use strict";var e=v("two-product"),n=v("robust-sum"),t=v("robust-scale"),a=v("robust-compress");function r(c,h,m,d){return function(o){return d(c(m(o[0][0],o[1][1]),m(-o[0][1],o[1][0])))}}function f(c,h,m,d){return function(o){return d(c(h(c(m(o[1][1],o[2][2]),m(-o[1][2],o[2][1])),o[0][0]),c(h(c(m(o[1][0],o[2][2]),m(-o[1][2],o[2][0])),-o[0][1]),h(c(m(o[1][0],o[2][1]),m(-o[1][1],o[2][0])),o[0][2]))))}}function s(c){return(2===c?r:3===c?f:void 0)(n,t,e,a)}var i=[function(){return[0]},function(c){return[c[0][0]]}];function l(c,h,m,d,o,b){return function(g){switch(g.length){case 0:return c(g);case 1:return h(g);case 2:return m(g);case 3:return d(g)}var w=o[g.length];return w||(w=o[g.length]=b(g.length)),w(g)}}!function(){for(;i.length<4;)i.push(s(i.length));u.exports=l.apply(void 0,i.concat([i,s]));for(var c=0;c<i.length;++c)u.exports[c]=i[c]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(v,u,y){"use strict";var e=v("two-product"),n=v("robust-sum");u.exports=function(t,a){for(var r=e(t[0],a[0]),f=1;f<t.length;++f)r=n(r,e(t[f],a[f]));return r}},{"robust-sum":289,"two-product":306}],282:[function(v,u,y){"use strict";var e=v("two-product"),n=v("robust-sum"),t=v("robust-subtract"),a=v("robust-scale");function r(d){return(3===d?f:4===d?s:5===d?i:l)(n,t,e,a)}function f(d,o,b,g){return function(w,_,A){var T=b(w[0],w[0]),E=g(T,_[0]),k=g(T,A[0]),O=b(_[0],_[0]),D=g(O,w[0]),S=g(O,A[0]),C=b(A[0],A[0]),z=g(C,w[0]),B=g(C,_[0]),U=d(o(B,S),o(D,E)),G=o(z,k),X=o(U,G);return X[X.length-1]}}function s(d,o,b,g){return function(w,_,A,T){var E=d(b(w[0],w[0]),b(w[1],w[1])),k=g(E,_[0]),O=g(E,A[0]),D=g(E,T[0]),S=d(b(_[0],_[0]),b(_[1],_[1])),C=g(S,w[0]),z=g(S,A[0]),B=g(S,T[0]),U=d(b(A[0],A[0]),b(A[1],A[1])),G=g(U,w[0]),X=g(U,_[0]),Z=g(U,T[0]),q=d(b(T[0],T[0]),b(T[1],T[1])),W=g(q,w[0]),te=g(q,_[0]),R=g(q,A[0]),N=d(d(g(o(R,Z),_[1]),d(g(o(te,B),-A[1]),g(o(X,z),T[1]))),d(g(o(te,B),w[1]),d(g(o(W,D),-_[1]),g(o(C,k),T[1])))),V=d(d(g(o(R,Z),w[1]),d(g(o(W,D),-A[1]),g(o(G,O),T[1]))),d(g(o(X,z),w[1]),d(g(o(G,O),-_[1]),g(o(C,k),A[1])))),ee=o(N,V);return ee[ee.length-1]}}function i(d,o,b,g){return function(w,_,A,T,E){var k=d(b(w[0],w[0]),d(b(w[1],w[1]),b(w[2],w[2]))),O=g(k,_[0]),D=g(k,A[0]),S=g(k,T[0]),C=g(k,E[0]),z=d(b(_[0],_[0]),d(b(_[1],_[1]),b(_[2],_[2]))),B=g(z,w[0]),U=g(z,A[0]),G=g(z,T[0]),X=g(z,E[0]),Z=d(b(A[0],A[0]),d(b(A[1],A[1]),b(A[2],A[2]))),q=g(Z,w[0]),W=g(Z,_[0]),te=g(Z,T[0]),R=g(Z,E[0]),N=d(b(T[0],T[0]),d(b(T[1],T[1]),b(T[2],T[2]))),V=g(N,w[0]),ee=g(N,_[0]),j=g(N,A[0]),J=g(N,E[0]),$=d(b(E[0],E[0]),d(b(E[1],E[1]),b(E[2],E[2]))),re=g($,w[0]),ne=g($,_[0]),se=g($,A[0]),ie=g($,T[0]),ue=d(d(d(g(d(g(o(ie,J),A[1]),d(g(o(se,R),-T[1]),g(o(j,te),E[1]))),_[2]),d(g(d(g(o(ie,J),_[1]),d(g(o(ne,X),-T[1]),g(o(ee,G),E[1]))),-A[2]),g(d(g(o(se,R),_[1]),d(g(o(ne,X),-A[1]),g(o(W,U),E[1]))),T[2]))),d(g(d(g(o(j,te),_[1]),d(g(o(ee,G),-A[1]),g(o(W,U),T[1]))),-E[2]),d(g(d(g(o(ie,J),_[1]),d(g(o(ne,X),-T[1]),g(o(ee,G),E[1]))),w[2]),g(d(g(o(ie,J),w[1]),d(g(o(re,C),-T[1]),g(o(V,S),E[1]))),-_[2])))),d(d(g(d(g(o(ne,X),w[1]),d(g(o(re,C),-_[1]),g(o(B,O),E[1]))),T[2]),d(g(d(g(o(ee,G),w[1]),d(g(o(V,S),-_[1]),g(o(B,O),T[1]))),-E[2]),g(d(g(o(j,te),_[1]),d(g(o(ee,G),-A[1]),g(o(W,U),T[1]))),w[2]))),d(g(d(g(o(j,te),w[1]),d(g(o(V,S),-A[1]),g(o(q,D),T[1]))),-_[2]),d(g(d(g(o(ee,G),w[1]),d(g(o(V,S),-_[1]),g(o(B,O),T[1]))),A[2]),g(d(g(o(W,U),w[1]),d(g(o(q,D),-_[1]),g(o(B,O),A[1]))),-T[2]))))),le=d(d(d(g(d(g(o(ie,J),A[1]),d(g(o(se,R),-T[1]),g(o(j,te),E[1]))),w[2]),g(d(g(o(ie,J),w[1]),d(g(o(re,C),-T[1]),g(o(V,S),E[1]))),-A[2])),d(g(d(g(o(se,R),w[1]),d(g(o(re,C),-A[1]),g(o(q,D),E[1]))),T[2]),g(d(g(o(j,te),w[1]),d(g(o(V,S),-A[1]),g(o(q,D),T[1]))),-E[2]))),d(d(g(d(g(o(se,R),_[1]),d(g(o(ne,X),-A[1]),g(o(W,U),E[1]))),w[2]),g(d(g(o(se,R),w[1]),d(g(o(re,C),-A[1]),g(o(q,D),E[1]))),-_[2])),d(g(d(g(o(ne,X),w[1]),d(g(o(re,C),-_[1]),g(o(B,O),E[1]))),A[2]),g(d(g(o(W,U),w[1]),d(g(o(q,D),-_[1]),g(o(B,O),A[1]))),-E[2])))),de=o(ue,le);return de[de.length-1]}}function l(d,o,b,g){return function(w,_,A,T,E,k){var O=d(d(b(w[0],w[0]),b(w[1],w[1])),d(b(w[2],w[2]),b(w[3],w[3]))),D=g(O,_[0]),S=g(O,A[0]),C=g(O,T[0]),z=g(O,E[0]),B=g(O,k[0]),U=d(d(b(_[0],_[0]),b(_[1],_[1])),d(b(_[2],_[2]),b(_[3],_[3]))),G=g(U,w[0]),X=g(U,A[0]),Z=g(U,T[0]),q=g(U,E[0]),W=g(U,k[0]),te=d(d(b(A[0],A[0]),b(A[1],A[1])),d(b(A[2],A[2]),b(A[3],A[3]))),R=g(te,w[0]),N=g(te,_[0]),V=g(te,T[0]),ee=g(te,E[0]),j=g(te,k[0]),J=d(d(b(T[0],T[0]),b(T[1],T[1])),d(b(T[2],T[2]),b(T[3],T[3]))),$=g(J,w[0]),re=g(J,_[0]),ne=g(J,A[0]),se=g(J,E[0]),ie=g(J,k[0]),ue=d(d(b(E[0],E[0]),b(E[1],E[1])),d(b(E[2],E[2]),b(E[3],E[3]))),le=g(ue,w[0]),de=g(ue,_[0]),ve=g(ue,A[0]),_e=g(ue,T[0]),be=g(ue,k[0]),Te=d(d(b(k[0],k[0]),b(k[1],k[1])),d(b(k[2],k[2]),b(k[3],k[3]))),he=g(Te,w[0]),me=g(Te,_[0]),Ae=g(Te,A[0]),we=g(Te,T[0]),Se=g(Te,E[0]),Pe=d(d(d(g(d(d(g(d(g(o(Se,be),T[1]),d(g(o(we,ie),-E[1]),g(o(_e,se),k[1]))),A[2]),g(d(g(o(Se,be),A[1]),d(g(o(Ae,j),-E[1]),g(o(ve,ee),k[1]))),-T[2])),d(g(d(g(o(we,ie),A[1]),d(g(o(Ae,j),-T[1]),g(o(ne,V),k[1]))),E[2]),g(d(g(o(_e,se),A[1]),d(g(o(ve,ee),-T[1]),g(o(ne,V),E[1]))),-k[2]))),_[3]),d(g(d(d(g(d(g(o(Se,be),T[1]),d(g(o(we,ie),-E[1]),g(o(_e,se),k[1]))),_[2]),g(d(g(o(Se,be),_[1]),d(g(o(me,W),-E[1]),g(o(de,q),k[1]))),-T[2])),d(g(d(g(o(we,ie),_[1]),d(g(o(me,W),-T[1]),g(o(re,Z),k[1]))),E[2]),g(d(g(o(_e,se),_[1]),d(g(o(de,q),-T[1]),g(o(re,Z),E[1]))),-k[2]))),-A[3]),g(d(d(g(d(g(o(Se,be),A[1]),d(g(o(Ae,j),-E[1]),g(o(ve,ee),k[1]))),_[2]),g(d(g(o(Se,be),_[1]),d(g(o(me,W),-E[1]),g(o(de,q),k[1]))),-A[2])),d(g(d(g(o(Ae,j),_[1]),d(g(o(me,W),-A[1]),g(o(N,X),k[1]))),E[2]),g(d(g(o(ve,ee),_[1]),d(g(o(de,q),-A[1]),g(o(N,X),E[1]))),-k[2]))),T[3]))),d(d(g(d(d(g(d(g(o(we,ie),A[1]),d(g(o(Ae,j),-T[1]),g(o(ne,V),k[1]))),_[2]),g(d(g(o(we,ie),_[1]),d(g(o(me,W),-T[1]),g(o(re,Z),k[1]))),-A[2])),d(g(d(g(o(Ae,j),_[1]),d(g(o(me,W),-A[1]),g(o(N,X),k[1]))),T[2]),g(d(g(o(ne,V),_[1]),d(g(o(re,Z),-A[1]),g(o(N,X),T[1]))),-k[2]))),-E[3]),g(d(d(g(d(g(o(_e,se),A[1]),d(g(o(ve,ee),-T[1]),g(o(ne,V),E[1]))),_[2]),g(d(g(o(_e,se),_[1]),d(g(o(de,q),-T[1]),g(o(re,Z),E[1]))),-A[2])),d(g(d(g(o(ve,ee),_[1]),d(g(o(de,q),-A[1]),g(o(N,X),E[1]))),T[2]),g(d(g(o(ne,V),_[1]),d(g(o(re,Z),-A[1]),g(o(N,X),T[1]))),-E[2]))),k[3])),d(g(d(d(g(d(g(o(Se,be),T[1]),d(g(o(we,ie),-E[1]),g(o(_e,se),k[1]))),_[2]),g(d(g(o(Se,be),_[1]),d(g(o(me,W),-E[1]),g(o(de,q),k[1]))),-T[2])),d(g(d(g(o(we,ie),_[1]),d(g(o(me,W),-T[1]),g(o(re,Z),k[1]))),E[2]),g(d(g(o(_e,se),_[1]),d(g(o(de,q),-T[1]),g(o(re,Z),E[1]))),-k[2]))),w[3]),g(d(d(g(d(g(o(Se,be),T[1]),d(g(o(we,ie),-E[1]),g(o(_e,se),k[1]))),w[2]),g(d(g(o(Se,be),w[1]),d(g(o(he,B),-E[1]),g(o(le,z),k[1]))),-T[2])),d(g(d(g(o(we,ie),w[1]),d(g(o(he,B),-T[1]),g(o($,C),k[1]))),E[2]),g(d(g(o(_e,se),w[1]),d(g(o(le,z),-T[1]),g(o($,C),E[1]))),-k[2]))),-_[3])))),d(d(d(g(d(d(g(d(g(o(Se,be),_[1]),d(g(o(me,W),-E[1]),g(o(de,q),k[1]))),w[2]),g(d(g(o(Se,be),w[1]),d(g(o(he,B),-E[1]),g(o(le,z),k[1]))),-_[2])),d(g(d(g(o(me,W),w[1]),d(g(o(he,B),-_[1]),g(o(G,D),k[1]))),E[2]),g(d(g(o(de,q),w[1]),d(g(o(le,z),-_[1]),g(o(G,D),E[1]))),-k[2]))),T[3]),g(d(d(g(d(g(o(we,ie),_[1]),d(g(o(me,W),-T[1]),g(o(re,Z),k[1]))),w[2]),g(d(g(o(we,ie),w[1]),d(g(o(he,B),-T[1]),g(o($,C),k[1]))),-_[2])),d(g(d(g(o(me,W),w[1]),d(g(o(he,B),-_[1]),g(o(G,D),k[1]))),T[2]),g(d(g(o(re,Z),w[1]),d(g(o($,C),-_[1]),g(o(G,D),T[1]))),-k[2]))),-E[3])),d(g(d(d(g(d(g(o(_e,se),_[1]),d(g(o(de,q),-T[1]),g(o(re,Z),E[1]))),w[2]),g(d(g(o(_e,se),w[1]),d(g(o(le,z),-T[1]),g(o($,C),E[1]))),-_[2])),d(g(d(g(o(de,q),w[1]),d(g(o(le,z),-_[1]),g(o(G,D),E[1]))),T[2]),g(d(g(o(re,Z),w[1]),d(g(o($,C),-_[1]),g(o(G,D),T[1]))),-E[2]))),k[3]),g(d(d(g(d(g(o(we,ie),A[1]),d(g(o(Ae,j),-T[1]),g(o(ne,V),k[1]))),_[2]),g(d(g(o(we,ie),_[1]),d(g(o(me,W),-T[1]),g(o(re,Z),k[1]))),-A[2])),d(g(d(g(o(Ae,j),_[1]),d(g(o(me,W),-A[1]),g(o(N,X),k[1]))),T[2]),g(d(g(o(ne,V),_[1]),d(g(o(re,Z),-A[1]),g(o(N,X),T[1]))),-k[2]))),w[3]))),d(d(g(d(d(g(d(g(o(we,ie),A[1]),d(g(o(Ae,j),-T[1]),g(o(ne,V),k[1]))),w[2]),g(d(g(o(we,ie),w[1]),d(g(o(he,B),-T[1]),g(o($,C),k[1]))),-A[2])),d(g(d(g(o(Ae,j),w[1]),d(g(o(he,B),-A[1]),g(o(R,S),k[1]))),T[2]),g(d(g(o(ne,V),w[1]),d(g(o($,C),-A[1]),g(o(R,S),T[1]))),-k[2]))),-_[3]),g(d(d(g(d(g(o(we,ie),_[1]),d(g(o(me,W),-T[1]),g(o(re,Z),k[1]))),w[2]),g(d(g(o(we,ie),w[1]),d(g(o(he,B),-T[1]),g(o($,C),k[1]))),-_[2])),d(g(d(g(o(me,W),w[1]),d(g(o(he,B),-_[1]),g(o(G,D),k[1]))),T[2]),g(d(g(o(re,Z),w[1]),d(g(o($,C),-_[1]),g(o(G,D),T[1]))),-k[2]))),A[3])),d(g(d(d(g(d(g(o(Ae,j),_[1]),d(g(o(me,W),-A[1]),g(o(N,X),k[1]))),w[2]),g(d(g(o(Ae,j),w[1]),d(g(o(he,B),-A[1]),g(o(R,S),k[1]))),-_[2])),d(g(d(g(o(me,W),w[1]),d(g(o(he,B),-_[1]),g(o(G,D),k[1]))),A[2]),g(d(g(o(N,X),w[1]),d(g(o(R,S),-_[1]),g(o(G,D),A[1]))),-k[2]))),-T[3]),g(d(d(g(d(g(o(ne,V),_[1]),d(g(o(re,Z),-A[1]),g(o(N,X),T[1]))),w[2]),g(d(g(o(ne,V),w[1]),d(g(o($,C),-A[1]),g(o(R,S),T[1]))),-_[2])),d(g(d(g(o(re,Z),w[1]),d(g(o($,C),-_[1]),g(o(G,D),T[1]))),A[2]),g(d(g(o(N,X),w[1]),d(g(o(R,S),-_[1]),g(o(G,D),A[1]))),-T[2]))),k[3]))))),ze=d(d(d(g(d(d(g(d(g(o(Se,be),T[1]),d(g(o(we,ie),-E[1]),g(o(_e,se),k[1]))),A[2]),g(d(g(o(Se,be),A[1]),d(g(o(Ae,j),-E[1]),g(o(ve,ee),k[1]))),-T[2])),d(g(d(g(o(we,ie),A[1]),d(g(o(Ae,j),-T[1]),g(o(ne,V),k[1]))),E[2]),g(d(g(o(_e,se),A[1]),d(g(o(ve,ee),-T[1]),g(o(ne,V),E[1]))),-k[2]))),w[3]),d(g(d(d(g(d(g(o(Se,be),T[1]),d(g(o(we,ie),-E[1]),g(o(_e,se),k[1]))),w[2]),g(d(g(o(Se,be),w[1]),d(g(o(he,B),-E[1]),g(o(le,z),k[1]))),-T[2])),d(g(d(g(o(we,ie),w[1]),d(g(o(he,B),-T[1]),g(o($,C),k[1]))),E[2]),g(d(g(o(_e,se),w[1]),d(g(o(le,z),-T[1]),g(o($,C),E[1]))),-k[2]))),-A[3]),g(d(d(g(d(g(o(Se,be),A[1]),d(g(o(Ae,j),-E[1]),g(o(ve,ee),k[1]))),w[2]),g(d(g(o(Se,be),w[1]),d(g(o(he,B),-E[1]),g(o(le,z),k[1]))),-A[2])),d(g(d(g(o(Ae,j),w[1]),d(g(o(he,B),-A[1]),g(o(R,S),k[1]))),E[2]),g(d(g(o(ve,ee),w[1]),d(g(o(le,z),-A[1]),g(o(R,S),E[1]))),-k[2]))),T[3]))),d(d(g(d(d(g(d(g(o(we,ie),A[1]),d(g(o(Ae,j),-T[1]),g(o(ne,V),k[1]))),w[2]),g(d(g(o(we,ie),w[1]),d(g(o(he,B),-T[1]),g(o($,C),k[1]))),-A[2])),d(g(d(g(o(Ae,j),w[1]),d(g(o(he,B),-A[1]),g(o(R,S),k[1]))),T[2]),g(d(g(o(ne,V),w[1]),d(g(o($,C),-A[1]),g(o(R,S),T[1]))),-k[2]))),-E[3]),g(d(d(g(d(g(o(_e,se),A[1]),d(g(o(ve,ee),-T[1]),g(o(ne,V),E[1]))),w[2]),g(d(g(o(_e,se),w[1]),d(g(o(le,z),-T[1]),g(o($,C),E[1]))),-A[2])),d(g(d(g(o(ve,ee),w[1]),d(g(o(le,z),-A[1]),g(o(R,S),E[1]))),T[2]),g(d(g(o(ne,V),w[1]),d(g(o($,C),-A[1]),g(o(R,S),T[1]))),-E[2]))),k[3])),d(g(d(d(g(d(g(o(Se,be),A[1]),d(g(o(Ae,j),-E[1]),g(o(ve,ee),k[1]))),_[2]),g(d(g(o(Se,be),_[1]),d(g(o(me,W),-E[1]),g(o(de,q),k[1]))),-A[2])),d(g(d(g(o(Ae,j),_[1]),d(g(o(me,W),-A[1]),g(o(N,X),k[1]))),E[2]),g(d(g(o(ve,ee),_[1]),d(g(o(de,q),-A[1]),g(o(N,X),E[1]))),-k[2]))),w[3]),g(d(d(g(d(g(o(Se,be),A[1]),d(g(o(Ae,j),-E[1]),g(o(ve,ee),k[1]))),w[2]),g(d(g(o(Se,be),w[1]),d(g(o(he,B),-E[1]),g(o(le,z),k[1]))),-A[2])),d(g(d(g(o(Ae,j),w[1]),d(g(o(he,B),-A[1]),g(o(R,S),k[1]))),E[2]),g(d(g(o(ve,ee),w[1]),d(g(o(le,z),-A[1]),g(o(R,S),E[1]))),-k[2]))),-_[3])))),d(d(d(g(d(d(g(d(g(o(Se,be),_[1]),d(g(o(me,W),-E[1]),g(o(de,q),k[1]))),w[2]),g(d(g(o(Se,be),w[1]),d(g(o(he,B),-E[1]),g(o(le,z),k[1]))),-_[2])),d(g(d(g(o(me,W),w[1]),d(g(o(he,B),-_[1]),g(o(G,D),k[1]))),E[2]),g(d(g(o(de,q),w[1]),d(g(o(le,z),-_[1]),g(o(G,D),E[1]))),-k[2]))),A[3]),g(d(d(g(d(g(o(Ae,j),_[1]),d(g(o(me,W),-A[1]),g(o(N,X),k[1]))),w[2]),g(d(g(o(Ae,j),w[1]),d(g(o(he,B),-A[1]),g(o(R,S),k[1]))),-_[2])),d(g(d(g(o(me,W),w[1]),d(g(o(he,B),-_[1]),g(o(G,D),k[1]))),A[2]),g(d(g(o(N,X),w[1]),d(g(o(R,S),-_[1]),g(o(G,D),A[1]))),-k[2]))),-E[3])),d(g(d(d(g(d(g(o(ve,ee),_[1]),d(g(o(de,q),-A[1]),g(o(N,X),E[1]))),w[2]),g(d(g(o(ve,ee),w[1]),d(g(o(le,z),-A[1]),g(o(R,S),E[1]))),-_[2])),d(g(d(g(o(de,q),w[1]),d(g(o(le,z),-_[1]),g(o(G,D),E[1]))),A[2]),g(d(g(o(N,X),w[1]),d(g(o(R,S),-_[1]),g(o(G,D),A[1]))),-E[2]))),k[3]),g(d(d(g(d(g(o(_e,se),A[1]),d(g(o(ve,ee),-T[1]),g(o(ne,V),E[1]))),_[2]),g(d(g(o(_e,se),_[1]),d(g(o(de,q),-T[1]),g(o(re,Z),E[1]))),-A[2])),d(g(d(g(o(ve,ee),_[1]),d(g(o(de,q),-A[1]),g(o(N,X),E[1]))),T[2]),g(d(g(o(ne,V),_[1]),d(g(o(re,Z),-A[1]),g(o(N,X),T[1]))),-E[2]))),w[3]))),d(d(g(d(d(g(d(g(o(_e,se),A[1]),d(g(o(ve,ee),-T[1]),g(o(ne,V),E[1]))),w[2]),g(d(g(o(_e,se),w[1]),d(g(o(le,z),-T[1]),g(o($,C),E[1]))),-A[2])),d(g(d(g(o(ve,ee),w[1]),d(g(o(le,z),-A[1]),g(o(R,S),E[1]))),T[2]),g(d(g(o(ne,V),w[1]),d(g(o($,C),-A[1]),g(o(R,S),T[1]))),-E[2]))),-_[3]),g(d(d(g(d(g(o(_e,se),_[1]),d(g(o(de,q),-T[1]),g(o(re,Z),E[1]))),w[2]),g(d(g(o(_e,se),w[1]),d(g(o(le,z),-T[1]),g(o($,C),E[1]))),-_[2])),d(g(d(g(o(de,q),w[1]),d(g(o(le,z),-_[1]),g(o(G,D),E[1]))),T[2]),g(d(g(o(re,Z),w[1]),d(g(o($,C),-_[1]),g(o(G,D),T[1]))),-E[2]))),A[3])),d(g(d(d(g(d(g(o(ve,ee),_[1]),d(g(o(de,q),-A[1]),g(o(N,X),E[1]))),w[2]),g(d(g(o(ve,ee),w[1]),d(g(o(le,z),-A[1]),g(o(R,S),E[1]))),-_[2])),d(g(d(g(o(de,q),w[1]),d(g(o(le,z),-_[1]),g(o(G,D),E[1]))),A[2]),g(d(g(o(N,X),w[1]),d(g(o(R,S),-_[1]),g(o(G,D),A[1]))),-E[2]))),-T[3]),g(d(d(g(d(g(o(ne,V),_[1]),d(g(o(re,Z),-A[1]),g(o(N,X),T[1]))),w[2]),g(d(g(o(ne,V),w[1]),d(g(o($,C),-A[1]),g(o(R,S),T[1]))),-_[2])),d(g(d(g(o(re,Z),w[1]),d(g(o($,C),-_[1]),g(o(G,D),T[1]))),A[2]),g(d(g(o(N,X),w[1]),d(g(o(R,S),-_[1]),g(o(G,D),A[1]))),-T[2]))),E[3]))))),He=o(Pe,ze);return He[He.length-1]}}var c=[function(){return 0},function(){return 0},function(){return 0}];function h(d){var o=c[d.length];return o||(o=c[d.length]=r(d.length)),o.apply(void 0,d)}function m(d,o,b,g,w,_,A,T){return function(E,k,O,D,S,C){switch(arguments.length){case 0:case 1:return 0;case 2:return g(E,k);case 3:return w(E,k,O);case 4:return _(E,k,O,D);case 5:return A(E,k,O,D,S);case 6:return T(E,k,O,D,S,C)}for(var z=new Array(arguments.length),B=0;B<arguments.length;++B)z[B]=arguments[B];return d(z)}}!function(){for(;c.length<=6;)c.push(r(c.length));u.exports=m.apply(void 0,[h].concat(c));for(var d=0;d<=6;++d)u.exports[d]=c[d]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(v,u,y){"use strict";var e=v("robust-determinant");function n(s){return(2===s?t:a)(s<3?e[s]:e)}function t(s){return function(i,l){return[s([[+l[0],+i[0][1]],[+l[1],+i[1][1]]]),s([[+i[0][0],+l[0]],[+i[1][0],+l[1]]]),s(i)]}}function a(s){return function(i,l){return[s([[+l[0],+i[0][1],+i[0][2]],[+l[1],+i[1][1],+i[1][2]],[+l[2],+i[2][1],+i[2][2]]]),s([[+i[0][0],+l[0],+i[0][2]],[+i[1][0],+l[1],+i[1][2]],[+i[2][0],+l[2],+i[2][2]]]),s([[+i[0][0],+i[0][1],+l[0]],[+i[1][0],+i[1][1],+l[1]],[+i[2][0],+i[2][1],+l[2]]]),s(i)]}}var r=[function(){return[[0]]},function(s,i){return[[i[0]],[s[0][0]]]}];function f(s,i,l,c,h,m){return function(d,o){switch(d.length){case 0:return s(d,o);case 1:return i(d,o);case 2:return l(d,o);case 3:return c(d,o)}var b=h[d.length];return b||(b=h[d.length]=m(d.length)),b(d,o)}}!function(){for(;r.length<=3;)r.push(n(r.length));u.exports=f.apply(void 0,r.concat([r,n]));for(var s=0;s<3;++s)u.exports[s]=r[s]}()},{"robust-determinant":280}],284:[function(v,u,y){"use strict";var e=v("two-product"),n=v("robust-sum"),t=v("robust-scale"),a=v("robust-subtract");function r(o,b,g,w){return function(_,A,T){var E=o(o(b(A[1],T[0]),b(-T[1],A[0])),o(b(_[1],A[0]),b(-A[1],_[0]))),k=o(b(_[1],T[0]),b(-T[1],_[0])),O=w(E,k);return O[O.length-1]}}function f(o,b,g,w){return function(_,A,T,E){var k=o(o(g(o(b(T[1],E[0]),b(-E[1],T[0])),A[2]),o(g(o(b(A[1],E[0]),b(-E[1],A[0])),-T[2]),g(o(b(A[1],T[0]),b(-T[1],A[0])),E[2]))),o(g(o(b(A[1],E[0]),b(-E[1],A[0])),_[2]),o(g(o(b(_[1],E[0]),b(-E[1],_[0])),-A[2]),g(o(b(_[1],A[0]),b(-A[1],_[0])),E[2])))),O=o(o(g(o(b(T[1],E[0]),b(-E[1],T[0])),_[2]),o(g(o(b(_[1],E[0]),b(-E[1],_[0])),-T[2]),g(o(b(_[1],T[0]),b(-T[1],_[0])),E[2]))),o(g(o(b(A[1],T[0]),b(-T[1],A[0])),_[2]),o(g(o(b(_[1],T[0]),b(-T[1],_[0])),-A[2]),g(o(b(_[1],A[0]),b(-A[1],_[0])),T[2])))),D=w(k,O);return D[D.length-1]}}function s(o,b,g,w){return function(_,A,T,E,k){var O=o(o(o(g(o(g(o(b(E[1],k[0]),b(-k[1],E[0])),T[2]),o(g(o(b(T[1],k[0]),b(-k[1],T[0])),-E[2]),g(o(b(T[1],E[0]),b(-E[1],T[0])),k[2]))),A[3]),o(g(o(g(o(b(E[1],k[0]),b(-k[1],E[0])),A[2]),o(g(o(b(A[1],k[0]),b(-k[1],A[0])),-E[2]),g(o(b(A[1],E[0]),b(-E[1],A[0])),k[2]))),-T[3]),g(o(g(o(b(T[1],k[0]),b(-k[1],T[0])),A[2]),o(g(o(b(A[1],k[0]),b(-k[1],A[0])),-T[2]),g(o(b(A[1],T[0]),b(-T[1],A[0])),k[2]))),E[3]))),o(g(o(g(o(b(T[1],E[0]),b(-E[1],T[0])),A[2]),o(g(o(b(A[1],E[0]),b(-E[1],A[0])),-T[2]),g(o(b(A[1],T[0]),b(-T[1],A[0])),E[2]))),-k[3]),o(g(o(g(o(b(E[1],k[0]),b(-k[1],E[0])),A[2]),o(g(o(b(A[1],k[0]),b(-k[1],A[0])),-E[2]),g(o(b(A[1],E[0]),b(-E[1],A[0])),k[2]))),_[3]),g(o(g(o(b(E[1],k[0]),b(-k[1],E[0])),_[2]),o(g(o(b(_[1],k[0]),b(-k[1],_[0])),-E[2]),g(o(b(_[1],E[0]),b(-E[1],_[0])),k[2]))),-A[3])))),o(o(g(o(g(o(b(A[1],k[0]),b(-k[1],A[0])),_[2]),o(g(o(b(_[1],k[0]),b(-k[1],_[0])),-A[2]),g(o(b(_[1],A[0]),b(-A[1],_[0])),k[2]))),E[3]),o(g(o(g(o(b(A[1],E[0]),b(-E[1],A[0])),_[2]),o(g(o(b(_[1],E[0]),b(-E[1],_[0])),-A[2]),g(o(b(_[1],A[0]),b(-A[1],_[0])),E[2]))),-k[3]),g(o(g(o(b(T[1],E[0]),b(-E[1],T[0])),A[2]),o(g(o(b(A[1],E[0]),b(-E[1],A[0])),-T[2]),g(o(b(A[1],T[0]),b(-T[1],A[0])),E[2]))),_[3]))),o(g(o(g(o(b(T[1],E[0]),b(-E[1],T[0])),_[2]),o(g(o(b(_[1],E[0]),b(-E[1],_[0])),-T[2]),g(o(b(_[1],T[0]),b(-T[1],_[0])),E[2]))),-A[3]),o(g(o(g(o(b(A[1],E[0]),b(-E[1],A[0])),_[2]),o(g(o(b(_[1],E[0]),b(-E[1],_[0])),-A[2]),g(o(b(_[1],A[0]),b(-A[1],_[0])),E[2]))),T[3]),g(o(g(o(b(A[1],T[0]),b(-T[1],A[0])),_[2]),o(g(o(b(_[1],T[0]),b(-T[1],_[0])),-A[2]),g(o(b(_[1],A[0]),b(-A[1],_[0])),T[2]))),-E[3]))))),D=o(o(o(g(o(g(o(b(E[1],k[0]),b(-k[1],E[0])),T[2]),o(g(o(b(T[1],k[0]),b(-k[1],T[0])),-E[2]),g(o(b(T[1],E[0]),b(-E[1],T[0])),k[2]))),_[3]),g(o(g(o(b(E[1],k[0]),b(-k[1],E[0])),_[2]),o(g(o(b(_[1],k[0]),b(-k[1],_[0])),-E[2]),g(o(b(_[1],E[0]),b(-E[1],_[0])),k[2]))),-T[3])),o(g(o(g(o(b(T[1],k[0]),b(-k[1],T[0])),_[2]),o(g(o(b(_[1],k[0]),b(-k[1],_[0])),-T[2]),g(o(b(_[1],T[0]),b(-T[1],_[0])),k[2]))),E[3]),g(o(g(o(b(T[1],E[0]),b(-E[1],T[0])),_[2]),o(g(o(b(_[1],E[0]),b(-E[1],_[0])),-T[2]),g(o(b(_[1],T[0]),b(-T[1],_[0])),E[2]))),-k[3]))),o(o(g(o(g(o(b(T[1],k[0]),b(-k[1],T[0])),A[2]),o(g(o(b(A[1],k[0]),b(-k[1],A[0])),-T[2]),g(o(b(A[1],T[0]),b(-T[1],A[0])),k[2]))),_[3]),g(o(g(o(b(T[1],k[0]),b(-k[1],T[0])),_[2]),o(g(o(b(_[1],k[0]),b(-k[1],_[0])),-T[2]),g(o(b(_[1],T[0]),b(-T[1],_[0])),k[2]))),-A[3])),o(g(o(g(o(b(A[1],k[0]),b(-k[1],A[0])),_[2]),o(g(o(b(_[1],k[0]),b(-k[1],_[0])),-A[2]),g(o(b(_[1],A[0]),b(-A[1],_[0])),k[2]))),T[3]),g(o(g(o(b(A[1],T[0]),b(-T[1],A[0])),_[2]),o(g(o(b(_[1],T[0]),b(-T[1],_[0])),-A[2]),g(o(b(_[1],A[0]),b(-A[1],_[0])),T[2]))),-k[3])))),S=w(O,D);return S[S.length-1]}}function i(o){return(3===o?r:4===o?f:s)(n,e,t,a)}var l=i(3),c=i(4),h=[function(){return 0},function(){return 0},function(o,b){return b[0]-o[0]},function(o,b,g){var w,_=(o[1]-g[1])*(b[0]-g[0]),A=(o[0]-g[0])*(b[1]-g[1]),T=_-A;if(_>0){if(A<=0)return T;w=_+A}else{if(!(_<0)||A>=0)return T;w=-(_+A)}var E=33306690738754716e-32*w;return T>=E||T<=-E?T:l(o,b,g)},function(o,b,g,w){var _=o[0]-w[0],A=b[0]-w[0],T=g[0]-w[0],E=o[1]-w[1],k=b[1]-w[1],O=g[1]-w[1],D=o[2]-w[2],S=b[2]-w[2],C=g[2]-w[2],z=A*O,B=T*k,U=T*E,G=_*O,X=_*k,Z=A*E,q=D*(z-B)+S*(U-G)+C*(X-Z),W=7771561172376103e-31*((Math.abs(z)+Math.abs(B))*Math.abs(D)+(Math.abs(U)+Math.abs(G))*Math.abs(S)+(Math.abs(X)+Math.abs(Z))*Math.abs(C));return q>W||-q>W?q:c(o,b,g,w)}];function m(o){var b=h[o.length];return b||(b=h[o.length]=i(o.length)),b.apply(void 0,o)}function d(o,b,g,w,_,A,T){return function(E,k,O,D,S){switch(arguments.length){case 0:case 1:return 0;case 2:return w(E,k);case 3:return _(E,k,O);case 4:return A(E,k,O,D);case 5:return T(E,k,O,D,S)}for(var C=new Array(arguments.length),z=0;z<arguments.length;++z)C[z]=arguments[z];return o(C)}}!function(){for(;h.length<=5;)h.push(i(h.length));u.exports=d.apply(void 0,[m].concat(h));for(var o=0;o<=5;++o)u.exports[o]=h[o]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(v,u,y){"use strict";var e=v("robust-sum"),n=v("robust-scale");u.exports=function(t,a){if(1===t.length)return n(a,t[0]);if(1===a.length)return n(t,a[0]);if(0===t.length||0===a.length)return[0];var r=[0];if(t.length<a.length)for(var f=0;f<t.length;++f)r=e(r,n(a,t[f]));else for(f=0;f<a.length;++f)r=e(r,n(t,a[f]));return r}},{"robust-scale":286,"robust-sum":289}],286:[function(v,u,y){"use strict";var e=v("two-product"),n=v("two-sum");u.exports=function(t,a){var r=t.length;if(1===r){var f=e(t[0],a);return f[0]?f:[f[1]]}var s=new Array(2*r),i=[.1,.1],l=[.1,.1],c=0;e(t[0],a,i),i[0]&&(s[c++]=i[0]);for(var h=1;h<r;++h){e(t[h],a,l),n(i[1],l[0],i),i[0]&&(s[c++]=i[0]);var d=l[1],o=i[1],b=d+o,g=o-(b-d);i[1]=b,g&&(s[c++]=g)}return i[1]&&(s[c++]=i[1]),0===c&&(s[c++]=0),s.length=c,s}},{"two-product":306,"two-sum":307}],287:[function(v,u,y){"use strict";u.exports=function(n,t,a,r){var f=e(n,a,r),s=e(t,a,r);if(f>0&&s>0||f<0&&s<0)return!1;var i=e(a,n,t),l=e(r,n,t);return!(i>0&&l>0||i<0&&l<0)&&(0!==f||0!==s||0!==i||0!==l||function(c,h,m,d){for(var o=0;o<2;++o){var b=c[o],g=h[o],w=Math.min(b,g),_=Math.max(b,g),A=m[o],T=d[o],E=Math.min(A,T);if(Math.max(A,T)<w||_<E)return!1}return!0}(n,t,a,r))};var e=v("robust-orientation")[3]},{"robust-orientation":284}],288:[function(v,u,y){"use strict";u.exports=function(e,n){var O,D,S,C,z,t=0|e.length,a=0|n.length;if(1===t&&1===a)return(z=(O=e[0])-((S=O+(D=-n[0]))-(C=S-O))+(D-C))?[z,S]:[S];var r,f,s=new Array(t+a),i=0,l=0,c=0,h=Math.abs,m=e[l],d=h(m),o=-n[c],b=h(o);d<b?(f=m,(l+=1)<t&&(d=h(m=e[l]))):(f=o,(c+=1)<a&&(b=h(o=-n[c]))),l<t&&d<b||c>=a?(r=m,(l+=1)<t&&(d=h(m=e[l]))):(r=o,(c+=1)<a&&(b=h(o=-n[c])));for(var g,w,_=r+f,A=_-r,T=f-A,E=T,k=_;l<t&&c<a;)d<b?(r=m,(l+=1)<t&&(d=h(m=e[l]))):(r=o,(c+=1)<a&&(b=h(o=-n[c]))),(T=(f=E)-(A=(_=r+f)-r))&&(s[i++]=T),E=k-((g=k+_)-(w=g-k))+(_-w),k=g;for(;l<t;)(T=(f=E)-(A=(_=(r=m)+f)-r))&&(s[i++]=T),E=k-((g=k+_)-(w=g-k))+(_-w),k=g,(l+=1)<t&&(m=e[l]);for(;c<a;)(T=(f=E)-(A=(_=(r=o)+f)-r))&&(s[i++]=T),E=k-((g=k+_)-(w=g-k))+(_-w),k=g,(c+=1)<a&&(o=-n[c]);return E&&(s[i++]=E),k&&(s[i++]=k),i||(s[i++]=0),s.length=i,s}},{}],289:[function(v,u,y){"use strict";u.exports=function(e,n){var O,D,S,C,z,t=0|e.length,a=0|n.length;if(1===t&&1===a)return(z=(O=e[0])-((S=O+(D=n[0]))-(C=S-O))+(D-C))?[z,S]:[S];var r,f,s=new Array(t+a),i=0,l=0,c=0,h=Math.abs,m=e[l],d=h(m),o=n[c],b=h(o);d<b?(f=m,(l+=1)<t&&(d=h(m=e[l]))):(f=o,(c+=1)<a&&(b=h(o=n[c]))),l<t&&d<b||c>=a?(r=m,(l+=1)<t&&(d=h(m=e[l]))):(r=o,(c+=1)<a&&(b=h(o=n[c])));for(var g,w,_=r+f,A=_-r,T=f-A,E=T,k=_;l<t&&c<a;)d<b?(r=m,(l+=1)<t&&(d=h(m=e[l]))):(r=o,(c+=1)<a&&(b=h(o=n[c]))),(T=(f=E)-(A=(_=r+f)-r))&&(s[i++]=T),E=k-((g=k+_)-(w=g-k))+(_-w),k=g;for(;l<t;)(T=(f=E)-(A=(_=(r=m)+f)-r))&&(s[i++]=T),E=k-((g=k+_)-(w=g-k))+(_-w),k=g,(l+=1)<t&&(m=e[l]);for(;c<a;)(T=(f=E)-(A=(_=(r=o)+f)-r))&&(s[i++]=T),E=k-((g=k+_)-(w=g-k))+(_-w),k=g,(c+=1)<a&&(o=n[c]);return E&&(s[i++]=E),k&&(s[i++]=k),i||(s[i++]=0),s.length=i,s}},{}],290:[function(v,u,y){"use strict";u.exports=function(t){return n(e(t))};var e=v("boundary-cells"),n=v("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(v,u,y){"use strict";u.exports=function(r,f,s,i){if(s=s||0,void 0===i&&(i=function(g){for(var w=g.length,_=0,A=0;A<w;++A)_=0|Math.max(_,g[A].length);return _-1}(r)),0===r.length||i<1)return{cells:[],vertexIds:[],vertexWeights:[]};var l=function(g,w){for(var _=g.length,A=n.mallocUint8(_),T=0;T<_;++T)A[T]=g[T]<w|0;return A}(f,+s),c=function(g,w){for(var _=g.length,T=n.mallocUint32(2*(w*(w+1)/2*_|0)),E=0,k=0;k<_;++k)for(var O=g[k],D=(w=O.length,0);D<w;++D)for(var S=0;S<D;++S){var C=O[S],z=O[D];T[E++]=0|Math.min(C,z),T[E++]=0|Math.max(C,z)}t(e(T,[E/2|0,2]));var B=2;for(k=2;k<E;k+=2)T[k-2]===T[k]&&T[k-1]===T[k+1]||(T[B++]=T[k],T[B++]=T[k+1]);return e(T,[B/2|0,2])}(r,i),h=function(g,w,_,A){for(var T=g.data,E=g.shape[0],k=n.mallocDouble(E),O=0,D=0;D<E;++D){var S=T[2*D],C=T[2*D+1];if(_[S]!==_[C]){var z=w[S],B=w[C];T[2*O]=S,T[2*O+1]=C,k[O++]=(B-A)/(B-z)}}return g.shape[0]=O,e(k,[O])}(c,f,l,+s),m=function(g,w){var _=n.mallocInt32(2*w),A=g.shape[0],T=g.data;_[0]=0;for(var E=0,k=0;k<A;++k){var O=T[2*k];if(O!==E){for(_[2*E+1]=k;++E<O;)_[2*E]=k,_[2*E+1]=k;_[2*E]=k}}for(_[2*E+1]=A;++E<w;)_[2*E]=_[2*E+1]=A;return _}(c,0|f.length),d=a(i)(r,c.data,m,l),o=function(g){for(var w=0|g.shape[0],_=g.data,A=new Array(w),T=0;T<w;++T)A[T]=[_[2*T],_[2*T+1]];return A}(c),b=[].slice.call(h.data,0,h.shape[0]);return n.free(l),n.free(c.data),n.free(h.data),n.free(m),{cells:d,vertexIds:o,vertexWeights:b}};var e=v("ndarray"),n=v("typedarray-pool"),t=v("ndarray-sort"),a=v("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(v,u,y){"use strict";u.exports=function(n){return e[n]()};var e=[function(){return function(n,t,a,r){for(var f=n.length,s=0;s<f;++s);return[]}},function(){function n(t,a,r,f){for(var s=0|Math.min(r,f),i=0|Math.max(r,f),l=t[2*s],c=t[2*s+1];l<c;){var h=l+c>>1,m=a[2*h+1];if(m===i)return h;i<m?c=h:l=h+1}return l}return function(t,a,r,f){for(var s=t.length,i=[],l=0;l<s;++l){var c=t[l];if(2===c.length){var h=(f[c[0]]<<0)+(f[c[1]]<<1);if(0===h||3===h)continue;switch(h){case 0:break;case 1:i.push([n(r,a,c[0],c[1])]);break;case 2:i.push([n(r,a,c[1],c[0])])}}}return i}},function(){function n(t,a,r,f){for(var s=0|Math.min(r,f),i=0|Math.max(r,f),l=t[2*s],c=t[2*s+1];l<c;){var h=l+c>>1,m=a[2*h+1];if(m===i)return h;i<m?c=h:l=h+1}return l}return function(t,a,r,f){for(var s=t.length,i=[],l=0;l<s;++l){var c=t[l],h=c.length;if(3===h){if(0==(m=(f[c[0]]<<0)+(f[c[1]]<<1)+(f[c[2]]<<2))||7===m)continue;switch(m){case 0:break;case 1:i.push([n(r,a,c[0],c[2]),n(r,a,c[0],c[1])]);break;case 2:i.push([n(r,a,c[1],c[0]),n(r,a,c[1],c[2])]);break;case 3:i.push([n(r,a,c[0],c[2]),n(r,a,c[1],c[2])]);break;case 4:i.push([n(r,a,c[2],c[1]),n(r,a,c[2],c[0])]);break;case 5:i.push([n(r,a,c[2],c[1]),n(r,a,c[0],c[1])]);break;case 6:i.push([n(r,a,c[1],c[0]),n(r,a,c[2],c[0])])}}else if(2===h){var m;if(0==(m=(f[c[0]]<<0)+(f[c[1]]<<1))||3===m)continue;switch(m){case 0:break;case 1:i.push([n(r,a,c[0],c[1])]);break;case 2:i.push([n(r,a,c[1],c[0])])}}}return i}},function(){function n(t,a,r,f){for(var s=0|Math.min(r,f),i=0|Math.max(r,f),l=t[2*s],c=t[2*s+1];l<c;){var h=l+c>>1,m=a[2*h+1];if(m===i)return h;i<m?c=h:l=h+1}return l}return function(t,a,r,f){for(var s=t.length,i=[],l=0;l<s;++l){var c=t[l],h=c.length;if(4===h){if(0==(m=(f[c[0]]<<0)+(f[c[1]]<<1)+(f[c[2]]<<2)+(f[c[3]]<<3))||15===m)continue;switch(m){case 0:break;case 1:i.push([n(r,a,c[0],c[1]),n(r,a,c[0],c[2]),n(r,a,c[0],c[3])]);break;case 2:i.push([n(r,a,c[1],c[2]),n(r,a,c[1],c[0]),n(r,a,c[1],c[3])]);break;case 3:i.push([n(r,a,c[1],c[2]),n(r,a,c[0],c[2]),n(r,a,c[0],c[3])],[n(r,a,c[1],c[3]),n(r,a,c[1],c[2]),n(r,a,c[0],c[3])]);break;case 4:i.push([n(r,a,c[2],c[0]),n(r,a,c[2],c[1]),n(r,a,c[2],c[3])]);break;case 5:i.push([n(r,a,c[0],c[1]),n(r,a,c[2],c[1]),n(r,a,c[0],c[3])],[n(r,a,c[2],c[1]),n(r,a,c[2],c[3]),n(r,a,c[0],c[3])]);break;case 6:i.push([n(r,a,c[2],c[0]),n(r,a,c[1],c[0]),n(r,a,c[1],c[3])],[n(r,a,c[2],c[3]),n(r,a,c[2],c[0]),n(r,a,c[1],c[3])]);break;case 7:i.push([n(r,a,c[0],c[3]),n(r,a,c[1],c[3]),n(r,a,c[2],c[3])]);break;case 8:i.push([n(r,a,c[3],c[1]),n(r,a,c[3],c[0]),n(r,a,c[3],c[2])]);break;case 9:i.push([n(r,a,c[3],c[1]),n(r,a,c[0],c[1]),n(r,a,c[0],c[2])],[n(r,a,c[3],c[2]),n(r,a,c[3],c[1]),n(r,a,c[0],c[2])]);break;case 10:i.push([n(r,a,c[1],c[0]),n(r,a,c[3],c[0]),n(r,a,c[1],c[2])],[n(r,a,c[3],c[0]),n(r,a,c[3],c[2]),n(r,a,c[1],c[2])]);break;case 11:i.push([n(r,a,c[1],c[2]),n(r,a,c[0],c[2]),n(r,a,c[3],c[2])]);break;case 12:i.push([n(r,a,c[3],c[0]),n(r,a,c[2],c[0]),n(r,a,c[2],c[1])],[n(r,a,c[3],c[1]),n(r,a,c[3],c[0]),n(r,a,c[2],c[1])]);break;case 13:i.push([n(r,a,c[0],c[1]),n(r,a,c[2],c[1]),n(r,a,c[3],c[1])]);break;case 14:i.push([n(r,a,c[2],c[0]),n(r,a,c[1],c[0]),n(r,a,c[3],c[0])])}}else if(3===h){if(0==(m=(f[c[0]]<<0)+(f[c[1]]<<1)+(f[c[2]]<<2))||7===m)continue;switch(m){case 0:break;case 1:i.push([n(r,a,c[0],c[2]),n(r,a,c[0],c[1])]);break;case 2:i.push([n(r,a,c[1],c[0]),n(r,a,c[1],c[2])]);break;case 3:i.push([n(r,a,c[0],c[2]),n(r,a,c[1],c[2])]);break;case 4:i.push([n(r,a,c[2],c[1]),n(r,a,c[2],c[0])]);break;case 5:i.push([n(r,a,c[2],c[1]),n(r,a,c[0],c[1])]);break;case 6:i.push([n(r,a,c[1],c[0]),n(r,a,c[2],c[0])])}}else if(2===h){var m;if(0==(m=(f[c[0]]<<0)+(f[c[1]]<<1))||3===m)continue;switch(m){case 0:break;case 1:i.push([n(r,a,c[0],c[1])]);break;case 2:i.push([n(r,a,c[1],c[0])])}}}return i}}]},{}],293:[function(v,u,y){"use strict";var e=v("bit-twiddle"),n=v("union-find");function t(c,h){var m=c.length,d=c.length-h.length,o=Math.min;if(d)return d;switch(m){case 0:return 0;case 1:return c[0]-h[0];case 2:return(w=c[0]+c[1]-h[0]-h[1])||o(c[0],c[1])-o(h[0],h[1]);case 3:var b=c[0]+c[1],g=h[0]+h[1];if(w=b+c[2]-(g+h[2]))return w;var w,_=o(c[0],c[1]),A=o(h[0],h[1]);return(w=o(_,c[2])-o(A,h[2]))||o(_+c[2],b)-o(A+h[2],g);default:var T=c.slice(0);T.sort();var E=h.slice(0);E.sort();for(var k=0;k<m;++k)if(d=T[k]-E[k])return d;return 0}}function a(c,h){return t(c[0],h[0])}function r(c,h){if(h){for(var m=c.length,d=new Array(m),o=0;o<m;++o)d[o]=[c[o],h[o]];for(d.sort(a),o=0;o<m;++o)c[o]=d[o][0],h[o]=d[o][1];return c}return c.sort(t),c}function f(c){if(0===c.length)return[];for(var h=1,m=c.length,d=1;d<m;++d){var o=c[d];if(t(o,c[d-1])){if(d===h){h++;continue}c[h++]=o}}return c.length=h,c}function s(c,h){for(var m=0,d=c.length-1,o=-1;m<=d;){var b=m+d>>1,g=t(c[b],h);g<=0?(0===g&&(o=b),m=b+1):g>0&&(d=b-1)}return o}function i(c,h){for(var m=new Array(c.length),d=0,o=m.length;d<o;++d)m[d]=[];for(var b=[],g=(d=0,h.length);d<g;++d)for(var w=h[d],_=w.length,A=1,T=1<<_;A<T;++A){b.length=e.popCount(A);for(var E=0,k=0;k<_;++k)A&1<<k&&(b[E++]=w[k]);var O=s(c,b);if(!(O<0))for(;m[O++].push(d),!(O>=c.length||0!==t(c[O],b)););}return m}function l(c,h){if(h<0)return[];for(var m=[],d=(1<<h+1)-1,o=0;o<c.length;++o)for(var b=c[o],g=d;g<1<<b.length;g=e.nextCombination(g)){for(var w=new Array(h+1),_=0,A=0;A<b.length;++A)g&1<<A&&(w[_++]=b[A]);m.push(w)}return r(m)}y.dimension=function(c){for(var h=0,m=Math.max,d=0,o=c.length;d<o;++d)h=m(h,c[d].length);return h-1},y.countVertices=function(c){for(var h=-1,m=Math.max,d=0,o=c.length;d<o;++d)for(var b=c[d],g=0,w=b.length;g<w;++g)h=m(h,b[g]);return h+1},y.cloneCells=function(c){for(var h=new Array(c.length),m=0,d=c.length;m<d;++m)h[m]=c[m].slice(0);return h},y.compareCells=t,y.normalize=r,y.unique=f,y.findCell=s,y.incidence=i,y.dual=function(c,h){if(!h)return i(f(l(c,0)),c);for(var m=new Array(h),d=0;d<h;++d)m[d]=[];d=0;for(var o=c.length;d<o;++d)for(var b=c[d],g=0,w=b.length;g<w;++g)m[b[g]].push(d);return m},y.explode=function(c){for(var h=[],m=0,d=c.length;m<d;++m)for(var o=c[m],b=0|o.length,g=1,w=1<<b;g<w;++g){for(var _=[],A=0;A<b;++A)g>>>A&1&&_.push(o[A]);h.push(_)}return r(h)},y.skeleton=l,y.boundary=function(c){for(var h=[],m=0,d=c.length;m<d;++m)for(var o=c[m],b=0,g=o.length;b<g;++b){for(var w=new Array(o.length-1),_=0,A=0;_<g;++_)_!==b&&(w[A++]=o[_]);h.push(w)}return r(h)},y.connectedComponents=function(c,h){return h?function(m,d){for(var o=new n(d),b=0;b<m.length;++b)for(var g=m[b],w=0;w<g.length;++w)for(var _=w+1;_<g.length;++_)o.link(g[w],g[_]);var A=[],T=o.ranks;for(b=0;b<T.length;++b)T[b]=-1;for(b=0;b<m.length;++b){var E=o.find(m[b][0]);T[E]<0?(T[E]=A.length,A.push([m[b].slice(0)])):A[T[E]].push(m[b].slice(0))}return A}(c,h):function(m){for(var d=f(r(l(m,0))),o=new n(d.length),b=0;b<m.length;++b)for(var g=m[b],w=0;w<g.length;++w)for(var _=s(d,[g[w]]),A=w+1;A<g.length;++A)o.link(_,s(d,[g[A]]));var T=[],E=o.ranks;for(b=0;b<E.length;++b)E[b]=-1;for(b=0;b<m.length;++b){var k=o.find(s(d,[m[b][0]]));E[k]<0?(E[k]=T.length,T.push([m[b].slice(0)])):T[E[k]].push(m[b].slice(0))}return T}(c)}},{"bit-twiddle":32,"union-find":309}],294:[function(v,u,y){arguments[4][32][0].apply(y,arguments)},{dup:32}],295:[function(v,u,y){arguments[4][293][0].apply(y,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(v,u,y){"use strict";function e(n){this.roots=new Array(n),this.ranks=new Array(n);for(var t=0;t<n;++t)this.roots[t]=t,this.ranks[t]=0}u.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},e.prototype.find=function(n){for(var t=this.roots;t[n]!==n;){var a=t[n];t[n]=t[a],n=a}return n},e.prototype.link=function(n,t){var a=this.find(n),r=this.find(t);if(a!==r){var f=this.ranks,s=this.roots,i=f[a],l=f[r];i<l?s[a]=r:l<i?s[r]=a:(s[r]=a,++f[a])}}},{}],297:[function(v,u,y){"use strict";u.exports=function(t,a,r){for(var f=a.length,s=t.length,i=new Array(f),l=new Array(f),c=new Array(f),h=new Array(f),m=0;m<f;++m)i[m]=l[m]=-1,c[m]=1/0,h[m]=!1;for(m=0;m<s;++m){var d=t[m];if(2!==d.length)throw new Error("Input must be a graph");var o=d[1],b=d[0];l[b]=-1!==l[b]?-2:o,i[o]=-1!==i[o]?-2:b}function g(Z){if(h[Z])return 1/0;var W,te,V=i[Z],ee=l[Z];return V<0||ee<0?1/0:(W=a[V],te=a[ee],Math.abs(e(a[Z],W,te))/Math.sqrt(Math.pow(W[0]-te[0],2)+Math.pow(W[1]-te[1],2)))}function w(Z,q){var W=S[Z],te=S[q];S[Z]=te,S[q]=W,C[W]=q,C[te]=Z}function _(Z){return c[S[Z]]}function A(Z){return 1&Z?Z-1>>1:(Z>>1)-1}function T(Z){for(var q=_(Z);;){var W=q,te=2*Z+1,R=2*(Z+1),N=Z;if(te<z){var V=_(te);V<W&&(N=te,W=V)}if(R<z&&_(R)<W&&(N=R),N===Z)return Z;w(Z,N),Z=N}}function E(Z){for(var q=_(Z);Z>0;){var W=A(Z);if(!(W>=0&&q<_(W)))return Z;w(Z,W),Z=W}}function k(){if(z>0){var Z=S[0];return w(0,z-1),z-=1,T(0),Z}return-1}function O(Z,q){var W=S[Z];return c[W]===q?Z:(c[W]=-1/0,E(Z),k(),c[W]=q,E((z+=1)-1))}function D(Z){if(!h[Z]){h[Z]=!0;var q=i[Z],W=l[Z];i[W]>=0&&(i[W]=q),l[q]>=0&&(l[q]=W),C[q]>=0&&O(C[q],g(q)),C[W]>=0&&O(C[W],g(W))}}var S=[],C=new Array(f);for(m=0;m<f;++m)(c[m]=g(m))<1/0?(C[m]=S.length,S.push(m)):C[m]=-1;var z=S.length;for(m=z>>1;m>=0;--m)T(m);for(;;){var B=k();if(B<0||c[B]>r)break;D(B)}var U=[];for(m=0;m<f;++m)h[m]||(C[m]=U.length,U.push(a[m].slice()));function G(Z,q){if(Z[q]<0)return q;var W=q,te=q;do{var R=Z[te];if(!h[te]||R<0||R===te||(R=Z[te=R],!h[te]||R<0||R===te))break;te=R,W=Z[W]}while(W!==te);for(var N=q;N!==te;N=Z[N])Z[N]=te;return te}var X=[];return t.forEach(function(Z){var q=G(i,Z[0]),W=G(l,Z[1]);if(q>=0&&W>=0&&q!==W){var te=C[q],R=C[W];te!==R&&X.push([te,R])}}),n.unique(n.normalize(X)),{positions:U,edges:X}};var e=v("robust-orientation"),n=v("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(v,u,y){"use strict";u.exports=function(t,a){var r,f,s,i;if(a[0][0]<a[1][0])r=a[0],f=a[1];else{if(!(a[0][0]>a[1][0]))return n(a,t);r=a[1],f=a[0]}if(t[0][0]<t[1][0])s=t[0],i=t[1];else{if(!(t[0][0]>t[1][0]))return-n(t,a);s=t[1],i=t[0]}var l=e(r,f,i),c=e(r,f,s);if(l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;if(l=e(i,s,f),c=e(i,s,r),l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;return f[0]-i[0]};var e=v("robust-orientation");function n(t,a){var r,f,s,i;if(a[0][0]<a[1][0])r=a[0],f=a[1];else{if(!(a[0][0]>a[1][0])){var l=Math.min(t[0][1],t[1][1]),c=Math.max(t[0][1],t[1][1]),h=Math.min(a[0][1],a[1][1]),m=Math.max(a[0][1],a[1][1]);return c<h?c-h:l>m?l-m:c-m}r=a[1],f=a[0]}t[0][1]<t[1][1]?(s=t[0],i=t[1]):(s=t[1],i=t[0]);var d=e(f,r,s);return d||(d=e(f,r,i))||i-f}},{"robust-orientation":284}],299:[function(v,u,y){"use strict";u.exports=function(c){for(var h=c.length,m=2*h,d=new Array(m),o=0;o<h;++o){var b=c[o],g=b[0][0]<b[1][0];d[2*o]=new l(b[0][0],b,g,o),d[2*o+1]=new l(b[1][0],b,!g,o)}d.sort(function(D,S){var C=D.x-S.x;return C||(C=D.create-S.create)||Math.min(D.segment[0][1],D.segment[1][1])-Math.min(S.segment[0][1],S.segment[1][1])});var w=n(a),_=[],A=[],T=[];for(o=0;o<m;){for(var E=d[o].x,k=[];o<m;){var O=d[o];if(O.x!==E)break;o+=1,O.segment[0][0]===O.x&&O.segment[1][0]===O.x?O.create&&(O.segment[0][1]<O.segment[1][1]?(k.push(new i(O.segment[0][1],O.index,!0,!0)),k.push(new i(O.segment[1][1],O.index,!1,!1))):(k.push(new i(O.segment[1][1],O.index,!0,!1)),k.push(new i(O.segment[0][1],O.index,!1,!0)))):w=O.create?w.insert(O.segment,O.index):w.remove(O.segment)}_.push(w.root),A.push(E),T.push(k)}return new r(_,A,T)};var e=v("binary-search-bounds"),n=v("functional-red-black-tree"),t=v("robust-orientation"),a=v("./lib/order-segments");function r(c,h,m){this.slabs=c,this.coordinates=h,this.horizontal=m}function f(c,h){return c.y-h}function s(c,h){for(var m=null;c;){var d,o,b=c.key;b[0][0]<b[1][0]?(d=b[0],o=b[1]):(d=b[1],o=b[0]);var g=t(d,o,h);if(g<0)c=c.left;else if(g>0)if(h[0]!==b[1][0])m=c,c=c.right;else{if(w=s(c.right,h))return w;c=c.left}else{if(h[0]!==b[1][0])return c;var w;if(w=s(c.right,h))return w;c=c.left}}return m}function i(c,h,m,d){this.y=c,this.index=h,this.start=m,this.closed=d}function l(c,h,m,d){this.x=c,this.segment=h,this.create=m,this.index=d}r.prototype.castUp=function(c){var h=e.le(this.coordinates,c[0]);if(h<0)return-1;var m=s(this.slabs[h],c),d=-1;if(m&&(d=m.value),this.coordinates[h]===c[0]){var o=null;if(m&&(o=m.key),h>0){var b=s(this.slabs[h-1],c);b&&(o?a(b.key,o)>0&&(o=b.key,d=b.value):(d=b.value,o=b.key))}var g=this.horizontal[h];if(g.length>0){var w=e.ge(g,c[1],f);if(w<g.length){var _=g[w];if(c[1]===_.y){if(_.closed)return _.index;for(;w<g.length-1&&g[w+1].y===c[1];)if((_=g[w+=1]).closed)return _.index;if(_.y===c[1]&&!_.start){if((w+=1)>=g.length)return d;_=g[w]}}if(_.start)if(o){var A=t(o[0],o[1],[c[0],_.y]);o[0][0]>o[1][0]&&(A=-A),A>0&&(d=_.index)}else d=_.index;else _.y!==c[1]&&(d=_.index)}}}return d}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(v,u,y){"use strict";var e=v("robust-dot-product"),n=v("robust-sum");function t(r,f){var s=n(e(r,f),[f[f.length-1]]);return s[s.length-1]}function a(r,f,s,i){var l=-f/(i-f);l<0?l=0:l>1&&(l=1);for(var c=1-l,h=r.length,m=new Array(h),d=0;d<h;++d)m[d]=l*r[d]+c*s[d];return m}u.exports=function(r,f){for(var s=[],i=[],l=t(r[r.length-1],f),c=r[r.length-1],h=r[0],m=0;m<r.length;++m,c=h){var d=t(h=r[m],f);if(l<0&&d>0||l>0&&d<0){var o=a(c,d,h,l);s.push(o),i.push(o.slice())}d<0?i.push(h.slice()):d>0?s.push(h.slice()):(s.push(h.slice()),i.push(h.slice())),l=d}return{positive:s,negative:i}},u.exports.positive=function(r,f){for(var s=[],i=t(r[r.length-1],f),l=r[r.length-1],c=r[0],h=0;h<r.length;++h,l=c){var m=t(c=r[h],f);(i<0&&m>0||i>0&&m<0)&&s.push(a(l,m,c,i)),m>=0&&s.push(c.slice()),i=m}return s},u.exports.negative=function(r,f){for(var s=[],i=t(r[r.length-1],f),l=r[r.length-1],c=r[0],h=0;h<r.length;++h,l=c){var m=t(c=r[h],f);(i<0&&m>0||i>0&&m<0)&&s.push(a(l,m,c,i)),m<=0&&s.push(c.slice()),i=m}return s}},{"robust-dot-product":281,"robust-sum":289}],301:[function(v,u,y){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(s){return a(f(s),arguments)}function t(s,i){return n.apply(null,[s].concat(i||[]))}function a(s,i){var l,c,h,m,d,o,b,g,w,_=1,A=s.length,T="";for(c=0;c<A;c++)if("string"==typeof s[c])T+=s[c];else if("object"==typeof s[c]){if((m=s[c]).keys)for(l=i[_],h=0;h<m.keys.length;h++){if(null==l)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',m.keys[h],m.keys[h-1]));l=l[m.keys[h]]}else l=m.param_no?i[m.param_no]:i[_++];if(e.not_type.test(m.type)&&e.not_primitive.test(m.type)&&l instanceof Function&&(l=l()),e.numeric_arg.test(m.type)&&"number"!=typeof l&&isNaN(l))throw new TypeError(n("[sprintf] expecting number but found %T",l));switch(e.number.test(m.type)&&(g=l>=0),m.type){case"b":l=parseInt(l,10).toString(2);break;case"c":l=String.fromCharCode(parseInt(l,10));break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,m.width?parseInt(m.width):0);break;case"e":l=m.precision?parseFloat(l).toExponential(m.precision):parseFloat(l).toExponential();break;case"f":l=m.precision?parseFloat(l).toFixed(m.precision):parseFloat(l);break;case"g":l=m.precision?String(Number(l.toPrecision(m.precision))):parseFloat(l);break;case"o":l=(parseInt(l,10)>>>0).toString(8);break;case"s":l=String(l),l=m.precision?l.substring(0,m.precision):l;break;case"t":l=String(!!l),l=m.precision?l.substring(0,m.precision):l;break;case"T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),l=m.precision?l.substring(0,m.precision):l;break;case"u":l=parseInt(l,10)>>>0;break;case"v":l=l.valueOf(),l=m.precision?l.substring(0,m.precision):l;break;case"x":l=(parseInt(l,10)>>>0).toString(16);break;case"X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase()}e.json.test(m.type)?T+=l:(!e.number.test(m.type)||g&&!m.sign?w="":(w=g?"+":"-",l=l.toString().replace(e.sign,"")),o=m.pad_char?"0"===m.pad_char?"0":m.pad_char.charAt(1):" ",b=m.width-(w+l).length,d=m.width&&b>0?o.repeat(b):"",T+=m.align?w+l+d:"0"===o?w+d+l:d+w+l)}return T}var r=Object.create(null);function f(s){if(r[s])return r[s];for(var i,l=s,c=[],h=0;l;){if(null!==(i=e.text.exec(l)))c.push(i[0]);else if(null!==(i=e.modulo.exec(l)))c.push("%");else{if(null===(i=e.placeholder.exec(l)))throw new SyntaxError("[sprintf] unexpected placeholder");if(i[2]){h|=1;var m=[],d=i[2],o=[];if(null===(o=e.key.exec(d)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(m.push(o[1]);""!==(d=d.substring(o[0].length));)if(null!==(o=e.key_access.exec(d)))m.push(o[1]);else{if(null===(o=e.index_access.exec(d)))throw new SyntaxError("[sprintf] failed to parse named argument key");m.push(o[1])}i[2]=m}else h|=2;if(3===h)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");c.push({placeholder:i[0],param_no:i[1],keys:i[2],sign:i[3],pad_char:i[4],align:i[5],width:i[6],precision:i[7],type:i[8]})}l=l.substring(i[0].length)}return r[s]=c}void 0!==y&&(y.sprintf=n,y.vsprintf=t),"undefined"!=typeof window&&(window.sprintf=n,window.vsprintf=t)}()},{}],302:[function(v,u,y){"use strict";u.exports=function(r,f){if(r.dimension<=0)return{positions:[],cells:[]};if(1===r.dimension)return function(l,c){for(var h=n(l,c),m=h.length,d=new Array(m),o=new Array(m),b=0;b<m;++b)d[b]=[h[b]],o[b]=[b];return{positions:d,cells:o}}(r,f);var s=r.order.join()+"-"+r.dtype,i=a[s];return f=+f||0,i||(i=a[s]=function(l,c){var m=t[l.length+"d"];if(m)return m(e,l,c)}(r.order,r.dtype)),i(r,f)};var e=v("ndarray-extract-contour"),n=v("zero-crossings"),t={"2d":function(r,f,s){var i=r({order:f,scalarArguments:3,getters:"generic"===s?[0]:void 0,phase:function(l,c,h,m){return l>m|0},vertex:function(l,c,h,m,d,o,b,g,w,_,A,T,E){var k=(b<<0)+(g<<1)+(w<<2)+(_<<3)|0;if(0!==k&&15!==k)switch(k){case 0:A.push([l-.5,c-.5]);break;case 1:A.push([l-.25-.25*(m+h-2*E)/(h-m),c-.25-.25*(d+h-2*E)/(h-d)]);break;case 2:A.push([l-.75-.25*(-m-h+2*E)/(m-h),c-.25-.25*(o+m-2*E)/(m-o)]);break;case 3:A.push([l-.5,c-.5-.5*(d+h+o+m-4*E)/(h-d+m-o)]);break;case 4:A.push([l-.25-.25*(o+d-2*E)/(d-o),c-.75-.25*(-d-h+2*E)/(d-h)]);break;case 5:A.push([l-.5-.5*(m+h+o+d-4*E)/(h-m+d-o),c-.5]);break;case 6:A.push([l-.5-.25*(-m-h+o+d)/(m-h+d-o),c-.5-.25*(-d-h+o+m)/(d-h+m-o)]);break;case 7:A.push([l-.75-.25*(o+d-2*E)/(d-o),c-.75-.25*(o+m-2*E)/(m-o)]);break;case 8:A.push([l-.75-.25*(-o-d+2*E)/(o-d),c-.75-.25*(-o-m+2*E)/(o-m)]);break;case 9:A.push([l-.5-.25*(m+h+-o-d)/(h-m+o-d),c-.5-.25*(d+h+-o-m)/(h-d+o-m)]);break;case 10:A.push([l-.5-.5*(-m-h-o-d+4*E)/(m-h+o-d),c-.5]);break;case 11:A.push([l-.25-.25*(-o-d+2*E)/(o-d),c-.75-.25*(d+h-2*E)/(h-d)]);break;case 12:A.push([l-.5,c-.5-.5*(-d-h-o-m+4*E)/(d-h+o-m)]);break;case 13:A.push([l-.75-.25*(m+h-2*E)/(h-m),c-.25-.25*(-o-m+2*E)/(o-m)]);break;case 14:A.push([l-.25-.25*(-m-h+2*E)/(m-h),c-.25-.25*(-d-h+2*E)/(d-h)]);break;case 15:A.push([l-.5,c-.5])}},cell:function(l,c,h,m,d,o,b,g,w){g.push(d?[l,c]:[c,l])}});return function(l,c){var h=[],m=[];return i(l,h,m,c),{positions:h,cells:m}}}},a={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(v,u,y){(function(e){(function(){"use strict";u.exports=function r(f,s,i){i=i||{};var l=a[f];l||(l=a[f]={" ":{data:new Float32Array(0),shape:.2}});var c=l[s];if(!c)if(s.length<=1||!/\d/.test(s))c=l[s]=function(E){for(var k=E.cells,O=E.positions,D=new Float32Array(6*k.length),S=0,C=0,z=0;z<k.length;++z)for(var B=k[z],U=0;U<3;++U){var G=O[B[U]];D[S++]=G[0],D[S++]=G[1]+1.4,C=Math.max(G[0],C)}return{data:D,shape:C}}(n(s,{triangles:!0,font:f,textAlign:i.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var h=s.split(/(\d|\s)/),m=new Array(h.length),d=0,o=0,b=0;b<h.length;++b)m[b]=r(f,h[b]),d+=m[b].data.length,o+=m[b].shape,b>0&&(o+=.02);var g=new Float32Array(d),w=0,_=-.5*o;for(b=0;b<m.length;++b){for(var A=m[b].data,T=0;T<A.length;T+=2)g[w++]=A[T]+_,g[w++]=A[T+1];_+=m[b].shape+.02}c=l[s]={data:g,shape:o}}return c};var n=v("vectorize-text"),t=window||e.global||{},a=t.__TEXT_CACHE||{};t.__TEXT_CACHE={}}).call(this)}).call(this,v("_process"))},{_process:5,"vectorize-text":311}],304:[function(v,u,y){"use strict";var e=v("parse-unit");function n(a,r){var f=e(getComputedStyle(a).getPropertyValue(r));return f[0]*t(f[1],a)}function t(a,r){switch(r=r||document.body,a=(a||"px").trim().toLowerCase(),r!==window&&r!==document||(r=document.body),a){case"%":return r.clientHeight/100;case"ch":case"ex":return function(f,s){var i=document.createElement("div");i.style["font-size"]="128"+f,s.appendChild(i);var l=n(i,"font-size")/128;return s.removeChild(i),l}(a,r);case"em":return n(r,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}u.exports=t},{"parse-unit":265}],305:[function(v,u,y){"use strict";u.exports=function(d){var o=(d=d||{}).center||[0,0,0],b=d.up||[0,1,0],g=d.right||l(b),w=d.radius||1,_=d.theta||0,A=d.phi||0;if(o=[].slice.call(o,0,3),b=[].slice.call(b,0,3),r(b,b),g=[].slice.call(g,0,3),r(g,g),"eye"in d){var T=d.eye,E=[T[0]-o[0],T[1]-o[1],T[2]-o[2]];a(g,E,b),s(g[0],g[1],g[2])<1e-6?g=l(b):r(g,g),w=s(E[0],E[1],E[2]);var k=f(b,E)/w,O=f(g,E)/w;A=Math.acos(k),_=Math.acos(O)}return w=Math.log(w),new c(d.zoomMin,d.zoomMax,o,b,g,w,_,A)};var e=v("filtered-vector"),n=v("gl-mat4/invert"),t=v("gl-mat4/rotate"),a=v("gl-vec3/cross"),r=v("gl-vec3/normalize"),f=v("gl-vec3/dot");function s(d,o,b){return Math.sqrt(Math.pow(d,2)+Math.pow(o,2)+Math.pow(b,2))}function i(d){return Math.min(1,Math.max(-1,d))}function l(d){var o=Math.abs(d[0]),b=Math.abs(d[1]),g=Math.abs(d[2]),w=[0,0,0];o>Math.max(b,g)?w[2]=1:b>Math.max(o,g)?w[0]=1:w[1]=1;for(var _=0,A=0,T=0;T<3;++T)_+=d[T]*d[T],A+=w[T]*d[T];for(T=0;T<3;++T)w[T]-=A/_*d[T];return r(w,w),w}function c(d,o,b,g,w,_,A,T){this.center=e(b),this.up=e(g),this.right=e(w),this.radius=e([_]),this.angle=e([A,T]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(d,o),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var E=0;E<16;++E)this.computedMatrix[E]=.5;this.recalcMatrix(0)}var h=c.prototype;h.setDistanceLimits=function(d,o){d=d>0?Math.log(d):-1/0,o=o>0?Math.log(o):1/0,o=Math.max(o,d),this.radius.bounds[0][0]=d,this.radius.bounds[1][0]=o},h.getDistanceLimits=function(d){var o=this.radius.bounds[0];return d?(d[0]=Math.exp(o[0][0]),d[1]=Math.exp(o[1][0]),d):[Math.exp(o[0][0]),Math.exp(o[1][0])]},h.recalcMatrix=function(d){this.center.curve(d),this.up.curve(d),this.right.curve(d),this.radius.curve(d),this.angle.curve(d);for(var o=this.computedUp,b=this.computedRight,g=0,w=0,_=0;_<3;++_)w+=o[_]*b[_],g+=o[_]*o[_];var A=Math.sqrt(g),T=0;for(_=0;_<3;++_)b[_]-=o[_]*w/g,T+=b[_]*b[_],o[_]/=A;var E=Math.sqrt(T);for(_=0;_<3;++_)b[_]/=E;var k=this.computedToward;a(k,o,b),r(k,k);var O=Math.exp(this.computedRadius[0]),D=this.computedAngle[0],S=this.computedAngle[1],C=Math.cos(D),z=Math.sin(D),B=Math.cos(S),U=Math.sin(S),G=this.computedCenter,X=C*B,Z=z*B,q=U,W=-C*U,te=-z*U,R=B,N=this.computedEye,V=this.computedMatrix;for(_=0;_<3;++_){var ee=X*b[_]+Z*k[_]+q*o[_];V[4*_+1]=W*b[_]+te*k[_]+R*o[_],V[4*_+2]=ee,V[4*_+3]=0}var j=V[1],J=V[5],$=V[9],re=V[2],ne=V[6],se=V[10],ie=J*se-$*ne,ue=$*re-j*se,le=j*ne-J*re,de=s(ie,ue,le);for(ue/=de,le/=de,V[0]=ie/=de,V[4]=ue,V[8]=le,_=0;_<3;++_)N[_]=G[_]+V[2+4*_]*O;for(_=0;_<3;++_){T=0;for(var ve=0;ve<3;++ve)T+=V[_+4*ve]*N[ve];V[12+_]=-T}V[15]=1},h.getMatrix=function(d,o){this.recalcMatrix(d);var b=this.computedMatrix;if(o){for(var g=0;g<16;++g)o[g]=b[g];return o}return b};var m=[0,0,0];h.rotate=function(d,o,b,g){if(this.angle.move(d,o,b),g){this.recalcMatrix(d);var w=this.computedMatrix;m[0]=w[2],m[1]=w[6],m[2]=w[10];for(var _=this.computedUp,A=this.computedRight,T=this.computedToward,E=0;E<3;++E)w[4*E]=_[E],w[4*E+1]=A[E],w[4*E+2]=T[E];for(t(w,w,g,m),E=0;E<3;++E)_[E]=w[4*E],A[E]=w[4*E+1];this.up.set(d,_[0],_[1],_[2]),this.right.set(d,A[0],A[1],A[2])}},h.pan=function(d,o,b,g){o=o||0,b=b||0,g=g||0,this.recalcMatrix(d);var w=this.computedMatrix,_=(Math.exp(this.computedRadius[0]),w[1]),A=w[5],T=w[9],E=s(_,A,T),k=w[0],O=w[4],D=w[8],S=k*(_/=E)+O*(A/=E)+D*(T/=E),C=s(k-=_*S,O-=A*S,D-=T*S),z=(k/=C)*o+_*b,B=(O/=C)*o+A*b,U=(D/=C)*o+T*b;this.center.move(d,z,B,U);var G=Math.exp(this.computedRadius[0]);G=Math.max(1e-4,G+g),this.radius.set(d,Math.log(G))},h.translate=function(d,o,b,g){this.center.move(d,o||0,b||0,g||0)},h.setMatrix=function(d,o,b,g){var w=1;"number"==typeof b&&(w=0|b),(w<0||w>3)&&(w=1);var _=(w+2)%3;o||(this.recalcMatrix(d),o=this.computedMatrix);var A=o[w],T=o[w+4],E=o[w+8];if(g){var k=Math.abs(A),O=Math.abs(T),D=Math.abs(E),S=Math.max(k,O,D);k===S?(A=A<0?-1:1,T=E=0):D===S?(E=E<0?-1:1,A=T=0):(T=T<0?-1:1,A=E=0)}else{var C=s(A,T,E);A/=C,T/=C,E/=C}var z,B,U=o[_],G=o[_+4],X=o[_+8],Z=U*A+G*T+X*E,q=s(U-=A*Z,G-=T*Z,X-=E*Z),W=T*(X/=q)-E*(G/=q),te=E*(U/=q)-A*X,R=A*G-T*U,N=s(W,te,R);if(W/=N,te/=N,R/=N,this.center.jump(d,he,me,Ae),this.radius.idle(d),this.up.jump(d,A,T,E),this.right.jump(d,U,G,X),2===w){var V=o[1],ee=o[5],j=o[9];z=ie<0?-Math.PI/2:Math.PI/2,B=Math.atan2(V*W+ee*te+j*R,V*U+ee*G+j*X)}else{var re=o[2],ne=o[6],se=o[10],ie=re*A+ne*T+se*E,ue=re*U+ne*G+se*X,le=re*W+ne*te+se*R;z=Math.asin(i(ie)),B=Math.atan2(le,ue)}this.angle.jump(d,B,z),this.recalcMatrix(d);var de=o[2],ve=o[6],_e=o[10],be=this.computedMatrix;n(be,o);var Te=be[15],he=be[12]/Te,me=be[13]/Te,Ae=be[14]/Te,we=Math.exp(this.computedRadius[0]);this.center.jump(d,he-de*we,me-ve*we,Ae-_e*we)},h.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},h.idle=function(d){this.center.idle(d),this.up.idle(d),this.right.idle(d),this.radius.idle(d),this.angle.idle(d)},h.flush=function(d){this.center.flush(d),this.up.flush(d),this.right.flush(d),this.radius.flush(d),this.angle.flush(d)},h.setDistance=function(d,o){o>0&&this.radius.set(d,Math.log(o))},h.lookAt=function(d,o,b,g){this.recalcMatrix(d),o=o||this.computedEye,b=b||this.computedCenter;var w=(g=g||this.computedUp)[0],_=g[1],A=g[2],T=s(w,_,A);if(!(T<1e-6)){w/=T,_/=T,A/=T;var E=o[0]-b[0],k=o[1]-b[1],O=o[2]-b[2],D=s(E,k,O);if(!(D<1e-6)){E/=D,k/=D,O/=D;var S=this.computedRight,C=S[0],z=S[1],B=S[2],U=w*C+_*z+A*B,G=s(C-=U*w,z-=U*_,B-=U*A);if(!(G<.01&&(G=s(C=_*O-A*k,z=A*E-w*O,B=w*k-_*E))<1e-6)){C/=G,z/=G,B/=G,this.up.set(d,w,_,A),this.right.set(d,C,z,B),this.center.set(d,b[0],b[1],b[2]),this.radius.set(d,Math.log(D));var X=_*B-A*z,Z=A*C-w*B,q=w*z-_*C,W=s(X,Z,q),R=C*E+z*k+B*O,N=(X/=W)*E+(Z/=W)*k+(q/=W)*O,V=Math.asin(i(w*E+_*k+A*O)),ee=Math.atan2(N,R),j=this.angle._state,J=j[j.length-1],$=j[j.length-2];J%=2*Math.PI;var re=Math.abs(J+2*Math.PI-ee),ne=Math.abs(J-ee),se=Math.abs(J-2*Math.PI-ee);re<ne&&(J+=2*Math.PI),se<ne&&(J-=2*Math.PI),this.angle.jump(this.angle.lastT(),J,$),this.angle.set(d,ee,V)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(v,u,y){"use strict";u.exports=function(n,t,a){var r=n*t,f=e*n,s=f-(f-n),i=n-s,l=e*t,c=l-(l-t),h=t-c,m=i*h-(r-s*c-i*c-s*h);return a?(a[0]=m,a[1]=r,a):[m,r]};var e=+(Math.pow(2,27)+1)},{}],307:[function(v,u,y){"use strict";u.exports=function(e,n,t){var a=e+n,r=a-e,f=n-r,s=e-(a-r);return t?(t[0]=s+f,t[1]=a,t):[s+f,a]}},{}],308:[function(v,u,y){(function(e){(function(){"use strict";var n=v("bit-twiddle"),t=v("dup"),a=v("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),BIGUINT64:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,0]),BIGINT64:t([32,0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var r="undefined"!=typeof Uint8ClampedArray,f="undefined"!=typeof BigUint64Array,s="undefined"!=typeof BigInt64Array,i=e.__TYPEDARRAY_POOL;i.UINT8C||(i.UINT8C=t([32,0])),i.BIGUINT64||(i.BIGUINT64=t([32,0])),i.BIGINT64||(i.BIGINT64=t([32,0])),i.BUFFER||(i.BUFFER=t([32,0]));var l=i.DATA,c=i.BUFFER;function h(C){if(C){var B=n.log2(C.length||C.byteLength);l[B].push(C)}}function m(C){C=n.nextPow2(C);var z=n.log2(C),B=l[z];return B.length>0?B.pop():new ArrayBuffer(C)}function d(C){return new Uint8Array(m(C),0,C)}function o(C){return new Uint16Array(m(2*C),0,C)}function b(C){return new Uint32Array(m(4*C),0,C)}function g(C){return new Int8Array(m(C),0,C)}function w(C){return new Int16Array(m(2*C),0,C)}function _(C){return new Int32Array(m(4*C),0,C)}function A(C){return new Float32Array(m(4*C),0,C)}function T(C){return new Float64Array(m(8*C),0,C)}function E(C){return r?new Uint8ClampedArray(m(C),0,C):d(C)}function k(C){return f?new BigUint64Array(m(8*C),0,C):null}function O(C){return s?new BigInt64Array(m(8*C),0,C):null}function D(C){return new DataView(m(C),0,C)}function S(C){C=n.nextPow2(C);var z=n.log2(C),B=c[z];return B.length>0?B.pop():new a(C)}y.free=function(C){if(a.isBuffer(C))c[n.log2(C.length)].push(C);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(C)&&(C=C.buffer),!C)return;var B=0|n.log2(C.length||C.byteLength);l[B].push(C)}},y.freeUint8=y.freeUint16=y.freeUint32=y.freeBigUint64=y.freeInt8=y.freeInt16=y.freeInt32=y.freeBigInt64=y.freeFloat32=y.freeFloat=y.freeFloat64=y.freeDouble=y.freeUint8Clamped=y.freeDataView=function(C){h(C.buffer)},y.freeArrayBuffer=h,y.freeBuffer=function(C){c[n.log2(C.length)].push(C)},y.malloc=function(C,z){if(void 0===z||"arraybuffer"===z)return m(C);switch(z){case"uint8":return d(C);case"uint16":return o(C);case"uint32":return b(C);case"int8":return g(C);case"int16":return w(C);case"int32":return _(C);case"float":case"float32":return A(C);case"double":case"float64":return T(C);case"uint8_clamped":return E(C);case"bigint64":return O(C);case"biguint64":return k(C);case"buffer":return S(C);case"data":case"dataview":return D(C);default:return null}return null},y.mallocArrayBuffer=m,y.mallocUint8=d,y.mallocUint16=o,y.mallocUint32=b,y.mallocInt8=g,y.mallocInt16=w,y.mallocInt32=_,y.mallocFloat32=y.mallocFloat=A,y.mallocFloat64=y.mallocDouble=T,y.mallocUint8Clamped=E,y.mallocBigUint64=k,y.mallocBigInt64=O,y.mallocDataView=D,y.mallocBuffer=S,y.clearCache=function(){for(var C=0;C<32;++C)i.UINT8[C].length=0,i.UINT16[C].length=0,i.UINT32[C].length=0,i.INT8[C].length=0,i.INT16[C].length=0,i.INT32[C].length=0,i.FLOAT[C].length=0,i.DOUBLE[C].length=0,i.BIGUINT64[C].length=0,i.BIGINT64[C].length=0,i.UINT8C[C].length=0,l[C].length=0,c[C].length=0}}).call(this)}).call(this,void 0!==p?p:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(v,u,y){"use strict";function e(t){this.roots=new Array(t),this.ranks=new Array(t);for(var a=0;a<t;++a)this.roots[a]=a,this.ranks[a]=0}u.exports=e;var n=e.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},n.find=function(t){for(var a=t,r=this.roots;r[t]!==t;)t=r[t];for(;r[a]!==t;){var f=r[a];r[a]=t,a=f}return t},n.link=function(t,a){var r=this.find(t),f=this.find(a);if(r!==f){var s=this.ranks,i=this.roots,l=s[r],c=s[f];l<c?i[r]=f:c<l?i[f]=r:(i[f]=r,++s[r])}}},{}],310:[function(v,u,y){"use strict";u.exports=function(e,n,t){return 0===e.length?e:n?(t||e.sort(n),function(a,r){for(var f=1,s=a.length,i=a[0],l=a[0],c=1;c<s;++c)if(l=i,r(i=a[c],l)){if(c===f){f++;continue}a[f++]=i}return a.length=f,a}(e,n)):(t||e.sort(),function(a){for(var r=1,f=a.length,s=a[0],i=a[0],l=1;l<f;++l,i=s)if(i=s,(s=a[l])!==i){if(l===r){r++;continue}a[r++]=s}return a.length=r,a}(e))}},{}],311:[function(v,u,y){"use strict";u.exports=function(a,r){return"object"==typeof r&&null!==r||(r={}),e(a,r.canvas||n,r.context||t,r)};var e=v("./lib/vtext"),n=null,t=null;"undefined"!=typeof document&&((n=document.createElement("canvas")).width=8192,n.height=1024,t=n.getContext("2d"))},{"./lib/vtext":312}],312:[function(v,u,y){u.exports=function(h,m,d,o){var b=64,g=1.25,w={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return o&&(o.size&&o.size>0&&(b=o.size),o.lineSpacing&&o.lineSpacing>0&&(g=o.lineSpacing),o.styletags&&o.styletags.breaklines&&(w.breaklines=!!o.styletags.breaklines),o.styletags&&o.styletags.bolds&&(w.bolds=!!o.styletags.bolds),o.styletags&&o.styletags.italics&&(w.italics=!!o.styletags.italics),o.styletags&&o.styletags.subscripts&&(w.subscripts=!!o.styletags.subscripts),o.styletags&&o.styletags.superscripts&&(w.superscripts=!!o.styletags.superscripts)),d.font=[o.fontStyle,o.fontVariant,o.fontWeight,b+"px",o.font].filter(function(_){return _}).join(" "),d.textAlign="start",d.textBaseline="alphabetic",d.direction="ltr",c(function(_,A,T,E,k,O){T=(T=T.replace(/\n/g,"")).replace(/\<br\>/g,!0===O.breaklines?"\n":" ");var D="",S=[];for(U=0;U<T.length;++U)S[U]=D;!0===O.bolds&&(S=s("b","b|",T,S)),!0===O.italics&&(S=s("i","i|",T,S)),!0===O.superscripts&&(S=s("sup","+1",T,S)),!0===O.subscripts&&(S=s("sub","-1",T,S));var C=[],z="";for(U=0;U<T.length;++U)null!==S[U]&&(z+=T[U],C.push(S[U]));var B,U,G,X,Z,q=z.split("\n"),W=q.length,te=Math.round(k*E),R=E,N=2*E,V=0,ee=W*te+N;_.height<ee&&(_.height=ee),A.fillStyle="#000",A.fillRect(0,0,_.width,_.height),A.fillStyle="#fff";var j=0,J="";function $(){if(""!==J){var ve=A.measureText(J).width;A.fillText(J,R+G,N+X),G+=ve}}function re(){return Math.round(Z)+"px "}function ne(ve,_e){var be=""+A.font;if(!0===O.subscripts){var Te=ve.indexOf("-"),he=_e.indexOf("-"),me=Te>-1?parseInt(ve[1+Te]):0,Ae=he>-1?parseInt(_e[1+he]):0;me!==Ae&&(be=be.replace(re(),"?px "),Z*=Math.pow(.75,Ae-me),be=be.replace("?px ",re())),X+=.25*te*(Ae-me)}if(!0===O.superscripts){var we=ve.indexOf("+"),Se=_e.indexOf("+"),Pe=we>-1?parseInt(ve[1+we]):0,ze=Se>-1?parseInt(_e[1+Se]):0;Pe!==ze&&(be=be.replace(re(),"?px "),Z*=Math.pow(.75,ze-Pe),be=be.replace("?px ",re())),X-=.25*te*(ze-Pe)}if(!0===O.bolds){var He=ve.indexOf("b|")>-1,tt=_e.indexOf("b|")>-1;!He&&tt&&(be=Oe?be.replace("italic ","italic bold "):"bold "+be),He&&!tt&&(be=be.replace("bold ",""))}if(!0===O.italics){var Oe=ve.indexOf("i|")>-1,Be=_e.indexOf("i|")>-1;!Oe&&Be&&(be="italic "+be),Oe&&!Be&&(be=be.replace("italic ",""))}A.font=be}for(B=0;B<W;++B){var se=q[B]+"\n";for(G=0,X=B*te,Z=E,J="",U=0;U<se.length;++U){var ie=U+j<C.length?C[U+j]:C[C.length-1];D===ie?J+=se[U]:($(),J=se[U],void 0!==ie&&(ne(D,ie),D=ie))}$(),j+=se.length;var ue=0|Math.round(G+2*R);V<ue&&(V=ue)}var le=V,de=N+te*W;return n(A.getImageData(0,0,le,de).data,[de,le,4]).pick(-1,-1,0).transpose(1,0)}(m,d,h,b,g,w),o,b)},u.exports.processPixels=c;var e=v("surface-nets"),n=v("ndarray"),t=v("simplify-planar-graph"),a=v("clean-pslg"),r=v("cdt2d"),f=v("planar-graph-to-polyline");function s(h,m,d,o){for(var b="<"+h+">",g="</"+h+">",w=b.length,_=g.length,A="+"===m[0]||"-"===m[0],T=0,E=-_;T>-1&&-1!==(T=d.indexOf(b,T))&&-1!==(E=d.indexOf(g,T+w))&&!(E<=T);){for(var k=T;k<E+_;++k)if(k<T+w||k>=E)o[k]=null,d=d.substr(0,k)+" "+d.substr(k+1);else if(null!==o[k]){var O=o[k].indexOf(m[0]);-1===O?o[k]+=m:A&&(o[k]=o[k].substr(0,O+1)+(1+parseInt(o[k][O+1]))+o[k].substr(O+2))}var D=T+w,S=d.substr(D,E-D).indexOf(b);T=-1!==S?S:E+_}return o}function l(h,m,d,o){var b=function(h,m){var d=e(h,128);return m?t(d.cells,d.positions,.25):{edges:d.cells,positions:d.positions}}(h,o),g=function(B,U,G){for(var X=U.textAlign||"start",Z=U.textBaseline||"alphabetic",q=[1<<30,1<<30],W=[0,0],te=B.length,R=0;R<te;++R)for(var N=B[R],V=0;V<2;++V)q[V]=0|Math.min(q[V],N[V]),W[V]=0|Math.max(W[V],N[V]);var ee=0;switch(X){case"center":ee=-.5*(q[0]+W[0]);break;case"right":case"end":ee=-W[0];break;case"left":case"start":ee=-q[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+X+"'")}var j=0;switch(Z){case"hanging":case"top":j=-q[1];break;case"middle":j=-.5*(q[1]+W[1]);break;case"alphabetic":case"ideographic":j=-3*G;break;case"bottom":j=-W[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+Z+"'")}var J=1/G;return"lineHeight"in U?J*=+U.lineHeight:"width"in U?J=U.width/(W[0]-q[0]):"height"in U&&(J=U.height/(W[1]-q[1])),B.map(function($){return[J*($[0]+ee),J*($[1]+j)]})}(b.positions,m,d),w=b.edges,_="ccw"===m.orientation;if(a(g,w),m.polygons||m.polygon||m.polyline){for(var A=f(w,g),T=new Array(A.length),E=0;E<A.length;++E){for(var k=A[E],O=new Array(k.length),D=0;D<k.length;++D){for(var S=k[D],C=new Array(S.length),z=0;z<S.length;++z)C[z]=g[S[z]].slice();_&&C.reverse(),O[D]=C}T[E]=O}return T}return m.triangles||m.triangulate||m.triangle?{cells:r(g,w,{delaunay:!1,exterior:!1,interior:!0}),positions:g}:{edges:w,positions:g}}function c(h,m,d){try{return l(h,m,d,!0)}catch(o){}try{return l(h,m,d,!1)}catch(o){}return m.polygons||m.polyline||m.polygon?[]:m.triangles||m.triangulate||m.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(v,u,y){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=b);var e=!1;if("function"==typeof WeakMap){var n=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var t=new n,a=Object.freeze({});if(t.set(a,1),1===t.get(a))return void(u.exports=WeakMap);e=!0}}var r=Object.getOwnPropertyNames,f=Object.defineProperty,s=Object.isExtensible,i="weakmap:ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var l=new ArrayBuffer(25),c=new Uint8Array(l);crypto.getRandomValues(c),i="weakmap:rand:"+Array.prototype.map.call(c,function(T){return(T%36).toString(36)}).join("")+"___"}if(f(Object,"getOwnPropertyNames",{value:function(T){return r(T).filter(g)}}),"getPropertyNames"in Object){var h=Object.getPropertyNames;f(Object,"getPropertyNames",{value:function(T){return h(T).filter(g)}})}!function(){var T=Object.freeze;f(Object,"freeze",{value:function(O){return w(O),T(O)}});var E=Object.seal;f(Object,"seal",{value:function(O){return w(O),E(O)}});var k=Object.preventExtensions;f(Object,"preventExtensions",{value:function(O){return w(O),k(O)}})}();var m=!1,d=0,o=function(){this instanceof o||A();var T=[],E=[],k=d++;return Object.create(o.prototype,{get___:{value:_(function(O,D){var S,C=w(O);return C?k in C?C[k]:D:(S=T.indexOf(O))>=0?E[S]:D})},has___:{value:_(function(O){var D=w(O);return D?k in D:T.indexOf(O)>=0})},set___:{value:_(function(O,D){var S,C=w(O);return C?C[k]=D:(S=T.indexOf(O))>=0?E[S]=D:(E[S=T.length]=D,T[S]=O),this})},delete___:{value:_(function(O){var D,S,C=w(O);return C?k in C&&delete C[k]:!((D=T.indexOf(O))<0||(S=T.length-1,T[D]=void 0,E[D]=E[S],T[D]=T[S],T.length=S,E.length=S,0))})}})};o.prototype=Object.create(Object.prototype,{get:{value:function(T,E){return this.get___(T,E)},writable:!0,configurable:!0},has:{value:function(T){return this.has___(T)},writable:!0,configurable:!0},set:{value:function(T,E){return this.set___(T,E)},writable:!0,configurable:!0},delete:{value:function(T){return this.delete___(T)},writable:!0,configurable:!0}}),"function"==typeof n?function(){function T(){this instanceof o||A();var E,k=new n,O=void 0,D=!1;return E=e?function(S,C){return k.set(S,C),k.has(S)||(O||(O=new o),O.set(S,C)),this}:function(S,C){if(D)try{k.set(S,C)}catch(z){O||(O=new o),O.set___(S,C)}else k.set(S,C);return this},Object.create(o.prototype,{get___:{value:_(function(S,C){return O?k.has(S)?k.get(S):O.get___(S,C):k.get(S,C)})},has___:{value:_(function(S){return k.has(S)||!!O&&O.has___(S)})},set___:{value:_(E)},delete___:{value:_(function(S){var C=!!k.delete(S);return O&&O.delete___(S)||C})},permitHostObjects___:{value:_(function(S){if(S!==b)throw new Error("bogus call to permitHostObjects___");D=!0})}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),T.prototype=o.prototype,u.exports=T,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),u.exports=o)}function b(T){T.permitHostObjects___&&T.permitHostObjects___(b)}function g(T){return!("weakmap:"==T.substr(0,"weakmap:".length)&&"___"===T.substr(T.length-3))}function w(T){if(T!==Object(T))throw new TypeError("Not an object: "+T);var E=T[i];if(E&&E.key===T)return E;if(s(T)){E={key:T};try{return f(T,i,{value:E,writable:!1,enumerable:!1,configurable:!1}),E}catch(k){return}}}function _(T){return T.prototype=null,Object.freeze(T)}function A(){m||"undefined"==typeof console||(m=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(v,u,y){var e=v("./hidden-store.js");u.exports=function(){var n={};return function(t){if(("object"!=typeof t||null===t)&&"function"!=typeof t)throw new Error("Weakmap-shim: Key must be object");var a=t.valueOf(n);return a&&a.identity===n?a:e(t,n)}}},{"./hidden-store.js":315}],315:[function(v,u,y){u.exports=function(e,n){var t={identity:n},a=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(r){return r!==n?a.apply(this,arguments):t},writable:!0}),t}},{}],316:[function(v,u,y){var e=v("./create-store.js");u.exports=function(){var n=e();return{get:function(t,a){var r=n(t);return r.hasOwnProperty("value")?r.value:a},set:function(t,a){return n(t).value=a,this},has:function(t){return"value"in n(t)},delete:function(t){return delete n(t).value}}}},{"./create-store.js":314}],317:[function(v,u,y){"use strict";var t,a;u.exports=(t=function(){return function(t,a,r,f,s,i){var l=t[0],c=r[0],h=[0],m=c;f|=0;var d=0,o=c;for(d=0;d<l;++d){var b=a[f]-i,g=a[f+m]-i;b>=0!=g>=0&&s.push(h[0]+.5+.5*(b+g)/(b-g)),f+=o,++h[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),a={},function(r,f,s){var i=r.dtype,l=r.order,c=[i,l.join()].join(),h=a[c];return h||(a[c]=h=t([i,l])),h(r.shape.slice(0),r.data,r.stride,0|r.offset,f,s)})},{}],318:[function(v,u,y){"use strict";u.exports=function(n,t){var a=[];return t=+t||0,e(n.hi(n.shape[0]-1),a,t),a};var e=v("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[27])(27)},5758:(Ml,x,Q)=>{"use strict";Q.d(x,{D:()=>e});var K=Q(7574),p=Q(9796),v=Q(8002),u=Q(1555),y=Q(4402);function e(...t){if(1===t.length){const a=t[0];if((0,p.k)(a))return n(a,null);if((0,u.K)(a)&&Object.getPrototypeOf(a)===Object.prototype){const r=Object.keys(a);return n(r.map(f=>a[f]),r)}}if("function"==typeof t[t.length-1]){const a=t.pop();return n(t=1===t.length&&(0,p.k)(t[0])?t[0]:t,null).pipe((0,v.U)(r=>a(...r)))}return n(t,null)}function n(t,a){return new K.y(r=>{const f=t.length;if(0===f)return void r.complete();const s=new Array(f);let i=0,l=0;for(let c=0;c<f;c++){const h=(0,y.D)(t[c]);let m=!1;r.add(h.subscribe({next:d=>{m||(m=!0,l++),s[c]=d},error:d=>r.error(d),complete:()=>{i++,(i===f||!m)&&(l===f&&r.next(a?a.reduce((d,o,b)=>(d[o]=s[b],d),{}):s),r.complete())}}))}})}},7112:(Ml,x,Q)=>{"use strict";Q.r(x),Q.d(x,{CryptoModule:()=>Nl});var K=Q(8583),p=Q(8741),v=Q(5319),u=Q(3018),y=Q(1496),e=Q(3679);const t=["USD","EUR","GBP","PLN"];var a=Q(2458),r=Q(521);const f=["*",[["mat-toolbar-row"]]],s=["*","mat-toolbar-row"],i=(0,a.pj)(class{constructor(Le){this._elementRef=Le}});let l=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275dir=u.lG2({type:Le,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),Le})(),c=(()=>{class Le extends i{constructor(Me,We,Ut){super(Me),this._platform=We,this._document=Ut}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.Y36(u.SBq),u.Y36(r.t4),u.Y36(K.K0))},Le.\u0275cmp=u.Xpm({type:Le,selectors:[["mat-toolbar"]],contentQueries:function(Me,We,Ut){if(1&Me&&u.Suo(Ut,l,5),2&Me){let vr;u.iGM(vr=u.CRH())&&(We._toolbarRows=vr)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(Me,We){2&Me&&u.ekj("mat-toolbar-multiple-rows",We._toolbarRows.length>0)("mat-toolbar-single-row",0===We._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[u.qOj],ngContentSelectors:s,decls:2,vars:0,template:function(Me,We){1&Me&&(u.F$t(f),u.Hsn(0),u.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),Le})(),m=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275mod=u.oAB({type:Le}),Le.\u0275inj=u.cJS({imports:[[a.BQ],a.BQ]}),Le})();var d=Q(8553),o=Q(9490),b=Q(9765),g=Q(6682),w=Q(2759),_=Q(9761),A=Q(6782),T=Q(5257),E=Q(7238),k=Q(6237),O=Q(946);const D=["underline"],S=["connectionContainer"],C=["inputContainer"],z=["label"];function B(Le,At){1&Le&&(u.ynx(0),u.TgZ(1,"div",14),u._UZ(2,"div",15),u._UZ(3,"div",16),u._UZ(4,"div",17),u.qZA(),u.TgZ(5,"div",18),u._UZ(6,"div",15),u._UZ(7,"div",16),u._UZ(8,"div",17),u.qZA(),u.BQk())}function U(Le,At){1&Le&&(u.TgZ(0,"div",19),u.Hsn(1,1),u.qZA())}function G(Le,At){if(1&Le&&(u.ynx(0),u.Hsn(1,2),u.TgZ(2,"span"),u._uU(3),u.qZA(),u.BQk()),2&Le){const Me=u.oxw(2);u.xp6(3),u.Oqu(Me._control.placeholder)}}function X(Le,At){1&Le&&u.Hsn(0,3,["*ngSwitchCase","true"])}function Z(Le,At){1&Le&&(u.TgZ(0,"span",23),u._uU(1," *"),u.qZA())}function q(Le,At){if(1&Le){const Me=u.EpF();u.TgZ(0,"label",20,21),u.NdJ("cdkObserveContent",function(){return u.CHM(Me),u.oxw().updateOutlineGap()}),u.YNc(2,G,4,1,"ng-container",12),u.YNc(3,X,1,0,"ng-content",12),u.YNc(4,Z,2,0,"span",22),u.qZA()}if(2&Le){const Me=u.oxw();u.ekj("mat-empty",Me._control.empty&&!Me._shouldAlwaysFloat())("mat-form-field-empty",Me._control.empty&&!Me._shouldAlwaysFloat())("mat-accent","accent"==Me.color)("mat-warn","warn"==Me.color),u.Q6J("cdkObserveContentDisabled","outline"!=Me.appearance)("id",Me._labelId)("ngSwitch",Me._hasLabel()),u.uIk("for",Me._control.id)("aria-owns",Me._control.id),u.xp6(2),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngIf",!Me.hideRequiredMarker&&Me._control.required&&!Me._control.disabled)}}function W(Le,At){1&Le&&(u.TgZ(0,"div",24),u.Hsn(1,4),u.qZA())}function te(Le,At){if(1&Le&&(u.TgZ(0,"div",25,26),u._UZ(2,"span",27),u.qZA()),2&Le){const Me=u.oxw();u.xp6(2),u.ekj("mat-accent","accent"==Me.color)("mat-warn","warn"==Me.color)}}function R(Le,At){if(1&Le&&(u.TgZ(0,"div"),u.Hsn(1,5),u.qZA()),2&Le){const Me=u.oxw();u.Q6J("@transitionMessages",Me._subscriptAnimationState)}}function N(Le,At){if(1&Le&&(u.TgZ(0,"div",31),u._uU(1),u.qZA()),2&Le){const Me=u.oxw(2);u.Q6J("id",Me._hintLabelId),u.xp6(1),u.Oqu(Me.hintLabel)}}function V(Le,At){if(1&Le&&(u.TgZ(0,"div",28),u.YNc(1,N,2,2,"div",29),u.Hsn(2,6),u._UZ(3,"div",30),u.Hsn(4,7),u.qZA()),2&Le){const Me=u.oxw();u.Q6J("@transitionMessages",Me._subscriptAnimationState),u.xp6(1),u.Q6J("ngIf",Me.hintLabel)}}const ee=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],j=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],$=new u.OlP("MatError"),ne={transitionMessages:(0,E.X$)("transitionMessages",[(0,E.SB)("enter",(0,E.oB)({opacity:1,transform:"translateY(0%)"})),(0,E.eR)("void => enter",[(0,E.oB)({opacity:0,transform:"translateY(-5px)"}),(0,E.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let se=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275dir=u.lG2({type:Le}),Le})();const ve=new u.OlP("MatHint");let be=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275dir=u.lG2({type:Le,selectors:[["mat-label"]]}),Le})(),Te=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275dir=u.lG2({type:Le,selectors:[["mat-placeholder"]]}),Le})();const he=new u.OlP("MatPrefix"),Ae=new u.OlP("MatSuffix");let Se=0;const He=(0,a.pj)(class{constructor(Le){this._elementRef=Le}},"primary"),tt=new u.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Oe=new u.OlP("MatFormField");let Be=(()=>{class Le extends He{constructor(Me,We,Ut,vr,vn,Dn,Ti,Ha){super(Me),this._changeDetectorRef=We,this._dir=vr,this._defaults=vn,this._platform=Dn,this._ngZone=Ti,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new b.xQ,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Se++,this._labelId="mat-form-field-label-"+Se++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==Ha,this.appearance=vn&&vn.appearance?vn.appearance:"legacy",this._hideRequiredMarker=!(!vn||null==vn.hideRequiredMarker)&&vn.hideRequiredMarker}get appearance(){return this._appearance}set appearance(Me){const We=this._appearance;this._appearance=Me||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&We!==Me&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(Me){this._hideRequiredMarker=(0,o.Ig)(Me)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(Me){this._hintLabel=Me,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(Me){Me!==this._floatLabel&&(this._floatLabel=Me||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(Me){this._explicitFormFieldControl=Me}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const Me=this._control;Me.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${Me.controlType}`),Me.stateChanges.pipe((0,_.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),Me.ngControl&&Me.ngControl.valueChanges&&Me.ngControl.valueChanges.pipe((0,A.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,A.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,g.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,_.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,_.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,A.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(Me){const We=this._control?this._control.ngControl:null;return We&&We[Me]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,w.R)(this._label.nativeElement,"transitionend").pipe((0,T.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let Me=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&Me.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const We=this._hintChildren?this._hintChildren.find(vr=>"start"===vr.align):null,Ut=this._hintChildren?this._hintChildren.find(vr=>"end"===vr.align):null;We?Me.push(We.id):this._hintLabel&&Me.push(this._hintLabelId),Ut&&Me.push(Ut.id)}else this._errorChildren&&Me.push(...this._errorChildren.map(We=>We.id));this._control.setDescribedByIds(Me)}}_validateControlChild(){}updateOutlineGap(){const Me=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&Me&&Me.children.length&&Me.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let We=0,Ut=0;const vr=this._connectionContainerRef.nativeElement,vn=vr.querySelectorAll(".mat-form-field-outline-start"),Dn=vr.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const Ti=vr.getBoundingClientRect();if(0===Ti.width&&0===Ti.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const Ha=this._getStartEnd(Ti),es=Me.children,Xo=this._getStartEnd(es[0].getBoundingClientRect());let Rs=0;for(let yl=0;yl<es.length;yl++)Rs+=es[yl].offsetWidth;We=Math.abs(Xo-Ha)-5,Ut=Rs>0?.75*Rs+10:0}for(let Ti=0;Ti<vn.length;Ti++)vn[Ti].style.width=`${We}px`;for(let Ti=0;Ti<Dn.length;Ti++)Dn[Ti].style.width=`${Ut}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(Me){return this._dir&&"rtl"===this._dir.value?Me.right:Me.left}_isAttachedToDOM(){const Me=this._elementRef.nativeElement;if(Me.getRootNode){const We=Me.getRootNode();return We&&We!==Me}return document.documentElement.contains(Me)}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(O.Is,8),u.Y36(tt,8),u.Y36(r.t4),u.Y36(u.R0b),u.Y36(k.Qb,8))},Le.\u0275cmp=u.Xpm({type:Le,selectors:[["mat-form-field"]],contentQueries:function(Me,We,Ut){if(1&Me&&(u.Suo(Ut,se,5),u.Suo(Ut,se,7),u.Suo(Ut,be,5),u.Suo(Ut,be,7),u.Suo(Ut,Te,5),u.Suo(Ut,$,5),u.Suo(Ut,ve,5),u.Suo(Ut,he,5),u.Suo(Ut,Ae,5)),2&Me){let vr;u.iGM(vr=u.CRH())&&(We._controlNonStatic=vr.first),u.iGM(vr=u.CRH())&&(We._controlStatic=vr.first),u.iGM(vr=u.CRH())&&(We._labelChildNonStatic=vr.first),u.iGM(vr=u.CRH())&&(We._labelChildStatic=vr.first),u.iGM(vr=u.CRH())&&(We._placeholderChild=vr.first),u.iGM(vr=u.CRH())&&(We._errorChildren=vr),u.iGM(vr=u.CRH())&&(We._hintChildren=vr),u.iGM(vr=u.CRH())&&(We._prefixChildren=vr),u.iGM(vr=u.CRH())&&(We._suffixChildren=vr)}},viewQuery:function(Me,We){if(1&Me&&(u.Gf(D,5),u.Gf(S,7),u.Gf(C,5),u.Gf(z,5)),2&Me){let Ut;u.iGM(Ut=u.CRH())&&(We.underlineRef=Ut.first),u.iGM(Ut=u.CRH())&&(We._connectionContainerRef=Ut.first),u.iGM(Ut=u.CRH())&&(We._inputContainerRef=Ut.first),u.iGM(Ut=u.CRH())&&(We._label=Ut.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(Me,We){2&Me&&u.ekj("mat-form-field-appearance-standard","standard"==We.appearance)("mat-form-field-appearance-fill","fill"==We.appearance)("mat-form-field-appearance-outline","outline"==We.appearance)("mat-form-field-appearance-legacy","legacy"==We.appearance)("mat-form-field-invalid",We._control.errorState)("mat-form-field-can-float",We._canLabelFloat())("mat-form-field-should-float",We._shouldLabelFloat())("mat-form-field-has-label",We._hasFloatingLabel())("mat-form-field-hide-placeholder",We._hideControlPlaceholder())("mat-form-field-disabled",We._control.disabled)("mat-form-field-autofilled",We._control.autofilled)("mat-focused",We._control.focused)("ng-untouched",We._shouldForward("untouched"))("ng-touched",We._shouldForward("touched"))("ng-pristine",We._shouldForward("pristine"))("ng-dirty",We._shouldForward("dirty"))("ng-valid",We._shouldForward("valid"))("ng-invalid",We._shouldForward("invalid"))("ng-pending",We._shouldForward("pending"))("_mat-animation-noopable",!We._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[u._Bn([{provide:Oe,useExisting:Le}]),u.qOj],ngContentSelectors:j,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(Me,We){1&Me&&(u.F$t(ee),u.TgZ(0,"div",0),u.TgZ(1,"div",1,2),u.NdJ("click",function(vr){return We._control.onContainerClick&&We._control.onContainerClick(vr)}),u.YNc(3,B,9,0,"ng-container",3),u.YNc(4,U,2,0,"div",4),u.TgZ(5,"div",5,6),u.Hsn(7),u.TgZ(8,"span",7),u.YNc(9,q,5,16,"label",8),u.qZA(),u.qZA(),u.YNc(10,W,2,0,"div",9),u.qZA(),u.YNc(11,te,3,4,"div",10),u.TgZ(12,"div",11),u.YNc(13,R,2,1,"div",12),u.YNc(14,V,5,2,"div",13),u.qZA(),u.qZA()),2&Me&&(u.xp6(3),u.Q6J("ngIf","outline"==We.appearance),u.xp6(1),u.Q6J("ngIf",We._prefixChildren.length),u.xp6(5),u.Q6J("ngIf",We._hasFloatingLabel()),u.xp6(1),u.Q6J("ngIf",We._suffixChildren.length),u.xp6(1),u.Q6J("ngIf","outline"!=We.appearance),u.xp6(1),u.Q6J("ngSwitch",We._getDisplayedMessages()),u.xp6(1),u.Q6J("ngSwitchCase","error"),u.xp6(1),u.Q6J("ngSwitchCase","hint"))},directives:[K.O5,K.RF,K.n9,d.wD],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[ne.transitionMessages]},changeDetection:0}),Le})(),Je=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275mod=u.oAB({type:Le}),Le.\u0275inj=u.cJS({imports:[[K.ez,a.BQ,d.Q8],a.BQ]}),Le})();var Ye=Q(625),nt=Q(7282),ft=Q(9238),dt=Q(8345),Rt=Q(6461),Et=Q(1439),at=Q(3190),rt=Q(5435),St=Q(8002),Xt=Q(7519);const lr=["trigger"],Ue=["panel"];function Ze(Le,At){if(1&Le&&(u.TgZ(0,"span",8),u._uU(1),u.qZA()),2&Le){const Me=u.oxw();u.xp6(1),u.Oqu(Me.placeholder)}}function Ne(Le,At){if(1&Le&&(u.TgZ(0,"span",12),u._uU(1),u.qZA()),2&Le){const Me=u.oxw(2);u.xp6(1),u.Oqu(Me.triggerValue)}}function it(Le,At){1&Le&&u.Hsn(0,0,["*ngSwitchCase","true"])}function ke(Le,At){if(1&Le&&(u.TgZ(0,"span",9),u.YNc(1,Ne,2,1,"span",10),u.YNc(2,it,1,0,"ng-content",11),u.qZA()),2&Le){const Me=u.oxw();u.Q6J("ngSwitch",!!Me.customTrigger),u.xp6(2),u.Q6J("ngSwitchCase",!0)}}function De(Le,At){if(1&Le){const Me=u.EpF();u.TgZ(0,"div",13),u.TgZ(1,"div",14,15),u.NdJ("@transformPanel.done",function(Ut){return u.CHM(Me),u.oxw()._panelDoneAnimatingStream.next(Ut.toState)})("keydown",function(Ut){return u.CHM(Me),u.oxw()._handleKeydown(Ut)}),u.Hsn(3,1),u.qZA(),u.qZA()}if(2&Le){const Me=u.oxw();u.Q6J("@transformPanelWrap",void 0),u.xp6(1),u.Gre("mat-select-panel ",Me._getPanelTheme(),""),u.Udp("transform-origin",Me._transformOrigin)("font-size",Me._triggerFontSize,"px"),u.Q6J("ngClass",Me.panelClass)("@transformPanel",Me.multiple?"showing-multiple":"showing"),u.uIk("id",Me.id+"-panel")("aria-multiselectable",Me.multiple)("aria-label",Me.ariaLabel||null)("aria-labelledby",Me._getPanelAriaLabelledby())}}const Re=[[["mat-select-trigger"]],"*"],Ie=["mat-select-trigger","*"],Ke={transformPanelWrap:(0,E.X$)("transformPanelWrap",[(0,E.eR)("* => void",(0,E.IO)("@transformPanel",[(0,E.pV)()],{optional:!0}))]),transformPanel:(0,E.X$)("transformPanel",[(0,E.SB)("void",(0,E.oB)({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),(0,E.SB)("showing",(0,E.oB)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),(0,E.SB)("showing-multiple",(0,E.oB)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),(0,E.eR)("void => *",(0,E.jt)("120ms cubic-bezier(0, 0, 0.2, 1)")),(0,E.eR)("* => void",(0,E.jt)("100ms 25ms linear",(0,E.oB)({opacity:0})))])};let Pt=0;const Yt=new u.OlP("mat-select-scroll-strategy"),Fe=new u.OlP("MAT_SELECT_CONFIG"),ht={provide:Yt,deps:[Ye.aV],useFactory:function(Le){return()=>Le.scrollStrategies.reposition()}};class kt{constructor(At,Me){this.source=At,this.value=Me}}const Gt=(0,a.Kr)((0,a.sb)((0,a.Id)((0,a.FD)(class{constructor(Le,At,Me,We,Ut){this._elementRef=Le,this._defaultErrorStateMatcher=At,this._parentForm=Me,this._parentFormGroup=We,this.ngControl=Ut}})))),Zt=new u.OlP("MatSelectTrigger");let $t=(()=>{class Le extends Gt{constructor(Me,We,Ut,vr,vn,Dn,Ti,Ha,es,Xo,Rs,yl,ro,ys){var xl,Ka,ks;super(vn,vr,Ti,Ha,Xo),this._viewportRuler=Me,this._changeDetectorRef=We,this._ngZone=Ut,this._dir=Dn,this._parentFormField=es,this._liveAnnouncer=ro,this._defaultOptions=ys,this._panelOpen=!1,this._compareWith=(ts,jl)=>ts===jl,this._uid="mat-select-"+Pt++,this._triggerAriaLabelledBy=null,this._destroy=new b.xQ,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+Pt++,this._panelDoneAnimatingStream=new b.xQ,this._overlayPanelClass=(null===(xl=this._defaultOptions)||void 0===xl?void 0:xl.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(ks=null===(Ka=this._defaultOptions)||void 0===Ka?void 0:Ka.disableOptionCentering)&&void 0!==ks&&ks,this.ariaLabel="",this.optionSelectionChanges=(0,Et.P)(()=>{const ts=this.options;return ts?ts.changes.pipe((0,_.O)(ts),(0,at.w)(()=>(0,g.T)(...ts.map(jl=>jl.onSelectionChange)))):this._ngZone.onStable.pipe((0,T.q)(1),(0,at.w)(()=>this.optionSelectionChanges))}),this.openedChange=new u.vpe,this._openedStream=this.openedChange.pipe((0,rt.h)(ts=>ts),(0,St.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,rt.h)(ts=>!ts),(0,St.U)(()=>{})),this.selectionChange=new u.vpe,this.valueChange=new u.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==ys?void 0:ys.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=ys.typeaheadDebounceInterval),this._scrollStrategyFactory=yl,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(Rs)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(Me){this._placeholder=Me,this.stateChanges.next()}get required(){return this._required}set required(Me){this._required=(0,o.Ig)(Me),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(Me){this._multiple=(0,o.Ig)(Me)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(Me){this._disableOptionCentering=(0,o.Ig)(Me)}get compareWith(){return this._compareWith}set compareWith(Me){this._compareWith=Me,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(Me){(Me!==this._value||this._multiple&&Array.isArray(Me))&&(this.options&&this._setSelectionByValue(Me),this._value=Me)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(Me){this._typeaheadDebounceInterval=(0,o.su)(Me)}get id(){return this._id}set id(Me){this._id=Me||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new dt.Ov(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,Xt.x)(),(0,A.R)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,A.R)(this._destroy)).subscribe(Me=>{Me.added.forEach(We=>We.select()),Me.removed.forEach(We=>We.deselect())}),this.options.changes.pipe((0,_.O)(null),(0,A.R)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const Me=this._getTriggerAriaLabelledby();if(Me!==this._triggerAriaLabelledBy){const We=this._elementRef.nativeElement;this._triggerAriaLabelledBy=Me,Me?We.setAttribute("aria-labelledby",Me):We.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(Me){Me.disabled&&this.stateChanges.next(),Me.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(Me){this.value=Me}registerOnChange(Me){this._onChange=Me}registerOnTouched(Me){this._onTouched=Me}setDisabledState(Me){this.disabled=Me,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var Me,We;return this.multiple?(null===(Me=this._selectionModel)||void 0===Me?void 0:Me.selected)||[]:null===(We=this._selectionModel)||void 0===We?void 0:We.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const Me=this._selectionModel.selected.map(We=>We.viewValue);return this._isRtl()&&Me.reverse(),Me.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(Me){this.disabled||(this.panelOpen?this._handleOpenKeydown(Me):this._handleClosedKeydown(Me))}_handleClosedKeydown(Me){const We=Me.keyCode,Ut=We===Rt.JH||We===Rt.LH||We===Rt.oh||We===Rt.SV,vr=We===Rt.K5||We===Rt.L_,vn=this._keyManager;if(!vn.isTyping()&&vr&&!(0,Rt.Vb)(Me)||(this.multiple||Me.altKey)&&Ut)Me.preventDefault(),this.open();else if(!this.multiple){const Dn=this.selected;vn.onKeydown(Me);const Ti=this.selected;Ti&&Dn!==Ti&&this._liveAnnouncer.announce(Ti.viewValue,1e4)}}_handleOpenKeydown(Me){const We=this._keyManager,Ut=Me.keyCode,vr=Ut===Rt.JH||Ut===Rt.LH,vn=We.isTyping();if(vr&&Me.altKey)Me.preventDefault(),this.close();else if(vn||Ut!==Rt.K5&&Ut!==Rt.L_||!We.activeItem||(0,Rt.Vb)(Me))if(!vn&&this._multiple&&Ut===Rt.A&&Me.ctrlKey){Me.preventDefault();const Dn=this.options.some(Ti=>!Ti.disabled&&!Ti.selected);this.options.forEach(Ti=>{Ti.disabled||(Dn?Ti.select():Ti.deselect())})}else{const Dn=We.activeItemIndex;We.onKeydown(Me),this._multiple&&vr&&Me.shiftKey&&We.activeItem&&We.activeItemIndex!==Dn&&We.activeItem._selectViaInteraction()}else Me.preventDefault(),We.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,T.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(Me){if(this._selectionModel.selected.forEach(We=>We.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&Me)Array.isArray(Me),Me.forEach(We=>this._selectValue(We)),this._sortValues();else{const We=this._selectValue(Me);We?this._keyManager.updateActiveItem(We):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(Me){const We=this.options.find(Ut=>{if(this._selectionModel.isSelected(Ut))return!1;try{return null!=Ut.value&&this._compareWith(Ut.value,Me)}catch(vr){return!1}});return We&&this._selectionModel.select(We),We}_initKeyManager(){this._keyManager=new ft.s1(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe((0,A.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe((0,A.R)(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const Me=(0,g.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,A.R)(Me)).subscribe(We=>{this._onSelect(We.source,We.isUserInput),We.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,g.T)(...this.options.map(We=>We._stateChanges)).pipe((0,A.R)(Me)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(Me,We){const Ut=this._selectionModel.isSelected(Me);null!=Me.value||this._multiple?(Ut!==Me.selected&&(Me.selected?this._selectionModel.select(Me):this._selectionModel.deselect(Me)),We&&this._keyManager.setActiveItem(Me),this.multiple&&(this._sortValues(),We&&this.focus())):(Me.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(Me.value)),Ut!==this._selectionModel.isSelected(Me)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const Me=this.options.toArray();this._selectionModel.sort((We,Ut)=>this.sortComparator?this.sortComparator(We,Ut,Me):Me.indexOf(We)-Me.indexOf(Ut)),this.stateChanges.next()}}_propagateChanges(Me){let We=null;We=this.multiple?this.selected.map(Ut=>Ut.value):this.selected?this.selected.value:Me,this._value=We,this.valueChange.emit(We),this._onChange(We),this.selectionChange.emit(this._getChangeEvent(We)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var Me;return!this._panelOpen&&!this.disabled&&(null===(Me=this.options)||void 0===Me?void 0:Me.length)>0}focus(Me){this._elementRef.nativeElement.focus(Me)}_getPanelAriaLabelledby(){var Me;if(this.ariaLabel)return null;const We=null===(Me=this._parentFormField)||void 0===Me?void 0:Me.getLabelId();return this.ariaLabelledby?(We?We+" ":"")+this.ariaLabelledby:We}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var Me;if(this.ariaLabel)return null;const We=null===(Me=this._parentFormField)||void 0===Me?void 0:Me.getLabelId();let Ut=(We?We+" ":"")+this._valueId;return this.ariaLabelledby&&(Ut+=" "+this.ariaLabelledby),Ut}_panelDoneAnimating(Me){this.openedChange.emit(Me)}setDescribedByIds(Me){this._ariaDescribedby=Me.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.Y36(nt.rL),u.Y36(u.sBO),u.Y36(u.R0b),u.Y36(a.rD),u.Y36(u.SBq),u.Y36(O.Is,8),u.Y36(e.F,8),u.Y36(e.sg,8),u.Y36(Oe,8),u.Y36(e.a5,10),u.$8M("tabindex"),u.Y36(Yt),u.Y36(ft.Kd),u.Y36(Fe,8))},Le.\u0275dir=u.lG2({type:Le,viewQuery:function(Me,We){if(1&Me&&(u.Gf(lr,5),u.Gf(Ue,5),u.Gf(Ye.pI,5)),2&Me){let Ut;u.iGM(Ut=u.CRH())&&(We.trigger=Ut.first),u.iGM(Ut=u.CRH())&&(We.panel=Ut.first),u.iGM(Ut=u.CRH())&&(We._overlayDir=Ut.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[u.qOj,u.TTD]}),Le})(),nr=(()=>{class Le extends $t{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(Me,We,Ut){const vr=this._getItemHeight();return Math.min(Math.max(0,vr*Me-We+vr/2),Ut)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe((0,A.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,T.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(Me){const We=(0,a.CB)(Me,this.options,this.optionGroups),Ut=this._getItemHeight();this.panel.nativeElement.scrollTop=0===Me&&1===We?0:(0,a.jH)((Me+We)*Ut,Ut,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(Me){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(Me)}_getChangeEvent(Me){return new kt(this,Me)}_calculateOverlayOffsetX(){const Me=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),We=this._viewportRuler.getViewportSize(),Ut=this._isRtl(),vr=this.multiple?56:32;let vn;if(this.multiple)vn=40;else if(this.disableOptionCentering)vn=16;else{let Ha=this._selectionModel.selected[0]||this.options.first;vn=Ha&&Ha.group?32:16}Ut||(vn*=-1);const Dn=0-(Me.left+vn-(Ut?vr:0)),Ti=Me.right+vn-We.width+(Ut?0:vr);Dn>0?vn+=Dn+8:Ti>0&&(vn-=Ti+8),this._overlayDir.offsetX=Math.round(vn),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(Me,We,Ut){const vr=this._getItemHeight(),vn=(vr-this._triggerRect.height)/2,Dn=Math.floor(256/vr);let Ti;return this.disableOptionCentering?0:(Ti=0===this._scrollTop?Me*vr:this._scrollTop===Ut?(Me-(this._getItemCount()-Dn))*vr+(vr-(this._getItemCount()*vr-256)%vr):We-vr/2,Math.round(-1*Ti-vn))}_checkOverlayWithinViewport(Me){const We=this._getItemHeight(),Ut=this._viewportRuler.getViewportSize(),vr=this._triggerRect.top-8,vn=Ut.height-this._triggerRect.bottom-8,Dn=Math.abs(this._offsetY),Ha=Math.min(this._getItemCount()*We,256)-Dn-this._triggerRect.height;Ha>vn?this._adjustPanelUp(Ha,vn):Dn>vr?this._adjustPanelDown(Dn,vr,Me):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(Me,We){const Ut=Math.round(Me-We);this._scrollTop-=Ut,this._offsetY-=Ut,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(Me,We,Ut){const vr=Math.round(Me-We);if(this._scrollTop+=vr,this._offsetY+=vr,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=Ut)return this._scrollTop=Ut,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const Me=this._getItemHeight(),We=this._getItemCount(),Ut=Math.min(We*Me,256),vn=We*Me-Ut;let Dn;Dn=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),Dn+=(0,a.CB)(Dn,this.options,this.optionGroups);const Ti=Ut/2;this._scrollTop=this._calculateOverlayScroll(Dn,Ti,vn),this._offsetY=this._calculateOverlayOffsetY(Dn,Ti,vn),this._checkOverlayWithinViewport(vn)}_getOriginBasedOnOption(){const Me=this._getItemHeight(),We=(Me-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-We+Me/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return Le.\u0275fac=function(){let At;return function(We){return(At||(At=u.n5z(Le)))(We||Le)}}(),Le.\u0275cmp=u.Xpm({type:Le,selectors:[["mat-select"]],contentQueries:function(Me,We,Ut){if(1&Me&&(u.Suo(Ut,Zt,5),u.Suo(Ut,a.ey,5),u.Suo(Ut,a.K7,5)),2&Me){let vr;u.iGM(vr=u.CRH())&&(We.customTrigger=vr.first),u.iGM(vr=u.CRH())&&(We.options=vr),u.iGM(vr=u.CRH())&&(We.optionGroups=vr)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(Me,We){1&Me&&u.NdJ("keydown",function(vr){return We._handleKeydown(vr)})("focus",function(){return We._onFocus()})("blur",function(){return We._onBlur()}),2&Me&&(u.uIk("id",We.id)("tabindex",We.tabIndex)("aria-controls",We.panelOpen?We.id+"-panel":null)("aria-expanded",We.panelOpen)("aria-label",We.ariaLabel||null)("aria-required",We.required.toString())("aria-disabled",We.disabled.toString())("aria-invalid",We.errorState)("aria-describedby",We._ariaDescribedby||null)("aria-activedescendant",We._getAriaActiveDescendant()),u.ekj("mat-select-disabled",We.disabled)("mat-select-invalid",We.errorState)("mat-select-required",We.required)("mat-select-empty",We.empty)("mat-select-multiple",We.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[u._Bn([{provide:se,useExisting:Le},{provide:a.HF,useExisting:Le}]),u.qOj],ngContentSelectors:Ie,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(Me,We){if(1&Me&&(u.F$t(Re),u.TgZ(0,"div",0,1),u.NdJ("click",function(){return We.toggle()}),u.TgZ(3,"div",2),u.YNc(4,Ze,2,1,"span",3),u.YNc(5,ke,3,2,"span",4),u.qZA(),u.TgZ(6,"div",5),u._UZ(7,"div",6),u.qZA(),u.qZA(),u.YNc(8,De,4,14,"ng-template",7),u.NdJ("backdropClick",function(){return We.close()})("attach",function(){return We._onAttached()})("detach",function(){return We.close()})),2&Me){const Ut=u.MAs(1);u.uIk("aria-owns",We.panelOpen?We.id+"-panel":null),u.xp6(3),u.Q6J("ngSwitch",We.empty),u.uIk("id",We._valueId),u.xp6(1),u.Q6J("ngSwitchCase",!0),u.xp6(1),u.Q6J("ngSwitchCase",!1),u.xp6(3),u.Q6J("cdkConnectedOverlayPanelClass",We._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",We._scrollStrategy)("cdkConnectedOverlayOrigin",Ut)("cdkConnectedOverlayOpen",We.panelOpen)("cdkConnectedOverlayPositions",We._positions)("cdkConnectedOverlayMinWidth",null==We._triggerRect?null:We._triggerRect.width)("cdkConnectedOverlayOffsetY",We._offsetY)}},directives:[Ye.xu,K.RF,K.n9,Ye.pI,K.ED,K.mk],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[Ke.transformPanelWrap,Ke.transformPanel]},changeDetection:0}),Le})(),dr=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275mod=u.oAB({type:Le}),Le.\u0275inj=u.cJS({providers:[ht],imports:[[K.ez,Ye.U8,a.Ng,a.BQ],nt.ZD,Je,a.Ng,a.BQ]}),Le})();function Tr(Le,At){if(1&Le&&(u.TgZ(0,"mat-option",5),u._uU(1),u.qZA()),2&Le){const Me=At.$implicit;u.Q6J("value",Me),u.xp6(1),u.Oqu(Me)}}let wr=(()=>{class Le{constructor(Me,We){this.formBuilder=Me,this.dataManagerService=We,this.fiatsForm=new e.cw({}),this.selectedBase=t[0]}ngOnInit(){this.fiatsForm=this.createFiatsFormGroup(),this.dataManagerService.setBaseCurrency(this.selectedBase),this.subscribeToSelectedFiatCurrency()}getFiatsSymbols(){return t}createFiatsFormGroup(){var Me;let We=this.formBuilder.group({base:[]});return null===(Me=We.get("base"))||void 0===Me||Me.setValue(this.selectedBase),We}subscribeToSelectedFiatCurrency(){var Me,We;null===(We=null===(Me=this.fiatsForm)||void 0===Me?void 0:Me.get("base"))||void 0===We||We.valueChanges.subscribe(Ut=>{this.dataManagerService.sendRequestForData(Ut),this.dataManagerService.setBaseCurrency(Ut)})}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.Y36(e.qu),u.Y36(y.L))},Le.\u0275cmp=u.Xpm({type:Le,selectors:[["app-header"]],decls:10,vars:2,consts:[[1,"custom"],[1,"element-center"],[3,"formGroup"],["formControlName","base"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(Me,We){1&Me&&(u.TgZ(0,"div"),u.TgZ(1,"mat-toolbar",0),u.TgZ(2,"span",1),u.TgZ(3,"b"),u._uU(4,"Crypto"),u.qZA(),u.qZA(),u.TgZ(5,"span",1),u.TgZ(6,"form",2),u.TgZ(7,"mat-form-field"),u.TgZ(8,"mat-select",3),u.YNc(9,Tr,2,2,"mat-option",4),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&Me&&(u.xp6(6),u.Q6J("formGroup",We.fiatsForm),u.xp6(3),u.Q6J("ngForOf",We.getFiatsSymbols()))},directives:[c,e._Y,e.JL,e.sg,Be,nr,e.JJ,e.u,K.sg,a.ey],styles:[".element-center[_ngcontent-%COMP%]{flex:1 1 auto;text-align:center}.custom[_ngcontent-%COMP%]{background-color:#73b5eb}"]}),Le})();var mr=Q(6215),_r=Q(7574),Sr=Q(3342);const Er={provide:u.tb,useFactory:function(Le,At){return()=>{if((0,K.NF)(At)){const Me=Array.from(Le.querySelectorAll(`[class*=${Zr}]`)),We=/\bflex-layout-.+?\b/g;Me.forEach(Ut=>{Ut.classList.contains(`${Zr}ssr`)&&Ut.parentNode?Ut.parentNode.removeChild(Ut):Ut.className.replace(We,"")})}}},deps:[K.K0,u.Lbi],multi:!0},Zr="flex-layout-";let an=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275mod=u.oAB({type:Le}),Le.\u0275inj=u.cJS({providers:[Er]}),Le})();class gn{constructor(At=!1,Me="all",We="",Ut="",vr=0){this.matches=At,this.mediaQuery=Me,this.mqAlias=We,this.suffix=Ut,this.priority=vr,this.property=""}clone(){return new gn(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let Vn=(()=>{class Le{constructor(){this.stylesheet=new Map}addStyleToElement(Me,We,Ut){const vr=this.stylesheet.get(Me);vr?vr.set(We,Ut):this.stylesheet.set(Me,new Map([[We,Ut]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(Me,We){const Ut=this.stylesheet.get(Me);let vr="";if(Ut){const vn=Ut.get(We);("number"==typeof vn||"string"==typeof vn)&&(vr=vn+"")}return vr}}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275prov=(0,u.Yz7)({factory:function(){return new Le},token:Le,providedIn:"root"}),Le})();const Gn={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[]},Ln=new u.OlP("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>Gn}),ln=new u.OlP("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),qr=new u.OlP("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function Pr(Le,At){return Le=Le?Le.clone():new gn,At&&(Le.mqAlias=At.alias,Le.mediaQuery=At.mediaQuery,Le.suffix=At.suffix,Le.priority=At.priority),Le}const un="inline",dn=["row","column","row-reverse","column-reverse"];function Bn(Le){if(Le)switch(Le.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":Le="wrap-reverse";break;case"no":case"none":case"nowrap":Le="nowrap";break;default:Le="wrap"}return Le}let Fn=(()=>{class Le{constructor(Me,We,Ut,vr){this.elementRef=Me,this.styleBuilder=We,this.styler=Ut,this.marshal=vr,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new b.xQ,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(Me){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,Me,this.marshal.activatedAlias)}ngOnChanges(Me){Object.keys(Me).forEach(We=>{if(-1!==this.inputs.indexOf(We)){const Ut=We.split(".").slice(1).join(".");this.setValue(Me[We].currentValue,Ut)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(Me=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),Me)}addStyles(Me,We){const Ut=this.styleBuilder,vr=Ut.shouldCache;let vn=this.styleCache.get(Me);(!vn||!vr)&&(vn=Ut.buildStyles(Me,We),vr&&this.styleCache.set(Me,vn)),this.mru=Object.assign({},vn),this.applyStyleToElement(vn),Ut.sideEffect(Me,vn,We)}clearStyles(){Object.keys(this.mru).forEach(Me=>{this.mru[Me]=""}),this.applyStyleToElement(this.mru),this.mru={}}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(Me,We=!1){if(Me){const[Ut,vr]=this.styler.getFlowDirection(Me);if(!vr&&We){const vn=function(Le){let[At,Me,We]=function(Le){Le=Le?Le.toLowerCase():"";let[At,Me,We]=Le.split(" ");return dn.find(Ut=>Ut===At)||(At=dn[0]),Me===un&&(Me=We!==un?We:"",We=un),[At,Bn(Me),!!We]}(Le);return function(Le,At=null,Me=!1){return{display:Me?"inline-flex":"flex","box-sizing":"border-box","flex-direction":Le,"flex-wrap":At||null}}(At,Me,We)}(Ut);this.styler.applyStyleToElements(vn,[Me])}return Ut.trim()}return"row"}hasWrap(Me){return this.styler.hasWrap(Me)}applyStyleToElement(Me,We,Ut=this.nativeElement){this.styler.applyStyleToElement(Ut,Me,We)}setValue(Me,We){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,Me,We)}updateWithValue(Me){this.currentValue!==Me&&(this.addStyles(Me),this.currentValue=Me)}}return Le.\u0275fac=function(Me){u.$Z()},Le.\u0275dir=u.lG2({type:Le,features:[u.TTD]}),Le})();const ar=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],Bt="(orientation: portrait) and (max-width: 599.98px)",Qt="(orientation: landscape) and (max-width: 959.98px)",yr="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",Dr="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",$r="(orientation: portrait) and (min-width: 840px)",Xr="(orientation: landscape) and (min-width: 1280px)",Mr={HANDSET:`${Bt}, ${Qt}`,TABLET:`${yr} , ${Dr}`,WEB:`${$r}, ${Xr} `,HANDSET_PORTRAIT:`${Bt}`,TABLET_PORTRAIT:`${yr} `,WEB_PORTRAIT:`${$r}`,HANDSET_LANDSCAPE:`${Qt}`,TABLET_LANDSCAPE:`${Dr}`,WEB_LANDSCAPE:`${Xr}`},Lr=[{alias:"handset",priority:2e3,mediaQuery:Mr.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:Mr.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:Mr.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:Mr.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:Mr.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:Mr.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:Mr.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:Mr.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:Mr.WEB_PORTRAIT,overlapping:!0}],Ir=/(\.|-|_)/g;function Fr(Le){let At=Le.length>0?Le.charAt(0):"",Me=Le.length>1?Le.slice(1):"";return At.toUpperCase()+Me}function In(Le,At=[]){const Me={};return Le.forEach(We=>{Me[We.alias]=We}),At.forEach(We=>{Me[We.alias]?function(Le,...At){if(null==Le)throw TypeError("Cannot convert undefined or null to object");for(let Me of At)if(null!=Me)for(let We in Me)Me.hasOwnProperty(We)&&(Le[We]=Me[We])}(Me[We.alias],We):Me[We.alias]=We}),function(Le){return Le.forEach(At=>{At.suffix||(At.suffix=function(Le){return Le.replace(Ir,"|").split("|").map(Fr).join("")}(At.alias),At.overlapping=!!At.overlapping)}),Le}(Object.keys(Me).map(We=>Me[We]))}const nn=new u.OlP("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const Le=(0,u.f3M)(qr),At=(0,u.f3M)(Ln),Me=[].concat.apply([],(Le||[]).map(Ut=>Array.isArray(Ut)?Ut:[Ut]));return In((At.disableDefaultBps?[]:ar).concat(At.addOrientationBps?Lr:[]),Me)}});function Cn(Le,At){return(At&&At.priority||0)-(Le&&Le.priority||0)}function Ur(Le,At){return(Le.priority||0)-(At.priority||0)}let Kr=(()=>{class Le{constructor(Me){this.findByMap=new Map,this.items=[...Me].sort(Ur)}findByAlias(Me){return Me?this.findWithPredicate(Me,We=>We.alias==Me):null}findByQuery(Me){return this.findWithPredicate(Me,We=>We.mediaQuery==Me)}get overlappings(){return this.items.filter(Me=>1==Me.overlapping)}get aliases(){return this.items.map(Me=>Me.alias)}get suffixes(){return this.items.map(Me=>Me.suffix?Me.suffix:"")}findWithPredicate(Me,We){let Ut=this.findByMap.get(Me);return Ut||(Ut=this.items.find(We)||null,this.findByMap.set(Me,Ut)),Ut||null}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.LFG(nn))},Le.\u0275prov=(0,u.Yz7)({factory:function(){return new Le((0,u.LFG)(nn))},token:Le,providedIn:"root"}),Le})(),An=(()=>{class Le{constructor(Me,We,Ut){this._zone=Me,this._platformId=We,this._document=Ut,this.source=new mr.X(new gn(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const Me=[];return this.registry.forEach((We,Ut)=>{We.matches&&Me.push(Ut)}),Me}isActive(Me){const We=this.registry.get(Me);return We?We.matches:this.registerQuery(Me).some(Ut=>Ut.matches)}observe(Me,We=!1){if(Me&&Me.length){const Ut=this._observable$.pipe((0,rt.h)(vn=>!We||Me.indexOf(vn.mediaQuery)>-1)),vr=new _r.y(vn=>{const Dn=this.registerQuery(Me);if(Dn.length){const Ti=Dn.pop();Dn.forEach(Ha=>{vn.next(Ha)}),this.source.next(Ti)}vn.complete()});return(0,g.T)(vr,Ut)}return this._observable$}registerQuery(Me){const We=Array.isArray(Me)?Me:[Me],Ut=[];return function(Le,At){const Me=Le.filter(We=>!wn[We]);if(Me.length>0){const We=Me.join(", ");try{const Ut=At.createElement("style");Ut.setAttribute("type","text/css"),Ut.styleSheet||Ut.appendChild(At.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${We} {.fx-query-test{ }}\n`)),At.head.appendChild(Ut),Me.forEach(vr=>wn[vr]=Ut)}catch(Ut){console.error(Ut)}}}(We,this._document),We.forEach(vr=>{const vn=Ti=>{this._zone.run(()=>this.source.next(new gn(Ti.matches,vr)))};let Dn=this.registry.get(vr);Dn||(Dn=this.buildMQL(vr),Dn.addListener(vn),this.pendingRemoveListenerFns.push(()=>Dn.removeListener(vn)),this.registry.set(vr,Dn)),Dn.matches&&Ut.push(new gn(!0,vr))}),Ut}ngOnDestroy(){let Me;for(;Me=this.pendingRemoveListenerFns.pop();)Me()}buildMQL(Me){return function(Le,At){return At&&window.matchMedia("all").addListener?window.matchMedia(Le):{matches:"all"===Le||""===Le,media:Le,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(Me,(0,K.NF)(this._platformId))}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.LFG(u.R0b),u.LFG(u.Lbi),u.LFG(K.K0))},Le.\u0275prov=(0,u.Yz7)({factory:function(){return new Le((0,u.LFG)(u.R0b),(0,u.LFG)(u.Lbi),(0,u.LFG)(K.K0))},token:Le,providedIn:"root"}),Le})();const wn={},mi="print",ra={alias:mi,mediaQuery:mi,priority:1e3};let ka=(()=>{class Le{constructor(Me,We,Ut){this.breakpoints=Me,this.layoutConfig=We,this._document=Ut,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.isPrinting=!1,this.queue=new fa,this.deactivations=[]}withPrintQuery(Me){return[...Me,mi]}isPrintEvent(Me){return Me.mediaQuery.startsWith(mi)}get printAlias(){return this.layoutConfig.printWithBreakpoints||[]}get printBreakPoints(){return this.printAlias.map(Me=>this.breakpoints.findByAlias(Me)).filter(Me=>null!==Me)}getEventBreakpoints({mediaQuery:Me}){const We=this.breakpoints.findByQuery(Me);return(We?[...this.printBreakPoints,We]:this.printBreakPoints).sort(Cn)}updateEvent(Me){let We=this.breakpoints.findByQuery(Me.mediaQuery);return this.isPrintEvent(Me)&&(We=this.getEventBreakpoints(Me)[0],Me.mediaQuery=We?We.mediaQuery:""),Pr(Me,We)}registerBeforeAfterPrintHooks(Me){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const We=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(Me,this.getEventBreakpoints(new gn(!0,mi))),Me.updateStyles())},Ut=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(Me),Me.updateStyles())};this._document.defaultView.addEventListener("beforeprint",We),this._document.defaultView.addEventListener("afterprint",Ut),this.beforePrintEventListeners.push(We),this.afterPrintEventListeners.push(Ut)}interceptEvents(Me){return this.registerBeforeAfterPrintHooks(Me),We=>{this.isPrintEvent(We)?We.matches&&!this.isPrinting?(this.startPrinting(Me,this.getEventBreakpoints(We)),Me.updateStyles()):!We.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(Me),Me.updateStyles()):this.collectActivations(We)}}blockPropagation(){return Me=>!(this.isPrinting||this.isPrintEvent(Me))}startPrinting(Me,We){this.isPrinting=!0,Me.activatedBreakpoints=this.queue.addPrintBreakpoints(We)}stopPrinting(Me){Me.activatedBreakpoints=this.deactivations,this.deactivations=[],this.queue.clear(),this.isPrinting=!1}collectActivations(Me){if(!this.isPrinting||this.isPrintingBeforeAfterEvent)if(Me.matches)this.isPrintingBeforeAfterEvent||(this.deactivations=[]);else{const We=this.breakpoints.findByQuery(Me.mediaQuery);We&&(this.deactivations.push(We),this.deactivations.sort(Cn))}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(Me=>this._document.defaultView.removeEventListener("beforeprint",Me)),this.afterPrintEventListeners.forEach(Me=>this._document.defaultView.removeEventListener("afterprint",Me)))}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.LFG(Kr),u.LFG(Ln),u.LFG(K.K0))},Le.\u0275prov=(0,u.Yz7)({factory:function(){return new Le((0,u.LFG)(Kr),(0,u.LFG)(Ln),(0,u.LFG)(K.K0))},token:Le,providedIn:"root"}),Le})();class fa{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(At){return At.push(ra),At.sort(Cn),At.forEach(Me=>this.addBreakpoint(Me)),this.printBreakpoints}addBreakpoint(At){var Le;At&&void 0===this.printBreakpoints.find(We=>We.mediaQuery===At.mediaQuery)&&(this.printBreakpoints=(Le=At)&&Le.mediaQuery.startsWith(mi)?[At,...this.printBreakpoints]:[...this.printBreakpoints,At])}clear(){this.printBreakpoints=[]}}function Na(Le){for(let At in Le){let Me=Le[At]||"";switch(At){case"display":Le.display="flex"===Me?["-webkit-flex","flex"]:"inline-flex"===Me?["-webkit-inline-flex","inline-flex"]:Me;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":Le["-webkit-"+At]=Me;break;case"flex-direction":Me=Me||"row",Le["-webkit-flex-direction"]=Me,Le["flex-direction"]=Me;break;case"order":Le.order=Le["-webkit-"+At]=isNaN(+Me)?"0":Me}}return Le}let Vi=(()=>{class Le{constructor(Me,We,Ut,vr){this._serverStylesheet=Me,this._serverModuleLoaded=We,this._platformId=Ut,this.layoutConfig=vr}applyStyleToElement(Me,We,Ut=null){let vr={};"string"==typeof We&&(vr[We]=Ut,We=vr),vr=this.layoutConfig.disableVendorPrefixes?We:Na(We),this._applyMultiValueStyleToElement(vr,Me)}applyStyleToElements(Me,We=[]){const Ut=this.layoutConfig.disableVendorPrefixes?Me:Na(Me);We.forEach(vr=>{this._applyMultiValueStyleToElement(Ut,vr)})}getFlowDirection(Me){const We="flex-direction";let Ut=this.lookupStyle(Me,We);return[Ut||"row",this.lookupInlineStyle(Me,We)||(0,K.PM)(this._platformId)&&this._serverModuleLoaded?Ut:""]}hasWrap(Me){return"wrap"===this.lookupStyle(Me,"flex-wrap")}lookupAttributeValue(Me,We){return Me.getAttribute(We)||""}lookupInlineStyle(Me,We){return(0,K.NF)(this._platformId)?Me.style.getPropertyValue(We):this._getServerStyle(Me,We)}lookupStyle(Me,We,Ut=!1){let vr="";return Me&&((vr=this.lookupInlineStyle(Me,We))||((0,K.NF)(this._platformId)?Ut||(vr=getComputedStyle(Me).getPropertyValue(We)):this._serverModuleLoaded&&(vr=this._serverStylesheet.getStyleForElement(Me,We)))),vr?vr.trim():""}_applyMultiValueStyleToElement(Me,We){Object.keys(Me).sort().forEach(Ut=>{const vr=Me[Ut],vn=Array.isArray(vr)?vr:[vr];vn.sort();for(let Dn of vn)Dn=Dn?Dn+"":"",(0,K.NF)(this._platformId)||!this._serverModuleLoaded?(0,K.NF)(this._platformId)?We.style.setProperty(Ut,Dn):this._setServerStyle(We,Ut,Dn):this._serverStylesheet.addStyleToElement(We,Ut,Dn)})}_setServerStyle(Me,We,Ut){We=We.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const vr=this._readStyleAttribute(Me);vr[We]=Ut||"",this._writeStyleAttribute(Me,vr)}_getServerStyle(Me,We){return this._readStyleAttribute(Me)[We]||""}_readStyleAttribute(Me){const We={},Ut=Me.getAttribute("style");if(Ut){const vr=Ut.split(/;+/g);for(let vn=0;vn<vr.length;vn++){const Dn=vr[vn].trim();if(Dn.length>0){const Ti=Dn.indexOf(":");if(-1===Ti)throw new Error(`Invalid CSS style: ${Dn}`);We[Dn.substr(0,Ti).trim()]=Dn.substr(Ti+1).trim()}}}return We}_writeStyleAttribute(Me,We){let Ut="";for(const vr in We)We[vr]&&(Ut+=vr+":"+We[vr]+";");Me.setAttribute("style",Ut)}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.LFG(Vn),u.LFG(ln),u.LFG(u.Lbi),u.LFG(Ln))},Le.\u0275prov=(0,u.Yz7)({factory:function(){return new Le((0,u.LFG)(Vn),(0,u.LFG)(ln),(0,u.LFG)(u.Lbi),(0,u.LFG)(Ln))},token:Le,providedIn:"root"}),Le})();class ia{constructor(){this.shouldCache=!0}sideEffect(At,Me,We){}}function Qi(Le,At="1",Me="1"){let We=[At,Me,Le],Ut=Le.indexOf("calc");if(Ut>0){We[2]=go(Le.substring(Ut).trim());let vr=Le.substr(0,Ut).trim().split(" ");2==vr.length&&(We[0]=vr[0],We[1]=vr[1])}else if(0==Ut)We[2]=go(Le.trim());else{let vr=Le.split(" ");We=3===vr.length?vr:[At,Me,Le]}return We}function go(Le){return Le.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}let Ji=(()=>{class Le{constructor(Me,We,Ut){this.matchMedia=Me,this.breakpoints=We,this.hook=Ut,this.activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new b.xQ,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?this.activatedBreakpoints[0].alias:""}onMediaChange(Me){const We=this.findByQuery(Me.mediaQuery);We&&((Me=Pr(Me,We)).matches&&-1===this.activatedBreakpoints.indexOf(We)?(this.activatedBreakpoints.push(We),this.activatedBreakpoints.sort(Cn),this.updateStyles()):!Me.matches&&-1!==this.activatedBreakpoints.indexOf(We)&&(this.activatedBreakpoints.splice(this.activatedBreakpoints.indexOf(We),1),this.activatedBreakpoints.sort(Cn),this.updateStyles()))}init(Me,We,Ut,vr,vn=[]){Dt(this.updateMap,Me,We,Ut),Dt(this.clearMap,Me,We,vr),this.buildElementKeyMap(Me,We),this.watchExtraTriggers(Me,We,vn)}getValue(Me,We,Ut){const vr=this.elementMap.get(Me);if(vr){const vn=void 0!==Ut?vr.get(Ut):this.getActivatedValues(vr,We);if(vn)return vn.get(We)}}hasValue(Me,We){const Ut=this.elementMap.get(Me);if(Ut){const vr=this.getActivatedValues(Ut,We);if(vr)return void 0!==vr.get(We)||!1}return!1}setValue(Me,We,Ut,vr){let vn=this.elementMap.get(Me);if(vn){const Ti=(vn.get(vr)||new Map).set(We,Ut);vn.set(vr,Ti),this.elementMap.set(Me,vn)}else vn=(new Map).set(vr,(new Map).set(We,Ut)),this.elementMap.set(Me,vn);const Dn=this.getValue(Me,We);void 0!==Dn&&this.updateElement(Me,We,Dn)}trackValue(Me,We){return this.subject.asObservable().pipe((0,rt.h)(Ut=>Ut.element===Me&&Ut.key===We))}updateStyles(){this.elementMap.forEach((Me,We)=>{const Ut=new Set(this.elementKeyMap.get(We));let vr=this.getActivatedValues(Me);vr&&vr.forEach((vn,Dn)=>{this.updateElement(We,Dn,vn),Ut.delete(Dn)}),Ut.forEach(vn=>{if(vr=this.getActivatedValues(Me,vn),vr){const Dn=vr.get(vn);this.updateElement(We,vn,Dn)}else this.clearElement(We,vn)})})}clearElement(Me,We){const Ut=this.clearMap.get(Me);if(Ut){const vr=Ut.get(We);vr&&(vr(),this.subject.next({element:Me,key:We,value:""}))}}updateElement(Me,We,Ut){const vr=this.updateMap.get(Me);if(vr){const vn=vr.get(We);vn&&(vn(Ut),this.subject.next({element:Me,key:We,value:Ut}))}}releaseElement(Me){const We=this.watcherMap.get(Me);We&&(We.forEach(vr=>vr.unsubscribe()),this.watcherMap.delete(Me));const Ut=this.elementMap.get(Me);Ut&&(Ut.forEach((vr,vn)=>Ut.delete(vn)),this.elementMap.delete(Me))}triggerUpdate(Me,We){const Ut=this.elementMap.get(Me);if(Ut){const vr=this.getActivatedValues(Ut,We);vr&&(We?this.updateElement(Me,We,vr.get(We)):vr.forEach((vn,Dn)=>this.updateElement(Me,Dn,vn)))}}buildElementKeyMap(Me,We){let Ut=this.elementKeyMap.get(Me);Ut||(Ut=new Set,this.elementKeyMap.set(Me,Ut)),Ut.add(We)}watchExtraTriggers(Me,We,Ut){if(Ut&&Ut.length){let vr=this.watcherMap.get(Me);if(vr||(vr=new Map,this.watcherMap.set(Me,vr)),!vr.get(We)){const Dn=(0,g.T)(...Ut).subscribe(()=>{const Ti=this.getValue(Me,We);this.updateElement(Me,We,Ti)});vr.set(We,Dn)}}}findByQuery(Me){return this.breakpoints.findByQuery(Me)}getActivatedValues(Me,We){for(let vr=0;vr<this.activatedBreakpoints.length;vr++){const Dn=Me.get(this.activatedBreakpoints[vr].alias);if(Dn&&(void 0===We||Dn.has(We)&&null!=Dn.get(We)))return Dn}const Ut=Me.get("");return void 0===We||Ut&&Ut.has(We)?Ut:void 0}observeActivations(){const We=this.breakpoints.items.map(Ut=>Ut.mediaQuery);this.matchMedia.observe(this.hook.withPrintQuery(We)).pipe((0,Sr.b)(this.hook.interceptEvents(this)),(0,rt.h)(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.LFG(An),u.LFG(Kr),u.LFG(ka))},Le.\u0275prov=(0,u.Yz7)({factory:function(){return new Le((0,u.LFG)(An),(0,u.LFG)(Kr),(0,u.LFG)(ka))},token:Le,providedIn:"root"}),Le})();function Dt(Le,At,Me,We){if(void 0!==We){let Ut=Le.get(At);Ut||(Ut=new Map,Le.set(At,Ut)),Ut.set(Me,We)}}const _t="inline",st=["row","column","row-reverse","column-reverse"];function hn(Le){Le=Le?Le.toLowerCase():"";let[At,Me,We]=Le.split(" ");return st.find(Ut=>Ut===At)||(At=st[0]),Me===_t&&(Me=We!==_t?We:"",We=_t),[At,qi(Me),!!We]}function ri(Le){let[At]=hn(Le);return At.indexOf("row")>-1}function qi(Le){if(Le)switch(Le.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":Le="wrap-reverse";break;case"no":case"none":case"nowrap":Le="nowrap";break;default:Le="wrap"}return Le}let as=(()=>{class Le extends ia{buildStyles(Me){return function(Le){let[At,Me,We]=hn(Le);return function(Le,At=null,Me=!1){return{display:Me?"inline-flex":"flex","box-sizing":"border-box","flex-direction":Le,"flex-wrap":At||null}}(At,Me,We)}(Me)}}return Le.\u0275fac=function(){let At;return function(We){return(At||(At=u.n5z(Le)))(We||Le)}}(),Le.\u0275prov=(0,u.Yz7)({factory:function(){return new Le},token:Le,providedIn:"root"}),Le})();const aa=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let os=(()=>{class Le extends Fn{constructor(Me,We,Ut,vr){super(Me,Ut,We,vr),this.DIRECTIVE_KEY="layout",this.styleCache=Bs,this.init()}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.Y36(u.SBq),u.Y36(Vi),u.Y36(as),u.Y36(Ji))},Le.\u0275dir=u.lG2({type:Le,features:[u.qOj]}),Le})(),Ls=(()=>{class Le extends os{constructor(){super(...arguments),this.inputs=aa}}return Le.\u0275fac=function(){let At;return function(We){return(At||(At=u.n5z(Le)))(We||Le)}}(),Le.\u0275dir=u.lG2({type:Le,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[u.qOj]}),Le})();const Bs=new Map,bs={"margin-left":null,"margin-right":null,"margin-top":null,"margin-bottom":null};let Ns=(()=>{class Le extends ia{constructor(Me){super(),this._styler=Me}buildStyles(Me,We){return Me.endsWith($a)?function(Le,At){const[Me,We]=Le.split(" "),vr=Ha=>`-${Ha}`;let vn="0px",Dn=vr(We||Me),Ti="0px";return"rtl"===At?Ti=vr(Me):vn=vr(Me),{margin:`0px ${vn} ${Dn} ${Ti}`}}(Me=Me.slice(0,Me.indexOf($a)),We.directionality):{}}sideEffect(Me,We,Ut){const vr=Ut.items;if(Me.endsWith($a)){const vn=function(Le,At){const[Me,We]=Le.split(" ");let vr="0px",Dn="0px";return"rtl"===At?Dn=Me:vr=Me,{padding:`0px ${vr} ${We||Me} ${Dn}`}}(Me=Me.slice(0,Me.indexOf($a)),Ut.directionality);this._styler.applyStyleToElements(vn,Ut.items)}else{const vn=vr.pop(),Dn=function(Le,At){const Me=So(At.directionality,At.layout),We=Object.assign({},bs);return We[Me]=Le,We}(Me,Ut);this._styler.applyStyleToElements(Dn,vr),this._styler.applyStyleToElements(bs,[vn])}}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.LFG(Vi))},Le.\u0275prov=(0,u.Yz7)({factory:function(){return new Le((0,u.LFG)(Vi))},token:Le,providedIn:"root"}),Le})();const Do=["fxLayoutGap","fxLayoutGap.xs","fxLayoutGap.sm","fxLayoutGap.md","fxLayoutGap.lg","fxLayoutGap.xl","fxLayoutGap.lt-sm","fxLayoutGap.lt-md","fxLayoutGap.lt-lg","fxLayoutGap.lt-xl","fxLayoutGap.gt-xs","fxLayoutGap.gt-sm","fxLayoutGap.gt-md","fxLayoutGap.gt-lg"];let qo=(()=>{class Le extends Fn{constructor(Me,We,Ut,vr,vn,Dn){super(Me,vn,vr,Dn),this.zone=We,this.directionality=Ut,this.styleUtils=vr,this.layout="row",this.DIRECTIVE_KEY="layout-gap",this.observerSubject=new b.xQ;const Ti=[this.directionality.change,this.observerSubject.asObservable()];this.init(Ti),this.marshal.trackValue(this.nativeElement,"layout").pipe((0,A.R)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}get childrenNodes(){const Me=this.nativeElement.children,We=[];for(let Ut=Me.length;Ut--;)We[Ut]=Me[Ut];return We}ngAfterContentInit(){this.buildChildObservable(),this.triggerUpdate()}ngOnDestroy(){super.ngOnDestroy(),this.observer&&this.observer.disconnect()}onLayoutChange(Me){const Ut=Me.value.split(" ");this.layout=Ut[0],st.find(vr=>vr===this.layout)||(this.layout="row"),this.triggerUpdate()}updateWithValue(Me){const We=this.childrenNodes.filter(Ut=>1===Ut.nodeType&&this.willDisplay(Ut)).sort((Ut,vr)=>{const vn=+this.styler.lookupStyle(Ut,"order"),Dn=+this.styler.lookupStyle(vr,"order");return isNaN(vn)||isNaN(Dn)||vn===Dn?0:vn>Dn?1:-1});if(We.length>0){const Ut=this.directionality.value,vr=this.layout;"row"===vr&&"rtl"===Ut?this.styleCache=Yo:"row"===vr&&"rtl"!==Ut?this.styleCache=xo:"column"===vr&&"rtl"===Ut?this.styleCache=ss:"column"===vr&&"rtl"!==Ut&&(this.styleCache=_s),this.addStyles(Me,{directionality:Ut,items:We,layout:vr})}}clearStyles(){const Me=Object.keys(this.mru).length>0,We=Me?"padding":So(this.directionality.value,this.layout);Me&&super.clearStyles(),this.styleUtils.applyStyleToElements({[We]:""},this.childrenNodes)}willDisplay(Me){const We=this.marshal.getValue(Me,"show-hide");return!0===We||void 0===We&&"none"!==this.styleUtils.lookupStyle(Me,"display")}buildChildObservable(){this.zone.runOutsideAngular(()=>{"undefined"!=typeof MutationObserver&&(this.observer=new MutationObserver(Me=>{Me.some(Ut=>Ut.addedNodes&&Ut.addedNodes.length>0||Ut.removedNodes&&Ut.removedNodes.length>0)&&this.observerSubject.next()}),this.observer.observe(this.nativeElement,{childList:!0}))})}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(O.Is),u.Y36(Vi),u.Y36(Ns),u.Y36(Ji))},Le.\u0275dir=u.lG2({type:Le,features:[u.qOj]}),Le})(),jo=(()=>{class Le extends qo{constructor(){super(...arguments),this.inputs=Do}}return Le.\u0275fac=function(){let At;return function(We){return(At||(At=u.n5z(Le)))(We||Le)}}(),Le.\u0275dir=u.lG2({type:Le,selectors:[["","fxLayoutGap",""],["","fxLayoutGap.xs",""],["","fxLayoutGap.sm",""],["","fxLayoutGap.md",""],["","fxLayoutGap.lg",""],["","fxLayoutGap.xl",""],["","fxLayoutGap.lt-sm",""],["","fxLayoutGap.lt-md",""],["","fxLayoutGap.lt-lg",""],["","fxLayoutGap.lt-xl",""],["","fxLayoutGap.gt-xs",""],["","fxLayoutGap.gt-sm",""],["","fxLayoutGap.gt-md",""],["","fxLayoutGap.gt-lg",""]],inputs:{fxLayoutGap:"fxLayoutGap","fxLayoutGap.xs":"fxLayoutGap.xs","fxLayoutGap.sm":"fxLayoutGap.sm","fxLayoutGap.md":"fxLayoutGap.md","fxLayoutGap.lg":"fxLayoutGap.lg","fxLayoutGap.xl":"fxLayoutGap.xl","fxLayoutGap.lt-sm":"fxLayoutGap.lt-sm","fxLayoutGap.lt-md":"fxLayoutGap.lt-md","fxLayoutGap.lt-lg":"fxLayoutGap.lt-lg","fxLayoutGap.lt-xl":"fxLayoutGap.lt-xl","fxLayoutGap.gt-xs":"fxLayoutGap.gt-xs","fxLayoutGap.gt-sm":"fxLayoutGap.gt-sm","fxLayoutGap.gt-md":"fxLayoutGap.gt-md","fxLayoutGap.gt-lg":"fxLayoutGap.gt-lg"},features:[u.qOj]}),Le})();const Yo=new Map,ss=new Map,xo=new Map,_s=new Map,$a=" grid";function So(Le,At){switch(At){case"column":return"margin-bottom";case"column-reverse":return"margin-top";case"row":return"rtl"===Le?"margin-left":"margin-right";case"row-reverse":return"rtl"===Le?"margin-right":"margin-left";default:return"rtl"===Le?"margin-left":"margin-right"}}function Ve(Le,...At){if(null==Le)throw TypeError("Cannot convert undefined or null to object");for(let Me of At)if(null!=Me)for(let We in Me)Me.hasOwnProperty(We)&&(Le[We]=Me[We]);return Le}let qe=(()=>{class Le extends ia{constructor(Me){super(),this.layoutConfig=Me}buildStyles(Me,We){let[Ut,vr,...vn]=Me.split(" "),Dn=vn.join(" ");const Ti=We.direction.indexOf("column")>-1?"column":"row",Ha=ri(Ti)?"max-width":"max-height",es=ri(Ti)?"min-width":"min-height",Xo=String(Dn).indexOf("calc")>-1,Rs=Xo||"auto"===Dn,yl=String(Dn).indexOf("%")>-1&&!Xo,ro=String(Dn).indexOf("px")>-1||String(Dn).indexOf("rem")>-1||String(Dn).indexOf("em")>-1||String(Dn).indexOf("vw")>-1||String(Dn).indexOf("vh")>-1;let ys=Xo||ro;Ut="0"==Ut?0:Ut,vr="0"==vr?0:vr;const xl=!Ut&&!vr;let Ka={};const ks={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(Dn||""){case"":const ts=!1!==this.layoutConfig.useColumnBasisZero;Dn="row"===Ti?"0%":ts?"0.000000001px":"auto";break;case"initial":case"nogrow":Ut=0,Dn="auto";break;case"grow":Dn="100%";break;case"noshrink":vr=0,Dn="auto";break;case"auto":break;case"none":Ut=0,vr=0,Dn="auto";break;default:!ys&&!yl&&!isNaN(Dn)&&(Dn+="%"),"0%"===Dn&&(ys=!0),"0px"===Dn&&(Dn="0%"),Ka=Ve(ks,Xo?{"flex-grow":Ut,"flex-shrink":vr,"flex-basis":ys?Dn:"100%"}:{flex:`${Ut} ${vr} ${ys?Dn:"100%"}`})}return Ka.flex||Ka["flex-grow"]||(Ka=Ve(ks,Xo?{"flex-grow":Ut,"flex-shrink":vr,"flex-basis":Dn}:{flex:`${Ut} ${vr} ${Dn}`})),"0%"!==Dn&&"0px"!==Dn&&"0.000000001px"!==Dn&&"auto"!==Dn&&(Ka[es]=xl||ys&&Ut?Dn:null,Ka[Ha]=xl||!Rs&&vr?Dn:null),Ka[es]||Ka[Ha]?We.hasWrap&&(Ka[Xo?"flex-basis":"flex"]=Ka[Ha]?Xo?Ka[Ha]:`${Ut} ${vr} ${Ka[Ha]}`:Xo?Ka[es]:`${Ut} ${vr} ${Ka[es]}`):Ka=Ve(ks,Xo?{"flex-grow":Ut,"flex-shrink":vr,"flex-basis":Dn}:{flex:`${Ut} ${vr} ${Dn}`}),Ve(Ka,{"box-sizing":"border-box"})}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.LFG(Ln))},Le.\u0275prov=(0,u.Yz7)({factory:function(){return new Le((0,u.LFG)(Ln))},token:Le,providedIn:"root"}),Le})();const et=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let wt=(()=>{class Le extends Fn{constructor(Me,We,Ut,vr,vn){super(Me,vr,We,vn),this.layoutConfig=Ut,this.marshal=vn,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(Me){this.flexShrink=Me||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(Me){this.flexGrow=Me||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe((0,A.R)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe((0,A.R)(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(Me){const Ut=Me.value.split(" ");this.direction=Ut[0],this.wrap=void 0!==Ut[1]&&"wrap"===Ut[1],this.triggerUpdate()}updateWithValue(Me){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const Ut=this.direction,vr=Ut.startsWith("row"),vn=this.wrap;vr&&vn?this.styleCache=or:vr&&!vn?this.styleCache=Ot:!vr&&vn?this.styleCache=er:!vr&&!vn&&(this.styleCache=ir);const Ti=Qi(String(Me).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(Ti.join(" "),{direction:Ut,hasWrap:vn})}triggerReflow(){const Me=this.activatedValue;if(void 0!==Me){const We=Qi(Me+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,We.join(" "))}}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.Y36(u.SBq),u.Y36(Vi),u.Y36(Ln),u.Y36(qe),u.Y36(Ji))},Le.\u0275dir=u.lG2({type:Le,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[u.qOj]}),Le})(),vt=(()=>{class Le extends wt{constructor(){super(...arguments),this.inputs=et}}return Le.\u0275fac=function(){let At;return function(We){return(At||(At=u.n5z(Le)))(We||Le)}}(),Le.\u0275dir=u.lG2({type:Le,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[u.qOj]}),Le})();const Ot=new Map,ir=new Map,or=new Map,er=new Map;let uo=(()=>{class Le extends ia{buildStyles(Me,We){const Ut={},[vr,vn]=Me.split(" ");switch(vr){case"center":Ut["justify-content"]="center";break;case"space-around":Ut["justify-content"]="space-around";break;case"space-between":Ut["justify-content"]="space-between";break;case"space-evenly":Ut["justify-content"]="space-evenly";break;case"end":case"flex-end":Ut["justify-content"]="flex-end";break;case"start":case"flex-start":default:Ut["justify-content"]="flex-start"}switch(vn){case"start":case"flex-start":Ut["align-items"]=Ut["align-content"]="flex-start";break;case"center":Ut["align-items"]=Ut["align-content"]="center";break;case"end":case"flex-end":Ut["align-items"]=Ut["align-content"]="flex-end";break;case"space-between":Ut["align-content"]="space-between",Ut["align-items"]="stretch";break;case"space-around":Ut["align-content"]="space-around",Ut["align-items"]="stretch";break;case"baseline":Ut["align-content"]="stretch",Ut["align-items"]="baseline";break;case"stretch":default:Ut["align-items"]=Ut["align-content"]="stretch"}return Ve(Ut,{display:We.inline?"inline-flex":"flex","flex-direction":We.layout,"box-sizing":"border-box","max-width":"stretch"===vn?ri(We.layout)?null:"100%":null,"max-height":"stretch"===vn&&ri(We.layout)?"100%":null})}}return Le.\u0275fac=function(){let At;return function(We){return(At||(At=u.n5z(Le)))(We||Le)}}(),Le.\u0275prov=(0,u.Yz7)({factory:function(){return new Le},token:Le,providedIn:"root"}),Le})();const Hi=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let Vt=(()=>{class Le extends Fn{constructor(Me,We,Ut,vr){super(Me,Ut,We,vr),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe((0,A.R)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(Me){const We=this.layout||"row",Ut=this.inline;"row"===We&&Ut?this.styleCache=en:"row"!==We||Ut?"row-reverse"===We&&Ut?this.styleCache=mn:"row-reverse"!==We||Ut?"column"===We&&Ut?this.styleCache=_n:"column"!==We||Ut?"column-reverse"===We&&Ut?this.styleCache=Sn:"column-reverse"===We&&!Ut&&(this.styleCache=Hr):this.styleCache=gr:this.styleCache=Br:this.styleCache=Jt,this.addStyles(Me,{layout:We,inline:Ut})}onLayoutChange(Me){const We=Me.value.split(" ");this.layout=We[0],this.inline=Me.value.includes("inline"),st.find(Ut=>Ut===this.layout)||(this.layout="row"),this.triggerUpdate()}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.Y36(u.SBq),u.Y36(Vi),u.Y36(uo),u.Y36(Ji))},Le.\u0275dir=u.lG2({type:Le,features:[u.qOj]}),Le})(),pr=(()=>{class Le extends Vt{constructor(){super(...arguments),this.inputs=Hi}}return Le.\u0275fac=function(){let At;return function(We){return(At||(At=u.n5z(Le)))(We||Le)}}(),Le.\u0275dir=u.lG2({type:Le,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[u.qOj]}),Le})();const Jt=new Map,gr=new Map,Br=new Map,Hr=new Map,en=new Map,_n=new Map,mn=new Map,Sn=new Map;let bn=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275mod=u.oAB({type:Le}),Le.\u0275inj=u.cJS({imports:[[an,O.vT]]}),Le})();var Pn=Q(615);const Zn=["*",[["mat-card-footer"]]],Qn=["*","mat-card-footer"];let Jn=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275dir=u.lG2({type:Le,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),Le})(),ci=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275dir=u.lG2({type:Le,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),Le})(),Ii=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275dir=u.lG2({type:Le,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),Le})(),fi=(()=>{class Le{constructor(Me){this._animationMode=Me}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.Y36(k.Qb,8))},Le.\u0275cmp=u.Xpm({type:Le,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(Me,We){2&Me&&u.ekj("_mat-animation-noopable","NoopAnimations"===We._animationMode)},exportAs:["matCard"],ngContentSelectors:Qn,decls:2,vars:0,template:function(Me,We){1&Me&&(u.F$t(Zn),u.Hsn(0),u.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),Le})(),$o=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275mod=u.oAB({type:Le}),Le.\u0275inj=u.cJS({imports:[[a.BQ],a.BQ]}),Le})(),Vo=(()=>{class Le{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(Me){this._vertical=(0,o.Ig)(Me)}get inset(){return this._inset}set inset(Me){this._inset=(0,o.Ig)(Me)}}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275cmp=u.Xpm({type:Le,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(Me,We){2&Me&&(u.uIk("aria-orientation",We.vertical?"vertical":"horizontal"),u.ekj("mat-divider-vertical",We.vertical)("mat-divider-horizontal",!We.vertical)("mat-divider-inset",We.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(Me,We){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),Le})(),bo=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275mod=u.oAB({type:Le}),Le.\u0275inj=u.cJS({imports:[[a.BQ],a.BQ]}),Le})(),Ei=(()=>{class Le{constructor(Me,We){this.router=Me,this.dataManagerService=We,this.cryptoInfo=new Pn.Ql}ngOnInit(){}showDetails(){this.router.navigate(["crypto",`${this.cryptoInfo.cryptoCode}`])}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.Y36(p.F0),u.Y36(y.L))},Le.\u0275cmp=u.Xpm({type:Le,selectors:[["app-single-crypto-info"]],inputs:{cryptoInfo:"cryptoInfo"},decls:18,vars:8,consts:[[1,"crypto-info",3,"click"],[3,"src"],["inset",""]],template:function(Me,We){1&Me&&(u.TgZ(0,"mat-card",0),u.NdJ("click",function(){return We.showDetails()}),u._UZ(1,"img",1),u.TgZ(2,"mat-card-subtitle"),u._uU(3),u.qZA(),u.TgZ(4,"mat-card-title"),u._uU(5),u.qZA(),u.TgZ(6,"mat-card-content"),u.TgZ(7,"p"),u.TgZ(8,"b"),u._uU(9),u.qZA(),u.qZA(),u._UZ(10,"mat-divider",2),u.TgZ(11,"p"),u._uU(12),u.qZA(),u.TgZ(13,"p"),u._uU(14),u.qZA(),u._UZ(15,"mat-divider",2),u.TgZ(16,"p"),u._uU(17),u.qZA(),u.qZA(),u.qZA()),2&Me&&(u.xp6(1),u.MGl("src","assets/crypto-icons/",We.cryptoInfo.cryptoCode,".png",u.LSH),u.xp6(2),u.Oqu(We.cryptoInfo.cryptoName),u.xp6(2),u.Oqu(We.cryptoInfo.cryptoCode),u.xp6(4),u.AsE("",We.cryptoInfo.exchangeRate," ",We.cryptoInfo.fiatCode,""),u.xp6(3),u.hij("bid: ",We.cryptoInfo.bidPrice,""),u.xp6(2),u.hij("ask: ",We.cryptoInfo.askPrice,""),u.xp6(3),u.hij("Last update: ",We.cryptoInfo.time,""))},directives:[fi,Ii,ci,Jn,Vo],styles:[".crypto-info[_ngcontent-%COMP%]{background-color:#a5d8ff}.crypto-info[_ngcontent-%COMP%]:hover{background-color:#3bc14a}"]}),Le})();function Sa(Le,At){if(1&Le&&(u.TgZ(0,"div",3),u._UZ(1,"app-single-crypto-info",4),u.qZA()),2&Le){const Me=At.$implicit;u.xp6(1),u.Q6J("cryptoInfo",Me)}}const oa=[{path:"",component:(()=>{class Le{constructor(Me){this.dataCacheManager=Me,this.cryptosData=[],this.cryptoDataSubscription=new v.w}ngOnInit(){console.log("CRYPTO COMPONENT ON INIT"),this.dataCacheManager.sendRequestForData(),this.cryptoDataSubscription=this.dataCacheManager.getCurrentExchangeRates().subscribe(Me=>{console.log(Me),this.cryptosData=Me})}ngOnDestroy(){console.log("CRYPTO COMPONENT ON DESTROY"),this.cryptoDataSubscription.unsubscribe()}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.Y36(y.L))},Le.\u0275cmp=u.Xpm({type:Le,selectors:[["app-crypto"]],decls:7,vars:1,consts:[[1,"container"],["fxLayout","row wrap","fxLayoutAlign","space-around center","fxLayoutGap","10px grid"],["class","element-center2","fxFlex","33%","fxFlex.xs","100%","fxFlex.sm","33%",4,"ngFor","ngForOf"],["fxFlex","33%","fxFlex.xs","100%","fxFlex.sm","33%",1,"element-center2"],[3,"cryptoInfo"]],template:function(Me,We){1&Me&&(u.TgZ(0,"div",0),u._UZ(1,"app-header"),u._UZ(2,"br"),u.TgZ(3,"div"),u.TgZ(4,"div",1),u.YNc(5,Sa,2,1,"div",2),u.qZA(),u.qZA(),u.qZA(),u._UZ(6,"router-outlet")),2&Me&&(u.xp6(5),u.Q6J("ngForOf",We.cryptosData))},directives:[wr,Ls,pr,jo,K.sg,p.lC,vt,Ei],styles:["mat-grid-tile[_ngcontent-%COMP%]{background:lightblue}.element-center2[_ngcontent-%COMP%]{text-align:center}"]}),Le})()},{path:":cryptoCode",loadChildren:()=>Promise.resolve().then(Q.bind(Q,5900)).then(Le=>Le.DetailsModule)}];let Pa=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275mod=u.oAB({type:Le}),Le.\u0275inj=u.cJS({imports:[[p.Bz.forChild(oa)],p.Bz]}),Le})();var eo=Q(1095);Q(9075);let Xs=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275mod=u.oAB({type:Le}),Le.\u0275inj=u.cJS({imports:[[an]]}),Le})(),Vc=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275mod=u.oAB({type:Le}),Le.\u0275inj=u.cJS({imports:[[an]]}),Le})(),Tu=(()=>{class Le{constructor(Me,We){(0,K.PM)(We)&&!Me&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(Me,We=[]){return{ngModule:Le,providers:Me.serverLoaded?[{provide:Ln,useValue:Object.assign(Object.assign({},Gn),Me)},{provide:qr,useValue:We,multi:!0},{provide:ln,useValue:!0}]:[{provide:Ln,useValue:Object.assign(Object.assign({},Gn),Me)},{provide:qr,useValue:We,multi:!0}]}}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.LFG(ln),u.LFG(u.Lbi))},Le.\u0275mod=u.oAB({type:Le}),Le.\u0275inj=u.cJS({imports:[[bn,Xs,Vc],bn,Xs,Vc]}),Le})();var Mu=Q(5900),ku=Q(6458),Uc=Q(5758),gc=Q(5871);let Su=(()=>{class Le{constructor(Me,We){this.dataManagerService=Me,this.dataApiService=We}resolve(Me,We){return this.dataManagerService.sendRequestForDetails("BTC",this.dataManagerService.getBaseCurrency()),(0,Uc.D)([this.dataManagerService.getIntradayExchangeRates(),this.dataManagerService.getDailyExchangeRates()])}}return Le.\u0275fac=function(Me){return new(Me||Le)(u.LFG(y.L),u.LFG(gc.$))},Le.\u0275prov=u.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"root"}),Le})(),Nl=(()=>{class Le{}return Le.\u0275fac=function(Me){return new(Me||Le)},Le.\u0275mod=u.oAB({type:Le}),Le.\u0275inj=u.cJS({providers:[Su],imports:[[K.ez,Pa,dr,Je,e.UX,m,e.u5,$o,bo,Tu,Mu.DetailsModule,eo.ot,ku.ZX]]}),Le})()},5900:(Ml,x,Q)=>{"use strict";Q.r(x),Q.d(x,{DetailsModule:()=>ne});var K=Q(8583),p=Q(8741),v=Q(615),u=Q(3018),y=Q(1496);function i(se,ie,ue,le){return new(ue||(ue=Promise))(function(ve,_e){function be(me){try{he(le.next(me))}catch(Ae){_e(Ae)}}function Te(me){try{he(le.throw(me))}catch(Ae){_e(Ae)}}function he(me){me.done?ve(me.value):function(ve){return ve instanceof ue?ve:new ue(function(_e){_e(ve)})}(me.value).then(be,Te)}he((le=le.apply(se,ie||[])).next())})}const z=["plot"],B=["*"];class U{static setModuleName(ie){U.moduleName=ie}static getModuleName(){return U.moduleName}static setPlotly(ie){if("object"==typeof ie&&"function"!=typeof ie.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");U.plotly=ie}static insert(ie){return-1===U.instances.indexOf(ie)&&U.instances.push(ie),ie}static remove(ie){const ue=U.instances.indexOf(ie);ue>=0&&(U.instances.splice(ue,1),U.plotly.purge(ie))}getInstanceByDivId(ie){for(const ue of U.instances)if(ue&&ue.id===ie)return ue}getPlotly(){return i(this,void 0,void 0,function*(){return yield this.waitFor(()=>"waiting"!==this._getPlotly()),this._getPlotly()})}_getPlotly(){if(void 0===U.plotly)throw new Error("ViaCDN"===U.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return U.plotly}waitFor(ie){return new Promise(ue=>{const le=()=>{ie()?ue():setTimeout(le,10)};le()})}newPlot(ie,ue,le,de,ve){return i(this,void 0,void 0,function*(){if(yield this.waitFor(()=>"waiting"!==this._getPlotly()),ve){const _e={data:ue,layout:le,config:de,frames:ve};return this._getPlotly().newPlot(ie,_e).then(()=>U.insert(ie))}return this._getPlotly().newPlot(ie,ue,le,de).then(()=>U.insert(ie))})}plot(ie,ue,le,de,ve){if(ve){const _e={data:ue,layout:le,config:de,frames:ve};return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(ie,_e):this._getPlotly().newPlot(ie,_e)}return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(ie,ue,le,de):this._getPlotly().newPlot(ie,ue,le,de)}update(ie,ue,le,de,ve){if(ve){const _e={data:ue,layout:le,config:de,frames:ve};return this._getPlotly().react(ie,_e)}return this._getPlotly().react(ie,ue,le,de)}resize(ie){return this._getPlotly().Plots.resize(ie)}}U.\u0275fac=function(ie){return new(ie||U)},U.instances=[],U.plotly=void 0,U.moduleName=void 0,U.\u0275prov=u.Yz7({factory:function(){return new U},token:U,providedIn:"root"});let G=(()=>{class se{constructor(ue,le,de){this.plotly=ue,this.iterableDiffers=le,this.keyValueDiffers=de,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new u.vpe,this.update=new u.vpe,this.purge=new u.vpe,this.error=new u.vpe,this.afterExport=new u.vpe,this.afterPlot=new u.vpe,this.animated=new u.vpe,this.animatingFrame=new u.vpe,this.animationInterrupted=new u.vpe,this.autoSize=new u.vpe,this.beforeExport=new u.vpe,this.buttonClicked=new u.vpe,this.click=new u.vpe,this.plotlyClick=new u.vpe,this.clickAnnotation=new u.vpe,this.deselect=new u.vpe,this.doubleClick=new u.vpe,this.framework=new u.vpe,this.hover=new u.vpe,this.legendClick=new u.vpe,this.legendDoubleClick=new u.vpe,this.react=new u.vpe,this.relayout=new u.vpe,this.restyle=new u.vpe,this.redraw=new u.vpe,this.selected=new u.vpe,this.selecting=new u.vpe,this.sliderChange=new u.vpe,this.sliderEnd=new u.vpe,this.sliderStart=new u.vpe,this.transitioning=new u.vpe,this.transitionInterrupted=new u.vpe,this.unhover=new u.vpe,this.relayouting=new u.vpe,this.treemapclick=new u.vpe,this.sunburstclick=new u.vpe,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting","treemapclick","sunburstclick"]}ngOnInit(){this.createPlot().then(()=>{const ue=this.createFigure();this.initialized.emit(ue)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);const ue=this.createFigure();this.purge.emit(ue),U.remove(this.plotlyInstance)}ngOnChanges(ue){let le=!1;const de=ue.revision;de&&!de.isFirstChange()&&(le=!0);const ve=ue.debug;ve&&!ve.isFirstChange()&&(le=!0),le&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let ue=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(ue=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(ue=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),ue&&this.plotlyInstance&&this.updatePlot()}getWindow(){return window}getClassName(){let ue=[this.defaultClassName];return Array.isArray(this.className)?ue=ue.concat(this.className):this.className&&ue.push(this.className),ue.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(ue=>{this.plotlyInstance=ue,this.getWindow().gd=this.debug?ue:void 0,this.eventNames.forEach(le=>{const de=`plotly_${le.toLowerCase()}`;ue.on(de,ve=>this[le].emit(ve))}),ue.on("plotly_click",le=>{this.click.emit(le),this.plotlyClick.emit(le)}),this.updateWindowResizeHandler()},ue=>{console.error("Error while plotting:",ue),this.error.emit(ue)})}createFigure(){const ue=this.plotlyInstance;return{data:ue.data,layout:ue.layout,frames:ue._transitionData?ue._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const le=new Error("Plotly component wasn't initialized");throw this.error.emit(le),le}const ue=Object.assign({},this.layout);return this.plotly.update(this.plotlyInstance,this.data,ue,this.config,this.frames).then(()=>{const le=this.createFigure();this.update.emit(le)},le=>{console.error("Error while updating plot:",le),this.error.emit(le)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(ue,le){const de=Object.assign({},le,{uid:""});return JSON.stringify(de)}}return se.\u0275fac=function(ue){return new(ue||se)(u.Y36(U),u.Y36(u.ZZ4),u.Y36(u.aQg))},se.\u0275cmp=u.Xpm({type:se,selectors:[["plotly-plot"]],viewQuery:function(ue,le){if(1&ue&&u.Gf(z,7),2&ue){let de;u.iGM(de=u.CRH())&&(le.plotEl=de.first)}},inputs:{revision:"revision",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision",data:"data",layout:"layout",config:"config",frames:"frames",style:"style",divId:"divId",className:"className"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",relayouting:"relayouting",treemapclick:"treemapclick",sunburstclick:"sunburstclick"},features:[u._Bn([U]),u.TTD],ngContentSelectors:B,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(ue,le){1&ue&&(u.F$t(),u.TgZ(0,"div",0,1),u.Hsn(2),u.qZA()),2&ue&&(u.Q6J("ngClass",le.getClassName())("ngStyle",le.style),u.uIk("id",le.divId))},directives:[K.mk,K.PC],encapsulation:2}),se})(),X=(()=>{class se{constructor(){}}return se.\u0275fac=function(ue){return new(ue||se)},se.\u0275mod=u.oAB({type:se}),se.\u0275inj=u.cJS({providers:[U],imports:[[K.ez]]}),se})(),Z=(()=>{class se{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");U.setPlotly(se.plotlyjs)}isValid(){return void 0!==se.plotlyjs&&("function"==typeof se.plotlyjs.plot||"function"==typeof se.plotlyjs.newPlot)}}return se.\u0275fac=function(ue){return new(ue||se)},se.\u0275mod=u.oAB({type:se}),se.\u0275inj=u.cJS({providers:[U],imports:[[K.ez,X],X]}),se.plotlyjs={},se})(),te=(()=>{class se{constructor(){this.dates=[],this.cryptoIndicatorValues=[],this.title="",this.type="",this.graph={data:[{x:["0"],y:[0],type:this.type,name:""}],layout:{title:`${this.title}`}}}ngOnInit(){this.prepareChartsData()}prepareChartsData(){this.graph.data=[];let ue="";this.cryptoIndicatorValues.forEach((le,de)=>{this.cryptoIndicatorValues.length>1&&(0===de&&(ue="highs"),1===de&&(ue="lows")),this.graph.data.push({x:this.dates,y:le,type:this.type,name:ue})}),this.graph.layout.title=this.title}}return se.\u0275fac=function(ue){return new(ue||se)},se.\u0275cmp=u.Xpm({type:se,selectors:[["app-chart"]],inputs:{dates:"dates",cryptoIndicatorValues:"cryptoIndicatorValues",title:"title",type:"type"},decls:1,vars:2,consts:[[3,"data","layout"]],template:function(ue,le){1&ue&&u._UZ(0,"plotly-plot",0),2&ue&&u.Q6J("data",le.graph.data)("layout",le.graph.layout)},directives:[G],styles:[""]}),se})();const R=function(se,ie){return[se,ie]},N=function(se){return[se]};function V(se,ie){if(1&se&&(u.TgZ(0,"div"),u._UZ(1,"app-chart",1),u._UZ(2,"br"),u._UZ(3,"app-chart",2),u._UZ(4,"br"),u._UZ(5,"app-chart",3),u._UZ(6,"br"),u._UZ(7,"app-chart",4),u.qZA()),2&se){const ue=u.oxw();u.xp6(1),u.Q6J("cryptoIndicatorValues",u.WLB(8,R,ue.dailyData.highs,ue.dailyData.lows))("dates",ue.dailyData.dates),u.xp6(2),u.Q6J("cryptoIndicatorValues",u.VKq(11,N,ue.dailyData.volumes))("dates",ue.dailyData.dates),u.xp6(2),u.Q6J("cryptoIndicatorValues",u.WLB(13,R,ue.intradayData.highs,ue.intradayData.lows))("dates",ue.intradayData.dates),u.xp6(2),u.Q6J("cryptoIndicatorValues",u.VKq(16,N,ue.intradayData.volumes))("dates",ue.intradayData.dates)}}const j=[{path:"",component:(()=>{class se{constructor(ue,le){this.activatedRoute=ue,this.dataManagerService=le,this.intradayData=new v.Sj,this.dailyData=new v.ol,this.activatedRoute.params.subscribe(de=>{console.log(de)})}ngOnInit(){this.dataManagerService.sendRequestForDetails("BTC",this.dataManagerService.getBaseCurrency()),this.dataManagerService.getIntradayExchangeRates().subscribe(ue=>{this.intradayData=ue}),this.dataManagerService.getDailyExchangeRates().subscribe(ue=>{this.dailyData=ue})}}return se.\u0275fac=function(ue){return new(ue||se)(u.Y36(p.gz),u.Y36(y.L))},se.\u0275cmp=u.Xpm({type:se,selectors:[["app-details"]],decls:1,vars:1,consts:[[4,"ngIf"],["title","Prices daily","type","scatter",3,"cryptoIndicatorValues","dates"],["title","Volumes daily","type","bar",3,"cryptoIndicatorValues","dates"],["title","Prices today","type","scatter",3,"cryptoIndicatorValues","dates"],["title","Volumes today","type","bar",3,"cryptoIndicatorValues","dates"]],template:function(ue,le){1&ue&&u.YNc(0,V,8,18,"div",0),2&ue&&u.Q6J("ngIf",le.dailyData.dates.length>1)},directives:[K.O5,te],styles:[""]}),se})()}];let J=(()=>{class se{}return se.\u0275fac=function(ue){return new(ue||se)},se.\u0275mod=u.oAB({type:se}),se.\u0275inj=u.cJS({imports:[[p.Bz.forChild(j)],p.Bz]}),se})();var $=Q(8918),re=Q(3679);Z.plotlyjs=$;let ne=(()=>{class se{}return se.\u0275fac=function(ue){return new(ue||se)},se.\u0275mod=u.oAB({type:se}),se.\u0275inj=u.cJS({imports:[[K.ez,J,Z,re.u5]]}),se})()},5871:(Ml,x,Q)=>{"use strict";Q.d(x,{$:()=>n});var K=Q(5758),p=(()=>{return(t=p||(p={})).FUNCTION="function",t.CURRENCY_EXCHANGE_RATE="CURRENCY_EXCHANGE_RATE",t.CRYPTO_INTRADAY="CRYPTO_INTRADAY",t.DIGITAL_CURRENCY_DAILY="DIGITAL_CURRENCY_DAILY",t.DIGITAL_CURRENCY_WEEKLY="DIGITAL_CURRENCY_WEEKLY",t.DIGITAL_CURRENCY_MONTHLY="DIGITAL_CURRENCY_MONTHLY",p;var t})(),v=(()=>{return(t=v||(v={})).FROM_CURRENCY="from_currency",t.TO_CURRENCY="to_currency",t.SYMBOL="symbol",t.MARKET="market",t.INTERVAL="interval",t.OUTPUTSIZE="outputsize",t.DATATYPE="datatype",v;var t})(),y=Q(3018),e=Q(1841);let n=(()=>{class t{constructor(r){this.http=r,this.apiUrl="https://alpha-vantage.p.rapidapi.com/query"}getCurrentExchangeRates(r){return(0,K.D)([this.createCurrentExchangeRatesRequest("BTC",r),this.createCurrentExchangeRatesRequest("ETH",r)])}getDetailsExchangeRates(r,f){return(0,K.D)([this.getIntradayExchangeRates(r,f),this.getDailyExchangeRates(r,f)])}getIntradayExchangeRates(r,f){return this.createIntradayExchangeRatesRequest(r,f)}getDailyExchangeRates(r,f){return this.createDailyExchangeRatesRequest(r,f)}createCurrentExchangeRatesRequest(r,f){return this.http.get(`${this.apiUrl}?${p.FUNCTION}=${p.CURRENCY_EXCHANGE_RATE}&${v.FROM_CURRENCY}=${r}&${v.TO_CURRENCY}=${f}&${v.DATATYPE}=json`)}createIntradayExchangeRatesRequest(r,f){return this.http.get(`${this.apiUrl}?${p.FUNCTION}=${p.CRYPTO_INTRADAY}&${v.SYMBOL}=${r}&${v.MARKET}=${f}&${v.INTERVAL}=5min&${v.OUTPUTSIZE}=compact&${v.DATATYPE}=json`)}createDailyExchangeRatesRequest(r,f){return this.http.get(`${this.apiUrl}?${p.FUNCTION}=${p.DIGITAL_CURRENCY_DAILY}&${v.SYMBOL}=${r}&${v.MARKET}=${f}&${v.DATATYPE}=json`)}}return t.\u0275fac=function(r){return new(r||t)(y.LFG(e.eN))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},1496:(Ml,x,Q)=>{"use strict";Q.d(x,{L:()=>t});var K=Q(9765),p=Q(5435),v=Q(5257),u=Q(615),y=Q(3018),e=Q(5871),n=Q(6458);let t=(()=>{class a{constructor(f,s){this.dataApiService=f,this.snackBar=s,this.baseCurrency="",this.currentExchangeRates=[],this.currentExchangeRatesSubject=new K.xQ,this.intradayExchangeRates=new u.Sj,this.intradayExchangeRatesSubject=new K.xQ,this.dailyExchangeRates=new u.ol,this.dailyExchangeRatesSubject=new K.xQ}sendRequestForData(f="USD"){this.dataApiService.getCurrentExchangeRates(f).pipe((0,p.h)(s=>!!s),(0,v.q)(1)).subscribe(s=>{this.currentExchangeRates=[],s.forEach(i=>{i["Realtime Currency Exchange Rate"]&&this.currentExchangeRates.push({cryptoCode:i["Realtime Currency Exchange Rate"]["1. From_Currency Code"],cryptoName:i["Realtime Currency Exchange Rate"]["2. From_Currency Name"],fiatCode:i["Realtime Currency Exchange Rate"]["3. To_Currency Code"],exchangeRate:i["Realtime Currency Exchange Rate"]["5. Exchange Rate"].slice(0,-4),bidPrice:i["Realtime Currency Exchange Rate"]["8. Bid Price"].slice(0,-4),askPrice:i["Realtime Currency Exchange Rate"]["9. Ask Price"].slice(0,-4),time:i["Realtime Currency Exchange Rate"]["6. Last Refreshed"]+" "+i["Realtime Currency Exchange Rate"]["7. Time Zone"]})}),this.currentExchangeRatesSubject.next(this.currentExchangeRates)},s=>{this.displayErrorInfo(s)})}displayErrorInfo(f){this.snackBar.open(429!==f.status?"Error: Unknown error.":"Error: Too many requests in 1 minute. \n        Due to limited subscription plan of cryptocurrency REST API,\n        there is available only 5 request per minute. Sorry for inconvenience.",void 0,{duration:1e4})}sendRequestForDetails(f,s){this.dataApiService.getDetailsExchangeRates(f,s).pipe((0,p.h)(i=>!!i)).subscribe(i=>{this.parseIntradayExchangeData(i[0]),this.parseDailyExchangeData(i[1])},i=>{this.displayErrorInfo(i)})}setBaseCurrency(f){this.baseCurrency=f}getCurrentExchangeRates(){return this.currentExchangeRatesSubject}getIntradayExchangeRates(){return this.intradayExchangeRatesSubject}getDailyExchangeRates(){return this.dailyExchangeRatesSubject}getBaseCurrency(){return this.baseCurrency}parseIntradayExchangeData(f){var s,i,l,c,h,m,d,o,b,g,w,_;if(f["Time Series Crypto (5min)"]){for(const[A,T]of Object.entries(f["Time Series Crypto (5min)"]))null===(s=this.intradayExchangeRates.dates)||void 0===s||s.push(A.toString()),null===(i=this.intradayExchangeRates.opens)||void 0===i||i.push(Number(T["1. open"])),null===(l=this.intradayExchangeRates.highs)||void 0===l||l.push(Number(T["2. high"])),null===(c=this.intradayExchangeRates.lows)||void 0===c||c.push(Number(T["3. low"])),null===(h=this.intradayExchangeRates.closes)||void 0===h||h.push(Number(T["4. close"])),null===(m=this.intradayExchangeRates.volumes)||void 0===m||m.push(Number(T["5. volume"]));null===(d=this.intradayExchangeRates.dates)||void 0===d||d.reverse(),null===(o=this.intradayExchangeRates.opens)||void 0===o||o.reverse(),null===(b=this.intradayExchangeRates.highs)||void 0===b||b.reverse(),null===(g=this.intradayExchangeRates.lows)||void 0===g||g.reverse(),null===(w=this.intradayExchangeRates.closes)||void 0===w||w.reverse(),null===(_=this.intradayExchangeRates.volumes)||void 0===_||_.reverse(),this.intradayExchangeRatesSubject.next(this.intradayExchangeRates)}}parseDailyExchangeData(f){if(f["Time Series (Digital Currency Daily)"]){for(const[s,i]of Object.entries(f["Time Series (Digital Currency Daily)"])){const l=Object.keys(Object.entries(f["Time Series (Digital Currency Daily)"])[1][1]);this.dailyExchangeRates.dates.push(s.toString()),this.dailyExchangeRates.opens.push(Number(i[l[0]])),this.dailyExchangeRates.highs.push(Number(i[l[2]])),this.dailyExchangeRates.lows.push(Number(i[l[4]])),this.dailyExchangeRates.closes.push(Number(i[l[6]])),this.dailyExchangeRates.volumes.push(Number(i[l[8]])),this.dailyExchangeRates.marketCap.push(Number(i[l[9]]))}this.dailyExchangeRates.dates.reverse(),this.dailyExchangeRates.opens.reverse(),this.dailyExchangeRates.highs.reverse(),this.dailyExchangeRates.lows.reverse(),this.dailyExchangeRates.closes.reverse(),this.dailyExchangeRates.volumes.reverse(),this.dailyExchangeRates.marketCap.reverse(),this.dailyExchangeRatesSubject.next(this.dailyExchangeRates)}}}return a.\u0275fac=function(f){return new(f||a)(y.LFG(e.$),y.LFG(n.ux))},a.\u0275prov=y.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},615:(Ml,x,Q)=>{"use strict";Q.d(x,{Ql:()=>K,Sj:()=>p,ol:()=>v});class K{constructor(y="",e="",n="",t="",a="",r="",f=""){this.cryptoCode=y,this.cryptoName=e,this.fiatCode=n,this.exchangeRate=t,this.bidPrice=a,this.askPrice=r,this.time=f}}class p{constructor(y=[],e=[],n=[],t=[],a=[],r=[]){this.dates=y,this.opens=e,this.highs=n,this.lows=t,this.closes=a,this.volumes=r}}class v{constructor(y=[],e=[],n=[],t=[],a=[],r=[],f=[]){this.dates=y,this.opens=e,this.highs=n,this.lows=t,this.closes=a,this.volumes=r,this.marketCap=f}}}}]);