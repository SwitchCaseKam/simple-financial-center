"use strict";(self.webpackChunkfinance_center=self.webpackChunkfinance_center||[]).push([[709],{8709:(gt,I,i)=>{i.r(I),i.d(I,{CryptoModule:()=>pt});var C=i(8583),p=i(8741),e=i(3018);class P{constructor(a="",t="",s="",n="",o="",c="",h=""){this.cryptoCode=a,this.cryptoName=t,this.fiatCode=s,this.exchangeRate=n,this.bidPrice=o,this.askPrice=c,this.time=h}}class A{constructor(a=[],t=[],s=[],n=[],o=[],c=[]){this.dates=a,this.opens=t,this.highs=s,this.lows=n,this.closes=o,this.volumes=c}}class N{constructor(a=[],t=[],s=[],n=[],o=[],c=[],h=[]){this.dates=a,this.opens=t,this.highs=s,this.lows=n,this.closes=o,this.volumes=c,this.marketCap=h}}var m=i(9765),U=i(5435),$=i(5257),M=i(5758),u=(()=>{return(r=u||(u={})).FUNCTION="function",r.CURRENCY_EXCHANGE_RATE="CURRENCY_EXCHANGE_RATE",r.CRYPTO_INTRADAY="CRYPTO_INTRADAY",r.DIGITAL_CURRENCY_DAILY="DIGITAL_CURRENCY_DAILY",r.DIGITAL_CURRENCY_WEEKLY="DIGITAL_CURRENCY_WEEKLY",r.DIGITAL_CURRENCY_MONTHLY="DIGITAL_CURRENCY_MONTHLY",u;var r})(),l=(()=>{return(r=l||(l={})).FROM_CURRENCY="from_currency",r.TO_CURRENCY="to_currency",r.SYMBOL="symbol",r.MARKET="market",r.INTERVAL="interval",r.OUTPUTSIZE="outputsize",r.DATATYPE="datatype",l;var r})(),j=i(1841);let Z=(()=>{class r{constructor(t){this.http=t,this.apiUrl="https://alpha-vantage.p.rapidapi.com/query"}getCurrentExchangeRates(t,s){return this.getCurrentExchangeRatesRequest(t,s)}getDetailsExchangeRates(t,s){return(0,M.D)([this.getIntradayExchangeRates(t,s),this.getDailyExchangeRates(t,s)])}getIntradayExchangeRates(t,s){return this.getIntradayExchangeRatesRequest(t,s)}getDailyExchangeRates(t,s){return this.getDailyExchangeRatesRequest(t,s)}getCurrentExchangeRatesRequest(t,s){return this.http.get(`${this.apiUrl}?${u.FUNCTION}=${u.CURRENCY_EXCHANGE_RATE}&${l.FROM_CURRENCY}=${t}&${l.TO_CURRENCY}=${s}&${l.DATATYPE}=json`)}getIntradayExchangeRatesRequest(t,s){return this.http.get(`${this.apiUrl}?${u.FUNCTION}=${u.CRYPTO_INTRADAY}&${l.SYMBOL}=${t}&${l.MARKET}=${s}&${l.INTERVAL}=5min&${l.OUTPUTSIZE}=compact&${l.DATATYPE}=json`)}getDailyExchangeRatesRequest(t,s){return this.http.get(`${this.apiUrl}?${u.FUNCTION}=${u.DIGITAL_CURRENCY_DAILY}&${l.SYMBOL}=${t}&${l.MARKET}=${s}&${l.DATATYPE}=json`)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(j.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var w=i(6458);let R=(()=>{class r{constructor(t,s){this.dataApiService=t,this.snackBar=s,this.baseCurrency="",this.currentCrypto="",this.currentExchangeRates=new Map,this.currentExchangeRatesSubject=new m.xQ,this.intradayExchangeRates=new A,this.intradayExchangeRatesSubject=new m.xQ,this.dailyExchangeRates=new N,this.dailyExchangeRatesSubject=new m.xQ}sendRequestForData(t,s="USD"){this.dataApiService.getCurrentExchangeRates(t,s).pipe((0,U.h)(n=>!!n),(0,$.q)(1)).subscribe(n=>{n["Realtime Currency Exchange Rate"]&&this.currentExchangeRates.set(t,{cryptoCode:n["Realtime Currency Exchange Rate"]["1. From_Currency Code"],cryptoName:n["Realtime Currency Exchange Rate"]["2. From_Currency Name"],fiatCode:n["Realtime Currency Exchange Rate"]["3. To_Currency Code"],exchangeRate:n["Realtime Currency Exchange Rate"]["5. Exchange Rate"].slice(0,-4),bidPrice:n["Realtime Currency Exchange Rate"]["8. Bid Price"].slice(0,-4),askPrice:n["Realtime Currency Exchange Rate"]["9. Ask Price"].slice(0,-4),time:n["Realtime Currency Exchange Rate"]["6. Last Refreshed"]+" "+n["Realtime Currency Exchange Rate"]["7. Time Zone"]}),this.currentExchangeRatesSubject.next(this.currentExchangeRates)},n=>{this.displayErrorInfo(n)})}displayErrorInfo(t){this.snackBar.open(429!==t.status?"Error: Unknown error.":"Error: Too many requests in 1 minute. \n        Due to limited subscription plan of cryptocurrency REST API,\n        there is available only 5 request per minute. Sorry for inconvenience.",void 0,{duration:1e4})}sendRequestForDetails(t,s){this.dataApiService.getDetailsExchangeRates(t,s).pipe((0,U.h)(n=>!!n)).subscribe(n=>{this.parseIntradayExchangeData(n[0]),this.parseDailyExchangeData(n[1])},n=>{this.displayErrorInfo(n)})}setBaseCurrency(t){this.baseCurrency=t}setCurrentCrypto(t){this.currentCrypto=t}getCurrentExchangeRates(){return this.currentExchangeRatesSubject}getIntradayExchangeRates(){return this.intradayExchangeRatesSubject}getDailyExchangeRates(){return this.dailyExchangeRatesSubject}getBaseCurrency(){return this.baseCurrency}getCurrentCrypto(){return this.currentCrypto}parseIntradayExchangeData(t){var s,n,o,c,h,d,x,E,S,D,b,T;if(t["Time Series Crypto (5min)"]){for(const[yt,g]of Object.entries(t["Time Series Crypto (5min)"]))null===(s=this.intradayExchangeRates.dates)||void 0===s||s.push(yt.toString()),null===(n=this.intradayExchangeRates.opens)||void 0===n||n.push(Number(g["1. open"])),null===(o=this.intradayExchangeRates.highs)||void 0===o||o.push(Number(g["2. high"])),null===(c=this.intradayExchangeRates.lows)||void 0===c||c.push(Number(g["3. low"])),null===(h=this.intradayExchangeRates.closes)||void 0===h||h.push(Number(g["4. close"])),null===(d=this.intradayExchangeRates.volumes)||void 0===d||d.push(Number(g["5. volume"]));null===(x=this.intradayExchangeRates.dates)||void 0===x||x.reverse(),null===(E=this.intradayExchangeRates.opens)||void 0===E||E.reverse(),null===(S=this.intradayExchangeRates.highs)||void 0===S||S.reverse(),null===(D=this.intradayExchangeRates.lows)||void 0===D||D.reverse(),null===(b=this.intradayExchangeRates.closes)||void 0===b||b.reverse(),null===(T=this.intradayExchangeRates.volumes)||void 0===T||T.reverse(),this.intradayExchangeRatesSubject.next(this.intradayExchangeRates)}}parseDailyExchangeData(t){if(t["Time Series (Digital Currency Daily)"]){for(const[s,n]of Object.entries(t["Time Series (Digital Currency Daily)"])){const o=Object.keys(Object.entries(t["Time Series (Digital Currency Daily)"])[1][1]);this.dailyExchangeRates.dates.push(s.toString()),this.dailyExchangeRates.opens.push(Number(n[o[0]])),this.dailyExchangeRates.highs.push(Number(n[o[2]])),this.dailyExchangeRates.lows.push(Number(n[o[4]])),this.dailyExchangeRates.closes.push(Number(n[o[6]])),this.dailyExchangeRates.volumes.push(Number(n[o[8]])),this.dailyExchangeRates.marketCap.push(Number(n[o[9]]))}this.dailyExchangeRates.dates.reverse(),this.dailyExchangeRates.opens.reverse(),this.dailyExchangeRates.highs.reverse(),this.dailyExchangeRates.lows.reverse(),this.dailyExchangeRates.closes.reverse(),this.dailyExchangeRates.volumes.reverse(),this.dailyExchangeRates.marketCap.reverse(),this.dailyExchangeRatesSubject.next(this.dailyExchangeRates)}}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(Z),e.LFG(w.ux))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var y=i(3738),Y=i(1769);let B=(()=>{class r{constructor(t,s){this.router=t,this.dataManagerService=s,this.cryptoCode="",this.baseCurrency="",this.cryptoInfo=new P,this.errorMessage=""}ngOnInit(){this.dataManagerService.sendRequestForData(this.cryptoCode,this.baseCurrency),this.dataManagerService.getCurrentExchangeRates().subscribe(t=>{this.errorMessage="";const s=t.get(this.cryptoCode);s&&(this.cryptoInfo=s)})}showDetails(){this.router.navigate(["crypto",`${this.cryptoInfo.cryptoCode}`])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(p.F0),e.Y36(R))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-single-crypto-info"]],inputs:{cryptoCode:"cryptoCode",baseCurrency:"baseCurrency"},decls:21,vars:8,consts:[[1,"crypto-info",3,"click"],[1,"crypto-info__img",3,"src"],[1,"crypto-info__subtitle"],[1,"crypto-info__title"],[1,"crypto-info__content"],["inset","",1,"crypto-info__divider"]],template:function(t,s){1&t&&(e.TgZ(0,"mat-card",0),e.NdJ("click",function(){return s.showDetails()}),e._UZ(1,"img",1),e.TgZ(2,"mat-card-subtitle",2),e._uU(3),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"mat-card-title",3),e._uU(6),e.qZA(),e.TgZ(7,"mat-card-content",4),e.TgZ(8,"p"),e.TgZ(9,"b"),e._uU(10),e.qZA(),e.qZA(),e._UZ(11,"mat-divider",5),e.TgZ(12,"p"),e._uU(13),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.qZA(),e._UZ(16,"mat-divider",5),e.TgZ(17,"p"),e._uU(18,"Last update:"),e._UZ(19,"br"),e._uU(20),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.MGl("src","assets/crypto-icons/",s.cryptoInfo.cryptoCode,".png",e.LSH),e.xp6(2),e.Oqu(s.cryptoInfo.cryptoName),e.xp6(3),e.Oqu(s.cryptoCode),e.xp6(4),e.AsE("",s.cryptoInfo.exchangeRate," ",s.cryptoInfo.fiatCode,""),e.xp6(3),e.hij("bid: ",s.cryptoInfo.bidPrice,""),e.xp6(2),e.hij("ask: ",s.cryptoInfo.askPrice,""),e.xp6(5),e.Oqu(s.cryptoInfo.time))},directives:[y.a8,y.$j,y.n5,y.dn,Y.d],styles:['.crypto-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background-color:#a5d8ff;font-family:"Lucida Console","Courier New",monospace;border:3px solid grey;color:#fff;background-color:#5e2750;margin-bottom:10px}.crypto-info[_ngcontent-%COMP%]:hover{background-color:#3bc14a}.crypto-info__title[_ngcontent-%COMP%]{margin:10px}.crypto-info__subtitle[_ngcontent-%COMP%]{margin:5px;font-weight:500;color:#fff}.crypto-info__divider[_ngcontent-%COMP%]{background-color:#fff}.crypto-info__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.crypto-info__img[_ngcontent-%COMP%]{margin:5px}']}),r})();function G(r,a){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-single-crypto-info",2),e.qZA()),2&r){const t=a.$implicit,s=e.oxw();e.xp6(1),e.Q6J("cryptoCode",t)("baseCurrency",s.baseCurrency)}}let V=(()=>{class r{constructor(){this.cryptoSymbols=["BTC","ETH","ADA"],this.baseCurrency="USD",this.cryptosData=[]}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-crypto"]],decls:3,vars:1,consts:[[1,"crypto-container"],[4,"ngFor","ngForOf"],[3,"cryptoCode","baseCurrency"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.YNc(1,G,2,2,"div",1),e.qZA(),e._UZ(2,"router-outlet")),2&t&&(e.xp6(1),e.Q6J("ngForOf",s.cryptoSymbols))},directives:[C.sg,p.lC,B],styles:[".crypto-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.crypto-container__single-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}@media (max-width: 800px){.crypto-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}"]}),r})();var J=i(5319),Q=i(6693),z=i(9796),H=i(7393),f=i(377),v=i(5345);class K{constructor(a){this.resultSelector=a}call(a,t){return t.subscribe(new X(a,this.resultSelector))}}class X extends H.L{constructor(a,t,s=Object.create(null)){super(a),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(a){const t=this.iterators;(0,z.k)(a)?t.push(new _(a)):t.push("function"==typeof a[f.hZ]?new W(a[f.hZ]()):new q(this.destination,this,a))}_complete(){const a=this.iterators,t=a.length;if(this.unsubscribe(),0!==t){this.active=t;for(let s=0;s<t;s++){let n=a[s];n.stillUnsubscribed?this.destination.add(n.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const a=this.iterators,t=a.length,s=this.destination;for(let c=0;c<t;c++){let h=a[c];if("function"==typeof h.hasValue&&!h.hasValue())return}let n=!1;const o=[];for(let c=0;c<t;c++){let h=a[c],d=h.next();if(h.hasCompleted()&&(n=!0),d.done)return void s.complete();o.push(d.value)}this.resultSelector?this._tryresultSelector(o):s.next(o),n&&s.complete()}_tryresultSelector(a){let t;try{t=this.resultSelector.apply(this,a)}catch(s){return void this.destination.error(s)}this.destination.next(t)}}class W{constructor(a){this.iterator=a,this.nextResult=a.next()}hasValue(){return!0}next(){const a=this.nextResult;return this.nextResult=this.iterator.next(),a}hasCompleted(){const a=this.nextResult;return Boolean(a&&a.done)}}class _{constructor(a){this.array=a,this.index=0,this.length=0,this.length=a.length}[f.hZ](){return this}next(a){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class q extends v.Ds{constructor(a,t,s){super(a),this.parent=t,this.observable=s,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[f.hZ](){return this}next(){const a=this.buffer;return 0===a.length&&this.isComplete?{value:null,done:!0}:{value:a.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(a){this.buffer.push(a),this.parent.checkIterators()}subscribe(){return(0,v.ft)(this.observable,new v.IY(this))}}var tt=i(4186),et=i(2620);const O=function(r,a){return[r,a]},rt=function(){return["highs","lows"]},F=function(r){return[r]};function st(r,a){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"app-chart",1),e._UZ(2,"br"),e._UZ(3,"app-chart",2),e._UZ(4,"br"),e._UZ(5,"app-chart",3),e._UZ(6,"br"),e._UZ(7,"app-chart",4),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("values",e.WLB(9,O,t.dailyData.highs,t.dailyData.lows))("dates",t.dailyData.dates)("name",e.DdM(12,rt)),e.xp6(2),e.Q6J("values",e.VKq(13,F,t.dailyData.volumes))("dates",t.dailyData.dates),e.xp6(2),e.Q6J("values",e.WLB(15,O,t.intradayData.highs,t.intradayData.lows))("dates",t.intradayData.dates),e.xp6(2),e.Q6J("values",e.VKq(18,F,t.intradayData.volumes))("dates",t.intradayData.dates)}}const at=[{path:"",component:V},{path:":cryptoCode",component:(()=>{class r{constructor(t,s,n){this.activatedRoute=t,this.dataManagerService=s,this.baseCurrencyService=n,this.intradayData=new A,this.dailyData=new N,this.detailsSubscription=new J.w,this.cryptoCode="",this.activatedRoute.params.subscribe(o=>{this.cryptoCode=o.cryptoCode})}ngOnInit(){this.dataManagerService.sendRequestForDetails(this.cryptoCode,"USD"),this.detailsSubscription=function(...r){const a=r[r.length-1];return"function"==typeof a&&r.pop(),(0,Q.n)(r,void 0).lift(new K(a))}(this.dataManagerService.getIntradayExchangeRates(),this.dataManagerService.getDailyExchangeRates()).subscribe(t=>{console.log(t),this.intradayData=t[0],this.dailyData=t[1]})}ngOnDestroy(){this.detailsSubscription.unsubscribe()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(p.gz),e.Y36(R),e.Y36(tt.i))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-details"]],decls:1,vars:1,consts:[[4,"ngIf"],["title","Prices daily","type","scatter",3,"values","dates","name"],["title","Volumes daily","type","bar",3,"values","dates"],["title","Prices today","type","scatter",3,"values","dates"],["title","Volumes today","type","bar",3,"values","dates"]],template:function(t,s){1&t&&e.YNc(0,st,8,20,"div",0),2&t&&e.Q6J("ngIf",s.dailyData.dates.length>1)},directives:[C.O5,et.x],styles:[""]}),r})()}];let nt=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[p.Bz.forChild(at)],p.Bz]}),r})();var it=i(7441),ot=i(8295),L=i(3679),ct=i(2522),lt=i(1095),ht=i(3356);let ut=(()=>{class r{constructor(t,s){this.dataManagerService=t,this.dataApiService=s}resolve(t,s){return this.dataManagerService.sendRequestForDetails("BTC",this.dataManagerService.getBaseCurrency()),(0,M.D)([this.dataManagerService.getIntradayExchangeRates(),this.dataManagerService.getDailyExchangeRates()])}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(R),e.LFG(Z))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var dt=i(5209);let pt=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[ut],imports:[[C.ez,nt,it.LD,ot.lN,L.UX,ct.g0,L.u5,y.QW,Y.t,ht.o9,lt.ot,dt.m]]}),r})()}}]);